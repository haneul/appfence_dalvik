cscope 15 $HOME/src/tdroid/tdroid-2.1_r2.1p/dalvik/vm -q 0000015152 0003089043
	@AllocTracker.c

41 
	~"D®vik.h
"

43 
	#kMaxAÎocRecÜdSckD•th
 8

	)

44 
	#kNumAÎocRecÜds
 512

	)

49 
	sAÎocRecÜd
 {

50 
CÏssObjeù
* 
	mşazz
;

51 
u4
 
	msize
;

52 
u2
 
	mth»adId
;

56 cÚ¡ 
M‘hod
* 
	mm‘hod
;

57 
	mpc
;

58 } 
	m¡ackEËm
[
kMaxAÎocRecÜdSckD•th
];

73 
boŞ
 
	$dvmAÎocT¿ck”S¹up
()

76 
	`dvmIn™Mu‹x
(&
gDvm
.
®locT¿ck”Lock
);

79 
	`as£¹
(
gDvm
.
®locRecÜds
 =ğ
NULL
);

81  
Œue
;

82 
	}
}

87 
	$dvmAÎocT¿ck”Shutdown
()

89 
	`ä“
(
gDvm
.
®locRecÜds
);

90 
	`dvmDe¡royMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

91 
	}
}

105 
boŞ
 
	$dvmEÇbËAÎocT¿ck”
()

107 
boŞ
 
»suÉ
 = 
Œue
;

108 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

110 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
) {

111 
	`LOGI
("Enabling‡llocracker (%dƒntries / %d bytes)\n",

112 
kNumAÎocRecÜds
, (
AÎocRecÜd
) * kNumAllocRecords);

113 
gDvm
.
®locRecÜdH—d
 = gDvm.
®locRecÜdCouÁ
 = 0;

114 
gDvm
.
®locRecÜds
 =

115 (
AÎocRecÜd
*è
	`m®loc
((AÎocRecÜdè* 
kNumAÎocRecÜds
);

117 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
)

118 
»suÉ
 = 
çl£
;

121 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

122  
»suÉ
;

123 
	}
}

128 
	$dvmDi§bËAÎocT¿ck”
()

130 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

132 ià(
gDvm
.
®locRecÜds
 !ğ
NULL
) {

133 
	`ä“
(
gDvm
.
®locRecÜds
);

134 
gDvm
.
®locRecÜds
 = 
NULL
;

137 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

138 
	}
}

143 
	$g‘SckF¿mes
(
Th»ad
* 
£lf
, 
AÎocRecÜd
* 
pRec
)

145 
¡ackD•th
 = 0;

146 * 
å
;

148 
å
 = 
£lf
->
curF¿me
;

150 (
å
 !ğ
NULL
è&& (
¡ackD•th
 < 
kMaxAÎocRecÜdSckD•th
)) {

151 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

152 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

154 ià(!
	`dvmIsB»akF¿me
(
å
)) {

155 
pRec
->
¡ackEËm
[
¡ackD•th
].
m‘hod
 = method;

156 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

157 
pRec
->
¡ackEËm
[
¡ackD•th
].
pc
 = 0;

159 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 >ğ
m‘hod
->
š¢s
 &&

160 
§veA»a
->
xŒa
.
cu¼’tPc
 <

161 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

162 
pRec
->
¡ackEËm
[
¡ackD•th
].
pc
 =

163 (è(
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
);

165 
¡ackD•th
++;

168 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

169 
å
 = 
§veA»a
->
´evF¿me
;

173 
¡ackD•th
 < 
kMaxAÎocRecÜdSckD•th
) {

174 
pRec
->
¡ackEËm
[
¡ackD•th
].
m‘hod
 = 
NULL
;

175 
pRec
->
¡ackEËm
[
¡ackD•th
].
pc
 = 0;

176 
¡ackD•th
++;

178 
	}
}

183 
	$dvmDoT¿ckAÎoÿtiÚ
(
CÏssObjeù
* 
şazz
, 
size
)

185 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

186 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
)

187 
ba
;

189 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

190 ià(
£lf
 =ğ
NULL
) {

191 
	`LOGW
("allocracker:‚ohread\n");

192 
ba
;

196 ià(++
gDvm
.
®locRecÜdH—d
 =ğ
kNumAÎocRecÜds
)

197 
gDvm
.
®locRecÜdH—d
 = 0;

199 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[gDvm.
®locRecÜdH—d
];

201 
pRec
->
şazz
 = clazz;

202 
pRec
->
size
 = size;

203 
pRec
->
th»adId
 = 
£lf
->threadId;

204 
	`g‘SckF¿mes
(
£lf
, 
pRec
);

206 ià(
gDvm
.
®locRecÜdCouÁ
 < 
kNumAÎocRecÜds
)

207 
gDvm
.
®locRecÜdCouÁ
++;

209 
ba
:

210 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

211 
	}
}

262 cÚ¡ 
	gkMes§geH—d”L’
 = 15;

263 cÚ¡ 
	gkEÁryH—d”L’
 = 9;

264 cÚ¡ 
	gkSckF¿meL’
 = 8;

276 
šlše
 
	$h—dIndex
()

278  (
gDvm
.
®locRecÜdH—d
+1 + 
kNumAÎocRecÜds
 - gDvm.
®locRecÜdCouÁ
)

279 & (
kNumAÎocRecÜds
-1);

280 
	}
}

285 
	$dumpSŒšgTabË
(
Poš‹rS‘
* 
¡ršgs
)

287 
couÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
¡ršgs
);

288 
i
;

290 
i
 = 0; i < 
couÁ
; i++)

291 
	`´štf
(" %s\n", (cÚ¡ *è
	`dvmPoš‹rS‘G‘EÁry
(
¡ršgs
, 
i
));

292 
	}
}

298 cÚ¡ * 
	$g‘M‘hodSourûFe
(cÚ¡ 
M‘hod
* 
m‘hod
)

300 cÚ¡ * 
feName
 = 
	`dvmG‘M‘hodSourûFe
(
m‘hod
);

301 ià(
feName
 =ğ
NULL
)

302 
feName
 = "";

303  
feName
;

304 
	}
}

317 
boŞ
 
	$pİuÏ‹SŒšgTabËs
(
Poš‹rS‘
* 
şassNames
,

318 
Poš‹rS‘
* 
m‘hodNames
, Poš‹rS‘* 
feNames
)

320 
couÁ
 = 
gDvm
.
®locRecÜdCouÁ
;

321 
idx
 = 
	`h—dIndex
();

322 
şassCouÁ
, 
m‘hodCouÁ
, 
feCouÁ
;

324 
şassCouÁ
 = 
m‘hodCouÁ
 = 
feCouÁ
 = 0;

326 
couÁ
--) {

327 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[
idx
];

329 
	`dvmPoš‹rS‘AddEÁry
(
şassNames
, 
pRec
->
şazz
->
desütÜ
);

330 
şassCouÁ
++;

332 
i
;

333 
i
 = 0; i < 
kMaxAÎocRecÜdSckD•th
; i++) {

334 ià(
pRec
->
¡ackEËm
[
i
].
m‘hod
 =ğ
NULL
)

337 cÚ¡ 
M‘hod
* 
m‘hod
 = 
pRec
->
¡ackEËm
[
i
].method;

338 
	`dvmPoš‹rS‘AddEÁry
(
şassNames
, 
m‘hod
->
şazz
->
desütÜ
);

339 
şassCouÁ
++;

340 
	`dvmPoš‹rS‘AddEÁry
(
m‘hodNames
, 
m‘hod
->
Çme
);

341 
m‘hodCouÁ
++;

342 
	`dvmPoš‹rS‘AddEÁry
(
feNames
, 
	`g‘M‘hodSourûFe
(
m‘hod
));

343 
feCouÁ
++;

346 
idx
 = (idx + 1è& (
kNumAÎocRecÜds
-1);

349 
	`LOGI
("class %d/%d, method %d/%d, file %d/%d\n",

350 
	`dvmPoš‹rS‘G‘CouÁ
(
şassNames
), 
şassCouÁ
,

351 
	`dvmPoš‹rS‘G‘CouÁ
(
m‘hodNames
), 
m‘hodCouÁ
,

352 
	`dvmPoš‹rS‘G‘CouÁ
(
feNames
), 
feCouÁ
);

354  
Œue
;

355 
	}
}

367 
size_t
 
	$g’”©eBa£Ouut
(
u1
* 
±r
, 
size_t
 
ba£L’
,

368 cÚ¡ 
Poš‹rS‘
* 
şassNames
, cÚ¡ Poš‹rS‘* 
m‘hodNames
,

369 cÚ¡ 
Poš‹rS‘
* 
feNames
)

371 
u1
* 
ÜigPŒ
 = 
±r
;

372 
couÁ
 = 
gDvm
.
®locRecÜdCouÁ
;

373 
idx
 = 
	`h—dIndex
();

375 ià(
ÜigPŒ
 !ğ
NULL
) {

376 
	`£t1
(&
±r
[0], 
kMes§geH—d”L’
);

377 
	`£t1
(&
±r
[1], 
kEÁryH—d”L’
);

378 
	`£t1
(&
±r
[2], 
kSckF¿meL’
);

379 
	`£t2BE
(&
±r
[3], 
couÁ
);

380 
	`£t4BE
(&
±r
[5], 
ba£L’
);

381 
	`£t2BE
(&
±r
[9], 
	`dvmPoš‹rS‘G‘CouÁ
(
şassNames
));

382 
	`£t2BE
(&
±r
[11], 
	`dvmPoš‹rS‘G‘CouÁ
(
m‘hodNames
));

383 
	`£t2BE
(&
±r
[13], 
	`dvmPoš‹rS‘G‘CouÁ
(
feNames
));

385 
±r
 +ğ
kMes§geH—d”L’
;

387 
couÁ
--) {

388 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[
idx
];

391 
d•th
;

392 
d•th
 = 0; d•th < 
kMaxAÎocRecÜdSckD•th
; depth++) {

393 ià(
pRec
->
¡ackEËm
[
d•th
].
m‘hod
 =ğ
NULL
)

398 ià(
ÜigPŒ
 !ğ
NULL
) {

399 
	`£t4BE
(&
±r
[0], 
pRec
->
size
);

400 
	`£t2BE
(&
±r
[4], 
pRec
->
th»adId
);

401 
	`£t2BE
(&
±r
[6],

402 
	`dvmPoš‹rS‘Fšd
(
şassNames
, 
pRec
->
şazz
->
desütÜ
));

403 
	`£t1
(&
±r
[8], 
d•th
);

405 
±r
 +ğ
kEÁryH—d”L’
;

408 
i
;

409 
i
 = 0; i < 
d•th
; i++) {

410 ià(
ÜigPŒ
 !ğ
NULL
) {

411 cÚ¡ 
M‘hod
* 
m‘hod
 = 
pRec
->
¡ackEËm
[
i
].method;

412 
lšeNum
;

414 
lšeNum
 = 
	`dvmLšeNumFromPC
(
m‘hod
, 
pRec
->
¡ackEËm
[
i
].
pc
);

415 ià(
lšeNum
 > 32767)

416 
lšeNum
 = 32767;

418 
	`£t2BE
(&
±r
[0], 
	`dvmPoš‹rS‘Fšd
(
şassNames
,

419 
m‘hod
->
şazz
->
desütÜ
));

420 
	`£t2BE
(&
±r
[2], 
	`dvmPoš‹rS‘Fšd
(
m‘hodNames
,

421 
m‘hod
->
Çme
));

422 
	`£t2BE
(&
±r
[4], 
	`dvmPoš‹rS‘Fšd
(
feNames
,

423 
	`g‘M‘hodSourûFe
(
m‘hod
)));

424 
	`£t2BE
(&
±r
[6], (
u2
)
lšeNum
);

426 
±r
 +ğ
kSckF¿meL’
;

429 
idx
 = (idx + 1è& (
kNumAÎocRecÜds
-1);

432  
±r
 - 
ÜigPŒ
;

433 
	}
}

439 
size_t
 
	$compu‹SŒšgTabËSize
(
Poš‹rS‘
* 
¡ršgs
)

441 
couÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
¡ršgs
);

442 
size_t
 
size
 = 0;

443 
i
;

445 
i
 = 0; i < 
couÁ
; i++) {

446 cÚ¡ * 
¡r
 = (cÚ¡ *è
	`dvmPoš‹rS‘G‘EÁry
(
¡ršgs
, 
i
);

448 
size
 +ğ4 + 
	`dvmUtf8L’
(
¡r
) * 2;

451  
size
;

452 
	}
}

460 
	$cÚv”tUtf8ToUtf16BEUA
(
u1
* 
utf16SŒ
, cÚ¡ * 
utf8SŒ
)

462 
u1
* 
ÜigUtf16SŒ
 = 
utf16SŒ
;

464 *
utf8SŒ
 != '\0') {

465 
u2
 
utf16
 = 
	`dexG‘Utf16FromUtf8
(&
utf8SŒ
);

466 
	`£t2BE
(
utf16SŒ
, 
utf16
);

467 
utf16SŒ
 += 2;

470  (
utf16SŒ
 - 
ÜigUtf16SŒ
) / 2;

471 
	}
}

476 
size_t
 
	$ouutSŒšgTabË
(
Poš‹rS‘
* 
¡ršgs
, 
u1
* 
±r
)

478 
couÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
¡ršgs
);

479 
u1
* 
ÜigPŒ
 = 
±r
;

480 
i
;

482 
i
 = 0; i < 
couÁ
; i++) {

483 cÚ¡ * 
¡r
 = (cÚ¡ *è
	`dvmPoš‹rS‘G‘EÁry
(
¡ršgs
, 
i
);

484 
ch¬L’
;

487 
ch¬L’
 = 
	`cÚv”tUtf8ToUtf16BEUA
(&
±r
[4], 
¡r
);

488 
	`£t4BE
(&
±r
[0], 
ch¬L’
);

490 
±r
 +ğ4 + 
ch¬L’
 * 2;

493  
±r
 - 
ÜigPŒ
;

494 
	}
}

501 
boŞ
 
	$dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(
u1
** 
pD©a
, 
size_t
* 
pD©aL’
)

503 
boŞ
 
»suÉ
 = 
çl£
;

504 
u1
* 
bufãr
 = 
NULL
;

506 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

511 
Poš‹rS‘
* 
şassNames
 = 
NULL
;

512 
Poš‹rS‘
* 
m‘hodNames
 = 
NULL
;

513 
Poš‹rS‘
* 
feNames
 = 
NULL
;

521 
şassNames
 = 
	`dvmPoš‹rS‘AÎoc
(128);

522 
m‘hodNames
 = 
	`dvmPoš‹rS‘AÎoc
(128);

523 
feNames
 = 
	`dvmPoš‹rS‘AÎoc
(128);

524 ià(
şassNames
 =ğ
NULL
 || 
m‘hodNames
 =ğNULL || 
feNames
 == NULL) {

525 
	`LOGE
("Failed‡llocating…ointer sets\n");

526 
ba
;

529 ià(!
	`pİuÏ‹SŒšgTabËs
(
şassNames
, 
m‘hodNames
, 
feNames
))

530 
ba
;

532 ià(
çl£
) {

533 
	`´štf
("Classes:\n");

534 
	`dumpSŒšgTabË
(
şassNames
);

535 
	`´štf
("Methods:\n");

536 
	`dumpSŒšgTabË
(
m‘hodNames
);

537 
	`´štf
("Files:\n");

538 
	`dumpSŒšgTabË
(
feNames
);

546 
size_t
 
ba£Size
, 
tÙ®Size
;

547 
ba£Size
 = 
	`g’”©eBa£Ouut
(
NULL
, 0, 
şassNames
, 
m‘hodNames
, 
feNames
);

548 
	`as£¹
(
ba£Size
 > 0);

549 
tÙ®Size
 = 
ba£Size
;

550 
tÙ®Size
 +ğ
	`compu‹SŒšgTabËSize
(
şassNames
);

551 
tÙ®Size
 +ğ
	`compu‹SŒšgTabËSize
(
m‘hodNames
);

552 
tÙ®Size
 +ğ
	`compu‹SŒšgTabËSize
(
feNames
);

553 
	`LOGI
("G’”©ed AT, sizi %zd/%zd\n", 
ba£Size
, 
tÙ®Size
);

558 
u1
* 
¡rPŒ
;

560 
bufãr
 = (
u1
*è
	`m®loc
(
tÙ®Size
);

561 
¡rPŒ
 = 
bufãr
 + 
ba£Size
;

562 
	`g’”©eBa£Ouut
(
bufãr
, 
ba£Size
, 
şassNames
, 
m‘hodNames
, 
feNames
);

563 
¡rPŒ
 +ğ
	`ouutSŒšgTabË
(
şassNames
, strPtr);

564 
¡rPŒ
 +ğ
	`ouutSŒšgTabË
(
m‘hodNames
, strPtr);

565 
¡rPŒ
 +ğ
	`ouutSŒšgTabË
(
feNames
, strPtr);

566 ià(
¡rPŒ
 - 
bufãr
 !ğ()
tÙ®Size
) {

567 
	`LOGE
("sizmism©ch (%d v %zd)\n", 
¡rPŒ
 - 
bufãr
, 
tÙ®Size
);

568 
	`dvmAbÜt
();

572 *
pD©a
 = 
bufãr
;

573 *
pD©aL’
 = 
tÙ®Size
;

574 
bufãr
 = 
NULL
;

575 
»suÉ
 = 
Œue
;

577 
ba
:

578 
	`dvmPoš‹rS‘F»e
(
şassNames
);

579 
	`dvmPoš‹rS‘F»e
(
m‘hodNames
);

580 
	`dvmPoš‹rS‘F»e
(
feNames
);

581 
	`ä“
(
bufãr
);

582 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

584  
»suÉ
;

585 
	}
}

593 
	$dvmDumpT¿ckedAÎoÿtiÚs
(
boŞ
 
’abË
)

595 ià(
’abË
)

596 
	`dvmEÇbËAÎocT¿ck”
();

598 
	`dvmLockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

599 ià(
gDvm
.
®locRecÜds
 =ğ
NULL
)

600 
ba
;

606 
idx
 = 
	`h—dIndex
();

607 
couÁ
 = 
gDvm
.
®locRecÜdCouÁ
;

609 
	`LOGI
("Tracked‡llocations, (head=%d count=%d)\n",

610 
gDvm
.
®locRecÜdH—d
, 
couÁ
);

611 
couÁ
--) {

612 
AÎocRecÜd
* 
pRec
 = &
gDvm
.
®locRecÜds
[
idx
];

613 
	`LOGI
(" T=%-2d %6d %s\n",

614 
pRec
->
th»adId
,…Rec->
size
,…Rec->
şazz
->
desütÜ
);

616 ià(
Œue
) {

617 
i
;

618 
i
 = 0; i < 
kMaxAÎocRecÜdSckD•th
; i++) {

619 ià(
pRec
->
¡ackEËm
[
i
].
m‘hod
 =ğ
NULL
)

622 cÚ¡ 
M‘hod
* 
m‘hod
 = 
pRec
->
¡ackEËm
[
i
].method;

623 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

624 
	`LOGI
(" %s.%s (Native)\n",

625 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

627 
	`LOGI
(" %s.%s +%d\n",

628 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

629 
pRec
->
¡ackEËm
[
i
].
pc
);

635 ià((
couÁ
 % 5) == 0)

636 
	`u¦“p
(40000);

638 
idx
 = (idx + 1è& (
kNumAÎocRecÜds
-1);

641 
ba
:

642 
	`dvmUÆockMu‹x
(&
gDvm
.
®locT¿ck”Lock
);

643 ià(
çl£
) {

644 
u1
* 
d©a
;

645 
size_t
 
d©aL’
;

646 ià(
	`dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(&
d©a
, &
d©aL’
))

647 
	`ä“
(
d©a
);

649 
	}
}

	@AllocTracker.h

19 #iâdeà
_DALVIK_ALLOCTRACKER


20 
	#_DALVIK_ALLOCTRACKER


	)

23 
boŞ
 
dvmAÎocT¿ck”S¹up
();

24 
dvmAÎocT¿ck”Shutdown
();

26 
	gAÎocRecÜd
;

27 
AÎocRecÜd
 
	tAÎocRecÜd
;

32 
boŞ
 
dvmEÇbËAÎocT¿ck”
();

37 
dvmDi§bËAÎocT¿ck”
();

42 
	#dvmT¿ckAÎoÿtiÚ
(
_şazz
, 
_size
) \

44 ià(
gDvm
.
®locRecÜds
 !ğ
NULL
) \

45 
	`dvmDoT¿ckAÎoÿtiÚ
(
_şazz
, 
_size
); \

46 }

	)

47 
dvmDoT¿ckAÎoÿtiÚ
(
CÏssObjeù
* 
şazz
, 
size
);

55 
boŞ
 
dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(
u1
** 
pD©a
, 
size_t
* 
pD©aL’
);

61 
dvmDumpT¿ckedAÎoÿtiÚs
(
boŞ
 
’abË
);

	@Atomic.h

19 #iâdeà
_DALVIK_ATOMIC


20 
	#_DALVIK_ATOMIC


	)

22 
	~<uts/Atomic.h
>

34 
	#MEM_BARRIER
(èdØ{ 
asm
 vŞ©("":::"memÜy"); } 0)

	)

45 
	#ATOMIC_CMP_SWAP
(
_addr
, 
_Şd
, 
_Ãw
) \

46 (
	`ªdroid_©omic_cmpxchg
((
_Şd
), (
_Ãw
), (
_addr
)è=ğ0)

	)

	@AtomicCache.c

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

28 
	#BOOL_TO_INT
(
x
è(x)

	)

31 
	#CPU_CACHE_WIDTH
 32

	)

32 
	#CPU_CACHE_WIDTH_1
 (
CPU_CACHE_WIDTH
-1)

	)

34 
	#ATOMIC_LOCK_FLAG
 (1 << 31)

	)

39 
AtomicCache
* 
	$dvmAÎocAtomicCache
(
numEÁr›s
)

41 
AtomicCache
* 
ÃwCache
;

43 
ÃwCache
 = (
AtomicCache
*è
	`ÿÎoc
(1, (AtomicCache));

44 ià(
ÃwCache
 =ğ
NULL
)

45  
NULL
;

47 
ÃwCache
->
numEÁr›s
 =‚umEntries;

49 
ÃwCache
->
’ŒyAÎoc
 = 
	`ÿÎoc
(1,

50 (
AtomicCacheEÁry
è* 
numEÁr›s
 + 
CPU_CACHE_WIDTH
);

51 ià(
ÃwCache
->
’ŒyAÎoc
 =ğ
NULL
)

52  
NULL
;

59 
	`as£¹
((
AtomicCacheEÁry
) == 16);

60 
ÃwCache
->
’Œ›s
 = (
AtomicCacheEÁry
*)

61 (((è
ÃwCache
->
’ŒyAÎoc
 + 
CPU_CACHE_WIDTH_1
) & ~CPU_CACHE_WIDTH_1);

63  
ÃwCache
;

64 
	}
}

69 
	$dvmF»eAtomicCache
(
AtomicCache
* 
ÿche
)

71 ià(
ÿche
 !ğ
NULL
) {

72 
	`ä“
(
ÿche
->
’ŒyAÎoc
);

73 
	`ä“
(
ÿche
);

75 
	}
}

86 
dvmUpd©eAtomicCache
(
u4
 
key1
, u4 
key2
, u4 
v®ue
, 
AtomicCacheEÁry
* 
pEÁry
,

87 
u4
 
fœ¡V”siÚ


88 #ià
CALC_CACHE_STATS
 > 0

89 , 
AtomicCache
* 
pCache


107 ià((
	gfœ¡V”siÚ
 & 
	gATOMIC_LOCK_FLAG
) != 0 ||

108 !
ATOMIC_CMP_SWAP
((vŞ©
s4
*è&
pEÁry
->
v”siÚ
,

109 
fœ¡V”siÚ
, fœ¡V”siÚ | 
ATOMIC_LOCK_FLAG
))

114 #ià
CALC_CACHE_STATS
 > 0

115 
	gpCache
->
	gç
++;

121 
as£¹
((
fœ¡V”siÚ
 & 0x01) == 0);

123 #ià
CALC_CACHE_STATS
 > 0

125 ià(
	gpEÁry
->
	gkey1
 == 0)

126 
pCache
->
fls
++;

128 
	gpCache
->
	gmis£s
++;

132 
	gpEÁry
->
	gv”siÚ
++;

133 
MEM_BARRIER
();

135 
	gpEÁry
->
	gkey1
 = 
key1
;

136 
	gpEÁry
->
	gkey2
 = 
key2
;

137 
	gpEÁry
->
	gv®ue
 = 
v®ue
;

140 
	gpEÁry
->
	gv”siÚ
++;

141 
MEM_BARRIER
();

147 
	gfœ¡V”siÚ
 += 2;

148 ià(!
ATOMIC_CMP_SWAP
((vŞ©
s4
*è&
pEÁry
->
v”siÚ
,

149 
fœ¡V”siÚ
 | 
ATOMIC_LOCK_FLAG
, firstVersion))

152 
dvmAbÜt
();

160 
	$dvmDumpAtomicCacheSts
(cÚ¡ 
AtomicCache
* 
pCache
)

162 ià(
pCache
 =ğ
NULL
)

164 
	`dvmF´štf
(
¡dout
,

166 
pCache
->
ŒivŸl
,…Cache->
ç
,…Cache->
h™s
,

167 
pCache
->
mis£s
,…Cache->
fls
,

168 (
pCache
->
h™s
 == 0) ? 0 :

169 
pCache
->
h™s
 * 100 /

170 (
pCache
->
ç
 +…Cache->
h™s
 +…Cache->
mis£s
 +…Cache->
fls
),

171 
pCache
->
numEÁr›s
);

172 
	}
}

	@AtomicCache.h

19 #iâdeà
_DALVIK_ATOMICCACHE


20 
	#_DALVIK_ATOMICCACHE


	)

25 
	#CALC_CACHE_STATS
 0

	)

34 
	sAtomicCacheEÁry
 {

35 
u4
 
	mkey1
;

36 
u4
 
	mkey2
;

37 
u4
 
	mv®ue
;

38 vŞ©
u4
 
	mv”siÚ
;

39 } 
	tAtomicCacheEÁry
;

48 
	sAtomicCache
 {

49 
AtomicCacheEÁry
* 
	m’Œ›s
;

50 
	mnumEÁr›s
;

52 * 
	m’ŒyAÎoc
;

55 
	mŒivŸl
;

56 
	mç
;

57 
	mh™s
;

58 
	mmis£s
;

59 
	mfls
;

60 } 
	tAtomicCache
;

91 #ià
CALC_CACHE_STATS
 > 0

92 
	#CACHE_XARG
(
_v®ue
è,
	)
_value

94 
	#CACHE_XARG
(
_v®ue
)

	)

96 
	#ATOMIC_CACHE_LOOKUP
(
_ÿche
, 
_ÿcheSize
, 
_key1
, 
_key2
) ({ \

97 
AtomicCacheEÁry
* 
pEÁry
; \

98 
hash
; \

99 
u4
 
fœ¡V”siÚ
; \

100 
u4
 
v®ue
; \

103 
hash
 = (((
u4
)(
_key1
è>> 2è^ (u4)(
_key2
)è& ((
_ÿcheSize
)-1); \

104 
pEÁry
 = (
_ÿche
)->
’Œ›s
 + 
hash
; \

107 
fœ¡V”siÚ
 = 
pEÁry
->
v”siÚ
; \

109 ià(
pEÁry
->
key1
 =ğ(
u4
)(
_key1
è&&…EÁry->
key2
 =ğ(u4)(
_key2
)) { \

116 
v®ue
 = 
pEÁry
->value; \

118 ià((
fœ¡V”siÚ
 & 0x01è!ğ0 || fœ¡V”siÚ !ğ
pEÁry
->
v”siÚ
) \

125 ià(
CALC_CACHE_STATS
) \

126 (
_ÿche
)->
ç
++; \

127 
v®ue
 = (
u4
è
ATOMIC_CACHE_CALC
; \

130 ià(
CALC_CACHE_STATS
) \

131 (
_ÿche
)->
h™s
++; \

140 
v®ue
 = (
u4
è
ATOMIC_CACHE_CALC
; \

141 
	`dvmUpd©eAtomicCache
((
u4
è(
_key1
), (u4è(
_key2
), 
v®ue
, 
pEÁry
, \

142 
fœ¡V”siÚ
 
	`CACHE_XARG
(
_ÿche
) ); \

144 
v®ue
; \

145 })

	)

150 
AtomicCache
* 
dvmAÎocAtomicCache
(
numEÁr›s
);

155 
dvmF»eAtomicCache
(
AtomicCache
* 
ÿche
);

163 
dvmUpd©eAtomicCache
(
u4
 
key1
, u4 
key2
, u4 
v®ue
, 
AtomicCacheEÁry
* 
pEÁry
,

164 
u4
 
fœ¡V”siÚ


165 #ià
CALC_CACHE_STATS
 > 0

166 , 
AtomicCache
* 
pCache


173 
dvmDumpAtomicCacheSts
(cÚ¡ 
AtomicCache
* 
pCache
);

	@Bits.h

21 #iâdeà
_DALVIK_BITS


22 
	#_DALVIK_BITS


	)

24 
	~"CommÚ.h
"

25 
	~"IÆšes.h
"

27 
	~<¡dlib.h
>

28 
	~<¡ršg.h
>

33 
INLINE
 
u1
 
	$g‘1
(cÚ¡ * 
pSrc
)

35  *
pSrc
;

36 
	}
}

41 
INLINE
 
u2
 
	$g‘2BE
(cÚ¡* 
pSrc
)

43  (
pSrc
[0] << 8) |…Src[1];

44 
	}
}

49 
INLINE
 
u4
 
	$g‘4BE
(cÚ¡* 
pSrc
)

51  (
pSrc
[0] << 24) | (pSrc[1] << 16) | (pSrc[2] << 8) |…Src[3];

52 
	}
}

57 
INLINE
 
u8
 
	$g‘8BE
(cÚ¡* 
pSrc
)

59 
u4
 
low
, 
high
;

61 
high
 = 
pSrc
[0];

62 
high
 = (high << 8è| 
pSrc
[1];

63 
high
 = (high << 8è| 
pSrc
[2];

64 
high
 = (high << 8è| 
pSrc
[3];

65 
low
 = 
pSrc
[4];

66 
low
 = (low << 8è| 
pSrc
[5];

67 
low
 = (low << 8è| 
pSrc
[6];

68 
low
 = (low << 8è| 
pSrc
[7];

70  ((
u8
è
high
 << 32è| (u8è
low
;

71 
	}
}

76 
INLINE
 
u2
 
	$g‘2LE
(cÚ¡* 
pSrc
)

78  
pSrc
[0] | (pSrc[1] << 8);

79 
	}
}

84 
INLINE
 
u4
 
	$g‘4LE
(cÚ¡* 
pSrc
)

86 
u4
 
»suÉ
;

88 
»suÉ
 = 
pSrc
[0];

89 
»suÉ
 |ğ
pSrc
[1] << 8;

90 
»suÉ
 |ğ
pSrc
[2] << 16;

91 
»suÉ
 |ğ
pSrc
[3] << 24;

93  
»suÉ
;

94 
	}
}

99 
INLINE
 
u8
 
	$g‘8LE
(cÚ¡* 
pSrc
)

101 
u4
 
low
, 
high
;

103 
low
 = 
pSrc
[0];

104 
low
 |ğ
pSrc
[1] << 8;

105 
low
 |ğ
pSrc
[2] << 16;

106 
low
 |ğ
pSrc
[3] << 24;

107 
high
 = 
pSrc
[4];

108 
high
 |ğ
pSrc
[5] << 8;

109 
high
 |ğ
pSrc
[6] << 16;

110 
high
 |ğ
pSrc
[7] << 24;

111  ((
u8
è
high
 << 32è| (u8è
low
;

112 
	}
}

117 
INLINE
 
u1
 
	$»ad1
(cÚ¡ ** 
µSrc
)

119  *(*
µSrc
)++;

120 
	}
}

125 
INLINE
 
u2
 
	$»ad2BE
(cÚ¡** 
µSrc
)

127 cÚ¡ * 
pSrc
 = *
µSrc
;

129 *
µSrc
 = 
pSrc
 + 2;

130  
pSrc
[0] << 8 |…Src[1];

131 
	}
}

136 
INLINE
 
u4
 
	$»ad4BE
(cÚ¡** 
µSrc
)

138 cÚ¡ * 
pSrc
 = *
µSrc
;

139 
u4
 
»suÉ
;

141 
»suÉ
 = 
pSrc
[0] << 24;

142 
»suÉ
 |ğ
pSrc
[1] << 16;

143 
»suÉ
 |ğ
pSrc
[2] << 8;

144 
»suÉ
 |ğ
pSrc
[3];

146 *
µSrc
 = 
pSrc
 + 4;

147  
»suÉ
;

148 
	}
}

153 
INLINE
 
u8
 
	$»ad8BE
(cÚ¡** 
µSrc
)

155 cÚ¡ * 
pSrc
 = *
µSrc
;

156 
u4
 
low
, 
high
;

158 
high
 = 
pSrc
[0];

159 
high
 = (high << 8è| 
pSrc
[1];

160 
high
 = (high << 8è| 
pSrc
[2];

161 
high
 = (high << 8è| 
pSrc
[3];

162 
low
 = 
pSrc
[4];

163 
low
 = (low << 8è| 
pSrc
[5];

164 
low
 = (low << 8è| 
pSrc
[6];

165 
low
 = (low << 8è| 
pSrc
[7];

167 *
µSrc
 = 
pSrc
 + 8;

168  ((
u8
è
high
 << 32è| (u8è
low
;

169 
	}
}

174 
INLINE
 
u2
 
	$»ad2LE
(cÚ¡** 
µSrc
)

176 cÚ¡ * 
pSrc
 = *
µSrc
;

177 *
µSrc
 = 
pSrc
 + 2;

178  
pSrc
[0] |…Src[1] << 8;

179 
	}
}

184 
INLINE
 
u4
 
	$»ad4LE
(cÚ¡** 
µSrc
)

186 cÚ¡ * 
pSrc
 = *
µSrc
;

187 
u4
 
»suÉ
;

189 
»suÉ
 = 
pSrc
[0];

190 
»suÉ
 |ğ
pSrc
[1] << 8;

191 
»suÉ
 |ğ
pSrc
[2] << 16;

192 
»suÉ
 |ğ
pSrc
[3] << 24;

194 *
µSrc
 = 
pSrc
 + 4;

195  
»suÉ
;

196 
	}
}

201 
INLINE
 
u8
 
	$»ad8LE
(cÚ¡** 
µSrc
)

203 cÚ¡ * 
pSrc
 = *
µSrc
;

204 
u4
 
low
, 
high
;

206 
low
 = 
pSrc
[0];

207 
low
 |ğ
pSrc
[1] << 8;

208 
low
 |ğ
pSrc
[2] << 16;

209 
low
 |ğ
pSrc
[3] << 24;

210 
high
 = 
pSrc
[4];

211 
high
 |ğ
pSrc
[5] << 8;

212 
high
 |ğ
pSrc
[6] << 16;

213 
high
 |ğ
pSrc
[7] << 24;

215 *
µSrc
 = 
pSrc
 + 8;

216  ((
u8
è
high
 << 32è| (u8è
low
;

217 
	}
}

222 
INLINE
 
	$skUtf8SŒšg
(cÚ¡** 
µSrc
)

224 
u4
 
Ëngth
 = 
	`»ad4BE
(
µSrc
);

226 (*
µSrc
è+ğ
Ëngth
;

227 
	}
}

234 
INLINE
 
	$»adUtf8SŒšg
(cÚ¡** 
µSrc
, * 
buf
, 
size_t
 
bufL’
)

236 
u4
 
Ëngth
 = 
	`»ad4BE
(
µSrc
);

237 
size_t
 
cİyL’
 = (
Ëngth
 < 
bufL’
) ?†ength : bufLen-1;

239 
	`memıy
(
buf
, *
µSrc
, 
cİyL’
);

240 
buf
[
cİyL’
] = '\0';

242 (*
µSrc
è+ğ
Ëngth
;

243  
Ëngth
;

244 
	}
}

252 
INLINE
 * 
	$»adNewUtf8SŒšg
(cÚ¡** 
µSrc
, 
size_t
* 
pL’gth
)

254 
u4
 
Ëngth
 = 
	`»ad4BE
(
µSrc
);

255 * 
buf
;

257 
buf
 = (*è
	`m®loc
(
Ëngth
+1);

259 
	`memıy
(
buf
, *
µSrc
, 
Ëngth
);

260 
buf
[
Ëngth
] = '\0';

262 (*
µSrc
è+ğ
Ëngth
;

264 *
pL’gth
 = 
Ëngth
;

265  
buf
;

266 
	}
}

272 
INLINE
 
	$£t1
(
u1
* 
buf
, u1 
v®
)

274 *
buf
 = (
u1
)(
v®
);

275 
	}
}

280 
INLINE
 
	$£t2BE
(
u1
* 
buf
, 
u2
 
v®
)

282 *
buf
++ = (
u1
)(
v®
 >> 8);

283 *
buf
 = (
u1
)(
v®
);

284 
	}
}

289 
INLINE
 
	$£t4BE
(
u1
* 
buf
, 
u4
 
v®
)

291 *
buf
++ = (
u1
)(
v®
 >> 24);

292 *
buf
++ = (
u1
)(
v®
 >> 16);

293 *
buf
++ = (
u1
)(
v®
 >> 8);

294 *
buf
 = (
u1
)(
v®
);

295 
	}
}

300 
INLINE
 
	$£t8BE
(
u1
* 
buf
, 
u8
 
v®
)

302 *
buf
++ = (
u1
)(
v®
 >> 56);

303 *
buf
++ = (
u1
)(
v®
 >> 48);

304 *
buf
++ = (
u1
)(
v®
 >> 40);

305 *
buf
++ = (
u1
)(
v®
 >> 32);

306 *
buf
++ = (
u1
)(
v®
 >> 24);

307 *
buf
++ = (
u1
)(
v®
 >> 16);

308 *
buf
++ = (
u1
)(
v®
 >> 8);

309 *
buf
 = (
u1
)(
v®
);

310 
	}
}

315 
INLINE
 
	$£t2LE
(
u1
* 
buf
, 
u2
 
v®
)

317 *
buf
++ = (
u1
)(
v®
);

318 *
buf
 = (
u1
)(
v®
 >> 8);

319 
	}
}

324 
INLINE
 
	$£t4LE
(
u1
* 
buf
, 
u4
 
v®
)

326 *
buf
++ = (
u1
)(
v®
);

327 *
buf
++ = (
u1
)(
v®
 >> 8);

328 *
buf
++ = (
u1
)(
v®
 >> 16);

329 *
buf
 = (
u1
)(
v®
 >> 24);

330 
	}
}

335 
INLINE
 
	$£t8LE
(
u1
* 
buf
, 
u8
 
v®
)

337 *
buf
++ = (
u1
)(
v®
);

338 *
buf
++ = (
u1
)(
v®
 >> 8);

339 *
buf
++ = (
u1
)(
v®
 >> 16);

340 *
buf
++ = (
u1
)(
v®
 >> 24);

341 *
buf
++ = (
u1
)(
v®
 >> 32);

342 *
buf
++ = (
u1
)(
v®
 >> 40);

343 *
buf
++ = (
u1
)(
v®
 >> 48);

344 *
buf
 = (
u1
)(
v®
 >> 56);

345 
	}
}

350 
INLINE
 
	$£tUtf8SŒšg
(
u1
* 
buf
, cÚ¡ u1* 
¡r
)

352 
u4
 
¡rL’
 = 
	`¡¾’
((cÚ¡ *)
¡r
);

354 
	`£t4BE
(
buf
, 
¡rL’
);

355 
	`memıy
(
buf
 + (
u4
), 
¡r
, 
¡rL’
);

356 
	}
}

	@CheckJni.c

33 
	~"D®vik.h
"

34 
	~"JniIÁ”Çl.h
"

36 
	~<zlib.h
>

38 
abÜtMaybe
();

63 
	$checkC®lCommÚ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

64 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

66 
	`as£¹
(
pResuÉ
->
l
 !ğ
NULL
);

67 
Objeù
* 
»suÉObj
 = (Objeù*è
pResuÉ
->
l
;

68 
CÏssObjeù
* 
objCÏzz
 = 
»suÉObj
->
şazz
;

74 cÚ¡ * 
deşTy³
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘hod
->
´ÙÙy³
);

75 cÚ¡ * 
objTy³
 = 
objCÏzz
->
desütÜ
;

76 ià(
	`¡rcmp
(
deşTy³
, 
objTy³
) == 0) {

78 
	`LOGV
("Check %s.%s: %s io %s (FAST-OK)\n",

79 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
objTy³
, 
deşTy³
);

91 
CÏssObjeù
* 
deşCÏzz
;

93 
deşCÏzz
 = 
	`dvmLookupCÏss
(
deşTy³
, 
m‘hod
->
şazz
->
şassLßd”
, 
çl£
);

94 ià(
deşCÏzz
 =ğ
NULL
) {

95 
	`LOGW
("JNI WARNING: method declaredo„eturn '%s'„eturned '%s'\n",

96 
deşTy³
, 
objTy³
);

97 
	`LOGW
(" failed in %s.%s ('%s'‚ot found)\n",

98 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
deşTy³
);

99 
	`abÜtMaybe
();

102 ià(!
	`dvmIn¡ªûof
(
objCÏzz
, 
deşCÏzz
)) {

103 
	`LOGW
("JNI WARNING: method declaredo„eturn '%s'„eturned '%s'\n",

104 
deşTy³
, 
objTy³
);

105 
	`LOGW
(" failed in %s.%s\n",

106 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

107 
	`abÜtMaybe
();

110 
	`LOGV
("Check %s.%s: %s io %s (SLOW-OK)\n",

111 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
objTy³
, 
deşTy³
);

114 
	}
}

122 
šlše
 
boŞ
 
	$ÿÎN“dsCheck
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

123 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

125  (
m‘hod
->
shÜty
[0] =ğ'L' && !
	`dvmCheckExû±iÚ
(
£lf
) &&

126 
pResuÉ
->
l
 !ğ
NULL
);

127 
	}
}

132 
	$dvmCheckC®lJNIM‘hod_g’”®
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

133 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

135 
	`dvmC®lJNIM‘hod_g’”®
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

136 ià(
	`ÿÎN“dsCheck
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
))

137 
	`checkC®lCommÚ
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

138 
	}
}

143 
	$dvmCheckC®lJNIM‘hod_synchrÚized
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

144 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

146 
	`dvmC®lJNIM‘hod_synchrÚized
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

147 ià(
	`ÿÎN“dsCheck
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
))

148 
	`checkC®lCommÚ
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

149 
	}
}

154 
	$dvmCheckC®lJNIM‘hod_vœtu®NoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

155 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

157 
	`dvmC®lJNIM‘hod_vœtu®NoRef
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

158 ià(
	`ÿÎN“dsCheck
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
))

159 
	`checkC®lCommÚ
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

160 
	}
}

165 
	$dvmCheckC®lJNIM‘hod_¡©icNoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

166 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

168 
	`dvmC®lJNIM‘hod_¡©icNoRef
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

169 ià(
	`ÿÎN“dsCheck
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
))

170 
	`checkC®lCommÚ
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

171 
	}
}

180 
	#JNI_ENTER
(è
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
)

	)

181 
	#JNI_EXIT
(è
	`dvmChªgeStus
(
NULL
, 
THREAD_NATIVE
)

	)

183 
	#BASE_ENV
(
_’v
è(((
JNIEnvExt
*)_’v)->
ba£FuncTabË
)

	)

184 
	#BASE_VM
(
_vm
è(((
JavaVMExt
*)_vm)->
ba£FuncTabË
)

	)

186 
	#kRedundªtDœeùBufãrTe¡
 
çl£


	)

191 
	#kFÏg_DeçuÉ
 0x0000

	)

193 
	#kFÏg_Cr™Bad
 0x0000

	)

194 
	#kFÏg_Cr™Okay
 0x0001

	)

195 
	#kFÏg_Cr™G‘
 0x0002

	)

196 
	#kFÏg_Cr™R–—£
 0x0003

	)

197 
	#kFÏg_Cr™Mask
 0x0003

	)

199 
	#kFÏg_ExûpBad
 0x0000

	)

200 
	#kFÏg_ExûpOkay
 0x0004

	)

206 
	#CHECK_ENTER
(
_’v
, 
_æags
) \

208 
	`JNI_TRACE
(
Œue
,rue); \

209 
	`checkTh»ad
(
_’v
, 
_æags
, 
__FUNCTION__
); \

210 } 
çl£
)

	)

212 
	#CHECK_EXIT
(
_’v
) \

213 dØ{ 
	`JNI_TRACE
(
çl£
, 
Œue
); } çl£)

	)

224 
	#CHECK_VMENTER
(
_vm
, 
_hasm‘h
) \

225 dØ{ 
	`JNI_TRACE
(
Œue
, 
_hasm‘h
); } 
çl£
)

	)

226 
	#CHECK_VMEXIT
(
_vm
, 
_hasm‘h
) \

227 dØ{ 
	`JNI_TRACE
(
çl£
, 
_hasm‘h
); } çl£)

	)

229 
	#CHECK_FIELD_TYPE
(
_’v
, 
_obj
, 
_f›ldid
, 
_´im
, 
_is¡©ic
) \

230 
	`checkF›ldTy³
(
_’v
, 
_obj
, 
_f›ldid
, 
_´im
, 
_is¡©ic
, 
__FUNCTION__
)

	)

231 
	#CHECK_INST_FIELD_ID
(
_’v
, 
_obj
, 
_f›ldid
) \

232 
	`checkIn¡ªûF›ldID
(
_’v
, 
_obj
, 
_f›ldid
, 
__FUNCTION__
)

	)

233 
	#CHECK_CLASS
(
_’v
, 
_şazz
) \

234 
	`checkCÏss
(
_’v
, 
_şazz
, 
__FUNCTION__
)

	)

235 
	#CHECK_STRING
(
_’v
, 
_¡r
) \

236 
	`checkSŒšg
(
_’v
, 
_¡r
, 
__FUNCTION__
)

	)

237 
	#CHECK_UTF_STRING
(
_’v
, 
_¡r
, 
_nuÎok
) \

238 
	`checkUtfSŒšg
(
_’v
, 
_¡r
, 
_nuÎok
, 
__FUNCTION__
)

	)

239 
	#CHECK_CLASS_NAME
(
_’v
, 
_¡r
) \

240 
	`checkCÏssName
(
_’v
, 
_¡r
, 
__FUNCTION__
)

	)

241 
	#CHECK_OBJECT
(
_’v
, 
_obj
) \

242 
	`checkObjeù
(
_’v
, 
_obj
, 
__FUNCTION__
)

	)

243 
	#CHECK_ARRAY
(
_’v
, 
_¬¿y
) \

244 
	`checkA¼ay
(
_’v
, 
_¬¿y
, 
__FUNCTION__
)

	)

245 
	#CHECK_RELEASE_MODE
(
_’v
, 
_mode
) \

246 
	`checkR–—£Mode
(
_’v
, 
_mode
, 
__FUNCTION__
)

	)

247 
	#CHECK_LENGTH_POSITIVE
(
_’v
, 
_Ëngth
) \

248 
	`checkL’gthPos™ive
(
_’v
, 
_Ëngth
, 
__FUNCTION__
)

	)

249 
	#CHECK_NON_NULL
(
_’v
, 
_±r
) \

250 
	`checkNÚNuÎ
(
_’v
, 
_±r
, 
__FUNCTION__
)

	)

252 
	#CHECK_SIG
(
_’v
, 
_m‘hid
, 
_sigby‹
, 
_is¡©ic
) \

253 
	`checkSig
(
_’v
, 
_m‘hid
, 
_sigby‹
, 
_is¡©ic
, 
__FUNCTION__
)

	)

258 
	#JNI_TRACE
(
_’Œy
, 
_hasm‘h
) \

260 ià(
gDvm
.
v”bo£Jni
 && (
_’Œy
)) { \

261 cÚ¡ * 
şassDesütÜ
 = "???"; \

262 cÚ¡ * 
m‘hodName
 = "???"; \

263 ià(
_hasm‘h
) { \

264 cÚ¡ 
M‘hod
* 
m‘h
 = 
	`dvmG‘Cu¼’tJNIM‘hod
(); \

265 
şassDesütÜ
 = 
m‘h
->
şazz
->
desütÜ
; \

266 
m‘hodName
 = 
m‘h
->
Çme
; \

269 
	`LOGI
("JNI: %s (from %s.%s)", \

270 (
__FUNCTION__
)+6, 
şassDesütÜ
, 
m‘hodName
); \

272 } 
çl£
)

	)

279 
	$showLoÿtiÚ
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ * 
func
)

281 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

282 
	`LOGW
(" in %s.%s %s (%s)\n",

283 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
, 
func
 + 6);

284 
	`ä“
(
desc
);

285 
	}
}

290 
	$abÜtMaybe
()

292 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvm
.
vmLi¡
;

293 ià(
vm
->
w¬nE¼Ü
) {

294 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

295 
	`dvmAbÜt
();

297 
	}
}

316 
	$checkTh»ad
(
JNIEnv
* 
’v
, 
æags
, cÚ¡ * 
func
)

318 
JNIEnvExt
* 
th»adEnv
;

319 
boŞ
 
´štW¬n
 = 
çl£
;

320 
boŞ
 
´štExû±iÚ
 = 
çl£
;

323 
th»adEnv
 = 
	`dvmG‘JNIEnvFÜTh»ad
();

329 ià(
th»adEnv
 =ğ
NULL
) {

330 
	`LOGE
("JNI ERROR:‚on-VMhread making JNI calls\n");

332 
	`dvmAbÜt
();

333 } ià((
JNIEnvExt
*è
’v
 !ğ
th»adEnv
) {

334 ià(
	`dvmTh»adS–f
()->
th»adId
 !ğ
th»adEnv
->
’vTh»adId
) {

335 
	`LOGE
("JNI:hreadEnv !=hread->env?\n");

336 
	`dvmAbÜt
();

339 
	`LOGW
("JNI WARNING:hreadid=%d usingƒnv fromhreadid=%d\n",

340 
th»adEnv
->
’vTh»adId
, ((
JNIEnvExt
*)
’v
)->envThreadId);

341 
´štW¬n
 = 
Œue
;

346 } ià(((
JNIEnvExt
*è
’v
)->
£lf
 !ğ
	`dvmTh»adS–f
()) {

348 
	`LOGE
("JNI ERROR:ƒnv->self !=hread-self (%p vs. %p)\n",

349 ((
JNIEnvExt
*è
’v
)->
£lf
, 
	`dvmTh»adS–f
());

350 
	`dvmAbÜt
();

356 
æags
 & 
kFÏg_Cr™Mask
) {

357 
kFÏg_Cr™Okay
:

359 
kFÏg_Cr™Bad
:

360 ià(
th»adEnv
->
ü™iÿl
) {

361 
	`LOGW
("JNI WARNING:hreadid=%d using JNI‡fter critical get\n",

362 
th»adEnv
->
’vTh»adId
);

363 
´štW¬n
 = 
Œue
;

366 
kFÏg_Cr™G‘
:

368 
th»adEnv
->
ü™iÿl
++;

370 
kFÏg_Cr™R–—£
:

371 
th»adEnv
->
ü™iÿl
--;

372 ià(
th»adEnv
->
ü™iÿl
 < 0) {

373 
	`LOGW
("JNI WARNING:hreadid=%d calledoo many crit„eleases\n",

374 
th»adEnv
->
’vTh»adId
);

375 
´štW¬n
 = 
Œue
;

379 
	`as£¹
(
çl£
);

385 ià((
æags
 & 
kFÏg_ExûpOkay
è=ğ0 && 
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

386 
	`LOGW
("JNI WARNING: JNI method called withƒxception„aised\n");

387 
´štW¬n
 = 
Œue
;

388 
´štExû±iÚ
 = 
Œue
;

391 ià(
´štW¬n
)

392 
	`showLoÿtiÚ
(
	`dvmG‘Cu¼’tJNIM‘hod
(), 
func
);

393 ià(
´štExû±iÚ
) {

394 
	`LOGW
("Pendingƒxception is:\n");

395 
	`dvmLogExû±iÚSckT¿û
();

397 ià(
´štW¬n
)

398 
	`abÜtMaybe
();

399 
	}
}

407 
	$checkF›ldTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, 
jf›ldID
 
f›ldID
,

408 
Prim™iveTy³
 
´im
, 
boŞ
 
isStic
, cÚ¡ * 
func
)

410 cÚ¡ * 
´imNameLi¡
[] = {

414 cÚ¡ ** 
´imNames
 = &
´imNameLi¡
[1];

415 
F›ld
* 
f›ld
 = (F›ld*è
f›ldID
;

416 
boŞ
 
´štW¬n
 = 
çl£
;

418 ià(
f›ldID
 =ğ
NULL
) {

419 
	`LOGE
("JNI ERROR:‚ull field ID\n");

420 
	`abÜtMaybe
();

423 ià(
f›ld
->
sigÇtu»
[0] == 'L' || field->signature[0] == '[') {

424 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

425 ià(
obj
 !ğ
NULL
) {

426 
CÏssObjeù
* 
f›ldCÏss
 =

427 
	`dvmFšdLßdedCÏss
(
f›ld
->
sigÇtu»
);

428 
CÏssObjeù
* 
objCÏss
 = 
obj
->
şazz
;

430 
	`as£¹
(
f›ldCÏss
 !ğ
NULL
);

431 
	`as£¹
(
objCÏss
 !ğ
NULL
);

433 ià(!
	`dvmIn¡ªûof
(
objCÏss
, 
f›ldCÏss
)) {

434 
	`LOGW
("JNI WARNING: field '%s' withype '%s' set with wrongype (%s)\n",

435 
f›ld
->
Çme
, f›ld->
sigÇtu»
, 
objCÏss
->
desütÜ
);

436 
´štW¬n
 = 
Œue
;

439 } ià(
f›ld
->
sigÇtu»
[0] !ğ
PRIM_TYPE_TO_LETTER
[
´im
]) {

440 
	`LOGW
("JNI WARNING: field '%s' withype '%s' set with wrongype (%s)\n",

441 
f›ld
->
Çme
, f›ld->
sigÇtu»
, 
´imNames
[
´im
]);

442 
´štW¬n
 = 
Œue
;

443 } ià(
isStic
 && !
	`dvmIsSticF›ld
(
f›ld
)) {

444 ià(
isStic
)

445 
	`LOGW
("JNI WARNING:‡ccessing‚on-static field %s‡s static\n",

446 
f›ld
->
Çme
);

448 
	`LOGW
("JNI WARNING:‡ccessing static field %s‡s‚on-static\n",

449 
f›ld
->
Çme
);

450 
´štW¬n
 = 
Œue
;

453 ià(
´štW¬n
) {

454 
	`showLoÿtiÚ
(
	`dvmG‘Cu¼’tJNIM‘hod
(), 
func
);

455 
	`abÜtMaybe
();

457 
	}
}

465 
	$checkObjeù
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, cÚ¡ * 
func
)

467 
	`UNUSED_PARAMETER
(
’v
);

468 
boŞ
 
´štW¬n
 = 
çl£
;

470 ià(
jobj
 =ğ
NULL
)

473 
	`JNI_ENTER
();

475 ià(
	`dvmG‘JNIRefTy³
(
’v
, 
jobj
è=ğ
JNIInv®idRefTy³
) {

476 
	`LOGW
("JNI WARNING: %°i nÙ‡ v®id JNI„eã»nû\n", 
jobj
);

477 
´štW¬n
 = 
Œue
;

479 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

481 ià(
obj
 =ğ
NULL
 || !
	`dvmIsV®idObjeù
(obj)) {

482 
	`LOGW
("JNI WARNING:‚ative code…assing in bad object %p %p (%s)\n",

483 
jobj
, 
obj
, 
func
);

484 
´štW¬n
 = 
Œue
;

488 ià(
´štW¬n
) {

489 
	`showLoÿtiÚ
(
	`dvmG‘Cu¼’tJNIM‘hod
(), 
func
);

490 
	`abÜtMaybe
();

493 
	`JNI_EXIT
();

494 
	}
}

507 
	$checkCÏss
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
func
)

509 
	`JNI_ENTER
();

510 
boŞ
 
´štW¬n
 = 
çl£
;

512 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

514 ià(
şazz
 =ğ
NULL
) {

515 
	`LOGW
("JNI WARNING:„eceived‚ull jclass\n");

516 
´štW¬n
 = 
Œue
;

517 } ià(!
	`dvmIsV®idObjeù
((
Objeù
*è
şazz
)) {

518 
	`LOGW
("JNI WARNING: jşas pošt tØšv®id objeù %p\n", 
şazz
);

519 
´štW¬n
 = 
Œue
;

520 } ià(
şazz
->
obj
.şazz !ğ
gDvm
.
şassJavaLªgCÏss
) {

521 
	`LOGW
("JNI WARNING: jclass does‚ot…ointo class object (%p - %s)\n",

522 
jşazz
, 
şazz
->
desütÜ
);

523 
´štW¬n
 = 
Œue
;

525 
	`JNI_EXIT
();

527 ià(
´štW¬n
)

528 
	`abÜtMaybe
();

530 
	`checkObjeù
(
’v
, 
jşazz
, 
func
);

531 
	}
}

538 
	$checkSŒšg
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, cÚ¡ * 
func
)

540 
	`JNI_ENTER
();

541 
boŞ
 
´štW¬n
 = 
çl£
;

543 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

545 ià(
obj
 =ğ
NULL
) {

546 
	`LOGW
("JNI WARNING:„eûived‚uÎ j¡ršg (%s)\n", 
func
);

547 
´štW¬n
 = 
Œue
;

548 } ià(
obj
->
şazz
 !ğ
gDvm
.
şassJavaLªgSŒšg
) {

555 ià(
	`dvmIsV®idObjeù
(
obj
))

556 
	`LOGW
("JNI WARNING: jstring %p…ointso‚on-string object (%s)\n",

557 
j¡r
, 
func
);

559 
	`LOGW
("JNI WARNING: j¡ršg %°i bogu (%s)\n", 
j¡r
, 
func
);

560 
´štW¬n
 = 
Œue
;

562 
	`JNI_EXIT
();

564 ià(
´štW¬n
)

565 
	`abÜtMaybe
();

567 
	`checkObjeù
(
’v
, 
j¡r
, 
func
);

568 
	}
}

573 
	$checkUtfSŒšg
(
JNIEnv
* 
’v
, cÚ¡ * 
by‹s
, 
boŞ
 
nuÎOk
,

574 cÚ¡ * 
func
)

576 cÚ¡ * 
ÜigBy‹s
 = 
by‹s
;

578 ià(
by‹s
 =ğ
NULL
) {

579 ià(!
nuÎOk
) {

580 
	`LOGW
("JNI WARNING: unexpectedly‚ull UTF string\n");

581 
ç
;

587 *
by‹s
 != '\0') {

588 
u1
 
utf8
 = *(
by‹s
++);

590 
utf8
 >> 4) {

612 
	`LOGW
("JNI WARNING: iÎeg® s¹ by‹ 0x%x\n", 
utf8
);

613 
ç
;

617 
utf8
 = *(
by‹s
++);

618 ià((
utf8
 & 0xc0) != 0x80) {

619 
	`LOGW
("JNI WARNING: iÎeg® cÚtšu©iÚ by‹ 0x%x\n", 
utf8
);

620 
ç
;

627 
utf8
 = *(
by‹s
++);

628 ià((
utf8
 & 0xc0) != 0x80) {

629 
	`LOGW
("JNI WARNING: iÎeg® cÚtšu©iÚ by‹ 0x%x\n", 
utf8
);

630 
ç
;

639 
ç
:

640 
	`LOGW
(" sŒšg: '%s'\n", 
ÜigBy‹s
);

641 
	`showLoÿtiÚ
(
	`dvmG‘Cu¼’tJNIM‘hod
(), 
func
);

642 
	`abÜtMaybe
();

643 
	}
}

658 
	$checkCÏssName
(
JNIEnv
* 
’v
, cÚ¡ * 
şassName
, cÚ¡ * 
func
)

660 cÚ¡ * 
ı
;

663 
ı
 = 
şassName
;

664 *
ı
 != '\0') {

665 ià(*
ı
 == '.')

666 
ç
;

667 
ı
++;

674 
ç
:

675 
	`LOGW
("JNI WARNING: iÎeg® cÏs Çm'%s' (%s)\n", 
şassName
, 
func
);

676 
	`abÜtMaybe
();

677 
	}
}

684 
	$checkA¼ay
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
, cÚ¡ * 
func
)

686 
	`JNI_ENTER
();

687 
boŞ
 
´štW¬n
 = 
çl£
;

689 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

691 ià(
obj
 =ğ
NULL
) {

692 
	`LOGW
("JNI WARNING:„eûived‚uÎ‡¼ay (%s)\n", 
func
);

693 
´štW¬n
 = 
Œue
;

694 } ià(
obj
->
şazz
->
desütÜ
[0] != '[') {

695 ià(
	`dvmIsV®idObjeù
(
obj
))

696 
	`LOGW
("JNI WARNING: jarray %p…ointso‚on-array object (%s)\n",

697 
j¬r
, 
obj
->
şazz
->
desütÜ
);

699 
	`LOGW
("JNI WARNING: j¬¿y %°i bogus\n", 
j¬r
);

700 
´štW¬n
 = 
Œue
;

703 
	`JNI_EXIT
();

705 ià(
´štW¬n
)

706 
	`abÜtMaybe
();

708 
	`checkObjeù
(
’v
, 
j¬r
, 
func
);

709 
	}
}

715 
	$checkR–—£Mode
(
JNIEnv
* 
’v
, 
jšt
 
mode
, cÚ¡ * 
func
)

717 ià(
mode
 !ğ0 && mod!ğ
JNI_COMMIT
 && mod!ğ
JNI_ABORT
) {

718 
	`LOGW
("JNI WARNING: bad v®ufÜ mod(%dè(%s)\n", 
mode
, 
func
);

719 
	`abÜtMaybe
();

721 
	}
}

726 
	$checkL’gthPos™ive
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
, cÚ¡ * 
func
)

728 ià(
Ëngth
 < 0) {

729 
	`LOGW
("JNI WARNING:‚eg©ivËngth fÜ‡¼ay‡ÎoÿtiÚ (%s)\n", 
func
);

730 
	`abÜtMaybe
();

732 
	}
}

737 
	$checkNÚNuÎ
(
JNIEnv
* 
’v
, cÚ¡ * 
±r
, cÚ¡ * 
func
)

739 ià(
±r
 =ğ
NULL
) {

740 
	`LOGW
("JNI WARNING: inv®id‚uÎ…oš‹¸(%s)\n", 
func
);

741 
	`abÜtMaybe
();

743 
	}
}

750 
	$checkSig
(
JNIEnv
* 
’v
, 
jm‘hodID
 
m‘hodID
, 
ex³ùedSigBy‹
,

751 
boŞ
 
isStic
, cÚ¡ * 
func
)

753 cÚ¡ 
M‘hod
* 
m‘h
 = (cÚ¡ M‘hod*è
m‘hodID
;

754 
boŞ
 
´štW¬n
 = 
çl£
;

756 ià(
ex³ùedSigBy‹
 !ğ
m‘h
->
shÜty
[0]) {

757 
	`LOGW
("JNI WARNING:ƒx³ùed„‘uºy³ '%c'\n", 
ex³ùedSigBy‹
);

758 
´štW¬n
 = 
Œue
;

759 } ià(
isStic
 && !
	`dvmIsSticM‘hod
(
m‘h
)) {

760 ià(
isStic
)

761 
	`LOGW
("JNI WARNING: calling‚on-static method with static call\n");

763 
	`LOGW
("JNI WARNING: calling static method with‚on-static call\n");

764 
´štW¬n
 = 
Œue
;

767 ià(
´štW¬n
) {

768 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

769 
	`LOGW
(" calling %s.%s %s\n",

770 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

771 
	`ä“
(
desc
);

772 
	`showLoÿtiÚ
(
	`dvmG‘Cu¼’tJNIM‘hod
(), 
func
);

773 
	`abÜtMaybe
();

775 
	}
}

780 
	$checkSticF›ldID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jf›ldID
 
f›ldID
)

782 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

783 
SticF›ld
* 
ba£
 = 
şazz
->
sf›lds
;

784 
f›ldCouÁ
 = 
şazz
->
sf›ldCouÁ
;

786 ià((
SticF›ld
*è
f›ldID
 < 
ba£
 ||

787 (
SticF›ld
*è
f›ldID
 >ğ
ba£
 + 
f›ldCouÁ
)

789 
	`LOGW
("JNI WARNING: static fieldID %p‚ot valid for class %s\n",

790 
f›ldID
, 
şazz
->
desütÜ
);

791 
	`LOGW
(" ba£=%°couÁ=%d\n", 
ba£
, 
f›ldCouÁ
);

792 
	`abÜtMaybe
();

794 
	}
}

799 
	$checkIn¡ªûF›ldID
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, 
jf›ldID
 
f›ldID
,

800 cÚ¡ * 
func
)

802 
	`JNI_ENTER
();

804 ià(
jobj
 =ğ
NULL
) {

805 
	`LOGW
("JNI WARNING: inv®id‚uÎ objeù (%s)\n", 
func
);

806 
	`abÜtMaybe
();

807 
ba
;

810 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

811 
CÏssObjeù
* 
şazz
 = 
obj
->clazz;

817 
şazz
 !ğ
NULL
) {

818 ià((
In¡F›ld
*è
f›ldID
 >ğ
şazz
->
if›lds
 &&

819 (
In¡F›ld
*è
f›ldID
 < 
şazz
->
if›lds
 + cÏzz->
if›ldCouÁ
)

821 
ba
;

824 
şazz
 = cÏzz->
su³r
;

827 
	`LOGW
("JNI WARNING: inst fieldID %p‚ot valid for class %s\n",

828 
f›ldID
, 
obj
->
şazz
->
desütÜ
);

829 
	`abÜtMaybe
();

831 
ba
:

832 
	`JNI_EXIT
();

833 
	}
}

842 
	#kGu¬dL’
 512

	)

843 
	#kGu¬dP©‹º
 0xd5e3

	)

844 
	#kGu¬dMagic
 0xffd5¯96

	)

845 
	#kGu¬dExŒa
 (
Gu¬dExŒa
)

	)

848 
	sGu¬dExŒa
 {

849 
u4
 
	mmagic
;

850 
uLÚg
 
	madËr
;

851 
size_t
 
	mÜigš®L’
;

852 cÚ¡ * 
	mÜigš®PŒ
;

853 } 
	tGu¬dExŒa
;

856 
šlše
 
Gu¬dExŒa
* 
	$g‘Gu¬dExŒa
(cÚ¡ * 
d©aBuf
)

858 
u1
* 
fuÎBuf
 = ((u1*è
d©aBuf
è- 
kGu¬dL’
 / 2;

859  (
Gu¬dExŒa
*è
fuÎBuf
;

860 
	}
}

868 * 
	$ü—‹Gu¬dedCİy
(cÚ¡ * 
buf
, 
size_t
 
Ën
, 
boŞ
 
modOkay
)

870 
Gu¬dExŒa
* 
pExŒa
;

871 
size_t
 
ÃwL’
 = (
Ën
 + 
kGu¬dL’
 +1) & ~0x01;

872 
u1
* 
ÃwBuf
;

873 
u2
* 
·t
;

874 
i
;

876 
ÃwBuf
 = (
u1
*)
	`m®loc
(
ÃwL’
);

877 ià(
ÃwBuf
 =ğ
NULL
) {

878 
	`LOGE
("ü—‹Gu¬dedCİy faed oÀ®loøoà%d by‹s\n", 
ÃwL’
);

879 
	`dvmAbÜt
();

883 
·t
 = (
u2
*è
ÃwBuf
;

884 
i
 = 0; i < ()
ÃwL’
 / 2; i++)

885 *
·t
++ = 
kGu¬dP©‹º
;

888 
	`memıy
(
ÃwBuf
 + 
kGu¬dL’
 / 2, 
buf
, 
Ën
);

891 
uLÚg
 
adËr
 = 0;

892 ià(!
modOkay
) {

893 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

894 
adËr
 = 
	`adËr32
×dËr, 
buf
, 
Ën
);

895 *(
uLÚg
*)
ÃwBuf
 = 
adËr
;

898 
pExŒa
 = (
Gu¬dExŒa
*è
ÃwBuf
;

899 
pExŒa
->
magic
 = 
kGu¬dMagic
;

900 
pExŒa
->
adËr
 =‡dler;

901 
pExŒa
->
Üigš®PŒ
 = 
buf
;

902 
pExŒa
->
Üigš®L’
 = 
Ën
;

904  
ÃwBuf
 + 
kGu¬dL’
 / 2;

905 
	}
}

913 
boŞ
 
	$checkGu¬dedCİy
(cÚ¡ * 
d©aBuf
, 
boŞ
 
modOkay
)

915 cÚ¡ 
u4
 
kMagicCmp
 = 
kGu¬dMagic
;

916 cÚ¡ 
u1
* 
fuÎBuf
 = ((cÚ¡ u1*è
d©aBuf
è- 
kGu¬dL’
 / 2;

917 cÚ¡ 
Gu¬dExŒa
* 
pExŒa
 = 
	`g‘Gu¬dExŒa
(
d©aBuf
);

918 
size_t
 
Ën
;

919 cÚ¡ 
u2
* 
·t
;

920 
i
;

928 ià(
	`memcmp
(&
pExŒa
->
magic
, &
kMagicCmp
, 4) != 0) {

929 
u1
 
buf
[4];

930 
	`memıy
(
buf
, &
pExŒa
->
magic
, 4);

931 
	`LOGE
("JNI: guard magic does‚ot match (found 0x%02x%02x%02x%02x) "

933 
buf
[3], buf[2], buf[1], buf[0], 
d©aBuf
);

934  
çl£
;

937 
Ën
 = 
pExŒa
->
Üigš®L’
;

940 
·t
 = (
u2
*è
fuÎBuf
;

941 
i
 = 
kGu¬dExŒa
 / 2; i < (è(
kGu¬dL’
 / 2 - kGuardExtra) / 2; i++)

943 ià(
·t
[
i
] !ğ
kGu¬dP©‹º
) {

944 
	`LOGE
("JNI: guard…attern(1) disturbed‡t %p + %d\n",

945 
fuÎBuf
, 
i
*2);

946  
çl£
;

950 
off£t
 = 
kGu¬dL’
 / 2 + 
Ën
;

951 ià(
off£t
 & 0x01) {

953 cÚ¡ 
u2
 
·tSam¶e
 = 
kGu¬dP©‹º
;

954 ià(
fuÎBuf
[
off£t
] !ğ((cÚ¡ 
u1
*è&
·tSam¶e
)[1]) {

955 
	`LOGE
("JNI: guard…attern disturbed in odd byte‡fter %p "

957 
fuÎBuf
, 
off£t
, fuÎBuf[off£t], ((cÚ¡ 
u1
*è&
·tSam¶e
)[1]);

958  
çl£
;

960 
off£t
++;

964 
·t
 = (
u2
*è(
fuÎBuf
 + 
off£t
);

965 
i
 = 0; i < 
kGu¬dL’
 / 4; i++) {

966 ià(
·t
[
i
] !ğ
kGu¬dP©‹º
) {

967 
	`LOGE
("JNI: guard…attern(2) disturbed‡t %p + %d\n",

968 
fuÎBuf
, 
off£t
 + 
i
*2);

969  
çl£
;

978 ià(!
modOkay
) {

979 
uLÚg
 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

980 
adËr
 = 
	`adËr32
×dËr, 
d©aBuf
, 
Ën
);

981 ià(
pExŒa
->
adËr
 !=‡dler) {

982 
	`LOGE
("JNI: buffer modified (0x%08lx vs 0x%08lx)‡t‡ddr %p\n",

983 
pExŒa
->
adËr
,‡dËr, 
d©aBuf
);

984  
çl£
;

988  
Œue
;

989 
	}
}

994 * 
	$ä“Gu¬dedCİy
(* 
d©aBuf
)

996 
u1
* 
fuÎBuf
 = ((u1*è
d©aBuf
è- 
kGu¬dL’
 / 2;

997 cÚ¡ 
Gu¬dExŒa
* 
pExŒa
 = 
	`g‘Gu¬dExŒa
(
d©aBuf
);

998 * 
Üigš®PŒ
 = (*è
pExŒa
->originalPtr;

999 
size_t
 
Ën
 = 
pExŒa
->
Üigš®L’
;

1001 
	`mem£t
(
d©aBuf
, 0xdd, 
Ën
);

1002 
	`ä“
(
fuÎBuf
);

1003  
Üigš®PŒ
;

1004 
	}
}

1009 * 
	$g‘Gu¬dedCİyOrigš®PŒ
(cÚ¡ * 
d©aBuf
)

1011 cÚ¡ 
Gu¬dExŒa
* 
pExŒa
 = 
	`g‘Gu¬dExŒa
(
d©aBuf
);

1012  (*è
pExŒa
->
Üigš®PŒ
;

1013 
	}
}

1018 
size_t
 
	$g‘Gu¬dedCİyOrigš®L’
(cÚ¡ * 
d©aBuf
)

1020 cÚ¡ 
Gu¬dExŒa
* 
pExŒa
 = 
	`g‘Gu¬dExŒa
(
d©aBuf
);

1021  
pExŒa
->
Üigš®L’
;

1022 
	}
}

1027 
	$dvmPrim™iveTy³Width
(
Prim™iveTy³
 
´imTy³
)

1029 cÚ¡ 
Ëngths
[
PRIM_MAX
] = {

1040 
	`as£¹
(
´imTy³
 >ğ0 &&…rimTy³ < 
PRIM_MAX
);

1041  
Ëngths
[
´imTy³
];

1042 
	}
}

1048 * 
	$ü—‹Gu¬dedPACİy
(
JNIEnv
* 
’v
, cÚ¡ 
j¬¿y
 
j¬r
,

1049 
jboŞ—n
* 
isCİy
)

1051 
A¼ayObjeù
* 
¬rObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

1052 
Prim™iveTy³
 
´imTy³
 = 
¬rObj
->
obj
.
şazz
->
–em’tCÏss
->
´im™iveTy³
;

1053 
Ën
 = 
¬rObj
->
Ëngth
 * 
	`dvmPrim™iveTy³Width
(
´imTy³
);

1054 * 
»suÉ
;

1056 
»suÉ
 = 
	`ü—‹Gu¬dedCİy
(
¬rObj
->
cÚ‹Ás
, 
Ën
, 
Œue
);

1058 ià(
isCİy
 !ğ
NULL
)

1059 *
isCİy
 = 
JNI_TRUE
;

1061  
»suÉ
;

1062 
	}
}

1068 * 
	$»Ëa£Gu¬dedPACİy
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
, * 
d©aBuf
,

1069 
mode
)

1071 
A¼ayObjeù
* 
¬rObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

1072 
Prim™iveTy³
 
´imTy³
 = 
¬rObj
->
obj
.
şazz
->
–em’tCÏss
->
´im™iveTy³
;

1074 
boŞ
 
»Ëa£
, 
cİyBack
;

1075 
u1
* 
»suÉ
;

1077 ià(!
	`checkGu¬dedCİy
(
d©aBuf
, 
Œue
)) {

1078 
	`LOGE
("JNI: failed guarded copy check in„eleaseGuardedPACopy\n");

1079 
	`abÜtMaybe
();

1080  
NULL
;

1083 
mode
) {

1085 
»Ëa£
 = 
cİyBack
 = 
Œue
;

1087 
JNI_ABORT
:

1088 
»Ëa£
 = 
Œue
;

1089 
cİyBack
 = 
çl£
;

1091 
JNI_COMMIT
:

1092 
»Ëa£
 = 
çl£
;

1093 
cİyBack
 = 
Œue
;

1096 
	`LOGE
("JNI: bad„–—£ mod%d\n", 
mode
);

1097 
	`dvmAbÜt
();

1098  
NULL
;

1101 ià(
cİyBack
) {

1102 
size_t
 
Ën
 = 
	`g‘Gu¬dedCİyOrigš®L’
(
d©aBuf
);

1103 
	`memıy
(
¬rObj
->
cÚ‹Ás
, 
d©aBuf
, 
Ën
);

1106 ià(
»Ëa£
) {

1107 
»suÉ
 = (
u1
*è
	`ä“Gu¬dedCİy
(
d©aBuf
);

1109 
»suÉ
 = (
u1
*è
	`g‘Gu¬dedCİyOrigš®PŒ
(
d©aBuf
);

1113 
»suÉ
 -ğ
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
);

1115  
»suÉ
;

1116 
	}
}

1125 
jšt
 
	$Check_G‘V”siÚ
(
JNIEnv
* 
’v
)

1127 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1128 
jšt
 
»suÉ
;

1129 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘V”siÚ
(env);

1130 
	`CHECK_EXIT
(
’v
);

1131  
»suÉ
;

1132 
	}
}

1134 
jşass
 
	$Check_DefšeCÏss
(
JNIEnv
* 
’v
, cÚ¡ * 
Çme
, 
jobjeù
 
lßd”
,

1135 cÚ¡ 
jby‹
* 
buf
, 
jsize
 
bufL’
)

1137 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1138 
	`CHECK_OBJECT
(
’v
, 
lßd”
);

1139 
	`CHECK_UTF_STRING
(
’v
, 
Çme
, 
çl£
);

1140 
	`CHECK_CLASS_NAME
(
’v
, 
Çme
);

1141 
jşass
 
»suÉ
;

1142 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`DefšeCÏss
Ónv, 
Çme
, 
lßd”
, 
buf
, 
bufL’
);

1143 
	`CHECK_EXIT
(
’v
);

1144  
»suÉ
;

1145 
	}
}

1147 
jşass
 
	$Check_FšdCÏss
(
JNIEnv
* 
’v
, cÚ¡ * 
Çme
)

1149 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1150 
	`CHECK_UTF_STRING
(
’v
, 
Çme
, 
çl£
);

1151 
	`CHECK_CLASS_NAME
(
’v
, 
Çme
);

1152 
jşass
 
»suÉ
;

1153 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`FšdCÏss
Ónv, 
Çme
);

1154 
	`CHECK_EXIT
(
’v
);

1155  
»suÉ
;

1156 
	}
}

1158 
jşass
 
	$Check_G‘Su³rşass
(
JNIEnv
* 
’v
, 
jşass
 
şazz
)

1160 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1161 
	`CHECK_CLASS
(
’v
, 
şazz
);

1162 
jşass
 
»suÉ
;

1163 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘Su³rşass
Ónv, 
şazz
);

1164 
	`CHECK_EXIT
(
’v
);

1165  
»suÉ
;

1166 
	}
}

1168 
jboŞ—n
 
	$Check_IsAssigÇbËFrom
(
JNIEnv
* 
’v
, 
jşass
 
şazz1
,

1169 
jşass
 
şazz2
)

1171 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1172 
	`CHECK_CLASS
(
’v
, 
şazz1
);

1173 
	`CHECK_CLASS
(
’v
, 
şazz2
);

1174 
jboŞ—n
 
»suÉ
;

1175 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`IsAssigÇbËFrom
Ónv, 
şazz1
, 
şazz2
);

1176 
	`CHECK_EXIT
(
’v
);

1177  
»suÉ
;

1178 
	}
}

1180 
jm‘hodID
 
	$Check_FromReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
m‘hod
)

1182 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1183 
	`CHECK_OBJECT
(
’v
, 
m‘hod
);

1184 
jm‘hodID
 
»suÉ
;

1185 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`FromReæeùedM‘hod
Ónv, 
m‘hod
);

1186 
	`CHECK_EXIT
(
’v
);

1187  
»suÉ
;

1188 
	}
}

1190 
jf›ldID
 
	$Check_FromReæeùedF›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
f›ld
)

1192 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1193 
	`CHECK_OBJECT
(
’v
, 
f›ld
);

1194 
jf›ldID
 
»suÉ
;

1195 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`FromReæeùedF›ld
Ónv, 
f›ld
);

1196 
	`CHECK_EXIT
(
’v
);

1197  
»suÉ
;

1198 
	}
}

1200 
jobjeù
 
	$Check_ToReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jşass
 
şs
,

1201 
jm‘hodID
 
m‘hodID
, 
jboŞ—n
 
isStic
)

1203 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1204 
	`CHECK_CLASS
(
’v
, 
şs
);

1205 
jobjeù
 
»suÉ
;

1206 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`ToReæeùedM‘hod
Ónv, 
şs
, 
m‘hodID
, 
isStic
);

1207 
	`CHECK_EXIT
(
’v
);

1208  
»suÉ
;

1209 
	}
}

1211 
jobjeù
 
	$Check_ToReæeùedF›ld
(
JNIEnv
* 
’v
, 
jşass
 
şs
, 
jf›ldID
 
f›ldID
,

1212 
jboŞ—n
 
isStic
)

1214 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1215 
	`CHECK_CLASS
(
’v
, 
şs
);

1216 
jobjeù
 
»suÉ
;

1217 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`ToReæeùedF›ld
Ónv, 
şs
, 
f›ldID
, 
isStic
);

1218 
	`CHECK_EXIT
(
’v
);

1219  
»suÉ
;

1220 
	}
}

1222 
jšt
 
	$Check_Throw
(
JNIEnv
* 
’v
, 
jthrowabË
 
obj
)

1224 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1225 
	`CHECK_OBJECT
(
’v
, 
obj
);

1226 
jšt
 
»suÉ
;

1227 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`Throw
Ónv, 
obj
);

1228 
	`CHECK_EXIT
(
’v
);

1229  
»suÉ
;

1230 
	}
}

1232 
jšt
 
	$Check_ThrowNew
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, cÚ¡ * 
mes§ge
)

1234 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1235 
	`CHECK_CLASS
(
’v
, 
şazz
);

1236 
	`CHECK_UTF_STRING
(
’v
, 
mes§ge
, 
Œue
);

1237 
jšt
 
»suÉ
;

1238 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`ThrowNew
Ónv, 
şazz
, 
mes§ge
);

1239 
	`CHECK_EXIT
(
’v
);

1240  
»suÉ
;

1241 
	}
}

1243 
jthrowabË
 
	$Check_Exû±iÚOccu¼ed
(
JNIEnv
* 
’v
)

1245 
	`CHECK_ENTER
(
’v
, 
kFÏg_ExûpOkay
);

1246 
jthrowabË
 
»suÉ
;

1247 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`Exû±iÚOccu¼ed
(env);

1248 
	`CHECK_EXIT
(
’v
);

1249  
»suÉ
;

1250 
	}
}

1252 
	$Check_Exû±iÚDesüibe
(
JNIEnv
* 
’v
)

1254 
	`CHECK_ENTER
(
’v
, 
kFÏg_ExûpOkay
);

1255 
	`BASE_ENV
(
’v
)->
	`Exû±iÚDesüibe
(env);

1256 
	`CHECK_EXIT
(
’v
);

1257 
	}
}

1259 
	$Check_Exû±iÚCË¬
(
JNIEnv
* 
’v
)

1261 
	`CHECK_ENTER
(
’v
, 
kFÏg_ExûpOkay
);

1262 
	`BASE_ENV
(
’v
)->
	`Exû±iÚCË¬
(env);

1263 
	`CHECK_EXIT
(
’v
);

1264 
	}
}

1266 
	$Check_F©®E¼Ü
(
JNIEnv
* 
’v
, cÚ¡ * 
msg
)

1268 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1269 
	`CHECK_UTF_STRING
(
’v
, 
msg
, 
Œue
);

1270 
	`BASE_ENV
(
’v
)->
	`F©®E¼Ü
Ónv, 
msg
);

1271 
	`CHECK_EXIT
(
’v
);

1272 
	}
}

1274 
jšt
 
	$Check_PushLoÿlF¿me
(
JNIEnv
* 
’v
, 
jšt
 
ÿ·c™y
)

1276 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

1277 
jšt
 
»suÉ
;

1278 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`PushLoÿlF¿me
Ónv, 
ÿ·c™y
);

1279 
	`CHECK_EXIT
(
’v
);

1280  
»suÉ
;

1281 
	}
}

1283 
jobjeù
 
	$Check_PİLoÿlF¿me
(
JNIEnv
* 
’v
, 
jobjeù
 
»s
)

1285 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

1286 
	`CHECK_OBJECT
(
’v
, 
»s
);

1287 
jobjeù
 
»suÉ
;

1288 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`PİLoÿlF¿me
Ónv, 
»s
);

1289 
	`CHECK_EXIT
(
’v
);

1290  
»suÉ
;

1291 
	}
}

1293 
jobjeù
 
	$Check_NewGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

1295 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1296 
	`CHECK_OBJECT
(
’v
, 
obj
);

1297 
jobjeù
 
»suÉ
;

1298 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewGlob®Ref
Ónv, 
obj
);

1299 
	`CHECK_EXIT
(
’v
);

1300  
»suÉ
;

1301 
	}
}

1303 
	$Check_D–‘eGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
glob®Ref
)

1305 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

1306 
	`CHECK_OBJECT
(
’v
, 
glob®Ref
);

1307 #ifdeà
USE_INDIRECT_REF


1308 ià(
glob®Ref
 !ğ
NULL
 &&

1309 
	`dvmG‘JNIRefTy³
(
’v
, 
glob®Ref
è!ğ
JNIGlob®RefTy³
)

1311 
	`LOGW
("JNI WARNING: DeleteGlobalRef on‚on-global %p (type=%d)\n",

1312 
glob®Ref
, 
	`dvmG‘JNIRefTy³
(
’v
, globalRef));

1313 
	`abÜtMaybe
();

1317 
	`BASE_ENV
(
’v
)->
	`D–‘eGlob®Ref
Ónv, 
glob®Ref
);

1319 
	`CHECK_EXIT
(
’v
);

1320 
	}
}

1322 
jobjeù
 
	$Check_NewLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
»f
)

1324 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1325 
	`CHECK_OBJECT
(
’v
, 
»f
);

1326 
jobjeù
 
»suÉ
;

1327 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewLoÿlRef
Ónv, 
»f
);

1328 
	`CHECK_EXIT
(
’v
);

1329  
»suÉ
;

1330 
	}
}

1332 
	$Check_D–‘eLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
loÿlRef
)

1334 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

1335 
	`CHECK_OBJECT
(
’v
, 
loÿlRef
);

1336 #ifdeà
USE_INDIRECT_REF


1337 ià(
loÿlRef
 !ğ
NULL
 &&

1338 
	`dvmG‘JNIRefTy³
(
’v
, 
loÿlRef
è!ğ
JNILoÿlRefTy³
)

1340 
	`LOGW
("JNI WARNING: DeleteLocalRef on‚on-local %p (type=%d)\n",

1341 
loÿlRef
, 
	`dvmG‘JNIRefTy³
(
’v
,†ocalRef));

1342 
	`abÜtMaybe
();

1346 
	`BASE_ENV
(
’v
)->
	`D–‘eLoÿlRef
Ónv, 
loÿlRef
);

1348 
	`CHECK_EXIT
(
’v
);

1349 
	}
}

1351 
jšt
 
	$Check_Ensu»LoÿlC­ac™y
(
JNIEnv
 *
’v
, 
jšt
 
ÿ·c™y
)

1353 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1354 
jšt
 
»suÉ
;

1355 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`Ensu»LoÿlC­ac™y
Ónv, 
ÿ·c™y
);

1356 
	`CHECK_EXIT
(
’v
);

1357  
»suÉ
;

1358 
	}
}

1360 
jboŞ—n
 
	$Check_IsSameObjeù
(
JNIEnv
* 
’v
, 
jobjeù
 
»f1
, jobjeù 
»f2
)

1362 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1363 
	`CHECK_OBJECT
(
’v
, 
»f1
);

1364 
	`CHECK_OBJECT
(
’v
, 
»f2
);

1365 
jboŞ—n
 
»suÉ
;

1366 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`IsSameObjeù
Ónv, 
»f1
, 
»f2
);

1367 
	`CHECK_EXIT
(
’v
);

1368  
»suÉ
;

1369 
	}
}

1371 
jobjeù
 
	$Check_AÎocObjeù
(
JNIEnv
* 
’v
, 
jşass
 
şazz
)

1373 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1374 
	`CHECK_CLASS
(
’v
, 
şazz
);

1375 
jobjeù
 
»suÉ
;

1376 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`AÎocObjeù
Ónv, 
şazz
);

1377 
	`CHECK_EXIT
(
’v
);

1378  
»suÉ
;

1379 
	}
}

1381 
jobjeù
 
	$Check_NewObjeù
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
,

1384 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1385 
	`CHECK_CLASS
(
’v
, 
şazz
);

1386 
jobjeù
 
»suÉ
;

1387 
va_li¡
 
¬gs
;

1389 
	`va_¡¬t
(
¬gs
, 
m‘hodID
);

1390 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewObjeùV
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
);

1391 
	`va_’d
(
¬gs
);

1393 
	`CHECK_EXIT
(
’v
);

1394  
»suÉ
;

1395 
	}
}

1396 
jobjeù
 
	$Check_NewObjeùV
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
,

1397 
va_li¡
 
¬gs
)

1399 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1400 
	`CHECK_CLASS
(
’v
, 
şazz
);

1401 
jobjeù
 
»suÉ
;

1402 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewObjeùV
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
);

1403 
	`CHECK_EXIT
(
’v
);

1404  
»suÉ
;

1405 
	}
}

1406 
jobjeù
 
	$Check_NewObjeùA
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
,

1407 
jv®ue
* 
¬gs
)

1409 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1410 
	`CHECK_CLASS
(
’v
, 
şazz
);

1411 
jobjeù
 
»suÉ
;

1412 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewObjeùA
Ónv, 
şazz
, 
m‘hodID
, 
¬gs
);

1413 
	`CHECK_EXIT
(
’v
);

1414  
»suÉ
;

1415 
	}
}

1417 
jşass
 
	$Check_G‘ObjeùCÏss
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

1419 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1420 
	`CHECK_OBJECT
(
’v
, 
obj
);

1421 
jşass
 
»suÉ
;

1422 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘ObjeùCÏss
Ónv, 
obj
);

1423 
	`CHECK_EXIT
(
’v
);

1424  
»suÉ
;

1425 
	}
}

1427 
jboŞ—n
 
	$Check_IsIn¡ªûOf
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, 
jşass
 
şazz
)

1429 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1430 
	`CHECK_OBJECT
(
’v
, 
obj
);

1431 
	`CHECK_CLASS
(
’v
, 
şazz
);

1432 
jboŞ—n
 
»suÉ
;

1433 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`IsIn¡ªûOf
Ónv, 
obj
, 
şazz
);

1434 
	`CHECK_EXIT
(
’v
);

1435  
»suÉ
;

1436 
	}
}

1438 
jm‘hodID
 
	$Check_G‘M‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, cÚ¡ * 
Çme
,

1439 cÚ¡ * 
sig
)

1441 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1442 
	`CHECK_CLASS
(
’v
, 
şazz
);

1443 
	`CHECK_UTF_STRING
(
’v
, 
Çme
, 
çl£
);

1444 
	`CHECK_UTF_STRING
(
’v
, 
sig
, 
çl£
);

1445 
jm‘hodID
 
»suÉ
;

1446 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘M‘hodID
Ónv, 
şazz
, 
Çme
, 
sig
);

1447 
	`CHECK_EXIT
(
’v
);

1448  
»suÉ
;

1449 
	}
}

1451 
jf›ldID
 
	$Check_G‘F›ldID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
,

1452 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

1454 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1455 
	`CHECK_CLASS
(
’v
, 
şazz
);

1456 
	`CHECK_UTF_STRING
(
’v
, 
Çme
, 
çl£
);

1457 
	`CHECK_UTF_STRING
(
’v
, 
sig
, 
çl£
);

1458 
jf›ldID
 
»suÉ
;

1459 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘F›ldID
Ónv, 
şazz
, 
Çme
, 
sig
);

1460 
	`CHECK_EXIT
(
’v
);

1461  
»suÉ
;

1462 
	}
}

1464 
jm‘hodID
 
	$Check_G‘SticM‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
,

1465 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

1467 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1468 
	`CHECK_CLASS
(
’v
, 
şazz
);

1469 
	`CHECK_UTF_STRING
(
’v
, 
Çme
, 
çl£
);

1470 
	`CHECK_UTF_STRING
(
’v
, 
sig
, 
çl£
);

1471 
jm‘hodID
 
»suÉ
;

1472 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SticM‘hodID
Ónv, 
şazz
, 
Çme
, 
sig
);

1473 
	`CHECK_EXIT
(
’v
);

1474  
»suÉ
;

1475 
	}
}

1477 
jf›ldID
 
	$Check_G‘SticF›ldID
(
JNIEnv
* 
’v
, 
jşass
 
şazz
,

1478 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

1480 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1481 
	`CHECK_CLASS
(
’v
, 
şazz
);

1482 
	`CHECK_UTF_STRING
(
’v
, 
Çme
, 
çl£
);

1483 
	`CHECK_UTF_STRING
(
’v
, 
sig
, 
çl£
);

1484 
jf›ldID
 
»suÉ
;

1485 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SticF›ldID
Ónv, 
şazz
, 
Çme
, 
sig
);

1486 
	`CHECK_EXIT
(
’v
);

1487  
»suÉ
;

1488 
	}
}

1490 
	#GET_STATIC_TYPE_FIELD
(
_ùy³
, 
_jÇme
) \

1491 
_ùy³
 
Check_G‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, \

1492 
jf›ldID
 
f›ldID
) \

1494 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1495 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1496 
_ùy³
 
»suÉ
; \

1497 
	`checkSticF›ldID
(
’v
, 
şazz
, 
f›ldID
); \

1498 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
G‘Stic
##
_jÇme
##
	`F›ld
Ónv, 
şazz
, \

1499 
f›ldID
); \

1500 
	`CHECK_EXIT
(
’v
); \

1501  
»suÉ
; \

1502 }

	)

1503 
GET_STATIC_TYPE_FIELD
(
jobjeù
, 
Objeù
);

1504 
GET_STATIC_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
);

1505 
GET_STATIC_TYPE_FIELD
(
jby‹
, 
By‹
);

1506 
GET_STATIC_TYPE_FIELD
(
jch¬
, 
Ch¬
);

1507 
GET_STATIC_TYPE_FIELD
(
jshÜt
, 
ShÜt
);

1508 
GET_STATIC_TYPE_FIELD
(
jšt
, 
IÁ
);

1509 
GET_STATIC_TYPE_FIELD
(
jlÚg
, 
LÚg
);

1510 
GET_STATIC_TYPE_FIELD
(
jæßt
, 
Flßt
);

1511 
GET_STATIC_TYPE_FIELD
(
jdoubË
, 
DoubË
);

1513 
	#SET_STATIC_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_áy³
) \

1514 
Check_S‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
şazz
, \

1515 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) \

1517 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1518 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1519 
	`checkSticF›ldID
(
’v
, 
şazz
, 
f›ldID
); \

1521 
	`CHECK_FIELD_TYPE
(
’v
, (
jobjeù
)(
u4
)
v®ue
, 
f›ldID
, 
_áy³
, 
Œue
); \

1522 
	`BASE_ENV
(
’v
)->
S‘Stic
##
_jÇme
##
	`F›ld
Ónv, 
şazz
, 
f›ldID
, \

1523 
v®ue
); \

1524 
	`CHECK_EXIT
(
’v
); \

1525 }

	)

1526 
SET_STATIC_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
PRIM_NOT
);

1527 
SET_STATIC_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
PRIM_BOOLEAN
);

1528 
SET_STATIC_TYPE_FIELD
(
jby‹
, 
By‹
, 
PRIM_BYTE
);

1529 
SET_STATIC_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
PRIM_CHAR
);

1530 
SET_STATIC_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
PRIM_SHORT
);

1531 
SET_STATIC_TYPE_FIELD
(
jšt
, 
IÁ
, 
PRIM_INT
);

1532 
SET_STATIC_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
PRIM_LONG
);

1533 
SET_STATIC_TYPE_FIELD
(
jæßt
, 
Flßt
, 
PRIM_FLOAT
);

1534 
SET_STATIC_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
PRIM_DOUBLE
);

1536 
	#GET_TYPE_FIELD
(
_ùy³
, 
_jÇme
) \

1537 
_ùy³
 
Check_G‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1538 
jf›ldID
 
f›ldID
) \

1540 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1541 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1542 
_ùy³
 
»suÉ
; \

1543 
	`CHECK_INST_FIELD_ID
(
’v
, 
obj
, 
f›ldID
); \

1544 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
G‘
##
_jÇme
##
	`F›ld
Ónv, 
obj
, 
f›ldID
); \

1545 
	`CHECK_EXIT
(
’v
); \

1546  
»suÉ
; \

1547 }

	)

1548 
GET_TYPE_FIELD
(
jobjeù
, 
Objeù
);

1549 
GET_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
);

1550 
GET_TYPE_FIELD
(
jby‹
, 
By‹
);

1551 
GET_TYPE_FIELD
(
jch¬
, 
Ch¬
);

1552 
GET_TYPE_FIELD
(
jshÜt
, 
ShÜt
);

1553 
GET_TYPE_FIELD
(
jšt
, 
IÁ
);

1554 
GET_TYPE_FIELD
(
jlÚg
, 
LÚg
);

1555 
GET_TYPE_FIELD
(
jæßt
, 
Flßt
);

1556 
GET_TYPE_FIELD
(
jdoubË
, 
DoubË
);

1558 
	#SET_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_áy³
) \

1559 
Check_S‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1560 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) \

1562 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1563 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1564 
	`CHECK_INST_FIELD_ID
(
’v
, 
obj
, 
f›ldID
); \

1566 
	`CHECK_FIELD_TYPE
(
’v
, (
jobjeù
)(
u4
è
v®ue
, 
f›ldID
, 
_áy³
, 
çl£
); \

1567 
	`BASE_ENV
(
’v
)->
S‘
##
_jÇme
##
	`F›ld
Ónv, 
obj
, 
f›ldID
, 
v®ue
); \

1568 
	`CHECK_EXIT
(
’v
); \

1569 }

	)

1570 
SET_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
PRIM_NOT
);

1571 
SET_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
PRIM_BOOLEAN
);

1572 
SET_TYPE_FIELD
(
jby‹
, 
By‹
, 
PRIM_BYTE
);

1573 
SET_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
PRIM_CHAR
);

1574 
SET_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
PRIM_SHORT
);

1575 
SET_TYPE_FIELD
(
jšt
, 
IÁ
, 
PRIM_INT
);

1576 
SET_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
PRIM_LONG
);

1577 
SET_TYPE_FIELD
(
jæßt
, 
Flßt
, 
PRIM_FLOAT
);

1578 
SET_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
PRIM_DOUBLE
);

1580 
	#CALL_VIRTUAL
(
_ùy³
, 
_jÇme
, 
_»tdeş
, 
_»sgn
, 
_»tok
, 
_»tsig
) \

1581 
_ùy³
 
Check_C®l
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1582 
jm‘hodID
 
m‘hodID
, ...) \

1584 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1585 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1586 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
çl£
); \

1587 
_»tdeş
; \

1588 
va_li¡
 
¬gs
; \

1589 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1590 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®l
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, 
m‘hodID
, \

1591 
¬gs
); \

1592 
	`va_’d
(
¬gs
); \

1593 
	`CHECK_EXIT
(
’v
); \

1594  
_»tok
; \

1596 
_ùy³
 
Check_C®l
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1597 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1599 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1600 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1601 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
çl£
); \

1602 
_»tdeş
; \

1603 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®l
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, 
m‘hodID
, \

1604 
¬gs
); \

1605 
	`CHECK_EXIT
(
’v
); \

1606  
_»tok
; \

1608 
_ùy³
 
Check_C®l
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
, \

1609 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1611 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1612 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1613 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
çl£
); \

1614 
_»tdeş
; \

1615 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®l
##
_jÇme
##
	`M‘hodA
Ónv, 
obj
, 
m‘hodID
, \

1616 
¬gs
); \

1617 
	`CHECK_EXIT
(
’v
); \

1618  
_»tok
; \

1619 }

	)

1620 
CALL_VIRTUAL
(
jobjeù
, 
Objeù
, Objeù* 
»suÉ
,„esult=,„esult, 'L');

1621 
CALL_VIRTUAL
(
jboŞ—n
, 
BoŞ—n
, jboŞ—À
»suÉ
,„esult=,„esult, 'Z');

1622 
CALL_VIRTUAL
(
jby‹
, 
By‹
, jby‹ 
»suÉ
,„esult=,„esult, 'B');

1623 
CALL_VIRTUAL
(
jch¬
, 
Ch¬
, jch¬ 
»suÉ
,„esult=,„esult, 'C');

1624 
CALL_VIRTUAL
(
jshÜt
, 
ShÜt
, jshÜˆ
»suÉ
,„esult=,„esult, 'S');

1625 
CALL_VIRTUAL
(
jšt
, 
IÁ
, jšˆ
»suÉ
,„esult=,„esult, 'I');

1626 
CALL_VIRTUAL
(
jlÚg
, 
LÚg
, jlÚg 
»suÉ
,„esult=,„esult, 'J');

1627 
CALL_VIRTUAL
(
jæßt
, 
Flßt
, jæßˆ
»suÉ
,„esult=,„esult, 'F');

1628 
CALL_VIRTUAL
(
jdoubË
, 
DoubË
, jdoubË 
»suÉ
,„esult=,„esult, 'D');

1629 
CALL_VIRTUAL
(, 
Void
, , , , 'V');

1631 
	#CALL_NONVIRTUAL
(
_ùy³
, 
_jÇme
, 
_»tdeş
, 
_»sgn
, 
_»tok
, \

1632 
_»tsig
) \

1633 
_ùy³
 
Check_C®lNÚvœtu®
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, \

1634 
jobjeù
 
obj
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, ...) \

1636 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1637 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1638 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1639 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
çl£
); \

1640 
_»tdeş
; \

1641 
va_li¡
 
¬gs
; \

1642 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1643 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, \

1644 
şazz
, 
m‘hodID
, 
¬gs
); \

1645 
	`va_’d
(
¬gs
); \

1646 
	`CHECK_EXIT
(
’v
); \

1647  
_»tok
; \

1649 
_ùy³
 
Check_C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, \

1650 
jobjeù
 
obj
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1652 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1653 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1654 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1655 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
çl£
); \

1656 
_»tdeş
; \

1657 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
Ónv, 
obj
, \

1658 
şazz
, 
m‘hodID
, 
¬gs
); \

1659 
	`CHECK_EXIT
(
’v
); \

1660  
_»tok
; \

1662 
_ùy³
 
Check_C®lNÚvœtu®
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, \

1663 
jobjeù
 
obj
, 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1665 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1666 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1667 
	`CHECK_OBJECT
(
’v
, 
obj
); \

1668 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
çl£
); \

1669 
_»tdeş
; \

1670 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodA
Ónv, 
obj
, \

1671 
şazz
, 
m‘hodID
, 
¬gs
); \

1672 
	`CHECK_EXIT
(
’v
); \

1673  
_»tok
; \

1674 }

	)

1675 
CALL_NONVIRTUAL
(
jobjeù
, 
Objeù
, Objeù* 
»suÉ
,„esult=,„esult, 'L');

1676 
CALL_NONVIRTUAL
(
jboŞ—n
, 
BoŞ—n
, jboŞ—À
»suÉ
,„esult=,„esult, 'Z');

1677 
CALL_NONVIRTUAL
(
jby‹
, 
By‹
, jby‹ 
»suÉ
,„esult=,„esult, 'B');

1678 
CALL_NONVIRTUAL
(
jch¬
, 
Ch¬
, jch¬ 
»suÉ
,„esult=,„esult, 'C');

1679 
CALL_NONVIRTUAL
(
jshÜt
, 
ShÜt
, jshÜˆ
»suÉ
,„esult=,„esult, 'S');

1680 
CALL_NONVIRTUAL
(
jšt
, 
IÁ
, jšˆ
»suÉ
,„esult=,„esult, 'I');

1681 
CALL_NONVIRTUAL
(
jlÚg
, 
LÚg
, jlÚg 
»suÉ
,„esult=,„esult, 'J');

1682 
CALL_NONVIRTUAL
(
jæßt
, 
Flßt
, jæßˆ
»suÉ
,„esult=,„esult, 'F');

1683 
CALL_NONVIRTUAL
(
jdoubË
, 
DoubË
, jdoubË 
»suÉ
,„esult=,„esult, 'D');

1684 
CALL_NONVIRTUAL
(, 
Void
, , , , 'V');

1687 
	#CALL_STATIC
(
_ùy³
, 
_jÇme
, 
_»tdeş
, 
_»sgn
, 
_»tok
, 
_»tsig
) \

1688 
_ùy³
 
Check_C®lStic
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, \

1689 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, ...) \

1691 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1692 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1693 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
Œue
); \

1694 
_»tdeş
; \

1695 
va_li¡
 
¬gs
; \

1696 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

1697 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®lStic
##
_jÇme
##
	`M‘hodV
Ónv, 
şazz
, \

1698 
m‘hodID
, 
¬gs
); \

1699 
	`va_’d
(
¬gs
); \

1700 
	`CHECK_EXIT
(
’v
); \

1701  
_»tok
; \

1703 
_ùy³
 
Check_C®lStic
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, \

1704 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

1706 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1707 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1708 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
Œue
); \

1709 
_»tdeş
; \

1710 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®lStic
##
_jÇme
##
	`M‘hodV
Ónv, 
şazz
, \

1711 
m‘hodID
, 
¬gs
); \

1712 
	`CHECK_EXIT
(
’v
); \

1713  
_»tok
; \

1715 
_ùy³
 
Check_C®lStic
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, \

1716 
jşass
 
şazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

1718 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1719 
	`CHECK_CLASS
(
’v
, 
şazz
); \

1720 
	`CHECK_SIG
(
’v
, 
m‘hodID
, 
_»tsig
, 
Œue
); \

1721 
_»tdeş
; \

1722 
_»sgn
 
	`BASE_ENV
(
’v
)->
C®lStic
##
_jÇme
##
	`M‘hodA
Ónv, 
şazz
, \

1723 
m‘hodID
, 
¬gs
); \

1724 
	`CHECK_EXIT
(
’v
); \

1725  
_»tok
; \

1726 }

	)

1727 
CALL_STATIC
(
jobjeù
, 
Objeù
, Objeù* 
»suÉ
,„esult=,„esult, 'L');

1728 
CALL_STATIC
(
jboŞ—n
, 
BoŞ—n
, jboŞ—À
»suÉ
,„esult=,„esult, 'Z');

1729 
CALL_STATIC
(
jby‹
, 
By‹
, jby‹ 
»suÉ
,„esult=,„esult, 'B');

1730 
CALL_STATIC
(
jch¬
, 
Ch¬
, jch¬ 
»suÉ
,„esult=,„esult, 'C');

1731 
CALL_STATIC
(
jshÜt
, 
ShÜt
, jshÜˆ
»suÉ
,„esult=,„esult, 'S');

1732 
CALL_STATIC
(
jšt
, 
IÁ
, jšˆ
»suÉ
,„esult=,„esult, 'I');

1733 
CALL_STATIC
(
jlÚg
, 
LÚg
, jlÚg 
»suÉ
,„esult=,„esult, 'J');

1734 
CALL_STATIC
(
jæßt
, 
Flßt
, jæßˆ
»suÉ
,„esult=,„esult, 'F');

1735 
CALL_STATIC
(
jdoubË
, 
DoubË
, jdoubË 
»suÉ
,„esult=,„esult, 'D');

1736 
CALL_STATIC
(, 
Void
, , , , 'V');

1738 
j¡ršg
 
	$Check_NewSŒšg
(
JNIEnv
* 
’v
, cÚ¡ 
jch¬
* 
unicodeCh¬s
,

1739 
jsize
 
Ën
)

1741 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1742 
j¡ršg
 
»suÉ
;

1743 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewSŒšg
Ónv, 
unicodeCh¬s
, 
Ën
);

1744 
	`CHECK_EXIT
(
’v
);

1745  
»suÉ
;

1746 
	}
}

1748 
jsize
 
	$Check_G‘SŒšgL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
)

1750 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

1751 
	`CHECK_STRING
(
’v
, 
¡ršg
);

1752 
jsize
 
»suÉ
;

1753 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgL’gth
Ónv, 
¡ršg
);

1754 
	`CHECK_EXIT
(
’v
);

1755  
»suÉ
;

1756 
	}
}

1758 cÚ¡ 
jch¬
* 
	$Check_G‘SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
,

1759 
jboŞ—n
* 
isCİy
)

1761 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

1762 
	`CHECK_STRING
(
’v
, 
¡ršg
);

1763 cÚ¡ 
jch¬
* 
»suÉ
;

1764 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgCh¬s
Ónv, 
¡ršg
, 
isCİy
);

1765 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
 && 
»suÉ
 !ğ
NULL
) {

1767 
Ën
 = 
	`dvmSŒšgL’
(
¡ršg
) * 2;

1768 
»suÉ
 = (cÚ¡ 
jch¬
*è
	`ü—‹Gu¬dedCİy
ÔesuÉ, 
Ën
, 
çl£
);

1769 ià(
isCİy
 !ğ
NULL
)

1770 *
isCİy
 = 
JNI_TRUE
;

1772 
	`CHECK_EXIT
(
’v
);

1773  
»suÉ
;

1774 
	}
}

1776 
	$Check_R–—£SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
,

1777 cÚ¡ 
jch¬
* 
ch¬s
)

1779 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

1780 
	`CHECK_STRING
(
’v
, 
¡ršg
);

1781 
	`CHECK_NON_NULL
(
’v
, 
ch¬s
);

1782 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
) {

1783 ià(!
	`checkGu¬dedCİy
(
ch¬s
, 
çl£
)) {

1784 
	`LOGE
("JNI: failed guarded copy check in ReleaseStringChars\n");

1785 
	`abÜtMaybe
();

1788 
ch¬s
 = (cÚ¡ 
jch¬
*è
	`ä“Gu¬dedCİy
((jchar*)chars);

1790 
	`BASE_ENV
(
’v
)->
	`R–—£SŒšgCh¬s
Ónv, 
¡ršg
, 
ch¬s
);

1791 
	`CHECK_EXIT
(
’v
);

1792 
	}
}

1794 
j¡ršg
 
	$Check_NewSŒšgUTF
(
JNIEnv
* 
’v
, cÚ¡ * 
by‹s
)

1796 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1797 
	`CHECK_UTF_STRING
(
’v
, 
by‹s
, 
Œue
);

1798 
j¡ršg
 
»suÉ
;

1799 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewSŒšgUTF
Ónv, 
by‹s
);

1800 
	`CHECK_EXIT
(
’v
);

1801  
»suÉ
;

1802 
	}
}

1804 
jsize
 
	$Check_G‘SŒšgUTFL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
)

1806 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

1807 
	`CHECK_STRING
(
’v
, 
¡ršg
);

1808 
jsize
 
»suÉ
;

1809 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgUTFL’gth
Ónv, 
¡ršg
);

1810 
	`CHECK_EXIT
(
’v
);

1811  
»suÉ
;

1812 
	}
}

1814 cÚ¡ * 
	$Check_G‘SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
,

1815 
jboŞ—n
* 
isCİy
)

1817 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

1818 
	`CHECK_STRING
(
’v
, 
¡ršg
);

1819 cÚ¡ * 
»suÉ
;

1820 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgUTFCh¬s
Ónv, 
¡ršg
, 
isCİy
);

1821 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
 && 
»suÉ
 !ğ
NULL
) {

1823 
Ën
 = 
	`dvmSŒšgUtf8By‹L’
(
¡ršg
) + 1;

1824 
»suÉ
 = (cÚ¡ *è
	`ü—‹Gu¬dedCİy
ÔesuÉ, 
Ën
, 
çl£
);

1825 ià(
isCİy
 !ğ
NULL
)

1826 *
isCİy
 = 
JNI_TRUE
;

1828 
	`CHECK_EXIT
(
’v
);

1829  
»suÉ
;

1830 
	}
}

1832 
	$Check_R–—£SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
,

1833 cÚ¡ * 
utf
)

1835 
	`CHECK_ENTER
(
’v
, 
kFÏg_ExûpOkay
);

1836 
	`CHECK_STRING
(
’v
, 
¡ršg
);

1837 
	`CHECK_NON_NULL
(
’v
, 
utf
);

1838 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
) {

1840 ià(!
	`checkGu¬dedCİy
(
utf
, 
çl£
)) {

1841 
	`LOGE
("JNI: failed guarded copy check in ReleaseStringUTFChars\n");

1842 
	`abÜtMaybe
();

1845 
utf
 = (cÚ¡ *è
	`ä“Gu¬dedCİy
((*)utf);

1847 
	`BASE_ENV
(
’v
)->
	`R–—£SŒšgUTFCh¬s
Ónv, 
¡ršg
, 
utf
);

1848 
	`CHECK_EXIT
(
’v
);

1849 
	}
}

1851 
jsize
 
	$Check_G‘A¼ayL’gth
(
JNIEnv
* 
’v
, 
j¬¿y
 
¬¿y
)

1853 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

1854 
	`CHECK_ARRAY
(
’v
, 
¬¿y
);

1855 
jsize
 
»suÉ
;

1856 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘A¼ayL’gth
Ónv, 
¬¿y
);

1857 
	`CHECK_EXIT
(
’v
);

1858  
»suÉ
;

1859 
	}
}

1861 
jobjeùA¼ay
 
	$Check_NewObjeùA¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
,

1862 
jşass
 
–em’tCÏss
, 
jobjeù
 
š™ŸlEËm’t
)

1864 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1865 
	`CHECK_CLASS
(
’v
, 
–em’tCÏss
);

1866 
	`CHECK_OBJECT
(
’v
, 
š™ŸlEËm’t
);

1867 
	`CHECK_LENGTH_POSITIVE
(
’v
, 
Ëngth
);

1868 
jobjeùA¼ay
 
»suÉ
;

1869 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewObjeùA¼ay
Ónv, 
Ëngth
, 
–em’tCÏss
,

1870 
š™ŸlEËm’t
);

1871 
	`CHECK_EXIT
(
’v
);

1872  
»suÉ
;

1873 
	}
}

1875 
jobjeù
 
	$Check_G‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
¬¿y
,

1876 
jsize
 
šdex
)

1878 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1879 
	`CHECK_ARRAY
(
’v
, 
¬¿y
);

1880 
jobjeù
 
»suÉ
;

1881 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘ObjeùA¼ayEËm’t
Ónv, 
¬¿y
, 
šdex
);

1882 
	`CHECK_EXIT
(
’v
);

1883  
»suÉ
;

1884 
	}
}

1886 
	$Check_S‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
¬¿y
,

1887 
jsize
 
šdex
, 
jobjeù
 
v®ue
)

1889 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1890 
	`CHECK_ARRAY
(
’v
, 
¬¿y
);

1891 
	`BASE_ENV
(
’v
)->
	`S‘ObjeùA¼ayEËm’t
Ónv, 
¬¿y
, 
šdex
, 
v®ue
);

1892 
	`CHECK_EXIT
(
’v
);

1893 
	}
}

1895 
	#NEW_PRIMITIVE_ARRAY
(
_¬ty³
, 
_jÇme
) \

1896 
_¬ty³
 
Check_New
##
_jÇme
##
	`A¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
) \

1898 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1899 
	`CHECK_LENGTH_POSITIVE
(
’v
, 
Ëngth
); \

1900 
_¬ty³
 
»suÉ
; \

1901 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
New
##
_jÇme
##
	`A¼ay
Ónv, 
Ëngth
); \

1902 
	`CHECK_EXIT
(
’v
); \

1903  
»suÉ
; \

1904 }

	)

1905 
NEW_PRIMITIVE_ARRAY
(
jboŞ—nA¼ay
, 
BoŞ—n
);

1906 
NEW_PRIMITIVE_ARRAY
(
jby‹A¼ay
, 
By‹
);

1907 
NEW_PRIMITIVE_ARRAY
(
jch¬A¼ay
, 
Ch¬
);

1908 
NEW_PRIMITIVE_ARRAY
(
jshÜtA¼ay
, 
ShÜt
);

1909 
NEW_PRIMITIVE_ARRAY
(
jštA¼ay
, 
IÁ
);

1910 
NEW_PRIMITIVE_ARRAY
(
jlÚgA¼ay
, 
LÚg
);

1911 
NEW_PRIMITIVE_ARRAY
(
jæßtA¼ay
, 
Flßt
);

1912 
NEW_PRIMITIVE_ARRAY
(
jdoubËA¼ay
, 
DoubË
);

1915 
	#GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

1916 
_ùy³
* 
Check_G‘
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

1917 
_ùy³
##
A¼ay
 
¬¿y
, 
jboŞ—n
* 
isCİy
) \

1919 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1920 
	`CHECK_ARRAY
(
’v
, 
¬¿y
); \

1921 
_ùy³
* 
»suÉ
; \

1922 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
G‘
##
_jÇme
##
	`A¼ayEËm’ts
(env, \

1923 
¬¿y
, 
isCİy
); \

1924 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
 && 
»suÉ
 !ğ
NULL
) { \

1925 
»suÉ
 = (
_ùy³
*è
	`ü—‹Gu¬dedPACİy
(
’v
, 
¬¿y
, 
isCİy
); \

1927 
	`CHECK_EXIT
(
’v
); \

1928  
»suÉ
; \

1929 }

	)

1931 
	#RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

1932 
Check_R–—£
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

1933 
_ùy³
##
A¼ay
 
¬¿y
, _ùy³* 
–ems
, 
jšt
 
mode
) \

1935 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
); \

1936 
	`CHECK_ARRAY
(
’v
, 
¬¿y
); \

1937 
	`CHECK_NON_NULL
(
’v
, 
–ems
); \

1938 
	`CHECK_RELEASE_MODE
(
’v
, 
mode
); \

1939 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
) { \

1940 
–ems
 = (
_ùy³
*è
	`»Ëa£Gu¬dedPACİy
(
’v
, 
¬¿y
,ƒËms, 
mode
);\

1942 
	`BASE_ENV
(
’v
)->
R–—£
##
_jÇme
##
	`A¼ayEËm’ts
(env, \

1943 
¬¿y
, 
–ems
, 
mode
); \

1944 
	`CHECK_EXIT
(
’v
); \

1945 }

	)

1947 
	#GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

1948 
Check_G‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

1949 
_ùy³
##
A¼ay
 
¬¿y
, 
jsize
 
¡¬t
, jsiz
Ën
, _ùy³* 
buf
) \

1951 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1952 
	`CHECK_ARRAY
(
’v
, 
¬¿y
); \

1953 
	`BASE_ENV
(
’v
)->
G‘
##
_jÇme
##
	`A¼ayRegiÚ
Ónv, 
¬¿y
, 
¡¬t
, \

1954 
Ën
, 
buf
); \

1955 
	`CHECK_EXIT
(
’v
); \

1956 }

	)

1958 
	#SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

1959 
Check_S‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

1960 
_ùy³
##
A¼ay
 
¬¿y
, 
jsize
 
¡¬t
, jsiz
Ën
, cÚ¡ _ùy³* 
buf
) \

1962 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
); \

1963 
	`CHECK_ARRAY
(
’v
, 
¬¿y
); \

1964 
	`BASE_ENV
(
’v
)->
S‘
##
_jÇme
##
	`A¼ayRegiÚ
Ónv, 
¬¿y
, 
¡¬t
, \

1965 
Ën
, 
buf
); \

1966 
	`CHECK_EXIT
(
’v
); \

1967 }

	)

1969 
	#PRIMITIVE_ARRAY_FUNCTIONS
(
_ùy³
, 
_jÇme
, 
_ty³ch¬
) \

1970 
	`GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

1971 
	`RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

1972 
	`GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
); \

1973 
	`SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
);

	)

1976 
PRIMITIVE_ARRAY_FUNCTIONS
(
jboŞ—n
, 
BoŞ—n
, 'Z');

1977 
PRIMITIVE_ARRAY_FUNCTIONS
(
jby‹
, 
By‹
, 'B');

1978 
PRIMITIVE_ARRAY_FUNCTIONS
(
jch¬
, 
Ch¬
, 'C');

1979 
PRIMITIVE_ARRAY_FUNCTIONS
(
jshÜt
, 
ShÜt
, 'S');

1980 
PRIMITIVE_ARRAY_FUNCTIONS
(
jšt
, 
IÁ
, 'I');

1981 
PRIMITIVE_ARRAY_FUNCTIONS
(
jlÚg
, 
LÚg
, 'J');

1982 
PRIMITIVE_ARRAY_FUNCTIONS
(
jæßt
, 
Flßt
, 'F');

1983 
PRIMITIVE_ARRAY_FUNCTIONS
(
jdoubË
, 
DoubË
, 'D');

1985 
jšt
 
	$Check_Regi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
şazz
,

1986 cÚ¡ 
JNIN©iveM‘hod
* 
m‘hods
, 
jšt
 
nM‘hods
)

1988 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1989 
	`CHECK_CLASS
(
’v
, 
şazz
);

1990 
jšt
 
»suÉ
;

1991 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`Regi¡”N©ives
Ónv, 
şazz
, 
m‘hods
, 
nM‘hods
);

1992 
	`CHECK_EXIT
(
’v
);

1993  
»suÉ
;

1994 
	}
}

1996 
jšt
 
	$Check_UÄegi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
şazz
)

1998 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

1999 
	`CHECK_CLASS
(
’v
, 
şazz
);

2000 
jšt
 
»suÉ
;

2001 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`UÄegi¡”N©ives
Ónv, 
şazz
);

2002 
	`CHECK_EXIT
(
’v
);

2003  
»suÉ
;

2004 
	}
}

2006 
jšt
 
	$Check_MÚ™ÜEÁ”
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

2008 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2009 
	`CHECK_OBJECT
(
’v
, 
obj
);

2010 
jšt
 
»suÉ
;

2011 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`MÚ™ÜEÁ”
Ónv, 
obj
);

2012 
	`CHECK_EXIT
(
’v
);

2013  
»suÉ
;

2014 
	}
}

2016 
jšt
 
	$Check_MÚ™ÜEx™
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

2018 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

2019 
	`CHECK_OBJECT
(
’v
, 
obj
);

2020 
jšt
 
»suÉ
;

2021 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`MÚ™ÜEx™
Ónv, 
obj
);

2022 
	`CHECK_EXIT
(
’v
);

2023  
»suÉ
;

2024 
	}
}

2026 
jšt
 
	$Check_G‘JavaVM
(
JNIEnv
 *
’v
, 
JavaVM
 **
vm
)

2028 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2029 
jšt
 
»suÉ
;

2030 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘JavaVM
Ónv, 
vm
);

2031 
	`CHECK_EXIT
(
’v
);

2032  
»suÉ
;

2033 
	}
}

2035 
	$Check_G‘SŒšgRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡r
, 
jsize
 
¡¬t
,

2036 
jsize
 
Ën
, 
jch¬
* 
buf
)

2038 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

2039 
	`CHECK_STRING
(
’v
, 
¡r
);

2040 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgRegiÚ
Ónv, 
¡r
, 
¡¬t
, 
Ën
, 
buf
);

2041 
	`CHECK_EXIT
(
’v
);

2042 
	}
}

2044 
	$Check_G‘SŒšgUTFRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡r
, 
jsize
 
¡¬t
,

2045 
jsize
 
Ën
, * 
buf
)

2047 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
);

2048 
	`CHECK_STRING
(
’v
, 
¡r
);

2049 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgUTFRegiÚ
Ónv, 
¡r
, 
¡¬t
, 
Ën
, 
buf
);

2050 
	`CHECK_EXIT
(
’v
);

2051 
	}
}

2053 * 
	$Check_G‘Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
¬¿y
,

2054 
jboŞ—n
* 
isCİy
)

2056 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™G‘
);

2057 
	`CHECK_ARRAY
(
’v
, 
¬¿y
);

2058 * 
»suÉ
;

2059 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘Prim™iveA¼ayCr™iÿl
Ónv, 
¬¿y
, 
isCİy
);

2060 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
 && 
»suÉ
 !ğ
NULL
) {

2061 
»suÉ
 = 
	`ü—‹Gu¬dedPACİy
(
’v
, 
¬¿y
, 
isCİy
);

2063 
	`CHECK_EXIT
(
’v
);

2064  
»suÉ
;

2065 
	}
}

2067 
	$Check_R–—£Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
¬¿y
,

2068 * 
ÿ¼ay
, 
jšt
 
mode
)

2070 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™R–—£
 | 
kFÏg_ExûpOkay
);

2071 
	`CHECK_ARRAY
(
’v
, 
¬¿y
);

2072 
	`CHECK_NON_NULL
(
’v
, 
ÿ¼ay
);

2073 
	`CHECK_RELEASE_MODE
(
’v
, 
mode
);

2074 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
) {

2075 
ÿ¼ay
 = 
	`»Ëa£Gu¬dedPACİy
(
’v
, 
¬¿y
, c¬¿y, 
mode
);

2077 
	`BASE_ENV
(
’v
)->
	`R–—£Prim™iveA¼ayCr™iÿl
Ónv, 
¬¿y
, 
ÿ¼ay
, 
mode
);

2078 
	`CHECK_EXIT
(
’v
);

2079 
	}
}

2081 cÚ¡ 
jch¬
* 
	$Check_G‘SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
,

2082 
jboŞ—n
* 
isCİy
)

2084 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™G‘
);

2085 
	`CHECK_STRING
(
’v
, 
¡ršg
);

2086 cÚ¡ 
jch¬
* 
»suÉ
;

2087 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘SŒšgCr™iÿl
Ónv, 
¡ršg
, 
isCİy
);

2088 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
 && 
»suÉ
 !ğ
NULL
) {

2090 
Ën
 = 
	`dvmSŒšgL’
(
¡ršg
) * 2;

2091 
»suÉ
 = (cÚ¡ 
jch¬
*è
	`ü—‹Gu¬dedCİy
ÔesuÉ, 
Ën
, 
çl£
);

2092 ià(
isCİy
 !ğ
NULL
)

2093 *
isCİy
 = 
JNI_TRUE
;

2095 
	`CHECK_EXIT
(
’v
);

2096  
»suÉ
;

2097 
	}
}

2099 
	$Check_R–—£SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
¡ršg
,

2100 cÚ¡ 
jch¬
* 
ÿ¼ay
)

2102 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™R–—£
 | 
kFÏg_ExûpOkay
);

2103 
	`CHECK_STRING
(
’v
, 
¡ršg
);

2104 
	`CHECK_NON_NULL
(
’v
, 
ÿ¼ay
);

2105 ià(((
JNIEnvExt
*)
’v
)->
fÜûD©aCİy
) {

2106 ià(!
	`checkGu¬dedCİy
(
ÿ¼ay
, 
çl£
)) {

2107 
	`LOGE
("JNI: failed guarded copy check in ReleaseStringCritical\n");

2108 
	`abÜtMaybe
();

2111 
ÿ¼ay
 = (cÚ¡ 
jch¬
*è
	`ä“Gu¬dedCİy
((jchar*)carray);

2113 
	`BASE_ENV
(
’v
)->
	`R–—£SŒšgCr™iÿl
Ónv, 
¡ršg
, 
ÿ¼ay
);

2114 
	`CHECK_EXIT
(
’v
);

2115 
	}
}

2117 
jw—k
 
	$Check_NewW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

2119 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2120 
	`CHECK_OBJECT
(
’v
, 
obj
);

2121 
jw—k
 
»suÉ
;

2122 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewW—kGlob®Ref
Ónv, 
obj
);

2123 
	`CHECK_EXIT
(
’v
);

2124  
»suÉ
;

2125 
	}
}

2127 
	$Check_D–‘eW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jw—k
 
obj
)

2129 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
 | 
kFÏg_ExûpOkay
);

2130 
	`CHECK_OBJECT
(
’v
, 
obj
);

2131 
	`BASE_ENV
(
’v
)->
	`D–‘eW—kGlob®Ref
Ónv, 
obj
);

2132 
	`CHECK_EXIT
(
’v
);

2133 
	}
}

2135 
jboŞ—n
 
	$Check_Exû±iÚCheck
(
JNIEnv
* 
’v
)

2137 
	`CHECK_ENTER
(
’v
, 
kFÏg_Cr™Okay
 | 
kFÏg_ExûpOkay
);

2138 
jboŞ—n
 
»suÉ
;

2139 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`Exû±iÚCheck
(env);

2140 
	`CHECK_EXIT
(
’v
);

2141  
»suÉ
;

2142 
	}
}

2144 
jobjeùRefTy³
 
	$Check_G‘ObjeùRefTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

2146 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2147 
	`CHECK_OBJECT
(
’v
, 
obj
);

2148 
jobjeùRefTy³
 
»suÉ
;

2149 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘ObjeùRefTy³
Ónv, 
obj
);

2150 
	`CHECK_EXIT
(
’v
);

2151  
»suÉ
;

2152 
	}
}

2154 
jobjeù
 
	$Check_NewDœeùBy‹Bufãr
(
JNIEnv
* 
’v
, * 
add»ss
,

2155 
jlÚg
 
ÿ·c™y
)

2157 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2158 
jobjeù
 
»suÉ
;

2159 ià(
add»ss
 =ğ
NULL
 || 
ÿ·c™y
 < 0) {

2160 
	`LOGW
("JNI WARNING: invalid values for‡ddress (%p) or capacity (%ld)\n",

2161 
add»ss
, (è
ÿ·c™y
);

2162 
	`abÜtMaybe
();

2163  
NULL
;

2165 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`NewDœeùBy‹Bufãr
Ónv, 
add»ss
, 
ÿ·c™y
);

2166 
	`CHECK_EXIT
(
’v
);

2167  
»suÉ
;

2168 
	}
}

2170 * 
	$Check_G‘DœeùBufãrAdd»ss
(
JNIEnv
* 
’v
, 
jobjeù
 
buf
)

2172 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2173 
	`CHECK_OBJECT
(
’v
, 
buf
);

2174 * 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘DœeùBufãrAdd»ss
Ónv, 
buf
);

2175 
	`CHECK_EXIT
(
’v
);

2178 ià(
kRedundªtDœeùBufãrTe¡
) {

2179 
jobjeù
 
¶©fÜmAddr
 = 
NULL
;

2180 * 
checkResuÉ
 = 
NULL
;

2186 ià(
JNI_FALSE
 =ğ(*
’v
)->
	`IsIn¡ªûOf
Ónv, 
buf
,

2187 
gDvm
.
jşassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
))

2189 
ba
;

2198 
¶©fÜmAddr
 = (*
’v
)->
	`C®lObjeùM‘hod
Ónv, 
buf
,

2199 (
jm‘hodID
è
gDvm
.
m‘hOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr_g‘EfãùiveAdd»ss
);

2201 ià((*
’v
)->
	`Exû±iÚCheck
(env)) {

2202 (*
’v
)->
	`Exû±iÚCË¬
(env);

2203 
¶©fÜmAddr
 = 
NULL
;

2205 ià(
¶©fÜmAddr
 =ğ
NULL
) {

2206 
	`LOGV
("Got„equest for‡ddress of‚on-direct buffer\n");

2207 
ba
;

2210 
jşass
 
¶©fÜmAddrCÏss
 = (*
’v
)->
	`FšdCÏss
(env,

2212 
jm‘hodID
 
toLÚgM‘hod
 = (*
’v
)->
	`G‘M‘hodID
Ónv, 
¶©fÜmAddrCÏss
,

2214 
checkResuÉ
 = (*)(
u4
)(*
’v
)->
	`C®lLÚgM‘hod
Ónv, 
¶©fÜmAddr
,

2215 
toLÚgM‘hod
);

2217 
ba
:

2218 ià(
¶©fÜmAddr
 !ğ
NULL
)

2219 (*
’v
)->
	`D–‘eLoÿlRef
Ónv, 
¶©fÜmAddr
);

2221 ià(
»suÉ
 !ğ
checkResuÉ
) {

2222 
	`LOGW
("JNI WARNING: direct buffer„esult mismatch (%p vs %p)\n",

2223 
»suÉ
, 
checkResuÉ
);

2224 
	`abÜtMaybe
();

2229  
»suÉ
;

2230 
	}
}

2232 
jlÚg
 
	$Check_G‘DœeùBufãrC­ac™y
(
JNIEnv
* 
’v
, 
jobjeù
 
buf
)

2234 
	`CHECK_ENTER
(
’v
, 
kFÏg_DeçuÉ
);

2235 
	`CHECK_OBJECT
(
’v
, 
buf
);

2237 
jlÚg
 
»suÉ
 = 
	`BASE_ENV
(
’v
)->
	`G‘DœeùBufãrC­ac™y
Ónv, 
buf
);

2238 
	`CHECK_EXIT
(
’v
);

2239  
»suÉ
;

2240 
	}
}

2249 
jšt
 
	$Check_De¡royJavaVM
(
JavaVM
* 
vm
)

2251 
	`CHECK_VMENTER
(
vm
, 
çl£
);

2252 
jšt
 
»suÉ
;

2253 
»suÉ
 = 
	`BASE_VM
(
vm
)->
	`De¡royJavaVM
(vm);

2254 
	`CHECK_VMEXIT
(
vm
, 
çl£
);

2255  
»suÉ
;

2256 
	}
}

2258 
jšt
 
	$Check_A‰achCu¼’tTh»ad
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
,

2259 * 
thr_¬gs
)

2261 
	`CHECK_VMENTER
(
vm
, 
çl£
);

2262 
jšt
 
»suÉ
;

2263 
»suÉ
 = 
	`BASE_VM
(
vm
)->
	`A‰achCu¼’tTh»ad
(vm, 
p_’v
, 
thr_¬gs
);

2264 
	`CHECK_VMEXIT
(
vm
, 
Œue
);

2265  
»suÉ
;

2266 
	}
}

2268 
jšt
 
	$Check_A‰achCu¼’tTh»adAsD«mÚ
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
,

2269 * 
thr_¬gs
)

2271 
	`CHECK_VMENTER
(
vm
, 
çl£
);

2272 
jšt
 
»suÉ
;

2273 
»suÉ
 = 
	`BASE_VM
(
vm
)->
	`A‰achCu¼’tTh»adAsD«mÚ
(vm, 
p_’v
, 
thr_¬gs
);

2274 
	`CHECK_VMEXIT
(
vm
, 
Œue
);

2275  
»suÉ
;

2276 
	}
}

2278 
jšt
 
	$Check_D‘achCu¼’tTh»ad
(
JavaVM
* 
vm
)

2280 
	`CHECK_VMENTER
(
vm
, 
Œue
);

2281 
jšt
 
»suÉ
;

2282 
»suÉ
 = 
	`BASE_VM
(
vm
)->
	`D‘achCu¼’tTh»ad
(vm);

2283 
	`CHECK_VMEXIT
(
vm
, 
çl£
);

2284  
»suÉ
;

2285 
	}
}

2287 
jšt
 
	$Check_G‘Env
(
JavaVM
* 
vm
, ** 
’v
, 
jšt
 
v”siÚ
)

2289 
	`CHECK_VMENTER
(
vm
, 
Œue
);

2290 
jšt
 
»suÉ
;

2291 
»suÉ
 = 
	`BASE_VM
(
vm
)->
	`G‘Env
(vm, 
’v
, 
v”siÚ
);

2292 
	`CHECK_VMEXIT
(
vm
, 
Œue
);

2293  
»suÉ
;

2294 
	}
}

2303 cÚ¡ 
JNIN©iveIÁ”çû
 
	ggCheckN©iveIÁ”çû
 = {

2304 
NULL
,

2305 
NULL
,

2306 
NULL
,

2307 
NULL
,

2309 
Check_G‘V”siÚ
,

2311 
Check_DefšeCÏss
,

2312 
Check_FšdCÏss
,

2314 
Check_FromReæeùedM‘hod
,

2315 
Check_FromReæeùedF›ld
,

2316 
Check_ToReæeùedM‘hod
,

2318 
Check_G‘Su³rşass
,

2319 
Check_IsAssigÇbËFrom
,

2321 
Check_ToReæeùedF›ld
,

2323 
Check_Throw
,

2324 
Check_ThrowNew
,

2325 
Check_Exû±iÚOccu¼ed
,

2326 
Check_Exû±iÚDesüibe
,

2327 
Check_Exû±iÚCË¬
,

2328 
Check_F©®E¼Ü
,

2330 
Check_PushLoÿlF¿me
,

2331 
Check_PİLoÿlF¿me
,

2333 
Check_NewGlob®Ref
,

2334 
Check_D–‘eGlob®Ref
,

2335 
Check_D–‘eLoÿlRef
,

2336 
Check_IsSameObjeù
,

2337 
Check_NewLoÿlRef
,

2338 
Check_Ensu»LoÿlC­ac™y
,

2340 
Check_AÎocObjeù
,

2341 
Check_NewObjeù
,

2342 
Check_NewObjeùV
,

2343 
Check_NewObjeùA
,

2345 
Check_G‘ObjeùCÏss
,

2346 
Check_IsIn¡ªûOf
,

2348 
Check_G‘M‘hodID
,

2350 
Check_C®lObjeùM‘hod
,

2351 
Check_C®lObjeùM‘hodV
,

2352 
Check_C®lObjeùM‘hodA
,

2353 
Check_C®lBoŞ—nM‘hod
,

2354 
Check_C®lBoŞ—nM‘hodV
,

2355 
Check_C®lBoŞ—nM‘hodA
,

2356 
Check_C®lBy‹M‘hod
,

2357 
Check_C®lBy‹M‘hodV
,

2358 
Check_C®lBy‹M‘hodA
,

2359 
Check_C®lCh¬M‘hod
,

2360 
Check_C®lCh¬M‘hodV
,

2361 
Check_C®lCh¬M‘hodA
,

2362 
Check_C®lShÜtM‘hod
,

2363 
Check_C®lShÜtM‘hodV
,

2364 
Check_C®lShÜtM‘hodA
,

2365 
Check_C®lIÁM‘hod
,

2366 
Check_C®lIÁM‘hodV
,

2367 
Check_C®lIÁM‘hodA
,

2368 
Check_C®lLÚgM‘hod
,

2369 
Check_C®lLÚgM‘hodV
,

2370 
Check_C®lLÚgM‘hodA
,

2371 
Check_C®lFlßtM‘hod
,

2372 
Check_C®lFlßtM‘hodV
,

2373 
Check_C®lFlßtM‘hodA
,

2374 
Check_C®lDoubËM‘hod
,

2375 
Check_C®lDoubËM‘hodV
,

2376 
Check_C®lDoubËM‘hodA
,

2377 
Check_C®lVoidM‘hod
,

2378 
Check_C®lVoidM‘hodV
,

2379 
Check_C®lVoidM‘hodA
,

2381 
Check_C®lNÚvœtu®ObjeùM‘hod
,

2382 
Check_C®lNÚvœtu®ObjeùM‘hodV
,

2383 
Check_C®lNÚvœtu®ObjeùM‘hodA
,

2384 
Check_C®lNÚvœtu®BoŞ—nM‘hod
,

2385 
Check_C®lNÚvœtu®BoŞ—nM‘hodV
,

2386 
Check_C®lNÚvœtu®BoŞ—nM‘hodA
,

2387 
Check_C®lNÚvœtu®By‹M‘hod
,

2388 
Check_C®lNÚvœtu®By‹M‘hodV
,

2389 
Check_C®lNÚvœtu®By‹M‘hodA
,

2390 
Check_C®lNÚvœtu®Ch¬M‘hod
,

2391 
Check_C®lNÚvœtu®Ch¬M‘hodV
,

2392 
Check_C®lNÚvœtu®Ch¬M‘hodA
,

2393 
Check_C®lNÚvœtu®ShÜtM‘hod
,

2394 
Check_C®lNÚvœtu®ShÜtM‘hodV
,

2395 
Check_C®lNÚvœtu®ShÜtM‘hodA
,

2396 
Check_C®lNÚvœtu®IÁM‘hod
,

2397 
Check_C®lNÚvœtu®IÁM‘hodV
,

2398 
Check_C®lNÚvœtu®IÁM‘hodA
,

2399 
Check_C®lNÚvœtu®LÚgM‘hod
,

2400 
Check_C®lNÚvœtu®LÚgM‘hodV
,

2401 
Check_C®lNÚvœtu®LÚgM‘hodA
,

2402 
Check_C®lNÚvœtu®FlßtM‘hod
,

2403 
Check_C®lNÚvœtu®FlßtM‘hodV
,

2404 
Check_C®lNÚvœtu®FlßtM‘hodA
,

2405 
Check_C®lNÚvœtu®DoubËM‘hod
,

2406 
Check_C®lNÚvœtu®DoubËM‘hodV
,

2407 
Check_C®lNÚvœtu®DoubËM‘hodA
,

2408 
Check_C®lNÚvœtu®VoidM‘hod
,

2409 
Check_C®lNÚvœtu®VoidM‘hodV
,

2410 
Check_C®lNÚvœtu®VoidM‘hodA
,

2412 
Check_G‘F›ldID
,

2414 
Check_G‘ObjeùF›ld
,

2415 
Check_G‘BoŞ—nF›ld
,

2416 
Check_G‘By‹F›ld
,

2417 
Check_G‘Ch¬F›ld
,

2418 
Check_G‘ShÜtF›ld
,

2419 
Check_G‘IÁF›ld
,

2420 
Check_G‘LÚgF›ld
,

2421 
Check_G‘FlßtF›ld
,

2422 
Check_G‘DoubËF›ld
,

2423 
Check_S‘ObjeùF›ld
,

2424 
Check_S‘BoŞ—nF›ld
,

2425 
Check_S‘By‹F›ld
,

2426 
Check_S‘Ch¬F›ld
,

2427 
Check_S‘ShÜtF›ld
,

2428 
Check_S‘IÁF›ld
,

2429 
Check_S‘LÚgF›ld
,

2430 
Check_S‘FlßtF›ld
,

2431 
Check_S‘DoubËF›ld
,

2433 
Check_G‘SticM‘hodID
,

2435 
Check_C®lSticObjeùM‘hod
,

2436 
Check_C®lSticObjeùM‘hodV
,

2437 
Check_C®lSticObjeùM‘hodA
,

2438 
Check_C®lSticBoŞ—nM‘hod
,

2439 
Check_C®lSticBoŞ—nM‘hodV
,

2440 
Check_C®lSticBoŞ—nM‘hodA
,

2441 
Check_C®lSticBy‹M‘hod
,

2442 
Check_C®lSticBy‹M‘hodV
,

2443 
Check_C®lSticBy‹M‘hodA
,

2444 
Check_C®lSticCh¬M‘hod
,

2445 
Check_C®lSticCh¬M‘hodV
,

2446 
Check_C®lSticCh¬M‘hodA
,

2447 
Check_C®lSticShÜtM‘hod
,

2448 
Check_C®lSticShÜtM‘hodV
,

2449 
Check_C®lSticShÜtM‘hodA
,

2450 
Check_C®lSticIÁM‘hod
,

2451 
Check_C®lSticIÁM‘hodV
,

2452 
Check_C®lSticIÁM‘hodA
,

2453 
Check_C®lSticLÚgM‘hod
,

2454 
Check_C®lSticLÚgM‘hodV
,

2455 
Check_C®lSticLÚgM‘hodA
,

2456 
Check_C®lSticFlßtM‘hod
,

2457 
Check_C®lSticFlßtM‘hodV
,

2458 
Check_C®lSticFlßtM‘hodA
,

2459 
Check_C®lSticDoubËM‘hod
,

2460 
Check_C®lSticDoubËM‘hodV
,

2461 
Check_C®lSticDoubËM‘hodA
,

2462 
Check_C®lSticVoidM‘hod
,

2463 
Check_C®lSticVoidM‘hodV
,

2464 
Check_C®lSticVoidM‘hodA
,

2466 
Check_G‘SticF›ldID
,

2468 
Check_G‘SticObjeùF›ld
,

2469 
Check_G‘SticBoŞ—nF›ld
,

2470 
Check_G‘SticBy‹F›ld
,

2471 
Check_G‘SticCh¬F›ld
,

2472 
Check_G‘SticShÜtF›ld
,

2473 
Check_G‘SticIÁF›ld
,

2474 
Check_G‘SticLÚgF›ld
,

2475 
Check_G‘SticFlßtF›ld
,

2476 
Check_G‘SticDoubËF›ld
,

2478 
Check_S‘SticObjeùF›ld
,

2479 
Check_S‘SticBoŞ—nF›ld
,

2480 
Check_S‘SticBy‹F›ld
,

2481 
Check_S‘SticCh¬F›ld
,

2482 
Check_S‘SticShÜtF›ld
,

2483 
Check_S‘SticIÁF›ld
,

2484 
Check_S‘SticLÚgF›ld
,

2485 
Check_S‘SticFlßtF›ld
,

2486 
Check_S‘SticDoubËF›ld
,

2488 
Check_NewSŒšg
,

2490 
Check_G‘SŒšgL’gth
,

2491 
Check_G‘SŒšgCh¬s
,

2492 
Check_R–—£SŒšgCh¬s
,

2494 
Check_NewSŒšgUTF
,

2495 
Check_G‘SŒšgUTFL’gth
,

2496 
Check_G‘SŒšgUTFCh¬s
,

2497 
Check_R–—£SŒšgUTFCh¬s
,

2499 
Check_G‘A¼ayL’gth
,

2500 
Check_NewObjeùA¼ay
,

2501 
Check_G‘ObjeùA¼ayEËm’t
,

2502 
Check_S‘ObjeùA¼ayEËm’t
,

2504 
Check_NewBoŞ—nA¼ay
,

2505 
Check_NewBy‹A¼ay
,

2506 
Check_NewCh¬A¼ay
,

2507 
Check_NewShÜtA¼ay
,

2508 
Check_NewIÁA¼ay
,

2509 
Check_NewLÚgA¼ay
,

2510 
Check_NewFlßtA¼ay
,

2511 
Check_NewDoubËA¼ay
,

2513 
Check_G‘BoŞ—nA¼ayEËm’ts
,

2514 
Check_G‘By‹A¼ayEËm’ts
,

2515 
Check_G‘Ch¬A¼ayEËm’ts
,

2516 
Check_G‘ShÜtA¼ayEËm’ts
,

2517 
Check_G‘IÁA¼ayEËm’ts
,

2518 
Check_G‘LÚgA¼ayEËm’ts
,

2519 
Check_G‘FlßtA¼ayEËm’ts
,

2520 
Check_G‘DoubËA¼ayEËm’ts
,

2522 
Check_R–—£BoŞ—nA¼ayEËm’ts
,

2523 
Check_R–—£By‹A¼ayEËm’ts
,

2524 
Check_R–—£Ch¬A¼ayEËm’ts
,

2525 
Check_R–—£ShÜtA¼ayEËm’ts
,

2526 
Check_R–—£IÁA¼ayEËm’ts
,

2527 
Check_R–—£LÚgA¼ayEËm’ts
,

2528 
Check_R–—£FlßtA¼ayEËm’ts
,

2529 
Check_R–—£DoubËA¼ayEËm’ts
,

2531 
Check_G‘BoŞ—nA¼ayRegiÚ
,

2532 
Check_G‘By‹A¼ayRegiÚ
,

2533 
Check_G‘Ch¬A¼ayRegiÚ
,

2534 
Check_G‘ShÜtA¼ayRegiÚ
,

2535 
Check_G‘IÁA¼ayRegiÚ
,

2536 
Check_G‘LÚgA¼ayRegiÚ
,

2537 
Check_G‘FlßtA¼ayRegiÚ
,

2538 
Check_G‘DoubËA¼ayRegiÚ
,

2539 
Check_S‘BoŞ—nA¼ayRegiÚ
,

2540 
Check_S‘By‹A¼ayRegiÚ
,

2541 
Check_S‘Ch¬A¼ayRegiÚ
,

2542 
Check_S‘ShÜtA¼ayRegiÚ
,

2543 
Check_S‘IÁA¼ayRegiÚ
,

2544 
Check_S‘LÚgA¼ayRegiÚ
,

2545 
Check_S‘FlßtA¼ayRegiÚ
,

2546 
Check_S‘DoubËA¼ayRegiÚ
,

2548 
Check_Regi¡”N©ives
,

2549 
Check_UÄegi¡”N©ives
,

2551 
Check_MÚ™ÜEÁ”
,

2552 
Check_MÚ™ÜEx™
,

2554 
Check_G‘JavaVM
,

2556 
Check_G‘SŒšgRegiÚ
,

2557 
Check_G‘SŒšgUTFRegiÚ
,

2559 
Check_G‘Prim™iveA¼ayCr™iÿl
,

2560 
Check_R–—£Prim™iveA¼ayCr™iÿl
,

2562 
Check_G‘SŒšgCr™iÿl
,

2563 
Check_R–—£SŒšgCr™iÿl
,

2565 
Check_NewW—kGlob®Ref
,

2566 
Check_D–‘eW—kGlob®Ref
,

2568 
Check_Exû±iÚCheck
,

2570 
Check_NewDœeùBy‹Bufãr
,

2571 
Check_G‘DœeùBufãrAdd»ss
,

2572 
Check_G‘DœeùBufãrC­ac™y
,

2574 
Check_G‘ObjeùRefTy³


2576 cÚ¡ 
JNIInvokeIÁ”çû
 
	ggCheckInvokeIÁ”çû
 = {

2577 
NULL
,

2578 
NULL
,

2579 
NULL
,

2581 
Check_De¡royJavaVM
,

2582 
Check_A‰achCu¼’tTh»ad
,

2583 
Check_D‘achCu¼’tTh»ad
,

2585 
Check_G‘Env
,

2587 
Check_A‰achCu¼’tTh»adAsD«mÚ
,

2594 
	$dvmU£CheckedJniEnv
(
JNIEnvExt
* 
pEnv
)

2596 
	`as£¹
(
pEnv
->
funcTabË
 !ğ&
gCheckN©iveIÁ”çû
);

2597 
pEnv
->
ba£FuncTabË
 =…Env->
funcTabË
;

2598 
pEnv
->
funcTabË
 = &
gCheckN©iveIÁ”çû
;

2599 
	}
}

2604 
	$dvmU£CheckedJniVm
(
JavaVMExt
* 
pVm
)

2606 
	`as£¹
(
pVm
->
funcTabË
 !ğ&
gCheckInvokeIÁ”çû
);

2607 
pVm
->
ba£FuncTabË
 =…Vm->
funcTabË
;

2608 
pVm
->
funcTabË
 = &
gCheckInvokeIÁ”çû
;

2609 
	}
}

	@Common.h

20 #iâdeà
_DALVIK_COMMON


21 
	#_DALVIK_COMMON


	)

23 #iâdeà
LOG_TAG


24 
	#LOG_TAG
 "d®vikvm"

	)

27 
	~<¡dio.h
>

28 
	~<as£¹.h
>

30 #ià!
defšed
(
NDEBUG
è&& defšed(
WITH_DALVIK_ASSERT
)

31 #undeà
as£¹


32 
	#as£¹
(
x
) \

33 ((
x
è? (()0è: (
	`LOGE
("ASSERT FAILED (%s:%d): %s\n", \

34 
__FILE__
, 
__LINE__
, #x), *(*)39=39, 0è)

	)

46 #ià
defšed
(
VERY_VERBOSE_LOG
)

47 
	#LOGVV
 
LOGV


	)

48 
	#IF_LOGVV
(è
	`IF_LOGV
()

	)

50 
	#LOGVV
(...è(()0)

	)

51 
	#IF_LOGVV
(èià(
çl£
)

	)

58 #ifdeà
HAVE_STDINT_H


59 
	~<¡dšt.h
>

60 
ušt8_t
 
	tu1
;

61 
ušt16_t
 
	tu2
;

62 
ušt32_t
 
	tu4
;

63 
ušt64_t
 
	tu8
;

64 
št8_t
 
	ts1
;

65 
št16_t
 
	ts2
;

66 
št32_t
 
	ts4
;

67 
št64_t
 
	ts8
;

69 
	tu1
;

70 
	tu2
;

71 
	tu4
;

72 
	tu8
;

73 sigÃd 
	ts1
;

74 sigÃd 
	ts2
;

75 sigÃd 
	ts4
;

76 sigÃd 
	ts8
;

87 
	uJV®ue
 {

88 
u1
 
	mz
;

89 
s1
 
	mb
;

90 
u2
 
	mc
;

91 
s2
 
	ms
;

92 
s4
 
	mi
;

93 
s8
 
	mj
;

94 
	mf
;

95 
	md
;

96 * 
	ml
;

97 } 
	tJV®ue
;

102 #ifdeà
HAVE_STDBOOL_H


103 
	~<¡dboŞ.h
>

105 #iâdeà
__boŞ_Œue_çl£_¬e_defšed


106 ’um { 
	mçl£
=0, 
	mŒue
=!
çl£
 } 
	tboŞ
;

107 
	#__boŞ_Œue_çl£_¬e_defšed
 1

	)

111 
	#NELEM
(
x
è((è((xè/ ((x)[0])))

	)

114 #ià
defšed
(
HAVE_ENDIAN_H
)

115 
	~<’dŸn.h
>

117 
	#__BIG_ENDIAN
 4321

	)

118 
	#__LITTLE_ENDIAN
 1234

	)

119 #ià
defšed
(
HAVE_LITTLE_ENDIAN
)

120 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

122 
	#__BYTE_ORDER
 
__BIG_ENDIAN


	)

132 
	#ANDROID_LOG_DEBUG
 3

	)

133 
	#LOGV
(...è
	`LOG_PRI
(2, 0, 
__VA_ARGS__
)

	)

134 
	#LOGD
(...è
	`LOG_PRI
(3, 0, 
__VA_ARGS__
)

	)

135 
	#LOGI
(...è
	`LOG_PRI
(4, 0, 
__VA_ARGS__
)

	)

136 
	#LOGW
(...è
	`LOG_PRI
(5, 0, 
__VA_ARGS__
)

	)

137 
	#LOGE
(...è
	`LOG_PRI
(6, 0, 
__VA_ARGS__
)

	)

138 
	#MIN_LOG_LEVEL
 2

	)

140 
	#LOG_PRI
(
´iÜ™y
, 
g
, ...) do { \

141 ià(
´iÜ™y
 >ğ
MIN_LOG_LEVEL
) { \

142 
	`dvmF´štf
(
¡dout
, "%s:%-4d ", 
__FILE__
, 
__LINE__
); \

143 
	`dvmF´štf
(
¡dout
, 
__VA_ARGS__
); \

145 } 0)

	)

147 
	~"uts/Log.h
"

	@Dalvik.h

20 #iâdeà
_DALVIK_DALVIK


21 
	#_DALVIK_DALVIK


	)

23 
	~<±h»ad.h
>

25 
	~"CommÚ.h
"

26 
	~"IÆšes.h
"

27 
	~"Misc.h
"

28 
	~"B™s.h
"

29 
	~"libdex/SysUt.h
"

30 
	~"libdex/DexFe.h
"

31 
	~"libdex/DexPrÙo.h
"

32 
	~"libdex/ZArchive.h
"

33 
	~"ª®ysis/ReduûCÚ¡ªts.h
"

34 
	~"DvmDex.h
"

35 
	~"RawDexFe.h
"

36 
	~"Sync.h
"

37 
	~"oo/Objeù.h
"

38 
	~"N©ive.h
"

39 
	~"Çtive/IÁ”ÇlN©ive.h
"

41 
	~"D®vikV”siÚ.h
"

42 
	~"Debugg”.h
"

43 
	~"Profe.h
"

44 
	~"UtfSŒšg.h
"

45 
	~"IÁ”n.h
"

46 
	~"Reã»nûTabË.h
"

47 
	~"IndœeùRefTabË.h
"

48 
	~"AtomicCache.h
"

49 
	~"Th»ad.h
"

50 
	~"Ddm.h
"

51 
	~"Hash.h
"

52 
	~"š‹½/Sck.h
"

53 
	~"oo/CÏss.h
"

54 
	~"oo/ResŞve.h
"

55 
	~"oo/A¼ay.h
"

56 
	~"Exû±iÚ.h
"

57 
	~"®loc/AÎoc.h
"

58 
	~"®loc/H—pDebug.h
"

59 
	~"®loc/H—pWÜk”.h
"

60 
	~"®loc/GC.h
"

61 
	~"oo/AcûssCheck.h
"

62 
	~"J¬Fe.h
"

63 
	~"Prİ”t›s.h
"

64 
	~"jdwp/Jdwp.h
"

65 
	~"SigÇlC©ch”.h
"

66 
	~"StdioCÚv”‹r.h
"

67 
	~"JniIÁ”Çl.h
"

68 
	~"Lš—rAÎoc.h
"

69 
	~"ª®ysis/DexV”ify.h
"

70 
	~"ª®ysis/DexO±imize.h
"

71 
	~"ª®ysis/Regi¡”M­.h
"

72 
	~"In™.h
"

73 
	~"libdex/OpCode.h
"

74 
	~"libdex/In¡rUts.h
"

75 
	~"AÎocT¿ck”.h
"

76 
	~"Poš‹rS‘.h
"

77 #ià
defšed
(
WITH_JIT
)

78 
	~"comp”/Comp”.h
"

80 
	~"Glob®s.h
"

81 
	~"»æeù/Reæeù.h
"

82 
	~"oo/Ty³Check.h
"

83 
	~"Atomic.h
"

84 
	~"š‹½/IÁ”p.h
"

85 
	~"IÆšeN©ive.h
"

87 #ifdeà
WITH_TAINT_TRACKING


88 
	~"š‹½/Tašt.h
"

89 
	~"rİ/TaštPrİ.h
"

	@DalvikVersion.h

20 #iâdeà
_DALVIK_VERSION


21 
	#_DALVIK_VERSION


	)

26 
	#DALVIK_MAJOR_VERSION
 1

	)

27 
	#DALVIK_MINOR_VERSION
 1

	)

28 
	#DALVIK_BUG_VERSION
 0

	)

35 
	#DALVIK_VM_BUILD
 17

	)

	@Ddm.c

22 
	~"D®vik.h
"

24 
	~<fú.h
>

25 
	~<”ºo.h
>

38 
boŞ
 
	$dvmDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

39 * 
pR•lyL’
)

41 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

42 cÚ¡ 
kChunkHdrL’
 = 8;

43 
A¼ayObjeù
* 
d©aA¼ay
 = 
NULL
;

44 
boŞ
 
»suÉ
 = 
çl£
;

46 
	`as£¹
(
d©aL’
 >= 0);

51 
CÏssObjeù
* 
ddmS”v”CÏss
;

52 
M‘hod
* 
di¥©ch
;

54 
ddmS”v”CÏss
 =

55 
	`dvmFšdCÏss
("LÜg/­ache/h¬mÚy/d®vik/ddmc/DdmS”v”;", 
NULL
);

56 ià(
ddmS”v”CÏss
 =ğ
NULL
) {

57 
	`LOGW
("Unableo find org.apache.harmony.dalvik.ddmc.DdmServer\n");

58 
ba
;

60 
di¥©ch
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
ddmS”v”CÏss
, "dispatch",

62 ià(
di¥©ch
 =ğ
NULL
) {

63 
	`LOGW
("Unableo find DdmServer.dispatch\n");

64 
ba
;

70 
chunkTy³Off
, 
chunkD©aOff
, 
chunkOff£tOff
, 
chunkL’gthOff
;

71 
CÏssObjeù
* 
chunkCÏss
;

72 
chunkCÏss
 = 
	`dvmFšdCÏss
("LÜg/­ache/h¬mÚy/d®vik/ddmc/Chunk;", 
NULL
);

73 ià(
chunkCÏss
 =ğ
NULL
) {

74 
	`LOGW
("Unableo find org.apache.harmony.dalvik.ddmc.Chunk\n");

75 
ba
;

77 
chunkTy³Off
 = 
	`dvmFšdF›ldOff£t
(
chunkCÏss
, "type", "I");

78 
chunkD©aOff
 = 
	`dvmFšdF›ldOff£t
(
chunkCÏss
, "data", "[B");

79 
chunkOff£tOff
 = 
	`dvmFšdF›ldOff£t
(
chunkCÏss
, "offset", "I");

80 
chunkL’gthOff
 = 
	`dvmFšdF›ldOff£t
(
chunkCÏss
, "length", "I");

81 ià(
chunkTy³Off
 < 0 || 
chunkD©aOff
 < 0 ||

82 
chunkOff£tOff
 < 0 || 
chunkL’gthOff
 < 0)

84 
	`LOGW
("Unableo find‡ll chunk fields\n");

85 
ba
;

92 
d©aA¼ay
 = 
	`dvmAÎocPrim™iveA¼ay
('B', 
d©aL’
, 
ALLOC_DEFAULT
);

93 ià(
d©aA¼ay
 =ğ
NULL
) {

94 
	`LOGW
("¬¿y‡Îoøçed (%d)\n", 
d©aL’
);

95 
	`dvmCË¬Exû±iÚ
(
£lf
);

96 
ba
;

98 
	`memıy
(
d©aA¼ay
->
cÚ‹Ás
, 
buf
, 
d©aL’
);

103 
off£t
, 
Ëngth
, 
ty³
;

104 
ty³
 = 
	`g‘4BE
((
u1
*)
d©aA¼ay
->
cÚ‹Ás
 + 0);

105 
Ëngth
 = 
	`g‘4BE
((
u1
*)
d©aA¼ay
->
cÚ‹Ás
 + 4);

106 
off£t
 = 
kChunkHdrL’
;

107 ià(
off£t
+
Ëngth
 > (è
d©aL’
) {

108 
	`LOGW
("WARNING: bad chunk found (Ën=%u…ktL’=%d)\n", 
Ëngth
, 
d©aL’
);

109 
ba
;

115 
JV®ue
 
ÿÎRes
;

116 
	`dvmC®lM‘hod
(
£lf
, 
di¥©ch
, 
NULL
, &
ÿÎRes
, 
ty³
, 
d©aA¼ay
, 
off£t
,

117 
Ëngth
);

118 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

119 
	`LOGI
("Exû±iÚhrowÀby di¥©ch” fÜ 0x%08x\n", 
ty³
);

120 
	`dvmLogExû±iÚSckT¿û
();

121 
	`dvmCË¬Exû±iÚ
(
£lf
);

122 
ba
;

125 
Objeù
* 
chunk
;

126 
A¼ayObjeù
* 
»¶yD©a
;

127 
chunk
 = (
Objeù
*è
ÿÎRes
.
l
;

128 ià(
chunk
 =ğ
NULL
)

129 
ba
;

144 
ty³
 = 
	`dvmG‘F›ldIÁ
(
chunk
, 
chunkTy³Off
);

145 
»¶yD©a
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
chunk
, 
chunkD©aOff
);

146 
off£t
 = 
	`dvmG‘F›ldIÁ
(
chunk
, 
chunkOff£tOff
);

147 
Ëngth
 = 
	`dvmG‘F›ldIÁ
(
chunk
, 
chunkL’gthOff
);

149 
	`LOGV
("DDM„eply:ype=0x%08x data=%p offset=%d†ength=%d\n",

150 
ty³
, 
»¶yD©a
, 
off£t
, 
Ëngth
);

152 ià(
Ëngth
 =ğ0 || 
»¶yD©a
 =ğ
NULL
)

153 
ba
;

154 ià(
off£t
 + 
Ëngth
 > 
»¶yD©a
->length) {

155 
	`LOGW
("WARNING: chunk off=%d†en=%dƒxceeds„eply‡rray†en %d\n",

156 
off£t
, 
Ëngth
, 
»¶yD©a
->length);

157 
ba
;

160 
u1
* 
»¶y
;

161 
»¶y
 = (
u1
*è
	`m®loc
(
Ëngth
 + 
kChunkHdrL’
);

162 ià(
»¶y
 =ğ
NULL
) {

163 
	`LOGW
("m®loø%d faed\n", 
Ëngth
+
kChunkHdrL’
);

164 
ba
;

166 
	`£t4BE
(
»¶y
 + 0, 
ty³
);

167 
	`£t4BE
(
»¶y
 + 4, 
Ëngth
);

168 
	`memıy
(
»¶y
+
kChunkHdrL’
, (cÚ¡ 
u1
*)
»¶yD©a
->
cÚ‹Ás
 + 
off£t
, 
Ëngth
);

170 *
pR•lyBuf
 = 
»¶y
;

171 *
pR•lyL’
 = 
Ëngth
 + 
kChunkHdrL’
;

172 
»suÉ
 = 
Œue
;

174 
	`LOGV
("dvmHandleDdm„eturningype=%.4s buf=%p†en=%d\n",

175 (*è
»¶y
,„•ly, 
Ëngth
);

177 
ba
:

178 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
d©aA¼ay
, 
NULL
);

179  
»suÉ
;

180 
	}
}

183 
	#CONNECTED
 1

	)

184 
	#DISCONNECTED
 2

	)

189 
	$brßdÿ¡
(
ev’t
)

191 
CÏssObjeù
* 
ddmS”v”CÏss
;

192 
M‘hod
* 
bÿ¡
;

194 
ddmS”v”CÏss
 =

195 
	`dvmFšdCÏss
("LÜg/­ache/h¬mÚy/d®vik/ddmc/DdmS”v”;", 
NULL
);

196 ià(
ddmS”v”CÏss
 =ğ
NULL
) {

197 
	`LOGW
("Unableo find org.apache.harmony.dalvik.ddmc.DdmServer\n");

198 
ba
;

200 
bÿ¡
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
ddmS”v”CÏss
, "broadcast", "(I)V");

201 ià(
bÿ¡
 =ğ
NULL
) {

202 
	`LOGW
("Unableo find DdmServer.broadcast\n");

203 
ba
;

206 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

208 ià(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
) {

209 
	`LOGE
("ERROR: DDM brßdÿ¡ w™hh»ad stus=%d\n", 
£lf
->
¡©us
);

213 
JV®ue
 
unu£d
;

214 
	`dvmC®lM‘hod
(
£lf
, 
bÿ¡
, 
NULL
, &
unu£d
, 
ev’t
);

215 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

216 
	`LOGI
("Exû±iÚhrowÀby brßdÿ¡(%d)\n", 
ev’t
);

217 
	`dvmLogExû±iÚSckT¿û
();

218 
	`dvmCË¬Exû±iÚ
(
£lf
);

219 
ba
;

222 
ba
:

224 
	}
}

231 
	$dvmDdmCÚÃùed
()

235 
	`LOGV
("Broadcasting DDM connect\n");

236 
	`brßdÿ¡
(
CONNECTED
);

237 
	}
}

244 
	$dvmDdmDiscÚÃùed
()

246 
	`LOGV
("Broadcasting DDM disconnect\n");

247 
	`brßdÿ¡
(
DISCONNECTED
);

249 
gDvm
.
ddmTh»adNÙifiÿtiÚ
 = 
çl£
;

250 
	}
}

256 
	$dvmDdmS‘Th»adNÙifiÿtiÚ
(
boŞ
 
’abË
)

263 
	`dvmLockTh»adLi¡
(
NULL
);

264 
gDvm
.
ddmTh»adNÙifiÿtiÚ
 = 
’abË
;

266 ià(
’abË
) {

267 
Th»ad
* 
th»ad
;

268 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

270 
	`dvmDdmS’dTh»adNÙifiÿtiÚ
(
th»ad
, 
Œue
);

274 
	`dvmUÆockTh»adLi¡
();

275 
	}
}

283 
	$dvmDdmS’dTh»adNÙifiÿtiÚ
(
Th»ad
* 
th»ad
, 
boŞ
 
¡¬‹d
)

285 ià(!
gDvm
.
ddmTh»adNÙifiÿtiÚ
)

288 
SŒšgObjeù
* 
ÇmeObj
 = (StringObject*)

289 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_Çme
);

291 
ty³
, 
Ën
;

292 
u1
 
buf
[256];

294 ià(
¡¬‹d
) {

295 cÚ¡ 
u2
* 
ch¬s
;

296 
u2
* 
outCh¬s
;

297 
size_t
 
¡ršgL’
;

299 
ty³
 = 
	`CHUNK_TYPE
("THCR");

301 ià(
ÇmeObj
 !ğ
NULL
) {

302 
¡ršgL’
 = 
	`dvmSŒšgL’
(
ÇmeObj
);

303 
ch¬s
 = 
	`dvmSŒšgCh¬s
(
ÇmeObj
);

305 
¡ršgL’
 = 0;

306 
ch¬s
 = 
NULL
;

310 ià(
¡ršgL’
 > ((
buf
è- (
u4
)*2) / 2)

311 
¡ršgL’
 = ((
buf
è- (
u4
)*2) / 2;

312 
Ën
 = 
¡ršgL’
*2 + (
u4
)*2;

314 
	`£t4BE
(&
buf
[0x00], 
th»ad
->
th»adId
);

315 
	`£t4BE
(&
buf
[0x04], 
¡ršgL’
);

318 
outCh¬s
 = (
u2
*è&
buf
[0x08];

319 
¡ršgL’
--)

320 
	`£t2BE
((
u1
*è(
outCh¬s
++), *
ch¬s
++);

322 
ty³
 = 
	`CHUNK_TYPE
("THDE");

324 
Ën
 = 4;

326 
	`£t4BE
(&
buf
[0x00], 
th»ad
->
th»adId
);

329 
	`dvmDbgDdmS’dChunk
(
ty³
, 
Ën
, 
buf
);

330 
	}
}

335 
	$dvmDdmS’dTh»adNameChªge
(
th»adId
, 
SŒšgObjeù
* 
ÃwName
)

337 ià(!
gDvm
.
ddmTh»adNÙifiÿtiÚ
)

340 
size_t
 
¡ršgL’
 = 
	`dvmSŒšgL’
(
ÃwName
);

341 cÚ¡ 
u2
* 
ch¬s
 = 
	`dvmSŒšgCh¬s
(
ÃwName
);

349 
bufL’
 = 4 + 4 + (
¡ršgL’
 * 2);

350 
u1
 
buf
[
bufL’
];

352 
	`£t4BE
(&
buf
[0x00], 
th»adId
);

353 
	`£t4BE
(&
buf
[0x04], 
¡ršgL’
);

354 
u2
* 
outCh¬s
 = (u2*è&
buf
[0x08];

355 
¡ršgL’
--)

356 
	`£t2BE
((
u1
*è(
outCh¬s
++), *
ch¬s
++);

358 
	`dvmDbgDdmS’dChunk
(
	`CHUNK_TYPE
("THNM"), 
bufL’
, 
buf
);

359 
	}
}

367 
boŞ
 
	$g‘Th»adSts
(
pid_t
 
pid
,…id_ˆ
tid
, * 
pUtime
,

368 * 
pStime
)

396 
ÇmeBuf
[64];

397 
i
, 
fd
;

403 
	`¥rštf
(
ÇmeBuf
, "/´oc/%d/sk/%d/¡©", (è
pid
, (è
tid
);

404 
fd
 = 
	`İ’
(
ÇmeBuf
, 
O_RDONLY
);

405 ià(
fd
 < 0) {

406 
	`LOGV
("UÇbËØİ’ '%s': %s\n", 
ÇmeBuf
, 
	`¡»¼Ü
(
”ºo
));

407  
çl£
;

410 
lšeBuf
[512];

411 
cc
;

412 
cc
 = 
	`»ad
(
fd
, 
lšeBuf
, (lineBuf)-1);

413 ià(
cc
 <= 0) {

414 
	`LOGI
("UÇbËØ»ad '%s': gÙ %d (”ºo=%d)\n", 
ÇmeBuf
, 
cc
, 
”ºo
);

415 
	`şo£
(
fd
);

416  
çl£
;

418 
lšeBuf
[
cc
] = '\0';

423 cÚ¡ * 
kWh™e¥aû
 = " ";

424 * 
ı
 = 
lšeBuf
;

425 
i
 = 0; i < 13; i++) {

426 
ı
 +ğ
	`¡rc¥n
(ı, 
kWh™e¥aû
);

427 
ı
 +ğ
	`¡r¥n
(ı, 
kWh™e¥aû
);

433 * 
’dp
;

434 *
pUtime
 = 
	`¡¹oul
(
ı
, &
’dp
, 10);

435 ià(
’dp
 =ğ
ı
)

436 
	`LOGI
("W¬nšg: sŒtouÈçed oÀutim('%.30s...')\n", 
ı
);

438 
ı
 +ğ
	`¡rc¥n
(ı, 
kWh™e¥aû
);

439 
ı
 +ğ
	`¡r¥n
(ı, 
kWh™e¥aû
);

441 *
pStime
 = 
	`¡¹oul
(
ı
, &
’dp
, 10);

442 ià(
’dp
 =ğ
ı
)

443 
	`LOGI
("W¬nšg: sŒtouÈçed oÀ¡im('%.30s...')\n", 
ı
);

445 
	`şo£
(
fd
);

446  
Œue
;

447 
	}
}

473 
A¼ayObjeù
* 
	$dvmDdmG’”©eTh»adSts
()

475 cÚ¡ 
kH—d”L’
 = 4;

476 cÚ¡ 
kBy‹sP”EÁry
 = 18;

478 
	`dvmLockTh»adLi¡
(
NULL
);

480 
Th»ad
* 
th»ad
;

481 
th»adCouÁ
 = 0;

482 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
)

483 
th»adCouÁ
++;

490 
bufL’
 = 
kH—d”L’
 + 
th»adCouÁ
 * 
kBy‹sP”EÁry
;

491 
u1
 
tmpBuf
[
bufL’
];

492 
u1
* 
buf
 = 
tmpBuf
;

494 
	`£t1
(
buf
+0, 
kH—d”L’
);

495 
	`£t1
(
buf
+1, 
kBy‹sP”EÁry
);

496 
	`£t2BE
(
buf
+2, (
u2
è
th»adCouÁ
);

497 
buf
 +ğ
kH—d”L’
;

499 
pid_t
 
pid
 = 
	`g‘pid
();

500 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

501 
utime
, 
¡ime
;

502 
boŞ
 
isD«mÚ
;

504 ià(!
	`g‘Th»adSts
(
pid
, 
th»ad
->
sy¡emTid
, &
utime
, &
¡ime
)) {

506 
utime
 = 
¡ime
 = 0;

509 
isD«mÚ
 = 
	`dvmG‘F›ldBoŞ—n
(
th»ad
->
th»adObj
,

510 
gDvm
.
offJavaLªgTh»ad_d«mÚ
);

512 
	`£t4BE
(
buf
+0, 
th»ad
->
th»adId
);

513 
	`£t1
(
buf
+4, 
th»ad
->
¡©us
);

514 
	`£t4BE
(
buf
+5, 
th»ad
->
sy¡emTid
);

515 
	`£t4BE
(
buf
+9, 
utime
);

516 
	`£t4BE
(
buf
+13, 
¡ime
);

517 
	`£t1
(
buf
+17, 
isD«mÚ
);

519 
buf
 +ğ
kBy‹sP”EÁry
;

521 
	`dvmUÆockTh»adLi¡
();

527 
A¼ayObjeù
* 
¬¿yObj
 = 
	`dvmAÎocPrim™iveA¼ay
('B', 
bufL’
, 
ALLOC_DEFAULT
);

528 ià(
¬¿yObj
 !ğ
NULL
)

529 
	`memıy
(
¬¿yObj
->
cÚ‹Ás
, 
tmpBuf
, 
bufL’
);

530  
¬¿yObj
;

531 
	}
}

538 
A¼ayObjeù
* 
	$dvmDdmG‘SckT¿ûById
(
u4
 
th»adId
)

540 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

541 
Th»ad
* 
th»ad
;

542 * 
ŒaûBuf
;

544 
	`dvmLockTh»adLi¡
(
£lf
);

546 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

547 ià(
th»ad
->
th»adId
 ==hreadId)

550 ià(
th»ad
 =ğ
NULL
) {

551 
	`LOGI
("dvmDdmG‘SckT¿ûById:h»adid=%d‚Ù found\n", 
th»adId
);

552 
	`dvmUÆockTh»adLi¡
();

553  
NULL
;

561 
¡ackD•th
 = -1;

562 ià(
th»ad
 !ğ
£lf
)

563 
	`dvmSu¥’dTh»ad
(
th»ad
);

564 
ŒaûBuf
 = 
	`dvmFlInSckT¿ûRaw
(
th»ad
, &
¡ackD•th
);

565 ià(
th»ad
 !ğ
£lf
)

566 
	`dvmResumeTh»ad
(
th»ad
);

567 
	`dvmUÆockTh»adLi¡
();

572 
A¼ayObjeù
* 
Œaû
 = 
	`dvmG‘SckT¿ûRaw
(
ŒaûBuf
, 
¡ackD•th
);

573 
	`ä“
(
ŒaûBuf
);

574  
Œaû
;

575 
	}
}

582 
A¼ayObjeù
* 
	$dvmDdmG‘ReûÁAÎoÿtiÚs
()

584 
u1
* 
d©a
;

585 
size_t
 
Ën
;

587 ià(!
	`dvmG’”©eT¿ckedAÎoÿtiÚR•Üt
(&
d©a
, &
Ën
)) {

589 
	`dvmThrowExû±iÚ
("Ljava/lang/OutOfMemoryError;","recent‡lloc‚ative");

590  
NULL
;

593 
A¼ayObjeù
* 
¬¿yObj
 = 
	`dvmAÎocPrim™iveA¼ay
('B', 
Ën
, 
ALLOC_DEFAULT
);

594 ià(
¬¿yObj
 !ğ
NULL
)

595 
	`memıy
(
¬¿yObj
->
cÚ‹Ás
, 
d©a
, 
Ën
);

596  
¬¿yObj
;

597 
	}
}

	@Ddm.h

19 #iâdeà
_DALVIK_DDM


20 
	#_DALVIK_DDM


	)

28 
boŞ
 
dvmDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

29 * 
pR•lyL’
);

34 
dvmDdmCÚÃùed
();

35 
dvmDdmDiscÚÃùed
();

40 
dvmDdmS‘Th»adNÙifiÿtiÚ
(
boŞ
 
’abË
);

46 
dvmDdmS’dTh»adNÙifiÿtiÚ
(
Th»ad
* 
th»ad
, 
boŞ
 
¡¬‹d
);

52 
dvmDdmS’dTh»adNameChªge
(
th»adId
, 
SŒšgObjeù
* 
ÃwName
);

57 
A¼ayObjeù
* 
dvmDdmG’”©eTh»adSts
();

64 
boŞ
 
dvmDdmHªdËHpifChunk
(
wh’
);

73 
boŞ
 
dvmDdmHªdËHpsgNhsgChunk
(
wh’
, 
wh©
, boŞ 
Çtive
);

78 
A¼ayObjeù
* 
dvmDdmG‘SckT¿ûById
(
u4
 
th»adId
);

85 
A¼ayObjeù
* 
dvmDdmG‘ReûÁAÎoÿtiÚs
();

	@Debugger.c

25 
	~"D®vik.h
"

90 
	#THREAD_GROUP_ALL
 ((
ObjeùId
) 0x12345)

91 

	)

92 
	#kSlÙ0Sub
 1000

93 

	)

98 
boŞ
 
	$dvmDebugg”S¹up
()

100 
gDvm
.
dbgRegi¡ry
 = 
	`dvmHashTabËC»©e
(1000, 
NULL
);

101  (
gDvm
.
dbgRegi¡ry
 !ğ
NULL
);

102 
	}
}

107 
	$dvmDebugg”Shutdown
()

109 
	`dvmHashTabËF»e
(
gDvm
.
dbgRegi¡ry
);

110 
gDvm
.
dbgRegi¡ry
 = 
NULL
;

111 
	}
}

118 
	$dvmDbgIn™Mu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

120 
	`dvmIn™Mu‹x
(
pMu‹x
);

121 
	}
}

122 
	$dvmDbgLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

124 
	`dvmLockMu‹x
(
pMu‹x
);

125 
	}
}

126 
	$dvmDbgUÆockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

128 
	`dvmUÆockMu‹x
(
pMu‹x
);

129 
	}
}

130 
	$dvmDbgIn™CÚd
(
±h»ad_cÚd_t
* 
pCÚd
)

132 
	`±h»ad_cÚd_š™
(
pCÚd
, 
NULL
);

133 
	}
}

134 
	$dvmDbgCÚdWa™
(
±h»ad_cÚd_t
* 
pCÚd
, 
±h»ad_mu‹x_t
* 
pMu‹x
)

136 
cc
 = 
	`±h»ad_cÚd_wa™
(
pCÚd
, 
pMu‹x
);

137 
	`as£¹
(
cc
 == 0);

138 
	}
}

139 
	$dvmDbgCÚdSigÇl
(
±h»ad_cÚd_t
* 
pCÚd
)

141 
cc
 = 
	`±h»ad_cÚd_sigÇl
(
pCÚd
);

142 
	`as£¹
(
cc
 == 0);

143 
	}
}

144 
	$dvmDbgCÚdBrßdÿ¡
(
±h»ad_cÚd_t
* 
pCÚd
)

146 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(
pCÚd
);

147 
	`as£¹
(
cc
 == 0);

148 
	}
}

152 
	eRegi¡ryTy³
 {

153 
	mkObjeùId
 = 0xc1, 
	mkRefTy³Id


154 } 
	tRegi¡ryTy³
;

161 
šlše
 
u4
 
	$»gi¡ryHash
(
u4
 
v®
)

163  
v®
 >> 4;

164 
	}
}

169 
	$»gi¡ryCom·»
(cÚ¡ * 
obj1
, cÚ¡ * 
obj2
)

171  (è
obj1
 - (è
obj2
;

172 
	}
}

182 
boŞ
 
	$lookupId
(
ObjeùId
 
id
)

184 * 
found
;

186 
found
 = 
	`dvmHashTabËLookup
(
gDvm
.
dbgRegi¡ry
, 
	`»gi¡ryHash
((
u4
è
id
),

187 (*)(
u4
è
id
, 
»gi¡ryCom·»
, 
çl£
);

188 ià(
found
 =ğ
NULL
)

189  
çl£
;

190 
	`as£¹
(
found
 =ğ(*)(
u4
è
id
);

191  
Œue
;

192 
	}
}

203 
ObjeùId
 
	$»gi¡”Objeù
(cÚ¡ 
Objeù
* 
obj
, 
Regi¡ryTy³
 
ty³
, 
boŞ
 
»g
)

205 
ObjeùId
 
id
;

207 ià(
obj
 =ğ
NULL
)

210 
	`as£¹
((
u4
è
obj
 != 0xcccccccc);

211 
	`as£¹
((
u4
è
obj
 > 0x100);

213 
id
 = (
ObjeùId
)(
u4
)
obj
 | ((
u8
è
ty³
) << 32;

214 ià(!
»g
)

215  
id
;

217 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

218 ià(!
gDvm
.
debugg”CÚÃùed
) {

220 
	`LOGI
("ignoring„egisterObject„equest inhread=%d\n",

221 
	`dvmTh»adS–f
()->
th»adId
);

223 
ba
;

226 (è
	`dvmHashTabËLookup
(
gDvm
.
dbgRegi¡ry
, 
	`»gi¡ryHash
((
u4
è
id
),

227 (*)(
u4
è
id
, 
»gi¡ryCom·»
, 
Œue
);

229 
ba
:

230 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

231  
id
;

232 
	}
}

237 
	$m¬kRef
(* 
d©a
, * 
¬g
)

239 
	`UNUSED_PARAMETER
(
¬g
);

242 
	`dvmM¬kObjeùNÚNuÎ
(
d©a
);

244 
	}
}

249 
	$dvmGcM¬kDebugg”Refs
()

253 ià(
gDvm
.
dbgRegi¡ry
 !ğ
NULL
) {

254 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

255 
	`dvmHashFÜ—ch
(
gDvm
.
dbgRegi¡ry
, 
m¬kRef
, 
NULL
);

256 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

258 
	}
}

270 
boŞ
 
	$objeùIsRegi¡”ed
(
ObjeùId
 
id
, 
Regi¡ryTy³
 
ty³
)

272 
	`UNUSED_PARAMETER
(
ty³
);

274 ià(
id
 == 0)

275  
Œue
;

277 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

278 
boŞ
 
»suÉ
 = 
	`lookupId
(
id
);

279 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

280  
»suÉ
;

281 
	}
}

288 
RefTy³Id
 
	$şassObjeùToRefTy³Id
(
CÏssObjeù
* 
şazz
)

290  (
RefTy³Id
è
	`»gi¡”Objeù
((
Objeù
*è
şazz
, 
kRefTy³Id
, 
Œue
);

291 
	}
}

292 
RefTy³Id
 
	$şassObjeùToRefTy³IdNoReg
(
CÏssObjeù
* 
şazz
)

294  (
RefTy³Id
è
	`»gi¡”Objeù
((
Objeù
*è
şazz
, 
kRefTy³Id
, 
çl£
);

295 
	}
}

296 
CÏssObjeù
* 
	$»fTy³IdToCÏssObjeù
(
RefTy³Id
 
id
)

298 
	`as£¹
(
	`objeùIsRegi¡”ed
(
id
, 
kRefTy³Id
è|| !
gDvm
.
debugg”CÚÃùed
);

299  (
CÏssObjeù
*)(
u4
è
id
;

300 
	}
}

305 
ObjeùId
 
	$objeùToObjeùId
(cÚ¡ 
Objeù
* 
obj
)

307  
	`»gi¡”Objeù
(
obj
, 
kObjeùId
, 
Œue
);

308 
	}
}

309 
ObjeùId
 
	$objeùToObjeùIdNoReg
(cÚ¡ 
Objeù
* 
obj
)

311  
	`»gi¡”Objeù
(
obj
, 
kObjeùId
, 
çl£
);

312 
	}
}

313 
Objeù
* 
	$objeùIdToObjeù
(
ObjeùId
 
id
)

315 
	`as£¹
(
	`objeùIsRegi¡”ed
(
id
, 
kObjeùId
è|| !
gDvm
.
debugg”CÚÃùed
);

316  (
Objeù
*)(
u4
è
id
;

317 
	}
}

325 
M‘hodId
 
	$m‘hodToM‘hodId
(cÚ¡ 
M‘hod
* 
m‘h
)

327  (
M‘hodId
)(
u4
è
m‘h
;

328 
	}
}

329 
M‘hod
* 
	$m‘hodIdToM‘hod
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
)

332  (
M‘hod
*)(
u4
è
id
;

333 
	}
}

341 
F›ldId
 
	$f›ldToF›ldId
(cÚ¡ 
F›ld
* 
f›ld
)

343  (
F›ldId
)(
u4
è
f›ld
;

344 
	}
}

345 
F›ld
* 
	$f›ldIdToF›ld
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
id
)

348  (
F›ld
*)(
u4
è
id
;

349 
	}
}

356 
F¿meId
 
	$äameToF¿meId
(cÚ¡ * 
äame
)

358  (
F¿meId
)(
u4
è
äame
;

359 
	}
}

360 * 
	$äameIdToF¿me
(
F¿meId
 
id
)

362  (*)(
u4
è
id
;

363 
	}
}

369 
DebugInvokeReq
* 
	$dvmDbgG‘InvokeReq
()

371  &
	`dvmTh»adS–f
()->
švokeReq
;

372 
	}
}

379 
	$dvmDbgCÚÃùed
()

381 
	`as£¹
(!
gDvm
.
debugg”CÚÃùed
);

383 
	`LOGV
("JDWP has‡ttached\n");

384 
	`as£¹
(
	`dvmHashTabËNumEÁr›s
(
gDvm
.
dbgRegi¡ry
) == 0);

385 
gDvm
.
debugg”CÚÃùed
 = 
Œue
;

386 
	}
}

395 
	$dvmDbgAùive
()

397 ià(
gDvm
.
debugg”Aùive
)

400 
	`LOGI
("Debugger is‡ctive\n");

401 
	`dvmIn™B»akpošts
();

402 
gDvm
.
debugg”Aùive
 = 
Œue
;

403 
	}
}

413 
	$dvmDbgDiscÚÃùed
()

415 
	`as£¹
(
gDvm
.
debugg”CÚÃùed
);

417 
gDvm
.
debugg”Aùive
 = 
çl£
;

419 
	`dvmHashTabËLock
(
gDvm
.
dbgRegi¡ry
);

420 
gDvm
.
debugg”CÚÃùed
 = 
çl£
;

422 
	`LOGI
("Debugger has detached; object„egistry had %dƒntries\n",

423 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
dbgRegi¡ry
));

428 
	`dvmHashTabËCË¬
(
gDvm
.
dbgRegi¡ry
);

429 
	`dvmHashTabËUÆock
(
gDvm
.
dbgRegi¡ry
);

430 
	}
}

437 
boŞ
 
	$dvmDbgIsDebugg”CÚÃùed
()

439  
gDvm
.
debugg”Aùive
;

440 
	}
}

446 
s8
 
	$dvmDbgLa¡Debugg”Aùiv™y
()

448  
	`dvmJdwpLa¡Debugg”Aùiv™y
(
gDvm
.
jdwpS‹
);

449 
	}
}

454 
	$dvmDbgTh»adRuÂšg
()

456  
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

457 
	}
}

462 
	$dvmDbgTh»adWa™šg
()

464  
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

465 
	}
}

470 
	$dvmDbgTh»adCÚtšušg
(
¡©us
)

472  
	`dvmChªgeStus
(
NULL
, 
¡©us
);

473 
	}
}

478 
	$dvmDbgEx™
(
¡©us
)

482 #ifdeà
WITH_PROFILER


483 
	`LOGI
("GC†iãtim®loÿtiÚ: %d by‹s\n", 
gDvm
.
®locProf
.
®locCouÁ
);

484 ià(
CALC_CACHE_STATS
) {

485 
	`dvmDumpAtomicCacheSts
(
gDvm
.
š¡ªûofCache
);

486 
	`dvmDumpBoÙCÏssP©h
();

489 #ifdeà
PROFILE_FIELD_ACCESS


490 
	`dvmDumpF›ldAcûssCouÁs
();

493 
	`ex™
(
¡©us
);

494 
	}
}

506 cÚ¡ * 
	$dvmDbgG‘CÏssDesütÜ
(
RefTy³Id
 
id
)

508 
CÏssObjeù
* 
şazz
;

510 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

511  
şazz
->
desütÜ
;

512 
	}
}

517 
RefTy³Id
 
	$dvmDbgG‘Su³rşass
(
RefTy³Id
 
id
)

519 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

520  
	`şassObjeùToRefTy³Id
(
şazz
->
su³r
);

521 
	}
}

526 
RefTy³Id
 
	$dvmDbgG‘CÏssLßd”
(
RefTy³Id
 
id
)

528 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

529  
	`objeùToObjeùId
(
şazz
->
şassLßd”
);

530 
	}
}

535 
u4
 
	$dvmDbgG‘AcûssFÏgs
(
RefTy³Id
 
id
)

537 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

538  
şazz
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
;

539 
	}
}

544 
boŞ
 
	$dvmDbgIsIÁ”çû
(
RefTy³Id
 
id
)

546 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
id
);

547  
	`dvmIsIÁ”çûCÏss
(
şazz
);

548 
	}
}

553 
	$cİyRefTy³
(* 
vşazz
, * 
v¬g
)

555 
RefTy³Id
** 
pRefTy³
 = (RefTy³Id**)
v¬g
;

556 **
pRefTy³
 = 
	`şassObjeùToRefTy³Id
((
CÏssObjeù
*è
vşazz
);

557 (*
pRefTy³
)++;

559 
	}
}

567 
	$dvmDbgG‘CÏssLi¡
(
u4
* 
pNumCÏs£s
, 
RefTy³Id
** 
pCÏssRefBuf
)

569 
RefTy³Id
* 
pRefTy³
;

571 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

572 *
pNumCÏs£s
 = 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
lßdedCÏs£s
);

573 
pRefTy³
 = *
pCÏssRefBuf
 = 
	`m®loc
((
RefTy³Id
è* *
pNumCÏs£s
);

575 ià(
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
cİyRefTy³
, &
pRefTy³
) != 0) {

576 
	`LOGW
("Warning:…roblem getting class†ist\n");

579 
	`as£¹
(
pRefTy³
 - *
pCÏssRefBuf
 =ğ(è*
pNumCÏs£s
);

582 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

583 
	}
}

592 
	$dvmDbgG‘VisibËCÏssLi¡
(
ObjeùId
 
şassLßd”Id
, 
u4
* 
pNumCÏs£s
,

593 
RefTy³Id
** 
pCÏssRefBuf
)

595 
Objeù
* 
şassLßd”
;

596 
numCÏs£s
 = 0, 
maxCÏs£s
;

598 
şassLßd”
 = 
	`objeùIdToObjeù
(
şassLßd”Id
);

601 
	`LOGVV
("G‘VisibËLi¡: com·ršgØ%p\n", 
şassLßd”
);

603 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

606 
maxCÏs£s
 = 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
lßdedCÏs£s
);

607 *
pCÏssRefBuf
 = 
	`m®loc
((
RefTy³Id
è* 
maxCÏs£s
);

612 
HashI‹r
 
™”
;

613 
	`dvmHashI‹rBegš
(
gDvm
.
lßdedCÏs£s
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

614 
	`dvmHashI‹rNext
(&
™”
))

616 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmHashI‹rD©a
(&
™”
);

618 ià(
şazz
->
şassLßd”
 == classLoader ||

619 
	`dvmLßd”InIn™ŸtšgLi¡
(
şazz
, 
şassLßd”
))

621 
	`LOGVV
(" m©ch '%s'\n", 
şazz
->
desütÜ
);

622 (*
pCÏssRefBuf
)[
numCÏs£s
++] = 
	`şassObjeùToRefTy³Id
(
şazz
);

625 *
pNumCÏs£s
 = 
numCÏs£s
;

627 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

628 
	}
}

639 * 
	$g’”©eJNISigÇtu»
(
CÏssObjeù
* 
şazz
)

641  
	`¡rdup
(
şazz
->
desütÜ
);

642 
	}
}

650 
	$dvmDbgG‘CÏssInfo
(
RefTy³Id
 
şassId
, 
u1
* 
pTy³Tag
, 
u4
* 
pStus
,

651 ** 
pSigÇtu»
)

653 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

655 ià(
şazz
->
desütÜ
[0] == '[') {

657 *
pStus
 = 
CS_VERIFIED
 | 
CS_PREPARED
;

658 *
pTy³Tag
 = 
TT_ARRAY
;

660 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
)

661 *
pStus
 = 
CS_ERROR
;

663 *
pStus
 = 
CS_VERIFIED
 | 
CS_PREPARED
 | 
CS_INITIALIZED
;

664 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

665 *
pTy³Tag
 = 
TT_INTERFACE
;

667 *
pTy³Tag
 = 
TT_CLASS
;

669 ià(
pSigÇtu»
 !ğ
NULL
)

670 *
pSigÇtu»
 = 
	`g’”©eJNISigÇtu»
(
şazz
);

671 
	}
}

676 
boŞ
 
	$dvmDbgFšdLßdedCÏssBySigÇtu»
(cÚ¡ * 
şassDesütÜ
,

677 
RefTy³Id
* 
pRefTy³Id
)

679 
CÏssObjeù
* 
şazz
;

681 
şazz
 = 
	`dvmFšdLßdedCÏss
(
şassDesütÜ
);

682 ià(
şazz
 !ğ
NULL
) {

683 *
pRefTy³Id
 = 
	`şassObjeùToRefTy³Id
(
şazz
);

684  
Œue
;

686  
çl£
;

687 
	}
}

693 
	$dvmDbgG‘ObjeùTy³
(
ObjeùId
 
objeùId
, 
u1
* 
pRefTy³Tag
,

694 
RefTy³Id
* 
pRefTy³Id
)

696 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

698 ià(
	`dvmIsA¼ayCÏss
(
obj
->
şazz
))

699 *
pRefTy³Tag
 = 
TT_ARRAY
;

700 ià(
	`dvmIsIÁ”çûCÏss
(
obj
->
şazz
))

701 *
pRefTy³Tag
 = 
TT_INTERFACE
;

703 *
pRefTy³Tag
 = 
TT_CLASS
;

704 *
pRefTy³Id
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

705 
	}
}

710 
u1
 
	$dvmDbgG‘CÏssObjeùTy³
(
RefTy³Id
 
»fTy³Id
)

712 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

714 ià(
	`dvmIsA¼ayCÏss
(
şazz
))

715  
TT_ARRAY
;

716 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

717  
TT_INTERFACE
;

719  
TT_CLASS
;

720 
	}
}

727 * 
	$dvmDbgG‘SigÇtu»
(
RefTy³Id
 
»fTy³Id
)

729 
CÏssObjeù
* 
şazz
;

731 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

732 
	`as£¹
(
şazz
 !ğ
NULL
);

734  
	`g’”©eJNISigÇtu»
(
şazz
);

735 
	}
}

742 cÚ¡ * 
	$dvmDbgG‘SourûFe
(
RefTy³Id
 
»fTy³Id
)

744 
CÏssObjeù
* 
şazz
;

746 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

747 
	`as£¹
(
şazz
 !ğ
NULL
);

749  
şazz
->
sourûFe
;

750 
	}
}

757 * 
	$dvmDbgG‘ObjeùTy³Name
(
ObjeùId
 
objeùId
)

759 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

761 
	`as£¹
(
obj
 !ğ
NULL
);

763  
	`g’”©eJNISigÇtu»
(
obj
->
şazz
);

764 
	}
}

775 
	$dvmDbgG‘SigÇtu»Tag
(cÚ¡ * 
ty³
)

782 ià(
	`¡rcmp
(
ty³
, "Ljava/lang/String;") == 0)

783  
JT_STRING
;

784 ià(
	`¡rcmp
(
ty³
, "Ljava/lang/Class;") == 0)

785  
JT_CLASS_OBJECT
;

786 ià(
	`¡rcmp
(
ty³
, "Ljava/lang/Thread;") == 0)

787  
JT_THREAD
;

788 ià(
	`¡rcmp
(
ty³
, "Ljava/lang/ThreadGroup;") == 0)

789  
JT_THREAD_GROUP
;

790 ià(
	`¡rcmp
(
ty³
, "Ljava/lang/ClassLoader;") == 0)

791  
JT_CLASS_LOADER
;

793 
ty³
[0]) {

794 '[':  
JT_ARRAY
;

795 'B':  
JT_BYTE
;

796 'C':  
JT_CHAR
;

797 'L':  
JT_OBJECT
;

798 'F':  
JT_FLOAT
;

799 'D':  
JT_DOUBLE
;

800 'I':  
JT_INT
;

801 'J':  
JT_LONG
;

802 'S':  
JT_SHORT
;

803 'V':  
JT_VOID
;

804 'Z':  
JT_BOOLEAN
;

806 
	`LOGE
("ERROR: unhªdËdy³ '%s'\n", 
ty³
);

807 
	`as£¹
(
çl£
);

810 
	}
}

816 
u1
 
	$»suÉTagFromObjeù
(
Objeù
* 
obj
)

818 
CÏssObjeù
* 
şazz
;

820 ià(
obj
 =ğ
NULL
)

821  
JT_OBJECT
;

823 
şazz
 = 
obj
->clazz;

830 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
)

831  
JT_STRING
;

832 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
)

833  
JT_CLASS_OBJECT
;

834 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgTh»ad
)

835  
JT_THREAD
;

836 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgTh»adGroup
)

837  
JT_THREAD_GROUP
;

838 ià(
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/ClassLoader;") == 0)

839  
JT_CLASS_LOADER
;

840 ià(
şazz
->
desütÜ
[0] == '[')

841  
JT_ARRAY
;

843  
JT_OBJECT
;

844 
	}
}

849 
	$dvmDbgG‘ObjeùTag
(
ObjeùId
 
objeùId
, cÚ¡ * 
ty³
)

851 
u1
 
g
;

853 
g
 = 
	`dvmDbgG‘SigÇtu»Tag
(
ty³
);

854 ià(
g
 =ğ
JT_OBJECT
 && 
objeùId
 != 0)

855 
g
 = 
	`»suÉTagFromObjeù
(
	`objeùIdToObjeù
(
objeùId
));

857  
g
;

858 
	}
}

863 
	$dvmDbgG‘TagWidth
(
g
)

865 
g
) {

866 
JT_VOID
:

868 
JT_BYTE
:

869 
JT_BOOLEAN
:

871 
JT_CHAR
:

872 
JT_SHORT
:

874 
JT_FLOAT
:

875 
JT_INT
:

877 
JT_ARRAY
:

878 
JT_OBJECT
:

879 
JT_STRING
:

880 
JT_THREAD
:

881 
JT_THREAD_GROUP
:

882 
JT_CLASS_LOADER
:

883 
JT_CLASS_OBJECT
:

884  (
ObjeùId
);

885 
JT_DOUBLE
:

886 
JT_LONG
:

889 
	`LOGE
("ERROR: unhªdËdag '%c'\n", 
g
);

890 
	`as£¹
(
çl£
);

893 
	}
}

898 
boŞ
 
	$isTagPrim™ive
(
u1
 
g
)

900 
g
) {

901 
JT_BYTE
:

902 
JT_CHAR
:

903 
JT_FLOAT
:

904 
JT_DOUBLE
:

905 
JT_INT
:

906 
JT_LONG
:

907 
JT_SHORT
:

908 
JT_VOID
:

909 
JT_BOOLEAN
:

910  
Œue
;

911 
JT_ARRAY
:

912 
JT_OBJECT
:

913 
JT_STRING
:

914 
JT_CLASS_OBJECT
:

915 
JT_THREAD
:

916 
JT_THREAD_GROUP
:

917 
JT_CLASS_LOADER
:

918  
çl£
;

920 
	`LOGE
("ERROR: unhªdËdag '%c'\n", 
g
);

921 
	`as£¹
(
çl£
);

922  
çl£
;

924 
	}
}

930 
	$dvmDbgG‘A¼ayL’gth
(
ObjeùId
 
¬¿yId
)

932 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

933 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

934  
¬¿yObj
->
Ëngth
;

935 
	}
}

940 
	$dvmDbgG‘A¼ayEËm’tTag
(
ObjeùId
 
¬¿yId
)

942 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

944 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

946  
	`dvmDbgG‘SigÇtu»Tag
(
¬¿yObj
->
obj
.
şazz
->
desütÜ
 + 1);

947 
	}
}

953 
	$cİyV®uesToBE
(
u1
* 
out
, cÚ¡ u1* 
š
, 
couÁ
, 
width
)

955 
i
;

957 
width
) {

959 
	`memıy
(
out
, 
š
, 
couÁ
);

962 
i
 = 0; i < 
couÁ
; i++)

963 *(((
u2
*è
out
)+
i
èğ
	`g‘2BE
(
š
 + i*2);

966 
i
 = 0; i < 
couÁ
; i++)

967 *(((
u4
*è
out
)+
i
èğ
	`g‘4BE
(
š
 + i*4);

970 
i
 = 0; i < 
couÁ
; i++)

971 *(((
u8
*è
out
)+
i
èğ
	`g‘8BE
(
š
 + i*8);

974 
	`as£¹
(
çl£
);

976 
	}
}

982 
	$cİyV®uesFromBE
(
u1
* 
out
, cÚ¡ u1* 
š
, 
couÁ
, 
width
)

984 
i
;

986 
width
) {

988 
	`memıy
(
out
, 
š
, 
couÁ
);

991 
i
 = 0; i < 
couÁ
; i++)

992 
	`£t2BE
(
out
 + 
i
*2, *((
u2
*)
š
 + i));

995 
i
 = 0; i < 
couÁ
; i++)

996 
	`£t4BE
(
out
 + 
i
*4, *((
u4
*)
š
 + i));

999 
i
 = 0; i < 
couÁ
; i++)

1000 
	`£t8BE
(
out
 + 
i
*8, *((
u8
*)
š
 + i));

1003 
	`as£¹
(
çl£
);

1005 
	}
}

1012 
boŞ
 
	$dvmDbgOuutA¼ay
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

1013 
Ex·ndBuf
* 
pR•ly
)

1015 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

1016 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*)
¬¿yObj
->
cÚ‹Ás
;

1017 
u1
 
g
;

1019 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

1021 ià(
fœ¡Index
 + 
couÁ
 > ()
¬¿yObj
->
Ëngth
) {

1022 
	`LOGW
("Request for index=%d + count=%dƒxcceds†ength=%d\n",

1023 
fœ¡Index
, 
couÁ
, 
¬¿yObj
->
Ëngth
);

1024  
çl£
;

1027 
g
 = 
	`dvmDbgG‘SigÇtu»Tag
(
¬¿yObj
->
obj
.
şazz
->
desütÜ
 + 1);

1029 ià(
	`isTagPrim™ive
(
g
)) {

1030 
width
 = 
	`dvmDbgG‘TagWidth
(
g
);

1031 
u1
* 
outBuf
;

1033 
outBuf
 = 
	`ex·ndBufAddS·û
(
pR•ly
, 
couÁ
 * 
width
);

1035 
	`cİyV®uesToBE
(
outBuf
, 
d©a
 + 
fœ¡Index
*
width
, 
couÁ
, width);

1037 
Objeù
** 
pObjeùs
;

1038 
i
;

1040 
pObjeùs
 = (
Objeù
**è
d©a
;

1041 
pObjeùs
 +ğ
fœ¡Index
;

1043 
	`LOGV
(" --> cİyšg %d objeù IDs\n", 
couÁ
);

1046 
i
 = 0; i < 
couÁ
; i++, 
pObjeùs
++) {

1047 
u1
 
thisTag
;

1048 ià(*
pObjeùs
 !ğ
NULL
)

1049 
thisTag
 = 
	`»suÉTagFromObjeù
(*
pObjeùs
);

1051 
thisTag
 = 
g
;

1052 
	`ex·ndBufAdd1
(
pR•ly
, 
thisTag
);

1053 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`objeùToObjeùId
(*
pObjeùs
));

1057  
Œue
;

1058 
	}
}

1063 
boŞ
 
	$dvmDbgS‘A¼ayEËm’ts
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

1064 cÚ¡ 
u1
* 
buf
)

1066 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`objeùIdToObjeù
(
¬¿yId
);

1067 
u1
* 
d©a
 = (u1*)
¬¿yObj
->
cÚ‹Ás
;

1068 
u1
 
g
;

1070 
	`as£¹
(
	`dvmIsA¼ay
(
¬¿yObj
));

1072 ià(
fœ¡Index
 + 
couÁ
 > ()
¬¿yObj
->
Ëngth
) {

1073 
	`LOGW
("Attempto set index=%d + count=%dƒxcceds†ength=%d\n",

1074 
fœ¡Index
, 
couÁ
, 
¬¿yObj
->
Ëngth
);

1075  
çl£
;

1078 
g
 = 
	`dvmDbgG‘SigÇtu»Tag
(
¬¿yObj
->
obj
.
şazz
->
desütÜ
 + 1);

1080 ià(
	`isTagPrim™ive
(
g
)) {

1081 
width
 = 
	`dvmDbgG‘TagWidth
(
g
);

1083 
	`LOGV
(" --> s‘tšg %d '%c' width=%d\n", 
couÁ
, 
g
, 
width
);

1085 
	`cİyV®uesFromBE
(
d©a
 + 
fœ¡Index
*
width
, 
buf
, 
couÁ
, width);

1087 
Objeù
** 
pObjeùs
;

1088 
i
;

1090 
pObjeùs
 = (
Objeù
**è
d©a
;

1091 
pObjeùs
 +ğ
fœ¡Index
;

1093 
	`LOGV
(" --> s‘tšg %d objeùs", 
couÁ
);

1096 
i
 = 0; i < 
couÁ
; i++) {

1097 
ObjeùId
 
id
 = 
	`dvmR—dObjeùId
(&
buf
);

1098 *
pObjeùs
++ = 
	`objeùIdToObjeù
(
id
);

1102  
Œue
;

1103 
	}
}

1110 
ObjeùId
 
	$dvmDbgC»©eSŒšg
(cÚ¡ * 
¡r
)

1112 
SŒšgObjeù
* 
¡rObj
;

1114 
¡rObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
¡r
, 
ALLOC_DEFAULT
);

1115 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡rObj
, 
NULL
);

1116  
	`objeùToObjeùId
((
Objeù
*è
¡rObj
);

1117 
	}
}

1122 
boŞ
 
	$dvmDbgM©chTy³
(
RefTy³Id
 
š¡CÏssId
, RefTy³Id 
şassId
)

1124 
CÏssObjeù
* 
š¡CÏzz
 = 
	`»fTy³IdToCÏssObjeù
(
š¡CÏssId
);

1125 
CÏssObjeù
* 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

1127  
	`dvmIn¡ªûof
(
š¡CÏzz
, 
şazz
);

1128 
	}
}

1140 cÚ¡ * 
	$dvmDbgG‘M‘hodName
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
)

1142 
M‘hod
* 
m‘h
;

1144 
m‘h
 = 
	`m‘hodIdToM‘hod
(
»fTy³Id
, 
id
);

1145  
m‘h
->
Çme
;

1146 
	}
}

1153 
	$dvmDbgOuutAÎF›lds
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

1154 
Ex·ndBuf
* 
pR•ly
)

1156 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

1157 
CÏssObjeù
* 
şazz
;

1158 
F›ld
* 
f›ld
;

1159 
u4
 
deş¬ed
;

1160 
i
;

1162 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

1163 
	`as£¹
(
şazz
 !ğ
NULL
);

1165 
deş¬ed
 = 
şazz
->
sf›ldCouÁ
 + cÏzz->
if›ldCouÁ
;

1166 
	`ex·ndBufAdd4BE
(
pR•ly
, 
deş¬ed
);

1168 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

1169 
f›ld
 = (
F›ld
*è&
şazz
->
sf›lds
[
i
];

1171 
	`ex·ndBufAddF›ldId
(
pR•ly
, 
	`f›ldToF›ldId
(
f›ld
));

1172 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
Çme
);

1173 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
sigÇtu»
);

1174 ià(
w™hG’”ic
)

1175 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1176 
	`ex·ndBufAdd4BE
(
pR•ly
, 
f›ld
->
acûssFÏgs
);

1178 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

1179 
f›ld
 = (
F›ld
*è&
şazz
->
if›lds
[
i
];

1181 
	`ex·ndBufAddF›ldId
(
pR•ly
, 
	`f›ldToF›ldId
(
f›ld
));

1182 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
Çme
);

1183 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
f›ld
->
sigÇtu»
);

1184 ià(
w™hG’”ic
)

1185 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1186 
	`ex·ndBufAdd4BE
(
pR•ly
, 
f›ld
->
acûssFÏgs
);

1188 
	}
}

1195 
	$dvmDbgOuutAÎM‘hods
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

1196 
Ex·ndBuf
* 
pR•ly
)

1198 
DexSŒšgCache
 
¡ršgCache
;

1199 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

1200 
CÏssObjeù
* 
şazz
;

1201 
M‘hod
* 
m‘h
;

1202 
u4
 
deş¬ed
;

1203 
i
;

1205 
	`dexSŒšgCacheIn™
(&
¡ršgCache
);

1207 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

1208 
	`as£¹
(
şazz
 !ğ
NULL
);

1210 
deş¬ed
 = 
şazz
->
dœeùM‘hodCouÁ
 + cÏzz->
vœtu®M‘hodCouÁ
;

1211 
	`ex·ndBufAdd4BE
(
pR•ly
, 
deş¬ed
);

1213 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

1214 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

1216 
	`ex·ndBufAddM‘hodId
(
pR•ly
, 
	`m‘hodToM‘hodId
(
m‘h
));

1217 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
m‘h
->
Çme
);

1219 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
,

1220 (cÚ¡ 
u1
*è
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
,

1221 &
¡ršgCache
));

1223 ià(
w™hG’”ic
)

1224 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1225 
	`ex·ndBufAdd4BE
(
pR•ly
, 
m‘h
->
acûssFÏgs
);

1227 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

1228 
m‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

1230 
	`ex·ndBufAddM‘hodId
(
pR•ly
, 
	`m‘hodToM‘hodId
(
m‘h
));

1231 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
m‘h
->
Çme
);

1233 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
,

1234 (cÚ¡ 
u1
*è
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
,

1235 &
¡ršgCache
));

1237 ià(
w™hG’”ic
)

1238 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

1239 
	`ex·ndBufAdd4BE
(
pR•ly
, 
m‘h
->
acûssFÏgs
);

1242 
	`dexSŒšgCacheR–—£
(&
¡ršgCache
);

1243 
	}
}

1248 
	$dvmDbgOuutAÎIÁ”çûs
(
RefTy³Id
 
»fTy³Id
, 
Ex·ndBuf
* 
pR•ly
)

1250 
CÏssObjeù
* 
şazz
;

1251 
i
, 
¡¬t
, 
couÁ
;

1253 
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
»fTy³Id
);

1254 
	`as£¹
(
şazz
 !ğ
NULL
);

1256 ià(
şazz
->
su³r
 =ğ
NULL
)

1257 
¡¬t
 = 0;

1259 
¡¬t
 = 
şazz
->
su³r
->
iáabËCouÁ
;

1261 
couÁ
 = 
şazz
->
iáabËCouÁ
 - 
¡¬t
;

1262 
	`ex·ndBufAdd4BE
(
pR•ly
, 
couÁ
);

1263 
i
 = 
¡¬t
; i < 
şazz
->
iáabËCouÁ
; i++) {

1264 
CÏssObjeù
* 
içû
 = 
şazz
->
iáabË
[
i
].clazz;

1265 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
	`şassObjeùToRefTy³Id
(
içû
));

1267 
	}
}

1269 
	sDebugC®lbackCÚ‹xt
 {

1270 
	mnumI‹ms
;

1271 
Ex·ndBuf
* 
	mpR•ly
;

1273 
boŞ
 
	mw™hG’”ic
;

1274 } 
	tDebugC®lbackCÚ‹xt
;

1276 
	$lšeTabËPos™iÚsCb
(*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

1278 
DebugC®lbackCÚ‹xt
 *
pCÚ‹xt
 = (DebugC®lbackCÚ‹xˆ*)
úxt
;

1280 
	`ex·ndBufAdd8BE
(
pCÚ‹xt
->
pR•ly
, 
add»ss
);

1281 
	`ex·ndBufAdd4BE
(
pCÚ‹xt
->
pR•ly
, 
lšeNum
);

1282 
pCÚ‹xt
->
numI‹ms
++;

1285 
	}
}

1292 
	$dvmDbgOuutLšeTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
m‘hodId
,

1293 
Ex·ndBuf
* 
pR•ly
)

1295 
M‘hod
* 
m‘hod
;

1296 
u8
 
¡¬t
, 
’d
;

1297 
i
;

1298 
DebugC®lbackCÚ‹xt
 
cÚ‹xt
;

1300 
	`mem£t
 (&
cÚ‹xt
, 0, (
DebugC®lbackCÚ‹xt
));

1302 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
»fTy³Id
, 
m‘hodId
);

1303 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

1304 
¡¬t
 = (
u8
) -1;

1305 
’d
 = (
u8
) -1;

1307 
¡¬t
 = 0;

1308 
’d
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

1311 
	`ex·ndBufAdd8BE
(
pR•ly
, 
¡¬t
);

1312 
	`ex·ndBufAdd8BE
(
pR•ly
, 
’d
);

1315 
size_t
 
numLšesOff£t
 = 
	`ex·ndBufG‘L’gth
(
pR•ly
);

1316 
	`ex·ndBufAdd4BE
(
pR•ly
, 0);

1318 
cÚ‹xt
.
pR•ly
 =…Reply;

1320 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
,

1321 
	`dvmG‘M‘hodCode
(
m‘hod
),

1322 
m‘hod
->
şazz
->
desütÜ
,

1323 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

1324 
m‘hod
->
acûssFÏgs
,

1325 
lšeTabËPos™iÚsCb
, 
NULL
, &
cÚ‹xt
);

1327 
	`£t4BE
(
	`ex·ndBufG‘Bufãr
(
pR•ly
è+ 
numLšesOff£t
, 
cÚ‹xt
.
numI‹ms
);

1328 
	}
}

1339 
	$tw—kSlÙ
(
¦Ù
, cÚ¡ * 
Çme
)

1341 
ÃwSlÙ
 = 
¦Ù
;

1343 ià(
	`¡rcmp
(
Çme
, "this") == 0)

1344 
ÃwSlÙ
 = 0;

1345 ià(
¦Ù
 == 0)

1346 
ÃwSlÙ
 = 
kSlÙ0Sub
;

1348 
	`LOGV
("uÁw—k: %dØ%d\n", 
¦Ù
, 
ÃwSlÙ
);

1349  
ÃwSlÙ
;

1350 
	}
}

1355 
	$uÁw—kSlÙ
(
¦Ù
, cÚ¡ * 
äamePŒ
)

1357 
ÃwSlÙ
 = 
¦Ù
;

1359 ià(
¦Ù
 =ğ
kSlÙ0Sub
) {

1360 
ÃwSlÙ
 = 0;

1361 } ià(
¦Ù
 == 0) {

1362 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1363 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

1364 
ÃwSlÙ
 = 
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
;

1367 
	`LOGV
("uÁw—k: %dØ%d\n", 
¦Ù
, 
ÃwSlÙ
);

1368  
ÃwSlÙ
;

1369 
	}
}

1371 
	$v¬ŸbËTabËCb
 (*
úxt
, 
u2
 
»g
, 
u4
 
¡¬tAdd»ss
,

1372 
u4
 
’dAdd»ss
, cÚ¡ *
Çme
, cÚ¡ *
desütÜ
,

1373 cÚ¡ *
sigÇtu»
)

1375 
DebugC®lbackCÚ‹xt
 *
pCÚ‹xt
 = (DebugC®lbackCÚ‹xˆ*)
úxt
;

1377 
»g
 = (
u2
è
	`tw—kSlÙ
Ôeg, 
Çme
);

1379 
	`LOGV
(" %2d: %d(%d) '%s' '%s' slot=%d\n",

1380 
pCÚ‹xt
->
numI‹ms
, 
¡¬tAdd»ss
, 
’dAdd»ss
 - startAddress,

1381 
Çme
, 
desütÜ
, 
»g
);

1383 
	`ex·ndBufAdd8BE
(
pCÚ‹xt
->
pR•ly
, 
¡¬tAdd»ss
);

1384 
	`ex·ndBufAddUtf8SŒšg
(
pCÚ‹xt
->
pR•ly
, (cÚ¡ 
u1
*)
Çme
);

1385 
	`ex·ndBufAddUtf8SŒšg
(
pCÚ‹xt
->
pR•ly
, (cÚ¡ 
u1
*)
desütÜ
);

1386 ià(
pCÚ‹xt
->
w™hG’”ic
) {

1387 
	`ex·ndBufAddUtf8SŒšg
(
pCÚ‹xt
->
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

1389 
	`ex·ndBufAdd4BE
(
pCÚ‹xt
->
pR•ly
, 
’dAdd»ss
 - 
¡¬tAdd»ss
);

1390 
	`ex·ndBufAdd4BE
(
pCÚ‹xt
->
pR•ly
, 
»g
);

1392 
pCÚ‹xt
->
numI‹ms
++;

1393 
	}
}

1399 
	$dvmDbgOuutV¬ŸbËTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
m‘hodId
,

1400 
boŞ
 
w™hG’”ic
, 
Ex·ndBuf
* 
pR•ly
)

1402 
M‘hod
* 
m‘hod
;

1403 
DebugC®lbackCÚ‹xt
 
cÚ‹xt
;

1405 
	`mem£t
 (&
cÚ‹xt
, 0, (
DebugC®lbackCÚ‹xt
));

1407 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
»fTy³Id
, 
m‘hodId
);

1409 
	`ex·ndBufAdd4BE
(
pR•ly
, 
m‘hod
->
šsSize
);

1412 
size_t
 
numLoÿlsOff£t
 = 
	`ex·ndBufG‘L’gth
(
pR•ly
);

1413 
	`ex·ndBufAdd4BE
(
pR•ly
, 0);

1415 
cÚ‹xt
.
pR•ly
 =…Reply;

1416 
cÚ‹xt
.
w™hG’”ic
 = withGeneric;

1417 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
,

1418 
	`dvmG‘M‘hodCode
(
m‘hod
),

1419 
m‘hod
->
şazz
->
desütÜ
,

1420 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

1421 
m‘hod
->
acûssFÏgs
,

1422 
NULL
, 
v¬ŸbËTabËCb
, &
cÚ‹xt
);

1424 
	`£t4BE
(
	`ex·ndBufG‘Bufãr
(
pR•ly
è+ 
numLoÿlsOff£t
, 
cÚ‹xt
.
numI‹ms
);

1425 
	}
}

1430 
	$dvmDbgG‘F›ldTag
(
ObjeùId
 
objId
, 
F›ldId
 
f›ldId
)

1432 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objId
);

1433 
RefTy³Id
 
şassId
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

1434 
F›ld
* 
f›ld
 = 
	`f›ldIdToF›ld
(
şassId
, 
f›ldId
);

1436  
	`dvmDbgG‘SigÇtu»Tag
(
f›ld
->
sigÇtu»
);

1437 
	}
}

1442 
	$dvmDbgG‘SticF›ldTag
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
)

1444 
F›ld
* 
f›ld
 = 
	`f›ldIdToF›ld
(
»fTy³Id
, 
f›ldId
);

1445  
	`dvmDbgG‘SigÇtu»Tag
(
f›ld
->
sigÇtu»
);

1446 
	}
}

1451 
	$dvmDbgG‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
u1
* 
buf
,

1452 
ex³ùedL’
)

1454 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

1455 
RefTy³Id
 
şassId
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

1456 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
	`f›ldIdToF›ld
(
şassId
, 
f›ldId
);

1457 
Objeù
* 
objV®
;

1458 
u4
 
štV®
;

1459 
u8
 
lÚgV®
;

1461 
f›ld
->f›ld.
sigÇtu»
[0]) {

1462 
JT_BOOLEAN
:

1463 
	`as£¹
(
ex³ùedL’
 == 1);

1464 
štV®
 = 
	`dvmG‘F›ldBoŞ—n
(
obj
, 
f›ld
->
by‹Off£t
);

1465 
	`£t1
(
buf
, 
štV®
 != 0);

1467 
JT_BYTE
:

1468 
	`as£¹
(
ex³ùedL’
 == 1);

1469 
štV®
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
);

1470 
	`£t1
(
buf
, 
štV®
);

1472 
JT_SHORT
:

1473 
JT_CHAR
:

1474 
	`as£¹
(
ex³ùedL’
 == 2);

1475 
štV®
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
);

1476 
	`£t2BE
(
buf
, 
štV®
);

1478 
JT_INT
:

1479 
JT_FLOAT
:

1480 
	`as£¹
(
ex³ùedL’
 == 4);

1481 
štV®
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
);

1482 
	`£t4BE
(
buf
, 
štV®
);

1484 
JT_ARRAY
:

1485 
JT_OBJECT
:

1486 
	`as£¹
(
ex³ùedL’
 =ğ(
ObjeùId
));

1487 
objV®
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
);

1488 
	`dvmS‘ObjeùId
(
buf
, 
	`objeùToObjeùId
(
objV®
));

1490 
JT_DOUBLE
:

1491 
JT_LONG
:

1492 
	`as£¹
(
ex³ùedL’
 == 8);

1493 
lÚgV®
 = 
	`dvmG‘F›ldLÚg
(
obj
, 
f›ld
->
by‹Off£t
);

1494 
	`£t8BE
(
buf
, 
lÚgV®
);

1497 
	`LOGE
("ERROR: unhªdËd cÏs ty³ '%s'\n", 
f›ld
->f›ld.
sigÇtu»
);

1498 
	`as£¹
(
çl£
);

1501 
	}
}

1506 
	$dvmDbgS‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
u8
 
v®ue
,

1507 
width
)

1509 
Objeù
* 
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

1510 
RefTy³Id
 
şassId
 = 
	`şassObjeùToRefTy³Id
(
obj
->
şazz
);

1511 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
	`f›ldIdToF›ld
(
şassId
, 
f›ldId
);

1513 
f›ld
->f›ld.
sigÇtu»
[0]) {

1514 
JT_BOOLEAN
:

1515 
	`as£¹
(
width
 == 1);

1516 
	`dvmS‘F›ldBoŞ—n
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
 != 0);

1518 
JT_BYTE
:

1519 
	`as£¹
(
width
 == 1);

1520 
	`dvmS‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1522 
JT_SHORT
:

1523 
JT_CHAR
:

1524 
	`as£¹
(
width
 == 2);

1525 
	`dvmS‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1527 
JT_INT
:

1528 
JT_FLOAT
:

1529 
	`as£¹
(
width
 == 4);

1530 
	`dvmS‘F›ldIÁ
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1532 
JT_ARRAY
:

1533 
JT_OBJECT
:

1534 
	`as£¹
(
width
 =ğ(
ObjeùId
));

1535 
	`dvmS‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
, 
	`objeùIdToObjeù
(
v®ue
));

1537 
JT_DOUBLE
:

1538 
JT_LONG
:

1539 
	`as£¹
(
width
 == 8);

1540 
	`dvmS‘F›ldLÚg
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
);

1543 
	`LOGE
("ERROR: unhªdËd cÏs ty³ '%s'\n", 
f›ld
->f›ld.
sigÇtu»
);

1544 
	`as£¹
(
çl£
);

1547 
	}
}

1552 
	$dvmDbgG‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
, 
u1
* 
buf
,

1553 
ex³ùedL’
)

1555 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
	`f›ldIdToF›ld
(
»fTy³Id
, 
f›ldId
);

1556 
Objeù
* 
objV®
;

1557 
JV®ue
 
v®ue
;

1559 
sf›ld
->
f›ld
.
sigÇtu»
[0]) {

1560 
JT_BOOLEAN
:

1561 
	`as£¹
(
ex³ùedL’
 == 1);

1562 
	`£t1
(
buf
, 
	`dvmG‘SticF›ldBoŞ—n
(
sf›ld
));

1564 
JT_BYTE
:

1565 
	`as£¹
(
ex³ùedL’
 == 1);

1566 
	`£t1
(
buf
, 
	`dvmG‘SticF›ldBy‹
(
sf›ld
));

1568 
JT_SHORT
:

1569 
	`as£¹
(
ex³ùedL’
 == 2);

1570 
	`£t2BE
(
buf
, 
	`dvmG‘SticF›ldShÜt
(
sf›ld
));

1572 
JT_CHAR
:

1573 
	`as£¹
(
ex³ùedL’
 == 2);

1574 
	`£t2BE
(
buf
, 
	`dvmG‘SticF›ldCh¬
(
sf›ld
));

1576 
JT_INT
:

1577 
	`as£¹
(
ex³ùedL’
 == 4);

1578 
	`£t4BE
(
buf
, 
	`dvmG‘SticF›ldIÁ
(
sf›ld
));

1580 
JT_FLOAT
:

1581 
	`as£¹
(
ex³ùedL’
 == 4);

1582 
v®ue
.
f
 = 
	`dvmG‘SticF›ldFlßt
(
sf›ld
);

1583 
	`£t4BE
(
buf
, 
v®ue
.
i
);

1585 
JT_ARRAY
:

1586 
JT_OBJECT
:

1587 
	`as£¹
(
ex³ùedL’
 =ğ(
ObjeùId
));

1588 
objV®
 = 
	`dvmG‘SticF›ldObjeù
(
sf›ld
);

1589 
	`dvmS‘ObjeùId
(
buf
, 
	`objeùToObjeùId
(
objV®
));

1591 
JT_LONG
:

1592 
	`as£¹
(
ex³ùedL’
 == 8);

1593 
	`£t8BE
(
buf
, 
	`dvmG‘SticF›ldLÚg
(
sf›ld
));

1595 
JT_DOUBLE
:

1596 
	`as£¹
(
ex³ùedL’
 == 8);

1597 
v®ue
.
d
 = 
	`dvmG‘SticF›ldDoubË
(
sf›ld
);

1598 
	`£t8BE
(
buf
, 
v®ue
.
j
);

1601 
	`LOGE
("ERROR: unhªdËd cÏs ty³ '%s'\n", 
sf›ld
->
f›ld
.
sigÇtu»
);

1602 
	`as£¹
(
çl£
);

1605 
	}
}

1610 
	$dvmDbgS‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
,

1611 
u8
 
¿wV®ue
, 
width
)

1613 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
	`f›ldIdToF›ld
(
»fTy³Id
, 
f›ldId
);

1614 
Objeù
* 
objV®
;

1615 
JV®ue
 
v®ue
;

1617 
v®ue
.
j
 = 
¿wV®ue
;

1619 
sf›ld
->
f›ld
.
sigÇtu»
[0]) {

1620 
JT_BOOLEAN
:

1621 
	`as£¹
(
width
 == 1);

1622 
	`dvmS‘SticF›ldBoŞ—n
(
sf›ld
, 
v®ue
.
z
);

1624 
JT_BYTE
:

1625 
	`as£¹
(
width
 == 1);

1626 
	`dvmS‘SticF›ldBy‹
(
sf›ld
, 
v®ue
.
b
);

1628 
JT_SHORT
:

1629 
	`as£¹
(
width
 == 2);

1630 
	`dvmS‘SticF›ldShÜt
(
sf›ld
, 
v®ue
.
s
);

1632 
JT_CHAR
:

1633 
	`as£¹
(
width
 == 2);

1634 
	`dvmS‘SticF›ldCh¬
(
sf›ld
, 
v®ue
.
c
);

1636 
JT_INT
:

1637 
	`as£¹
(
width
 == 4);

1638 
	`dvmS‘SticF›ldIÁ
(
sf›ld
, 
v®ue
.
i
);

1640 
JT_FLOAT
:

1641 
	`as£¹
(
width
 == 4);

1642 
	`dvmS‘SticF›ldFlßt
(
sf›ld
, 
v®ue
.
f
);

1644 
JT_ARRAY
:

1645 
JT_OBJECT
:

1646 
	`as£¹
(
width
 =ğ(
ObjeùId
));

1647 
objV®
 = 
	`objeùIdToObjeù
(
¿wV®ue
);

1648 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, 
objV®
);

1650 
JT_LONG
:

1651 
	`as£¹
(
width
 == 8);

1652 
	`dvmS‘SticF›ldLÚg
(
sf›ld
, 
v®ue
.
j
);

1654 
JT_DOUBLE
:

1655 
	`as£¹
(
width
 == 8);

1656 
	`dvmS‘SticF›ldDoubË
(
sf›ld
, 
v®ue
.
d
);

1659 
	`LOGE
("ERROR: unhªdËd cÏs ty³ '%s'\n", 
sf›ld
->
f›ld
.
sigÇtu»
);

1660 
	`as£¹
(
çl£
);

1663 
	}
}

1670 * 
	$dvmDbgSŒšgToUtf8
(
ObjeùId
 
¡rId
)

1672 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`objeùIdToObjeù
(
¡rId
);

1674  
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

1675 
	}
}

1692 
Th»ad
* 
	$th»adObjToTh»ad
(
Objeù
* 
th»adObj
)

1694 
Th»ad
* 
th»ad
;

1696 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

1697 ià(
th»ad
->
th»adObj
 ==hreadObj)

1701  
th»ad
;

1702 
	}
}

1707 
boŞ
 
	$dvmDbgG‘Th»adStus
(
ObjeùId
 
th»adId
, 
u4
* 
pTh»adStus
,

1708 
u4
* 
pSu¥’dStus
)

1710 
Objeù
* 
th»adObj
;

1711 
Th»ad
* 
th»ad
;

1712 
boŞ
 
»suÉ
 = 
çl£
;

1714 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1715 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1718 
	`dvmLockTh»adLi¡
(
NULL
);

1720 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1721 ià(
th»ad
 =ğ
NULL
)

1722 
ba
;

1724 
th»ad
->
¡©us
) {

1725 
THREAD_ZOMBIE
: *
pTh»adStus
 = 
TS_ZOMBIE
; ;

1726 
THREAD_RUNNING
: *
pTh»adStus
 = 
TS_RUNNING
; ;

1727 
THREAD_TIMED_WAIT
: *
pTh»adStus
 = 
TS_SLEEPING
; ;

1728 
THREAD_MONITOR
: *
pTh»adStus
 = 
TS_MONITOR
; ;

1729 
THREAD_WAIT
: *
pTh»adStus
 = 
TS_WAIT
; ;

1730 
THREAD_INITIALIZING
: *
pTh»adStus
 = 
TS_ZOMBIE
; ;

1731 
THREAD_STARTING
: *
pTh»adStus
 = 
TS_ZOMBIE
; ;

1732 
THREAD_NATIVE
: *
pTh»adStus
 = 
TS_RUNNING
; ;

1733 
THREAD_VMWAIT
: *
pTh»adStus
 = 
TS_WAIT
; ;

1735 
	`as£¹
(
çl£
);

1736 *
pTh»adStus
 = 
THREAD_ZOMBIE
;

1740 ià(
	`dvmIsSu¥’ded
(
th»ad
))

1741 *
pSu¥’dStus
 = 
SUSPEND_STATUS_SUSPENDED
;

1743 *
pSu¥’dStus
 = 0;

1745 
»suÉ
 = 
Œue
;

1747 
ba
:

1748 
	`dvmUÆockTh»adLi¡
();

1749  
»suÉ
;

1750 
	}
}

1755 
u4
 
	$dvmDbgG‘Th»adSu¥’dCouÁ
(
ObjeùId
 
th»adId
)

1757 
Objeù
* 
th»adObj
;

1758 
Th»ad
* 
th»ad
;

1759 
u4
 
»suÉ
 = 0;

1761 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1762 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1765 
	`dvmLockTh»adLi¡
(
NULL
);

1767 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1768 ià(
th»ad
 =ğ
NULL
)

1769 
ba
;

1771 
»suÉ
 = 
th»ad
->
su¥’dCouÁ
;

1773 
ba
:

1774 
	`dvmUÆockTh»adLi¡
();

1775  
»suÉ
;

1776 
	}
}

1783 
boŞ
 
	$dvmDbgTh»adExi¡s
(
ObjeùId
 
th»adId
)

1785 
Objeù
* 
th»adObj
;

1786 
Th»ad
* 
th»ad
;

1787 
boŞ
 
»suÉ
;

1789 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1790 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1793 
	`dvmLockTh»adLi¡
(
NULL
);

1795 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1796 ià(
th»ad
 =ğ
NULL
)

1797 
»suÉ
 = 
çl£
;

1799 
»suÉ
 = 
Œue
;

1801 
	`dvmUÆockTh»adLi¡
();

1802  
»suÉ
;

1803 
	}
}

1810 
boŞ
 
	$dvmDbgIsSu¥’ded
(
ObjeùId
 
th»adId
)

1812 
Objeù
* 
th»adObj
;

1813 
Th»ad
* 
th»ad
;

1814 
boŞ
 
»suÉ
 = 
çl£
;

1816 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1817 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1820 
	`dvmLockTh»adLi¡
(
NULL
);

1822 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1823 ià(
th»ad
 =ğ
NULL
)

1824 
ba
;

1826 
»suÉ
 = 
	`dvmIsSu¥’ded
(
th»ad
);

1828 
ba
:

1829 
	`dvmUÆockTh»adLi¡
();

1830  
»suÉ
;

1831 
	}
}

1841 
	$dvmDbgWa™FÜSu¥’d
(
ObjeùId
 
th»adId
)

1843 
Objeù
* 
th»adObj
;

1844 
Th»ad
* 
th»ad
;

1846 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1847 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1849 
	`dvmLockTh»adLi¡
(
NULL
);

1850 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1851 
	`dvmUÆockTh»adLi¡
();

1853 ià(
th»ad
 !ğ
NULL
)

1854 
	`dvmWa™FÜSu¥’d
(
th»ad
);

1855 
	}
}

1862 
ObjeùId
 
	$dvmDbgG‘Sy¡emTh»adGroupId
()

1864 
Objeù
* 
groupObj
 = 
	`dvmG‘Sy¡emTh»adGroup
();

1865  
	`objeùToObjeùId
(
groupObj
);

1866 
	}
}

1871 
ObjeùId
 
	$dvmDbgG‘MašTh»adGroupId
()

1873 
Objeù
* 
groupObj
 = 
	`dvmG‘MašTh»adGroup
();

1874  
	`objeùToObjeùId
(
groupObj
);

1875 
	}
}

1882 * 
	$dvmDbgG‘Th»adName
(
ObjeùId
 
th»adId
)

1884 
Objeù
* 
th»adObj
;

1885 
SŒšgObjeù
* 
ÇmeSŒ
;

1886 * 
¡r
;

1887 * 
»suÉ
;

1889 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1890 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1892 
ÇmeSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

1893 
gDvm
.
offJavaLªgTh»ad_Çme
);

1894 
¡r
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

1895 
»suÉ
 = (*è
	`m®loc
(
	`¡¾’
(
¡r
) + 20);

1898 
	`dvmLockTh»adLi¡
(
NULL
);

1899 
Th»ad
* 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

1900 ià(
th»ad
 !ğ
NULL
)

1901 
	`¥rštf
(
»suÉ
, "<%d> %s", 
th»ad
->
th»adId
, 
¡r
);

1903 
	`¥rštf
(
»suÉ
, "%s", 
¡r
);

1904 
	`dvmUÆockTh»adLi¡
();

1906 
	`ä“
(
¡r
);

1907  
»suÉ
;

1908 
	}
}

1913 
ObjeùId
 
	$dvmDbgG‘Th»adGroup
(
ObjeùId
 
th»adId
)

1915 
Objeù
* 
th»adObj
;

1916 
Objeù
* 
group
;

1918 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

1919 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1921 
group
 = 
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_group
);

1922  
	`objeùToObjeùId
(
group
);

1923 
	}
}

1931 * 
	$dvmDbgG‘Th»adGroupName
(
ObjeùId
 
th»adGroupId
)

1933 
Objeù
* 
th»adGroup
;

1934 
In¡F›ld
* 
ÇmeF›ld
;

1935 
SŒšgObjeù
* 
ÇmeSŒ
;

1937 
th»adGroup
 = 
	`objeùIdToObjeù
(
th»adGroupId
);

1938 
	`as£¹
(
th»adGroup
 !ğ
NULL
);

1940 
ÇmeF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
gDvm
.
şassJavaLªgTh»adGroup
,

1942 ià(
ÇmeF›ld
 =ğ
NULL
) {

1943 
	`LOGE
("unableo find‚ame field in ThreadGroup\n");

1944  
NULL
;

1947 
ÇmeSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
th»adGroup
,

1948 
ÇmeF›ld
->
by‹Off£t
);

1949  
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

1950 
	}
}

1957 
ObjeùId
 
	$dvmDbgG‘Th»adGroupP¬’t
(
ObjeùId
 
th»adGroupId
)

1959 
Objeù
* 
th»adGroup
;

1960 
In¡F›ld
* 
·»ÁF›ld
;

1961 
Objeù
* 
·»Á
;

1963 
th»adGroup
 = 
	`objeùIdToObjeù
(
th»adGroupId
);

1964 
	`as£¹
(
th»adGroup
 !ğ
NULL
);

1966 
·»ÁF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
gDvm
.
şassJavaLªgTh»adGroup
,

1968 ià(
·»ÁF›ld
 =ğ
NULL
) {

1969 
	`LOGE
("unableo find…arent field in ThreadGroup\n");

1970 
·»Á
 = 
NULL
;

1972 
·»Á
 = 
	`dvmG‘F›ldObjeù
(
th»adGroup
, 
·»ÁF›ld
->
by‹Off£t
);

1974  
	`objeùToObjeùId
(
·»Á
);

1975 
	}
}

1988 
	$dvmDbgG‘Th»adGroupTh»ads
(
ObjeùId
 
th»adGroupId
,

1989 
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
)

1991 
Objeù
* 
rg‘Th»adGroup
 = 
NULL
;

1992 
In¡F›ld
* 
groupF›ld
 = 
NULL
;

1993 
Th»ad
* 
th»ad
;

1994 
couÁ
;

1996 ià(
th»adGroupId
 !ğ
THREAD_GROUP_ALL
) {

1997 
rg‘Th»adGroup
 = 
	`objeùIdToObjeù
(
th»adGroupId
);

1998 
	`as£¹
(
rg‘Th»adGroup
 !ğ
NULL
);

2001 
groupF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
gDvm
.
şassJavaLªgTh»ad
,

2004 
	`dvmLockTh»adLi¡
(
NULL
);

2006 
th»ad
 = 
gDvm
.
th»adLi¡
;

2007 
couÁ
 = 0;

2008 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2009 
Objeù
* 
group
;

2016 ià(
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2022 ià(
th»ad
->
th»adObj
 =ğ
NULL
)

2025 
group
 = 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
, 
groupF›ld
->
by‹Off£t
);

2026 ià(
th»adGroupId
 =ğ
THREAD_GROUP_ALL
 || 
group
 =ğ
rg‘Th»adGroup
)

2027 
couÁ
++;

2030 *
pTh»adCouÁ
 = 
couÁ
;

2032 ià(
couÁ
 == 0) {

2033 *
µTh»adIds
 = 
NULL
;

2035 
ObjeùId
* 
±r
;

2036 
±r
 = *
µTh»adIds
 = (
ObjeùId
*è
	`m®loc
((ObjeùIdè* 
couÁ
);

2038 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2039 
Objeù
* 
group
;

2046 ià(
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2052 ià(
th»ad
->
th»adObj
 =ğ
NULL
)

2055 
group
 = 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
,
groupF›ld
->
by‹Off£t
);

2056 ià(
th»adGroupId
 =ğ
THREAD_GROUP_ALL
 || 
group
 =ğ
rg‘Th»adGroup
)

2058 *
±r
++ = 
	`objeùToObjeùId
(
th»ad
->
th»adObj
);

2059 
couÁ
--;

2063 
	`as£¹
(
couÁ
 == 0);

2066 
	`dvmUÆockTh»adLi¡
();

2067 
	}
}

2074 
	$dvmDbgG‘AÎTh»ads
(
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
)

2076 
	`dvmDbgG‘Th»adGroupTh»ads
(
THREAD_GROUP_ALL
, 
µTh»adIds
, 
pTh»adCouÁ
);

2077 
	}
}

2085 
	$dvmDbgG‘Th»adF¿meCouÁ
(
ObjeùId
 
th»adId
)

2087 
Objeù
* 
th»adObj
;

2088 
Th»ad
* 
th»ad
;

2089 * 
äamePŒ
;

2090 
u4
 
couÁ
 = 0;

2092 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2094 
	`dvmLockTh»adLi¡
(
NULL
);

2096 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2097 ià(
th»ad
 =ğ
NULL
)

2098 
ba
;

2100 
äamePŒ
 = 
th»ad
->
curF¿me
;

2101 
äamePŒ
 !ğ
NULL
) {

2102 ià(!
	`dvmIsB»akF¿me
(
äamePŒ
))

2103 
couÁ
++;

2105 
äamePŒ
 = 
	`SAVEAREA_FROM_FP
(äamePŒ)->
´evF¿me
;

2108 
ba
:

2109 
	`dvmUÆockTh»adLi¡
();

2110  
couÁ
;

2111 
	}
}

2116 
boŞ
 
	$dvmDbgG‘Th»adF¿me
(
ObjeùId
 
th»adId
, 
num
, 
F¿meId
* 
pF¿meId
,

2117 
JdwpLoÿtiÚ
* 
pLoc
)

2119 
Objeù
* 
th»adObj
;

2120 
Th»ad
* 
th»ad
;

2121 * 
äamePŒ
;

2122 
couÁ
;

2124 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2126 
	`dvmLockTh»adLi¡
(
NULL
);

2128 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2129 ià(
th»ad
 =ğ
NULL
)

2130 
ba
;

2132 
äamePŒ
 = 
th»ad
->
curF¿me
;

2133 
couÁ
 = 0;

2134 
äamePŒ
 !ğ
NULL
) {

2135 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

2136 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

2138 ià(!
	`dvmIsB»akF¿me
(
äamePŒ
)) {

2139 ià(
couÁ
 =ğ
num
) {

2140 *
pF¿meId
 = 
	`äameToF¿meId
(
äamePŒ
);

2141 ià(
	`dvmIsIÁ”çûCÏss
(
m‘hod
->
şazz
))

2142 
pLoc
->
ty³Tag
 = 
TT_INTERFACE
;

2144 
pLoc
->
ty³Tag
 = 
TT_CLASS
;

2145 
pLoc
->
şassId
 = 
	`şassObjeùToRefTy³Id
(
m‘hod
->
şazz
);

2146 
pLoc
->
m‘hodId
 = 
	`m‘hodToM‘hodId
(
m‘hod
);

2147 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
))

2148 
pLoc
->
idx
 = (
u8
)-1;

2150 
pLoc
->
idx
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
;

2151 
	`dvmUÆockTh»adLi¡
();

2152  
Œue
;

2155 
couÁ
++;

2158 
äamePŒ
 = 
§veA»a
->
´evF¿me
;

2161 
ba
:

2162 
	`dvmUÆockTh»adLi¡
();

2163  
çl£
;

2164 
	}
}

2169 
ObjeùId
 
	$dvmDbgG‘Th»adS–fId
()

2171 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2172  
	`objeùToObjeùId
(
£lf
->
th»adObj
);

2173 
	}
}

2178 
	$dvmDbgSu¥’dVM
(
boŞ
 
isEv’t
)

2180 
	`dvmSu¥’dAÎTh»ads
(
isEv’t
 ? 
SUSPEND_FOR_DEBUG_EVENT
 : 
SUSPEND_FOR_DEBUG
);

2181 
	}
}

2186 
	$dvmDbgResumeVM
()

2188 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_DEBUG
);

2189 
	}
}

2194 
	$dvmDbgSu¥’dTh»ad
(
ObjeùId
 
th»adId
)

2196 
Objeù
* 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2197 
Th»ad
* 
th»ad
;

2199 
	`dvmLockTh»adLi¡
(
NULL
);

2201 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2202 ià(
th»ad
 =ğ
NULL
) {

2204 
	`LOGW
("WARNING:h»adid=%Îx obj=%°nØm©ch\n", 
th»adId
, 
th»adObj
);

2206 
	`dvmSu¥’dTh»ad
(
th»ad
);

2209 
	`dvmUÆockTh»adLi¡
();

2210 
	}
}

2215 
	$dvmDbgResumeTh»ad
(
ObjeùId
 
th»adId
)

2217 
Objeù
* 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2218 
Th»ad
* 
th»ad
;

2220 
	`dvmLockTh»adLi¡
(
NULL
);

2222 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2223 ià(
th»ad
 =ğ
NULL
) {

2224 
	`LOGW
("WARNING:h»adid=%Îx obj=%°nØm©ch\n", 
th»adId
, 
th»adObj
);

2226 
	`dvmResumeTh»ad
(
th»ad
);

2229 
	`dvmUÆockTh»adLi¡
();

2230 
	}
}

2235 
	$dvmDbgSu¥’dS–f
()

2237 
	`dvmSu¥’dS–f
(
Œue
);

2238 
	}
}

2243 
Objeù
* 
	$g‘ThisObjeù
(cÚ¡ 
u4
* 
äamePŒ
)

2245 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

2246 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

2247 #ifdeà
WITH_TAINT_TRACKING


2249 
¬gOff£t
 = (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
) <<1;

2251 
¬gOff£t
 = 
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
;

2253 
Objeù
* 
thisObj
;

2255 ià(
m‘hod
 =ğ
NULL
) {

2257 
	`as£¹
(
çl£
);

2258  
NULL
;

2261 
	`LOGVV
(" PuÎšghi objeù fÜ f¿m© %p\n", 
äamePŒ
);

2262 
	`LOGVV
(" Method='%s'‚ative=%d static=%dhis=%p\n",

2263 
m‘hod
->
Çme
, 
	`dvmIsN©iveM‘hod
(method),

2264 
	`dvmIsSticM‘hod
(
m‘hod
), (
Objeù
*è
äamePŒ
[
¬gOff£t
]);

2270 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
è|| 
	`dvmIsSticM‘hod
(method))

2271 
thisObj
 = 
NULL
;

2273 
thisObj
 = (
Objeù
*è
äamePŒ
[
¬gOff£t
];

2275 ià(
thisObj
 !ğ
NULL
 && !
	`dvmIsV®idObjeù
(thisObj)) {

2276 
	`LOGW
("Debugger: invalid 'this'…ointer %p in %s.%s;„eturning NULL\n",

2277 
äamePŒ
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

2278 
thisObj
 = 
NULL
;

2281  
thisObj
;

2282 
	}
}

2288 
boŞ
 
	$dvmDbgG‘ThisObjeù
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, ObjeùId* 
pThisId
)

2290 cÚ¡ 
u4
* 
äamePŒ
 = 
	`äameIdToF¿me
(
äameId
);

2291 
Objeù
* 
thisObj
;

2293 
	`UNUSED_PARAMETER
(
th»adId
);

2295 
thisObj
 = 
	`g‘ThisObjeù
(
äamePŒ
);

2297 *
pThisId
 = 
	`objeùToObjeùId
(
thisObj
);

2298  
Œue
;

2299 
	}
}

2305 
	$dvmDbgG‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
,

2306 
u1
 
g
, u1* 
buf
, 
ex³ùedL’
)

2308 cÚ¡ 
u4
* 
äamePŒ
 = 
	`äameIdToF¿me
(
äameId
);

2309 
Objeù
* 
objV®
;

2310 
u4
 
štV®
;

2311 
u8
 
lÚgV®
;

2313 
	`UNUSED_PARAMETER
(
th»adId
);

2315 #ifdeà
WITH_TAINT_TRACKING


2317 
¦Ù
 = 
	`uÁw—kSlÙ
(¦Ù, 
äamePŒ
) <<1;

2319 
¦Ù
 = 
	`uÁw—kSlÙ
(¦Ù, 
äamePŒ
);

2322 
g
) {

2323 
JT_BOOLEAN
:

2324 
	`as£¹
(
ex³ùedL’
 == 1);

2325 
štV®
 = 
äamePŒ
[
¦Ù
];

2326 
	`£t1
(
buf
+1, 
štV®
 != 0);

2328 
JT_BYTE
:

2329 
	`as£¹
(
ex³ùedL’
 == 1);

2330 
štV®
 = 
äamePŒ
[
¦Ù
];

2331 
	`£t1
(
buf
+1, 
štV®
);

2333 
JT_SHORT
:

2334 
JT_CHAR
:

2335 
	`as£¹
(
ex³ùedL’
 == 2);

2336 
štV®
 = 
äamePŒ
[
¦Ù
];

2337 
	`£t2BE
(
buf
+1, 
štV®
);

2339 
JT_INT
:

2340 
JT_FLOAT
:

2341 
	`as£¹
(
ex³ùedL’
 == 4);

2342 
štV®
 = 
äamePŒ
[
¦Ù
];

2343 
	`£t4BE
(
buf
+1, 
štV®
);

2345 
JT_ARRAY
:

2346 
	`as£¹
(
ex³ùedL’
 == 8);

2349 
objV®
 = (
Objeù
*)
äamePŒ
[
¦Ù
];

2350 ià(
objV®
 !ğ
NULL
 && !
	`dvmIsV®idObjeù
(objVal)) {

2351 
	`LOGW
("JDWP: slot %dƒxpectedo hold‡rray, %p invalid\n",

2352 
¦Ù
, 
objV®
);

2353 
	`dvmAbÜt
();

2354 
objV®
 = 
NULL
;

2355 
g
 = 
JT_OBJECT
;

2357 
	`dvmS‘ObjeùId
(
buf
+1, 
	`objeùToObjeùId
(
objV®
));

2360 
JT_OBJECT
:

2361 
	`as£¹
(
ex³ùedL’
 == 8);

2364 
objV®
 = (
Objeù
*)
äamePŒ
[
¦Ù
];

2367 ià(
objV®
 !ğ
NULL
) {

2368 ià(!
	`dvmIsV®idObjeù
(
objV®
)) {

2369 
	`LOGW
("JDWP: slot %dƒxpectedo hold object, %p invalid\n",

2370 
¦Ù
, 
objV®
);

2371 
	`dvmAbÜt
();

2372 
objV®
 = 
NULL
;

2375 
g
 = 
	`»suÉTagFromObjeù
(
objV®
);

2378 
g
 = 
JT_OBJECT
;

2380 
	`dvmS‘ObjeùId
(
buf
+1, 
	`objeùToObjeùId
(
objV®
));

2383 
JT_DOUBLE
:

2384 
JT_LONG
:

2385 
	`as£¹
(
ex³ùedL’
 == 8);

2386 #ifdeà
WITH_TAINT_TRACKING


2388 uniÚ { 
u8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

2389 
cÚv
.
·¹s
[0] = 
äamePŒ
[
¦Ù
];

2390 
cÚv
.
·¹s
[1] = 
äamePŒ
[
¦Ù
+2];

2391 
lÚgV®
 = 
cÚv
.
Î
;

2394 
lÚgV®
 = *(
u8
*)(&
äamePŒ
[
¦Ù
]);

2396 
	`£t8BE
(
buf
+1, 
lÚgV®
);

2399 
	`LOGE
("ERROR: unhªdËdag '%c'\n", 
g
);

2400 
	`as£¹
(
çl£
);

2404 
	`£t1
(
buf
, 
g
);

2405 
	}
}

2410 
	$dvmDbgS‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
, 
u1
 
g
,

2411 
u8
 
v®ue
, 
width
)

2413 
u4
* 
äamePŒ
 = 
	`äameIdToF¿me
(
äameId
);

2415 
	`UNUSED_PARAMETER
(
th»adId
);

2417 #ifdeà
WITH_TAINT_TRACKING


2419 
¦Ù
 = 
	`uÁw—kSlÙ
(¦Ù, 
äamePŒ
)<<1;

2421 
¦Ù
 = 
	`uÁw—kSlÙ
(¦Ù, 
äamePŒ
);

2424 
g
) {

2425 
JT_BOOLEAN
:

2426 
	`as£¹
(
width
 == 1);

2427 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2429 
JT_BYTE
:

2430 
	`as£¹
(
width
 == 1);

2431 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2433 
JT_SHORT
:

2434 
JT_CHAR
:

2435 
	`as£¹
(
width
 == 2);

2436 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2438 
JT_INT
:

2439 
JT_FLOAT
:

2440 
	`as£¹
(
width
 == 4);

2441 
äamePŒ
[
¦Ù
] = (
u4
)
v®ue
;

2443 
JT_STRING
:

2447 
JT_ARRAY
:

2448 
JT_OBJECT
:

2449 
	`as£¹
(
width
 =ğ(
ObjeùId
));

2450 
äamePŒ
[
¦Ù
] = (
u4
è
	`objeùIdToObjeù
(
v®ue
);

2452 
JT_DOUBLE
:

2453 
JT_LONG
:

2454 
	`as£¹
(
width
 == 8);

2455 #ifdeà
WITH_TAINT_TRACKING


2458 uniÚ { 
u8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

2459 
cÚv
.
Î
 = 
v®ue
;

2460 
äamePŒ
[
¦Ù
] = 
cÚv
.
·¹s
[0];

2461 
äamePŒ
[
¦Ù
+2] = 
cÚv
.
·¹s
[1];

2464 *(
u8
*)(&
äamePŒ
[
¦Ù
]èğ
v®ue
;

2467 
JT_VOID
:

2468 
JT_CLASS_OBJECT
:

2469 
JT_THREAD
:

2470 
JT_THREAD_GROUP
:

2471 
JT_CLASS_LOADER
:

2473 
	`LOGE
("ERROR: unhªdËdag '%c'\n", 
g
);

2474 
	`as£¹
(
çl£
);

2477 
	}
}

2492 
	$dvmDbgPo¡LoÿtiÚEv’t
(cÚ¡ 
M‘hod
* 
m‘hod
, 
pcOff£t
,

2493 
Objeù
* 
thisPŒ
, 
ev’tFÏgs
)

2495 
JdwpLoÿtiÚ
 
loc
;

2497 ià(
	`dvmIsIÁ”çûCÏss
(
m‘hod
->
şazz
))

2498 
loc
.
ty³Tag
 = 
TT_INTERFACE
;

2500 
loc
.
ty³Tag
 = 
TT_CLASS
;

2501 
loc
.
şassId
 = 
	`şassObjeùToRefTy³Id
(
m‘hod
->
şazz
);

2502 
loc
.
m‘hodId
 = 
	`m‘hodToM‘hodId
(
m‘hod
);

2503 
loc
.
idx
 = 
pcOff£t
;

2511 ià(
	`dvmJdwpPo¡LoÿtiÚEv’t
(
gDvm
.
jdwpS‹
, &
loc
,

2512 
	`objeùToObjeùIdNoReg
(
thisPŒ
), 
ev’tFÏgs
))

2514 
	`şassObjeùToRefTy³Id
(
m‘hod
->
şazz
);

2515 
	`objeùToObjeùId
(
thisPŒ
);

2517 
	}
}

2522 
	$dvmDbgPo¡Exû±iÚ
(* 
throwFp
, 
throwR–Pc
, * 
ÿtchFp
,

2523 
ÿtchR–Pc
, 
Objeù
* 
exû±iÚ
)

2525 
JdwpLoÿtiÚ
 
throwLoc
, 
ÿtchLoc
;

2526 cÚ¡ 
M‘hod
* 
throwM‘h
;

2527 cÚ¡ 
M‘hod
* 
ÿtchM‘h
;

2529 
throwM‘h
 = 
	`SAVEAREA_FROM_FP
(
throwFp
)->
m‘hod
;

2530 ià(
	`dvmIsIÁ”çûCÏss
(
throwM‘h
->
şazz
))

2531 
throwLoc
.
ty³Tag
 = 
TT_INTERFACE
;

2533 
throwLoc
.
ty³Tag
 = 
TT_CLASS
;

2534 
throwLoc
.
şassId
 = 
	`şassObjeùToRefTy³Id
(
throwM‘h
->
şazz
);

2535 
throwLoc
.
m‘hodId
 = 
	`m‘hodToM‘hodId
(
throwM‘h
);

2536 
throwLoc
.
idx
 = 
throwR–Pc
;

2538 ià(
ÿtchR–Pc
 < 0) {

2539 
	`mem£t
(&
ÿtchLoc
, 0, (catchLoc));

2541 
ÿtchM‘h
 = 
	`SAVEAREA_FROM_FP
(
ÿtchFp
)->
m‘hod
;

2542 ià(
	`dvmIsIÁ”çûCÏss
(
ÿtchM‘h
->
şazz
))

2543 
ÿtchLoc
.
ty³Tag
 = 
TT_INTERFACE
;

2545 
ÿtchLoc
.
ty³Tag
 = 
TT_CLASS
;

2546 
ÿtchLoc
.
şassId
 = 
	`şassObjeùToRefTy³Id
(
ÿtchM‘h
->
şazz
);

2547 
ÿtchLoc
.
m‘hodId
 = 
	`m‘hodToM‘hodId
(
ÿtchM‘h
);

2548 
ÿtchLoc
.
idx
 = 
ÿtchR–Pc
;

2552 
Objeù
* 
thisObj
 = 
	`g‘ThisObjeù
(
throwFp
);

2554 
	`dvmJdwpPo¡Exû±iÚ
(
gDvm
.
jdwpS‹
, &
throwLoc
, 
	`objeùToObjeùId
(
exû±iÚ
),

2555 
	`şassObjeùToRefTy³Id
(
exû±iÚ
->
şazz
), &
ÿtchLoc
,

2556 
	`objeùToObjeùId
(
thisObj
));

2557 
	}
}

2562 
	$dvmDbgPo¡Th»adS¹
(
Th»ad
* 
th»ad
)

2564 ià(
gDvm
.
debugg”Aùive
) {

2565 
	`dvmJdwpPo¡Th»adChªge
(
gDvm
.
jdwpS‹
,

2566 
	`objeùToObjeùId
(
th»ad
->
th»adObj
), 
Œue
);

2568 ià(
gDvm
.
ddmTh»adNÙifiÿtiÚ
)

2569 
	`dvmDdmS’dTh»adNÙifiÿtiÚ
(
th»ad
, 
Œue
);

2570 
	}
}

2575 
	$dvmDbgPo¡Th»adD—th
(
Th»ad
* 
th»ad
)

2577 ià(
gDvm
.
debugg”Aùive
) {

2578 
	`dvmJdwpPo¡Th»adChªge
(
gDvm
.
jdwpS‹
,

2579 
	`objeùToObjeùId
(
th»ad
->
th»adObj
), 
çl£
);

2581 ià(
gDvm
.
ddmTh»adNÙifiÿtiÚ
)

2582 
	`dvmDdmS’dTh»adNÙifiÿtiÚ
(
th»ad
, 
çl£
);

2583 
	}
}

2588 
	$dvmDbgPo¡CÏssP»·»
(
CÏssObjeù
* 
şazz
)

2590 
g
;

2591 * 
sigÇtu»
;

2593 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

2594 
g
 = 
TT_INTERFACE
;

2596 
g
 = 
TT_CLASS
;

2601 
sigÇtu»
 = 
	`g’”©eJNISigÇtu»
(
şazz
);

2602 
	`dvmJdwpPo¡CÏssP»·»
(
gDvm
.
jdwpS‹
, 
g
, 
	`şassObjeùToRefTy³Id
(
şazz
),

2603 
sigÇtu»
, 
CS_VERIFIED
 | 
CS_PREPARED
);

2604 
	`ä“
(
sigÇtu»
);

2605 
	}
}

2612 
boŞ
 
	$dvmDbgW©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
)

2614 
M‘hod
* 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
pLoc
->
şassId
,…Loc->
m‘hodId
);

2615 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

2616 
	`dvmAddB»akAddr
(
m‘hod
, 
pLoc
->
idx
);

2617  
Œue
;

2618 
	}
}

2623 
	$dvmDbgUnw©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
)

2625 
M‘hod
* 
m‘hod
 = 
	`m‘hodIdToM‘hod
(
pLoc
->
şassId
,…Loc->
m‘hodId
);

2626 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

2627 
	`dvmCË¬B»akAddr
(
m‘hod
, 
pLoc
->
idx
);

2628 
	}
}

2634 
boŞ
 
	$dvmDbgCÚfigu»S‹p
(
ObjeùId
 
th»adId
, 
JdwpS‹pSize
 
size
,

2635 
JdwpS‹pD•th
 
d•th
)

2637 
Objeù
* 
th»adObj
;

2638 
Th»ad
* 
th»ad
;

2639 
boŞ
 
»suÉ
 = 
çl£
;

2641 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2642 
	`as£¹
(
th»adObj
 !ğ
NULL
);

2649 
	`dvmLockTh»adLi¡
(
NULL
);

2650 
th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2652 ià(
th»ad
 =ğ
NULL
) {

2653 
	`LOGE
("Thread for single-step‚ot found\n");

2654 
ba
;

2656 ià(!
	`dvmIsSu¥’ded
(
th»ad
)) {

2657 
	`LOGE
("Thread for single-step‚ot suspended\n");

2658 
	`as£¹
(!"non-susp step");

2659 
ba
;

2662 
	`as£¹
(
	`dvmIsSu¥’ded
(
th»ad
));

2663 ià(!
	`dvmAddSšgËS‹p
(
th»ad
, 
size
, 
d•th
))

2664 
ba
;

2666 
»suÉ
 = 
Œue
;

2668 
ba
:

2669 
	`dvmUÆockTh»adLi¡
();

2670  
»suÉ
;

2671 
	}
}

2676 
	$dvmDbgUncÚfigu»S‹p
(
ObjeùId
 
th»adId
)

2678 
	`UNUSED_PARAMETER
(
th»adId
);

2681 
	`dvmCË¬SšgËS‹p
(
NULL
);

2682 
	}
}

2690 
JdwpE¼Ü
 
	$dvmDbgInvokeM‘hod
(
ObjeùId
 
th»adId
, ObjeùId 
objeùId
,

2691 
RefTy³Id
 
şassId
, 
M‘hodId
 
m‘hodId
, 
u4
 
numArgs
, 
ObjeùId
* 
¬gA¼ay
,

2692 
u4
 
İtiÚs
, 
u1
* 
pResuÉTag
, 
u8
* 
pResuÉV®ue
, 
ObjeùId
* 
pExû±Obj
)

2694 
Objeù
* 
th»adObj
 = 
	`objeùIdToObjeù
(
th»adId
);

2695 
Th»ad
* 
rg‘Th»ad
;

2696 
JdwpE¼Ü
 
”r
 = 
ERR_NONE
;

2698 
	`dvmLockTh»adLi¡
(
NULL
);

2700 
rg‘Th»ad
 = 
	`th»adObjToTh»ad
(
th»adObj
);

2701 ià(
rg‘Th»ad
 =ğ
NULL
) {

2702 
”r
 = 
ERR_INVALID_THREAD
;

2703 
	`dvmUÆockTh»adLi¡
();

2704 
ba
;

2706 ià(!
rg‘Th»ad
->
švokeReq
.
»ady
) {

2707 
”r
 = 
ERR_INVALID_THREAD
;

2708 
	`dvmUÆockTh»adLi¡
();

2709 
ba
;

2717 
rg‘Th»ad
->
švokeReq
.
obj
 = 
	`objeùIdToObjeù
(
objeùId
);

2718 
rg‘Th»ad
->
švokeReq
.
th»ad
 = 
th»adObj
;

2719 
rg‘Th»ad
->
švokeReq
.
şazz
 = 
	`»fTy³IdToCÏssObjeù
(
şassId
);

2720 
rg‘Th»ad
->
švokeReq
.
m‘hod
 = 
	`m‘hodIdToM‘hod
(
şassId
, 
m‘hodId
);

2721 
rg‘Th»ad
->
švokeReq
.
numArgs
 =‚umArgs;

2722 
rg‘Th»ad
->
švokeReq
.
¬gA¼ay
 =‡rgArray;

2723 
rg‘Th»ad
->
švokeReq
.
İtiÚs
 = options;

2724 
rg‘Th»ad
->
švokeReq
.
švokeN“ded
 = 
Œue
;

2731 
	`dvmUÆockTh»adLi¡
();

2739 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2740 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

2742 
	`LOGV
(" Transferring controloƒventhread\n");

2743 
	`dvmLockMu‹x
(&
rg‘Th»ad
->
švokeReq
.
lock
);

2745 ià((
İtiÚs
 & 
INVOKE_SINGLE_THREADED
) == 0) {

2746 
	`LOGV
(" Resuming‡llhreads\n");

2747 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_DEBUG_EVENT
);

2749 
	`LOGV
(" Resumingƒventhread only\n");

2750 
	`dvmResumeTh»ad
(
rg‘Th»ad
);

2756 
rg‘Th»ad
->
švokeReq
.
švokeN“ded
) {

2757 
	`±h»ad_cÚd_wa™
(&
rg‘Th»ad
->
švokeReq
.
cv
,

2758 &
rg‘Th»ad
->
švokeReq
.
lock
);

2760 
	`dvmUÆockMu‹x
(&
rg‘Th»ad
->
švokeReq
.
lock
);

2761 
	`LOGV
(" Control has„eturned fromƒventhread\n");

2764 
	`dvmWa™FÜSu¥’d
(
rg‘Th»ad
);

2769 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

2778 ià((
İtiÚs
 & 
INVOKE_SINGLE_THREADED
) == 0) {

2779 
	`LOGV
(" Suspending‡llhreads\n");

2780 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_DEBUG_EVENT
);

2781 
	`LOGV
(" Resumingƒventhreado balancehe count\n");

2782 
	`dvmResumeTh»ad
(
rg‘Th»ad
);

2788 *
pResuÉTag
 = 
rg‘Th»ad
->
švokeReq
.
»suÉTag
;

2789 ià(
	`isTagPrim™ive
(
rg‘Th»ad
->
švokeReq
.
»suÉTag
))

2790 *
pResuÉV®ue
 = 
rg‘Th»ad
->
švokeReq
.
»suÉV®ue
.
j
;

2792 *
pResuÉV®ue
 = 
	`objeùToObjeùId
(
rg‘Th»ad
->
švokeReq
.
»suÉV®ue
.
l
);

2793 *
pExû±Obj
 = 
rg‘Th»ad
->
švokeReq
.
exû±Obj
;

2794 
”r
 = 
rg‘Th»ad
->
švokeReq
.err;

2796 
ba
:

2797  
”r
;

2798 
	}
}

2803 
u1
 
	$»suÉTagFromSigÇtu»
(cÚ¡ 
M‘hod
* 
m‘hod
)

2805 cÚ¡ * 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘hod
->
´ÙÙy³
);

2806  
	`dvmDbgG‘SigÇtu»Tag
(
desütÜ
);

2807 
	}
}

2815 
	$dvmDbgExecu‹M‘hod
(
DebugInvokeReq
* 
pReq
)

2817 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2818 cÚ¡ 
M‘hod
* 
m‘h
;

2819 
Objeù
* 
ŞdExû±
;

2820 
ŞdStus
;

2826 
ŞdExû±
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

2827 
	`dvmCË¬Exû±iÚ
(
£lf
);

2829 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

2835 ià((
pReq
->
İtiÚs
 & 
INVOKE_NONVIRTUAL
è!ğ0 ||…Req->
obj
 =ğ
NULL
) {

2836 
m‘h
 = 
pReq
->
m‘hod
;

2838 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
pReq
->
şazz
,…Req->
m‘hod
);

2840 
	`as£¹
(
m‘h
 !ğ
NULL
);

2842 
	`as£¹
((
jv®ue
è=ğ(
u8
));

2844 
	`IF_LOGV
() {

2845 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

2846 
	`LOGV
("JDWP invoking method %s.%s %s\n",

2847 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

2848 
	`ä“
(
desc
);

2851 
	`dvmC®lM‘hodA
(
£lf
, 
m‘h
, 
pReq
->
obj
, 
çl£
, &pReq->
»suÉV®ue
,

2852 (
jv®ue
*)
pReq
->
¬gA¼ay
);

2853 
pReq
->
exû±Obj
 = 
	`objeùToObjeùId
(
	`dvmG‘Exû±iÚ
(
£lf
));

2854 
pReq
->
»suÉTag
 = 
	`»suÉTagFromSigÇtu»
(
m‘h
);

2855 ià(
pReq
->
exû±Obj
 != 0) {

2856 
	`LOGD
(" JDWP invocation„eturning withƒxceptObj=%p\n",

2857 
	`dvmG‘Exû±iÚ
(
£lf
));

2858 
	`dvmCË¬Exû±iÚ
(
£lf
);

2863 
pReq
->
»suÉV®ue
.
j
 = 0;

2864 } ià(
pReq
->
»suÉTag
 =ğ
JT_OBJECT
) {

2866 
u1
 
ÃwTag
 = 
	`»suÉTagFromObjeù
(
pReq
->
»suÉV®ue
.
l
);

2867 ià(
ÃwTag
 !ğ
pReq
->
»suÉTag
) {

2868 
	`LOGVV
(" JDWP…romoted„esult from %do %d\n",

2869 
pReq
->
»suÉTag
, 
ÃwTag
);

2870 
pReq
->
»suÉTag
 = 
ÃwTag
;

2874 ià(
ŞdExû±
 !ğ
NULL
)

2875 
	`dvmS‘Exû±iÚ
(
£lf
, 
ŞdExû±
);

2876 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

2877 
	}
}

2880 
	sAdd»ssS‘CÚ‹xt
 {

2881 
boŞ
 
	mÏ¡Add»ssV®id
;

2882 
u4
 
	mÏ¡Add»ss
;

2883 
u4
 
	mlšeNum
;

2884 
Add»ssS‘
 *
	mpS‘
;

2885 } 
	tAdd»ssS‘CÚ‹xt
;

2888 
	$add»ssS‘Cb
 (*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

2890 
Add»ssS‘CÚ‹xt
 *
pCÚ‹xt
 = (Add»ssS‘CÚ‹xˆ*)
úxt
;

2892 ià(
lšeNum
 =ğ
pCÚ‹xt
->lineNum) {

2893 ià(!
pCÚ‹xt
->
Ï¡Add»ssV®id
) {

2895 
pCÚ‹xt
->
Ï¡Add»ss
 = 
add»ss
;

2896 
pCÚ‹xt
->
Ï¡Add»ssV®id
 = 
Œue
;

2900 } ià(
pCÚ‹xt
->
Ï¡Add»ssV®id
) {

2901 
u4
 
i
;

2903 
i
 = 
pCÚ‹xt
->
Ï¡Add»ss
; i < 
add»ss
; i++) {

2904 
	`dvmAdd»ssS‘S‘
(
pCÚ‹xt
->
pS‘
, 
i
);

2907 
pCÚ‹xt
->
Ï¡Add»ssV®id
 = 
çl£
;

2912 
	}
}

2916 cÚ¡ 
Add»ssS‘
 *
	$dvmAdd»ssS‘FÜLše
(cÚ¡ 
M‘hod
* 
m‘hod
, 
lše
)

2918 
Add»ssS‘
 *
»suÉ
;

2919 cÚ¡ 
DexFe
 *
pDexFe
 = 
m‘hod
->
şazz
->
pDvmDex
->pDexFile;

2920 
u4
 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

2921 
Add»ssS‘CÚ‹xt
 
cÚ‹xt
;

2923 
»suÉ
 = 
	`ÿÎoc
(1, (
Add»ssS‘
è+ (
š¢sSize
/8) + 1);

2924 
»suÉ
->
£tSize
 = 
š¢sSize
;

2926 
	`mem£t
(&
cÚ‹xt
, 0, (context));

2927 
cÚ‹xt
.
pS‘
 = 
»suÉ
;

2928 
cÚ‹xt
.
lšeNum
 = 
lše
;

2929 
cÚ‹xt
.
Ï¡Add»ssV®id
 = 
çl£
;

2931 
	`dexDecodeDebugInfo
(
pDexFe
, 
	`dvmG‘M‘hodCode
(
m‘hod
),

2932 
m‘hod
->
şazz
->
desütÜ
,

2933 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

2934 
m‘hod
->
acûssFÏgs
,

2935 
add»ssS‘Cb
, 
NULL
, &
cÚ‹xt
);

2938 ià(
cÚ‹xt
.
Ï¡Add»ssV®id
) {

2939 
u4
 
i
;

2940 
i
 = 
cÚ‹xt
.
Ï¡Add»ss
; i < 
š¢sSize
; i++) {

2941 
	`dvmAdd»ssS‘S‘
(
»suÉ
, 
i
);

2945  
»suÉ
;

2946 
	}
}

2958 
boŞ
 
	$dvmDbgDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

2959 * 
pR•lyL’
)

2961  
	`dvmDdmHªdËPack‘
(
buf
, 
d©aL’
, 
pR•lyBuf
, 
pR•lyL’
);

2962 
	}
}

2967 
	$dvmDbgDdmCÚÃùed
()

2969 
	`dvmDdmCÚÃùed
();

2970 
	}
}

2975 
	$dvmDbgDdmDiscÚÃùed
()

2977 
	`dvmDdmDiscÚÃùed
();

2978 
	}
}

2983 
	$dvmDbgDdmS’dChunk
(
ty³
, 
Ën
, cÚ¡ 
u1
* 
buf
)

2985 ià(
gDvm
.
jdwpS‹
 =ğ
NULL
) {

2986 
	`LOGI
("Debuggerhread‚ot‡ctive, ignoring DDM send (t=0x%08x†=%d)\n",

2987 
ty³
, 
Ën
);

2991 
	`dvmJdwpDdmS’dChunk
(
gDvm
.
jdwpS‹
, 
ty³
, 
Ën
, 
buf
);

2992 
	}
}

	@Debugger.h

20 #iâdeà
_DALVIK_DEBUGGER


21 
	#_DALVIK_DEBUGGER


	)

23 
	~"CommÚ.h
"

24 
	~"Misc.h
"

25 
	~"jdwp/Jdwp.h
"

26 
	~<±h»ad.h
>

29 
	gObjeù
;

30 
	gCÏssObjeù
;

31 
	gM‘hod
;

32 
	gTh»ad
;

38 
	sAdd»ssS‘
 {

39 
u4
 
	m£tSize
;

40 
u1
 
	m£t
[1];

41 } 
	tAdd»ssS‘
;

43 
INLINE
 
	$dvmAdd»ssS‘S‘
(
Add»ssS‘
 *
pS‘
, 
u4
 
toS‘
)

45 ià(
toS‘
 < 
pS‘
->
£tSize
) {

46 
pS‘
->
£t
[
toS‘
/8] |= 1 << (toSet % 8);

48 
	}
}

50 
INLINE
 
boŞ
 
	$dvmAdd»ssS‘G‘
(cÚ¡ 
Add»ssS‘
 *
pS‘
, 
u4
 
toG‘
)

52 ià(
toG‘
 < 
pS‘
->
£tSize
) {

53  (
pS‘
->
£t
[
toG‘
/8] & (1 << (toGet % 8))) != 0;

55  
çl£
;

57 
	}
}

62 
	sS‹pCÚŒŞ
 {

64 
JdwpS‹pSize
 
	msize
;

65 
JdwpS‹pD•th
 
	md•th
;

66 
Th»ad
* 
	mth»ad
;

69 
boŞ
 
	maùive
;

70 cÚ¡ 
M‘hod
* 
	mm‘hod
;

71 
	mlše
;

72 cÚ¡ 
Add»ssS‘
* 
	mpAdd»ssS‘
;

73 
	mäameD•th
;

74 } 
	tS‹pCÚŒŞ
;

79 
	sDebugInvokeReq
 {

81 
boŞ
 
	m»ady
;

84 
boŞ
 
	mšvokeN“ded
;

87 
Objeù
* 
	mobj
;

88 
Objeù
* 
	mth»ad
;

89 
CÏssObjeù
* 
	mşazz
;

90 
M‘hod
* 
	mm‘hod
;

91 
u4
 
	mnumArgs
;

92 
u8
* 
	m¬gA¼ay
;

93 
u4
 
	mİtiÚs
;

96 
JdwpE¼Ü
 
	m”r
;

97 
u1
 
	m»suÉTag
;

98 
JV®ue
 
	m»suÉV®ue
;

99 
ObjeùId
 
	mexû±Obj
;

102 
±h»ad_mu‹x_t
 
	mlock
;

103 
±h»ad_cÚd_t
 
	mcv
;

104 } 
	tDebugInvokeReq
;

107 
boŞ
 
dvmDebugg”S¹up
();

108 
dvmDebugg”Shutdown
();

110 
dvmDbgIn™Mu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
);

111 
dvmDbgLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
);

112 
dvmDbgUÆockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
);

113 
dvmDbgIn™CÚd
(
±h»ad_cÚd_t
* 
pCÚd
);

114 
dvmDbgCÚdWa™
(
±h»ad_cÚd_t
* 
pCÚd
, 
±h»ad_mu‹x_t
* 
pMu‹x
);

115 
dvmDbgCÚdSigÇl
(
±h»ad_cÚd_t
* 
pCÚd
);

116 
dvmDbgCÚdBrßdÿ¡
(
±h»ad_cÚd_t
* 
pCÚd
);

121 
DebugInvokeReq
* 
dvmDbgG‘InvokeReq
();

127 
dvmDbgCÚÃùed
();

128 
dvmDbgAùive
();

129 
dvmDbgDiscÚÃùed
();

135 
boŞ
 
dvmDbgIsDebugg”CÚÃùed
();

142 
s8
 
dvmDbgLa¡Debugg”Aùiv™y
();

149 
dvmDbgTh»adRuÂšg
();

150 
dvmDbgTh»adWa™šg
();

151 
dvmDbgTh»adCÚtšušg
(
¡©us
);

156 
dvmDbgEx™
(
¡©us
);

161 cÚ¡ * 
dvmDbgG‘CÏssDesütÜ
(
RefTy³Id
 
id
);

162 
RefTy³Id
 
dvmDbgG‘Su³rşass
(RefTy³Id 
id
);

163 
ObjeùId
 
dvmDbgG‘CÏssLßd”
(
RefTy³Id
 
id
);

164 
u4
 
dvmDbgG‘AcûssFÏgs
(
RefTy³Id
 
id
);

165 
boŞ
 
dvmDbgIsIÁ”çû
(
RefTy³Id
 
id
);

166 
dvmDbgG‘CÏssLi¡
(
u4
* 
pNumCÏs£s
, 
RefTy³Id
** 
pCÏssRefBuf
);

167 
dvmDbgG‘VisibËCÏssLi¡
(
ObjeùId
 
şassLßd”Id
, 
u4
* 
pNumCÏs£s
,

168 
RefTy³Id
** 
pCÏssRefBuf
);

169 
dvmDbgG‘CÏssInfo
(
RefTy³Id
 
şassId
, 
u1
* 
pTy³Tag
, 
u4
* 
pStus
,

170 ** 
pSigÇtu»
);

171 
boŞ
 
dvmDbgFšdLßdedCÏssBySigÇtu»
(cÚ¡ * 
şassDesütÜ
,

172 
RefTy³Id
* 
pRefTy³Id
);

173 
dvmDbgG‘ObjeùTy³
(
ObjeùId
 
objeùId
, 
u1
* 
pRefTy³Tag
,

174 
RefTy³Id
* 
pRefTy³Id
);

175 
u1
 
dvmDbgG‘CÏssObjeùTy³
(
RefTy³Id
 
»fTy³Id
);

176 * 
dvmDbgG‘SigÇtu»
(
RefTy³Id
 
»fTy³Id
);

177 cÚ¡ * 
dvmDbgG‘SourûFe
(
RefTy³Id
 
»fTy³Id
);

178 * 
dvmDbgG‘ObjeùTy³Name
(
ObjeùId
 
objeùId
);

179 
dvmDbgG‘SigÇtu»Tag
(cÚ¡ * 
sigÇtu»
);

180 
dvmDbgG‘ObjeùTag
(
ObjeùId
 
objeùId
, cÚ¡ * 
ty³
);

181 
dvmDbgG‘TagWidth
(
g
);

183 
dvmDbgG‘A¼ayL’gth
(
ObjeùId
 
¬¿yId
);

184 
dvmDbgG‘A¼ayEËm’tTag
(
ObjeùId
 
¬¿yId
);

185 
boŞ
 
dvmDbgOuutA¼ay
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

186 
Ex·ndBuf
* 
pR•ly
);

187 
boŞ
 
dvmDbgS‘A¼ayEËm’ts
(
ObjeùId
 
¬¿yId
, 
fœ¡Index
, 
couÁ
,

188 cÚ¡ 
u1
* 
buf
);

190 
ObjeùId
 
dvmDbgC»©eSŒšg
(cÚ¡ * 
¡r
);

192 
boŞ
 
dvmDbgM©chTy³
(
RefTy³Id
 
š¡CÏssId
, RefTy³Id 
şassId
);

197 cÚ¡ * 
dvmDbgG‘M‘hodName
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
);

198 
dvmDbgOuutAÎF›lds
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

199 
Ex·ndBuf
* 
pR•ly
);

200 
dvmDbgOuutAÎM‘hods
(
RefTy³Id
 
»fTy³Id
, 
boŞ
 
w™hG’”ic
,

201 
Ex·ndBuf
* 
pR•ly
);

202 
dvmDbgOuutAÎIÁ”çûs
(
RefTy³Id
 
»fTy³Id
, 
Ex·ndBuf
* 
pR•ly
);

203 
dvmDbgOuutLšeTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
m‘hodId
,

204 
Ex·ndBuf
* 
pR•ly
);

205 
dvmDbgOuutV¬ŸbËTabË
(
RefTy³Id
 
»fTy³Id
, 
M‘hodId
 
id
,

206 
boŞ
 
w™hG’”ic
, 
Ex·ndBuf
* 
pR•ly
);

208 
dvmDbgG‘F›ldTag
(
ObjeùId
 
objId
, 
F›ldId
 
f›ldId
);

209 
dvmDbgG‘SticF›ldTag
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
);

210 
dvmDbgG‘F›ldV®ue
(
ObjeùId
 
objId
, 
F›ldId
 
f›ldId
, 
u1
* 
±r
, 
width
);

211 
dvmDbgS‘F›ldV®ue
(
ObjeùId
 
objeùId
, 
F›ldId
 
f›ldId
, 
u8
 
v®ue
,

212 
width
);

213 
dvmDbgG‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
, 
u1
* 
±r
,

214 
width
);

215 
dvmDbgS‘SticF›ldV®ue
(
RefTy³Id
 
»fTy³Id
, 
F›ldId
 
f›ldId
,

216 
u8
 
¿wV®ue
, 
width
);

218 * 
dvmDbgSŒšgToUtf8
(
ObjeùId
 
¡rId
);

223 * 
dvmDbgG‘Th»adName
(
ObjeùId
 
th»adId
);

224 
ObjeùId
 
dvmDbgG‘Th»adGroup
(ObjeùId 
th»adId
);

225 * 
dvmDbgG‘Th»adGroupName
(
ObjeùId
 
th»adGroupId
);

226 
ObjeùId
 
dvmDbgG‘Th»adGroupP¬’t
(ObjeùId 
th»adGroupId
);

227 
ObjeùId
 
dvmDbgG‘Sy¡emTh»adGroupId
();

228 
ObjeùId
 
dvmDbgG‘MašTh»adGroupId
();

230 
boŞ
 
dvmDbgG‘Th»adStus
(
ObjeùId
 
th»adId
, 
u4
* 
th»adStus
,

231 
u4
* 
su¥’dStus
);

232 
u4
 
dvmDbgG‘Th»adSu¥’dCouÁ
(
ObjeùId
 
th»adId
);

233 
boŞ
 
dvmDbgTh»adExi¡s
(
ObjeùId
 
th»adId
);

234 
boŞ
 
dvmDbgIsSu¥’ded
(
ObjeùId
 
th»adId
);

236 
dvmDbgG‘Th»adGroupTh»ads
(
ObjeùId
 
th»adGroupId
,

237 
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
);

238 
dvmDbgG‘AÎTh»ads
(
ObjeùId
** 
µTh»adIds
, 
u4
* 
pTh»adCouÁ
);

239 
dvmDbgG‘Th»adF¿meCouÁ
(
ObjeùId
 
th»adId
);

240 
boŞ
 
dvmDbgG‘Th»adF¿me
(
ObjeùId
 
th»adId
, 
num
, 
F¿meId
* 
pF¿meId
,

241 
JdwpLoÿtiÚ
* 
pLoc
);

243 
ObjeùId
 
dvmDbgG‘Th»adS–fId
();

244 
dvmDbgSu¥’dVM
(
boŞ
 
isEv’t
);

245 
dvmDbgResumeVM
();

246 
dvmDbgSu¥’dTh»ad
(
ObjeùId
 
th»adId
);

247 
dvmDbgResumeTh»ad
(
ObjeùId
 
th»adId
);

248 
dvmDbgSu¥’dS–f
();

250 
boŞ
 
dvmDbgG‘ThisObjeù
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, ObjeùId* 
pThisId
);

251 
dvmDbgG‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
,

252 
u1
 
g
, u1* 
buf
, 
ex³ùedL’
);

253 
dvmDbgS‘LoÿlV®ue
(
ObjeùId
 
th»adId
, 
F¿meId
 
äameId
, 
¦Ù
,

254 
u1
 
g
, 
u8
 
v®ue
, 
width
);

260 
dvmDbgPo¡LoÿtiÚEv’t
(cÚ¡ 
M‘hod
* 
m‘hod
, 
pcOff£t
,

261 
Objeù
* 
thisPŒ
, 
ev’tFÏgs
);

262 
dvmDbgPo¡Exû±iÚ
(* 
throwFp
, 
throwR–Pc
, * 
ÿtchFp
,

263 
ÿtchR–Pc
, 
Objeù
* 
exû±iÚ
);

264 
dvmDbgPo¡Th»adS¹
(
Th»ad
* 
th»ad
);

265 
dvmDbgPo¡Th»adD—th
(
Th»ad
* 
th»ad
);

266 
dvmDbgPo¡CÏssP»·»
(
CÏssObjeù
* 
şazz
);

271 
	mDBG_BREAKPOINT
 = 0x01,

272 
	mDBG_SINGLE_STEP
 = 0x02,

273 
	mDBG_METHOD_ENTRY
 = 0x04,

274 
	mDBG_METHOD_EXIT
 = 0x08,

277 
boŞ
 
dvmDbgW©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
);

278 
dvmDbgUnw©chLoÿtiÚ
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
);

279 
boŞ
 
dvmDbgCÚfigu»S‹p
(
ObjeùId
 
th»adId
, 
JdwpS‹pSize
 
size
,

280 
JdwpS‹pD•th
 
d•th
);

281 
dvmDbgUncÚfigu»S‹p
(
ObjeùId
 
th»adId
);

283 
JdwpE¼Ü
 
dvmDbgInvokeM‘hod
(
ObjeùId
 
th»adId
, ObjeùId 
objeùId
,

284 
RefTy³Id
 
şassId
, 
M‘hodId
 
m‘hodId
, 
u4
 
numArgs
, 
u8
* 
¬gA¼ay
,

285 
u4
 
İtiÚs
, 
u1
* 
pResuÉTag
, 
u8
* 
pResuÉV®ue
, 
ObjeùId
* 
pExû±Obj
);

286 
dvmDbgExecu‹M‘hod
(
DebugInvokeReq
* 
pReq
);

289 cÚ¡ 
Add»ssS‘
 *
dvmAdd»ssS‘FÜLše
(cÚ¡ 
M‘hod
* 
m‘hod
, 
lše
);

294 
boŞ
 
dvmDbgDdmHªdËPack‘
(cÚ¡ 
u1
* 
buf
, 
d©aL’
, u1** 
pR•lyBuf
,

295 * 
pR•lyL’
);

296 
dvmDbgDdmCÚÃùed
();

297 
dvmDbgDdmDiscÚÃùed
();

298 
dvmDbgDdmS’dChunk
(
ty³
, 
Ën
, cÚ¡ 
u1
* 
buf
);

300 
	#CHUNK_TYPE
(
_Çme
) \

301 ((
_Çme
)[0] << 24 | (_Çme)[1] << 16 | (_Çme)[2] << 8 | (_Çme)[3])

	)

	@DvmDex.c

19 
	~"D®vik.h
"

38 
DvmDex
* 
	$®loÿ‹AuxSŒuùu»s
(
DexFe
* 
pDexFe
)

40 
DvmDex
* 
pDvmDex
;

41 cÚ¡ 
DexH—d”
* 
pH—d”
;

42 
u4
 
¡ršgCouÁ
, 
şassCouÁ
, 
m‘hodCouÁ
, 
f›ldCouÁ
;

44 
pDvmDex
 = (
DvmDex
*è
	`ÿÎoc
(1, (DvmDex));

45 ià(
pDvmDex
 =ğ
NULL
)

46  
NULL
;

48 
pDvmDex
->
pDexFe
 =…DexFile;

49 
pDvmDex
->
pH—d”
 = 
pDexFe
->pHeader;

51 
pH—d”
 = 
pDvmDex
->pHeader;

53 
¡ršgCouÁ
 = 
pH—d”
->
¡ršgIdsSize
;

54 
şassCouÁ
 = 
pH—d”
->
ty³IdsSize
;

55 
m‘hodCouÁ
 = 
pH—d”
->
m‘hodIdsSize
;

56 
f›ldCouÁ
 = 
pH—d”
->
f›ldIdsSize
;

58 #ià(
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_REDUCING
) || \

59 (
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_EXPANDING
)

60 ià(
pDexFe
->
šdexM­
.
¡ršgReduûdCouÁ
 > 0)

61 
¡ršgCouÁ
 = 
pDexFe
->
šdexM­
.
¡ršgReduûdCouÁ
;

62 ià(
pDexFe
->
šdexM­
.
şassReduûdCouÁ
 > 0)

63 
şassCouÁ
 = 
pDexFe
->
šdexM­
.
şassReduûdCouÁ
;

64 ià(
pDexFe
->
šdexM­
.
m‘hodReduûdCouÁ
 > 0)

65 
m‘hodCouÁ
 = 
pDexFe
->
šdexM­
.
m‘hodReduûdCouÁ
;

66 ià(
pDexFe
->
šdexM­
.
f›ldReduûdCouÁ
 > 0)

67 
f›ldCouÁ
 = 
pDexFe
->
šdexM­
.
f›ldReduûdCouÁ
;

68 #–ià(
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_NO_CACHE
)

69 
¡ršgCouÁ
 = 
şassCouÁ
 = 
m‘hodCouÁ
 = 
f›ldCouÁ
 = 0;

72 
pDvmDex
->
pResSŒšgs
 = (
SŒšgObjeù
**)

73 
	`ÿÎoc
(
¡ršgCouÁ
, (
SŒšgObjeù
*));

75 
pDvmDex
->
pResCÏs£s
 = (
CÏssObjeù
**)

76 
	`ÿÎoc
(
şassCouÁ
, (
CÏssObjeù
*));

78 
pDvmDex
->
pResM‘hods
 = (
M‘hod
**)

79 
	`ÿÎoc
(
m‘hodCouÁ
, (
M‘hod
*));

81 
pDvmDex
->
pResF›lds
 = (
F›ld
**)

82 
	`ÿÎoc
(
f›ldCouÁ
, (
F›ld
*));

84 
	`LOGV
("+++ DEX %p:‡llocateAux %d+%d+%d+%d * 4 = %d bytes\n",

85 
pDvmDex
, 
¡ršgCouÁ
, 
şassCouÁ
, 
m‘hodCouÁ
, 
f›ldCouÁ
,

86 (
¡ršgCouÁ
 + 
şassCouÁ
 + 
m‘hodCouÁ
 + 
f›ldCouÁ
) * 4);

88 
pDvmDex
->
pIÁ”çûCache
 = 
	`dvmAÎocAtomicCache
(
DEX_INTERFACE_CACHE_SIZE
);

90 ià(
pDvmDex
->
pResSŒšgs
 =ğ
NULL
 ||

91 
pDvmDex
->
pResCÏs£s
 =ğ
NULL
 ||

92 
pDvmDex
->
pResM‘hods
 =ğ
NULL
 ||

93 
pDvmDex
->
pResF›lds
 =ğ
NULL
 ||

94 
pDvmDex
->
pIÁ”çûCache
 =ğ
NULL
)

96 
	`LOGE
("Alloc failure in‡llocateAuxStructures\n");

97 
	`ä“
(
pDvmDex
->
pResSŒšgs
);

98 
	`ä“
(
pDvmDex
->
pResCÏs£s
);

99 
	`ä“
(
pDvmDex
->
pResM‘hods
);

100 
	`ä“
(
pDvmDex
->
pResF›lds
);

101 
	`ä“
(
pDvmDex
);

102  
NULL
;

105  
pDvmDex
;

107 
	}
}

115 
	$dvmDexFeO³nFromFd
(
fd
, 
DvmDex
** 
µDvmDex
)

117 
DvmDex
* 
pDvmDex
;

118 
DexFe
* 
pDexFe
;

119 
MemM­pšg
 
memM­
;

120 
·r£FÏgs
 = 
kDexP¬£DeçuÉ
;

121 
»suÉ
 = -1;

123 ià(
gDvm
.
v”ifyDexChecksum
)

124 
·r£FÏgs
 |ğ
kDexP¬£V”ifyChecksum
;

126 ià(
	`l£ek
(
fd
, 0, 
SEEK_SET
) < 0) {

127 
	`LOGE
("lseek„ewind failed\n");

128 
ba
;

131 ià(
	`sysM­FeInShmem
(
fd
, &
memM­
) != 0) {

132 
	`LOGE
("Unableo map file\n");

133 
ba
;

136 
pDexFe
 = 
	`dexFeP¬£
(
memM­
.
addr
, memM­.
Ëngth
, 
·r£FÏgs
);

137 ià(
pDexFe
 =ğ
NULL
) {

138 
	`LOGE
("DEX…arse failed\n");

139 
	`sysR–—£Shmem
(&
memM­
);

140 
ba
;

143 
pDvmDex
 = 
	`®loÿ‹AuxSŒuùu»s
(
pDexFe
);

144 ià(
pDvmDex
 =ğ
NULL
) {

145 
	`dexFeF»e
(
pDexFe
);

146 
	`sysR–—£Shmem
(&
memM­
);

147 
ba
;

151 
	`sysCİyM­
(&
pDvmDex
->
memM­
, &memMap);

152 *
µDvmDex
 = 
pDvmDex
;

153 
»suÉ
 = 0;

155 
ba
:

156  
»suÉ
;

157 
	}
}

167 
	$dvmDexFeO³nP¬tŸl
(cÚ¡ * 
addr
, 
Ën
, 
DvmDex
** 
µDvmDex
)

169 
DvmDex
* 
pDvmDex
;

170 
DexFe
* 
pDexFe
;

171 
·r£FÏgs
 = 
kDexP¬£DeçuÉ
;

172 
»suÉ
 = -1;

179 
pDexFe
 = 
	`dexFeP¬£
(
addr
, 
Ën
, 
·r£FÏgs
);

180 ià(
pDexFe
 =ğ
NULL
) {

181 
	`LOGE
("DEX…arse failed\n");

182 
ba
;

184 
pDvmDex
 = 
	`®loÿ‹AuxSŒuùu»s
(
pDexFe
);

185 ià(
pDvmDex
 =ğ
NULL
) {

186 
	`dexFeF»e
(
pDexFe
);

187 
ba
;

190 *
µDvmDex
 = 
pDvmDex
;

191 
»suÉ
 = 0;

193 
ba
:

194  
»suÉ
;

195 
	}
}

202 
	$dvmDexFeF»e
(
DvmDex
* 
pDvmDex
)

204 ià(
pDvmDex
 =ğ
NULL
)

207 
	`dexFeF»e
(
pDvmDex
->
pDexFe
);

209 
	`LOGV
("+++ DEX %p: f»ešg‡ux sŒuùs\n", 
pDvmDex
);

210 
	`ä“
(
pDvmDex
->
pResSŒšgs
);

211 
	`ä“
(
pDvmDex
->
pResCÏs£s
);

212 
	`ä“
(
pDvmDex
->
pResM‘hods
);

213 
	`ä“
(
pDvmDex
->
pResF›lds
);

214 
	`dvmF»eAtomicCache
(
pDvmDex
->
pIÁ”çûCache
);

216 
	`sysR–—£Shmem
(&
pDvmDex
->
memM­
);

217 
	`ä“
(
pDvmDex
);

218 
	}
}

	@DvmDex.h

20 #iâdeà
_DALVIK_DVMDEX


21 
	#_DALVIK_DVMDEX


	)

23 
	~"libdex/DexFe.h
"

26 
	gCÏssObjeù
;

27 
	gHashTabË
;

28 
	gIn¡F›ld
;

29 
	gM‘hod
;

30 
	gSŒšgObjeù
;

36 
	sDvmDex
 {

38 
DexFe
* 
	mpDexFe
;

41 cÚ¡ 
DexH—d”
* 
	mpH—d”
;

44 
SŒšgObjeù
** 
	mpResSŒšgs
;

47 
CÏssObjeù
** 
	mpResCÏs£s
;

50 
M‘hod
** 
	mpResM‘hods
;

54 
F›ld
** 
	mpResF›lds
;

57 
AtomicCache
* 
	mpIÁ”çûCache
;

60 
MemM­pšg
 
	mmemM­
;

61 } 
	tDvmDex
;

71 
dvmDexFeO³nFromFd
(
fd
, 
DvmDex
** 
µDvmDex
);

76 
dvmDexFeO³nP¬tŸl
(cÚ¡ * 
addr
, 
Ën
, 
DvmDex
** 
µDvmDex
);

81 
dvmDexFeF»e
(
DvmDex
* 
pDvmDex
);

84 #ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_DISABLED


90 
INLINE
 
SŒšgObjeù
* 
	$dvmDexG‘ResŞvedSŒšg
(cÚ¡ 
DvmDex
* 
pDvmDex
,

91 
u4
 
¡ršgIdx
)

93 
	`as£¹
(
¡ršgIdx
 < 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

94  
pDvmDex
->
pResSŒšgs
[
¡ršgIdx
];

95 
	}
}

96 
INLINE
 
CÏssObjeù
* 
	$dvmDexG‘ResŞvedCÏss
(cÚ¡ 
DvmDex
* 
pDvmDex
,

97 
u4
 
şassIdx
)

99 
	`as£¹
(
şassIdx
 < 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

100  
pDvmDex
->
pResCÏs£s
[
şassIdx
];

101 
	}
}

102 
INLINE
 
M‘hod
* 
	$dvmDexG‘ResŞvedM‘hod
(cÚ¡ 
DvmDex
* 
pDvmDex
,

103 
u4
 
m‘hodIdx
)

105 
	`as£¹
(
m‘hodIdx
 < 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

106  
pDvmDex
->
pResM‘hods
[
m‘hodIdx
];

107 
	}
}

108 
INLINE
 
F›ld
* 
	$dvmDexG‘ResŞvedF›ld
(cÚ¡ 
DvmDex
* 
pDvmDex
,

109 
u4
 
f›ldIdx
)

111 
	`as£¹
(
f›ldIdx
 < 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

112  
pDvmDex
->
pResF›lds
[
f›ldIdx
];

113 
	}
}

119 
INLINE
 
	$dvmDexS‘ResŞvedSŒšg
(
DvmDex
* 
pDvmDex
, 
u4
 
¡ršgIdx
,

120 
SŒšgObjeù
* 
¡r
)

122 
	`as£¹
(
¡ršgIdx
 < 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

123 
pDvmDex
->
pResSŒšgs
[
¡ršgIdx
] = 
¡r
;

124 
	}
}

125 
INLINE
 
	$dvmDexS‘ResŞvedCÏss
(
DvmDex
* 
pDvmDex
, 
u4
 
şassIdx
,

126 
CÏssObjeù
* 
şazz
)

128 
	`as£¹
(
şassIdx
 < 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

129 
pDvmDex
->
pResCÏs£s
[
şassIdx
] = 
şazz
;

130 
	}
}

131 
INLINE
 
	$dvmDexS‘ResŞvedM‘hod
(
DvmDex
* 
pDvmDex
, 
u4
 
m‘hodIdx
,

132 
M‘hod
* 
m‘hod
)

134 
	`as£¹
(
m‘hodIdx
 < 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

135 
pDvmDex
->
pResM‘hods
[
m‘hodIdx
] = 
m‘hod
;

136 
	}
}

137 
INLINE
 
	$dvmDexS‘ResŞvedF›ld
(
DvmDex
* 
pDvmDex
, 
u4
 
f›ldIdx
,

138 
F›ld
* 
f›ld
)

140 
	`as£¹
(
f›ldIdx
 < 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

141 
pDvmDex
->
pResF›lds
[
f›ldIdx
] = 
f›ld
;

142 
	}
}

144 #–ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_REDUCING


159 
INLINE
 
SŒšgObjeù
* 
	$dvmDexG‘ResŞvedSŒšg
(cÚ¡ 
DvmDex
* 
pDvmDex
,

160 
u4
 
¡ršgIdx
)

162 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

164 
	`as£¹
(
¡ršgIdx
 < 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

165 ià(
pIndexM­
->
¡ršgReduûdCouÁ
 > 0) {

166 
¡ršgIdx
 = 
pIndexM­
->
¡ršgM­
[stringIdx];

167 ià(
¡ršgIdx
 =ğ
kNoIndexM­pšg
)

168  
NULL
;

170  
pDvmDex
->
pResSŒšgs
[
¡ršgIdx
];

171 
	}
}

172 
INLINE
 
CÏssObjeù
* 
	$dvmDexG‘ResŞvedCÏss
(cÚ¡ 
DvmDex
* 
pDvmDex
,

173 
u4
 
şassIdx
)

175 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

177 
	`as£¹
(
şassIdx
 < 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

178 ià(
pIndexM­
->
şassReduûdCouÁ
 > 0) {

179 
şassIdx
 = 
pIndexM­
->
şassM­
[classIdx];

180 ià(
şassIdx
 =ğ
kNoIndexM­pšg
)

181  
NULL
;

183  
pDvmDex
->
pResCÏs£s
[
şassIdx
];

184 
	}
}

185 
INLINE
 
M‘hod
* 
	$dvmDexG‘ResŞvedM‘hod
(cÚ¡ 
DvmDex
* 
pDvmDex
,

186 
u4
 
m‘hodIdx
)

188 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

190 
	`as£¹
(
m‘hodIdx
 < 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

191 ià(
pIndexM­
->
m‘hodReduûdCouÁ
 > 0) {

192 
m‘hodIdx
 = 
pIndexM­
->
m‘hodM­
[methodIdx];

193 ià(
m‘hodIdx
 =ğ
kNoIndexM­pšg
)

194  
NULL
;

196  
pDvmDex
->
pResM‘hods
[
m‘hodIdx
];

197 
	}
}

198 
INLINE
 
F›ld
* 
	$dvmDexG‘ResŞvedF›ld
(cÚ¡ 
DvmDex
* 
pDvmDex
,

199 
u4
 
f›ldIdx
)

201 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

203 
	`as£¹
(
f›ldIdx
 < 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

204 ià(
pIndexM­
->
f›ldReduûdCouÁ
 > 0) {

205 
f›ldIdx
 = 
pIndexM­
->
f›ldM­
[fieldIdx];

206 ià(
f›ldIdx
 =ğ
kNoIndexM­pšg
)

207  
NULL
;

209  
pDvmDex
->
pResF›lds
[
f›ldIdx
];

210 
	}
}

216 
INLINE
 
	$dvmDexS‘ResŞvedSŒšg
(
DvmDex
* 
pDvmDex
, 
u4
 
¡ršgIdx
,

217 
SŒšgObjeù
* 
¡r
)

219 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

220 
u4
 
ÃwIdx
;

222 
	`as£¹
(
¡ršgIdx
 < 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

223 ià(
pIndexM­
->
¡ršgReduûdCouÁ
 > 0) {

224 
ÃwIdx
 = 
pIndexM­
->
¡ršgM­
[
¡ršgIdx
];

225 ià(
ÃwIdx
 !ğ
kNoIndexM­pšg
)

226 
pDvmDex
->
pResSŒšgs
[
ÃwIdx
] = 
¡r
;

228 
	}
}

229 
INLINE
 
	$dvmDexS‘ResŞvedCÏss
(
DvmDex
* 
pDvmDex
, 
u4
 
şassIdx
,

230 
CÏssObjeù
* 
şazz
)

232 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

233 
u4
 
ÃwIdx
;

235 
	`as£¹
(
şassIdx
 < 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

236 ià(
pIndexM­
->
şassReduûdCouÁ
 > 0) {

237 
ÃwIdx
 = 
pIndexM­
->
şassM­
[
şassIdx
];

238 ià(
ÃwIdx
 !ğ
kNoIndexM­pšg
)

239 
pDvmDex
->
pResCÏs£s
[
ÃwIdx
] = 
şazz
;

241 
	}
}

242 
INLINE
 
	$dvmDexS‘ResŞvedM‘hod
(
DvmDex
* 
pDvmDex
, 
u4
 
m‘hodIdx
,

243 
M‘hod
* 
m‘hod
)

245 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

246 
u4
 
ÃwIdx
;

248 
	`as£¹
(
m‘hodIdx
 < 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

249 ià(
pIndexM­
->
m‘hodReduûdCouÁ
 > 0) {

250 
ÃwIdx
 = 
pIndexM­
->
m‘hodM­
[
m‘hodIdx
];

251 ià(
ÃwIdx
 !ğ
kNoIndexM­pšg
)

252 
pDvmDex
->
pResM‘hods
[
ÃwIdx
] = 
m‘hod
;

254 
	}
}

255 
INLINE
 
	$dvmDexS‘ResŞvedF›ld
(
DvmDex
* 
pDvmDex
, 
u4
 
f›ldIdx
,

256 
F›ld
* 
f›ld
)

258 cÚ¡ 
DexIndexM­
* 
pIndexM­
 = &
pDvmDex
->
pDexFe
->
šdexM­
;

259 
u4
 
ÃwIdx
;

261 
	`as£¹
(
f›ldIdx
 < 
pDvmDex
->
pH—d”
->
f›ldIdsSize
);

262 ià(
pIndexM­
->
f›ldReduûdCouÁ
 > 0) {

263 
ÃwIdx
 = 
pIndexM­
->
f›ldM­
[
f›ldIdx
];

264 ià(
ÃwIdx
 !ğ
kNoIndexM­pšg
)

265 
pDvmDex
->
pResF›lds
[
ÃwIdx
] = 
f›ld
;

267 
	}
}

269 #–ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_EXPANDING


273 #–ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_NO_CACHE


278 
INLINE
 
SŒšgObjeù
* 
	$dvmDexG‘ResŞvedSŒšg
(cÚ¡ 
DvmDex
* 
pDvmDex
,

279 
u4
 
¡ršgIdx
)

281  
NULL
;

282 
	}
}

283 
INLINE
 
CÏssObjeù
* 
	$dvmDexG‘ResŞvedCÏss
(cÚ¡ 
DvmDex
* 
pDvmDex
,

284 
u4
 
şassIdx
)

286  
NULL
;

287 
	}
}

288 
INLINE
 
M‘hod
* 
	$dvmDexG‘ResŞvedM‘hod
(cÚ¡ 
DvmDex
* 
pDvmDex
,

289 
u4
 
m‘hodIdx
)

291  
NULL
;

292 
	}
}

293 
INLINE
 
F›ld
* 
	$dvmDexG‘ResŞvedF›ld
(cÚ¡ 
DvmDex
* 
pDvmDex
,

294 
u4
 
f›ldIdx
)

296  
NULL
;

297 
	}
}

302 
INLINE
 
	$dvmDexS‘ResŞvedSŒšg
(
DvmDex
* 
pDvmDex
, 
u4
 
¡ršgIdx
,

303 
SŒšgObjeù
* 
¡r
)

304 {
	}
}

305 
INLINE
 
	$dvmDexS‘ResŞvedCÏss
(
DvmDex
* 
pDvmDex
, 
u4
 
şassIdx
,

306 
CÏssObjeù
* 
şazz
)

307 {
	}
}

308 
INLINE
 
	$dvmDexS‘ResŞvedM‘hod
(
DvmDex
* 
pDvmDex
, 
u4
 
m‘hodIdx
,

309 
M‘hod
* 
m‘hod
)

310 {
	}
}

311 
INLINE
 
	$dvmDexS‘ResŞvedF›ld
(
DvmDex
* 
pDvmDex
, 
u4
 
f›ldIdx
,

312 
F›ld
* 
f›ld
)

313 {
	}
}

	@Exception.c

19 
	~"D®vik.h
"

20 
	~"libdex/DexC©ch.h
"

22 
	~<¡dlib.h
>

99 
boŞ
 
š™Exû±iÚ
(
Objeù
* 
exû±iÚ
, cÚ¡ * 
msg
, Objeù* 
ÿu£
,

100 
Th»ad
* 
£lf
);

109 
boŞ
 
	$dvmExû±iÚS¹up
()

111 
gDvm
.
şassJavaLªgThrowabË
 =

112 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Throwable;");

113 
gDvm
.
şassJavaLªgRuÁimeExû±iÚ
 =

114 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/RuntimeException;");

115 
gDvm
.
şassJavaLªgE¼Ü
 =

116 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Error;");

117 
gDvm
.
şassJavaLªgSckT¿ûEËm’t
 =

118 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/StackTraceElement;");

119 
gDvm
.
şassJavaLªgSckT¿ûEËm’tA¼ay
 =

120 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/SckT¿ûEËm’t;", 
NULL
);

121 ià(
gDvm
.
şassJavaLªgThrowabË
 =ğ
NULL
 ||

122 
gDvm
.
şassJavaLªgSckT¿ûEËm’t
 =ğ
NULL
 ||

123 
gDvm
.
şassJavaLªgSckT¿ûEËm’tA¼ay
 =ğ
NULL
)

125 
	`LOGE
("Could‚ot find one or moreƒssentialƒxception classes\n");

126  
çl£
;

135 
M‘hod
* 
m‘h
;

136 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
,

138 ià(
m‘h
 =ğ
NULL
) {

139 
	`LOGE
("Unableo find constructor for StackTraceElement\n");

140  
çl£
;

142 
gDvm
.
m‘hJavaLªgSckT¿ûEËm’t_š™
 = 
m‘h
;

145 
gDvm
.
offJavaLªgThrowabË_¡ackS‹
 =

146 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgThrowabË
,

148 ià(
gDvm
.
offJavaLªgThrowabË_¡ackS‹
 < 0) {

149 
	`LOGE
("Unableo find Throwable.stackState\n");

150  
çl£
;

154 
gDvm
.
offJavaLªgThrowabË_mes§ge
 =

155 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgThrowabË
,

157 ià(
gDvm
.
offJavaLªgThrowabË_mes§ge
 < 0) {

158 
	`LOGE
("Unableo find Throwable.detailMessage\n");

159  
çl£
;

163 
gDvm
.
offJavaLªgThrowabË_ÿu£
 =

164 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgThrowabË
,

166 ià(
gDvm
.
offJavaLªgThrowabË_ÿu£
 < 0) {

167 
	`LOGE
("Unableo find Throwable.cause\n");

168  
çl£
;

171  
Œue
;

172 
	}
}

177 
	$dvmExû±iÚShutdown
()

180 
	}
}

203 
	$dvmThrowChašedExû±iÚ
(cÚ¡ * 
exû±iÚDesütÜ
, cÚ¡ * 
msg
,

204 
Objeù
* 
ÿu£
)

206 
CÏssObjeù
* 
exûpCÏss
;

208 
	`LOGV
("THROW '%s' msg='%s' cause=%s\n",

209 
exû±iÚDesütÜ
, 
msg
,

210 (
ÿu£
 !ğ
NULL
è? cau£->
şazz
->
desütÜ
 : "(none)");

212 ià(
gDvm
.
š™Ÿlizšg
) {

213 ià(++
gDvm
.
š™Exû±iÚCouÁ
 >= 2) {

214 
	`LOGE
("Too manyƒxceptions during init (failed on '%s' '%s')\n",

215 
exû±iÚDesütÜ
, 
msg
);

216 
	`dvmAbÜt
();

220 
exûpCÏss
 = 
	`dvmFšdSy¡emCÏss
(
exû±iÚDesütÜ
);

221 ià(
exûpCÏss
 =ğ
NULL
) {

234 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

235 
	`LOGE
("FATAL: unableohrowƒxception (failed on '%s' '%s')\n",

236 
exû±iÚDesütÜ
, 
msg
);

237 
	`dvmAbÜt
();

242 
	`dvmThrowChašedExû±iÚByCÏss
(
exûpCÏss
, 
msg
, 
ÿu£
);

243 
	}
}

248 
	$dvmThrowChašedExû±iÚByCÏss
(
CÏssObjeù
* 
exûpCÏss
, cÚ¡ * 
msg
,

249 
Objeù
* 
ÿu£
)

251 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

252 
Objeù
* 
exû±iÚ
;

255 ià(!
	`dvmIsCÏssIn™Ÿlized
(
exûpCÏss
è&& !
	`dvmIn™CÏss
(excepClass)) {

256 
	`LOGE
("ERROR: unableo initializeƒxception class '%s'\n",

257 
exûpCÏss
->
desütÜ
);

258 ià(
	`¡rcmp
(
exûpCÏss
->
desütÜ
, "Ljava/lang/InternalError;") == 0)

259 
	`dvmAbÜt
();

260 
	`dvmThrowChašedExû±iÚ
("Ljava/lang/InternalError;",

261 "çedØš™ origš®ƒxû±iÚ cÏss", 
ÿu£
);

265 
exû±iÚ
 = 
	`dvmAÎocObjeù
(
exûpCÏss
, 
ALLOC_DEFAULT
);

266 ià(
exû±iÚ
 =ğ
NULL
) {

275 ià(
	`dvmCheckExû±iÚ
(
£lf
))

276 
ba
;

277 
	`LOGE
("FATAL: unableo‡llocateƒxception '%s' '%s'\n",

278 
exûpCÏss
->
desütÜ
, 
msg
 !ğ
NULL
 ? msg : "(no msg)");

279 
	`dvmAbÜt
();

285 ià(
gDvm
.
İtimizšg
) {

287 
	`LOGV
("Skipping init ofƒxception %s '%s'\n",

288 
exûpCÏss
->
desütÜ
, 
msg
);

290 
	`as£¹
(
exûpCÏss
 =ğ
exû±iÚ
->
şazz
);

291 ià(!
	`š™Exû±iÚ
(
exû±iÚ
, 
msg
, 
ÿu£
, 
£lf
)) {

297 ià(!
	`dvmCheckExû±iÚ
(
£lf
)) {

302 
£lf
->
exû±iÚ
 = 
gDvm
.
š‹º®E¼ÜObj
;

304 
ba
;

308 
£lf
->
exû±iÚ
 =ƒxception;

310 
ba
:

311 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

312 
	}
}

318 
	$dvmThrowChašedExû±iÚW™hCÏssMes§ge
(cÚ¡ * 
exû±iÚDesütÜ
,

319 cÚ¡ * 
mes§geDesütÜ
, 
Objeù
* 
ÿu£
)

321 * 
mes§ge
 = 
	`dvmDesütÜToDÙ
(
mes§geDesütÜ
);

323 
	`dvmThrowChašedExû±iÚ
(
exû±iÚDesütÜ
, 
mes§ge
, 
ÿu£
);

324 
	`ä“
(
mes§ge
);

325 
	}
}

331 
	$dvmThrowExû±iÚByCÏssW™hCÏssMes§ge
(
CÏssObjeù
* 
exû±iÚCÏss
,

332 cÚ¡ * 
mes§geDesütÜ
)

334 * 
mes§ge
 = 
	`dvmDesütÜToName
(
mes§geDesütÜ
);

336 
	`dvmThrowExû±iÚByCÏss
(
exû±iÚCÏss
, 
mes§ge
);

337 
	`ä“
(
mes§ge
);

338 
	}
}

344 
M‘hod
* 
	$fšdExû±iÚIn™M‘hod
(
CÏssObjeù
* 
exûpCÏss
,

345 
boŞ
 
hasMes§ge
, boŞ 
hasCau£
)

347 ià(
hasMes§ge
) {

348 
M‘hod
* 
»suÉ
;

350 ià(
hasCau£
) {

351 
»suÉ
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(

352 
exûpCÏss
, "<init>",

355 
»suÉ
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(

356 
exûpCÏss
, "<init>", "(Ljava/lang/String;)V");

359 ià(
»suÉ
 !ğ
NULL
) {

360  
»suÉ
;

363 ià(
hasCau£
) {

364  
	`dvmFšdDœeùM‘hodByDesütÜ
(

365 
exûpCÏss
, "<init>",

368  
	`dvmFšdDœeùM‘hodByDesütÜ
(

369 
exûpCÏss
, "<init>", "(Ljava/lang/Object;)V");

371 } ià(
hasCau£
) {

372  
	`dvmFšdDœeùM‘hodByDesütÜ
(

373 
exûpCÏss
, "<init>", "(Ljava/lang/Throwable;)V");

375  
	`dvmFšdDœeùM‘hodByDesütÜ
(
exûpCÏss
, "<init>", "()V");

377 
	}
}

390 
boŞ
 
	$š™Exû±iÚ
(
Objeù
* 
exû±iÚ
, cÚ¡ * 
msg
, Objeù* 
ÿu£
,

391 
Th»ad
* 
£lf
)

394 
kIn™Unknown
,

395 
kIn™Nßrg
,

396 
kIn™Msg
,

397 
kIn™MsgThrow
,

398 
kIn™Throw


399 } 
š™Kšd
 = 
kIn™Unknown
;

400 
M‘hod
* 
š™M‘hod
 = 
NULL
;

401 
CÏssObjeù
* 
exûpCÏss
 = 
exû±iÚ
->
şazz
;

402 
SŒšgObjeù
* 
msgSŒ
 = 
NULL
;

403 
boŞ
 
»suÉ
 = 
çl£
;

404 
boŞ
 
ÃedIn™Cau£
 = 
çl£
;

406 
	`as£¹
(
£lf
 !ğ
NULL
);

407 
	`as£¹
(
£lf
->
exû±iÚ
 =ğ
NULL
);

410 ià(
msg
 =ğ
NULL
)

411 
msgSŒ
 = 
NULL
;

413 
msgSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
msg
, 
ALLOC_DEFAULT
);

414 ià(
msgSŒ
 =ğ
NULL
) {

415 
	`LOGW
("Could‚ot‡llocate message string \"%s\" while "

417 
msg
, 
exûpCÏss
->
desütÜ
);

418 
ba
;

422 ià(
ÿu£
 !ğ
NULL
) {

423 ià(!
	`dvmIn¡ªûof
(
ÿu£
->
şazz
, 
gDvm
.
şassJavaLªgThrowabË
)) {

424 
	`LOGE
("Triedo initƒxception with cause '%s'\n",

425 
ÿu£
->
şazz
->
desütÜ
);

426 
	`dvmAbÜt
();

467 ià(
ÿu£
 =ğ
NULL
) {

468 ià(
msgSŒ
 =ğ
NULL
) {

469 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
çl£
, false);

470 
š™Kšd
 = 
kIn™Nßrg
;

472 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
, 
çl£
);

473 ià(
š™M‘hod
 !ğ
NULL
) {

474 
š™Kšd
 = 
kIn™Msg
;

477 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
,rue);

478 ià(
š™M‘hod
 !ğ
NULL
) {

479 
š™Kšd
 = 
kIn™MsgThrow
;

484 ià(
msgSŒ
 =ğ
NULL
) {

485 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
çl£
, 
Œue
);

486 ià(
š™M‘hod
 !ğ
NULL
) {

487 
š™Kšd
 = 
kIn™Throw
;

489 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
çl£
, false);

490 
š™Kšd
 = 
kIn™Nßrg
;

491 
ÃedIn™Cau£
 = 
Œue
;

494 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
,rue);

495 ià(
š™M‘hod
 !ğ
NULL
) {

496 
š™Kšd
 = 
kIn™MsgThrow
;

498 
š™M‘hod
 = 
	`fšdExû±iÚIn™M‘hod
(
exûpCÏss
, 
Œue
, 
çl£
);

499 
š™Kšd
 = 
kIn™Msg
;

500 
ÃedIn™Cau£
 = 
Œue
;

505 ià(
š™M‘hod
 =ğ
NULL
) {

512 
	`LOGW
("WARNING:ƒxception class '%s' missing constructor "

514 
exûpCÏss
->
desütÜ
, 
msg
, 
š™Kšd
);

515 
	`as£¹
(
	`¡rcmp
(
exûpCÏss
->
desütÜ
,

517 
	`dvmThrowChašedExû±iÚ
("Ljava/lang/RuntimeException;",

518 "»-throw oÀexû±iÚ cÏs missšg cÚ¡ruùÜ", 
NULL
);

519 
ba
;

525 
JV®ue
 
unu£d
;

526 
š™Kšd
) {

527 
kIn™Nßrg
:

528 
	`LOGVV
("+++ƒxønßrg (ic=%d)\n", 
ÃedIn™Cau£
);

529 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
);

531 
kIn™Msg
:

532 
	`LOGVV
("+++ƒxømsg (ic=%d)\n", 
ÃedIn™Cau£
);

533 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
, 
msgSŒ
);

535 
kIn™Throw
:

536 
	`LOGVV
("+++ƒxchrow");

537 
	`as£¹
(!
ÃedIn™Cau£
);

538 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
, 
ÿu£
);

540 
kIn™MsgThrow
:

541 
	`LOGVV
("+++ƒxc msg+throw");

542 
	`as£¹
(!
ÃedIn™Cau£
);

543 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
exû±iÚ
, &
unu£d
, 
msgSŒ
, 
ÿu£
);

546 
	`as£¹
(
çl£
);

547 
ba
;

554 ià(
£lf
->
exû±iÚ
 !ğ
NULL
) {

555 
	`LOGW
("Exceptionhrown (%s) whilehrowing internalƒxception (%s)\n",

556 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
,ƒxception->clazz->descriptor);

557 
ba
;

565 ià(
ÃedIn™Cau£
) {

566 
M‘hod
* 
š™Cau£
;

567 
š™Cau£
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
exûpCÏss
, "initCause",

569 ià(
š™Cau£
 !ğ
NULL
) {

570 
	`dvmC®lM‘hod
(
£lf
, 
š™Cau£
, 
exû±iÚ
, &
unu£d
, 
ÿu£
);

571 ià(
£lf
->
exû±iÚ
 !ğ
NULL
) {

575 
	`LOGW
("Exceptionhrown (%s) during initCause() "

577 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
,

578 
exû±iÚ
->
şazz
->
desütÜ
);

579 
ba
;

582 
	`LOGW
("WARNING: couldn't find initCause in '%s'\n",

583 
exûpCÏss
->
desütÜ
);

588 
»suÉ
 = 
Œue
;

590 
ba
:

591 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
msgSŒ
, 
£lf
);

592  
»suÉ
;

593 
	}
}

606 
	$dvmCË¬O±Exû±iÚ
(
Th»ad
* 
£lf
)

608 
£lf
->
exû±iÚ
 = 
NULL
;

609 
gDvm
.
š™Exû±iÚCouÁ
 = 0;

610 
	}
}

616 
boŞ
 
	$dvmIsCheckedExû±iÚ
(cÚ¡ 
Objeù
* 
exû±iÚ
)

618 ià(
	`dvmIn¡ªûof
(
exû±iÚ
->
şazz
, 
gDvm
.
şassJavaLªgE¼Ü
) ||

619 
	`dvmIn¡ªûof
(
exû±iÚ
->
şazz
, 
gDvm
.
şassJavaLªgRuÁimeExû±iÚ
))

621  
çl£
;

623  
Œue
;

625 
	}
}

635 
	$dvmW¿pExû±iÚ
(cÚ¡ * 
ÃwExûpSŒ
)

637 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

638 
Objeù
* 
ÜigExûp
;

639 
CÏssObjeù
* 
™eCÏss
;

641 
ÜigExûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

642 
	`dvmAddT¿ckedAÎoc
(
ÜigExûp
, 
£lf
);

644 
	`dvmCË¬Exû±iÚ
(
£lf
);

645 
™eCÏss
 = 
	`dvmFšdSy¡emCÏss
(
ÃwExûpSŒ
);

646 ià(
™eCÏss
 !ğ
NULL
) {

647 
Objeù
* 
™eExûp
;

648 
M‘hod
* 
š™M‘hod
;

650 
™eExûp
 = 
	`dvmAÎocObjeù
(
™eCÏss
, 
ALLOC_DEFAULT
);

651 ià(
™eExûp
 !ğ
NULL
) {

652 
š™M‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
™eCÏss
, "<init>",

654 ià(
š™M‘hod
 !ğ
NULL
) {

655 
JV®ue
 
unu£d
;

656 
	`dvmC®lM‘hod
(
£lf
, 
š™M‘hod
, 
™eExûp
, &
unu£d
,

657 
ÜigExûp
);

660 ià(!
	`dvmCheckExû±iÚ
(
£lf
))

661 
	`dvmS‘Exû±iÚ
(
£lf
, 
™eExûp
);

663 
	`dvmR–—£T¿ckedAÎoc
(
™eExûp
, 
NULL
);

666 ià(!
	`dvmCheckExû±iÚ
(
£lf
))

667 
	`dvmS‘Exû±iÚ
(
£lf
, 
ÜigExûp
);

675 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

676 
	`dvmR–—£T¿ckedAÎoc
(
ÜigExûp
, 
£lf
);

677 
	}
}

686 
Objeù
* 
	$dvmG‘Exû±iÚCau£
(cÚ¡ 
Objeù
* 
exû±iÚ
)

688 ià(!
	`dvmIn¡ªûof
(
exû±iÚ
->
şazz
, 
gDvm
.
şassJavaLªgThrowabË
)) {

689 
	`LOGE
("Triedo get cause from object ofype '%s'\n",

690 
exû±iÚ
->
şazz
->
desütÜ
);

691 
	`dvmAbÜt
();

693 
Objeù
* 
ÿu£
 =

694 
	`dvmG‘F›ldObjeù
(
exû±iÚ
, 
gDvm
.
offJavaLªgThrowabË_ÿu£
);

695 ià(
ÿu£
 =ğ
exû±iÚ
)

696  
NULL
;

698  
ÿu£
;

699 
	}
}

711 
	$dvmPrštExû±iÚSckT¿û
()

713 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

714 
Objeù
* 
exû±iÚ
;

715 
M‘hod
* 
´štM‘hod
;

717 
exû±iÚ
 = 
£lf
->exception;

718 ià(
exû±iÚ
 =ğ
NULL
)

721 
£lf
->
exû±iÚ
 = 
NULL
;

722 
´štM‘hod
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
exû±iÚ
->
şazz
,

724 ià(
´štM‘hod
 !ğ
NULL
) {

725 
JV®ue
 
unu£d
;

726 
	`dvmC®lM‘hod
(
£lf
, 
´štM‘hod
, 
exû±iÚ
, &
unu£d
);

728 
	`LOGW
("WARNING: could‚ot find…rintStackTrace in %s\n",

729 
exû±iÚ
->
şazz
->
desütÜ
);

732 ià(
£lf
->
exû±iÚ
 !ğ
NULL
) {

733 
	`LOGI
("NOTE:ƒxceptionhrown while…rinting stackrace: %s\n",

734 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
);

737 
£lf
->
exû±iÚ
 =ƒxception;

738 
	}
}

745 
	$fšdC©chInM‘hod
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
»lPc
,

746 
CÏssObjeù
* 
exûpCÏss
)

752 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
£lf
));

753 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

755 
	`LOGVV
("findCatchInMethod %s.%sƒxcep=%s depth=%d\n",

756 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
exûpCÏss
->descriptor,

757 
	`dvmCompu‹ExaùF¿meD•th
(
£lf
->
curF¿me
));

759 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

760 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

761 
DexC©chI‹¿tÜ
 
™”©Ü
;

763 ià(
	`dexFšdC©chHªdËr
(&
™”©Ü
, 
pCode
, 
»lPc
)) {

765 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

767 ià(
hªdËr
 =ğ
NULL
) {

771 ià(
hªdËr
->
ty³Idx
 =ğ
kDexNoIndex
) {

773 
	`LOGV
("Match on catch-all block‡t 0x%02x in %s.%s for %s\n",

774 
»lPc
, 
m‘hod
->
şazz
->
desütÜ
,

775 
m‘hod
->
Çme
, 
exûpCÏss
->
desütÜ
);

776  
hªdËr
->
add»ss
;

779 
CÏssObjeù
* 
throwabË
 =

780 
	`dvmDexG‘ResŞvedCÏss
(
pDvmDex
, 
hªdËr
->
ty³Idx
);

781 ià(
throwabË
 =ğ
NULL
) {

809 
throwabË
 = 
	`dvmResŞveCÏss
(
m‘hod
->
şazz
, 
hªdËr
->
ty³Idx
,

810 
Œue
);

811 ià(
throwabË
 =ğ
NULL
) {

819 
	`LOGW
("Could‚ot„esolve class„ef'ed inƒxception "

821 
hªdËr
->
ty³Idx
,

822 (
£lf
->
exû±iÚ
 !ğ
NULL
) ?

823 
£lf
->
exû±iÚ
->
şazz
->
desütÜ
 : "(none)");

824 
	`dvmCË¬Exû±iÚ
(
£lf
);

832 ià(
	`dvmIn¡ªûof
(
exûpCÏss
, 
throwabË
)) {

833 
	`LOGV
("Match on catch block‡t 0x%02x in %s.%s for %s\n",

834 
»lPc
, 
m‘hod
->
şazz
->
desütÜ
,

835 
m‘hod
->
Çme
, 
exûpCÏss
->
desütÜ
);

836  
hªdËr
->
add»ss
;

841 
	`LOGV
("No matching catch block‡t 0x%02x in %s for %s\n",

842 
»lPc
, 
m‘hod
->
Çme
, 
exûpCÏss
->
desütÜ
);

844 
	}
}

860 
	$dvmFšdC©chBlock
(
Th»ad
* 
£lf
, 
»lPc
, 
Objeù
* 
exû±iÚ
,

861 
boŞ
 
sÿnOÆy
, ** 
ÃwF¿me
)

863 * 
å
 = 
£lf
->
curF¿me
;

864 
ÿtchAddr
 = -1;

866 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
£lf
));

868 
Œue
) {

869 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

870 
ÿtchAddr
 = 
	`fšdC©chInM‘hod
(
£lf
, 
§veA»a
->
m‘hod
, 
»lPc
,

871 
exû±iÚ
->
şazz
);

872 ià(
ÿtchAddr
 >= 0)

882 ià(!
sÿnOÆy
) {

883 
	`TRACE_METHOD_UNROLL
(
£lf
, 
§veA»a
->
m‘hod
);

892 
	`as£¹
(
§veA»a
->
´evF¿me
 !ğ
NULL
);

893 ià(
	`dvmIsB»akF¿me
(
§veA»a
->
´evF¿me
)) {

894 ià(!
sÿnOÆy
)

906 
å
 = 
§veA»a
->
´evF¿me
;

907 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

908 
å
 = 
§veA»a
->
´evF¿me
;

909 
å
 !ğ
NULL
) {

910 ià(!
	`dvmIsB»akF¿me
(
å
)) {

911 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

912 ià(!
	`dvmIsN©iveM‘hod
(
§veA»a
->
m‘hod
))

916 
å
 = 
	`SAVEAREA_FROM_FP
(å)->
´evF¿me
;

918 ià(
å
 =ğ
NULL
)

926 
»lPc
 =

927 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
->
š¢s
;

929 
å
 = 
§veA»a
->
´evF¿me
;

932 
»lPc
 = 
§veA»a
->
§vedPc
 - 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
->
š¢s
;

936 ià(!
sÿnOÆy
)

937 
£lf
->
curF¿me
 = 
å
;

943 
£lf
->
exû±iÚ
 = 
NULL
;

945 *
ÃwF¿me
 = 
å
;

946  
ÿtchAddr
;

947 
	}
}

968 * 
	$dvmFlInSckT¿ûIÁ”Çl
(
Th»ad
* 
th»ad
, 
boŞ
 
wªtObjeù
, * 
pCouÁ
)

970 
A¼ayObjeù
* 
¡ackD©a
 = 
NULL
;

971 * 
sim¶eD©a
 = 
NULL
;

972 * 
å
;

973 * 
¡¬tFp
;

974 
¡ackD•th
;

975 * 
štPŒ
;

977 ià(
pCouÁ
 !ğ
NULL
)

978 *
pCouÁ
 = 0;

979 
å
 = 
th»ad
->
curF¿me
;

981 
	`as£¹
(
th»ad
 =ğ
	`dvmTh»adS–f
(è|| 
	`dvmIsSu¥’ded
(thread));

993 
å
 !ğ
NULL
) {

994 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

995 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

997 ià(
	`dvmIsB»akF¿me
(
å
))

999 ià(!
	`dvmIn¡ªûof
(
m‘hod
->
şazz
, 
gDvm
.
şassJavaLªgThrowabË
))

1003 
å
 = 
§veA»a
->
´evF¿me
;

1005 
¡¬tFp
 = 
å
;

1010 
¡ackD•th
 = 0;

1011 
å
 !ğ
NULL
) {

1012 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1014 ià(!
	`dvmIsB»akF¿me
(
å
))

1015 
¡ackD•th
++;

1017 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

1018 
å
 = 
§veA»a
->
´evF¿me
;

1022 ià(!
¡ackD•th
)

1023 
ba
;

1029 ià(
wªtObjeù
) {

1030 
	`as£¹
((
M‘hod
*) == 4);

1031 
¡ackD©a
 = 
	`dvmAÎocPrim™iveA¼ay
('I', 
¡ackD•th
*2, 
ALLOC_DEFAULT
);

1032 ià(
¡ackD©a
 =ğ
NULL
) {

1033 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1034 
ba
;

1036 
štPŒ
 = (*è
¡ackD©a
->
cÚ‹Ás
;

1039 
	`as£¹
((
M‘hod
*) == ());

1040 
sim¶eD©a
 = (*è
	`m®loc
((è* 
¡ackD•th
*2);

1041 ià(
sim¶eD©a
 =ğ
NULL
)

1042 
ba
;

1044 
	`as£¹
(
pCouÁ
 !ğ
NULL
);

1045 
štPŒ
 = 
sim¶eD©a
;

1047 ià(
pCouÁ
 !ğ
NULL
)

1048 *
pCouÁ
 = 
¡ackD•th
;

1050 
å
 = 
¡¬tFp
;

1051 
å
 !ğ
NULL
) {

1052 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1053 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

1055 ià(!
	`dvmIsB»akF¿me
(
å
)) {

1059 *
štPŒ
++ = (è
m‘hod
;

1060 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

1061 *
štPŒ
++ = 0;

1063 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 >ğ
m‘hod
->
š¢s
 &&

1064 
§veA»a
->
xŒa
.
cu¼’tPc
 <

1065 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

1066 *
štPŒ
++ = (è(
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
);

1069 
¡ackD•th
--;

1072 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

1073 
å
 = 
§veA»a
->
´evF¿me
;

1075 
	`as£¹
(
¡ackD•th
 == 0);

1077 
ba
:

1078 ià(
wªtObjeù
) {

1079 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡ackD©a
, 
	`dvmTh»adS–f
());

1080  
¡ackD©a
;

1082  
sim¶eD©a
;

1084 
	}
}

1094 
A¼ayObjeù
* 
	$dvmG‘SckT¿û
(cÚ¡ 
Objeù
* 
o¡ackD©a
)

1096 cÚ¡ 
A¼ayObjeù
* 
¡ackD©a
 = (cÚ¡ A¼ayObjeù*è
o¡ackD©a
;

1097 cÚ¡ * 
štV®s
;

1098 
i
, 
¡ackSize
;

1100 
¡ackSize
 = 
¡ackD©a
->
Ëngth
 / 2;

1101 
štV®s
 = (cÚ¡ *è
¡ackD©a
->
cÚ‹Ás
;

1102  
	`dvmG‘SckT¿ûRaw
(
štV®s
, 
¡ackSize
);

1103 
	}
}

1113 
A¼ayObjeù
* 
	$dvmG‘SckT¿ûRaw
(cÚ¡ * 
štV®s
, 
¡ackD•th
)

1115 
A¼ayObjeù
* 
¡eA¼ay
 = 
NULL
;

1116 
Objeù
** 
¡ePŒ
;

1117 
i
;

1120 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
))

1121 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
);

1124 
¡eA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgSckT¿ûEËm’tA¼ay
,

1125 
¡ackD•th
, 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

1126 ià(
¡eA¼ay
 =ğ
NULL
)

1127 
ba
;

1128 
¡ePŒ
 = (
Objeù
**è
¡eA¼ay
->
cÚ‹Ás
;

1134 
i
 = 0; i < 
¡ackD•th
; i++) {

1135 
Objeù
* 
¡e
;

1136 
M‘hod
* 
m‘h
;

1137 
SŒšgObjeù
* 
şassName
;

1138 
SŒšgObjeù
* 
m‘hodName
;

1139 
SŒšgObjeù
* 
feName
;

1140 
lšeNumb”
, 
pc
;

1141 cÚ¡ * 
sourûFe
;

1142 * 
dÙName
;

1144 
¡e
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgSckT¿ûEËm’t
,
ALLOC_DEFAULT
);

1145 ià(
¡e
 =ğ
NULL
)

1146 
ba
;

1148 
m‘h
 = (
M‘hod
*è*
štV®s
++;

1149 
pc
 = *
štV®s
++;

1151 ià(
pc
 == -1)

1152 
lšeNumb”
 = 0;

1154 
lšeNumb”
 = 
	`dvmLšeNumFromPC
(
m‘h
, 
pc
);

1156 
dÙName
 = 
	`dvmDesütÜToDÙ
(
m‘h
->
şazz
->
desütÜ
);

1157 
şassName
 = 
	`dvmC»©eSŒšgFromC¡r
(
dÙName
, 
ALLOC_DEFAULT
);

1158 
	`ä“
(
dÙName
);

1160 
m‘hodName
 = 
	`dvmC»©eSŒšgFromC¡r
(
m‘h
->
Çme
, 
ALLOC_DEFAULT
);

1161 
sourûFe
 = 
	`dvmG‘M‘hodSourûFe
(
m‘h
);

1162 ià(
sourûFe
 !ğ
NULL
)

1163 
feName
 = 
	`dvmC»©eSŒšgFromC¡r
(
sourûFe
, 
ALLOC_DEFAULT
);

1165 
feName
 = 
NULL
;

1173 
JV®ue
 
unu£d
;

1174 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgSckT¿ûEËm’t_š™
,

1175 
¡e
, &
unu£d
, 
şassName
, 
m‘hodName
, 
feName
, 
lšeNumb”
);

1177 
	`dvmR–—£T¿ckedAÎoc
(
¡e
, 
NULL
);

1178 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şassName
, 
NULL
);

1179 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
m‘hodName
, 
NULL
);

1180 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
feName
, 
NULL
);

1182 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()))

1183 
ba
;

1185 *
¡ePŒ
++ = 
¡e
;

1188 
ba
:

1189 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡eA¼ay
, 
NULL
);

1190  
¡eA¼ay
;

1191 
	}
}

1196 
	$dvmLogRawSckT¿û
(cÚ¡ * 
štV®s
, 
¡ackD•th
)

1198 
i
;

1203 
i
 = 0; i < 
¡ackD•th
; i++) {

1204 
M‘hod
* 
m‘h
;

1205 
lšeNumb”
, 
pc
;

1206 cÚ¡ * 
sourûFe
;

1207 * 
dÙName
;

1209 
m‘h
 = (
M‘hod
*è*
štV®s
++;

1210 
pc
 = *
štV®s
++;

1212 ià(
pc
 == -1)

1213 
lšeNumb”
 = 0;

1215 
lšeNumb”
 = 
	`dvmLšeNumFromPC
(
m‘h
, 
pc
);

1218 
dÙName
 = 
	`dvmDesütÜToDÙ
(
m‘h
->
şazz
->
desütÜ
);

1220 ià(
	`dvmIsN©iveM‘hod
(
m‘h
)) {

1221 
	`LOGI
("\ˆ%s.%s(N©ivM‘hod)\n", 
dÙName
, 
m‘h
->
Çme
);

1223 
	`LOGI
("\tat %s.%s(%s:%d)\n",

1224 
dÙName
, 
m‘h
->
Çme
, 
	`dvmG‘M‘hodSourûFe
(meth),

1225 
	`dvmLšeNumFromPC
(
m‘h
, 
pc
));

1228 
	`ä“
(
dÙName
);

1230 
sourûFe
 = 
	`dvmG‘M‘hodSourûFe
(
m‘h
);

1232 
	}
}

1237 
	$logSckT¿ûOf
(
Objeù
* 
exû±iÚ
)

1239 cÚ¡ 
A¼ayObjeù
* 
¡ackD©a
;

1240 
SŒšgObjeù
* 
mes§geSŒ
;

1241 
¡ackSize
;

1242 cÚ¡ * 
štV®s
;

1244 
mes§geSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
exû±iÚ
,

1245 
gDvm
.
offJavaLªgThrowabË_mes§ge
);

1246 ià(
mes§geSŒ
 !ğ
NULL
) {

1247 * 
ı
 = 
	`dvmC»©eC¡rFromSŒšg
(
mes§geSŒ
);

1248 
	`LOGI
("%s: %s\n", 
exû±iÚ
->
şazz
->
desütÜ
, 
ı
);

1249 
	`ä“
(
ı
);

1251 
	`LOGI
("%s:\n", 
exû±iÚ
->
şazz
->
desütÜ
);

1254 
¡ackD©a
 = (cÚ¡ 
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
exû±iÚ
,

1255 
gDvm
.
offJavaLªgThrowabË_¡ackS‹
);

1256 ià(
¡ackD©a
 =ğ
NULL
) {

1257 
	`LOGI
(" (no stackrace data found)\n");

1261 
¡ackSize
 = 
¡ackD©a
->
Ëngth
 / 2;

1262 
štV®s
 = (cÚ¡ *è
¡ackD©a
->
cÚ‹Ás
;

1264 
	`dvmLogRawSckT¿û
(
štV®s
, 
¡ackSize
);

1265 
	}
}

1273 
	$dvmLogExû±iÚSckT¿û
()

1275 
Objeù
* 
exû±iÚ
 = 
	`dvmTh»adS–f
()->exception;

1276 
Objeù
* 
ÿu£
;

1278 ià(
exû±iÚ
 =ğ
NULL
) {

1279 
	`LOGW
("triedo†og‡‚ullƒxception?\n");

1284 
	`logSckT¿ûOf
(
exû±iÚ
);

1285 
ÿu£
 = 
	`dvmG‘Exû±iÚCau£
(
exû±iÚ
);

1286 ià(
ÿu£
 =ğ
NULL
) {

1289 
	`LOGI
("Caused by:\n");

1290 
exû±iÚ
 = 
ÿu£
;

1292 
	}
}

	@Exception.h

19 #iâdeà
_DALVIK_EXCEPTION


20 
	#_DALVIK_EXCEPTION


	)

23 
boŞ
 
dvmExû±iÚS¹up
();

24 
dvmExû±iÚShutdown
();

29 
dvmThrowChašedExû±iÚ
(cÚ¡ * 
exû±iÚDesütÜ
, cÚ¡ * 
msg
,

30 
Objeù
* 
ÿu£
);

31 
INLINE
 
	$dvmThrowExû±iÚ
(cÚ¡ * 
exû±iÚDesütÜ
,

32 cÚ¡ * 
msg
)

34 
	`dvmThrowChašedExû±iÚ
(
exû±iÚDesütÜ
, 
msg
, 
NULL
);

35 
	}
}

40 
dvmThrowChašedExû±iÚByCÏss
(
CÏssObjeù
* 
exû±iÚCÏss
,

41 cÚ¡ * 
msg
, 
Objeù
* 
ÿu£
);

42 
INLINE
 
	$dvmThrowExû±iÚByCÏss
(
CÏssObjeù
* 
exû±iÚCÏss
,

43 cÚ¡ * 
msg
)

45 
	`dvmThrowChašedExû±iÚByCÏss
(
exû±iÚCÏss
, 
msg
, 
NULL
);

46 
	}
}

52 
dvmThrowChašedExû±iÚW™hCÏssMes§ge
(cÚ¡ * 
exû±iÚDesütÜ
,

53 cÚ¡ * 
mes§geDesütÜ
, 
Objeù
* 
ÿu£
);

54 
INLINE
 
	$dvmThrowExû±iÚW™hCÏssMes§ge
(cÚ¡ * 
exû±iÚDesütÜ
,

55 cÚ¡ * 
mes§geDesütÜ
)

57 
	`dvmThrowChašedExû±iÚW™hCÏssMes§ge
(
exû±iÚDesütÜ
,

58 
mes§geDesütÜ
, 
NULL
);

59 
	}
}

65 
dvmThrowExû±iÚByCÏssW™hCÏssMes§ge
(
CÏssObjeù
* 
exû±iÚCÏss
,

66 cÚ¡ * 
mes§geDesütÜ
);

72 
INLINE
 
Objeù
* 
	$dvmG‘Exû±iÚ
(
Th»ad
* 
£lf
) {

73  
£lf
->
exû±iÚ
;

74 
	}
}

79 
INLINE
 
	$dvmS‘Exû±iÚ
(
Th»ad
* 
£lf
, 
Objeù
* 
exû±iÚ
)

81 
	`as£¹
(
exû±iÚ
 !ğ
NULL
);

82 
£lf
->
exû±iÚ
 =ƒxception;

83 
	}
}

92 
INLINE
 
	$dvmCË¬Exû±iÚ
(
Th»ad
* 
£lf
) {

93 
£lf
->
exû±iÚ
 = 
NULL
;

94 
	}
}

101 
dvmCË¬O±Exû±iÚ
(
Th»ad
* 
£lf
);

107 
INLINE
 
boŞ
 
	$dvmCheckExû±iÚ
(
Th»ad
* 
£lf
) {

108  (
£lf
->
exû±iÚ
 !ğ
NULL
);

109 
	}
}

115 
boŞ
 
dvmIsCheckedExû±iÚ
(cÚ¡ 
Objeù
* 
exû±iÚ
);

123 
dvmW¿pExû±iÚ
(cÚ¡ * 
ÃwExûpSŒ
);

130 
Objeù
* 
dvmG‘Exû±iÚCau£
(cÚ¡ Objeù* 
exû±iÚ
);

136 
dvmPrštExû±iÚSckT¿û
();

142 
dvmLogExû±iÚSckT¿û
();

155 
dvmFšdC©chBlock
(
Th»ad
* 
£lf
, 
»lPc
, 
Objeù
* 
exû±iÚ
,

156 
boŞ
 
doUÄŞl
, ** 
ÃwF¿me
);

166 * 
dvmFlInSckT¿ûIÁ”Çl
(
Th»ad
* 
th»ad
, 
boŞ
 
wªtObjeù
, * 
pCouÁ
);

168 
INLINE
 
Objeù
* 
	$dvmFlInSckT¿û
(
Th»ad
* 
th»ad
) {

169  (
Objeù
*è
	`dvmFlInSckT¿ûIÁ”Çl
(
th»ad
, 
Œue
, 
NULL
);

170 
	}
}

171 
A¼ayObjeù
* 
dvmG‘SckT¿û
(cÚ¡ 
Objeù
* 
¡ackS‹
);

173 
INLINE
 * 
	$dvmFlInSckT¿ûRaw
(
Th»ad
* 
th»ad
, * 
pCouÁ
) {

174  (*è
	`dvmFlInSckT¿ûIÁ”Çl
(
th»ad
, 
çl£
, 
pCouÁ
);

175 
	}
}

176 
A¼ayObjeù
* 
dvmG‘SckT¿ûRaw
(cÚ¡ * 
štV®s
, 
¡ackD•th
);

181 
dvmLogRawSckT¿û
(cÚ¡ * 
štV®s
, 
¡ackD•th
);

	@Globals.h

29 #iâdeà
_DALVIK_GLOBALS


30 
	#_DALVIK_GLOBALS


	)

32 
	~<¡d¬g.h
>

33 
	~<±h»ad.h
>

35 
	#MAX_BREAKPOINTS
 20

	)

38 
GcH—p
 
	tGcH—p
;

43 
	sAs£¹iÚCÚŒŞ
 {

44 * 
	mpkgOrCÏss
;

45 
	mpkgOrCÏssL’
;

46 
boŞ
 
	m’abË
;

47 
boŞ
 
	misPackage
;

48 } 
	tAs£¹iÚCÚŒŞ
;

53 
	eExecutiÚMode
 {

54 
	mkExecutiÚModeUnknown
 = 0,

55 
	mkExecutiÚModeIÁ”pPÜbË
,

56 
	mkExecutiÚModeIÁ”pFa¡
,

57 #ià
defšed
(
WITH_JIT
)

58 
	mkExecutiÚModeJ™
,

60 } 
	tExecutiÚMode
;

68 
	sDvmGlob®s
 {

72 * 
	mboÙCÏssP©hSŒ
;

73 * 
	mşassP©hSŒ
;

75 
	mh—pSizeS¹
;

76 
	mh—pSizeMax
;

77 
	m¡ackSize
;

79 
boŞ
 
	mv”bo£Gc
;

80 
boŞ
 
	mv”bo£Jni
;

81 
boŞ
 
	mv”bo£CÏss
;

83 
boŞ
 
	mjdwpAÎowed
;

84 
boŞ
 
	mjdwpCÚfigu»d
;

85 
	mjdwpT¿n¥Üt
;

86 
boŞ
 
	mjdwpS”v”
;

87 * 
	mjdwpHo¡
;

88 
	mjdwpPÜt
;

89 
boŞ
 
	mjdwpSu¥’d
;

91 (*
	mvårštfHook
)(
	mFILE
*, cÚ¡ *, 
	mva_li¡
);

92 (*
	mex™Hook
)();

93 (*
	mabÜtHook
)();

95 
	mjniG»fLim™
;

96 
boŞ
 
	m»duûSigÇls
;

97 
boŞ
 
	mnoQu™HªdËr
;

98 
boŞ
 
	mv”ifyDexChecksum
;

99 * 
	m¡ackT¿ûFe
;

101 
boŞ
 
	mlogStdio
;

103 
DexO±imiz”Mode
 
	mdexO±Mode
;

104 
DexCÏssV”ifyMode
 
	mşassV”ifyMode
;

105 
boŞ
 
	m´eci£Gc
;

106 
boŞ
 
	mg’”©eRegi¡”M­s
;

108 
	mas£¹iÚCŒlCouÁ
;

109 
As£¹iÚCÚŒŞ
* 
	mas£¹iÚCŒl
;

111 
ExecutiÚMode
 
	mexecutiÚMode
;

116 
boŞ
 
	mš™Ÿlizšg
;

117 
	mš™Exû±iÚCouÁ
;

118 
boŞ
 
	mİtimizšg
;

123 
	mnumPrİs
;

124 
	mmaxPrİs
;

125 ** 
	m´İLi¡
;

130 
CÏssP©hEÁry
* 
	mboÙCÏssP©h
;

132 
DvmDex
* 
	mboÙCÏssP©hO±ExŒa
;

133 
boŞ
 
	mİtimizšgBoÙ¡¿pCÏss
;

139 
HashTabË
* 
	mlßdedCÏs£s
;

148 vŞ©
	mşassS”ŸlNumb”
;

155 
In™ŸtšgLßd”Li¡
* 
	mš™ŸtšgLßd”Li¡
;

160 
HashTabË
* 
	mš‹ºedSŒšgs
;

165 
CÏssObjeù
* 
	muÆškedJavaLªgCÏss
;

166 
CÏssObjeù
* 
	mşassJavaLªgCÏss
;

167 
CÏssObjeù
* 
	mşassJavaLªgCÏssA¼ay
;

168 
CÏssObjeù
* 
	mşassJavaLªgE¼Ü
;

169 
CÏssObjeù
* 
	mşassJavaLªgObjeù
;

170 
CÏssObjeù
* 
	mşassJavaLªgObjeùA¼ay
;

171 
CÏssObjeù
* 
	mşassJavaLªgRuÁimeExû±iÚ
;

172 
CÏssObjeù
* 
	mşassJavaLªgSŒšg
;

173 
CÏssObjeù
* 
	mşassJavaLªgTh»ad
;

174 
CÏssObjeù
* 
	mşassJavaLªgVMTh»ad
;

175 
CÏssObjeù
* 
	mşassJavaLªgTh»adGroup
;

176 
CÏssObjeù
* 
	mşassJavaLªgThrowabË
;

177 
CÏssObjeù
* 
	mşassJavaLªgSckT¿ûEËm’t
;

178 
CÏssObjeù
* 
	mşassJavaLªgSckT¿ûEËm’tA¼ay
;

179 
CÏssObjeù
* 
	mşassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
;

180 
CÏssObjeù
* 
	mşassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
;

181 
CÏssObjeù
* 
	mşassJavaLªgReæeùAcûssibËObjeù
;

182 
CÏssObjeù
* 
	mşassJavaLªgReæeùCÚ¡ruùÜ
;

183 
CÏssObjeù
* 
	mşassJavaLªgReæeùCÚ¡ruùÜA¼ay
;

184 
CÏssObjeù
* 
	mşassJavaLªgReæeùF›ld
;

185 
CÏssObjeù
* 
	mşassJavaLªgReæeùF›ldA¼ay
;

186 
CÏssObjeù
* 
	mşassJavaLªgReæeùM‘hod
;

187 
CÏssObjeù
* 
	mşassJavaLªgReæeùM‘hodA¼ay
;

188 
CÏssObjeù
* 
	mşassJavaLªgReæeùProxy
;

189 
CÏssObjeù
* 
	mşassJavaLªgExû±iÚInIn™Ÿliz”E¼Ü
;

190 
CÏssObjeù
* 
	mşassJavaLªgRefReã»nû
;

191 
CÏssObjeù
* 
	mşassJavaNioR—dWr™eDœeùBy‹Bufãr
;

192 
CÏssObjeù
* 
	mşassJavaSecur™yAcûssCÚŒŞËr
;

193 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
;

194 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
;

195 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
;

196 
CÏssObjeù
* 
	mşassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
;

197 
jşass
 
	mjşassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
;

200 
CÏssObjeù
* 
	mşassA¼ayBoŞ—n
;

201 
CÏssObjeù
* 
	mşassA¼ayCh¬
;

202 
CÏssObjeù
* 
	mşassA¼ayFlßt
;

203 
CÏssObjeù
* 
	mşassA¼ayDoubË
;

204 
CÏssObjeù
* 
	mşassA¼ayBy‹
;

205 
CÏssObjeù
* 
	mşassA¼ayShÜt
;

206 
CÏssObjeù
* 
	mşassA¼ayIÁ
;

207 
CÏssObjeù
* 
	mşassA¼ayLÚg
;

210 
	mvoffJavaLªgObjeù_equ®s
;

211 
	mvoffJavaLªgObjeù_hashCode
;

212 
	mvoffJavaLªgObjeù_toSŒšg
;

213 
	mvoffJavaLªgObjeù_fš®ize
;

216 
	moffJavaLªgCÏss_pd
;

219 vŞ©
	mjavaLªgSŒšgR—dy
;

220 
	moffJavaLªgSŒšg_v®ue
;

221 
	moffJavaLªgSŒšg_couÁ
;

222 
	moffJavaLªgSŒšg_off£t
;

223 
	moffJavaLªgSŒšg_hashCode
;

226 
	moffJavaLªgTh»ad_vmTh»ad
;

227 
	moffJavaLªgTh»ad_group
;

228 
	moffJavaLªgTh»ad_d«mÚ
;

229 
	moffJavaLªgTh»ad_Çme
;

230 
	moffJavaLªgTh»ad_´iÜ™y
;

233 
	mvoffJavaLªgTh»ad_run
;

236 
	moffJavaLªgVMTh»ad_th»ad
;

237 
	moffJavaLªgVMTh»ad_vmD©a
;

240 
	mvoffJavaLªgTh»adGroup_»moveTh»ad
;

243 
	moffJavaLªgThrowabË_¡ackS‹
;

244 
	moffJavaLªgThrowabË_mes§ge
;

245 
	moffJavaLªgThrowabË_ÿu£
;

248 
	moffJavaLªgReæeùAcûssibËObjeù_æag
;

249 
	moffJavaLªgReæeùCÚ¡ruùÜ_¦Ù
;

250 
	moffJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
;

251 
	moffJavaLªgReæeùF›ld_¦Ù
;

252 
	moffJavaLªgReæeùF›ld_deşCÏss
;

253 
	moffJavaLªgReæeùM‘hod_¦Ù
;

254 
	moffJavaLªgReæeùM‘hod_deşCÏss
;

257 
	moffJavaLªgRefReã»nû_»ã»Á
;

258 
	moffJavaLªgRefReã»nû_queue
;

259 
	moffJavaLªgRefReã»nû_queueNext
;

260 
	moffJavaLªgRefReã»nû_vmD©a
;

262 #ià
FANCY_REFERENCE_SUBCLASS


264 
	mvoffJavaLªgRefReã»nû_ş—r
;

265 
	mvoffJavaLªgRefReã»nû_’queue
;

268 
M‘hod
* 
	mm‘hJavaLªgRefReã»nû_’queueIÁ”Çl
;

276 vŞ©
boŞ
 
	mjavaSecur™yAcûssCÚŒŞËrR—dy
;

277 
M‘hod
* 
	mm‘hJavaSecur™yAcûssCÚŒŞËr_doPriveged
[4];

280 
M‘hod
* 
	mm‘hJavaLªgSckT¿ûEËm’t_š™
;

281 
M‘hod
* 
	mm‘hJavaLªgExû±iÚInIn™Ÿliz”E¼Ü_š™
;

282 
M‘hod
* 
	mm‘hJavaLªgReæeùCÚ¡ruùÜ_š™
;

283 
M‘hod
* 
	mm‘hJavaLªgReæeùF›ld_š™
;

284 
M‘hod
* 
	mm‘hJavaLªgReæeùM‘hod_š™
;

285 
M‘hod
* 
	mm‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”_š™
;

288 
M‘hod
*

289 
	mm‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy_ü—‹AÂÙ©iÚ
;

292 
M‘hod
* 
	mm‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
;

295 
	moffJavaLªgReæeùProxy_h
;

298 
M‘hod
* 
	mm‘hFakeN©iveEÁry
;

301 
M‘hod
* 
	mm‘hJavaNioR—dWr™eDœeùBy‹Bufãr_š™
;

302 
M‘hod
* 
	mm‘hOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_Ú
;

303 
M‘hod
* 
	mm‘hOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr_g‘EfãùiveAdd»ss
;

304 
	moffJavaNioBufãr_ÿ·c™y
;

305 
	moffJavaNioBufãr_efãùiveDœeùAdd»ss
;

306 
	moffOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_o§ddr
;

307 
	mvoffOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_toLÚg
;

312 
CÏssObjeù
* vŞ©
	m´im™iveCÏss
[
PRIM_MAX
];

318 
CÏssObjeù
 
	muÆškedJavaLªgCÏssObjeù
;

333 
Th»ad
* 
	mth»adLi¡
;

334 
±h»ad_mu‹x_t
 
	mth»adLi¡Lock
;

336 
±h»ad_cÚd_t
 
	mth»adS¹CÚd
;

354 
±h»ad_mu‹x_t
 
	m_th»adSu¥’dLock
;

364 
±h»ad_mu‹x_t
 
	mth»adSu¥’dCouÁLock
;

372 
±h»ad_cÚd_t
 
	mth»adSu¥’dCouÁCÚd
;

378 
	msumTh»adSu¥’dCouÁ
;

394 
B™VeùÜ
* 
	mth»adIdM­
;

401 
	mnÚD«mÚTh»adCouÁ
;

403 
±h»ad_cÚd_t
 
	mvmEx™CÚd
;

408 
HashTabË
* 
	mu£rDexFes
;

413 #ifdeà
USE_INDIRECT_REF


414 
IndœeùRefTabË
 
	mjniGlob®RefTabË
;

416 
Reã»nûTabË
 
	mjniGlob®RefTabË
;

418 
±h»ad_mu‹x_t
 
	mjniGlob®RefLock
;

419 
	mjniGlob®RefHiM¬k
;

420 
	mjniGlob®RefLoM¬k
;

425 
Reã»nûTabË
 
	mjniPšRefTabË
;

426 
±h»ad_mu‹x_t
 
	mjniPšRefLock
;

431 
HashTabË
* 
	mÇtiveLibs
;

437 
±h»ad_mu‹x_t
 
	mgcH—pLock
;

440 
GcH—p
* 
	mgcH—p
;

445 
Objeù
* 
	moutOfMemÜyObj
;

446 
Objeù
* 
	mš‹º®E¼ÜObj
;

447 
Objeù
* 
	mnoCÏssDefFoundE¼ÜObj
;

450  
MÚ™Ü
* 
	mmÚ™ÜLi¡
;

453 
MÚ™Ü
* 
	mth»adSË•MÚ
;

456 
boŞ
 
	mÃwZygÙeH—pAÎoÿ‹d
;

461 
±h»ad_key_t
 
	m±h»adKeyS–f
;

467 
JavaVM
* 
	mvmLi¡
;

472 
AtomicCache
* 
	mš¡ªûofCache
;

475 
In¡ruùiÚWidth
* 
	mš¡rWidth
;

477 
In¡ruùiÚFÏgs
* 
	mš¡rFÏgs
;

479 
In¡ruùiÚFÜm©
* 
	mš¡rFÜm©
;

484 
Lš—rAÎocHdr
* 
	mpBoÙLßd”AÎoc
;

490 
boŞ
 
	mh—pWÜk”In™Ÿlized
;

491 
boŞ
 
	mh—pWÜk”R—dy
;

492 
boŞ
 
	mh®tH—pWÜk”
;

493 
±h»ad_t
 
	mh—pWÜk”HªdË
;

494 
±h»ad_mu‹x_t
 
	mh—pWÜk”Lock
;

495 
±h»ad_cÚd_t
 
	mh—pWÜk”CÚd
;

496 
±h»ad_cÚd_t
 
	mh—pWÜk”IdËCÚd
;

497 
±h»ad_mu‹x_t
 
	mh—pWÜk”Li¡Lock
;

502 
	mnumLßdedCÏs£s
;

503 
	mnumDeş¬edM‘hods
;

504 
	mnumDeş¬edIn¡F›lds
;

505 
	mnumDeş¬edSticF›lds
;

508 
boŞ
 
	mÇtiveDebugg”Aùive
;

516 
boŞ
 
	mdebugg”CÚÃùed
;

517 
u1
 
	mdebugg”Aùive
;

518 
JdwpS‹
* 
	mjdwpS‹
;

523 
HashTabË
* 
	mdbgRegi¡ry
;

531 cÚ¡ 
u2
* 
	mdebugB»akAddr
[
MAX_BREAKPOINTS
];

538 
S‹pCÚŒŞ
 
	m¡•CÚŒŞ
;

543 
boŞ
 
	mddmTh»adNÙifiÿtiÚ
;

548 
boŞ
 
	mzygÙe
;

555 
±h»ad_mu‹x_t
 
	m®locT¿ck”Lock
;

556 
AÎocRecÜd
* 
	m®locRecÜds
;

557 
	m®locRecÜdH—d
;

558 
	m®locRecÜdCouÁ
;

560 #ifdeà
WITH_ALLOC_LIMITS


562 
boŞ
 
	mcheckAÎocLim™s
;

564 
	m®loÿtiÚLim™
;

567 #ifdeà
WITH_DEADLOCK_PREDICTION


569 
±h»ad_mu‹x_t
 
	md—dlockHi¡ÜyLock
;

571 ’um { 
	mkDPOff
=0, 
	mkDPW¬n
, 
	mkDPE¼
, 
	mkDPAbÜt
 } 
	md—dlockP»diùMode
;

574 #ifdeà
WITH_PROFILER


583 vŞ©
	maùiveProf”s
;

588 
M‘hodT¿ûS‹
 
	mm‘hodT¿û
;

593 * 
	memuÏtÜT¿ûPage
;

594 
	memuÏtÜT¿ûEÇbËCouÁ
;

599 
AÎocProfS‹
 
	m®locProf
;

606 
M‘hod
** 
	mšlšedM‘hods
;

611 * 
	mexecu‹dIn¡rCouÁs
;

612 
boŞ
 
	mš¡ruùiÚCouÁEÇbËCouÁ
;

618 
±h»ad_t
 
	msigÇlC©ch”HªdË
;

619 
boŞ
 
	mh®tSigÇlC©ch”
;

624 
boŞ
 
	mh®tStdioCÚv”‹r
;

625 
boŞ
 
	m¡dioCÚv”‹rR—dy
;

626 
±h»ad_t
 
	m¡dioCÚv”‹rHªdË
;

627 
±h»ad_mu‹x_t
 
	m¡dioCÚv”‹rLock
;

628 
±h»ad_cÚd_t
 
	m¡dioCÚv”‹rCÚd
;

634 
pid_t
 
	msy¡emS”v”Pid
;

636 
	mk”ÃlGroupSchedulšg
;

639 #ifdeà
COUNT_PRECISE_METHODS


640 
Poš‹rS‘
* 
	m´eci£M‘hods
;

644 * 
	m»gi¡”M­Sts
;

647 
DvmGlob®s
 
gDvm
;

649 #ià
defšed
(
WITH_JIT
)

654 
	sDvmJ™Glob®s
 {

670 
±h»ad_mu‹x_t
 
	mbËLock
;

674 
J™EÁry
 *
	mpJ™EÁryTabË
;

677 *
	mpProfTabË
;

678 *
	mpProfTabËCİy
;

681 
	mj™TabËSize
;

684 
	mj™TabËMask
;

687 
	mj™TabËEÁr›sU£d
;

690 
	mth»shŞd
;

693 
boŞ
 
	mh®tComp”Th»ad
;

694 
boŞ
 
	mblockšgMode
;

695 
±h»ad_t
 
	mcomp”HªdË
;

696 
±h»ad_mu‹x_t
 
	mcomp”Lock
;

697 
±h»ad_cÚd_t
 
	mcomp”QueueAùiv™y
;

698 
±h»ad_cÚd_t
 
	mcomp”QueueEm±y
;

699 
	mcomp”QueueL’gth
;

700 
	mcomp”HighW©”
;

701 
	mcomp”WÜkEnqueueIndex
;

702 
	mcomp”WÜkDequeueIndex
;

703 
Comp”WÜkOrd”
 
	mcomp”WÜkQueue
[
COMPILER_WORK_QUEUE_SIZE
];

706 
	mcomp”MaxQueued
;

707 
	maddrLookupsFound
;

708 
	maddrLookupsNÙFound
;

709 
	mnoChašEx™
;

710 
	mnÜm®Ex™
;

711 
	mpuÁEx™
;

712 
	mŒª¦©iÚChašs
;

713 
	mšvokeChaš
;

714 
	mšvokeP»diùedChaš
;

715 
	mšvokeN©ive
;

716 
	m»tuºOp
;

719 * 
	mcodeCache
;

722 
	m‹m¶©eSize
;

725 
	mcodeCacheBy‹U£d
;

728 
	mnumComp©iÚs
;

731 
boŞ
 
	mcodeCacheFuÎ
;

734 
boŞ
 
	mšşudeS–eùedOp
;

737 
boŞ
 
	mšşudeS–eùedM‘hod
;

740 
	mİLi¡
[32];

743 
HashTabË
 *
	mm‘hodTabË
;

746 
boŞ
 
	m´štMe
;

749 
boŞ
 
	m´ofe
;

752 
HashTabË
* 
	mm‘hodStsTabË
;

755 
DvmJ™Glob®s
 
gDvmJ™
;

	@Hash.c

21 
	~"D®vik.h
"

23 
	~<¡dlib.h
>

28 
	#LOAD_NUMER
 5

29 
	#LOAD_DENOM
 8

	)

36 
size_t
 
	$dvmHashSize
(
size_t
 
size
) {

37  (
size
 * 
LOAD_DENOM
è/ 
LOAD_NUMER
 +1;

38 
	}
}

44 
HashTabË
* 
	$dvmHashTabËC»©e
(
size_t
 
š™ŸlSize
, 
HashF»eFunc
 
ä“Func
)

46 
HashTabË
* 
pHashTabË
;

48 
	`as£¹
(
š™ŸlSize
 > 0);

50 
pHashTabË
 = (
HashTabË
*è
	`m®loc
((*pHashTable));

51 ià(
pHashTabË
 =ğ
NULL
)

52  
NULL
;

54 
	`dvmIn™Mu‹x
(&
pHashTabË
->
lock
);

56 
pHashTabË
->
bËSize
 = 
	`dexRoundUpPow”2
(
š™ŸlSize
);

57 
pHashTabË
->
numEÁr›s
 =…HashTabË->
numD—dEÁr›s
 = 0;

58 
pHashTabË
->
ä“Func
 = freeFunc;

59 
pHashTabË
->
pEÁr›s
 =

60 (
HashEÁry
*è
	`m®loc
(
pHashTabË
->
bËSize
 * (HashEntry));

61 ià(
pHashTabË
->
pEÁr›s
 =ğ
NULL
) {

62 
	`ä“
(
pHashTabË
);

63  
NULL
;

66 
	`mem£t
(
pHashTabË
->
pEÁr›s
, 0,…HashTabË->
bËSize
 * (
HashEÁry
));

67  
pHashTabË
;

68 
	}
}

73 
	$dvmHashTabËCË¬
(
HashTabË
* 
pHashTabË
)

75 
HashEÁry
* 
pEÁ
;

76 
i
;

78 
pEÁ
 = 
pHashTabË
->
pEÁr›s
;

79 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++, 
pEÁ
++) {

80 ià(
pEÁ
->
d©a
 =ğ
HASH_TOMBSTONE
) {

82 
pEÁ
->
d©a
 = 
NULL
;

83 } ià(
pEÁ
->
d©a
 !ğ
NULL
) {

85 ià(
pHashTabË
->
ä“Func
 !ğ
NULL
)

86 (*
pHashTabË
->
ä“Func
)(
pEÁ
->
d©a
);

87 
pEÁ
->
d©a
 = 
NULL
;

91 
pHashTabË
->
numEÁr›s
 = 0;

92 
pHashTabË
->
numD—dEÁr›s
 = 0;

93 
	}
}

98 
	$dvmHashTabËF»e
(
HashTabË
* 
pHashTabË
)

100 ià(
pHashTabË
 =ğ
NULL
)

102 
	`dvmHashTabËCË¬
(
pHashTabË
);

103 
	`ä“
(
pHashTabË
->
pEÁr›s
);

104 
	`ä“
(
pHashTabË
);

105 
	}
}

107 #iâdeà
NDEBUG


111 
	$couÁTombStÚes
(
HashTabË
* 
pHashTabË
)

113 
i
, 
couÁ
;

115 
couÁ
 = 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

116 ià(
pHashTabË
->
pEÁr›s
[
i
].
d©a
 =ğ
HASH_TOMBSTONE
)

117 
couÁ
++;

119  
couÁ
;

120 
	}
}

133 
boŞ
 
	$»sizeHash
(
HashTabË
* 
pHashTabË
, 
ÃwSize
)

135 
HashEÁry
* 
pNewEÁr›s
;

136 
i
;

138 
	`as£¹
(
	`couÁTombStÚes
(
pHashTabË
è=ğpHashTabË->
numD—dEÁr›s
);

141 
pNewEÁr›s
 = (
HashEÁry
*è
	`ÿÎoc
(
ÃwSize
, (HashEntry));

142 ià(
pNewEÁr›s
 =ğ
NULL
)

143  
çl£
;

145 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

146 * 
d©a
 = 
pHashTabË
->
pEÁr›s
[
i
].data;

147 ià(
d©a
 !ğ
NULL
 && d©¨!ğ
HASH_TOMBSTONE
) {

148 
hashV®ue
 = 
pHashTabË
->
pEÁr›s
[
i
].hashValue;

149 
ÃwIdx
;

152 
ÃwIdx
 = 
hashV®ue
 & (
ÃwSize
-1);

153 
pNewEÁr›s
[
ÃwIdx
].
d©a
 !ğ
NULL
)

154 
ÃwIdx
 = (ÃwIdx + 1è& (
ÃwSize
-1);

156 
pNewEÁr›s
[
ÃwIdx
].
hashV®ue
 = hashValue;

157 
pNewEÁr›s
[
ÃwIdx
].
d©a
 = data;

161 
	`ä“
(
pHashTabË
->
pEÁr›s
);

162 
pHashTabË
->
pEÁr›s
 = 
pNewEÁr›s
;

163 
pHashTabË
->
bËSize
 = 
ÃwSize
;

164 
pHashTabË
->
numD—dEÁr›s
 = 0;

166 
	`as£¹
(
	`couÁTombStÚes
(
pHashTabË
) == 0);

167  
Œue
;

168 
	}
}

175 * 
	$dvmHashTabËLookup
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, * 
™em
,

176 
HashCom·»Func
 
cmpFunc
, 
boŞ
 
doAdd
)

178 
HashEÁry
* 
pEÁry
;

179 
HashEÁry
* 
pEnd
;

180 * 
»suÉ
 = 
NULL
;

182 
	`as£¹
(
pHashTabË
->
bËSize
 > 0);

183 
	`as£¹
(
™em
 !ğ
HASH_TOMBSTONE
);

184 
	`as£¹
(
™em
 !ğ
NULL
);

187 
pEÁry
 = &
pHashTabË
->
pEÁr›s
[
™emHash
 & (pHashTabË->
bËSize
-1)];

188 
pEnd
 = &
pHashTabË
->
pEÁr›s
[pHashTabË->
bËSize
];

189 
pEÁry
->
d©a
 !ğ
NULL
) {

190 ià(
pEÁry
->
d©a
 !ğ
HASH_TOMBSTONE
 &&

191 
pEÁry
->
hashV®ue
 =ğ
™emHash
 &&

192 (*
cmpFunc
)(
pEÁry
->
d©a
, 
™em
) == 0)

199 
pEÁry
++;

200 ià(
pEÁry
 =ğ
pEnd
) {

201 ià(
pHashTabË
->
bËSize
 == 1)

203 
pEÁry
 = 
pHashTabË
->
pEÁr›s
;

209 ià(
pEÁry
->
d©a
 =ğ
NULL
) {

210 ià(
doAdd
) {

211 
pEÁry
->
hashV®ue
 = 
™emHash
;

212 
pEÁry
->
d©a
 = 
™em
;

213 
pHashTabË
->
numEÁr›s
++;

218 ià((
pHashTabË
->
numEÁr›s
+pHashTabË->
numD—dEÁr›s
è* 
LOAD_DENOM


219 > 
pHashTabË
->
bËSize
 * 
LOAD_NUMER
)

221 ià(!
	`»sizeHash
(
pHashTabË
,…HashTabË->
bËSize
 * 2)) {

223 
	`LOGE
("Dalvik hash„esize failure\n");

224 
	`dvmAbÜt
();

234 
	`as£¹
(
pHashTabË
->
numEÁr›s
 <…HashTabË->
bËSize
);

235 
»suÉ
 = 
™em
;

237 
	`as£¹
(
»suÉ
 =ğ
NULL
);

240 
»suÉ
 = 
pEÁry
->
d©a
;

243  
»suÉ
;

244 
	}
}

251 
boŞ
 
	$dvmHashTabËRemove
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, * 
™em
)

253 
HashEÁry
* 
pEÁry
;

254 
HashEÁry
* 
pEnd
;

256 
	`as£¹
(
pHashTabË
->
bËSize
 > 0);

259 
pEÁry
 = &
pHashTabË
->
pEÁr›s
[
™emHash
 & (pHashTabË->
bËSize
-1)];

260 
pEnd
 = &
pHashTabË
->
pEÁr›s
[pHashTabË->
bËSize
];

261 
pEÁry
->
d©a
 !ğ
NULL
) {

262 ià(
pEÁry
->
d©a
 =ğ
™em
) {

264 
pEÁry
->
d©a
 = 
HASH_TOMBSTONE
;

265 
pHashTabË
->
numEÁr›s
--;

266 
pHashTabË
->
numD—dEÁr›s
++;

267  
Œue
;

270 
pEÁry
++;

271 ià(
pEÁry
 =ğ
pEnd
) {

272 ià(
pHashTabË
->
bËSize
 == 1)

274 
pEÁry
 = 
pHashTabË
->
pEÁr›s
;

280  
çl£
;

281 
	}
}

292 
	$dvmHashFÜ—chRemove
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chRemoveFunc
 
func
)

294 
i
, 
v®
;

296 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

297 
HashEÁry
* 
pEÁ
 = &
pHashTabË
->
pEÁr›s
[
i
];

299 ià(
pEÁ
->
d©a
 !ğ
NULL
 &&…EÁ->d©¨!ğ
HASH_TOMBSTONE
) {

300 
v®
 = (*
func
)(
pEÁ
->
d©a
);

301 ià(
v®
 == 1) {

302 
pEÁ
->
d©a
 = 
HASH_TOMBSTONE
;

303 
pHashTabË
->
numEÁr›s
--;

304 
pHashTabË
->
numD—dEÁr›s
++;

306 ià(
v®
 != 0) {

307  
v®
;

312 
	}
}

320 
	$dvmHashFÜ—ch
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chFunc
 
func
, * 
¬g
)

322 
i
, 
v®
;

324 
i
 = 0; i < 
pHashTabË
->
bËSize
; i++) {

325 
HashEÁry
* 
pEÁ
 = &
pHashTabË
->
pEÁr›s
[
i
];

327 ià(
pEÁ
->
d©a
 !ğ
NULL
 &&…EÁ->d©¨!ğ
HASH_TOMBSTONE
) {

328 
v®
 = (*
func
)(
pEÁ
->
d©a
, 
¬g
);

329 ià(
v®
 != 0)

330  
v®
;

335 
	}
}

343 
	$couÁProbes
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, cÚ¡ * 
™em
,

344 
HashCom·»Func
 
cmpFunc
)

346 
HashEÁry
* 
pEÁry
;

347 
HashEÁry
* 
pEnd
;

348 
couÁ
 = 0;

350 
	`as£¹
(
pHashTabË
->
bËSize
 > 0);

351 
	`as£¹
(
™em
 !ğ
HASH_TOMBSTONE
);

352 
	`as£¹
(
™em
 !ğ
NULL
);

355 
pEÁry
 = &
pHashTabË
->
pEÁr›s
[
™emHash
 & (pHashTabË->
bËSize
-1)];

356 
pEnd
 = &
pHashTabË
->
pEÁr›s
[pHashTabË->
bËSize
];

357 
pEÁry
->
d©a
 !ğ
NULL
) {

358 ià(
pEÁry
->
d©a
 !ğ
HASH_TOMBSTONE
 &&

359 
pEÁry
->
hashV®ue
 =ğ
™emHash
 &&

360 (*
cmpFunc
)(
pEÁry
->
d©a
, 
™em
) == 0)

366 
pEÁry
++;

367 ià(
pEÁry
 =ğ
pEnd
) {

368 ià(
pHashTabË
->
bËSize
 == 1)

370 
pEÁry
 = 
pHashTabË
->
pEÁr›s
;

373 
couÁ
++;

375 ià(
pEÁry
->
d©a
 =ğ
NULL
)

378  
couÁ
;

379 
	}
}

389 
	$dvmHashTabËProbeCouÁ
(
HashTabË
* 
pHashTabË
, 
HashC®cFunc
 
ÿlcFunc
,

390 
HashCom·»Func
 
cmpFunc
)

392 
numEÁr›s
, 
mšProbe
, 
maxProbe
, 
tÙ®Probe
;

393 
HashI‹r
 
™”
;

395 
numEÁr›s
 = 
maxProbe
 = 
tÙ®Probe
 = 0;

396 
mšProbe
 = 65536*32767;

398 
	`dvmHashI‹rBegš
(
pHashTabË
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

399 
	`dvmHashI‹rNext
(&
™”
))

401 cÚ¡ * 
d©a
 = (cÚ¡ *)
	`dvmHashI‹rD©a
(&
™”
);

402 
couÁ
;

404 
couÁ
 = 
	`couÁProbes
(
pHashTabË
, (*
ÿlcFunc
)(
d©a
), d©a, 
cmpFunc
);

406 
numEÁr›s
++;

408 ià(
couÁ
 < 
mšProbe
)

409 
mšProbe
 = 
couÁ
;

410 ià(
couÁ
 > 
maxProbe
)

411 
maxProbe
 = 
couÁ
;

412 
tÙ®Probe
 +ğ
couÁ
;

415 
	`LOGI
("Probe: min=%d max=%d,otal=%d in %d (%d),‡vg=%.3f\n",

416 
mšProbe
, 
maxProbe
, 
tÙ®Probe
, 
numEÁr›s
, 
pHashTabË
->
bËSize
,

417 (è
tÙ®Probe
 / (è
numEÁr›s
);

418 
	}
}

	@Hash.h

22 #iâdeà
_DALVIK_HASH


23 
	#_DALVIK_HASH


	)

26 
	$u4
 (*
	tHashCompu‹
)(cÚ¡ * 
	t™em
);

33 (*
	tHashCom·»Func
)(cÚ¡ * 
	tbËI‹m
, cÚ¡ * 
	tloo£I‹m
);

39 (*
	tHashF»eFunc
)(* 
	t±r
);

44 (*
	tHashFÜ—chFunc
)(* 
	td©a
, * 
	t¬g
);

49 (*
	tHashFÜ—chRemoveFunc
)(* 
	td©a
);

61 
	sHashEÁry
 {

62 
u4
 
hashV®ue
;

63 * 
d©a
;

64 } 
	tHashEÁry
;

66 
	#HASH_TOMBSTONE
 ((*) 0xcbcacccd)

67 

	)

73 
	sHashTabË
 {

74 
bËSize
;

75 
numEÁr›s
;

76 
numD—dEÁr›s
;

77 
HashEÁry
* 
pEÁr›s
;

78 
HashF»eFunc
 
ä“Func
;

79 
±h»ad_mu‹x_t
 
lock
;

80 } 
	tHashTabË
;

90 
HashTabË
* 
	`dvmHashTabËC»©e
(
size_t
 
š™ŸlSize
, 
HashF»eFunc
 
ä“Func
);

98 
size_t
 
	`dvmHashSize
(size_ˆ
size
);

103 
	`dvmHashTabËCË¬
(
HashTabË
* 
pHashTabË
);

108 
	`dvmHashTabËF»e
(
HashTabË
* 
pHashTabË
);

114 
INLINE
 
	$dvmHashTabËLock
(
HashTabË
* 
pHashTabË
) {

115 
	`dvmLockMu‹x
(&
pHashTabË
->
lock
);

116 
	}
}

117 
INLINE
 
	$dvmHashTabËUÆock
(
HashTabË
* 
pHashTabË
) {

118 
	`dvmUÆockMu‹x
(&
pHashTabË
->
lock
);

119 
	}
}

124 
INLINE
 
	$dvmHashTabËNumEÁr›s
(
HashTabË
* 
pHashTabË
) {

125  
pHashTabË
->
numEÁr›s
;

126 
	}
}

131 
INLINE
 
	$dvmHashTabËMemU§ge
(
HashTabË
* 
pHashTabË
) {

132  (
HashTabË
è+ 
pHashTabË
->
bËSize
 * (
HashEÁry
);

133 
	}
}

145 * 
dvmHashTabËLookup
(
HashTabË
* 
pHashTabË
, 
u4
 
™emHash
, * 
™em
,

146 
HashCom·»Func
 
cmpFunc
, 
boŞ
 
doAdd
);

152 
boŞ
 
dvmHashTabËRemove
(
HashTabË
* 
pHashTabË
, 
u4
 
hash
, * 
™em
);

159 
dvmHashFÜ—ch
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chFunc
 
func
, * 
¬g
);

169 
dvmHashFÜ—chRemove
(
HashTabË
* 
pHashTabË
, 
HashFÜ—chRemoveFunc
 
func
);

182 
	sHashI‹r
 {

183 * 
	md©a
;

184 
HashTabË
* 
	mpHashTabË
;

185 
	midx
;

186 } 
	tHashI‹r
;

187 
INLINE
 
	$dvmHashI‹rNext
(
HashI‹r
* 
pI‹r
) {

188 
i
 = 
pI‹r
->
idx
 +1;

189 
lim
 = 
pI‹r
->
pHashTabË
->
bËSize
;

190  ; 
i
 < 
lim
; i++) {

191 * 
d©a
 = 
pI‹r
->
pHashTabË
->
pEÁr›s
[
i
].data;

192 ià(
d©a
 !ğ
NULL
 && d©¨!ğ
HASH_TOMBSTONE
)

195 
pI‹r
->
idx
 = 
i
;

196 
	}
}

197 
INLINE
 
	$dvmHashI‹rBegš
(
HashTabË
* 
pHashTabË
, 
HashI‹r
* 
pI‹r
) {

198 
pI‹r
->
pHashTabË
 =…HashTable;

199 
pI‹r
->
idx
 = -1;

200 
	`dvmHashI‹rNext
(
pI‹r
);

201 
	}
}

202 
INLINE
 
boŞ
 
	$dvmHashI‹rDÚe
(
HashI‹r
* 
pI‹r
) {

203  (
pI‹r
->
idx
 >ğpI‹r->
pHashTabË
->
bËSize
);

204 
	}
}

205 
INLINE
 * 
	$dvmHashI‹rD©a
(
HashI‹r
* 
pI‹r
) {

206 
	`as£¹
(
pI‹r
->
idx
 >ğ0 &&…I‹r->idx <…I‹r->
pHashTabË
->
bËSize
);

207  
pI‹r
->
pHashTabË
->
pEÁr›s
[pI‹r->
idx
].
d©a
;

208 
	}
}

217 
	$u4
 (*
	tHashC®cFunc
)(cÚ¡ * 
	t™em
);

218 
	`dvmHashTabËProbeCouÁ
(
HashTabË
* 
pHashTabË
, 
HashC®cFunc
 
ÿlcFunc
,

219 
HashCom·»Func
 
cmpFunc
);

	@IndirectRefTable.c

20 
	~"D®vik.h
"

25 
boŞ
 
	$dvmIn™IndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
, 
š™ŸlCouÁ
,

26 
maxCouÁ
, 
IndœeùRefKšd
 
kšd
)

28 
	`as£¹
(
š™ŸlCouÁ
 > 0);

29 
	`as£¹
(
š™ŸlCouÁ
 <ğ
maxCouÁ
);

30 
	`as£¹
(
kšd
 =ğ
kIndœeùKšdLoÿl
 || kšd =ğ
kIndœeùKšdGlob®
);

32 
pRef
->
bË
 = (
Objeù
**è
	`m®loc
(
š™ŸlCouÁ
 * (Object*));

33 ià(
pRef
->
bË
 =ğ
NULL
)

34  
çl£
;

35 #iâdeà
NDEBUG


36 
	`mem£t
(
pRef
->
bË
, 0xd1, 
š™ŸlCouÁ
 * (
Objeù
*));

38 
pRef
->
£gm’tS‹
.
®l
 = 
IRT_FIRST_SEGMENT
;

39 
pRef
->
®locEÁr›s
 = 
š™ŸlCouÁ
;

40 
pRef
->
maxEÁr›s
 = 
maxCouÁ
;

41 
pRef
->
kšd
 = kind;

43  
Œue
;

44 
	}
}

49 
	$dvmCË¬IndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
)

51 
	`ä“
(
pRef
->
bË
);

52 
pRef
->
bË
 = 
NULL
;

53 
pRef
->
®locEÁr›s
 =…Ref->
maxEÁr›s
 = -1;

54 
	}
}

62 
boŞ
 
	$dvmPİIndœeùRefTabËSegm’tCheck
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
)

64 
IRTSegm’tS‹
 
s¡
;

70 
s¡
.
®l
 = 
cook›
;

71 ià(
s¡
.
·¹s
.
tİIndex
 > 
pRef
->
£gm’tS‹
.parts.topIndex) {

72 
	`LOGE
("Attemptoƒxpandable with segment…op (%do %d)\n",

73 
pRef
->
£gm’tS‹
.
·¹s
.
tİIndex
, 
s¡
.parts.topIndex);

74  
çl£
;

76 ià(
s¡
.
·¹s
.
numHŞes
 >ğs¡.·¹s.
tİIndex
) {

77 
	`LOGE
("Absurd‚umHoles in cookie (%d bi=%d)\n",

78 
s¡
.
·¹s
.
numHŞes
, s¡.·¹s.
tİIndex
);

79  
çl£
;

82 
	`LOGV
("---‡fter…op,op=%d holes=%d\n",

83 
s¡
.
·¹s
.
tİIndex
, s¡.·¹s.
numHŞes
);

85  
Œue
;

86 
	}
}

91 
boŞ
 
	$checkEÁry
(
IndœeùRefTabË
* 
pRef
, 
IndœeùRef
 
œef
, 
idx
)

93 
Objeù
* 
obj
 = 
pRef
->
bË
[
idx
];

94 
IndœeùRef
 
checkRef
 = 
	`dvmObjeùToIndœeùRef
(
obj
, 
idx
, 
pRef
->
kšd
);

95 ià(
checkRef
 !ğ
œef
) {

96 
	`LOGW
("œeàmism©ch: %°v %p\n", 
œef
, 
checkRef
);

97  
çl£
;

99  
Œue
;

100 
	}
}

105 
IndœeùRef
 
	$dvmAddToIndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
,

106 
Objeù
* 
obj
)

108 
IRTSegm’tS‹
 
´evS‹
;

109 
´evS‹
.
®l
 = 
cook›
;

110 
tİIndex
 = 
pRef
->
£gm’tS‹
.
·¹s
.topIndex;

111 
bÙtomIndex
 = 
´evS‹
.
·¹s
.
tİIndex
;

113 
	`as£¹
(
obj
 !ğ
NULL
);

114 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

115 
	`as£¹
(
pRef
->
bË
 !ğ
NULL
);

116 
	`as£¹
(
pRef
->
®locEÁr›s
 <ğpRef->
maxEÁr›s
);

117 
	`as£¹
(
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
 >ğ
´evS‹
.parts.numHoles);

119 ià(
tİIndex
 =ğ
pRef
->
®locEÁr›s
) {

121 ià(
tİIndex
 =ğ
pRef
->
maxEÁr›s
) {

122 
	`LOGW
("IndœeùRefTabË ov”æow (max=%d)\n", 
pRef
->
maxEÁr›s
);

123  
NULL
;

126 
Objeù
** 
ÃwTabË
;

127 
ÃwSize
;

129 
ÃwSize
 = 
pRef
->
®locEÁr›s
 * 2;

130 ià(
ÃwSize
 > 
pRef
->
maxEÁr›s
)

131 
ÃwSize
 = 
pRef
->
maxEÁr›s
;

132 
	`as£¹
(
ÃwSize
 > 
pRef
->
®locEÁr›s
);

134 
ÃwTabË
 = (
Objeù
**è
	`»®loc
(
pRef
->
bË
, 
ÃwSize
 * (Object*));

135 ià(
ÃwTabË
 =ğ
NULL
) {

136 
	`LOGE
("Unableoƒxpand irefable (from %do %d, max=%d)\n",

137 
pRef
->
®locEÁr›s
, 
ÃwSize
,…Ref->
maxEÁr›s
);

138  
çl£
;

140 
	`LOGI
("Growing ireftab %p from %do %d (max=%d)\n",

141 
pRef
,…Ref->
®locEÁr›s
, 
ÃwSize
,…Ref->
maxEÁr›s
);

144 
pRef
->
bË
 = 
ÃwTabË
;

145 
pRef
->
®locEÁr›s
 = 
ÃwSize
;

148 
IndœeùRef
 
»suÉ
;

155 
numHŞes
 = 
pRef
->
£gm’tS‹
.
·¹s
.numHŞe - 
´evS‹
.parts.numHoles;

156 ià(
numHŞes
 > 0) {

157 
	`as£¹
(
tİIndex
 > 1);

159 
Objeù
** 
pSÿn
 = &
pRef
->
bË
[
tİIndex
 - 1];

160 
	`as£¹
(*
pSÿn
 !ğ
NULL
);

161 *--
pSÿn
 !ğ
NULL
) {

162 
	`as£¹
(
pSÿn
 >ğ
pRef
->
bË
 + 
bÙtomIndex
);

164 
»suÉ
 = 
	`dvmObjeùToIndœeùRef
(
obj
, 
pSÿn
 - 
pRef
->
bË
,…Ref->
kšd
);

165 *
pSÿn
 = 
obj
;

166 
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
--;

169 
»suÉ
 = 
	`dvmObjeùToIndœeùRef
(
obj
, 
tİIndex
, 
pRef
->
kšd
);

170 
pRef
->
bË
[
tİIndex
++] = 
obj
;

171 
pRef
->
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex;

174 
	`as£¹
(
»suÉ
 !ğ
NULL
);

175  
»suÉ
;

176 
	}
}

183 
boŞ
 
	$dvmG‘FromIndœeùRefTabËCheck
(
IndœeùRefTabË
* 
pRef
, 
IndœeùRef
 
œef
)

185 ià(
	`dvmG‘IndœeùRefTy³
(
œef
è=ğ
kIndœeùKšdInv®id
) {

186 
	`LOGW
("Inv®id indœeù„eã»nû 0x%08x\n", (
u4
è
œef
);

187  
çl£
;

190 
tİIndex
 = 
pRef
->
£gm’tS‹
.
·¹s
.topIndex;

191 
idx
 = 
	`dvmIndœeùRefToIndex
(
œef
);

193 ià(
œef
 =ğ
NULL
) {

194 
	`LOGI
("---†ookup on NULL iref\n");

195  
çl£
;

197 ià(
idx
 >ğ
tİIndex
) {

199 
	`LOGI
("Attempto‡ccess invalid index %d (top=%d)\n",

200 
idx
, 
tİIndex
);

201  
çl£
;

204 
Objeù
* 
obj
 = 
pRef
->
bË
[
idx
];

205 ià(
obj
 =ğ
NULL
) {

206 
	`LOGI
("A‰em±Ø»ad from hŞe, i»f=%p\n", 
œef
);

207  
çl£
;

209 ià(!
	`checkEÁry
(
pRef
, 
œef
, 
idx
))

210  
çl£
;

212  
Œue
;

213 
	}
}

225 
boŞ
 
	$dvmRemoveFromIndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
,

226 
IndœeùRef
 
œef
)

228 
IRTSegm’tS‹
 
´evS‹
;

229 
´evS‹
.
®l
 = 
cook›
;

230 
tİIndex
 = 
pRef
->
£gm’tS‹
.
·¹s
.topIndex;

231 
bÙtomIndex
 = 
´evS‹
.
·¹s
.
tİIndex
;

233 
	`as£¹
(
pRef
->
bË
 !ğ
NULL
);

234 
	`as£¹
(
pRef
->
®locEÁr›s
 <ğpRef->
maxEÁr›s
);

235 
	`as£¹
(
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
 >ğ
´evS‹
.parts.numHoles);

237 
idx
 = 
	`dvmIndœeùRefToIndex
(
œef
);

238 ià(
idx
 < 
bÙtomIndex
) {

240 
	`LOGV
("Attempto„emove index outside index‡rea (%d vs %d-%d)\n",

241 
idx
, 
bÙtomIndex
, 
tİIndex
);

242  
çl£
;

244 ià(
idx
 >ğ
tİIndex
) {

246 
	`LOGI
("Attempto„emove invalid index %d (bottom=%dop=%d)\n",

247 
idx
, 
bÙtomIndex
, 
tİIndex
);

248  
çl£
;

251 ià(
idx
 =ğ
tİIndex
-1) {

256 ià(!
	`checkEÁry
(
pRef
, 
œef
, 
idx
))

257  
çl£
;

259 #iâdeà
NDEBUG


260 
pRef
->
bË
[
idx
] = (
IndœeùRef
) 0xd3d3d3d3;

263 
numHŞes
 =

264 
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
 - 
´evS‹
.parts.numHoles;

265 ià(
numHŞes
 != 0) {

266 --
tİIndex
 > 
bÙtomIndex
 && 
numHŞes
 != 0) {

267 
	`LOGV
("+++ checking for hole‡t %d (cookie=0x%08x) val=%p\n",

268 
tİIndex
-1, 
cook›
, 
pRef
->
bË
[topIndex-1]);

269 ià(
pRef
->
bË
[
tİIndex
-1] !ğ
NULL
)

271 
	`LOGV
("+++‡‹ hŞ© %d\n", 
tİIndex
-1);

272 
numHŞes
--;

274 
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
 =

275 
numHŞes
 + 
´evS‹
.
·¹s
.numHoles;

276 
pRef
->
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex;

278 
pRef
->
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex-1;

279 
	`LOGV
("+++‡‹†a¡ƒÁry %d\n", 
tİIndex
-1);

287 ià(
pRef
->
bË
[
idx
] =ğ
NULL
) {

288 
	`LOGV
("--- WEIRD:„emovšg‚uÎƒÁry %d\n", 
idx
);

289  
çl£
;

291 ià(!
	`checkEÁry
(
pRef
, 
œef
, 
idx
))

292  
çl£
;

294 
pRef
->
bË
[
idx
] = 
NULL
;

295 
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
++;

296 
	`LOGV
("+++†eft hole‡t %d, holes=%d\n",

297 
idx
, 
pRef
->
£gm’tS‹
.
·¹s
.
numHŞes
);

300  
Œue
;

301 
	}
}

307 
	$com·»Objeù
(cÚ¡ * 
vobj1
, cÚ¡ * 
vobj2
)

309 
Objeù
* 
obj1
 = *((Objeù**è
vobj1
);

310 
Objeù
* 
obj2
 = *((Objeù**è
vobj2
);

313 ià(
obj1
 =ğ
NULL
) {

314 ià(
obj2
 =ğ
NULL
) {

319 } ià(
obj2
 =ğ
NULL
) {

323 ià(
obj1
->
şazz
 !ğ
obj2
->clazz) {

324  (
u1
*)
obj1
->
şazz
 - (u1*)
obj2
->clazz;

326 
size1
 = 
	`dvmObjeùSizeInH—p
(
obj1
);

327 
size2
 = 
	`dvmObjeùSizeInH—p
(
obj2
);

328 ià(
size1
 !ğ
size2
) {

329  
size1
 - 
size2
;

331  (
u1
*)
obj1
 - (u1*)
obj2
;

334 
	}
}

342 
	$logObjeù
(
Objeù
* 
obj
, 
size
, 
id’tiÿl
, 
equiv
)

344 ià(
obj
 =ğ
NULL
) {

345 
	`LOGW
(" NULL„eã»nû (couÁ=%d)\n", 
equiv
);

349 ià(
id’tiÿl
 + 
equiv
 != 0) {

350 
	`LOGW
("%5d oà% %dB (%d unique)\n", 
id’tiÿl
 + 
equiv
 +1,

351 
obj
->
şazz
->
desütÜ
, 
size
, 
equiv
 +1);

353 
	`LOGW
("%5d oà% %dB\n", 
id’tiÿl
 + 
equiv
 +1,

354 
obj
->
şazz
->
desütÜ
, 
size
);

356 
	}
}

361 
	$dvmDumpIndœeùRefTabË
(cÚ¡ 
IndœeùRefTabË
* 
pRef
, cÚ¡ * 
desü
)

363 cÚ¡ 
kLa¡
 = 10;

364 
couÁ
 = 
	`dvmIndœeùRefTabËEÁr›s
(
pRef
);

365 
Objeù
** 
»fs
;

366 
i
;

368 ià(
couÁ
 == 0) {

369 
	`LOGW
("Referenceable has‚oƒntries\n");

372 
	`as£¹
(
couÁ
 > 0);

378 
	`LOGW
("La¡ %dƒÁr› š % »ã»nûabË:\n", 
kLa¡
, 
desü
);

379 
»fs
 = 
pRef
->
bË
;

380 
size
;

381 
¡¬t
 = 
couÁ
 - 
kLa¡
;

382 ià(
¡¬t
 < 0)

383 
¡¬t
 = 0;

385 
i
 = 
¡¬t
; i < 
couÁ
; i++) {

386 ià(
»fs
[
i
] =ğ
NULL
)

388 
size
 = 
	`dvmObjeùSizeInH—p
(
»fs
[
i
]);

389 
Objeù
* 
»f
 = 
»fs
[
i
];

390 ià(
»f
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

391 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
»f
;

392 
	`LOGW
("%5d: %°şs=% '%s' (%d by‹s)\n", 
i
, 
»f
,

393 (
»fs
[
i
] =ğ
NULL
è? "-" : 
»f
->
şazz
->
desütÜ
,

394 
şazz
->
desütÜ
, 
size
);

396 
	`LOGW
("%5d: %°şs=% (%d by‹s)\n", 
i
, 
»f
,

397 (
»fs
[
i
] =ğ
NULL
è? "-" : 
»f
->
şazz
->
desütÜ
, 
size
);

406 
Objeù
** 
bËCİy
 = (Objeù**)
	`m®loc
((Objeù*è* 
couÁ
);

407 
	`memıy
(
bËCİy
, 
pRef
->
bË
, (
Objeù
*è* 
couÁ
);

408 
	`qsÜt
(
bËCİy
, 
couÁ
, (
Objeù
*), 
com·»Objeù
);

409 
»fs
 = 
bËCİy
;

412 
q
;

413 
q
 = 0; q < 
couÁ
; q++)

414 
	`LOGI
("%d %p\n", 
q
, 
»fs
[q]);

417 
hŞes
 = 0;

418 
»fs
[
couÁ
-1] =ğ
NULL
) {

419 
couÁ
--;

420 
hŞes
++;

427 
	`LOGW
("%s„eferenceable summary (%dƒntries / %d holes):\n",

428 
desü
, 
couÁ
, 
hŞes
);

429 
equiv
, 
id’tiÿl
, 
tÙ®
;

430 
tÙ®
 = 
equiv
 = 
id’tiÿl
 = 0;

431 
i
 = 1; i < 
couÁ
; i++) {

432 
size
 = 
	`dvmObjeùSizeInH—p
(
»fs
[
i
-1]);

434 ià(
»fs
[
i
] ==„efs[i-1]) {

436 
id’tiÿl
++;

437 } ià(
»fs
[
i
]->
şazz
 ==„efs[i-1]->clazz &&

438 (è
	`dvmObjeùSizeInH—p
(
»fs
[
i
]è=ğ
size
)

441 
tÙ®
 +ğ
size
;

442 
equiv
++;

445 
tÙ®
 +ğ
size
;

446 
	`logObjeù
(
»fs
[
i
-1], 
size
, 
id’tiÿl
, 
equiv
);

447 
equiv
 = 
id’tiÿl
 = 0;

452 
size
 = (
»fs
[
couÁ
-1] =ğ
NULL
è? 0 : 
	`dvmObjeùSizeInH—p
(refs[count-1]);

453 
tÙ®
 +ğ
size
;

454 
	`logObjeù
(
»fs
[
couÁ
-1], 
size
, 
id’tiÿl
, 
equiv
);

456 
	`LOGW
("MemÜy h–d dœeùly by‚©ivcodi %d by‹s\n", 
tÙ®
);

457 
	`ä“
(
bËCİy
);

458 
	}
}

	@IndirectRefTable.h

17 #iâdeà
_DALVIK_INDIRECTREFTABLE


18 
	#_DALVIK_INDIRECTREFTABLE


	)

86 * 
	tIndœeùRef
;

93 
	eIndœeùRefKšd
 {

94 
	mkIndœeùKšdInv®id
 = 0,

95 
	mkIndœeùKšdLoÿl
 = 1,

96 
	mkIndœeùKšdGlob®
 = 2,

97 
	mkIndœeùKšdW—kGlob®
 = 3

98 } 
	tIndœeùRefKšd
;

167 
	uIRTSegm’tS‹
 {

168 
u4
 
	m®l
;

170 
u4
 
	mtİIndex
:16;

171 
u4
 
	mnumHŞes
:16;

172 } 
	m·¹s
;

173 } 
	tIRTSegm’tS‹
;

174 
	sIndœeùRefTabË
 {

176 
IRTSegm’tS‹
 
	m£gm’tS‹
;

179 
Objeù
** 
	mbË
;

182 
	m®locEÁr›s
;

183 
	mmaxEÁr›s
;

184 
IndœeùRefKšd
 
	mkšd
;

188 } 
	tIndœeùRefTabË
;

191 
	#IRT_FIRST_SEGMENT
 0

	)

201 
INLINE
 
IndœeùRef
 
	$dvmObjeùToIndœeùRef
(
Objeù
* 
obj
, 
u4
 
bËIndex
,

202 
IndœeùRefKšd
 
kšd
)

204 
	`as£¹
(
bËIndex
 < 65536);

205 
u4
 
objChunk
 = (((u4è
obj
 >> 3) ^ ((u4) obj >> 19)) & 0x3fff;

206 
u4
 
u»f
 = 
objChunk
 << 18 | (
bËIndex
 << 2è| 
kšd
;

207  (
IndœeùRef
è
u»f
;

208 
	}
}

215 
INLINE
 
u4
 
	$dvmIndœeùRefToIndex
(
IndœeùRef
 
œef
)

217 
u4
 
u»f
 = (u4è
œef
;

218  (
u»f
 >> 2) & 0xffff;

219 
	}
}

224 
INLINE
 
IndœeùRefKšd
 
	$dvmG‘IndœeùRefTy³
(
IndœeùRef
 
œef
)

226  (
u4
è
œef
 & 0x03;

227 
	}
}

239 
boŞ
 
dvmIn™IndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
, 
š™ŸlCouÁ
,

240 
maxCouÁ
, 
IndœeùRefKšd
 
kšd
);

247 
dvmCË¬IndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
);

259 
INLINE
 
u4
 
	$dvmPushIndœeùRefTabËSegm’t
(
IndœeùRefTabË
* 
pRef
)

261  
pRef
->
£gm’tS‹
.
®l
;

262 
	}
}

265 
boŞ
 
dvmPİIndœeùRefTabËSegm’tCheck
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
);

275 
INLINE
 
	$dvmPİIndœeùRefTabËSegm’t
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
)

277 
	`dvmPİIndœeùRefTabËSegm’tCheck
(
pRef
, 
cook›
);

278 
pRef
->
£gm’tS‹
.
®l
 = 
cook›
;

279 
	}
}

285 
INLINE
 
size_t
 
	$dvmIndœeùRefTabËEÁr›s
(cÚ¡ 
IndœeùRefTabË
* 
pRef
)

287  
pRef
->
£gm’tS‹
.
·¹s
.
tİIndex
;

288 
	}
}

294 
INLINE
 
size_t
 
	$dvmIsIndœeùRefTabËFuÎ
(cÚ¡ 
IndœeùRefTabË
* 
pRef
)

296  
	`dvmIndœeùRefTabËEÁr›s
(
pRef
è=ğ(
size_t
íRef->
®locEÁr›s
;

297 
	}
}

307 
IndœeùRef
 
dvmAddToIndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
,

308 
Objeù
* 
obj
);

318 
INLINE
 
IndœeùRef
 
	$dvmAµ’dToIndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
,

319 
u4
 
cook›
, 
Objeù
* 
obj
)

321 
tİIndex
 = 
pRef
->
£gm’tS‹
.
·¹s
.topIndex;

322 ià(
tİIndex
 =ğ
pRef
->
®locEÁr›s
) {

324  
	`dvmAddToIndœeùRefTabË
(
pRef
, 
cook›
, 
obj
);

326 
IndœeùRef
 
»suÉ
 = 
	`dvmObjeùToIndœeùRef
(
obj
, 
tİIndex
, 
pRef
->
kšd
);

327 
pRef
->
bË
[
tİIndex
++] = 
obj
;

328 
pRef
->
£gm’tS‹
.
·¹s
.
tİIndex
 =opIndex;

329  
»suÉ
;

331 
	}
}

334 
boŞ
 
dvmG‘FromIndœeùRefTabËCheck
(
IndœeùRefTabË
* 
pRef
, 
IndœeùRef
 
œef
);

341 
INLINE
 
Objeù
* 
	$dvmG‘FromIndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
,

342 
IndœeùRef
 
œef
)

344 ià(!
	`dvmG‘FromIndœeùRefTabËCheck
(
pRef
, 
œef
))

345  
NULL
;

347 
idx
 = 
	`dvmIndœeùRefToIndex
(
œef
);

348  
pRef
->
bË
[
idx
];

349 
	}
}

360 
boŞ
 
dvmRemoveFromIndœeùRefTabË
(
IndœeùRefTabË
* 
pRef
, 
u4
 
cook›
,

361 
IndœeùRef
 
œef
);

366 
dvmDumpIndœeùRefTabË
(cÚ¡ 
IndœeùRefTabË
* 
pRef
, cÚ¡ * 
desü
);

	@Init.c

20 
	~"D®vik.h
"

21 
	~"‹¡/Te¡.h
"

22 
	~"m‹½/M‹½.h
"

23 
	~"Hash.h
"

25 
	~<¡dlib.h
>

26 
	~<¡dio.h
>

27 
	~<sigÇl.h
>

28 
	~<lim™s.h
>

29 
	~<ùy³.h
>

30 
	~<sys/wa™.h
>

31 
	~<uni¡d.h
>

33 
	#kMšH—pS¹Size
 (1*1024*1024)

	)

34 
	#kMšH—pSize
 (2*1024*1024)

	)

35 
	#kMaxH—pSize
 (1*1024*1024*1024)

	)

42 
jniRegi¡”Sy¡emM‘hods
(
JNIEnv
* 
’v
);

45 
boŞ
 
»gi¡”Sy¡emN©ives
(
JNIEnv
* 
pEnv
);

46 
boŞ
 
dvmIn™JDWP
();

47 
boŞ
 
dvmIn™ZygÙe
();

51 
DvmGlob®s
 
	ggDvm
;

54 #ià
defšed
(
WITH_JIT
)

55 
DvmJ™Glob®s
 
	ggDvmJ™
;

63 
	$dvmU§ge
(cÚ¡ * 
´ogName
)

65 
	`dvmF´štf
(
¡d”r
, "%s: [İtiÚs] cÏs [¬gum’ˆ...]\n", 
´ogName
);

66 
	`dvmF´štf
(
¡d”r
, "%s: [İtiÚs] -j¬ fe.j¬ [¬gum’ˆ...]\n",
´ogName
);

67 
	`dvmF´štf
(
¡d”r
, "\n");

68 
	`dvmF´štf
(
¡d”r
, "The following standard options‡re„ecognized:\n");

69 
	`dvmF´štf
(
¡d”r
, " -classpath classpath\n");

70 
	`dvmF´štf
(
¡d”r
, " -Dproperty=value\n");

71 
	`dvmF´štf
(
¡d”r
, " -verbose:tag ('gc', 'jni', or 'class')\n");

72 
	`dvmF´štf
(
¡d”r
, " -ea[:<package‚ame>... |:<class‚ame>]\n");

73 
	`dvmF´štf
(
¡d”r
, " -da[:<package‚ame>... |:<class‚ame>]\n");

74 
	`dvmF´štf
(
¡d”r
, " (-enableassertions, -disableassertions)\n");

75 
	`dvmF´štf
(
¡d”r
, " -esa\n");

76 
	`dvmF´štf
(
¡d”r
, " -dsa\n");

77 
	`dvmF´štf
(
¡d”r
,

79 
	`dvmF´štf
(
¡d”r
, " -showversion\n");

80 
	`dvmF´štf
(
¡d”r
, " -help\n");

81 
	`dvmF´štf
(
¡d”r
, "\n");

82 
	`dvmF´štf
(
¡d”r
, "The followingƒxtended options‡re„ecognized:\n");

83 
	`dvmF´štf
(
¡d”r
, " -Xrunjdwp:<options>\n");

84 
	`dvmF´štf
(
¡d”r
, " -Xbootclasspath:bootclasspath\n");

85 
	`dvmF´štf
(
¡d”r
, " -Xcheck:tag (e.g. 'jni')\n");

86 
	`dvmF´štf
(
¡d”r
, " -XmsN (min heap, must be multiple of 1K, >= 1MB)\n");

87 
	`dvmF´štf
(
¡d”r
, " -XmxN (max heap, must be multiple of 1K, >= 2MB)\n");

88 
	`dvmF´štf
(
¡d”r
, " -XssN (stack size, >= %dKB, <= %dKB)\n",

89 
kMšSckSize
 / 1024, 
kMaxSckSize
 / 1024);

90 
	`dvmF´štf
(
¡d”r
, " -Xverify:{none,remote,all}\n");

91 
	`dvmF´štf
(
¡d”r
, " -Xrs\n");

92 #ià
	`defšed
(
WITH_JIT
)

93 
	`dvmF´štf
(
¡d”r
,

96 
	`dvmF´štf
(
¡d”r
,

99 
	`dvmF´štf
(
¡d”r
, "\n");

100 
	`dvmF´štf
(
¡d”r
, "These‡re uniqueo Dalvik:\n");

101 
	`dvmF´štf
(
¡d”r
, " -Xzygote\n");

102 
	`dvmF´štf
(
¡d”r
, " -Xdexopt:{none,verified,all}\n");

103 
	`dvmF´štf
(
¡d”r
, " -Xnoquithandler\n");

104 
	`dvmF´štf
(
¡d”r
,

106 
	`dvmF´štf
(
¡d”r
, " -Xjniopts:{warnonly,forcecopy}\n");

107 
	`dvmF´štf
(
¡d”r
, " -Xdeadlockpredict:{off,warn,err,abort}\n");

108 
	`dvmF´štf
(
¡d”r
, " -Xstacktracefile:<filename>\n");

109 
	`dvmF´štf
(
¡d”r
, " -Xgc:[no]precise\n");

110 
	`dvmF´štf
(
¡d”r
, " -Xgenregmap\n");

111 
	`dvmF´štf
(
¡d”r
, " -Xcheckdexsum\n");

112 #ià
	`defšed
(
WITH_JIT
)

113 
	`dvmF´štf
(
¡d”r
, " -Xincludeselectedop\n");

114 
	`dvmF´štf
(
¡d”r
, " -Xjitop:hexopvalue[-endvalue]"

116 
	`dvmF´štf
(
¡d”r
, " -Xincludeselectedmethod\n");

117 
	`dvmF´štf
(
¡d”r
, " -Xthreshold:decimalvalue\n");

118 
	`dvmF´štf
(
¡d”r
, " -Xblocking\n");

119 
	`dvmF´štf
(
¡d”r
, " -Xjitmethod:signture[,signature]* "

121 
	`dvmF´štf
(
¡d”r
, " -Xjitverbose\n");

122 
	`dvmF´štf
(
¡d”r
, " -Xjitprofile\n");

124 
	`dvmF´štf
(
¡d”r
, "\n");

125 
	`dvmF´štf
(
¡d”r
, "Configured with:"

126 #ifdeà
WITH_DEBUGGER


129 #ifdeà
WITH_PROFILER


132 #ifdeà
WITH_MONITOR_TRACKING


135 #ifdeà
WITH_DEADLOCK_PREDICTION


138 #ifdeà
WITH_HPROF


141 #ifdeà
WITH_HPROF_STACK


144 #ifdeà
WITH_HPROF_STACK_UNREACHABLE


147 #ifdeà
WITH_ALLOC_LIMITS


150 #ifdeà
WITH_TRACKREF_CHECKS


153 #ifdeà
WITH_INSTR_CHECKS


156 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


159 #ifdeà
WITH_EXTRA_GC_CHECKS


162 #ifdeà
WITH_DALVIK_ASSERT


165 #ifdeà
WITH_JNI_STACK_CHECK


168 #ifdeà
EASY_GDB


171 #ifdeà
CHECK_MUTEX


174 #ifdeà
PROFILE_FIELD_ACCESS


177 #ifdeà
DVM_TRACK_HEAP_MARKING


180 #ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_REDUCING


182 #–ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_EXPANDING


184 #–ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_NO_CACHE


187 #ià
	`defšed
(
WITH_JIT
)

190 #ifdeà
WITH_TAINT_TRACKING


194 #ifdeà
DVM_SHOW_EXCEPTION


195 
	`dvmF´štf
(
¡d”r
, " show_exû±iÚ=%d", 
DVM_SHOW_EXCEPTION
);

197 
	`dvmF´štf
(
¡d”r
, "\n\n");

198 
	}
}

203 
	$showJdwpH–p
()

205 
	`dvmF´štf
(
¡d”r
,

207 
	`dvmF´štf
(
¡d”r
,

209 
	}
}

214 
	$showV”siÚ
()

216 
	`dvmF´štf
(
¡dout
, "DalvikVM version %d.%d.%d\n",

217 
DALVIK_MAJOR_VERSION
, 
DALVIK_MINOR_VERSION
, 
DALVIK_BUG_VERSION
);

218 
	`dvmF´štf
(
¡dout
,

227 
	}
}

245 
	$dvmP¬£MemO±iÚ
(cÚ¡ *
s
, 
div
)

250 ià(
	`isdig™
(*
s
)) {

251 cÚ¡ *
s2
;

252 
v®
;

254 
v®
 = ()
	`¡¹oul
(
s
, (**)&
s2
, 10);

255 ià(
s2
 !ğ
s
) {

262 ià(*
s2
 != '\0') {

263 
c
;

269 
c
 = *
s2
++;

270 ià(*
s2
 == '\0') {

271 
mul
;

273 ià(
c
 == '\0') {

274 
mul
 = 1;

275 } ià(
c
 == 'k' || c == 'K') {

276 
mul
 = 1024;

277 } ià(
c
 == 'm' || c == 'M') {

278 
mul
 = 1024 * 1024;

279 } ià(
c
 == 'g' || c == 'G') {

280 
mul
 = 1024 * 1024 * 1024;

287 ià(
v®
 <ğ
UINT_MAX
 / 
mul
) {

288 
v®
 *ğ
mul
;

292 
v®
 = 
UINT_MAX
 & ~(1024-1);

305 ià(
v®
 % 
div
 == 0) {

306  
v®
;

312 
	}
}

331 
boŞ
 
	$hªdËJdwpO±iÚ
(cÚ¡ * 
Çme
, cÚ¡ * 
v®ue
)

333 ià(
	`¡rcmp
(
Çme
, "transport") == 0) {

334 ià(
	`¡rcmp
(
v®ue
, "dt_socket") == 0) {

335 
gDvm
.
jdwpT¿n¥Üt
 = 
kJdwpT¿n¥ÜtSock‘
;

336 } ià(
	`¡rcmp
(
v®ue
, "dt_android_adb") == 0) {

337 
gDvm
.
jdwpT¿n¥Üt
 = 
kJdwpT¿n¥ÜtAndroidAdb
;

339 
	`LOGE
("JDWP¿n¥Üˆ'%s'‚Ù suµÜ‹d\n", 
v®ue
);

340  
çl£
;

342 } ià(
	`¡rcmp
(
Çme
, "server") == 0) {

343 ià(*
v®ue
 == 'n')

344 
gDvm
.
jdwpS”v”
 = 
çl£
;

345 ià(*
v®ue
 == 'y')

346 
gDvm
.
jdwpS”v”
 = 
Œue
;

348 
	`LOGE
("JDWP option 'server' must be 'y' or 'n'\n");

349  
çl£
;

351 } ià(
	`¡rcmp
(
Çme
, "suspend") == 0) {

352 ià(*
v®ue
 == 'n')

353 
gDvm
.
jdwpSu¥’d
 = 
çl£
;

354 ià(*
v®ue
 == 'y')

355 
gDvm
.
jdwpSu¥’d
 = 
Œue
;

357 
	`LOGE
("JDWP option 'suspend' must be 'y' or 'n'\n");

358  
çl£
;

360 } ià(
	`¡rcmp
(
Çme
, "address") == 0) {

362 cÚ¡ * 
cŞÚ
 = 
	`¡rchr
(
v®ue
, ':');

363 * 
’d
;

364 
pÜt
;

366 ià(
cŞÚ
 !ğ
NULL
) {

367 
	`ä“
(
gDvm
.
jdwpHo¡
);

368 
gDvm
.
jdwpHo¡
 = (*è
	`m®loc
(
cŞÚ
 - 
v®ue
 +1);

369 
	`¡ºıy
(
gDvm
.
jdwpHo¡
, 
v®ue
, 
cŞÚ
 - value +1);

370 
gDvm
.
jdwpHo¡
[
cŞÚ
-
v®ue
] = '\0';

371 
v®ue
 = 
cŞÚ
 + 1;

373 ià(*
v®ue
 == '\0') {

374 
	`LOGE
("JDWP‡ddress missing…ort\n");

375  
çl£
;

377 
pÜt
 = 
	`¡¹Ş
(
v®ue
, &
’d
, 10);

378 ià(*
’d
 != '\0') {

379 
	`LOGE
("JDWP‡dd»s ha junk iÀpÜˆf›ld '%s'\n", 
v®ue
);

380  
çl£
;

382 
gDvm
.
jdwpPÜt
 = 
pÜt
;

383 } ià(
	`¡rcmp
(
Çme
, "launch") == 0 ||

384 
	`¡rcmp
(
Çme
, "onthrow") == 0 ||

385 
	`¡rcmp
(
Çme
, "oncaught") == 0 ||

386 
	`¡rcmp
(
Çme
, "timeout") == 0)

389 
	`LOGI
("IgnÜšg JDWP o±iÚ '%s'='%s'\n", 
Çme
, 
v®ue
);

391 
	`LOGI
("IgnÜšg uÄecognized JDWP o±iÚ '%s'='%s'\n", 
Çme
, 
v®ue
);

394  
Œue
;

395 
	}
}

401 
boŞ
 
	$·r£JdwpO±iÚs
(cÚ¡ * 
¡r
)

403 * 
mªgË
 = 
	`¡rdup
(
¡r
);

404 * 
Çme
 = 
mªgË
;

405 
boŞ
 
»suÉ
 = 
çl£
;

410 
Œue
) {

411 * 
v®ue
;

412 * 
comma
;

414 
v®ue
 = 
	`¡rchr
(
Çme
, '=');

415 ià(
v®ue
 =ğ
NULL
) {

416 
	`LOGE
("JDWP o±s: g¬bag© '%s'\n", 
Çme
);

417 
ba
;

420 
comma
 = 
	`¡rchr
(
Çme
, ',');

421 ià(
comma
 !ğ
NULL
) {

422 ià(
comma
 < 
v®ue
) {

423 
	`LOGE
("JDWP o±s: found comm¨befÜ'=' iÀ'%s'\n", 
mªgË
);

424 
ba
;

426 *
comma
 = '\0';

429 *
v®ue
++ = '\0';

431 ià(!
	`hªdËJdwpO±iÚ
(
Çme
, 
v®ue
))

432 
ba
;

434 ià(
comma
 =ğ
NULL
) {

438 
Çme
 = 
comma
+1;

444 ià(
gDvm
.
jdwpT¿n¥Üt
 =ğ
kJdwpT¿n¥ÜtUnknown
) {

445 
	`LOGE
("JDWP opts: must specifyransport\n");

446 
ba
;

448 ià(!
gDvm
.
jdwpS”v”
 && (gDvm.
jdwpHo¡
 =ğ
NULL
 || gDvm.
jdwpPÜt
 == 0)) {

449 
	`LOGE
("JDWP opts: when server=n, must specify host‡nd…ort\n");

450 
ba
;

455 
gDvm
.
jdwpCÚfigu»d
 = 
Œue
;

456 
»suÉ
 = 
Œue
;

458 
ba
:

459 
	`ä“
(
mªgË
);

460  
»suÉ
;

461 
	}
}

476 
boŞ
 
	$’abËAs£¹iÚs
(cÚ¡ * 
pkgOrCÏss
, 
boŞ
 
’abË
)

478 
As£¹iÚCÚŒŞ
* 
pCŒl
 = &
gDvm
.
as£¹iÚCŒl
[gDvm.
as£¹iÚCŒlCouÁ
++];

479 
pCŒl
->
’abË
 =ƒnable;

481 ià(
pkgOrCÏss
 =ğ
NULL
) {

483 
pCŒl
->
isPackage
 = 
çl£
;

484 
pCŒl
->
pkgOrCÏss
 = 
NULL
;

485 
pCŒl
->
pkgOrCÏssL’
 = 0;

487 ià(*
pkgOrCÏss
 == '\0') {

489 
pCŒl
->
isPackage
 = 
çl£
;

490 
pCŒl
->
pkgOrCÏss
 = 
	`¡rdup
("");

491 
pCŒl
->
pkgOrCÏssL’
 = 0;

493 
pCŒl
->
pkgOrCÏss
 = 
	`dvmDÙToSÏsh
(pkgOrClass+1);

494 ià(
pCŒl
->
pkgOrCÏss
 =ğ
NULL
) {

496 
	`LOGW
("UÇbËØ´oûs as£¹iÚ‡rg '%s'\n", 
pkgOrCÏss
);

497  
çl£
;

500 
Ën
 = 
	`¡¾’
(
pCŒl
->
pkgOrCÏss
);

501 ià(
Ën
 >ğ3 && 
	`¡rcmp
(
pCŒl
->
pkgOrCÏss
 +†en-3, "///") == 0) {

503 
pCŒl
->
isPackage
 = 
Œue
;

504 *(
pCŒl
->
pkgOrCÏss
 + 
Ën
-2) = '\0';

505 
pCŒl
->
pkgOrCÏssL’
 = 
Ën
 - 2;

508 
pCŒl
->
isPackage
 = 
çl£
;

509 
pCŒl
->
pkgOrCÏssL’
 = 
Ën
;

514  
Œue
;

515 
	}
}

530 
	$dvmL©eEÇbËAs£¹iÚs
()

532 ià(
gDvm
.
as£¹iÚCŒl
 =ğ
NULL
) {

533 
	`LOGD
("Not†ate-enabling‡ssertions:‚o‡ssertionCtrl‡rray\n");

535 } ià(
gDvm
.
as£¹iÚCŒlCouÁ
 != 0) {

536 
	`LOGD
("Not†ate-enabling‡ssertions: some‡sserts‡lready configured\n");

539 
	`LOGD
("Late-enabling‡ssertions\n");

542 
As£¹iÚCÚŒŞ
* 
pCŒl
 = 
gDvm
.
as£¹iÚCŒl
;

543 
pCŒl
->
pkgOrCÏss
 = 
	`¡rdup
("");

544 
pCŒl
->
pkgOrCÏssL’
 = 0;

545 
pCŒl
->
isPackage
 = 
çl£
;

546 
pCŒl
->
’abË
 = 
Œue
;

547 
gDvm
.
as£¹iÚCŒlCouÁ
 = 1;

548 
	}
}

554 
	$ä“As£¹iÚCŒl
()

556 
i
;

558 
i
 = 0; i < 
gDvm
.
as£¹iÚCŒlCouÁ
; i++)

559 
	`ä“
(
gDvm
.
as£¹iÚCŒl
[
i
].
pkgOrCÏss
);

560 
	`ä“
(
gDvm
.
as£¹iÚCŒl
);

561 
	}
}

563 #ià
defšed
(
WITH_JIT
)

565 
	$´oûssXj™İ
(cÚ¡ *
İt
)

567 ià(
İt
[7] == ':') {

568 cÚ¡ *
¡¬tPŒ
 = &
İt
[8];

569 *
’dPŒ
 = 
NULL
;

572 
¡¬tV®ue
, 
’dV®ue
;

574 
¡¬tV®ue
 = 
	`¡¹Ş
(
¡¬tPŒ
, &
’dPŒ
, 16);

575 ià(
¡¬tPŒ
 !ğ
’dPŒ
) {

577 
¡¬tV®ue
 &= 0xff;

579 ià(*
’dPŒ
 == '-') {

580 
’dV®ue
 = 
	`¡¹Ş
(
’dPŒ
+1, &endPtr, 16);

581 
’dV®ue
 &= 0xff;

583 
’dV®ue
 = 
¡¬tV®ue
;

586 ; 
¡¬tV®ue
 <ğ
’dV®ue
; startValue++) {

587 
	`LOGW
("Dalvik opcode %x is selected for debugging",

588 (è
¡¬tV®ue
);

590 
gDvmJ™
.
İLi¡
[
¡¬tV®ue
 >> 3] |=

591 1 << (
¡¬tV®ue
 & 0x7);

594 ià(*
’dPŒ
 == 0) {

598 
¡¬tPŒ
 = 
’dPŒ
 + 1;

602 ià(*
’dPŒ
 != 0) {

603 
	`dvmF´štf
(
¡d”r
,

605 "%s\n", 
’dPŒ
);

611 
i
;

612 
i
 = 0; i < 32; i++) {

613 
gDvmJ™
.
İLi¡
[
i
] = 0xff;

615 
	`dvmF´štf
(
¡d”r
, "Warning: select‡ll opcodes\n");

617 
	}
}

620 
	$´oûssXj™m‘hod
(cÚ¡ *
İt
)

622 *
buf
 = 
	`¡rdup
(&
İt
[12]);

623 *
¡¬t
, *
’d
;

625 
gDvmJ™
.
m‘hodTabË
 = 
	`dvmHashTabËC»©e
(8, 
NULL
);

627 
¡¬t
 = 
buf
;

633 
hashV®ue
;

635 
’d
 = 
	`¡rchr
(
¡¬t
, ',');

636 ià(
’d
) {

637 *
’d
 = 0;

640 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
¡¬t
);

642 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

643 
	`¡rdup
(
¡¬t
),

644 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

645 ià(
’d
) {

646 
¡¬t
 = 
’d
 + 1;

651 
	`ä“
(
buf
);

652 
	}
}

666 
	$dvmProûssO±iÚs
(
¬gc
, cÚ¡ * cÚ¡ 
¬gv
[],

667 
boŞ
 
ignÜeUÄecognized
)

669 
i
;

671 
	`LOGV
("VM o±iÚ (%d):\n", 
¬gc
);

672 
i
 = 0; i < 
¬gc
; i++)

673 
	`LOGV
(" %d: '%s'\n", 
i
, 
¬gv
[i]);

680 
	`as£¹
(
gDvm
.
as£¹iÚCŒl
 =ğ
NULL
);

681 ià(
¬gc
 > 0) {

682 
gDvm
.
as£¹iÚCŒl
 =

683 (
As£¹iÚCÚŒŞ
*è
	`m®loc
((As£¹iÚCÚŒŞè* 
¬gc
);

684 ià(
gDvm
.
as£¹iÚCŒl
 =ğ
NULL
)

686 
	`as£¹
(
gDvm
.
as£¹iÚCŒlCouÁ
 == 0);

689 
i
 = 0; i < 
¬gc
; i++) {

690 ià(
	`¡rcmp
(
¬gv
[
i
], "-help") == 0) {

694 } ià(
	`¡rcmp
(
¬gv
[
i
], "-version") == 0) {

696 
	`showV”siÚ
();

698 } ià(
	`¡rcmp
(
¬gv
[
i
], "-showversion") == 0) {

700 
	`showV”siÚ
();

702 } ià(
	`¡rcmp
(
¬gv
[
i
], "-classpath") == 0 ||

703 
	`¡rcmp
(
¬gv
[
i
], "-cp") == 0)

706 ià(
i
 =ğ
¬gc
-1) {

707 
	`dvmF´štf
(
¡d”r
, "Missing classpath…ath†ist\n");

710 
	`ä“
(
gDvm
.
şassP©hSŒ
);

711 
gDvm
.
şassP©hSŒ
 = 
	`¡rdup
(
¬gv
[++
i
]);

713 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xbootclasspath:",

717 cÚ¡ * 
·th
 = 
¬gv
[
i
] + ("-Xbootclasspath:")-1;

719 ià(*
·th
 == '\0') {

720 
	`dvmF´štf
(
¡d”r
, "Missing bootclasspath…ath†ist\n");

723 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

724 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(
·th
);

732 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-D", 2) == 0) {

734 
	`dvmAddCommªdLšePrİ”ty
(
¬gv
[
i
] + 2);

736 } ià(
	`¡rcmp
(
¬gv
[
i
], "-jar") == 0) {

738 
	`dvmF´štf
(
¡d”r
, "-jar‚ot yet handled\n");

739 
	`as£¹
(
çl£
);

741 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xms", 4) == 0) {

742 
v®
 = 
	`dvmP¬£MemO±iÚ
(
¬gv
[
i
]+4, 1024);

743 ià(
v®
 != 0) {

744 ià(
v®
 >ğ
kMšH—pS¹Size
 && v® <ğ
kMaxH—pSize
) {

745 
gDvm
.
h—pSizeS¹
 = 
v®
;

747 
	`dvmF´štf
(
¡d”r
,

749 
¬gv
[
i
], 
kMšH—pS¹Size
/1024, 
kMaxH—pSize
/1024);

753 
	`dvmF´štf
(
¡d”r
, "Inv®id -Xm İtiÚ '%s'\n", 
¬gv
[
i
]);

756 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xmx", 4) == 0) {

757 
v®
 = 
	`dvmP¬£MemO±iÚ
(
¬gv
[
i
]+4, 1024);

758 ià(
v®
 != 0) {

759 ià(
v®
 >ğ
kMšH—pSize
 && v® <ğ
kMaxH—pSize
) {

760 
gDvm
.
h—pSizeMax
 = 
v®
;

762 
	`dvmF´štf
(
¡d”r
,

764 
¬gv
[
i
], 
kMšH—pSize
/1024, 
kMaxH—pSize
/1024);

768 
	`dvmF´štf
(
¡d”r
, "Inv®id -Xmx o±iÚ '%s'\n", 
¬gv
[
i
]);

771 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xss", 4) == 0) {

772 
v®
 = 
	`dvmP¬£MemO±iÚ
(
¬gv
[
i
]+4, 1);

773 ià(
v®
 != 0) {

774 ià(
v®
 >ğ
kMšSckSize
 && v® <ğ
kMaxSckSize
) {

775 
gDvm
.
¡ackSize
 = 
v®
;

777 
	`dvmF´štf
(
¡d”r
, "Invalid -Xss '%s',„ange is %do %d\n",

778 
¬gv
[
i
], 
kMšSckSize
, 
kMaxSckSize
);

782 
	`dvmF´štf
(
¡d”r
, "Inv®id -Xs İtiÚ '%s'\n", 
¬gv
[
i
]);

786 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose") == 0 ||

787 
	`¡rcmp
(
¬gv
[
i
], "-verbose:class") == 0)

791 
gDvm
.
v”bo£CÏss
 = 
Œue
;

792 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose:jni") == 0) {

793 
gDvm
.
v”bo£Jni
 = 
Œue
;

794 } ià(
	`¡rcmp
(
¬gv
[
i
], "-verbose:gc") == 0) {

795 
gDvm
.
v”bo£Gc
 = 
Œue
;

797 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-enableassertions", 17) == 0) {

798 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 17, 
Œue
);

799 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-ea", 3) == 0) {

800 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 3, 
Œue
);

801 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-disableassertions", 18) == 0) {

802 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 18, 
çl£
);

803 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-da", 3) == 0) {

804 
	`’abËAs£¹iÚs
(
¬gv
[
i
] + 3, 
çl£
);

805 } ià(
	`¡rcmp
(
¬gv
[
i
], "-enablesystemassertions") == 0 ||

806 
	`¡rcmp
(
¬gv
[
i
], "-esa") == 0)

808 
	`’abËAs£¹iÚs
(
NULL
, 
Œue
);

809 } ià(
	`¡rcmp
(
¬gv
[
i
], "-disablesystemassertions") == 0 ||

810 
	`¡rcmp
(
¬gv
[
i
], "-dsa") == 0)

812 
	`’abËAs£¹iÚs
(
NULL
, 
çl£
);

814 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xcheck:jni", 11) == 0) {

817 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xdebug") == 0) {

820 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xrunjdwp:", 10) == 0 ||

821 
	`¡ºcmp
(
¬gv
[
i
], "-agentlib:jdwp=", 15) == 0)

823 cÚ¡ * 

;

824 
boŞ
 
»suÉ
 = 
çl£
;

826 ià(
¬gv
[
i
][1] == 'X')

827 

 = 
¬gv
[
i
] + 10;

829 

 = 
¬gv
[
i
] + 15;

831 ià(
	`¡ºcmp
(

, "h–p", 4è=ğ0 || !
	`·r£JdwpO±iÚs
(tail)) {

832 
	`showJdwpH–p
();

835 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xrs") == 0) {

836 
gDvm
.
»duûSigÇls
 = 
Œue
;

837 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xnoquithandler") == 0) {

840 
gDvm
.
noQu™HªdËr
 = 
Œue
;

841 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xzygote") == 0) {

842 
gDvm
.
zygÙe
 = 
Œue
;

843 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xdexopt:", 9) == 0) {

844 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "none") == 0)

845 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
;

846 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "verified") == 0)

847 #ià
	`defšed
(
WITH_TAINT_TRACKING
è&& !defšed(
WITH_TAINT_ODEX
)

848 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
;

850 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
;

852 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "all") == 0)

853 #ià
	`defšed
(
WITH_TAINT_TRACKING
è&& !defšed(
WITH_TAINT_ODEX
)

854 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
;

856 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_ALL
;

859 
	`dvmF´štf
(
¡d”r
, "UÄecognized dexİˆİtiÚ '%s'\n",
¬gv
[
i
]);

862 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xverify:", 9) == 0) {

863 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "none") == 0)

864 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_NONE
;

865 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "remote") == 0)

866 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_REMOTE
;

867 ià(
	`¡rcmp
(
¬gv
[
i
] + 9, "all") == 0)

868 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_ALL
;

870 
	`dvmF´štf
(
¡d”r
, "UÄecognized v”ify o±iÚ '%s'\n",
¬gv
[
i
]);

873 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjnigreflimit:", 15) == 0) {

874 
lim
 = 
	`©oi
(
¬gv
[
i
] + 15);

875 ià(
lim
 < 200 || (lim % 100) != 0) {

876 
	`dvmF´štf
(
¡d”r
, "Bad value for -Xjnigreflimit: '%s'\n",

877 
¬gv
[
i
]+15);

880 
gDvm
.
jniG»fLim™
 = 
lim
;

882 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xlog-stdio") == 0) {

883 
gDvm
.
logStdio
 = 
Œue
;

885 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xint", 5) == 0) {

886 ià(
¬gv
[
i
][5] == ':') {

887 ià(
	`¡rcmp
(
¬gv
[
i
] + 6, "portable") == 0)

888 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pPÜbË
;

889 ià(
	`¡rcmp
(
¬gv
[
i
] + 6, "fast") == 0)

890 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pFa¡
;

891 #ifdeà
WITH_JIT


892 ià(
	`¡rcmp
(
¬gv
[
i
] + 6, "jit") == 0)

893 
gDvm
.
executiÚMode
 = 
kExecutiÚModeJ™
;

896 
	`dvmF´štf
(
¡d”r
,

897 "W¬nšg: UÄecognized iÁ”´‘” mod%s\n",
¬gv
[
i
]);

904 #ifdeà
WITH_JIT


905 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitop", 7) == 0) {

906 
	`´oûssXj™İ
(
¬gv
[
i
]);

907 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitmethod", 11) == 0) {

908 
	`´oûssXj™m‘hod
(
¬gv
[
i
]);

909 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xblocking", 10) == 0) {

910 
gDvmJ™
.
blockšgMode
 = 
Œue
;

911 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xthreshold:", 12) == 0) {

912 
gDvmJ™
.
th»shŞd
 = 
	`©oi
(
¬gv
[
i
] + 12);

913 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xincludeselectedop", 19) == 0) {

914 
gDvmJ™
.
šşudeS–eùedOp
 = 
Œue
;

915 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xincludeselectedmethod", 23) == 0) {

916 
gDvmJ™
.
šşudeS–eùedM‘hod
 = 
Œue
;

917 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitverbose", 12) == 0) {

918 
gDvmJ™
.
´štMe
 = 
Œue
;

919 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xjitprofile", 12) == 0) {

920 
gDvmJ™
.
´ofe
 = 
Œue
;

923 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xdeadlockpredict:", 18) == 0) {

924 #ifdeà
WITH_DEADLOCK_PREDICTION


925 ià(
	`¡rcmp
(
¬gv
[
i
] + 18, "off") == 0)

926 
gDvm
.
d—dlockP»diùMode
 = 
kDPOff
;

927 ià(
	`¡rcmp
(
¬gv
[
i
] + 18, "warn") == 0)

928 
gDvm
.
d—dlockP»diùMode
 = 
kDPW¬n
;

929 ià(
	`¡rcmp
(
¬gv
[
i
] + 18, "err") == 0)

930 
gDvm
.
d—dlockP»diùMode
 = 
kDPE¼
;

931 ià(
	`¡rcmp
(
¬gv
[
i
] + 18, "abort") == 0)

932 
gDvm
.
d—dlockP»diùMode
 = 
kDPAbÜt
;

934 
	`dvmF´štf
(
¡d”r
, "Bad value for -Xdeadlockpredict");

937 ià(
gDvm
.
d—dlockP»diùMode
 !ğ
kDPOff
)

938 
	`LOGD
("D—dlock…»diùiÚƒÇbËd (%s)\n", 
¬gv
[
i
]+18);

941 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xstacktracefile:", 17) == 0) {

942 
gDvm
.
¡ackT¿ûFe
 = 
	`¡rdup
(
¬gv
[
i
]+17);

944 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xgenregmap") == 0) {

945 
gDvm
.
g’”©eRegi¡”M­s
 = 
Œue
;

946 
	`LOGV
("Register maps will be generated during verification\n");

948 } ià(
	`¡ºcmp
(
¬gv
[
i
], "-Xgc:", 5) == 0) {

949 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "precise") == 0)

950 
gDvm
.
´eci£Gc
 = 
Œue
;

951 ià(
	`¡rcmp
(
¬gv
[
i
] + 5, "noprecise") == 0)

952 
gDvm
.
´eci£Gc
 = 
çl£
;

954 
	`dvmF´štf
(
¡d”r
, "Bad value for -Xgc");

957 
	`LOGD
("P»ci£ GC cÚfigu»d %s\n", 
gDvm
.
´eci£Gc
 ? "ON" : "OFF");

959 } ià(
	`¡rcmp
(
¬gv
[
i
], "-Xcheckdexsum") == 0) {

960 
gDvm
.
v”ifyDexChecksum
 = 
Œue
;

963 ià(!
ignÜeUÄecognized
) {

964 
	`dvmF´štf
(
¡d”r
, "UÄecognized o±iÚ '%s'\n", 
¬gv
[
i
]);

970 ià(
gDvm
.
h—pSizeS¹
 > gDvm.
h—pSizeMax
) {

971 
	`dvmF´štf
(
¡d”r
, "Heap start size must be <= heap max size\n");

976 
	}
}

983 
	$£tCommªdLšeDeçuÉs
()

985 cÚ¡ * 
’vSŒ
;

987 
’vSŒ
 = 
	`g‘’v
("CLASSPATH");

988 ià(
’vSŒ
 !ğ
NULL
)

989 
gDvm
.
şassP©hSŒ
 = 
	`¡rdup
(
’vSŒ
);

991 
gDvm
.
şassP©hSŒ
 = 
	`¡rdup
(".");

992 
’vSŒ
 = 
	`g‘’v
("BOOTCLASSPATH");

993 ià(
’vSŒ
 !ğ
NULL
)

994 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(
’vSŒ
);

996 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(".");

1001 
gDvm
.
h—pSizeS¹
 = 2 * 1024 * 1024;

1002 
gDvm
.
h—pSizeMax
 = 16 * 1024 * 1024;

1003 
gDvm
.
¡ackSize
 = 
kDeçuÉSckSize
;

1008 
gDvm
.
jdwpAÎowed
 = 
Œue
;

1011 
gDvm
.
şassV”ifyMode
 = 
VERIFY_MODE_ALL
;

1012 #ià
	`defšed
(
WITH_TAINT_TRACKING
è&& !defšed(
WITH_TAINT_ODEX
)

1013 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_NONE
;

1015 
gDvm
.
dexO±Mode
 = 
OPTIMIZE_MODE_VERIFIED
;

1025 #ià
	`defšed
(
WITH_JIT
)

1026 
gDvm
.
executiÚMode
 = 
kExecutiÚModeJ™
;

1031 
gDvmJ™
.
blockšgMode
 = 
çl£
;

1032 
gDvmJ™
.
j™TabËSize
 = 512;

1033 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

1034 
gDvmJ™
.
th»shŞd
 = 200;

1036 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pFa¡
;

1038 #ià
	`defšed
(
WITH_TAINT_TRACKING
è&& !defšed(
WITH_TAINT_FAST
)

1039 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pPÜbË
;

1041 
	}
}

1048 
	$busC©ch”
(
signum
, 
sigšfo_t
* 
šfo
, * 
cÚ‹xt
)

1050 * 
addr
 = 
šfo
->
si_addr
;

1052 
	`LOGE
("Caughˆ¨SIGBUS (%d),‡ddr=%p\n", 
signum
, 
addr
);

1060 
	`sigÇl
(
SIGBUS
, 
SIG_DFL
);

1061 
	}
}

1069 
	$blockSigÇls
()

1071 
sig£t_t
 
mask
;

1072 
cc
;

1074 
	`sigem±y£t
(&
mask
);

1075 
	`sigadd£t
(&
mask
, 
SIGQUIT
);

1076 
	`sigadd£t
(&
mask
, 
SIGUSR1
);

1077 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

1078 
	`sigadd£t
(&
mask
, 
SIGUSR2
);

1081 
cc
 = 
	`sig´ocmask
(
SIG_BLOCK
, &
mask
, 
NULL
);

1082 
	`as£¹
(
cc
 == 0);

1084 ià(
çl£
) {

1086 
sigaùiÚ
 
§
;

1087 
	`mem£t
(&
§
, 0, (sa));

1088 
§
.
§_sigaùiÚ
 = 
busC©ch”
;

1089 
§
.
§_æags
 = 
SA_SIGINFO
;

1090 
cc
 = 
	`sigaùiÚ
(
SIGBUS
, &
§
, 
NULL
);

1091 
	`as£¹
(
cc
 == 0);

1093 
	}
}

1101 
	$dvmS¹up
(
¬gc
, cÚ¡ * cÚ¡ 
¬gv
[], 
boŞ
 
ignÜeUÄecognized
,

1102 
JNIEnv
* 
pEnv
)

1104 
i
, 
cc
;

1106 
	`as£¹
(
gDvm
.
š™Ÿlizšg
);

1108 
	`LOGV
("VM in™‡rg (%d):\n", 
¬gc
);

1109 
i
 = 0; i < 
¬gc
; i++)

1110 
	`LOGV
(" %d: '%s'\n", 
i
, 
¬gv
[i]);

1112 
	`£tCommªdLšeDeçuÉs
();

1115 ià(!
	`dvmPrİ”t›sS¹up
(
¬gc
))

1116 
ç
;

1121 
cc
 = 
	`dvmProûssO±iÚs
(
¬gc
, 
¬gv
, 
ignÜeUÄecognized
);

1122 ià(
cc
 != 0) {

1123 ià(
cc
 < 0) {

1124 
	`dvmF´štf
(
¡d”r
, "\n");

1125 
	`dvmU§ge
("dalvikvm");

1127 
ç
;

1130 #ià
WITH_EXTRA_GC_CHECKS
 > 1

1132 ià(
gDvm
.
executiÚMode
 !ğ
kExecutiÚModeIÁ”pPÜbË
) {

1133 
	`LOGI
("Switchingo 'portable' interpreter for GC checks\n");

1134 
gDvm
.
executiÚMode
 = 
kExecutiÚModeIÁ”pPÜbË
;

1139 ià(!
	`acûss
("/dev/ıuùl/sks", 
F_OK
)) {

1140 
	`LOGV
("Using kernel group scheduling");

1141 
gDvm
.
k”ÃlGroupSchedulšg
 = 1;

1143 
	`LOGV
("Using kernel scheduler…olicies");

1147 ià(!
gDvm
.
»duûSigÇls
)

1148 
	`blockSigÇls
();

1151 
	`LOGV
("UsšgƒxecutiÚMod%d\n", 
gDvm
.
executiÚMode
);

1152 
	`dvmCheckAsmCÚ¡ªts
();

1157 ià(!
	`dvmAÎocT¿ck”S¹up
())

1158 
ç
;

1159 ià(!
	`dvmGcS¹up
())

1160 
ç
;

1161 ià(!
	`dvmTh»adS¹up
())

1162 
ç
;

1163 ià(!
	`dvmIÆšeN©iveS¹up
())

1164 
ç
;

1165 ià(!
	`dvmV”ifiÿtiÚS¹up
())

1166 
ç
;

1167 ià(!
	`dvmRegi¡”M­S¹up
())

1168 
ç
;

1169 ià(!
	`dvmIn¡ªûofS¹up
())

1170 
ç
;

1171 ià(!
	`dvmCÏssS¹up
())

1172 
ç
;

1173 ià(!
	`dvmTh»adObjS¹up
())

1174 
ç
;

1175 ià(!
	`dvmExû±iÚS¹up
())

1176 
ç
;

1177 ià(!
	`dvmSŒšgIÁ”nS¹up
())

1178 
ç
;

1179 ià(!
	`dvmN©iveS¹up
())

1180 
ç
;

1181 ià(!
	`dvmIÁ”ÇlN©iveS¹up
())

1182 
ç
;

1183 ià(!
	`dvmJniS¹up
())

1184 
ç
;

1185 ià(!
	`dvmReæeùS¹up
())

1186 
ç
;

1187 #ifdeà
WITH_PROFILER


1188 ià(!
	`dvmProfšgS¹up
())

1189 
ç
;

1193 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

1194 
	`as£¹
(
gDvm
.
şassJavaLªgObjeù
 !ğ
NULL
);

1196 
	`as£¹
(
gDvm
.
şassJavaLªgTh»ad
 !ğ
NULL
);

1197 
	`as£¹
(
gDvm
.
şassJavaLªgVMTh»ad
 !ğ
NULL
);

1198 
	`as£¹
(
gDvm
.
şassJavaLªgTh»adGroup
 !ğ
NULL
);

1204 cÚ¡ * 
—¾yCÏs£s
[] = {

1209 
NULL


1211 cÚ¡ ** 
pCÏssName
;

1212 
pCÏssName
 = 
—¾yCÏs£s
; *pCÏssNam!ğ
NULL
;…ClassName++) {

1213 ià(
	`dvmFšdSy¡emCÏssNoIn™
(*
pCÏssName
è=ğ
NULL
)

1214 
ç
;

1220 ià(!
	`dvmV®id©eBoxCÏs£s
())

1221 
ç
;

1227 ià(!
	`dvmP»pMašFÜJni
(
pEnv
))

1228 
ç
;

1233 ià(!
	`»gi¡”Sy¡emN©ives
(
pEnv
))

1234 
ç
;

1240 ià(!
	`dvmC»©eStockExû±iÚs
())

1241 
ç
;

1249 ià(!
	`dvmP»pMašTh»ad
())

1250 
ç
;

1253 ià(!
	`dvmDebugg”S¹up
())

1254 
ç
;

1260 ià(
gDvm
.
zygÙe
) {

1261 ià(!
	`dvmIn™ZygÙe
())

1262 
ç
;

1264 ià(!
	`dvmIn™Aá”ZygÙe
())

1265 
ç
;

1269 #iâdeà
NDEBUG


1270 ià(!
	`dvmTe¡Hash
())

1271 
	`LOGE
("dmvTestHash FAILED\n");

1272 ià(
çl£
 && !
	`dvmTe¡IndœeùRefTabË
())

1273 
	`LOGE
("dvmTestIndirectRefTable FAILED\n");

1276 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1277 
gDvm
.
š™Exû±iÚCouÁ
 = 0;

1281 
ç
:

1282 
	`dvmShutdown
();

1284 
	}
}

1298 
boŞ
 
	$»gi¡”Sy¡emN©ives
(
JNIEnv
* 
pEnv
)

1300 
Th»ad
* 
£lf
;

1303 
£lf
 = 
gDvm
.
th»adLi¡
;

1306 
£lf
->
¡©us
 = 
THREAD_NATIVE
;

1308 ià(
	`jniRegi¡”Sy¡emM‘hods
(
pEnv
) < 0) {

1309 
	`LOGW
("jniRegisterSystemMethods failed\n");

1310  
çl£
;

1314 
£lf
->
¡©us
 = 
THREAD_RUNNING
;

1316  
Œue
;

1317 
	}
}

1323 
boŞ
 
	$dvmIn™ZygÙe
()

1326 
	`£gid
(0,0);

1328  
Œue
;

1329 
	}
}

1335 
boŞ
 
	$dvmIn™Aá”ZygÙe
()

1337 
u8
 
¡¬tH—p
, 
¡¬tQu™
, 
¡¬tJdwp
;

1338 
u8
 
’dH—p
, 
’dQu™
, 
’dJdwp
;

1340 
¡¬tH—p
 = 
	`dvmG‘R–©iveTimeU£c
();

1346 ià(!
	`dvmGcS¹upAá”ZygÙe
())

1347  
çl£
;

1349 
’dH—p
 = 
	`dvmG‘R–©iveTimeU£c
();

1350 
¡¬tQu™
 = 
	`dvmG‘R–©iveTimeU£c
();

1353 ià(!
gDvm
.
»duûSigÇls
 && !gDvm.
noQu™HªdËr
) {

1354 ià(!
	`dvmSigÇlC©ch”S¹up
())

1355  
çl£
;

1359 ià(
gDvm
.
logStdio
) {

1360 ià(!
	`dvmStdioCÚv”‹rS¹up
())

1361  
çl£
;

1364 
’dQu™
 = 
	`dvmG‘R–©iveTimeU£c
();

1365 
¡¬tJdwp
 = 
	`dvmG‘R–©iveTimeU£c
();

1372 ià(!
	`dvmIn™JDWP
()) {

1373 
	`LOGD
("JDWP init failed; continuing‡nyway\n");

1376 
’dJdwp
 = 
	`dvmG‘R–©iveTimeU£c
();

1378 
	`LOGV
("thread-start heap=%d quit=%d jdwp=%dotal=%d usec\n",

1379 ()(
’dH—p
-
¡¬tH—p
), ()(
’dQu™
-
¡¬tQu™
),

1380 ()(
’dJdwp
-
¡¬tJdwp
), ()ÓndJdwp-
¡¬tH—p
));

1382 #ifdeà
WITH_JIT


1383 ià(!
	`dvmJ™S¹up
())

1384  
çl£
;

1387  
Œue
;

1388 
	}
}

1409 
boŞ
 
	$dvmIn™JDWP
()

1411 
	`as£¹
(!
gDvm
.
zygÙe
);

1413 #iâdeà
WITH_DEBUGGER


1414 
	`LOGI
("Debugger support‚ot compiled into VM\n");

1415  
çl£
;

1423 ià(
gDvm
.
jdwpAÎowed
 && gDvm.
jdwpCÚfigu»d
) {

1424 
JdwpS¹upP¬ams
 
·¿ms
;

1426 ià(
gDvm
.
jdwpHo¡
 !ğ
NULL
) {

1427 ià(
	`¡¾’
(
gDvm
.
jdwpHo¡
è>ğ(
·¿ms
.
ho¡
)-1) {

1428 
	`LOGE
("ERROR: ho¡ÇmtoØlÚg: '%s'\n", 
gDvm
.
jdwpHo¡
);

1429  
çl£
;

1431 
	`¡rıy
(
·¿ms
.
ho¡
, 
gDvm
.
jdwpHo¡
);

1433 
·¿ms
.
ho¡
[0] = '\0';

1435 
·¿ms
.
Œª¥Üt
 = 
gDvm
.
jdwpT¿n¥Üt
;

1436 
·¿ms
.
£rv”
 = 
gDvm
.
jdwpS”v”
;

1437 
·¿ms
.
su¥’d
 = 
gDvm
.
jdwpSu¥’d
;

1438 
·¿ms
.
pÜt
 = 
gDvm
.
jdwpPÜt
;

1440 
gDvm
.
jdwpS‹
 = 
	`dvmJdwpS¹up
(&
·¿ms
);

1441 ià(
gDvm
.
jdwpS‹
 =ğ
NULL
) {

1442 
	`LOGW
("WARNING: debuggerhread failedo initialize\n");

1451 ià(
	`dvmJdwpIsAùive
(
gDvm
.
jdwpS‹
)) {

1453 ià(!
	`dvmJdwpPo¡VMS¹
(
gDvm
.
jdwpS‹
, gDvm.
jdwpSu¥’d
)) {

1454 
	`LOGW
("WARNING: failedo…ost 'start' messageo debugger\n");

1460  
Œue
;

1461 
	}
}

1476 
	$dvmP»pFÜDexO±
(cÚ¡ * 
boÙCÏssP©h
, 
DexO±imiz”Mode
 
dexO±Mode
,

1477 
DexCÏssV”ifyMode
 
v”ifyMode
, 
dexİtFÏgs
)

1479 
gDvm
.
š™Ÿlizšg
 = 
Œue
;

1480 
gDvm
.
İtimizšg
 = 
Œue
;

1483 
	`blockSigÇls
();

1486 
	`£tCommªdLšeDeçuÉs
();

1487 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

1488 
gDvm
.
boÙCÏssP©hSŒ
 = 
	`¡rdup
(
boÙCÏssP©h
);

1491 
gDvm
.
dexO±Mode
 = dexOptMode;

1492 
gDvm
.
şassV”ifyMode
 = 
v”ifyMode
;

1493 
gDvm
.
g’”©eRegi¡”M­s
 = (
dexİtFÏgs
 & 
DEXOPT_GEN_REGISTER_MAPS
) != 0;

1502 ià(!
	`dvmGcS¹up
())

1503 
ç
;

1504 ià(!
	`dvmTh»adS¹up
())

1505 
ç
;

1506 ià(!
	`dvmIÆšeN©iveS¹up
())

1507 
ç
;

1508 ià(!
	`dvmV”ifiÿtiÚS¹up
())

1509 
ç
;

1510 ià(!
	`dvmRegi¡”M­S¹up
())

1511 
ç
;

1512 ià(!
	`dvmIn¡ªûofS¹up
())

1513 
ç
;

1514 ià(!
	`dvmCÏssS¹up
())

1515 
ç
;

1525 
ç
:

1526 
	`dvmShutdown
();

1528 
	}
}

1547 
	$dvmShutdown
()

1549 
	`LOGV
("VM shutting down\n");

1551 ià(
CALC_CACHE_STATS
)

1552 
	`dvmDumpAtomicCacheSts
(
gDvm
.
š¡ªûofCache
);

1557 
	`dvmH—pWÜk”Shutdown
();

1559 ià(
gDvm
.
jdwpS‹
 !ğ
NULL
)

1560 
	`dvmJdwpShutdown
(
gDvm
.
jdwpS‹
);

1561 
	`ä“
(
gDvm
.
jdwpHo¡
);

1562 
gDvm
.
jdwpHo¡
 = 
NULL
;

1563 
	`ä“
(
gDvm
.
¡ackT¿ûFe
);

1564 
gDvm
.
¡ackT¿ûFe
 = 
NULL
;

1567 
	`dvmSigÇlC©ch”Shutdown
();

1570 
	`dvmStdioCÚv”‹rShutdown
();

1572 #ifdeà
WITH_JIT


1574 
	`dvmJ™Shutdown
();

1582 
	`dvmSÏyD«mÚs
();

1584 
	`LOGD
("VM cleaning up\n");

1586 
	`dvmDebugg”Shutdown
();

1587 
	`dvmReæeùShutdown
();

1588 #ifdeà
WITH_PROFILER


1589 
	`dvmProfšgShutdown
();

1591 
	`dvmJniShutdown
();

1592 
	`dvmSŒšgIÁ”nShutdown
();

1593 
	`dvmExû±iÚShutdown
();

1594 
	`dvmTh»adShutdown
();

1595 
	`dvmCÏssShutdown
();

1596 
	`dvmV”ifiÿtiÚShutdown
();

1597 
	`dvmRegi¡”M­Shutdown
();

1598 
	`dvmIn¡ªûofShutdown
();

1599 
	`dvmIÆšeN©iveShutdown
();

1600 
	`dvmGcShutdown
();

1601 
	`dvmAÎocT¿ck”Shutdown
();

1602 
	`dvmPrİ”t›sShutdown
();

1605 
	`dvmN©iveShutdown
();

1606 
	`dvmIÁ”ÇlN©iveShutdown
();

1608 
	`ä“
(
gDvm
.
boÙCÏssP©hSŒ
);

1609 
	`ä“
(
gDvm
.
şassP©hSŒ
);

1611 
	`ä“As£¹iÚCŒl
();

1621 
	`mem£t
(&
gDvm
, 0xcd, (gDvm));

1622 
	}
}

1629 
	$dvmF´štf
(
FILE
* 
å
, cÚ¡ * 
fÜm©
, ...)

1631 
va_li¡
 
¬gs
;

1632 
»suÉ
;

1634 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

1635 ià(
gDvm
.
vårštfHook
 !ğ
NULL
)

1636 
»suÉ
 = (*
gDvm
.
vårštfHook
)(
å
, 
fÜm©
, 
¬gs
);

1638 
»suÉ
 = 
	`vårštf
(
å
, 
fÜm©
, 
¬gs
);

1639 
	`va_’d
(
¬gs
);

1641  
»suÉ
;

1642 
	}
}

1648 
	$dvmAbÜt
()

1650 
	`LOGE
("VM‡borting\n");

1652 
	`fæush
(
NULL
);

1655 ià(
gDvm
.
abÜtHook
 !ğ
NULL
)

1656 (*
gDvm
.
abÜtHook
)();

1669 
	`abÜt
();

1672 
	}
}

	@Init.h

20 #iâdeà
_DALVIK_INIT


21 
	#_DALVIK_INIT


	)

26 
dvmS¹up
(
¬gc
, cÚ¡ * cÚ¡ 
¬gv
[], 
boŞ
 
ignÜeUÄecognized
,

27 
JNIEnv
* 
pEnv
);

28 
dvmShutdown
();

29 
boŞ
 
dvmIn™Aá”ZygÙe
();

34 
dvmL©eEÇbËAs£¹iÚs
();

40 
dvmP»pFÜDexO±
(cÚ¡ * 
boÙCÏssP©h
, 
DexO±imiz”Mode
 
dexO±Mode
,

41 
DexCÏssV”ifyMode
 
v”ifyMode
, 
dexİtFÏgs
);

48 
	$dvmF´štf
(
FILE
* 
å
, cÚ¡ * 
fÜm©
, ...)

49 #ià
	`defšed
(
__GNUC__
)

50 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

	@InlineNative.c

21 
	~"D®vik.h
"

23 
	~<m©h.h
>

25 #ifdeà
HAVE__MEMCMP16


30 
u4
 
__memcmp16
(cÚ¡ 
u2
* 
s0
, cÚ¡ u2* 
s1
, 
size_t
 
couÁ
);

104 
boŞ
 
	$Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÆšeM‘hod
(

105 
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
, 
JV®ue
* 
pResuÉ
)

108  
Œue
;

109 
	}
}

121 
boŞ
 
	$javaLªgSŒšg_ch¬At
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

122 
JV®ue
* 
pResuÉ
)

124 
couÁ
, 
off£t
;

125 
A¼ayObjeù
* 
ch¬s
;

128 ià(!
	`dvmV®id©eObjeù
((
Objeù
*è
¬g0
))

129  
çl£
;

132 
couÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

133 ià((
s4
è
¬g1
 < 0 || (s4è¬g1 >ğ
couÁ
) {

134 
	`dvmThrowExû±iÚ
("Ljava/Ïng/SŒšgIndexOutOfBoundsExû±iÚ;", 
NULL
);

135  
çl£
;

137 
off£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

138 
ch¬s
 = (
A¼ayObjeù
*)

139 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

141 
pResuÉ
->
i
 = ((cÚ¡ 
u2
*è
ch¬s
->
cÚ‹Ás
)[
¬g1
 + 
off£t
];

142  
Œue
;

144 
	}
}

146 #ifdeà
CHECK_MEMCMP16


150 
	$badM©ch
(
SŒšgObjeù
* 
thisSŒObj
, SŒšgObjeù* 
compSŒObj
,

151 
ex³ùResuÉ
, 
ÃwResuÉ
, cÚ¡ * 
com·»Ty³
)

153 
A¼ayObjeù
* 
thisA¼ay
;

154 
A¼ayObjeù
* 
compA¼ay
;

155 cÚ¡ * 
thisSŒ
;

156 cÚ¡ * 
compSŒ
;

157 
thisOff£t
, 
compOff£t
, 
thisCouÁ
, 
compCouÁ
;

159 
thisCouÁ
 =

160 
	`dvmG‘F›ldIÁ
((
Objeù
*è
thisSŒObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

161 
compCouÁ
 =

162 
	`dvmG‘F›ldIÁ
((
Objeù
*è
compSŒObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

163 
thisOff£t
 =

164 
	`dvmG‘F›ldIÁ
((
Objeù
*è
thisSŒObj
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

165 
compOff£t
 =

166 
	`dvmG‘F›ldIÁ
((
Objeù
*è
compSŒObj
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

167 
thisA¼ay
 = (
A¼ayObjeù
*)

168 
	`dvmG‘F›ldObjeù
((
Objeù
*è
thisSŒObj
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

169 
compA¼ay
 = (
A¼ayObjeù
*)

170 
	`dvmG‘F›ldObjeù
((
Objeù
*è
compSŒObj
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

172 
thisSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
thisSŒObj
);

173 
compSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
compSŒObj
);

175 
	`LOGE
("% ex³ùed %d gÙ %d\n", 
com·»Ty³
, 
ex³ùResuÉ
, 
ÃwResuÉ
);

176 
	`LOGE
("hi (o=%d†=%dè'%s'\n", 
thisOff£t
, 
thisCouÁ
, 
thisSŒ
);

177 
	`LOGE
(" com°(o=%d†=%dè'%s'\n", 
compOff£t
, 
compCouÁ
, 
compSŒ
);

178 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_INFO
, 
LOG_TAG
,

179 ((cÚ¡ 
u2
*è
thisA¼ay
->
cÚ‹Ás
è+ 
thisOff£t
, 
thisCouÁ
*2,

180 
kHexDumpLoÿl
);

181 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_INFO
, 
LOG_TAG
,

182 ((cÚ¡ 
u2
*è
compA¼ay
->
cÚ‹Ás
è+ 
compOff£t
, 
compCouÁ
*2,

183 
kHexDumpLoÿl
);

184 
	`dvmAbÜt
();

185 
	}
}

191 
boŞ
 
	$javaLªgSŒšg_com·»To
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

192 
JV®ue
* 
pResuÉ
)

200 ià(!
	`dvmV®id©eObjeù
((
Objeù
*è
¬g0
) ||

201 !
	`dvmV®id©eObjeù
((
Objeù
*è
¬g1
))

203  
çl£
;

207 ià(
¬g0
 =ğ
¬g1
) {

208 
pResuÉ
->
i
 = 0;

209  
Œue
;

217 
thisCouÁ
, 
thisOff£t
, 
compCouÁ
, 
compOff£t
;

218 
A¼ayObjeù
* 
thisA¼ay
;

219 
A¼ayObjeù
* 
compA¼ay
;

220 cÚ¡ 
u2
* 
thisCh¬s
;

221 cÚ¡ 
u2
* 
compCh¬s
;

222 
i
, 
mšCouÁ
, 
couÁDiff
;

224 
thisCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

225 
compCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

226 
couÁDiff
 = 
thisCouÁ
 - 
compCouÁ
;

227 
mšCouÁ
 = (
couÁDiff
 < 0è? 
thisCouÁ
 : 
compCouÁ
;

228 
thisOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

229 
compOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

230 
thisA¼ay
 = (
A¼ayObjeù
*)

231 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

232 
compA¼ay
 = (
A¼ayObjeù
*)

233 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g1
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

234 
thisCh¬s
 = ((cÚ¡ 
u2
*è
thisA¼ay
->
cÚ‹Ás
è+ 
thisOff£t
;

235 
compCh¬s
 = ((cÚ¡ 
u2
*è
compA¼ay
->
cÚ‹Ás
è+ 
compOff£t
;

237 #ifdeà
HAVE__MEMCMP16


246 
Ùh”Res
 = 
	`__memcmp16
(
thisCh¬s
, 
compCh¬s
, 
mšCouÁ
);

247 #ifdeà
CHECK_MEMCMP16


248 
i
 = 0; i < 
mšCouÁ
; i++) {

249 ià(
thisCh¬s
[
i
] !ğ
compCh¬s
[i]) {

250 
pResuÉ
->
i
 = (
s4
è
thisCh¬s
[i] - (s4è
compCh¬s
[i];

251 ià(
pResuÉ
->
i
 !ğ
Ùh”Res
) {

252 
	`badM©ch
((
SŒšgObjeù
*è
¬g0
, (SŒšgObjeù*è
¬g1
,

253 
pResuÉ
->
i
, 
Ùh”Res
, "compareTo");

255  
Œue
;

259 ià(
Ùh”Res
 != 0) {

260 
pResuÉ
->
i
 = 
Ùh”Res
;

261  
Œue
;

270 
i
 = 0; i < 
mšCouÁ
; i++) {

271 ià(
thisCh¬s
[
i
] !ğ
compCh¬s
[i]) {

272 
pResuÉ
->
i
 = (
s4
è
thisCh¬s
[i] - (s4è
compCh¬s
[i];

273  
Œue
;

278 
pResuÉ
->
i
 = 
couÁDiff
;

279  
Œue
;

280 
	}
}

285 
boŞ
 
	$javaLªgSŒšg_equ®s
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

286 
JV®ue
* 
pResuÉ
)

291 ià(!
	`dvmV®id©eObjeù
((
Objeù
*è
¬g0
))

292  
çl£
;

295 ià(
¬g0
 =ğ
¬g1
) {

296 
pResuÉ
->
i
 = 
Œue
;

297  
Œue
;

306 ià(
¬g1
 =ğ0 || ((
Objeù
*è
¬g0
)->
şazz
 != ((Object*)‡rg1)->clazz) {

307 
pResuÉ
->
i
 = 
çl£
;

308  
Œue
;

316 
thisCouÁ
, 
thisOff£t
, 
compCouÁ
, 
compOff£t
;

317 
A¼ayObjeù
* 
thisA¼ay
;

318 
A¼ayObjeù
* 
compA¼ay
;

319 cÚ¡ 
u2
* 
thisCh¬s
;

320 cÚ¡ 
u2
* 
compCh¬s
;

321 
i
;

324 
thisCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

325 
compCouÁ
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

326 ià(
thisCouÁ
 !ğ
compCouÁ
) {

327 
pResuÉ
->
i
 = 
çl£
;

328  
Œue
;

331 
thisOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

332 
compOff£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g1
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

333 
thisA¼ay
 = (
A¼ayObjeù
*)

334 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

335 
compA¼ay
 = (
A¼ayObjeù
*)

336 
	`dvmG‘F›ldObjeù
((
Objeù
*è
¬g1
, 
gDvm
.
offJavaLªgSŒšg_v®ue
);

337 
thisCh¬s
 = ((cÚ¡ 
u2
*è
thisA¼ay
->
cÚ‹Ás
è+ 
thisOff£t
;

338 
compCh¬s
 = ((cÚ¡ 
u2
*è
compA¼ay
->
cÚ‹Ás
è+ 
compOff£t
;

340 #ifdeà
HAVE__MEMCMP16


341 
pResuÉ
->
i
 = (
	`__memcmp16
(
thisCh¬s
, 
compCh¬s
, 
thisCouÁ
) == 0);

342 #ifdeà
CHECK_MEMCMP16


343 
Ùh”Res
 = (
	`memcmp
(
thisCh¬s
, 
compCh¬s
, 
thisCouÁ
 * 2) == 0);

344 ià(
pResuÉ
->
i
 !ğ
Ùh”Res
) {

345 
	`badM©ch
((
SŒšgObjeù
*è
¬g0
, (SŒšgObjeù*è
¬g1
,

346 
Ùh”Res
, 
pResuÉ
->
i
, "equals-1");

361 
i
 = 
thisCouÁ
-1; i >= 0; --i)

363 ià(
thisCh¬s
[
i
] !ğ
compCh¬s
[i]) {

364 
pResuÉ
->
i
 = 
çl£
;

365  
Œue
;

368 
pResuÉ
->
i
 = 
Œue
;

371  
Œue
;

372 
	}
}

377 
boŞ
 
	$javaLªgSŒšg_Ëngth
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

378 
JV®ue
* 
pResuÉ
)

383 ià(!
	`dvmV®id©eObjeù
((
Objeù
*è
¬g0
))

384  
çl£
;

386 
pResuÉ
->
i
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¬g0
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

387  
Œue
;

388 
	}
}

400 
boŞ
 
	$javaLªgM©h_abs_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

401 
JV®ue
* 
pResuÉ
)

403 
s4
 
v®
 = (s4è
¬g0
;

404 
pResuÉ
->
i
 = (
v®
 >= 0) ? val : -val;

405  
Œue
;

406 
	}
}

411 
boŞ
 
	$javaLªgM©h_abs_lÚg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

412 
JV®ue
* 
pResuÉ
)

415 
u4
 
¬g
[2];

416 
s8
 
Î
;

417 } 
cÚv”t
;

419 
cÚv”t
.
¬g
[0] = 
¬g0
;

420 
cÚv”t
.
¬g
[1] = 
¬g1
;

421 
s8
 
v®
 = 
cÚv”t
.
Î
;

422 
pResuÉ
->
j
 = (
v®
 >= 0) ? val : -val;

423  
Œue
;

424 
	}
}

429 
boŞ
 
	$javaLªgM©h_abs_æßt
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

430 
JV®ue
* 
pResuÉ
)

433 
u4
 
¬g
;

434 
ff
;

435 } 
cÚv”t
;

438 
cÚv”t
.
¬g
 = 
¬g0
 & 0x7fffffff;

439 
pResuÉ
->
f
 = 
cÚv”t
.
ff
;

440  
Œue
;

441 
	}
}

446 
boŞ
 
	$javaLªgM©h_abs_doubË
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

447 
JV®ue
* 
pResuÉ
)

450 
u4
 
¬g
[2];

451 
s8
 
Î
;

452 
dd
;

453 } 
cÚv”t
;

456 
cÚv”t
.
¬g
[0] = 
¬g0
;

457 
cÚv”t
.
¬g
[1] = 
¬g1
;

458 
cÚv”t
.
Î
 &= 0x7fffffffffffffffULL;

459 
pResuÉ
->
d
 = 
cÚv”t
.
dd
;

460  
Œue
;

461 
	}
}

466 
boŞ
 
	$javaLªgM©h_mš_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

467 
JV®ue
* 
pResuÉ
)

469 
pResuÉ
->
i
 = ((
s4
è
¬g0
 < (s4è
¬g1
) ?‡rg0 :‡rg1;

470  
Œue
;

471 
	}
}

476 
boŞ
 
	$javaLªgM©h_max_št
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

477 
JV®ue
* 
pResuÉ
)

479 
pResuÉ
->
i
 = ((
s4
è
¬g0
 > (s4è
¬g1
) ?‡rg0 :‡rg1;

480  
Œue
;

481 
	}
}

490 
boŞ
 
	$javaLªgM©h_sq¹
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

491 
JV®ue
* 
pResuÉ
)

494 
u4
 
¬g
[2];

495 
dd
;

496 } 
cÚv”t
;

498 
cÚv”t
.
¬g
[0] = 
¬g0
;

499 
cÚv”t
.
¬g
[1] = 
¬g1
;

500 
pResuÉ
->
d
 = 
	`sq¹
(
cÚv”t
.
dd
);

501  
Œue
;

502 
	}
}

507 
boŞ
 
	$javaLªgM©h_cos
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

508 
JV®ue
* 
pResuÉ
)

511 
u4
 
¬g
[2];

512 
dd
;

513 } 
cÚv”t
;

515 
cÚv”t
.
¬g
[0] = 
¬g0
;

516 
cÚv”t
.
¬g
[1] = 
¬g1
;

517 
pResuÉ
->
d
 = 
	`cos
(
cÚv”t
.
dd
);

518  
Œue
;

519 
	}
}

524 
boŞ
 
	$javaLªgM©h_sš
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

525 
JV®ue
* 
pResuÉ
)

528 
u4
 
¬g
[2];

529 
dd
;

530 } 
cÚv”t
;

532 
cÚv”t
.
¬g
[0] = 
¬g0
;

533 
cÚv”t
.
¬g
[1] = 
¬g1
;

534 
pResuÉ
->
d
 = 
	`sš
(
cÚv”t
.
dd
);

535  
Œue
;

536 
	}
}

556 cÚ¡ 
IÆšeO³¿tiÚ
 
	ggDvmIÆšeOpsTabË
[] = {

557 { 
Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÆšeM‘hod
,

561 { 
javaLªgSŒšg_ch¬At
,

563 { 
javaLªgSŒšg_com·»To
,

565 { 
javaLªgSŒšg_equ®s
,

567 { 
javaLªgSŒšg_Ëngth
,

570 { 
javaLªgM©h_abs_št
,

572 { 
javaLªgM©h_abs_lÚg
,

574 { 
javaLªgM©h_abs_æßt
,

576 { 
javaLªgM©h_abs_doubË
,

578 { 
javaLªgM©h_mš_št
,

580 { 
javaLªgM©h_max_št
,

582 { 
javaLªgM©h_sq¹
,

584 { 
javaLªgM©h_cos
,

586 { 
javaLªgM©h_sš
,

594 
boŞ
 
	$dvmIÆšeN©iveS¹up
()

596 #ifdeà
WITH_PROFILER


597 
gDvm
.
šlšedM‘hods
 =

598 (
M‘hod
**è
	`ÿÎoc
(
	`NELEM
(
gDvmIÆšeOpsTabË
), (Method*));

599 ià(
gDvm
.
šlšedM‘hods
 =ğ
NULL
)

600  
çl£
;

603  
Œue
;

604 
	}
}

609 
	$dvmIÆšeN©iveShutdown
()

611 #ifdeà
WITH_PROFILER


612 
	`ä“
(
gDvm
.
šlšedM‘hods
);

614 
	}
}

620 cÚ¡ 
IÆšeO³¿tiÚ
* 
	$dvmG‘IÆšeOpsTabË
()

622  
gDvmIÆšeOpsTabË
;

623 
	}
}

628 
	$dvmG‘IÆšeOpsTabËL’gth
()

630  
	`NELEM
(
gDvmIÆšeOpsTabË
);

631 
	}
}

637 
boŞ
 
	$dvmP”fÜmIÆšeOp4Dbg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

638 
JV®ue
* 
pResuÉ
, 
İIndex
)

640 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

641 
boŞ
 
»suÉ
;

643 
	`as£¹
(
İIndex
 >ğ0 && opIndex < 
	`NELEM
(
gDvmIÆšeOpsTabË
));

645 #ifdeà
WITH_PROFILER


655 
M‘hod
* 
m‘hod
 = 
gDvm
.
šlšedM‘hods
[
İIndex
];

656 ià(
m‘hod
 =ğ
NULL
) {

657 
CÏssObjeù
* 
şazz
;

659 
şazz
 = 
	`dvmFšdCÏssNoIn™
(

660 
gDvmIÆšeOpsTabË
[
İIndex
].
şassDesütÜ
, 
NULL
);

661 ià(
şazz
 =ğ
NULL
) {

662 
	`LOGW
("W¬nšg: cª'ˆfšd cÏs '%s'\n", 
şazz
->
desütÜ
);

663 
sk_´of
;

665 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
,

666 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodName
,

667 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodSigÇtu»
);

668 ià(
m‘hod
 =ğ
NULL
)

669 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
,

670 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodName
,

671 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodSigÇtu»
);

672 ià(
m‘hod
 =ğ
NULL
) {

673 
	`LOGW
("Warning: can't find method %s.%s %s\n",

674 
şazz
->
desütÜ
,

675 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodName
,

676 
gDvmIÆšeOpsTabË
[
İIndex
].
m‘hodSigÇtu»
);

677 
sk_´of
;

680 
gDvm
.
šlšedM‘hods
[
İIndex
] = 
m‘hod
;

681 
	`IF_LOGV
() {

682 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

683 
	`LOGV
("Registered for…rofile: %s.%s %s\n",

684 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

685 
	`ä“
(
desc
);

689 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

690 
»suÉ
 = (*
gDvmIÆšeOpsTabË
[
İIndex
].
func
)(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
,

691 
pResuÉ
);

692 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

693  
»suÉ
;

695 
sk_´of
:

697  (*
gDvmIÆšeOpsTabË
[
İIndex
].
func
)(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, 
pResuÉ
);

698 
	}
}

	@InlineNative.h

19 #iâdeà
_DALVIK_INLINENATIVE


20 
	#_DALVIK_INLINENATIVE


	)

23 
boŞ
 
dvmIÆšeN©iveS¹up
();

24 
dvmIÆšeN©iveShutdown
();

29 
	$boŞ
 (*
	tIÆšeOp4Func
)(
	tu4
 
	t¬g0
, u4 
	t¬g1
, u4 
	t¬g2
, u4 
	t¬g3
,

30 
	tJV®ue
* 
	tpResuÉ
);

44 
	sIÆšeO³¿tiÚ
 {

45 
IÆšeOp4Func
 
func
;

46 cÚ¡ * 
şassDesütÜ
;

47 cÚ¡ * 
m‘hodName
;

48 cÚ¡ * 
m‘hodSigÇtu»
;

49 } 
	tIÆšeO³¿tiÚ
;

52 
	eN©iveIÆšeOps
 {

53 
INLINE_EMPTYINLINEMETHOD
 = 0,

54 
INLINE_STRING_CHARAT
 = 1,

55 
INLINE_STRING_COMPARETO
 = 2,

56 
INLINE_STRING_EQUALS
 = 3,

57 
INLINE_STRING_LENGTH
 = 4,

58 
INLINE_MATH_ABS_INT
 = 5,

59 
INLINE_MATH_ABS_LONG
 = 6,

60 
INLINE_MATH_ABS_FLOAT
 = 7,

61 
INLINE_MATH_ABS_DOUBLE
 = 8,

62 
INLINE_MATH_MIN_INT
 = 9,

63 
INLINE_MATH_MAX_INT
 = 10,

64 
INLINE_MATH_SQRT
 = 11,

65 
INLINE_MATH_COS
 = 12,

66 
INLINE_MATH_SIN
 = 13,

67 } 
	tN©iveIÆšeOps
;

72 cÚ¡ 
IÆšeO³¿tiÚ
* 
	`dvmG‘IÆšeOpsTabË
();

73 
	`dvmG‘IÆšeOpsTabËL’gth
();

79 cÚ¡ 
IÆšeO³¿tiÚ
 
gDvmIÆšeOpsTabË
[];

91 
INLINE
 
boŞ
 
	$dvmP”fÜmIÆšeOp4Std
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

92 
JV®ue
* 
pResuÉ
, 
İIndex
)

94  (*
gDvmIÆšeOpsTabË
[
İIndex
].
func
)(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, 
pResuÉ
);

95 
	}
}

100 
boŞ
 
dvmP”fÜmIÆšeOp4Dbg
(
u4
 
¬g0
, u4 
¬g1
, u4 
¬g2
, u4 
¬g3
,

101 
JV®ue
* 
pResuÉ
, 
İIndex
);

	@Inlines.c

21 
	#_DALVIK_GEN_INLINES


	)

22 
	~"D®vik.h
"

23 
	~"ª®ysis/CodeV”ify.h
"

24 
	~"ª®ysis/Regi¡”M­.h
"

25 
	~"m‹½/c/h—d”.c
"

27 #undeà
LOG_TAG


28 
	~"jdwp/JdwpPriv.h
"

	@Inlines.h

28 #iâdeà
_DALVIK_GEN_INLINES


29 
	#INLINE
 
__šlše__


	)

31 
	#INLINE


	)

	@Intern.c

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

23 
	#INTERN_STRING_IMMORTAL_BIT
 (1<<0)

	)

24 
	#SET_IMMORTAL_BIT
(
¡rObj
) \

25 ((
ušŒ_t
)(
¡rObj
è| 
INTERN_STRING_IMMORTAL_BIT
)

	)

26 
	#STRIP_IMMORTAL_BIT
(
¡rObj
) \

27 ((
ušŒ_t
)(
¡rObj
è& ~
INTERN_STRING_IMMORTAL_BIT
)

	)

28 
	#IS_IMMORTAL
(
¡rObj
) \

29 ((
ušŒ_t
)(
¡rObj
è& 
INTERN_STRING_IMMORTAL_BIT
)

	)

35 
boŞ
 
	$dvmSŒšgIÁ”nS¹up
()

37 
gDvm
.
š‹ºedSŒšgs
 = 
	`dvmHashTabËC»©e
(256, 
NULL
);

38 ià(
gDvm
.
š‹ºedSŒšgs
 =ğ
NULL
)

39  
çl£
;

41  
Œue
;

42 
	}
}

49 
	$dvmSŒšgIÁ”nShutdown
()

51 
	`dvmHashTabËF»e
(
gDvm
.
š‹ºedSŒšgs
);

52 
gDvm
.
š‹ºedSŒšgs
 = 
NULL
;

53 
	}
}

60 
	$hashcmpImmÜlSŒšgs
(cÚ¡ * 
v¡rObj1
, cÚ¡ * 
v¡rObj2
)

62  
	`dvmHashcmpSŒšgs
((cÚ¡ *è
	`STRIP_IMMORTAL_BIT
(
v¡rObj1
),

63 (cÚ¡ *è
	`STRIP_IMMORTAL_BIT
(
v¡rObj2
));

64 
	}
}

66 
SŒšgObjeù
* 
	$lookupIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
, 
boŞ
 
immÜl
)

68 
SŒšgObjeù
* 
found
;

69 
u4
 
hash
;

71 
	`as£¹
(
¡rObj
 !ğ
NULL
);

72 
hash
 = 
	`dvmCompu‹SŒšgHash
(
¡rObj
);

74 ià(
çl£
) {

75 * 
debugSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

76 
	`LOGV
("+++ dvmLookupIÁ”ÃdSŒšg s—rchšg fÜ '%s'\n", 
debugSŒ
);

77 
	`ä“
(
debugSŒ
);

80 ià(
immÜl
) {

81 
¡rObj
 = (
SŒšgObjeù
*è
	`SET_IMMORTAL_BIT
(strObj);

84 
	`dvmHashTabËLock
(
gDvm
.
š‹ºedSŒšgs
);

86 
found
 = (
SŒšgObjeù
*è
	`dvmHashTabËLookup
(
gDvm
.
š‹ºedSŒšgs
,

87 
hash
, 
¡rObj
, 
hashcmpImmÜlSŒšgs
, 
Œue
);

88 ià(
immÜl
 && !
	`IS_IMMORTAL
(
found
)) {

96 
	`dvmHashTabËRemove
(
gDvm
.
š‹ºedSŒšgs
, 
hash
, 
found
);

97 
found
 = (
SŒšgObjeù
*è
	`SET_IMMORTAL_BIT
(found);

98 
found
 = (
SŒšgObjeù
*è
	`dvmHashTabËLookup
(
gDvm
.
š‹ºedSŒšgs
,

99 
hash
, 
found
, 
hashcmpImmÜlSŒšgs
, 
Œue
);

100 
	`as£¹
(
	`IS_IMMORTAL
(
found
));

103 
	`dvmHashTabËUÆock
(
gDvm
.
š‹ºedSŒšgs
);

107  (
SŒšgObjeù
*è
	`STRIP_IMMORTAL_BIT
(
found
);

108 
	}
}

116 
SŒšgObjeù
* 
	$dvmLookupIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
)

118  
	`lookupIÁ”ÃdSŒšg
(
¡rObj
, 
çl£
);

119 
	}
}

125 
SŒšgObjeù
* 
	$dvmLookupImmÜlIÁ”ÃdSŒšg
(
SŒšgObjeù
* 
¡rObj
)

127  
	`lookupIÁ”ÃdSŒšg
(
¡rObj
, 
Œue
);

128 
	}
}

135 
	$m¬kSŒšgObjeù
(* 
¡rObj
, * 
¬g
)

137 
	`UNUSED_PARAMETER
(
¬g
);

139 ià(
	`IS_IMMORTAL
(
¡rObj
)) {

140 
	`dvmM¬kObjeùNÚNuÎ
((
Objeù
*è
	`STRIP_IMMORTAL_BIT
(
¡rObj
));

143 
	}
}

145 
	$dvmGcSÿnIÁ”ÃdSŒšgs
()

150 ià(
gDvm
.
š‹ºedSŒšgs
 !ğ
NULL
) {

151 
	`dvmHashTabËLock
(
gDvm
.
š‹ºedSŒšgs
);

152 
	`dvmHashFÜ—ch
(
gDvm
.
š‹ºedSŒšgs
, 
m¬kSŒšgObjeù
, 
NULL
);

153 
	`dvmHashTabËUÆock
(
gDvm
.
š‹ºedSŒšgs
);

155 
	}
}

163 
dvmGcD‘achD—dIÁ”ÃdSŒšgs
((*
isUnm¬kedObjeù
)(*))

168 ià(
gDvm
.
š‹ºedSŒšgs
 !ğ
NULL
) {

169 
	`dvmHashTabËLock
(
gDvm
.
š‹ºedSŒšgs
);

170 
	`dvmHashFÜ—chRemove
(
gDvm
.
š‹ºedSŒšgs
, 
isUnm¬kedObjeù
);

171 
	`dvmHashTabËUÆock
(
gDvm
.
š‹ºedSŒšgs
);

173 
	}
}

	@Intern.h

19 #iâdeà
_DALVIK_INTERN


20 
	#_DALVIK_INTERN


	)

22 
boŞ
 
dvmSŒšgIÁ”nS¹up
();

23 
dvmSŒšgIÁ”nShutdown
();

25 
SŒšgObjeù
* 
dvmLookupIÁ”ÃdSŒšg
(SŒšgObjeù* 
¡rObj
);

26 
SŒšgObjeù
* 
dvmLookupImmÜlIÁ”ÃdSŒšg
(SŒšgObjeù* 
¡rObj
);

	@JarFile.c

23 
	~"D®vik.h
"

24 
	~"libdex/O±InvoÿtiÚ.h
"

26 
	~<¡dlib.h
>

27 
	~<¡ršg.h
>

28 
	~<zlib.h
>

29 
	~<fú.h
>

30 
	~<”ºo.h
>

32 cÚ¡ * 
	gkDexInJ¬Name
 = "classes.dex";

43 
	$İ’AÉ”Ç‹Suffix
(cÚ¡ *
feName
, cÚ¡ *
suffix
,

44 
æags
, **
pCachedName
)

46 *
buf
, *
c
;

47 
size_t
 
feNameL’
 = 
	`¡¾’
(
feName
);

48 
size_t
 
suffixL’
 = 
	`¡¾’
(
suffix
);

49 
size_t
 
bufL’
 = 
feNameL’
 + 
suffixL’
 + 1;

50 
fd
 = -1;

52 
buf
 = 
	`m®loc
(
bufL’
);

53 ià(
buf
 =ğ
NULL
) {

54 
”ºo
 = 
ENOMEM
;

61 
	`memıy
(
buf
, 
feName
, 
feNameL’
 + 1);

62 
c
 = 
	`¡¼chr
(
buf
, '.');

63 ià(
c
 =ğ
NULL
) {

64 
”ºo
 = 
ENOENT
;

65 
ba
;

67 
	`memıy
(
c
 + 1, 
suffix
, 
suffixL’
 + 1);

69 
fd
 = 
	`İ’
(
buf
, 
æags
);

70 ià(
fd
 >= 0) {

71 *
pCachedName
 = 
buf
;

72  
fd
;

74 
	`LOGV
("Couldn'ˆİ’ %s: %s\n", 
buf
, 
	`¡»¼Ü
(
”ºo
));

75 
ba
:

76 
	`ä“
(
buf
);

78 
	}
}

84 
DexCacheStus
 
	$dvmDexCacheStus
(cÚ¡ *
feName
)

86 
ZArchive
 
¬chive
;

87 * 
ÿchedName
 = 
NULL
;

88 
fd
;

89 
DexCacheStus
 
»suÉ
 = 
DEX_CACHE_ERROR
;

90 
ZEÁry
 
’Œy
;

96 ià(
	`dvmCÏssP©hCÚšs
(
gDvm
.
boÙCÏssP©h
, 
feName
)) {

97  
DEX_CACHE_OK
;

106 ià(
	`dexZO³nArchive
(
feName
, &
¬chive
) != 0) {

107  
DEX_CACHE_BAD_ARCHIVE
;

109 
’Œy
 = 
	`dexZFšdEÁry
(&
¬chive
, 
kDexInJ¬Name
);

110 ià(
’Œy
 !ğ
NULL
) {

111 
boŞ
 
ÃwFe
 = 
çl£
;

117 
	`LOGV
("dvmDexCacheStus: Checkšg cachfÜ %s\n", 
feName
);

118 
ÿchedName
 = 
	`dexO±G’”©eCacheFeName
(
feName
, 
kDexInJ¬Name
);

119 ià(
ÿchedName
 =ğ
NULL
)

122 
fd
 = 
	`dvmO³nCachedDexFe
(
feName
, 
ÿchedName
,

123 
	`dexG‘ZEÁryModTime
(&
¬chive
, 
’Œy
),

124 
	`dexG‘ZEÁryCrc32
(&
¬chive
, 
’Œy
),

125  
çl£
, &
ÃwFe
, false);

126 
	`LOGV
("dvmO³nCachedDexF»tuºed fd %d\n", 
fd
);

127 ià(
fd
 < 0) {

128 
»suÉ
 = 
DEX_CACHE_STALE
;

129 
ba
;

135 ià(!
	`dvmUÆockCachedDexFe
(
fd
)) {

137 
	`LOGE
("Unableo unlock DEX file\n");

138 
ba
;

149 
fd
 = 
	`İ’AÉ”Ç‹Suffix
(
feName
, "odex", 
O_RDONLY
, &
ÿchedName
);

150 ià(
fd
 < 0) {

151 
	`LOGI
("Zip is good, but‚o %s inside,‡nd‚o .odex "

152 "fšh§mdœeùÜy\n", 
kDexInJ¬Name
);

153 
»suÉ
 = 
DEX_CACHE_BAD_ARCHIVE
;

154 
ba
;

157 
	`LOGV
("Usšg‡É”Ç‹ f(odexèfÜ % ...\n", 
feName
);

158 ià(!
	`dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
çl£
, 0, 0, 
Œue
,rue)) {

159 
	`LOGE
("% odex ha ¡®d•’d’c›s\n", 
feName
);

160 
	`LOGE
("odex source‚ot‡vailable -- failing\n");

161 
»suÉ
 = 
DEX_CACHE_STALE_ODEX
;

162 
ba
;

164 
	`LOGV
("% odex ha good d•’d’c›s\n", 
feName
);

167 
»suÉ
 = 
DEX_CACHE_OK
;

169 
ba
:

170 
	`dexZClo£Archive
(&
¬chive
);

171 
	`ä“
(
ÿchedName
);

172 ià(
fd
 >= 0) {

173 
	`şo£
(
fd
);

175  
»suÉ
;

176 
	}
}

186 
	$dvmJ¬FeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

187 
J¬Fe
** 
µJ¬Fe
, 
boŞ
 
isBoÙ¡¿p
)

189 
ZArchive
 
¬chive
;

190 
DvmDex
* 
pDvmDex
 = 
NULL
;

191 * 
ÿchedName
 = 
NULL
;

192 
boŞ
 
¬chiveO³n
 = 
çl£
;

193 
boŞ
 
locked
 = 
çl£
;

194 
fd
 = -1;

195 
»suÉ
 = -1;

200 ià(
	`dexZO³nArchive
(
feName
, &
¬chive
) != 0)

201 
ba
;

202 
¬chiveO³n
 = 
Œue
;

206 
	`dvmS‘Clo£OnExec
(
	`dexZG‘ArchiveFd
(&
¬chive
));

211 
fd
 = 
	`İ’AÉ”Ç‹Suffix
(
feName
, "odex", 
O_RDONLY
, &
ÿchedName
);

212 ià(
fd
 >= 0) {

213 
	`LOGV
("Usšg‡É”Ç‹ f(odexèfÜ % ...\n", 
feName
);

214 ià(!
	`dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
çl£
, 0, 0, 
Œue
,rue)) {

215 
	`LOGE
("% odex ha ¡®d•’d’c›s\n", 
feName
);

216 
	`ä“
(
ÿchedName
);

217 
	`şo£
(
fd
);

218 
fd
 = -1;

219 
ŒyArchive
;

221 
	`LOGV
("% odex ha good d•’d’c›s\n", 
feName
);

227 
ZEÁry
 
’Œy
;

229 
ŒyArchive
:

234 
’Œy
 = 
	`dexZFšdEÁry
(&
¬chive
, 
kDexInJ¬Name
);

235 ià(
’Œy
 !ğ
NULL
) {

236 
boŞ
 
ÃwFe
 = 
çl£
;

249 ià(
odexOuutName
 =ğ
NULL
) {

250 
ÿchedName
 = 
	`dexO±G’”©eCacheFeName
(
feName
,

251 
kDexInJ¬Name
);

252 ià(
ÿchedName
 =ğ
NULL
)

253 
ba
;

255 
ÿchedName
 = 
	`¡rdup
(
odexOuutName
);

257 
	`LOGV
("dvmDexCacheStatus: Checking cache for %s (%s)\n",

258 
feName
, 
ÿchedName
);

259 
fd
 = 
	`dvmO³nCachedDexFe
(
feName
, 
ÿchedName
,

260 
	`dexG‘ZEÁryModTime
(&
¬chive
, 
’Œy
),

261 
	`dexG‘ZEÁryCrc32
(&
¬chive
, 
’Œy
),

262 
isBoÙ¡¿p
, &
ÃwFe
, 
Œue
);

263 ià(
fd
 < 0) {

264 
	`LOGI
("Unableo open or create cache for %s (%s)\n",

265 
feName
, 
ÿchedName
);

266 
ba
;

268 
locked
 = 
Œue
;

276 ià(
ÃwFe
) {

277 
u8
 
¡¬tWh’
, 
exŒaùWh’
, 
’dWh’
;

278 
boŞ
 
»suÉ
;

279 
off_t
 
dexOff£t
, 
feL’
;

281 
dexOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_CUR
);

282 
»suÉ
 = (
dexOff£t
 > 0);

284 ià(
»suÉ
) {

285 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

286 
»suÉ
 = 
	`dexZExŒaùEÁryToFe
(&
¬chive
, 
’Œy
, 
fd
);

287 
exŒaùWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

289 ià(
»suÉ
) {

290 
»suÉ
 = 
	`dvmO±imizeDexFe
(
fd
, 
dexOff£t
,

291 
	`dexG‘ZEÁryUncompL’
(&
¬chive
, 
’Œy
),

292 
feName
,

293 
	`dexG‘ZEÁryModTime
(&
¬chive
, 
’Œy
),

294 
	`dexG‘ZEÁryCrc32
(&
¬chive
, 
’Œy
),

295 
isBoÙ¡¿p
);

298 ià(!
»suÉ
) {

299 
	`LOGE
("Unableoƒxtract+optimize DEX from '%s'\n",

300 
feName
);

301 
ba
;

304 
’dWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

305 
	`LOGD
("DEX…rep '%s': unzip in %dms,„ewrite %dms\n",

306 
feName
,

307 (è(
exŒaùWh’
 - 
¡¬tWh’
) / 1000,

308 (è(
’dWh’
 - 
exŒaùWh’
) / 1000);

311 
	`LOGI
("Zip is good, but‚o %s inside,‡nd‚o valid .odex "

312 "fšh§mdœeùÜy\n", 
kDexInJ¬Name
);

313 
ba
;

321 ià(
	`dvmDexFeO³nFromFd
(
fd
, &
pDvmDex
) != 0) {

322 
	`LOGI
("UÇbËØm­ % š %s\n", 
kDexInJ¬Name
, 
feName
);

323 
ba
;

326 ià(
locked
) {

328 ià(!
	`dvmUÆockCachedDexFe
(
fd
)) {

330 
	`LOGE
("Unableo unlock DEX file\n");

331 
ba
;

333 
locked
 = 
çl£
;

336 
	`LOGV
("SucûssfuÎy o³Ãd '%s' iÀ'%s'\n", 
kDexInJ¬Name
, 
feName
);

338 *
µJ¬Fe
 = (
J¬Fe
*è
	`ÿÎoc
(1, (JarFile));

339 (*
µJ¬Fe
)->
¬chive
 =‡rchive;

340 (*
µJ¬Fe
)->
ÿcheFeName
 = 
ÿchedName
;

341 (*
µJ¬Fe
)->
pDvmDex
 =…DvmDex;

342 
ÿchedName
 = 
NULL
;

343 
»suÉ
 = 0;

345 
ba
:

347 ià(
¬chiveO³n
 && 
»suÉ
 != 0)

348 
	`dexZClo£Archive
(&
¬chive
);

349 
	`ä“
(
ÿchedName
);

350 ià(
fd
 >= 0) {

351 ià(
locked
)

352 (è
	`dvmUÆockCachedDexFe
(
fd
);

353 
	`şo£
(
fd
);

355  
»suÉ
;

356 
	}
}

361 
	$dvmJ¬FeF»e
(
J¬Fe
* 
pJ¬Fe
)

363 ià(
pJ¬Fe
 =ğ
NULL
)

366 
	`dvmDexFeF»e
(
pJ¬Fe
->
pDvmDex
);

367 
	`dexZClo£Archive
(&
pJ¬Fe
->
¬chive
);

368 
	`ä“
(
pJ¬Fe
->
ÿcheFeName
);

369 
	`ä“
(
pJ¬Fe
);

370 
	}
}

	@JarFile.h

19 #iâdeà
_DALVIK_JARFILE


20 
	#_DALVIK_JARFILE


	)

26 
	sJ¬Fe
 {

27 
ZArchive
 
	m¬chive
;

29 * 
	mÿcheFeName
;

30 
DvmDex
* 
	mpDvmDex
;

31 } 
	tJ¬Fe
;

39 
dvmJ¬FeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

40 
J¬Fe
** 
µJ¬Fe
, 
boŞ
 
isBoÙ¡¿p
);

45 
dvmJ¬FeF»e
(
J¬Fe
* 
pJ¬Fe
);

48 
INLINE
 
DvmDex
* 
	$dvmG‘J¬FeDex
(
J¬Fe
* 
pJ¬Fe
) {

49  
pJ¬Fe
->
pDvmDex
;

50 
	}
}

53 
INLINE
 cÚ¡ * 
	$dvmG‘J¬FeCacheFeName
(
J¬Fe
* 
pJ¬Fe
) {

54  
pJ¬Fe
->
ÿcheFeName
;

55 
	}
}

57 
	eDexCacheStus
 {

58 
	mDEX_CACHE_ERROR
 = -2,

59 
	mDEX_CACHE_BAD_ARCHIVE
 = -1,

60 
	mDEX_CACHE_OK
 = 0,

61 
	mDEX_CACHE_STALE
,

62 
	mDEX_CACHE_STALE_ODEX
,

63 } 
	tDexCacheStus
;

69 
DexCacheStus
 
dvmDexCacheStus
(cÚ¡ *
feName
);

	@Jni.c

20 
	~"D®vik.h
"

21 
	~"JniIÁ”Çl.h
"

23 
	~<¡dlib.h
>

24 
	~<¡d¬g.h
>

25 
	~<lim™s.h
>

238 cÚ¡ 
JNIN©iveIÁ”çû
 
	ggN©iveIÁ”çû
;

239 
jobjeù
 
addGlob®Reã»nû
(
Objeù
* 
obj
);

241 #ifdeà
WITH_JNI_STACK_CHECK


242 
	#COMPUTE_STACK_SUM
(
_£lf
è
	`compu‹SckSum
(_£lf);

	)

243 
	#CHECK_STACK_SUM
(
_£lf
è
	`checkSckSum
(_£lf);

	)

247 
	#COMPUTE_STACK_SUM
(
_£lf
è(()0)

	)

248 
	#CHECK_STACK_SUM
(
_£lf
è(()0)

	)

268 
	#TRUSTED_JNIENV


	)

269 #ifdeà
TRUSTED_JNIENV


270 
	#JNI_ENTER
() \

271 
Th»ad
* 
_£lf
 = ((
JNIEnvExt
*)
’v
)->
£lf
; \

272 
	`CHECK_STACK_SUM
(
_£lf
); \

273 
	`dvmChªgeStus
(
_£lf
, 
THREAD_RUNNING
)

	)

275 
	#JNI_ENTER
() \

276 
Th»ad
* 
_£lf
 = 
	`dvmTh»adS–f
(); \

277 
	`UNUSED_PARAMETER
(
’v
); \

278 
	`CHECK_STACK_SUM
(
_£lf
); \

279 
	`dvmChªgeStus
(
_£lf
, 
THREAD_RUNNING
)

	)

281 
	#JNI_EXIT
() \

282 
	`dvmChªgeStus
(
_£lf
, 
THREAD_NATIVE
); \

283 
	`COMPUTE_STACK_SUM
(
_£lf
)

	)

285 
	#kGlob®RefsTabËIn™ŸlSize
 512

	)

286 
	#kGlob®RefsTabËMaxSize
 51200

	)

287 
	#kG»fW©”IÁ”v®
 100

	)

288 
	#kT¿ckG»fU§ge
 
Œue


	)

290 
	#kPšTabËIn™ŸlSize
 16

	)

291 
	#kPšTabËMaxSize
 1024

	)

292 
	#kPšCom¶ašTh»shŞd
 10

	)

298 
boŞ
 
	$dvmJniS¹up
()

300 #ifdeà
USE_INDIRECT_REF


301 ià(!
	`dvmIn™IndœeùRefTabË
(&
gDvm
.
jniGlob®RefTabË
,

302 
kGlob®RefsTabËIn™ŸlSize
, 
kGlob®RefsTabËMaxSize
,

303 
kIndœeùKšdGlob®
))

304  
çl£
;

306 ià(!
	`dvmIn™Reã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
,

307 
kGlob®RefsTabËIn™ŸlSize
, 
kGlob®RefsTabËMaxSize
))

308  
çl£
;

311 
	`dvmIn™Mu‹x
(&
gDvm
.
jniGlob®RefLock
);

312 
gDvm
.
jniGlob®RefLoM¬k
 = 0;

313 
gDvm
.
jniGlob®RefHiM¬k
 = 
kG»fW©”IÁ”v®
 * 2;

315 ià(!
	`dvmIn™Reã»nûTabË
(&
gDvm
.
jniPšRefTabË
,

316 
kPšTabËIn™ŸlSize
, 
kPšTabËMaxSize
))

317  
çl£
;

319 
	`dvmIn™Mu‹x
(&
gDvm
.
jniPšRefLock
);

325 
M‘hod
* 
m‘h
;

327 
CÏssObjeù
* 
¶©fÜmAdd»ssCÏss
 =

328 
	`dvmFšdSy¡emCÏssNoIn™
("Lorg/apache/harmony/luni/platform/PlatformAddress;");

329 
CÏssObjeù
* 
¶©fÜmAdd»ssFaùÜyCÏss
 =

330 
	`dvmFšdSy¡emCÏssNoIn™
("Lorg/apache/harmony/luni/platform/PlatformAddressFactory;");

331 
CÏssObjeù
* 
dœeùBufãrCÏss
 =

332 
	`dvmFšdSy¡emCÏssNoIn™
("Lorg/apache/harmony/nio/internal/DirectBuffer;");

333 
CÏssObjeù
* 
»adWr™eBufãrCÏss
 =

334 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/nio/ReadWriteDirectByteBuffer;");

335 
CÏssObjeù
* 
bufãrCÏss
 =

336 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/nio/Buffer;");

338 ià(
¶©fÜmAdd»ssCÏss
 =ğ
NULL
 || 
¶©fÜmAdd»ssFaùÜyCÏss
 == NULL ||

339 
dœeùBufãrCÏss
 =ğ
NULL
 || 
»adWr™eBufãrCÏss
 == NULL ||

340 
bufãrCÏss
 =ğ
NULL
)

342 
	`LOGE
("Unableo find internal direct buffer classes\n");

343  
çl£
;

345 
gDvm
.
şassJavaNioR—dWr™eDœeùBy‹Bufãr
 = 
»adWr™eBufãrCÏss
;

346 
gDvm
.
şassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
 = 
dœeùBufãrCÏss
;

348 
gDvm
.
jşassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
 =

349 
	`addGlob®Reã»nû
((
Objeù
*è
dœeùBufãrCÏss
);

355 
m‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(

356 
gDvm
.
şassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
,

359 ià(
m‘h
 =ğ
NULL
) {

360 
	`LOGE
("Unableo find PlatformAddress.getEffectiveAddress\n");

361  
çl£
;

363 
gDvm
.
m‘hOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr_g‘EfãùiveAdd»ss
 = 
m‘h
;

365 
m‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
¶©fÜmAdd»ssCÏss
,

367 ià(
m‘h
 =ğ
NULL
) {

368 
	`LOGE
("Unableo find PlatformAddress.toLong\n");

369  
çl£
;

371 
gDvm
.
voffOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_toLÚg
 =

372 
m‘h
->
m‘hodIndex
;

374 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
¶©fÜmAdd»ssFaùÜyCÏss
,

377 ià(
m‘h
 =ğ
NULL
) {

378 
	`LOGE
("Unableo find PlatformAddressFactory.on\n");

379  
çl£
;

381 
gDvm
.
m‘hOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_Ú
 = 
m‘h
;

383 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
»adWr™eBufãrCÏss
,

386 ià(
m‘h
 =ğ
NULL
) {

387 
	`LOGE
("Unableo find ReadWriteDirectByteBuffer.<init>\n");

388  
çl£
;

390 
gDvm
.
m‘hJavaNioR—dWr™eDœeùBy‹Bufãr_š™
 = 
m‘h
;

392 
gDvm
.
offOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_o§ddr
 =

393 
	`dvmFšdF›ldOff£t
(
¶©fÜmAdd»ssCÏss
, "osaddr", "I");

394 ià(
gDvm
.
offOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_o§ddr
 < 0) {

395 
	`LOGE
("Unableo find PlatformAddress.osaddr\n");

396  
çl£
;

399 
gDvm
.
offJavaNioBufãr_ÿ·c™y
 =

400 
	`dvmFšdF›ldOff£t
(
bufãrCÏss
, "capacity", "I");

401 ià(
gDvm
.
offJavaNioBufãr_ÿ·c™y
 < 0) {

402 
	`LOGE
("Unableo find Buffer.capacity\n");

403  
çl£
;

406 
gDvm
.
offJavaNioBufãr_efãùiveDœeùAdd»ss
 =

407 
	`dvmFšdF›ldOff£t
(
bufãrCÏss
, "effectiveDirectAddress", "I");

408 ià(
gDvm
.
offJavaNioBufãr_efãùiveDœeùAdd»ss
 < 0) {

409 
	`LOGE
("Unableo find Buffer.effectiveDirectAddress\n");

410  
çl£
;

413 #ifdeà
WITH_TAINT_TRACKING


414 
	`dvmTaštPrİJniS¹up
();

417  
Œue
;

418 
	}
}

423 
	$dvmJniShutdown
()

425 #ifdeà
USE_INDIRECT_REF


426 
	`dvmCË¬IndœeùRefTabË
(&
gDvm
.
jniGlob®RefTabË
);

428 
	`dvmCË¬Reã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
);

431 #ifdeà
WITH_TAINT_TRACKING


432 
	`dvmTaštPrİJniShutdown
();

434 
	}
}

443 
JNIEnvExt
* 
	$dvmG‘JNIEnvFÜTh»ad
()

445 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

446 ià(
£lf
 =ğ
NULL
)

447  
NULL
;

448  (
JNIEnvExt
*è
	`dvmG‘Th»adJNIEnv
(
£lf
);

449 
	}
}

457 
JNIEnv
* 
	$dvmC»©eJNIEnv
(
Th»ad
* 
£lf
)

459 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvm
.
vmLi¡
;

460 
JNIEnvExt
* 
ÃwEnv
;

465 
	`as£¹
(
vm
 !ğ
NULL
);

467 
ÃwEnv
 = (
JNIEnvExt
*è
	`ÿÎoc
(1, (JNIEnvExt));

468 
ÃwEnv
->
funcTabË
 = &
gN©iveIÁ”çû
;

469 
ÃwEnv
->
vm
 = vm;

470 
ÃwEnv
->
fÜûD©aCİy
 = 
vm
->forceDataCopy;

471 ià(
£lf
 !ğ
NULL
) {

472 
	`dvmS‘JniEnvTh»adId
((
JNIEnv
*è
ÃwEnv
, 
£lf
);

473 
	`as£¹
(
ÃwEnv
->
’vTh»adId
 != 0);

476 
ÃwEnv
->
’vTh»adId
 = 0x77777775;

477 
ÃwEnv
->
£lf
 = (
Th»ad
*) 0x77777779;

479 ià(
vm
->
u£Checked
)

480 
	`dvmU£CheckedJniEnv
(
ÃwEnv
);

482 
	`dvmLockMu‹x
(&
vm
->
’vLi¡Lock
);

485 
ÃwEnv
->
Ãxt
 = 
vm
->
’vLi¡
;

486 
	`as£¹
(
ÃwEnv
->
´ev
 =ğ
NULL
);

487 ià(
vm
->
’vLi¡
 =ğ
NULL
)

488 
vm
->
’vLi¡
 = 
ÃwEnv
;

490 
vm
->
’vLi¡
->
´ev
 = 
ÃwEnv
;

491 
vm
->
’vLi¡
 = 
ÃwEnv
;

493 
	`dvmUÆockMu‹x
(&
vm
->
’vLi¡Lock
);

497  (
JNIEnv
*è
ÃwEnv
;

498 
	}
}

503 
	$dvmDe¡royJNIEnv
(
JNIEnv
* 
’v
)

505 
JNIEnvExt
* 
extEnv
 = (JNIEnvExt*è
’v
;

506 
JavaVMExt
* 
vm
 = 
extEnv
->vm;

507 
Th»ad
* 
£lf
;

509 ià(
’v
 =ğ
NULL
)

512 
£lf
 = 
	`dvmTh»adS–f
();

513 
	`as£¹
(
£lf
 !ğ
NULL
);

517 
	`dvmLockMu‹x
(&
vm
->
’vLi¡Lock
);

519 ià(
extEnv
 =ğ
vm
->
’vLi¡
) {

520 
	`as£¹
(
extEnv
->
´ev
 =ğ
NULL
);

521 
vm
->
’vLi¡
 = 
extEnv
->
Ãxt
;

523 
	`as£¹
(
extEnv
->
´ev
 !ğ
NULL
);

524 
extEnv
->
´ev
->
Ãxt
 =ƒxtEnv->next;

526 ià(
extEnv
->
Ãxt
 !ğ
NULL
)

527 
extEnv
->
Ãxt
->
´ev
 =ƒxtEnv->prev;

529 
	`dvmUÆockMu‹x
(&
extEnv
->
vm
->
’vLi¡Lock
);

531 
	`ä“
(
’v
);

533 
	}
}

542 #ifdeà
USE_INDIRECT_REF


543 
šlše
 
IndœeùRefTabË
* 
	$g‘LoÿlRefTabË
(
JNIEnv
* 
’v
)

545 
šlše
 
Reã»nûTabË
* 
	$g‘LoÿlRefTabË
(
JNIEnv
* 
’v
)

549  &((
JNIEnvExt
*)
’v
)->
£lf
->
jniLoÿlRefTabË
;

550 
	}
}

552 #ifdeà
USE_INDIRECT_REF


559 
Objeù
* 
	$dvmDecodeIndœeùRef
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

561 ià(
jobj
 =ğ
NULL
)

562  
NULL
;

564 
Objeù
* 
»suÉ
;

566 
	`dvmG‘IndœeùRefTy³
(
jobj
)) {

567 
kIndœeùKšdLoÿl
:

569 
IndœeùRefTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

570 
»suÉ
 = 
	`dvmG‘FromIndœeùRefTabË
(
pRefTabË
, 
jobj
);

573 
kIndœeùKšdGlob®
:

576 
IndœeùRefTabË
* 
pRefTabË
 = &
gDvm
.
jniGlob®RefTabË
;

577 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

578 
»suÉ
 = 
	`dvmG‘FromIndœeùRefTabË
(
pRefTabË
, 
jobj
);

579 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

582 
kIndœeùKšdW—kGlob®
:

584 
	`LOGE
("weak-global‚ot yet supported\n");

585 
»suÉ
 = 
NULL
;

586 
	`dvmAbÜt
();

589 
kIndœeùKšdInv®id
:

591 
	`LOGW
("Inv®id indœeù„eã»nû %°š decodeIndœeùRef\n", 
jobj
);

592 
	`dvmAbÜt
();

593 
»suÉ
 = 
NULL
;

597  
»suÉ
;

598 
	}
}

615 
jobjeù
 
	$addLoÿlReã»nû
(
JNIEnv
* 
’v
, 
Objeù
* 
obj
)

617 ià(
obj
 =ğ
NULL
)

618  
NULL
;

620 
jobjeù
 
jobj
;

622 #ifdeà
USE_INDIRECT_REF


623 
IndœeùRefTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

624 * 
curF¿me
 = ((
JNIEnvExt
*)
’v
)->
£lf
->curFrame;

625 
u4
 
cook›
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
xŒa
.
loÿlRefCook›
;

627 
jobj
 = (
jobjeù
è
	`dvmAddToIndœeùRefTabË
(
pRefTabË
, 
cook›
, 
obj
);

628 ià(
jobj
 =ğ
NULL
) {

629 
	`dvmDumpIndœeùRefTabË
(
pRefTabË
, "JNI†ocal");

630 
	`LOGE
("Failed‡ddingo JNI†ocal„efable (has %dƒntries)\n",

631 (è
	`dvmIndœeùRefTabËEÁr›s
(
pRefTabË
));

632 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

633 
	`dvmAbÜt
();

635 
	`LOGVV
("LREF‡dd %° (%s.%sèÓÁ=%d)\n", 
obj
,

636 
	`dvmG‘Cu¼’tJNIM‘hod
()->
şazz
->
desütÜ
,

637 
	`dvmG‘Cu¼’tJNIM‘hod
()->
Çme
,

638 (è
	`dvmReã»nûTabËEÁr›s
(
pRefTabË
));

641 
Reã»nûTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

643 ià(!
	`dvmAddToReã»nûTabË
(
pRefTabË
, 
obj
)) {

644 
	`dvmDumpReã»nûTabË
(
pRefTabË
, "JNI†ocal");

645 
	`LOGE
("Failed‡ddingo JNI†ocal„efable (has %dƒntries)\n",

646 (è
	`dvmReã»nûTabËEÁr›s
(
pRefTabË
));

647 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

648 
	`dvmAbÜt
();

650 
	`LOGVV
("LREF‡dd %° (%s.%sèÓÁ=%d)\n", 
obj
,

651 
	`dvmG‘Cu¼’tJNIM‘hod
()->
şazz
->
desütÜ
,

652 
	`dvmG‘Cu¼’tJNIM‘hod
()->
Çme
,

653 (è
	`dvmReã»nûTabËEÁr›s
(
pRefTabË
));

656 
jobj
 = (
jobjeù
è
obj
;

659  
jobj
;

660 
	}
}

666 
boŞ
 
	$’su»LoÿlC­ac™y
(
JNIEnv
* 
’v
, 
ÿ·c™y
)

668 #ifdeà
USE_INDIRECT_REF


669 
IndœeùRefTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

670 
numEÁr›s
 = 
	`dvmIndœeùRefTabËEÁr›s
(
pRefTabË
);

672  ((
kJniLoÿlRefMax
 - 
numEÁr›s
è>ğ
ÿ·c™y
);

674 
Reã»nûTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

676  (
kJniLoÿlRefMax
 - (
pRefTabË
->
ÃxtEÁry
 -…RefTabË->
bË
è>ğ
ÿ·c™y
);

678 
	}
}

683 
	$d–‘eLoÿlReã»nû
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

685 ià(
jobj
 =ğ
NULL
)

688 #ifdeà
USE_INDIRECT_REF


689 
IndœeùRefTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

690 
Th»ad
* 
£lf
 = ((
JNIEnvExt
*)
’v
)->self;

691 
u4
 
cook›
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
)->
xŒa
.
loÿlRefCook›
;

693 ià(!
	`dvmRemoveFromIndœeùRefTabË
(
pRefTabË
, 
cook›
, 
jobj
)) {

701 
	`LOGW
("JNI WARNING: D–‘eLoÿlRef(%pèçedØfšdƒÁry\n", 
jobj
);

704 
Reã»nûTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

705 
Th»ad
* 
£lf
 = ((
JNIEnvExt
*)
’v
)->self;

706 
Objeù
** 
bÙtom
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
)->
xŒa
.
loÿlRefCook›
;

708 ià(!
	`dvmRemoveFromReã»nûTabË
(
pRefTabË
, 
bÙtom
, (
Objeù
*è
jobj
)) {

716 
	`LOGW
("JNI WARNING: DeleteLocalRef(%p) failedo findƒntry (valid=%d)\n",

717 
jobj
, 
	`dvmIsV®idObjeù
((
Objeù
*) jobj));

720 
	}
}

728 
jobjeù
 
	$addGlob®Reã»nû
(
Objeù
* 
obj
)

730 ià(
obj
 =ğ
NULL
)

731  
NULL
;

736 ià(
çl£
 && ((
Objeù
*)
obj
)->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

737 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
obj
;

738 
	`LOGI
("-------\n");

739 
	`LOGI
("Addšg glob®„eàÚ cÏs %s\n", 
şazz
->
desütÜ
);

740 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

742 ià(
çl£
 && ((
Objeù
*)
obj
)->
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
) {

743 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
obj
;

744 * 
¡r
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

745 ià(
	`¡rcmp
(
¡r
, "sync-response") == 0) {

746 
	`LOGI
("-------\n");

747 
	`LOGI
("Addšg glob®„eàÚ sŒšg '%s'\n", 
¡r
);

748 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

751 
	`ä“
(
¡r
);

753 ià(
çl£
 && ((
Objeù
*)
obj
)->
şazz
 =ğ
gDvm
.
şassA¼ayBy‹
) {

754 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
obj
;

755 ià(
¬¿yObj
->
Ëngth
 == 8192

758 
	`LOGI
("Adding global„ef on byte‡rray %p (len=%d)\n",

759 
¬¿yObj
,‡¼ayObj->
Ëngth
);

760 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

764 
jobjeù
 
jobj
;

766 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

777 #ifdeà
USE_INDIRECT_REF


778 
jobj
 = 
	`dvmAddToIndœeùRefTabË
(&
gDvm
.
jniGlob®RefTabË
, 
IRT_FIRST_SEGMENT
,

779 
obj
);

780 ià(
jobj
 =ğ
NULL
) {

781 
	`dvmDumpIndœeùRefTabË
(&
gDvm
.
jniGlob®RefTabË
, "JNI global");

782 
	`LOGE
("Failed‡ddingo JNI global„efable (%dƒntries)\n",

783 (è
	`dvmIndœeùRefTabËEÁr›s
(&
gDvm
.
jniGlob®RefTabË
));

784 
	`dvmAbÜt
();

787 
	`LOGVV
("GREF‡dd %° (%s.%s)\n", 
obj
,

788 
	`dvmG‘Cu¼’tJNIM‘hod
()->
şazz
->
desütÜ
,

789 
	`dvmG‘Cu¼’tJNIM‘hod
()->
Çme
);

792 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

793 
couÁ
 = 
	`dvmIndœeùRefTabËEÁr›s
(&
gDvm
.
jniGlob®RefTabË
);

795 ià(
couÁ
 > 
gDvm
.
jniGlob®RefHiM¬k
) {

796 
	`LOGD
("GREF ha šü—£dØ%d\n", 
couÁ
);

797 
gDvm
.
jniGlob®RefHiM¬k
 +ğ
kG»fW©”IÁ”v®
;

798 
gDvm
.
jniGlob®RefLoM¬k
 +ğ
kG»fW©”IÁ”v®
;

801 ià(
couÁ
 >ğ
gDvm
.
jniG»fLim™
) {

802 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvm
.
vmLi¡
;

803 ià(
vm
->
w¬nE¼Ü
) {

804 
	`dvmDumpIndœeùRefTabË
(&
gDvm
.
jniGlob®RefTabË
,

806 
	`LOGE
("ExûssivJNI glob®„eã»nû (%d)\n", 
couÁ
);

807 
	`dvmAbÜt
();

809 
	`LOGW
("ExûssivJNI glob®„eã»nû (%d)\n", 
couÁ
);

815 ià(!
	`dvmAddToReã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
, 
obj
)) {

816 
	`dvmDumpReã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
, "JNI global");

817 
	`LOGE
("Failed‡ddingo JNI global„efable (%dƒntries)\n",

818 (è
	`dvmReã»nûTabËEÁr›s
(&
gDvm
.
jniGlob®RefTabË
));

819 
	`dvmAbÜt
();

821 
jobj
 = (
jobjeù
è
obj
;

823 
	`LOGVV
("GREF‡dd %° (%s.%s)\n", 
obj
,

824 
	`dvmG‘Cu¼’tJNIM‘hod
()->
şazz
->
desütÜ
,

825 
	`dvmG‘Cu¼’tJNIM‘hod
()->
Çme
);

828 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

829 
couÁ
 = 
	`dvmReã»nûTabËEÁr›s
(&
gDvm
.
jniGlob®RefTabË
);

830 ià(
couÁ
 > 
gDvm
.
jniGlob®RefHiM¬k
) {

831 
	`LOGD
("GREF ha šü—£dØ%d\n", 
couÁ
);

832 
gDvm
.
jniGlob®RefHiM¬k
 +ğ
kG»fW©”IÁ”v®
;

833 
gDvm
.
jniGlob®RefLoM¬k
 +ğ
kG»fW©”IÁ”v®
;

836 ià(
couÁ
 >ğ
gDvm
.
jniG»fLim™
) {

837 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvm
.
vmLi¡
;

838 ià(
vm
->
w¬nE¼Ü
) {

839 
	`dvmDumpReã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
,"JNI global");

840 
	`LOGE
("ExûssivJNI glob®„eã»nû (%d)\n", 
couÁ
);

841 
	`dvmAbÜt
();

843 
	`LOGW
("ExûssivJNI glob®„eã»nû (%d)\n", 
couÁ
);

850 
ba
:

851 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

852  
jobj
;

853 
	}
}

862 
	$d–‘eGlob®Reã»nû
(
jobjeù
 
jobj
)

864 ià(
jobj
 =ğ
NULL
)

867 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

869 #ifdeà
USE_INDIRECT_REF


870 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
gDvm
.
jniGlob®RefTabË
,

871 
IRT_FIRST_SEGMENT
, 
jobj
))

873 
	`LOGW
("JNI: D–‘eGlob®Ref(%pèçedØfšdƒÁry\n", 
jobj
);

874 
ba
;

877 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

878 
couÁ
 = 
	`dvmIndœeùRefTabËEÁr›s
(&
gDvm
.
jniGlob®RefTabË
);

880 ià(
couÁ
 < 
gDvm
.
jniGlob®RefLoM¬k
) {

881 
	`LOGD
("GREF ha deü—£dØ%d\n", 
couÁ
);

882 
gDvm
.
jniGlob®RefHiM¬k
 -ğ
kG»fW©”IÁ”v®
;

883 
gDvm
.
jniGlob®RefLoM¬k
 -ğ
kG»fW©”IÁ”v®
;

887 ià(!
	`dvmRemoveFromReã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
,

888 
gDvm
.
jniGlob®RefTabË
.
bË
, 
jobj
))

890 
	`LOGW
("JNI: DeleteGlobalRef(%p) failedo findƒntry (valid=%d)\n",

891 
jobj
, 
	`dvmIsV®idObjeù
((
Objeù
*) jobj));

892 
ba
;

895 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

896 
couÁ
 = 
	`dvmReã»nûTabËEÁr›s
(&
gDvm
.
jniGlob®RefTabË
);

897 ià(
couÁ
 < 
gDvm
.
jniGlob®RefLoM¬k
) {

898 
	`LOGD
("GREF ha deü—£dØ%d\n", 
couÁ
);

899 
gDvm
.
jniGlob®RefHiM¬k
 -ğ
kG»fW©”IÁ”v®
;

900 
gDvm
.
jniGlob®RefLoM¬k
 -ğ
kG»fW©”IÁ”v®
;

905 
ba
:

906 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

907 
	}
}

915 
	$pšPrim™iveA¼ay
(
A¼ayObjeù
* 
¬¿yObj
)

917 ià(
¬¿yObj
 =ğ
NULL
)

920 
	`dvmLockMu‹x
(&
gDvm
.
jniPšRefLock
);

921 ià(!
	`dvmAddToReã»nûTabË
(&
gDvm
.
jniPšRefTabË
, (
Objeù
*)
¬¿yObj
)) {

922 
	`dvmDumpReã»nûTabË
(&
gDvm
.
jniPšRefTabË
, "JNI…inned‡rray");

923 
	`LOGE
("Failed‡ddingo JNI…inned‡rray„efable (%dƒntries)\n",

924 (è
	`dvmReã»nûTabËEÁr›s
(&
gDvm
.
jniPšRefTabË
));

925 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

926 
	`dvmAbÜt
();

937 ià(
kT¿ckG»fU§ge
 && 
gDvm
.
jniG»fLim™
 != 0) {

938 
couÁ
 = 0;

939 
Objeù
** 
µObj
 = 
gDvm
.
jniPšRefTabË
.
bË
;

940 
µObj
 < 
gDvm
.
jniPšRefTabË
.
ÃxtEÁry
) {

941 ià(*
µObj
++ =ğ(
Objeù
*è
¬¿yObj
)

942 
couÁ
++;

945 ià(
couÁ
 > 
kPšCom¶ašTh»shŞd
) {

946 
	`LOGW
("JNI:…in count on‡rray %p (%s) is‚ow %d\n",

947 
¬¿yObj
,‡¼ayObj->
obj
.
şazz
->
desütÜ
, 
couÁ
);

952 
	`dvmUÆockMu‹x
(&
gDvm
.
jniPšRefLock
);

953 
	}
}

959 
	$uÅšPrim™iveA¼ay
(
A¼ayObjeù
* 
¬¿yObj
)

961 ià(
¬¿yObj
 =ğ
NULL
)

964 
	`dvmLockMu‹x
(&
gDvm
.
jniPšRefLock
);

965 ià(!
	`dvmRemoveFromReã»nûTabË
(&
gDvm
.
jniPšRefTabË
,

966 
gDvm
.
jniPšRefTabË
.
bË
, (
Objeù
*è
¬¿yObj
))

968 
	`LOGW
("JNI: unpinPrimitiveArray(%p) failedo findƒntry (valid=%d)\n",

969 
¬¿yObj
, 
	`dvmIsV®idObjeù
((
Objeù
*)‡rrayObj));

970 
ba
;

973 
ba
:

974 
	`dvmUÆockMu‹x
(&
gDvm
.
jniPšRefLock
);

975 
	}
}

982 
	$dvmGcM¬kJniGlob®Refs
()

984 
Objeù
** 
İ
;

986 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

988 #ifdeà
USE_INDIRECT_REF


989 
IndœeùRefTabË
* 
pRefTabË
 = &
gDvm
.
jniGlob®RefTabË
;

990 
İ
 = 
pRefTabË
->
bË
;

991 
numEÁr›s
 = 
	`dvmIndœeùRefTabËEÁr›s
(
pRefTabË
);

992 
i
;

994 
i
 = 0; i < 
numEÁr›s
; i++) {

995 
Objeù
* 
obj
 = *
İ
;

996 ià(
obj
 !ğ
NULL
)

997 
	`dvmM¬kObjeùNÚNuÎ
(
obj
);

998 
İ
++;

1001 
İ
 = 
gDvm
.
jniGlob®RefTabË
.
bË
;

1002 (
ušŒ_t
)
İ
 < (ušŒ_t)
gDvm
.
jniGlob®RefTabË
.
ÃxtEÁry
) {

1003 
	`dvmM¬kObjeùNÚNuÎ
(*(
İ
++));

1007 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

1010 
	`dvmLockMu‹x
(&
gDvm
.
jniPšRefLock
);

1012 
İ
 = 
gDvm
.
jniPšRefTabË
.
bË
;

1013 (
ušŒ_t
)
İ
 < (ušŒ_t)
gDvm
.
jniPšRefTabË
.
ÃxtEÁry
) {

1014 
	`dvmM¬kObjeùNÚNuÎ
(*(
İ
++));

1017 
	`dvmUÆockMu‹x
(&
gDvm
.
jniPšRefLock
);

1018 
	}
}

1021 #iâdeà
USE_INDIRECT_REF


1028 
boŞ
 
	$fšdInArgLi¡
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1030 cÚ¡ 
M‘hod
* 
m‘h
;

1031 
u4
* 
å
;

1032 
i
;

1034 
å
 = 
£lf
->
curF¿me
;

1043 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1044 
m‘h
 = 
§veA»a
->
m‘hod
;

1045 ià(
m‘h
 !ğ
	`SAVEAREA_FROM_FP
(
§veA»a
->
´evF¿me
)->
m‘hod
)

1047 
å
 = 
§veA»a
->
´evF¿me
;

1050 
	`LOGVV
("+++ scanning %d‡rgs in %s (%s)\n",

1051 
m‘h
->
šsSize
, m‘h->
Çme
, m‘h->
shÜty
);

1052 cÚ¡ * 
shÜty
 = 
m‘h
->shorty +1;

1053 
i
 = 0; i < 
m‘h
->
šsSize
; i++) {

1054 ià(
i
 =ğ0 && !
	`dvmIsSticM‘hod
(
m‘h
)) {

1056 ià(
å
[
i
] =ğ(
u4
è
obj
)

1057  
Œue
;

1060 *
shÜty
) {

1062 ià(
å
[
i
] =ğ(
u4
è
obj
)

1063  
Œue
;

1067 
i
++;

1070 
	`LOGE
("Whoops!„an offheƒnd of %s (%d)\n",

1071 
m‘h
->
shÜty
, m‘h->
šsSize
);

1074 ià(
å
[
i
] =ğ(
u4
è
obj
)

1075 
	`LOGI
("NOTE:„eà%°m©ch oÀ¬gy³ %c\n", 
obj
, *
shÜty
);

1078 
shÜty
++;

1085 ià(
	`dvmIsSticM‘hod
(
m‘h
)) {

1087 ià((*)
obj
 =ğ(*)
m‘h
->
şazz
)

1088  
Œue
;

1090  
çl£
;

1091 
	}
}

1110 
jobjeùRefTy³
 
	$dvmG‘JNIRefTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

1112 #ifdeà
USE_INDIRECT_REF


1118 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

1120 ià(
obj
 =ğ
NULL
) {

1122  
JNIInv®idRefTy³
;

1124  (
jobjeùRefTy³
è
	`dvmG‘IndœeùRefTy³
(
jobj
);

1127 
Reã»nûTabË
* 
pRefTabË
 = 
	`g‘LoÿlRefTabË
(
’v
);

1128 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1130 
Objeù
** 
±r
;

1133 ià(
	`fšdInArgLi¡
(
£lf
, 
jobj
)) {

1135  
JNILoÿlRefTy³
;

1139 ià(
	`dvmFšdInReã»nûTabË
(
pRefTabË
,…RefTabË->
bË
, 
jobj
è!ğ
NULL
) {

1141  
JNILoÿlRefTy³
;

1145 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

1146 ià(
	`dvmFšdInReã»nûTabË
(&
gDvm
.
jniGlob®RefTabË
,

1147 
gDvm
.
jniGlob®RefTabË
.
bË
, 
jobj
))

1150 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

1151  
JNIGlob®RefTy³
;

1153 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

1156  
JNIInv®idRefTy³
;

1158 
	}
}

1163 
boŞ
 
	$dvmRegi¡”JNIM‘hod
(
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

1164 cÚ¡ * 
sigÇtu»
, * 
âPŒ
)

1166 
M‘hod
* 
m‘hod
;

1167 
boŞ
 
»suÉ
 = 
çl£
;

1169 ià(
âPŒ
 =ğ
NULL
)

1170 
ba
;

1172 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
m‘hodName
, 
sigÇtu»
);

1173 ià(
m‘hod
 =ğ
NULL
)

1174 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, 
m‘hodName
, 
sigÇtu»
);

1175 ià(
m‘hod
 =ğ
NULL
) {

1176 
	`LOGW
("ERROR: Unableo find decl for‚ative %s.%s %s\n",

1177 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

1178 
ba
;

1181 ià(!
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

1182 
	`LOGW
("Unableo„egister:‚ot‚ative: %s.%s %s\n",

1183 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

1184 
ba
;

1187 ià(
m‘hod
->
ÇtiveFunc
 !ğ
dvmResŞveN©iveM‘hod
) {

1188 
	`LOGW
("Warning: %s.%s %s was‡lready„egistered/resolved?\n",

1189 
şazz
->
desütÜ
, 
m‘hodName
, 
sigÇtu»
);

1193 
	`dvmU£JNIBridge
(
m‘hod
, 
âPŒ
);

1195 
	`LOGV
("JNI-»gi¡”ed %s.% %s\n", 
şazz
->
desütÜ
, 
m‘hodName
,

1196 
sigÇtu»
);

1197 
»suÉ
 = 
Œue
;

1199 
ba
:

1200  
»suÉ
;

1201 
	}
}

1206 
boŞ
 
	$dvmIsCheckJNIEÇbËd
()

1208 
JavaVMExt
* 
vm
 = (JavaVMExt*è
gDvm
.
vmLi¡
;

1209  
vm
->
u£Checked
;

1210 
	}
}

1216 
	$dvmU£JNIBridge
(
M‘hod
* 
m‘hod
, * 
func
)

1219 
kJNIG’”®
 = 0,

1220 
kJNISync
 = 1,

1221 
kJNIVœtu®NoRef
 = 2,

1222 
kJNISticNoRef
 = 3,

1223 } 
kšd
;

1224 cÚ¡ 
D®vikBridgeFunc
 
¡dFunc
[] = {

1225 
dvmC®lJNIM‘hod_g’”®
,

1226 
dvmC®lJNIM‘hod_synchrÚized
,

1227 
dvmC®lJNIM‘hod_vœtu®NoRef
,

1228 
dvmC®lJNIM‘hod_¡©icNoRef


1230 cÚ¡ 
D®vikBridgeFunc
 
checkFunc
[] = {

1231 
dvmCheckC®lJNIM‘hod_g’”®
,

1232 
dvmCheckC®lJNIM‘hod_synchrÚized
,

1233 
dvmCheckC®lJNIM‘hod_vœtu®NoRef
,

1234 
dvmCheckC®lJNIM‘hod_¡©icNoRef


1237 
boŞ
 
hasRefArg
 = 
çl£
;

1239 ià(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
)) {

1241 
kšd
 = 
kJNISync
;

1247 cÚ¡ * 
ı
 = 
m‘hod
->
shÜty
;

1248 *++
ı
 != '\0') {

1249 ià(*
ı
 == 'L') {

1251 
hasRefArg
 = 
Œue
;

1256 ià(
hasRefArg
) {

1258 
kšd
 = 
kJNIG’”®
;

1261 ià(
	`dvmIsSticM‘hod
(
m‘hod
))

1262 
kšd
 = 
kJNISticNoRef
;

1264 
kšd
 = 
kJNIVœtu®NoRef
;

1268 ià(
	`dvmIsCheckJNIEÇbËd
()) {

1269 
	`dvmS‘N©iveFunc
(
m‘hod
, 
checkFunc
[
kšd
], 
func
);

1271 
	`dvmS‘N©iveFunc
(
m‘hod
, 
¡dFunc
[
kšd
], 
func
);

1273 
	}
}

1278 cÚ¡ 
M‘hod
* 
	$dvmG‘Cu¼’tJNIM‘hod
()

1280 
	`as£¹
(
	`dvmTh»adS–f
(è!ğ
NULL
);

1282 * 
å
 = 
	`dvmTh»adS–f
()->
curF¿me
;

1283 cÚ¡ 
M‘hod
* 
m‘h
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

1285 
	`as£¹
(
m‘h
 !ğ
NULL
);

1286 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
m‘h
));

1287  
m‘h
;

1288 
	}
}

1301 
	$ŒackMÚ™ÜEÁ”
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1303 cÚ¡ 
kIn™ŸlSize
 = 16;

1304 
Reã»nûTabË
* 
»fTabË
 = &
£lf
->
jniMÚ™ÜRefTabË
;

1307 ià(
»fTabË
->
bË
 =ğ
NULL
) {

1308 
	`as£¹
(
»fTabË
->
maxEÁr›s
 == 0);

1310 ià(!
	`dvmIn™Reã»nûTabË
(
»fTabË
, 
kIn™ŸlSize
, 
INT_MAX
)) {

1311 
	`LOGE
("Unableo initialize monitorrackingable\n");

1312 
	`dvmAbÜt
();

1316 ià(!
	`dvmAddToReã»nûTabË
(
»fTabË
, 
obj
)) {

1318 
	`LOGE
("Unableo‡ddƒntryo monitorrackingable\n");

1319 
	`dvmAbÜt
();

1321 
	`LOGVV
("---‡dded mÚ™Ü %p\n", 
obj
);

1323 
	}
}

1329 
	$ŒackMÚ™ÜEx™
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1331 
Reã»nûTabË
* 
pRefTabË
 = &
£lf
->
jniMÚ™ÜRefTabË
;

1333 ià(!
	`dvmRemoveFromReã»nûTabË
(
pRefTabË
,…RefTabË->
bË
, 
obj
)) {

1334 
	`LOGE
("JNI mÚ™Ü %°nÙ found iÀŒackšg†i¡\n", 
obj
);

1337 
	`LOGVV
("---„emoved mÚ™Ü %p\n", 
obj
);

1339 
	}
}

1344 
	$dvmR–—£JniMÚ™Üs
(
Th»ad
* 
£lf
)

1346 
Reã»nûTabË
* 
pRefTabË
 = &
£lf
->
jniMÚ™ÜRefTabË
;

1347 
Objeù
** 
tİ
 = 
pRefTabË
->
bË
;

1349 ià(
tİ
 =ğ
NULL
)

1352 
Objeù
** 
±r
 = 
pRefTabË
->
ÃxtEÁry
;

1353 --
±r
 >ğ
tİ
) {

1354 ià(!
	`dvmUÆockObjeù
(
£lf
, *
±r
)) {

1355 
	`LOGW
("UÇbËØuÆock mÚ™Ü %°©h»ad d‘ach\n", *
±r
);

1357 
	`LOGVV
("--- d‘ach-»Ëasšg mÚ™Ü %p\n", *
±r
);

1362 
pRefTabË
->
ÃxtEÁry
 =…RefTabË->
bË
;

1363 
	}
}

1365 #ifdeà
WITH_JNI_STACK_CHECK


1372 
	$compu‹SckSum
(
Th»ad
* 
£lf
)

1374 cÚ¡ 
u1
* 
low
 = (cÚ¡ u1*)
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

1375 
u4
 
üc
 = 
	`dvmIn™Crc32
();

1376 
£lf
->
¡ackCrc
 = 0;

1377 
üc
 = 
	`dvmCompu‹Crc32
(üc, 
low
, 
£lf
->
š‹½SckS¹
 -†ow);

1378 
£lf
->
¡ackCrc
 = 
üc
;

1379 
	}
}

1391 
	$checkSckSum
(
Th»ad
* 
£lf
)

1393 cÚ¡ 
u1
* 
low
 = (cÚ¡ u1*)
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

1394 
u4
 
¡ackCrc
, 
üc
;

1396 
¡ackCrc
 = 
£lf
->stackCrc;

1397 
£lf
->
¡ackCrc
 = 0;

1398 
üc
 = 
	`dvmIn™Crc32
();

1399 
üc
 = 
	`dvmCompu‹Crc32
(üc, 
low
, 
£lf
->
š‹½SckS¹
 -†ow);

1400 ià(
üc
 !ğ
¡ackCrc
) {

1401 cÚ¡ 
M‘hod
* 
m‘h
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

1402 ià(
	`dvmCompu‹ExaùF¿meD•th
(
£lf
->
curF¿me
) == 1) {

1403 
	`LOGD
("JNI: bad stack CRC (0x%08x) -- okay during init\n",

1404 
¡ackCrc
);

1405 } ià(
	`¡rcmp
(
m‘h
->
Çme
, "nativeLoad") == 0 &&

1406 (
	`¡rcmp
(
m‘h
->
şazz
->
desütÜ
, "Ljava/lang/Runtime;") == 0))

1408 
	`LOGD
("JNI: bad stack CRC (0x%08x) -- okay during JNI_OnLoad\n",

1409 
¡ackCrc
);

1411 
	`LOGW
("JNI: bad sck CRC (%08x v %08x)\n", 
üc
, 
¡ackCrc
);

1412 
	`dvmAbÜt
();

1415 
£lf
->
¡ackCrc
 = (
u4
) -1;

1416 
	}
}

1464 
šlše
 
	$cÚv”tReã»nûResuÉ
(
JNIEnv
* 
’v
, 
JV®ue
* 
pResuÉ
,

1465 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

1467 #ifdeà
USE_INDIRECT_REF


1468 ià(
m‘hod
->
shÜty
[0] =ğ'L' && !
	`dvmCheckExû±iÚ
(
£lf
) &&

1469 
pResuÉ
->
l
 !ğ
NULL
)

1471 
pResuÉ
->
l
 = 
	`dvmDecodeIndœeùRef
(
’v
,…Result->l);

1474 
	}
}

1479 
	$dvmC®lJNIM‘hod_g’”®
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

1480 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

1482 
ŞdStus
;

1483 
u4
* 
modArgs
 = (u4*è
¬gs
;

1484 
jşass
 
¡©icM‘hodCÏss
;

1485 
JNIEnv
* 
’v
 = 
£lf
->
jniEnv
;

1487 
	`as£¹
(
m‘hod
->
š¢s
 !ğ
NULL
);

1492 #ifdeà
USE_INDIRECT_REF


1497 
idx
 = 0;

1498 ià(
	`dvmIsSticM‘hod
(
m‘hod
)) {

1500 
¡©icM‘hodCÏss
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
m‘hod
->
şazz
);

1501 ià(
¡©icM‘hodCÏss
 =ğ
NULL
) {

1502 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1507 
¡©icM‘hodCÏss
 = 
NULL
;

1508 
jobjeù
 
thisObj
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
modArgs
[0]);

1509 ià(
thisObj
 =ğ
NULL
) {

1510 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1513 
modArgs
[
idx
] = (
u4
è
thisObj
;

1514 
idx
 = 1;

1517 cÚ¡ * 
shÜty
 = &
m‘hod
->shorty[1];

1518 *
shÜty
 != '\0') {

1519 *
shÜty
++) {

1522 ià(
modArgs
[
idx
] != 0) {

1525 
jobjeù
 
¬gObj
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
modArgs
[
idx
]);

1526 ià(
¬gObj
 =ğ
NULL
) {

1527 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1530 
modArgs
[
idx
] = (
u4
è
¬gObj
;

1535 
idx
++;

1542 
idx
++;

1545 
¡©icM‘hodCÏss
 = 
	`dvmIsSticM‘hod
(
m‘hod
) ?

1546 (
jşass
è
m‘hod
->
şazz
 : 
NULL
;

1549 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

1551 
	`COMPUTE_STACK_SUM
(
£lf
);

1552 
	`dvmPÏtfÜmInvoke
(
’v
, 
¡©icM‘hodCÏss
,

1553 
m‘hod
->
jniArgInfo
, m‘hod->
šsSize
, 
modArgs
, m‘hod->
shÜty
,

1554 (*)
m‘hod
->
š¢s
, 
pResuÉ
);

1555 
	`CHECK_STACK_SUM
(
£lf
);

1557 #ifdeà
WITH_TAINT_TRACKING


1558 
	`dvmTaštPrİJniM‘hod
(
¬gs
, 
pResuÉ
, 
m‘hod
);

1561 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1563 
	`cÚv”tReã»nûResuÉ
(
’v
, 
pResuÉ
, 
m‘hod
, 
£lf
);

1564 
	}
}

1571 
	$dvmC®lJNIM‘hod_synchrÚized
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

1572 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

1574 
Objeù
* 
lockObj
;

1576 
	`as£¹
(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
));

1578 ià(
	`dvmIsSticM‘hod
(
m‘hod
))

1579 
lockObj
 = (
Objeù
*è
m‘hod
->
şazz
;

1581 
lockObj
 = (
Objeù
*è
¬gs
[0];

1583 
	`LOGVV
("Calling %s.%s:†ocking %p (%s)\n",

1584 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

1585 
lockObj
,†ockObj->
şazz
->
desütÜ
);

1587 
	`dvmLockObjeù
(
£lf
, 
lockObj
);

1588 
	`dvmC®lJNIM‘hod_g’”®
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

1589 
	`dvmUÆockObjeù
(
£lf
, 
lockObj
);

1590 
	}
}

1597 
	$dvmC®lJNIM‘hod_vœtu®NoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

1598 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

1600 
u4
* 
modArgs
 = (u4*è
¬gs
;

1601 
ŞdStus
;

1603 #ifdeà
USE_INDIRECT_REF


1604 
jobjeù
 
thisObj
 = 
	`addLoÿlReã»nû
(
£lf
->
jniEnv
, (
Objeù
*è
¬gs
[0]);

1605 ià(
thisObj
 =ğ
NULL
) {

1606 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1609 
modArgs
[0] = (
u4
è
thisObj
;

1612 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

1614 
	`COMPUTE_STACK_SUM
(
£lf
);

1615 
	`dvmPÏtfÜmInvoke
(
£lf
->
jniEnv
, 
NULL
,

1616 
m‘hod
->
jniArgInfo
, m‘hod->
šsSize
, 
modArgs
, m‘hod->
shÜty
,

1617 (*)
m‘hod
->
š¢s
, 
pResuÉ
);

1618 
	`CHECK_STACK_SUM
(
£lf
);

1620 #ifdeà
WITH_TAINT_TRACKING


1621 
	`dvmTaštPrİJniM‘hod
(
¬gs
, 
pResuÉ
, 
m‘hod
);

1624 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1626 
	`cÚv”tReã»nûResuÉ
(
£lf
->
jniEnv
, 
pResuÉ
, 
m‘hod
, self);

1627 
	}
}

1634 
	$dvmC®lJNIM‘hod_¡©icNoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

1635 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

1637 
jşass
 
¡©icM‘hodCÏss
;

1638 
ŞdStus
;

1640 #ifdeà
USE_INDIRECT_REF


1641 
¡©icM‘hodCÏss
 = 
	`addLoÿlReã»nû
(
£lf
->
jniEnv
, (
Objeù
*)
m‘hod
->
şazz
);

1642 ià(
¡©icM‘hodCÏss
 =ğ
NULL
) {

1643 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1647 
¡©icM‘hodCÏss
 = (
jobjeù
è
m‘hod
->
şazz
;

1650 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

1652 
	`COMPUTE_STACK_SUM
(
£lf
);

1653 
	`dvmPÏtfÜmInvoke
(
£lf
->
jniEnv
, 
¡©icM‘hodCÏss
,

1654 
m‘hod
->
jniArgInfo
, m‘hod->
šsSize
, 
¬gs
, m‘hod->
shÜty
,

1655 (*)
m‘hod
->
š¢s
, 
pResuÉ
);

1656 
	`CHECK_STACK_SUM
(
£lf
);

1658 #ifdeà
WITH_TAINT_TRACKING


1659 
	`dvmTaštPrİJniM‘hod
(
¬gs
, 
pResuÉ
, 
m‘hod
);

1662 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1664 
	`cÚv”tReã»nûResuÉ
(
£lf
->
jniEnv
, 
pResuÉ
, 
m‘hod
, self);

1665 
	}
}

1670 
D®vikJniR‘uºTy³
 
	$dvmG‘ArgInfoR‘uºTy³
(
jniArgInfo
)

1672  (
jniArgInfo
 & 
DALVIK_JNI_RETURN_MASK
è>> 
DALVIK_JNI_RETURN_SHIFT
;

1673 
	}
}

1685 
jšt
 
	$G‘V”siÚ
(
JNIEnv
* 
’v
)

1687 
	`JNI_ENTER
();

1693 
	`JNI_EXIT
();

1694  
JNI_VERSION_1_6
;

1695 
	}
}

1702 
jşass
 
	$DefšeCÏss
(
JNIEnv
* 
’v
, cÚ¡ *
Çme
, 
jobjeù
 
lßd”
,

1703 cÚ¡ 
jby‹
* 
buf
, 
jsize
 
bufL’
)

1705 
	`UNUSED_PARAMETER
(
Çme
);

1706 
	`UNUSED_PARAMETER
(
lßd”
);

1707 
	`UNUSED_PARAMETER
(
buf
);

1708 
	`UNUSED_PARAMETER
(
bufL’
);

1710 
	`JNI_ENTER
();

1711 
	`LOGW
("JNI DefineClass is‚ot supported\n");

1712 
	`JNI_EXIT
();

1713  
NULL
;

1714 
	}
}

1730 
jşass
 
	$FšdCÏss
(
JNIEnv
* 
’v
, cÚ¡ * 
Çme
)

1732 
	`JNI_ENTER
();

1734 cÚ¡ 
M‘hod
* 
thisM‘hod
;

1735 
CÏssObjeù
* 
şazz
;

1736 
jşass
 
jşazz
 = 
NULL
;

1737 
Objeù
* 
lßd”
;

1738 * 
desütÜ
 = 
NULL
;

1740 
thisM‘hod
 = 
	`dvmG‘Cu¼’tJNIM‘hod
();

1741 
	`as£¹
(
thisM‘hod
 !ğ
NULL
);

1743 
desütÜ
 = 
	`dvmNameToDesütÜ
(
Çme
);

1744 ià(
desütÜ
 =ğ
NULL
) {

1745 
şazz
 = 
NULL
;

1746 
ba
;

1750 ià(
_£lf
->
şassLßd”Ov”ride
 !ğ
NULL
) {

1752 
	`as£¹
(
	`¡rcmp
(
thisM‘hod
->
Çme
, "nativeLoad") == 0);

1753 
lßd”
 = 
_£lf
->
şassLßd”Ov”ride
;

1754 } ià(
thisM‘hod
 =ğ
gDvm
.
m‘hFakeN©iveEÁry
) {

1756 ià(!
gDvm
.
š™Ÿlizšg
)

1757 
lßd”
 = 
	`dvmG‘Sy¡emCÏssLßd”
();

1759 
lßd”
 = 
NULL
;

1761 
lßd”
 = 
thisM‘hod
->
şazz
->
şassLßd”
;

1764 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
lßd”
);

1765 
jşazz
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
şazz
);

1767 
ba
:

1768 
	`ä“
(
desütÜ
);

1770 
	`JNI_EXIT
();

1771  
jşazz
;

1772 
	}
}

1777 
jşass
 
	$G‘Su³rşass
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
)

1779 
	`JNI_ENTER
();

1780 
jşass
 
jsu³r
 = 
NULL
;

1782 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

1783 ià(
şazz
 !ğ
NULL
)

1784 
jsu³r
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*)
şazz
->
su³r
);

1785 
	`JNI_EXIT
();

1786  
jsu³r
;

1787 
	}
}

1794 
jboŞ—n
 
	$IsAssigÇbËFrom
(
JNIEnv
* 
’v
, 
jşass
 
jşazz1
, jşas 
jşazz2
)

1796 
	`JNI_ENTER
();

1798 
CÏssObjeù
* 
şazz1
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz1
);

1799 
CÏssObjeù
* 
şazz2
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz2
);

1801 
jboŞ—n
 
»suÉ
 = 
	`dvmIn¡ªûof
(
şazz1
, 
şazz2
);

1803 
	`JNI_EXIT
();

1804  
»suÉ
;

1805 
	}
}

1810 
jm‘hodID
 
	$FromReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
jm‘hod
)

1812 
	`JNI_ENTER
();

1813 
jm‘hodID
 
m‘hodID
;

1814 
Objeù
* 
m‘hod
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jm‘hod
);

1815 
m‘hodID
 = (
jm‘hodID
è
	`dvmG‘M‘hodFromReæeùObj
(
m‘hod
);

1816 
	`JNI_EXIT
();

1817  
m‘hodID
;

1818 
	}
}

1823 
jf›ldID
 
	$FromReæeùedF›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
jf›ld
)

1825 
	`JNI_ENTER
();

1826 
jf›ldID
 
f›ldID
;

1827 
Objeù
* 
f›ld
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jf›ld
);

1828 
f›ldID
 = (
jf›ldID
è
	`dvmG‘F›ldFromReæeùObj
(
f›ld
);

1829 
	`JNI_EXIT
();

1830  
f›ldID
;

1831 
	}
}

1840 
jobjeù
 
	$ToReæeùedM‘hod
(
JNIEnv
* 
’v
, 
jşass
 
jşs
, 
jm‘hodID
 
m‘hodID
,

1841 
jboŞ—n
 
isStic
)

1843 
	`JNI_ENTER
();

1844 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşs
);

1845 
Objeù
* 
obj
 = 
	`dvmC»©eReæeùObjFÜM‘hod
(
şazz
, (
M‘hod
*è
m‘hodID
);

1846 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
NULL
);

1847 
jobjeù
 
jobj
 = 
	`addLoÿlReã»nû
(
’v
, 
obj
);

1848 
	`JNI_EXIT
();

1849  
jobj
;

1850 
	}
}

1859 
jobjeù
 
	$ToReæeùedF›ld
(
JNIEnv
* 
’v
, 
jşass
 
jşs
, 
jf›ldID
 
f›ldID
,

1860 
jboŞ—n
 
isStic
)

1862 
	`JNI_ENTER
();

1863 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşs
);

1864 
Objeù
* 
obj
 = 
	`dvmC»©eReæeùObjFÜF›ld
(
jşs
, (
F›ld
*è
f›ldID
);

1865 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
NULL
);

1866 
jobjeù
 
jobj
 = 
	`addLoÿlReã»nû
(
’v
, 
obj
);

1867 
	`JNI_EXIT
();

1868  
jobj
;

1869 
	}
}

1874 
jšt
 
	$Throw
(
JNIEnv
* 
’v
, 
jthrowabË
 
jobj
)

1876 
	`JNI_ENTER
();

1878 
jšt
 
»tv®
;

1880 ià(
jobj
 !ğ
NULL
) {

1881 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

1882 
	`dvmS‘Exû±iÚ
(
_£lf
, 
obj
);

1883 
»tv®
 = 
JNI_OK
;

1885 
»tv®
 = 
JNI_ERR
;

1888 
	`JNI_EXIT
();

1889  
»tv®
;

1890 
	}
}

1896 
jšt
 
	$ThrowNew
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
mes§ge
)

1898 
	`JNI_ENTER
();

1900 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

1901 
	`dvmThrowExû±iÚByCÏss
(
şazz
, 
mes§ge
);

1904 
	`JNI_EXIT
();

1905  
JNI_OK
;

1906 
	}
}

1916 
jthrowabË
 
	$Exû±iÚOccu¼ed
(
JNIEnv
* 
’v
)

1918 
	`JNI_ENTER
();

1920 
Objeù
* 
exû±iÚ
;

1921 
jobjeù
 
loÿlExû±iÚ
;

1923 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
_£lf
);

1924 
loÿlExû±iÚ
 = 
	`addLoÿlReã»nû
(
’v
, 
exû±iÚ
);

1925 ià(
loÿlExû±iÚ
 =ğ
NULL
 && 
exû±iÚ
 != NULL) {

1933 
	`LOGW
("JNI WARNING:‡ddLocal/exception combo\n");

1936 
	`JNI_EXIT
();

1937  
loÿlExû±iÚ
;

1938 
	}
}

1943 
	$Exû±iÚDesüibe
(
JNIEnv
* 
’v
)

1945 
	`JNI_ENTER
();

1947 
Objeù
* 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
_£lf
);

1948 ià(
exû±iÚ
 !ğ
NULL
) {

1949 
	`dvmPrštExû±iÚSckT¿û
();

1951 
	`LOGI
("Odd: ExceptionDescribe called, but‚oƒxception…ending\n");

1954 
	`JNI_EXIT
();

1955 
	}
}

1962 
	$Exû±iÚCË¬
(
JNIEnv
* 
’v
)

1964 
	`JNI_ENTER
();

1965 
	`dvmCË¬Exû±iÚ
(
_£lf
);

1966 
	`JNI_EXIT
();

1967 
	}
}

1972 
	$F©®E¼Ü
(
JNIEnv
* 
’v
, cÚ¡ * 
msg
)

1975 
	`LOGE
("JNI…o¡šg f©®ƒ¼Ü: %s\n", 
msg
);

1976 
	`dvmAbÜt
();

1977 
	}
}

1985 
jšt
 
	$PushLoÿlF¿me
(
JNIEnv
* 
’v
, 
jšt
 
ÿ·c™y
)

1987 
	`JNI_ENTER
();

1988 
»suÉ
 = 
JNI_OK
;

1989 ià(!
	`’su»LoÿlC­ac™y
(
’v
, 
ÿ·c™y
) ||

1990 !
	`dvmPushLoÿlF¿me
(
_£lf
 , 
	`dvmG‘Cu¼’tJNIM‘hod
()))

1993 
	`dvmCË¬Exû±iÚ
(
_£lf
);

1994 
	`dvmThrowExû±iÚ
("Ljava/lang/OutOfMemoryError;",

1996 
»suÉ
 = 
JNI_ERR
;

1998 
	`JNI_EXIT
();

1999  
»suÉ
;

2000 
	}
}

2006 
jobjeù
 
	$PİLoÿlF¿me
(
JNIEnv
* 
’v
, 
jobjeù
 
j»suÉ
)

2008 
	`JNI_ENTER
();

2009 
Objeù
* 
»suÉ
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
j»suÉ
);

2010 ià(!
	`dvmPİLoÿlF¿me
(
_£lf
 )) {

2011 
	`LOGW
("JNI WARNING:oo many PopLocalFrame calls\n");

2012 
	`dvmCË¬Exû±iÚ
(
_£lf
);

2013 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

2016 
j»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, 
»suÉ
);

2017 
	`JNI_EXIT
();

2018  
»suÉ
;

2019 
	}
}

2024 
jobjeù
 
	$NewGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

2026 
	`JNI_ENTER
();

2027 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

2028 
jobjeù
 
»tv®
 = 
	`addGlob®Reã»nû
(
obj
);

2029 
	`JNI_EXIT
();

2030  
»tv®
;

2031 
	}
}

2036 
	$D–‘eGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
jglob®Ref
)

2038 
	`JNI_ENTER
();

2039 
	`d–‘eGlob®Reã»nû
(
jglob®Ref
);

2040 
	`JNI_EXIT
();

2041 
	}
}

2047 
jobjeù
 
	$NewLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
j»f
)

2049 
	`JNI_ENTER
();

2050 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
j»f
);

2051 
jobjeù
 
»tv®
 = 
	`addLoÿlReã»nû
(
’v
, 
obj
);

2052 
	`JNI_EXIT
();

2053  
»tv®
;

2054 
	}
}

2059 
	$D–‘eLoÿlRef
(
JNIEnv
* 
’v
, 
jobjeù
 
jloÿlRef
)

2061 
	`JNI_ENTER
();

2062 
	`d–‘eLoÿlReã»nû
(
’v
, 
jloÿlRef
);

2063 
	`JNI_EXIT
();

2064 
	}
}

2070 
jšt
 
	$Ensu»LoÿlC­ac™y
(
JNIEnv
* 
’v
, 
jšt
 
ÿ·c™y
)

2072 
	`JNI_ENTER
();

2073 
boŞ
 
okay
 = 
	`’su»LoÿlC­ac™y
(
’v
, 
ÿ·c™y
);

2074 ià(!
okay
) {

2075 
	`dvmThrowExû±iÚ
("Ljava/lang/OutOfMemoryError;",

2078 
	`JNI_EXIT
();

2079 ià(
okay
)

2083 
	}
}

2089 
jboŞ—n
 
	$IsSameObjeù
(
JNIEnv
* 
’v
, 
jobjeù
 
j»f1
, jobjeù 
j»f2
)

2091 
	`JNI_ENTER
();

2092 
Objeù
* 
obj1
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
j»f1
);

2093 
Objeù
* 
obj2
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
j»f2
);

2094 
jboŞ—n
 
»suÉ
 = (
obj1
 =ğ
obj2
);

2095 
	`JNI_EXIT
();

2096  
»suÉ
;

2097 
	}
}

2102 
jobjeù
 
	$AÎocObjeù
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
)

2104 
	`JNI_ENTER
();

2106 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2107 
jobjeù
 
»suÉ
;

2109 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

2110 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2111 
»suÉ
 = 
NULL
;

2113 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2114 
»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, 
ÃwObj
);

2117 
	`JNI_EXIT
();

2118  
»suÉ
;

2119 
	}
}

2124 
jobjeù
 
	$NewObjeù
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, ...)

2126 
	`JNI_ENTER
();

2127 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2128 
jobjeù
 
»suÉ
;

2130 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

2131 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2132 
»suÉ
 = 
NULL
;

2134 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2135 
»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, 
ÃwObj
);

2136 ià(
ÃwObj
 !ğ
NULL
) {

2137 
JV®ue
 
unu£d
;

2138 
va_li¡
 
¬gs
;

2139 
	`va_¡¬t
(
¬gs
, 
m‘hodID
);

2140 
	`dvmC®lM‘hodV
(
_£lf
, (
M‘hod
*è
m‘hodID
, 
ÃwObj
, 
Œue
, &
unu£d
,

2141 
¬gs
);

2142 
	`va_’d
(
¬gs
);

2146 
	`JNI_EXIT
();

2147  
»suÉ
;

2148 
	}
}

2149 
jobjeù
 
	$NewObjeùV
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
,

2150 
va_li¡
 
¬gs
)

2152 
	`JNI_ENTER
();

2153 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2154 
jobjeù
 
»suÉ
;

2156 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2157 
»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, 
ÃwObj
);

2158 ià(
ÃwObj
 !ğ
NULL
) {

2159 
JV®ue
 
unu£d
;

2160 
	`dvmC®lM‘hodV
(
_£lf
, (
M‘hod
*è
m‘hodID
, 
ÃwObj
, 
Œue
, &
unu£d
, 
¬gs
);

2163 
	`JNI_EXIT
();

2164  
»suÉ
;

2165 
	}
}

2166 
jobjeù
 
	$NewObjeùA
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
,

2167 
jv®ue
* 
¬gs
)

2169 
	`JNI_ENTER
();

2170 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2171 
jobjeù
 
»suÉ
;

2173 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2174 
»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, 
ÃwObj
);

2175 ià(
ÃwObj
 !ğ
NULL
) {

2176 
JV®ue
 
unu£d
;

2177 
	`dvmC®lM‘hodA
(
_£lf
, (
M‘hod
*è
m‘hodID
, 
ÃwObj
, 
Œue
, &
unu£d
, 
¬gs
);

2180 
	`JNI_EXIT
();

2181  
»suÉ
;

2182 
	}
}

2189 
jşass
 
	$G‘ObjeùCÏss
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

2191 
	`JNI_ENTER
();

2193 
	`as£¹
(
jobj
 !ğ
NULL
);

2195 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

2196 
jşass
 
jşazz
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
obj
->
şazz
);

2198 
	`JNI_EXIT
();

2199  
jşazz
;

2200 
	}
}

2205 
jboŞ—n
 
	$IsIn¡ªûOf
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, 
jşass
 
jşazz
)

2207 
	`JNI_ENTER
();

2209 
	`as£¹
(
jşazz
 !ğ
NULL
);

2211 
jboŞ—n
 
»suÉ
;

2213 ià(
jobj
 =ğ
NULL
) {

2214 
»suÉ
 = 
Œue
;

2216 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

2217 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2218 
»suÉ
 = 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz);

2221 
	`JNI_EXIT
();

2222  
»suÉ
;

2223 
	}
}

2234 
jm‘hodID
 
	$G‘M‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, cÚ¡ * 
Çme
,

2235 cÚ¡ * 
sig
)

2237 
	`JNI_ENTER
();

2239 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2240 
jm‘hodID
 
id
 = 
NULL
;

2242 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

2243 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2245 
M‘hod
* 
m‘h
;

2247 
m‘h
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
şazz
, 
Çme
, 
sig
);

2248 ià(
m‘h
 =ğ
NULL
) {

2250 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
Çme
, 
sig
);

2252 ià(
m‘h
 !ğ
NULL
 && 
	`dvmIsSticM‘hod
(meth)) {

2253 
	`IF_LOGD
() {

2254 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

2255 
	`LOGD
("GetMethodID:‚ot„eturning static method %s.%s %s\n",

2256 
şazz
->
desütÜ
, 
m‘h
->
Çme
, 
desc
);

2257 
	`ä“
(
desc
);

2259 
m‘h
 = 
NULL
;

2261 ià(
m‘h
 =ğ
NULL
) {

2262 
	`LOGD
("GetMethodID: method‚ot found: %s.%s:%s\n",

2263 
şazz
->
desütÜ
, 
Çme
, 
sig
);

2264 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
Çme
);

2272 ià(
m‘h
 !ğ
NULL
) {

2273 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
m‘h
->
şazz
) ||

2274 
	`dvmIsCÏssIn™Ÿlizšg
(
m‘h
->
şazz
));

2276 
id
 = (
jm‘hodID
è
m‘h
;

2278 
	`JNI_EXIT
();

2279  
id
;

2280 
	}
}

2285 
jf›ldID
 
	$G‘F›ldID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
,

2286 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

2288 
	`JNI_ENTER
();

2290 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2291 
jf›ldID
 
id
;

2293 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

2294 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2295 
id
 = 
NULL
;

2297 
id
 = (
jf›ldID
è
	`dvmFšdIn¡ªûF›ldH›r
(
şazz
, 
Çme
, 
sig
);

2298 ià(
id
 =ğ
NULL
) {

2299 
	`LOGD
("GetFieldID: unableo find field %s.%s:%s\n",

2300 
şazz
->
desütÜ
, 
Çme
, 
sig
);

2301 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchF›ldE¼Ü;", 
Çme
);

2304 
	`JNI_EXIT
();

2305  
id
;

2306 
	}
}

2311 
jm‘hodID
 
	$G‘SticM‘hodID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
,

2312 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

2314 
	`JNI_ENTER
();

2316 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2317 
jm‘hodID
 
id
;

2319 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

2320 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2321 
id
 = 
NULL
;

2323 
M‘hod
* 
m‘h
;

2325 
m‘h
 = 
	`dvmFšdDœeùM‘hodH›rByDesütÜ
(
şazz
, 
Çme
, 
sig
);

2328 ià(
m‘h
 !ğ
NULL
 && !
	`dvmIsSticM‘hod
(meth)) {

2329 
	`IF_LOGD
() {

2330 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

2331 
	`LOGD
("GetStaticMethodID: "

2333 
şazz
->
desütÜ
, 
m‘h
->
Çme
, 
desc
);

2334 
	`ä“
(
desc
);

2336 
m‘h
 = 
NULL
;

2339 
id
 = (
jm‘hodID
è
m‘h
;

2340 ià(
id
 =ğ
NULL
)

2341 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
Çme
);

2344 
	`JNI_EXIT
();

2345  
id
;

2346 
	}
}

2351 
jf›ldID
 
	$G‘SticF›ldID
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
,

2352 cÚ¡ * 
Çme
, cÚ¡ * 
sig
)

2354 
	`JNI_ENTER
();

2356 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

2357 
jf›ldID
 
id
;

2359 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

2360 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2361 
id
 = 
NULL
;

2363 
id
 = (
jf›ldID
è
	`dvmFšdSticF›ld
(
şazz
, 
Çme
, 
sig
);

2364 ià(
id
 =ğ
NULL
)

2365 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchF›ldE¼Ü;", 
Çme
);

2367 
	`JNI_EXIT
();

2368  
id
;

2369 
	}
}

2376 
	#GET_STATIC_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_i¤ef
) \

2377 
_ùy³
 
G‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2378 
jf›ldID
 
f›ldID
) \

2380 
	`UNUSED_PARAMETER
(
jşazz
); \

2381 
	`JNI_ENTER
(); \

2382 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ldID
; \

2383 
_ùy³
 
v®ue
; \

2384 ià(
_i¤ef
) { \

2385 
Objeù
* 
obj
 = 
	`dvmG‘SticF›ldObjeù
(
sf›ld
); \

2386 
v®ue
 = (
_ùy³
)(
u4
)
	`addLoÿlReã»nû
(
’v
, 
obj
); \

2388 
v®ue
 = 
dvmG‘SticF›ld
##
	`_jÇme
(
sf›ld
); \

2390 
	`JNI_EXIT
(); \

2391  
v®ue
; \

2392 }

	)

2393 
GET_STATIC_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
Œue
);

2394 
GET_STATIC_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
çl£
);

2395 
GET_STATIC_TYPE_FIELD
(
jby‹
, 
By‹
, 
çl£
);

2396 
GET_STATIC_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
çl£
);

2397 
GET_STATIC_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
çl£
);

2398 
GET_STATIC_TYPE_FIELD
(
jšt
, 
IÁ
, 
çl£
);

2399 
GET_STATIC_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
çl£
);

2400 
GET_STATIC_TYPE_FIELD
(
jæßt
, 
Flßt
, 
çl£
);

2401 
GET_STATIC_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
çl£
);

2406 
	#SET_STATIC_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_i¤ef
) \

2407 
S‘Stic
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2408 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) \

2410 
	`UNUSED_PARAMETER
(
jşazz
); \

2411 
	`JNI_ENTER
(); \

2412 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ldID
; \

2413 ià(
_i¤ef
) { \

2414 
Objeù
* 
v®Obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, (
jobjeù
)(
u4
)
v®ue
); \

2415 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, 
v®Obj
); \

2417 
dvmS‘SticF›ld
##
	`_jÇme
(
sf›ld
, 
v®ue
); \

2419 
	`JNI_EXIT
(); \

2420 }

	)

2421 
SET_STATIC_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
Œue
);

2422 
SET_STATIC_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
çl£
);

2423 
SET_STATIC_TYPE_FIELD
(
jby‹
, 
By‹
, 
çl£
);

2424 
SET_STATIC_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
çl£
);

2425 
SET_STATIC_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
çl£
);

2426 
SET_STATIC_TYPE_FIELD
(
jšt
, 
IÁ
, 
çl£
);

2427 
SET_STATIC_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
çl£
);

2428 
SET_STATIC_TYPE_FIELD
(
jæßt
, 
Flßt
, 
çl£
);

2429 
SET_STATIC_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
çl£
);

2436 
	#GET_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_i¤ef
) \

2437 
_ùy³
 
G‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

2438 
jf›ldID
 
f›ldID
) \

2440 
	`JNI_ENTER
(); \

2441 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2442 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
f›ldID
; \

2443 
_ùy³
 
v®ue
; \

2444 ià(
_i¤ef
) { \

2445 
Objeù
* 
v®Obj
 = 
	`dvmG‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
); \

2446 
v®ue
 = (
_ùy³
)(
u4
)
	`addLoÿlReã»nû
(
’v
, 
v®Obj
); \

2448 
v®ue
 = 
dvmG‘F›ld
##
	`_jÇme
(
obj
, 
f›ld
->
by‹Off£t
); \

2450 
	`JNI_EXIT
(); \

2451  
v®ue
; \

2452 }

	)

2453 
GET_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
Œue
);

2454 
GET_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
çl£
);

2455 
GET_TYPE_FIELD
(
jby‹
, 
By‹
, 
çl£
);

2456 
GET_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
çl£
);

2457 
GET_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
çl£
);

2458 
GET_TYPE_FIELD
(
jšt
, 
IÁ
, 
çl£
);

2459 
GET_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
çl£
);

2460 
GET_TYPE_FIELD
(
jæßt
, 
Flßt
, 
çl£
);

2461 
GET_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
çl£
);

2466 
	#SET_TYPE_FIELD
(
_ùy³
, 
_jÇme
, 
_i¤ef
) \

2467 
S‘
##
_jÇme
##
	`F›ld
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

2468 
jf›ldID
 
f›ldID
, 
_ùy³
 
v®ue
) \

2470 
	`JNI_ENTER
(); \

2471 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2472 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
f›ldID
; \

2473 ià(
_i¤ef
) { \

2474 
Objeù
* 
v®Obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, (
jobjeù
)(
u4
)
v®ue
); \

2475 
	`dvmS‘F›ldObjeù
(
obj
, 
f›ld
->
by‹Off£t
, 
v®Obj
); \

2477 
dvmS‘F›ld
##
	`_jÇme
(
obj
, 
f›ld
->
by‹Off£t
, 
v®ue
); \

2479 
	`JNI_EXIT
(); \

2480 }

	)

2481 
SET_TYPE_FIELD
(
jobjeù
, 
Objeù
, 
Œue
);

2482 
SET_TYPE_FIELD
(
jboŞ—n
, 
BoŞ—n
, 
çl£
);

2483 
SET_TYPE_FIELD
(
jby‹
, 
By‹
, 
çl£
);

2484 
SET_TYPE_FIELD
(
jch¬
, 
Ch¬
, 
çl£
);

2485 
SET_TYPE_FIELD
(
jshÜt
, 
ShÜt
, 
çl£
);

2486 
SET_TYPE_FIELD
(
jšt
, 
IÁ
, 
çl£
);

2487 
SET_TYPE_FIELD
(
jlÚg
, 
LÚg
, 
çl£
);

2488 
SET_TYPE_FIELD
(
jæßt
, 
Flßt
, 
çl£
);

2489 
SET_TYPE_FIELD
(
jdoubË
, 
DoubË
, 
çl£
);

2497 
	#CALL_VIRTUAL
(
_ùy³
, 
_jÇme
, 
_»tç
, 
_»tok
, 
_i¤ef
) \

2498 
_ùy³
 
C®l
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

2499 
jm‘hodID
 
m‘hodID
, ...) \

2501 
	`JNI_ENTER
(); \

2502 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2503 cÚ¡ 
M‘hod
* 
m‘h
; \

2504 
va_li¡
 
¬gs
; \

2505 
JV®ue
 
»suÉ
; \

2506 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
obj
->
şazz
, (
M‘hod
*)
m‘hodID
); \

2507 ià(
m‘h
 =ğ
NULL
) { \

2508 
	`JNI_EXIT
(); \

2509  
_»tç
; \

2511 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

2512 
	`dvmC®lM‘hodV
(
_£lf
, 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2513 
	`va_’d
(
¬gs
); \

2514 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2515 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2516 
	`JNI_EXIT
(); \

2517  
_»tok
; \

2519 
_ùy³
 
C®l
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

2520 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

2522 
	`JNI_ENTER
(); \

2523 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2524 cÚ¡ 
M‘hod
* 
m‘h
; \

2525 
JV®ue
 
»suÉ
; \

2526 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
obj
->
şazz
, (
M‘hod
*)
m‘hodID
); \

2527 ià(
m‘h
 =ğ
NULL
) { \

2528 
	`JNI_EXIT
(); \

2529  
_»tç
; \

2531 
	`dvmC®lM‘hodV
(
_£lf
, 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2532 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2533 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2534 
	`JNI_EXIT
(); \

2535  
_»tok
; \

2537 
_ùy³
 
C®l
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

2538 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

2540 
	`JNI_ENTER
(); \

2541 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2542 cÚ¡ 
M‘hod
* 
m‘h
; \

2543 
JV®ue
 
»suÉ
; \

2544 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
obj
->
şazz
, (
M‘hod
*)
m‘hodID
); \

2545 ià(
m‘h
 =ğ
NULL
) { \

2546 
	`JNI_EXIT
(); \

2547  
_»tç
; \

2549 
	`dvmC®lM‘hodA
(
_£lf
, 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2550 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2551 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2552 
	`JNI_EXIT
(); \

2553  
_»tok
; \

2554 }

	)

2555 
CALL_VIRTUAL
(
jobjeù
, 
Objeù
, 
NULL
, 
»suÉ
.
l
, 
Œue
);

2556 
CALL_VIRTUAL
(
jboŞ—n
, 
BoŞ—n
, 0, 
»suÉ
.
z
, 
çl£
);

2557 
CALL_VIRTUAL
(
jby‹
, 
By‹
, 0, 
»suÉ
.
b
, 
çl£
);

2558 
CALL_VIRTUAL
(
jch¬
, 
Ch¬
, 0, 
»suÉ
.
c
, 
çl£
);

2559 
CALL_VIRTUAL
(
jshÜt
, 
ShÜt
, 0, 
»suÉ
.
s
, 
çl£
);

2560 
CALL_VIRTUAL
(
jšt
, 
IÁ
, 0, 
»suÉ
.
i
, 
çl£
);

2561 
CALL_VIRTUAL
(
jlÚg
, 
LÚg
, 0, 
»suÉ
.
j
, 
çl£
);

2562 
CALL_VIRTUAL
(
jæßt
, 
Flßt
, 0.0f, 
»suÉ
.
f
, 
çl£
);

2563 
CALL_VIRTUAL
(
jdoubË
, 
DoubË
, 0.0, 
»suÉ
.
d
, 
çl£
);

2564 
CALL_VIRTUAL
(, 
Void
, , , 
çl£
);

2573 
	#CALL_NONVIRTUAL
(
_ùy³
, 
_jÇme
, 
_»tç
, 
_»tok
, 
_i¤ef
) \

2574 
_ùy³
 
C®lNÚvœtu®
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
, \

2575 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, ...) \

2577 
	`JNI_ENTER
(); \

2578 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2579 
CÏssObjeù
* 
şazz
 = \

2580 (
CÏssObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
); \

2581 cÚ¡ 
M‘hod
* 
m‘h
; \

2582 
va_li¡
 
¬gs
; \

2583 
JV®ue
 
»suÉ
; \

2584 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
şazz
, (
M‘hod
*)
m‘hodID
); \

2585 ià(
m‘h
 =ğ
NULL
) { \

2586 
	`JNI_EXIT
(); \

2587  
_»tç
; \

2589 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

2590 
	`dvmC®lM‘hodV
(
_£lf
, 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2591 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2592 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2593 
	`va_’d
(
¬gs
); \

2594 
	`JNI_EXIT
(); \

2595  
_»tok
; \

2597 
_ùy³
 
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
,\

2598 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

2600 
	`JNI_ENTER
(); \

2601 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2602 
CÏssObjeù
* 
şazz
 = \

2603 (
CÏssObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
); \

2604 cÚ¡ 
M‘hod
* 
m‘h
; \

2605 
JV®ue
 
»suÉ
; \

2606 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
şazz
, (
M‘hod
*)
m‘hodID
); \

2607 ià(
m‘h
 =ğ
NULL
) { \

2608 
	`JNI_EXIT
(); \

2609  
_»tç
; \

2611 
	`dvmC®lM‘hodV
(
_£lf
, 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2612 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2613 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2614 
	`JNI_EXIT
(); \

2615  
_»tok
; \

2617 
_ùy³
 
C®lNÚvœtu®
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
,\

2618 
jşass
 
jşazz
, 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

2620 
	`JNI_ENTER
(); \

2621 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
); \

2622 
CÏssObjeù
* 
şazz
 = \

2623 (
CÏssObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
); \

2624 cÚ¡ 
M‘hod
* 
m‘h
; \

2625 
JV®ue
 
»suÉ
; \

2626 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
şazz
, (
M‘hod
*)
m‘hodID
); \

2627 ià(
m‘h
 =ğ
NULL
) { \

2628 
	`JNI_EXIT
(); \

2629  
_»tç
; \

2631 
	`dvmC®lM‘hodA
(
_£lf
, 
m‘h
, 
obj
, 
Œue
, &
»suÉ
, 
¬gs
); \

2632 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2633 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2634 
	`JNI_EXIT
(); \

2635  
_»tok
; \

2636 }

	)

2637 
CALL_NONVIRTUAL
(
jobjeù
, 
Objeù
, 
NULL
, 
»suÉ
.
l
, 
Œue
);

2638 
CALL_NONVIRTUAL
(
jboŞ—n
, 
BoŞ—n
, 0, 
»suÉ
.
z
, 
çl£
);

2639 
CALL_NONVIRTUAL
(
jby‹
, 
By‹
, 0, 
»suÉ
.
b
, 
çl£
);

2640 
CALL_NONVIRTUAL
(
jch¬
, 
Ch¬
, 0, 
»suÉ
.
c
, 
çl£
);

2641 
CALL_NONVIRTUAL
(
jshÜt
, 
ShÜt
, 0, 
»suÉ
.
s
, 
çl£
);

2642 
CALL_NONVIRTUAL
(
jšt
, 
IÁ
, 0, 
»suÉ
.
i
, 
çl£
);

2643 
CALL_NONVIRTUAL
(
jlÚg
, 
LÚg
, 0, 
»suÉ
.
j
, 
çl£
);

2644 
CALL_NONVIRTUAL
(
jæßt
, 
Flßt
, 0.0f, 
»suÉ
.
f
, 
çl£
);

2645 
CALL_NONVIRTUAL
(
jdoubË
, 
DoubË
, 0.0, 
»suÉ
.
d
, 
çl£
);

2646 
CALL_NONVIRTUAL
(, 
Void
, , , 
çl£
);

2652 
	#CALL_STATIC
(
_ùy³
, 
_jÇme
, 
_»tç
, 
_»tok
, 
_i¤ef
) \

2653 
_ùy³
 
C®lStic
##
_jÇme
##
	`M‘hod
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2654 
jm‘hodID
 
m‘hodID
, ...) \

2656 
	`UNUSED_PARAMETER
(
jşazz
); \

2657 
	`JNI_ENTER
(); \

2658 
JV®ue
 
»suÉ
; \

2659 
va_li¡
 
¬gs
; \

2660 
	`va_¡¬t
(
¬gs
, 
m‘hodID
); \

2661 
	`dvmC®lM‘hodV
(
_£lf
, (
M‘hod
*)
m‘hodID
, 
NULL
, 
Œue
, &
»suÉ
, 
¬gs
);\

2662 
	`va_’d
(
¬gs
); \

2663 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2664 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2665 
	`JNI_EXIT
(); \

2666  
_»tok
; \

2668 
_ùy³
 
C®lStic
##
_jÇme
##
	`M‘hodV
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2669 
jm‘hodID
 
m‘hodID
, 
va_li¡
 
¬gs
) \

2671 
	`UNUSED_PARAMETER
(
jşazz
); \

2672 
	`JNI_ENTER
(); \

2673 
JV®ue
 
»suÉ
; \

2674 
	`dvmC®lM‘hodV
(
_£lf
, (
M‘hod
*)
m‘hodID
, 
NULL
, 
Œue
, &
»suÉ
, 
¬gs
);\

2675 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2676 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2677 
	`JNI_EXIT
(); \

2678  
_»tok
; \

2680 
_ùy³
 
C®lStic
##
_jÇme
##
	`M‘hodA
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
, \

2681 
jm‘hodID
 
m‘hodID
, 
jv®ue
* 
¬gs
) \

2683 
	`UNUSED_PARAMETER
(
jşazz
); \

2684 
	`JNI_ENTER
(); \

2685 
JV®ue
 
»suÉ
; \

2686 
	`dvmC®lM‘hodA
(
_£lf
, (
M‘hod
*)
m‘hodID
, 
NULL
, 
Œue
, &
»suÉ
, 
¬gs
);\

2687 ià(
_i¤ef
 && !
	`dvmCheckExû±iÚ
(
_£lf
)) \

2688 
»suÉ
.
l
 = 
	`addLoÿlReã»nû
(
’v
,„esult.l); \

2689 
	`JNI_EXIT
(); \

2690  
_»tok
; \

2691 }

	)

2692 
CALL_STATIC
(
jobjeù
, 
Objeù
, 
NULL
, 
»suÉ
.
l
, 
Œue
);

2693 
CALL_STATIC
(
jboŞ—n
, 
BoŞ—n
, 0, 
»suÉ
.
z
, 
çl£
);

2694 
CALL_STATIC
(
jby‹
, 
By‹
, 0, 
»suÉ
.
b
, 
çl£
);

2695 
CALL_STATIC
(
jch¬
, 
Ch¬
, 0, 
»suÉ
.
c
, 
çl£
);

2696 
CALL_STATIC
(
jshÜt
, 
ShÜt
, 0, 
»suÉ
.
s
, 
çl£
);

2697 
CALL_STATIC
(
jšt
, 
IÁ
, 0, 
»suÉ
.
i
, 
çl£
);

2698 
CALL_STATIC
(
jlÚg
, 
LÚg
, 0, 
»suÉ
.
j
, 
çl£
);

2699 
CALL_STATIC
(
jæßt
, 
Flßt
, 0.0f, 
»suÉ
.
f
, 
çl£
);

2700 
CALL_STATIC
(
jdoubË
, 
DoubË
, 0.0, 
»suÉ
.
d
, 
çl£
);

2701 
CALL_STATIC
(, 
Void
, , , 
çl£
);

2709 
j¡ršg
 
	$NewSŒšg
(
JNIEnv
* 
’v
, cÚ¡ 
jch¬
* 
unicodeCh¬s
, 
jsize
 
Ën
)

2711 
	`JNI_ENTER
();

2712 
jobjeù
 
»tv®
;

2714 
SŒšgObjeù
* 
j¡r
 = 
	`dvmC»©eSŒšgFromUnicode
(
unicodeCh¬s
, 
Ën
);

2715 ià(
j¡r
 =ğ
NULL
) {

2716 
»tv®
 = 
NULL
;

2718 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
j¡r
, 
NULL
);

2719 
»tv®
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
j¡r
);

2722 
	`JNI_EXIT
();

2723  
»tv®
;

2724 
	}
}

2729 
jsize
 
	$G‘SŒšgL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
)

2731 
	`JNI_ENTER
();

2733 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

2734 
jsize
 
Ën
 = 
	`dvmSŒšgL’
(
¡rObj
);

2736 
	`JNI_EXIT
();

2737  
Ën
;

2738 
	}
}

2747 cÚ¡ 
jch¬
* 
	$G‘SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jboŞ—n
* 
isCİy
)

2749 
	`JNI_ENTER
();

2751 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

2752 
A¼ayObjeù
* 
¡rCh¬s
 = 
	`dvmSŒšgCh¬A¼ay
(
¡rObj
);

2754 
	`pšPrim™iveA¼ay
(
¡rCh¬s
);

2756 cÚ¡ 
u2
* 
d©a
 = 
	`dvmSŒšgCh¬s
(
¡rObj
);

2757 ià(
isCİy
 !ğ
NULL
)

2758 *
isCİy
 = 
JNI_FALSE
;

2760 
	`JNI_EXIT
();

2761  (
jch¬
*)
d©a
;

2762 
	}
}

2767 
	$R–—£SŒšgCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, cÚ¡ 
jch¬
* 
ch¬s
)

2769 
	`JNI_ENTER
();

2770 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

2771 
A¼ayObjeù
* 
¡rCh¬s
 = 
	`dvmSŒšgCh¬A¼ay
(
¡rObj
);

2772 
	`uÅšPrim™iveA¼ay
(
¡rCh¬s
);

2773 
	`JNI_EXIT
();

2774 
	}
}

2782 
j¡ršg
 
	$NewSŒšgUTF
(
JNIEnv
* 
’v
, cÚ¡ * 
by‹s
)

2784 
	`JNI_ENTER
();

2786 
j¡ršg
 
»suÉ
;

2788 ià(
by‹s
 =ğ
NULL
) {

2789 
»suÉ
 = 
NULL
;

2792 
SŒšgObjeù
* 
ÃwSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
by‹s
, 
ALLOC_DEFAULT
);

2793 
»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
ÃwSŒ
);

2794 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÃwSŒ
, 
NULL
);

2797 
	`JNI_EXIT
();

2798  
»suÉ
;

2799 
	}
}

2804 
jsize
 
	$G‘SŒšgUTFL’gth
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
)

2806 
	`JNI_ENTER
();

2808 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

2809 
jsize
 
Ën
 = 
	`dvmSŒšgUtf8By‹L’
(
¡rObj
);

2811 
	`JNI_EXIT
();

2812  
Ën
;

2813 
	}
}

2829 cÚ¡ * 
	$G‘SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
,

2830 
jboŞ—n
* 
isCİy
)

2832 
	`JNI_ENTER
();

2833 * 
ÃwSŒ
;

2835 ià(
j¡r
 =ğ
NULL
) {

2837 
ÃwSŒ
 = 
NULL
;

2839 ià(
isCİy
 !ğ
NULL
)

2840 *
isCİy
 = 
JNI_TRUE
;

2842 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

2843 
ÃwSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡rObj
);

2844 ià(
ÃwSŒ
 =ğ
NULL
) {

2846 
	`dvmThrowExû±iÚ
("Ljava/lang/OutOfMemoryError;",

2851 
	`JNI_EXIT
();

2852  
ÃwSŒ
;

2853 
	}
}

2858 
	$R–—£SŒšgUTFCh¬s
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, cÚ¡ * 
utf
)

2860 
	`JNI_ENTER
();

2861 
	`ä“
((*)
utf
);

2862 
	`JNI_EXIT
();

2863 
	}
}

2868 
jsize
 
	$G‘A¼ayL’gth
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
)

2870 
	`JNI_ENTER
();

2872 
A¼ayObjeù
* 
¬rObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

2873 
jsize
 
Ëngth
 = 
¬rObj
->length;

2875 
	`JNI_EXIT
();

2876  
Ëngth
;

2877 
	}
}

2882 
jobjeùA¼ay
 
	$NewObjeùA¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
,

2883 
jşass
 
j–em’tCÏss
, 
jobjeù
 
jš™ŸlEËm’t
)

2885 
	`JNI_ENTER
();

2887 
jobjeùA¼ay
 
ÃwA¼ay
 = 
NULL
;

2888 
CÏssObjeù
* 
–emCÏssObj
 =

2889 (
CÏssObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
j–em’tCÏss
);

2891 ià(
–emCÏssObj
 =ğ
NULL
) {

2892 
	`dvmThrowExû±iÚ
("Ljava/lang/NullPointerException;",

2894 
ba
;

2897 
A¼ayObjeù
* 
ÃwObj
 =

2898 
	`dvmAÎocObjeùA¼ay
(
–emCÏssObj
, 
Ëngth
, 
ALLOC_DEFAULT
);

2899 ià(
ÃwObj
 =ğ
NULL
) {

2900 
	`as£¹
(
	`dvmCheckExû±iÚ
(
_£lf
));

2901 
ba
;

2903 
ÃwA¼ay
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
ÃwObj
);

2904 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwObj
, 
NULL
);

2909 ià(
jš™ŸlEËm’t
 !ğ
NULL
) {

2910 
Objeù
* 
š™ŸlEËm’t
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jš™ŸlEËm’t
);

2911 
Objeù
** 
¬¿yD©a
 = (Objeù**è
ÃwObj
->
cÚ‹Ás
;

2913 
Ëngth
--)

2914 *
¬¿yD©a
++ = 
š™ŸlEËm’t
;

2918 
ba
:

2919 
	`JNI_EXIT
();

2920  
ÃwA¼ay
;

2921 
	}
}

2928 
jobjeù
 
	$G‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
j¬r
,

2929 
jsize
 
šdex
)

2931 
	`JNI_ENTER
();

2933 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

2934 
jobjeù
 
»tv®
 = 
NULL
;

2936 
	`as£¹
(
¬¿yObj
 !ğ
NULL
);

2939 ià(
šdex
 < 0 || index >ğ(è
¬¿yObj
->
Ëngth
) {

2940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;",

2941 
¬¿yObj
->
obj
.
şazz
->
desütÜ
);

2942 
ba
;

2945 
Objeù
* 
v®ue
 = ((Objeù**è
¬¿yObj
->
cÚ‹Ás
)[
šdex
];

2946 
»tv®
 = 
	`addLoÿlReã»nû
(
’v
, 
v®ue
);

2948 
ba
:

2949 
	`JNI_EXIT
();

2950  
»tv®
;

2951 
	}
}

2956 
	$S‘ObjeùA¼ayEËm’t
(
JNIEnv
* 
’v
, 
jobjeùA¼ay
 
j¬r
,

2957 
jsize
 
šdex
, 
jobjeù
 
jobj
)

2959 
	`JNI_ENTER
();

2961 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

2963 
	`as£¹
(
¬¿yObj
 !ğ
NULL
);

2966 ià(
šdex
 < 0 || index >ğ(è
¬¿yObj
->
Ëngth
) {

2967 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;",

2968 
¬¿yObj
->
obj
.
şazz
->
desütÜ
);

2969 
ba
;

2974 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

2975 ((
Objeù
**è
¬¿yObj
->
cÚ‹Ás
)[
šdex
] = 
obj
;

2977 
ba
:

2978 
	`JNI_EXIT
();

2979 
	}
}

2984 
	#NEW_PRIMITIVE_ARRAY
(
_¬ty³
, 
_jÇme
, 
_ty³ch¬
) \

2985 
_¬ty³
 
New
##
_jÇme
##
	`A¼ay
(
JNIEnv
* 
’v
, 
jsize
 
Ëngth
) \

2987 
	`JNI_ENTER
(); \

2988 
A¼ayObjeù
* 
¬¿yObj
; \

2989 
¬¿yObj
 = 
	`dvmAÎocPrim™iveA¼ay
(
_ty³ch¬
, 
Ëngth
, \

2990 
ALLOC_DEFAULT
); \

2991 
j¬¿y
 
j¬r
 = 
NULL
; \

2992 ià(
¬¿yObj
 !ğ
NULL
) { \

2993 
j¬r
 = 
	`addLoÿlReã»nû
(
’v
, (
Objeù
*è
¬¿yObj
); \

2994 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬¿yObj
, 
NULL
); \

2996 
	`JNI_EXIT
(); \

2997  (
_¬ty³
)
j¬r
; \

2998 }

	)

2999 
NEW_PRIMITIVE_ARRAY
(
jboŞ—nA¼ay
, 
BoŞ—n
, 'Z');

3000 
NEW_PRIMITIVE_ARRAY
(
jby‹A¼ay
, 
By‹
, 'B');

3001 
NEW_PRIMITIVE_ARRAY
(
jch¬A¼ay
, 
Ch¬
, 'C');

3002 
NEW_PRIMITIVE_ARRAY
(
jshÜtA¼ay
, 
ShÜt
, 'S');

3003 
NEW_PRIMITIVE_ARRAY
(
jštA¼ay
, 
IÁ
, 'I');

3004 
NEW_PRIMITIVE_ARRAY
(
jlÚgA¼ay
, 
LÚg
, 'J');

3005 
NEW_PRIMITIVE_ARRAY
(
jæßtA¼ay
, 
Flßt
, 'F');

3006 
NEW_PRIMITIVE_ARRAY
(
jdoubËA¼ay
, 
DoubË
, 'D');

3017 
	#GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

3018 
_ùy³
* 
G‘
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

3019 
_ùy³
##
A¼ay
 
j¬r
, 
jboŞ—n
* 
isCİy
) \

3021 
	`JNI_ENTER
(); \

3022 
_ùy³
* 
d©a
; \

3023 
A¼ayObjeù
* 
¬¿yObj
 = \

3024 (
A¼ayObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
); \

3025 
	`pšPrim™iveA¼ay
(
¬¿yObj
); \

3026 
d©a
 = (
_ùy³
*è
¬¿yObj
->
cÚ‹Ás
; \

3027 ià(
isCİy
 !ğ
NULL
) \

3028 *
isCİy
 = 
JNI_FALSE
; \

3029 
	`JNI_EXIT
(); \

3030  
d©a
; \

3031 }

	)

3040 
	#RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
) \

3041 
R–—£
##
_jÇme
##
	`A¼ayEËm’ts
(
JNIEnv
* 
’v
, \

3042 
_ùy³
##
A¼ay
 
j¬r
, _ùy³* 
–ems
, 
jšt
 
mode
) \

3044 
	`UNUSED_PARAMETER
(
–ems
); \

3045 
	`JNI_ENTER
(); \

3046 ià(
mode
 !ğ
JNI_COMMIT
) { \

3047 
A¼ayObjeù
* 
¬¿yObj
 = \

3048 (
A¼ayObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
); \

3049 
	`uÅšPrim™iveA¼ay
(
¬¿yObj
); \

3051 
	`JNI_EXIT
(); \

3052 }

	)

3057 
	#GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

3058 
G‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

3059 
_ùy³
##
A¼ay
 
j¬r
, 
jsize
 
¡¬t
, jsiz
Ën
, _ùy³* 
buf
) \

3061 
	`JNI_ENTER
(); \

3062 
A¼ayObjeù
* 
¬¿yObj
 = \

3063 (
A¼ayObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
); \

3064 
_ùy³
* 
d©a
 = (_ùy³*è
¬¿yObj
->
cÚ‹Ás
; \

3065 ià(
¡¬t
 < 0 || 
Ën
 < 0 || s¹ +†’ > (è
¬¿yObj
->
Ëngth
) { \

3066 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

3067 
¬¿yObj
->
obj
.
şazz
->
desütÜ
); \

3069 
	`memıy
(
buf
, 
d©a
 + 
¡¬t
, 
Ën
 * (
_ùy³
)); \

3071 
	`JNI_EXIT
(); \

3072 }

	)

3077 
	#SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
) \

3078 
S‘
##
_jÇme
##
	`A¼ayRegiÚ
(
JNIEnv
* 
’v
, \

3079 
_ùy³
##
A¼ay
 
j¬r
, 
jsize
 
¡¬t
, jsiz
Ën
, cÚ¡ _ùy³* 
buf
) \

3081 
	`JNI_ENTER
(); \

3082 
A¼ayObjeù
* 
¬¿yObj
 = \

3083 (
A¼ayObjeù
*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
); \

3084 
_ùy³
* 
d©a
 = (_ùy³*è
¬¿yObj
->
cÚ‹Ás
; \

3085 ià(
¡¬t
 < 0 || 
Ën
 < 0 || s¹ +†’ > (è
¬¿yObj
->
Ëngth
) { \

3086 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

3087 
¬¿yObj
->
obj
.
şazz
->
desütÜ
); \

3089 
	`memıy
(
d©a
 + 
¡¬t
, 
buf
, 
Ën
 * (
_ùy³
)); \

3091 
	`JNI_EXIT
(); \

3092 }

	)

3101 
	#PRIMITIVE_ARRAY_FUNCTIONS
(
_ùy³
, 
_jÇme
) \

3102 
	`GET_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

3103 
	`RELEASE_PRIMITIVE_ARRAY_ELEMENTS
(
_ùy³
, 
_jÇme
); \

3104 
	`GET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
); \

3105 
	`SET_PRIMITIVE_ARRAY_REGION
(
_ùy³
, 
_jÇme
);

	)

3107 
PRIMITIVE_ARRAY_FUNCTIONS
(
jboŞ—n
, 
BoŞ—n
);

3108 
PRIMITIVE_ARRAY_FUNCTIONS
(
jby‹
, 
By‹
);

3109 
PRIMITIVE_ARRAY_FUNCTIONS
(
jch¬
, 
Ch¬
);

3110 
PRIMITIVE_ARRAY_FUNCTIONS
(
jshÜt
, 
ShÜt
);

3111 
PRIMITIVE_ARRAY_FUNCTIONS
(
jšt
, 
IÁ
);

3112 
PRIMITIVE_ARRAY_FUNCTIONS
(
jlÚg
, 
LÚg
);

3113 
PRIMITIVE_ARRAY_FUNCTIONS
(
jæßt
, 
Flßt
);

3114 
PRIMITIVE_ARRAY_FUNCTIONS
(
jdoubË
, 
DoubË
);

3119 
jšt
 
	$Regi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
,

3120 cÚ¡ 
JNIN©iveM‘hod
* 
m‘hods
, 
jšt
 
nM‘hods
)

3122 
	`JNI_ENTER
();

3124 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
jşazz
);

3125 
jšt
 
»tv®
;

3126 
i
;

3128 ià(
gDvm
.
v”bo£Jni
) {

3129 
	`LOGI
("[Registering JNI‚ative methods for class %s]\n",

3130 
şazz
->
desütÜ
);

3133 
i
 = 0; i < 
nM‘hods
; i++) {

3134 ià(!
	`dvmRegi¡”JNIM‘hod
(
şazz
, 
m‘hods
[
i
].
Çme
,

3135 
m‘hods
[
i
].
sigÇtu»
, m‘hods[i].
âPŒ
))

3137 
»tv®
 = 
JNI_ERR
;

3138 
ba
;

3141 
»tv®
 = 
JNI_OK
;

3143 
ba
:

3144 
	`JNI_EXIT
();

3145  
»tv®
;

3146 
	}
}

3151 
jšt
 
	$UÄegi¡”N©ives
(
JNIEnv
* 
’v
, 
jşass
 
jşazz
)

3153 
	`JNI_ENTER
();

3160 
	`JNI_EXIT
();

3161  
JNI_ERR
;

3162 
	}
}

3170 
jšt
 
	$MÚ™ÜEÁ”
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

3172 
	`JNI_ENTER
();

3173 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

3174 
	`dvmLockObjeù
(
_£lf
, 
obj
);

3175 
	`ŒackMÚ™ÜEÁ”
(
_£lf
, 
obj
);

3176 
	`JNI_EXIT
();

3177  
JNI_OK
;

3178 
	}
}

3189 
jšt
 
	$MÚ™ÜEx™
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

3191 
	`JNI_ENTER
();

3192 
Objeù
* 
obj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jobj
);

3193 
boŞ
 
sucûss
 = 
	`dvmUÆockObjeù
(
_£lf
, 
obj
);

3194 ià(
sucûss
)

3195 
	`ŒackMÚ™ÜEx™
(
_£lf
, 
obj
);

3196 
	`JNI_EXIT
();

3197  
sucûss
 ? 
JNI_OK
 : 
JNI_ERR
;

3198 
	}
}

3203 
jšt
 
	$G‘JavaVM
(
JNIEnv
* 
’v
, 
JavaVM
** 
vm
)

3205 
	`JNI_ENTER
();

3207 *
vm
 = (
JavaVM
*è((
JNIEnvExt
*)
’v
)->vm;

3208 
	`JNI_EXIT
();

3209 ià(*
vm
 =ğ
NULL
)

3210  
JNI_ERR
;

3212  
JNI_OK
;

3213 
	}
}

3218 
	$G‘SŒšgRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jsize
 
¡¬t
, jsiz
Ën
,

3219 
jch¬
* 
buf
)

3221 
	`JNI_ENTER
();

3222 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

3223 ià(
¡¬t
 + 
Ën
 > 
	`dvmSŒšgL’
(
¡rObj
))

3224 
	`dvmThrowExû±iÚ
("Ljava/Ïng/SŒšgIndexOutOfBoundsExû±iÚ;", 
NULL
);

3226 
	`memıy
(
buf
, 
	`dvmSŒšgCh¬s
(
¡rObj
è+ 
¡¬t
, 
Ën
 * (
u2
));

3227 
	`JNI_EXIT
();

3228 
	}
}

3234 
	$G‘SŒšgUTFRegiÚ
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
, 
jsize
 
¡¬t
,

3235 
jsize
 
Ën
, * 
buf
)

3237 
	`JNI_ENTER
();

3238 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

3239 ià(
¡¬t
 + 
Ën
 > 
	`dvmSŒšgL’
(
¡rObj
))

3240 
	`dvmThrowExû±iÚ
("Ljava/Ïng/SŒšgIndexOutOfBoundsExû±iÚ;", 
NULL
);

3242 
	`dvmC»©eC¡rFromSŒšgRegiÚ
(
¡rObj
, 
¡¬t
, 
Ën
, 
buf
);

3243 
	`JNI_EXIT
();

3244 
	}
}

3254 * 
	$G‘Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
,

3255 
jboŞ—n
* 
isCİy
)

3257 
	`JNI_ENTER
();

3258 * 
d©a
;

3259 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

3260 
	`pšPrim™iveA¼ay
(
¬¿yObj
);

3261 
d©a
 = 
¬¿yObj
->
cÚ‹Ás
;

3262 ià(
isCİy
 !ğ
NULL
)

3263 *
isCİy
 = 
JNI_FALSE
;

3264 
	`JNI_EXIT
();

3265  
d©a
;

3266 
	}
}

3271 
	$R–—£Prim™iveA¼ayCr™iÿl
(
JNIEnv
* 
’v
, 
j¬¿y
 
j¬r
,

3272 * 
ÿ¼ay
, 
jšt
 
mode
)

3274 
	`JNI_ENTER
();

3275 ià(
mode
 !ğ
JNI_COMMIT
) {

3276 
A¼ayObjeù
* 
¬¿yObj
 = (A¼ayObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¬r
);

3277 
	`uÅšPrim™iveA¼ay
(
¬¿yObj
);

3279 
	`JNI_EXIT
();

3280 
	}
}

3285 cÚ¡ 
jch¬
* 
	$G‘SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
,

3286 
jboŞ—n
* 
isCİy
)

3288 
	`JNI_ENTER
();

3289 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

3290 
A¼ayObjeù
* 
¡rCh¬s
 = 
	`dvmSŒšgCh¬A¼ay
(
¡rObj
);

3292 
	`pšPrim™iveA¼ay
(
¡rCh¬s
);

3294 cÚ¡ 
u2
* 
d©a
 = 
	`dvmSŒšgCh¬s
(
¡rObj
);

3295 ià(
isCİy
 !ğ
NULL
)

3296 *
isCİy
 = 
JNI_FALSE
;

3298 
	`JNI_EXIT
();

3299  (
jch¬
*)
d©a
;

3300 
	}
}

3305 
	$R–—£SŒšgCr™iÿl
(
JNIEnv
* 
’v
, 
j¡ršg
 
j¡r
,

3306 cÚ¡ 
jch¬
* 
ÿ¼ay
)

3308 
	`JNI_ENTER
();

3309 
SŒšgObjeù
* 
¡rObj
 = (SŒšgObjeù*è
	`dvmDecodeIndœeùRef
(
’v
, 
j¡r
);

3310 
A¼ayObjeù
* 
¡rCh¬s
 = 
	`dvmSŒšgCh¬A¼ay
(
¡rObj
);

3311 
	`uÅšPrim™iveA¼ay
(
¡rCh¬s
);

3312 
	`JNI_EXIT
();

3313 
	}
}

3318 
jw—k
 
	$NewW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jobjeù
 
obj
)

3320 
	`JNI_ENTER
();

3322 
jobjeù
 
g»f
 = 
NULL
;

3323 
	`LOGE
("JNI ERROR: NewWeakGlobalRef‚ot implemented\n");

3324 
	`dvmAbÜt
();

3325 
	`JNI_EXIT
();

3326  
g»f
;

3327 
	}
}

3332 
	$D–‘eW—kGlob®Ref
(
JNIEnv
* 
’v
, 
jw—k
 
obj
)

3334 
	`JNI_ENTER
();

3336 
	`LOGE
("JNI ERROR: DeleteWeakGlobalRef‚ot implemented\n");

3337 
	`dvmAbÜt
();

3338 
	`JNI_EXIT
();

3339 
	}
}

3346 
jboŞ—n
 
	$Exû±iÚCheck
(
JNIEnv
* 
’v
)

3348 
	`JNI_ENTER
();

3349 
boŞ
 
»suÉ
 = 
	`dvmCheckExû±iÚ
(
_£lf
);

3350 
	`JNI_EXIT
();

3351  
»suÉ
;

3352 
	}
}

3362 
jobjeùRefTy³
 
	$G‘ObjeùRefTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
)

3364 
	`JNI_ENTER
();

3365 
jobjeùRefTy³
 
ty³
 = 
	`dvmG‘JNIRefTy³
(
’v
, 
jobj
);

3366 
	`JNI_EXIT
();

3367  
ty³
;

3368 
	}
}

3376 
jobjeù
 
	$NewDœeùBy‹Bufãr
(
JNIEnv
* 
’v
, * 
add»ss
, 
jlÚg
 
ÿ·c™y
)

3378 
	`JNI_ENTER
();

3380 
Th»ad
* 
£lf
 = 
_£lf
 ;

3381 
Objeù
* 
¶©fÜmAdd»ss
 = 
NULL
;

3382 
JV®ue
 
ÿÎResuÉ
;

3383 
jobjeù
 
»suÉ
 = 
NULL
;

3386 
	`dvmC®lM‘hod
(
£lf
,

3387 
gDvm
.
m‘hOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_Ú
,

3388 
NULL
, &
ÿÎResuÉ
, 
add»ss
);

3389 ià(
	`dvmG‘Exû±iÚ
(
£lf
è!ğ
NULL
 || 
ÿÎResuÉ
.
l
 == NULL)

3390 
ba
;

3393 
¶©fÜmAdd»ss
 = (
Objeù
*è
ÿÎResuÉ
.
l
;

3394 
	`dvmAddT¿ckedAÎoc
(
¶©fÜmAdd»ss
, 
£lf
);

3395 
	`LOGV
("Œackšg %°fÜ‡dd»ss=%p\n", 
¶©fÜmAdd»ss
, 
add»ss
);

3398 
CÏssObjeù
* 
şazz
 = 
gDvm
.
şassJavaNioR—dWr™eDœeùBy‹Bufãr
;

3399 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

3400 
ba
;

3401 
Objeù
* 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

3402 ià(
ÃwObj
 !ğ
NULL
) {

3404 
»suÉ
 = 
	`addLoÿlReã»nû
(
’v
, 
ÃwObj
);

3405 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hJavaNioR—dWr™eDœeùBy‹Bufãr_š™
,

3406 
ÃwObj
, &
ÿÎResuÉ
, 
¶©fÜmAdd»ss
, (
jšt
è
ÿ·c™y
, (jint) 0);

3407 ià(
	`dvmG‘Exû±iÚ
(
£lf
è!ğ
NULL
) {

3408 
	`d–‘eLoÿlReã»nû
(
’v
, 
»suÉ
);

3409 
»suÉ
 = 
NULL
;

3410 
ba
;

3414 
ba
:

3415 ià(
¶©fÜmAdd»ss
 !ğ
NULL
)

3416 
	`dvmR–—£T¿ckedAÎoc
(
¶©fÜmAdd»ss
, 
£lf
);

3417 
	`JNI_EXIT
();

3418  
»suÉ
;

3419 
	}
}

3426 * 
	$G‘DœeùBufãrAdd»ss
(
JNIEnv
* 
’v
, 
jobjeù
 
jbuf
)

3428 
	`JNI_ENTER
();

3430 
Objeù
* 
bufObj
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jbuf
);

3431 
Th»ad
* 
£lf
 = 
_£lf
 ;

3432 * 
»suÉ
;

3441 
»suÉ
 = (*è
	`dvmG‘F›ldIÁ
(
bufObj
,

3442 
gDvm
.
offJavaNioBufãr_efãùiveDœeùAdd»ss
);

3443 ià(
»suÉ
 !ğ
NULL
) {

3445 
ba
;

3452 ià(!
	`dvmIn¡ªûof
(
bufObj
->
şazz
,

3453 
gDvm
.
şassOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr
))

3455 
ba
;

3464 
JV®ue
 
ÿÎResuÉ
;

3465 cÚ¡ 
M‘hod
* 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
bufObj
->
şazz
,

3466 
gDvm
.
m‘hOrgA·cheH¬mÚyNioIÁ”ÇlDœeùBufãr_g‘EfãùiveAdd»ss
);

3467 
	`dvmC®lM‘hodA
(
£lf
, 
m‘h
, 
bufObj
, 
çl£
, &
ÿÎResuÉ
, 
NULL
);

3468 ià(
	`dvmG‘Exû±iÚ
(
£lf
è!ğ
NULL
) {

3469 
	`dvmCË¬Exû±iÚ
(
£lf
);

3470 
ÿÎResuÉ
.
l
 = 
NULL
;

3473 
Objeù
* 
¶©fÜmAddr
 = 
ÿÎResuÉ
.
l
;

3474 ià(
¶©fÜmAddr
 =ğ
NULL
) {

3475 
	`LOGV
("Got„equest for‡ddress of‚on-direct buffer\n");

3476 
ba
;

3484 
»suÉ
 = (*è
	`dvmG‘F›ldIÁ
(
¶©fÜmAddr
,

3485 
gDvm
.
offOrgA·cheH¬mÚyLuniPÏtfÜmPÏtfÜmAdd»ss_o§ddr
);

3489 
ba
:

3490 
	`JNI_EXIT
();

3491  
»suÉ
;

3492 
	}
}

3501 
jlÚg
 
	$G‘DœeùBufãrC­ac™y
(
JNIEnv
* 
’v
, 
jobjeù
 
jbuf
)

3503 
	`JNI_ENTER
();

3511 
Objeù
* 
buf
 = 
	`dvmDecodeIndœeùRef
(
’v
, 
jbuf
);

3512 
jlÚg
 
»suÉ
 = 
	`dvmG‘F›ldIÁ
(
buf
, 
gDvm
.
offJavaNioBufãr_ÿ·c™y
);

3514 
	`JNI_EXIT
();

3515  
»suÉ
;

3516 
	}
}

3544 
jšt
 
	$©chTh»ad
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
,

3545 
boŞ
 
isD«mÚ
)

3547 
JavaVMA‰achArgs
* 
¬gs
 = (JavaVMA‰achArgs*è
thr_¬gs
;

3548 
Th»ad
* 
£lf
;

3549 
boŞ
 
»suÉ
 = 
çl£
;

3554 
£lf
 = 
	`dvmTh»adS–f
();

3555 ià(
£lf
 !ğ
NULL
) {

3556 *
p_’v
 = 
£lf
->
jniEnv
;

3557  
JNI_OK
;

3563 ià(
gDvm
.
zygÙe
) {

3564  
JNI_ERR
;

3568 
	`dvmLockTh»adLi¡
(
NULL
);

3569 ià(
gDvm
.
nÚD«mÚTh»adCouÁ
 == 0) {

3571 
	`LOGV
("Refusingo‡ttachhread '%s' -- VM is shutting down\n",

3572 (
thr_¬gs
 =ğ
NULL
è? "(unknown)" : 
¬gs
->
Çme
);

3573 
	`dvmUÆockTh»adLi¡
();

3574  
JNI_ERR
;

3576 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

3577 
	`dvmUÆockTh»adLi¡
();

3580 
JavaVMA‰achArgs
 
¬gsCİy
;

3581 ià(
¬gs
 =ğ
NULL
) {

3583 
¬gsCİy
.
v”siÚ
 = 
JNI_VERSION_1_2
;

3584 
¬gsCİy
.
Çme
 = 
NULL
;

3585 
¬gsCİy
.
group
 = 
	`dvmG‘MašTh»adGroup
();

3587 
	`as£¹
(
¬gs
->
v”siÚ
 >ğ
JNI_VERSION_1_2
);

3589 
¬gsCİy
.
v”siÚ
 = 
¬gs
->version;

3590 
¬gsCİy
.
Çme
 = 
¬gs
->name;

3591 ià(
¬gs
->
group
 !ğ
NULL
)

3592 
¬gsCİy
.
group
 = 
¬gs
->group;

3594 
¬gsCİy
.
group
 = 
	`dvmG‘MašTh»adGroup
();

3597 
»suÉ
 = 
	`dvmA‰achCu¼’tTh»ad
(&
¬gsCİy
, 
isD«mÚ
);

3600 
	`dvmLockTh»adLi¡
(
NULL
);

3601 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

3602 
	`dvmUÆockTh»adLi¡
();

3609 ià(
»suÉ
) {

3610 
£lf
 = 
	`dvmTh»adS–f
();

3611 
	`as£¹
(
£lf
 !ğ
NULL
);

3612 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

3613 *
p_’v
 = 
£lf
->
jniEnv
;

3614  
JNI_OK
;

3616  
JNI_ERR
;

3618 
	}
}

3624 
jšt
 
	$A‰achCu¼’tTh»ad
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
, * 
thr_¬gs
)

3626  
	`©chTh»ad
(
vm
, 
p_’v
, 
thr_¬gs
, 
çl£
);

3627 
	}
}

3632 
jšt
 
	$A‰achCu¼’tTh»adAsD«mÚ
(
JavaVM
* 
vm
, 
JNIEnv
** 
p_’v
,

3633 * 
thr_¬gs
)

3635  
	`©chTh»ad
(
vm
, 
p_’v
, 
thr_¬gs
, 
Œue
);

3636 
	}
}

3641 
jšt
 
	$D‘achCu¼’tTh»ad
(
JavaVM
* 
vm
)

3643 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

3645 ià(
£lf
 =ğ
NULL
)

3646  
JNI_ERR
;

3649 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

3652 
	`dvmD‘achCu¼’tTh»ad
();

3655  
JNI_OK
;

3656 
	}
}

3665 
jšt
 
	$G‘Env
(
JavaVM
* 
vm
, ** 
’v
, 
jšt
 
v”siÚ
)

3667 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

3669 ià(
v”siÚ
 < 
JNI_VERSION_1_1
 || v”siÚ > 
JNI_VERSION_1_6
)

3670  
JNI_EVERSION
;

3672 ià(
£lf
 =ğ
NULL
) {

3673 *
’v
 = 
NULL
;

3676 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

3677 *
’v
 = (*è
	`dvmG‘Th»adJNIEnv
(
£lf
);

3678 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

3680 ià(*
’v
 =ğ
NULL
)

3681  
JNI_EDETACHED
;

3683  
JNI_OK
;

3684 
	}
}

3700 
jšt
 
	$De¡royJavaVM
(
JavaVM
* 
vm
)

3702 
JavaVMExt
* 
ext
 = (JavaVMExt*è
vm
;

3703 
Th»ad
* 
£lf
;

3705 ià(
ext
 =ğ
NULL
)

3706  
JNI_ERR
;

3708 
	`LOGD
("DestroyJavaVM waiting for‚on-daemonhreadsoƒxit\n");

3713 
£lf
 = 
	`dvmTh»adS–f
();

3714 ià(
£lf
 =ğ
NULL
) {

3715 
JNIEnv
* 
tmpEnv
;

3716 ià(
	`A‰achCu¼’tTh»ad
(
vm
, &
tmpEnv
, 
NULL
è!ğ
JNI_OK
) {

3717 
	`LOGV
("Unableo„eattach main for Destroy;‡ssuming VM is "

3719 
gDvm
.
nÚD«mÚTh»adCouÁ
);

3720 
shutdown
;

3722 
	`LOGV
("Attachedo wait for shutdown in Destroy\n");

3725 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

3727 
	`dvmLockTh»adLi¡
(
£lf
);

3728 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

3730 
gDvm
.
nÚD«mÚTh»adCouÁ
 > 0)

3731 
	`±h»ad_cÚd_wa™
(&
gDvm
.
vmEx™CÚd
, &gDvm.
th»adLi¡Lock
);

3733 
	`dvmUÆockTh»adLi¡
();

3734 
£lf
 = 
NULL
;

3736 
shutdown
:

3740 
	`LOGD
("DestroyJavaVM shutting VM down\n");

3741 
	`dvmShutdown
();

3744 
	`ä“
(
ext
->
’vLi¡
);

3745 
	`ä“
(
ext
);

3747  
JNI_OK
;

3748 
	}
}

3757 cÚ¡ 
JNIN©iveIÁ”çû
 
	ggN©iveIÁ”çû
 = {

3758 
NULL
,

3759 
NULL
,

3760 
NULL
,

3761 
NULL
,

3763 
G‘V”siÚ
,

3765 
DefšeCÏss
,

3766 
FšdCÏss
,

3768 
FromReæeùedM‘hod
,

3769 
FromReæeùedF›ld
,

3770 
ToReæeùedM‘hod
,

3772 
G‘Su³rşass
,

3773 
IsAssigÇbËFrom
,

3775 
ToReæeùedF›ld
,

3777 
Throw
,

3778 
ThrowNew
,

3779 
Exû±iÚOccu¼ed
,

3780 
Exû±iÚDesüibe
,

3781 
Exû±iÚCË¬
,

3782 
F©®E¼Ü
,

3784 
PushLoÿlF¿me
,

3785 
PİLoÿlF¿me
,

3787 
NewGlob®Ref
,

3788 
D–‘eGlob®Ref
,

3789 
D–‘eLoÿlRef
,

3790 
IsSameObjeù
,

3791 
NewLoÿlRef
,

3792 
Ensu»LoÿlC­ac™y
,

3794 
AÎocObjeù
,

3795 
NewObjeù
,

3796 
NewObjeùV
,

3797 
NewObjeùA
,

3799 
G‘ObjeùCÏss
,

3800 
IsIn¡ªûOf
,

3802 
G‘M‘hodID
,

3804 
C®lObjeùM‘hod
,

3805 
C®lObjeùM‘hodV
,

3806 
C®lObjeùM‘hodA
,

3807 
C®lBoŞ—nM‘hod
,

3808 
C®lBoŞ—nM‘hodV
,

3809 
C®lBoŞ—nM‘hodA
,

3810 
C®lBy‹M‘hod
,

3811 
C®lBy‹M‘hodV
,

3812 
C®lBy‹M‘hodA
,

3813 
C®lCh¬M‘hod
,

3814 
C®lCh¬M‘hodV
,

3815 
C®lCh¬M‘hodA
,

3816 
C®lShÜtM‘hod
,

3817 
C®lShÜtM‘hodV
,

3818 
C®lShÜtM‘hodA
,

3819 
C®lIÁM‘hod
,

3820 
C®lIÁM‘hodV
,

3821 
C®lIÁM‘hodA
,

3822 
C®lLÚgM‘hod
,

3823 
C®lLÚgM‘hodV
,

3824 
C®lLÚgM‘hodA
,

3825 
C®lFlßtM‘hod
,

3826 
C®lFlßtM‘hodV
,

3827 
C®lFlßtM‘hodA
,

3828 
C®lDoubËM‘hod
,

3829 
C®lDoubËM‘hodV
,

3830 
C®lDoubËM‘hodA
,

3831 
C®lVoidM‘hod
,

3832 
C®lVoidM‘hodV
,

3833 
C®lVoidM‘hodA
,

3835 
C®lNÚvœtu®ObjeùM‘hod
,

3836 
C®lNÚvœtu®ObjeùM‘hodV
,

3837 
C®lNÚvœtu®ObjeùM‘hodA
,

3838 
C®lNÚvœtu®BoŞ—nM‘hod
,

3839 
C®lNÚvœtu®BoŞ—nM‘hodV
,

3840 
C®lNÚvœtu®BoŞ—nM‘hodA
,

3841 
C®lNÚvœtu®By‹M‘hod
,

3842 
C®lNÚvœtu®By‹M‘hodV
,

3843 
C®lNÚvœtu®By‹M‘hodA
,

3844 
C®lNÚvœtu®Ch¬M‘hod
,

3845 
C®lNÚvœtu®Ch¬M‘hodV
,

3846 
C®lNÚvœtu®Ch¬M‘hodA
,

3847 
C®lNÚvœtu®ShÜtM‘hod
,

3848 
C®lNÚvœtu®ShÜtM‘hodV
,

3849 
C®lNÚvœtu®ShÜtM‘hodA
,

3850 
C®lNÚvœtu®IÁM‘hod
,

3851 
C®lNÚvœtu®IÁM‘hodV
,

3852 
C®lNÚvœtu®IÁM‘hodA
,

3853 
C®lNÚvœtu®LÚgM‘hod
,

3854 
C®lNÚvœtu®LÚgM‘hodV
,

3855 
C®lNÚvœtu®LÚgM‘hodA
,

3856 
C®lNÚvœtu®FlßtM‘hod
,

3857 
C®lNÚvœtu®FlßtM‘hodV
,

3858 
C®lNÚvœtu®FlßtM‘hodA
,

3859 
C®lNÚvœtu®DoubËM‘hod
,

3860 
C®lNÚvœtu®DoubËM‘hodV
,

3861 
C®lNÚvœtu®DoubËM‘hodA
,

3862 
C®lNÚvœtu®VoidM‘hod
,

3863 
C®lNÚvœtu®VoidM‘hodV
,

3864 
C®lNÚvœtu®VoidM‘hodA
,

3866 
G‘F›ldID
,

3868 
G‘ObjeùF›ld
,

3869 
G‘BoŞ—nF›ld
,

3870 
G‘By‹F›ld
,

3871 
G‘Ch¬F›ld
,

3872 
G‘ShÜtF›ld
,

3873 
G‘IÁF›ld
,

3874 
G‘LÚgF›ld
,

3875 
G‘FlßtF›ld
,

3876 
G‘DoubËF›ld
,

3877 
S‘ObjeùF›ld
,

3878 
S‘BoŞ—nF›ld
,

3879 
S‘By‹F›ld
,

3880 
S‘Ch¬F›ld
,

3881 
S‘ShÜtF›ld
,

3882 
S‘IÁF›ld
,

3883 
S‘LÚgF›ld
,

3884 
S‘FlßtF›ld
,

3885 
S‘DoubËF›ld
,

3887 
G‘SticM‘hodID
,

3889 
C®lSticObjeùM‘hod
,

3890 
C®lSticObjeùM‘hodV
,

3891 
C®lSticObjeùM‘hodA
,

3892 
C®lSticBoŞ—nM‘hod
,

3893 
C®lSticBoŞ—nM‘hodV
,

3894 
C®lSticBoŞ—nM‘hodA
,

3895 
C®lSticBy‹M‘hod
,

3896 
C®lSticBy‹M‘hodV
,

3897 
C®lSticBy‹M‘hodA
,

3898 
C®lSticCh¬M‘hod
,

3899 
C®lSticCh¬M‘hodV
,

3900 
C®lSticCh¬M‘hodA
,

3901 
C®lSticShÜtM‘hod
,

3902 
C®lSticShÜtM‘hodV
,

3903 
C®lSticShÜtM‘hodA
,

3904 
C®lSticIÁM‘hod
,

3905 
C®lSticIÁM‘hodV
,

3906 
C®lSticIÁM‘hodA
,

3907 
C®lSticLÚgM‘hod
,

3908 
C®lSticLÚgM‘hodV
,

3909 
C®lSticLÚgM‘hodA
,

3910 
C®lSticFlßtM‘hod
,

3911 
C®lSticFlßtM‘hodV
,

3912 
C®lSticFlßtM‘hodA
,

3913 
C®lSticDoubËM‘hod
,

3914 
C®lSticDoubËM‘hodV
,

3915 
C®lSticDoubËM‘hodA
,

3916 
C®lSticVoidM‘hod
,

3917 
C®lSticVoidM‘hodV
,

3918 
C®lSticVoidM‘hodA
,

3920 
G‘SticF›ldID
,

3922 
G‘SticObjeùF›ld
,

3923 
G‘SticBoŞ—nF›ld
,

3924 
G‘SticBy‹F›ld
,

3925 
G‘SticCh¬F›ld
,

3926 
G‘SticShÜtF›ld
,

3927 
G‘SticIÁF›ld
,

3928 
G‘SticLÚgF›ld
,

3929 
G‘SticFlßtF›ld
,

3930 
G‘SticDoubËF›ld
,

3932 
S‘SticObjeùF›ld
,

3933 
S‘SticBoŞ—nF›ld
,

3934 
S‘SticBy‹F›ld
,

3935 
S‘SticCh¬F›ld
,

3936 
S‘SticShÜtF›ld
,

3937 
S‘SticIÁF›ld
,

3938 
S‘SticLÚgF›ld
,

3939 
S‘SticFlßtF›ld
,

3940 
S‘SticDoubËF›ld
,

3942 
NewSŒšg
,

3944 
G‘SŒšgL’gth
,

3945 
G‘SŒšgCh¬s
,

3946 
R–—£SŒšgCh¬s
,

3948 
NewSŒšgUTF
,

3949 
G‘SŒšgUTFL’gth
,

3950 
G‘SŒšgUTFCh¬s
,

3951 
R–—£SŒšgUTFCh¬s
,

3953 
G‘A¼ayL’gth
,

3954 
NewObjeùA¼ay
,

3955 
G‘ObjeùA¼ayEËm’t
,

3956 
S‘ObjeùA¼ayEËm’t
,

3958 
NewBoŞ—nA¼ay
,

3959 
NewBy‹A¼ay
,

3960 
NewCh¬A¼ay
,

3961 
NewShÜtA¼ay
,

3962 
NewIÁA¼ay
,

3963 
NewLÚgA¼ay
,

3964 
NewFlßtA¼ay
,

3965 
NewDoubËA¼ay
,

3967 
G‘BoŞ—nA¼ayEËm’ts
,

3968 
G‘By‹A¼ayEËm’ts
,

3969 
G‘Ch¬A¼ayEËm’ts
,

3970 
G‘ShÜtA¼ayEËm’ts
,

3971 
G‘IÁA¼ayEËm’ts
,

3972 
G‘LÚgA¼ayEËm’ts
,

3973 
G‘FlßtA¼ayEËm’ts
,

3974 
G‘DoubËA¼ayEËm’ts
,

3976 
R–—£BoŞ—nA¼ayEËm’ts
,

3977 
R–—£By‹A¼ayEËm’ts
,

3978 
R–—£Ch¬A¼ayEËm’ts
,

3979 
R–—£ShÜtA¼ayEËm’ts
,

3980 
R–—£IÁA¼ayEËm’ts
,

3981 
R–—£LÚgA¼ayEËm’ts
,

3982 
R–—£FlßtA¼ayEËm’ts
,

3983 
R–—£DoubËA¼ayEËm’ts
,

3985 
G‘BoŞ—nA¼ayRegiÚ
,

3986 
G‘By‹A¼ayRegiÚ
,

3987 
G‘Ch¬A¼ayRegiÚ
,

3988 
G‘ShÜtA¼ayRegiÚ
,

3989 
G‘IÁA¼ayRegiÚ
,

3990 
G‘LÚgA¼ayRegiÚ
,

3991 
G‘FlßtA¼ayRegiÚ
,

3992 
G‘DoubËA¼ayRegiÚ
,

3993 
S‘BoŞ—nA¼ayRegiÚ
,

3994 
S‘By‹A¼ayRegiÚ
,

3995 
S‘Ch¬A¼ayRegiÚ
,

3996 
S‘ShÜtA¼ayRegiÚ
,

3997 
S‘IÁA¼ayRegiÚ
,

3998 
S‘LÚgA¼ayRegiÚ
,

3999 
S‘FlßtA¼ayRegiÚ
,

4000 
S‘DoubËA¼ayRegiÚ
,

4002 
Regi¡”N©ives
,

4003 
UÄegi¡”N©ives
,

4005 
MÚ™ÜEÁ”
,

4006 
MÚ™ÜEx™
,

4008 
G‘JavaVM
,

4010 
G‘SŒšgRegiÚ
,

4011 
G‘SŒšgUTFRegiÚ
,

4013 
G‘Prim™iveA¼ayCr™iÿl
,

4014 
R–—£Prim™iveA¼ayCr™iÿl
,

4016 
G‘SŒšgCr™iÿl
,

4017 
R–—£SŒšgCr™iÿl
,

4019 
NewW—kGlob®Ref
,

4020 
D–‘eW—kGlob®Ref
,

4022 
Exû±iÚCheck
,

4024 
NewDœeùBy‹Bufãr
,

4025 
G‘DœeùBufãrAdd»ss
,

4026 
G‘DœeùBufãrC­ac™y
,

4028 
G‘ObjeùRefTy³


4030 cÚ¡ 
JNIInvokeIÁ”çû
 
	ggInvokeIÁ”çû
 = {

4031 
NULL
,

4032 
NULL
,

4033 
NULL
,

4035 
De¡royJavaVM
,

4036 
A‰achCu¼’tTh»ad
,

4037 
D‘achCu¼’tTh»ad
,

4039 
G‘Env
,

4041 
A‰achCu¼’tTh»adAsD«mÚ
,

4059 
	$dvmL©eEÇbËCheckedJni
()

4061 
JNIEnvExt
* 
extEnv
;

4062 
JavaVMExt
* 
extVm
;

4064 
extEnv
 = 
	`dvmG‘JNIEnvFÜTh»ad
();

4065 ià(
extEnv
 =ğ
NULL
) {

4066 
	`LOGE
("dvmLateEnableCheckedJni:hread has‚o JNIEnv\n");

4069 
extVm
 = 
extEnv
->
vm
;

4070 
	`as£¹
(
extVm
 !ğ
NULL
);

4072 ià(!
extVm
->
u£Checked
) {

4073 
	`LOGD
("Late-enabling CheckJNI\n");

4074 
	`dvmU£CheckedJniVm
(
extVm
);

4075 
extVm
->
u£Checked
 = 
Œue
;

4076 
	`dvmU£CheckedJniEnv
(
extEnv
);

4080 
	`LOGD
("Not†ate-enabling CheckJNI (already on)\n");

4082 
	}
}

4087 
jšt
 
	$JNI_G‘DeçuÉJavaVMIn™Args
(* 
vm_¬gs
)

4089  
JNI_ERR
;

4090 
	}
}

4097 
jšt
 
	$JNI_G‘C»©edJavaVMs
(
JavaVM
** 
vmBuf
, 
jsize
 
bufL’
, jsize* 
nVMs
)

4099 ià(
gDvm
.
vmLi¡
 !ğ
NULL
) {

4100 *
nVMs
 = 1;

4102 ià(
bufL’
 > 0)

4103 *
vmBuf
++ = 
gDvm
.
vmLi¡
;

4105 *
nVMs
 = 0;

4108  
JNI_OK
;

4109 
	}
}

4118 
jšt
 
	$JNI_C»©eJavaVM
(
JavaVM
** 
p_vm
, 
JNIEnv
** 
p_’v
, * 
vm_¬gs
)

4120 cÚ¡ 
JavaVMIn™Args
* 
¬gs
 = (JavaVMIn™Args*è
vm_¬gs
;

4121 
JNIEnvExt
* 
pEnv
 = 
NULL
;

4122 
JavaVMExt
* 
pVM
 = 
NULL
;

4123 cÚ¡ ** 
¬gv
;

4124 
¬gc
 = 0;

4125 
i
, 
curO±
;

4126 
»suÉ
 = 
JNI_ERR
;

4127 
boŞ
 
checkJni
 = 
çl£
;

4128 
boŞ
 
w¬nE¼Ü
 = 
Œue
;

4129 
boŞ
 
fÜûD©aCİy
 = 
çl£
;

4131 ià(
¬gs
->
v”siÚ
 < 
JNI_VERSION_1_2
)

4132  
JNI_EVERSION
;

4137 
	`mem£t
(&
gDvm
, 0, (gDvm));

4143 
pVM
 = (
JavaVMExt
*è
	`m®loc
((JavaVMExt));

4148 
	`mem£t
(
pVM
, 0, (
JavaVMExt
));

4149 
pVM
->
funcTabË
 = &
gInvokeIÁ”çû
;

4150 
pVM
->
’vLi¡
 = 
pEnv
;

4151 
	`dvmIn™Mu‹x
(&
pVM
->
’vLi¡Lock
);

4153 
¬gv
 = (cÚ¡ **è
	`m®loc
((*è* (
¬gs
->
nO±iÚs
));

4154 
	`mem£t
(
¬gv
, 0, (*è* (
¬gs
->
nO±iÚs
));

4156 
curO±
 = 0;

4165 
i
 = 0; i < 
¬gs
->
nO±iÚs
; i++) {

4166 cÚ¡ * 
İtSŒ
 = 
¬gs
->
İtiÚs
[
i
].
İtiÚSŒšg
;

4168 ià(
İtSŒ
 =ğ
NULL
) {

4169 
	`årštf
(
¡d”r
, "ERROR:‡rg %d sŒšg wa nuÎ\n", 
i
);

4170 
ba
;

4171 } ià(
	`¡rcmp
(
İtSŒ
, "vfprintf") == 0) {

4172 
gDvm
.
vårštfHook
 = 
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

4173 } ià(
	`¡rcmp
(
İtSŒ
, "exit") == 0) {

4174 
gDvm
.
ex™Hook
 = 
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

4175 } ià(
	`¡rcmp
(
İtSŒ
, "abort") == 0) {

4176 
gDvm
.
abÜtHook
 = 
¬gs
->
İtiÚs
[
i
].
exŒaInfo
;

4177 } ià(
	`¡rcmp
(
İtSŒ
, "-Xcheck:jni") == 0) {

4178 
checkJni
 = 
Œue
;

4179 } ià(
	`¡ºcmp
(
İtSŒ
, "-Xjniopts:", 10) == 0) {

4180 cÚ¡ * 
jniO±s
 = 
İtSŒ
 + 9;

4181 
jniO±s
 !ğ
NULL
) {

4182 
jniO±s
++;

4183 ià(
	`¡ºcmp
(
jniO±s
, "warnonly", 8) == 0) {

4184 
w¬nE¼Ü
 = 
çl£
;

4185 } ià(
	`¡ºcmp
(
jniO±s
, "forcecopy", 9) == 0) {

4186 
fÜûD©aCİy
 = 
Œue
;

4188 
	`LOGW
("unknowÀjn˜İˆ¡¬tšg‡ˆ'%s'\n", 
jniO±s
);

4190 
jniO±s
 = 
	`¡rchr
(jniOpts, ',');

4194 
¬gv
[
curO±
++] = 
İtSŒ
;

4197 
¬gc
 = 
curO±
;

4199 ià(
checkJni
) {

4200 
	`dvmU£CheckedJniVm
(
pVM
);

4201 
pVM
->
u£Checked
 = 
Œue
;

4203 
pVM
->
w¬nE¼Ü
 = warnError;

4204 
pVM
->
fÜûD©aCİy
 = forceDataCopy;

4207 
gDvm
.
vmLi¡
 = (
JavaVM
*è
pVM
;

4214 
pEnv
 = (
JNIEnvExt
*è
	`dvmC»©eJNIEnv
(
NULL
);

4217 
gDvm
.
š™Ÿlizšg
 = 
Œue
;

4218 ià(
	`dvmS¹up
(
¬gc
, 
¬gv
, 
¬gs
->
ignÜeUÄecognized
, (
JNIEnv
*)
pEnv
) != 0) {

4219 
	`ä“
(
pEnv
);

4220 
	`ä“
(
pVM
);

4221 
ba
;

4227 
	`dvmChªgeStus
(
NULL
, 
THREAD_NATIVE
);

4228 *
p_’v
 = (
JNIEnv
*è
pEnv
;

4229 *
p_vm
 = (
JavaVM
*è
pVM
;

4230 
»suÉ
 = 
JNI_OK
;

4232 
ba
:

4233 
gDvm
.
š™Ÿlizšg
 = 
çl£
;

4234 ià(
»suÉ
 =ğ
JNI_OK
)

4235 
	`LOGV
("JNI_CreateJavaVM succeeded\n");

4237 
	`LOGW
("JNI_CreateJavaVM failed\n");

4238 
	`ä“
(
¬gv
);

4239  
»suÉ
;

4240 
	}
}

	@JniInternal.h

19 #iâdeà
_DALVIK_JNIINTERNAL


20 
	#_DALVIK_JNIINTERNAL


	)

22 
	~"jni.h
"

25 
boŞ
 
dvmJniS¹up
();

26 
dvmJniShutdown
();

33 
	gJavaVMExt
;

35 
	sJNIEnvExt
 {

36 cÚ¡ 
JNIN©iveIÁ”çû
* 
	mfuncTabË
;

38 cÚ¡ 
JNIN©iveIÁ”çû
* 
	mba£FuncTabË
;

41 
JavaVMExt
* 
	mvm
;

43 
u4
 
	m’vTh»adId
;

44 
Th»ad
* 
	m£lf
;

47 
	mü™iÿl
;

50 
boŞ
 
	mfÜûD©aCİy
;

52 
JNIEnvExt
* 
	m´ev
;

53 
JNIEnvExt
* 
	mÃxt
;

54 } 
	tJNIEnvExt
;

56 
	sJavaVMExt
 {

57 cÚ¡ 
JNIInvokeIÁ”çû
* 
	mfuncTabË
;

59 cÚ¡ 
JNIInvokeIÁ”çû
* 
	mba£FuncTabË
;

64 
boŞ
 
	mu£Checked
;

65 
boŞ
 
	mw¬nE¼Ü
;

66 
boŞ
 
	mfÜûD©aCİy
;

69 
JNIEnvExt
* 
	m’vLi¡
;

70 
±h»ad_mu‹x_t
 
	m’vLi¡Lock
;

71 } 
	tJavaVMExt
;

80 
	eD®vikJniR‘uºTy³
 {

81 
	mDALVIK_JNI_RETURN_VOID
 = 0,

82 
	mDALVIK_JNI_RETURN_FLOAT
 = 1,

83 
	mDALVIK_JNI_RETURN_DOUBLE
 = 2,

84 
	mDALVIK_JNI_RETURN_S8
 = 3,

85 
	mDALVIK_JNI_RETURN_S4
 = 4,

86 
	mDALVIK_JNI_RETURN_S2
 = 5,

87 
	mDALVIK_JNI_RETURN_U2
 = 6,

88 
	mDALVIK_JNI_RETURN_S1
 = 7

89 } 
	tD®vikJniR‘uºTy³
;

91 
	#DALVIK_JNI_NO_ARG_INFO
 0x80000000

	)

92 
	#DALVIK_JNI_RETURN_MASK
 0x70000000

	)

93 
	#DALVIK_JNI_RETURN_SHIFT
 28

	)

94 
	#DALVIK_JNI_COUNT_MASK
 0x0f000000

	)

95 
	#DALVIK_JNI_COUNT_SHIFT
 24

	)

105 
INLINE
 
	$dvmPİJniLoÿls
(
Th»ad
* 
£lf
, 
SckSaveA»a
* 
§veA»a
)

107 #ifdeà
USE_INDIRECT_REF


108 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
 = 
§veA»a
->
xŒa
.
loÿlRefCook›
;

110 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
 = 
§veA»a
->
xŒa
.
loÿlRefCook›
;

112 
	}
}

117 
INLINE
 
	$dvmS‘JniEnvTh»adId
(
JNIEnv
* 
pEnv
, 
Th»ad
* 
£lf
)

119 ((
JNIEnvExt
*)
pEnv
)->
’vTh»adId
 = 
£lf
->
th»adId
;

120 ((
JNIEnvExt
*)
pEnv
)->
£lf
 = self;

121 
	}
}

128 
dvmC®lJNIM‘hod_g’”®
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

129 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

130 
dvmC®lJNIM‘hod_synchrÚized
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

131 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

132 
dvmC®lJNIM‘hod_vœtu®NoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

133 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

134 
dvmC®lJNIM‘hod_¡©icNoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

135 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

136 
dvmCheckC®lJNIM‘hod_g’”®
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

137 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

138 
dvmCheckC®lJNIM‘hod_synchrÚized
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

139 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

140 
dvmCheckC®lJNIM‘hod_vœtu®NoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

141 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

142 
dvmCheckC®lJNIM‘hod_¡©icNoRef
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

143 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

148 
dvmU£JNIBridge
(
M‘hod
* 
m‘hod
, * 
func
);

154 
dvmU£CheckedJniEnv
(
JNIEnvExt
* 
pEnv
);

155 
dvmU£CheckedJniVm
(
JavaVMExt
* 
pVm
);

156 
dvmL©eEÇbËCheckedJni
();

161 #ifdeà
USE_INDIRECT_REF


162 
Objeù
* 
dvmDecodeIndœeùRef
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
);

165 
INLINE
 
Objeù
* 
	$dvmDecodeIndœeùRef
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
) {

166  (
Objeù
*è
jobj
;

167 
	}
}

174 
jobjeùRefTy³
 
dvmG‘JNIRefTy³
(
JNIEnv
* 
’v
, 
jobjeù
 
jobj
);

180 cÚ¡ 
M‘hod
* 
dvmG‘Cu¼’tJNIM‘hod
();

185 
JNIEnv
* 
dvmC»©eJNIEnv
(
Th»ad
* 
£lf
);

186 
dvmDe¡royJNIEnv
(
JNIEnv
* 
’v
);

191 
JNIEnvExt
* 
dvmG‘JNIEnvFÜTh»ad
();

196 
D®vikJniR‘uºTy³
 
dvmG‘ArgInfoR‘uºTy³
(
jniArgInfo
);

202 
dvmR–—£JniMÚ™Üs
(
Th»ad
* 
£lf
);

	@LinearAlloc.c

20 
	~"D®vik.h
"

22 
	~<sys/mmª.h
>

23 
	~<lim™s.h
>

24 
	~<”ºo.h
>

29 
	#USE_ASHMEM
 1

	)

31 #ifdeà
USE_ASHMEM


32 
	~<cuts/ashmem.h
>

69 
	#BLOCK_ALIGN
 8

	)

72 
	#DEFAULT_MAX_LENGTH
 (5*1024*1024)

	)

75 
	#HEADER_EXTRA
 4

	)

78 
	#LENGTHFLAG_FREE
 0x80000000

	)

79 
	#LENGTHFLAG_RW
 0x40000000

	)

80 
	#LENGTHFLAG_MASK
 (~(
LENGTHFLAG_FREE
|
LENGTHFLAG_RW
))

	)

83 #iâdeà
PAGESIZE


84 
	#PAGESIZE
 4096

	)

89 
checkAÎF»e
(
Objeù
* 
şassLßd”
);

96 
šlše
 
Lš—rAÎocHdr
* 
	$g‘H—d”
(
Objeù
* 
şassLßd”
)

98  
gDvm
.
pBoÙLßd”AÎoc
;

99 
	}
}

105 
šlše
 
u4
* 
	$g‘BlockH—d”
(* 
mem
)

107  ((
u4
*è
mem
) -1;

108 
	}
}

113 
Lš—rAÎocHdr
* 
	$dvmLš—rAÎocC»©e
(
Objeù
* 
şassLßd”
)

115 #ifdeà
DISABLE_LINEAR_ALLOC


116  (
Lš—rAÎocHdr
*) 0x12345;

118 
Lš—rAÎocHdr
* 
pHdr
;

120 
pHdr
 = (
Lš—rAÎocHdr
*è
	`m®loc
((*pHdr));

132 
	`as£¹
(
BLOCK_ALIGN
 >ğ
HEADER_EXTRA
);

133 
pHdr
->
curOff£t
 =…Hdr->
fœ¡Off£t
 = (
BLOCK_ALIGN
-
HEADER_EXTRA
è+ 
PAGESIZE
;

134 
pHdr
->
m­L’gth
 = 
DEFAULT_MAX_LENGTH
;

136 #ifdeà
USE_ASHMEM


137 
fd
;

139 
fd
 = 
	`ashmem_ü—‹_»giÚ
("d®vik-Lš—rAÎoc", 
DEFAULT_MAX_LENGTH
);

140 ià(
fd
 < 0) {

141 
	`LOGE
("ashmem Lš—rAÎoøçed %s", 
	`¡»¼Ü
(
”ºo
));

142 
	`ä“
(
pHdr
);

143  
NULL
;

146 
pHdr
->
m­Addr
 = 
	`mm­
(
NULL
,…Hdr->
m­L’gth
, 
PROT_READ
 | 
PROT_WRITE
,

147 
MAP_PRIVATE
, 
fd
, 0);

148 ià(
pHdr
->
m­Addr
 =ğ
MAP_FAILED
) {

149 
	`LOGE
("Lš—rAÎoømm­(%dèçed: %s\n", 
pHdr
->
m­L’gth
,

150 
	`¡»¼Ü
(
”ºo
));

151 
	`ä“
(
pHdr
);

152 
	`şo£
(
fd
);

153  
NULL
;

156 
	`şo£
(
fd
);

160 
pHdr
->
m­Addr
 = 
	`mm­
(
NULL
,…Hdr->
m­L’gth
, 
PROT_READ
 | 
PROT_WRITE
,

161 
MAP_PRIVATE
 | 
MAP_ANON
, -1, 0);

162 ià(
pHdr
->
m­Addr
 =ğ
MAP_FAILED
) {

163 
	`LOGE
("Lš—rAÎoømm­(%dèçed: %s\n", 
pHdr
->
m­L’gth
,

164 
	`¡»¼Ü
(
”ºo
));

165 
	`ä“
(
pHdr
);

166  
NULL
;

171 
	`as£¹
(((è
pHdr
->
m­Addr
 & (
PAGESIZE
-1)) == 0);

174 
	`as£¹
(*(
u4
*è(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
) == 0);

193 ià(
	`m´Ùeù
(
pHdr
->
m­Addr
,…Hdr->
m­L’gth
, 
PROT_NONE
) != 0) {

194 
	`LOGW
("Lš—rAÎoøš™ m´Ùeù faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

195 
	`ä“
(
pHdr
);

196  
NULL
;

198 ià(
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
PAGESIZE
, PAGESIZE,

199 
ENFORCE_READ_ONLY
 ? 
PROT_READ
 : PROT_READ|
PROT_WRITE
) != 0)

201 
	`LOGW
("Lš—rAÎoøš™ m´Ùeù #2 faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

202 
	`ä“
(
pHdr
);

203  
NULL
;

206 ià(
ENFORCE_READ_ONLY
) {

208 
numPages
 = (
pHdr
->
m­L’gth
+
PAGESIZE
-1) / PAGESIZE;

209 
pHdr
->
wr™eRefCouÁ
 = 
	`ÿÎoc
(
numPages
, ());

210 ià(
pHdr
->
wr™eRefCouÁ
 =ğ
NULL
) {

211 
	`ä“
(
pHdr
);

212  
NULL
;

216 
	`dvmIn™Mu‹x
(&
pHdr
->
lock
);

218 
	`LOGV
("LinearAlloc: created„egion‡t %p-%p\n",

219 
pHdr
->
m­Addr
,…Hdr->m­Add¸+…Hdr->
m­L’gth
-1);

221  
pHdr
;

222 
	}
}

230 
	$dvmLš—rAÎocDe¡roy
(
Objeù
* 
şassLßd”
)

232 #ifdeà
DISABLE_LINEAR_ALLOC


235 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

236 ià(
pHdr
 =ğ
NULL
)

239 
	`checkAÎF»e
(
şassLßd”
);

243 
	`LOGV
("Unm­pšg†š—¸®loÿtÜ ba£=%p\n", 
pHdr
->
m­Addr
);

244 
	`LOGD
("LinearAlloc %p used %d of %d (%d%%)\n",

245 
şassLßd”
, 
pHdr
->
curOff£t
,…Hdr->
m­L’gth
,

246 (
pHdr
->
curOff£t
 * 100è/…Hdr->
m­L’gth
);

248 ià(
	`munm­
(
pHdr
->
m­Addr
,…Hdr->
m­L’gth
) != 0) {

249 
	`LOGW
("LinearAlloc munmap(%p, %d) failed: %s\n",

250 
pHdr
->
m­Addr
,…Hdr->
m­L’gth
, 
	`¡»¼Ü
(
”ºo
));

252 
	`ä“
(
pHdr
);

253 
	}
}

267 * 
	$dvmLš—rAÎoc
(
Objeù
* 
şassLßd”
, 
size_t
 
size
)

269 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

270 
¡¬tOff£t
, 
ÃxtOff£t
;

271 
Ï¡GoodOff
, 
fœ¡Wr™eOff
, 
Ï¡Wr™eOff
;

273 #ifdeà
DISABLE_LINEAR_ALLOC


274  
	`ÿÎoc
(1, 
size
);

277 
	`LOGVV
("--- Lš—rAÎoc(%p, %d)\n", 
şassLßd”
, 
size
);

289 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

291 
¡¬tOff£t
 = 
pHdr
->
curOff£t
;

292 
	`as£¹
(((
¡¬tOff£t
 + 
HEADER_EXTRA
è& (
BLOCK_ALIGN
-1)) == 0);

306 
ÃxtOff£t
 = ((
¡¬tOff£t
 + 
HEADER_EXTRA
*2 + 
size
 + (
BLOCK_ALIGN
-1))

307 & ~(
BLOCK_ALIGN
-1)è- 
HEADER_EXTRA
;

308 
	`LOGVV
("--- old=%d size=%d‚ew=%d\n", 
¡¬tOff£t
, 
size
, 
ÃxtOff£t
);

310 ià(
ÃxtOff£t
 > 
pHdr
->
m­L’gth
) {

317 
	`LOGE
("LinearAllocƒxceeded capacity (%d),†ast=%d\n",

318 
pHdr
->
m­L’gth
, (è
size
);

319 
	`dvmAbÜt
();

328 
size
 = 
ÃxtOff£t
 - (
¡¬tOff£t
 + 
HEADER_EXTRA
);

329 
	`LOGVV
("--- (siznow %d)\n", 
size
);

344 
Ï¡GoodOff
 = (
¡¬tOff£t
-1è& ~(
PAGESIZE
-1);

345 
fœ¡Wr™eOff
 = 
¡¬tOff£t
 & ~(
PAGESIZE
-1);

346 
Ï¡Wr™eOff
 = (
ÃxtOff£t
-1è& ~(
PAGESIZE
-1);

347 
	`LOGVV
("---†astGood=0x%04x firstWrite=0x%04x†astWrite=0x%04x\n",

348 
Ï¡GoodOff
, 
fœ¡Wr™eOff
, 
Ï¡Wr™eOff
);

349 ià(
Ï¡GoodOff
 !ğ
Ï¡Wr™eOff
 || 
ENFORCE_READ_ONLY
) {

350 
cc
, 
¡¬t
, 
Ën
;

352 
¡¬t
 = 
fœ¡Wr™eOff
;

353 
	`as£¹
(
¡¬t
 <ğ
ÃxtOff£t
);

354 
Ën
 = (
Ï¡Wr™eOff
 - 
fœ¡Wr™eOff
è+ 
PAGESIZE
;

356 
	`LOGVV
("--- c®lšg m´Ùeù(¡¬t=%d†’=%d RW)\n", 
¡¬t
, 
Ën
);

357 
cc
 = 
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
¡¬t
, 
Ën
, 
PROT_READ
 | 
PROT_WRITE
);

358 ià(
cc
 != 0) {

359 
	`LOGE
("LinearAlloc mprotect (+%d %d) failed: %s\n",

360 
¡¬t
, 
Ën
, 
	`¡»¼Ü
(
”ºo
));

362 
	`dvmAbÜt
();

367 ià(
ENFORCE_READ_ONLY
) {

368 
i
, 
¡¬t
, 
’d
;

370 
¡¬t
 = 
fœ¡Wr™eOff
 / 
PAGESIZE
;

371 
’d
 = 
Ï¡Wr™eOff
 / 
PAGESIZE
;

373 
	`LOGVV
("--- marking…ages %d-%d RW (alloc %d‡t %p)\n",

374 
¡¬t
, 
’d
, 
size
, 
pHdr
->
m­Addr
 + 
¡¬tOff£t
 + 
HEADER_EXTRA
);

375 
i
 = 
¡¬t
; i <ğ
’d
; i++)

376 
pHdr
->
wr™eRefCouÁ
[
i
]++;

380 ià(
ENFORCE_READ_ONLY
)

381 *(
u4
*)(
pHdr
->
m­Addr
 + 
¡¬tOff£t
èğ
size
 | 
LENGTHFLAG_RW
;

383 *(
u4
*)(
pHdr
->
m­Addr
 + 
¡¬tOff£t
èğ
size
;

388 
pHdr
->
curOff£t
 = 
ÃxtOff£t
;

390 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

391  
pHdr
->
m­Addr
 + 
¡¬tOff£t
 + 
HEADER_EXTRA
;

392 
	}
}

397 * 
	$dvmLš—rSŒdup
(
Objeù
* 
şassLßd”
, cÚ¡ * 
¡r
)

399 #ifdeà
DISABLE_LINEAR_ALLOC


400  
	`¡rdup
(
¡r
);

402 
Ën
 = 
	`¡¾’
(
¡r
);

403 * 
mem
 = 
	`dvmLš—rAÎoc
(
şassLßd”
, 
Ën
+1);

404 
	`memıy
(
mem
, 
¡r
, 
Ën
+1);

405 ià(
ENFORCE_READ_ONLY
)

406 
	`dvmLš—rS‘R—dOÆy
(
şassLßd”
, 
mem
);

407  (*è
mem
;

408 
	}
}

419 * 
	$dvmLš—rR—Îoc
(
Objeù
* 
şassLßd”
, * 
mem
, 
size_t
 
ÃwSize
)

421 #ifdeà
DISABLE_LINEAR_ALLOC


422  
	`»®loc
(
mem
, 
ÃwSize
);

424 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

427 
	`as£¹
(
mem
 !ğ
NULL
);

428 
	`as£¹
(
mem
 >ğ(*è
pHdr
->
m­Addr
 &&

429 
mem
 < (*è(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
));

431 cÚ¡ 
u4
* 
pL’
 = 
	`g‘BlockH—d”
(
mem
);

432 
	`LOGV
("--- Lš—rR—Îoc(%dèŞd=%d\n", 
ÃwSize
, *
pL’
);

435 ià(*
pL’
 >ğ
ÃwSize
) {

436 ià(
ENFORCE_READ_ONLY
)

437 
	`dvmLš—rS‘R—dWr™e
(
şassLßd”
, 
mem
);

438  
mem
;

441 * 
ÃwMem
;

443 
ÃwMem
 = 
	`dvmLš—rAÎoc
(
şassLßd”
, 
ÃwSize
);

444 
	`as£¹
(
ÃwMem
 !ğ
NULL
);

445 
	`memıy
(
ÃwMem
, 
mem
, *
pL’
);

446 
	`dvmLš—rF»e
(
şassLßd”
, 
mem
);

448  
ÃwMem
;

449 
	}
}

455 
	$upd©ePages
(
Objeù
* 
şassLßd”
, * 
mem
, 
dœeùiÚ
)

457 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

458 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

461 
	`as£¹
(
mem
 >ğ(*è
pHdr
->
m­Addr
 &&

462 
mem
 < (*è(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
));

464 
u4
* 
pL’
 = 
	`g‘BlockH—d”
(
mem
);

465 
u4
 
Ën
 = *
pL’
 & 
LENGTHFLAG_MASK
;

466 
fœ¡Page
, 
Ï¡Page
;

468 
fœ¡Page
 = ((
u1
*)
pL’
 - (u1*)
pHdr
->
m­Addr
è/ 
PAGESIZE
;

469 
Ï¡Page
 = ((
u1
*)
mem
 - (u1*)
pHdr
->
m­Addr
 + (
Ën
-1)è/ 
PAGESIZE
;

470 
	`LOGVV
("--- upd©šg…age %d-%d (%d)\n", 
fœ¡Page
, 
Ï¡Page
, 
dœeùiÚ
);

472 
i
, 
cc
;

479 
i
 = 
fœ¡Page
; i <ğ
Ï¡Page
; i++) {

480 ià(
dœeùiÚ
 < 0) {

484 ià(
i
 =ğ
fœ¡Page
) {

485 ià((*
pL’
 & 
LENGTHFLAG_RW
) == 0) {

486 
	`LOGW
("DoubË RO oÀ%p\n", 
mem
);

487 
	`dvmAbÜt
();

489 *
pL’
 &ğ~
LENGTHFLAG_RW
;

492 ià(
pHdr
->
wr™eRefCouÁ
[
i
] == 0) {

493 
	`LOGE
("Cª'ˆmak·g%d‡ny†es wr™abË\n", 
i
);

494 
	`dvmAbÜt
();

496 
pHdr
->
wr™eRefCouÁ
[
i
]--;

497 ià(
pHdr
->
wr™eRefCouÁ
[
i
] == 0) {

498 
	`LOGVV
("---…rÙ…ag%d RO\n", 
i
);

499 
cc
 = 
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
PAGESIZE
 * 
i
, PAGESIZE, 
PROT_READ
);

500 
	`as£¹
(
cc
 == 0);

506 ià(
pHdr
->
wr™eRefCouÁ
[
i
] >= 32767) {

507 
	`LOGE
("Cª'ˆmak·g%d‡ny mÜwr™abË\n", 
i
);

508 
	`dvmAbÜt
();

510 ià(
pHdr
->
wr™eRefCouÁ
[
i
] == 0) {

511 
	`LOGVV
("---…rÙ…ag%d RW\n", 
i
);

512 
cc
 = 
	`m´Ùeù
(
pHdr
->
m­Addr
 + 
PAGESIZE
 * 
i
, PAGESIZE,

513 
PROT_READ
 | 
PROT_WRITE
);

514 
	`as£¹
(
cc
 == 0);

516 
pHdr
->
wr™eRefCouÁ
[
i
]++;

518 ià(
i
 =ğ
fœ¡Page
) {

519 ià((*
pL’
 & 
LENGTHFLAG_RW
) != 0) {

520 
	`LOGW
("DoubË RW oÀ%p\n", 
mem
);

521 
	`dvmAbÜt
();

523 *
pL’
 |ğ
LENGTHFLAG_RW
;

528 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

529 
	}
}

538 
	$dvmLš—rS‘R—dOÆy
(
Objeù
* 
şassLßd”
, * 
mem
)

540 #ifdeà
DISABLE_LINEAR_ALLOC


543 
	`upd©ePages
(
şassLßd”
, 
mem
, -1);

544 
	}
}

554 
	$dvmLš—rS‘R—dWr™e
(
Objeù
* 
şassLßd”
, * 
mem
)

556 #ifdeà
DISABLE_LINEAR_ALLOC


559 
	`upd©ePages
(
şassLßd”
, 
mem
, 1);

560 
	}
}

565 
	$dvmLš—rF»e
(
Objeù
* 
şassLßd”
, * 
mem
)

567 #ifdeà
DISABLE_LINEAR_ALLOC


568 
	`ä“
(
mem
);

571 ià(
mem
 =ğ
NULL
)

574 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

577 
	`as£¹
(
mem
 >ğ(*è
pHdr
->
m­Addr
 &&

578 
mem
 < (*è(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
));

580 ià(
ENFORCE_READ_ONLY
)

581 
	`dvmLš—rS‘R—dWr™e
(
şassLßd”
, 
mem
);

583 
u4
* 
pL’
 = 
	`g‘BlockH—d”
(
mem
);

584 *
pL’
 |ğ
LENGTHFLAG_FREE
;

586 ià(
ENFORCE_READ_ONLY
)

587 
	`dvmLš—rS‘R—dOÆy
(
şassLßd”
, 
mem
);

588 
	}
}

596 
	$dvmLš—rAÎocDump
(
Objeù
* 
şassLßd”
)

598 #ifdeà
DISABLE_LINEAR_ALLOC


601 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

603 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

605 
	`LOGI
("Lš—rAÎoøşassLßd”=%p\n", 
şassLßd”
);

606 
	`LOGI
(" mapAddr=%p mapLength=%d firstOffset=%d\n",

607 
pHdr
->
m­Addr
,…Hdr->
m­L’gth
,…Hdr->
fœ¡Off£t
);

608 
	`LOGI
(" curOff£t=%d\n", 
pHdr
->
curOff£t
);

610 
off
 = 
pHdr
->
fœ¡Off£t
;

611 
u4
 
¿wL’
, 
fuÎL’
;

613 
off
 < 
pHdr
->
curOff£t
) {

614 
¿wL’
 = *(
u4
*è(
pHdr
->
m­Addr
 + 
off
);

615 
fuÎL’
 = ((
HEADER_EXTRA
*2 + (
¿wL’
 & 
LENGTHFLAG_MASK
))

616 & ~(
BLOCK_ALIGN
-1));

618 
	`LOGI
(" %°(%3d): %ş’=%d%s\n", 
pHdr
->
m­Addr
 + 
off
 + 
HEADER_EXTRA
,

619 (è((
off
 + 
HEADER_EXTRA
è/ 
PAGESIZE
),

620 (
¿wL’
 & 
LENGTHFLAG_FREE
) != 0 ? '*' : ' ',

621 
¿wL’
 & 
LENGTHFLAG_MASK
,

622 (
¿wL’
 & 
LENGTHFLAG_RW
) != 0 ? " [RW]" : "");

624 
off
 +ğ
fuÎL’
;

627 ià(
ENFORCE_READ_ONLY
) {

628 
	`LOGI
("writeRefCount map:\n");

630 
numPages
 = (
pHdr
->
m­L’gth
+
PAGESIZE
-1) / PAGESIZE;

631 
z¡¬t
 = 0;

632 
i
;

634 
i
 = 0; i < 
numPages
; i++) {

635 
couÁ
 = 
pHdr
->
wr™eRefCouÁ
[
i
];

637 ià(
couÁ
 != 0) {

638 ià(
z¡¬t
 < 
i
-1)

639 
	`´štf
(" %d-%d: z”o\n", 
z¡¬t
, 
i
-1);

640 ià(
z¡¬t
 =ğ
i
-1)

641 
	`´štf
(" %d: z”o\n", 
z¡¬t
);

642 
z¡¬t
 = 
i
+1;

643 
	`´štf
(" %d: %d\n", 
i
, 
couÁ
);

646 ià(
z¡¬t
 < 
i
)

647 
	`´štf
(" %d-%d: z”o\n", 
z¡¬t
, 
i
-1);

650 
	`LOGD
("LinearAlloc %p using %d of %d (%d%%)\n",

651 
şassLßd”
, 
pHdr
->
curOff£t
,…Hdr->
m­L’gth
,

652 (
pHdr
->
curOff£t
 * 100è/…Hdr->
m­L’gth
);

654 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

655 
	}
}

663 
	$checkAÎF»e
(
Objeù
* 
şassLßd”
)

665 #ifdeà
DISABLE_LINEAR_ALLOC


668 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
şassLßd”
);

670 
	`dvmLockMu‹x
(&
pHdr
->
lock
);

672 
off
 = 
pHdr
->
fœ¡Off£t
;

673 
u4
 
¿wL’
, 
fuÎL’
;

675 
off
 < 
pHdr
->
curOff£t
) {

676 
¿wL’
 = *(
u4
*è(
pHdr
->
m­Addr
 + 
off
);

677 
fuÎL’
 = ((
HEADER_EXTRA
*2 + (
¿wL’
 & 
LENGTHFLAG_MASK
))

678 & ~(
BLOCK_ALIGN
-1));

680 ià((
¿wL’
 & 
LENGTHFLAG_FREE
) == 0) {

681 
	`LOGW
("Lš—rAÎoø%°nÙ f»ed: %°Ën=%d\n", 
şassLßd”
,

682 
pHdr
->
m­Addr
 + 
off
 + 
HEADER_EXTRA
, 
¿wL’
 & 
LENGTHFLAG_MASK
);

685 
off
 +ğ
fuÎL’
;

688 
	`dvmUÆockMu‹x
(&
pHdr
->
lock
);

689 
	}
}

698 
boŞ
 
	$dvmLš—rAÎocCÚšs
(cÚ¡ * 
¡¬t
, 
size_t
 
Ëngth
)

700 
Lš—rAÎocHdr
* 
pHdr
 = 
	`g‘H—d”
(
NULL
);

702 ià(
pHdr
 =ğ
NULL
)

703  
çl£
;

705  (*è
¡¬t
 >ğ
pHdr
->
m­Addr
 &&

706 ((*)
¡¬t
 + 
Ëngth
è<ğ(
pHdr
->
m­Addr
 +…Hdr->
curOff£t
);

707 
	}
}

	@LinearAlloc.h

19 #iâdeà
_DALVIK_LINEARALLOC


20 
	#_DALVIK_LINEARALLOC


	)

27 
	#ENFORCE_READ_ONLY
 
çl£


	)

34 
	sLš—rAÎocHdr
 {

35 
	mcurOff£t
;

36 
±h»ad_mu‹x_t
 
	mlock
;

38 * 
	mm­Addr
;

39 
	mm­L’gth
;

40 
	mfœ¡Off£t
;

42 * 
	mwr™eRefCouÁ
;

43 } 
	tLš—rAÎocHdr
;

49 
Lš—rAÎocHdr
* 
dvmLš—rAÎocC»©e
(
Objeù
* 
şassLßd”
);

54 
dvmLš—rAÎocDe¡roy
(
Objeù
* 
şassLßd”
);

61 * 
dvmLš—rAÎoc
(
Objeù
* 
şassLßd”
, 
size_t
 
size
);

70 * 
dvmLš—rR—Îoc
(
Objeù
* 
şassLßd”
, * 
mem
, 
size_t
 
ÃwSize
);

73 
dvmLš—rS‘R—dOÆy
(
Objeù
* 
şassLßd”
, * 
mem
);

74 
dvmLš—rS‘R—dWr™e
(
Objeù
* 
şassLßd”
, * 
mem
);

81 
INLINE
 
	$dvmLš—rR—dOÆy
(
Objeù
* 
şassLßd”
, * 
mem
)

83 ià(
ENFORCE_READ_ONLY
 && 
mem
 !ğ
NULL
)

84 
	`dvmLš—rS‘R—dOÆy
(
şassLßd”
, 
mem
);

85 
	}
}

90 
INLINE
 
	$dvmLš—rR—dWr™e
(
Objeù
* 
şassLßd”
, * 
mem
)

92 ià(
ENFORCE_READ_ONLY
 && 
mem
 !ğ
NULL
)

93 
	`dvmLš—rS‘R—dWr™e
(
şassLßd”
, 
mem
);

94 
	}
}

100 
dvmLš—rF»e
(
Objeù
* 
şassLßd”
, * 
mem
);

108 * 
dvmLš—rSŒdup
(
Objeù
* 
şassLßd”
, cÚ¡ * 
¡r
);

113 
dvmLš—rAÎocDump
(
Objeù
* 
şassLßd”
);

119 
boŞ
 
dvmLš—rAÎocCÚšs
(cÚ¡ * 
¡¬t
, 
size_t
 
Ëngth
);

	@Misc.c

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

22 
	~<¡ddef.h
>

23 
	~<¡ršg.h
>

24 
	~<ùy³.h
>

25 
	~<time.h
>

26 
	~<sys/time.h
>

27 
	~<fú.h
>

44 
	$dvmPrštHexDumpEx
(
´iÜ™y
, cÚ¡ * 
g
, cÚ¡ * 
vaddr
,

45 
size_t
 
Ëngth
, 
HexDumpMode
 
mode
)

47 cÚ¡ 
gHexDig™
[] = "0123456789abcdef";

48 cÚ¡ * 
addr
 = 
vaddr
;

49 
out
[77];

50 
off£t
;

51 * 
hex
;

52 * 
asc
;

53 
g­
;

56 ià(
mode
 =ğ
kHexDumpLoÿl
)

57 
off£t
 = 0;

59 
off£t
 = (è
addr
;

61 
	`mem£t
(
out
, ' ', (out)-1);

62 
out
[8] = ':';

63 
out
[(out)-2] = '\n';

64 
out
[(out)-1] = '\0';

66 
g­
 = (è
off£t
 & 0x0f;

67 
Ëngth
) {

68 
lšeOff£t
 = 
off£t
 & ~0x0f;

69 
i
, 
couÁ
;

71 
hex
 = 
out
;

72 
asc
 = 
out
 + 59;

74 
i
 = 0; i < 8; i++) {

75 *
hex
++ = 
gHexDig™
[
lšeOff£t
 >> 28];

76 
lšeOff£t
 <<= 4;

78 
hex
++;

79 
hex
++;

81 
couÁ
 = (()
Ëngth
 > 16-
g­
) ? 16-gap : ()length;

82 
	`as£¹
(
couÁ
 != 0);

83 
	`as£¹
(
couÁ
+
g­
 <= 16);

85 ià(
g­
) {

87 
hex
 +ğ
g­
 * 3;

88 
asc
 +ğ
g­
;

91 
i
 = 
g­
 ; i < 
couÁ
+gap; i++) {

92 *
hex
++ = 
gHexDig™
[*
addr
 >> 4];

93 *
hex
++ = 
gHexDig™
[*
addr
 & 0x0f];

94 
hex
++;

95 ià(*
addr
 >= 0x20 && *addr < 0x7f )

96 *
asc
++ = *
addr
;

98 *
asc
++ = '.';

99 
addr
++;

101  ; 
i
 < 16; i++) {

103 *
hex
++ = ' ';

104 *
hex
++ = ' ';

105 
hex
++;

106 *
asc
++ = ' ';

109 
	`LOG_PRI
(
´iÜ™y
, 
g
, "%s", 
out
);

117 ià(
ŒickË
++ == 8) {

118 
ŒickË
 = 0;

119 
	`u¦“p
(20000);

124 
g­
 = 0;

125 
Ëngth
 -ğ
couÁ
;

126 
off£t
 +ğ
couÁ
;

128 
	}
}

134 
	$dvmC»©eLogOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
´iÜ™y
,

135 cÚ¡ * 
g
)

137 
	`as£¹
(
rg‘
 !ğ
NULL
);

138 
	`as£¹
(
g
 !ğ
NULL
);

140 
rg‘
->
which
 = 
kDebugT¬g‘Log
;

141 
rg‘
->
d©a
.
log
.
´iÜ™y
 =…riority;

142 
rg‘
->
d©a
.
log
.
g
 =ag;

143 
	}
}

148 
	$dvmC»©eFeOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
FILE
* 
å
)

150 
	`as£¹
(
rg‘
 !ğ
NULL
);

151 
	`as£¹
(
å
 !ğ
NULL
);

153 
rg‘
->
which
 = 
kDebugT¬g‘Fe
;

154 
rg‘
->
d©a
.
fe
.
å
 = fp;

155 
	}
}

160 
	$dvmF»eOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
)

162 
	`ä“
(
rg‘
);

163 
	}
}

168 
	$dvmPrštDebugMes§ge
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, cÚ¡ * 
fÜm©
,

171 
va_li¡
 
¬gs
;

173 
	`va_¡¬t
(
¬gs
, 
fÜm©
);

175 
rg‘
->
which
) {

176 
kDebugT¬g‘Log
:

177 
	`LOG_PRI_VA
(
rg‘
->
d©a
.
log
.
´iÜ™y
,¬g‘->d©a.log.
g
,

178 
fÜm©
, 
¬gs
);

180 
kDebugT¬g‘Fe
:

181 
	`vårštf
(
rg‘
->
d©a
.
fe
.
å
, 
fÜm©
, 
¬gs
);

184 
	`LOGE
("uÃx³ùed 'which' %d\n", 
rg‘
->
which
);

188 
	`va_’d
(
¬gs
);

189 
	}
}

196 
B™VeùÜ
* 
	$dvmAÎocB™VeùÜ
(
¡¬tB™s
, 
boŞ
 
ex·ndabË
)

198 
B™VeùÜ
* 
bv
;

199 
couÁ
;

201 
	`as£¹
((
bv
->
¡Üage
[0]) == 4);

202 
	`as£¹
(
¡¬tB™s
 >= 0);

204 
bv
 = (
B™VeùÜ
*è
	`m®loc
((BitVector));

206 
couÁ
 = (
¡¬tB™s
 + 31) >> 5;

208 
bv
->
¡ÜageSize
 = 
couÁ
;

209 
bv
->
ex·ndabË
 =ƒxpandable;

210 
bv
->
¡Üage
 = (
u4
*è
	`m®loc
(
couÁ
 * (u4));

211 
	`mem£t
(
bv
->
¡Üage
, 0x00, 
couÁ
 * (
u4
));

212  
bv
;

213 
	}
}

218 
	$dvmF»eB™VeùÜ
(
B™VeùÜ
* 
pB™s
)

220 ià(
pB™s
 =ğ
NULL
)

223 
	`ä“
(
pB™s
->
¡Üage
);

224 
	`ä“
(
pB™s
);

225 
	}
}

234 
	$dvmAÎocB™
(
B™VeùÜ
* 
pB™s
)

236 
wÜd
, 
b™
;

238 
»Œy
:

239 
wÜd
 = 0; wÜd < 
pB™s
->
¡ÜageSize
; word++) {

240 ià(
pB™s
->
¡Üage
[
wÜd
] != 0xffffffff) {

244 
b™
 = 
	`ffs
(~(
pB™s
->
¡Üage
[
wÜd
])) -1;

245 
	`as£¹
(
b™
 >= 0 && bit < 32);

246 
pB™s
->
¡Üage
[
wÜd
] |ğ1 << 
b™
;

247  (
wÜd
 << 5è| 
b™
;

254 ià(!
pB™s
->
ex·ndabË
)

257 
pB™s
->
¡Üage
 = 
	`»®loc
(pBits->storage,

258 (
pB™s
->
¡ÜageSize
 + 
kB™VeùÜGrowth
è* (
u4
));

259 
	`mem£t
(&
pB™s
->
¡Üage
[pB™s->
¡ÜageSize
], 0x00,

260 
kB™VeùÜGrowth
 * (
u4
));

261 
pB™s
->
¡ÜageSize
 +ğ
kB™VeùÜGrowth
;

262 
»Œy
;

263 
	}
}

271 
boŞ
 
	$dvmS‘B™
(
B™VeùÜ
* 
pB™s
, 
num
)

273 
	`as£¹
(
num
 >= 0);

274 ià(
num
 >ğ
pB™s
->
¡ÜageSize
 * ()(
u4
) * 8) {

275 ià(!
pB™s
->
ex·ndabË
)

276  
çl£
;

278 
ÃwSize
 = (
num
 + 31) >> 5;

279 
	`as£¹
(
ÃwSize
 > 
pB™s
->
¡ÜageSize
);

280 
pB™s
->
¡Üage
 = 
	`»®loc
ÕB™s->¡Üage, 
ÃwSize
 * (
u4
));

281 
	`mem£t
(&
pB™s
->
¡Üage
[pB™s->
¡ÜageSize
], 0x00,

282 (
ÃwSize
 - 
pB™s
->
¡ÜageSize
è* (
u4
));

283 
pB™s
->
¡ÜageSize
 = 
ÃwSize
;

286 
pB™s
->
¡Üage
[
num
 >> 5] |= 1 << (num & 0x1f);

287  
Œue
;

288 
	}
}

293 
	$dvmCË¬B™
(
B™VeùÜ
* 
pB™s
, 
num
)

295 
	`as£¹
(
num
 >ğ0 &&‚um < (è
pB™s
->
¡ÜageSize
 * ()(
u4
) * 8);

297 
pB™s
->
¡Üage
[
num
 >> 5] &= ~(1 << (num & 0x1f));

298 
	}
}

303 
	$dvmCË¬AÎB™s
(
B™VeùÜ
* 
pB™s
)

305 
couÁ
 = 
pB™s
->
¡ÜageSize
;

306 
	`mem£t
(
pB™s
->
¡Üage
, 0, 
couÁ
 * (
u4
));

307 
	}
}

312 
boŞ
 
	$dvmIsB™S‘
(cÚ¡ 
B™VeùÜ
* 
pB™s
, 
num
)

314 
	`as£¹
(
num
 >ğ0 &&‚um < (è
pB™s
->
¡ÜageSize
 * ()(
u4
) * 8);

316 
v®
 = 
pB™s
->
¡Üage
[
num
 >> 5] & (1 << (num & 0x1f));

317  (
v®
 != 0);

318 
	}
}

323 
	$dvmCouÁS‘B™s
(cÚ¡ 
B™VeùÜ
* 
pB™s
)

325 
wÜd
, 
b™
;

326 
couÁ
 = 0;

328 
wÜd
 = 0; wÜd < 
pB™s
->
¡ÜageSize
; word++) {

329 
u4
 
v®
 = 
pB™s
->
¡Üage
[
wÜd
];

331 ià(
v®
 != 0) {

332 ià(
v®
 == 0xffffffff) {

333 
couÁ
 += 32;

336 
v®
 != 0) {

337 
v®
 &= val - 1;

338 
couÁ
++;

344  
couÁ
;

345 
	}
}

352 * 
	$dvmDÙToSÏsh
(cÚ¡ * 
¡r
)

354 * 
ÃwSŒ
 = 
	`¡rdup
(
¡r
);

355 * 
ı
 = 
ÃwSŒ
;

357 *
ı
 != '\0') {

358 ià(*
ı
 == '/') {

359 
	`as£¹
(
çl£
);

360  
NULL
;

362 ià(*
ı
 == '.')

363 *
ı
 = '/';

364 
ı
++;

367  
ÃwSŒ
;

368 
	}
}

376 * 
	$dvmDesütÜToDÙ
(cÚ¡ * 
¡r
)

378 
size_t
 
©
 = 
	`¡¾’
(
¡r
);

379 * 
ÃwSŒ
;

381 ià((
©
 >ğ2è&& (
¡r
[0] == 'L') && (str[at - 1] == ';')) {

382 
©
 -= 2;

383 
¡r
++;

386 
ÃwSŒ
 = 
	`m®loc
(
©
 + 1);

387 
ÃwSŒ
[
©
] = '\0';

389 
©
 > 0) {

390 
©
--;

391 
ÃwSŒ
[
©
] = (
¡r
[at] == '/') ? '.' : str[at];

394  
ÃwSŒ
;

395 
	}
}

403 * 
	$dvmDÙToDesütÜ
(cÚ¡ * 
¡r
)

405 
size_t
 
Ëngth
 = 
	`¡¾’
(
¡r
);

406 
w¿pElSemi
 = 0;

407 * 
ÃwSŒ
;

408 * 
©
;

410 ià(
¡r
[0] != '[') {

411 
Ëngth
 += 2;

412 
w¿pElSemi
 = 1;

415 
ÃwSŒ
 = 
©
 = 
	`m®loc
(
Ëngth
 + 1);

417 ià(
ÃwSŒ
 =ğ
NULL
) {

418  
NULL
;

421 ià(
w¿pElSemi
) {

422 *(
©
++) = 'L';

425 *
¡r
) {

426 
c
 = *(
¡r
++);

427 ià(
c
 == '.') {

428 
c
 = '/';

430 *(
©
++èğ
c
;

433 ià(
w¿pElSemi
) {

434 *(
©
++) = ';';

437 *
©
 = '\0';

438  
ÃwSŒ
;

439 
	}
}

446 * 
	$dvmDesütÜToName
(cÚ¡ * 
¡r
)

448 ià(
¡r
[0] == 'L') {

449 
size_t
 
Ëngth
 = 
	`¡¾’
(
¡r
) - 1;

450 * 
ÃwSŒ
 = 
	`m®loc
(
Ëngth
);

452 ià(
ÃwSŒ
 =ğ
NULL
) {

453  
NULL
;

456 
	`¡¾ıy
(
ÃwSŒ
, 
¡r
 + 1, 
Ëngth
);

457  
ÃwSŒ
;

460  
	`¡rdup
(
¡r
);

461 
	}
}

468 * 
	$dvmNameToDesütÜ
(cÚ¡ * 
¡r
)

470 ià(
¡r
[0] != '[') {

471 
size_t
 
Ëngth
 = 
	`¡¾’
(
¡r
);

472 * 
desütÜ
 = 
	`m®loc
(
Ëngth
 + 3);

474 ià(
desütÜ
 =ğ
NULL
) {

475  
NULL
;

478 
desütÜ
[0] = 'L';

479 
	`¡rıy
(
desütÜ
 + 1, 
¡r
);

480 
desütÜ
[
Ëngth
 + 1] = ';';

481 
desütÜ
[
Ëngth
 + 2] = '\0';

483  
desütÜ
;

486  
	`¡rdup
(
¡r
);

487 
	}
}

494 
u8
 
	$dvmG‘R–©iveTimeN£c
()

496 #ifdeà
HAVE_POSIX_CLOCKS


497 
time¥ec
 
now
;

498 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

499  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

501 
timev®
 
now
;

502 
	`g‘timeofday
(&
now
, 
NULL
);

503  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_u£c
 * 1000LL;

505 
	}
}

512 
u8
 
	$dvmG‘Th»adCpuTimeN£c
()

514 #ifdeà
HAVE_POSIX_CLOCKS


515 
time¥ec
 
now
;

516 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
now
);

517  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

519  (
u8
) -1;

521 
	}
}

526 
u8
 
	$dvmG‘Oth”Th»adCpuTimeN£c
(
±h»ad_t
 
th»ad
)

529 
şockId
;

531 ià(
	`±h»ad_g‘ıuşockid
(
th»ad
, &
şockId
) != 0)

532  (
u8
) -1;

534 
time¥ec
 
now
;

535 
	`şock_g‘time
(
şockId
, &
now
);

536  (
u8
)
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
;

538  (
u8
) -1;

540 
	}
}

561 
boŞ
 
	$dvmI‹¿tiveSË•
(
™”©iÚ
, 
maxTÙ®SË•
, 
u8
 
»lS¹Time
)

563 cÚ¡ 
mšSË•
 = 10000;

564 
u8
 
curTime
;

565 
curD–ay
;

570 
curTime
 = 
	`dvmG‘R–©iveTimeU£c
();

571 ià(
curTime
 >ğ
»lS¹Time
 + 
maxTÙ®SË•
) {

572 
	`LOGVV
("exsl: sleepƒxceeded (start=%llu max=%d‚ow=%llu)\n",

573 
»lS¹Time
, 
maxTÙ®SË•
, 
curTime
);

574  
çl£
;

585 
curD–ay
 = 
mšSË•
;

586 
™”©iÚ
-- > 0)

587 
curD–ay
 *= 2;

588 
	`as£¹
(
curD–ay
 > 0);

590 ià(
curTime
 + 
curD–ay
 >ğ
»lS¹Time
 + 
maxTÙ®SË•
) {

591 
	`LOGVV
("exsl:„educed delay from %do %d\n",

592 
curD–ay
, (è((
»lS¹Time
 + 
maxTÙ®SË•
è- 
curTime
));

593 
curD–ay
 = (è((
»lS¹Time
 + 
maxTÙ®SË•
è- 
curTime
);

596 ià(
™”©iÚ
 == 0) {

597 
	`LOGVV
("exsl: yield\n");

598 
	`sched_y›ld
();

600 
	`LOGVV
("ex¦: sË• fÜ %d\n", 
curD–ay
);

601 
	`u¦“p
(
curD–ay
);

603  
Œue
;

604 
	}
}

611 
boŞ
 
	$dvmS‘Clo£OnExec
(
fd
)

613 
æags
;

619 
æags
 = 
	`fú
(
fd
, 
F_GETFD
);

620 ià(
æags
 < 0) {

621 
	`LOGW
("UÇbËØg‘ fd fÏg fÜ fd %d\n", 
fd
);

622  
çl£
;

624 ià(
	`fú
(
fd
, 
F_SETFD
, 
æags
 | 
FD_CLOEXEC
) < 0) {

625 
	`LOGW
("UÇbËØ£ˆşo£-Ú-exeøfÜ fd %d\n", 
fd
);

626  
çl£
;

628  
Œue
;

629 
	}
}

631 #ià(!
HAVE_STRLCPY
)

633 
size_t
 
	$¡¾ıy
(*
d¡
, cÚ¡ *
¤c
, 
size_t
 
size
) {

634 
size_t
 
¤cL’gth
 = 
	`¡¾’
(
¤c
);

635 
size_t
 
cİyL’gth
 = 
¤cL’gth
;

637 ià(
¤cL’gth
 > (
size
 - 1)) {

638 
cİyL’gth
 = 
size
 - 1;

641 ià(
size
 != 0) {

642 
	`¡ºıy
(
d¡
, 
¤c
, 
cİyL’gth
);

643 
d¡
[
cİyL’gth
] = '\0';

646  
¤cL’gth
;

647 
	}
}

	@Misc.h

20 #iâdeà
_DALVIK_MISC


21 
	#_DALVIK_MISC


	)

23 
	~"IÆšes.h
"

25 
	~<¡dio.h
>

26 
	~<sys/ty³s.h
>

27 
	~<sys/time.h
>

32 
	#UNUSED_PARAMETER
(
p
è()Õ)

	)

45 
INLINE
 
	$dvmU4ToFlßt
(
u4
 
v®
) {

46 uniÚ { 
u4
 
š
; 
out
; } 
cÚv
;

47 
cÚv
.
š
 = 
v®
;

48  
cÚv
.
out
;

49 
	}
}

50 
INLINE
 
u4
 
	$dvmFlßtToU4
(
v®
) {

51 uniÚ { 
š
; 
u4
 
out
; } 
cÚv
;

52 
cÚv
.
š
 = 
v®
;

53  
cÚv
.
out
;

54 
	}
}

67 ’um { 
	mkHexDumpLoÿl
, 
	mkHexDumpMem
 } 
	tHexDumpMode
;

68 
dvmPrštHexDumpEx
(
´iÜ™y
, cÚ¡ * 
g
, cÚ¡ * 
vaddr
,

69 
size_t
 
Ëngth
, 
HexDumpMode
 
mode
);

74 
INLINE
 
	$dvmPrštHexDump
(cÚ¡ * 
vaddr
, 
size_t
 
Ëngth
) {

75 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_INFO
, 
LOG_TAG
,

76 
vaddr
, 
Ëngth
, 
kHexDumpLoÿl
);

77 
	}
}

82 
INLINE
 
	$dvmPrštHexDumpDbg
(cÚ¡ * 
vaddr
, 
size_t
 
Ëngth
,cÚ¡ * 
g
)

84 #ià!
LOG_NDEBUG


85 
	`dvmPrštHexDumpEx
(
ANDROID_LOG_VERBOSE
, (
g
 !ğ
NULL
è?ag : 
LOG_TAG
,

86 
vaddr
, 
Ëngth
, 
kHexDumpLoÿl
);

88 
	}
}

94 
	sDebugOuutT¬g‘
 {

97 
	mkDebugT¬g‘Unknown
 = 0,

98 
	mkDebugT¬g‘Log
,

99 
	mkDebugT¬g‘Fe
,

100 } 
	mwhich
;

105 
	m´iÜ™y
;

106 cÚ¡ * 
	mg
;

107 } 
	mlog
;

109 
FILE
* 
	må
;

110 } 
	mfe
;

111 } 
	md©a
;

112 } 
	tDebugOuutT¬g‘
;

117 
dvmC»©eLogOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
´iÜ™y
,

118 cÚ¡ * 
g
);

119 
dvmC»©eFeOuutT¬g‘
(
DebugOuutT¬g‘
* 
rg‘
, 
FILE
* 
å
);

124 
	$dvmPrštDebugMes§ge
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, cÚ¡ * 
fÜm©
,

126 #ià
	`defšed
(
__GNUC__
)

127 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

138 
	sB™VeùÜ
 {

139 
boŞ
 
ex·ndabË
;

140 
¡ÜageSize
;

141 
u4
* 
¡Üage
;

142 } 
	tB™VeùÜ
;

145 
B™VeùÜ
* 
	`dvmAÎocB™VeùÜ
(
¡¬tB™s
, 
boŞ
 
ex·ndabË
);

146 
	`dvmF»eB™VeùÜ
(
B™VeùÜ
* 
pB™s
);

158 
	`dvmAÎocB™
(
B™VeùÜ
* 
pB™s
);

159 
boŞ
 
	`dvmS‘B™
(
B™VeùÜ
* 
pB™s
, 
num
);

160 
	`dvmCË¬B™
(
B™VeùÜ
* 
pB™s
, 
num
);

161 
	`dvmCË¬AÎB™s
(
B™VeùÜ
* 
pB™s
);

162 
boŞ
 
	`dvmIsB™S‘
(cÚ¡ 
B™VeùÜ
* 
pB™s
, 
num
);

165 
	`dvmCouÁS‘B™s
(cÚ¡ 
B™VeùÜ
* 
pB™s
);

167 
	#kB™VeùÜGrowth
 4

	)

175 * 
	`dvmDÙToSÏsh
(cÚ¡ * 
¡r
);

183 * 
	`dvmDesütÜToDÙ
(cÚ¡ * 
¡r
);

191 * 
	`dvmDÙToDesütÜ
(cÚ¡ * 
¡r
);

198 * 
	`dvmDesütÜToName
(cÚ¡ * 
¡r
);

205 * 
	`dvmNameToDesütÜ
(cÚ¡ * 
¡r
);

212 
u8
 
	`dvmG‘R–©iveTimeN£c
();

219 
INLINE
 
u8
 
	$dvmG‘R–©iveTimeU£c
() {

220  
	`dvmG‘R–©iveTimeN£c
() / 1000;

221 
	}
}

233 
u8
 
dvmG‘Th»adCpuTimeN£c
();

238 
INLINE
 
u8
 
	$dvmG‘Th»adCpuTimeU£c
() {

239  
	`dvmG‘Th»adCpuTimeN£c
() / 1000;

240 
	}
}

245 
u8
 
dvmG‘Oth”Th»adCpuTimeN£c
(
±h»ad_t
 
th»ad
);

246 
INLINE
 
u8
 
	$dvmG‘Oth”Th»adCpuTimeU£c
(
±h»ad_t
 
th»ad
) {

247  
	`dvmG‘Oth”Th»adCpuTimeN£c
(
th»ad
) / 1000;

248 
	}
}

257 
boŞ
 
dvmI‹¿tiveSË•
(
™”©iÚ
, 
maxTÙ®SË•
, 
u8
 
»lS¹Time
);

262 
boŞ
 
dvmS‘Clo£OnExec
(
fd
);

273 
dvmAbÜt
();

275 #ià(!
HAVE_STRLCPY
)

277 
size_t
 
¡¾ıy
(*
d¡
, cÚ¡ *
¤c
, size_ˆ
size
);

	@Native.c

24 
	~"D®vik.h
"

26 
	~<¡dlib.h
>

27 
	~<dlfú.h
>

29 
ä“Sh¬edLibEÁry
(* 
±r
);

30 * 
lookupSh¬edLibM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
);

36 
boŞ
 
	$dvmN©iveS¹up
()

38 
gDvm
.
ÇtiveLibs
 = 
	`dvmHashTabËC»©e
(4, 
ä“Sh¬edLibEÁry
);

39 ià(
gDvm
.
ÇtiveLibs
 =ğ
NULL
)

40  
çl£
;

42  
Œue
;

43 
	}
}

48 
	$dvmN©iveShutdown
()

50 
	`dvmHashTabËF»e
(
gDvm
.
ÇtiveLibs
);

51 
gDvm
.
ÇtiveLibs
 = 
NULL
;

52 
	}
}

70 
	$dvmResŞveN©iveM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

71 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

73 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

74 * 
func
;

80 ià(
	`dvmIsSticM‘hod
(
m‘hod
)) {

81 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz)) {

82 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

86 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
şazz
) ||

87 
	`dvmIsCÏssIn™Ÿlizšg
(
şazz
));

91 
func
 = 
	`dvmLookupIÁ”ÇlN©iveM‘hod
(
m‘hod
);

92 ià(
func
 !ğ
NULL
) {

94 
	`IF_LOGVV
() {

95 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

96 
	`LOGVV
("+++„esolved‚ative %s.%s %s, invoking\n",

97 
şazz
->
desütÜ
, 
m‘hod
->
Çme
, 
desc
);

98 
	`ä“
(
desc
);

100 ià(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
)) {

101 
	`LOGE
("ERROR: internal-native can't be declared 'synchronized'\n");

102 
	`LOGE
("Fašg oÀ%s.%s\n", 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

103 
	`dvmAbÜt
();

105 
D®vikBridgeFunc
 
dfunc
 = (D®vikBridgeFuncè
func
;

106 
	`dvmS‘N©iveFunc
(
m‘hod
, 
dfunc
, 
NULL
);

107 
	`as£¹
(
m‘hod
->
š¢s
 =ğ
NULL
);

108 
	`dfunc
(
¬gs
, 
pResuÉ
, 
m‘hod
, 
£lf
);

113 
func
 = 
	`lookupSh¬edLibM‘hod
(
m‘hod
);

114 ià(
func
 !ğ
NULL
) {

116 
	`dvmU£JNIBridge
((
M‘hod
*è
m‘hod
, 
func
);

117 (*
m‘hod
->
ÇtiveFunc
)(
¬gs
, 
pResuÉ
, m‘hod, 
£lf
);

121 
	`IF_LOGW
() {

122 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

123 
	`LOGW
("No implementation found for‚ative %s.%s %s\n",

124 
şazz
->
desütÜ
, 
m‘hod
->
Çme
, 
desc
);

125 
	`ä“
(
desc
);

128 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Un§tisf›dLškE¼Ü;", 
m‘hod
->
Çme
);

129 
	}
}

142 
	eOnLßdS‹
 {

143 
	mkOnLßdP’dšg
 = 0,

144 
	mkOnLßdFaed
,

145 
	mkOnLßdOkay
,

146 } 
	tOnLßdS‹
;

152 
	sSh¬edLib
 {

153 * 
	m·thName
;

154 * 
	mhªdË
;

155 
Objeù
* 
	mşassLßd”
;

157 
±h»ad_mu‹x_t
 
	mÚLßdLock
;

158 
±h»ad_cÚd_t
 
	mÚLßdCÚd
;

159 
u4
 
	mÚLßdTh»adId
;

160 
OnLßdS‹
 
	mÚLßdResuÉ
;

161 } 
	tSh¬edLib
;

168 
	$hashcmpNameSŒ
(cÚ¡ * 
v’Œy
, cÚ¡ * 
vÇme
)

170 cÚ¡ 
Sh¬edLib
* 
pLib
 = (cÚ¡ Sh¬edLib*è
v’Œy
;

171 cÚ¡ * 
Çme
 = (cÚ¡ *è
vÇme
;

173  
	`¡rcmp
(
pLib
->
·thName
, 
Çme
);

174 
	}
}

184 
	$hashcmpSh¬edLib
(cÚ¡ * 
v’Œy
, cÚ¡ * 
vÃwEÁry
)

186 cÚ¡ 
Sh¬edLib
* 
pLib
 = (cÚ¡ Sh¬edLib*è
v’Œy
;

187 cÚ¡ 
Sh¬edLib
* 
pNewLib
 = (cÚ¡ Sh¬edLib*è
vÃwEÁry
;

189 
	`LOGD
("--- comparing %p '%s' %p '%s'\n",

190 
pLib
,…Lib->
·thName
, 
pNewLib
,…NewLib->pathName);

191  
	`¡rcmp
(
pLib
->
·thName
, 
pNewLib
->pathName);

192 
	}
}

197 
Sh¬edLib
* 
	$fšdSh¬edLibEÁry
(cÚ¡ * 
·thName
)

199 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
·thName
);

200 * 
’t
;

202 
’t
 = 
	`dvmHashTabËLookup
(
gDvm
.
ÇtiveLibs
, 
hash
, (*)
·thName
,

203 
hashcmpNameSŒ
, 
çl£
);

204  
’t
;

205 
	}
}

213 
Sh¬edLib
* 
	$addSh¬edLibEÁry
(
Sh¬edLib
* 
pLib
)

215 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
pLib
->
·thName
);

216 * 
’t
;

223  
	`dvmHashTabËLookup
(
gDvm
.
ÇtiveLibs
, 
hash
, 
pLib
, 
hashcmpSh¬edLib
,

224 
Œue
);

225 
	}
}

230 
	$ä“Sh¬edLibEÁry
(* 
±r
)

232 
Sh¬edLib
* 
pLib
 = (Sh¬edLib*è
±r
;

238 ià(
çl£
)

239 
	`dlşo£
(
pLib
->
hªdË
);

240 
	`ä“
(
pLib
->
·thName
);

241 
	`ä“
(
pLib
);

242 
	}
}

251 * 
	$dvmC»©eSy¡emLib¿ryName
(* 
libName
)

253 
buf
[256];

254 
Ën
;

256 
Ën
 = 
	`¢´štf
(
buf
, (buf), 
OS_SHARED_LIB_FORMAT_STR
, 
libName
);

257 ià(
Ën
 >ğ(è(
buf
))

258  
NULL
;

260  
	`¡rdup
(
buf
);

261 
	}
}

273 * 
	$fšdLib¿ry
(cÚ¡ * 
libSysName
)

275 * 
javaLib¿ryP©h
 = 
NULL
;

276 * 
‹¡Name
 = 
NULL
;

277 * 
¡¬t
;

278 * 
ı
;

279 
boŞ
 
dÚe
;

281 
javaLib¿ryP©h
 = 
	`dvmG‘Prİ”ty
("java.library.path");

282 ià(
javaLib¿ryP©h
 =ğ
NULL
)

283 
ba
;

285 
	`LOGVV
("+++…©h i '%s'\n", 
javaLib¿ryP©h
);

287 
¡¬t
 = 
ı
 = 
javaLib¿ryP©h
;

288 
ı
 !ğ
NULL
) {

289 
·thBuf
[256];

290 
Ën
;

292 
ı
 = 
	`¡rchr
(
¡¬t
, ':');

293 ià(
ı
 !ğ
NULL
)

294 *
ı
 = '\0';

296 
Ën
 = 
	`¢´štf
(
·thBuf
, Õ©hBuf), "%s/%s", 
¡¬t
, 
libSysName
);

297 ià(
Ën
 >ğ(è(
·thBuf
)) {

298 
	`LOGW
("Path overflowed %d bytes: '%s' / '%s'\n",

299 
Ën
, 
¡¬t
, 
libSysName
);

302 
	`LOGVV
("+++ryšg '%s'\n", 
·thBuf
);

303 ià(
	`acûss
(
·thBuf
, 
R_OK
) == 0) {

304 
‹¡Name
 = 
	`¡rdup
(
·thBuf
);

309 
¡¬t
 = 
ı
 +1;

312 
ba
:

313 
	`ä“
(
javaLib¿ryP©h
);

314  
‹¡Name
;

315 
	}
}

323 
	$dvmLßdN©iveLib¿ry
(
SŒšgObjeù
* 
libNameObj
, 
Objeù
* 
şassLßd”
)

325 * 
libName
 = 
NULL
;

326 * 
libSysName
 = 
NULL
;

327 * 
libP©h
 = 
NULL
;

334 ià(
şassLßd”
 !ğ
NULL
) {

335 
M‘hod
* 
fšdLib¿ry
;

336 
Objeù
* 
fšdLibResuÉ
;

338 
fšdLib¿ry
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şassLßd”
->
şazz
,

340 ià(
fšdLib¿ry
 =ğ
NULL
) {

341 
	`LOGW
("Could‚ot find findLibrary() in %s\n",

342 
şassLßd”
->
şazz
->
Çme
);

343 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsatisfiedLinkError;",

345 
ba
;

348 
fšdLibResuÉ
 = (
Objeù
*)(
u4
è
	`dvmC®lM‘hod
(
fšdLib¿ry
, 
şassLßd”
,

349 
libNameObj
);

350 ià(
	`dvmCheckExû±iÚ
()) {

351 
	`LOGV
("returningƒarly onƒxception\n");

352 
ba
;

354 ià(
fšdLibResuÉ
 !ğ
NULL
) {

356 
libP©h
 = 
	`dvmC»©eC¡rFromSŒšg
(
libNameObj
);

357 
	`LOGI
("Found†ib¿ryhrough CL: '%s'\n", 
libP©h
);

358 
	`dvmLßdN©iveCode
(
libP©h
, 
şassLßd”
);

359 
ba
;

363 
libName
 = 
	`dvmC»©eC¡rFromSŒšg
(
libNameObj
);

364 ià(
libName
 =ğ
NULL
)

365 
ba
;

366 
libSysName
 = 
	`dvmC»©eSy¡emLib¿ryName
(
libName
);

367 ià(
libSysName
 =ğ
NULL
)

368 
ba
;

370 
libP©h
 = 
	`fšdLib¿ry
(
libSysName
);

371 ià(
libP©h
 !ğ
NULL
) {

372 
	`LOGD
("Found†ib¿ryhrough…©h: '%s'\n", 
libP©h
);

373 
	`dvmLßdN©iveCode
(
libP©h
, 
şassLßd”
);

375 
	`LOGW
("UÇbËØloÿ‹ sh¬ed†ib m©chšg '%s'\n", 
libSysName
);

376 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Un§tisf›dLškE¼Ü;", 
libName
);

379 
ba
:

380 
	`ä“
(
libName
);

381 
	`ä“
(
libSysName
);

382 
	`ä“
(
libP©h
);

383 
	}
}

391 
boŞ
 
	$checkOnLßdResuÉ
(
Sh¬edLib
* 
pEÁry
)

393 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

394 ià(
pEÁry
->
ÚLßdTh»adId
 =ğ
£lf
->
th»adId
) {

399 
	`LOGI
("threadid=%d:„ecursive‚ative†ibrary†oad‡ttempt (%s)\n",

400 
£lf
->
th»adId
, 
pEÁry
->
·thName
);

401  
Œue
;

404 
	`LOGV
("+++„‘r›všg % OnLßd stus\n", 
pEÁry
->
·thName
);

405 
boŞ
 
»suÉ
;

407 
	`dvmLockMu‹x
(&
pEÁry
->
ÚLßdLock
);

408 
pEÁry
->
ÚLßdResuÉ
 =ğ
kOnLßdP’dšg
) {

409 
	`LOGD
("threadid=%d: waiting for %s OnLoad status\n",

410 
£lf
->
th»adId
, 
pEÁry
->
·thName
);

411 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

412 
	`±h»ad_cÚd_wa™
(&
pEÁry
->
ÚLßdCÚd
, &pEÁry->
ÚLßdLock
);

413 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

415 ià(
pEÁry
->
ÚLßdResuÉ
 =ğ
kOnLßdOkay
) {

416 
	`LOGV
("+++ƒ¬l›¸OnLßd(%sèokay\n", 
pEÁry
->
·thName
);

417 
»suÉ
 = 
Œue
;

419 
	`LOGV
("+++ƒ¬l›¸OnLßd(%sèçed\n", 
pEÁry
->
·thName
);

420 
»suÉ
 = 
çl£
;

422 
	`dvmUÆockMu‹x
(&
pEÁry
->
ÚLßdLock
);

423  
»suÉ
;

424 
	}
}

426 (*
	tOnLßdFunc
)(
	tJavaVM
*, *);

443 
boŞ
 
	$dvmLßdN©iveCode
(cÚ¡ * 
·thName
, 
Objeù
* 
şassLßd”
)

445 
Sh¬edLib
* 
pEÁry
;

446 * 
hªdË
;

448 
	`LOGD
("TryšgØlßd†ib % %p\n", 
·thName
, 
şassLßd”
);

450 #ifdeà
WITH_TAINT_TRACKING


451 ià(
	`¡ºcmp
(
·thName
, "/system", 7) != 0) {

452 
	`LOGW
("D’yšg†ib % ÒÙ \"/sy¡em\"…»fix)\n", 
·thName
);

453  
çl£
;

455 ià(
	`¡r¡r
(
·thName
, "/../"è!ğ
NULL
) {

456 
	`LOGW
("D’yšg†ib % (cÚš \"/../\")\n", 
·thName
);

457  
çl£
;

465 
pEÁry
 = 
	`fšdSh¬edLibEÁry
(
·thName
);

466 ià(
pEÁry
 !ğ
NULL
) {

467 ià(
pEÁry
->
şassLßd”
 != classLoader) {

468 
	`LOGW
("Shared†ib '%s'‡lready opened by CL %p; can't open in %p\n",

469 
·thName
, 
pEÁry
->
şassLßd”
, classLoader);

470  
çl£
;

472 
	`LOGD
("Shared†ib '%s'‡lready†oaded in same CL %p\n",

473 
·thName
, 
şassLßd”
);

474 ià(!
	`checkOnLßdResuÉ
(
pEÁry
))

475  
çl£
;

476  
Œue
;

508 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

509 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

510 
hªdË
 = 
	`dlİ’
(
·thName
, 
RTLD_LAZY
);

511 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

513 ià(
hªdË
 =ğ
NULL
) {

514 
	`LOGI
("UÇbËØdlİ’(%s): %s\n", 
·thName
, 
	`dË¼Ü
());

515  
çl£
;

519 
Sh¬edLib
* 
pNewEÁry
;

520 
pNewEÁry
 = (
Sh¬edLib
*è
	`ÿÎoc
(1, (SharedLib));

521 
pNewEÁry
->
·thName
 = 
	`¡rdup
(pathName);

522 
pNewEÁry
->
hªdË
 = handle;

523 
pNewEÁry
->
şassLßd”
 = classLoader;

524 
	`dvmIn™Mu‹x
(&
pNewEÁry
->
ÚLßdLock
);

525 
	`±h»ad_cÚd_š™
(&
pNewEÁry
->
ÚLßdCÚd
, 
NULL
);

526 
pNewEÁry
->
ÚLßdTh»adId
 = 
£lf
->
th»adId
;

529 
Sh¬edLib
* 
pAùu®EÁry
 = 
	`addSh¬edLibEÁry
(
pNewEÁry
);

531 ià(
pNewEÁry
 !ğ
pAùu®EÁry
) {

532 
	`LOGI
("WOW: we†ost‡„aceo‡dd‡ shared†ib (%s CL=%p)\n",

533 
·thName
, 
şassLßd”
);

534 
	`ä“Sh¬edLibEÁry
(
pNewEÁry
);

535  
	`checkOnLßdResuÉ
(
pAùu®EÁry
);

537 
	`LOGD
("Added sh¬ed†ib % %p\n", 
·thName
, 
şassLßd”
);

539 
boŞ
 
»suÉ
 = 
Œue
;

540 * 
vÚLßd
;

541 
v”siÚ
;

543 
vÚLßd
 = 
	`dlsym
(
hªdË
, "JNI_OnLoad");

544 ià(
vÚLßd
 =ğ
NULL
) {

545 
	`LOGD
("NØJNI_OnLßd found iÀ% %p\n", 
·thName
, 
şassLßd”
);

553 
OnLßdFunc
 
func
 = 
vÚLßd
;

554 
Objeù
* 
´evOv”ride
 = 
£lf
->
şassLßd”Ov”ride
;

556 
£lf
->
şassLßd”Ov”ride
 = 
şassLßd”
;

557 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_NATIVE
);

558 
	`LOGV
("+++ c®lšg JNI_OnLßd(%s)\n", 
·thName
);

559 
v”siÚ
 = (*
func
)(
gDvm
.
vmLi¡
, 
NULL
);

560 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

561 
£lf
->
şassLßd”Ov”ride
 = 
´evOv”ride
;

563 ià(
v”siÚ
 !ğ
JNI_VERSION_1_2
 && v”siÚ !ğ
JNI_VERSION_1_4
 &&

564 
v”siÚ
 !ğ
JNI_VERSION_1_6
)

566 
	`LOGW
("JNI_OnLoad„eturned bad version (%d) in %s %p\n",

567 
v”siÚ
, 
·thName
, 
şassLßd”
);

577 
»suÉ
 = 
çl£
;

579 
	`LOGV
("+++ fšished JNI_OnLßd %s\n", 
·thName
);

583 ià(
»suÉ
)

584 
pNewEÁry
->
ÚLßdResuÉ
 = 
kOnLßdOkay
;

586 
pNewEÁry
->
ÚLßdResuÉ
 = 
kOnLßdFaed
;

588 
pNewEÁry
->
ÚLßdTh»adId
 = 0;

593 
	`dvmLockMu‹x
(&
pNewEÁry
->
ÚLßdLock
);

594 
	`±h»ad_cÚd_brßdÿ¡
(&
pNewEÁry
->
ÚLßdCÚd
);

595 
	`dvmUÆockMu‹x
(&
pNewEÁry
->
ÚLßdLock
);

596  
»suÉ
;

598 
	}
}

612 * 
	$ü—‹JniNameSŒšg
(cÚ¡ * 
şassDesütÜ
,

613 cÚ¡ * 
m‘hodName
, * 
pL’
)

615 * 
»suÉ
;

616 
size_t
 
desütÜL’gth
 = 
	`¡¾’
(
şassDesütÜ
);

618 *
pL’
 = 4 + 
desütÜL’gth
 + 
	`¡¾’
(
m‘hodName
);

620 
»suÉ
 = 
	`m®loc
(*
pL’
 +1);

621 ià(
»suÉ
 =ğ
NULL
)

622  
NULL
;

628 
	`¥rštf
(
»suÉ
, "Java/%s%s", 
şassDesütÜ
 + 1, 
m‘hodName
);

629 
»suÉ
[5 + (
desütÜL’gth
 - 2)] = '/';

631  
»suÉ
;

632 
	}
}

640 * 
	$mªgËSŒšg
(cÚ¡ * 
¡r
, 
Ën
)

642 
u2
* 
utf16
 = 
NULL
;

643 * 
mªgË
 = 
NULL
;

644 
ch¬L’
;

648 
	`as£¹
(
¡r
[
Ën
] == '\0');

650 
ch¬L’
 = 
	`dvmUtf8L’
(
¡r
);

651 
utf16
 = (
u2
*è
	`m®loc
((u2è* 
ch¬L’
);

652 ià(
utf16
 =ğ
NULL
)

653 
ba
;

655 
	`dvmCÚv”tUtf8ToUtf16
(
utf16
, 
¡r
);

660 
i
, 
mªgËL’
 = 0;

662 
i
 = 0; i < 
ch¬L’
; i++) {

663 
u2
 
ch
 = 
utf16
[
i
];

665 ià(
ch
 == '$' || ch > 127) {

666 
mªgËL’
 += 6;

668 
ch
) {

672 
mªgËL’
 += 2;

675 
mªgËL’
++;

681 * 
ı
;

683 
mªgË
 = (*è
	`m®loc
(
mªgËL’
 +1);

684 ià(
mªgË
 =ğ
NULL
)

685 
ba
;

687 
i
 = 0, 
ı
 = 
mªgË
; i < 
ch¬L’
; i++) {

688 
u2
 
ch
 = 
utf16
[
i
];

690 ià(
ch
 == '$' || ch > 127) {

691 
	`¥rštf
(
ı
, "_0%04x", 
ch
);

692 
ı
 += 6;

694 
ch
) {

696 *
ı
++ = '_';

697 *
ı
++ = '1';

700 *
ı
++ = '_';

701 *
ı
++ = '2';

704 *
ı
++ = '_';

705 *
ı
++ = '3';

708 *
ı
++ = '_';

711 *
ı
++ = (è
ch
;

717 *
ı
 = '\0';

719 
ba
:

720 
	`ä“
(
utf16
);

721  
mªgË
;

722 
	}
}

727 * 
	$ü—‹MªgËdSigÇtu»
(cÚ¡ 
DexPrÙo
* 
´Ùo
)

729 
DexSŒšgCache
 
sigCache
;

730 cÚ¡ * 
š‹rim
;

731 * 
»suÉ
;

733 
	`dexSŒšgCacheIn™
(&
sigCache
);

734 
š‹rim
 = 
	`dexPrÙoG‘P¬am‘”DesütÜs
(
´Ùo
, &
sigCache
);

735 
»suÉ
 = 
	`mªgËSŒšg
(
š‹rim
, 
	`¡¾’
(interim));

736 
	`dexSŒšgCacheR–—£
(&
sigCache
);

738  
»suÉ
;

739 
	}
}

748 
	$fšdM‘hodInLib
(* 
vlib
, * 
vm‘hod
)

750 cÚ¡ 
Sh¬edLib
* 
pLib
 = (cÚ¡ Sh¬edLib*è
vlib
;

751 cÚ¡ 
M‘hod
* 
m‘h
 = (cÚ¡ M‘hod*è
vm‘hod
;

752 * 
´eMªgËCM
 = 
NULL
;

753 * 
mªgËCM
 = 
NULL
;

754 * 
mªgËSig
 = 
NULL
;

755 * 
mªgËCMSig
 = 
NULL
;

756 * 
func
 = 
NULL
;

757 
Ën
;

759 ià(
m‘h
->
şazz
->
şassLßd”
 !ğ
pLib
->classLoader) {

760 
	`LOGD
("+++‚ot scanning '%s' for '%s' (wrong CL)\n",

761 
pLib
->
·thName
, 
m‘h
->
Çme
);

764 
	`LOGV
("+++ sÿÂšg '%s' fÜ '%s'\n", 
pLib
->
·thName
, 
m‘h
->
Çme
);

769 
´eMªgËCM
 =

770 
	`ü—‹JniNameSŒšg
(
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, &
Ën
);

771 ià(
´eMªgËCM
 =ğ
NULL
)

772 
ba
;

774 
mªgËCM
 = 
	`mªgËSŒšg
(
´eMªgËCM
, 
Ën
);

775 ià(
mªgËCM
 =ğ
NULL
)

776 
ba
;

778 
	`LOGV
("+++ c®lšg dlsym(%s)\n", 
mªgËCM
);

779 
func
 = 
	`dlsym
(
pLib
->
hªdË
, 
mªgËCM
);

780 ià(
func
 =ğ
NULL
) {

781 
mªgËSig
 =

782 
	`ü—‹MªgËdSigÇtu»
(&
m‘h
->
´ÙÙy³
);

783 ià(
mªgËSig
 =ğ
NULL
)

784 
ba
;

786 
mªgËCMSig
 = (*è
	`m®loc
(
	`¡¾’
(
mªgËCM
è+ sŒËn(
mªgËSig
) +3);

787 ià(
mªgËCMSig
 =ğ
NULL
)

788 
ba
;

790 
	`¥rštf
(
mªgËCMSig
, "%s__%s", 
mªgËCM
, 
mªgËSig
);

792 
	`LOGV
("+++ c®lšg dlsym(%s)\n", 
mªgËCMSig
);

793 
func
 = 
	`dlsym
(
pLib
->
hªdË
, 
mªgËCMSig
);

794 ià(
func
 !ğ
NULL
) {

795 
	`LOGV
("Found '%s' w™h dlsym\n", 
mªgËCMSig
);

798 
	`LOGV
("Found '%s' w™h dlsym\n", 
mªgËCM
);

801 
ba
:

802 
	`ä“
(
´eMªgËCM
);

803 
	`ä“
(
mªgËCM
);

804 
	`ä“
(
mªgËSig
);

805 
	`ä“
(
mªgËCMSig
);

806  (è
func
;

807 
	}
}

814 * 
	$lookupSh¬edLibM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

816 ià(
gDvm
.
ÇtiveLibs
 =ğ
NULL
) {

817 
	`LOGE
("Unexpected init state:‚ativeLibs‚ot„eady\n");

818 
	`dvmAbÜt
();

820  (*è
	`dvmHashFÜ—ch
(
gDvm
.
ÇtiveLibs
, 
fšdM‘hodInLib
,

821 (*è
m‘hod
);

822 
	}
}

	@Native.h

22 #iâdeà
_DALVIK_NATIVE


23 
	#_DALVIK_NATIVE


	)

28 
	sD®vikN©iveM‘hod
 {

29 cÚ¡ * 
	mÇme
;

30 cÚ¡ * 
	msigÇtu»
;

31 
D®vikN©iveFunc
 
	mâPŒ
;

32 } 
	tD®vikN©iveM‘hod
;

37 
	sD®vikN©iveCÏss
 {

38 cÚ¡ * 
	mşassDesütÜ
;

39 cÚ¡ 
D®vikN©iveM‘hod
* 
	mm‘hodInfo
;

40 
u4
 
	mşassDesütÜHash
;

41 } 
	tD®vikN©iveCÏss
;

45 
boŞ
 
dvmN©iveS¹up
();

46 
dvmN©iveShutdown
();

52 
dvmPÏtfÜmInvoke
(* 
pEnv
, 
CÏssObjeù
* 
şazz
, 
¬gInfo
, 
¬gc
,

53 cÚ¡ 
u4
* 
¬gv
, cÚ¡ * 
sigÇtu»
, * 
func
, 
JV®ue
* 
pResuÉ
);

58 
u4
 
dvmPÏtfÜmInvokeHšts
(cÚ¡ 
DexPrÙo
* 
´Ùo
);

64 * 
dvmC»©eSy¡emLib¿ryName
(* 
libName
);

66 
boŞ
 
dvmLßdN©iveCode
(cÚ¡ * 
feName
, 
Objeù
* 
şassLßd”
);

78 
dvmResŞveN©iveM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

79 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

82 
	#GET_ARG_LONG
(
_¬gs
, 
_–em
è
	`dvmG‘ArgLÚg
(_¬gs, _–em)

	)

93 
INLINE
 
s8
 
	$dvmG‘ArgLÚg
(cÚ¡ 
u4
* 
¬gs
, 
–em
)

96 uniÚ { 
u4
 
·¹s
[2]; 
s8
 
whŞe
; } 
cÚv
;

97 
cÚv
.
·¹s
[0] = 
¬gs
[
–em
];

98 
cÚv
.
·¹s
[1] = 
¬gs
[
–em
+1];

99  
cÚv
.
whŞe
;

102 
s8
 
v®
;

103 
	`memıy
(&
v®
, &
¬gs
[
–em
], 8);

104  
v®
;

106 
	}
}

	@PointerSet.c

19 
	~"D®vik.h
"

24 
	sPoš‹rS‘
 {

25 
u2
 
	m®loc
;

26 
u2
 
	mcouÁ
;

27 cÚ¡ ** 
	mli¡
;

33 
boŞ
 
	$v”ifySÜ‹d
(
Poš‹rS‘
* 
pS‘
)

35 cÚ¡ * 
Ï¡
 = 
NULL
;

36 
i
;

38 
i
 = 0; i < 
pS‘
->
couÁ
; i++) {

39 cÚ¡ * 
cur
 = 
pS‘
->
li¡
[
i
];

40 ià(
cur
 < 
Ï¡
)

41  
çl£
;

42 
Ï¡
 = 
cur
;

45  
Œue
;

46 
	}
}

54 
Poš‹rS‘
* 
	$dvmPoš‹rS‘AÎoc
(
š™ŸlSize
)

56 
Poš‹rS‘
* 
pS‘
 = 
	`ÿÎoc
(1, (PointerSet));

57 ià(
pS‘
 !ğ
NULL
) {

58 ià(
š™ŸlSize
 > 0) {

59 
pS‘
->
li¡
 = 
	`m®loc
((cÚ¡ *è* 
š™ŸlSize
);

60 ià(
pS‘
->
li¡
 =ğ
NULL
) {

61 
	`ä“
(
pS‘
);

62  
NULL
;

64 
pS‘
->
®loc
 = 
š™ŸlSize
;

68  
pS‘
;

69 
	}
}

74 
	$dvmPoš‹rS‘F»e
(
Poš‹rS‘
* 
pS‘
)

76 ià(
pS‘
 =ğ
NULL
)

79 ià(
pS‘
->
li¡
 !ğ
NULL
) {

80 
	`ä“
(
pS‘
->
li¡
);

81 
pS‘
->
li¡
 = 
NULL
;

83 
	`ä“
(
pS‘
);

84 
	}
}

89 
	$dvmPoš‹rS‘CË¬
(
Poš‹rS‘
* 
pS‘
)

91 
pS‘
->
couÁ
 = 0;

92 
	}
}

97 
	$dvmPoš‹rS‘G‘CouÁ
(cÚ¡ 
Poš‹rS‘
* 
pS‘
)

99  
pS‘
->
couÁ
;

100 
	}
}

105 cÚ¡ * 
	$dvmPoš‹rS‘G‘EÁry
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, 
i
)

107  
pS‘
->
li¡
[
i
];

108 
	}
}

116 
boŞ
 
	$dvmPoš‹rS‘AddEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
)

118 
Ã¬by
;

120 ià(
	`dvmPoš‹rS‘Has
(
pS‘
, 
±r
, &
Ã¬by
))

121  
çl£
;

124 ià(
pS‘
->
couÁ
 =ğpS‘->
®loc
) {

126 cÚ¡ ** 
ÃwLi¡
;

128 ià(
pS‘
->
®loc
 == 0)

129 
pS‘
->
®loc
 = 4;

131 
pS‘
->
®loc
 *= 2;

132 
	`LOGVV
("ex·ndšg %°tØ%d\n", 
pS‘
,…S‘->
®loc
);

133 
ÃwLi¡
 = 
	`»®loc
(
pS‘
->
li¡
,…S‘->
®loc
 * (const *));

134 ià(
ÃwLi¡
 =ğ
NULL
) {

135 
	`LOGE
("Faedƒx·ndšg…Œ s‘ (®loc=%d)\n", 
pS‘
->
®loc
);

136 
	`dvmAbÜt
();

138 
pS‘
->
li¡
 = 
ÃwLi¡
;

141 ià(
pS‘
->
couÁ
 == 0) {

143 
	`as£¹
(
Ã¬by
 == 0);

149 ià(
Ã¬by
 !ğ0 && 
±r
 < 
pS‘
->
li¡
[nearby-1]) {

152 
Ã¬by
--;

153 } ià(
±r
 < 
pS‘
->
li¡
[
Ã¬by
]) {

159 
Ã¬by
++;

165 ià(
Ã¬by
 !ğ
pS‘
->
couÁ
) {

167 
	`memmove
(&
pS‘
->
li¡
[
Ã¬by
+1], &pSet->list[nearby],

168 (
pS‘
->
couÁ
 - 
Ã¬by
è* ÕS‘->
li¡
[0]));

172 
pS‘
->
li¡
[
Ã¬by
] = 
±r
;

173 
pS‘
->
couÁ
++;

175 
	`as£¹
(
	`v”ifySÜ‹d
(
pS‘
));

176  
Œue
;

177 
	}
}

182 
boŞ
 
	$dvmPoš‹rS‘RemoveEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
)

184 
i
, 
wh”e
;

186 ià(!
	`dvmPoš‹rS‘Has
(
pS‘
, 
±r
, &
wh”e
))

187  
çl£
;

189 ià(
wh”e
 !ğ
pS‘
->
couÁ
-1) {

191 
	`memmove
(&
pS‘
->
li¡
[
wh”e
], &pSet->list[where+1],

192 (
pS‘
->
couÁ
-1 - 
wh”e
è* ÕS‘->
li¡
[0]));

195 
pS‘
->
couÁ
--;

196 
pS‘
->
li¡
[pS‘->
couÁ
] = (const *) 0xdecadead;

197  
Œue
;

198 
	}
}

204 
boŞ
 
	$dvmPoš‹rS‘Has
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
, * 
pIndex
)

206 
hi
, 
lo
, 
mid
;

208 
lo
 = 
mid
 = 0;

209 
hi
 = 
pS‘
->
couÁ
-1;

212 
lo
 <ğ
hi
) {

213 
mid
 = (
lo
 + 
hi
) / 2;

214 cÚ¡ * 
li¡V®
 = 
pS‘
->
li¡
[
mid
];

216 ià(
±r
 > 
li¡V®
) {

217 
lo
 = 
mid
 + 1;

218 } ià(
±r
 < 
li¡V®
) {

219 
hi
 = 
mid
 - 1;

221 ià(
pIndex
 !ğ
NULL
)

222 *
pIndex
 = 
mid
;

223  
Œue
;

227 ià(
pIndex
 !ğ
NULL
)

228 *
pIndex
 = 
mid
;

229  
çl£
;

230 
	}
}

237 
	$dvmPoš‹rS‘IÁ”£ù
(
Poš‹rS‘
* 
pS‘
, cÚ¡ ** 
±rA¼ay
, 
couÁ
)

239 
i
, 
j
;

241 
i
 = 0; i < 
pS‘
->
couÁ
; i++) {

242 
j
 = 0; j < 
couÁ
; j++) {

243 ià(
pS‘
->
li¡
[
i
] =ğ
±rA¼ay
[
j
]) {

249 ià(
j
 =ğ
couÁ
) {

251 ià(
i
 !ğ
pS‘
->
couÁ
-1) {

253 
	`memmove
(&
pS‘
->
li¡
[
i
], &pSet->list[i+1],

254 (
pS‘
->
couÁ
-1 - 
i
è* ÕS‘->
li¡
[0]));

257 
pS‘
->
couÁ
--;

258 
pS‘
->
li¡
[pS‘->
couÁ
] = (const *) 0xdecadead;

259 
i
--;

262 
	}
}

267 
	$dvmPoš‹rS‘Dump
(cÚ¡ 
Poš‹rS‘
* 
pS‘
)

269 
i
;

270 
i
 = 0; i < 
pS‘
->
couÁ
; i++)

271 
	`´štf
(" %p", 
pS‘
->
li¡
[
i
]);

272 
	}
}

	@PointerSet.h

20 #iâdeà
_DALVIK_POINTERSET


21 
	#_DALVIK_POINTERSET


	)

23 
	gPoš‹rS‘
;

24 
Poš‹rS‘
 
	tPoš‹rS‘
;

31 
Poš‹rS‘
* 
dvmPoš‹rS‘AÎoc
(
š™ŸlSize
);

36 
dvmPoš‹rS‘F»e
(
Poš‹rS‘
* 
pS‘
);

41 
dvmPoš‹rS‘CË¬
(
Poš‹rS‘
* 
pS‘
);

46 
dvmPoš‹rS‘G‘CouÁ
(cÚ¡ 
Poš‹rS‘
* 
pS‘
);

51 cÚ¡ * 
dvmPoš‹rS‘G‘EÁry
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, 
i
);

59 
boŞ
 
dvmPoš‹rS‘AddEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
);

64 
boŞ
 
dvmPoš‹rS‘RemoveEÁry
(
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
);

71 
boŞ
 
dvmPoš‹rS‘Has
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
, * 
pIndex
);

76 
INLINE
 
	$dvmPoš‹rS‘Fšd
(cÚ¡ 
Poš‹rS‘
* 
pS‘
, cÚ¡ * 
±r
) {

77 
idx
;

78 ià(!
	`dvmPoš‹rS‘Has
(
pS‘
, 
±r
, &
idx
))

79 
idx
 = -1;

80  
idx
;

81 
	}
}

88 
dvmPoš‹rS‘IÁ”£ù
(
Poš‹rS‘
* 
pS‘
, cÚ¡ ** 
±rA¼ay
, 
couÁ
);

93 
dvmPoš‹rS‘Dump
(cÚ¡ 
Poš‹rS‘
* 
pS‘
);

	@Profile.c

20 
	~"D®vik.h
"

22 #ifdeà
WITH_PROFILER


24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<¡ršg.h
>

27 
	~<sys/time.h
>

28 
	~<time.h
>

29 
	~<sys/mmª.h
>

30 
	~<sched.h
>

31 
	~<”ºo.h
>

32 
	~<fú.h
>

34 #ifdeà
HAVE_ANDROID_OS


35 
	#UPDATE_MAGIC_PAGE
 1

	)

36 #iâdeà
PAGESIZE


37 
	#PAGESIZE
 4096

	)

63 
	#TRACE_REC_SIZE
 9

	)

64 
	#TRACE_MAGIC
 0x574f4c53

	)

65 
	#TRACE_HEADER_LEN
 32

	)

67 
	#FILL_PATTERN
 0x““““

	)

73 
šlše
 
u8
 
	$g‘TimeInU£c
()

75 
timev®
 
tv
;

77 
	`g‘timeofday
(&
tv
, 
NULL
);

78  
tv
.
tv_£c
 * 1000000LL +v.
tv_u£c
;

79 
	}
}

89 
šlše
 
u8
 
	$g‘Clock
()

91 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

92 
time¥ec
 
tm
;

94 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
tm
);

96 ià(!(
tm
.
tv_n£c
 >= 0 &&m.tv_nsec < 1*1000*1000*1000)) {

97 
	`LOGE
("bad‚£c: %ld\n", 
tm
.
tv_n£c
);

98 
	`dvmAbÜt
();

101  
tm
.
tv_£c
 * 1000000LL +m.
tv_n£c
 / 1000;

103 
timev®
 
tv
;

105 
	`g‘timeofday
(&
tv
, 
NULL
);

106  
tv
.
tv_£c
 * 1000000LL +v.
tv_u£c
;

108 
	}
}

113 
šlše
 
	$¡ÜeShÜtLE
(
u1
* 
buf
, 
u2
 
v®
)

115 *
buf
++ = (
u1
è
v®
;

116 *
buf
++ = (
u1
è(
v®
 >> 8);

117 
	}
}

118 
šlše
 
	$¡ÜeIÁLE
(
u1
* 
buf
, 
u4
 
v®
)

120 *
buf
++ = (
u1
è
v®
;

121 *
buf
++ = (
u1
è(
v®
 >> 8);

122 *
buf
++ = (
u1
è(
v®
 >> 16);

123 *
buf
++ = (
u1
è(
v®
 >> 24);

124 
	}
}

125 
šlše
 
	$¡ÜeLÚgLE
(
u1
* 
buf
, 
u8
 
v®
)

127 *
buf
++ = (
u1
è
v®
;

128 *
buf
++ = (
u1
è(
v®
 >> 8);

129 *
buf
++ = (
u1
è(
v®
 >> 16);

130 *
buf
++ = (
u1
è(
v®
 >> 24);

131 *
buf
++ = (
u1
è(
v®
 >> 32);

132 *
buf
++ = (
u1
è(
v®
 >> 40);

133 *
buf
++ = (
u1
è(
v®
 >> 48);

134 *
buf
++ = (
u1
è(
v®
 >> 56);

135 
	}
}

140 
boŞ
 
	$dvmProfšgS¹up
()

145 
	`mem£t
(&
gDvm
.
m‘hodT¿û
, 0, (gDvm.methodTrace));

146 
	`dvmIn™Mu‹x
(&
gDvm
.
m‘hodT¿û
.
¡¬tStİLock
);

147 
	`±h»ad_cÚd_š™
(&
gDvm
.
m‘hodT¿û
.
th»adEx™CÚd
, 
NULL
);

149 
CÏssObjeù
* 
şazz
 =

150 
	`dvmFšdCÏssNoIn™
("Ld®vik/sy¡em/VMDebug;", 
NULL
);

151 
	`as£¹
(
şazz
 !ğ
NULL
);

152 
gDvm
.
m‘hodT¿û
.
gcM‘hod
 =

153 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "startGC", "()V");

154 
gDvm
.
m‘hodT¿û
.
şassP»pM‘hod
 =

155 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "startClassPrep", "()V");

156 ià(
gDvm
.
m‘hodT¿û
.
gcM‘hod
 =ğ
NULL
 ||

157 
gDvm
.
m‘hodT¿û
.
şassP»pM‘hod
 =ğ
NULL
)

159 
	`LOGE
("Unableo find startGC or startClassPrep\n");

160  
çl£
;

163 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

168 
gDvm
.
execu‹dIn¡rCouÁs
 = (*è
	`m®loc
(
kNumD®vikIn¡ruùiÚs
 * ());

169 ià(
gDvm
.
execu‹dIn¡rCouÁs
 =ğ
NULL
)

170  
çl£
;

171 
	`mem£t
(
gDvm
.
execu‹dIn¡rCouÁs
, 0, 
kNumD®vikIn¡ruùiÚs
 * ());

173 #ifdeà
UPDATE_MAGIC_PAGE


182 
fd
 = 
	`İ’
("/dev/qemu_Œaû", 
O_RDWR
);

183 ià(
fd
 < 0) {

184 
	`LOGV
("Unableo open /dev/qemu_trace\n");

186 
gDvm
.
emuÏtÜT¿ûPage
 = 
	`mm­
(0, 
PAGESIZE
, 
PROT_READ
|
PROT_WRITE
,

187 
MAP_SHARED
, 
fd
, 0);

188 
	`şo£
(
fd
);

189 ià(
gDvm
.
emuÏtÜT¿ûPage
 =ğ
MAP_FAILED
) {

190 
	`LOGE
("Unableo mmap /dev/qemu_trace\n");

191 
gDvm
.
emuÏtÜT¿ûPage
 = 
NULL
;

193 *(
u4
*è
gDvm
.
emuÏtÜT¿ûPage
 = 0;

197 
	`as£¹
(
gDvm
.
emuÏtÜT¿ûPage
 =ğ
NULL
);

200  
Œue
;

201 
	}
}

206 
	$dvmProfšgShutdown
()

208 #ifdeà
UPDATE_MAGIC_PAGE


209 ià(
gDvm
.
emuÏtÜT¿ûPage
 !ğ
NULL
)

210 
	`munm­
(
gDvm
.
emuÏtÜT¿ûPage
, 
PAGESIZE
);

212 
	`ä“
(
gDvm
.
execu‹dIn¡rCouÁs
);

213 
	}
}

220 
	$upd©eAùiveProf”s
(
couÁ
)

222 
ŞdV®ue
, 
ÃwV®ue
;

225 
ŞdV®ue
 = 
gDvm
.
aùiveProf”s
;

226 
ÃwV®ue
 = 
ŞdV®ue
 + 
couÁ
;

227 ià(
ÃwV®ue
 < 0) {

228 
	`LOGE
("Cª'ˆhav%d‡ùiv´of”s\n", 
ÃwV®ue
);

229 
	`dvmAbÜt
();

231 } !
	`ATOMIC_CMP_SWAP
(&
gDvm
.
aùiveProf”s
, 
ŞdV®ue
, 
ÃwV®ue
));

233 
	`LOGD
("+++‡ùiv´of” couÁ‚ow %d\n", 
ÃwV®ue
);

234 
	}
}

240 
	$»£tCpuClockBa£
()

242 
Th»ad
* 
th»ad
;

244 
	`dvmLockTh»adLi¡
(
NULL
);

245 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

246 
th»ad
->
ıuClockBa£S‘
 = 
çl£
;

247 
th»ad
->
ıuClockBa£
 = 0;

249 
	`dvmUÆockTh»adLi¡
();

250 
	}
}

255 
	$dumpTh»adLi¡
(
FILE
* 
å
)

257 
Th»ad
* 
th»ad
;

259 
	`dvmLockTh»adLi¡
(
NULL
);

260 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

261 * 
Çme
 = 
	`dvmG‘Th»adName
(
th»ad
);

263 
	`årštf
(
å
, "%d\t%s\n", 
th»ad
->
th»adId
, 
Çme
);

264 
	`ä“
(
Çme
);

266 
	`dvmUÆockTh»adLi¡
();

267 
	}
}

272 
	$dumpM¬kedM‘hods
(* 
vşazz
, * 
vå
)

274 
DexSŒšgCache
 
¡ršgCache
;

275 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
vşazz
;

276 
FILE
* 
å
 = (FILE*è
vå
;

277 
M‘hod
* 
m‘h
;

278 * 
Çme
;

279 
i
, 
lšeNum
;

281 
	`dexSŒšgCacheIn™
(&
¡ršgCache
);

283 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

284 
m‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

285 ià(
m‘h
->
šProfe
) {

286 
Çme
 = 
	`dvmDesütÜToName
(
m‘h
->
şazz
->
desütÜ
);

287 
	`årštf
(
å
, "0x%08x\t%s\t%s\t%s\t%s\t%d\n", (è
m‘h
,

288 
Çme
, 
m‘h
->name,

289 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
, &
¡ršgCache
),

290 
	`dvmG‘M‘hodSourûFe
(
m‘h
), 
	`dvmLšeNumFromPC
(meth, 0));

291 
m‘h
->
šProfe
 = 
çl£
;

292 
	`ä“
(
Çme
);

296 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

297 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

298 ià(
m‘h
->
šProfe
) {

299 
Çme
 = 
	`dvmDesütÜToName
(
m‘h
->
şazz
->
desütÜ
);

300 
	`årštf
(
å
, "0x%08x\t%s\t%s\t%s\t%s\t%d\n", (è
m‘h
,

301 
Çme
, 
m‘h
->name,

302 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
, &
¡ršgCache
),

303 
	`dvmG‘M‘hodSourûFe
(
m‘h
), 
	`dvmLšeNumFromPC
(meth, 0));

304 
m‘h
->
šProfe
 = 
çl£
;

305 
	`ä“
(
Çme
);

309 
	`dexSŒšgCacheR–—£
(&
¡ršgCache
);

312 
	}
}

317 
	$dumpM‘hodLi¡
(
FILE
* 
å
)

319 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

320 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
dumpM¬kedM‘hods
, (*è
å
);

321 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

322 
	}
}

331 
	$dvmM‘hodT¿ûS¹
(cÚ¡ * 
ŒaûFeName
, 
ŒaûFd
, 
bufãrSize
,

332 
æags
)

334 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

336 
	`as£¹
(
bufãrSize
 > 0);

338 ià(
¡©e
->
ŒaûEÇbËd
 != 0) {

339 
	`LOGI
("TRACE start„equested, but‡lready in…rogress; stopping\n");

340 
	`dvmM‘hodT¿ûStİ
();

342 
	`upd©eAùiveProf”s
(1);

343 
	`LOGI
("TRACE STARTED: '%s' %dKB\n",

344 
ŒaûFeName
, 
bufãrSize
 / 1024);

345 
	`dvmLockMu‹x
(&
¡©e
->
¡¬tStİLock
);

353 
¡©e
->
buf
 = (
u1
*è
	`m®loc
(
bufãrSize
);

354 ià(
¡©e
->
buf
 =ğ
NULL
) {

355 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "buffer‡lloc failed");

356 
ç
;

358 ià(
ŒaûFd
 < 0) {

359 
¡©e
->
ŒaûFe
 = 
	`fİ’
(
ŒaûFeName
, "w");

361 
¡©e
->
ŒaûFe
 = 
	`fdİ’
(
ŒaûFd
, "w");

363 ià(
¡©e
->
ŒaûFe
 =ğ
NULL
) {

364 
	`LOGE
("Unableo openrace file '%s': %s\n",

365 
ŒaûFeName
, 
	`¡»¼Ü
(
”ºo
));

366 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;", "file open failed");

367 
ç
;

369 
	`mem£t
(
¡©e
->
buf
, ()
FILL_PATTERN
, 
bufãrSize
);

371 
¡©e
->
bufãrSize
 = bufferSize;

372 
¡©e
->
ov”æow
 = 
çl£
;

377 
¡©e
->
æags
 = flags;

378 ià((
æags
 & 
TRACE_ALLOC_COUNTS
) != 0)

379 
	`dvmS¹AÎocCouÁšg
();

382 
	`»£tCpuClockBa£
();

384 
¡©e
->
¡¬tWh’
 = 
	`g‘TimeInU£c
();

389 
	`mem£t
(
¡©e
->
buf
, 0, 
TRACE_HEADER_LEN
);

390 
	`¡ÜeIÁLE
(
¡©e
->
buf
 + 0, 
TRACE_MAGIC
);

391 
	`¡ÜeShÜtLE
(
¡©e
->
buf
 + 4, 
TRACE_VERSION
);

392 
	`¡ÜeShÜtLE
(
¡©e
->
buf
 + 6, 
TRACE_HEADER_LEN
);

393 
	`¡ÜeLÚgLE
(
¡©e
->
buf
 + 8, s‹->
¡¬tWh’
);

394 
¡©e
->
curOff£t
 = 
TRACE_HEADER_LEN
;

396 
	`MEM_BARRIER
();

402 
¡©e
->
ŒaûEÇbËd
 = 
Œue
;

403 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

406 
ç
:

407 
	`upd©eAùiveProf”s
(-1);

408 ià(
¡©e
->
ŒaûFe
 !ğ
NULL
) {

409 
	`fşo£
(
¡©e
->
ŒaûFe
);

410 
¡©e
->
ŒaûFe
 = 
NULL
;

412 ià(
¡©e
->
buf
 !ğ
NULL
) {

413 
	`ä“
(
¡©e
->
buf
);

414 
¡©e
->
buf
 = 
NULL
;

416 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

417 
	}
}

423 
	$m¬kTouchedM‘hods
(
’dOff£t
)

425 
u1
* 
±r
 = 
gDvm
.
m‘hodT¿û
.
buf
 + 
TRACE_HEADER_LEN
;

426 
u1
* 
’d
 = 
gDvm
.
m‘hodT¿û
.
buf
 + 
’dOff£t
;

427 
m‘hodV®
;

428 
M‘hod
* 
m‘hod
;

430 
±r
 < 
’d
) {

431 
m‘hodV®
 = *(
±r
+1) | (*(ptr+2) << 8) | (*(ptr+3) << 16)

432 | (*(
±r
+4) << 24);

433 
m‘hod
 = (
M‘hod
*è
	`METHOD_ID
(
m‘hodV®
);

435 
m‘hod
->
šProfe
 = 
Œue
;

436 
±r
 +ğ
TRACE_REC_SIZE
;

438 
	}
}

446 
u4
 
	$g‘ClockOv”h—d
()

448 
u8
 
ÿlS¹
, 
ÿlEÏp£d
;

449 
i
;

451 
ÿlS¹
 = 
	`g‘Clock
();

452 
i
 = 1000 * 4; i > 0; i--) {

453 
	`g‘Clock
();

454 
	`g‘Clock
();

455 
	`g‘Clock
();

456 
	`g‘Clock
();

457 
	`g‘Clock
();

458 
	`g‘Clock
();

459 
	`g‘Clock
();

460 
	`g‘Clock
();

463 
ÿlEÏp£d
 = 
	`g‘Clock
(è- 
ÿlS¹
;

464  (è(
ÿlEÏp£d
 / (8*4));

465 
	}
}

470 
boŞ
 
	$dvmIsM‘hodT¿ûAùive
()

472 cÚ¡ 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

473  
¡©e
->
ŒaûEÇbËd
;

474 
	}
}

480 
	$dvmM‘hodT¿ûStİ
()

482 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

483 
u8
 
–­£d
;

489 
	`dvmLockMu‹x
(&
¡©e
->
¡¬tStİLock
);

491 ià(!
¡©e
->
ŒaûEÇbËd
) {

493 
	`LOGD
("TRACE stop„equested, but‚ot„unning\n");

494 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

497 
	`upd©eAùiveProf”s
(-1);

501 
–­£d
 = 
	`g‘TimeInU£c
(è- 
¡©e
->
¡¬tWh’
;

510 
¡©e
->
ŒaûEÇbËd
 = 
çl£
;

511 
	`MEM_BARRIER
();

512 
	`sched_y›ld
();

513 
	`u¦“p
(250 * 1000);

515 ià((
¡©e
->
æags
 & 
TRACE_ALLOC_COUNTS
) != 0)

516 
	`dvmStİAÎocCouÁšg
();

538 
fš®CurOff£t
 = 
¡©e
->
curOff£t
;

540 ià(
fš®CurOff£t
 > 
TRACE_HEADER_LEN
) {

541 
u4
 
flV®
 = 
	`METHOD_ID
(
FILL_PATTERN
);

542 
u1
* 
sÿnPŒ
 = 
¡©e
->
buf
 + 
TRACE_HEADER_LEN
;

544 
sÿnPŒ
 < 
¡©e
->
buf
 + 
fš®CurOff£t
) {

545 
u4
 
m‘hodV®
 = 
sÿnPŒ
[1] | (scanPtr[2] << 8) | (scanPtr[3] << 16)

546 | (
sÿnPŒ
[4] << 24);

547 ià(
	`METHOD_ID
(
m‘hodV®
è=ğ
flV®
) {

548 
u1
* 
sÿnBa£
 = 
¡©e
->
buf
 + 
TRACE_HEADER_LEN
;

549 
	`LOGW
("Found unfilled„ecord‡t %d (of %d)\n",

550 (
sÿnPŒ
 - 
sÿnBa£
è/ 
TRACE_REC_SIZE
,

551 (
fš®CurOff£t
 - 
TRACE_HEADER_LEN
è/ 
TRACE_REC_SIZE
);

552 
fš®CurOff£t
 = 
sÿnPŒ
 - 
¡©e
->
buf
;

556 
sÿnPŒ
 +ğ
TRACE_REC_SIZE
;

560 
	`LOGI
("TRACE STOPPED%s: writing %d„ecords\n",

561 
¡©e
->
ov”æow
 ? " (NOTE: overflowed buffer)" : "",

562 (
fš®CurOff£t
 - 
TRACE_HEADER_LEN
è/ 
TRACE_REC_SIZE
);

563 ià(
gDvm
.
debugg”Aùive
) {

564 
	`LOGW
("WARNING:‡ debugger is‡ctive; method-tracing„esults "

571 
u4
 
şockN£c
 = 
	`g‘ClockOv”h—d
();

573 
	`m¬kTouchedM‘hods
(
fš®CurOff£t
);

575 
	`årštf
(
¡©e
->
ŒaûFe
, "%cv”siÚ\n", 
TOKEN_CHAR
);

576 
	`årštf
(
¡©e
->
ŒaûFe
, "%d\n", 
TRACE_VERSION
);

577 
	`årštf
(
¡©e
->
ŒaûFe
, "data-file-overflow=%s\n",

578 
¡©e
->
ov”æow
 ? "true" : "false");

579 #ià
	`defšed
(
HAVE_POSIX_CLOCKS
)

580 
	`årštf
(
¡©e
->
ŒaûFe
, "clock=thread-cpu\n");

582 
	`årštf
(
¡©e
->
ŒaûFe
, "clock=global\n");

584 
	`årštf
(
¡©e
->
ŒaûFe
, "–­£d-time-u£c=%Îu\n", 
–­£d
);

585 
	`årštf
(
¡©e
->
ŒaûFe
, "num-method-calls=%d\n",

586 (
fš®CurOff£t
 - 
TRACE_HEADER_LEN
è/ 
TRACE_REC_SIZE
);

587 
	`årštf
(
¡©e
->
ŒaûFe
, "şock-ÿÎ-ov”h—d-n£c=%d\n", 
şockN£c
);

588 
	`årštf
(
¡©e
->
ŒaûFe
, "vm=dalvik\n");

589 ià((
¡©e
->
æags
 & 
TRACE_ALLOC_COUNTS
) != 0) {

590 
	`årštf
(
¡©e
->
ŒaûFe
, "alloc-count=%d\n",

591 
gDvm
.
®locProf
.
®locCouÁ
);

592 
	`årštf
(
¡©e
->
ŒaûFe
, "alloc-size=%d\n",

593 
gDvm
.
®locProf
.
®locSize
);

594 
	`årštf
(
¡©e
->
ŒaûFe
, "gc-count=%d\n",

595 
gDvm
.
®locProf
.
gcCouÁ
);

597 
	`årštf
(
¡©e
->
ŒaûFe
, "%ùh»ads\n", 
TOKEN_CHAR
);

598 
	`dumpTh»adLi¡
(
¡©e
->
ŒaûFe
);

599 
	`årštf
(
¡©e
->
ŒaûFe
, "%cm‘hods\n", 
TOKEN_CHAR
);

600 
	`dumpM‘hodLi¡
(
¡©e
->
ŒaûFe
);

601 
	`årštf
(
¡©e
->
ŒaûFe
, "%ûnd\n", 
TOKEN_CHAR
);

603 ià(
	`fwr™e
(
¡©e
->
buf
, 
fš®CurOff£t
, 1, s‹->
ŒaûFe
) != 1) {

604 
	`LOGE
("Œaû fwr™e(%dèçed,ƒ¼no=%d\n", 
fš®CurOff£t
, 
”ºo
);

605 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;", "data write failed");

606 
ba
;

609 
ba
:

610 
	`ä“
(
¡©e
->
buf
);

611 
¡©e
->
buf
 = 
NULL
;

612 
	`fşo£
(
¡©e
->
ŒaûFe
);

613 
¡©e
->
ŒaûFe
 = 
NULL
;

615 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
¡©e
->
th»adEx™CÚd
);

616 
	`as£¹
(
cc
 == 0);

617 
	`dvmUÆockMu‹x
(&
¡©e
->
¡¬tStİLock
);

618 
	}
}

627 
	$dvmM‘hodT¿ûAdd
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
)

629 
M‘hodT¿ûS‹
* 
¡©e
 = &
gDvm
.
m‘hodT¿û
;

630 
u4
 
şockDiff
, 
m‘hodV®
;

631 
ŞdOff£t
, 
ÃwOff£t
;

632 
u1
* 
±r
;

640 ià(!
£lf
->
ıuClockBa£S‘
) {

641 
£lf
->
ıuClockBa£
 = 
	`g‘Clock
();

642 
£lf
->
ıuClockBa£S‘
 = 
Œue
;

651 
ŞdOff£t
 = 
¡©e
->
curOff£t
;

652 
ÃwOff£t
 = 
ŞdOff£t
 + 
TRACE_REC_SIZE
;

653 ià(
ÃwOff£t
 > 
¡©e
->
bufãrSize
) {

654 
¡©e
->
ov”æow
 = 
Œue
;

657 } !
	`ATOMIC_CMP_SWAP
(&
¡©e
->
curOff£t
, 
ŞdOff£t
, 
ÃwOff£t
));

661 
u8
 
now
 = 
	`g‘Clock
();

662 
şockDiff
 = (
u4
è(
now
 - 
£lf
->
ıuClockBa£
);

664 
m‘hodV®
 = 
	`METHOD_COMBINE
((
u4
è
m‘hod
, 
aùiÚ
);

669 
±r
 = 
¡©e
->
buf
 + 
ŞdOff£t
;

670 *
±r
++ = 
£lf
->
th»adId
;

671 *
±r
++ = (
u1
è
m‘hodV®
;

672 *
±r
++ = (
u1
è(
m‘hodV®
 >> 8);

673 *
±r
++ = (
u1
è(
m‘hodV®
 >> 16);

674 *
±r
++ = (
u1
è(
m‘hodV®
 >> 24);

675 *
±r
++ = (
u1
è
şockDiff
;

676 *
±r
++ = (
u1
è(
şockDiff
 >> 8);

677 *
±r
++ = (
u1
è(
şockDiff
 >> 16);

678 *
±r
++ = (
u1
è(
şockDiff
 >> 24);

679 
	}
}

685 
	$dvmEm™EmuÏtÜT¿û
(cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
)

687 #ifdeà
UPDATE_MAGIC_PAGE


698 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hod
))

701 
u4
* 
pMagic
 = (u4*è
gDvm
.
emuÏtÜT¿ûPage
;

702 
u4
 
addr
;

704 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

714 
aùiÚ
 += 4;

722 
addr
 = (
u4
è
m‘hod
->
ÇtiveFunc
;

736 
	`as£¹
(
m‘hod
->
š¢s
 !ğ
NULL
);

737 cÚ¡ 
DexO±H—d”
* 
pO±Hdr
 = 
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
->
pO±H—d”
;

738 
addr
 = (
u4
è
m‘hod
->
š¢s
 - 
pO±Hdr
->
dexOff£t
;

741 *(
pMagic
+
aùiÚ
èğ
addr
;

742 
	`LOGVV
("Set %p = 0x%08x (%s.%s)\n",

743 
pMagic
+
aùiÚ
, 
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

745 
	}
}

751 
	$dvmM‘hodT¿ûGCBegš
()

753 
	`TRACE_METHOD_ENTER
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿û
.
gcM‘hod
);

754 
	}
}

755 
	$dvmM‘hodT¿ûGCEnd
()

757 
	`TRACE_METHOD_EXIT
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿û
.
gcM‘hod
);

758 
	}
}

763 
	$dvmM‘hodT¿ûCÏssP»pBegš
()

765 
	`TRACE_METHOD_ENTER
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿û
.
şassP»pM‘hod
);

766 
	}
}

767 
	$dvmM‘hodT¿ûCÏssP»pEnd
()

769 
	`TRACE_METHOD_EXIT
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hodT¿û
.
şassP»pM‘hod
);

770 
	}
}

776 
	$dvmEmuÏtÜT¿ûS¹
()

779 ià(
gDvm
.
emuÏtÜT¿ûPage
 =ğ
NULL
)

782 
	`upd©eAùiveProf”s
(1);

785 
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
++;

786 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 == 1)

787 
	`LOGD
("---ƒmulator methodracesƒnabled\n");

788 
	}
}

793 
	$dvmEmuÏtÜT¿ûStİ
()

795 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 == 0) {

796 
	`LOGE
("ERROR:ƒmulatorracing‚otƒnabled\n");

799 
	`upd©eAùiveProf”s
(-1);

801 
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
--;

802 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 == 0)

803 
	`LOGD
("---ƒmulator methodraces disabled\n");

804 
	}
}

810 
	$dvmS¹In¡ruùiÚCouÁšg
()

812 
	`upd©eAùiveProf”s
(1);

814 
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
++;

815 
	}
}

820 
	$dvmStİIn¡ruùiÚCouÁšg
()

822 ià(
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 == 0) {

823 
	`LOGE
("ERROR: instruction counting‚otƒnabled\n");

824 
	`dvmAbÜt
();

826 
	`upd©eAùiveProf”s
(-1);

827 
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
--;

828 
	}
}

835 
	$dvmS¹AÎocCouÁšg
()

837 
gDvm
.
®locProf
.
’abËd
 = 
Œue
;

838 
	}
}

843 
	$dvmStİAÎocCouÁšg
()

845 
gDvm
.
®locProf
.
’abËd
 = 
çl£
;

846 
	}
}

	@Profile.h

20 #iâdeà
_DALVIK_PROFILE


21 
	#_DALVIK_PROFILE


	)

23 #iâdeà
NOT_VM


25 
	~<¡dio.h
>

30 
	#PROFILE_EXTERNAL_ALLOCATIONS
 1

	)

32 
	gTh»ad
;

36 
boŞ
 
dvmProfšgS¹up
();

37 
dvmProfšgShutdown
();

44 
	sM‘hodT¿ûS‹
 {

46 
M‘hod
* 
	mgcM‘hod
;

47 
M‘hod
* 
	mşassP»pM‘hod
;

50 
±h»ad_mu‹x_t
 
	m¡¬tStİLock
;

51 
±h»ad_cÚd_t
 
	mth»adEx™CÚd
;

52 
FILE
* 
	mŒaûFe
;

53 
	mbufãrSize
;

54 
	mæags
;

56 
boŞ
 
	mŒaûEÇbËd
;

57 
u1
* 
	mbuf
;

58 vŞ©
	mcurOff£t
;

59 
u8
 
	m¡¬tWh’
;

60 
	mov”æow
;

61 } 
	tM‘hodT¿ûS‹
;

69 
	sAÎocProfS‹
 {

70 
boŞ
 
	m’abËd
;

72 
	m®locCouÁ
;

73 
	m®locSize
;

75 
	mçedAÎocCouÁ
;

76 
	mçedAÎocSize
;

78 
	mä“CouÁ
;

79 
	mä“Size
;

81 
	mgcCouÁ
;

83 #ià
PROFILE_EXTERNAL_ALLOCATIONS


84 
	mex‹º®AÎocCouÁ
;

85 
	mex‹º®AÎocSize
;

87 
	mçedEx‹º®AÎocCouÁ
;

88 
	mçedEx‹º®AÎocSize
;

90 
	mex‹º®F»eCouÁ
;

91 
	mex‹º®F»eSize
;

93 } 
	tAÎocProfS‹
;

99 
dvmM‘hodT¿ûS¹
(cÚ¡ * 
ŒaûFeName
, 
ŒaûFd
, 
bufãrSize
,

100 
æags
);

101 
boŞ
 
dvmIsM‘hodT¿ûAùive
();

102 
dvmM‘hodT¿ûStİ
();

107 
dvmEmuÏtÜT¿ûS¹
();

108 
dvmEmuÏtÜT¿ûStİ
();

113 
dvmS¹In¡ruùiÚCouÁšg
();

114 
dvmStİIn¡ruùiÚCouÁšg
();

121 
	mTRACE_ALLOC_COUNTS
 = 0x01,

127 #ifdeà
WITH_PROFILER


128 
	#TRACE_METHOD_ENTER
(
_£lf
, 
_m‘hod
) \

130 ià(
gDvm
.
aùiveProf”s
 != 0) { \

131 ià(
gDvm
.
m‘hodT¿û
.
ŒaûEÇbËd
) \

132 
	`dvmM‘hodT¿ûAdd
(
_£lf
, 
_m‘hod
, 
METHOD_TRACE_ENTER
); \

133 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 != 0) \

134 
	`dvmEm™EmuÏtÜT¿û
(
_m‘hod
, 
METHOD_TRACE_ENTER
); \

136 } 0);

	)

137 
	#TRACE_METHOD_EXIT
(
_£lf
, 
_m‘hod
) \

139 ià(
gDvm
.
aùiveProf”s
 != 0) { \

140 ià(
gDvm
.
m‘hodT¿û
.
ŒaûEÇbËd
) \

141 
	`dvmM‘hodT¿ûAdd
(
_£lf
, 
_m‘hod
, 
METHOD_TRACE_EXIT
); \

142 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 != 0) \

143 
	`dvmEm™EmuÏtÜT¿û
(
_m‘hod
, 
METHOD_TRACE_EXIT
); \

145 } 0);

	)

146 
	#TRACE_METHOD_UNROLL
(
_£lf
, 
_m‘hod
) \

148 ià(
gDvm
.
aùiveProf”s
 != 0) { \

149 ià(
gDvm
.
m‘hodT¿û
.
ŒaûEÇbËd
) \

150 
	`dvmM‘hodT¿ûAdd
(
_£lf
, 
_m‘hod
, 
METHOD_TRACE_UNROLL
); \

151 ià(
gDvm
.
emuÏtÜT¿ûEÇbËCouÁ
 != 0) \

152 
	`dvmEm™EmuÏtÜT¿û
(
_m‘hod
, 
METHOD_TRACE_UNROLL
); \

154 } 0);

	)

156 
	#TRACE_METHOD_ENTER
(
_£lf
, 
_m‘hod
è((è0)

	)

157 
	#TRACE_METHOD_EXIT
(
_£lf
, 
_m‘hod
è((è0)

	)

158 
	#TRACE_METHOD_UNROLL
(
_£lf
, 
_m‘hod
è((è0)

	)

161 
dvmM‘hodT¿ûAdd
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
);

162 
dvmEm™EmuÏtÜT¿û
(cÚ¡ 
M‘hod
* 
m‘hod
, 
aùiÚ
);

164 
dvmM‘hodT¿ûGCBegš
();

165 
dvmM‘hodT¿ûGCEnd
();

166 
dvmM‘hodT¿ûCÏssP»pBegš
();

167 
dvmM‘hodT¿ûCÏssP»pEnd
();

172 
dvmS¹AÎocCouÁšg
();

173 
dvmStİAÎocCouÁšg
();

182 
	mMETHOD_TRACE_ENTER
 = 0x00,

183 
	mMETHOD_TRACE_EXIT
 = 0x01,

184 
	mMETHOD_TRACE_UNROLL
 = 0x02,

188 
	#TOKEN_CHAR
 '*'

	)

189 
	#TRACE_VERSION
 1

	)

194 
	#METHOD_ACTION_MASK
 0x03

	)

195 
	#METHOD_ID
(
_m‘hod
è((_m‘hodè& (~
METHOD_ACTION_MASK
))

	)

196 
	#METHOD_ACTION
(
_m‘hod
è((()(_m‘hod)è& 
METHOD_ACTION_MASK
)

	)

197 
	#METHOD_COMBINE
(
_m‘hod
, 
_aùiÚ
è((_m‘hodè| (_aùiÚ))

	)

	@Properties.c

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

22 
	~<sys/ut¢ame.h
>

23 
	~<lim™s.h
>

24 
	~<uni¡d.h
>

29 
boŞ
 
	$dvmPrİ”t›sS¹up
(
maxPrİs
)

31 
gDvm
.
maxPrİs
 = maxProps;

32 ià(
maxPrİs
 > 0) {

33 
gDvm
.
´İLi¡
 = (**è
	`m®loc
(
maxPrİs
 * (*));

34 ià(
gDvm
.
´İLi¡
 =ğ
NULL
)

35  
çl£
;

37 
gDvm
.
numPrİs
 = 0;

39  
Œue
;

40 
	}
}

45 
	$dvmPrİ”t›sShutdown
()

47 
i
;

49 
i
 = 0; i < 
gDvm
.
numPrİs
; i++)

50 
	`ä“
(
gDvm
.
´İLi¡
[
i
]);

51 
	`ä“
(
gDvm
.
´İLi¡
);

52 
gDvm
.
´İLi¡
 = 
NULL
;

53 
	}
}

61 
boŞ
 
	$dvmAddCommªdLšePrİ”ty
(cÚ¡ * 
¬gSŒ
)

63 * 
mªgË
;

64 * 
equ®s
;

66 
mªgË
 = 
	`¡rdup
(
¬gSŒ
);

67 
equ®s
 = 
	`¡rchr
(
mªgË
, '=');

68 ià(
equ®s
 =ğ
NULL
 ||ƒqu® =ğ
mªgË
) {

69 
	`ä“
(
mªgË
);

70  
çl£
;

72 *
equ®s
 = '\0';

74 
	`as£¹
(
gDvm
.
numPrİs
 < gDvm.
maxPrİs
);

75 
gDvm
.
´İLi¡
[gDvm.
numPrİs
++] = 
mªgË
;

77  
Œue
;

78 
	}
}

86 
M‘hod
* 
	$g‘Put
(
CÏssObjeù
* 
şazz
)

88 
M‘hod
* 
put
;

90 
put
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
şazz
, "setProperty",

92 ià(
put
 =ğ
NULL
) {

93 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

97  
put
;

98 
	}
}

103 
	$£tPrİ”ty
(
Objeù
* 
´İObj
, 
M‘hod
* 
put
, cÚ¡ * 
key
,

104 cÚ¡ * 
v®ue
)

106 
SŒšgObjeù
* 
keySŒ
;

107 
SŒšgObjeù
* 
v®ueSŒ
;

109 ià(
v®ue
 =ğ
NULL
) {

111 
v®ue
 = "";

114 
keySŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
key
, 
ALLOC_DEFAULT
);

115 
v®ueSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
v®ue
, 
ALLOC_DEFAULT
);

116 ià(
keySŒ
 =ğ
NULL
 || 
v®ueSŒ
 == NULL) {

117 
	`LOGW
("setProperty string creation failed\n");

118 
ba
;

121 
JV®ue
 
unu£d
;

122 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
put
, 
´İObj
, &
unu£d
, 
keySŒ
, 
v®ueSŒ
);

124 
ba
:

125 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
keySŒ
, 
NULL
);

126 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
v®ueSŒ
, 
NULL
);

127 
	}
}

135 
	$dvmC»©eDeçuÉPrİ”t›s
(
Objeù
* 
´İObj
)

137 
M‘hod
* 
put
 = 
	`g‘Put
(
´İObj
->
şazz
);

139 ià(
put
 =ğ
NULL
)

142 
ut¢ame
 
šfo
;

143 
	`uÇme
(&
šfo
);

146 cÚ¡ *
´ojeùU¾
 = "http://www.android.com/";

147 cÚ¡ *
´ojeùName
 = "The Android Project";

153 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.boÙ.şass.·th", 
gDvm
.
boÙCÏssP©hSŒ
);

154 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.şass.·th", 
gDvm
.
şassP©hSŒ
);

155 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.class.version", "46.0");

156 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.compiler", "");

157 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.ext.dirs", "");

159 ià(
	`g‘’v
("JAVA_HOME"è!ğ
NULL
) {

160 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.home", 
	`g‘’v
("JAVA_HOME"));

162 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.home", "/system");

165 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.io.tmpdir", "/tmp");

166 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.lib¿ry.·th", 
	`g‘’v
("LD_LIBRARY_PATH"));

168 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.net.preferIPv6Addresses", "true");

170 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.v’dÜ", 
´ojeùName
);

171 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.v’dÜ.u¾", 
´ojeùU¾
);

172 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.version", "0");

173 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.name", "Dalvik");

174 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.specification.name",

176 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.¥ecifiÿtiÚ.v’dÜ", 
´ojeùName
);

177 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.specification.version", "0.9");

178 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.v’dÜ", 
´ojeùName
);

180 
tmpBuf
[64];

181 
	`¥rštf
(
tmpBuf
, "%d.%d.%d",

182 
DALVIK_MAJOR_VERSION
, 
DALVIK_MINOR_VERSION
, 
DALVIK_BUG_VERSION
);

183 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.v”siÚ", 
tmpBuf
);

185 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.specification.name",

187 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.¥ecifiÿtiÚ.v’dÜ", 
´ojeùName
);

188 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.specification.version", "0.9");

190 
	`£tPrİ”ty
(
´İObj
, 
put
, "os.¬ch", 
šfo
.
machše
);

191 
	`£tPrİ”ty
(
´İObj
, 
put
, "os.Çme", 
šfo
.
sy¢ame
);

192 
	`£tPrİ”ty
(
´İObj
, 
put
, "os.v”siÚ", 
šfo
.
»Ëa£
);

193 
	`£tPrİ”ty
(
´İObj
, 
put
, "u£r.home", 
	`g‘’v
("HOME"));

194 
	`£tPrİ”ty
(
´İObj
, 
put
, "u£r.Çme", 
	`g‘’v
("USER"));

196 
·th
[
PATH_MAX
];

197 
	`£tPrİ”ty
(
´İObj
, 
put
, "u£r.dœ", 
	`g‘cwd
(
·th
, (path)));

199 
	`£tPrİ”ty
(
´İObj
, 
put
, "file.separator", "/");

200 
	`£tPrİ”ty
(
´İObj
, 
put
, "line.separator", "\n");

201 
	`£tPrİ”ty
(
´İObj
, 
put
, "path.separator", ":");

206 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.runtime.name", "Android Runtime");

207 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.runtime.version", "0.9");

208 
	`£tPrİ”ty
(
´İObj
, 
put
, "java.vm.v’dÜ.u¾", 
´ojeùU¾
);

210 
	`£tPrİ”ty
(
´İObj
, 
put
, "file.encoding", "UTF-8");

211 
	`£tPrİ”ty
(
´İObj
, 
put
, "user.language", "en");

212 
	`£tPrİ”ty
(
´İObj
, 
put
, "user.region", "US");

217 
	`£tPrİ”ty
(
´İObj
, 
put
, "android.vm.dexfile", "true");

218 
	}
}

223 
	$dvmS‘CommªdLšePrİ”t›s
(
Objeù
* 
´İObj
)

225 
M‘hod
* 
put
 = 
	`g‘Put
(
´İObj
->
şazz
);

226 
i
;

228 ià(
put
 =ğ
NULL
)

231 
i
 = 0; i < 
gDvm
.
numPrİs
; i++) {

232 cÚ¡ * 
v®ue
;

235 
v®ue
 = 
gDvm
.
´İLi¡
[
i
]; *value != '\0'; value++)

237 
	`£tPrİ”ty
(
´İObj
, 
put
, 
gDvm
.
´İLi¡
[
i
], 
v®ue
+1);

239 
	}
}

247 * 
	$dvmG‘Prİ”ty
(cÚ¡ * 
key
)

249 
CÏssObjeù
* 
sy¡em
;

250 
M‘hod
* 
g‘Prİ
;

251 
SŒšgObjeù
* 
keyObj
 = 
NULL
;

252 
SŒšgObjeù
* 
v®ueObj
;

253 * 
»suÉ
 = 
NULL
;

255 
	`as£¹
(
key
 !ğ
NULL
);

257 
sy¡em
 = 
	`dvmFšdSy¡emCÏss
("Ljava/lang/System;");

258 ià(
sy¡em
 =ğ
NULL
)

259 
ba
;

261 
g‘Prİ
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
sy¡em
, "getProperty",

263 ià(
g‘Prİ
 =ğ
NULL
) {

264 
	`LOGW
("Could‚ot find getProperty(String) in java.lang.System\n");

265 
ba
;

268 
keyObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
key
, 
ALLOC_DEFAULT
);

269 ià(
keyObj
 =ğ
NULL
)

270 
ba
;

272 
JV®ue
 
v®
;

273 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
g‘Prİ
, 
NULL
, &
v®
, 
keyObj
);

274 
v®ueObj
 = (
SŒšgObjeù
*è
v®
.
l
;

275 ià(
v®ueObj
 =ğ
NULL
)

276 
ba
;

278 
»suÉ
 = 
	`dvmC»©eC¡rFromSŒšg
(
v®ueObj
);

281 
ba
:

282 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
keyObj
, 
NULL
);

283  
»suÉ
;

284 
	}
}

	@Properties.h

19 #iâdeà
_DALVIK_PROPERTIES


20 
	#_DALVIK_PROPERTIES


	)

25 
boŞ
 
dvmPrİ”t›sS¹up
(
maxPrİs
);

26 
dvmPrİ”t›sShutdown
();

29 
boŞ
 
dvmAddCommªdLšePrİ”ty
(cÚ¡ * 
¬gSŒ
);

32 
dvmC»©eDeçuÉPrİ”t›s
(
Objeù
* 
´İObj
);

33 
dvmS‘CommªdLšePrİ”t›s
(
Objeù
* 
´İObj
);

35 * 
dvmG‘Prİ”ty
(cÚ¡ * 
key
);

	@RawDexFile.c

19 
	~"D®vik.h
"

25 
	$dvmRawDexFeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

26 
RawDexFe
** 
µRawDexFe
, 
boŞ
 
isBoÙ¡¿p
)

30 
	}
}

35 
	$dvmRawDexFeF»e
(
RawDexFe
* 
pRawDexFe
)

37 ià(
pRawDexFe
 =ğ
NULL
)

40 
	`dvmDexFeF»e
(
pRawDexFe
->
pDvmDex
);

41 
	`ä“
(
pRawDexFe
->
ÿcheFeName
);

42 
	`ä“
(
pRawDexFe
);

43 
	}
}

	@RawDexFile.h

21 #iâdeà
_DALVIK_RAWDEXFILE


22 
	#_DALVIK_RAWDEXFILE


	)

28 
	sRawDexFe
 {

29 * 
	mÿcheFeName
;

30 
DvmDex
* 
	mpDvmDex
;

31 } 
	tRawDexFe
;

39 
dvmRawDexFeO³n
(cÚ¡ * 
feName
, cÚ¡ * 
odexOuutName
,

40 
RawDexFe
** 
µDexFe
, 
boŞ
 
isBoÙ¡¿p
);

45 
dvmRawDexFeF»e
(
RawDexFe
* 
pRawDexFe
);

50 
INLINE
 
DvmDex
* 
	$dvmG‘RawDexFeDex
(
RawDexFe
* 
pRawDexFe
) {

51  
pRawDexFe
->
pDvmDex
;

52 
	}
}

55 
INLINE
 cÚ¡ * 
	$dvmG‘RawDexFeCacheFeName
(
RawDexFe
* 
pRawDexFe
) {

56  
pRawDexFe
->
ÿcheFeName
;

57 
	}
}

	@ReferenceTable.c

20 
	~"D®vik.h
"

25 
boŞ
 
	$dvmIn™Reã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
š™ŸlCouÁ
,

26 
maxCouÁ
)

28 
	`as£¹
(
š™ŸlCouÁ
 > 0);

29 
	`as£¹
(
š™ŸlCouÁ
 <ğ
maxCouÁ
);

31 
pRef
->
bË
 = (
Objeù
**è
	`m®loc
(
š™ŸlCouÁ
 * (Object*));

32 ià(
pRef
->
bË
 =ğ
NULL
)

33  
çl£
;

34 #iâdeà
NDEBUG


35 
	`mem£t
(
pRef
->
bË
, 0xdd, 
š™ŸlCouÁ
 * (
Objeù
*));

37 
pRef
->
ÃxtEÁry
 =…Ref->
bË
;

38 
pRef
->
®locEÁr›s
 = 
š™ŸlCouÁ
;

39 
pRef
->
maxEÁr›s
 = 
maxCouÁ
;

41  
Œue
;

42 
	}
}

47 
	$dvmCË¬Reã»nûTabË
(
Reã»nûTabË
* 
pRef
)

49 
	`ä“
(
pRef
->
bË
);

50 
pRef
->
bË
 =…Ref->
ÃxtEÁry
 = 
NULL
;

51 
pRef
->
®locEÁr›s
 =…Ref->
maxEÁr›s
 = -1;

52 
	}
}

57 
boŞ
 
	$dvmAddToReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
* 
obj
)

59 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

60 
	`as£¹
(
obj
 !ğ
NULL
);

61 
	`as£¹
(
pRef
->
bË
 !ğ
NULL
);

62 
	`as£¹
(
pRef
->
®locEÁr›s
 <ğpRef->
maxEÁr›s
);

64 ià(
pRef
->
ÃxtEÁry
 =ğpRef->
bË
 +…Ref->
®locEÁr›s
) {

66 ià(
pRef
->
ÃxtEÁry
 =ğpRef->
bË
 +…Ref->
maxEÁr›s
) {

67 
	`LOGW
("Reã»nûTabË ov”æow (max=%d)\n", 
pRef
->
maxEÁr›s
);

68  
çl£
;

71 
Objeù
** 
ÃwTabË
;

72 
ÃwSize
;

74 
ÃwSize
 = 
pRef
->
®locEÁr›s
 * 2;

75 ià(
ÃwSize
 > 
pRef
->
maxEÁr›s
)

76 
ÃwSize
 = 
pRef
->
maxEÁr›s
;

77 
	`as£¹
(
ÃwSize
 > 
pRef
->
®locEÁr›s
);

79 
ÃwTabË
 = (
Objeù
**è
	`»®loc
(
pRef
->
bË
, 
ÃwSize
 * (Object*));

80 ià(
ÃwTabË
 =ğ
NULL
) {

81 
	`LOGE
("Unableoƒxpand„efable (from %do %d %d-byteƒntries)\n",

82 
pRef
->
®locEÁr›s
, 
ÃwSize
, (
Objeù
*));

83  
çl£
;

85 
	`LOGVV
("Growšg %°äom %dØ%d\n", 
pRef
,…Ref->
®locEÁr›s
, 
ÃwSize
);

88 
pRef
->
ÃxtEÁry
 = 
ÃwTabË
 + (pRef->ÃxtEÁry -…Ref->
bË
);

89 
pRef
->
bË
 = 
ÃwTabË
;

90 
pRef
->
®locEÁr›s
 = 
ÃwSize
;

93 *
pRef
->
ÃxtEÁry
++ = 
obj
;

94  
Œue
;

95 
	}
}

100 
Objeù
** 
	$dvmFšdInReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, 
Objeù
** 
bÙtom
,

101 
Objeù
* 
obj
)

103 
Objeù
** 
±r
;

105 
±r
 = 
pRef
->
ÃxtEÁry
;

106 --
±r
 >ğ
bÙtom
) {

107 ià(*
±r
 =ğ
obj
)

108  
±r
;

110  
NULL
;

111 
	}
}

121 
boŞ
 
	$dvmRemoveFromReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
** 
bÙtom
,

122 
Objeù
* 
obj
)

124 
Objeù
** 
±r
;

126 
	`as£¹
(
pRef
->
bË
 !ğ
NULL
);

132 
±r
 = 
	`dvmFšdInReã»nûTabË
(
pRef
, 
bÙtom
, 
obj
);

133 ià(
±r
 =ğ
NULL
)

134  
çl£
;

139 
pRef
->
ÃxtEÁry
--;

140 
moveCouÁ
 = 
pRef
->
ÃxtEÁry
 - 
±r
;

141 ià(
moveCouÁ
 != 0) {

143 
	`memmove
(
±r
,…Œ+1, 
moveCouÁ
 * (
Objeù
*));

150  
Œue
;

151 
	}
}

157 
	$com·»Objeù
(cÚ¡ * 
vobj1
, cÚ¡ * 
vobj2
)

159 
Objeù
* 
obj1
 = *((Objeù**è
vobj1
);

160 
Objeù
* 
obj2
 = *((Objeù**è
vobj2
);

162 ià(
obj1
 =ğ
NULL
 || 
obj2
 == NULL)

163  (
u1
*)
obj1
 - (u1*)
obj2
;

165 ià(
obj1
->
şazz
 !ğ
obj2
->clazz) {

166  (
u1
*)
obj1
->
şazz
 - (u1*)
obj2
->clazz;

168 
size1
 = 
	`dvmObjeùSizeInH—p
(
obj1
);

169 
size2
 = 
	`dvmObjeùSizeInH—p
(
obj2
);

170 ià(
size1
 !ğ
size2
) {

171  
size1
 - 
size2
;

173  (
u1
*)
obj1
 - (u1*)
obj2
;

176 
	}
}

184 
	$logObjeù
(
Objeù
* 
obj
, 
size
, 
id’tiÿl
, 
equiv
)

186 ià(
obj
 =ğ
NULL
) {

187 
	`LOGW
(" NULL„eã»nû (couÁ=%d)\n", 
equiv
);

191 ià(
id’tiÿl
 + 
equiv
 != 0) {

192 
	`LOGW
("%5d oà% %dB (%d unique)\n", 
id’tiÿl
 + 
equiv
 +1,

193 
obj
->
şazz
->
desütÜ
, 
size
, 
equiv
 +1);

195 
	`LOGW
("%5d oà% %dB\n", 
id’tiÿl
 + 
equiv
 +1,

196 
obj
->
şazz
->
desütÜ
, 
size
);

198 
	}
}

208 
	$dvmDumpReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, cÚ¡ * 
desü
)

210 cÚ¡ 
kLa¡
 = 10;

211 
couÁ
 = 
	`dvmReã»nûTabËEÁr›s
(
pRef
);

212 
Objeù
** 
»fs
;

213 
i
;

215 ià(
couÁ
 == 0) {

216 
	`LOGW
("Referenceable has‚oƒntries\n");

219 
	`as£¹
(
couÁ
 > 0);

224 
	`LOGW
("La¡ %dƒÁr› š % »ã»nûabË:\n", 
kLa¡
, 
desü
);

225 
»fs
 = 
pRef
->
bË
;

226 
size
;

227 
¡¬t
 = 
couÁ
 - 
kLa¡
;

228 ià(
¡¬t
 < 0)

229 
¡¬t
 = 0;

231 
i
 = 
¡¬t
; i < 
couÁ
; i++) {

232 
size
 = (
»fs
[
i
] =ğ
NULL
è? 0 : 
	`dvmObjeùSizeInH—p
(refs[i]);

233 
Objeù
* 
»f
 = 
»fs
[
i
];

234 ià(
»f
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

235 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
»f
;

236 
	`LOGW
("%5d: %°şs=% '%s' (%d by‹s)\n", 
i
, 
»f
,

237 (
»fs
[
i
] =ğ
NULL
è? "-" : 
»f
->
şazz
->
desütÜ
,

238 
şazz
->
desütÜ
, 
size
);

240 
	`LOGW
("%5d: %°şs=% (%d by‹s)\n", 
i
, 
»f
,

241 (
»fs
[
i
] =ğ
NULL
è? "-" : 
»f
->
şazz
->
desütÜ
, 
size
);

248 
Objeù
** 
bËCİy
 = (Objeù**)
	`m®loc
((Objeù*è* 
couÁ
);

249 
	`memıy
(
bËCİy
, 
pRef
->
bË
, (
Objeù
*è* 
couÁ
);

250 
	`qsÜt
(
bËCİy
, 
couÁ
, (
Objeù
*), 
com·»Objeù
);

251 
»fs
 = 
bËCİy
;

257 
	`LOGW
("% »ã»nûabË summ¬y (%dƒÁr›s):\n", 
desü
, 
couÁ
);

258 
equiv
, 
id’tiÿl
, 
tÙ®
;

259 
tÙ®
 = 
equiv
 = 
id’tiÿl
 = 0;

260 
i
 = 1; i < 
couÁ
; i++) {

261 
size
 = (
»fs
[
i
-1] =ğ
NULL
è? 0 : 
	`dvmObjeùSizeInH—p
(refs[i-1]);

263 ià(
»fs
[
i
] ==„efs[i-1]) {

265 
id’tiÿl
++;

266 } ià(
»fs
[
i
]->
şazz
 ==„efs[i-1]->clazz &&

267 (è
	`dvmObjeùSizeInH—p
(
»fs
[
i
]è=ğ
size
)

270 
tÙ®
 +ğ
size
;

271 
equiv
++;

274 
tÙ®
 +ğ
size
;

275 
	`logObjeù
(
»fs
[
i
-1], 
size
, 
id’tiÿl
, 
equiv
);

276 
equiv
 = 
id’tiÿl
 = 0;

281 
size
 = (
»fs
[
couÁ
-1] =ğ
NULL
è? 0 : 
	`dvmObjeùSizeInH—p
(refs[count-1]);

282 
tÙ®
 +ğ
size
;

283 
	`logObjeù
(
»fs
[
couÁ
-1], 
size
, 
id’tiÿl
, 
equiv
);

285 
	`LOGW
("MemÜy h–d dœeùly by‚©ivcodi %d by‹s\n", 
tÙ®
);

286 
	`ä“
(
bËCİy
);

287 
	}
}

	@ReferenceTable.h

23 #iâdeà
_DALVIK_REFERENCETABLE


24 
	#_DALVIK_REFERENCETABLE


	)

39 
	sReã»nûTabË
 {

40 
Objeù
** 
	mÃxtEÁry
;

41 
Objeù
** 
	mbË
;

43 
	m®locEÁr›s
;

44 
	mmaxEÁr›s
;

45 } 
	tReã»nûTabË
;

54 
boŞ
 
dvmIn™Reã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
š™ŸlCouÁ
,

55 
maxCouÁ
);

63 
dvmCË¬Reã»nûTabË
(
Reã»nûTabË
* 
pRef
);

68 
INLINE
 
size_t
 
	$dvmReã»nûTabËEÁr›s
(cÚ¡ 
Reã»nûTabË
* 
pRef
)

70  
pRef
->
ÃxtEÁry
 -…Ref->
bË
;

71 
	}
}

77 
INLINE
 
size_t
 
	$dvmIsReã»nûTabËFuÎ
(cÚ¡ 
Reã»nûTabË
* 
pRef
)

79  
	`dvmReã»nûTabËEÁr›s
(
pRef
è=ğ(
size_t
íRef->
®locEÁr›s
;

80 
	}
}

89 
boŞ
 
dvmAddToReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
* 
obj
);

98 
Objeù
** 
dvmFšdInReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, Objeù** 
bÙtom
,

99 
Objeù
* 
obj
);

109 
boŞ
 
dvmRemoveFromReã»nûTabË
(
Reã»nûTabË
* 
pRef
, 
Objeù
** 
bÙtom
,

110 
Objeù
* 
obj
);

115 
dvmDumpReã»nûTabË
(cÚ¡ 
Reã»nûTabË
* 
pRef
, cÚ¡ * 
desü
);

	@SignalCatcher.c

21 
	~"D®vik.h
"

23 
	~<¡dlib.h
>

24 
	~<uni¡d.h
>

25 
	~<sigÇl.h
>

26 
	~<±h»ad.h
>

27 
	~<sys/fe.h
>

28 
	~<sys/time.h
>

29 
	~<fú.h
>

30 
	~<”ºo.h
>

32 * 
sigÇlC©ch”Th»adS¹
(* 
¬g
);

39 
boŞ
 
	$dvmSigÇlC©ch”S¹up
()

41 
gDvm
.
h®tSigÇlC©ch”
 = 
çl£
;

43 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvm
.
sigÇlC©ch”HªdË
,

44 "SigÇÈC©ch”", 
sigÇlC©ch”Th»adS¹
, 
NULL
))

45  
çl£
;

47  
Œue
;

48 
	}
}

56 
	$dvmSigÇlC©ch”Shutdown
()

58 
gDvm
.
h®tSigÇlC©ch”
 = 
Œue
;

59 ià(
gDvm
.
sigÇlC©ch”HªdË
 == 0)

62 
	`±h»ad_kl
(
gDvm
.
sigÇlC©ch”HªdË
, 
SIGQUIT
);

64 
	`±h»ad_još
(
gDvm
.
sigÇlC©ch”HªdË
, 
NULL
);

65 
	`LOGV
("signal catcher has shut down\n");

66 
	}
}

72 
	$´štProûssName
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
)

74 
fd
 = -1;

76 
fd
 = 
	`İ’
("/´oc/£lf/cmdlše", 
O_RDONLY
, 0);

77 ià(
fd
 < 0)

78 
ba
;

80 
tmpBuf
[256];

81 
ssize_t
 
aùu®
;

83 
aùu®
 = 
	`»ad
(
fd
, 
tmpBuf
, (tmpBuf)-1);

84 ià(
aùu®
 <= 0)

85 
ba
;

87 
tmpBuf
[
aùu®
] = '\0';

88 
	`dvmPrštDebugMes§ge
(
rg‘
, "Cmd†še: %s\n", 
tmpBuf
);

90 
ba
:

91 ià(
fd
 >= 0)

92 
	`şo£
(
fd
);

93 
	}
}

99 
	$logTh»adScks
()

101 
DebugOuutT¬g‘
 
rg‘
;

103 ià(
gDvm
.
¡ackT¿ûFe
 =ğ
NULL
) {

105 
	`dvmC»©eLogOuutT¬g‘
(&
rg‘
, 
ANDROID_LOG_INFO
, 
LOG_TAG
);

106 
	`dvmDumpAÎTh»adsEx
(&
rg‘
, 
Œue
);

108 
FILE
* 
å
 = 
NULL
;

109 
cc
, 
fd
;

115 
fd
 = 
	`İ’
(
gDvm
.
¡ackT¿ûFe
, 
O_WRONLY
 | 
O_APPEND
 | 
O_CREAT
, 0666);

116 ià(
fd
 < 0) {

117 
	`LOGE
("Unableo open stackrace file '%s': %s\n",

118 
gDvm
.
¡ackT¿ûFe
, 
	`¡»¼Ü
(
”ºo
));

123 
cc
 = 
	`æock
(
fd
, 
LOCK_EX
 | 
LOCK_UN
);

124 ià(
cc
 != 0) {

125 
	`LOGV
("SË•šg oÀæock(%s)\n", 
gDvm
.
¡ackT¿ûFe
);

126 
cc
 = 
	`æock
(
fd
, 
LOCK_EX
);

128 ià(
cc
 != 0) {

129 
	`LOGE
("Unableo†ock stackrace file '%s': %s\n",

130 
gDvm
.
¡ackT¿ûFe
, 
	`¡»¼Ü
(
”ºo
));

131 
	`şo£
(
fd
);

135 
å
 = 
	`fdİ’
(
fd
, "a");

136 ià(
å
 =ğ
NULL
) {

137 
	`LOGE
("Unableo fdopen '%s' (%d): %s\n",

138 
gDvm
.
¡ackT¿ûFe
, 
fd
, 
	`¡»¼Ü
(
”ºo
));

139 
	`æock
(
fd
, 
LOCK_UN
);

140 
	`şo£
(
fd
);

144 
	`dvmC»©eFeOuutT¬g‘
(&
rg‘
, 
å
);

146 
pid_t
 
pid
 = 
	`g‘pid
();

147 
time_t
 
now
 = 
	`time
(
NULL
);

148 
tm
* 
±m
;

149 #ifdeà
HAVE_LOCALTIME_R


150 
tm
 
tmbuf
;

151 
±m
 = 
	`loÿÉime_r
(&
now
, &
tmbuf
);

153 
±m
 = 
	`loÿÉime
(&
now
);

155 
	`dvmPrštDebugMes§ge
(&
rg‘
,

157 
pid
, 
±m
->
tm_y—r
 + 1900,…tm->
tm_mÚ
+1,…tm->
tm_mday
,

158 
±m
->
tm_hour
,…tm->
tm_mš
,…tm->
tm_£c
);

159 
	`´štProûssName
(&
rg‘
);

160 
	`dvmPrštDebugMes§ge
(&
rg‘
, "\n");

161 
	`fæush
(
å
);

162 
	`dvmDumpAÎTh»adsEx
(&
rg‘
, 
Œue
);

163 
	`årštf
(
å
, "-----ƒnd %d -----\n", 
pid
);

169 
	`fæush
(
å
);

170 
	`æock
(
fd
, 
LOCK_UN
);

171 
	`fşo£
(
å
);

173 
	`LOGI
("WrÙ¡ack¿ûØ'%s'\n", 
gDvm
.
¡ackT¿ûFe
);

175 
	}
}

181 * 
	$sigÇlC©ch”Th»adS¹
(* 
¬g
)

183 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

184 
sig£t_t
 
mask
;

185 
cc
;

187 
	`UNUSED_PARAMETER
(
¬g
);

189 
	`LOGV
("SigÇÈÿtch”h»ad s¹ed (th»adid=%d)\n", 
£lf
->
th»adId
);

192 
	`sigem±y£t
(&
mask
);

193 
	`sigadd£t
(&
mask
, 
SIGQUIT
);

194 
	`sigadd£t
(&
mask
, 
SIGUSR1
);

195 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

196 
	`sigadd£t
(&
mask
, 
SIGUSR2
);

199 
Œue
) {

200 
rcvd
;

202 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

216 
loİ
:

217 
cc
 = 
	`sigwa™
(&
mask
, &
rcvd
);

218 ià(
cc
 != 0) {

219 ià(
cc
 =ğ
EINTR
) {

221 
loİ
;

223 
	`as£¹
(!"bad„esult from sigwait");

226 ià(!
gDvm
.
h®tSigÇlC©ch”
) {

227 
	`LOGI
("threadid=%d:„eactingo signal %d\n",

228 
	`dvmTh»adS–f
()->
th»adId
, 
rcvd
);

232 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

234 ià(
gDvm
.
h®tSigÇlC©ch”
)

237 ià(
rcvd
 =ğ
SIGQUIT
) {

238 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_STACK_DUMP
);

239 
	`dvmDumpLßd”Sts
("sig");

241 
	`logTh»adScks
();

243 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

244 
	`dvmComp”DumpSts
();

247 ià(
çl£
) {

248 
	`dvmLockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

250 
	`dvmUÆockMu‹x
(&
gDvm
.
jniGlob®RefLock
);

254 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_STACK_DUMP
);

255 } ià(
rcvd
 =ğ
SIGUSR1
) {

256 #ià
WITH_HPROF


257 
	`LOGI
("SIGUSR1 forcing GC‡nd HPROF dump\n");

258 
	`h´ofDumpH—p
(
NULL
);

260 
	`LOGI
("SIGUSR1 forcing GC (no HPROF)\n");

261 
	`dvmCŞËùG¬bage
(
çl£
);

263 #ià
	`defšed
(
WITH_JIT
è&& defšed(
WITH_JIT_TUNING
)

264 } ià(
rcvd
 =ğ
SIGUSR2
) {

265 
gDvmJ™
.
´štMe
 ^ğ
Œue
;

266 
	`dvmComp”DumpSts
();

268 
	`dvmJ™UnchašAÎ
();

271 
	`LOGE
("uÃx³ùed sigÇÈ%d\n", 
rcvd
);

275  
NULL
;

276 
	}
}

	@SignalCatcher.h

19 #iâdeà
_DALVIK_SIGNALCATCHER


20 
	#_DALVIK_SIGNALCATCHER


	)

22 
boŞ
 
dvmSigÇlC©ch”S¹up
();

23 
dvmSigÇlC©ch”Shutdown
();

	@StdioConverter.c

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

23 
	~<uni¡d.h
>

24 
	~<fú.h
>

25 
	~<”ºo.h
>

27 
	#kF’oStdout
 1

	)

28 
	#kF’oStd”r
 2

	)

33 
	sStdPes
 {

34 
	m¡doutPe
[2];

35 
	m¡d”rPe
[2];

36 } 
	tStdPes
;

38 
	#kMaxLše
 512

	)

43 
	sBufã»dD©a
 {

44 
	mbuf
[
kMaxLše
+1];

45 
	mcouÁ
;

46 } 
	tBufã»dD©a
;

49 * 
¡dioCÚv”‹rTh»adS¹
(* 
¬g
);

50 
boŞ
 
»adAndLog
(
fd
, 
Bufã»dD©a
* 
d©a
, cÚ¡ * 
g
);

58 
boŞ
 
	$dvmStdioCÚv”‹rS¹up
()

60 
StdPes
* 
peStÜage
;

62 
gDvm
.
h®tStdioCÚv”‹r
 = 
çl£
;

64 
	`dvmIn™Mu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

65 
	`±h»ad_cÚd_š™
(&
gDvm
.
¡dioCÚv”‹rCÚd
, 
NULL
);

67 
peStÜage
 = (
StdPes
*è
	`m®loc
((StdPipes));

68 ià(
peStÜage
 =ğ
NULL
)

69  
çl£
;

71 ià(
	`pe
(
peStÜage
->
¡doutPe
) != 0) {

72 
	`LOGW
("pçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

73  
çl£
;

75 ià(
	`pe
(
peStÜage
->
¡d”rPe
) != 0) {

76 
	`LOGW
("pçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

77  
çl£
;

80 ià(
	`dup2
(
peStÜage
->
¡doutPe
[1], 
kF’oStdout
) != kFilenoStdout) {

81 
	`LOGW
("dup2(1èçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

82  
çl£
;

84 
	`şo£
(
peStÜage
->
¡doutPe
[1]);

85 
peStÜage
->
¡doutPe
[1] = -1;

86 #ifdeà
HAVE_ANDROID_OS


89 ià(
	`dup2
(
peStÜage
->
¡d”rPe
[1], 
kF’oStd”r
) != kFilenoStderr) {

90 
	`LOGW
("dup2(2èçed: %d %s\n", 
”ºo
, 
	`¡»¼Ü
(errno));

91  
çl£
;

93 
	`şo£
(
peStÜage
->
¡d”rPe
[1]);

94 
peStÜage
->
¡d”rPe
[1] = -1;

101 
	`dvmLockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

103 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvm
.
¡dioCÚv”‹rHªdË
,

104 "StdiØCÚv”‹r", 
¡dioCÚv”‹rTh»adS¹
, 
peStÜage
))

106 
	`ä“
(
peStÜage
);

107  
çl£
;

111 !
gDvm
.
¡dioCÚv”‹rR—dy
) {

112 
cc
 = 
	`±h»ad_cÚd_wa™
(&
gDvm
.
¡dioCÚv”‹rCÚd
,

113 &
gDvm
.
¡dioCÚv”‹rLock
);

114 
	`as£¹
(
cc
 == 0);

116 
	`dvmUÆockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

118  
Œue
;

119 
	}
}

127 
	$dvmStdioCÚv”‹rShutdown
()

129 
gDvm
.
h®tStdioCÚv”‹r
 = 
Œue
;

130 ià(
gDvm
.
¡dioCÚv”‹rHªdË
 == 0)

134 
	`´štf
("Shutting down\n");

135 
	`fæush
(
¡dout
);

137 
	`LOGD
("Joining stdio converter...\n");

138 
	`±h»ad_još
(
gDvm
.
¡dioCÚv”‹rHªdË
, 
NULL
);

139 
	}
}

146 * 
	$¡dioCÚv”‹rTh»adS¹
(* 
¬g
)

148 
	#MAX
(
a
,
b
è(×è> (bè? (aè: (b))

	)

149 
StdPes
* 
peStÜage
 = (StdPes*è
¬g
;

150 
Bufã»dD©a
* 
¡doutD©a
;

151 
Bufã»dD©a
* 
¡d”rD©a
;

152 
cc
;

155 
	`dvmLockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

156 
gDvm
.
¡dioCÚv”‹rR—dy
 = 
Œue
;

157 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvm
.
¡dioCÚv”‹rCÚd
);

158 
	`as£¹
(
cc
 == 0);

159 
	`dvmUÆockMu‹x
(&
gDvm
.
¡dioCÚv”‹rLock
);

162 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

167 
¡doutD©a
 = (
Bufã»dD©a
*è
	`m®loc
((*stdoutData));

168 
¡d”rD©a
 = (
Bufã»dD©a
*è
	`m®loc
((*stderrData));

169 
¡doutD©a
->
couÁ
 = 
¡d”rD©a
->count = 0;

174 !
gDvm
.
h®tStdioCÚv”‹r
) {

175 
ssize_t
 
aùu®
;

176 
fd_£t
 
»adfds
;

177 
maxFd
, 
fdCouÁ
;

179 
	`FD_ZERO
(&
»adfds
);

180 
	`FD_SET
(
peStÜage
->
¡doutPe
[0], &
»adfds
);

181 
	`FD_SET
(
peStÜage
->
¡d”rPe
[0], &
»adfds
);

182 
maxFd
 = 
	`MAX
(
peStÜage
->
¡doutPe
[0],…eStÜage->
¡d”rPe
[0]);

184 
fdCouÁ
 = 
	`£Ëù
(
maxFd
+1, &
»adfds
, 
NULL
, NULL, NULL);

186 ià(
fdCouÁ
 < 0) {

187 ià(
”ºo
 !ğ
EINTR
) {

188 
	`LOGE
("select on stdout/stderr failed\n");

191 
	`LOGD
("Got EINTR, ignoring\n");

192 } ià(
fdCouÁ
 == 0) {

193 
	`LOGD
("WEIRD: select„eturned zero\n");

195 
boŞ
 
”r
 = 
çl£
;

196 ià(
	`FD_ISSET
(
peStÜage
->
¡doutPe
[0], &
»adfds
)) {

197 
”r
 |ğ!
	`»adAndLog
(
peStÜage
->
¡doutPe
[0], 
¡doutD©a
,

200 ià(
	`FD_ISSET
(
peStÜage
->
¡d”rPe
[0], &
»adfds
)) {

201 
”r
 |ğ!
	`»adAndLog
(
peStÜage
->
¡d”rPe
[0], 
¡d”rD©a
,

206 ià(
”r
) {

207 
	`LOGW
("stdio converter got„eadƒrror; shutting it down\n");

213 
	`şo£
(
peStÜage
->
¡doutPe
[0]);

214 
	`şo£
(
peStÜage
->
¡d”rPe
[0]);

216 
	`ä“
(
peStÜage
);

217 
	`ä“
(
¡doutD©a
);

218 
	`ä“
(
¡d”rD©a
);

221 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

222  
NULL
;

223 #undeà
MAX


224 
	}
}

230 
boŞ
 
	$»adAndLog
(
fd
, 
Bufã»dD©a
* 
d©a
, cÚ¡ * 
g
)

232 
ssize_t
 
aùu®
;

233 
size_t
 
wªt
;

235 
	`as£¹
(
d©a
->
couÁ
 < 
kMaxLše
);

237 
wªt
 = 
kMaxLše
 - 
d©a
->
couÁ
;

238 
aùu®
 = 
	`»ad
(
fd
, 
d©a
->
buf
 + d©a->
couÁ
, 
wªt
);

239 ià(
aùu®
 <= 0) {

240 
	`LOGW
("read %s: (%d,%d) failed (%d): %s\n",

241 
g
, 
fd
, 
wªt
, ()
aùu®
, 
	`¡»¼Ü
(
”ºo
));

242  
çl£
;

246 
d©a
->
couÁ
 +ğ
aùu®
;

252 * 
ı
 = 
d©a
->
buf
;

253 cÚ¡ * 
¡¬t
 = 
d©a
->
buf
;

254 
i
 = 
d©a
->
couÁ
;

255 
i
 = 
d©a
->
couÁ
; i > 0; i--, 
ı
++) {

256 ià(*
ı
 =ğ'\n' || (*ı =ğ'\r' && 
i
 != 0 && *(cp+1) != '\n')) {

257 *
ı
 = '\0';

259 
	`LOG
(
LOG_INFO
, 
g
, "%s", 
¡¬t
);

260 
¡¬t
 = 
ı
+1;

267 ià(
¡¬t
 =ğ
d©a
->
buf
 && d©a->
couÁ
 =ğ
kMaxLše
) {

268 
d©a
->
buf
[
kMaxLše
] = '\0';

269 
	`LOG
(
LOG_INFO
, 
g
, "%s!", 
¡¬t
);

270 
¡¬t
 = 
ı
 + 
kMaxLše
;

278 ià(
¡¬t
 !ğ
d©a
->
buf
) {

279 ià(
¡¬t
 >ğ
d©a
->
buf
 + d©a->
couÁ
) {

281 
d©a
->
couÁ
 = 0;

284 
»maššg
 = 
d©a
->
couÁ
 - (
¡¬t
 - d©a->
buf
);

285 
	`memmove
(
d©a
->
buf
, 
¡¬t
, 
»maššg
);

286 
d©a
->
couÁ
 = 
»maššg
;

290  
Œue
;

291 
	}
}

	@StdioConverter.h

19 #iâdeà
_DALVIK_STDOUTCONVERTER


20 
	#_DALVIK_STDOUTCONVERTER


	)

22 
boŞ
 
dvmStdioCÚv”‹rS¹up
();

23 
dvmStdioCÚv”‹rShutdown
();

	@Sync.c

48 
	~"D®vik.h
"

50 
	~<¡dlib.h
>

51 
	~<uni¡d.h
>

52 
	~<±h»ad.h
>

53 
	~<time.h
>

54 
	~<sys/time.h
>

55 
	~<”ºo.h
>

57 
	#LOG_THIN
 
LOGV


	)

59 #ifdeà
WITH_DEADLOCK_PREDICTION


60 cÚ¡ * 
	gkS¹BªÃr
 =

62 cÚ¡ * 
	gkEndBªÃr
 =

72 
	sEx·ndšgObjeùLi¡
 {

73 
u2
 
	m®loc
;

74 
u2
 
	mcouÁ
;

75 
Objeù
** 
	mli¡
;

76 } 
	tEx·ndšgObjeùLi¡
;

79 
upd©eD—dlockP»diùiÚ
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

80 
»moveCŞËùedObjeù
(
Objeù
* 
obj
);

81 
ex·ndObjCË¬
(
Ex·ndšgObjeùLi¡
* 
pLi¡
);

139 
	sMÚ™Ü
 {

140 
Th»ad
* 
	mowÃr
;

141 
	mlockCouÁ
;

142 
Objeù
* 
	mobj
;

144 
	mwa™šg
;

145 
	mnÙifyšg
;

146 
	mš‹¼u±šg
;

148 
±h»ad_mu‹x_t
 
	mlock
;

149 
±h»ad_cÚd_t
 
	mcÚd
;

151 
MÚ™Ü
* 
	mÃxt
;

153 #ifdeà
WITH_DEADLOCK_PREDICTION


160 
Ex·ndšgObjeùLi¡
 
	mhi¡ÜyChd»n
;

166 
Ex·ndšgObjeùLi¡
 
	mhi¡ÜyP¬’ts
;

169 
boŞ
 
	mhi¡ÜyM¬k
;

172 
	mhi¡ÜySckD•th
;

173 * 
	mhi¡ÜyRawSckT¿û
;

181 
MÚ™Ü
* 
	$dvmC»©eMÚ™Ü
(
Objeù
* 
obj
)

183 
MÚ™Ü
* 
mÚ
;

185 
mÚ
 = (
MÚ™Ü
*è
	`ÿÎoc
(1, (Monitor));

186 ià(
mÚ
 =ğ
NULL
) {

187 
	`LOGE
("Unableo‡llocate monitor\n");

188 
	`dvmAbÜt
();

190 
mÚ
->
obj
 = obj;

191 
	`dvmIn™Mu‹x
(&
mÚ
->
lock
);

192 
	`±h»ad_cÚd_š™
(&
mÚ
->
cÚd
, 
NULL
);

196 
mÚ
->
Ãxt
 = 
gDvm
.
mÚ™ÜLi¡
;

197 } !
	`ATOMIC_CMP_SWAP
((
št32_t
*)(*)&
gDvm
.
mÚ™ÜLi¡
,

198 (
št32_t
)
mÚ
->
Ãxt
, (int32_t)mon));

200  
mÚ
;

201 
	}
}

206 
	$»Ëa£MÚ™Ü
(
MÚ™Ü
* 
mÚ
)

209 
	}
}

214 
	$dvmF»eMÚ™ÜLi¡
()

216 
MÚ™Ü
* 
mÚ
;

217 
MÚ™Ü
* 
ÃxtMÚ
;

219 
mÚ
 = 
gDvm
.
mÚ™ÜLi¡
;

220 
mÚ
 !ğ
NULL
) {

221 
ÃxtMÚ
 = 
mÚ
->
Ãxt
;

223 #ifdeà
WITH_DEADLOCK_PREDICTION


224 
	`ex·ndObjCË¬
(&
mÚ
->
hi¡ÜyChd»n
);

225 
	`ex·ndObjCË¬
(&
mÚ
->
hi¡ÜyP¬’ts
);

226 
	`ä“
(
mÚ
->
hi¡ÜyRawSckT¿û
);

228 
	`ä“
(
mÚ
);

229 
mÚ
 = 
ÃxtMÚ
;

231 
	}
}

236 
	$dvmDumpMÚ™ÜInfo
(cÚ¡ * 
msg
)

238 #ià
QUIET_ZYGOTE_MONITOR


239 ià(
gDvm
.
zygÙe
) {

244 
tÙ®CouÁ
;

245 
liveCouÁ
;

247 
tÙ®CouÁ
 = 
liveCouÁ
 = 0;

248 
MÚ™Ü
* 
mÚ
 = 
gDvm
.
mÚ™ÜLi¡
;

249 
mÚ
 !ğ
NULL
) {

250 
tÙ®CouÁ
++;

251 ià(
mÚ
->
obj
 !ğ
NULL
)

252 
liveCouÁ
++;

253 
mÚ
 = mÚ->
Ãxt
;

256 
	`LOGD
("%s: monitor†ist has %dƒntries (%d†ive)\n",

257 
msg
, 
tÙ®CouÁ
, 
liveCouÁ
);

258 
	}
}

263 
Objeù
* 
	$dvmG‘MÚ™ÜObjeù
(
MÚ™Ü
* 
mÚ
)

265 ià(
mÚ
 =ğ
NULL
)

266  
NULL
;

268  
mÚ
->
obj
;

269 
	}
}

275 
boŞ
 
	$dvmHŞdsLock
(
Th»ad
* 
th»ad
, 
Objeù
* 
obj
)

277 ià(
th»ad
 =ğ
NULL
 || 
obj
 == NULL) {

278  
çl£
;

285 
Lock
 
lock
 = 
obj
->lock;

286 ià(
	`IS_LOCK_FAT
(&
lock
)) {

287  
th»ad
 =ğ
lock
.
mÚ
->
owÃr
;

289  
th»ad
->
th»adId
 =ğ(
lock
.
thš
 & 0xffff);

291 
	}
}

297 
	$dvmF»eObjeùMÚ™Ü_š‹º®
(
Lock
 *
lock
)

299 
MÚ™Ü
 *
mÚ
;

303 
	`as£¹
(
	`IS_LOCK_FAT
(
lock
));

305 #ifdeà
WITH_DEADLOCK_PREDICTION


306 ià(
gDvm
.
d—dlockP»diùMode
 !ğ
kDPOff
)

307 
	`»moveCŞËùedObjeù
(
lock
->
mÚ
->
obj
);

310 
mÚ
 = 
lock
->mon;

311 
lock
->
thš
 = 
DVM_LOCK_INITIAL_THIN_VALUE
;

320 
	`as£¹
(
	`±h»ad_mu‹x_Œylock
(&
mÚ
->
lock
) == 0);

321 
	`±h»ad_mu‹x_de¡roy
(&
mÚ
->
lock
);

322 
	`±h»ad_cÚd_de¡roy
(&
mÚ
->
cÚd
);

327 
MÚ™Ü
 *
Ãxt
;

328 
Ãxt
 = 
mÚ
->next;

329 #ifdeà
WITH_DEADLOCK_PREDICTION


330 
	`ex·ndObjCË¬
(&
mÚ
->
hi¡ÜyChd»n
);

331 
	`ex·ndObjCË¬
(&
mÚ
->
hi¡ÜyP¬’ts
);

332 
	`ä“
(
mÚ
->
hi¡ÜyRawSckT¿û
);

334 
	`mem£t
(
mÚ
, 0,  (*mon));

335 
mÚ
->
Ãxt
 =‚ext;

339 
	}
}

345 
	$lockMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

347 
cc
;

349 ià(
mÚ
->
owÃr
 =ğ
£lf
) {

350 
mÚ
->
lockCouÁ
++;

352 
Th»adStus
 
ŞdStus
;

354 ià(
	`±h»ad_mu‹x_Œylock
(&
mÚ
->
lock
) != 0) {

356 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_MONITOR
);

357 
cc
 = 
	`±h»ad_mu‹x_lock
(&
mÚ
->
lock
);

358 
	`as£¹
(
cc
 == 0);

359 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

362 
mÚ
->
owÃr
 = 
£lf
;

363 
	`as£¹
(
mÚ
->
lockCouÁ
 == 0);

371 
	}
}

378 
boŞ
 
	$ŒyLockMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

380 
cc
;

382 ià(
mÚ
->
owÃr
 =ğ
£lf
) {

383 
mÚ
->
lockCouÁ
++;

384  
Œue
;

386 
cc
 = 
	`±h»ad_mu‹x_Œylock
(&
mÚ
->
lock
);

387 ià(
cc
 == 0) {

388 
mÚ
->
owÃr
 = 
£lf
;

389 
	`as£¹
(
mÚ
->
lockCouÁ
 == 0);

390  
Œue
;

392  
çl£
;

395 
	}
}

404 
boŞ
 
	$uÆockMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

406 
	`as£¹
(
mÚ
 !ğ
NULL
);

408 ià(
mÚ
->
owÃr
 =ğ
£lf
) {

412 ià(
mÚ
->
lockCouÁ
 == 0) {

413 
cc
;

414 
mÚ
->
owÃr
 = 
NULL
;

415 
cc
 = 
	`±h»ad_mu‹x_uÆock
(&
mÚ
->
lock
);

416 
	`as£¹
(
cc
 == 0);

418 
mÚ
->
lockCouÁ
--;

426 ià(
mÚ
->
owÃr
 =ğ
NULL
) {

432 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

434  
çl£
;

436  
Œue
;

437 
	}
}

462 
	$wa™MÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
, 
s8
 
m£c
, 
s4
 
n£c
,

463 
boŞ
 
š‹¼u±ShouldThrow
)

465 
time¥ec
 
ts
;

466 
boŞ
 
wasIÁ”ru±ed
 = 
çl£
;

467 
boŞ
 
timed
;

468 
cc
;

471 ià(
mÚ
 =ğ
NULL
 || ((
u4
)mÚ & 1è!ğ0 || mÚ->
owÃr
 !ğ
£lf
) {

472 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

480 ià(
m£c
 < 0 || 
n£c
 < 0 ||‚sec > 999999) {

481 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

489 ià(
m£c
 =ğ0 && 
n£c
 == 0) {

490 
timed
 = 
çl£
;

492 
s8
 
’dSec
;

494 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


495 
time¥ec
 
now
;

496 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

497 
’dSec
 = 
now
.
tv_£c
 + 
m£c
 / 1000;

498 ià(
’dSec
 >= 0x7fffffff) {

499 
	`LOGV
("NOTE:ƒndimeƒxceedsƒpoch\n");

500 
’dSec
 = 0x7ffffffe;

502 
ts
.
tv_£c
 = 
’dSec
;

503 
ts
.
tv_n£c
 = (
now
.tv_n£ø+ (
m£c
 % 1000è* 1000 * 1000è+ 
n£c
;

505 
timev®
 
now
;

506 
	`g‘timeofday
(&
now
, 
NULL
);

507 
’dSec
 = 
now
.
tv_£c
 + 
m£c
 / 1000;

508 ià(
’dSec
 >= 0x7fffffff) {

509 
	`LOGV
("NOTE:ƒndimeƒxceedsƒpoch\n");

510 
’dSec
 = 0x7ffffffe;

512 
ts
.
tv_£c
 = 
’dSec
;

513 
ts
.
tv_n£c
 = (
now
.
tv_u£c
 + (
m£c
 % 1000è* 1000è* 1000 + 
n£c
;

517 ià(
ts
.
tv_n£c
 >= 1000000000L) {

518 
ts
.
tv_£c
++;

519 
ts
.
tv_n£c
 -= 1000000000L;

521 
timed
 = 
Œue
;

529 ià(
mÚ
->
nÙifyšg
 + mÚ->
š‹¼u±šg
 > mÚ->
wa™šg
) {

530 
	`LOGD
("threadid=%d: bogus mon %d+%d>%d;‡djusting\n",

531 
£lf
->
th»adId
, 
mÚ
->
nÙifyšg
, mÚ->
š‹¼u±šg
,

532 
mÚ
->
wa™šg
);

534 
	`as£¹
(
mÚ
->
wa™šg
 >ğmÚ->
š‹¼u±šg
);

535 
mÚ
->
nÙifyšg
 = mÚ->
wa™šg
 - mÚ->
š‹¼u±šg
;

546 
´evLockCouÁ
;

548 
´evLockCouÁ
 = 
mÚ
->
lockCouÁ
;

549 
mÚ
->
lockCouÁ
 = 0;

550 
mÚ
->
wa™šg
++;

551 
mÚ
->
owÃr
 = 
NULL
;

558 ià(
timed
)

559 
	`dvmChªgeStus
(
£lf
, 
THREAD_TIMED_WAIT
);

561 
	`dvmChªgeStus
(
£lf
, 
THREAD_WAIT
);

569 
£lf
->
wa™MÚ™Ü
 = 
mÚ
;

575 ià(
£lf
->
š‹¼u±ed
) {

576 
wasIÁ”ru±ed
 = 
Œue
;

577 
dÚe
;

580 
	`LOGVV
("th»adid=%d: wa™šg oÀ%p\n", 
£lf
->
th»adId
, 
mÚ
);

582 
Œue
) {

583 ià(!
timed
) {

584 
cc
 = 
	`±h»ad_cÚd_wa™
(&
mÚ
->
cÚd
, &mÚ->
lock
);

585 
	`as£¹
(
cc
 == 0);

587 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


588 
cc
 = 
	`±h»ad_cÚd_timedwa™_mÚÙÚic
(&
mÚ
->
cÚd
, &mÚ->
lock
, &
ts
);

590 
cc
 = 
	`±h»ad_cÚd_timedwa™
(&
mÚ
->
cÚd
, &mÚ->
lock
, &
ts
);

592 ià(
cc
 =ğ
ETIMEDOUT
) {

593 
	`LOGVV
("th»adid=%d wakeup:imeout\n", 
£lf
->
th»adId
);

603 ià(
£lf
->
š‹¼u±šgWa™
) {

610 
£lf
->
š‹¼u±šgWa™
 = 
çl£
;

611 
mÚ
->
š‹¼u±šg
--;

612 
	`as£¹
(
£lf
->
š‹¼u±ed
);

613 ià(
š‹¼u±ShouldThrow
) {

614 
wasIÁ”ru±ed
 = 
Œue
;

615 
	`LOGD
("th»adid=%d wakeup: iÁ”ru±ed\n", 
£lf
->
th»adId
);

618 
	`LOGD
("th»adid=%d wakeup:‚Ù iÁ”ru±ibË\n", 
£lf
->
th»adId
);

621 ià(
mÚ
->
nÙifyšg
) {

626 
mÚ
->
nÙifyšg
--;

627 
	`LOGVV
("th»adid=%d wakeup:‚Ùif›d\n", 
£lf
->
th»adId
);

635 
	`LOGVV
("th»adid=%d wakeup: gošg backØ¦“p\n", 
£lf
->
th»adId
);

639 
dÚe
:

649 
£lf
->
wa™MÚ™Ü
 = 
NULL
;

650 
mÚ
->
owÃr
 = 
£lf
;

651 
mÚ
->
wa™šg
--;

652 
mÚ
->
lockCouÁ
 = 
´evLockCouÁ
;

655 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

657 ià(
wasIÁ”ru±ed
) {

665 
£lf
->
š‹¼u±ed
 = 
çl£
;

666 ià(
š‹¼u±ShouldThrow
)

667 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ru±edExû±iÚ;", 
NULL
);

669 
	}
}

674 
	$nÙifyMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

677 ià(
mÚ
 =ğ
NULL
 || ((
u4
)mÚ & 1è!ğ0 || mÚ->
owÃr
 !ğ
£lf
) {

678 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

688 ià(
mÚ
->
nÙifyšg
 + mÚ->
š‹¼u±šg
 < mÚ->
wa™šg
) {

690 
cc
;

692 
	`LOGVV
("th»adid=%d: sigÇlšg oÀ%p\n", 
£lf
->
th»adId
, 
mÚ
);

694 
mÚ
->
nÙifyšg
++;

695 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
mÚ
->
cÚd
);

696 
	`as£¹
(
cc
 == 0);

698 
	`LOGVV
("th»adid=%d:‚obodyØsigÇÈÚ %p\n", 
£lf
->
th»adId
, 
mÚ
);

700 
	}
}

708 
	$nÙifyAÎMÚ™Ü
(
Th»ad
* 
£lf
, 
MÚ™Ü
* 
mÚ
)

711 ià(
mÚ
 =ğ
NULL
 || ((
u4
)mÚ & 1è!ğ0 || mÚ->
owÃr
 !ğ
£lf
) {

712 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

717 
mÚ
->
nÙifyšg
 = mÚ->
wa™šg
 - mÚ->
š‹¼u±šg
;

718 ià(
mÚ
->
nÙifyšg
 > 0) {

719 
cc
;

721 
	`LOGVV
("threadid=%d: broadcastingo %dhreads on %p\n",

722 
£lf
->
th»adId
, 
mÚ
->
nÙifyšg
, mon);

724 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
mÚ
->
cÚd
);

725 
	`as£¹
(
cc
 == 0);

727 
	`LOGVV
("th»adid=%d:‚obodyØbrßdÿ¡ØÚ %p\n", 
£lf
->
th»adId
,
mÚ
);

729 
	}
}

731 #ià
THIN_LOCKING


742 
	$dvmLockObjeù
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

744 vŞ©
u4
 *
thšp
 = &
obj
->
lock
.
thš
;

745 
u4
 
th»adId
 = 
£lf
->threadId;

750 ià(!
	`ATOMIC_CMP_SWAP
((
št32_t
 *)
thšp
,

751 (
št32_t
)
DVM_LOCK_INITIAL_THIN_VALUE
,

752 (
št32_t
)
th»adId
)) {

756 ià((*
thšp
 & 0xffffè=ğ
th»adId
) {

762 *
thšp
 += 1<<16;

767 ià((*
thšp
 & 1) != 0) {

768 
Th»adStus
 
ŞdStus
;

769 cÚ¡ 
maxSË•D–ay
 = 1 * 1024 * 1024;

770 
¦“pD–ay
;

772 
	`LOG_THIN
("(%d) spin on†ock 0x%08x: 0x%08x (0x%08x) 0x%08x\n",

773 
th»adId
, (
ušt
)&
obj
->
lock
,

774 
DVM_LOCK_INITIAL_THIN_VALUE
, *
thšp
, 
th»adId
);

780 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_MONITOR
);

784 
¦“pD–ay
 = 0;

790 *
thšp
 !ğ
DVM_LOCK_INITIAL_THIN_VALUE
) {

791 ià((*
thšp
 & 1) == 0) {

794 
	`LOG_THIN
("(%d)†ock 0x%08x surprise-fattened\n",

795 
th»adId
, (
ušt
)&
obj
->
lock
);

796 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

797 
çt_lock
;

800 ià(
¦“pD–ay
 == 0) {

801 
	`sched_y›ld
();

802 
¦“pD–ay
 = 1 * 1000;

804 
	`u¦“p
(
¦“pD–ay
);

805 ià(
¦“pD–ay
 < 
maxSË•D–ay
 / 2) {

806 
¦“pD–ay
 *= 2;

810 } !
	`ATOMIC_CMP_SWAP
((
št32_t
 *)
thšp
,

811 (
št32_t
)
DVM_LOCK_INITIAL_THIN_VALUE
,

812 (
št32_t
)
th»adId
));

813 
	`LOG_THIN
("(%d) spin on†ock done 0x%08x: "

815 
th»adId
, (
ušt
)&
obj
->
lock
,

816 
DVM_LOCK_INITIAL_THIN_VALUE
, *
thšp
, 
th»adId
);

821 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

827 
obj
->
lock
.
mÚ
 = 
	`dvmC»©eMÚ™Ü
(obj);

828 
	`LOG_THIN
("(%d)†ock 0x%08x fattened\n",

829 
th»adId
, (
ušt
)&
obj
->
lock
);

838 
çt_lock
:

839 
	`as£¹
(
obj
->
lock
.
mÚ
 !ğ
NULL
);

840 
	`lockMÚ™Ü
(
£lf
, 
obj
->
lock
.
mÚ
);

845 #ifdeà
WITH_DEADLOCK_PREDICTION


862 ià(
gDvm
.
d—dlockP»diùMode
 !ğ
kDPOff
) {

863 ià(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
) {

864 
	`LOGE
("Badh»ad stu (%dèš DP\n", 
£lf
->
¡©us
);

865 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

866 
	`dvmAbÜt
();

868 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
£lf
));

869 
	`upd©eD—dlockP»diùiÚ
(
£lf
, 
obj
);

870 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

876 
	`dvmAddToMÚ™ÜLi¡
(
£lf
, 
obj
, 
çl£
);

877 
	`dvmUÆockObjeù
(
£lf
, 
obj
);

878 
	`LOGV
("--- unlocked,…ending is '%s'\n",

879 
	`dvmG‘Exû±iÚ
(
£lf
)->
şazz
->
desütÜ
);

888 
	`dvmAddToMÚ™ÜLi¡
(
£lf
, 
obj
, 
gDvm
.
d—dlockP»diùMode
 !ğ
kDPOff
);

889 #–ià
	`defšed
(
WITH_MONITOR_TRACKING
)

893 
	`dvmAddToMÚ™ÜLi¡
(
£lf
, 
obj
, 
çl£
);

895 
	}
}

902 
boŞ
 
	$dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

904 vŞ©
u4
 *
thšp
 = &
obj
->
lock
.
thš
;

905 
u4
 
th»adId
 = 
£lf
->threadId;

909 ià(*
thšp
 =ğ
th»adId
) {

914 *
thšp
 = 
DVM_LOCK_INITIAL_THIN_VALUE
;

915 } ià((*
thšp
 & 1) != 0) {

918 ià((*
thšp
 & 0xffffè!ğ
th»adId
) {

924 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

926  
çl£
;

932 *
thšp
 -= 1<<16;

936 
	`as£¹
(
obj
->
lock
.
mÚ
 !ğ
NULL
);

937 ià(!
	`uÆockMÚ™Ü
(
£lf
, 
obj
->
lock
.
mÚ
)) {

939  
çl£
;

943 #ifdeà
WITH_MONITOR_TRACKING


947 
	`dvmRemoveFromMÚ™ÜLi¡
(
£lf
, 
obj
);

950  
Œue
;

951 
	}
}

956 
	$dvmObjeùWa™
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
, 
s8
 
m£c
, 
s4
 
n£c
,

957 
boŞ
 
š‹¼u±ShouldThrow
)

959 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

960 
u4
 
thš
 = 
obj
->
lock
.thin;

964 ià((
thš
 & 1) != 0) {

967 ià((
thš
 & 0xffffè!ğ
£lf
->
th»adId
) {

968 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

978 
mÚ
 = 
	`dvmC»©eMÚ™Ü
(
obj
);

983 
	`lockMÚ™Ü
(
£lf
, 
mÚ
);

984 
mÚ
->
lockCouÁ
 = 
thš
 >> 16;

985 
	`LOG_THIN
("(%d)†ock 0x%08x fattened by wait()o count %d\n",

986 
£lf
->
th»adId
, (
ušt
)&
obj
->
lock
, 
mÚ
->
lockCouÁ
);

990 
obj
->
lock
.
mÚ
 = mon;

993 
	`wa™MÚ™Ü
(
£lf
, 
mÚ
, 
m£c
, 
n£c
, 
š‹¼u±ShouldThrow
);

994 
	}
}

999 
	$dvmObjeùNÙify
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

1001 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1002 
u4
 
thš
 = 
obj
->
lock
.thin;

1007 ià((
thš
 & 1) != 0) {

1010 ià((
thš
 & 0xffffè!ğ
£lf
->
th»adId
) {

1011 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

1021 
	`nÙifyMÚ™Ü
(
£lf
, 
mÚ
);

1023 
	}
}

1028 
	$dvmObjeùNÙifyAÎ
(
Th»ad
* 
£lf
, 
Objeù
 *
obj
)

1030 
u4
 
thš
 = 
obj
->
lock
.thin;

1035 ià((
thš
 & 1) != 0) {

1038 ià((
thš
 & 0xffffè!ğ
£lf
->
th»adId
) {

1039 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalMonitorStateException;",

1047 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1051 
	`nÙifyAÎMÚ™Ü
(
£lf
, 
mÚ
);

1053 
	}
}

1062 
	$dvmLockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1064 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1066 ià(
mÚ
 =ğ
NULL
) {

1067 
mÚ
 = 
	`dvmC»©eMÚ™Ü
(
obj
);

1068 ià(!
	`ATOMIC_CMP_SWAP
((
št32_t
 *)&
obj
->
lock
.
mÚ
,

1069 (
št32_t
)
NULL
, (št32_t)
mÚ
)) {

1071 
	`»Ëa£MÚ™Ü
(
mÚ
);

1072 
mÚ
 = 
obj
->
lock
.mon;

1076 
	`lockMÚ™Ü
(
£lf
, 
mÚ
);

1077 
	}
}

1082 
boŞ
 
	$dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1084 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1086  
	`uÆockMÚ™Ü
(
£lf
, 
mÚ
);

1087 
	}
}

1093 
	$dvmObjeùWa™
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
, 
u8
 
m£c
, 
u4
 
n£c
)

1095 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1097 
	`wa™MÚ™Ü
(
£lf
, 
mÚ
, 
m£c
, 
n£c
);

1098 
	}
}

1103 
	$dvmObjeùNÙify
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1105 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1107 
	`nÙifyMÚ™Ü
(
£lf
, 
mÚ
);

1108 
	}
}

1113 
	$dvmObjeùNÙifyAÎ
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

1115 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1117 
	`nÙifyAÎMÚ™Ü
(
£lf
, 
mÚ
);

1118 
	}
}

1137 
	$dvmTh»adSË•
(
u8
 
m£c
, 
u4
 
n£c
)

1139 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1140 
MÚ™Ü
* 
mÚ
 = 
gDvm
.
th»adSË•MÚ
;

1143 ià(
m£c
 =ğ0 && 
n£c
 == 0)

1144 
n£c
++;

1146 
	`lockMÚ™Ü
(
£lf
, 
mÚ
);

1147 
	`wa™MÚ™Ü
(
£lf
, 
mÚ
, 
m£c
, 
n£c
, 
Œue
);

1148 
	`uÆockMÚ™Ü
(
£lf
, 
mÚ
);

1149 
	}
}

1164 
	$dvmTh»adIÁ”ru±
(vŞ©
Th»ad
* 
th»ad
)

1166 
MÚ™Ü
* 
mÚ
;

1173 
th»ad
->
š‹¼u±ed
 = 
Œue
;

1174 
	`MEM_BARRIER
();

1183 
mÚ
 = 
th»ad
->
wa™MÚ™Ü
;

1184 ià(
mÚ
 =ğ
NULL
)

1196 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1197 ià(!
	`ŒyLockMÚ™Ü
(
£lf
, 
mÚ
)) {

1202 cÚ¡ 
kSpšSË•Time
 = 500*1000;

1203 
u8
 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

1204 
¦“pI‹r
 = 0;

1206 
	`dvmI‹¿tiveSË•
(
¦“pI‹r
++, 
kSpšSË•Time
, 
¡¬tWh’
)) {

1210 ià(
	`ŒyLockMÚ™Ü
(
£lf
, 
mÚ
))

1211 
gÙ™
;

1218 ià(
th»ad
->
wa™MÚ™Ü
 !ğ
mÚ
)

1225 
	`LOGW
("threadid=%d: unableo interrupthreadid=%d\n",

1226 
£lf
->
th»adId
, 
th»ad
->threadId);

1230 
gÙ™
:

1240 ià(
th»ad
->
wa™MÚ™Ü
 =ğ
mÚ
 &&

1241 
th»ad
->
š‹¼u±ed
 &&

1242 !
th»ad
->
š‹¼u±šgWa™
)

1244 
cc
;

1246 
	`LOGVV
("threadid=%d: interruptinghreadid=%d waiting on %p\n",

1247 
£lf
->
th»adId
, 
th»ad
->th»adId, 
mÚ
);

1249 
th»ad
->
š‹¼u±šgWa™
 = 
Œue
;

1250 
mÚ
->
š‹¼u±šg
++;

1251 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
mÚ
->
cÚd
);

1252 
	`as£¹
(
cc
 == 0);

1255 
	`uÆockMÚ™Ü
(
£lf
, 
mÚ
);

1256 
	}
}

1259 #ifdeà
WITH_DEADLOCK_PREDICTION


1324 #ià!
defšed
(
WITH_MONITOR_TRACKING
)

1332 
	$ex·ndObjCË¬
(
Ex·ndšgObjeùLi¡
* 
pLi¡
)

1334 ià(
pLi¡
->
li¡
 !ğ
NULL
) {

1335 
	`ä“
(
pLi¡
->
li¡
);

1336 
pLi¡
->
li¡
 = 
NULL
;

1338 
pLi¡
->
®loc
 =…Li¡->
couÁ
 = 0;

1339 
	}
}

1344 
šlše
 
	$ex·ndBufG‘CouÁ
(cÚ¡ 
Ex·ndšgObjeùLi¡
* 
pLi¡
)

1346  
pLi¡
->
couÁ
;

1347 
	}
}

1352 
šlše
 
Objeù
* 
	$ex·ndBufG‘EÁry
(cÚ¡ 
Ex·ndšgObjeùLi¡
* 
pLi¡
,

1353 
i
)

1355  
pLi¡
->
li¡
[
i
];

1356 
	}
}

1364 
	$ex·ndObjAddEÁry
(
Ex·ndšgObjeùLi¡
* 
pLi¡
, 
Objeù
* 
obj
)

1366 ià(
pLi¡
->
couÁ
 =ğpLi¡->
®loc
) {

1368 
Objeù
** 
ÃwLi¡
;

1370 ià(
pLi¡
->
®loc
 == 0)

1371 
pLi¡
->
®loc
 = 4;

1373 
pLi¡
->
®loc
 *= 2;

1374 
	`LOGVV
("ex·ndšg %°tØ%d\n", 
pLi¡
,…Li¡->
®loc
);

1375 
ÃwLi¡
 = 
	`»®loc
(
pLi¡
->
li¡
,…Li¡->
®loc
 * (
Objeù
*));

1376 ià(
ÃwLi¡
 =ğ
NULL
) {

1377 
	`LOGE
("Faedƒx·ndšg DP objeù†i¡ (®loc=%d)\n", 
pLi¡
->
®loc
);

1378 
	`dvmAbÜt
();

1380 
pLi¡
->
li¡
 = 
ÃwLi¡
;

1383 
pLi¡
->
li¡
[pLi¡->
couÁ
++] = 
obj
;

1384 
	}
}

1389 
boŞ
 
	$ex·ndObjRemoveEÁry
(
Ex·ndšgObjeùLi¡
* 
pLi¡
, 
Objeù
* 
obj
)

1391 
i
;

1393 
i
 = 
pLi¡
->
couÁ
-1; i >= 0; i--) {

1394 ià(
pLi¡
->
li¡
[
i
] =ğ
obj
)

1397 ià(
i
 < 0)

1398  
çl£
;

1400 ià(
i
 !ğ
pLi¡
->
couÁ
-1) {

1407 
pLi¡
->
li¡
[
i
] =…Li¡->li¡[pLi¡->
couÁ
-1];

1410 
pLi¡
->
couÁ
--;

1411 
pLi¡
->
li¡
[pLi¡->
couÁ
] = (
Objeù
*) 0xdecadead;

1412  
Œue
;

1413 
	}
}

1418 
boŞ
 
	$ex·ndObjHas
(cÚ¡ 
Ex·ndšgObjeùLi¡
* 
pLi¡
, 
Objeù
* 
obj
)

1420 
i
;

1422 
i
 = 0; i < 
pLi¡
->
couÁ
; i++) {

1423 ià(
pLi¡
->
li¡
[
i
] =ğ
obj
)

1424  
Œue
;

1426  
çl£
;

1427 
	}
}

1432 
	$ex·ndObjDump
(cÚ¡ 
Ex·ndšgObjeùLi¡
* 
pLi¡
)

1434 
i
;

1435 
i
 = 0; i < 
pLi¡
->
couÁ
; i++)

1436 
	`´štf
(" %p", 
pLi¡
->
li¡
[
i
]);

1437 
	}
}

1443 
	$ex·ndObjCheckFÜDu¶iÿ‹s
(cÚ¡ 
Ex·ndšgObjeùLi¡
* 
pLi¡
)

1445 
i
, 
j
;

1446 
i
 = 0; i < 
pLi¡
->
couÁ
-1; i++) {

1447 
j
 = 
i
 + 1; j < 
pLi¡
->
couÁ
; j++) {

1448 ià(
pLi¡
->
li¡
[
i
] =ğpLi¡->li¡[
j
]) {

1449  
i
;

1455 
	}
}

1463 
boŞ
 
	$objeùInChdLi¡
(cÚ¡ 
Objeù
* 
·»Á
, Objeù* 
chd
)

1465 
Lock
 
lock
 = 
·»Á
->lock;

1466 ià(!
	`IS_LOCK_FAT
(&
lock
)) {

1468  
çl£
;

1471  
	`ex·ndObjHas
(&
lock
.
mÚ
->
hi¡ÜyChd»n
, 
chd
);

1472 
	}
}

1477 
	$dumpKids
(
Objeù
* 
·»Á
)

1479 
MÚ™Ü
* 
mÚ
 = 
·»Á
->
lock
.mon;

1481 
	`´štf
("Chd»Àoà%p:", 
·»Á
);

1482 
	`ex·ndObjDump
(&
mÚ
->
hi¡ÜyChd»n
);

1483 
	`´štf
("\n");

1484 
	}
}

1490 
	$lškP¬’tToChd
(
Objeù
* 
·»Á
, Objeù* 
chd
)

1493 
	`as£¹
(
	`IS_LOCK_FAT
(&
·»Á
->
lock
));

1494 
	`as£¹
(
	`IS_LOCK_FAT
(&
chd
->
lock
));

1495 
	`as£¹
(
·»Á
 !ğ
chd
);

1496 
MÚ™Ü
* 
mÚ
;

1498 
mÚ
 = 
·»Á
->
lock
.mon;

1499 
	`as£¹
(!
	`ex·ndObjHas
(&
mÚ
->
hi¡ÜyChd»n
, 
chd
));

1500 
	`ex·ndObjAddEÁry
(&
mÚ
->
hi¡ÜyChd»n
, 
chd
);

1502 
mÚ
 = 
chd
->
lock
.mon;

1503 
	`as£¹
(!
	`ex·ndObjHas
(&
mÚ
->
hi¡ÜyP¬’ts
, 
·»Á
));

1504 
	`ex·ndObjAddEÁry
(&
mÚ
->
hi¡ÜyP¬’ts
, 
·»Á
);

1505 
	}
}

1511 
	$uÆškP¬’tFromChd
(
Objeù
* 
·»Á
, Objeù* 
chd
)

1514 
	`as£¹
(
	`IS_LOCK_FAT
(&
·»Á
->
lock
));

1515 
	`as£¹
(
	`IS_LOCK_FAT
(&
chd
->
lock
));

1516 
	`as£¹
(
·»Á
 !ğ
chd
);

1517 
MÚ™Ü
* 
mÚ
;

1519 
mÚ
 = 
·»Á
->
lock
.mon;

1520 ià(!
	`ex·ndObjRemoveEÁry
(&
mÚ
->
hi¡ÜyChd»n
, 
chd
)) {

1521 
	`LOGW
("WARNING: chd %°nÙ found iÀ·»Á %p\n", 
chd
, 
·»Á
);

1523 
	`as£¹
(!
	`ex·ndObjHas
(&
mÚ
->
hi¡ÜyChd»n
, 
chd
));

1524 
	`as£¹
(
	`ex·ndObjCheckFÜDu¶iÿ‹s
(&
mÚ
->
hi¡ÜyChd»n
) < 0);

1526 
mÚ
 = 
chd
->
lock
.mon;

1527 ià(!
	`ex·ndObjRemoveEÁry
(&
mÚ
->
hi¡ÜyP¬’ts
, 
·»Á
)) {

1528 
	`LOGW
("WARNING:…¬’ˆ%°nÙ found iÀchd %p\n", 
·»Á
, 
chd
);

1530 
	`as£¹
(!
	`ex·ndObjHas
(&
mÚ
->
hi¡ÜyP¬’ts
, 
·»Á
));

1531 
	`as£¹
(
	`ex·ndObjCheckFÜDu¶iÿ‹s
(&
mÚ
->
hi¡ÜyP¬’ts
) < 0);

1532 
	}
}

1539 
	$logH–dMÚ™Üs
(
Th»ad
* 
£lf
)

1541 * 
Çme
 = 
NULL
;

1543 
Çme
 = 
	`dvmG‘Th»adName
(
£lf
);

1544 
	`LOGW
("Monitors currently held byhread (threadid=%d '%s')\n",

1545 
£lf
->
th»adId
, 
Çme
);

1546 
	`LOGW
("(most-recently-acquired onop):\n");

1547 
	`ä“
(
Çme
);

1549 
LockedObjeùD©a
* 
lod
 = 
£lf
->
pLockedObjeùs
;

1550 
lod
 !ğ
NULL
) {

1551 
	`LOGW
("--- object %p[%d] (%s)\n",

1552 
lod
->
obj
,†od->
»cursiÚCouÁ
,†od->obj->
şazz
->
desütÜ
);

1553 
	`dvmLogRawSckT¿û
(
lod
->
¿wSckT¿û
,†od->
¡ackD•th
);

1555 
lod
 =†od->
Ãxt
;

1557 
	}
}

1566 
boŞ
 
	$Œav”£T»e
(
Th»ad
* 
£lf
, cÚ¡ 
Objeù
* 
obj
)

1568 
	`as£¹
(
	`IS_LOCK_FAT
(&
obj
->
lock
));

1569 
MÚ™Ü
* 
mÚ
 = 
obj
->
lock
.mon;

1574 ià(
mÚ
->
hi¡ÜyM¬k
) {

1575 * 
¿wSckT¿û
;

1576 
¡ackD•th
;

1578 
	`LOGW
("%s\n", 
kS¹BªÃr
);

1579 
	`LOGW
("Illegal†ock‡ttempt:\n");

1580 
	`LOGW
("--- objeù %°(%s)\n", 
obj
, obj->
şazz
->
desütÜ
);

1582 
¿wSckT¿û
 = 
	`dvmFlInSckT¿ûRaw
(
£lf
, &
¡ackD•th
);

1583 
	`dvmLogRawSckT¿û
(
¿wSckT¿û
, 
¡ackD•th
);

1584 
	`ä“
(
¿wSckT¿û
);

1586 
	`LOGW
(" ");

1587 
	`logH–dMÚ™Üs
(
£lf
);

1589 
	`LOGW
(" ");

1590 
	`LOGW
("Earlier,he following†ock order (from†asto first) was\n");

1591 
	`LOGW
("established -- stackrace is from first successful†ock):\n");

1592  
çl£
;

1594 
mÚ
->
hi¡ÜyM¬k
 = 
Œue
;

1609 
Ex·ndšgObjeùLi¡
* 
pLi¡
 = &
mÚ
->
hi¡ÜyChd»n
;

1610 
i
;

1611 
i
 = 
	`ex·ndBufG‘CouÁ
(
pLi¡
)-1; i >= 0; i--) {

1612 cÚ¡ 
Objeù
* 
chd
 = 
	`ex·ndBufG‘EÁry
(
pLi¡
, 
i
);

1613 
Lock
 
lock
 = 
chd
->lock;

1614 ià(!
	`IS_LOCK_FAT
(&
lock
))

1616 ià(!
	`Œav”£T»e
(
£lf
, 
chd
)) {

1617 
	`LOGW
("--- objeù %°(%s)\n", 
obj
, obj->
şazz
->
desütÜ
);

1618 
	`dvmLogRawSckT¿û
(
mÚ
->
hi¡ÜyRawSckT¿û
,

1619 
mÚ
->
hi¡ÜySckD•th
);

1620 
mÚ
->
hi¡ÜyM¬k
 = 
çl£
;

1621  
çl£
;

1625 
mÚ
->
hi¡ÜyM¬k
 = 
çl£
;

1627  
Œue
;

1628 
	}
}

1643 
	$upd©eD—dlockP»diùiÚ
(
Th»ad
* 
£lf
, 
Objeù
* 
acqObj
)

1645 
LockedObjeùD©a
* 
lod
;

1646 
LockedObjeùD©a
* 
m¾
;

1651 
lod
 = 
	`dvmFšdInMÚ™ÜLi¡
(
£lf
, 
acqObj
);

1652 ià(
lod
 !ğ
NULL
) {

1653 
	`LOGV
("+++ DP:„ecursiv%p\n", 
acqObj
);

1668 ià(!
	`IS_LOCK_FAT
(&
acqObj
->
lock
)) {

1669 
	`LOGVV
("fattening†ockee %p (recur=%d)\n",

1670 
acqObj
,‡cqObj->
lock
.
thš
 >> 16);

1671 
MÚ™Ü
* 
ÃwMÚ
 = 
	`dvmC»©eMÚ™Ü
(
acqObj
);

1672 
	`lockMÚ™Ü
(
£lf
, 
ÃwMÚ
);

1673 
ÃwMÚ
->
lockCouÁ
 +ğ
acqObj
->
lock
.
thš
 >> 16;

1674 
acqObj
->
lock
.
mÚ
 = 
ÃwMÚ
;

1678 ià(
acqObj
->
lock
.
mÚ
->
hi¡ÜyRawSckT¿û
 =ğ
NULL
) {

1679 
MÚ™Ü
* 
mÚ
 = 
acqObj
->
lock
.mon;

1680 
mÚ
->
hi¡ÜyRawSckT¿û
 = 
	`dvmFlInSckT¿ûRaw
(
£lf
,

1681 &
mÚ
->
hi¡ÜySckD•th
);

1691 
m¾
 = 
£lf
->
pLockedObjeùs
;

1692 ià(
m¾
 =ğ
NULL
)

1704 ià(
	`objeùInChdLi¡
(
m¾
->
obj
, 
acqObj
))

1715 ià(!
	`IS_LOCK_FAT
(&
m¾
->
obj
->
lock
)) {

1716 
	`LOGVV
("fattening…arent %p f/b/o child %p (recur=%d)\n",

1717 
m¾
->
obj
, 
acqObj
, m¾->obj->
lock
.
thš
 >> 16);

1718 
MÚ™Ü
* 
ÃwMÚ
 = 
	`dvmC»©eMÚ™Ü
(
m¾
->
obj
);

1719 
	`lockMÚ™Ü
(
£lf
, 
ÃwMÚ
);

1720 
ÃwMÚ
->
lockCouÁ
 +ğ
m¾
->
obj
->
lock
.
thš
 >> 16;

1721 
m¾
->
obj
->
lock
.
mÚ
 = 
ÃwMÚ
;

1743 
boŞ
 
çed
 = 
çl£
;

1744 
	`dvmLockMu‹x
(&
gDvm
.
d—dlockHi¡ÜyLock
);

1745 
	`lškP¬’tToChd
(
m¾
->
obj
, 
acqObj
);

1746 ià(!
	`Œav”£T»e
(
£lf
, 
acqObj
)) {

1747 
	`LOGW
("%s\n", 
kEndBªÃr
);

1748 
çed
 = 
Œue
;

1751 
	`uÆškP¬’tFromChd
(
m¾
->
obj
, 
acqObj
);

1753 
	`dvmUÆockMu‹x
(&
gDvm
.
d—dlockHi¡ÜyLock
);

1755 ià(
çed
) {

1756 
gDvm
.
d—dlockP»diùMode
) {

1757 
kDPE¼
:

1758 
	`dvmThrowExû±iÚ
("Ld®vik/sy¡em/PÙ’tŸlD—dlockE¼Ü;", 
NULL
);

1760 
kDPAbÜt
:

1761 
	`LOGE
("Aborting dueo…otential deadlock\n");

1762 
	`dvmAbÜt
();

1769 
	}
}

1778 
	$m”geChd»n
(
Objeù
* 
·»Á
, cÚ¡ Objeù* 
chd
)

1780 
MÚ™Ü
* 
mÚ
;

1781 
i
;

1783 
	`as£¹
(
	`IS_LOCK_FAT
(&
chd
->
lock
));

1784 
mÚ
 = 
chd
->
lock
.mon;

1785 
Ex·ndšgObjeùLi¡
* 
pLi¡
 = &
mÚ
->
hi¡ÜyChd»n
;

1787 
i
 = 
	`ex·ndBufG‘CouÁ
(
pLi¡
)-1; i >= 0; i--) {

1788 
Objeù
* 
g¿ndChd
 = 
	`ex·ndBufG‘EÁry
(
pLi¡
, 
i
);

1790 ià(!
	`objeùInChdLi¡
(
·»Á
, 
g¿ndChd
)) {

1791 
	`LOGVV
("+++ mig¿tšg %°lškØ%p\n", 
g¿ndChd
, 
·»Á
);

1792 
	`lškP¬’tToChd
(
·»Á
, 
g¿ndChd
);

1794 
	`LOGVV
("+++…¬’ˆ%°®»ady†šk tØ%p\n", 
·»Á
, 
g¿ndChd
);

1797 
	}
}

1807 
	$»moveCŞËùedObjeù
(
Objeù
* 
obj
)

1809 
MÚ™Ü
* 
mÚ
;

1811 
	`LOGVV
("+++ cŞËùšg %p\n", 
obj
);

1819 
mÚ
 = 
gDvm
.
mÚ™ÜLi¡
;

1820 
mÚ
 !ğ
NULL
) {

1821 
Objeù
* 
·»Á
 = 
mÚ
->
obj
;

1822 ià(
·»Á
 !ğ
NULL
) {

1823 ià(
	`objeùInChdLi¡
(
·»Á
, 
obj
)) {

1824 
	`LOGVV
("»movšg chd %°äom…¬’ˆ%p\n", 
obj
, 
·»Á
);

1825 
	`uÆškP¬’tFromChd
(
·»Á
, 
obj
);

1826 
	`m”geChd»n
(
·»Á
, 
obj
);

1829 
mÚ
 = mÚ->
Ãxt
;

1839 
Ex·ndšgObjeùLi¡
* 
pLi¡
;

1840 
i
;

1842 
	`as£¹
(
	`IS_LOCK_FAT
(&
obj
->
lock
));

1843 
mÚ
 = 
obj
->
lock
.mon;

1844 
pLi¡
 = &
mÚ
->
hi¡ÜyP¬’ts
;

1845 
i
 = 
	`ex·ndBufG‘CouÁ
(
pLi¡
)-1; i >= 0; i--) {

1846 
Objeù
* 
·»Á
 = 
	`ex·ndBufG‘EÁry
(
pLi¡
, 
i
);

1847 
MÚ™Ü
* 
·»ÁMÚ
 = 
·»Á
->
lock
.
mÚ
;

1849 ià(!
	`ex·ndObjRemoveEÁry
(&
·»ÁMÚ
->
hi¡ÜyChd»n
, 
obj
)) {

1850 
	`LOGW
("WARNING: chd %°nÙ found iÀ·»Á %p\n", 
obj
, 
·»Á
);

1852 
	`as£¹
(!
	`ex·ndObjHas
(&
·»ÁMÚ
->
hi¡ÜyChd»n
, 
obj
));

1854 
	`m”geChd»n
(
·»Á
, 
obj
);

1861 
pLi¡
 = &
mÚ
->
hi¡ÜyChd»n
;

1862 
i
 = 
	`ex·ndBufG‘CouÁ
(
pLi¡
)-1; i >= 0; i--) {

1863 
Objeù
* 
chd
 = 
	`ex·ndBufG‘EÁry
(
pLi¡
, 
i
);

1864 
MÚ™Ü
* 
chdMÚ
 = 
chd
->
lock
.
mÚ
;

1866 ià(!
	`ex·ndObjRemoveEÁry
(&
chdMÚ
->
hi¡ÜyP¬’ts
, 
obj
)) {

1867 
	`LOGW
("WARNING:…¬’ˆ%°nÙ found iÀchd %p\n", 
obj
, 
chd
);

1869 
	`as£¹
(!
	`ex·ndObjHas
(&
chdMÚ
->
hi¡ÜyP¬’ts
, 
obj
));

1871 
	}
}

	@Sync.h

19 #iâdeà
_DALVIK_SYNC


20 
	#_DALVIK_SYNC


	)

22 
	gObjeù
;

23 
	gMÚ™Ü
;

24 
	gTh»ad
;

25 
MÚ™Ü
 
	tMÚ™Ü
;

27 
	#QUIET_ZYGOTE_MONITOR
 1

	)

36 
	uLock
 {

37 
u4
 
	mthš
;

38 
MÚ™Ü
* 
	mmÚ
;

39 } 
	tLock
;

45 
	#THIN_LOCKING
 1

	)

46 #ià
THIN_LOCKING


47 
	#DVM_LOCK_INITIAL_THIN_VALUE
 (0x1)

	)

49 
	#DVM_LOCK_INITIAL_THIN_VALUE
 (0)

	)

51 
	#DVM_LOCK_INIT
(
lock
) \

52 dØ{ (
lock
)->
thš
 = 
DVM_LOCK_INITIAL_THIN_VALUE
; } 0)

	)

57 
	#IS_LOCK_FAT
(
lock
è((Öock)->
thš
 & 1è=ğ0 && (lock)->
mÚ
 !ğ
NULL
)

	)

62 
dvmLockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

67 
boŞ
 
dvmUÆockObjeù
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

72 
dvmObjeùWa™
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
,

73 
s8
 
timeout
, 
s4
 
Çnos
, 
boŞ
 
š‹¼u±ShouldThrow
);

74 
dvmObjeùNÙify
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

75 
dvmObjeùNÙifyAÎ
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

80 
dvmTh»adSË•
(
u8
 
m£c
, 
u4
 
n£c
);

87 
dvmTh»adIÁ”ru±
(vŞ©
Th»ad
* 
th»ad
);

90 
MÚ™Ü
* 
dvmC»©eMÚ™Ü
(
Objeù
* 
obj
);

93 
dvmF»eObjeùMÚ™Ü_š‹º®
(
Lock
* 
lock
);

94 
	#dvmF»eObjeùMÚ™Ü
(
obj
) \

96 
Objeù
 *
DFM_obj_
 = (
obj
); \

97 ià(
	`IS_LOCK_FAT
(&
DFM_obj_
->
lock
)) { \

98 
	`dvmF»eObjeùMÚ™Ü_š‹º®
(&
DFM_obj_
->
lock
); \

100 } 0)

	)

103 
dvmF»eMÚ™ÜLi¡
();

111 
Objeù
* 
dvmG‘MÚ™ÜObjeù
(
MÚ™Ü
* 
mÚ
);

116 
boŞ
 
dvmHŞdsLock
(
Th»ad
* 
th»ad
, 
Objeù
* 
obj
);

121 
dvmDumpMÚ™ÜInfo
(cÚ¡ * 
msg
);

	@Thread.c

20 
	~"D®vik.h
"

21 
	~"Çtive/Sy¡emTh»ad.h
"

23 
	~"uts/th»ads.h
"

25 
	~<¡dlib.h
>

26 
	~<uni¡d.h
>

27 
	~<sys/time.h
>

28 
	~<sys/»sourû.h
>

29 
	~<sys/mmª.h
>

30 
	~<”ºo.h
>

31 
	~<fú.h
>

33 
	~<cuts/sched_pŞicy.h
>

35 #ià
defšed
(
HAVE_PRCTL
)

36 
	~<sys/´ùl.h
>

40 #ià
defšed
(
HAVE_GETTID
è&& !defšed(
HAVE_ANDROID_OS
)

41 
	#__KERNEL__


	)

42 
	~<lšux/uni¡d.h
>

43 #ifdeà
_sysÿÎ0


44 
	$_sysÿÎ0
(
pid_t
,
g‘tid
)

46 
pid_t
 
	$g‘tid
(è{  
	`sysÿÎ
(
__NR_g‘tid
);
	}
}

48 #undeà
__KERNEL__


52 
	#ENABLE_CGROUP_ERR_LOGGING
 0

	)

55 
	#LOG_THREAD
 
LOGVV


	)

222 
	#kMaxTh»adId
 ((1<<15è- 1)

	)

223 
	#kMašTh»adId
 ((1<<1è| 1)

	)

226 
Th»ad
* 
®locTh»ad
(
š‹½SckSize
);

227 
boŞ
 
´•¬eTh»ad
(
Th»ad
* 
th»ad
);

228 
£tTh»adS–f
(
Th»ad
* 
th»ad
);

229 
uÆškTh»ad
(
Th»ad
* 
th»ad
);

230 
ä“Th»ad
(
Th»ad
* 
th»ad
);

231 
assignTh»adId
(
Th»ad
* 
th»ad
);

232 
boŞ
 
ü—‹FakeEÁryF¿me
(
Th»ad
* 
th»ad
);

233 
boŞ
 
ü—‹FakeRunF¿me
(
Th»ad
* 
th»ad
);

234 * 
š‹½Th»adS¹
(* 
¬g
);

235 * 
š‹º®Th»adS¹
(* 
¬g
);

236 
th»adEx™UnÿughtExû±iÚ
(
Th»ad
* 
th»ad
, 
Objeù
* 
group
);

237 
th»adEx™Check
(* 
¬g
);

238 
wa™FÜTh»adSu¥’d
(
Th»ad
* 
£lf
, Th»ad* 
th»ad
);

239 
g‘Th»adPriÜ™yFromSy¡em
();

246 
šlše
 
	$dvmAddToTh»adSu¥’dCouÁ
(*
pSu¥’dCouÁ
, 
d–
)

248 *
pSu¥’dCouÁ
 +ğ
d–
;

249 
gDvm
.
sumTh»adSu¥’dCouÁ
 +ğ
d–
;

250 
	}
}

257 
boŞ
 
	$dvmTh»adS¹up
()

259 
Th»ad
* 
th»ad
;

262 ià(
	`±h»ad_key_ü—‹
(&
gDvm
.
±h»adKeyS–f
, 
th»adEx™Check
) != 0) {

263 
	`LOGE
("ERROR:…thread_key_create failed\n");

264  
çl£
;

268 ià(
	`±h»ad_g‘¥ecific
(
gDvm
.
±h»adKeyS–f
è!ğ
NULL
)

269 
	`LOGW
("WARNING:‚ewly-created…thread TLS slot is‚ot NULL\n");

272 
	`dvmIn™Mu‹x
(&
gDvm
.
th»adLi¡Lock
);

273 
	`±h»ad_cÚd_š™
(&
gDvm
.
th»adS¹CÚd
, 
NULL
);

275 
	`±h»ad_cÚd_š™
(&
gDvm
.
vmEx™CÚd
, 
NULL
);

276 
	`dvmIn™Mu‹x
(&
gDvm
.
_th»adSu¥’dLock
);

277 
	`dvmIn™Mu‹x
(&
gDvm
.
th»adSu¥’dCouÁLock
);

278 
	`±h»ad_cÚd_š™
(&
gDvm
.
th»adSu¥’dCouÁCÚd
, 
NULL
);

279 #ifdeà
WITH_DEADLOCK_PREDICTION


280 
	`dvmIn™Mu‹x
(&
gDvm
.
d—dlockHi¡ÜyLock
);

290 
gDvm
.
th»adSË•MÚ
 = 
	`dvmC»©eMÚ™Ü
(
NULL
);

292 
gDvm
.
th»adIdM­
 = 
	`dvmAÎocB™VeùÜ
(
kMaxTh»adId
, 
çl£
);

294 
th»ad
 = 
	`®locTh»ad
(
gDvm
.
¡ackSize
);

295 ià(
th»ad
 =ğ
NULL
)

296  
çl£
;

299 
th»ad
->
¡©us
 = 
THREAD_RUNNING
;

305 
	`´•¬eTh»ad
(
th»ad
);

306 
gDvm
.
th»adLi¡
 = 
th»ad
;

308 #ifdeà
COUNT_PRECISE_METHODS


309 
gDvm
.
´eci£M‘hods
 = 
	`dvmPoš‹rS‘AÎoc
(200);

312  
Œue
;

313 
	}
}

322 
boŞ
 
	$dvmTh»adObjS¹up
()

328 
gDvm
.
şassJavaLªgTh»ad
 =

329 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Thread;");

330 
gDvm
.
şassJavaLªgVMTh»ad
 =

331 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/VMThread;");

332 
gDvm
.
şassJavaLªgTh»adGroup
 =

333 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/ThreadGroup;");

334 ià(
gDvm
.
şassJavaLªgTh»ad
 =ğ
NULL
 ||

335 
gDvm
.
şassJavaLªgTh»adGroup
 =ğ
NULL
 ||

336 
gDvm
.
şassJavaLªgTh»adGroup
 =ğ
NULL
)

338 
	`LOGE
("Could‚ot find one or moreƒssentialhread classes\n");

339  
çl£
;

346 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
 =

347 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»ad
,

349 
gDvm
.
offJavaLªgTh»ad_group
 =

350 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»ad
,

352 
gDvm
.
offJavaLªgTh»ad_d«mÚ
 =

353 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»ad
, "daemon", "Z");

354 
gDvm
.
offJavaLªgTh»ad_Çme
 =

355 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»ad
,

357 
gDvm
.
offJavaLªgTh»ad_´iÜ™y
 =

358 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»ad
, "priority", "I");

360 ià(
gDvm
.
offJavaLªgTh»ad_vmTh»ad
 < 0 ||

361 
gDvm
.
offJavaLªgTh»ad_group
 < 0 ||

362 
gDvm
.
offJavaLªgTh»ad_d«mÚ
 < 0 ||

363 
gDvm
.
offJavaLªgTh»ad_Çme
 < 0 ||

364 
gDvm
.
offJavaLªgTh»ad_´iÜ™y
 < 0)

366 
	`LOGE
("Unableo find‡ll fields in java.lang.Thread\n");

367  
çl£
;

370 
gDvm
.
offJavaLªgVMTh»ad_th»ad
 =

371 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgVMTh»ad
,

373 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
 =

374 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgVMTh»ad
, "vmData", "I");

375 ià(
gDvm
.
offJavaLªgVMTh»ad_th»ad
 < 0 ||

376 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
 < 0)

378 
	`LOGE
("Unableo find‡ll fields in java.lang.VMThread\n");

379  
çl£
;

388 
M‘hod
* 
m‘h
;

389 
m‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
gDvm
.
şassJavaLªgTh»ad
, "run", "()V");

390 ià(
m‘h
 =ğ
NULL
) {

391 
	`LOGE
("Unableo find„un() in java.lang.Thread\n");

392  
çl£
;

394 
gDvm
.
voffJavaLªgTh»ad_run
 = 
m‘h
->
m‘hodIndex
;

399 
m‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
gDvm
.
şassJavaLªgTh»adGroup
,

401 ià(
m‘h
 =ğ
NULL
) {

402 
	`LOGE
("Unableo find„emoveThread(Thread) in java.lang.ThreadGroup\n");

403  
çl£
;

405 
gDvm
.
voffJavaLªgTh»adGroup_»moveTh»ad
 = 
m‘h
->
m‘hodIndex
;

407  
Œue
;

408 
	}
}

413 
	$dvmTh»adShutdown
()

415 ià(
gDvm
.
th»adLi¡
 !ğ
NULL
) {

422 
	`ä“Th»ad
(
gDvm
.
th»adLi¡
);

423 
gDvm
.
th»adLi¡
 = 
NULL
;

426 
	`dvmF»eB™VeùÜ
(
gDvm
.
th»adIdM­
);

428 
	`dvmF»eMÚ™ÜLi¡
();

430 
	`±h»ad_key_d–‘e
(
gDvm
.
±h»adKeyS–f
);

431 
	}
}

437 
šlše
 
	$lockTh»adSu¥’dCouÁ
()

447 
cc
 = 
	`±h»ad_mu‹x_lock
(&
gDvm
.
th»adSu¥’dCouÁLock
);

448 
	`as£¹
(
cc
 == 0);

449 
	}
}

454 
šlše
 
	$uÆockTh»adSu¥’dCouÁ
()

456 
	`dvmUÆockMu‹x
(&
gDvm
.
th»adSu¥’dCouÁLock
);

457 
	}
}

476 
	$dvmLockTh»adLi¡
(
Th»ad
* 
£lf
)

478 
Th»adStus
 
ŞdStus
;

480 ià(
£lf
 =ğ
NULL
)

481 
£lf
 = 
	`dvmTh»adS–f
();

483 ià(
£lf
 !ğ
NULL
) {

484 
ŞdStus
 = 
£lf
->
¡©us
;

485 
£lf
->
¡©us
 = 
THREAD_VMWAIT
;

489 
ŞdStus
 = -1;

492 
cc
 = 
	`±h»ad_mu‹x_lock
(&
gDvm
.
th»adLi¡Lock
);

493 
	`as£¹
(
cc
 == 0);

495 ià(
£lf
 !ğ
NULL
)

496 
£lf
->
¡©us
 = 
ŞdStus
;

497 
	}
}

502 
	$dvmUÆockTh»adLi¡
()

504 
cc
 = 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
th»adLi¡Lock
);

505 
	`as£¹
(
cc
 == 0);

506 
	}
}

511 cÚ¡ * 
	$g‘Su¥’dCau£SŒ
(
Su¥’dCau£
 
why
)

513 
why
) {

514 
SUSPEND_NOT
:  "NOT?";

515 
SUSPEND_FOR_GC
:  "gc";

516 
SUSPEND_FOR_DEBUG
:  "debug";

517 
SUSPEND_FOR_DEBUG_EVENT
:  "debug-event";

518 
SUSPEND_FOR_STACK_DUMP
:  "stack-dump";

521 
	}
}

531 
	$lockTh»adSu¥’d
(cÚ¡ * 
who
, 
Su¥’dCau£
 
why
)

533 cÚ¡ 
kSpšSË•Time
 = 3*1000*1000;

534 
u8
 
¡¬tWh’
 = 0;

535 
¦“pI‹r
 = 0;

536 
cc
;

539 
cc
 = 
	`±h»ad_mu‹x_Œylock
(&
gDvm
.
_th»adSu¥’dLock
);

540 ià(
cc
 != 0) {

541 ià(!
	`dvmCheckSu¥’dP’dšg
(
NULL
)) {

558 
	`LOGI
("threadid=%d ODD: wanthread-suspend†ock (%s:%s),"

560 
	`dvmTh»adS–f
()->
th»adId
, 
who
, 
	`g‘Su¥’dCau£SŒ
(
why
));

563 
¦“pI‹r
 = 0;

567 ià(
¦“pI‹r
 == 0)

568 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

569 ià(!
	`dvmI‹¿tiveSË•
(
¦“pI‹r
++, 
kSpšSË•Time
, 
¡¬tWh’
)) {

570 
	`LOGE
("threadid=%d: couldn't gethread-suspend†ock (%s:%s),"

572 
	`dvmTh»adS–f
()->
th»adId
, 
who
, 
	`g‘Su¥’dCau£SŒ
(
why
));

574 
	`dvmDumpAÎTh»ads
(
çl£
);

575 
	`dvmAbÜt
();

578 } 
cc
 != 0);

579 
	`as£¹
(
cc
 == 0);

580 
	}
}

585 
šlše
 
	$uÆockTh»adSu¥’d
()

587 
cc
 = 
	`±h»ad_mu‹x_uÆock
(&
gDvm
.
_th»adSu¥’dLock
);

588 
	`as£¹
(
cc
 == 0);

589 
	}
}

612 
	$dvmSÏyD«mÚs
()

614 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

615 
Th»ad
* 
rg‘
;

616 
th»adId
 = 0;

617 
boŞ
 
doWa™
 = 
çl£
;

620 
	`dvmLockTh»adLi¡
(
£lf
);

622 ià(
£lf
 !ğ
NULL
)

623 
th»adId
 = 
£lf
->threadId;

625 
rg‘
 = 
gDvm
.
th»adLi¡
;

626 
rg‘
 !ğ
NULL
) {

627 ià(
rg‘
 =ğ
£lf
) {

628 
rg‘
 =¬g‘->
Ãxt
;

632 ià(!
	`dvmG‘F›ldBoŞ—n
(
rg‘
->
th»adObj
,

633 
gDvm
.
offJavaLªgTh»ad_d«mÚ
))

636 
	`LOGW
("threadid=%d:‚on-daemon id=%d still„unning‡t shutdown?!\n",

637 
th»adId
, 
rg‘
->threadId);

640 * 
th»adName
 = 
	`dvmG‘Th»adName
(
rg‘
);

641 
	`LOGD
("threadid=%d: suspending daemon id=%d‚ame='%s'\n",

642 
th»adId
, 
rg‘
->th»adId, 
th»adName
);

643 
	`ä“
(
th»adName
);

646 
	`lockTh»adSu¥’dCouÁ
();

647 
	`dvmAddToTh»adSu¥’dCouÁ
(&
rg‘
->
su¥’dCouÁ
, 1);

648 
	`uÆockTh»adSu¥’dCouÁ
();

649 
doWa™
 = 
Œue
;

651 
rg‘
 =¬g‘->
Ãxt
;

667 
	`dvmUÆockTh»adLi¡
();

669 ià(
doWa™
) {

670 
	`u¦“p
(200 * 1000);

672 
	`dvmLockTh»adLi¡
(
£lf
);

678 
i
;

679 
i
 = 0; i < 10; i++) {

680 
boŞ
 
®lSu¥’ded
 = 
Œue
;

682 
rg‘
 = 
gDvm
.
th»adLi¡
;

683 
rg‘
 !ğ
NULL
) {

684 ià(
rg‘
 =ğ
£lf
) {

685 
rg‘
 =¬g‘->
Ãxt
;

689 ià(
rg‘
->
¡©us
 =ğ
THREAD_RUNNING
 && !rg‘->
isSu¥’ded
) {

690 
	`LOGD
("th»adid=%d‚Ù„—dy y‘\n", 
rg‘
->
th»adId
);

691 
®lSu¥’ded
 = 
çl£
;

695 
rg‘
 =¬g‘->
Ãxt
;

698 ià(
®lSu¥’ded
) {

699 
	`LOGD
("th»adid=%d:‡Î d«mÚ havsu¥’ded\n", 
th»adId
);

702 
	`LOGD
("th»adid=%d: wa™šg fÜ d«mÚ tØsu¥’d\n", 
th»adId
);

705 
	`u¦“p
(200 * 1000);

707 
	`dvmUÆockTh»adLi¡
();

714 
rg‘
 = 
gDvm
.
th»adLi¡
;

715 
rg‘
 !ğ
NULL
) {

716 
Th»ad
* 
ÃxtT¬g‘
 = 
rg‘
->
Ãxt
;

717 
	`uÆškTh»ad
(
rg‘
);

718 
	`ä“Th»ad
(
rg‘
);

719 
rg‘
 = 
ÃxtT¬g‘
;

724 
	}
}

731 
boŞ
 
	$dvmP»pMašFÜJni
(
JNIEnv
* 
pEnv
)

733 
Th»ad
* 
£lf
;

736 
£lf
 = 
gDvm
.
th»adLi¡
;

737 
	`as£¹
(
£lf
->
th»adId
 =ğ
kMašTh»adId
);

740 ià(!
	`ü—‹FakeEÁryF¿me
(
£lf
))

741  
çl£
;

744 
	`dvmS‘JniEnvTh»adId
(
pEnv
, 
£lf
);

745 
	`dvmS‘Th»adJNIEnv
(
£lf
, (
JNIEnv
*è
pEnv
);

747  
Œue
;

748 
	}
}

756 
boŞ
 
	$dvmP»pMašTh»ad
()

758 
Th»ad
* 
th»ad
;

759 
Objeù
* 
groupObj
;

760 
Objeù
* 
th»adObj
;

761 
Objeù
* 
vmTh»adObj
;

762 
SŒšgObjeù
* 
th»adNameSŒ
;

763 
M‘hod
* 
š™
;

764 
JV®ue
 
unu£d
;

766 
	`LOGV
("+++ finishing…rep on main VMhread\n");

769 
th»ad
 = 
gDvm
.
th»adLi¡
;

770 
	`as£¹
(
th»ad
->
th»adId
 =ğ
kMašTh»adId
);

776 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgCÏss
)) {

777 
	`LOGE
("'Class' class failedo initialize\n");

778  
çl£
;

780 ià(!
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgTh»adGroup
) ||

781 !
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgTh»ad
) ||

782 !
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgVMTh»ad
))

784 
	`LOGE
("thread classes failedo initialize\n");

785  
çl£
;

788 
groupObj
 = 
	`dvmG‘MašTh»adGroup
();

789 ià(
groupObj
 =ğ
NULL
)

790  
çl£
;

796 
th»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgTh»ad
, 
ALLOC_DEFAULT
);

797 ià(
th»adObj
 =ğ
NULL
) {

798 
	`LOGE
("unableo‡llocate mainhread object\n");

799  
çl£
;

801 
	`dvmR–—£T¿ckedAÎoc
(
th»adObj
, 
NULL
);

803 
th»adNameSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
("maš", 
ALLOC_DEFAULT
);

804 ià(
th»adNameSŒ
 =ğ
NULL
)

805  
çl£
;

806 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
th»adNameSŒ
, 
NULL
);

808 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgTh»ad
, "<init>",

810 
	`as£¹
(
š™
 !ğ
NULL
);

811 
	`dvmC®lM‘hod
(
th»ad
, 
š™
, 
th»adObj
, &
unu£d
, 
groupObj
, 
th»adNameSŒ
,

812 
THREAD_NORM_PRIORITY
, 
çl£
);

813 ià(
	`dvmCheckExû±iÚ
(
th»ad
)) {

814 
	`LOGE
("exceptionhrown while constructing mainhread object\n");

815  
çl£
;

821 
vmTh»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgVMTh»ad
, 
ALLOC_DEFAULT
);

822 ià(
vmTh»adObj
 =ğ
NULL
) {

823 
	`LOGE
("unableo‡llocate main vmthread object\n");

824  
çl£
;

826 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

828 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgVMTh»ad
, "<init>",

830 
	`dvmC®lM‘hod
(
th»ad
, 
š™
, 
vmTh»adObj
, &
unu£d
, 
th»adObj
);

831 ià(
	`dvmCheckExû±iÚ
(
th»ad
)) {

832 
	`LOGE
("exceptionhrown while constructing main vmthread object\n");

833  
çl£
;

837 
	`as£¹
(
gDvm
.
offJavaLªgVMTh»ad_vmD©a
 != 0);

838 
	`dvmS‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, (
u4
)
th»ad
);

845 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
,

846 
vmTh»adObj
);

848 
th»ad
->
th»adObj
 =hreadObj;

855 
Objeù
* 
sy¡emLßd”
 = 
	`dvmG‘Sy¡emCÏssLßd”
();

856 ià(
sy¡emLßd”
 =ğ
NULL
) {

857 
	`LOGW
("WARNING: system class†oader is NULL (setting main ctxt)\n");

860 
ùxtCÏssLßd”Off£t
 = 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»ad
,

862 ià(
ùxtCÏssLßd”Off£t
 < 0) {

863 
	`LOGE
("Unableo find contextClassLoader field in Thread\n");

864  
çl£
;

866 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
ùxtCÏssLßd”Off£t
, 
sy¡emLßd”
);

873 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

875  
Œue
;

876 
	}
}

889 
Th»ad
* 
	$®locTh»ad
(
š‹½SckSize
)

891 
Th»ad
* 
th»ad
;

892 
u1
* 
¡ackBÙtom
;

894 
th»ad
 = (
Th»ad
*è
	`ÿÎoc
(1, (Thread));

895 ià(
th»ad
 =ğ
NULL
)

896  
NULL
;

898 
	`as£¹
(
š‹½SckSize
 >ğ
kMšSckSize
 && iÁ”pSckSiz<=
kMaxSckSize
);

900 
th»ad
->
¡©us
 = 
THREAD_INITIALIZING
;

901 
th»ad
->
su¥’dCouÁ
 = 0;

903 #ifdeà
WITH_ALLOC_LIMITS


904 
th»ad
->
®locLim™
 = -1;

914 #ifdeà
MALLOC_INTERP_STACK


915 
¡ackBÙtom
 = (
u1
*è
	`m®loc
(
š‹½SckSize
);

916 ià(
¡ackBÙtom
 =ğ
NULL
) {

917 
	`ä“
(
th»ad
);

918  
NULL
;

920 
	`mem£t
(
¡ackBÙtom
, 0xc5, 
š‹½SckSize
);

922 
¡ackBÙtom
 = 
	`mm­
(
NULL
, 
š‹½SckSize
, 
PROT_READ
 | 
PROT_WRITE
,

923 
MAP_PRIVATE
 | 
MAP_ANON
, -1, 0);

924 ià(
¡ackBÙtom
 =ğ
MAP_FAILED
) {

925 
	`ä“
(
th»ad
);

926  
NULL
;

930 
	`as£¹
(((
u4
)
¡ackBÙtom
 & 0x03) == 0);

931 
th»ad
->
š‹½SckSize
 = interpStackSize;

932 
th»ad
->
š‹½SckS¹
 = 
¡ackBÙtom
 + 
š‹½SckSize
;

933 
th»ad
->
š‹½SckEnd
 = 
¡ackBÙtom
 + 
STACK_OVERFLOW_RESERVE
;

936 
	`dvmIn™IÁ”pSck
(
th»ad
, 
š‹½SckSize
);

938  
th»ad
;

939 
	}
}

946 
pid_t
 
	$dvmG‘SysTh»adId
()

948 #ifdeà
HAVE_GETTID


949  
	`g‘tid
();

951  
	`g‘pid
();

953 
	}
}

964 
boŞ
 
	$´•¬eTh»ad
(
Th»ad
* 
th»ad
)

966 
	`assignTh»adId
(
th»ad
);

967 
th»ad
->
hªdË
 = 
	`±h»ad_£lf
();

968 
th»ad
->
sy¡emTid
 = 
	`dvmG‘SysTh»adId
();

972 
	`£tTh»adS–f
(
th»ad
);

974 
	`LOGV
("threadid=%d: interp stack‡t %p\n",

975 
th»ad
->
th»adId
,h»ad->
š‹½SckS¹
 -h»ad->
š‹½SckSize
);

980 
	`±h»ad_mu‹x_š™
(&
th»ad
->
švokeReq
.
lock
, 
NULL
);

981 
	`±h»ad_cÚd_š™
(&
th»ad
->
švokeReq
.
cv
, 
NULL
);

989 #ifdeà
USE_INDIRECT_REF


990 ià(!
	`dvmIn™IndœeùRefTabË
(&
th»ad
->
jniLoÿlRefTabË
,

991 
kJniLoÿlRefMš
, 
kJniLoÿlRefMax
, 
kIndœeùKšdLoÿl
))

992  
çl£
;

998 ià(!
	`dvmIn™Reã»nûTabË
(&
th»ad
->
jniLoÿlRefTabË
,

999 
kJniLoÿlRefMax
, kJniLocalRefMax))

1000  
çl£
;

1002 ià(!
	`dvmIn™Reã»nûTabË
(&
th»ad
->
š‹º®LoÿlRefTabË
,

1003 
kIÁ”ÇlRefDeçuÉ
, 
kIÁ”ÇlRefMax
))

1004  
çl£
;

1006 
	`mem£t
(&
th»ad
->
jniMÚ™ÜRefTabË
, 0, (thread->jniMonitorRefTable));

1008  
Œue
;

1009 
	}
}

1016 
	$uÆškTh»ad
(
Th»ad
* 
th»ad
)

1018 
	`LOG_THREAD
("th»adid=%d:„emovšg from†i¡\n", 
th»ad
->
th»adId
);

1019 ià(
th»ad
 =ğ
gDvm
.
th»adLi¡
) {

1020 
	`as£¹
(
th»ad
->
´ev
 =ğ
NULL
);

1021 
gDvm
.
th»adLi¡
 = 
th»ad
->
Ãxt
;

1023 
	`as£¹
(
th»ad
->
´ev
 !ğ
NULL
);

1024 
th»ad
->
´ev
->
Ãxt
 =hread->next;

1026 ià(
th»ad
->
Ãxt
 !ğ
NULL
)

1027 
th»ad
->
Ãxt
->
´ev
 =hread->prev;

1028 
th»ad
->
´ev
 =h»ad->
Ãxt
 = 
NULL
;

1029 
	}
}

1034 
	$ä“Th»ad
(
Th»ad
* 
th»ad
)

1036 ià(
th»ad
 =ğ
NULL
)

1040 
	`LOGVV
("th»adid=%d: f»ešg\n", 
th»ad
->
th»adId
);

1042 ià(
th»ad
->
š‹½SckS¹
 !ğ
NULL
) {

1043 
u1
* 
š‹½SckBÙtom
;

1045 
š‹½SckBÙtom
 = 
th»ad
->
š‹½SckS¹
;

1046 
š‹½SckBÙtom
 -ğ
th»ad
->
š‹½SckSize
;

1047 #ifdeà
MALLOC_INTERP_STACK


1048 
	`ä“
(
š‹½SckBÙtom
);

1050 ià(
	`munm­
(
š‹½SckBÙtom
, 
th»ad
->
š‹½SckSize
) != 0)

1051 
	`LOGW
("munmap(thread stack) failed\n");

1055 #ifdeà
USE_INDIRECT_REF


1056 
	`dvmCË¬IndœeùRefTabË
(&
th»ad
->
jniLoÿlRefTabË
);

1058 
	`dvmCË¬Reã»nûTabË
(&
th»ad
->
jniLoÿlRefTabË
);

1060 
	`dvmCË¬Reã»nûTabË
(&
th»ad
->
š‹º®LoÿlRefTabË
);

1061 ià(&
th»ad
->
jniMÚ™ÜRefTabË
.
bË
 !ğ
NULL
)

1062 
	`dvmCË¬Reã»nûTabË
(&
th»ad
->
jniMÚ™ÜRefTabË
);

1064 
	`ä“
(
th»ad
);

1065 
	}
}

1070 
Th»ad
* 
	$dvmTh»adS–f
()

1072  (
Th»ad
*è
	`±h»ad_g‘¥ecific
(
gDvm
.
±h»adKeyS–f
);

1073 
	}
}

1078 
	$£tTh»adS–f
(
Th»ad
* 
th»ad
)

1080 
cc
;

1082 
cc
 = 
	`±h»ad_£t¥ecific
(
gDvm
.
±h»adKeyS–f
, 
th»ad
);

1083 ià(
cc
 != 0) {

1090 ià(
th»ad
 !ğ
NULL
) {

1091 
	`LOGE
("±h»ad_£t¥ecific(%pèçed,ƒ¼=%d\n", 
th»ad
, 
cc
);

1092 
	`dvmAbÜt
();

1095 
	}
}

1113 
	$th»adEx™Check
(* 
¬g
)

1115 
Th»ad
* 
th»ad
 = (Th»ad*è
¬g
;

1117 
	`LOGI
("IÀth»adEx™Check %p\n", 
¬g
);

1118 
	`as£¹
(
th»ad
 !ğ
NULL
);

1120 ià(
th»ad
->
¡©us
 !ğ
THREAD_ZOMBIE
) {

1121 
	`LOGE
("Nativehreadƒxited withoutelling us\n");

1122 
	`dvmAbÜt
();

1124 
	}
}

1136 
	$assignTh»adId
(
Th»ad
* 
th»ad
)

1145 
num
 = 
	`dvmAÎocB™
(
gDvm
.
th»adIdM­
);

1146 ià(
num
 < 0) {

1147 
	`LOGE
("Ran out ofhread IDs\n");

1148 
	`dvmAbÜt
();

1151 
th»ad
->
th»adId
 = ((
num
 + 1) << 1) | 1;

1153 
	`as£¹
(
th»ad
->
th»adId
 != 0);

1154 
	`as£¹
(
th»ad
->
th»adId
 !ğ
DVM_LOCK_INITIAL_THIN_VALUE
);

1155 
	}
}

1160 
	$»Ëa£Th»adId
(
Th»ad
* 
th»ad
)

1162 
	`as£¹
(
th»ad
->
th»adId
 > 0);

1163 
	`dvmCË¬B™
(
gDvm
.
th»adIdM­
, (
th»ad
->
th»adId
 >> 1) - 1);

1164 
th»ad
->
th»adId
 = 0;

1165 
	}
}

1175 
boŞ
 
	$ü—‹FakeEÁryF¿me
(
Th»ad
* 
th»ad
)

1177 
	`as£¹
(
th»ad
->
th»adId
 =ğ
kMašTh»adId
);

1180 ià(
gDvm
.
m‘hFakeN©iveEÁry
 =ğ
NULL
) {

1181 
CÏssObjeù
* 
ÇtiveS¹
;

1182 
M‘hod
* 
mašM‘h
;

1184 
ÇtiveS¹
 = 
	`dvmFšdSy¡emCÏssNoIn™
(

1186 ià(
ÇtiveS¹
 =ğ
NULL
) {

1187 
	`LOGE
("Unableo find dalvik.system.NativeStart class\n");

1188  
çl£
;

1208 
mašM‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
ÇtiveS¹
,

1210 ià(
mašM‘h
 =ğ
NULL
) {

1211 
	`LOGE
("Unableo find 'main' in dalvik.system.NativeStart\n");

1212  
çl£
;

1215 
gDvm
.
m‘hFakeN©iveEÁry
 = 
mašM‘h
;

1218  
	`dvmPushJNIF¿me
(
th»ad
, 
gDvm
.
m‘hFakeN©iveEÁry
);

1219 
	}
}

1227 
boŞ
 
	$ü—‹FakeRunF¿me
(
Th»ad
* 
th»ad
)

1229 
CÏssObjeù
* 
ÇtiveS¹
;

1230 
M‘hod
* 
runM‘h
;

1232 
	`as£¹
(
th»ad
->
th»adId
 != 1);

1234 
ÇtiveS¹
 =

1235 
	`dvmFšdSy¡emCÏssNoIn™
("Ldalvik/system/NativeStart;");

1236 ià(
ÇtiveS¹
 =ğ
NULL
) {

1237 
	`LOGE
("Unableo find dalvik.system.NativeStart class\n");

1238  
çl£
;

1241 
runM‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
ÇtiveS¹
, "run", "()V");

1242 ià(
runM‘h
 =ğ
NULL
) {

1243 
	`LOGE
("Unableo find 'run' in dalvik.system.NativeStart\n");

1244  
çl£
;

1247  
	`dvmPushJNIF¿me
(
th»ad
, 
runM‘h
);

1248 
	}
}

1253 
	$£tTh»adName
(cÚ¡ *
th»adName
)

1255 #ià
	`defšed
(
HAVE_PRCTL
)

1256 
hasAt
 = 0;

1257 
hasDÙ
 = 0;

1258 cÚ¡ *
s
 = 
th»adName
;

1259 *
s
) {

1260 ià(*
s
 =ğ'.'è
hasDÙ
 = 1;

1261 ià(*
s
 =ğ'@'è
hasAt
 = 1;

1262 
s
++;

1264 
Ën
 = 
s
 - 
th»adName
;

1265 ià(
Ën
 < 15 || 
hasAt
 || !
hasDÙ
) {

1266 
s
 = 
th»adName
;

1268 
s
 = 
th»adName
 + 
Ën
 - 15;

1270 
	`´ùl
(
PR_SET_NAME
, (è
s
, 0, 0, 0);

1272 
	}
}

1289 
boŞ
 
	$dvmC»©eIÁ”pTh»ad
(
Objeù
* 
th»adObj
, 
»qSckSize
)

1291 
±h»ad_©Œ_t
 
th»adA‰r
;

1292 
±h»ad_t
 
th»adHªdË
;

1293 
Th»ad
* 
£lf
;

1294 
Th»ad
* 
ÃwTh»ad
 = 
NULL
;

1295 
Objeù
* 
vmTh»adObj
 = 
NULL
;

1296 
¡ackSize
;

1298 
	`as£¹
(
th»adObj
 !ğ
NULL
);

1300 if(
gDvm
.
zygÙe
) {

1302 
SŒšgObjeù
* 
ÇmeSŒ
 = (SŒšgObjeù*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

1303 
gDvm
.
offJavaLªgTh»ad_Çme
);

1304 * 
th»adName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

1305 
boŞ
 
´of”Th»ad
 = 
	`¡rcmp
(
th»adName
, "SamplingProfiler") == 0;

1306 
	`ä“
(
th»adName
);

1307 ià(!
´of”Th»ad
) {

1308 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalStateException;",

1311 
ç
;

1315 
£lf
 = 
	`dvmTh»adS–f
();

1316 ià(
»qSckSize
 == 0)

1317 
¡ackSize
 = 
gDvm
.stackSize;

1318 ià(
»qSckSize
 < 
kMšSckSize
)

1319 
¡ackSize
 = 
kMšSckSize
;

1320 ià(
»qSckSize
 > 
kMaxSckSize
)

1321 
¡ackSize
 = 
kMaxSckSize
;

1323 
¡ackSize
 = 
»qSckSize
;

1325 
	`±h»ad_©Œ_š™
(&
th»adA‰r
);

1326 
	`±h»ad_©Œ_£td‘ach¡©e
(&
th»adA‰r
, 
PTHREAD_CREATE_DETACHED
);

1332 
vmTh»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgVMTh»ad
, 
ALLOC_DEFAULT
);

1333 ià(
vmTh»adObj
 =ğ
NULL
)

1334 
ç
;

1336 
ÃwTh»ad
 = 
	`®locTh»ad
(
¡ackSize
);

1337 ià(
ÃwTh»ad
 =ğ
NULL
)

1338 
ç
;

1339 
ÃwTh»ad
->
th»adObj
 =hreadObj;

1341 
	`as£¹
(
ÃwTh»ad
->
¡©us
 =ğ
THREAD_INITIALIZING
);

1350 
	`dvmLockTh»adLi¡
(
£lf
);

1352 ià(
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
è!ğ
NULL
) {

1353 
	`dvmUÆockTh»adLi¡
();

1354 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalThreadStateException;",

1356 
ç
;

1367 
	`dvmS‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, (
u4
)
ÃwTh»ad
);

1368 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
vmTh»adObj
);

1373 
	`dvmUÆockTh»adLi¡
();

1375 
cc
, 
ŞdStus
;

1376 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

1377 
cc
 = 
	`±h»ad_ü—‹
(&
th»adHªdË
, &
th»adA‰r
, 
š‹½Th»adS¹
,

1378 
ÃwTh»ad
);

1379 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, oldStatus);

1381 ià(
cc
 != 0) {

1387 
	`LOGE
("Th»ad c»©iÚ faed (”r=%s)\n", 
	`¡»¼Ü
(
”ºo
));

1389 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
NULL
);

1391 
	`dvmThrowExû±iÚ
("Ljava/lang/OutOfMemoryError;",

1393 
ç
;

1475 
	`dvmLockTh»adLi¡
(
£lf
);

1476 
	`as£¹
(
£lf
->
¡©us
 =ğ
THREAD_RUNNING
);

1477 
£lf
->
¡©us
 = 
THREAD_VMWAIT
;

1478 
ÃwTh»ad
->
¡©us
 !ğ
THREAD_STARTING
)

1479 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adS¹CÚd
, &gDvm.
th»adLi¡Lock
);

1481 
	`LOG_THREAD
("th»adid=%d:‡ddšgØli¡\n", 
ÃwTh»ad
->
th»adId
);

1482 
ÃwTh»ad
->
Ãxt
 = 
gDvm
.
th»adLi¡
->next;

1483 ià(
ÃwTh»ad
->
Ãxt
 !ğ
NULL
)

1484 
ÃwTh»ad
->
Ãxt
->
´ev
 =‚ewThread;

1485 
ÃwTh»ad
->
´ev
 = 
gDvm
.
th»adLi¡
;

1486 
gDvm
.
th»adLi¡
->
Ãxt
 = 
ÃwTh»ad
;

1488 ià(!
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_d«mÚ
))

1489 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

1491 
	`dvmUÆockTh»adLi¡
();

1494 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1507 
	`dvmLockTh»adLi¡
(
£lf
);

1509 
	`as£¹
(
ÃwTh»ad
->
¡©us
 =ğ
THREAD_STARTING
);

1510 
ÃwTh»ad
->
¡©us
 = 
THREAD_VMWAIT
;

1511 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1513 
	`dvmUÆockTh»adLi¡
();

1515 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

1516  
Œue
;

1518 
ç
:

1519 
	`ä“Th»ad
(
ÃwTh»ad
);

1520 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»adObj
, 
NULL
);

1521  
çl£
;

1522 
	}
}

1527 * 
	$š‹½Th»adS¹
(* 
¬g
)

1529 
Th»ad
* 
£lf
 = (Th»ad*è
¬g
;

1531 *
th»adName
 = 
	`dvmG‘Th»adName
(
£lf
);

1532 
	`£tTh»adName
(
th»adName
);

1533 
	`ä“
(
th»adName
);

1538 
	`´•¬eTh»ad
(
£lf
);

1540 
	`LOG_THREAD
("th»adid=%d: c»©ed from iÁ”p\n", 
£lf
->
th»adId
);

1546 
	`dvmLockTh»adLi¡
(
£lf
);

1547 
£lf
->
¡©us
 = 
THREAD_STARTING
;

1548 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1563 
£lf
->
¡©us
 !ğ
THREAD_VMWAIT
)

1564 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adS¹CÚd
, &gDvm.
th»adLi¡Lock
);

1566 
	`dvmUÆockTh»adLi¡
();

1571 
£lf
->
jniEnv
 = 
	`dvmC»©eJNIEnv
(self);

1577 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1583 ià(
gDvm
.
debugg”CÚÃùed
)

1584 
	`dvmDbgPo¡Th»adS¹
(
£lf
);

1594 
´iÜ™y
 = 
	`dvmG‘F›ldIÁ
(
£lf
->
th»adObj
,

1595 
gDvm
.
offJavaLªgTh»ad_´iÜ™y
);

1596 
	`dvmChªgeTh»adPriÜ™y
(
£lf
, 
´iÜ™y
);

1604 
M‘hod
* 
run
 = 
£lf
->
th»adObj
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgTh»ad_run
];

1605 
JV®ue
 
unu£d
;

1607 
	`LOGV
("th»adid=%d: c®lšg„un()\n", 
£lf
->
th»adId
);

1608 
	`as£¹
(
	`¡rcmp
(
run
->
Çme
, "run") == 0);

1609 
	`dvmC®lM‘hod
(
£lf
, 
run
, s–f->
th»adObj
, &
unu£d
);

1610 
	`LOGV
("th»adid=%d:ƒx™šg\n", 
£lf
->
th»adId
);

1616 
	`dvmD‘achCu¼’tTh»ad
();

1618  
NULL
;

1619 
	}
}

1631 
	$th»adEx™UnÿughtExû±iÚ
(
Th»ad
* 
£lf
, 
Objeù
* 
group
)

1633 
Objeù
* 
exû±iÚ
;

1634 
Objeù
* 
hªdËrObj
;

1635 
CÏssObjeù
* 
throwabË
;

1636 
M‘hod
* 
unÿughtHªdËr
 = 
NULL
;

1637 
In¡F›ld
* 
th»adHªdËr
;

1639 
	`LOGW
("threadid=%d:hreadƒxiting with uncaughtƒxception (group=%p)\n",

1640 
£lf
->
th»adId
, 
group
);

1641 
	`as£¹
(
group
 !ğ
NULL
);

1647 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1648 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1649 
	`dvmCË¬Exû±iÚ
(
£lf
);

1655 
th»adHªdËr
 = 
	`dvmFšdIn¡ªûF›ld
(
gDvm
.
şassJavaLªgTh»ad
,

1657 ià(
th»adHªdËr
 =ğ
NULL
) {

1658 
	`LOGW
("WARNING:‚o 'uncaughtHandler' field in java/lang/Thread\n");

1659 
ba
;

1661 
hªdËrObj
 = 
	`dvmG‘F›ldObjeù
(
£lf
->
th»adObj
, 
th»adHªdËr
->
by‹Off£t
);

1662 ià(
hªdËrObj
 =ğ
NULL
)

1663 
hªdËrObj
 = 
group
;

1668 
unÿughtHªdËr
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
hªdËrObj
->
şazz
,

1671 ià(
unÿughtHªdËr
 !ğ
NULL
) {

1674 
JV®ue
 
unu£d
;

1675 
	`dvmC®lM‘hod
(
£lf
, 
unÿughtHªdËr
, 
hªdËrObj
, &
unu£d
,

1676 
£lf
->
th»adObj
, 
exû±iÚ
);

1679 
	`LOGW
("WARNING:‚o 'uncaughtException' method in class %s\n",

1680 
hªdËrObj
->
şazz
->
desütÜ
);

1681 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

1682 
	`dvmLogExû±iÚSckT¿û
();

1685 
ba
:

1686 #ià
	`defšed
(
WITH_JIT
)

1688 
	`lockTh»adSu¥’dCouÁ
();

1689 
	`dvmAddToTh»adSu¥’dCouÁ
(&
£lf
->
su¥’dCouÁ
, -self->suspendCount);

1690 
	`uÆockTh»adSu¥’dCouÁ
();

1692 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

1693 
	}
}

1704 
boŞ
 
	$dvmC»©eIÁ”ÇlTh»ad
(
±h»ad_t
* 
pHªdË
, cÚ¡ * 
Çme
,

1705 
IÁ”ÇlTh»adS¹
 
func
, * 
funcArg
)

1707 
IÁ”ÇlS¹Args
* 
pArgs
;

1708 
Objeù
* 
sy¡emGroup
;

1709 
±h»ad_©Œ_t
 
th»adA‰r
;

1710 vŞ©
Th»ad
* 
ÃwTh»ad
 = 
NULL
;

1711 vŞ©
ü—‹Stus
 = 0;

1713 
sy¡emGroup
 = 
	`dvmG‘Sy¡emTh»adGroup
();

1714 ià(
sy¡emGroup
 =ğ
NULL
)

1715  
çl£
;

1717 
pArgs
 = (
IÁ”ÇlS¹Args
*è
	`m®loc
((*pArgs));

1718 
pArgs
->
func
 = func;

1719 
pArgs
->
funcArg
 = funcArg;

1720 
pArgs
->
Çme
 = 
	`¡rdup
(name);

1721 
pArgs
->
group
 = 
sy¡emGroup
;

1722 
pArgs
->
isD«mÚ
 = 
Œue
;

1723 
pArgs
->
pTh»ad
 = &
ÃwTh»ad
;

1724 
pArgs
->
pC»©eStus
 = &
ü—‹Stus
;

1726 
	`±h»ad_©Œ_š™
(&
th»adA‰r
);

1729 ià(
	`±h»ad_ü—‹
(
pHªdË
, &
th»adA‰r
, 
š‹º®Th»adS¹
,

1730 
pArgs
) != 0)

1732 
	`LOGE
("internalhread creation failed\n");

1733 
	`ä“
(
pArgs
->
Çme
);

1734 
	`ä“
(
pArgs
);

1735  
çl£
;

1753 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1754 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

1755 
	`dvmLockTh»adLi¡
(
£lf
);

1756 
ü—‹Stus
 == 0)

1757 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adS¹CÚd
, &gDvm.
th»adLi¡Lock
);

1759 ià(
ÃwTh»ad
 =ğ
NULL
) {

1760 
	`LOGW
("š‹º®h»ad c»©çed (ü—‹Stus=%d)\n", 
ü—‹Stus
);

1761 
	`as£¹
(
ü—‹Stus
 < 0);

1763 
	`dvmUÆockTh»adLi¡
();

1764 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1765  
çl£
;

1771 
	`dvmUÆockTh»adLi¡
();

1772 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

1774  
Œue
;

1775 
	}
}

1785 * 
	$š‹º®Th»adS¹
(* 
¬g
)

1787 
IÁ”ÇlS¹Args
* 
pArgs
 = (IÁ”ÇlS¹Args*è
¬g
;

1788 
JavaVMA‰achArgs
 
jniArgs
;

1790 
jniArgs
.
v”siÚ
 = 
JNI_VERSION_1_2
;

1791 
jniArgs
.
Çme
 = 
pArgs
->name;

1792 
jniArgs
.
group
 = 
pArgs
->group;

1794 
	`£tTh»adName
(
pArgs
->
Çme
);

1797 ià(
	`dvmA‰achCu¼’tTh»ad
(&
jniArgs
, 
pArgs
->
isD«mÚ
)) {

1803 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

1804 *
pArgs
->
pC»©eStus
 = 1;

1805 *
pArgs
->
pTh»ad
 = 
	`dvmTh»adS–f
();

1806 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1807 
	`dvmUÆockTh»adLi¡
();

1809 
	`LOG_THREAD
("threadid=%d: internal '%s'\n",

1810 
	`dvmTh»adS–f
()->
th»adId
, 
pArgs
->
Çme
);

1813 (*
pArgs
->
func
)ÕArgs->
funcArg
);

1816 
	`dvmD‘achCu¼’tTh»ad
();

1823 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

1824 *
pArgs
->
pC»©eStus
 = -1;

1825 
	`as£¹
(*
pArgs
->
pTh»ad
 =ğ
NULL
);

1826 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adS¹CÚd
);

1827 
	`dvmUÆockTh»adLi¡
();

1829 
	`as£¹
(*
pArgs
->
pTh»ad
 =ğ
NULL
);

1832 
	`ä“
(
pArgs
->
Çme
);

1833 
	`ä“
(
pArgs
);

1834  
NULL
;

1835 
	}
}

1842 
boŞ
 
	$dvmA‰achCu¼’tTh»ad
(cÚ¡ 
JavaVMA‰achArgs
* 
pArgs
, 
boŞ
 
isD«mÚ
)

1844 
Th»ad
* 
£lf
 = 
NULL
;

1845 
Objeù
* 
th»adObj
 = 
NULL
;

1846 
Objeù
* 
vmTh»adObj
 = 
NULL
;

1847 
SŒšgObjeù
* 
th»adNameSŒ
 = 
NULL
;

1848 
M‘hod
* 
š™
;

1849 
boŞ
 
ok
, 
»t
;

1852 
£lf
 = 
	`®locTh»ad
(
gDvm
.
¡ackSize
);

1853 ià(
£lf
 =ğ
NULL
)

1854 
ç
;

1855 
	`£tTh»adS–f
(
£lf
);

1869 
th»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgTh»ad
, 
ALLOC_NO_GC
);

1870 ià(
th»adObj
 =ğ
NULL
)

1871 
ç
;

1872 
vmTh»adObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgVMTh»ad
, 
ALLOC_NO_GC
);

1873 ià(
vmTh»adObj
 =ğ
NULL
)

1874 
ç
;

1876 
£lf
->
th»adObj
 =hreadObj;

1877 
	`dvmS‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, (
u4
)
£lf
);

1882 ià(
pArgs
->
Çme
 !ğ
NULL
) {

1883 
th»adNameSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
pArgs
->
Çme
, 
ALLOC_NO_GC
);

1884 ià(
th»adNameSŒ
 =ğ
NULL
) {

1885 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1886 
ç
;

1890 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgTh»ad
, "<init>",

1892 ià(
š™
 =ğ
NULL
) {

1893 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1894 
ç
;

1902 
	`dvmLockTh»adLi¡
(
£lf
);

1903 
ok
 = 
	`´•¬eTh»ad
(
£lf
);

1904 
	`dvmUÆockTh»adLi¡
();

1905 ià(!
ok
)

1906 
ç
;

1908 
£lf
->
jniEnv
 = 
	`dvmC»©eJNIEnv
(self);

1909 ià(
£lf
->
jniEnv
 =ğ
NULL
)

1910 
ç
;

1918 ià(!
	`ü—‹FakeRunF¿me
(
£lf
))

1919 
ç
;

1924 
	`LOG_THREAD
("th»adid=%d:‡ddšgØli¡ (©ched)\n", 
£lf
->
th»adId
);

1930 
£lf
->
¡©us
 = 
THREAD_VMWAIT
;

1936 
	`dvmLockTh»adLi¡
(
£lf
);

1938 
£lf
->
Ãxt
 = 
gDvm
.
th»adLi¡
->next;

1939 ià(
£lf
->
Ãxt
 !ğ
NULL
)

1940 
£lf
->
Ãxt
->
´ev
 = self;

1941 
£lf
->
´ev
 = 
gDvm
.
th»adLi¡
;

1942 
gDvm
.
th»adLi¡
->
Ãxt
 = 
£lf
;

1943 ià(!
isD«mÚ
)

1944 
gDvm
.
nÚD«mÚTh»adCouÁ
++;

1946 
	`dvmUÆockTh»adLi¡
();

1955 
	`dvmLockMu‹x
(&
gDvm
.
gcH—pLock
);

1956 
	`dvmUÆockMu‹x
(&
gDvm
.
gcH—pLock
);

1962 
	`dvmChªgeStus
(
£lf
, 
THREAD_RUNNING
);

1975 
JV®ue
 
unu£d
;

1976 
	`dvmC®lM‘hod
(
£lf
, 
š™
, 
th»adObj
, &
unu£d
, (
Objeù
*)
pArgs
->
group
,

1977 
th»adNameSŒ
, 
	`g‘Th»adPriÜ™yFromSy¡em
(), 
isD«mÚ
);

1978 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1979 
	`LOGE
("exceptionhrown while constructing‡ttachedhread object\n");

1980 
ç_uÆšk
;

1994 ià(
	`dvmG‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
è!ğ
NULL
) {

1995 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalThreadStateException;",

2009 
»t
 = 
çl£
;

2011 
»t
 = 
Œue
;

2012 
	`dvmS‘F›ldObjeù
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
vmTh»adObj
);

2015 
	`dvmCË¬AÎocFÏgs
(
th»adObj
, 
ALLOC_NO_GC
);

2016 
	`dvmCË¬AÎocFÏgs
(
vmTh»adObj
, 
ALLOC_NO_GC
);

2021 
£lf
->
th»adObj
 =hreadObj;

2023 
	`LOG_THREAD
("threadid=%d:‡ttached from‚ative,‚ame=%s\n",

2024 
£lf
->
th»adId
, 
pArgs
->
Çme
);

2027 ià(
gDvm
.
debugg”CÚÃùed
)

2028 
	`dvmDbgPo¡Th»adS¹
(
£lf
);

2030  
»t
;

2032 
ç_uÆšk
:

2033 
	`dvmLockTh»adLi¡
(
£lf
);

2034 
	`uÆškTh»ad
(
£lf
);

2035 ià(!
isD«mÚ
)

2036 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

2037 
	`dvmUÆockTh»adLi¡
();

2039 
ç
:

2040 
	`dvmCË¬AÎocFÏgs
(
th»adObj
, 
ALLOC_NO_GC
);

2041 
	`dvmCË¬AÎocFÏgs
(
vmTh»adObj
, 
ALLOC_NO_GC
);

2042 ià(
£lf
 !ğ
NULL
) {

2043 ià(
£lf
->
jniEnv
 !ğ
NULL
) {

2044 
	`dvmDe¡royJNIEnv
(
£lf
->
jniEnv
);

2045 
£lf
->
jniEnv
 = 
NULL
;

2047 
	`ä“Th»ad
(
£lf
);

2049 
	`£tTh»adS–f
(
NULL
);

2050  
çl£
;

2051 
	}
}

2076 
	$dvmD‘achCu¼’tTh»ad
()

2078 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2079 
Objeù
* 
vmTh»ad
;

2080 
Objeù
* 
group
;

2090 
curD•th
 = 
	`dvmCompu‹ExaùF¿meD•th
(
£lf
->
curF¿me
);

2091 ià(
curD•th
 != 0) {

2092 
boŞ
 
tİIsN©ive
 = 
çl£
;

2094 ià(
curD•th
 == 1) {

2096 
	`as£¹
(!
	`dvmIsB»akF¿me
(
£lf
->
curF¿me
));

2097 
SckSaveA»a
* 
s§
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

2098 ià(
	`dvmIsN©iveM‘hod
(
s§
->
m‘hod
))

2099 
tİIsN©ive
 = 
Œue
;

2102 ià(!
tİIsN©ive
) {

2103 
	`LOGE
("ERROR: detachinghread with interp frames (count=%d)\n",

2104 
curD•th
);

2105 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

2106 
	`dvmAbÜt
();

2110 
group
 = 
	`dvmG‘F›ldObjeù
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_group
);

2111 
	`LOG_THREAD
("th»adid=%d: d‘ach (group=%p)\n", 
£lf
->
th»adId
, 
group
);

2118 
	`dvmR–—£JniMÚ™Üs
(
£lf
);

2123 ià(
	`dvmCheckExû±iÚ
(
£lf
))

2124 
	`th»adEx™UnÿughtExû±iÚ
(
£lf
, 
group
);

2129 ià(
group
 !ğ
NULL
) {

2130 
M‘hod
* 
»moveTh»ad
 =

2131 
group
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgTh»adGroup_»moveTh»ad
];

2132 
JV®ue
 
unu£d
;

2133 
	`dvmC®lM‘hod
(
£lf
, 
»moveTh»ad
, 
group
, &
unu£d
, s–f->
th»adObj
);

2142 
vmTh»ad
 = 
	`dvmG‘F›ldObjeù
(
£lf
->
th»adObj
,

2143 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
);

2144 
	`dvmAddT¿ckedAÎoc
(
vmTh»ad
, 
£lf
);

2145 
	`dvmS‘F›ldObjeù
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
, 
NULL
);

2148 
	`dvmS‘F›ldObjeù
(
vmTh»ad
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
, 
NULL
);

2158 ià(
gDvm
.
debugg”CÚÃùed
)

2159 
	`dvmDbgPo¡Th»adD—th
(
£lf
);

2165 
	`dvmLockObjeù
(
£lf
, 
vmTh»ad
);

2166 
	`dvmObjeùNÙifyAÎ
(
£lf
, 
vmTh»ad
);

2167 
	`dvmUÆockObjeù
(
£lf
, 
vmTh»ad
);

2169 
	`dvmR–—£T¿ckedAÎoc
(
vmTh»ad
, 
£lf
);

2170 
vmTh»ad
 = 
NULL
;

2177 
£lf
->
¡©us
 = 
THREAD_VMWAIT
;

2179 #ifdeà
WITH_PROFILER


2192 
M‘hodT¿ûS‹
* 
ŒaûS‹
 = &
gDvm
.
m‘hodT¿û
;

2194 
	`dvmLockMu‹x
(&
ŒaûS‹
->
¡¬tStİLock
);

2195 ià(
ŒaûS‹
->
ŒaûEÇbËd
) {

2196 
	`LOGI
("threadid=%d: waiting for methodraceo finish\n",

2197 
£lf
->
th»adId
);

2198 
ŒaûS‹
->
ŒaûEÇbËd
) {

2199 
cc
;

2200 
cc
 = 
	`±h»ad_cÚd_wa™
(&
ŒaûS‹
->
th»adEx™CÚd
,

2201 &
ŒaûS‹
->
¡¬tStİLock
);

2202 
	`as£¹
(
cc
 == 0);

2205 
	`dvmUÆockMu‹x
(&
ŒaûS‹
->
¡¬tStİLock
);

2208 
	`dvmLockTh»adLi¡
(
£lf
);

2213 
	`dvmDe¡royJNIEnv
(
£lf
->
jniEnv
);

2214 
£lf
->
jniEnv
 = 
NULL
;

2216 
£lf
->
¡©us
 = 
THREAD_ZOMBIE
;

2221 
	`uÆškTh»ad
(
£lf
);

2227 ià(!
	`dvmG‘F›ldBoŞ—n
(
£lf
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_d«mÚ
)) {

2228 
gDvm
.
nÚD«mÚTh»adCouÁ
--;

2230 ià(
gDvm
.
nÚD«mÚTh»adCouÁ
 == 0) {

2231 
cc
;

2233 
	`LOGV
("th»adid=%d:†a¡‚Ú-d«mÚh»ad\n", 
£lf
->
th»adId
);

2236 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvm
.
vmEx™CÚd
);

2237 
	`as£¹
(
cc
 == 0);

2241 
	`LOGV
("th»adid=%d: bye!\n", 
£lf
->
th»adId
);

2242 
	`»Ëa£Th»adId
(
£lf
);

2243 
	`dvmUÆockTh»adLi¡
();

2245 
	`£tTh»adS–f
(
NULL
);

2247 
	`dvmD‘achSy¡emTh»ad
(
£lf
);

2249 
	`ä“Th»ad
(
£lf
);

2250 
	}
}

2264 
	$dvmSu¥’dTh»ad
(
Th»ad
* 
th»ad
)

2266 
	`as£¹
(
th»ad
 !ğ
NULL
);

2267 
	`as£¹
(
th»ad
 !ğ
	`dvmTh»adS–f
());

2270 
	`lockTh»adSu¥’dCouÁ
();

2271 
	`dvmAddToTh»adSu¥’dCouÁ
(&
th»ad
->
su¥’dCouÁ
, 1);

2272 
th»ad
->
dbgSu¥’dCouÁ
++;

2274 
	`LOG_THREAD
("threadid=%d: suspend++,‚ow=%d\n",

2275 
th»ad
->
th»adId
,h»ad->
su¥’dCouÁ
);

2276 
	`uÆockTh»adSu¥’dCouÁ
();

2278 
	`wa™FÜTh»adSu¥’d
(
	`dvmTh»adS–f
(), 
th»ad
);

2279 
	}
}

2292 
	$dvmResumeTh»ad
(
Th»ad
* 
th»ad
)

2294 
	`as£¹
(
th»ad
 !ğ
NULL
);

2295 
	`as£¹
(
th»ad
 !ğ
	`dvmTh»adS–f
());

2298 
	`lockTh»adSu¥’dCouÁ
();

2299 ià(
th»ad
->
su¥’dCouÁ
 > 0) {

2300 
	`dvmAddToTh»adSu¥’dCouÁ
(&
th»ad
->
su¥’dCouÁ
, -1);

2301 
th»ad
->
dbgSu¥’dCouÁ
--;

2303 
	`LOG_THREAD
("threadid=%d: suspendCount‡lready zero\n",

2304 
th»ad
->
th»adId
);

2307 
	`LOG_THREAD
("threadid=%d: suspend--,‚ow=%d\n",

2308 
th»ad
->
th»adId
,h»ad->
su¥’dCouÁ
);

2310 ià(
th»ad
->
su¥’dCouÁ
 == 0) {

2311 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adSu¥’dCouÁCÚd
);

2312 
	`as£¹
(
cc
 == 0);

2315 
	`uÆockTh»adSu¥’dCouÁ
();

2316 
	}
}

2321 
	$dvmSu¥’dS–f
(
boŞ
 
jdwpAùiv™y
)

2323 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2326 
	`as£¹
(
gDvm
.
jdwpS‹
 !ğ
NULL
);

2327 ià(
£lf
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
)) {

2328 
	`as£¹
(
çl£
);

2337 
	`lockTh»adSu¥’dCouÁ
();

2338 
	`dvmAddToTh»adSu¥’dCouÁ
(&
£lf
->
su¥’dCouÁ
, 1);

2339 
£lf
->
dbgSu¥’dCouÁ
++;

2344 
	`as£¹
(
£lf
->
su¥’dCouÁ
 > 0);

2345 
£lf
->
isSu¥’ded
 = 
Œue
;

2346 
	`LOG_THREAD
("th»adid=%d: s–f-su¥’dšg (dbg)\n", 
£lf
->
th»adId
);

2355 ià(
jdwpAùiv™y
) {

2358 
	`dvmJdwpCË¬Wa™FÜEv’tTh»ad
(
gDvm
.
jdwpS‹
);

2361 
£lf
->
su¥’dCouÁ
 != 0) {

2362 
cc
;

2363 
cc
 = 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adSu¥’dCouÁCÚd
,

2364 &
gDvm
.
th»adSu¥’dCouÁLock
);

2365 
	`as£¹
(
cc
 == 0);

2366 ià(
£lf
->
su¥’dCouÁ
 != 0) {

2373 
	`LOGD
("threadid=%d: still suspended‡fter undo (sc=%d dc=%d s=%c)\n",

2374 
£lf
->
th»adId
, s–f->
su¥’dCouÁ
, s–f->
dbgSu¥’dCouÁ
,

2375 
£lf
->
isSu¥’ded
 ? 'Y' : 'N');

2378 
	`as£¹
(
£lf
->
su¥’dCouÁ
 =ğ0 && s–f->
dbgSu¥’dCouÁ
 == 0);

2379 
£lf
->
isSu¥’ded
 = 
çl£
;

2380 
	`LOG_THREAD
("threadid=%d: self-reviving (dbg), status=%d\n",

2381 
£lf
->
th»adId
, s–f->
¡©us
);

2383 
	`uÆockTh»adSu¥’dCouÁ
();

2384 
	}
}

2387 #ifdeà
HAVE_GLIBC


2388 
	#NUM_FRAMES
 20

	)

2389 
	~<execšfo.h
>

2395 
	$´štBackT¿û
()

2397 * 
¬¿y
[
NUM_FRAMES
];

2398 
size_t
 
size
;

2399 ** 
¡ršgs
;

2400 
size_t
 
i
;

2402 
size
 = 
	`backŒaû
(
¬¿y
, 
NUM_FRAMES
);

2403 
¡ršgs
 = 
	`backŒaû_symbŞs
(
¬¿y
, 
size
);

2405 
	`LOGW
("Obšed %zd sck f¿mes.\n", 
size
);

2407 
i
 = 0; i < 
size
; i++)

2408 
	`LOGW
("%s\n", 
¡ršgs
[
i
]);

2410 
	`ä“
(
¡ršgs
);

2411 
	}
}

2413 
	$´štBackT¿û
(è{
	}
}

2420 
	$dumpWedgedTh»ad
(
Th»ad
* 
th»ad
)

2422 
exeP©h
[1024];

2427 
	`¡rıy
(
exeP©h
, "-");

2428 #ifdeà
HAVE_GLIBC


2430 
´oc
[100];

2431 
	`¥rštf
(
´oc
, "/´oc/%d/exe", 
	`g‘pid
());

2432 
Ën
;

2434 
Ën
 = 
	`»adlšk
(
´oc
, 
exeP©h
, (exePath)-1);

2435 
exeP©h
[
Ën
] = '\0';

2439 
	`LOGW
("dumpšg s‹:…roûs % %d\n", 
exeP©h
, 
	`g‘pid
());

2440 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

2441 
	`´štBackT¿û
();

2444 
	`dvmDumpTh»ad
(
th»ad
, 
Œue
);

2449 
	}
}

2476 
	#FIRST_SLEEP
 (250*1000è

	)

2477 
	#MORE_SLEEP
 (750*1000è

	)

2478 
	$wa™FÜTh»adSu¥’d
(
Th»ad
* 
£lf
, Th»ad* 
th»ad
)

2480 cÚ¡ 
kMaxR‘r›s
 = 10;

2481 
¥šSË•Time
 = 
FIRST_SLEEP
;

2482 
boŞ
 
com¶ašed
 = 
çl£
;

2483 
boŞ
 
ÃedPriÜ™yRe£t
 = 
çl£
;

2484 
§vedTh»adPrio
 = -500;

2486 
¦“pI‹r
 = 0;

2487 
»ŒyCouÁ
 = 0;

2488 
u8
 
¡¬tWh’
 = 0;

2489 
u8
 
fœ¡S¹Wh’
 = 0;

2491 
th»ad
->
¡©us
 =ğ
THREAD_RUNNING
 && !th»ad->
isSu¥’ded
) {

2492 ià(
¦“pI‹r
 == 0) {

2493 
¡¬tWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

2494 ià(
fœ¡S¹Wh’
 == 0)

2495 
fœ¡S¹Wh’
 = 
¡¬tWh’
;

2508 ià(
»ŒyCouÁ
 == 2) {

2509 
	`as£¹
(
th»ad
->
sy¡emTid
 != 0);

2510 
”ºo
 = 0;

2511 
th»adPrio
 = 
	`g‘´iÜ™y
(
PRIO_PROCESS
, 
th»ad
->
sy¡emTid
);

2512 ià(
”ºo
 =ğ0 && 
th»adPrio
 > 0) {

2513 cÚ¡ 
kHigh”
 = 0;

2514 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 
th»ad
->
sy¡emTid
, 
kHigh”
) < 0)

2516 
	`LOGW
("Couldn't„aise…riority onid %do %d\n",

2517 
th»ad
->
sy¡emTid
, 
kHigh”
);

2519 
§vedTh»adPrio
 = 
th»adPrio
;

2520 
ÃedPriÜ™yRe£t
 = 
Œue
;

2521 
	`LOGD
("Temporarily„aising…riority onid %d (%d -> %d)\n",

2522 
th»ad
->
sy¡emTid
, 
th»adPrio
, 
kHigh”
);

2528 #ià
	`defšed
 (
WITH_JIT
)

2533 ià(
gDvmJ™
.
pJ™EÁryTabË
 && 
»ŒyCouÁ
 > 0) {

2534 
	`LOGD
("JIT unchaš‡Î‡‰em± #%d",
»ŒyCouÁ
);

2535 
	`dvmJ™UnchašAÎ
();

2543 ià(!
	`dvmI‹¿tiveSË•
(
¦“pI‹r
++, 
¥šSË•Time
, 
¡¬tWh’
)) {

2544 
	`LOGW
("threadid=%d: spin on suspend #%dhreadid=%d (h=%d)\n",

2545 
£lf
->
th»adId
, 
»ŒyCouÁ
,

2546 
th»ad
->
th»adId
, (éh»ad->
hªdË
);

2547 
	`dumpWedgedTh»ad
(
th»ad
);

2548 
com¶ašed
 = 
Œue
;

2551 
¦“pI‹r
 = 0;

2552 
¥šSË•Time
 = 
MORE_SLEEP
;

2554 ià(
»ŒyCouÁ
++ =ğ
kMaxR‘r›s
) {

2555 
	`LOGE
("threadid=%d: stuck onhreadid=%d, giving up\n",

2556 
£lf
->
th»adId
, 
th»ad
->threadId);

2557 
	`dvmDumpAÎTh»ads
(
çl£
);

2558 
	`dvmAbÜt
();

2563 ià(
com¶ašed
) {

2564 
	`LOGW
("threadid=%d: spin on suspend„esolved in %lld msec\n",

2565 
£lf
->
th»adId
,

2566 (
	`dvmG‘R–©iveTimeU£c
(è- 
fœ¡S¹Wh’
) / 1000);

2569 ià(
ÃedPriÜ™yRe£t
) {

2570 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 
th»ad
->
sy¡emTid
, 
§vedTh»adPrio
) < 0) {

2571 
	`LOGW
("NOTE: couldn't„eset…riority onhread %do %d\n",

2572 
th»ad
->
sy¡emTid
, 
§vedTh»adPrio
);

2574 
	`LOGV
("Restored…riority on %do %d\n",

2575 
th»ad
->
sy¡emTid
, 
§vedTh»adPrio
);

2578 
	}
}

2601 
	$dvmSu¥’dAÎTh»ads
(
Su¥’dCau£
 
why
)

2603 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2604 
Th»ad
* 
th»ad
;

2606 
	`as£¹
(
why
 != 0);

2615 
	`lockTh»adSu¥’d
("su¥-®l", 
why
);

2617 
	`LOG_THREAD
("th»adid=%d: Su¥’dAÎ s¹šg\n", 
£lf
->
th»adId
);

2630 
	`dvmLockTh»adLi¡
(
£lf
);

2632 
	`lockTh»adSu¥’dCouÁ
();

2633 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2634 ià(
th»ad
 =ğ
£lf
)

2638 ià((
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
) &&

2639 
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2642 
	`dvmAddToTh»adSu¥’dCouÁ
(&
th»ad
->
su¥’dCouÁ
, 1);

2643 ià(
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
)

2644 
th»ad
->
dbgSu¥’dCouÁ
++;

2646 
	`uÆockTh»adSu¥’dCouÁ
();

2662 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2663 ià(
th»ad
 =ğ
£lf
)

2667 ià((
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
) &&

2668 
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2672 
	`wa™FÜTh»adSu¥’d
(
£lf
, 
th»ad
);

2674 
	`LOG_THREAD
("threadid=%d:hreadid=%d status=%d c=%d dc=%d isSusp=%d\n",

2675 
£lf
->
th»adId
,

2676 
th»ad
->
th»adId
,h»ad->
¡©us
,h»ad->
su¥’dCouÁ
,

2677 
th»ad
->
dbgSu¥’dCouÁ
,h»ad->
isSu¥’ded
);

2680 
	`dvmUÆockTh»adLi¡
();

2681 
	`uÆockTh»adSu¥’d
();

2683 
	`LOG_THREAD
("th»adid=%d: Su¥’dAÎ com¶‘e\n", 
£lf
->
th»adId
);

2684 
	}
}

2691 
	$dvmResumeAÎTh»ads
(
Su¥’dCau£
 
why
)

2693 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2694 
Th»ad
* 
th»ad
;

2695 
cc
;

2697 
	`lockTh»adSu¥’d
("»s-®l", 
why
);

2698 
	`LOG_THREAD
("th»adid=%d: ResumeAÎ s¹šg\n", 
£lf
->
th»adId
);

2705 
	`dvmLockTh»adLi¡
(
£lf
);

2706 
	`lockTh»adSu¥’dCouÁ
();

2707 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2708 ià(
th»ad
 =ğ
£lf
)

2712 ià((
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
) &&

2713 
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
))

2718 ià(
th»ad
->
su¥’dCouÁ
 > 0) {

2719 
	`dvmAddToTh»adSu¥’dCouÁ
(&
th»ad
->
su¥’dCouÁ
, -1);

2720 ià(
why
 =ğ
SUSPEND_FOR_DEBUG
 || why =ğ
SUSPEND_FOR_DEBUG_EVENT
)

2721 
th»ad
->
dbgSu¥’dCouÁ
--;

2723 
	`LOG_THREAD
("threadid=%d: suspendCount‡lready zero\n",

2724 
th»ad
->
th»adId
);

2727 
	`uÆockTh»adSu¥’dCouÁ
();

2728 
	`dvmUÆockTh»adLi¡
();

2764 
	`LOG_THREAD
("th»adid=%d: ResumeAÎ wakšg oth”s\n", 
£lf
->
th»adId
);

2765 
	`uÆockTh»adSu¥’d
();

2771 
	`lockTh»adSu¥’dCouÁ
();

2772 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adSu¥’dCouÁCÚd
);

2773 
	`as£¹
(
cc
 == 0);

2774 
	`uÆockTh»adSu¥’dCouÁ
();

2776 
	`LOG_THREAD
("th»adid=%d: ResumeAÎ com¶‘e\n", 
£lf
->
th»adId
);

2777 
	}
}

2783 
	$dvmUndoDebugg”Su¥’siÚs
()

2785 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2786 
Th»ad
* 
th»ad
;

2787 
cc
;

2789 
	`lockTh»adSu¥’d
("undo", 
SUSPEND_FOR_DEBUG
);

2790 
	`LOG_THREAD
("th»adid=%d: UndoDebugg”Su¥ s¹šg\n", 
£lf
->
th»adId
);

2797 
	`dvmLockTh»adLi¡
(
£lf
);

2798 
	`lockTh»adSu¥’dCouÁ
();

2799 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

2800 ià(
th»ad
 =ğ
£lf
)

2804 ià(
th»ad
->
hªdË
 =ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
)) {

2805 
	`as£¹
(
th»ad
->
dbgSu¥’dCouÁ
 == 0);

2809 
	`as£¹
(
th»ad
->
su¥’dCouÁ
 >ğth»ad->
dbgSu¥’dCouÁ
);

2810 
	`dvmAddToTh»adSu¥’dCouÁ
(&
th»ad
->
su¥’dCouÁ
,

2811 -
th»ad
->
dbgSu¥’dCouÁ
);

2812 
th»ad
->
dbgSu¥’dCouÁ
 = 0;

2814 
	`uÆockTh»adSu¥’dCouÁ
();

2815 
	`dvmUÆockTh»adLi¡
();

2821 
	`lockTh»adSu¥’dCouÁ
();

2822 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
th»adSu¥’dCouÁCÚd
);

2823 
	`as£¹
(
cc
 == 0);

2824 
	`uÆockTh»adSu¥’dCouÁ
();

2826 
	`uÆockTh»adSu¥’d
();

2828 
	`LOG_THREAD
("th»adid=%d: UndoDebugg”Su¥ com¶‘e\n", 
£lf
->
th»adId
);

2829 
	}
}

2837 
boŞ
 
	$dvmIsSu¥’ded
(
Th»ad
* 
th»ad
)

2853  (
th»ad
->
su¥’dCouÁ
 != 0 &&

2854 ((
th»ad
->
¡©us
 =ğ
THREAD_RUNNING
 &&h»ad->
isSu¥’ded
) ||

2855 (
th»ad
->
¡©us
 !ğ
THREAD_RUNNING
)));

2856 
	}
}

2873 
	$dvmWa™FÜSu¥’d
(
Th»ad
* 
th»ad
)

2875 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2877 
	`LOG_THREAD
("threadid=%d: waiting forhreadid=%do sleep\n",

2878 
£lf
->
th»adId
, 
th»ad
->threadId);

2880 
	`as£¹
(
th»ad
->
hªdË
 !ğ
	`dvmJdwpG‘DebugTh»ad
(
gDvm
.
jdwpS‹
));

2881 
	`as£¹
(
th»ad
 !ğ
£lf
);

2882 
	`as£¹
(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
);

2884 
	`wa™FÜTh»adSu¥’d
(
£lf
, 
th»ad
);

2886 
	`LOG_THREAD
("threadid=%d:hreadid=%d is‚ow‡sleep\n",

2887 
£lf
->
th»adId
, 
th»ad
->threadId);

2888 
	}
}

2899 
boŞ
 
	$dvmCheckSu¥’dP’dšg
(
Th»ad
* 
£lf
)

2901 
boŞ
 
didSu¥’d
;

2903 ià(
£lf
 =ğ
NULL
)

2904 
£lf
 = 
	`dvmTh»adS–f
();

2907 ià(
£lf
->
su¥’dCouÁ
 == 0)

2908  
çl£
;

2910 
	`lockTh»adSu¥’dCouÁ
();

2912 
	`as£¹
(
£lf
->
su¥’dCouÁ
 >= 0);

2914 
didSu¥’d
 = (
£lf
->
su¥’dCouÁ
 != 0);

2915 
£lf
->
isSu¥’ded
 = 
Œue
;

2916 
	`LOG_THREAD
("th»adid=%d: s–f-su¥’dšg\n", 
£lf
->
th»adId
);

2917 
£lf
->
su¥’dCouÁ
 != 0) {

2919 
cc
;

2920 
cc
 = 
	`±h»ad_cÚd_wa™
(&
gDvm
.
th»adSu¥’dCouÁCÚd
,

2921 &
gDvm
.
th»adSu¥’dCouÁLock
);

2922 
	`as£¹
(
cc
 == 0);

2924 
	`as£¹
(
£lf
->
su¥’dCouÁ
 =ğ0 && s–f->
dbgSu¥’dCouÁ
 == 0);

2925 
£lf
->
isSu¥’ded
 = 
çl£
;

2926 
	`LOG_THREAD
("threadid=%d: self-reviving, status=%d\n",

2927 
£lf
->
th»adId
, s–f->
¡©us
);

2929 
	`uÆockTh»adSu¥’dCouÁ
();

2931  
didSu¥’d
;

2932 
	}
}

2941 
Th»adStus
 
	$dvmChªgeStus
(
Th»ad
* 
£lf
, 
Th»adStus
 
ÃwStus
)

2943 
Th»adStus
 
ŞdStus
;

2945 ià(
£lf
 =ğ
NULL
)

2946 
£lf
 = 
	`dvmTh»adS–f
();

2948 
	`LOGVV
("threadid=%d: (status %d -> %d)\n",

2949 
£lf
->
th»adId
, s–f->
¡©us
, 
ÃwStus
);

2951 
ŞdStus
 = 
£lf
->
¡©us
;

2953 ià(
ÃwStus
 =ğ
THREAD_RUNNING
) {

2964 
	`as£¹
(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
);

2966 
	`dvmCheckSu¥’dP’dšg
(
£lf
);

2967 
£lf
->
¡©us
 = 
THREAD_RUNNING
;

2974 
£lf
->
¡©us
 = 
ÃwStus
;

2977  
ŞdStus
;

2978 
	}
}

2984 
Objeù
* 
	$g‘SticTh»adGroup
(cÚ¡ * 
f›ldName
)

2986 
SticF›ld
* 
groupF›ld
;

2987 
Objeù
* 
groupObj
;

2989 
groupF›ld
 = 
	`dvmFšdSticF›ld
(
gDvm
.
şassJavaLªgTh»adGroup
,

2990 
f›ldName
, "Ljava/lang/ThreadGroup;");

2991 ià(
groupF›ld
 =ğ
NULL
) {

2992 
	`LOGE
("java.Ïng.Th»adGrou°dÛ nÙ havª '%s' f›ld\n", 
f›ldName
);

2993 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Incom·tibËCÏssChªgeE¼Ü;", 
NULL
);

2994  
NULL
;

2996 
groupObj
 = 
	`dvmG‘SticF›ldObjeù
(
groupF›ld
);

2997 ià(
groupObj
 =ğ
NULL
) {

2998 
	`LOGE
("java.Ïng.Th»adGroup.% nÙ in™Ÿlized\n", 
f›ldName
);

2999 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ÇlE¼Ü;", 
NULL
);

3000  
NULL
;

3003  
groupObj
;

3004 
	}
}

3005 
Objeù
* 
	$dvmG‘Sy¡emTh»adGroup
()

3007  
	`g‘SticTh»adGroup
("mSystem");

3008 
	}
}

3009 
Objeù
* 
	$dvmG‘MašTh»adGroup
()

3011  
	`g‘SticTh»adGroup
("mMain");

3012 
	}
}

3021 
Th»ad
* 
	$dvmG‘Th»adFromTh»adObjeù
(
Objeù
* 
vmTh»adObj
)

3023 
vmD©a
;

3025 
vmD©a
 = 
	`dvmG‘F›ldIÁ
(
vmTh»adObj
, 
gDvm
.
offJavaLªgVMTh»ad_vmD©a
);

3027 ià(
çl£
) {

3028 
Th»ad
* 
th»ad
 = 
gDvm
.
th»adLi¡
;

3029 
th»ad
 !ğ
NULL
) {

3030 ià((
Th»ad
*)
vmD©a
 =ğ
th»ad
)

3033 
th»ad
 =h»ad->
Ãxt
;

3036 ià(
th»ad
 =ğ
NULL
) {

3037 
	`LOGW
("WARNING: vmThreadObj=%p hashread=%p,‚ot inhread†ist\n",

3038 
vmTh»adObj
, (
Th»ad
*)
vmD©a
);

3039 
vmD©a
 = 0;

3043  (
Th»ad
*è
vmD©a
;

3044 
	}
}

3053 cÚ¡ 
	gkNiûV®ues
[10] = {

3054 
ANDROID_PRIORITY_LOWEST
,

3055 
ANDROID_PRIORITY_BACKGROUND
 + 6,

3056 
ANDROID_PRIORITY_BACKGROUND
 + 3,

3057 
ANDROID_PRIORITY_BACKGROUND
,

3058 
ANDROID_PRIORITY_NORMAL
,

3059 
ANDROID_PRIORITY_NORMAL
 - 2,

3060 
ANDROID_PRIORITY_NORMAL
 - 4,

3061 
ANDROID_PRIORITY_URGENT_DISPLAY
 + 3,

3062 
ANDROID_PRIORITY_URGENT_DISPLAY
 + 2,

3063 
ANDROID_PRIORITY_URGENT_DISPLAY


3072 
	$dvmChªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
)

3074 
pid_t
 
pid
 = 
th»ad
->
sy¡emTid
;

3075 
ÃwNiû
;

3077 ià(
ÃwPriÜ™y
 < 1 ||‚ewPriority > 10) {

3078 
	`LOGW
("bad…riÜ™y %d\n", 
ÃwPriÜ™y
);

3079 
ÃwPriÜ™y
 = 5;

3081 
ÃwNiû
 = 
kNiûV®ues
[
ÃwPriÜ™y
-1];

3083 ià(
ÃwNiû
 >ğ
ANDROID_PRIORITY_BACKGROUND
) {

3084 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_BACKGROUND
);

3085 } ià(
	`g‘´iÜ™y
(
PRIO_PROCESS
, 
pid
è>ğ
ANDROID_PRIORITY_BACKGROUND
) {

3086 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_FOREGROUND
);

3089 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 
pid
, 
ÃwNiû
) != 0) {

3090 * 
¡r
 = 
	`dvmG‘Th»adName
(
th»ad
);

3091 
	`LOGI
("setPriority(%d) '%s'o…rio=%d(n=%d) failed: %s\n",

3092 
pid
, 
¡r
, 
ÃwPriÜ™y
, 
ÃwNiû
, 
	`¡»¼Ü
(
”ºo
));

3093 
	`ä“
(
¡r
);

3095 
	`LOGV
("setPriority(%d)o…rio=%d(n=%d)\n",

3096 
pid
, 
ÃwPriÜ™y
, 
ÃwNiû
);

3098 
	}
}

3106 
	$g‘Th»adPriÜ™yFromSy¡em
()

3108 
i
, 
sy¥rio
, 
j´io
;

3110 
”ºo
 = 0;

3111 
sy¥rio
 = 
	`g‘´iÜ™y
(
PRIO_PROCESS
, 0);

3112 ià(
sy¥rio
 =ğ-1 && 
”ºo
 != 0) {

3113 
	`LOGW
("g‘´iÜ™y(èçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

3114  
THREAD_NORM_PRIORITY
;

3117 
j´io
 = 
THREAD_MIN_PRIORITY
;

3118 
i
 = 0; i < 
	`NELEM
(
kNiûV®ues
); i++) {

3119 ià(
sy¥rio
 >ğ
kNiûV®ues
[
i
])

3121 
j´io
++;

3123 ià(
j´io
 > 
THREAD_MAX_PRIORITY
)

3124 
j´io
 = 
THREAD_MAX_PRIORITY
;

3126  
j´io
;

3127 
	}
}

3134 
boŞ
 
	$dvmIsOnTh»adLi¡
(cÚ¡ 
Th»ad
* 
th»ad
)

3136 
boŞ
 
»t
 = 
çl£
;

3138 
	`dvmLockTh»adLi¡
(
NULL
);

3139 ià(
th»ad
 =ğ
gDvm
.
th»adLi¡
) {

3140 
»t
 = 
Œue
;

3142 
»t
 = 
th»ad
->
´ev
 !ğ
NULL
 ||h»ad->
Ãxt
 != NULL;

3144 
	`dvmUÆockTh»adLi¡
();

3146  
»t
;

3147 
	}
}

3153 
	$dvmDumpTh»ad
(
Th»ad
* 
th»ad
, 
boŞ
 
isRuÂšg
)

3155 
DebugOuutT¬g‘
 
rg‘
;

3157 
	`dvmC»©eLogOuutT¬g‘
(&
rg‘
, 
ANDROID_LOG_INFO
, 
LOG_TAG
);

3158 
	`dvmDumpTh»adEx
(&
rg‘
, 
th»ad
, 
isRuÂšg
);

3159 
	}
}

3171 
boŞ
 
	$g‘ScheduËrGroup
(
Th»ad
* 
th»ad
, * 
buf
, 
size_t
 
bufL’
)

3173 #ifdeà
HAVE_ANDROID_OS


3174 
·thBuf
[32];

3175 
»adBuf
[256];

3176 
ssize_t
 
couÁ
;

3177 
fd
;

3179 
	`¢´štf
(
·thBuf
, Õ©hBuf), "/´oc/%d/cgroup", 
th»ad
->
sy¡emTid
);

3180 ià((
fd
 = 
	`İ’
(
·thBuf
, 
O_RDONLY
)) < 0) {

3181 
	`LOGV
("İ’(%sèçed: %s\n", 
·thBuf
, 
	`¡»¼Ü
(
”ºo
));

3182  
çl£
;

3185 
couÁ
 = 
	`»ad
(
fd
, 
»adBuf
, (readBuf));

3186 ià(
couÁ
 <= 0) {

3187 
	`LOGV
("read(%s) failed (%d): %s\n",

3188 
·thBuf
, (è
couÁ
, 
	`¡»¼Ü
(
”ºo
));

3189 
	`şo£
(
fd
);

3190  
çl£
;

3192 
	`şo£
(
fd
);

3194 
»adBuf
[--
couÁ
] = '\0';

3196 * 
ı
 = 
	`¡rchr
(
»adBuf
, '/');

3197 ià(
ı
 =ğ
NULL
) {

3198 
»adBuf
[(readBuf)-1] = '\0';

3199 
	`LOGV
("no '/' in '%s' (file=%s count=%d)\n",

3200 
»adBuf
, 
·thBuf
, (è
couÁ
);

3201  
çl£
;

3204 
	`memıy
(
buf
, 
ı
+1, 
couÁ
);

3205  
Œue
;

3207  
çl£
;

3209 
	}
}

3218 
	$dvmDumpTh»adEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
,

3219 
boŞ
 
isRuÂšg
)

3222 cÚ¡ * 
kStusNames
[] = {

3226 
Objeù
* 
th»adObj
;

3227 
Objeù
* 
groupObj
;

3228 
SŒšgObjeù
* 
ÇmeSŒ
;

3229 * 
th»adName
 = 
NULL
;

3230 * 
groupName
 = 
NULL
;

3231 
scheduËrGroupBuf
[32];

3232 
boŞ
 
isD«mÚ
;

3233 
´iÜ™y
;

3234 
pŞicy
;

3235 
sched_·¿m
 
¥
;

3237 
th»adObj
 = 
th»ad
->threadObj;

3238 ià(
th»adObj
 =ğ
NULL
) {

3239 
	`LOGW
("Cª'ˆdum°th»ad %d:h»adObj‚Ù s‘\n", 
th»ad
->
th»adId
);

3242 
ÇmeSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

3243 
gDvm
.
offJavaLªgTh»ad_Çme
);

3244 
th»adName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

3246 
´iÜ™y
 = 
	`dvmG‘F›ldIÁ
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_´iÜ™y
);

3247 
isD«mÚ
 = 
	`dvmG‘F›ldBoŞ—n
(
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_d«mÚ
);

3249 ià(
	`±h»ad_g‘sched·¿m
(
	`±h»ad_£lf
(), &
pŞicy
, &
¥
) != 0) {

3250 
	`LOGW
("Warning:…thread_getschedparam failed\n");

3251 
pŞicy
 = -1;

3252 
¥
.
sched_´iÜ™y
 = -1;

3254 ià(!
	`g‘ScheduËrGroup
(
th»ad
, 
scheduËrGroupBuf
,(schedulerGroupBuf)))

3256 
	`¡rıy
(
scheduËrGroupBuf
, "unknown");

3257 } ià(
scheduËrGroupBuf
[0] == '\0') {

3258 
	`¡rıy
(
scheduËrGroupBuf
, "default");

3262 
groupObj
 = (
Objeù
*è
	`dvmG‘F›ldObjeù
(
th»adObj
,

3263 
gDvm
.
offJavaLªgTh»ad_group
);

3264 ià(
groupObj
 !ğ
NULL
) {

3265 
off£t
 = 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgTh»adGroup
,

3267 ià(
off£t
 < 0) {

3268 
	`LOGW
("Unableo find 'name' field in ThreadGroup\n");

3270 
ÇmeSŒ
 = (
SŒšgObjeù
*è
	`dvmG‘F›ldObjeù
(
groupObj
, 
off£t
);

3271 
groupName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeSŒ
);

3274 ià(
groupName
 =ğ
NULL
)

3275 
groupName
 = 
	`¡rdup
("(BOGUS GROUP)");

3277 
	`as£¹
(
th»ad
->
¡©us
 < 
	`NELEM
(
kStusNames
));

3278 
	`dvmPrštDebugMes§ge
(
rg‘
,

3280 
th»adName
, 
isD«mÚ
 ? " daemon" : "",

3281 
´iÜ™y
, 
th»ad
->
th»adId
, 
kStusNames
[th»ad->
¡©us
]);

3282 
	`dvmPrštDebugMes§ge
(
rg‘
,

3284 
groupName
, 
th»ad
->
su¥’dCouÁ
,h»ad->
dbgSu¥’dCouÁ
,

3285 
th»ad
->
isSu¥’ded
 ? 'Y' : 'N',h»ad->
th»adObj
,hread);

3286 
	`dvmPrštDebugMes§ge
(
rg‘
,

3288 
th»ad
->
sy¡emTid
, 
	`g‘´iÜ™y
(
PRIO_PROCESS
,hread->systemTid),

3289 
pŞicy
, 
¥
.
sched_´iÜ™y
, 
scheduËrGroupBuf
, ()
th»ad
->
hªdË
);

3291 #ifdeà
WITH_MONITOR_TRACKING


3292 ià(!
isRuÂšg
) {

3293 
LockedObjeùD©a
* 
lod
 = 
th»ad
->
pLockedObjeùs
;

3294 ià(
lod
 !ğ
NULL
)

3295 
	`dvmPrštDebugMes§ge
(
rg‘
, " | monitors held:\n");

3297 
	`dvmPrštDebugMes§ge
(
rg‘
, " | monitors held: <none>\n");

3298 
lod
 !ğ
NULL
) {

3299 
	`dvmPrštDebugMes§ge
(
rg‘
, " > %p[%d] (%s)\n",

3300 
lod
->
obj
,†od->
»cursiÚCouÁ
,†od->obj->
şazz
->
desütÜ
);

3301 
lod
 =†od->
Ãxt
;

3306 ià(
isRuÂšg
)

3307 
	`dvmDumpRuÂšgTh»adSck
(
rg‘
, 
th»ad
);

3309 
	`dvmDumpTh»adSck
(
rg‘
, 
th»ad
);

3311 
	`ä“
(
th»adName
);

3312 
	`ä“
(
groupName
);

3314 
	}
}

3324 * 
	$dvmG‘Th»adName
(
Th»ad
* 
th»ad
)

3326 
SŒšgObjeù
* 
ÇmeObj
;

3328 ià(
th»ad
->
th»adObj
 =ğ
NULL
) {

3329 
	`LOGW
("threadObj is NULL,‚ame‚ot‡vailable\n");

3330  
	`¡rdup
("-unknown-");

3333 
ÇmeObj
 = (
SŒšgObjeù
*)

3334 
	`dvmG‘F›ldObjeù
(
th»ad
->
th»adObj
, 
gDvm
.
offJavaLªgTh»ad_Çme
);

3335  
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

3336 
	}
}

3342 
	$dvmDumpAÎTh»ads
(
boŞ
 
g¿bLock
)

3344 
DebugOuutT¬g‘
 
rg‘
;

3346 
	`dvmC»©eLogOuutT¬g‘
(&
rg‘
, 
ANDROID_LOG_INFO
, 
LOG_TAG
);

3347 
	`dvmDumpAÎTh»adsEx
(&
rg‘
, 
g¿bLock
);

3348 
	}
}

3357 
	$dvmDumpAÎTh»adsEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
boŞ
 
g¿bLock
)

3359 
Th»ad
* 
th»ad
;

3361 
	`dvmPrštDebugMes§ge
(
rg‘
, "DALVIK THREADS:\n");

3363 ià(
g¿bLock
)

3364 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

3366 
th»ad
 = 
gDvm
.
th»adLi¡
;

3367 
th»ad
 !ğ
NULL
) {

3368 
	`dvmDumpTh»adEx
(
rg‘
, 
th»ad
, 
çl£
);

3371 
	`as£¹
(
th»ad
->
Ãxt
 =ğ
NULL
 ||h»ad->Ãxt->
´ev
 ==hread);

3373 
th»ad
 =h»ad->
Ãxt
;

3376 ià(
g¿bLock
)

3377 
	`dvmUÆockTh»adLi¡
();

3378 
	}
}

3380 #ifdeà
WITH_MONITOR_TRACKING


3384 
	$g‘Th»adObjeùCouÁ
(cÚ¡ 
Th»ad
* 
£lf
)

3386 
LockedObjeùD©a
* 
lod
;

3387 
couÁ
 = 0;

3389 
lod
 = 
£lf
->
pLockedObjeùs
;

3390 
lod
 !ğ
NULL
) {

3391 
couÁ
++;

3392 
lod
 =†od->
Ãxt
;

3394  
couÁ
;

3395 
	}
}

3406 
	$dvmAddToMÚ™ÜLi¡
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
, 
boŞ
 
w™hT¿û
)

3408 
LockedObjeùD©a
* 
ÃwLod
;

3409 
LockedObjeùD©a
* 
lod
;

3410 * 
Œaû
;

3411 
d•th
;

3413 
lod
 = 
£lf
->
pLockedObjeùs
;

3414 
lod
 !ğ
NULL
) {

3415 ià(
lod
->
obj
 == obj) {

3416 
lod
->
»cursiÚCouÁ
++;

3417 
	`LOGV
("+++ +»cursivlock %°-> %d\n", 
obj
, 
lod
->
»cursiÚCouÁ
);

3420 
lod
 =†od->
Ãxt
;

3423 
ÃwLod
 = (
LockedObjeùD©a
*è
	`ÿÎoc
(1, (LockedObjectData));

3424 ià(
ÃwLod
 =ğ
NULL
) {

3425 
	`LOGE
("m®loøçed oÀ%d by‹s\n", (
LockedObjeùD©a
));

3428 
ÃwLod
->
obj
 = obj;

3429 
ÃwLod
->
»cursiÚCouÁ
 = 0;

3431 ià(
w™hT¿û
) {

3432 
Œaû
 = 
	`dvmFlInSckT¿ûRaw
(
£lf
, &
d•th
);

3433 
ÃwLod
->
¿wSckT¿û
 = 
Œaû
;

3434 
ÃwLod
->
¡ackD•th
 = 
d•th
;

3437 
ÃwLod
->
Ãxt
 = 
£lf
->
pLockedObjeùs
;

3438 
£lf
->
pLockedObjeùs
 = 
ÃwLod
;

3440 
	`LOGV
("+++hreadid=%d:‡dded %p,‚ow %d\n",

3441 
£lf
->
th»adId
, 
ÃwLod
, 
	`g‘Th»adObjeùCouÁ
(self));

3442 
	}
}

3448 
	$dvmRemoveFromMÚ™ÜLi¡
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
)

3450 
LockedObjeùD©a
* 
lod
;

3451 
LockedObjeùD©a
* 
´evLod
;

3453 
lod
 = 
£lf
->
pLockedObjeùs
;

3454 
´evLod
 = 
NULL
;

3455 
lod
 !ğ
NULL
) {

3456 ià(
lod
->
obj
 == obj) {

3457 ià(
lod
->
»cursiÚCouÁ
 > 0) {

3458 
lod
->
»cursiÚCouÁ
--;

3459 
	`LOGV
("+++ -recursive†ock %p -> %d\n",

3460 
obj
, 
lod
->
»cursiÚCouÁ
);

3466 
´evLod
 = 
lod
;

3467 
lod
 =†od->
Ãxt
;

3470 ià(
lod
 =ğ
NULL
) {

3471 
	`LOGW
("BUG: objeù %°nÙ found iÀth»ad' lock†i¡\n", 
obj
);

3474 ià(
´evLod
 =ğ
NULL
) {

3476 
	`as£¹
(
£lf
->
pLockedObjeùs
 =ğ
lod
);

3477 
£lf
->
pLockedObjeùs
 = 
lod
->
Ãxt
;

3480 
´evLod
->
Ãxt
 = 
lod
->next;

3483 
	`LOGV
("+++hreadid=%d:„emoved %p,‚ow %d\n",

3484 
£lf
->
th»adId
, 
lod
, 
	`g‘Th»adObjeùCouÁ
(self));

3485 
	`ä“
(
lod
->
¿wSckT¿û
);

3486 
	`ä“
(
lod
);

3487 
	}
}

3493 
LockedObjeùD©a
* 
	$dvmFšdInMÚ™ÜLi¡
(cÚ¡ 
Th»ad
* 
£lf
, cÚ¡ 
Objeù
* 
obj
)

3495 
LockedObjeùD©a
* 
lod
;

3497 
lod
 = 
£lf
->
pLockedObjeùs
;

3498 
lod
 !ğ
NULL
) {

3499 ià(
lod
->
obj
 == obj)

3500  
lod
;

3501 
lod
 =†od->
Ãxt
;

3503  
NULL
;

3504 
	}
}

3515 
	$gcSÿnIÁ”pSckReã»nûs
(
Th»ad
 *
th»ad
)

3517 cÚ¡ 
u4
 *
äamePŒ
;

3518 #ià
WITH_EXTRA_GC_CHECKS
 > 1

3519 
boŞ
 
fœ¡
 = 
Œue
;

3522 
äamePŒ
 = (cÚ¡ 
u4
 *)
th»ad
->
curF¿me
;

3523 
äamePŒ
 !ğ
NULL
) {

3524 cÚ¡ 
SckSaveA»a
 *
§veA»a
;

3525 cÚ¡ 
M‘hod
 *
m‘hod
;

3527 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

3528 
m‘hod
 = 
§veA»a
->method;

3529 ià(
m‘hod
 !ğ
NULL
 && !
	`dvmIsN©iveM‘hod
(method)) {

3530 #ifdeà
COUNT_PRECISE_METHODS


3532 ià(
	`dvmPoš‹rS‘AddEÁry
(
gDvm
.
´eci£M‘hods
, 
m‘hod
))

3533 
	`LOGI
("PGC:‡dded %s.%s %p\n",

3534 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, method);

3536 #ià
WITH_EXTRA_GC_CHECKS
 > 1

3544 ià(
fœ¡
) {

3575 ià(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
th»ad
->
cu¼’tPc2
) {

3576 
	`LOGW
("PGC: savedPC(%p) != current PC(%p), %s.%s ins=%p\n",

3577 
§veA»a
->
xŒa
.
cu¼’tPc
, 
th»ad
->
cu¼’tPc2
,

3578 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, m‘hod->
š¢s
);

3579 ià(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
NULL
)

3580 
	`LOGE
("…øš¡ = 0x%04x\n", *
§veA»a
->
xŒa
.
cu¼’tPc
);

3581 ià(
th»ad
->
cu¼’tPc2
 !ğ
NULL
)

3582 
	`LOGE
("…c2 in¡ = 0x%04x\n", *
th»ad
->
cu¼’tPc2
);

3583 
	`dvmDumpTh»ad
(
th»ad
, 
çl£
);

3599 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
NULL
);

3602 cÚ¡ 
Regi¡”M­
* 
pM­
;

3603 cÚ¡ 
u1
* 
»gVeùÜ
;

3604 
i
;

3606 
M‘hod
* 
nÚCÚ¡M‘hod
 = (M‘hod*è
m‘hod
;

3607 
pM­
 = 
	`dvmG‘Ex·ndedRegi¡”M­
(
nÚCÚ¡M‘hod
);

3608 ià(
pM­
 !ğ
NULL
) {

3610 
addr
 = 
§veA»a
->
xŒa
.
cu¼’tPc
 - 
m‘hod
->
š¢s
;

3611 
»gVeùÜ
 = 
	`dvmRegi¡”M­G‘Lše
(
pM­
, 
addr
);

3612 ià(
»gVeùÜ
 =ğ
NULL
) {

3613 
	`LOGW
("PGC: map but‚oƒntry for %s.%s‡ddr=0x%04x\n",

3614 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
addr
);

3616 
	`LOGV
("PGC: found map for %s.%s 0x%04x (t=%d)\n",

3617 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
addr
,

3618 
th»ad
->
th»adId
);

3628 ià(
gDvm
.
´eci£Gc
) {

3629 
	`LOGVV
("PGC:‚o map for %s.%s\n",

3630 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

3632 
»gVeùÜ
 = 
NULL
;

3635 ià(
»gVeùÜ
 =ğ
NULL
) {

3637 
i
 = 
m‘hod
->
»gi¡”sSize
 - 1; i >= 0; i--) {

3638 
u4
 
rv®
 = *
äamePŒ
++;

3639 #ifdeà
WITH_TAINT_TRACKING


3641 
äamePŒ
++;

3643 ià(
rv®
 != 0 && (rval & 0x3) == 0) {

3644 
	`dvmM¬kIfObjeù
((
Objeù
 *)
rv®
);

3656 
u2
 
b™s
 = 1 << 1;

3657 
i
 = 
m‘hod
->
»gi¡”sSize
 - 1; i >= 0; i--) {

3658 
u4
 
rv®
 = *
äamePŒ
++;

3659 #ifdeà
WITH_TAINT_TRACKING


3661 
äamePŒ
++;

3664 
b™s
 >>= 1;

3665 ià(
b™s
 == 1) {

3667 
b™s
 = *
»gVeùÜ
++ | 0x0100;

3668 
	`LOGVV
("lßded b™s: 0x%02x\n", 
b™s
 & 0xff);

3671 ià(
rv®
 !ğ0 && (
b™s
 & 0x01) != 0) {

3676 #ià
WITH_EXTRA_GC_CHECKS
 > 0

3677 ià((
rv®
 & 0x3) != 0 ||

3678 !
	`dvmIsV®idObjeù
((
Objeù
*è
rv®
))

3681 
	`LOGE
("PGC: invalid„ef in„eg %d: 0x%08x\n",

3682 
m‘hod
->
»gi¡”sSize
-1 - 
i
, 
rv®
);

3686 
	`dvmM¬kObjeùNÚNuÎ
((
Objeù
 *)
rv®
);

3692 #ià
WITH_EXTRA_GC_CHECKS
 > 1

3693 ià(
	`dvmIsV®idObjeù
((
Objeù
*è
rv®
)) {

3695 
	`LOGD
("PGC: ignoring valid„ef in„eg %d: 0x%08x\n",

3696 
m‘hod
->
»gi¡”sSize
-1 - 
i
, 
rv®
);

3701 
	`dvmR–—£Regi¡”M­Lše
(
pM­
, 
»gVeùÜ
);

3709 #ià
WITH_EXTRA_GC_CHECKS
 > 1

3710 
fœ¡
 = 
çl£
;

3715 
	`as£¹
((
ušŒ_t
)
§veA»a
->
´evF¿me
 > (ušŒ_t)
äamePŒ
 ||

3716 
§veA»a
->
´evF¿me
 =ğ
NULL
);

3717 
äamePŒ
 = 
§veA»a
->
´evF¿me
;

3719 
	}
}

3721 
	$gcSÿnReã»nûTabË
(
Reã»nûTabË
 *
»fTabË
)

3723 
Objeù
 **
İ
;

3726 
	`as£¹
(
»fTabË
 !ğ
NULL
);

3727 
	`as£¹
(
»fTabË
->
bË
 !ğ
NULL
);

3728 
	`as£¹
(
»fTabË
->
ÃxtEÁry
 !ğ
NULL
);

3729 
	`as£¹
((
ušŒ_t
)
»fTabË
->
ÃxtEÁry
 >ğ(ušŒ_tìefTabË->
bË
);

3730 
	`as£¹
(
»fTabË
->
ÃxtEÁry
 -„efTabË->
bË
 <ğ»fTabË->
maxEÁr›s
);

3732 
İ
 = 
»fTabË
->
bË
;

3733 (
ušŒ_t
)
İ
 < (ušŒ_t)
»fTabË
->
ÃxtEÁry
) {

3734 
	`dvmM¬kObjeùNÚNuÎ
(*(
İ
++));

3736 
	}
}

3738 
	$gcSÿnIndœeùRefTabË
(
IndœeùRefTabË
* 
pRefTabË
)

3740 
Objeù
** 
İ
 = 
pRefTabË
->
bË
;

3741 
numEÁr›s
 = 
	`dvmIndœeùRefTabËEÁr›s
(
pRefTabË
);

3742 
i
;

3744 
i
 = 0; i < 
numEÁr›s
; i++) {

3745 
Objeù
* 
obj
 = *
İ
;

3746 ià(
obj
 !ğ
NULL
)

3747 
	`dvmM¬kObjeùNÚNuÎ
(
obj
);

3748 
İ
++;

3750 
	}
}

3755 
	$gcSÿnTh»ad
(
Th»ad
 *
th»ad
)

3757 
	`as£¹
(
th»ad
 !ğ
NULL
);

3768 
	`as£¹
(
th»ad
->
¡©us
 !ğ
THREAD_RUNNING
 ||h»ad->
isSu¥’ded
 ||

3769 
th»ad
 =ğ
	`dvmTh»adS–f
());

3771 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_THREAD_OBJECT
, 
th»ad
->
th»adId
);

3773 
	`dvmM¬kObjeù
(
th»ad
->
th»adObj
);

3775 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_NATIVE_STACK
, 
th»ad
->
th»adId
);

3777 
	`dvmM¬kObjeù
(
th»ad
->
exû±iÚ
);

3778 
	`gcSÿnReã»nûTabË
(&
th»ad
->
š‹º®LoÿlRefTabË
);

3780 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_JNI_LOCAL
, 
th»ad
->
th»adId
);

3782 #ifdeà
USE_INDIRECT_REF


3783 
	`gcSÿnIndœeùRefTabË
(&
th»ad
->
jniLoÿlRefTabË
);

3785 
	`gcSÿnReã»nûTabË
(&
th»ad
->
jniLoÿlRefTabË
);

3788 ià(
th»ad
->
jniMÚ™ÜRefTabË
.
bË
 !ğ
NULL
) {

3789 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_JNI_MONITOR
, 
th»ad
->
th»adId
);

3791 
	`gcSÿnReã»nûTabË
(&
th»ad
->
jniMÚ™ÜRefTabË
);

3794 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_JAVA_FRAME
, 
th»ad
->
th»adId
);

3796 
	`gcSÿnIÁ”pSckReã»nûs
(
th»ad
);

3798 
	`HPROF_CLEAR_GC_SCAN_STATE
();

3799 
	}
}

3801 
	$gcSÿnAÎTh»ads
()

3803 
Th»ad
 *
th»ad
;

3808 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

3810 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;

3811 
th»ad
 =h»ad->
Ãxt
)

3816 
	`gcSÿnTh»ad
(
th»ad
);

3819 
	`dvmUÆockTh»adLi¡
();

3820 
	}
}

3822 
	$dvmGcSÿnRoÙTh»adGroups
()

3833 
	`gcSÿnAÎTh»ads
();

3834 
	}
}

	@Thread.h

20 #iâdeà
_DALVIK_THREAD


21 
	#_DALVIK_THREAD


	)

23 
	~"jni.h
"

25 #ià
defšed
(
CHECK_MUTEX
è&& !defšed(
__USE_UNIX98
)

27 
±h»ad_mu‹x©Œ_£‰y³
(
±h»ad_mu‹x©Œ_t
 *
©Œ
, 
ty³
);

28 ’um { 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
 };

31 #ifdeà
WITH_MONITOR_TRACKING


32 
	gLockedObjeùD©a
;

42 
	eTh»adStus
 {

44 
	mTHREAD_ZOMBIE
 = 0,

45 
	mTHREAD_RUNNING
 = 1,

46 
	mTHREAD_TIMED_WAIT
 = 2,

47 
	mTHREAD_MONITOR
 = 3,

48 
	mTHREAD_WAIT
 = 4,

50 
	mTHREAD_INITIALIZING
 = 5,

51 
	mTHREAD_STARTING
 = 6,

52 
	mTHREAD_NATIVE
 = 7,

53 
	mTHREAD_VMWAIT
 = 8,

54 } 
	tTh»adStus
;

58 
	mTHREAD_MIN_PRIORITY
 = 1,

59 
	mTHREAD_NORM_PRIORITY
 = 5,

60 
	mTHREAD_MAX_PRIORITY
 = 10,

65 
boŞ
 
dvmTh»adS¹up
();

66 
boŞ
 
dvmTh»adObjS¹up
();

67 
dvmTh»adShutdown
();

68 
dvmSÏyD«mÚs
();

71 
	#kJniLoÿlRefMš
 32

	)

72 
	#kJniLoÿlRefMax
 512

	)

73 
	#kIÁ”ÇlRefDeçuÉ
 32

	)

74 
	#kIÁ”ÇlRefMax
 4096

	)

76 #ifdeà
WITH_TAINT_TRACKING


77 
	#kMšSckSize
 (1024 + 
STACK_OVERFLOW_RESERVE
)

	)

78 
	#kDeçuÉSckSize
 (24*1024è

	)

79 
	#kMaxSckSize
 (512*1024 + 
STACK_OVERFLOW_RESERVE
)

	)

81 
	#kMšSckSize
 (512 + 
STACK_OVERFLOW_RESERVE
)

	)

82 
	#kDeçuÉSckSize
 (12*1024è

	)

83 
	#kMaxSckSize
 (256*1024 + 
STACK_OVERFLOW_RESERVE
)

	)

89 
Sy¡emTh»ad
 
	tSy¡emTh»ad
;

96 
	sTh»ad
 {

98 
u4
 
	mth»adId
;

104 vŞ©
Th»adStus
 
	m¡©us
;

126 
	msu¥’dCouÁ
;

127 
	mdbgSu¥’dCouÁ
;

133 
boŞ
 
	misSu¥’ded
;

136 
±h»ad_t
 
	mhªdË
;

139 
pid_t
 
	msy¡emTid
;

142 
u1
* 
	mš‹½SckS¹
;

145 cÚ¡ 
u1
* 
	mš‹½SckEnd
;

148 
	mš‹½SckSize
;

149 
boŞ
 
	m¡ackOv”æowed
;

152 * 
	mcurF¿me
;

155 
Objeù
* 
	mexû±iÚ
;

158 
Objeù
* 
	mth»adObj
;

161 
JNIEnv
* 
	mjniEnv
;

164 
Reã»nûTabË
 
	mš‹º®LoÿlRefTabË
;

167 #ifdeà
USE_INDIRECT_REF


168 
IndœeùRefTabË
 
	mjniLoÿlRefTabË
;

170 
Reã»nûTabË
 
	mjniLoÿlRefTabË
;

174 
Reã»nûTabË
 
	mjniMÚ™ÜRefTabË
;

177 
Objeù
* 
	mşassLßd”Ov”ride
;

182 
MÚ™Ü
* 
	mwa™MÚ™Ü
;

184 
boŞ
 
	mš‹¼u±šgWa™
;

186 
boŞ
 
	mš‹¼u±ed
;

192 
boŞ
 
	mthrowšgOOME
;

195 
Th»ad
* 
	m´ev
;

196 
Th»ad
* 
	mÃxt
;

199 
DebugInvokeReq
 
	mšvokeReq
;

201 #ifdeà
WITH_MONITOR_TRACKING


203 
LockedObjeùD©a
* 
	mpLockedObjeùs
;

206 #ifdeà
WITH_ALLOC_LIMITS


208 
	m®locLim™
;

211 #ifdeà
WITH_PROFILER


213 
boŞ
 
	mıuClockBa£S‘
;

214 
u8
 
	mıuClockBa£
;

217 
AÎocProfS‹
 
	m®locProf
;

220 #ifdeà
WITH_JNI_STACK_CHECK


221 
u4
 
	m¡ackCrc
;

224 #ià
WITH_EXTRA_GC_CHECKS
 > 1

226 cÚ¡ 
u2
* 
	mcu¼’tPc2
;

230 
Sy¡emTh»ad
* 
	msy¡emTh»ad
;

231 } 
	tTh»ad
;

234 * (*
	tIÁ”ÇlTh»adS¹
)(* 
	t¬g
);

237 
	sIÁ”ÇlS¹Args
 {

239 
IÁ”ÇlTh»adS¹
 
	mfunc
;

240 * 
	mfuncArg
;

241 * 
	mÇme
;

242 
Objeù
* 
	mgroup
;

243 
boŞ
 
	misD«mÚ
;

245 vŞ©
Th»ad
** 
	mpTh»ad
;

246 vŞ©* 
	mpC»©eStus
;

247 } 
	tIÁ”ÇlS¹Args
;

250 
boŞ
 
dvmP»pMašFÜJni
(
JNIEnv
* 
pEnv
);

251 
boŞ
 
dvmP»pMašTh»ad
();

254 
pid_t
 
dvmG‘SysTh»adId
();

261 
Th»ad
* 
dvmTh»adS–f
();

264 
dvmLockTh»adLi¡
(
Th»ad
* 
£lf
);

266 
dvmUÆockTh»adLi¡
();

271 
	eSu¥’dCau£
 {

272 
	mSUSPEND_NOT
 = 0,

273 
	mSUSPEND_FOR_GC
,

274 
	mSUSPEND_FOR_DEBUG
,

275 
	mSUSPEND_FOR_DEBUG_EVENT
,

276 
	mSUSPEND_FOR_STACK_DUMP
,

277 
	mSUSPEND_FOR_DEX_OPT
,

278 #ià
defšed
(
WITH_JIT
)

279 
	mSUSPEND_FOR_JIT
,

281 } 
	tSu¥’dCau£
;

282 
dvmSu¥’dTh»ad
(
Th»ad
* 
th»ad
);

283 
dvmSu¥’dS–f
(
boŞ
 
jdwpAùiv™y
);

284 
dvmResumeTh»ad
(
Th»ad
* 
th»ad
);

285 
dvmSu¥’dAÎTh»ads
(
Su¥’dCau£
 
why
);

286 
dvmResumeAÎTh»ads
(
Su¥’dCau£
 
why
);

287 
dvmUndoDebugg”Su¥’siÚs
();

292 
boŞ
 
dvmIsSu¥’ded
(
Th»ad
* 
th»ad
);

297 
dvmWa™FÜSu¥’d
(
Th»ad
* 
th»ad
);

305 
boŞ
 
dvmCheckSu¥’dP’dšg
(
Th»ad
* 
£lf
);

311 
INLINE
 
boŞ
 
	$dvmCheckSu¥’dQuick
(
Th»ad
* 
£lf
) {

312  (
£lf
->
su¥’dCouÁ
 != 0);

313 
	}
}

327 
Th»adStus
 
dvmChªgeStus
(
Th»ad
* 
£lf
, Th»adStu 
ÃwStus
);

332 
INLINE
 
	$dvmIn™Mu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

334 #ifdeà
CHECK_MUTEX


335 
±h»ad_mu‹x©Œ_t
 
©Œ
;

336 
cc
;

338 
	`±h»ad_mu‹x©Œ_š™
(&
©Œ
);

339 
cc
 = 
	`±h»ad_mu‹x©Œ_£‰y³
(&
©Œ
, 
PTHREAD_MUTEX_ERRORCHECK_NP
);

340 
	`as£¹
(
cc
 == 0);

341 
	`±h»ad_mu‹x_š™
(
pMu‹x
, &
©Œ
);

342 
	`±h»ad_mu‹x©Œ_de¡roy
(&
©Œ
);

344 
	`±h»ad_mu‹x_š™
(
pMu‹x
, 
NULL
);

346 
	}
}

351 
INLINE
 
	$dvmLockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

353 
cc
 = 
	`±h»ad_mu‹x_lock
(
pMu‹x
);

354 
	`as£¹
(
cc
 == 0);

355 
	}
}

360 
INLINE
 
	$dvmUÆockMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

362 
cc
 = 
	`±h»ad_mu‹x_uÆock
(
pMu‹x
);

363 
	`as£¹
(
cc
 == 0);

364 
	}
}

369 
INLINE
 
	$dvmDe¡royMu‹x
(
±h»ad_mu‹x_t
* 
pMu‹x
)

371 
cc
 = 
	`±h»ad_mu‹x_de¡roy
(
pMu‹x
);

372 
	`as£¹
(
cc
 == 0);

373 
	}
}

378 
boŞ
 
dvmC»©eIÁ”pTh»ad
(
Objeù
* 
th»adObj
, 
»qSckSize
);

384 
boŞ
 
dvmC»©eIÁ”ÇlTh»ad
(
±h»ad_t
* 
pHªdË
, cÚ¡ * 
Çme
,

385 
IÁ”ÇlTh»adS¹
 
func
, * 
funcArg
);

390 
boŞ
 
dvmA‰achCu¼’tTh»ad
(cÚ¡ 
JavaVMA‰achArgs
* 
pArgs
, boŞ 
isD«mÚ
);

391 
dvmD‘achCu¼’tTh»ad
();

396 
Objeù
* 
dvmG‘MašTh»adGroup
();

397 
Objeù
* 
dvmG‘Sy¡emTh»adGroup
();

402 
Th»ad
* 
dvmG‘Th»adFromTh»adObjeù
(
Objeù
* 
vmTh»adObj
);

408 
dvmTh»adSË•
(
u8
 
m£c
, 
u4
 
n£c
);

413 * 
dvmG‘Th»adName
(
Th»ad
* 
th»ad
);

419 
boŞ
 
dvmIsOnTh»adLi¡
(cÚ¡ 
Th»ad
* 
th»ad
);

424 
INLINE
 
JNIEnv
* 
	$dvmG‘Th»adJNIEnv
(
Th»ad
* 
£lf
è{  s–f->
jniEnv
; 
	}
}

425 
INLINE
 
	$dvmS‘Th»adJNIEnv
(
Th»ad
* 
£lf
, 
JNIEnv
* 
’v
è{ s–f->
jniEnv
 =ƒnv;
	}
}

430 
dvmChªgeTh»adPriÜ™y
(
Th»ad
* 
th»ad
, 
ÃwPriÜ™y
);

435 
dvmDumpTh»ad
(
Th»ad
* 
th»ad
, 
boŞ
 
isRuÂšg
);

436 
dvmDumpTh»adEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
,

437 
boŞ
 
isRuÂšg
);

442 
dvmDumpAÎTh»ads
(
boŞ
 
g¿bLock
);

443 
dvmDumpAÎTh»adsEx
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
boŞ
 
g¿bLock
);

445 #ifdeà
WITH_MONITOR_TRACKING


454 
	sLockedObjeùD©a
 {

456 
Objeù
* 
	mobj
;

459 
	m»cursiÚCouÁ
;

462 
u4
 
	m¡ackD•th
;

463 * 
	m¿wSckT¿û
;

465 
LockedObjeùD©a
* 
	mÃxt
;

466 } 
	tLockedObjeùD©a
;

471 
dvmAddToMÚ™ÜLi¡
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
, 
boŞ
 
w™hT¿û
);

472 
dvmRemoveFromMÚ™ÜLi¡
(
Th»ad
* 
£lf
, 
Objeù
* 
obj
);

473 
LockedObjeùD©a
* 
dvmFšdInMÚ™ÜLi¡
(cÚ¡ 
Th»ad
* 
£lf
, cÚ¡ 
Objeù
* 
obj
);

	@UtfString.c

23 
	~"D®vik.h
"

24 
	~<¡dlib.h
>

39 
boŞ
 
	$¡ršgS¹up
()

41 ià(
gDvm
.
javaLªgSŒšgR—dy
 < 0) {

42 
	`LOGE
("ERROR:„eentrant string initialization\n");

43 
	`as£¹
(
çl£
);

44  
çl£
;

46 
	`as£¹
(
gDvm
.
javaLªgSŒšgR—dy
 == 0);

48 
gDvm
.
javaLªgSŒšgR—dy
 = -1;

50 ià(
gDvm
.
şassJavaLªgSŒšg
 =ğ
NULL
)

51 
gDvm
.
şassJavaLªgSŒšg
 =

52 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/String;");

54 
gDvm
.
offJavaLªgSŒšg_v®ue
 =

55 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgSŒšg
, "value", "[C");

56 
gDvm
.
offJavaLªgSŒšg_couÁ
 =

57 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgSŒšg
, "count", "I");

58 
gDvm
.
offJavaLªgSŒšg_off£t
 =

59 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgSŒšg
, "offset", "I");

60 
gDvm
.
offJavaLªgSŒšg_hashCode
 =

61 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgSŒšg
, "hashCode", "I");

63 ià(
gDvm
.
offJavaLªgSŒšg_v®ue
 < 0 ||

64 
gDvm
.
offJavaLªgSŒšg_couÁ
 < 0 ||

65 
gDvm
.
offJavaLªgSŒšg_off£t
 < 0 ||

66 
gDvm
.
offJavaLªgSŒšg_hashCode
 < 0)

68 
	`LOGE
("VM-required field missing from java/lang/String\n");

69  
çl£
;

72 
gDvm
.
javaLªgSŒšgR—dy
 = 1;

74  
Œue
;

75 
	}
}

80 
	$dvmSŒšgShutdown
()

83 
	}
}

97 
u4
 
	$dvmCompu‹Utf8Hash
(cÚ¡ * 
utf8SŒ
)

99 
u4
 
hash
 = 1;

101 *
utf8SŒ
 != '\0')

102 
hash
 = hash * 31 + *
utf8SŒ
++;

104  
hash
;

105 
	}
}

116 
	$dvmUtf8L’
(cÚ¡ * 
utf8SŒ
)

118 
ic
, 
Ën
 = 0;

120 (
ic
 = *
utf8SŒ
++) != '\0') {

121 
Ën
++;

122 ià((
ic
 & 0x80) != 0) {

124 
utf8SŒ
++;

125 ià((
ic
 & 0x20) != 0) {

127 
utf8SŒ
++;

132  
Ën
;

133 
	}
}

138 
	$dvmCÚv”tUtf8ToUtf16
(
u2
* 
utf16SŒ
, cÚ¡ * 
utf8SŒ
)

140 *
utf8SŒ
 != '\0')

141 *
utf16SŒ
++ = 
	`dexG‘Utf16FromUtf8
(&
utf8SŒ
);

142 
	}
}

148 
	$utf16_utf8By‹L’
(cÚ¡ 
u2
* 
utf16SŒ
, 
Ën
)

150 
utf8L’
 = 0;

152 
Ën
--) {

153 
uic
 = *
utf16SŒ
++;

158 ià(
uic
 == 0 || uic > 0x7f) {

159 ià(
uic
 > 0x07ff)

160 
utf8L’
 += 3;

162 
utf8L’
 += 2;

164 
utf8L’
++;

166  
utf8L’
;

167 
	}
}

175 
	$cÚv”tUtf16ToUtf8
(* 
utf8SŒ
, cÚ¡ 
u2
* 
utf16SŒ
, 
Ën
)

177 
	`as£¹
(
Ën
 >= 0);

179 
Ën
--) {

180 
uic
 = *
utf16SŒ
++;

185 ià(
uic
 == 0 || uic > 0x7f) {

186 ià(
uic
 > 0x07ff) {

187 *
utf8SŒ
++ = (
uic
 >> 12) | 0xe0;

188 *
utf8SŒ
++ = ((
uic
 >> 6) & 0x3f) | 0x80;

189 *
utf8SŒ
++ = (
uic
 & 0x3f) | 0x80;

191 *
utf8SŒ
++ = (
uic
 >> 6) | 0xc0;

192 *
utf8SŒ
++ = (
uic
 & 0x3f) | 0x80;

195 *
utf8SŒ
++ = 
uic
;

199 *
utf8SŒ
 = '\0';

200 
	}
}

205 
šlše
 
u4
 
	$dvmCompu‹Utf16Hash
(cÚ¡ 
u2
* 
utf16SŒ
, 
Ën
)

207 
u4
 
hash
 = 0;

209 
Ën
--)

210 
hash
 = hash * 31 + *
utf16SŒ
++;

212  
hash
;

213 
	}
}

214 
u4
 
	$dvmCompu‹SŒšgHash
(
SŒšgObjeù
* 
¡rObj
) {

215 
A¼ayObjeù
* 
ch¬s
 = (A¼ayObjeù*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
¡rObj
,

216 
gDvm
.
offJavaLªgSŒšg_v®ue
);

217 
off£t
, 
Ën
;

219 
Ën
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¡rObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

220 
off£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¡rObj
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

222  
	`dvmCompu‹Utf16Hash
((
u2
*è
ch¬s
->
cÚ‹Ás
 + 
off£t
, 
Ën
);

223 
	}
}

234 
SŒšgObjeù
* 
	$dvmC»©eSŒšgFromC¡r
(cÚ¡ * 
utf8SŒ
, 
®locFÏgs
)

236 
	`as£¹
(
utf8SŒ
 !ğ
NULL
);

238  
	`dvmC»©eSŒšgFromC¡rAndL’gth
(
utf8SŒ
, 
	`dvmUtf8L’
(utf8Str),

239 
®locFÏgs
);

240 
	}
}

252 
SŒšgObjeù
* 
	$dvmC»©eSŒšgFromC¡rAndL’gth
(cÚ¡ * 
utf8SŒ
,

253 
u4
 
utf16L’gth
, 
®locFÏgs
)

255 
SŒšgObjeù
* 
ÃwObj
;

256 
A¼ayObjeù
* 
ch¬s
;

257 
u4
 
hashCode
 = 0;

260 
	`as£¹
(
®locFÏgs
 !ğ
ALLOC_DONT_TRACK
);

261 
	`as£¹
(
utf8SŒ
 !ğ
NULL
);

263 ià(
gDvm
.
javaLªgSŒšgR—dy
 <= 0) {

264 ià(!
	`¡ršgS¹up
())

265  
NULL
;

269 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgSŒšg
) &&

270 !
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgSŒšg
))

272  
NULL
;

275 
ÃwObj
 = (
SŒšgObjeù
*è
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgSŒšg
,

276 
®locFÏgs
);

277 ià(
ÃwObj
 =ğ
NULL
)

278  
NULL
;

280 
ch¬s
 = 
	`dvmAÎocPrim™iveA¼ay
('C', 
utf16L’gth
, 
®locFÏgs
);

281 ià(
ch¬s
 =ğ
NULL
) {

282 
	`dvmR–—£T¿ckedAÎocIFN
((
Objeù
*è
ÃwObj
, 
NULL
, 
®locFÏgs
);

283  
NULL
;

285 
	`dvmCÚv”tUtf8ToUtf16
((
u2
*)
ch¬s
->
cÚ‹Ás
, 
utf8SŒ
);

286 
hashCode
 = 
	`dvmCompu‹Utf16Hash
((
u2
*è
ch¬s
->
cÚ‹Ás
, 
utf16L’gth
);

288 
	`dvmS‘F›ldObjeù
((
Objeù
*)
ÃwObj
, 
gDvm
.
offJavaLªgSŒšg_v®ue
,

289 (
Objeù
*)
ch¬s
);

290 
	`dvmR–—£T¿ckedAÎocIFN
((
Objeù
*è
ch¬s
, 
NULL
, 
®locFÏgs
);

291 
	`dvmS‘F›ldIÁ
((
Objeù
*)
ÃwObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
, 
utf16L’gth
);

292 
	`dvmS‘F›ldIÁ
((
Objeù
*)
ÃwObj
, 
gDvm
.
offJavaLªgSŒšg_hashCode
, 
hashCode
);

301  
ÃwObj
;

302 
	}
}

307 
SŒšgObjeù
* 
	$dvmC»©eSŒšgFromUnicode
(cÚ¡ 
u2
* 
unich¬s
, 
Ën
)

309 
SŒšgObjeù
* 
ÃwObj
;

310 
A¼ayObjeù
* 
ch¬s
;

311 
u4
 
hashCode
 = 0;

314 
	`as£¹
(
Ën
 =ğ0 || 
unich¬s
 !ğ
NULL
);

316 ià(
gDvm
.
javaLªgSŒšgR—dy
 <= 0) {

317 ià(!
	`¡ršgS¹up
())

318  
NULL
;

322 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgSŒšg
) &&

323 !
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgSŒšg
))

325  
NULL
;

328 
ÃwObj
 = (
SŒšgObjeù
*è
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgSŒšg
,

329 
ALLOC_DEFAULT
);

330 ià(
ÃwObj
 =ğ
NULL
)

331  
NULL
;

333 
ch¬s
 = 
	`dvmAÎocPrim™iveA¼ay
('C', 
Ën
, 
ALLOC_DEFAULT
);

334 ià(
ch¬s
 =ğ
NULL
) {

335 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwObj
, 
NULL
);

336  
NULL
;

338 ià(
Ën
 > 0)

339 
	`memıy
(
ch¬s
->
cÚ‹Ás
, 
unich¬s
, 
Ën
 * (
u2
));

340 
hashCode
 = 
	`dvmCompu‹Utf16Hash
((
u2
*è
ch¬s
->
cÚ‹Ás
, 
Ën
);

342 
	`dvmS‘F›ldObjeù
((
Objeù
*)
ÃwObj
, 
gDvm
.
offJavaLªgSŒšg_v®ue
,

343 (
Objeù
*)
ch¬s
);

344 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ch¬s
, 
NULL
);

345 
	`dvmS‘F›ldIÁ
((
Objeù
*)
ÃwObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
, 
Ën
);

346 
	`dvmS‘F›ldIÁ
((
Objeù
*)
ÃwObj
, 
gDvm
.
offJavaLªgSŒšg_hashCode
, 
hashCode
);

354  
ÃwObj
;

355 
	}
}

362 * 
	$dvmC»©eC¡rFromSŒšg
(
SŒšgObjeù
* 
j¡r
)

364 * 
ÃwSŒ
;

365 
A¼ayObjeù
* 
ch¬s
;

366 
Ën
, 
by‹L’
, 
off£t
;

367 cÚ¡ 
u2
* 
d©a
;

369 
	`as£¹
(
gDvm
.
javaLªgSŒšgR—dy
 > 0);

371 ià(
j¡r
 =ğ
NULL
)

372  
NULL
;

374 
Ën
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
j¡r
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

375 
off£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
j¡r
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

376 
ch¬s
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
j¡r
,

377 
gDvm
.
offJavaLªgSŒšg_v®ue
);

378 
d©a
 = (cÚ¡ 
u2
*è
ch¬s
->
cÚ‹Ás
 + 
off£t
;

379 
	`as£¹
(
off£t
 + 
Ën
 <ğ(è
ch¬s
->
Ëngth
);

381 
by‹L’
 = 
	`utf16_utf8By‹L’
(
d©a
, 
Ën
);

382 
ÃwSŒ
 = (*è
	`m®loc
(
by‹L’
+1);

383 ià(
ÃwSŒ
 =ğ
NULL
)

384  
NULL
;

385 
	`cÚv”tUtf16ToUtf8
(
ÃwSŒ
, 
d©a
, 
Ën
);

387  
ÃwSŒ
;

388 
	}
}

394 
	$dvmC»©eC¡rFromSŒšgRegiÚ
(
SŒšgObjeù
* 
j¡r
, 
¡¬t
, 
Ën
,

395 * 
buf
)

397 cÚ¡ 
u2
* 
d©a
;

399 
d©a
 = 
	`dvmSŒšgCh¬s
(
j¡r
è+ 
¡¬t
;

400 
	`cÚv”tUtf16ToUtf8
(
buf
, 
d©a
, 
Ën
);

401 
	}
}

408 
	$dvmSŒšgUtf8By‹L’
(
SŒšgObjeù
* 
j¡r
)

410 
A¼ayObjeù
* 
ch¬s
;

411 
Ën
, 
off£t
;

412 cÚ¡ 
u2
* 
d©a
;

414 
	`as£¹
(
gDvm
.
javaLªgSŒšgR—dy
 > 0);

416 ià(
j¡r
 =ğ
NULL
)

419 
Ën
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
j¡r
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

420 
off£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
j¡r
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

421 
ch¬s
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
j¡r
,

422 
gDvm
.
offJavaLªgSŒšg_v®ue
);

423 
d©a
 = (cÚ¡ 
u2
*è
ch¬s
->
cÚ‹Ás
 + 
off£t
;

424 
	`as£¹
(
off£t
 + 
Ën
 <ğ(è
ch¬s
->
Ëngth
);

426  
	`utf16_utf8By‹L’
(
d©a
, 
Ën
);

427 
	}
}

432 
	$dvmSŒšgL’
(
SŒšgObjeù
* 
j¡r
)

434  
	`dvmG‘F›ldIÁ
((
Objeù
*è
j¡r
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

435 
	}
}

440 
A¼ayObjeù
* 
	$dvmSŒšgCh¬A¼ay
(
SŒšgObjeù
* 
j¡r
)

442  (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
j¡r
,

443 
gDvm
.
offJavaLªgSŒšg_v®ue
);

444 
	}
}

449 cÚ¡ 
u2
* 
	$dvmSŒšgCh¬s
(
SŒšgObjeù
* 
j¡r
)

451 
A¼ayObjeù
* 
ch¬s
;

452 
off£t
;

454 
off£t
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
j¡r
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

455 
ch¬s
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
j¡r
,

456 
gDvm
.
offJavaLªgSŒšg_v®ue
);

457  (cÚ¡ 
u2
*è
ch¬s
->
cÚ‹Ás
 + 
off£t
;

458 
	}
}

468 
	$dvmHashcmpSŒšgs
(cÚ¡ * 
v¡rObj1
, cÚ¡ * 
v¡rObj2
)

470 cÚ¡ 
SŒšgObjeù
* 
¡rObj1
 = (cÚ¡ SŒšgObjeù*è
v¡rObj1
;

471 cÚ¡ 
SŒšgObjeù
* 
¡rObj2
 = (cÚ¡ SŒšgObjeù*è
v¡rObj2
;

472 
A¼ayObjeù
* 
ch¬s1
;

473 
A¼ayObjeù
* 
ch¬s2
;

474 
Ën1
, 
Ën2
, 
off£t1
, 
off£t2
;

476 
	`as£¹
(
gDvm
.
javaLªgSŒšgR—dy
 > 0);

479 
Ën1
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¡rObj1
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

480 
off£t1
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¡rObj1
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

481 
Ën2
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¡rObj2
, 
gDvm
.
offJavaLªgSŒšg_couÁ
);

482 
off£t2
 = 
	`dvmG‘F›ldIÁ
((
Objeù
*è
¡rObj2
, 
gDvm
.
offJavaLªgSŒšg_off£t
);

483 ià(
Ën1
 !ğ
Ën2
)

484  
Ën1
 - 
Ën2
;

486 
ch¬s1
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
¡rObj1
,

487 
gDvm
.
offJavaLªgSŒšg_v®ue
);

488 
ch¬s2
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*è
¡rObj2
,

489 
gDvm
.
offJavaLªgSŒšg_v®ue
);

492 
	`as£¹
(
off£t1
 + 
Ën1
 <ğ(è
ch¬s1
->
Ëngth
);

493 
	`as£¹
(
off£t2
 + 
Ën2
 <ğ(è
ch¬s2
->
Ëngth
);

495  
	`memcmp
((cÚ¡ 
u2
*è
ch¬s1
->
cÚ‹Ás
 + 
off£t1
,

496 (cÚ¡ 
u2
*è
ch¬s2
->
cÚ‹Ás
 + 
off£t2
,

497 
Ën1
 * (
u2
));

498 
	}
}

	@UtfString.h

20 #iâdeà
_DALVIK_STRING


21 
	#_DALVIK_STRING


	)

26 
u4
 
dvmCompu‹Utf8Hash
(cÚ¡ * 
¡r
);

31 
u4
 
dvmCompu‹SŒšgHash
(
SŒšgObjeù
* 
¡rObj
);

42 
SŒšgObjeù
* 
dvmC»©eSŒšgFromC¡r
(cÚ¡ * 
utf8SŒ
, 
®locFÏgs
);

54 
SŒšgObjeù
* 
dvmC»©eSŒšgFromC¡rAndL’gth
(cÚ¡ * 
utf8SŒ
,

55 
u4
 
utf16L’gth
, 
®locFÏgs
);

61 
dvmUtf8L’
(cÚ¡ * 
utf8SŒ
);

67 
dvmCÚv”tUtf8ToUtf16
(
u2
* 
utf16SŒ
, cÚ¡ * 
utf8SŒ
);

74 
SŒšgObjeù
* 
dvmC»©eSŒšgFromUnicode
(cÚ¡ 
u2
* 
unich¬s
, 
Ën
);

82 * 
dvmC»©eC¡rFromSŒšg
(
SŒšgObjeù
* 
j¡r
);

88 
dvmC»©eC¡rFromSŒšgRegiÚ
(
SŒšgObjeù
* 
j¡r
, 
¡¬t
, 
Ën
,

89 * 
buf
);

95 
dvmSŒšgUtf8By‹L’
(
SŒšgObjeù
* 
j¡r
);

100 
dvmSŒšgL’
(
SŒšgObjeù
* 
j¡r
);

105 
A¼ayObjeù
* 
dvmSŒšgCh¬A¼ay
(
SŒšgObjeù
* 
j¡r
);

110 cÚ¡ 
u2
* 
dvmSŒšgCh¬s
(
SŒšgObjeù
* 
j¡r
);

115 
dvmHashcmpSŒšgs
(cÚ¡ * 
v¡rObj1
, cÚ¡ * 
v¡rObj2
);

	@alloc/Alloc.c

19 
	~"D®vik.h
"

20 
	~"®loc/H—p.h
"

21 
	~"®loc/H—pIÁ”Çl.h
"

23 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


24 
	~"h´of/H´of.h
"

34 
boŞ
 
	$dvmGcS¹up
()

36 
	`dvmIn™Mu‹x
(&
gDvm
.
gcH—pLock
);

38  
	`dvmH—pS¹up
();

39 
	}
}

45 
boŞ
 
	$dvmGcS¹upAá”ZygÙe
()

47 ià(!
	`dvmH—pWÜk”S¹up
()) {

48  
çl£
;

50  
	`dvmH—pS¹upAá”ZygÙe
();

51 
	}
}

56 
	$dvmGcShutdown
()

59 
	`dvmH—pShutdown
();

60 
	}
}

65 
boŞ
 
	$dvmGcP»ZygÙeFÜk
()

67  
	`dvmH—pSourûS¹upBefÜeFÜk
();

68 
	}
}

73 
Objeù
* 
	$ü—‹StockExû±iÚ
(cÚ¡ * 
desütÜ
, cÚ¡ * 
msg
)

75 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

76 
SŒšgObjeù
* 
msgSŒ
 = 
NULL
;

77 
CÏssObjeù
* 
şazz
;

78 
M‘hod
* 
š™
;

79 
Objeù
* 
obj
;

82 
şazz
 = 
	`dvmFšdSy¡emCÏss
(
desütÜ
);

83 ià(
şazz
 =ğ
NULL
) {

84 
	`LOGE
("UÇbËØfšd %s\n", 
desütÜ
);

85  
NULL
;

88 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "<init>",

90 ià(
š™
 =ğ
NULL
) {

91 
	`LOGE
("UÇbËØfšd SŒšg-¬g cÚ¡ruùÜ fÜ %s\n", 
desütÜ
);

92  
NULL
;

95 
obj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DEFAULT
);

96 ià(
obj
 =ğ
NULL
)

97  
NULL
;

99 ià(
msg
 =ğ
NULL
) {

100 
msgSŒ
 = 
NULL
;

102 
msgSŒ
 = 
	`dvmC»©eSŒšgFromC¡r
(
msg
, 
ALLOC_DEFAULT
);

103 ià(
msgSŒ
 =ğ
NULL
) {

104 
	`LOGW
("Could‚Ù‡Îoÿ‹ mes§g¡ršg \"%s\"\n", 
msg
);

105 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

106  
NULL
;

110 
JV®ue
 
unu£d
;

111 
	`dvmC®lM‘hod
(
£lf
, 
š™
, 
obj
, &
unu£d
, 
msgSŒ
);

112 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

113 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
msgSŒ
, 
£lf
);

114 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

115  
NULL
;

118 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
msgSŒ
, 
£lf
);

119  
obj
;

120 
	}
}

130 
boŞ
 
	$dvmC»©eStockExû±iÚs
()

136 
gDvm
.
outOfMemÜyObj
 = 
	`ü—‹StockExû±iÚ
("Ljava/lang/OutOfMemoryError;",

138 
	`dvmR–—£T¿ckedAÎoc
(
gDvm
.
outOfMemÜyObj
, 
NULL
);

139 
gDvm
.
š‹º®E¼ÜObj
 = 
	`ü—‹StockExû±iÚ
("Ljava/lang/InternalError;",

141 
	`dvmR–—£T¿ckedAÎoc
(
gDvm
.
š‹º®E¼ÜObj
, 
NULL
);

142 
gDvm
.
noCÏssDefFoundE¼ÜObj
 =

143 
	`ü—‹StockExû±iÚ
("Ljava/Ïng/NoCÏssDefFoundE¼Ü;", 
NULL
);

144 
	`dvmR–—£T¿ckedAÎoc
(
gDvm
.
noCÏssDefFoundE¼ÜObj
, 
NULL
);

146 ià(
gDvm
.
outOfMemÜyObj
 =ğ
NULL
 || gDvm.
š‹º®E¼ÜObj
 == NULL ||

147 
gDvm
.
noCÏssDefFoundE¼ÜObj
 =ğ
NULL
)

149 
	`LOGW
("Unableo create stockƒxceptions\n");

150  
çl£
;

153  
Œue
;

154 
	}
}

162 
Objeù
* 
	$dvmAÎocObjeù
(
CÏssObjeù
* 
şazz
, 
æags
)

164 
Objeù
* 
ÃwObj
;

166 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
şazz
è|| 
	`dvmIsCÏssIn™Ÿlizšg
(clazz));

168 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISFINALIZABLE
)) {

169 
æags
 |ğ
ALLOC_FINALIZABLE
;

173 
ÃwObj
 = 
	`dvmM®loc
(
şazz
->
objeùSize
, 
æags
);

174 ià(
ÃwObj
 !ğ
NULL
) {

175 
	`DVM_OBJECT_INIT
(
ÃwObj
, 
şazz
);

176 
	`LOGVV
("AÎocObjeù: % (%d)\n", 
şazz
->
desütÜ
,

177 (è
şazz
->
objeùSize
);

178 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


179 
	`h´ofFlInSckT¿û
(
ÃwObj
);

181 
	`dvmT¿ckAÎoÿtiÚ
(
şazz
, cÏzz->
objeùSize
);

184  
ÃwObj
;

185 
	}
}

193 
Objeù
* 
	$dvmClÚeObjeù
(
Objeù
* 
obj
)

195 
Objeù
* 
cİy
;

196 
size
;

197 
æags
;

199 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

205 
	`as£¹
(
obj
->
şazz
 !ğ
gDvm
.
şassJavaLªgCÏss
);

207 ià(
	`IS_CLASS_FLAG_SET
(
obj
->
şazz
, 
CLASS_ISFINALIZABLE
))

208 
æags
 = 
ALLOC_DEFAULT
 | 
ALLOC_FINALIZABLE
;

210 
æags
 = 
ALLOC_DEFAULT
;

213 
size
 = 
	`dvmObjeùSizeInH—p
(
obj
);

215 
cİy
 = 
	`dvmM®loc
(
size
, 
æags
);

216 ià(
cİy
 =ğ
NULL
)

217  
NULL
;

218 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


219 
	`h´ofFlInSckT¿û
(
cİy
);

220 
	`dvmT¿ckAÎoÿtiÚ
(
obj
->
şazz
, 
size
);

223 
	`memıy
(
cİy
, 
obj
, 
size
);

224 
	`DVM_LOCK_INIT
(&
cİy
->
lock
);

232  
cİy
;

233 
	}
}

246 
	$dvmAddT¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
)

248 ià(
£lf
 =ğ
NULL
)

249 
£lf
 = 
	`dvmTh»adS–f
();

253 
	`as£¹
(
£lf
 !ğ
NULL
);

254 ià(!
	`dvmAddToReã»nûTabË
(&
£lf
->
š‹º®LoÿlRefTabË
, 
obj
)) {

255 
	`LOGE
("threadid=%d: unableo‡dd %po internal„efable\n",

256 
£lf
->
th»adId
, 
obj
);

257 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

258 
	`dvmAbÜt
();

260 
	}
}

268 
	$dvmR–—£T¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
)

270 ià(
obj
 =ğ
NULL
)

273 ià(
£lf
 =ğ
NULL
)

274 
£lf
 = 
	`dvmTh»adS–f
();

275 
	`as£¹
(
£lf
 !ğ
NULL
);

280 ià(!
	`dvmRemoveFromReã»nûTabË
(&
£lf
->
š‹º®LoÿlRefTabË
,

281 
£lf
->
š‹º®LoÿlRefTabË
.
bË
, 
obj
))

283 
	`LOGE
("threadid=%d: failedo„emove %p from internal„efable\n",

284 
£lf
->
th»adId
, 
obj
);

285 
	`dvmAbÜt
();

287 
	}
}

293 
	$dvmCŞËùG¬bage
(
boŞ
 
cŞËùSoáReã»nûs
)

295 
	`dvmLockH—p
();

297 
	`LOGVV
("Explicit GC\n");

298 
	`dvmCŞËùG¬bageIÁ”Çl
(
cŞËùSoáReã»nûs
);

300 
	`dvmUÆockH—p
();

301 
	}
}

	@alloc/Alloc.h

19 #iâdeà
_DALVIK_ALLOC_ALLOC


20 
	#_DALVIK_ALLOC_ALLOC


	)

22 
	~<¡dlib.h
>

27 
boŞ
 
dvmGcS¹up
();

28 
boŞ
 
dvmC»©eStockExû±iÚs
();

29 
boŞ
 
dvmGcS¹upAá”ZygÙe
();

30 
dvmGcShutdown
();

35 
boŞ
 
dvmGcP»ZygÙeFÜk
();

45 * 
dvmM®loc
(
size_t
 
size
, 
æags
);

55 
Objeù
* 
dvmAÎocObjeù
(
CÏssObjeù
* 
şazz
, 
æags
);

61 
dvmCË¬AÎocFÏgs
(
Objeù
* 
obj
, 
mask
);

65 
	mALLOC_DEFAULT
 = 0x00,

66 
	mALLOC_NO_GC
 = 0x01,

67 
	mALLOC_DONT_TRACK
 = 0x02,

68 
	mALLOC_FINALIZABLE
 = 0x04,

76 
dvmThrowBadAÎocExû±iÚ
(cÚ¡ * 
msg
);

85 
dvmAddT¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
);

94 
dvmR–—£T¿ckedAÎoc
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
);

100 
INLINE
 
	$dvmR–—£T¿ckedAÎocIFN
(
Objeù
* 
obj
, 
Th»ad
* 
£lf
, 
®locFÏgs
)

102 ià((
®locFÏgs
 & (
ALLOC_NO_GC
|
ALLOC_DONT_TRACK
)) == 0)

103 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

104 
	}
}

109 
boŞ
 
dvmIsV®idObjeù
(cÚ¡ 
Objeù
* 
obj
);

116 
Objeù
* 
dvmClÚeObjeù
(Objeù* 
obj
);

128 
INLINE
 
	$dvmV®id©eObjeù
(
Objeù
* 
obj
)

130 ià(
obj
 =ğ
NULL
) {

131 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

132  
çl£
;

134 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


135 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

136 
	`dvmAbÜt
();

137 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

139  
çl£
;

142 #iâdeà
NDEBUG


144 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

145 
	`dvmAbÜt
();

146 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

148  
çl£
;

151  
Œue
;

152 
	}
}

158 
size_t
 
dvmObjeùSizeInH—p
(cÚ¡ 
Objeù
* 
obj
);

164 
dvmG‘T¬g‘H—pUtiz©iÚ
();

170 
dvmS‘T¬g‘H—pUtiz©iÚ
(
ÃwT¬g‘
);

177 
size_t
 
dvmMšimumH—pSize
(size_ˆ
size
, 
boŞ
 
£t
);

186 
boŞ
 
dvmT¿ckEx‹º®AÎoÿtiÚ
(
size_t
 
n
);

191 
dvmT¿ckEx‹º®F»e
(
size_t
 
n
);

197 
size_t
 
dvmG‘Ex‹º®By‹sAÎoÿ‹d
();

	@alloc/DdmHeap.c

19 
	~<sys/time.h
>

20 
	~<time.h
>

22 
	~"D®vik.h
"

23 
	~"®loc/H—p.h
"

24 
	~"®loc/H—pIÁ”Çl.h
"

25 
	~"®loc/DdmH—p.h
"

26 
	~"®loc/H—pSourû.h
"

28 
	#DEFAULT_HEAP_ID
 1

	)

30 
	eHpifWh’
 {

31 
	mHPIF_WHEN_NEVER
 = 0,

32 
	mHPIF_WHEN_NOW
 = 1,

33 
	mHPIF_WHEN_NEXT_GC
 = 2,

34 
	mHPIF_WHEN_EVERY_GC
 = 3

54 
	#HPIF_SIZE
(
numH—ps
) \

55 ((
u4
è+ (
numH—ps
è* (5 * (u4è+ (
u1
è+ (
u8
)))

	)

57 
	$dvmDdmS’dH—pInfo
(
»asÚ
, 
boŞ
 
shouldLock
)

59 
timev®
 
now
;

60 
u8
 
nowMs
;

61 
u1
 *
buf
, *
b
;

63 
buf
 = (
u1
 *)
	`m®loc
(
	`HPIF_SIZE
(1));

64 ià(
buf
 =ğ
NULL
) {

67 
b
 = 
buf
;

71 ià(
»asÚ
 =ğ
gDvm
.
gcH—p
->
ddmHpifWh’
) {

72 ià(
shouldLock
 && ! 
	`dvmLockH—p
()) {

73 
	`LOGW
("%s(): cª'ˆlock h—°tØş—¸wh’\n", 
__func__
);

74 
sk_wh’
;

76 ià(
»asÚ
 =ğ
gDvm
.
gcH—p
->
ddmHpifWh’
) {

77 ià(
gDvm
.
gcH—p
->
ddmHpifWh’
 =ğ
HPIF_WHEN_NEXT_GC
) {

78 
gDvm
.
gcH—p
->
ddmHpifWh’
 = 
HPIF_WHEN_NEVER
;

81 ià(
shouldLock
) {

82 
	`dvmUÆockH—p
();

85 
sk_wh’
:

89 ià(
	`g‘timeofday
(&
now
, 
NULL
) < 0) {

90 
nowMs
 = 0;

92 
nowMs
 = (
u8
)
now
.
tv_£c
 * 1000 +‚ow.
tv_u£c
 / 1000;

96 
	`£t4BE
(
b
, 1); b += 4;

101 
	`£t4BE
(
b
, 
DEFAULT_HEAP_ID
); b += 4;

104 
	`£t8BE
(
b
, 
nowMs
); b += 8;

107 *
b
++ = (
u1
)
»asÚ
;

110 
	`£t4BE
(
b
, 
gDvm
.
h—pSizeMax
); b += 4;

113 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
NULL
, 0)); b += 4;

116 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0)); b += 4;

119 
	`£t4BE
(
b
, 
	`dvmH—pSourûG‘V®ue
(
HS_OBJECTS_ALLOCATED
, 
NULL
, 0)); b += 4;

121 
	`as£¹
((
šŒ_t
)
b
 =ğ(šŒ_t)
buf
 + (šŒ_t)
	`HPIF_SIZE
(1));

123 
	`dvmDbgDdmS’dChunk
(
	`CHUNK_TYPE
("HPIF"), 
b
 - 
buf
, buf);

124 
	}
}

126 
boŞ


127 
	$dvmDdmHªdËHpifChunk
(
wh’
)

129 
wh’
) {

130 
HPIF_WHEN_NOW
:

131 
	`dvmDdmS’dH—pInfo
(
wh’
, 
Œue
);

133 
HPIF_WHEN_NEVER
:

134 
HPIF_WHEN_NEXT_GC
:

135 
HPIF_WHEN_EVERY_GC
:

136 ià(
	`dvmLockH—p
()) {

137 
gDvm
.
gcH—p
->
ddmHpifWh’
 = 
wh’
;

138 
	`dvmUÆockH—p
();

140 
	`LOGI
("%s(): cª'ˆlock h—°tØ£ˆwh’\n", 
__func__
);

141  
çl£
;

145 
	`LOGI
("%s(): bad wh’ v®u0x%08x\n", 
__func__
, 
wh’
);

146  
çl£
;

149  
Œue
;

150 
	}
}

152 
	eHpsgSŞid™y
 {

153 
	mSOLIDITY_FREE
 = 0,

154 
	mSOLIDITY_HARD
 = 1,

155 
	mSOLIDITY_SOFT
 = 2,

156 
	mSOLIDITY_WEAK
 = 3,

157 
	mSOLIDITY_PHANTOM
 = 4,

158 
	mSOLIDITY_FINALIZABLE
 = 5,

159 
	mSOLIDITY_SWEEP
 = 6,

162 
	eHpsgKšd
 {

163 
	mKIND_OBJECT
 = 0,

164 
	mKIND_CLASS_OBJECT
 = 1,

165 
	mKIND_ARRAY_1
 = 2,

166 
	mKIND_ARRAY_2
 = 3,

167 
	mKIND_ARRAY_4
 = 4,

168 
	mKIND_ARRAY_8
 = 5,

169 
	mKIND_UNKNOWN
 = 6,

170 
	mKIND_NATIVE
 = 7,

173 
	#HPSG_PARTIAL
 (1<<7)

	)

174 
	#HPSG_STATE
(
sŞid™y
, 
kšd
) \

175 ((
u1
)((((
kšd
è& 0x7è<< 3è| ((
sŞid™y
è& 0x7)))

	)

177 
	sH—pChunkCÚ‹xt
 {

178 
u1
 *
	mbuf
;

179 
u1
 *
	mp
;

180 
u1
 *
	mp›ûL’F›ld
;

181 
size_t
 
	mbufL’
;

182 
size_t
 
	mtÙ®AÎoÿtiÚUn™s
;

183 
	mty³
;

184 
boŞ
 
	mm”ge
;

185 
boŞ
 
	mÃedH—d”
;

186 } 
	tH—pChunkCÚ‹xt
;

188 
	#ALLOCATION_UNIT_SIZE
 8

	)

191 
	$æush_hpsg_chunk
(
H—pChunkCÚ‹xt
 *
ùx
)

195 
	`as£¹
(
ùx
->
buf
 <ğùx->
p›ûL’F›ld
 &&

196 
ùx
->
p›ûL’F›ld
 <ğùx->
p
);

197 
	`£t4BE
(
ùx
->
p›ûL’F›ld
, ctx->
tÙ®AÎoÿtiÚUn™s
);

201 
	`dvmDbgDdmS’dChunk
(
ùx
->
ty³
, ctx->
p
 - ctx->
buf
, ctx->buf);

205 
ùx
->
p
 = ctx->
buf
;

206 
ùx
->
tÙ®AÎoÿtiÚUn™s
 = 0;

207 
ùx
->
ÃedH—d”
 = 
Œue
;

208 
ùx
->
p›ûL’F›ld
 = 
NULL
;

209 
	}
}

212 
	$h—p_chunk_ÿÎback
(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

213 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
, *
¬g
)

215 
H—pChunkCÚ‹xt
 *
ùx
 = (H—pChunkCÚ‹xˆ*)
¬g
;

216 
u1
 
¡©e
;

218 
	`UNUSED_PARAMETER
(
u£¾’
);

220 
	`as£¹
((
chunkËn
 & (
ALLOCATION_UNIT_SIZE
-1)) == 0);

227 
size_t
 
Ãeded
 = (((
chunkËn
/
ALLOCATION_UNIT_SIZE
 + 255) / 256) * 2);

228 
size_t
 
by‹sLeá
 = 
ùx
->
bufL’
 - (size_t)(ùx->
p
 - ctx->
buf
);

229 ià(
by‹sLeá
 < 
Ãeded
) {

230 
	`æush_hpsg_chunk
(
ùx
);

233 
by‹sLeá
 = 
ùx
->
bufL’
 - (
size_t
)(ùx->
p
 - ctx->
buf
);

234 ià(
by‹sLeá
 < 
Ãeded
) {

235 
	`LOGW
("chunk isoo bigoransmit (chunklen=%zd, %zd bytes)\n",

236 
chunkËn
, 
Ãeded
);

242 ià(
ùx
->
ÃedH—d”
) {

248 
	`£t4BE
(
ùx
->
p
, 
DEFAULT_HEAP_ID
); ctx->p += 4;

251 *
ùx
->
p
++ = 8;

254 
	`£t4BE
(
ùx
->
p
, (
ušŒ_t
)
chunk±r
); ctx->p += 4;

257 
	`£t4BE
(
ùx
->
p
, 0); ctx->p += 4;

263 
ùx
->
p›ûL’F›ld
 = ctx->
p
;

264 
	`£t4BE
(
ùx
->
p
, 0x55555555); ctx->p += 4;

266 
ùx
->
ÃedH—d”
 = 
çl£
;

271 ià(
u£½Œ
 =ğ
NULL
) {

274 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_FREE
, 0);

276 cÚ¡ 
DvmH—pChunk
 *
hc
 = (cÚ¡ DvmH—pChunk *)
u£½Œ
;

277 cÚ¡ 
Objeù
 *
obj
 = 
	`chunk2±r
(
hc
);

281 
boŞ
 
Çtive
 = 
ùx
->
ty³
 =ğ
	`CHUNK_TYPE
("NHSG");

287 ià(!
Çtive
 && 
	`dvmIsV®idObjeù
(
obj
)) {

288 
CÏssObjeù
 *
şazz
 = 
obj
->clazz;

289 ià(
şazz
 =ğ
NULL
) {

293 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_OBJECT
);

294 } ià(
şazz
 =ğ
gDvm
.
uÆškedJavaLªgCÏss
 ||

295 
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
)

297 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_CLASS_OBJECT
);

298 } ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

299 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOBJECTARRAY
)) {

300 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_4
);

302 
şazz
->
–em’tCÏss
->
´im™iveTy³
) {

303 
PRIM_BOOLEAN
:

304 
PRIM_BYTE
:

305 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_1
);

307 
PRIM_CHAR
:

308 
PRIM_SHORT
:

309 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_2
);

311 
PRIM_INT
:

312 
PRIM_FLOAT
:

313 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_4
);

315 
PRIM_DOUBLE
:

316 
PRIM_LONG
:

317 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_ARRAY_8
);

320 
	`as£¹
(!"Unknown GC heap objectype");

321 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_UNKNOWN
);

326 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_OBJECT
);

329 
obj
 = 
NULL
;

330 
¡©e
 = 
	`HPSG_STATE
(
SOLIDITY_HARD
, 
KIND_NATIVE
);

336 
chunkËn
 /ğ
ALLOCATION_UNIT_SIZE
;

337 
ùx
->
tÙ®AÎoÿtiÚUn™s
 +ğ
chunkËn
;

338 
chunkËn
 > 256) {

339 *
ùx
->
p
++ = 
¡©e
 | 
HPSG_PARTIAL
;

340 *
ùx
->
p
++ = 255;

341 
chunkËn
 -= 256;

343 *
ùx
->
p
++ = 
¡©e
;

344 *
ùx
->
p
++ = 
chunkËn
 - 1;

345 
	}
}

347 
	eHpsgWh’
 {

348 
	mHPSG_WHEN_NEVER
 = 0,

349 
	mHPSG_WHEN_EVERY_GC
 = 1,

351 
	eHpsgWh©
 {

352 
	mHPSG_WHAT_MERGED_OBJECTS
 = 0,

353 
	mHPSG_WHAT_DISTINCT_OBJECTS
 = 1,

361 
	#HPSx_CHUNK_SIZE
 (16384 - 16)

	)

363 
dlm®loc_w®k_h—p
((*)(cÚ¡ *, 
size_t
, const *, size_t, *),*);

366 
	$w®kH—p
(
boŞ
 
m”ge
, boŞ 
Çtive
)

368 
H—pChunkCÚ‹xt
 
ùx
;

370 
	`mem£t
(&
ùx
, 0, (ctx));

371 
ùx
.
bufL’
 = 
HPSx_CHUNK_SIZE
;

372 
ùx
.
buf
 = (
u1
 *)
	`m®loc
(ùx.
bufL’
);

373 ià(
ùx
.
buf
 =ğ
NULL
) {

377 
ùx
.
m”ge
 = merge;

378 ià(
Çtive
) {

379 
ùx
.
ty³
 = 
	`CHUNK_TYPE
("NHSG");

381 ià(
ùx
.
m”ge
) {

382 
ùx
.
ty³
 = 
	`CHUNK_TYPE
("HPSG");

384 
ùx
.
ty³
 = 
	`CHUNK_TYPE
("HPSO");

388 
ùx
.
p
 = ctx.
buf
;

389 
ùx
.
ÃedH—d”
 = 
Œue
;

390 ià(
Çtive
) {

391 
	`dlm®loc_w®k_h—p
(
h—p_chunk_ÿÎback
, (*)&
ùx
);

393 
	`dvmH—pSourûW®k
(
h—p_chunk_ÿÎback
, (*)&
ùx
);

395 ià(
ùx
.
p
 > ctx.
buf
) {

396 
	`æush_hpsg_chunk
(&
ùx
);

399 
	`ä“
(
ùx
.
buf
);

400 
	}
}

403 
	$dvmDdmS’dH—pSegm’ts
(
boŞ
 
shouldLock
, boŞ 
Çtive
)

405 
u1
 
h—pId
[(
u4
)];

406 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

407 
wh’
, 
wh©
;

408 
boŞ
 
m”ge
;

412 ià(!
Çtive
) {

413 
wh’
 = 
gcH—p
->
ddmHpsgWh’
;

414 
wh©
 = 
gcH—p
->
ddmHpsgWh©
;

415 ià(
wh’
 =ğ
HPSG_WHEN_NEVER
) {

419 
wh’
 = 
gcH—p
->
ddmNhsgWh’
;

420 
wh©
 = 
gcH—p
->
ddmNhsgWh©
;

421 ià(
wh’
 =ğ
HPSG_WHEN_NEVER
) {

425 ià(
shouldLock
 && !
	`dvmLockH—p
()) {

426 
	`LOGW
("Can't†ock heap for DDM HPSx dump\n");

432 ià(
wh©
 =ğ
HPSG_WHAT_MERGED_OBJECTS
) {

433 
m”ge
 = 
Œue
;

434 } ià(
wh©
 =ğ
HPSG_WHAT_DISTINCT_OBJECTS
) {

435 
m”ge
 = 
çl£
;

437 
	`as£¹
(!"bad HPSG.what value");

443 
	`£t4BE
(
h—pId
, 
DEFAULT_HEAP_ID
);

444 
	`dvmDbgDdmS’dChunk
(
Çtive
 ? 
	`CHUNK_TYPE
("NHST") : CHUNK_TYPE("HPST"),

445 (
u4
), 
h—pId
);

449 
	`w®kH—p
(
m”ge
, 
Çtive
);

453 
	`dvmDbgDdmS’dChunk
(
Çtive
 ? 
	`CHUNK_TYPE
("NHEN") : CHUNK_TYPE("HPEN"),

454 (
u4
), 
h—pId
);

456 ià(
shouldLock
) {

457 
	`dvmUÆockH—p
();

459 
	}
}

461 
boŞ


462 
	$dvmDdmHªdËHpsgNhsgChunk
(
wh’
, 
wh©
, 
boŞ
 
Çtive
)

464 
	`LOGI
("dvmDdmHªdËHpsgChunk(wh’ %d, wh© %d, h—°%d)\n", 
wh’
, 
wh©
,

465 
Çtive
);

466 
wh’
) {

467 
HPSG_WHEN_NEVER
:

468 
HPSG_WHEN_EVERY_GC
:

471 
	`LOGI
("%s(): bad wh’ v®u0x%08x\n", 
__func__
, 
wh’
);

472  
çl£
;

475 
wh©
) {

476 
HPSG_WHAT_MERGED_OBJECTS
:

477 
HPSG_WHAT_DISTINCT_OBJECTS
:

480 
	`LOGI
("%s(): bad wh© v®u0x%08x\n", 
__func__
, 
wh©
);

481  
çl£
;

484 ià(
	`dvmLockH—p
()) {

485 ià(!
Çtive
) {

486 
gDvm
.
gcH—p
->
ddmHpsgWh’
 = 
wh’
;

487 
gDvm
.
gcH—p
->
ddmHpsgWh©
 = 
wh©
;

489 
gDvm
.
gcH—p
->
ddmNhsgWh’
 = 
wh’
;

490 
gDvm
.
gcH—p
->
ddmNhsgWh©
 = 
wh©
;

493 
	`dvmUÆockH—p
();

495 
	`LOGI
("%s(): cª'ˆlock h—°tØ£ˆwh’/wh©\n", 
__func__
);

496  
çl£
;

499  
Œue
;

500 
	}
}

	@alloc/DdmHeap.h

19 #iâdeà
_DALVIK_ALLOC_DDMHEAP


20 
	#_DALVIK_ALLOC_DDMHEAP


	)

27 
dvmDdmS’dH—pInfo
(
»asÚ
, 
boŞ
 
shouldLock
);

39 
dvmDdmS’dH—pSegm’ts
(
boŞ
 
shouldLock
, boŞ 
Çtive
);

	@alloc/Float12.h

17 #iâdeà
_DALVIK_FLOAT12_H


18 
	#_DALVIK_FLOAT12_H


	)

34 
šlše
 
	$štToFlßt12
(
v®
)

36 
ov®
 = 
v®
;

37 
shiá
 = 0;

44 
pv®
 = 
v®
;

45 
v®
 > 0x1ff) {

46 
pv®
 = 
v®
;

47 
v®
 >>= 1;

48 
shiá
++;

50 ià(
shiá
 > 0 && (
pv®
 & 1)) {

53 
v®
++;

54 ià(
v®
 > 0x1ff) {

55 
v®
 = (val + 1) >> 1;

56 
shiá
++;

64 
shiá
 % 4 != 0) {

65 
v®
 = (val + 1) >> 1;

66 
shiá
++;

74 ià(
shiá
 > 0) {

75 
v®
 = ((
ov®
 >> (
shiá
 - 1)) + 1) >> 1;

78 
v®
 |ğ(
shiá
 / 4) << 9;

79  
v®
;

80 
	}
}

82 
šlše
 
	$æßt12ToIÁ
(
f12
)

84  (
f12
 & 0x1ff) << ((f12 >> 9) * 4);

85 
	}
}

89 
	~<¡dio.h
>

90 
	$maš
(
¬gc
, *
¬gv
[])

92 ià(
¬gc
 != 3) {

93 
	`årštf
(
¡d”r
, "u§ge: % <mš> <max>\n", 
¬gv
[0]);

97 
mš
 = 
	`©oi
(
¬gv
[1]);

98 
max
 = 
	`©oi
(
¬gv
[2]);

99 ià(
mš
 > 
max
) {

100 
t
 = 
mš
;

101 
max
 = 
mš
;

102 
mš
 = 
t
;

103 } ià(
mš
 =ğ
max
) {

104 
max
++;

107 
mš
 < 
max
) {

108 
out
;

109 
sf
;

111 
sf
 = 
	`štToFlßt12
(
mš
);

112 
out
 = 
	`æßt12ToIÁ
(
sf
);

114 
	`´štf
("%6.6à%d %d\n", (()()(
mš
 - 
out
)) / ()()min, min, out);

115 ià(
mš
 <= 8192) {

116 
mš
++;

117 } ià(
mš
 < 10000) {

118 
mš
 += 10;

119 } ià(
mš
 < 100000) {

120 
mš
 += 1000;

122 
mš
 += 10000;

126 
	}
}

	@alloc/GC.h

19 #iâdeà
_DALVIK_ALLOC_GC


20 
	#_DALVIK_ALLOC_GC


	)

27 
dvmCŞËùG¬bage
(
boŞ
 
cŞËùSoáRefs
);

46 
dvmM¬kObjeùNÚNuÎ
(cÚ¡ 
Objeù
 *
obj
);

54 
	#dvmM¬kObjeù
(
obj
) \

56 
Objeù
 *
DMO_obj_
 = (Objeù *)(
obj
); \

57 ià(
DMO_obj_
 !ğ
NULL
) { \

58 
	`dvmM¬kObjeùNÚNuÎ
(
DMO_obj_
); \

60 } 
çl£
)

	)

70 
	#dvmM¬kIfObjeù
(
obj
) \

72 
Objeù
 *
DMIO_obj_
 = (Objeù *)(
obj
); \

73 ià(
DMIO_obj_
 !ğ
NULL
 && 
	`dvmIsV®idObjeù
(DMIO_obj_)) { \

74 
	`dvmM¬kObjeùNÚNuÎ
(
DMIO_obj_
); \

76 } 
çl£
)

	)

88 
dvmGcSÿnRoÙCÏssLßd”
();

104 
dvmGcSÿnRoÙTh»adGroups
();

111 
dvmGcSÿnIÁ”ÃdSŒšgs
();

118 
dvmGcD‘achD—dIÁ”ÃdSŒšgs
((*
isUnm¬kedObjeù
)(*));

125 
	`dvmGcSÿnPrim™iveCÏs£s
();

132 
	`dvmGcM¬kJniGlob®Refs
();

139 
	`dvmGcM¬kDebugg”Refs
();

144 #ià
WITH_HPROF
 && !
	`defšed
(
_DALVIK_HPROF_HPROF
)

145 
	~"h´of/H´of.h
"

146 
	#HPROF_SET_GC_SCAN_STATE
(
g_
, 
th»ad_
) \

147 
	`dvmH—pS‘H´ofGcSÿnS‹
((
g_
), (
th»ad_
))

	)

148 
	#HPROF_CLEAR_GC_SCAN_STATE
() \

149 
	`dvmH—pS‘H´ofGcSÿnS‹
(0, 0)

	)

151 
	#HPROF_SET_GC_SCAN_STATE
(
g_
, 
th»ad_
èdØ{
	}
} 
çl£
)

	)

152 
	#HPROF_CLEAR_GC_SCAN_STATE
(èdØ{} 
çl£
)

	)

	@alloc/Heap.c

19 
	~"D®vik.h
"

20 
	~"®loc/H—pTabË.h
"

21 
	~"®loc/H—p.h
"

22 
	~"®loc/H—pIÁ”Çl.h
"

23 
	~"®loc/DdmH—p.h
"

24 
	~"®loc/H—pSourû.h
"

25 
	~"®loc/M¬kSw“p.h
"

27 
	~"uts/th»ads.h
"

28 
	#kInv®idPriÜ™y
 10000

	)

30 
	~<cuts/sched_pŞicy.h
>

32 
	~<sys/time.h
>

33 
	~<sys/»sourû.h
>

34 
	~<lim™s.h
>

35 
	~<”ºo.h
>

37 
	#kNÚCŞËùabËRefDeçuÉ
 16

	)

38 
	#kFš®izabËRefDeçuÉ
 128

	)

45 
boŞ
 
	$dvmH—pS¹up
()

47 
GcH—p
 *
gcH—p
;

49 #ià
	`defšed
(
WITH_ALLOC_LIMITS
)

50 
gDvm
.
checkAÎocLim™s
 = 
çl£
;

51 
gDvm
.
®loÿtiÚLim™
 = -1;

54 
gcH—p
 = 
	`dvmH—pSourûS¹up
(
gDvm
.
h—pSizeS¹
, gDvm.
h—pSizeMax
);

55 ià(
gcH—p
 =ğ
NULL
) {

56  
çl£
;

58 
gcH—p
->
h—pWÜk”Cu¼’tObjeù
 = 
NULL
;

59 
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
 = 
NULL
;

60 
gcH—p
->
h—pWÜk”IÁ”pS¹Time
 = 0LL;

61 
gcH—p
->
soáReã»nûCŞËùiÚS‹
 = 
SR_COLLECT_NONE
;

62 
gcH—p
->
soáReã»nûH—pSizeTh»shŞd
 = 
gDvm
.
h—pSizeS¹
;

63 
gcH—p
->
ddmHpifWh’
 = 0;

64 
gcH—p
->
ddmHpsgWh’
 = 0;

65 
gcH—p
->
ddmHpsgWh©
 = 0;

66 
gcH—p
->
ddmNhsgWh’
 = 0;

67 
gcH—p
->
ddmNhsgWh©
 = 0;

68 #ià
WITH_HPROF


69 
gcH—p
->
h´ofDumpOnGc
 = 
çl£
;

70 
gcH—p
->
h´ofCÚ‹xt
 = 
NULL
;

75 
gDvm
.
gcH—p
 = gcHeap;

79 ià(!
	`dvmH—pIn™H—pRefTabË
(&
gcH—p
->
nÚCŞËùabËRefs
,

80 
kNÚCŞËùabËRefDeçuÉ
))

82 
	`LOGE_HEAP
("Can't‡llocate GC_NO_ALLOCable\n");

83 
ç
;

89 
	`dvmIn™Mu‹x
(&
gDvm
.
h—pWÜk”Li¡Lock
);

90 
gcH—p
->
fš®izabËRefs
 = 
NULL
;

91 
gcH—p
->
³ndšgFš®iz©iÚRefs
 = 
NULL
;

92 
gcH—p
->
»ã»nûO³¿tiÚs
 = 
NULL
;

97 
	`dvmIn™ŸlizeH—pWÜk”S‹
();

99  
Œue
;

101 
ç
:

102 
gDvm
.
gcH—p
 = 
NULL
;

103 
	`dvmH—pSourûShutdown
(
gcH—p
);

104  
çl£
;

105 
	}
}

107 
boŞ
 
	$dvmH—pS¹upAá”ZygÙe
()

112 
gDvm
.
gcH—p
->
gcS¹Time
 = 
	`dvmG‘R–©iveTimeU£c
();

114  
	`dvmH—pSourûS¹upAá”ZygÙe
();

115 
	}
}

117 
	$dvmH—pShutdown
()

120 ià(
gDvm
.
gcH—p
 !ğ
NULL
) {

121 
GcH—p
 *
gcH—p
;

123 
gcH—p
 = 
gDvm
.gcHeap;

124 
gDvm
.
gcH—p
 = 
NULL
;

131 
	`dvmH—pF»eH—pRefTabË
(&
gcH—p
->
nÚCŞËùabËRefs
);

133 
	`dvmH—pF»eL¬geTabË
(
gcH—p
->
fš®izabËRefs
);

134 
gcH—p
->
fš®izabËRefs
 = 
NULL
;

136 
	`dvmH—pF»eL¬geTabË
(
gcH—p
->
³ndšgFš®iz©iÚRefs
);

137 
gcH—p
->
³ndšgFš®iz©iÚRefs
 = 
NULL
;

139 
	`dvmH—pF»eL¬geTabË
(
gcH—p
->
»ã»nûO³¿tiÚs
);

140 
gcH—p
->
»ã»nûO³¿tiÚs
 = 
NULL
;

147 
	`dvmH—pSourûShutdown
(
gcH—p
);

149 
	}
}

165 
	$dvmThrowBadAÎocExû±iÚ
(cÚ¡ * 
msg
)

167 
	`dvmThrowExû±iÚ
("Ljava/Ïng/OutOfMemÜyE¼Ü;", 
msg
);

168 
	}
}

174 
boŞ
 
	$dvmLockH—p
()

176 ià(
	`±h»ad_mu‹x_Œylock
(&
gDvm
.
gcH—pLock
) != 0) {

177 
Th»ad
 *
£lf
;

178 
Th»adStus
 
ŞdStus
;

179 
cc
;

181 
£lf
 = 
	`dvmTh»adS–f
();

182 ià(
£lf
 !ğ
NULL
) {

183 
ŞdStus
 = 
	`dvmChªgeStus
(
£lf
, 
THREAD_VMWAIT
);

185 
	`LOGI
("ODD: waiting on heap†ock,‚o self\n");

186 
ŞdStus
 = -1;

189 
cc
 = 
	`±h»ad_mu‹x_lock
(&
gDvm
.
gcH—pLock
);

190 
	`as£¹
(
cc
 == 0);

192 ià(
£lf
 !ğ
NULL
) {

193 
	`dvmChªgeStus
(
£lf
, 
ŞdStus
);

197  
Œue
;

198 
	}
}

200 
	$dvmUÆockH—p
()

202 
	`dvmUÆockMu‹x
(&
gDvm
.
gcH—pLock
);

203 
	}
}

212 
Objeù
 *
	$dvmG‘NextH—pWÜk”Objeù
(
H—pWÜk”O³¿tiÚ
 *
İ
)

214 
Objeù
 *
obj
;

215 
L¬geH—pRefTabË
 *
bË
;

216 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

218 
	`as£¹
(
İ
 !ğ
NULL
);

220 
obj
 = 
NULL
;

222 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Li¡Lock
);

235 
obj
 = 
	`dvmH—pG‘NextObjeùFromL¬geTabË
(&
gcH—p
->
»ã»nûO³¿tiÚs
);

236 ià(
obj
 !ğ
NULL
) {

237 
ušŒ_t
 
wÜkB™s
;

239 
wÜkB™s
 = (
ušŒ_t
)
obj
 & (
WORKER_CLEAR
 | 
WORKER_ENQUEUE
);

240 
	`as£¹
(
wÜkB™s
 != 0);

241 
obj
 = (
Objeù
 *)((
ušŒ_t
)obj & ~(
WORKER_CLEAR
 | 
WORKER_ENQUEUE
));

243 *
İ
 = 
wÜkB™s
;

245 
obj
 = 
	`dvmH—pG‘NextObjeùFromL¬geTabË
(

246 &
gcH—p
->
³ndšgFš®iz©iÚRefs
);

247 ià(
obj
 !ğ
NULL
) {

248 *
İ
 = 
WORKER_FINALIZE
;

252 ià(
obj
 !ğ
NULL
) {

259 
	`dvmAddT¿ckedAÎoc
(
obj
, 
NULL
);

262 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Li¡Lock
);

264  
obj
;

265 
	}
}

270 
	#SOFT_REFERENCE_GROWTH_SLACK
 (128 * 1024)

	)

275 
	$dvmH—pSizeChªged
()

277 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

278 
size_t
 
cu¼’tH—pSize
;

280 
cu¼’tH—pSize
 = 
	`dvmH—pSourûG‘Id—lFoÙ´št
();

285 ià(
cu¼’tH—pSize
 <ğ
gcH—p
->
soáReã»nûH—pSizeTh»shŞd
 -

286 4 * 
SOFT_REFERENCE_GROWTH_SLACK
)

298 
gcH—p
->
soáReã»nûH—pSizeTh»shŞd
 = 
cu¼’tH—pSize
;

299 
gcH—p
->
soáReã»nûCŞËùiÚS‹
 = 
SR_COLLECT_NONE
;

300 } ià(
cu¼’tH—pSize
 >ğ
gcH—p
->
soáReã»nûH—pSizeTh»shŞd
 +

301 
SOFT_REFERENCE_GROWTH_SLACK
)

305 
gcH—p
->
soáReã»nûH—pSizeTh»shŞd
 = 
cu¼’tH—pSize
;

306 
gcH—p
->
soáReã»nûCŞËùiÚS‹
 = 
SR_COLLECT_SOME
;

308 
	}
}

314 
	$gcFÜM®loc
(
boŞ
 
cŞËùSoáReã»nûs
)

316 #ifdeà
WITH_PROFILER


317 ià(
gDvm
.
®locProf
.
’abËd
) {

318 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

319 
gDvm
.
®locProf
.
gcCouÁ
++;

320 ià(
£lf
 !ğ
NULL
) {

321 
£lf
->
®locProf
.
gcCouÁ
++;

327 
	`LOGD_HEAP
("dvmMalloc initiating GC%s\n",

328 
cŞËùSoáReã»nûs
 ? "(collect SoftReferences)" : "");

329 
	`dvmCŞËùG¬bageIÁ”Çl
(
cŞËùSoáReã»nûs
);

330 
	}
}

334 
DvmH—pChunk
 *
	$ŒyM®loc
(
size_t
 
size
)

336 
DvmH—pChunk
 *
hc
;

342 ià(
size
 >ğ
gDvm
.
h—pSizeMax
) {

343 
	`LOGW_HEAP
("dvmMalloc(%zu/0x%08zx): "

344 "someÚe' ®loÿtšg‡ hugbufãr\n", 
size
, size);

345 
hc
 = 
NULL
;

346 
cŞËù_soá_»fs
;

359 
hc
 = 
	`dvmH—pSourûAÎoc
(
size
 + (
DvmH—pChunk
));

360 ià(
hc
 !ğ
NULL
) {

361  
hc
;

368 
	`gcFÜM®loc
(
çl£
);

369 
hc
 = 
	`dvmH—pSourûAÎoc
(
size
 + (
DvmH—pChunk
));

370 ià(
hc
 !ğ
NULL
) {

371  
hc
;

377 
hc
 = 
	`dvmH—pSourûAÎocAndGrow
(
size
 + (
DvmH—pChunk
));

378 
	`dvmH—pSizeChªged
();

379 ià(
hc
 !ğ
NULL
) {

380 
size_t
 
ÃwH—pSize
;

382 
ÃwH—pSize
 = 
	`dvmH—pSourûG‘Id—lFoÙ´št
();

386 
	`LOGI_HEAP
("Grow heap (frag case)o "

388 
	`FRACTIONAL_MB
(
ÃwH—pSize
), 
size
);

389  
hc
;

399 
cŞËù_soá_»fs
:

400 
	`LOGI_HEAP
("Forcing collection of SoftReferences for %zu-byte‡llocation\n",

401 
size
);

402 
	`gcFÜM®loc
(
Œue
);

403 
hc
 = 
	`dvmH—pSourûAÎocAndGrow
(
size
 + (
DvmH—pChunk
));

404 
	`dvmH—pSizeChªged
();

405 ià(
hc
 !ğ
NULL
) {

406  
hc
;

410 
	`LOGE_HEAP
("OuˆoàmemÜy oÀ¨%zd-by‹‡ÎoÿtiÚ.\n", 
size
);

412 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

414  
NULL
;

415 
	}
}

423 
	$throwOOME
()

425 
Th»ad
 *
£lf
;

427 ià((
£lf
 = 
	`dvmTh»adS–f
()è!ğ
NULL
) {

436 ià(
	`dvmIsOnTh»adLi¡
(
£lf
è&& !£lf->
throwšgOOME
) {

441 
£lf
->
throwšgOOME
 = 
Œue
;

446 
	`dvmThrowExû±iÚ
("Ljava/Ïng/OutOfMemÜyE¼Ü;", 
NULL
);

460 
	`dvmS‘Exû±iÚ
(
£lf
, 
gDvm
.
outOfMemÜyObj
);

464 
£lf
->
throwšgOOME
 = 
çl£
;

466 
	}
}

495 * 
	$dvmM®loc
(
size_t
 
size
, 
æags
)

497 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

498 
DvmH—pChunk
 *
hc
;

499 *
±r
;

500 
boŞ
 
Œ›dGc
, 
Œ›dGrowšg
;

504 ià(
size
 >= 100000) {

505 
	`LOGI
("dvmM®loc(%d):\n", 
size
);

506 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

510 #ià
	`defšed
(
WITH_ALLOC_LIMITS
)

523 ià(
gDvm
.
checkAÎocLim™s
) {

524 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

525 ià(
£lf
 !ğ
NULL
) {

526 
couÁ
 = 
£lf
->
®locLim™
;

527 ià(
couÁ
 > 0) {

528 
£lf
->
®locLim™
--;

529 } ià(
couÁ
 == 0) {

531 
	`as£¹
(!
gDvm
.
š™Ÿlizšg
);

532 
£lf
->
®locLim™
 = -1;

533 
	`dvmThrowExû±iÚ
("Ldalvik/system/AllocationLimitError;",

535  
NULL
;

540 ià(
gDvm
.
®loÿtiÚLim™
 >= 0) {

541 
	`as£¹
(!
gDvm
.
š™Ÿlizšg
);

542 
gDvm
.
®loÿtiÚLim™
 = -1;

543 
	`dvmThrowExû±iÚ
("Ldalvik/system/AllocationLimitError;",

545  
NULL
;

549 
	`dvmLockH—p
();

553 
hc
 = 
	`ŒyM®loc
(
size
);

554 ià(
hc
 !ğ
NULL
) {

555 
®loc_sucûeded
:

558 ià((
æags
 & 
ALLOC_FINALIZABLE
) != 0) {

567 ià(!
	`dvmH—pAddRefToL¬geTabË
(&
gcH—p
->
fš®izabËRefs
,

568 (
Objeù
 *)
hc
->
d©a
))

570 
	`LOGE_HEAP
("dvmMalloc():‚o„oom for‡ny more "

572 
	`dvmAbÜt
();

576 #ià
WITH_OBJECT_HEADERS


577 
hc
->
h—d”
 = 
OBJECT_HEADER
;

578 
hc
->
bœthG’”©iÚ
 = 
gG’”©iÚ
;

580 
±r
 = 
hc
->
d©a
;

591 ià((
æags
 & 
ALLOC_NO_GC
) != 0) {

592 ià(!
	`dvmH—pAddToH—pRefTabË
(&
gcH—p
->
nÚCŞËùabËRefs
, 
±r
)) {

593 
	`LOGE_HEAP
("dvmMalloc():‚o„oom for‡ny more "

595 
	`dvmH—pNumH—pRefTabËEÁr›s
(

596 &
gcH—p
->
nÚCŞËùabËRefs
));

597 
	`dvmAbÜt
();

601 #ifdeà
WITH_PROFILER


602 ià(
gDvm
.
®locProf
.
’abËd
) {

603 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

604 
gDvm
.
®locProf
.
®locCouÁ
++;

605 
gDvm
.
®locProf
.
®locSize
 +ğ
size
;

606 ià(
£lf
 !ğ
NULL
) {

607 
£lf
->
®locProf
.
®locCouÁ
++;

608 
£lf
->
®locProf
.
®locSize
 +ğ
size
;

615 
±r
 = 
NULL
;

617 #ifdeà
WITH_PROFILER


618 ià(
gDvm
.
®locProf
.
’abËd
) {

619 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

620 
gDvm
.
®locProf
.
çedAÎocCouÁ
++;

621 
gDvm
.
®locProf
.
çedAÎocSize
 +ğ
size
;

622 ià(
£lf
 !ğ
NULL
) {

623 
£lf
->
®locProf
.
çedAÎocCouÁ
++;

624 
£lf
->
®locProf
.
çedAÎocSize
 +ğ
size
;

630 
	`dvmUÆockH—p
();

632 ià(
±r
 !ğ
NULL
) {

640 ià((
æags
 & (
ALLOC_DONT_TRACK
 | 
ALLOC_NO_GC
)) == 0) {

641 
	`dvmAddT¿ckedAÎoc
(
±r
, 
NULL
);

647 
	`throwOOME
();

650  
±r
;

651 
	}
}

656 
boŞ
 
	$dvmIsV®idObjeù
(cÚ¡ 
Objeù
* 
obj
)

658 cÚ¡ 
DvmH—pChunk
 *
hc
;

662 
hc
 = 
	`±r2chunk
(
obj
);

663 ià(
obj
 !ğ
NULL
 && ((
ušŒ_t
)
hc
 & (8-1)) == 0) {

677  
	`dvmH—pSourûCÚšs
(
hc
);

679  
çl£
;

680 
	}
}

686 
	$dvmCË¬AÎocFÏgs
(
Objeù
 *
obj
, 
mask
)

688 ià((
mask
 & 
ALLOC_NO_GC
) != 0) {

689 
	`dvmLockH—p
();

690 ià(
	`dvmIsV®idObjeù
(
obj
)) {

691 ià(!
	`dvmH—pRemoveFromH—pRefTabË
(&
gDvm
.
gcH—p
->
nÚCŞËùabËRefs
,

692 
obj
))

694 
	`LOGE_HEAP
("dvmMalloc(): failedo„emove ALLOC_NO_GC bit from "

695 "objeù 0x%08x\n", (
ušŒ_t
)
obj
);

696 
	`dvmAbÜt
();

700 
	`dvmUÆockH—p
();

703 ià((
mask
 & 
ALLOC_DONT_TRACK
) != 0) {

704 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
NULL
);

706 
	}
}

708 
size_t
 
	$dvmObjeùSizeInH—p
(cÚ¡ 
Objeù
 *
obj
)

710  
	`dvmH—pSourûChunkSize
(
	`±r2chunk
(
obj
)è- (
DvmH—pChunk
);

711 
	}
}

727 
	$dvmCŞËùG¬bageIÁ”Çl
(
boŞ
 
cŞËùSoáReã»nûs
)

729 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

730 
Objeù
 *
soáReã»nûs
;

731 
Objeù
 *
w—kReã»nûs
;

732 
Objeù
 *
phªtomReã»nûs
;

734 
u8
 
now
;

735 
s8
 
timeSšûLa¡Gc
;

736 
s8
 
gcEÏp£dTime
;

737 
numF»ed
;

738 
size_t
 
sizeF»ed
;

740 #ià
DVM_TRACK_HEAP_MARKING


745 
size_t
 
¡rÚgM¬kCouÁ
 = 0;

746 
size_t
 
¡rÚgM¬kSize
 = 0;

747 
size_t
 
fš®izeM¬kCouÁ
 = 0;

748 
size_t
 
fš®izeM¬kSize
 = 0;

749 
size_t
 
phªtomM¬kCouÁ
 = 0;

750 
size_t
 
phªtomM¬kSize
 = 0;

756 ià(
gcH—p
->
gcRuÂšg
) {

757 
	`LOGW_HEAP
("Attempted„ecursive GC\n");

760 
gcH—p
->
gcRuÂšg
 = 
Œue
;

761 
now
 = 
	`dvmG‘R–©iveTimeU£c
();

762 ià(
gcH—p
->
gcS¹Time
 != 0) {

763 
timeSšûLa¡Gc
 = (
now
 - 
gcH—p
->
gcS¹Time
) / 1000;

765 
timeSšûLa¡Gc
 = 0;

767 
gcH—p
->
gcS¹Time
 = 
now
;

769 
	`LOGV_HEAP
("GC starting -- suspendinghreads\n");

771 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_GC
);

777 
”ºo
 = 0;

778 
ŞdTh»adPriÜ™y
 = 
kInv®idPriÜ™y
;

779 
´iÜ™yResuÉ
 = 
	`g‘´iÜ™y
(
PRIO_PROCESS
, 0);

780 ià(
”ºo
 != 0) {

781 
	`LOGI_HEAP
("g‘´iÜ™y(£lfèçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

782 } ià(
´iÜ™yResuÉ
 > 
ANDROID_PRIORITY_NORMAL
) {

787 ià(
´iÜ™yResuÉ
 >ğ
ANDROID_PRIORITY_BACKGROUND
) {

788 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_FOREGROUND
);

791 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 0, 
ANDROID_PRIORITY_NORMAL
) != 0) {

792 
	`LOGI_HEAP
("Unableoƒlevate…riority from %do %d\n",

793 
´iÜ™yResuÉ
, 
ANDROID_PRIORITY_NORMAL
);

796 
	`LOGD_HEAP
("Elevating…riority from %do %d\n",

797 
´iÜ™yResuÉ
, 
ANDROID_PRIORITY_NORMAL
);

798 
ŞdTh»adPriÜ™y
 = 
´iÜ™yResuÉ
;

806 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

812 
	`dvmAs£¹H—pWÜk”Th»adRuÂšg
();

820 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Li¡Lock
);

822 #ifdeà
WITH_PROFILER


823 
	`dvmM‘hodT¿ûGCBegš
();

826 #ià
WITH_HPROF


840 
	#DUMP_HEAP_ON_DDMS_UPDATE
 0

	)

841 #ià
DUMP_HEAP_ON_DDMS_UPDATE


842 
gcH—p
->
h´ofDumpOnGc
 |ğ(gcH—p->
ddmHpifWh’
 != 0);

845 ià(
gcH—p
->
h´ofDumpOnGc
) {

846 
ÇmeBuf
[128];

848 
gcH—p
->
h´ofResuÉ
 = -1;

850 ià(
gcH—p
->
h´ofFeName
 =ğ
NULL
) {

852 
	`¥rštf
(
ÇmeBuf
, "/data/misc/heap-dump-tm%d-pid%d.hprof",

853 (è
	`time
(
NULL
), (è
	`g‘pid
());

854 
gcH—p
->
h´ofFeName
 = 
ÇmeBuf
;

856 
gcH—p
->
h´ofCÚ‹xt
 = 
	`h´ofS¹up
(gcH—p->
h´ofFeName
);

857 ià(
gcH—p
->
h´ofCÚ‹xt
 !ğ
NULL
) {

858 
	`h´ofS¹H—pDump
(
gcH—p
->
h´ofCÚ‹xt
);

860 
gcH—p
->
h´ofDumpOnGc
 = 
çl£
;

861 
gcH—p
->
h´ofFeName
 = 
NULL
;

865 ià(
timeSšûLa¡Gc
 < 10000) {

866 
	`LOGD_HEAP
("GC! (%dms since†ast GC)\n",

867 ()
timeSšûLa¡Gc
);

869 
	`LOGD_HEAP
("GC! (%d sec since†ast GC)\n",

870 ()(
timeSšûLa¡Gc
 / 1000));

872 #ià
DVM_TRACK_HEAP_MARKING


873 
gcH—p
->
m¬kCouÁ
 = 0;

874 
gcH—p
->
m¬kSize
 = 0;

879 ià(!
	`dvmH—pBegšM¬kS‹p
()) {

880 
	`LOGE_HEAP
("dvmHeapBeginMarkStep failed;‡borting\n");

881 
	`dvmAbÜt
();

886 
	`LOGD_HEAP
("Marking...");

887 
	`dvmH—pM¬kRoÙS‘
();

892 
gcH—p
->
soáReã»nûs
 = 
NULL
;

893 
gcH—p
->
w—kReã»nûs
 = 
NULL
;

894 
gcH—p
->
phªtomReã»nûs
 = 
NULL
;

899 
gcH—p
->
m¬kAÎReã»Ás
 = 
çl£
;

904 ià(
cŞËùSoáReã»nûs
) {

905 
gcH—p
->
soáReã»nûCŞËùiÚS‹
 = 
SR_COLLECT_ALL
;

912 
	`LOGD_HEAP
("Recursing...");

913 
	`dvmH—pSÿnM¬kedObjeùs
();

914 #ià
DVM_TRACK_HEAP_MARKING


915 
¡rÚgM¬kCouÁ
 = 
gcH—p
->
m¬kCouÁ
;

916 
¡rÚgM¬kSize
 = 
gcH—p
->
m¬kSize
;

917 
gcH—p
->
m¬kCouÁ
 = 0;

918 
gcH—p
->
m¬kSize
 = 0;

924 
soáReã»nûs
 = 
gcH—p
->softReferences;

925 
w—kReã»nûs
 = 
gcH—p
->weakReferences;

926 
phªtomReã»nûs
 = 
gcH—p
->phantomReferences;

930 ià(
gcH—p
->
soáReã»nûCŞËùiÚS‹
 !ğ
SR_COLLECT_NONE
) {

931 
	`LOGD_HEAP
("Handling soft„eferences...");

932 
	`dvmH—pHªdËReã»nûs
(
soáReã»nûs
, 
REF_SOFT
);

939 
gcH—p
->
soáReã»nûCŞËùiÚS‹
 = 
SR_COLLECT_NONE
;

941 
	`LOGD_HEAP
("Handling weak„eferences...");

942 
	`dvmH—pHªdËReã»nûs
(
w—kReã»nûs
, 
REF_WEAK
);

948 
	`LOGD_HEAP
("Finding finalizations...");

949 
	`dvmH—pScheduËFš®iz©iÚs
();

950 #ià
DVM_TRACK_HEAP_MARKING


951 
fš®izeM¬kCouÁ
 = 
gcH—p
->
m¬kCouÁ
;

952 
fš®izeM¬kSize
 = 
gcH—p
->
m¬kSize
;

953 
gcH—p
->
m¬kCouÁ
 = 0;

954 
gcH—p
->
m¬kSize
 = 0;

961 
	`LOGD_HEAP
("Handling…hantom„eferences...");

962 
	`dvmH—pHªdËReã»nûs
(
phªtomReã»nûs
, 
REF_PHANTOM
);

963 #ià
DVM_TRACK_HEAP_MARKING


964 
phªtomM¬kCouÁ
 = 
gcH—p
->
m¬kCouÁ
;

965 
phªtomM¬kSize
 = 
gcH—p
->
m¬kSize
;

966 
gcH—p
->
m¬kCouÁ
 = 0;

967 
gcH—p
->
m¬kSize
 = 0;

972 #ià
DVM_TRACK_HEAP_MARKING


973 
	`LOGI_HEAP
("Marked objects: %dB strong, %dB final, %dB…hantom\n",

974 
¡rÚgM¬kSize
, 
fš®izeM¬kSize
, 
phªtomM¬kSize
);

977 #ifdeà
WITH_DEADLOCK_PREDICTION


978 
	`dvmDumpMÚ™ÜInfo
("before sweep");

980 
	`LOGD_HEAP
("Sweeping...");

981 
	`dvmH—pSw“pUnm¬kedObjeùs
(&
numF»ed
, &
sizeF»ed
);

982 #ifdeà
WITH_DEADLOCK_PREDICTION


983 
	`dvmDumpMÚ™ÜInfo
("after sweep");

986 
	`LOGD_HEAP
("Cleaning up...");

987 
	`dvmH—pFšishM¬kS‹p
();

989 
	`LOGD_HEAP
("Done.");

997 
	`dvmH—pSourûGrowFÜUtiz©iÚ
();

998 
	`dvmH—pSizeChªged
();

1000 #ià
WITH_HPROF


1001 ià(
gcH—p
->
h´ofCÚ‹xt
 !ğ
NULL
) {

1002 
	`h´ofFšishH—pDump
(
gcH—p
->
h´ofCÚ‹xt
);

1004 ià(
	`h´ofShutdown
(
gcH—p
->
h´ofCÚ‹xt
))

1005 
gcH—p
->
h´ofResuÉ
 = 0;

1006 
gcH—p
->
h´ofCÚ‹xt
 = 
NULL
;

1019 
	`dvmScheduËH—pSourûTrim
(5);

1021 #ifdeà
WITH_PROFILER


1022 
	`dvmM‘hodT¿ûGCEnd
();

1024 
	`LOGV_HEAP
("GC finished --„esuminghreads\n");

1026 
gcH—p
->
gcRuÂšg
 = 
çl£
;

1028 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Li¡Lock
);

1029 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

1031 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_GC
);

1032 ià(
ŞdTh»adPriÜ™y
 !ğ
kInv®idPriÜ™y
) {

1033 ià(
	`£riÜ™y
(
PRIO_PROCESS
, 0, 
ŞdTh»adPriÜ™y
) != 0) {

1034 
	`LOGW_HEAP
("Unableo„eset…riorityo %d: %s\n",

1035 
ŞdTh»adPriÜ™y
, 
	`¡»¼Ü
(
”ºo
));

1037 
	`LOGD_HEAP
("Re£ˆ´iÜ™yØ%d\n", 
ŞdTh»adPriÜ™y
);

1040 ià(
ŞdTh»adPriÜ™y
 >ğ
ANDROID_PRIORITY_BACKGROUND
) {

1041 
	`£t_sched_pŞicy
(
	`dvmG‘SysTh»adId
(), 
SP_BACKGROUND
);

1044 
gcEÏp£dTime
 = (
	`dvmG‘R–©iveTimeU£c
(è- 
gcH—p
->
gcS¹Time
) / 1000;

1045 ià(
gcEÏp£dTime
 < 10000) {

1046 
	`LOGD
("GC freed %d objects / %zd bytes in %dms\n",

1047 
numF»ed
, 
sizeF»ed
, ()
gcEÏp£dTime
);

1049 
	`LOGD
("GC freed %d objects / %zd bytes in %d sec\n",

1050 
numF»ed
, 
sizeF»ed
, ()(
gcEÏp£dTime
 / 1000));

1052 
	`dvmLogGcSts
(
numF»ed
, 
sizeF»ed
, 
gcEÏp£dTime
);

1054 ià(
gcH—p
->
ddmHpifWh’
 != 0) {

1055 
	`LOGD_HEAP
("Sending VM heap infoo DDM\n");

1056 
	`dvmDdmS’dH—pInfo
(
gcH—p
->
ddmHpifWh’
, 
çl£
);

1058 ià(
gcH—p
->
ddmHpsgWh’
 != 0) {

1059 
	`LOGD_HEAP
("Dumping VM heapo DDM\n");

1060 
	`dvmDdmS’dH—pSegm’ts
(
çl£
, false);

1062 ià(
gcH—p
->
ddmNhsgWh’
 != 0) {

1063 
	`LOGD_HEAP
("Dumping‚ative heapo DDM\n");

1064 
	`dvmDdmS’dH—pSegm’ts
(
çl£
, 
Œue
);

1066 
	}
}

1068 #ià
WITH_HPROF


1076 
	$h´ofDumpH—p
(cÚ¡ * 
feName
)

1078 
»suÉ
;

1080 
	`dvmLockMu‹x
(&
gDvm
.
gcH—pLock
);

1082 
gDvm
.
gcH—p
->
h´ofDumpOnGc
 = 
Œue
;

1083 
gDvm
.
gcH—p
->
h´ofFeName
 = 
feName
;

1084 
	`dvmCŞËùG¬bageIÁ”Çl
(
çl£
);

1085 
»suÉ
 = 
gDvm
.
gcH—p
->
h´ofResuÉ
;

1087 
	`dvmUÆockMu‹x
(&
gDvm
.
gcH—pLock
);

1089  
»suÉ
;

1090 
	}
}

1092 
	$dvmH—pS‘H´ofGcSÿnS‹
(
h´of_h—p_g_t
 
¡©e
, 
u4
 
th»adS”ŸlNumb”
)

1094 ià(
gDvm
.
gcH—p
->
h´ofCÚ‹xt
 !ğ
NULL
) {

1095 
	`h´ofS‘GcSÿnS‹
(
gDvm
.
gcH—p
->
h´ofCÚ‹xt
, 
¡©e
,

1096 
th»adS”ŸlNumb”
);

1098 
	}
}

	@alloc/Heap.h

19 #iâdeà
_DALVIK_ALLOC_HEAP


20 
	#_DALVIK_ALLOC_HEAP


	)

27 
boŞ
 
dvmH—pS¹up
();

34 
boŞ
 
dvmH—pS¹upAá”ZygÙe
();

42 
dvmH—pShutdown
();

52 
size_t
 
dvmObjeùSizeInH—p
(cÚ¡ 
Objeù
 *
obj
);

58 
dvmCŞËùG¬bageIÁ”Çl
(
boŞ
 
cŞËùSoáReã»nûs
);

	@alloc/HeapBitmap.c

17 
	~"D®vik.h
"

18 
	~"H—pB™m­.h
"

19 
	~"şz.h
"

20 
	~<lim™s.h
>

21 
	~<sys/mmª.h
>

22 
	~<cuts/ashmem.h
>

24 
	#HB_ASHMEM_NAME
 "d®vik-h—p-b™m­"

	)

26 #iâdeà
PAGE_SIZE


27 
	#PAGE_SIZE
 4096

	)

29 
	#ALIGN_UP_TO_PAGE_SIZE
(
p
) \

30 (((
size_t
)(
p
è+ (
PAGE_SIZE
 - 1)è& ~(PAGE_SIZE - 1))

	)

32 
	#LIKELY
(
exp
è(
	`__butš_ex³ù
(Óxpè!ğ0, 
Œue
))

	)

33 
	#UNLIKELY
(
exp
è(
	`__butš_ex³ù
(Óxpè!ğ0, 
çl£
))

	)

40 
boŞ


41 
	$dvmH—pB™m­In™
(
H—pB™m­
 *
hb
, cÚ¡ *
ba£
, 
size_t
 
maxSize
,

42 cÚ¡ *
Çme
)

44 *
b™s
;

45 
size_t
 
b™sL’
;

46 
size_t
 
®locL’
;

47 
fd
;

48 
ÇmeBuf
[
ASHMEM_NAME_LEN
] = 
HB_ASHMEM_NAME
;

50 
	`as£¹
(
hb
 !ğ
NULL
);

52 
b™sL’
 = 
	`HB_OFFSET_TO_INDEX
(
maxSize
è* (*
hb
->
b™s
);

53 
®locL’
 = 
	`ALIGN_UP_TO_PAGE_SIZE
(
b™sL’
);

55 ià(
Çme
 !ğ
NULL
) {

56 
	`¢´štf
(
ÇmeBuf
, ÒameBuf), 
HB_ASHMEM_NAME
 "/%s", 
Çme
);

58 
fd
 = 
	`ashmem_ü—‹_»giÚ
(
ÇmeBuf
, 
®locL’
);

59 ià(
fd
 < 0) {

60 
	`LOGE
("Could‚ot create %zu-byte‡shmem„egion \"%s\"o cover "

62 
®locL’
, 
ÇmeBuf
, 
maxSize
, 
fd
);

63  
çl£
;

66 
b™s
 = 
	`mm­
(
NULL
, 
b™sL’
, 
PROT_READ
 | 
PROT_WRITE
, 
MAP_PRIVATE
, 
fd
, 0);

67 
	`şo£
(
fd
);

68 ià(
b™s
 =ğ
MAP_FAILED
) {

69 
	`LOGE
("Could‚ot mmap %d-byte‡shmem„egion \"%s\"\n",

70 
b™sL’
, 
ÇmeBuf
);

71  
çl£
;

74 
	`mem£t
(
hb
, 0, (*hb));

75 
hb
->
b™s
 = bits;

76 
hb
->
b™sL’
 = bitsLen;

77 
hb
->
ba£
 = (
ušŒ_t
)base;

78 
hb
->
max
 = hb->
ba£
 - 1;

80  
Œue
;

81 
	}
}

86 
boŞ


87 
	$dvmH—pB™m­In™FromTem¶©e
(
H—pB™m­
 *
hb
, cÚ¡ H—pB™m­ *
‹m¶©eB™m­
,

88 cÚ¡ *
Çme
)

90  
	`dvmH—pB™m­In™
(
hb
,

91 (*)
‹m¶©eB™m­
->
ba£
, 
	`HB_MAX_OFFSET
Ñem¶©eB™m­), 
Çme
);

92 
	}
}

98 
boŞ


99 
	$dvmH—pB™m­In™Li¡FromTem¶©es
(
H—pB™m­
 
out
[], H—pB™m­ 
‹m¶©es
[],

100 
size_t
 
numB™m­s
, cÚ¡ *
Çme
)

102 
size_t
 
i
;

103 
fuÎName
[
PATH_MAX
];

105 
fuÎName
[(fullName)-1] = '\0';

106 
i
 = 0; i < 
numB™m­s
; i++) {

107 
boŞ
 
ok
;

112 
	`¢´štf
(
fuÎName
, (fuÎName)-1, "%s/%zd", 
Çme
, 
i
);

114 
ok
 = 
	`dvmH—pB™m­In™FromTem¶©e
(&
out
[
i
], &
‹m¶©es
[i], 
fuÎName
);

115 ià(!
ok
) {

116 
	`dvmH—pB™m­D–‘eLi¡
(
out
, 
i
);

117  
çl£
;

120  
Œue
;

121 
	}
}

127 
	$dvmH—pB™m­D–‘e
(
H—pB™m­
 *
hb
)

129 
	`as£¹
(
hb
 !ğ
NULL
);

131 ià(
hb
->
b™s
 !ğ
NULL
) {

133 
size_t
 
®locL’
 = 
	`ALIGN_UP_TO_PAGE_SIZE
(
hb
->
b™sL’
);

134 
	`munm­
((*)
hb
->
b™s
, 
®locL’
);

136 
	`mem£t
(
hb
, 0, (*hb));

137 
	}
}

143 
	$dvmH—pB™m­D–‘eLi¡
(
H—pB™m­
 
hbs
[], 
size_t
 
numB™m­s
)

145 
size_t
 
i
;

147 
i
 = 0; i < 
numB™m­s
; i++) {

148 
	`dvmH—pB™m­D–‘e
(&
hbs
[
i
]);

150 
	}
}

157 
	$dvmH—pB™m­Z”o
(
H—pB™m­
 *
hb
)

159 
	`as£¹
(
hb
 !ğ
NULL
);

161 ià(
hb
->
b™s
 !ğ
NULL
) {

165 
	`madvi£
(
hb
->
b™s
, hb->
b™sL’
, 
MADV_DONTNEED
);

166 
hb
->
max
 = hb->
ba£
 - 1;

168 
	}
}

181 
boŞ


182 
dvmH—pB™m­XÜW®k
(cÚ¡ 
H—pB™m­
 *
hb1
, cÚ¡ H—pB™m­ *
hb2
,

183 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

184 cÚ¡ *
fšg”
, *
¬g
),

185 *
ÿÎbackArg
)

187 cÚ¡ 
size_t
 
kPoš‹rBufSize
 = 128;

188 *
poš‹rBuf
[
kPoš‹rBufSize
];

189 **
pb
 = 
poš‹rBuf
;

190 
size_t
 
šdex
;

191 
size_t
 
i
;

193 
	#FLUSH_POINTERBUF
(
fšg”_
) \

195 ià(!
	`ÿÎback
(
pb
 - 
poš‹rBuf
, (**)pointerBuf, \

196 (*)(
fšg”_
), 
ÿÎbackArg
)) \

198 
	`LOGW
("dvmHeapBitmapXorWalk: callback failed\n"); \

199  
çl£
; \

201 
pb
 = 
poš‹rBuf
; \

202 } 
çl£
)

	)

204 
	#DECODE_BITS
(
hb_
, 
b™s_
, 
upd©e_šdex_
) \

206 ià(
	`UNLIKELY
(
b™s_
 != 0)) { \

207 cÚ¡ 
kHighB™
 = \

208 ()1 << (
HB_BITS_PER_WORD
 - 1); \

209 cÚ¡ 
ušŒ_t
 
±rBa£
 = 
	`HB_INDEX_TO_OFFSET
(
i
è+ 
hb_
->
ba£
; \

212 
b™s_
 != 0) { \

213 cÚ¡ 
rshiá
 = 
	`CLZ
(
b™s_
); \

214 
b™s_
 &ğ~(
kHighB™
 >> 
rshiá
); \

215 *
pb
++ = (*)(
±rBa£
 + 
rshiá
 * 
HB_OBJECT_ALIGNMENT
); \

219 ià(
kPoš‹rBufSize
 - (
pb
 - 
poš‹rBuf
è< 
HB_BITS_PER_WORD
) { \

220 
	`FLUSH_POINTERBUF
(
±rBa£
 + \

221 
HB_BITS_PER_WORD
 * 
HB_OBJECT_ALIGNMENT
); \

222 ià(
upd©e_šdex_
) { \

224 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
hb_
->
max
 - hb_->
ba£
); \

228 } 
çl£
)

	)

230 
	`as£¹
(
hb1
 !ğ
NULL
);

231 
	`as£¹
(
hb1
->
b™s
 !ğ
NULL
);

232 
	`as£¹
(
hb2
 !ğ
NULL
);

233 
	`as£¹
(
hb2
->
b™s
 !ğ
NULL
);

234 
	`as£¹
(
ÿÎback
 !ğ
NULL
);

236 ià(
hb1
->
ba£
 !ğ
hb2
->base) {

237 
	`LOGW
("dvmHeapBitmapXorWalk: bitmaps cover different heaps "

239 (
ušŒ_t
)
hb1
->
ba£
, (ušŒ_t)
hb2
->base);

240  
çl£
;

242 ià(
hb1
->
b™sL’
 !ğ
hb2
->bitsLen) {

243 
	`LOGW
("dvmHeapBitmapXorWalk: size of bitmaps differ (%zd != %zd)\n",

244 
hb1
->
b™sL’
, 
hb2
->bitsLen);

245  
çl£
;

247 ià(
hb1
->
max
 < hb1->
ba£
 && 
hb2
->max < hb2->base) {

250  
Œue
;

255 ià(
hb1
->
max
 >ğhb1->
ba£
 && 
hb2
->max >= hb2->base) {

256 *
p1
, *
p2
;

257 
ušŒ_t
 
off£t
;

259 
off£t
 = ((
hb1
->
max
 < 
hb2
->maxè? hb1->max : hb2->maxè- hb1->
ba£
;

261 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
off£t
);

263 
p1
 = 
hb1
->
b™s
;

264 
p2
 = 
hb2
->
b™s
;

265 
i
 = 0; i <ğ
šdex
; i++) {

267 
diff
 = *
p1
++ ^ *
p2
++;

268 
	`DECODE_BITS
(
hb1
, 
diff
, 
çl£
);

273 
šdex
++;

277 
šdex
 = 0;

283 cÚ¡ 
H—pB™m­
 *
lÚgHb
;

284 *
p
;

286 
lÚgHb
 = (
hb1
->
max
 > 
hb2
->max) ? hb1 : hb2;

287 
i
 = 
šdex
;

288 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
lÚgHb
->
max
 -†ÚgHb->
ba£
);

289 
p
 = 
lÚgHb
->
b™s
 + 
i
;

290  ; 
i
 <ğ
šdex
; i++) {

292 
b™s
 = *
p
++;

293 
	`DECODE_BITS
(
lÚgHb
, 
b™s
, 
Œue
);

296 ià(
pb
 > 
poš‹rBuf
) {

301 
	`FLUSH_POINTERBUF
(
lÚgHb
->
ba£
 + 
	`HB_MAX_OFFSET
(longHb));

304  
Œue
;

306 #undeà
FLUSH_POINTERBUF


307 #undeà
DECODE_BITS


308 
	}
}

316 
	$ü—‹SÜ‹dB™m­IndexLi¡
(cÚ¡ 
H—pB™m­
 
hbs
[], 
size_t
 
numB™m­s
,

317 
size_t
 
outIndexLi¡
[])

319 
i
, 
j
;

322 
i
 = 0; i < (è
numB™m­s
; i++) {

323 
outIndexLi¡
[
i
] = i;

324 
j
 = 0; j < 
i
; j++) {

325 ià(
hbs
[
j
].
ba£
 > hbs[
i
].base) {

326 
tmp
 = 
outIndexLi¡
[
i
];

327 
outIndexLi¡
[
i
] = outIndexLi¡[
j
];

328 
outIndexLi¡
[
j
] = 
tmp
;

332 
	}
}

339 
boŞ


340 
dvmH—pB™m­XÜW®kLi¡s
(cÚ¡ 
H—pB™m­
 
hbs1
[], cÚ¡ H—pB™m­ 
hbs2
[],

341 
size_t
 
numB™m­s
,

342 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

343 cÚ¡ *
fšg”
, *
¬g
),

344 *
ÿÎbackArg
)

346 
size_t
 
šdexLi¡
[
numB™m­s
];

347 
size_t
 
i
;

352 
	`ü—‹SÜ‹dB™m­IndexLi¡
(
hbs1
, 
numB™m­s
, 
šdexLi¡
);

356 
i
 = 0; i < 
numB™m­s
; i++) {

357 
boŞ
 
ok
;

359 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hbs1
[
šdexLi¡
[
i
]], &
hbs2
[indexList[i]],

360 
ÿÎback
, 
ÿÎbackArg
);

361 ià(!
ok
) {

362  
çl£
;

366  
Œue
;

367 
	}
}

373 
boŞ


374 
dvmH—pB™m­W®k
(cÚ¡ 
H—pB™m­
 *
hb
,

375 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

376 cÚ¡ *
fšg”
, *
¬g
),

377 *
ÿÎbackArg
)

382 
H—pB™m­
 
em±yHb
 = *
hb
;

383 
em±yHb
.
max
 =ƒm±yHb.
ba£
 - 1;

384 
em±yHb
.
b™s
 = (*)1;

386  
	`dvmH—pB™m­XÜW®k
(
hb
, &
em±yHb
, 
ÿÎback
, 
ÿÎbackArg
);

387 
	}
}

395 
boŞ
 
dvmH—pB™m­W®kLi¡
(cÚ¡ 
H—pB™m­
 
hbs
[], 
size_t
 
numB™m­s
,

396 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

397 cÚ¡ *
fšg”
, *
¬g
),

398 *
ÿÎbackArg
)

400 
size_t
 
šdexLi¡
[
numB™m­s
];

401 
size_t
 
i
;

405 
	`ü—‹SÜ‹dB™m­IndexLi¡
(
hbs
, 
numB™m­s
, 
šdexLi¡
);

409 
i
 = 0; i < 
numB™m­s
; i++) {

410 
boŞ
 
ok
;

412 
ok
 = 
	`dvmH—pB™m­W®k
(&
hbs
[
šdexLi¡
[
i
]], 
ÿÎback
, 
ÿÎbackArg
);

413 ià(!
ok
) {

414  
çl£
;

418  
Œue
;

419 
	}
}

	@alloc/HeapBitmap.h

16 #iâdeà
_DALVIK_HEAP_BITMAP


17 
	#_DALVIK_HEAP_BITMAP


	)

19 
	~<¡dšt.h
>

20 
	~<as£¹.h
>

22 
	#HB_OBJECT_ALIGNMENT
 8

	)

23 
	#HB_BITS_PER_WORD
 ( (è* 8)

	)

29 
	#HB_OFFSET_TO_INDEX
(
off£t_
) \

30 ((
ušŒ_t
)(
off£t_
è/ 
HB_OBJECT_ALIGNMENT
 / 
HB_BITS_PER_WORD
)

	)

31 
	#HB_INDEX_TO_OFFSET
(
šdex_
) \

32 ((
ušŒ_t
)(
šdex_
è* 
HB_OBJECT_ALIGNMENT
 * 
HB_BITS_PER_WORD
)

	)

37 
	#HB_OFFSET_TO_MASK
(
off£t_
) \

39 (31-(((
ušŒ_t
)(
off£t_
è/ 
HB_OBJECT_ALIGNMENT
è% 
HB_BITS_PER_WORD
)))

	)

43 
	#HB_MAX_OFFSET
(
hb_
) \

44 
	`HB_INDEX_TO_OFFSET
((
hb_
)->
b™sL’
 / (*(hb_)->
b™s
))

	)

46 
	#HB_INLINE_PROTO
(
p
) \

47 
šlše
 
p
 
	`__©Œibu‹__
((
®ways_šlše
)); \

48 
šlše
 
p


	)

55 *
	mb™s
;

59 
size_t
 
	mb™sL’
;

64 
ušŒ_t
 
	mba£
;

70 
ušŒ_t
 
	mmax
;

71 } 
	tH—pB™m­
;

79 
boŞ
 
dvmH—pB™m­In™
(
H—pB™m­
 *
hb
, cÚ¡ *
ba£
, 
size_t
 
maxSize
,

80 cÚ¡ *
Çme
);

85 
boŞ
 
dvmH—pB™m­In™FromTem¶©e
(
H—pB™m­
 *
hb
,

86 cÚ¡ 
H—pB™m­
 *
‹m¶©eB™m­
, cÚ¡ *
Çme
);

92 
boŞ
 
dvmH—pB™m­In™Li¡FromTem¶©es
(
H—pB™m­
 
out
[],

93 
H—pB™m­
 
‹m¶©es
[], 
size_t
 
numB™m­s
, cÚ¡ *
Çme
);

98 
dvmH—pB™m­D–‘e
(
H—pB™m­
 *
hb
);

103 
dvmH—pB™m­D–‘eLi¡
(
H—pB™m­
 
hbs
[], 
size_t
 
numB™m­s
);

109 
dvmH—pB™m­Z”o
(
H—pB™m­
 *
hb
);

122 
boŞ
 
dvmH—pB™m­XÜW®k
(cÚ¡ 
H—pB™m­
 *
hb1
, cÚ¡ H—pB™m­ *
hb2
,

123 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

124 cÚ¡ *
fšg”
, *
¬g
),

125 *
ÿÎbackArg
);

132 
boŞ
 
	`dvmH—pB™m­XÜW®kLi¡s
(cÚ¡ 
H—pB™m­
 
hbs1
[], cÚ¡ H—pB™m­ 
hbs2
[],

133 
size_t
 
numB™m­s
,

134 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

135 cÚ¡ *
fšg”
, *
¬g
),

136 *
ÿÎbackArg
);

142 
boŞ
 
	`dvmH—pB™m­W®k
(cÚ¡ 
H—pB™m­
 *
hb
,

143 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

144 cÚ¡ *
fšg”
, *
¬g
),

145 *
ÿÎbackArg
);

153 
boŞ
 
	`dvmH—pB™m­W®kLi¡
(cÚ¡ 
H—pB™m­
 
hbs
[], 
size_t
 
numB™m­s
,

154 
	$boŞ
 (*
ÿÎback
)(
size_t
 
numPŒs
, **
±rs
,

155 cÚ¡ *
fšg”
, *
¬g
),

156 *
ÿÎbackArg
);

161 
	`HB_INLINE_PROTO
(

162 
boŞ


163 
	$dvmH—pB™m­MayCÚšObjeù
(cÚ¡ 
H—pB™m­
 *
hb
,

164 cÚ¡ *
obj
)

167 cÚ¡ 
ušŒ_t
 
p
 = (cÚ¡ ušŒ_t)
obj
;

169 
	`as£¹
((
p
 & (
HB_OBJECT_ALIGNMENT
 - 1)) == 0);

171  
p
 >ğ
hb
->
ba£
 &&… <ğhb->
max
;

172 
	}
}

179 
HB_INLINE_PROTO
(

180 
boŞ


181 
	$dvmH—pB™m­Cov”sAdd»ss
(cÚ¡ 
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

184 
	`as£¹
(
hb
 !ğ
NULL
);

186 ià(
obj
 !ğ
NULL
) {

187 cÚ¡ 
ušŒ_t
 
off£t
 = (ušŒ_t)
obj
 - 
hb
->
ba£
;

188 cÚ¡ 
size_t
 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
off£t
);

189  
šdex
 < 
hb
->
b™sL’
 / (*hb->
b™s
);

191  
çl£
;

192 
	}
}

197 
HB_INLINE_PROTO
(

199 
	$_h—pB™m­ModifyObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
,

200 
boŞ
 
£tB™
, boŞ 
»tuºOld
)

203 cÚ¡ 
ušŒ_t
 
off£t
 = (ušŒ_t)
obj
 - 
hb
->
ba£
;

204 cÚ¡ 
size_t
 
šdex
 = 
	`HB_OFFSET_TO_INDEX
(
off£t
);

205 cÚ¡ 
mask
 = 
	`HB_OFFSET_TO_MASK
(
off£t
);

207 #iâdeà
NDEBUG


208 
	`as£¹
(
hb
->
b™s
 !ğ
NULL
);

209 
	`as£¹
((
ušŒ_t
)
obj
 >ğ
hb
->
ba£
);

210 
	`as£¹
(
šdex
 < 
hb
->
b™sL’
 / (*hb->
b™s
));

213 ià(
£tB™
) {

214 ià((
ušŒ_t
)
obj
 > 
hb
->
max
) {

215 
hb
->
max
 = (
ušŒ_t
)
obj
;

217 ià(
»tuºOld
) {

218 *
p
 = 
hb
->
b™s
 + 
šdex
;

219 cÚ¡ 
wÜd
 = *
p
;

220 *
p
 |ğ
mask
;

221  
wÜd
 & 
mask
;

223 
hb
->
b™s
[
šdex
] |ğ
mask
;

226 
hb
->
b™s
[
šdex
] &ğ~
mask
;

228  
çl£
;

229 
	}
}

239 
HB_INLINE_PROTO
(

241 
	$dvmH—pB™m­S‘AndR‘uºObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

244  
	`_h—pB™m­ModifyObjeùB™
(
hb
, 
obj
, 
Œue
,rue);

245 
	}
}

252 
HB_INLINE_PROTO
(

254 
	$dvmH—pB™m­S‘AndR‘uºObjeùB™InLi¡
(
H—pB™m­
 
hbs
[],

255 
size_t
 
numB™m­s
, cÚ¡ *
obj
)

258 
size_t
 
i
;

260 
i
 = 0; i < 
numB™m­s
; i++) {

261 ià(
	`dvmH—pB™m­Cov”sAdd»ss
(&
hbs
[
i
], 
obj
)) {

262  
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hbs
[
i
], 
obj
);

266 
	`as£¹
(!"object‚ot covered by‡ny bitmap");

267  
çl£
;

268 
	}
}

274 
HB_INLINE_PROTO
(

276 
	$dvmH—pB™m­S‘ObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

279 ()
	`_h—pB™m­ModifyObjeùB™
(
hb
, 
obj
, 
Œue
, 
çl£
);

280 
	}
}

285 
HB_INLINE_PROTO
(

287 
	$dvmH—pB™m­CË¬ObjeùB™
(
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

290 ()
	`_h—pB™m­ModifyObjeùB™
(
hb
, 
obj
, 
çl£
, false);

291 
	}
}

300 
HB_INLINE_PROTO
(

302 
	$dvmH—pB™m­IsObjeùB™S‘
(cÚ¡ 
H—pB™m­
 *
hb
, cÚ¡ *
obj
)

305 
	`as£¹
(
	`dvmH—pB™m­Cov”sAdd»ss
(
hb
, 
obj
));

306 
	`as£¹
(
hb
->
b™s
 !ğ
NULL
);

307 
	`as£¹
((
ušŒ_t
)
obj
 >ğ
hb
->
ba£
);

309 ià((
ušŒ_t
)
obj
 <ğ
hb
->
max
) {

310 cÚ¡ 
ušŒ_t
 
off£t
 = (ušŒ_t)
obj
 - 
hb
->
ba£
;

311  
hb
->
b™s
[
	`HB_OFFSET_TO_INDEX
(
off£t
)] & 
	`HB_OFFSET_TO_MASK
(offset);

315 
	}
}

322 
HB_INLINE_PROTO
(

324 
	$dvmH—pB™m­IsObjeùB™S‘InLi¡
(cÚ¡ 
H—pB™m­
 
hbs
[], 
size_t
 
numB™m­s
,

325 cÚ¡ *
obj
)

328 
size_t
 
i
;

330 
i
 = 0; i < 
numB™m­s
; i++) {

331 ià(
	`dvmH—pB™m­Cov”sAdd»ss
(&
hbs
[
i
], 
obj
)) {

332  
	`dvmH—pB™m­IsObjeùB™S‘
(&
hbs
[
i
], 
obj
);

335  
çl£
;

336 
	}
}

338 #undeà
HB_INLINE_PROTO


	@alloc/HeapDebug.c

17 
	~<fú.h
>

18 
	~<¡dlib.h
>

20 
	~"D®vik.h
"

21 
	~"H—pIÁ”Çl.h
"

22 
	~"H—pSourû.h
"

23 
	~"Flßt12.h
"

25 
	$dvmG‘H—pDebugInfo
(
H—pDebugInfoTy³
 
šfo
)

27 
šfo
) {

28 
kVœtu®H—pSize
:

29  ()
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
NULL
, 0);

30 
kVœtu®H—pAÎoÿ‹d
:

31  ()
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0);

35 
	}
}

41 
	#PROC_NAME_LEN
 5

	)

42 
	$š£¹ProûssName
(*
•
)

44 
boŞ
 
foundR—lName
 = 
çl£
;

45 
Çme
[
PROC_NAME_LEN
] = { 'X', 'X', 'X', 'X', 'X' };

46 
ev’t
 = *
•
;

48 ià(!
foundR—lName
) {

49 
fd
 = 
	`İ’
("/´oc/£lf/cmdlše", 
O_RDONLY
);

50 ià(
fd
 > 0) {

51 
buf
[128];

52 
ssize_t
 
n
 = 
	`»ad
(
fd
, 
buf
, (buf) - 1);

53 
	`şo£
(
fd
);

54 ià(
n
 > 0) {

55 
	`mem£t
(
Çme
, 0, (name));

56 ià(
n
 <ğ
PROC_NAME_LEN
) {

58 
	`memıy
(
Çme
, 
buf
, 
n
);

64 
buf
[
n
] = '\0';

65 *
dÙ
 = 
	`¡¼chr
(
buf
, '.');

66 ià(
dÙ
 =ğ
NULL
) {

70 
dÙ
 = 
	`¡¼chr
(
buf
, '/');

72 ià(
dÙ
 !ğ
NULL
) {

73 
dÙ
++;

74 
size_t
 
dÙËn
 = 
	`¡¾’
(
dÙ
);

75 ià(
dÙËn
 < 
PROC_NAME_LEN
) {

79 
dÙ
 -ğ
PROC_NAME_LEN
 - 
dÙËn
;

81 
	`¡ºıy
(
Çme
, 
dÙ
, 
PROC_NAME_LEN
);

84 
	`memıy
(
Çme
, 
buf
, 
PROC_NAME_LEN
);

87 ià(
	`¡rcmp
(
buf
, "zygote") != 0) {

91 
foundR—lName
 = 
Œue
;

97 
ev’t
 &= ~(0xffffffffffLL << 24);

98 
ev’t
 |ğ()
Çme
[0] << 56;

99 
ev’t
 |ğ()
Çme
[1] << 48;

100 
ev’t
 |ğ()
Çme
[2] << 40;

101 
ev’t
 |ğ()
Çme
[3] << 32;

102 
ev’t
 |ğ()
Çme
[4] << 24;

104 *
•
 = 
ev’t
;

105 
	}
}

108 
	#EVENT_LOG_TAG_dvm_gc_šfo
 20001

	)

109 
	#EVENT_LOG_TAG_dvm_gc_madvi£_šfo
 20002

	)

111 
	$dvmLogGcSts
(
size_t
 
numF»ed
, size_ˆ
sizeF»ed
, size_ˆ
gcTimeMs
)

113 cÚ¡ 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

114 
size_t
 
³rH—pAùu®Size
[
HEAP_SOURCE_MAX_HEAP_COUNT
],

115 
³rH—pAÎowedSize
[
HEAP_SOURCE_MAX_HEAP_COUNT
],

116 
³rH—pNumAÎoÿ‹d
[
HEAP_SOURCE_MAX_HEAP_COUNT
],

117 
³rH—pSizeAÎoÿ‹d
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

118 
ev’tBuf
[1 + (1 + ()) * 4];

119 
size_t
 
aùu®Size
, 
®lowedSize
, 
numAÎoÿ‹d
, 
sizeAÎoÿ‹d
;

120 
size_t
 
i
;

121 
size_t
 
soáLim™
 = 
	`dvmH—pSourûG‘Id—lFoÙ´št
();

122 
size_t
 
nH—ps
 = 
	`dvmH—pSourûG‘NumH—ps
();

125 
³rH—pAùu®Size
[0] = 
³rH—pAÎowedSize
[0] = 
³rH—pNumAÎoÿ‹d
[0] =

126 
³rH—pSizeAÎoÿ‹d
[0] = 0;

127 
aùu®Size
 = 
	`dvmH—pSourûG‘V®ue
(
HS_FOOTPRINT
, 
³rH—pAùu®Size
,

128 
HEAP_SOURCE_MAX_HEAP_COUNT
);

129 
®lowedSize
 = 
	`dvmH—pSourûG‘V®ue
(
HS_ALLOWED_FOOTPRINT
,

130 
³rH—pAÎowedSize
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

131 
numAÎoÿ‹d
 = 
	`dvmH—pSourûG‘V®ue
(
HS_OBJECTS_ALLOCATED
,

132 
³rH—pNumAÎoÿ‹d
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

133 
sizeAÎoÿ‹d
 = 
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
,

134 
³rH—pSizeAÎoÿ‹d
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

146 
ev’t0
;

147 
ev’t0
 = 0LL << 63 |

148 ()
	`štToFlßt12
(
gcTimeMs
) << 12 |

149 ()
	`štToFlßt12
(
sizeF»ed
);

150 
	`š£¹ProûssName
(&
ev’t0
);

163 
ev’t1
;

164 
ev’t1
 = 2LL << 62 |

165 ()
	`štToFlßt12
(
numF»ed
) << 48 |

166 ()
	`štToFlßt12
(
aùu®Size
) << 36 |

167 ()
	`štToFlßt12
(
®lowedSize
) << 24 |

168 ()
	`štToFlßt12
(
numAÎoÿ‹d
) << 12 |

169 ()
	`štToFlßt12
(
sizeAÎoÿ‹d
);

201 
ev’t2
;

202 
size_t
 
zAùu®Size
, 
zAÎowedSize
, 
zNumAÎoÿ‹d
, 
zSizeAÎoÿ‹d
;

203 
fœ¡H—p
 = (
nH—ps
 == 1) ? 0 : 1;

204 
size_t
 
hh
;

206 
zAùu®Size
 = 
zAÎowedSize
 = 
zNumAÎoÿ‹d
 = 
zSizeAÎoÿ‹d
 = 0;

207 
hh
 = 
fœ¡H—p
; hh < 
nH—ps
; hh++) {

208 
zAùu®Size
 +ğ
³rH—pAùu®Size
[
hh
];

209 
zAÎowedSize
 +ğ
³rH—pAÎowedSize
[
hh
];

210 
zNumAÎoÿ‹d
 +ğ
³rH—pNumAÎoÿ‹d
[
hh
];

211 
zSizeAÎoÿ‹d
 +ğ
³rH—pSizeAÎoÿ‹d
[
hh
];

213 
ev’t2
 = 3LL << 62 |

214 ()
	`štToFlßt12
(
soáLim™
) << 48 |

215 ()
	`štToFlßt12
(
zAùu®Size
) << 36 |

216 ()
	`štToFlßt12
(
zAÎowedSize
) << 24 |

217 ()
	`štToFlßt12
(
zNumAÎoÿ‹d
) << 12 |

218 ()
	`štToFlßt12
(
zSizeAÎoÿ‹d
);

230 
ev’t3
;

231 
size_t
 
ex‹º®Lim™
, 
ex‹º®By‹sAÎoÿ‹d
;

232 
size_t
 
uÜdblks
, 
foÙ´št
;

239 
size_t
 
	`dlm®loc_foÙ´št
();

240 
m®lšfo
 
mi
;

244 
mi
 = 
	`m®lšfo
();

245 
uÜdblks
 = 
mi
.uordblks;

246 
foÙ´št
 = 
	`dlm®loc_foÙ´št
();

251 
uÜdblks
 = 
foÙ´št
 = 0;

254 
ex‹º®Lim™
 =

255 
	`dvmH—pSourûG‘V®ue
(
HS_EXTERNAL_LIMIT
, 
NULL
, 0);

256 
ex‹º®By‹sAÎoÿ‹d
 =

257 
	`dvmH—pSourûG‘V®ue
(
HS_EXTERNAL_BYTES_ALLOCATED
, 
NULL
, 0);

258 
ev’t3
 =

259 ()
	`štToFlßt12
(
foÙ´št
) << 36 |

260 ()
	`štToFlßt12
(
uÜdblks
) << 24 |

261 ()
	`štToFlßt12
(
ex‹º®Lim™
) << 12 |

262 ()
	`štToFlßt12
(
ex‹º®By‹sAÎoÿ‹d
);

275 *
c
 = 
ev’tBuf
;

276 *
c
++ = 4;

277 *
c
++ = 
EVENT_TYPE_LONG
;

278 
	`memıy
(
c
, &
ev’t0
, (event0));

279 
c
 +ğ(
ev’t0
);

280 *
c
++ = 
EVENT_TYPE_LONG
;

281 
	`memıy
(
c
, &
ev’t1
, (event1));

282 
c
 +ğ(
ev’t1
);

283 *
c
++ = 
EVENT_TYPE_LONG
;

284 
	`memıy
(
c
, &
ev’t2
, (event2));

285 
c
 +ğ(
ev’t2
);

286 *
c
++ = 
EVENT_TYPE_LONG
;

287 
	`memıy
(
c
, &
ev’t3
, (event3));

289 (è
	`ªdroid_btWr™eLog
(
EVENT_LOG_TAG_dvm_gc_šfo
, 
EVENT_TYPE_LIST
,

290 
ev’tBuf
, (eventBuf));

291 
	}
}

293 
	$dvmLogMadvi£Sts
(
size_t
 
madvi£dSizes
[], size_ˆ
¬¿yL’
)

295 
ev’tBuf
[1 + (1 + ()) * 2];

296 
size_t
 
tÙ®
, 
zyg
;

297 
size_t
 
fœ¡H—p
, 
i
;

298 
size_t
 
nH—ps
 = 
	`dvmH—pSourûG‘NumH—ps
();

300 
	`as£¹
(
¬¿yL’
 >ğ
nH—ps
);

302 
fœ¡H—p
 = 
nH—ps
 > 1 ? 1 : 0;

303 
tÙ®
 = 0;

304 
zyg
 = 0;

305 
i
 = 0; i < 
nH—ps
; i++) {

306 
tÙ®
 +ğ
madvi£dSizes
[
i
];

307 ià(
i
 >ğ
fœ¡H—p
) {

308 
zyg
 +ğ
madvi£dSizes
[
i
];

319 *
c
 = 
ev’tBuf
;

320 *
c
++ = 2;

321 *
c
++ = 
EVENT_TYPE_INT
;

322 
	`memıy
(
c
, &
tÙ®
, (total));

323 
c
 +ğ(
tÙ®
);

324 *
c
++ = 
EVENT_TYPE_INT
;

325 
	`memıy
(
c
, &
zyg
, (zyg));

326 
c
 +ğ(
zyg
);

328 (è
	`ªdroid_btWr™eLog
(
EVENT_LOG_TAG_dvm_gc_madvi£_šfo
,

329 
EVENT_TYPE_LIST
, 
ev’tBuf
, (eventBuf));

330 
	}
}

333 
	~<”ºo.h
>

334 
	~<¡dio.h
>

336 
	sH—pDumpCÚ‹xt
 {

337 
FILE
 *
	må
;

338 *
	mchunkS¹
;

339 
size_t
 
	mchunkL’
;

340 
boŞ
 
	mchunkF»e
;

341 } 
	tH—pDumpCÚ‹xt
;

344 
	$dump_cÚ‹xt
(cÚ¡ 
H—pDumpCÚ‹xt
 *
ùx
)

346 
	`årštf
(
ùx
->
å
, "0x%08x %12.12zd %s\n", (
ušŒ_t
)ùx->
chunkS¹
,

347 
ùx
->
chunkL’
, ctx->
chunkF»e
 ? "FREE" : "USED");

348 
	}
}

351 
	$h—p_chunk_ÿÎback
(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

352 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
, *
¬g
)

354 
H—pDumpCÚ‹xt
 *
ùx
 = (H—pDumpCÚ‹xˆ*)
¬g
;

355 
boŞ
 
chunkF»e
 = (
u£½Œ
 =ğ
NULL
);

357 ià(
chunkF»e
 !ğ
ùx
->chunkFree ||

358 ((*)
ùx
->
chunkS¹
 + ctx->
chunkL’
è!ğ
chunk±r
)

364 ià(
ùx
->
chunkS¹
 !ğ
NULL
) {

366 
	`dump_cÚ‹xt
(
ùx
);

368 
ùx
->
chunkS¹
 = (*)
chunk±r
;

369 
ùx
->
chunkL’
 = 
chunkËn
;

370 
ùx
->
chunkF»e
 = chunkFree;

374 
ùx
->
chunkL’
 +ğ
chunkËn
;

376 
	}
}

380 
	$dvmDumpH—pToFe
(cÚ¡ *
feName
)

382 
H—pDumpCÚ‹xt
 
ùx
;

383 
FILE
 *
å
;

385 
å
 = 
	`fİ’
(
feName
, "w+");

386 ià(
å
 =ğ
NULL
) {

387 
	`LOGE
("Cª'ˆİ’ % fÜ wr™šg: %s\n", 
feName
, 
	`¡»¼Ü
(
”ºo
));

390 
	`LOGW
("Dumpšg h—°tØ%s...\n", 
feName
);

392 
	`årštf
(
å
, "==== Dalvik heap dump ====\n");

393 
	`mem£t
(&
ùx
, 0, (ctx));

394 
ùx
.
å
 = fp;

395 
	`dvmH—pSourûW®k
(
h—p_chunk_ÿÎback
, (*)&
ùx
);

396 
	`dump_cÚ‹xt
(&
ùx
);

397 
	`årštf
(
å
, "====ƒnd heap dump ====\n");

399 
	`LOGW
("Dum³d h—°tØ%s.\n", 
feName
);

401 
	`fşo£
(
å
);

402 
	}
}

	@alloc/HeapDebug.h

16 #iâdeà
_DALVIK_HEAPDEBUG


17 
	#_DALVIK_HEAPDEBUG


	)

19 
	eH—pDebugInfoTy³
 {

20 
	mkVœtu®H—pSize
 = 0,

21 
	mkN©iveH—pSize
 = 1,

22 
	mkVœtu®H—pAÎoÿ‹d
 = 2,

23 
	mkN©iveH—pAÎoÿ‹d
 = 3,

24 } 
	tH—pDebugInfoTy³
;

29 
dvmG‘H—pDebugInfo
(
H—pDebugInfoTy³
 
šfo
);

	@alloc/HeapInternal.h

19 #iâdeà
_DALVIK_ALLOC_HEAP_INTERNAL


20 
	#_DALVIK_ALLOC_HEAP_INTERNAL


	)

22 
	~<time.h
>

24 
	~"H—pTabË.h
"

25 
	~"M¬kSw“p.h
"

27 
	#SCHEDULED_REFERENCE_MAGIC
 ((
Objeù
*)0x87654321)

	)

29 
	#±r2chunk
(
p
è(((
DvmH—pChunk
 *)Õ)è- 1)

	)

30 
	#chunk2±r
(
p
è((*)(((
DvmH—pChunk
 *)Õ)è+ 1))

	)

32 
	#WITH_OBJECT_HEADERS
 0

	)

33 #ià
WITH_OBJECT_HEADERS


34 
	#OBJECT_HEADER
 0x11335577

	)

35 
u2
 
gG’”©iÚ
;

38 
	sDvmH—pChunk
 {

39 #ià
WITH_OBJECT_HEADERS


40 
u4
 
	mh—d”
;

41 cÚ¡ 
Objeù
 *
	m·»Á
;

42 cÚ¡ 
Objeù
 *
	m·»ÁOld
;

43 cÚ¡ 
Objeù
 *
	mm¬kFšg”
;

44 cÚ¡ 
Objeù
 *
	mm¬kFšg”Old
;

45 
u2
 
	mbœthG’”©iÚ
;

46 
u2
 
	mm¬kCouÁ
;

47 
u2
 
	msÿnCouÁ
;

48 
u2
 
	mŞdM¬kG’”©iÚ
;

49 
u2
 
	mm¬kG’”©iÚ
;

50 
u2
 
	mŞdSÿnG’”©iÚ
;

51 
u2
 
	msÿnG’”©iÚ
;

53 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


54 
u4
 
	m¡ackT¿ûS”ŸlNumb”
;

56 
u8
 
	md©a
[0];

57 } 
	tDvmH—pChunk
;

59 
	sGcH—p
 {

60 
H—pSourû
 *
	mh—pSourû
;

65 
H—pRefTabË
 
	mnÚCŞËùabËRefs
;

80 
L¬geH—pRefTabË
 *
	mfš®izabËRefs
;

88 
L¬geH—pRefTabË
 *
	m³ndšgFš®iz©iÚRefs
;

95 
Objeù
 *
	msoáReã»nûs
;

96 
Objeù
 *
	mw—kReã»nûs
;

97 
Objeù
 *
	mphªtomReã»nûs
;

106 
L¬geH—pRefTabË
 *
	m»ã»nûO³¿tiÚs
;

111 
Objeù
 *
	mh—pWÜk”Cu¼’tObjeù
;

112 
M‘hod
 *
	mh—pWÜk”Cu¼’tM‘hod
;

120 
u8
 
	mh—pWÜk”IÁ”pS¹Time
;

121 
u8
 
	mh—pWÜk”IÁ”pCpuS¹Time
;

126 
time¥ec
 
	mh—pWÜk”NextTrim
;

131 
GcM¬kCÚ‹xt
 
	mm¬kCÚ‹xt
;

138 
u8
 
	mgcS¹Time
;

142 
boŞ
 
	mgcRuÂšg
;

147 ’um { 
	mSR_COLLECT_NONE
, 
	mSR_COLLECT_SOME
, 
	mSR_COLLECT_ALL
 }

148 
	msoáReã»nûCŞËùiÚS‹
;

153 
size_t
 
	msoáReã»nûH—pSizeTh»shŞd
;

160 
	msoáReã»nûCŞÜ
;

167 
boŞ
 
	mm¬kAÎReã»Ás
;

169 #ià
DVM_TRACK_HEAP_MARKING


174 
size_t
 
	mm¬kCouÁ
;

175 
size_t
 
	mm¬kSize
;

182 
	mddmHpifWh’
;

183 
	mddmHpsgWh’
;

184 
	mddmHpsgWh©
;

185 
	mddmNhsgWh’
;

186 
	mddmNhsgWh©
;

188 #ià
WITH_HPROF


189 
boŞ
 
	mh´ofDumpOnGc
;

190 cÚ¡ * 
	mh´ofFeName
;

191 
h´of_cÚ‹xt_t
 *
	mh´ofCÚ‹xt
;

192 
	mh´ofResuÉ
;

196 
boŞ
 
dvmLockH—p
();

197 
dvmUÆockH—p
();

198 
dvmLogGcSts
(
size_t
 
numF»ed
, size_ˆ
sizeF»ed
, size_ˆ
gcTimeMs
);

199 
dvmLogMadvi£Sts
(
size_t
 
madvi£dSizes
[], size_ˆ
¬¿yL’
);

200 
dvmH—pSizeChªged
();

206 
	#HEAP_LOG_TAG
 
LOG_TAG
 "-h—p"

	)

208 #ià
LOG_NDEBUG


209 
	#LOGV_HEAP
(...è(()0)

	)

210 
	#LOGD_HEAP
(...è(()0)

	)

212 
	#LOGV_HEAP
(...è
	`LOG
(
LOG_VERBOSE
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

213 
	#LOGD_HEAP
(...è
	`LOG
(
LOG_DEBUG
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

215 
	#LOGI_HEAP
(...è
	`LOG
(
LOG_INFO
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

216 
	#LOGW_HEAP
(...è
	`LOG
(
LOG_WARN
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

217 
	#LOGE_HEAP
(...è
	`LOG
(
LOG_ERROR
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
)

	)

219 
	#QUIET_ZYGOTE_GC
 1

	)

220 #ià
QUIET_ZYGOTE_GC


221 #undeà
LOGI_HEAP


222 
	#LOGI_HEAP
(...) \

224 ià(!
gDvm
.
zygÙe
) { \

225 
	`LOG
(
LOG_INFO
, 
HEAP_LOG_TAG
, 
__VA_ARGS__
); \

227 } 
çl£
)

	)

230 
	#FRACTIONAL_MB
(
n
) (n) / (1024 * 1024), \

231 ((((
n
è% (1024 * 1024)è/ 1024è* 1000è/ 1024

	)

232 
	#FRACTIONAL_PCT
(
n
,
max
) ((n) * 100) / (max), \

233 (((
n
è* 1000è/ (
max
)è% 10

	)

	@alloc/HeapSource.c

17 
	~<cuts/m¥aû.h
>

18 
	~<lim™s.h
>

19 
	~<sys/mmª.h
>

20 
	~<”ºo.h
>

22 
	~"D®vik.h
"

23 
	~"®loc/H—p.h
"

24 
	~"®loc/H—pIÁ”Çl.h
"

25 
	~"®loc/H—pSourû.h
"

26 
	~"®loc/H—pB™m­.h
"

29 
dlm®loc_Œim
(
size_t
);

30 
dlm®loc_w®k_ä“_·ges
((*)(*, *, *), *);

32 
	`¢­Id—lFoÙ´št
();

33 
	`£tId—lFoÙ´št
(
size_t
 
max
);

35 #iâdeà
PAGE_SIZE


36 
	#PAGE_SIZE
 4096

	)

38 
	#ALIGN_UP_TO_PAGE_SIZE
(
p
) \

39 (((
size_t
)(
p
è+ (
PAGE_SIZE
 - 1)è& ~(PAGE_SIZE - 1))

	)

40 
	#ALIGN_DOWN_TO_PAGE_SIZE
(
p
) \

41 ((
size_t
)(
p
è& ~(
PAGE_SIZE
 - 1))

	)

43 
	#HEAP_UTILIZATION_MAX
 1024

	)

44 
	#DEFAULT_HEAP_UTILIZATION
 512

45 
	#HEAP_IDEAL_FREE
 (2 * 1024 * 1024)

	)

46 
	#HEAP_MIN_FREE
 (
HEAP_IDEAL_FREE
 / 4)

	)

48 
	#HS_BOILERPLATE
() \

50 
	`as£¹
(
gDvm
.
gcH—p
 !ğ
NULL
); \

51 
	`as£¹
(
gDvm
.
gcH—p
->
h—pSourû
 !ğ
NULL
); \

52 
	`as£¹
(
gHs
 =ğ
gDvm
.
gcH—p
->
h—pSourû
); \

53 
	}
} 0)

	)

55 
	#DEBUG_HEAP_SOURCE
 0

	)

56 #ià
DEBUG_HEAP_SOURCE


57 
	#HSTRACE
(...è
	`LOG
(
LOG_INFO
, 
LOG_TAG
 "-hs", 
__VA_ARGS__
)

	)

59 
	#HSTRACE
(...è

	)

103 
m¥aû
 *
	mm¥
;

107 
H—pB™m­
 
	mobjeùB™m­
;

111 
size_t
 
	mabsŞu‹MaxSize
;

117 
size_t
 
	mby‹sAÎoÿ‹d
;

121 
size_t
 
	mobjeùsAÎoÿ‹d
;

122 } 
	tH—p
;

124 
	sH—pSourû
 {

127 
size_t
 
	mrg‘Utiz©iÚ
;

131 
size_t
 
	mmšimumSize
;

135 
size_t
 
	m¡¬tSize
;

139 
size_t
 
	mabsŞu‹MaxSize
;

143 
size_t
 
	mid—lSize
;

149 
size_t
 
	msoáLim™
;

154 
H—p
 
	mh—ps
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

158 
size_t
 
	mnumH—ps
;

162 
size_t
 
	mex‹º®By‹sAÎoÿ‹d
;

166 
size_t
 
	mex‹º®Lim™
;

170 
boŞ
 
	m§wZygÙe
;

173 
	#hs2h—p
(
hs_
è(&((hs_)->
h—ps
[0]))

	)

178 
šlše
 
boŞ


179 
	$soáLim™ed
(cÚ¡ 
H—pSourû
 *
hs
)

187  
hs
->
soáLim™
 <ğhs->
id—lSize
;

188 
	}
}

194 
šlše
 
size_t


195 
	$ŞdH—pOv”h—d
(cÚ¡ 
H—pSourû
 *
hs
, 
boŞ
 
šşudeAùive
)

197 
size_t
 
foÙ´št
 = 0;

198 
size_t
 
i
;

200 ià(
šşudeAùive
) {

201 
i
 = 0;

203 
i
 = 1;

205  ; 
i
 < 
hs
->
numH—ps
; i++) {

207 
foÙ´št
 +ğ
	`m¥aû_foÙ´št
(
hs
->
h—ps
[
i
].
m¥
);

209  
foÙ´št
;

210 
	}
}

216 
šlše
 
H—p
 *

217 
	$±r2h—p
(cÚ¡ 
H—pSourû
 *
hs
, cÚ¡ *
±r
)

219 cÚ¡ 
size_t
 
numH—ps
 = 
hs
->numHeaps;

220 
size_t
 
i
;

223 ià(
±r
 !ğ
NULL
) {

224 
i
 = 0; i < 
numH—ps
; i++) {

225 cÚ¡ 
H—p
 *cÚ¡ 
h—p
 = &
hs
->
h—ps
[
i
];

227 ià(
	`dvmH—pB™m­MayCÚšObjeù
(&
h—p
->
objeùB™m­
, 
±r
)) {

228  (
H—p
 *)
h—p
;

232  
NULL
;

233 
	}
}

243 
šlše
 

244 
	$couÁAÎoÿtiÚ
(
H—p
 *
h—p
, cÚ¡ *
±r
, 
boŞ
 
isObj
)

246 
	`as£¹
(
h—p
->
by‹sAÎoÿ‹d
 < 
	`m¥aû_foÙ´št
(h—p->
m¥
));

248 
h—p
->
by‹sAÎoÿ‹d
 +ğ
	`m¥aû_u§bË_size
(h—p->
m¥
, 
±r
) +

249 
HEAP_SOURCE_CHUNK_OVERHEAD
;

250 ià(
isObj
) {

251 
h—p
->
objeùsAÎoÿ‹d
++;

252 
	`dvmH—pB™m­S‘ObjeùB™
(&
h—p
->
objeùB™m­
, 
±r
);

255 
	`as£¹
(
h—p
->
by‹sAÎoÿ‹d
 < 
	`m¥aû_foÙ´št
(h—p->
m¥
));

256 
	}
}

258 
šlše
 

259 
	$couÁF»e
(
H—p
 *
h—p
, cÚ¡ *
±r
, 
boŞ
 
isObj
)

261 
size_t
 
d–
;

263 
d–
 = 
	`m¥aû_u§bË_size
(
h—p
->
m¥
, 
±r
è+ 
HEAP_SOURCE_CHUNK_OVERHEAD
;

264 
	`as£¹
(
d–
 > 0);

265 ià(
d–
 < 
h—p
->
by‹sAÎoÿ‹d
) {

266 
h—p
->
by‹sAÎoÿ‹d
 -ğ
d–
;

268 
h—p
->
by‹sAÎoÿ‹d
 = 0;

270 ià(
isObj
) {

271 
	`dvmH—pB™m­CË¬ObjeùB™
(&
h—p
->
objeùB™m­
, 
±r
);

272 ià(
h—p
->
objeùsAÎoÿ‹d
 > 0) {

273 
h—p
->
objeùsAÎoÿ‹d
--;

276 
	}
}

278 
H—pSourû
 *
	ggHs
 = 
NULL
;

280 
m¥aû
 *

281 
	$ü—‹M¥aû
(
size_t
 
¡¬tSize
, size_ˆ
absŞu‹MaxSize
, size_ˆ
id
)

283 
m¥aû
 *
m¥
;

284 
Çme
[
PATH_MAX
];

289 
	`¢´štf
(
Çme
, (name)-1, "dalvik-heap%s/%zd",

290 
gDvm
.
zygÙe
 ? "/zygÙe" : "", 
id
);

291 
Çme
[(name)-1] = '\0';

301 
	`LOGV_HEAP
("C»©šg VM h—°oàsiz%u\n", 
¡¬tSize
);

302 
”ºo
 = 0;

303 
m¥
 = 
	`ü—‹_cÚtiguous_m¥aû_w™h_Çme
(
¡¬tSize
/2,

304 
absŞu‹MaxSize
, 
çl£
, 
Çme
);

305 ià(
m¥
 !ğ
NULL
) {

309 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
¡¬tSize
);

314 
	`LOGE_HEAP
("Can't create VM heap of size (%u,%u) (errno=%d)\n",

315 
¡¬tSize
/2, 
absŞu‹MaxSize
, 
”ºo
);

318  
m¥
;

319 
	}
}

321 
boŞ


322 
	$addNewH—p
(
H—pSourû
 *
hs
, 
m¥aû
 *
m¥
, 
size_t
 
m¥AbsŞu‹MaxSize
)

324 
H—p
 
h—p
;

326 ià(
hs
->
numH—ps
 >ğ
HEAP_SOURCE_MAX_HEAP_COUNT
) {

327 
	`LOGE
("Attempto createoo many heaps (%zd >= %zd)\n",

328 
hs
->
numH—ps
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

329 
	`dvmAbÜt
();

330  
çl£
;

333 
	`mem£t
(&
h—p
, 0, (heap));

335 ià(
m¥
 !ğ
NULL
) {

336 
h—p
.
m¥
 = msp;

337 
h—p
.
absŞu‹MaxSize
 = 
m¥AbsŞu‹MaxSize
;

339 
size_t
 
ov”h—d
;

341 
ov”h—d
 = 
	`ŞdH—pOv”h—d
(
hs
, 
Œue
);

342 ià(
ov”h—d
 + 
HEAP_MIN_FREE
 >ğ
hs
->
absŞu‹MaxSize
) {

343 
	`LOGE_HEAP
("No„oomo create‡ny more heaps "

345 
ov”h—d
, 
hs
->
absŞu‹MaxSize
);

346  
çl£
;

348 
h—p
.
absŞu‹MaxSize
 = 
hs
->absŞu‹MaxSiz- 
ov”h—d
;

349 
h—p
.
m¥
 = 
	`ü—‹M¥aû
(
HEAP_MIN_FREE
, h—p.
absŞu‹MaxSize
,

350 
hs
->
numH—ps
);

351 ià(
h—p
.
m¥
 =ğ
NULL
) {

352  
çl£
;

355 ià(!
	`dvmH—pB™m­In™
(&
h—p
.
objeùB™m­
,

356 (*)
	`ALIGN_DOWN_TO_PAGE_SIZE
(
h—p
.
m¥
),

357 
h—p
.
absŞu‹MaxSize
,

360 
	`LOGE_HEAP
("Can't create objectBitmap\n");

361 
ç
;

366 ià(
hs
->
numH—ps
 > 0) {

367 
m¥aû
 *
m¥
 = 
hs
->
h—ps
[0].msp;

368 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
	`m¥aû_foÙ´št
(msp));

374 
	`memmove
(&
hs
->
h—ps
[1], &hs->h—ps[0], hs->
numH—ps
 * (hs->heaps[0]));

375 
hs
->
h—ps
[0] = 
h—p
;

376 
hs
->
numH—ps
++;

378  
Œue
;

380 
ç
:

381 ià(
m¥
 =ğ
NULL
) {

382 
	`de¡roy_cÚtiguous_m¥aû
(
h—p
.
m¥
);

384  
çl£
;

385 
	}
}

392 
GcH—p
 *

393 
	$dvmH—pSourûS¹up
(
size_t
 
¡¬tSize
, size_ˆ
absŞu‹MaxSize
)

395 
GcH—p
 *
gcH—p
;

396 
H—pSourû
 *
hs
;

397 
H—p
 *
h—p
;

398 
m¥aû
 
m¥
;

400 
	`as£¹
(
gHs
 =ğ
NULL
);

402 ià(
¡¬tSize
 > 
absŞu‹MaxSize
) {

403 
	`LOGE
("Bad heap…arameters (start=%d, max=%d)\n",

404 
¡¬tSize
, 
absŞu‹MaxSize
);

405  
NULL
;

411 
m¥
 = 
	`ü—‹M¥aû
(
¡¬tSize
, 
absŞu‹MaxSize
, 0);

412 ià(
m¥
 =ğ
NULL
) {

413  
çl£
;

418 
gcH—p
 = 
	`m¥aû_m®loc
(
m¥
, (*gcHeap));

419 ià(
gcH—p
 =ğ
NULL
) {

420 
	`LOGE_HEAP
("Can't‡llocate heap descriptor\n");

421 
ç
;

423 
	`mem£t
(
gcH—p
, 0, (*gcHeap));

425 
hs
 = 
	`m¥aû_m®loc
(
m¥
, (*hs));

426 ià(
hs
 =ğ
NULL
) {

427 
	`LOGE_HEAP
("Can't‡llocate heap source\n");

428 
ç
;

430 
	`mem£t
(
hs
, 0, (*hs));

432 
hs
->
rg‘Utiz©iÚ
 = 
DEFAULT_HEAP_UTILIZATION
;

433 
hs
->
mšimumSize
 = 0;

434 
hs
->
¡¬tSize
 = startSize;

435 
hs
->
absŞu‹MaxSize
 =‡bsoluteMaxSize;

436 
hs
->
id—lSize
 = 
¡¬tSize
;

437 
hs
->
soáLim™
 = 
INT_MAX
;

438 
hs
->
numH—ps
 = 0;

439 
hs
->
§wZygÙe
 = 
gDvm
.
zygÙe
;

440 ià(!
	`addNewH—p
(
hs
, 
m¥
, 
absŞu‹MaxSize
)) {

441 
	`LOGE_HEAP
("Can't‡dd initial heap\n");

442 
ç
;

445 
gcH—p
->
h—pSourû
 = 
hs
;

447 
	`couÁAÎoÿtiÚ
(
	`hs2h—p
(
hs
), 
gcH—p
, 
çl£
);

448 
	`couÁAÎoÿtiÚ
(
	`hs2h—p
(
hs
), hs, 
çl£
);

450 
gHs
 = 
hs
;

451  
gcH—p
;

453 
ç
:

454 
	`de¡roy_cÚtiguous_m¥aû
(
m¥
);

455  
NULL
;

456 
	}
}

464 
boŞ


465 
	$dvmH—pSourûS¹upAá”ZygÙe
()

467 
H—pSourû
 *
hs
 = 
gHs
;

469 
	`HS_BOILERPLATE
();

471 
	`as£¹
(!
gDvm
.
zygÙe
);

473 ià(
hs
->
§wZygÙe
) {

476  
	`addNewH—p
(
hs
, 
NULL
, 0);

478  
Œue
;

479 
	}
}

488 
boŞ


489 
	$dvmH—pSourûS¹upBefÜeFÜk
()

491 
H—pSourû
 *
hs
 = 
gHs
;

493 
	`HS_BOILERPLATE
();

495 
	`as£¹
(
gDvm
.
zygÙe
);

497 ià(!
gDvm
.
ÃwZygÙeH—pAÎoÿ‹d
) {

501 
	`LOGI
("Splitting out‚ew zygote heap\n");

502 
gDvm
.
ÃwZygÙeH—pAÎoÿ‹d
 = 
Œue
;

503  
	`addNewH—p
(
hs
, 
NULL
, 0);

505  
Œue
;

506 
	}
}

512 
	$dvmH—pSourûShutdown
(
GcH—p
 *
gcH—p
)

514 ià(
gcH—p
 !ğ
NULL
 && gcH—p->
h—pSourû
 != NULL) {

515 
H—pSourû
 *
hs
;

516 
size_t
 
numH—ps
;

517 
size_t
 
i
;

519 
hs
 = 
gcH—p
->
h—pSourû
;

520 
gHs
 = 
NULL
;

525 
numH—ps
 = 
hs
->numHeaps;

527 
i
 = 0; i < 
numH—ps
; i++) {

528 
H—p
 *
h—p
 = &
hs
->
h—ps
[
i
];

530 
	`dvmH—pB™m­D–‘e
(&
h—p
->
objeùB™m­
);

531 
	`de¡roy_cÚtiguous_m¥aû
(
h—p
->
m¥
);

537 
	}
}

545 
size_t


546 
	$dvmH—pSourûG‘V®ue
(
H—pSourûV®ueS³c
 
¥ec
, 
size_t
 
³rH—pSts
[],

547 
size_t
 
¬¿yL’
)

549 
H—pSourû
 *
hs
 = 
gHs
;

550 
size_t
 
v®ue
 = 0;

551 
size_t
 
tÙ®
 = 0;

552 
size_t
 
i
;

554 
	`HS_BOILERPLATE
();

556 
¥ec
) {

557 
HS_EXTERNAL_BYTES_ALLOCATED
:

558  
hs
->
ex‹º®By‹sAÎoÿ‹d
;

559 
HS_EXTERNAL_LIMIT
:

560  
hs
->
ex‹º®Lim™
;

566 
	`as£¹
(
¬¿yL’
 >ğ
hs
->
numH—ps
 || 
³rH—pSts
 =ğ
NULL
);

567 
i
 = 0; i < 
hs
->
numH—ps
; i++) {

568 
H—p
 *cÚ¡ 
h—p
 = &
hs
->
h—ps
[
i
];

570 
¥ec
) {

571 
HS_FOOTPRINT
:

572 
v®ue
 = 
	`m¥aû_foÙ´št
(
h—p
->
m¥
);

574 
HS_ALLOWED_FOOTPRINT
:

575 
v®ue
 = 
	`m¥aû_max_®lowed_foÙ´št
(
h—p
->
m¥
);

577 
HS_BYTES_ALLOCATED
:

578 
v®ue
 = 
h—p
->
by‹sAÎoÿ‹d
;

580 
HS_OBJECTS_ALLOCATED
:

581 
v®ue
 = 
h—p
->
objeùsAÎoÿ‹d
;

587 ià(
³rH—pSts
) {

588 
³rH—pSts
[
i
] = 
v®ue
;

590 
tÙ®
 +ğ
v®ue
;

592  
tÙ®
;

593 
	}
}

600 
ssize_t


601 
	$dvmH—pSourûG‘ObjeùB™m­s
(
H—pB™m­
 
outB™m­s
[], 
size_t
 
maxB™m­s
)

603 
H—pSourû
 *
hs
 = 
gHs
;

605 
	`HS_BOILERPLATE
();

607 ià(
maxB™m­s
 >ğ
hs
->
numH—ps
) {

608 
size_t
 
i
;

610 
i
 = 0; i < 
hs
->
numH—ps
; i++) {

611 
outB™m­s
[
i
] = 
hs
->
h—ps
[i].
objeùB™m­
;

613  
i
;

616 
	}
}

626 
boŞ


627 
	$dvmH—pSourûR•ÏûObjeùB™m­s
(
H—pB™m­
 
objeùB™m­s
[], 
size_t
 
nB™m­s
)

629 
H—pSourû
 *
hs
 = 
gHs
;

630 
size_t
 
i
;

632 
	`HS_BOILERPLATE
();

634 ià(
nB™m­s
 !ğ
hs
->
numH—ps
) {

635  
çl£
;

638 
i
 = 0; i < 
hs
->
numH—ps
; i++) {

639 
H—p
 *
h—p
 = &
hs
->
h—ps
[
i
];

640 
H—pB™m­
 
sw­
;

642 
sw­
 = 
h—p
->
objeùB™m­
;

643 
h—p
->
objeùB™m­
 = 
objeùB™m­s
[
i
];

644 
objeùB™m­s
[
i
] = 
sw­
;

646  
Œue
;

647 
	}
}

653 
	$dvmH—pSourûAÎoc
(
size_t
 
n
)

655 
H—pSourû
 *
hs
 = 
gHs
;

656 
H—p
 *
h—p
;

657 *
±r
;

659 
	`HS_BOILERPLATE
();

660 
h—p
 = 
	`hs2h—p
(
hs
);

662 ià(
h—p
->
by‹sAÎoÿ‹d
 + 
n
 <ğ
hs
->
soáLim™
) {

666 
±r
 = 
	`m¥aû_ÿÎoc
(
h—p
->
m¥
, 1, 
n
);

667 ià(
±r
 !ğ
NULL
) {

668 
	`couÁAÎoÿtiÚ
(
h—p
, 
±r
, 
Œue
);

674 
	`LOGV_HEAP
("softLimit of %zd.%03zdMB hit for %zd-byte‡llocation\n",

675 
	`FRACTIONAL_MB
(
hs
->
soáLim™
), 
n
);

676 
±r
 = 
NULL
;

678  
±r
;

679 
	}
}

685 
	$h—pAÎocAndGrow
(
H—pSourû
 *
hs
, 
H—p
 *
h—p
, 
size_t
 
n
)

687 *
±r
;

688 
size_t
 
max
;

693 
max
 = 
h—p
->
absŞu‹MaxSize
;

694 ià(
max
 > 
hs
->
ex‹º®By‹sAÎoÿ‹d
) {

695 
max
 -ğ
hs
->
ex‹º®By‹sAÎoÿ‹d
;

697 
	`m¥aû_£t_max_®lowed_foÙ´št
(
h—p
->
m¥
, 
max
);

698 
±r
 = 
	`dvmH—pSourûAÎoc
(
n
);

703 
	`m¥aû_£t_max_®lowed_foÙ´št
(
h—p
->
m¥
,

704 
	`m¥aû_foÙ´št
(
h—p
->
m¥
));

706 
±r
 = 
NULL
;

709  
±r
;

710 
	}
}

717 
	$dvmH—pSourûAÎocAndGrow
(
size_t
 
n
)

719 
H—pSourû
 *
hs
 = 
gHs
;

720 
H—p
 *
h—p
;

721 *
±r
;

722 
size_t
 
ŞdId—lSize
;

724 
	`HS_BOILERPLATE
();

725 
h—p
 = 
	`hs2h—p
(
hs
);

727 
±r
 = 
	`dvmH—pSourûAÎoc
(
n
);

728 ià(
±r
 !ğ
NULL
) {

729  
±r
;

732 
ŞdId—lSize
 = 
hs
->
id—lSize
;

733 ià(
	`soáLim™ed
(
hs
)) {

737 
hs
->
soáLim™
 = 
INT_MAX
;

738 
±r
 = 
	`dvmH—pSourûAÎoc
(
n
);

739 ià(
±r
 !ğ
NULL
) {

743 
	`¢­Id—lFoÙ´št
();

744  
±r
;

752 
±r
 = 
	`h—pAÎocAndGrow
(
hs
, 
h—p
, 
n
);

753 ià(
±r
 !ğ
NULL
) {

757 
	`¢­Id—lFoÙ´št
();

762 
	`£tId—lFoÙ´št
(
ŞdId—lSize
);

764  
±r
;

765 
	}
}

771 
	$dvmH—pSourûF»e
(*
±r
)

773 
H—p
 *
h—p
;

775 
	`HS_BOILERPLATE
();

777 
h—p
 = 
	`±r2h—p
(
gHs
, 
±r
);

778 ià(
h—p
 !ğ
NULL
) {

779 
	`couÁF»e
(
h—p
, 
±r
, 
Œue
);

783 ià(
h—p
 =ğ
gHs
->
h—ps
) {

784 
	`m¥aû_ä“
(
h—p
->
m¥
, 
±r
);

787 
	}
}

796 
	$dvmH—pSourûF»eLi¡
(
size_t
 
numPŒs
, **
±rs
)

798 
H—p
 *
h—p
;

800 
	`HS_BOILERPLATE
();

802 ià(
numPŒs
 == 0) {

806 
	`as£¹
(
±rs
 !ğ
NULL
);

807 
	`as£¹
(*
±rs
 !ğ
NULL
);

808 
h—p
 = 
	`±r2h—p
(
gHs
, *
±rs
);

809 ià(
h—p
 !ğ
NULL
) {

810 
m¥aû
 *
m¥
 = 
h—p
->msp;

815 ià(
h—p
 =ğ
gHs
->
h—ps
) {

830 
	`as£¹
(
±rs
[0] !ğ
NULL
);

831 
	`as£¹
(
	`±r2h—p
(
gHs
, 
±rs
[0]è=ğ
h—p
);

832 
	`couÁF»e
(
h—p
, 
±rs
[0], 
Œue
);

833 *
m”ged
 = 
±rs
[0];

835 
size_t
 
i
;

836 
i
 = 1; i < 
numPŒs
; i++) {

837 
	`as£¹
(
m”ged
 !ğ
NULL
);

838 
	`as£¹
(
±rs
[
i
] !ğ
NULL
);

839 
	`as£¹
((
šŒ_t
)
m”ged
 < (šŒ_t)
±rs
[
i
]);

840 
	`as£¹
(
	`±r2h—p
(
gHs
, 
±rs
[
i
]è=ğ
h—p
);

841 
	`couÁF»e
(
h—p
, 
±rs
[
i
], 
Œue
);

846 ià(
	`m¥aû_m”ge_objeùs
(
m¥
, 
m”ged
, 
±rs
[
i
]è=ğ
NULL
) {

847 
	`m¥aû_ä“
(
m¥
, 
m”ged
);

848 
m”ged
 = 
±rs
[
i
];

851 
	`as£¹
(
m”ged
 !ğ
NULL
);

852 
	`m¥aû_ä“
(
m¥
, 
m”ged
);

855 
size_t
 
i
;

856 
i
 = 0; i < 
numPŒs
; i++) {

857 
	`as£¹
(
±rs
[
i
] !ğ
NULL
);

858 
	`as£¹
(
	`±r2h—p
(
gHs
, 
±rs
[
i
]è=ğ
h—p
);

859 
	`couÁF»e
(
h—p
, 
±rs
[
i
], 
Œue
);

863 
	}
}

868 
boŞ


869 
	$dvmH—pSourûCÚšs
(cÚ¡ *
±r
)

871 
H—p
 *
h—p
;

873 
	`HS_BOILERPLATE
();

875 
h—p
 = 
	`±r2h—p
(
gHs
, 
±r
);

876 ià(
h—p
 !ğ
NULL
) {

877  
	`dvmH—pB™m­IsObjeùB™S‘
(&
h—p
->
objeùB™m­
, 
±r
) != 0;

879  
çl£
;

880 
	}
}

885 
boŞ


886 
	$dvmH—pSourûG‘PŒFÏg
(cÚ¡ *
±r
, 
H—pSourûPŒFÏg
 
æag
)

888 ià(
±r
 =ğ
NULL
) {

889  
çl£
;

892 ià(
æag
 =ğ
HS_CONTAINS
) {

893  
	`dvmH—pSourûCÚšs
(
±r
);

894 } ià(
æag
 =ğ
HS_ALLOCATED_IN_ZYGOTE
) {

895 
H—pSourû
 *
hs
 = 
gHs
;

897 
	`HS_BOILERPLATE
();

899 ià(
hs
->
§wZygÙe
) {

900 
H—p
 *
h—p
;

902 
h—p
 = 
	`±r2h—p
(
hs
, 
±r
);

903 ià(
h—p
 !ğ
NULL
) {

907  
h—p
 !ğ
hs
->
h—ps
;

913  
çl£
;

916  
çl£
;

917 
	}
}

923 
size_t


924 
	$dvmH—pSourûChunkSize
(cÚ¡ *
±r
)

926 
H—p
 *
h—p
;

928 
	`HS_BOILERPLATE
();

930 
h—p
 = 
	`±r2h—p
(
gHs
, 
±r
);

931 ià(
h—p
 !ğ
NULL
) {

932  
	`m¥aû_u§bË_size
(
h—p
->
m¥
, 
±r
);

935 
	}
}

943 
size_t


944 
	$dvmH—pSourûFoÙ´št
()

946 
	`HS_BOILERPLATE
();

949  
	`ŞdH—pOv”h—d
(
gHs
, 
Œue
);

950 
	}
}

958 
size_t


959 
	$g‘SoáFoÙ´št
(
boŞ
 
šşudeAùive
)

961 
H—pSourû
 *
hs
 = 
gHs
;

962 
size_t
 
»t
;

964 
	`HS_BOILERPLATE
();

966 
»t
 = 
	`ŞdH—pOv”h—d
(
hs
, 
çl£
è+ hs->
ex‹º®By‹sAÎoÿ‹d
;

967 ià(
šşudeAùive
) {

968 
»t
 +ğ
hs
->
h—ps
[0].
by‹sAÎoÿ‹d
;

971  
»t
;

972 
	}
}

978 
size_t


979 
	$dvmH—pSourûG‘Id—lFoÙ´št
()

981 
H—pSourû
 *
hs
 = 
gHs
;

983 
	`HS_BOILERPLATE
();

985  
hs
->
id—lSize
;

986 
	}
}

993 
	$£tSoáLim™
(
H—pSourû
 *
hs
, 
size_t
 
soáLim™
)

999 
m¥aû
 *
m¥
 = 
hs
->
h—ps
[0].msp;

1000 
size_t
 
cu¼’tH—pSize
 = 
	`m¥aû_foÙ´št
(
m¥
);

1001 ià(
soáLim™
 < 
cu¼’tH—pSize
) {

1004 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
cu¼’tH—pSize
);

1005 
hs
->
soáLim™
 = softLimit;

1010 
	`m¥aû_£t_max_®lowed_foÙ´št
(
m¥
, 
soáLim™
);

1011 
hs
->
soáLim™
 = 
INT_MAX
;

1013 
	}
}

1021 
	$£tId—lFoÙ´št
(
size_t
 
max
)

1023 
H—pSourû
 *
hs
 = 
gHs
;

1024 #ià
DEBUG_HEAP_SOURCE


1025 
H—pSourû
 
ŞdHs
 = *
hs
;

1026 
m¥aû
 *
m¥
 = 
hs
->
h—ps
[0].msp;

1027 
size_t
 
ŞdAÎowedFoÙ´št
 =

1028 
	`m¥aû_max_®lowed_foÙ´št
(
m¥
);

1031 
	`HS_BOILERPLATE
();

1033 ià(
max
 > 
hs
->
absŞu‹MaxSize
) {

1034 
	`LOGI_HEAP
("Clamparget GC heap from %zd.%03zdMBo %u.%03uMB\n",

1035 
	`FRACTIONAL_MB
(
max
),

1036 
	`FRACTIONAL_MB
(
hs
->
absŞu‹MaxSize
));

1037 
max
 = 
hs
->
absŞu‹MaxSize
;

1038 } ià(
max
 < 
hs
->
mšimumSize
) {

1039 
max
 = 
hs
->
mšimumSize
;

1045 
size_t
 
ov”h—d
 = 
	`g‘SoáFoÙ´št
(
çl£
);

1046 
size_t
 
aùiveMax
;

1047 ià(
ov”h—d
 < 
max
) {

1048 
aùiveMax
 = 
max
 - 
ov”h—d
;

1050 
aùiveMax
 = 0;

1053 
	`£tSoáLim™
(
hs
, 
aùiveMax
);

1054 
hs
->
id—lSize
 = 
max
;

1056 
	`HSTRACE
("IDEAL %zd->%zd (%d), soft %zd->%zd (%d),‡llowed %zd->%zd (%d), "

1058 
ŞdHs
.
id—lSize
, 
hs
->idealSize, hs->idealSize - oldHs.idealSize,

1059 
ŞdHs
.
soáLim™
, 
hs
->softLimit, hs->softLimit - oldHs.softLimit,

1060 
ŞdAÎowedFoÙ´št
, 
	`m¥aû_max_®lowed_foÙ´št
(
m¥
),

1061 
	`m¥aû_max_®lowed_foÙ´št
(
m¥
è- 
ŞdAÎowedFoÙ´št
,

1062 
hs
->
ex‹º®By‹sAÎoÿ‹d
);

1064 
	}
}

1070 
	$¢­Id—lFoÙ´št
()

1072 
H—pSourû
 *
hs
 = 
gHs
;

1074 
	`HS_BOILERPLATE
();

1076 
	`£tId—lFoÙ´št
(
	`g‘SoáFoÙ´št
(
Œue
));

1077 
	}
}

1083 
	$dvmG‘T¬g‘H—pUtiz©iÚ
()

1085 
H—pSourû
 *
hs
 = 
gHs
;

1087 
	`HS_BOILERPLATE
();

1089  ()
hs
->
rg‘Utiz©iÚ
 / ()
HEAP_UTILIZATION_MAX
;

1090 
	}
}

1096 
	$dvmS‘T¬g‘H—pUtiz©iÚ
(
ÃwT¬g‘
)

1098 
H—pSourû
 *
hs
 = 
gHs
;

1099 
size_t
 
ÃwUtiz©iÚ
;

1101 
	`HS_BOILERPLATE
();

1106 ià(
ÃwT¬g‘
 < 0.2) {

1107 
ÃwT¬g‘
 = 0.2;

1108 } ià(
ÃwT¬g‘
 > 0.8) {

1109 
ÃwT¬g‘
 = 0.8;

1112 
hs
->
rg‘Utiz©iÚ
 =

1113 (
size_t
)(
ÃwT¬g‘
 * ()
HEAP_UTILIZATION_MAX
);

1114 
	`LOGV
("Set heaparget utilizationo %zd/%d (%f)\n",

1115 
hs
->
rg‘Utiz©iÚ
, 
HEAP_UTILIZATION_MAX
, 
ÃwT¬g‘
);

1116 
	}
}

1123 
size_t


1124 
	$dvmMšimumH—pSize
(
size_t
 
size
, 
boŞ
 
£t
)

1126 
H—pSourû
 *
hs
 = 
gHs
;

1127 
size_t
 
ŞdMšimumSize
;

1133 
	`dvmLockH—p
();

1135 
	`HS_BOILERPLATE
();

1137 
ŞdMšimumSize
 = 
hs
->
mšimumSize
;

1139 ià(
£t
) {

1146 ià(
size
 > 
hs
->
absŞu‹MaxSize
) {

1147 
size
 = 
hs
->
absŞu‹MaxSize
;

1149 
hs
->
mšimumSize
 = 
size
;

1150 ià(
size
 > 
hs
->
id—lSize
) {

1154 
	`£tId—lFoÙ´št
(
hs
->
id—lSize
);

1161 
	`dvmUÆockH—p
();

1163  
ŞdMšimumSize
;

1164 
	}
}

1172 
size_t


1173 
	$g‘Utiz©iÚT¬g‘
(cÚ¡ 
H—pSourû
 *
hs
,

1174 
size_t
 
liveSize
, size_ˆ
rg‘Utiz©iÚ
)

1176 
size_t
 
rg‘Size
;

1181 
rg‘Size
 = (
liveSize
 / 
rg‘Utiz©iÚ
è* 
HEAP_UTILIZATION_MAX
;

1186 ià(
rg‘Size
 > 
liveSize
 + 
HEAP_IDEAL_FREE
) {

1187 
rg‘Size
 = 
liveSize
 + 
HEAP_IDEAL_FREE
;

1188 } ià(
rg‘Size
 < 
liveSize
 + 
HEAP_MIN_FREE
) {

1189 
rg‘Size
 = 
liveSize
 + 
HEAP_MIN_FREE
;

1191  
rg‘Size
;

1192 
	}
}

1199 
	$dvmH—pSourûGrowFÜUtiz©iÚ
()

1201 
H—pSourû
 *
hs
 = 
gHs
;

1202 
H—p
 *
h—p
;

1203 
size_t
 
rg‘H—pSize
;

1204 
size_t
 
cu¼’tH—pU£d
;

1205 
size_t
 
ŞdId—lSize
;

1206 
size_t
 
ÃwH—pMax
;

1207 
size_t
 
ov”h—d
;

1209 
	`HS_BOILERPLATE
();

1210 
h—p
 = 
	`hs2h—p
(
hs
);

1221 
cu¼’tH—pU£d
 = 
h—p
->
by‹sAÎoÿ‹d
;

1222 
	#LET_EXTERNAL_INFLUENCE_UTILIZATION
 1

	)

1223 #ià
LET_EXTERNAL_INFLUENCE_UTILIZATION


1234 
cu¼’tH—pU£d
 +ğ
hs
->
ex‹º®By‹sAÎoÿ‹d
;

1236 
rg‘H—pSize
 =

1237 
	`g‘Utiz©iÚT¬g‘
(
hs
, 
cu¼’tH—pU£d
, hs->
rg‘Utiz©iÚ
);

1238 #ià
LET_EXTERNAL_INFLUENCE_UTILIZATION


1239 
cu¼’tH—pU£d
 -ğ
hs
->
ex‹º®By‹sAÎoÿ‹d
;

1240 
rg‘H—pSize
 -ğ
hs
->
ex‹º®By‹sAÎoÿ‹d
;

1248 
ov”h—d
 = 
	`g‘SoáFoÙ´št
(
çl£
);

1249 
ŞdId—lSize
 = 
hs
->
id—lSize
;

1250 
	`£tId—lFoÙ´št
(
rg‘H—pSize
 + 
ov”h—d
);

1252 
ÃwH—pMax
 = 
	`m¥aû_max_®lowed_foÙ´št
(
h—p
->
m¥
);

1253 ià(
	`soáLim™ed
(
hs
)) {

1254 
	`LOGD_HEAP
("GC old usage %zd.%zd%%;‚ow "

1259 
	`FRACTIONAL_PCT
(
cu¼’tH—pU£d
, 
ŞdId—lSize
),

1260 
	`FRACTIONAL_MB
(
cu¼’tH—pU£d
),

1261 
	`FRACTIONAL_MB
(
hs
->
soáLim™
),

1262 
	`FRACTIONAL_MB
(
ov”h—d
),

1263 
	`FRACTIONAL_MB
(
hs
->
ex‹º®By‹sAÎoÿ‹d
),

1264 
	`FRACTIONAL_MB
(
ÃwH—pMax
));

1266 
	`LOGD_HEAP
("GC old usage %zd.%zd%%;‚ow "

1270 
	`FRACTIONAL_PCT
(
cu¼’tH—pU£d
, 
ŞdId—lSize
),

1271 
	`FRACTIONAL_MB
(
cu¼’tH—pU£d
),

1272 
	`FRACTIONAL_MB
(
ÃwH—pMax
),

1273 
	`FRACTIONAL_MB
(
ov”h—d
),

1274 
	`FRACTIONAL_MB
(
hs
->
ex‹º®By‹sAÎoÿ‹d
));

1276 
	}
}

1283 
	$»Ëa£PagesInRªge
(*
¡¬t
, *
’d
, *
nby‹s
)

1288 
¡¬t
 = (*)
	`ALIGN_UP_TO_PAGE_SIZE
(start);

1289 
’d
 = (*)((
size_t
ënd & ~(
PAGE_SIZE
 - 1));

1290 ià(
¡¬t
 < 
’d
) {

1291 
size_t
 
Ëngth
 = (*)
’d
 - (*)
¡¬t
;

1292 
	`madvi£
(
¡¬t
, 
Ëngth
, 
MADV_DONTNEED
);

1293 *(
size_t
 *)
nby‹s
 +ğ
Ëngth
;

1295 
	}
}

1301 
	$dvmH—pSourûTrim
(
size_t
 
by‹sTrimmed
[], size_ˆ
¬¿yL’
)

1303 
H—pSourû
 *
hs
 = 
gHs
;

1304 
size_t
 
ÇtiveBy‹s
, 
h—pBy‹s
;

1305 
size_t
 
i
;

1307 
	`HS_BOILERPLATE
();

1309 
	`as£¹
(
¬¿yL’
 >ğ
hs
->
numH—ps
);

1311 
h—pBy‹s
 = 0;

1312 
i
 = 0; i < 
hs
->
numH—ps
; i++) {

1313 
H—p
 *
h—p
 = &
hs
->
h—ps
[
i
];

1317 
	`m¥aû_Œim
(
h—p
->
m¥
, 0);

1321 
by‹sTrimmed
[
i
] = 0;

1322 
	`m¥aû_w®k_ä“_·ges
(
h—p
->
m¥
, 
»Ëa£PagesInRªge
,

1323 &
by‹sTrimmed
[
i
]);

1324 
h—pBy‹s
 +ğ
by‹sTrimmed
[
i
];

1329 
	`dlm®loc_Œim
(0);

1330 
ÇtiveBy‹s
 = 0;

1331 
	`dlm®loc_w®k_ä“_·ges
(
»Ëa£PagesInRªge
, &
ÇtiveBy‹s
);

1333 
	`LOGD_HEAP
("madvised %zd (GC) + %zd (native) = %zdotal bytes\n",

1334 
h—pBy‹s
, 
ÇtiveBy‹s
, heapBytes +‚ativeBytes);

1335 
	}
}

1342 
dvmH—pSourûW®k
((*
ÿÎback
)(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

1343 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
,

1344 *
¬g
),

1345 *
¬g
)

1347 
H—pSourû
 *
hs
 = 
gHs
;

1348 
size_t
 
i
;

1350 
	`HS_BOILERPLATE
();

1355 
i
 = 
hs
->
numH—ps
; i > 0; --i) {

1356 
	`m¥aû_w®k_h—p
(
hs
->
h—ps
[
i
-1].
m¥
, 
ÿÎback
, 
¬g
);

1358 
	}
}

1366 
size_t


1367 
	$dvmH—pSourûG‘NumH—ps
()

1369 
H—pSourû
 *
hs
 = 
gHs
;

1371 
	`HS_BOILERPLATE
();

1373  
hs
->
numH—ps
;

1374 
	}
}

1387 
boŞ


1388 
	$ex‹º®AÎocPossibË
(cÚ¡ 
H—pSourû
 *
hs
, 
size_t
 
n
)

1390 cÚ¡ 
H—p
 *
h—p
;

1391 
size_t
 
cu¼’tH—pSize
;

1401 
h—p
 = 
	`hs2h—p
(
hs
);

1402 
cu¼’tH—pSize
 = 
	`m¥aû_max_®lowed_foÙ´št
(
h—p
->
m¥
);

1403 ià(
cu¼’tH—pSize
 + 
hs
->
ex‹º®By‹sAÎoÿ‹d
 + 
n
 <=

1404 
h—p
->
absŞu‹MaxSize
)

1406  
Œue
;

1408 
	`HSTRACE
("externalAllocPossible(): "

1410 
cu¼’tH—pSize
, 
hs
->
ex‹º®By‹sAÎoÿ‹d
, 
n
,

1411 
h—p
->
absŞu‹MaxSize
,

1412 
h—p
->
absŞu‹MaxSize
 -

1413 (
cu¼’tH—pSize
 + 
hs
->
ex‹º®By‹sAÎoÿ‹d
));

1414  
çl£
;

1415 
	}
}

1417 
	#EXTERNAL_TARGET_UTILIZATION
 820

1418 

	)

1426 
boŞ


1427 
	$ex‹º®AÎoc
(
H—pSourû
 *
hs
, 
size_t
 
n
, 
boŞ
 
grow
)

1429 
H—p
 *
h—p
;

1430 
size_t
 
cu¼’tH—pSize
;

1431 
size_t
 
ÃwTÙ®
;

1432 
size_t
 
max
;

1433 
boŞ
 
g»w
;

1435 
	`as£¹
(
hs
->
ex‹º®Lim™
 >ğhs->
ex‹º®By‹sAÎoÿ‹d
);

1437 
	`HSTRACE
("ex‹º®AÎoc(%zd%s)\n", 
n
, 
grow
 ? ", grow" : "");

1438 
	`as£¹
(
	`ex‹º®AÎocPossibË
(
hs
, 
n
));

1443 ià(
hs
->
ex‹º®By‹sAÎoÿ‹d
 + 
n
 <ğhs->
ex‹º®Lim™
) {

1444 
hs
->
ex‹º®By‹sAÎoÿ‹d
 +ğ
n
;

1445 #ià
	`defšed
(
WITH_PROFILER
è&& 
PROFILE_EXTERNAL_ALLOCATIONS


1446 ià(
gDvm
.
®locProf
.
’abËd
) {

1447 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1448 
gDvm
.
®locProf
.
ex‹º®AÎocCouÁ
++;

1449 
gDvm
.
®locProf
.
ex‹º®AÎocSize
 +ğ
n
;

1450 ià(
£lf
 !ğ
NULL
) {

1451 
£lf
->
®locProf
.
ex‹º®AÎocCouÁ
++;

1452 
£lf
->
®locProf
.
ex‹º®AÎocSize
 +ğ
n
;

1456  
Œue
;

1458 ià(!
grow
) {

1459  
çl£
;

1463 
hs
->
ex‹º®By‹sAÎoÿ‹d
 +ğ
n
;

1464 
hs
->
ex‹º®Lim™
 = 
	`g‘Utiz©iÚT¬g‘
(hs,

1465 
hs
->
ex‹º®By‹sAÎoÿ‹d
, 
EXTERNAL_TARGET_UTILIZATION
);

1466 
	`HSTRACE
("EXTERNAL grow†im™Ø%zd\n", 
hs
->
ex‹º®Lim™
);

1467  
Œue
;

1468 
	}
}

1471 
	$gcFÜEx‹º®AÎoc
(
boŞ
 
cŞËùSoáReã»nûs
)

1473 #ifdeà
WITH_PROFILER


1474 ià(
gDvm
.
®locProf
.
’abËd
) {

1475 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1476 
gDvm
.
®locProf
.
gcCouÁ
++;

1477 ià(
£lf
 !ğ
NULL
) {

1478 
£lf
->
®locProf
.
gcCouÁ
++;

1482 
	`dvmCŞËùG¬bageIÁ”Çl
(
cŞËùSoáReã»nûs
);

1483 
	}
}

1492 
boŞ


1493 
	$dvmT¿ckEx‹º®AÎoÿtiÚ
(
size_t
 
n
)

1495 
H—pSourû
 *
hs
 = 
gHs
;

1496 
size_t
 
ov”h—d
;

1497 
boŞ
 
»t
 = 
çl£
;

1502 
	`dvmLockH—p
();

1504 
	`HS_BOILERPLATE
();

1505 
	`as£¹
(
hs
->
ex‹º®Lim™
 >ğhs->
ex‹º®By‹sAÎoÿ‹d
);

1507 ià(!
	`ex‹º®AÎocPossibË
(
hs
, 
n
)) {

1508 
	`LOGE_HEAP
("%zd-byteƒxternal‡llocation "

1509 "toØÏrgfÜhi ´oûss.\n", 
n
);

1510 
out
;

1515 
	`HSTRACE
("EXTERNAL‡lloc %zu (%zu < %zu)\n",

1516 
n
, 
hs
->
ex‹º®By‹sAÎoÿ‹d
, hs->
ex‹º®Lim™
);

1517 ià(
	`ex‹º®AÎoc
(
hs
, 
n
, 
çl£
)) {

1518 
»t
 = 
Œue
;

1519 
out
;

1526 
	`HSTRACE
("EXTERNAL‡Îoø%zd: GC 1\n", 
n
);

1527 
	`gcFÜEx‹º®AÎoc
(
çl£
);

1528 ià(
	`ex‹º®AÎoc
(
hs
, 
n
, 
çl£
)) {

1529 
»t
 = 
Œue
;

1530 
out
;

1536 
	`HSTRACE
("EXTERNAL‡Îoø%zd: f¿g\n", 
n
);

1537 
»t
 = 
	`ex‹º®AÎoc
(
hs
, 
n
, 
Œue
);

1538 
	`dvmH—pSizeChªged
();

1539 ià(
»t
) {

1540 
out
;

1546 
	`HSTRACE
("EXTERNAL‡Îoø%zd: GC 2\n", 
n
);

1547 
	`gcFÜEx‹º®AÎoc
(
Œue
);

1548 
»t
 = 
	`ex‹º®AÎoc
(
hs
, 
n
, 
Œue
);

1549 
	`dvmH—pSizeChªged
();

1550 ià(!
»t
) {

1551 
	`LOGE_HEAP
("Ouˆoàex‹º® memÜy oÀ¨%zu-by‹‡ÎoÿtiÚ.\n", 
n
);

1554 #ià
	`defšed
(
WITH_PROFILER
è&& 
PROFILE_EXTERNAL_ALLOCATIONS


1555 ià(
gDvm
.
®locProf
.
’abËd
) {

1556 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1557 
gDvm
.
®locProf
.
çedEx‹º®AÎocCouÁ
++;

1558 
gDvm
.
®locProf
.
çedEx‹º®AÎocSize
 +ğ
n
;

1559 ià(
£lf
 !ğ
NULL
) {

1560 
£lf
->
®locProf
.
çedEx‹º®AÎocCouÁ
++;

1561 
£lf
->
®locProf
.
çedEx‹º®AÎocSize
 +ğ
n
;

1566 
out
:

1567 
	`dvmUÆockH—p
();

1569  
»t
;

1570 
	}
}

1576 
	$dvmT¿ckEx‹º®F»e
(
size_t
 
n
)

1578 
H—pSourû
 *
hs
 = 
gHs
;

1579 
size_t
 
ÃwId—lSize
;

1580 
size_t
 
ÃwEx‹º®Lim™
;

1581 
size_t
 
ŞdEx‹º®By‹sAÎoÿ‹d
;

1583 
	`HSTRACE
("EXTERNAL free %zu (%zu < %zu)\n",

1584 
n
, 
hs
->
ex‹º®By‹sAÎoÿ‹d
, hs->
ex‹º®Lim™
);

1589 
	`dvmLockH—p
();

1591 
	`HS_BOILERPLATE
();

1592 
	`as£¹
(
hs
->
ex‹º®Lim™
 >ğhs->
ex‹º®By‹sAÎoÿ‹d
);

1594 
ŞdEx‹º®By‹sAÎoÿ‹d
 = 
hs
->
ex‹º®By‹sAÎoÿ‹d
;

1595 ià(
n
 <ğ
hs
->
ex‹º®By‹sAÎoÿ‹d
) {

1596 
hs
->
ex‹º®By‹sAÎoÿ‹d
 -ğ
n
;

1598 
n
 = 
hs
->
ex‹º®By‹sAÎoÿ‹d
;

1599 
hs
->
ex‹º®By‹sAÎoÿ‹d
 = 0;

1602 #ià
	`defšed
(
WITH_PROFILER
è&& 
PROFILE_EXTERNAL_ALLOCATIONS


1603 ià(
gDvm
.
®locProf
.
’abËd
) {

1604 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1605 
gDvm
.
®locProf
.
ex‹º®F»eCouÁ
++;

1606 
gDvm
.
®locProf
.
ex‹º®F»eSize
 +ğ
n
;

1607 ià(
£lf
 !ğ
NULL
) {

1608 
£lf
->
®locProf
.
ex‹º®F»eCouÁ
++;

1609 
£lf
->
®locProf
.
ex‹º®F»eSize
 +ğ
n
;

1616 
ÃwEx‹º®Lim™
 = 
	`g‘Utiz©iÚT¬g‘
(
hs
,

1617 
hs
->
ex‹º®By‹sAÎoÿ‹d
, 
EXTERNAL_TARGET_UTILIZATION
);

1618 ià(
ÃwEx‹º®Lim™
 < 
ŞdEx‹º®By‹sAÎoÿ‹d
) {

1625 
	`HSTRACE
("EXTERNAL free…reserved %zuƒxtra free bytes\n",

1626 
ŞdEx‹º®By‹sAÎoÿ‹d
 - 
ÃwEx‹º®Lim™
);

1627 
ÃwEx‹º®Lim™
 = 
ŞdEx‹º®By‹sAÎoÿ‹d
;

1629 ià(
ÃwEx‹º®Lim™
 < 
hs
->
ex‹º®Lim™
) {

1630 
hs
->
ex‹º®Lim™
 = 
ÃwEx‹º®Lim™
;

1633 
	`dvmUÆockH—p
();

1634 
	}
}

1640 
size_t


1641 
	$dvmG‘Ex‹º®By‹sAÎoÿ‹d
()

1643 cÚ¡ 
H—pSourû
 *
hs
 = 
gHs
;

1644 
size_t
 
»t
;

1650 
	`dvmLockH—p
();

1651 
	`HS_BOILERPLATE
();

1652 
»t
 = 
hs
->
ex‹º®By‹sAÎoÿ‹d
;

1653 
	`dvmUÆockH—p
();

1655  
»t
;

1656 
	}
}

	@alloc/HeapSource.h

16 #iâdeà
_DALVIK_HEAP_SOURCE


17 
	#_DALVIK_HEAP_SOURCE


	)

19 
	~"®loc/H—pIÁ”Çl.h
"

23 
	#HEAP_SOURCE_CHUNK_OVERHEAD
 (1 *  (
size_t
))

	)

24 
	#HEAP_SOURCE_WORST_CHUNK_OVERHEAD
 (32 *  (
size_t
))

	)

28 
	#HEAP_SOURCE_MAX_HEAP_COUNT
 3

	)

34 
GcH—p
 *
dvmH—pSourûS¹up
(
size_t
 
¡¬tSize
, size_ˆ
absŞu‹MaxSize
);

42 
boŞ
 
dvmH—pSourûS¹upAá”ZygÙe
();

50 
boŞ
 
dvmH—pSourûS¹upBefÜeFÜk
();

55 
dvmH—pSourûShutdown
(
GcH—p
 *
gcH—p
);

62 
ssize_t
 
dvmH—pSourûG‘ObjeùB™m­s
(
H—pB™m­
 
outB™m­s
[],

63 
size_t
 
maxB™m­s
);

73 
boŞ
 
dvmH—pSourûR•ÏûObjeùB™m­s
(
H—pB™m­
 
objeùB™m­s
[],

74 
size_t
 
nB™m­s
);

80 
	eH—pSourûV®ueS³c
 {

81 
	mHS_FOOTPRINT
,

82 
	mHS_ALLOWED_FOOTPRINT
,

83 
	mHS_BYTES_ALLOCATED
,

84 
	mHS_OBJECTS_ALLOCATED
,

85 
	mHS_EXTERNAL_BYTES_ALLOCATED
,

86 
	mHS_EXTERNAL_LIMIT


88 
size_t
 
dvmH—pSourûG‘V®ue
(
H—pSourûV®ueS³c
 
¥ec
,

89 
size_t
 
³rH—pSts
[], size_ˆ
¬¿yL’
);

94 *
dvmH—pSourûAÎoc
(
size_t
 
n
);

100 *
dvmH—pSourûAÎocAndGrow
(
size_t
 
n
);

105 
dvmH—pSourûF»e
(*
±r
);

113 
dvmH—pSourûF»eLi¡
(
size_t
 
numPŒs
, **
±rs
);

118 
boŞ
 
dvmH—pSourûCÚšs
(cÚ¡ *
±r
);

123 
	eH—pSourûPŒFÏg
 {

124 
	mHS_CONTAINS
,

125 
	mHS_ALLOCATED_IN_ZYGOTE


127 
boŞ
 
dvmH—pSourûG‘PŒFÏg
(cÚ¡ *
±r
, 
H—pSourûPŒFÏg
 
æag
);

133 
size_t
 
dvmH—pSourûChunkSize
(cÚ¡ *
±r
);

139 
size_t
 
dvmH—pSourûFoÙ´št
();

145 
size_t
 
dvmH—pSourûG‘Id—lFoÙ´št
();

152 
dvmH—pSourûGrowFÜUtiz©iÚ
();

158 
dvmH—pSourûTrim
(
size_t
 
by‹sTrimmed
[], size_ˆ
¬¿yL’
);

164 
dvmH—pSourûW®k
((*
ÿÎback
)(cÚ¡ *
chunk±r
, 
size_t
 
chunkËn
,

165 cÚ¡ *
u£½Œ
, 
size_t
 
u£¾’
,

166 *
¬g
),

167 *
¬g
);

171 
size_t
 
	`dvmH—pSourûG‘NumH—ps
();

	@alloc/HeapTable.c

17 
	~"D®vik.h
"

18 
	~"®loc/H—pTabË.h
"

19 
	~"®loc/H—pIÁ”Çl.h
"

21 
	~<lim™s.h
>

23 *
	$h—pTabËR—Îoc
(*
ŞdPŒ
, 
size_t
 
ÃwSize
)

28 ià(
ŞdPŒ
 !ğ
NULL
) {

29  
	`»®loc
(
ŞdPŒ
, 
ÃwSize
);

31  
	`m®loc
(
ÃwSize
);

33 
	}
}

35 
	$dvmH—pH—pTabËF»e
(*
±r
)

37 
	`ä“
(
±r
);

38 
	}
}

40 
	#h—pRefTabËIsFuÎ
(
»fs
) \

42 cÚ¡ 
H—pRefTabË
 *
HRTIF_»fs
 = (
»fs
); \

43 
	`dvmIsReã»nûTabËFuÎ
(
»fs
); \

44 })

	)

46 
boŞ
 
	$dvmH—pIn™H—pRefTabË
(
H—pRefTabË
 *
»fs
, 
size_t
 
ÃËms
)

48 
	`mem£t
(
»fs
, 0, (*refs));

49  
	`dvmIn™Reã»nûTabË
(
»fs
, 
ÃËms
, 
INT_MAX
);

50 
	}
}

54 
	$dvmH—pF»eH—pRefTabË
(
H—pRefTabË
 *
»fs
)

56 
	`dvmCË¬Reã»nûTabË
(
»fs
);

57 
	}
}

63 
	#kL¬geH—pRefTabËNEËms
 1024

	)

64 
boŞ
 
	$dvmH—pAddRefToL¬geTabË
(
L¬geH—pRefTabË
 **
bËP
, 
Objeù
 *
»f
)

66 
L¬geH—pRefTabË
 *
bË
;

68 
	`as£¹
(
bËP
 !ğ
NULL
);

69 
	`as£¹
(
»f
 !ğ
NULL
);

74 ià(*
bËP
 !ğ
NULL
) {

75 
bË
 = *
bËP
;

76 
L¬geH—pRefTabË
 *
´evTabË
;

80 
´evTabË
 = 
NULL
;

81 
bË
 !ğ
NULL
 && 
	`h—pRefTabËIsFuÎ
(&bË->
»fs
)) {

82 
´evTabË
 = 
bË
;

83 
bË
 =abË->
Ãxt
;

85 ià(
bË
 !ğ
NULL
) {

86 ià(
´evTabË
 !ğ
NULL
) {

89 
´evTabË
->
Ãxt
 = 
bË
->next;

90 
bË
->
Ãxt
 = *
bËP
;

91 *
bËP
 = 
bË
;

95 
š£¹
;

104 
bË
 = (
L¬geH—pRefTabË
 *)
	`h—pTabËR—Îoc
(
NULL
,

105 (
L¬geH—pRefTabË
));

106 ià(
bË
 =ğ
NULL
) {

107 
	`LOGE_HEAP
("Can't‡llocate‡‚ew†arge„efable\n");

108  
çl£
;

110 ià(!
	`dvmH—pIn™H—pRefTabË
(&
bË
->
»fs
, 
kL¬geH—pRefTabËNEËms
)) {

111 
	`LOGE_HEAP
("Can't initialize‡‚ew†arge„efable\n");

112 
	`dvmH—pH—pTabËF»e
(
bË
);

113  
çl£
;

118 
bË
->
Ãxt
 = *
bËP
;

119 *
bËP
 = 
bË
;

121 
š£¹
:

124 
	`as£¹
(
bË
 =ğ*
bËP
);

125 
	`as£¹
(
bË
 !ğ
NULL
);

126 
	`as£¹
(!
	`h—pRefTabËIsFuÎ
(&
bË
->
»fs
));

127 *
bË
->
»fs
.
ÃxtEÁry
++ = 
»f
;

129  
Œue
;

130 
	}
}

132 
boŞ
 
	$dvmH—pAddTabËToL¬geTabË
(
L¬geH—pRefTabË
 **
bËP
, 
H—pRefTabË
 *
»fs
)

134 
L¬geH—pRefTabË
 *
bË
;

138 
bË
 = (
L¬geH—pRefTabË
 *)
	`h—pTabËR—Îoc
(
NULL
,

139 (
L¬geH—pRefTabË
));

140 ià(
bË
 =ğ
NULL
) {

141 
	`LOGE_HEAP
("Can't‡llocate‡‚ew†arge„efable\n");

142  
çl£
;

144 
bË
->
»fs
 = *refs;

148 
bË
->
Ãxt
 = *
bËP
;

149 *
bËP
 = 
bË
;

151  
Œue
;

152 
	}
}

156 
	$dvmH—pF»eL¬geTabË
(
L¬geH—pRefTabË
 *
bË
)

158 
bË
 !ğ
NULL
) {

159 
L¬geH—pRefTabË
 *
Ãxt
 = 
bË
->next;

160 
	`dvmH—pF»eH—pRefTabË
(&
bË
->
»fs
);

161 
	`dvmH—pH—pTabËF»e
(
bË
);

162 
bË
 = 
Ãxt
;

164 
	}
}

166 
Objeù
 *
	$dvmH—pG‘NextObjeùFromL¬geTabË
(
L¬geH—pRefTabË
 **
pTabË
)

168 
L¬geH—pRefTabË
 *
bË
;

169 
Objeù
 *
obj
;

171 
	`as£¹
(
pTabË
 !ğ
NULL
);

173 
obj
 = 
NULL
;

174 
bË
 = *
pTabË
;

175 ià(
bË
 !ğ
NULL
) {

176 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

177 
H—pRefTabË
 *
»fs
 = &
bË
->refs;

181 
	`as£¹
(
	`dvmReã»nûTabËEÁr›s
(
»fs
) != 0);

185 
obj
 = *--
»fs
->
ÃxtEÁry
;

190 ià(
»fs
->
ÃxtEÁry
 =ğ»fs->
bË
) {

191 *
pTabË
 = 
bË
->
Ãxt
;

192 
	`dvmCË¬Reã»nûTabË
(
»fs
);

193 
	`dvmH—pH—pTabËF»e
(
bË
);

197  
obj
;

198 
	}
}

200 
	$dvmH—pM¬kL¬geTabËRefs
(
L¬geH—pRefTabË
 *
bË
, 
boŞ
 
¡rLowB™s
)

202 
bË
 !ğ
NULL
) {

203 
Objeù
 **
»f
, **
Ï¡Ref
;

205 
»f
 = 
bË
->
»fs
.table;

206 
Ï¡Ref
 = 
bË
->
»fs
.
ÃxtEÁry
;

207 ià(
¡rLowB™s
) {

214 
»f
 < 
Ï¡Ref
) {

215 
	`dvmM¬kObjeùNÚNuÎ
((
Objeù
 *)((
ušŒ_t
)*
»f
++ & ~3));

218 
»f
 < 
Ï¡Ref
) {

219 
	`dvmM¬kObjeùNÚNuÎ
(*
»f
++);

222 
bË
 =abË->
Ãxt
;

224 
	}
}

	@alloc/HeapTable.h

16 #iâdeà
_DALVIK_ALLOC_HEAP_TABLE


17 
	#_DALVIK_ALLOC_HEAP_TABLE


	)

19 
	~"Reã»nûTabË.h
"

21 
Reã»nûTabË
 
	tH—pRefTabË
;

22 
L¬geH—pRefTabË
 
	tL¬geH—pRefTabË
;

23 
H—pSourû
 
	tH—pSourû
;

25 
	sL¬geH—pRefTabË
 {

26 
L¬geH—pRefTabË
 *
	mÃxt
;

27 
H—pRefTabË
 
	m»fs
;

30 
boŞ
 
dvmH—pIn™H—pRefTabË
(
H—pRefTabË
 *
»fs
, 
size_t
 
ÃËms
);

31 
dvmH—pF»eH—pRefTabË
(
H—pRefTabË
 *
»fs
);

32 
dvmH—pF»eL¬geTabË
(
L¬geH—pRefTabË
 *
bË
);

33 
dvmH—pH—pTabËF»e
(*
±r
);

34 
boŞ
 
dvmH—pAddRefToL¬geTabË
(
L¬geH—pRefTabË
 **
bËP
, 
Objeù
 *
»f
);

35 
dvmH—pM¬kL¬geTabËRefs
(
L¬geH—pRefTabË
 *
bË
, 
boŞ
 
¡rLowB™s
);

36 
boŞ
 
dvmH—pAddTabËToL¬geTabË
(
L¬geH—pRefTabË
 **
bËP
,

37 
H—pRefTabË
 *
»fs
);

38 
Objeù
 *
dvmH—pG‘NextObjeùFromL¬geTabË
(
L¬geH—pRefTabË
 **
pTabË
);

40 
	#dvmH—pAddToH—pRefTabË
(
»fs
, 
±r
) \

41 
	`dvmAddToReã»nûTabË
((
»fs
), (
±r
))

	)

43 
	#dvmH—pNumH—pRefTabËEÁr›s
(
»fs
) \

45 cÚ¡ 
H—pRefTabË
 *
NHRTE_»fs
 = (
»fs
); \

46 
	`dvmReã»nûTabËEÁr›s
(
»fs
); \

47 })

	)

49 
	#dvmH—pRemoveFromH—pRefTabË
(
»fs
, 
±r
) \

50 
	`dvmRemoveFromReã»nûTabË
((
»fs
), (»fs)->
bË
, (
±r
))

	)

	@alloc/HeapWorker.c

23 
	~"D®vik.h
"

24 
	~"H—pIÁ”Çl.h
"

26 
	~<sys/time.h
>

27 
	~<¡dlib.h
>

28 
	~<±h»ad.h
>

29 
	~<sigÇl.h
>

30 
	~<”ºo.h
>

32 * 
h—pWÜk”Th»adS¹
(* 
¬g
);

39 
	$dvmIn™ŸlizeH—pWÜk”S‹
()

41 
	`as£¹
(!
gDvm
.
h—pWÜk”In™Ÿlized
);

43 
	`dvmIn™Mu‹x
(&
gDvm
.
h—pWÜk”Lock
);

44 
	`±h»ad_cÚd_š™
(&
gDvm
.
h—pWÜk”CÚd
, 
NULL
);

45 
	`±h»ad_cÚd_š™
(&
gDvm
.
h—pWÜk”IdËCÚd
, 
NULL
);

47 
gDvm
.
h—pWÜk”In™Ÿlized
 = 
Œue
;

48 
	}
}

55 
boŞ
 
	$dvmH—pWÜk”S¹up
()

57 
	`as£¹
(!
gDvm
.
h®tH—pWÜk”
);

58 
	`as£¹
(!
gDvm
.
h—pWÜk”R—dy
);

59 
	`as£¹
(
gDvm
.
h—pWÜk”HªdË
 == 0);

60 
	`as£¹
(
gDvm
.
h—pWÜk”In™Ÿlized
);

63 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

67 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvm
.
h—pWÜk”HªdË
,

68 "H—pWÜk”", 
h—pWÜk”Th»adS¹
, 
NULL
))

70 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

71  
çl£
;

78 !
gDvm
.
h—pWÜk”R—dy
) {

79 
cc
 = 
	`±h»ad_cÚd_wa™
(&
gDvm
.
h—pWÜk”CÚd
, &gDvm.
h—pWÜk”Lock
);

80 
	`as£¹
(
cc
 == 0);

83 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

84  
Œue
;

85 
	}
}

90 
	$dvmH—pWÜk”Shutdown
()

92 * 
th»adR‘uº
;

95 ià(
gDvm
.
h—pWÜk”HªdË
 != 0) {

96 
gDvm
.
h®tH—pWÜk”
 = 
Œue
;

97 
	`dvmSigÇlH—pWÜk”
(
Œue
);

105 ià(
	`±h»ad_još
(
gDvm
.
h—pWÜk”HªdË
, &
th»adR‘uº
) != 0)

106 
	`LOGW
("HeapWorkerhread join failed\n");

108 
	`LOGD
("HeapWorkerhread has shut down\n");

110 
gDvm
.
h—pWÜk”R—dy
 = 
çl£
;

112 
	}
}

122 
	$dvmAs£¹H—pWÜk”Th»adRuÂšg
()

124 ià(
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tObjeù
 !ğ
NULL
) {

125 cÚ¡ 
u8
 
HEAP_WORKER_WATCHDOG_TIMEOUT
 = 10*1000*1000LL;

127 
u8
 
h—pWÜk”IÁ”pS¹Time
 = 
gDvm
.
gcH—p
->heapWorkerInterpStartTime;

128 
u8
 
now
 = 
	`dvmG‘R–©iveTimeU£c
();

129 
u8
 
d–
 = 
now
 - 
h—pWÜk”IÁ”pS¹Time
;

131 
u8
 
h—pWÜk”IÁ”pCpuS¹Time
 =

132 
gDvm
.
gcH—p
->
h—pWÜk”IÁ”pCpuS¹Time
;

133 
u8
 
nowCpu
 = 
	`dvmG‘Oth”Th»adCpuTimeU£c
(
gDvm
.
h—pWÜk”HªdË
);

134 
u8
 
d–Cpu
 = 
nowCpu
 - 
h—pWÜk”IÁ”pCpuS¹Time
;

136 ià(
d–
 > 
HEAP_WORKER_WATCHDOG_TIMEOUT
 &&

137 (
gDvm
.
debugg”Aùive
 || gDvm.
ÇtiveDebugg”Aùive
))

147 
	`LOGI
("Debugger is‡ttached -- suppressing HeapWorker watchdog\n");

148 
h—pWÜk”IÁ”pS¹Time
 = 
now
;

149 } ià(
d–
 > 
HEAP_WORKER_WATCHDOG_TIMEOUT
) {

150 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

151 &
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
->
´ÙÙy³
);

152 
	`LOGE
("HeapWorker is wedged: %lldms spent inside %s.%s%s\n",

153 
d–
 / 1000,

154 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tObjeù
->
şazz
->
desütÜ
,

155 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
->
Çme
, 
desc
);

156 
	`ä“
(
desc
);

157 
	`dvmDumpAÎTh»ads
(
Œue
);

160 
	`dvmAbÜt
();

161 } ià(
d–
 > 
HEAP_WORKER_WATCHDOG_TIMEOUT
 / 2) {

162 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

163 &
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
->
´ÙÙy³
);

164 
	`LOGW
("HeapWorker may be wedged: %lldms spent inside %s.%s%s\n",

165 
d–
 / 1000,

166 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tObjeù
->
şazz
->
desütÜ
,

167 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
->
Çme
, 
desc
);

168 
	`ä“
(
desc
);

171 
	}
}

173 
	$ÿÎM‘hod
(
Th»ad
 *
£lf
, 
Objeù
 *
obj
, 
M‘hod
 *
m‘hod
)

175 
JV®ue
 
unu£d
;

181 
gDvm
.
gcH—p
->
h—pWÜk”IÁ”pS¹Time
 = 
	`dvmG‘R–©iveTimeU£c
();

182 
gDvm
.
gcH—p
->
h—pWÜk”IÁ”pCpuS¹Time
 = 
	`dvmG‘Th»adCpuTimeU£c
();

183 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
 = 
m‘hod
;

184 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tObjeù
 = 
obj
;

192 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

193 ià(
çl£
) {

197 
tmpTag
[16];

198 
	`¥rštf
(
tmpTag
, "HW%d", 
£lf
->
sy¡emTid
);

199 
	`LOG
(
LOG_DEBUG
, 
tmpTag
, "C®È%s\n", 
m‘hod
->
şazz
->
desütÜ
);

200 
	`dvmC®lM‘hod
(
£lf
, 
m‘hod
, 
obj
, &
unu£d
);

201 
	`LOG
(
LOG_DEBUG
, 
tmpTag
, " done\n");

203 
	`dvmC®lM‘hod
(
£lf
, 
m‘hod
, 
obj
, &
unu£d
);

205 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

207 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tObjeù
 = 
NULL
;

208 
gDvm
.
gcH—p
->
h—pWÜk”Cu¼’tM‘hod
 = 
NULL
;

209 
gDvm
.
gcH—p
->
h—pWÜk”IÁ”pS¹Time
 = 0LL;

214 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

215 #ià
DVM_SHOW_EXCEPTION
 >= 1

216 
	`LOGI
("Uncaughtƒxceptionhrown by finalizer (will be discarded):\n");

217 
	`dvmLogExû±iÚSckT¿û
();

219 
	`dvmCË¬Exû±iÚ
(
£lf
);

221 
	}
}

228 
	$doH—pWÜk
(
Th»ad
 *
£lf
)

230 
Objeù
 *
obj
;

231 
H—pWÜk”O³¿tiÚ
 
İ
;

232 
numFš®iz”sC®Ëd
, 
numReã»nûsEnqueued
;

233 #ià
FANCY_REFERENCE_SUBCLASS


234 
numReã»nûsCË¬ed
 = 0;

237 
	`as£¹
(
gDvm
.
voffJavaLªgObjeù_fš®ize
 >= 0);

238 #ià
FANCY_REFERENCE_SUBCLASS


239 
	`as£¹
(
gDvm
.
voffJavaLªgRefReã»nû_ş—r
 >= 0);

240 
	`as£¹
(
gDvm
.
voffJavaLªgRefReã»nû_’queue
 >= 0);

242 
	`as£¹
(
gDvm
.
m‘hJavaLªgRefReã»nû_’queueIÁ”Çl
 !ğ
NULL
);

245 
numFš®iz”sC®Ëd
 = 0;

246 
numReã»nûsEnqueued
 = 0;

247 (
obj
 = 
	`dvmG‘NextH—pWÜk”Objeù
(&
İ
)è!ğ
NULL
) {

248 
M‘hod
 *
m‘hod
 = 
NULL
;

253 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

257 ià(
İ
 =ğ
WORKER_FINALIZE
) {

258 
numFš®iz”sC®Ëd
++;

259 
m‘hod
 = 
obj
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgObjeù_fš®ize
];

260 
	`as£¹
(
	`dvmCom·»NameDesütÜAndM‘hod
("finalize", "()V",

261 
m‘hod
) == 0);

262 
	`as£¹
(
m‘hod
->
şazz
 !ğ
gDvm
.
şassJavaLªgObjeù
);

263 
	`ÿÎM‘hod
(
£lf
, 
obj
, 
m‘hod
);

265 #ià
FANCY_REFERENCE_SUBCLASS


270 ià(
İ
 & 
WORKER_CLEAR
) {

271 
numReã»nûsCË¬ed
++;

272 
m‘hod
 = 
obj
->
şazz
->
vbË
[

273 
gDvm
.
voffJavaLªgRefReã»nû_ş—r
];

274 
	`as£¹
(
	`dvmCom·»NameDesütÜAndM‘hod
("clear", "()V",

275 
m‘hod
) == 0);

276 
	`as£¹
(
m‘hod
->
şazz
 !ğ
gDvm
.
şassJavaLªgRefReã»nû
);

277 
	`ÿÎM‘hod
(
£lf
, 
obj
, 
m‘hod
);

279 ià(
İ
 & 
WORKER_ENQUEUE
) {

280 
numReã»nûsEnqueued
++;

281 
m‘hod
 = 
obj
->
şazz
->
vbË
[

282 
gDvm
.
voffJavaLªgRefReã»nû_’queue
];

283 
	`as£¹
(
	`dvmCom·»NameDesütÜAndM‘hod
("enqueue", "()Z",

284 
m‘hod
) == 0);

288 
	`ÿÎM‘hod
(
£lf
, 
obj
, 
m‘hod
);

291 
	`as£¹
((
İ
 & 
WORKER_CLEAR
) == 0);

292 ià(
İ
 & 
WORKER_ENQUEUE
) {

293 
numReã»nûsEnqueued
++;

294 
	`ÿÎM‘hod
(
£lf
, 
obj
,

295 
gDvm
.
m‘hJavaLªgRefReã»nû_’queueIÁ”Çl
);

302 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

304 
	`LOGV
("C®Ëd %d fš®iz”s\n", 
numFš®iz”sC®Ëd
);

305 
	`LOGV
("Enqueued %d„eã»nûs\n", 
numReã»nûsEnqueued
);

306 #ià
FANCY_REFERENCE_SUBCLASS


307 
	`LOGV
("CË¬ed %d ov”ridd’„eã»nûs\n", 
numReã»nûsCË¬ed
);

309 
	}
}

315 * 
	$h—pWÜk”Th»adS¹
(* 
¬g
)

317 
Th»ad
 *
£lf
 = 
	`dvmTh»adS–f
();

318 
cc
;

320 
	`UNUSED_PARAMETER
(
¬g
);

322 
	`LOGV
("H—pWÜk”h»ad s¹ed (th»adid=%d)\n", 
£lf
->
th»adId
);

325 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

326 
gDvm
.
h—pWÜk”R—dy
 = 
Œue
;

327 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvm
.
h—pWÜk”CÚd
);

328 
	`as£¹
(
cc
 == 0);

329 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

331 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

332 !
gDvm
.
h®tH—pWÜk”
) {

333 
time¥ec
 
Œimtime
;

334 
boŞ
 
timedwa™
 = 
çl£
;

337 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

340 
cc
 = 
	`±h»ad_cÚd_brßdÿ¡
(&
gDvm
.
h—pWÜk”IdËCÚd
);

341 
	`as£¹
(
cc
 == 0);

344 
Œimtime
 = 
gDvm
.
gcH—p
->
h—pWÜk”NextTrim
;

345 ià(
Œimtime
.
tv_£c
 !ğ0 &&rimtime.
tv_n£c
 != 0) {

346 
time¥ec
 
now
;

348 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


349 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

351 
timev®
 
tvnow
;

352 
	`g‘timeofday
(&
tvnow
, 
NULL
);

353 
now
.
tv_£c
 = 
tvnow
.tv_sec;

354 
now
.
tv_n£c
 = 
tvnow
.
tv_u£c
 * 1000;

357 ià(
Œimtime
.
tv_£c
 < 
now
.tv_sec ||

358 (
Œimtime
.
tv_£c
 =ğ
now
.tv_sec &&

359 
Œimtime
.
tv_n£c
 <ğ
now
.tv_nsec))

361 
size_t
 
madvi£dSizes
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

369 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

370 
	`dvmLockH—p
();

371 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

373 
	`mem£t
(
madvi£dSizes
, 0, (madvisedSizes));

374 
	`dvmH—pSourûTrim
(
madvi£dSizes
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

375 
	`dvmLogMadvi£Sts
(
madvi£dSizes
, 
HEAP_SOURCE_MAX_HEAP_COUNT
);

377 
	`dvmUÆockH—p
();

379 
Œimtime
.
tv_£c
 = 0;

380 
Œimtime
.
tv_n£c
 = 0;

381 
gDvm
.
gcH—p
->
h—pWÜk”NextTrim
 = 
Œimtime
;

383 
timedwa™
 = 
Œue
;

388 ià(
timedwa™
) {

389 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


390 
cc
 = 
	`±h»ad_cÚd_timedwa™_mÚÙÚic
(&
gDvm
.
h—pWÜk”CÚd
,

391 &
gDvm
.
h—pWÜk”Lock
, &
Œimtime
);

393 
cc
 = 
	`±h»ad_cÚd_timedwa™
(&
gDvm
.
h—pWÜk”CÚd
,

394 &
gDvm
.
h—pWÜk”Lock
, &
Œimtime
);

396 
	`as£¹
(
cc
 =ğ0 || cø=ğ
ETIMEDOUT
 || cø=ğ
EINTR
);

398 
cc
 = 
	`±h»ad_cÚd_wa™
(&
gDvm
.
h—pWÜk”CÚd
, &gDvm.
h—pWÜk”Lock
);

399 
	`as£¹
(
cc
 == 0);

404 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

405 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

406 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

407 
	`LOGV
("HeapWorker is‡wake\n");

411 
	`doH—pWÜk
(
£lf
);

413 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

415 
	`LOGD
("HeapWorkerhread shutting down\n");

416  
NULL
;

417 
	}
}

422 
	$dvmSigÇlH—pWÜk”
(
boŞ
 
shouldLock
)

424 
cc
;

426 ià(
shouldLock
) {

427 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

430 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvm
.
h—pWÜk”CÚd
);

431 
	`as£¹
(
cc
 == 0);

433 ià(
shouldLock
) {

434 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

436 
	}
}

441 
	$dvmWa™FÜH—pWÜk”IdË
()

443 
cc
;

445 
	`as£¹
(
gDvm
.
h—pWÜk”R—dy
);

447 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

449 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

456 
	`dvmSigÇlH—pWÜk”
(
çl£
);

457 
cc
 = 
	`±h»ad_cÚd_wa™
(&
gDvm
.
h—pWÜk”IdËCÚd
, &gDvm.
h—pWÜk”Lock
);

458 
	`as£¹
(
cc
 == 0);

460 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

462 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

463 
	}
}

470 
	$dvmRunFš®iz©iÚSync
()

472 ià(
gDvm
.
zygÙe
) {

473 
	`as£¹
(!
gDvm
.
h—pWÜk”R—dy
);

478 
	`dvmLockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

479 
	`doH—pWÜk
(
	`dvmTh»adS–f
());

480 
	`dvmUÆockMu‹x
(&
gDvm
.
h—pWÜk”Lock
);

485 
	`dvmWa™FÜH—pWÜk”IdË
();

487 
	}
}

496 
	$dvmScheduËH—pSourûTrim
(
size_t
 
timeoutSec
)

498 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

499 
time¥ec
 
timeout
;

501 ià(
timeoutSec
 == 0) {

502 
timeout
.
tv_£c
 = 0;

503 
timeout
.
tv_n£c
 = 0;

509 
timev®
 
now
;

511 #ifdeà
HAVE_TIMEDWAIT_MONOTONIC


512 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
timeout
);

513 
timeout
.
tv_£c
 +ğ
timeoutSec
;

515 
	`g‘timeofday
(&
now
, 
NULL
);

516 
timeout
.
tv_£c
 = 
now
.tv_£ø+ 
timeoutSec
;

517 
timeout
.
tv_n£c
 = 
now
.
tv_u£c
 * 1000;

519 
	`dvmSigÇlH—pWÜk”
(
çl£
);

521 
gcH—p
->
h—pWÜk”NextTrim
 = 
timeout
;

522 
	}
}

	@alloc/HeapWorker.h

19 #iâdeà
_DALVIK_ALLOC_HEAP_WORKER


20 
	#_DALVIK_ALLOC_HEAP_WORKER


	)

27 
dvmIn™ŸlizeH—pWÜk”S‹
();

32 
boŞ
 
dvmH—pWÜk”S¹up
();

33 
dvmH—pWÜk”Shutdown
();

40 
dvmSigÇlH—pWÜk”
(
boŞ
 
shouldLock
);

45 
dvmWa™FÜH—pWÜk”IdË
();

54 
dvmRunFš®iz©iÚSync
();

63 
dvmScheduËH—pSourûTrim
(
size_t
 
timeoutSec
);

72 
dvmAs£¹H—pWÜk”Th»adRuÂšg
();

77 
	eH—pWÜk”O³¿tiÚ
 {

78 
	mWORKER_FINALIZE
 = 0,

83 
	mWORKER_CLEAR
 = (1<<0),

84 
	mWORKER_ENQUEUE
 = (1<<1),

85 } 
	tH—pWÜk”O³¿tiÚ
;

95 
Objeù
 *
dvmG‘NextH—pWÜk”Objeù
(
H—pWÜk”O³¿tiÚ
 *
İ
);

	@alloc/MarkSweep.c

17 
	~"D®vik.h
"

18 
	~"®loc/şz.h
"

19 
	~"®loc/H—pB™m­.h
"

20 
	~"®loc/H—pIÁ”Çl.h
"

21 
	~"®loc/H—pSourû.h
"

22 
	~"®loc/M¬kSw“p.h
"

23 
	~<lim™s.h
>

24 
	~<sys/mmª.h
>

25 
	~<cuts/ashmem.h
>

26 
	~<”ºo.h
>

28 
	#GC_DEBUG_PARANOID
 2

	)

29 
	#GC_DEBUG_BASIC
 1

	)

30 
	#GC_DEBUG_OFF
 0

	)

31 
	#GC_DEBUG
(
l
è(
GC_DEBUG_LEVEL
 >ğÖ))

	)

34 
	#GC_DEBUG_LEVEL
 
GC_DEBUG_PARANOID


	)

36 
	#GC_DEBUG_LEVEL
 
GC_DEBUG_OFF


	)

39 
	#VERBOSE_GC
 0

	)

41 
	#GC_LOG_TAG
 
LOG_TAG
 "-gc"

	)

43 #ià
LOG_NDEBUG


44 
	#LOGV_GC
(...è(()0)

	)

45 
	#LOGD_GC
(...è(()0)

	)

47 
	#LOGV_GC
(...è
	`LOG
(
LOG_VERBOSE
, 
GC_LOG_TAG
, 
__VA_ARGS__
)

	)

48 
	#LOGD_GC
(...è
	`LOG
(
LOG_DEBUG
, 
GC_LOG_TAG
, 
__VA_ARGS__
)

	)

51 #ià
VERBOSE_GC


52 
	#LOGVV_GC
(...è
	`LOGV_GC
(
__VA_ARGS__
)

	)

54 
	#LOGVV_GC
(...è(()0)

	)

57 
	#LOGI_GC
(...è
	`LOG
(
LOG_INFO
, 
GC_LOG_TAG
, 
__VA_ARGS__
)

	)

58 
	#LOGW_GC
(...è
	`LOG
(
LOG_WARN
, 
GC_LOG_TAG
, 
__VA_ARGS__
)

	)

59 
	#LOGE_GC
(...è
	`LOG
(
LOG_ERROR
, 
GC_LOG_TAG
, 
__VA_ARGS__
)

	)

61 
	#LOG_SCAN
(...è
	`LOGV_GC
("SCAN: " 
__VA_ARGS__
)

	)

62 
	#LOG_MARK
(...è
	`LOGV_GC
("MARK: " 
__VA_ARGS__
)

	)

63 
	#LOG_SWEEP
(...è
	`LOGV_GC
("SWEEP: " 
__VA_ARGS__
)

	)

64 
	#LOG_REF
(...è
	`LOGV_GC
("REF: " 
__VA_ARGS__
)

	)

66 
	#LOGV_SCAN
(...è
	`LOGVV_GC
("SCAN: " 
__VA_ARGS__
)

	)

67 
	#LOGV_MARK
(...è
	`LOGVV_GC
("MARK: " 
__VA_ARGS__
)

	)

68 
	#LOGV_SWEEP
(...è
	`LOGVV_GC
("SWEEP: " 
__VA_ARGS__
)

	)

69 
	#LOGV_REF
(...è
	`LOGVV_GC
("REF: " 
__VA_ARGS__
)

	)

71 #ià
WITH_OBJECT_HEADERS


72 
u2
 
	ggG’”©iÚ
 = 0;

73 cÚ¡ 
Objeù
 *
	ggM¬kP¬’t
 = 
NULL
;

76 #iâdeà
PAGE_SIZE


77 
	#PAGE_SIZE
 4096

	)

79 
	#ALIGN_UP_TO_PAGE_SIZE
(
p
) \

80 (((
size_t
)(
p
è+ (
PAGE_SIZE
 - 1)è& ~(PAGE_SIZE - 1))

	)

85 
šlše
 
	$isM¬ked
(cÚ¡ 
DvmH—pChunk
 *
hc
, cÚ¡ 
GcM¬kCÚ‹xt
 *
ùx
)

86 
	`__©Œibu‹__
((
®ways_šlše
));

87 
šlše
 
	$isM¬ked
(cÚ¡ 
DvmH—pChunk
 *
hc
, cÚ¡ 
GcM¬kCÚ‹xt
 *
ùx
)

89  
	`dvmH—pB™m­IsObjeùB™S‘InLi¡
(
ùx
->
b™m­s
, ctx->
numB™m­s
, 
hc
);

90 
	}
}

92 
boŞ


93 
	$ü—‹M¬kSck
(
GcM¬kSck
 *
¡ack
)

95 cÚ¡ 
Objeù
 **
lim™
;

96 
size_t
 
size
;

97 
fd
, 
”r
;

104 
size
 = 
	`dvmH—pSourûG‘Id—lFoÙ´št
(è* (
Objeù
*) /

105 ((
Objeù
è+ 
HEAP_SOURCE_CHUNK_OVERHEAD
);

106 
size
 = 
	`ALIGN_UP_TO_PAGE_SIZE
(size);

107 
fd
 = 
	`ashmem_ü—‹_»giÚ
("d®vik-h—p-m¬k¡ack", 
size
);

108 ià(
fd
 < 0) {

109 
	`LOGE_GC
("Could‚ot create %d-byte‡shmem mark stack: %s\n",

110 
size
, 
	`¡»¼Ü
(
”ºo
));

111  
çl£
;

113 
lim™
 = (cÚ¡ 
Objeù
 **)
	`mm­
(
NULL
, 
size
, 
PROT_READ
 | 
PROT_WRITE
,

114 
MAP_PRIVATE
, 
fd
, 0);

115 
”r
 = 
”ºo
;

116 
	`şo£
(
fd
);

117 ià(
lim™
 =ğ
MAP_FAILED
) {

118 
	`LOGE_GC
("Could‚ot mmap %d-byte‡shmem mark stack: %s\n",

119 
size
, 
	`¡»¼Ü
(
”r
));

120  
çl£
;

123 
	`mem£t
(
¡ack
, 0, (*stack));

124 
¡ack
->
lim™
 =†imit;

125 
¡ack
->
ba£
 = (cÚ¡ 
Objeù
 **)((
ušŒ_t
)
lim™
 + 
size
);

126 
¡ack
->
tİ
 = sck->
ba£
;

128  
Œue
;

129 
	}
}

132 
	$de¡royM¬kSck
(
GcM¬kSck
 *
¡ack
)

134 
	`munm­
((*)
¡ack
->
lim™
,

135 (
ušŒ_t
)
¡ack
->
ba£
 - (ušŒ_t)¡ack->
lim™
);

136 
	`mem£t
(
¡ack
, 0, (*stack));

137 
	}
}

139 
	#MARK_STACK_PUSH
(
¡ack
, 
obj
) \

141 *--(
¡ack
).
tİ
 = (
obj
); \

142 } 
çl£
)

	)

144 
boŞ


145 
	$dvmH—pBegšM¬kS‹p
()

147 
GcM¬kCÚ‹xt
 *
mc
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

148 
H—pB™m­
 
objeùB™m­s
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

149 
size_t
 
numB™m­s
;

151 ià(!
	`ü—‹M¬kSck
(&
mc
->
¡ack
)) {

152  
çl£
;

155 
numB™m­s
 = 
	`dvmH—pSourûG‘ObjeùB™m­s
(
objeùB™m­s
,

156 
HEAP_SOURCE_MAX_HEAP_COUNT
);

157 ià(
numB™m­s
 <= 0) {

158  
çl£
;

164 ià(!
	`dvmH—pB™m­In™Li¡FromTem¶©es
(
mc
->
b™m­s
, 
objeùB™m­s
,

165 
numB™m­s
, "mark"))

167  
çl£
;

170 
mc
->
numB™m­s
 =‚umBitmaps;

171 
mc
->
fšg”
 = 
NULL
;

173 #ià
WITH_OBJECT_HEADERS


174 
gG’”©iÚ
++;

177  
Œue
;

178 
	}
}

180 
	$£tAndR‘uºM¬kB™
(
GcM¬kCÚ‹xt
 *
ùx
, cÚ¡ 
DvmH—pChunk
 *
hc
)

181 
	`__©Œibu‹__
((
®ways_šlše
));

183 
	$£tAndR‘uºM¬kB™
(
GcM¬kCÚ‹xt
 *
ùx
, cÚ¡ 
DvmH—pChunk
 *
hc
)

185  
	`dvmH—pB™m­S‘AndR‘uºObjeùB™InLi¡
(
ùx
->
b™m­s
,

186 
ùx
->
numB™m­s
, 
hc
);

187 
	}
}

189 
	$_m¬kObjeùNÚNuÎCommÚ
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
,

190 
boŞ
 
checkFšg”
, boŞ 
fÜûSck
)

191 
	`__©Œibu‹__
((
®ways_šlše
));

193 
	$_m¬kObjeùNÚNuÎCommÚ
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
,

194 
boŞ
 
checkFšg”
, boŞ 
fÜûSck
)

196 
DvmH—pChunk
 *
hc
;

198 
	`as£¹
(
obj
 !ğ
NULL
);

200 #ià
	`GC_DEBUG
(
GC_DEBUG_PARANOID
)

202 
	`as£¹
(
obj
 !ğ(
Objeù
 *)
gDvm
.
uÆškedJavaLªgCÏss
);

203 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

206 
hc
 = 
	`±r2chunk
(
obj
);

207 ià(!
	`£tAndR‘uºM¬kB™
(
ùx
, 
hc
)) {

210 ià(
fÜûSck
 || (
checkFšg”
 && (*)
hc
 < 
ùx
->
fšg”
)) {

213 
	`MARK_STACK_PUSH
(
ùx
->
¡ack
, 
obj
);

216 #ià
WITH_OBJECT_HEADERS


217 ià(
hc
->
sÿnG’”©iÚ
 !ğhc->
m¬kG’”©iÚ
) {

218 
	`LOGE
("m¬kObjeù(0x%08x): wa¢'ˆsÿÂed†a¡ime\n", (
ušt
)
obj
);

219 
	`dvmAbÜt
();

221 ià(
hc
->
m¬kG’”©iÚ
 =ğ
gG’”©iÚ
) {

222 
	`LOGE
("markObject(0x%08x):‡lready markedhis generation\n",

223 (
ušt
)
obj
);

224 
	`dvmAbÜt
();

226 
hc
->
ŞdM¬kG’”©iÚ
 = hc->
m¬kG’”©iÚ
;

227 
hc
->
m¬kG’”©iÚ
 = 
gG’”©iÚ
;

228 
hc
->
m¬kFšg”Old
 = hc->
m¬kFšg”
;

229 
hc
->
m¬kFšg”
 = 
ùx
->
fšg”
;

230 ià(
gM¬kP¬’t
 !ğ
NULL
) {

231 
hc
->
·»ÁOld
 = hc->
·»Á
;

232 
hc
->
·»Á
 = 
gM¬kP¬’t
;

234 
hc
->
·»Á
 = (cÚ¡ 
Objeù
 *)((
ušŒ_t
)hc->parent | 1);

236 
hc
->
m¬kCouÁ
++;

238 #ià
WITH_HPROF


239 ià(
gDvm
.
gcH—p
->
h´ofCÚ‹xt
 !ğ
NULL
) {

240 
	`h´ofM¬kRoÙObjeù
(
gDvm
.
gcH—p
->
h´ofCÚ‹xt
, 
obj
, 0);

243 #ià
DVM_TRACK_HEAP_MARKING


244 
gDvm
.
gcH—p
->
m¬kCouÁ
++;

245 
gDvm
.
gcH—p
->
m¬kSize
 +ğ
	`dvmH—pSourûChunkSize
((*)
hc
) +

246 
HEAP_SOURCE_CHUNK_OVERHEAD
;

252 
	`LOGV_MARK
("0x%08x %s\n", (
ušt
)
obj
,

253 
obj
->
şazz
 =ğ
NULL
 ? "<nuÎ cÏss>" : obj->şazz->
Çme
);

255 
	}
}

264 
	$m¬kObjeùNÚNuÎ
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

266 
	`_m¬kObjeùNÚNuÎCommÚ
(
obj
, 
ùx
, 
Œue
, 
çl£
);

267 
	}
}

269 
	#m¬kObjeù
(
obj
, 
ùx
) \

271 
Objeù
 *
MO_obj_
 = (Objeù *)(
obj
); \

272 ià(
MO_obj_
 !ğ
NULL
) { \

273 
	`m¬kObjeùNÚNuÎ
(
MO_obj_
, (
ùx
)); \

275 } 
çl£
)

	)

287 
	$dvmM¬kObjeùNÚNuÎ
(cÚ¡ 
Objeù
 *
obj
)

289 
	`_m¬kObjeùNÚNuÎCommÚ
(
obj
, &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
, 
çl£
, false);

290 
	}
}

318 
	$dvmH—pM¬kRoÙS‘
()

320 
H—pRefTabË
 *
»fs
;

321 
GcH—p
 *
gcH—p
;

322 
Objeù
 **
İ
;

324 
gcH—p
 = 
gDvm
.gcHeap;

326 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_STICKY_CLASS
, 0);

328 
	`LOG_SCAN
("root class†oader\n");

329 
	`dvmGcSÿnRoÙCÏssLßd”
();

330 
	`LOG_SCAN
("primitive classes\n");

331 
	`dvmGcSÿnPrim™iveCÏs£s
();

336 
	`HPROF_CLEAR_GC_SCAN_STATE
();

338 
	`LOG_SCAN
("roothread groups\n");

339 
	`dvmGcSÿnRoÙTh»adGroups
();

341 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_INTERNED_STRING
, 0);

343 
	`LOG_SCAN
("interned strings\n");

344 
	`dvmGcSÿnIÁ”ÃdSŒšgs
();

346 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_JNI_GLOBAL
, 0);

348 
	`LOG_SCAN
("JNI global„efs\n");

349 
	`dvmGcM¬kJniGlob®Refs
();

351 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_REFERENCE_CLEANUP
, 0);

353 
	`LOG_SCAN
("pending„eference operations\n");

354 
	`dvmH—pM¬kL¬geTabËRefs
(
gcH—p
->
»ã»nûO³¿tiÚs
, 
Œue
);

356 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_FINALIZING
, 0);

358 
	`LOG_SCAN
("pending finalizations\n");

359 
	`dvmH—pM¬kL¬geTabËRefs
(
gcH—p
->
³ndšgFš®iz©iÚRefs
, 
çl£
);

361 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_DEBUGGER
, 0);

363 
	`LOG_SCAN
("debugger„efs\n");

364 
	`dvmGcM¬kDebugg”Refs
();

366 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_VM_INTERNAL
, 0);

370 
	`LOG_SCAN
("ALLOC_NO_GC objects\n");

371 
»fs
 = &
gcH—p
->
nÚCŞËùabËRefs
;

372 
İ
 = 
»fs
->
bË
;

373 (
ušŒ_t
)
İ
 < (ušŒ_t)
»fs
->
ÃxtEÁry
) {

374 
	`dvmM¬kObjeùNÚNuÎ
(*(
İ
++));

379 
	`LOG_SCAN
("special objects\n");

380 
	`dvmM¬kObjeùNÚNuÎ
(
gDvm
.
outOfMemÜyObj
);

381 
	`dvmM¬kObjeùNÚNuÎ
(
gDvm
.
š‹º®E¼ÜObj
);

382 
	`dvmM¬kObjeùNÚNuÎ
(
gDvm
.
noCÏssDefFoundE¼ÜObj
);

385 
	`HPROF_CLEAR_GC_SCAN_STATE
();

386 
	}
}

393 
	#dvmM¬kObjeùNÚNuÎ
 
__dÚt_u£_dvmM¬kObjeùNÚNuÎ__


	)

398 
	$m¬kIÁ”çûs
(cÚ¡ 
CÏssObjeù
 *
şazz
, 
GcM¬kCÚ‹xt
 *
ùx
)

400 
CÏssObjeù
 **
š‹rçûs
;

401 
š‹rçûCouÁ
;

402 
i
;

406 
š‹rçûs
 = 
şazz
->interfaces;

407 
š‹rçûCouÁ
 = 
şazz
->interfaceCount;

408 
i
 = 0; i < 
š‹rçûCouÁ
; i++) {

409 
	`m¬kObjeùNÚNuÎ
((
Objeù
 *)*
š‹rçûs
, 
ùx
);

410 
š‹rçûs
++;

412 
	}
}

416 
	$sÿnSticF›lds
(cÚ¡ 
CÏssObjeù
 *
şazz
, 
GcM¬kCÚ‹xt
 *
ùx
)

418 
SticF›ld
 *
f
;

419 
i
;

422 
f
 = 
şazz
->
sf›lds
;

423 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

424 
c
 = 
f
->
f›ld
.
sigÇtu»
[0];

425 ià(
c
 == '[' || c == 'L') {

428 
	`m¬kObjeù
((
Objeù
 *)
f
->
v®ue
.
l
, 
ùx
);

430 
f
++;

432 
	}
}

436 
	$sÿnIn¡ªûF›lds
(cÚ¡ 
D©aObjeù
 *
obj
, 
CÏssObjeù
 *
şazz
,

437 
GcM¬kCÚ‹xt
 *
ùx
)

439 ià(
çl£
 && 
şazz
->
»fOff£ts
 !ğ
CLASS_WALK_SUPER
) {

440 
»fOff£ts
 = 
şazz
->refOffsets;

441 
»fOff£ts
 != 0) {

442 cÚ¡ 
rshiá
 = 
	`CLZ
(
»fOff£ts
);

443 
»fOff£ts
 &ğ~(
CLASS_HIGH_BIT
 >> 
rshiá
);

444 
	`m¬kObjeù
(
	`dvmG‘F›ldObjeù
((
Objeù
*)
obj
,

445 
	`CLASS_OFFSET_FROM_CLZ
(
rshiá
)), 
ùx
);

448 
şazz
 !ğ
NULL
) {

449 
In¡F›ld
 *
f
;

450 
i
;

455 
f
 = 
şazz
->
if›lds
;

456 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; i++) {

464 
	`m¬kObjeù
(
	`dvmG‘F›ldObjeù
((
Objeù
*)
obj
, 
f
->
by‹Off£t
), 
ùx
);

465 
f
++;

470 
şazz
 = cÏzz->
su³r
;

473 
	}
}

477 
	$sÿnObjeùA¼ay
(cÚ¡ 
A¼ayObjeù
 *
¬¿y
, 
GcM¬kCÚ‹xt
 *
ùx
)

479 
Objeù
 **
cÚ‹Ás
;

480 
u4
 
Ëngth
;

481 
u4
 
i
;

483 
cÚ‹Ás
 = (
Objeù
 **)
¬¿y
->contents;

484 
Ëngth
 = 
¬¿y
->length;

486 
i
 = 0; i < 
Ëngth
; i++) {

487 
	`m¬kObjeù
(*
cÚ‹Ás
, 
ùx
);

488 
cÚ‹Ás
++;

490 
	}
}

494 
	$sÿnCÏssObjeù
(cÚ¡ 
CÏssObjeù
 *
şazz
, 
GcM¬kCÚ‹xt
 *
ùx
)

496 
	`LOGV_SCAN
("---------> %s\n", 
şazz
->
Çme
);

498 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

506 
	`m¬kObjeùNÚNuÎ
((
Objeù
 *)
şazz
->
–em’tCÏss
, 
ùx
);

514 
	`m¬kObjeù
((
Objeù
 *)
şazz
->
su³r
, 
ùx
);

515 
	`m¬kObjeù
(
şazz
->
şassLßd”
, 
ùx
);

517 
	`sÿnSticF›lds
(
şazz
, 
ùx
);

518 
	`m¬kIÁ”çûs
(
şazz
, 
ùx
);

519 
	}
}

525 
	$sÿnObjeù
(cÚ¡ 
Objeù
 *
obj
, 
GcM¬kCÚ‹xt
 *
ùx
)

527 
CÏssObjeù
 *
şazz
;

529 
	`as£¹
(
	`dvmIsV®idObjeù
(
obj
));

530 
	`LOGV_SCAN
("0x%08x %s\n", (
ušt
)
obj
, obj->
şazz
->
Çme
);

532 #ià
WITH_HPROF


533 ià(
gDvm
.
gcH—p
->
h´ofCÚ‹xt
 !ğ
NULL
) {

534 
	`h´ofDumpH—pObjeù
(
gDvm
.
gcH—p
->
h´ofCÚ‹xt
, 
obj
);

538 #ià
WITH_OBJECT_HEADERS


539 ià(
	`±r2chunk
(
obj
)->
sÿnG’”©iÚ
 =ğ
gG’”©iÚ
) {

540 
	`LOGE
("object 0x%08x was‡lready scannedhis generation\n",

541 (
ušŒ_t
)
obj
);

542 
	`dvmAbÜt
();

544 
	`±r2chunk
(
obj
)->
ŞdSÿnG’”©iÚ
 =…Œ2chunk(obj)->
sÿnG’”©iÚ
;

545 
	`±r2chunk
(
obj
)->
sÿnG’”©iÚ
 = 
gG’”©iÚ
;

546 
	`±r2chunk
(
obj
)->
sÿnCouÁ
++;

551 
şazz
 = 
obj
->clazz;

552 ià(
şazz
 =ğ
NULL
) {

559 } ià(
şazz
 =ğ
gDvm
.
uÆškedJavaLªgCÏss
) {

570 #ià
WITH_OBJECT_HEADERS


571 
gM¬kP¬’t
 = 
obj
;

574 
	`as£¹
(
	`dvmIsV®idObjeù
((
Objeù
 *)
şazz
));

575 
	`m¬kObjeùNÚNuÎ
((
Objeù
 *)
şazz
, 
ùx
);

579 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

582 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOBJECTARRAY
)) {

585 
	`sÿnObjeùA¼ay
((
A¼ayObjeù
 *)
obj
, 
ùx
);

591 
	`sÿnIn¡ªûF›lds
((
D©aObjeù
 *)
obj
, 
şazz
, 
ùx
);

593 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISREFERENCE
)) {

594 
GcH—p
 *
gcH—p
 = 
gDvm
.gcHeap;

595 
Objeù
 *
»ã»Á
;

606 
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
obj
,

607 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
);

608 ià(
»ã»Á
 !ğ
NULL
 &&

609 !
	`isM¬ked
(
	`±r2chunk
(
»ã»Á
), &
gcH—p
->
m¬kCÚ‹xt
))

611 
u4
 
»fFÏgs
;

613 ià(
gcH—p
->
m¬kAÎReã»Ás
) {

614 
	`LOG_REF
("Hard-marking‡„eference\n");

621 
	`m¬kObjeùNÚNuÎ
(
»ã»Á
, 
ùx
);

622 
sk_»ã»nû
;

627 ià(
	`dvmG‘F›ldObjeù
(
obj
,

628 
gDvm
.
offJavaLªgRefReã»nû_vmD©a
) ==

629 
SCHEDULED_REFERENCE_MAGIC
)

631 
	`LOG_REF
("Skipping scheduled„eference\n");

641 
	`m¬kObjeùNÚNuÎ
(
»ã»Á
, 
ùx
);

642 
sk_»ã»nû
;

648 
»fFÏgs
 = 
	`GET_CLASS_FLAG_GROUP
(
şazz
,

649 
CLASS_ISREFERENCE
 |

650 
CLASS_ISWEAKREFERENCE
 |

651 
CLASS_ISPHANTOMREFERENCE
);

658 
	#ADD_REF_TO_LIST
(
li¡
, 
»f
) \

660 
Objeù
 *
ARTL_»f_
 = ( Objeù *)(
»f
); \

661 
	`dvmS‘F›ldObjeù
(
ARTL_»f_
, \

662 
gDvm
.
offJavaLªgRefReã»nû_vmD©a
, 
li¡
); \

663 
li¡
 = 
ARTL_»f_
; \

664 } 
çl£
)

	)

671 ià(
»fFÏgs
 =ğ
CLASS_ISREFERENCE
) {

676 ià(
gcH—p
->
soáReã»nûCŞËùiÚS‹
 ==

677 
SR_COLLECT_NONE
)

679 
¤_cŞËù_nÚe
:

680 
	`m¬kObjeùNÚNuÎ
(
»ã»Á
, 
ùx
);

681 } ià(
gcH—p
->
soáReã»nûCŞËùiÚS‹
 ==

682 
SR_COLLECT_ALL
)

684 
¤_cŞËù_®l
:

685 
	`ADD_REF_TO_LIST
(
gcH—p
->
soáReã»nûs
, 
obj
);

690 ià(
gcH—p
->
soáReã»nûCŞÜ
++ & 1) {

691 
¤_cŞËù_nÚe
;

693 
¤_cŞËù_®l
;

699 
»fFÏgs
 &ğ~
CLASS_ISREFERENCE
;

700 ià(
»fFÏgs
 =ğ
CLASS_ISWEAKREFERENCE
) {

701 
	`ADD_REF_TO_LIST
(
gcH—p
->
w—kReã»nûs
, 
obj
);

702 } ià(
»fFÏgs
 =ğ
CLASS_ISPHANTOMREFERENCE
) {

703 
	`ADD_REF_TO_LIST
(
gcH—p
->
phªtomReã»nûs
, 
obj
);

705 
	`as£¹
(!"Unknown„eferenceype");

708 #undeà
ADD_REF_TO_LIST


712 
sk_»ã»nû
:

719 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

720 
	`sÿnCÏssObjeù
((
CÏssObjeù
 *)
obj
, 
ùx
);

724 #ià
WITH_OBJECT_HEADERS


725 
gM¬kP¬’t
 = 
NULL
;

727 
	}
}

730 
	$´oûssM¬kSck
(
GcM¬kCÚ‹xt
 *
ùx
)

732 cÚ¡ 
Objeù
 **cÚ¡ 
ba£
 = 
ùx
->
¡ack
.base;

738 
ùx
->
fšg”
 = (*)
ULONG_MAX
;

739 
ùx
->
¡ack
.
tİ
 !ğ
ba£
) {

740 
	`sÿnObjeù
(*
ùx
->
¡ack
.
tİ
++, ctx);

742 
	}
}

744 #iâdeà
NDEBUG


745 
ušŒ_t
 
	ggLa¡Fšg”
 = 0;

748 
boŞ


749 
	$sÿnB™m­C®lback
(
size_t
 
numPŒs
, **
±rs
, cÚ¡ *
fšg”
, *
¬g
)

751 
GcM¬kCÚ‹xt
 *
ùx
 = (GcM¬kCÚ‹xˆ*)
¬g
;

752 
size_t
 
i
;

754 #iâdeà
NDEBUG


755 
	`as£¹
((
ušŒ_t
)
fšg”
 >ğ
gLa¡Fšg”
);

756 
gLa¡Fšg”
 = (
ušŒ_t
)
fšg”
;

759 
ùx
->
fšg”
 = finger;

760 
i
 = 0; i < 
numPŒs
; i++) {

764 
	`sÿnObjeù
(
	`chunk2±r
(*
±rs
++), 
ùx
);

767  
Œue
;

768 
	}
}

774 
	$dvmH—pSÿnM¬kedObjeùs
()

776 
GcM¬kCÚ‹xt
 *
ùx
 = &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
;

778 
	`as£¹
(
ùx
->
fšg”
 =ğ
NULL
);

783 #iâdeà
NDEBUG


784 
gLa¡Fšg”
 = 0;

786 
	`dvmH—pB™m­W®kLi¡
(
ùx
->
b™m­s
, ctx->
numB™m­s
,

787 
sÿnB™m­C®lback
, 
ùx
);

792 
	`´oûssM¬kSck
(
ùx
);

794 
	`LOG_SCAN
("done with marked objects\n");

795 
	}
}

799 
boŞ
 
	$ş—rReã»nû
(
Objeù
 *
»ã»nû
)

812 
	`dvmS‘F›ldObjeù
(
»ã»nû
,

813 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
, 
NULL
);

815 #ià
FANCY_REFERENCE_SUBCLASS


819 ià(
»ã»nû
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgRefReã»nû_ş—r
]->clazz !=

820 
gDvm
.
şassJavaLªgRefReã»nû
)

826  
Œue
;

830  
çl£
;

831 
	}
}

835 
boŞ
 
	$’queueReã»nû
(
Objeù
 *
»ã»nû
)

837 #ià
FANCY_REFERENCE_SUBCLASS


841 ià(
»ã»nû
->
şazz
->
vbË
[
gDvm
.
voffJavaLªgRefReã»nû_’queue
]->clazz

842 =ğ
gDvm
.
şassJavaLªgRefReã»nû
)

845 
Objeù
 *
queue
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
,

846 
gDvm
.
offJavaLªgRefReã»nû_queue
);

847 
Objeù
 *
queueNext
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
,

848 
gDvm
.
offJavaLªgRefReã»nû_queueNext
);

849 ià(
queue
 =ğ
NULL
 || 
queueNext
 != NULL) {

854  
çl£
;

861  
Œue
;

862 
	}
}

867 
	$dvmH—pHªdËReã»nûs
(
Objeù
 *
»fLi¡H—d
, 
RefTy³
 
»fTy³
)

869 
Objeù
 *
»ã»nû
;

870 
GcM¬kCÚ‹xt
 *
m¬kCÚ‹xt
 = &
gDvm
.
gcH—p
->markContext;

871 cÚ¡ 
offVmD©a
 = 
gDvm
.
offJavaLªgRefReã»nû_vmD©a
;

872 cÚ¡ 
offReã»Á
 = 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
;

873 
boŞ
 
wÜkRequœed
 = 
çl£
;

875 
size_t
 
numCË¬ed
 = 0;

876 
size_t
 
numEnqueued
 = 0;

877 
»ã»nû
 = 
»fLi¡H—d
;

878 
»ã»nû
 !ğ
NULL
) {

879 
Objeù
 *
Ãxt
;

880 
Objeù
 *
»ã»Á
;

884 
Ãxt
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
, 
offVmD©a
);

885 
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
, 
offReã»Á
);

891 ià(
»ã»Á
 !ğ
NULL
 && !
	`isM¬ked
(
	`±r2chunk
Ôeã»Á), 
m¬kCÚ‹xt
)) {

892 
boŞ
 
schedCË¬
, 
schedEnqueue
;

897 
»fTy³
) {

898 
REF_SOFT
:

899 
REF_WEAK
:

900 
schedCË¬
 = 
	`ş—rReã»nû
(
»ã»nû
);

901 
schedEnqueue
 = 
	`’queueReã»nû
(
»ã»nû
);

903 
REF_PHANTOM
:

915 
schedCË¬
 = 
çl£
;

921 
schedEnqueue
 = 
	`’queueReã»nû
(
»ã»nû
);

924 
	`as£¹
(!"Bad„eferenceype");

925 
schedCË¬
 = 
çl£
;

926 
schedEnqueue
 = 
çl£
;

929 
numCË¬ed
 +ğ
schedCË¬
 ? 1 : 0;

930 
numEnqueued
 +ğ
schedEnqueue
 ? 1 : 0;

932 ià(
schedCË¬
 || 
schedEnqueue
) {

933 
ušŒ_t
 
wÜkB™s
;

944 
	`as£¹
(((
šŒ_t
)
»ã»nû
 & 3) == 0);

945 
	`as£¹
(((
WORKER_CLEAR
 | 
WORKER_ENQUEUE
) & ~3) == 0);

946 
wÜkB™s
 = (
schedCË¬
 ? 
WORKER_CLEAR
 : 0) |

947 (
schedEnqueue
 ? 
WORKER_ENQUEUE
 : 0);

948 ià(!
	`dvmH—pAddRefToL¬geTabË
(

949 &
gDvm
.
gcH—p
->
»ã»nûO³¿tiÚs
,

950 (
Objeù
 *)((
ušŒ_t
)
»ã»nû
 | 
wÜkB™s
)))

952 
	`LOGE_HEAP
("dvmMalloc():‚o„oom for‡ny more "

954 
	`dvmAbÜt
();

956 
wÜkRequœed
 = 
Œue
;

959 ià(
»fTy³
 !ğ
REF_PHANTOM
) {

962 
	`dvmS‘F›ldObjeù
(
»ã»nû
, 
offVmD©a
,

963 
SCHEDULED_REFERENCE_MAGIC
);

968 
»ã»nû
 = 
Ãxt
;

970 
	#»fTy³2¡r
(
r
) \

971 ((
r
è=ğ
REF_SOFT
 ? "soft" : ( \

972 (
r
è=ğ
REF_WEAK
 ? "weak" : ( \

973 (
r
è=ğ
REF_PHANTOM
 ? "phªtom" : "UNKNOWN" )))

	)

974 
	`LOGD_HEAP
("dvmH—pHªdËReã»nûs(): cË¬ed %zd,ƒnqueued %zd % »ã»nûs\n", 
numCË¬ed
, 
numEnqueued
, 
	`»fTy³2¡r
(
»fTy³
));

980 ià(
»fTy³
 =ğ
REF_PHANTOM
) {

981 
boŞ
 
sÿnRequœed
 = 
çl£
;

983 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_REFERENCE_CLEANUP
, 0);

984 
»ã»nû
 = 
»fLi¡H—d
;

985 
»ã»nû
 !ğ
NULL
) {

986 
Objeù
 *
Ãxt
;

987 
Objeù
 *
»ã»Á
;

991 
Ãxt
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
, 
offVmD©a
);

992 
»ã»Á
 = 
	`dvmG‘F›ldObjeù
(
»ã»nû
, 
offReã»Á
);

994 ià(
»ã»Á
 !ğ
NULL
 && !
	`isM¬ked
(
	`±r2chunk
Ôeã»Á), 
m¬kCÚ‹xt
)) {

995 
	`m¬kObjeùNÚNuÎ
(
»ã»Á
, 
m¬kCÚ‹xt
);

996 
sÿnRequœed
 = 
Œue
;

1000 
	`dvmS‘F›ldObjeù
(
»ã»nû
, 
offVmD©a
,

1001 
SCHEDULED_REFERENCE_MAGIC
);

1004 
»ã»nû
 = 
Ãxt
;

1006 
	`HPROF_CLEAR_GC_SCAN_STATE
();

1008 ià(
sÿnRequœed
) {

1009 
	`´oûssM¬kSck
(
m¬kCÚ‹xt
);

1013 ià(
wÜkRequœed
) {

1014 
	`dvmSigÇlH—pWÜk”
(
çl£
);

1016 
	}
}

1022 
	$dvmH—pScheduËFš®iz©iÚs
()

1024 
H—pRefTabË
 
ÃwP’dšgRefs
;

1025 
L¬geH—pRefTabË
 *
fšRefs
 = 
gDvm
.
gcH—p
->
fš®izabËRefs
;

1026 
Objeù
 **
»f
;

1027 
Objeù
 **
Ï¡Ref
;

1028 
size_t
 
tÙ®P’dCouÁ
;

1029 
GcM¬kCÚ‹xt
 *
m¬kCÚ‹xt
 = &
gDvm
.
gcH—p
->markContext;

1039 ià(!
	`dvmH—pIn™H—pRefTabË
(&
ÃwP’dšgRefs
, 128)) {

1044 
	`LOGE_GC
("dvmHeapScheduleFinalizations():‚o„oom for "

1046 
	`dvmAbÜt
();

1052 
tÙ®P’dCouÁ
 = 0;

1053 
fšRefs
 !ğ
NULL
) {

1054 
Objeù
 **
g­Ref
;

1055 
size_t
 
ÃwP’dCouÁ
 = 0;

1057 
g­Ref
 = 
»f
 = 
fšRefs
->
»fs
.
bË
;

1058 
Ï¡Ref
 = 
fšRefs
->
»fs
.
ÃxtEÁry
;

1059 
»f
 < 
Ï¡Ref
) {

1060 
DvmH—pChunk
 *
hc
;

1062 
hc
 = 
	`±r2chunk
(*
»f
);

1063 ià(!
	`isM¬ked
(
hc
, 
m¬kCÚ‹xt
)) {

1064 ià(!
	`dvmH—pAddToH—pRefTabË
(&
ÃwP’dšgRefs
, *
»f
)) {

1067 
	`LOGE_GC
("dvmHeapScheduleFinalizations(): "

1069 
	`dvmH—pNumH—pRefTabËEÁr›s
(&
ÃwP’dšgRefs
));

1070 
	`dvmAbÜt
();

1072 
ÃwP’dCouÁ
++;

1076 ià(
ÃwP’dCouÁ
 > 0) {

1079 *
g­Ref
++ = *
»f
;

1083 
g­Ref
++;

1086 
»f
++;

1088 
fšRefs
->
»fs
.
ÃxtEÁry
 = 
g­Ref
;

1090 
tÙ®P’dCouÁ
 +ğ
ÃwP’dCouÁ
;

1091 
fšRefs
 = fšRefs->
Ãxt
;

1093 
	`LOGD_GC
("dvmHeapScheduleFinalizations(): %zd finalizersriggered.\n",

1094 
tÙ®P’dCouÁ
);

1095 ià(
tÙ®P’dCouÁ
 == 0) {

1099 
	`dvmCË¬Reã»nûTabË
(&
ÃwP’dšgRefs
);

1105 ià(!
	`dvmH—pAddTabËToL¬geTabË
(&
gDvm
.
gcH—p
->
³ndšgFš®iz©iÚRefs
,

1106 &
ÃwP’dšgRefs
))

1108 
	`LOGE_GC
("dvmHeapScheduleFinalizations(): can't insert‚ew "

1110 
	`dvmAbÜt
();

1118 
»f
 = 
ÃwP’dšgRefs
.
bË
;

1119 
Ï¡Ref
 = 
ÃwP’dšgRefs
.
ÃxtEÁry
;

1120 
	`as£¹
(
»f
 < 
Ï¡Ref
);

1121 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_ROOT_FINALIZING
, 0);

1122 
»f
 < 
Ï¡Ref
) {

1123 
	`m¬kObjeùNÚNuÎ
(*
»f
, 
m¬kCÚ‹xt
);

1124 
»f
++;

1126 
	`HPROF_CLEAR_GC_SCAN_STATE
();

1133 
gDvm
.
gcH—p
->
m¬kAÎReã»Ás
 = 
Œue
;

1134 
	`´oûssM¬kSck
(
m¬kCÚ‹xt
);

1135 
gDvm
.
gcH—p
->
m¬kAÎReã»Ás
 = 
çl£
;

1137 
	`dvmSigÇlH—pWÜk”
(
çl£
);

1138 
	}
}

1140 
	$dvmH—pFšishM¬kS‹p
()

1142 
H—pB™m­
 *
m¬kB™m­
;

1143 
H—pB™m­
 
objeùB™m­
;

1144 
GcM¬kCÚ‹xt
 *
m¬kCÚ‹xt
;

1146 
m¬kCÚ‹xt
 = &
gDvm
.
gcH—p
->markContext;

1156 
	`dvmH—pSourûR•ÏûObjeùB™m­s
(
m¬kCÚ‹xt
->
b™m­s
,

1157 
m¬kCÚ‹xt
->
numB™m­s
);

1162 
	`dvmH—pB™m­D–‘eLi¡
(
m¬kCÚ‹xt
->
b™m­s
, m¬kCÚ‹xt->
numB™m­s
);

1163 
	`de¡royM¬kSck
(&
m¬kCÚ‹xt
->
¡ack
);

1165 
	`mem£t
(
m¬kCÚ‹xt
, 0, (*markContext));

1166 
	}
}

1168 #ià
WITH_HPROF
 && 
WITH_HPROF_UNREACHABLE


1169 
boŞ


1170 
	$h´ofUÄ—chabËB™m­C®lback
(
size_t
 
numPŒs
, **
±rs
,

1171 cÚ¡ *
fšg”
, *
¬g
)

1173 
h´of_cÚ‹xt_t
 *
hùx
 = (h´of_cÚ‹xt_ˆ*)
¬g
;

1174 
size_t
 
i
;

1176 
i
 = 0; i < 
numPŒs
; i++) {

1177 
Objeù
 *
obj
;

1182 
obj
 = (
Objeù
 *)
	`chunk2±r
(*
±rs
++);

1184 
	`h´ofM¬kRoÙObjeù
(
hùx
, 
obj
, 0);

1185 
	`h´ofDumpH—pObjeù
(
hùx
, 
obj
);

1188  
Œue
;

1189 
	}
}

1192 
	$h´ofDumpUnm¬kedObjeùs
(cÚ¡ 
H—pB™m­
 
m¬kB™m­s
[],

1193 cÚ¡ 
H—pB™m­
 
objeùB™m­s
[], 
size_t
 
numB™m­s
)

1195 
h´of_cÚ‹xt_t
 *
hùx
 = 
gDvm
.
gcH—p
->
h´ofCÚ‹xt
;

1196 ià(
hùx
 =ğ
NULL
) {

1200 
	`LOGI
("hprof: dumping unreachable objects\n");

1202 
	`HPROF_SET_GC_SCAN_STATE
(
HPROF_UNREACHABLE
, 0);

1204 
	`dvmH—pB™m­XÜW®kLi¡s
(
m¬kB™m­s
, 
objeùB™m­s
, 
numB™m­s
,

1205 
h´ofUÄ—chabËB™m­C®lback
, 
hùx
);

1207 
	`HPROF_CLEAR_GC_SCAN_STATE
();

1208 
	}
}

1211 
boŞ


1212 
	$sw“pB™m­C®lback
(
size_t
 
numPŒs
, **
±rs
, cÚ¡ *
fšg”
, *
¬g
)

1214 cÚ¡ 
CÏssObjeù
 *cÚ¡ 
şassJavaLªgCÏss
 = 
gDvm
.classJavaLangClass;

1215 
size_t
 
i
;

1216 **
ÜigPŒs
 = 
±rs
;

1218 
i
 = 0; i < 
numPŒs
; i++) {

1219 
DvmH—pChunk
 *
hc
;

1220 
Objeù
 *
obj
;

1225 
hc
 = (
DvmH—pChunk
 *)*
±rs
++;

1226 
obj
 = (
Objeù
 *)
	`chunk2±r
(
hc
);

1228 #ià
WITH_OBJECT_HEADERS


1229 ià(
hc
->
m¬kG’”©iÚ
 =ğ
gG’”©iÚ
) {

1230 
	`LOGE
("sw“pšg m¬ked objeù: 0x%08x\n", (
ušt
)
obj
);

1231 
	`dvmAbÜt
();

1237 
	`dvmF»eObjeùMÚ™Ü
(
obj
);

1244 
	`LOGV_SWEEP
("FREE: 0x%08x %s\n", (
ušt
)
obj
, obj->
şazz
->
Çme
);

1252 ià(
obj
->
şazz
 =ğ
şassJavaLªgCÏss
) {

1253 
	`LOGV_SWEEP
("---------------> %s\n", ((
CÏssObjeù
 *)
obj
)->
Çme
);

1257 
	`dvmF»eCÏssIÂ¬ds
((
CÏssObjeù
 *)
obj
);

1265 
chunkËn
;

1266 
CÏssObjeù
 *
şazz
 = 
obj
->clazz;

1267 #ià
WITH_OBJECT_HEADERS


1268 
DvmH—pChunk
 
chunk
 = *
hc
;

1269 
chunk
.
h—d”
 = ~
OBJECT_HEADER
 | 1;

1271 
chunkËn
 = 
	`dvmH—pSourûChunkSize
(
hc
);

1272 
	`mem£t
(
hc
, 0xa5, 
chunkËn
);

1273 
obj
->
şazz
 = (
CÏssObjeù
 *)((
ušŒ_t
)clazz ^ 0xffffffff);

1274 #ià
WITH_OBJECT_HEADERS


1275 *
hc
 = 
chunk
;

1282 
	`dvmH—pSourûF»eLi¡
(
numPŒs
, 
ÜigPŒs
);

1284  
Œue
;

1285 
	}
}

1291 
	$isUnm¬kedObjeù
(*
objeù
)

1293  !
	`isM¬ked
(
	`±r2chunk
((
ušŒ_t
)
objeù
 & ~(
HB_OBJECT_ALIGNMENT
-1)),

1294 &
gDvm
.
gcH—p
->
m¬kCÚ‹xt
);

1295 
	}
}

1301 
	$dvmH—pSw“pUnm¬kedObjeùs
(*
numF»ed
, 
size_t
 *
sizeF»ed
)

1303 cÚ¡ 
H—pB™m­
 *
m¬kB™m­s
;

1304 cÚ¡ 
GcM¬kCÚ‹xt
 *
m¬kCÚ‹xt
;

1305 
H—pB™m­
 
objeùB™m­s
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

1306 
size_t
 
ÜigObjeùsAÎoÿ‹d
;

1307 
size_t
 
ÜigBy‹sAÎoÿ‹d
;

1308 
size_t
 
numB™m­s
;

1314 
	`dvmGcD‘achD—dIÁ”ÃdSŒšgs
(
isUnm¬kedObjeù
);

1318 
ÜigObjeùsAÎoÿ‹d
 = 
	`dvmH—pSourûG‘V®ue
(
HS_OBJECTS_ALLOCATED
, 
NULL
, 0);

1319 
ÜigBy‹sAÎoÿ‹d
 = 
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0);

1321 
m¬kCÚ‹xt
 = &
gDvm
.
gcH—p
->markContext;

1322 
m¬kB™m­s
 = 
m¬kCÚ‹xt
->
b™m­s
;

1323 
numB™m­s
 = 
	`dvmH—pSourûG‘ObjeùB™m­s
(
objeùB™m­s
,

1324 
HEAP_SOURCE_MAX_HEAP_COUNT
);

1325 #iâdeà
NDEBUG


1326 ià(
numB™m­s
 !ğ
m¬kCÚ‹xt
->numBitmaps) {

1327 
	`LOGE
("heap bitmap count mismatch: %zd != %zd\n",

1328 
numB™m­s
, 
m¬kCÚ‹xt
->numBitmaps);

1329 
	`dvmAbÜt
();

1333 #ià
WITH_HPROF
 && 
WITH_HPROF_UNREACHABLE


1334 
	`h´ofDumpUnm¬kedObjeùs
(
m¬kB™m­s
, 
objeùB™m­s
, 
numB™m­s
);

1337 
	`dvmH—pB™m­XÜW®kLi¡s
(
m¬kB™m­s
, 
objeùB™m­s
, 
numB™m­s
,

1338 
sw“pB™m­C®lback
, 
NULL
);

1340 *
numF»ed
 = 
ÜigObjeùsAÎoÿ‹d
 -

1341 
	`dvmH—pSourûG‘V®ue
(
HS_OBJECTS_ALLOCATED
, 
NULL
, 0);

1342 *
sizeF»ed
 = 
ÜigBy‹sAÎoÿ‹d
 -

1343 
	`dvmH—pSourûG‘V®ue
(
HS_BYTES_ALLOCATED
, 
NULL
, 0);

1345 #ifdeà
WITH_PROFILER


1346 ià(
gDvm
.
®locProf
.
’abËd
) {

1347 
gDvm
.
®locProf
.
ä“CouÁ
 +ğ*
numF»ed
;

1348 
gDvm
.
®locProf
.
ä“Size
 +ğ*
sizeF»ed
;

1351 
	}
}

	@alloc/MarkSweep.h

16 #iâdeà
_DALVIK_ALLOC_MARK_SWEEP


17 
	#_DALVIK_ALLOC_MARK_SWEEP


	)

19 
	~"®loc/H—pB™m­.h
"

20 
	~"®loc/H—pSourû.h
"

27 cÚ¡ 
Objeù
 **
	mlim™
;

31 cÚ¡ 
Objeù
 **
	mtİ
;

35 cÚ¡ 
Objeù
 **
	mba£
;

36 } 
	tGcM¬kSck
;

41 
H—pB™m­
 
	mb™m­s
[
HEAP_SOURCE_MAX_HEAP_COUNT
];

42 
size_t
 
	mnumB™m­s
;

43 
GcM¬kSck
 
	m¡ack
;

44 cÚ¡ *
	mfšg”
;

45 } 
	tGcM¬kCÚ‹xt
;

47 
	eRefTy³
 {

48 
	mREF_SOFT
,

49 
	mREF_WEAK
,

50 
	mREF_PHANTOM
,

51 
	mREF_WEAKGLOBAL


54 
boŞ
 
dvmH—pBegšM¬kS‹p
();

55 
dvmH—pM¬kRoÙS‘
();

56 
dvmH—pSÿnM¬kedObjeùs
();

57 
dvmH—pHªdËReã»nûs
(
Objeù
 *
»fLi¡H—d
, 
RefTy³
 
»fTy³
);

58 
dvmH—pScheduËFš®iz©iÚs
();

59 
dvmH—pFšishM¬kS‹p
();

61 
dvmH—pSw“pUnm¬kedObjeùs
(*
numF»ed
, 
size_t
 *
sizeF»ed
);

	@alloc/TEST/HeapBitmapTest/include/Dalvik.h

1 #iâdeà
DALVIK_H_


2 
	#DALVIK_H_


	)

4 
	~<¡dio.h
>

5 
	~<¡dboŞ.h
>

6 
	~<¡dlib.h
>

7 
	~<¡ršg.h
>

8 
	~<uni¡d.h
>

9 
	~<lim™s.h
>

11 
	#LOGW
(...è
	`´štf
("W/" 
__VA_ARGS__
)

	)

12 
	#LOGE
(...è
	`´štf
("E/" 
__VA_ARGS__
)

	)

14 
šlše
 
	$dvmAbÜt
() {

15 
	`ex™
(1);

16 
	}
}

	@alloc/TEST/HeapBitmapTest/include/cutils/ashmem.h

1 #iâdeà
ASHMEM_H_


2 
	#ASHMEM_H_


	)

4 
	~<fú.h
>

6 
	#ASHMEM_NAME_LEN
 128

	)

8 
šlše
 

9 
	$ashmem_ü—‹_»giÚ
(cÚ¡ *
Çme
, 
size_t
 
Ën
)

11  
	`İ’
("/dev/z”o", 
O_RDWR
);

12 
	}
}

	@alloc/TEST/HeapBitmapTest/main.c

1 
	~<¡dio.h
>

2 
	~<¡dboŞ.h
>

3 
	~<¡dšt.h
>

4 
	~<as£¹.h
>

5 
	~<¡ršg.h
>

6 
	~<uni¡d.h
>

7 
	#__©Œibu‹
(
x
è

	)

8 
	~"H—pB™m­.h
"

9 #undeà
__©Œibu‹


11 
	#PAGE_SIZE
 4096

	)

12 
	#HEAP_BASE
 ((*)0x10000)

	)

13 
	#HEAP_SIZE
 (5 * 
PAGE_SIZE
 + 888)

	)

15 
	#VERBOSE
 1

	)

16 #ià
VERBOSE


17 
	#TRACE
(...è
	`´štf
(
__VA_ARGS__
)

	)

19 
	#TRACE
(...è

	)

23 
	$‹¡_š™
()

25 
H—pB™m­
 
hb
;

26 
boŞ
 
ok
;

28 
	`mem£t
(&
hb
, 0x55, (hb));

30 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

31 
	`as£¹
(
ok
);

33 
	`as£¹
(
hb
.
b™s
 !ğ
NULL
);

34 
	`as£¹
(
hb
.
b™sL’
 >ğ
	`HB_OFFSET_TO_INDEX
(
HEAP_SIZE
));

35 
	`as£¹
(
hb
.
ba£
 =ğ(
ušŒ_t
)
HEAP_BASE
);

36 
	`as£¹
(
hb
.
max
 < hb.
ba£
);

40 *
hb
.
b™s
 = 0x55;

41 
	`as£¹
(*
hb
.
b™s
 = 0x55);

42 *
hb
.
b™s
 = 0;

44 
	#TEST_UNMAP
 0

	)

45 #ià
TEST_UNMAP


48 *
b™s
 = 
hb
.bits;

51 
	`dvmH—pB™m­D–‘e
(&
hb
);

53 
	`as£¹
(
hb
.
b™s
 =ğ
NULL
);

54 
	`as£¹
(
hb
.
b™sL’
 == 0);

55 
	`as£¹
(
hb
.
ba£
 == 0);

56 
	`as£¹
(
hb
.
max
 == 0);

58 #ià
TEST_UNMAP


61 *
b™s
 = 0x55;

62 
	`as£¹
(!"Should have segfaulted");

64 
	}
}

66 
boŞ
 
	$is_z”Ûd
(cÚ¡ 
H—pB™m­
 *
hb
)

68 
i
;

70 
i
 = 0; i < 
hb
->
b™sL’
 /  (*hb->
b™s
); i++) {

71 ià(
hb
->
b™s
[
i
] != 0L) {

72  
çl£
;

75  
Œue
;

76 
	}
}

78 
	$as£¹_em±y
(cÚ¡ 
H—pB™m­
 *
hb
)

80 
	`as£¹
(
hb
->
b™s
 !ğ
NULL
);

81 
	`as£¹
(
hb
->
b™sL’
 >ğ
	`HB_OFFSET_TO_INDEX
(
HEAP_SIZE
));

82 
	`as£¹
(
hb
->
ba£
 =ğ(
ušŒ_t
)
HEAP_BASE
);

83 
	`as£¹
(
hb
->
max
 < hb->
ba£
);

85 
	`as£¹
(
	`is_z”Ûd
(
hb
));

87 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

88 
HEAP_BASE
));

89 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

90 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

91 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

92 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

93 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(
hb
,

94 
HEAP_BASE
 + 
HEAP_SIZE
));

96 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(
hb
,

97 
HEAP_BASE
));

98 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(
hb
,

99 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

100 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(
hb
,

101 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

102 
	}
}

105 
	$‹¡_b™s
()

107 
H—pB™m­
 
hb
;

108 
boŞ
 
ok
;

110 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

111 
	`as£¹
(
ok
);

113 
	`as£¹_em±y
(&
hb
);

117 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb
, 
HEAP_BASE
);

118 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

119 
HEAP_BASE
));

120 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

121 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

122 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

123 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

124 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

125 
HEAP_BASE
 + 
HEAP_SIZE
));

127 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

128 
HEAP_BASE
));

129 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

130 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

131 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

132 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

136 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb
, 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

137 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

138 
HEAP_BASE
));

139 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

140 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

141 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

142 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

143 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

144 
HEAP_BASE
 + 
HEAP_SIZE
));

146 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

147 
HEAP_BASE
));

148 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

149 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

150 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

151 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

155 
	`dvmH—pB™m­CË¬ObjeùB™
(&
hb
, 
HEAP_BASE
);

156 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

157 
HEAP_BASE
));

158 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

159 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

160 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

161 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

162 
	`as£¹
(!
	`is_z”Ûd
(&
hb
));

166 
	`dvmH—pB™m­CË¬ObjeùB™
(&
hb
,

167 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

168 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

169 
HEAP_BASE
));

170 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

171 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

172 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

173 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

174 
	`as£¹
(
	`is_z”Ûd
(&
hb
));

178 
	`dvmH—pB™m­D–‘e
(&
hb
);

179 
	}
}

182 
	$‹¡_ş—r
()

184 
H—pB™m­
 
hb
;

185 
boŞ
 
ok
;

187 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

188 
	`as£¹
(
ok
);

189 
	`as£¹_em±y
(&
hb
);

193 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb
, 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

194 
	`as£¹
(!
	`is_z”Ûd
(&
hb
));

198 
	`dvmH—pB™m­Z”o
(&
hb
);

199 
	`as£¹_em±y
(&
hb
);

203 
	`dvmH—pB™m­D–‘e
(&
hb
);

204 
	}
}

207 
	$‹¡_modify
()

209 
H—pB™m­
 
hb
;

210 
boŞ
 
ok
;

211 
b™
;

213 
ok
 = 
	`dvmH—pB™m­In™
(&
hb
, 
HEAP_BASE
, 
HEAP_SIZE
, "test");

214 
	`as£¹
(
ok
);

215 
	`as£¹_em±y
(&
hb
);

219 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
, 
HEAP_BASE
);

220 
	`as£¹
(
b™
 == 0);

221 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

222 
HEAP_BASE
));

223 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

224 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

225 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

226 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

227 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

228 
HEAP_BASE
 + 
HEAP_SIZE
));

230 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

231 
HEAP_BASE
));

232 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

233 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

234 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

235 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

239 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
, 
HEAP_BASE
);

240 
	`as£¹
(
b™
 != 0);

241 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

242 
HEAP_BASE
));

243 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

244 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

245 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

246 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

247 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

248 
HEAP_BASE
 + 
HEAP_SIZE
));

250 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

251 
HEAP_BASE
));

252 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

253 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

254 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

255 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

259 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
,

260 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

261 
	`as£¹
(
b™
 == 0);

262 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

263 
HEAP_BASE
));

264 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

265 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

266 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

267 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

268 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

269 
HEAP_BASE
 + 
HEAP_SIZE
));

271 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

272 
HEAP_BASE
));

273 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

274 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

275 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

276 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

280 
b™
 = 
	`dvmH—pB™m­S‘AndR‘uºObjeùB™
(&
hb
,

281 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
);

282 
	`as£¹
(
b™
 != 0);

283 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

284 
HEAP_BASE
));

285 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

286 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

287 
	`as£¹
(
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

288 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

289 
	`as£¹
(!
	`dvmH—pB™m­MayCÚšObjeù
(&
hb
,

290 
HEAP_BASE
 + 
HEAP_SIZE
));

292 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

293 
HEAP_BASE
));

294 
	`as£¹
(!
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

295 
HEAP_BASE
 + 
HB_OBJECT_ALIGNMENT
));

296 
	`as£¹
(
	`dvmH—pB™m­IsObjeùB™S‘
(&
hb
,

297 
HEAP_BASE
 + 
HEAP_SIZE
 - 
HB_OBJECT_ALIGNMENT
));

301 
	`dvmH—pB™m­D–‘e
(&
hb
);

302 
	}
}

308 *
	ggC®lbackArg
 = 
NULL
;

310 
	#NUM_XOR_PTRS
 128

	)

311 
size_t
 
	ggNumPŒs
;

312 *
	ggXÜPŒs
[
NUM_XOR_PTRS
];

313 
boŞ
 
	ggCË¬edPŒs
[
NUM_XOR_PTRS
];

314 
boŞ
 
	ggS“nPŒs
[
NUM_XOR_PTRS
];

316 
boŞ


317 
	$xÜC®lback
(
size_t
 
numPŒs
, **
±rs
, cÚ¡ *
fšg”
, *
¬g
)

319 
	`as£¹
(
numPŒs
 > 0);

320 
	`as£¹
(
±rs
 !ğ
NULL
);

321 
	`as£¹
(
¬g
 =ğ
gC®lbackArg
);

323 
size_t
 
i
;

324 
i
 = 0; i < 
numPŒs
; i++) {

325 
	`as£¹
(
±rs
[
i
] < 
fšg”
);

326 
	`´štf
("callback: 0x%08x ( < 0x%08x )\n",

327 (
ušŒ_t
)
±rs
[
i
], (ušŒ_t)
fšg”
);

330  
Œue
;

331 
	}
}

333 
boŞ


334 
	$£’AndCË¬edM©ch
()

336 
size_t
 
i
;

337 
i
 = 0; i < 
gNumPŒs
; i++) {

338 ià(
gCË¬edPŒs
[
i
] !ğ
gS“nPŒs
[i]) {

339  
çl£
;

342  
Œue
;

343 
	}
}

346 
	$run_xÜ
(
ssize_t
 
off£t
, 
size_t
 
¡•
)

348 
	`as£¹
(
¡•
 != 0);

349 
	`as£¹
(
¡•
 < 
HEAP_SIZE
);

353 
ušŒ_t
 
ba£
;

354 
ušŒ_t
 
tİ
;

355 ià(
off£t
 >= 0) {

356 
ba£
 = (
ušŒ_t
)
HEAP_BASE
 + 
off£t
;

358 
ba£
 = (
ušŒ_t
)
HEAP_BASE
 + (ušŒ_t)
HEAP_SIZE
 + 
off£t
;

360 ià(
ba£
 < (
ušŒ_t
)
HEAP_BASE
) {

361 
ba£
 = (
ušŒ_t
)
HEAP_BASE
;

362 } ià(
ba£
 > (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
)) {

363 
ba£
 = (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
);

365 
ba£
 = (ba£ + 
HB_OBJECT_ALIGNMENT
 - 1) & ~(HB_OBJECT_ALIGNMENT - 1);

367 
¡•
 *ğ
HB_OBJECT_ALIGNMENT
;

368 
tİ
 = 
ba£
 + 
¡•
 * 
NUM_XOR_PTRS
;

369 ià(
tİ
 > (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
)) {

370 
tİ
 = (
ušŒ_t
)(
HEAP_BASE
 + 
HEAP_SIZE
);

375 
gNumPŒs
 = 0;

376 
	`mem£t
(
gXÜPŒs
, 0, (gXorPtrs));

377 
	`mem£t
(
gCË¬edPŒs
, 0, (gClearedPtrs));

378 
	`mem£t
(
gS“nPŒs
, 0, (gSeenPtrs));

380 
ušŒ_t
 
addr
;

381 **
p
 = 
gXÜPŒs
;

382 
addr
 = 
ba£
;‡dd¸< 
tİ
;‡dd¸+ğ
¡•
) {

383 *
p
++ = (*)
addr
;

384 
gNumPŒs
++;

386 
	`as£¹
(
	`£’AndCË¬edM©ch
());

390 
H—pB™m­
 
hb1
, 
hb2
;

391 
boŞ
 
ok
;

393 
ok
 = 
	`dvmH—pB™m­In™
(&
hb1
, 
HEAP_BASE
, 
HEAP_SIZE
, "test1");

394 
	`as£¹
(
ok
);

395 
ok
 = 
	`dvmH—pB™m­In™FromTem¶©e
(&
hb2
, &
hb1
, "test2");

396 
	`as£¹
(
ok
);

400 
	`TRACE
("walk 0\n");

401 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

402 
	`as£¹
(
ok
);

403 
	`as£¹
(
	`£’AndCË¬edM©ch
());

407 
	`TRACE
("walk 1\n");

408 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb1
, (*)
ba£
);

409 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

410 
	`as£¹
(
ok
);

414 
	`TRACE
("walk 2\n");

415 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb2
, (*)
ba£
);

416 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

417 
	`as£¹
(
ok
);

421 
	`dvmH—pB™m­Z”o
(&
hb1
);

422 
	`as£¹_em±y
(&
hb1
);

423 
	`dvmH—pB™m­Z”o
(&
hb2
);

424 
	`as£¹_em±y
(&
hb2
);

429 
size_t
 
i
;

430 
i
 = 0; i < 
gNumPŒs
; i++) {

431 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb1
, 
gXÜPŒs
[
i
]);

433 
	`TRACE
("walk 3\n");

434 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

435 
	`as£¹
(
ok
);

439 
i
 = 0; i < 
gNumPŒs
; i += 3) {

440 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb2
, 
gXÜPŒs
[
i
]);

442 
	`TRACE
("walk 4\n");

443 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

444 
	`as£¹
(
ok
);

448 
i
 = 0; i < 
gNumPŒs
; i += 2) {

449 
	`dvmH—pB™m­S‘ObjeùB™
(&
hb2
, 
gXÜPŒs
[
i
]);

451 
	`TRACE
("walk 5\n");

452 
ok
 = 
	`dvmH—pB™m­XÜW®k
(&
hb1
, &
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

453 
	`as£¹
(
ok
);

457 
	`TRACE
("walk 6\n");

458 
ok
 = 
	`dvmH—pB™m­W®k
(&
hb2
, 
xÜC®lback
, 
gC®lbackArg
);

459 
	`as£¹
(
ok
);

466 
	`dvmH—pB™m­D–‘e
(&
hb1
);

467 
	`dvmH—pB™m­D–‘e
(&
hb2
);

468 
	}
}

471 
	$‹¡_xÜ
()

473 
	`run_xÜ
(0, 1);

474 
	`run_xÜ
(100, 34);

475 
	}
}

477 
	$maš
(
¬gc
, *
¬gv
[])

479 
	`´štf
("test_init...\n");

480 
	`‹¡_š™
();

482 
	`´štf
("test_bits...\n");

483 
	`‹¡_b™s
();

485 
	`´štf
("test_clear...\n");

486 
	`‹¡_ş—r
();

488 
	`´štf
("test_modify...\n");

489 
	`‹¡_modify
();

491 
	`´štf
("test_xor...\n");

492 
	`‹¡_xÜ
();

494 
	`´štf
("done.\n");

496 
	}
}

	@alloc/clz.c

17 
	~"şz.h
"

28 
	$dvmClzIm¶
(
x
)

30 #ifdeà
HAVE_BUILTIN_CLZ


35  
	`__butš_şz
(
x
);

40 ià(!
x
)  32;

41 
e
 = 31;

42 ià(
x
&0xFFFF0000è{ 
e
 -=16; x >>=16; }

43 ià(
x
&0x0000FF00è{ 
e
 -= 8; x >>= 8; }

44 ià(
x
&0x000000F0è{ 
e
 -= 4; x >>= 4; }

45 ià(
x
&0x0000000Cè{ 
e
 -= 2; x >>= 2; }

46 ià(
x
&0x00000002è{ 
e
 -= 1; }

47  
e
;

49 
	}
}

	@alloc/clz.h

29 #iâdeà
_DALVIK_CLZ


31 #ià
defšed
(
__¬m__
è&& !defšed(
__thumb__
)

32 
	~<machše/ıu-ã©u»s.h
>

33 #ià
defšed
(
__ARM_HAVE_CLZ
)

34 
	#CLZ
(
x
è
	`__butš_şz
(x)

	)

35 
	#HAVE_BUILTIN_CLZ


	)

39 #iâdeà
HAVE_BUILTIN_CLZ


40 
	#CLZ
(
x
è
	`dvmClzIm¶
(x)

	)

41 
dvmClzIm¶
(
x
);

	@analysis/CodeVerify.c

30 
	~"D®vik.h
"

31 
	~"ª®ysis/CodeV”ify.h
"

32 
	~"ª®ysis/Regi¡”M­.h
"

33 
	~"libdex/DexC©ch.h
"

34 
	~"libdex/In¡rUts.h
"

36 
	~<¡ddef.h
>

44 
	eRegi¡”T¿ckšgMode
 {

45 
	mkT¿ckRegsB¿nches
,

46 
	mkT¿ckRegsGcPošts
,

47 
	mkT¿ckRegsAÎ


48 } 
	tRegi¡”T¿ckšgMode
;

57 
	#DEAD_CODE_SCAN
 
Œue


	)

59 
boŞ
 
	ggDebugV”bo£
 = 
çl£
;

62 
	ggDvm__tÙ®In¡r
 = 0;

63 
	ggDvm__gcIn¡r
 = 0;

64 
	ggDvm__gcD©a
 = 0;

65 
	ggDvm__gcSim¶eD©a
 = 0;

72 
šlše
 
boŞ
 
	$doV”bo£Loggšg
(cÚ¡ 
M‘hod
* 
m‘h
) {

73  
çl£
;

75 cÚ¡ * 
cd
 = "Landroid/net/http/Request;";

76 cÚ¡ * 
mn
 = "readResponse";

77 cÚ¡ * 
sg
 = "(Landroid/net/http/AndroidHttpClientConnection;)V";

78  (
	`¡rcmp
(
m‘h
->
şazz
->
desütÜ
, 
cd
) == 0 &&

79 
	`dvmCom·»NameDesütÜAndM‘hod
(
mn
, 
sg
, 
m‘h
) == 0);

80 
	}
}

82 
	#SHOW_REG_DETAILS
 (0 )

	)

88 
	#kExŒaRegs
 2

	)

89 
	#RESULT_REGISTER
(
_š¢RegCouÁ
è(_š¢RegCouÁ)

	)

94 
	sRegi¡”TabË
 {

100 
RegTy³
** 
	maddrRegs
;

106 
	mš¢RegCouÁPlus
;

111 
RegTy³
* 
	m»gAÎoc
;

112 } 
	tRegi¡”TabË
;

116 
checkM”geTab
();

117 
boŞ
 
isIn™M‘hod
(cÚ¡ 
M‘hod
* 
m‘h
);

118 
RegTy³
 
g‘InvoÿtiÚThis
(cÚ¡ RegTy³* 
š¢Regs
,\

119 cÚ¡ 
š¢RegCouÁ
, cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

120 
V”ifyE¼Ü
* 
pFau»
);

121 
v”ifyRegi¡”Ty³
(cÚ¡ 
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,\

122 
u4
 
v¤c
, 
RegTy³
 
checkTy³
, 
V”ifyE¼Ü
* 
pFau»
);

123 
boŞ
 
doCodeV”ifiÿtiÚ
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,\

124 
Regi¡”TabË
* 
»gTabË
, 
Unš™In¡ªûM­
* 
unš™M­
);

125 
boŞ
 
v”ifyIn¡ruùiÚ
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,\

126 
Regi¡”TabË
* 
»gTabË
, 
RegTy³
* 
wÜkRegs
, 
š¢Idx
,

127 
Unš™In¡ªûM­
* 
unš™M­
, * 
pS¹Guess
);

128 
CÏssObjeù
* 
fšdCommÚSu³rşass
(CÏssObjeù* 
c1
, CÏssObjeù* 
c2
);

129 
dumpRegTy³s
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
,\

130 cÚ¡ 
RegTy³
* 
addrRegs
, 
addr
, cÚ¡ * 
addrName
,

131 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
di¥ÏyFÏgs
);

135 
	mDRT_SIMPLE
 = 0,

136 
	mDRT_SHOW_REF_TYPES
 = 0x01,

137 
	mDRT_SHOW_LOCALS
 = 0x02,

147 
	#__
 
kRegTy³Unknown


	)

148 
	#_U
 
kRegTy³Unš™


	)

149 
	#_X
 
kRegTy³CÚæiù


	)

150 
	#_F
 
kRegTy³Flßt


	)

151 
	#_0
 
kRegTy³Z”o


	)

152 
	#_1
 
kRegTy³OÃ


	)

153 
	#_Z
 
kRegTy³BoŞ—n


	)

154 
	#_b
 
kRegTy³PosBy‹


	)

155 
	#_B
 
kRegTy³By‹


	)

156 
	#_s
 
kRegTy³PosShÜt


	)

157 
	#_S
 
kRegTy³ShÜt


	)

158 
	#_C
 
kRegTy³Ch¬


	)

159 
	#_I
 
kRegTy³IÁeg”


	)

160 
	#_J
 
kRegTy³LÚgLo


	)

161 
	#_j
 
kRegTy³LÚgHi


	)

162 
	#_D
 
kRegTy³DoubËLo


	)

163 
	#_d
 
kRegTy³DoubËHi


	)

185 cÚ¡ 
	ggDvmM”geTab
[
kRegTy³MAX
][kRegTypeMAX] =

188 { 
__
,
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X },

189 { 
_X
,
_U
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X },

190 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X },

191 { 
_X
,_X,_X,
_F
,_F,_F,_F,_F,_F,_F,_F,_F,_F,_X,_X,_X,_X },

192 { 
_X
,_X,_X,
_F
,
_0
,
_Z
,_Z,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,_X,_X,_X,_X },

193 { 
_X
,_X,_X,
_F
,
_Z
,
_1
,_Z,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,_X,_X,_X,_X },

194 { 
_X
,_X,_X,
_F
,
_Z
,_Z,_Z,
_b
,
_B
,
_s
,
_S
,
_C
,
_I
,_X,_X,_X,_X },

195 { 
_X
,_X,_X,
_F
,
_b
,_b,_b,_b,
_B
,
_s
,
_S
,
_C
,
_I
,_X,_X,_X,_X },

196 { 
_X
,_X,_X,
_F
,
_B
,_B,_B,_B,_B,
_S
,_S,
_I
,_I,_X,_X,_X,_X },

197 { 
_X
,_X,_X,
_F
,
_s
,_s,_s,_s,
_S
,_s,_S,
_C
,
_I
,_X,_X,_X,_X },

198 { 
_X
,_X,_X,
_F
,
_S
,_S,_S,_S,_S,_S,_S,
_I
,_I,_X,_X,_X,_X },

199 { 
_X
,_X,_X,
_F
,
_C
,_C,_C,_C,
_I
,_C,_I,_C,_I,_X,_X,_X,_X },

200 { 
_X
,_X,_X,
_F
,
_I
,_I,_I,_I,_I,_I,_I,_I,_I,_X,_X,_X,_X },

201 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_J
,_X,_J,_X },

202 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_j
,_X,_j },

203 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_J
,_X,
_D
,_X },

204 { 
_X
,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,_X,
_j
,_X,
_d
 },

207 #undeà
__


208 #undeà
_U


209 #undeà
_X


210 #undeà
_F


211 #undeà
_0


212 #undeà
_1


213 #undeà
_Z


214 #undeà
_b


215 #undeà
_B


216 #undeà
_s


217 #undeà
_S


218 #undeà
_C


219 #undeà
_I


220 #undeà
_J


221 #undeà
_j


222 #undeà
_D


223 #undeà
_d


225 #iâdeà
NDEBUG


229 
	$checkM”geTab
()

231 
i
, 
j
;

233 
i
 = 0; i < 
kRegTy³MAX
; i++) {

234 
j
 = 
i
; j < 
kRegTy³MAX
; j++) {

235 ià(
gDvmM”geTab
[
i
][
j
] != gDvmMergeTab[j][i]) {

236 
	`LOGE
("Symm‘ry viŞ©iÚ: %d,%d v %d,%d\n", 
i
, 
j
, j, i);

237 
	`dvmAbÜt
();

241 
	}
}

250 
boŞ
 
	$ÿnCÚv”tTo1Ä
(
RegTy³
 
¤cTy³
, RegTy³ 
checkTy³
)

252 cÚ¡ 
cÚvTab


253 [
kRegTy³1ÄEND
-
kRegTy³1ÄSTART
+1][kRegType1nrEND-kRegType1nrSTART+1] =

268 
	`as£¹
(
checkTy³
 >ğ
kRegTy³1ÄSTART
 && checkTy³ <ğ
kRegTy³1ÄEND
);

270 ià(
checkTy³
 < 
kRegTy³1ÄSTART
 || checkTy³ > 
kRegTy³1ÄEND
) {

271 
	`LOG_VFY
("UÃx³ùed checkTy³ %d (¤cTy³=%d)\n", 
checkTy³
, 
¤cTy³
);

272 
	`as£¹
(
çl£
);

273  
çl£
;

279 ià(
¤cTy³
 >ğ
kRegTy³1ÄSTART
 && srcTy³ <ğ
kRegTy³1ÄEND
)

280  (
boŞ
è
cÚvTab
[
¤cTy³
-
kRegTy³1ÄSTART
][
checkTy³
-kRegType1nrSTART];

282  
çl£
;

283 
	}
}

289 
boŞ
 
	$ÿnCÚv”tTo2
(
RegTy³
 
¤cTy³
, RegTy³ 
checkTy³
)

291  ((
¤cTy³
 =ğ
kRegTy³LÚgLo
 || srcTy³ =ğ
kRegTy³DoubËLo
) &&

292 (
checkTy³
 =ğ
kRegTy³LÚgLo
 || checkTy³ =ğ
kRegTy³DoubËLo
));

293 
	}
}

312 
boŞ
 
	$checkF›ldA¼ayStÜe1Ä
(
RegTy³
 
š¡rTy³
, RegTy³ 
rg‘Ty³
)

314 ià(
š¡rTy³
 =ğ
rg‘Ty³
)

315  
Œue
;

317 ià((
š¡rTy³
 =ğ
kRegTy³IÁeg”
 && 
rg‘Ty³
 =ğ
kRegTy³Flßt
) ||

318 (
š¡rTy³
 =ğ
kRegTy³Flßt
 && 
rg‘Ty³
 =ğ
kRegTy³IÁeg”
))

320  
Œue
;

323  
çl£
;

324 
	}
}

329 
RegTy³
 
	$´im™iveTy³ToRegTy³
(
Prim™iveTy³
 
´imTy³
)

332 
RegTy³
 
»gTy³
;

333 
Prim™iveTy³
 
´imTy³
;

334 } 
cÚvTab
[] = {

336 { 
kRegTy³BoŞ—n
, 
PRIM_BOOLEAN
 },

337 { 
kRegTy³Ch¬
, 
PRIM_CHAR
 },

338 { 
kRegTy³Flßt
, 
PRIM_FLOAT
 },

339 { 
kRegTy³DoubËLo
, 
PRIM_DOUBLE
 },

340 { 
kRegTy³By‹
, 
PRIM_BYTE
 },

341 { 
kRegTy³ShÜt
, 
PRIM_SHORT
 },

342 { 
kRegTy³IÁeg”
, 
PRIM_INT
 },

343 { 
kRegTy³LÚgLo
, 
PRIM_LONG
 },

347 ià(
´imTy³
 < 0 ||…rimTy³ > (è((
cÚvTab
) / (convTab[0])))

349 
	`as£¹
(
çl£
);

350  
kRegTy³Unknown
;

353 
	`as£¹
(
cÚvTab
[
´imTy³
].primType ==…rimType);

354  
cÚvTab
[
´imTy³
].
»gTy³
;

355 
	}
}

366 
Unš™In¡ªûM­
* 
	$dvmC»©eUnš™In¡ªûM­
(cÚ¡ 
M‘hod
* 
m‘h
,

367 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
ÃwIn¡ªûCouÁ
)

369 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

370 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

371 
Unš™In¡ªûM­
* 
unš™M­
;

372 
boŞ
 
isIn™
 = 
çl£
;

373 
idx
, 
addr
;

375 ià(
	`isIn™M‘hod
(
m‘h
)) {

376 
ÃwIn¡ªûCouÁ
++;

377 
isIn™
 = 
Œue
;

388 
size
 = 
	`off£tof
(
Unš™In¡ªûM­
, 
m­
) +

389 
ÃwIn¡ªûCouÁ
 * (
unš™M­
->
m­
[0]);

390 
unš™M­
 = 
	`ÿÎoc
(1, 
size
);

391 ià(
unš™M­
 =ğ
NULL
)

392  
NULL
;

393 
unš™M­
->
numEÁr›s
 = 
ÃwIn¡ªûCouÁ
;

395 
idx
 = 0;

396 ià(
isIn™
) {

397 
unš™M­
->
m­
[
idx
++].
addr
 = 
kUnš™ThisArgAddr
;

403 
addr
 = 0;‡dd¸< 
š¢sSize
; ) {

404 
width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
addr
);

406 ià((*
š¢s
 & 0xffè=ğ
OP_NEW_INSTANCE
)

407 
unš™M­
->
m­
[
idx
++].
addr
 =‡ddr;

409 
addr
 +ğ
width
;

410 
š¢s
 +ğ
width
;

413 
	`as£¹
(
idx
 =ğ
ÃwIn¡ªûCouÁ
);

414  
unš™M­
;

415 
	}
}

420 
	$dvmF»eUnš™In¡ªûM­
(
Unš™In¡ªûM­
* 
unš™M­
)

422 
	`ä“
(
unš™M­
);

423 
	}
}

435 
	$dvmS‘Unš™In¡ªû
(
Unš™In¡ªûM­
* 
unš™M­
, 
addr
,

436 
CÏssObjeù
* 
şazz
)

438 
idx
;

440 
	`as£¹
(
şazz
 !ğ
NULL
);

443 
idx
 = 
unš™M­
->
numEÁr›s
 - 1; idx >= 0; idx--) {

444 ià(
unš™M­
->
m­
[
idx
].
addr
 ==‡ddr) {

445 ià(
unš™M­
->
m­
[
idx
].
şazz
 !ğ
NULL
 &&

446 
unš™M­
->
m­
[
idx
].
şazz
 != clazz)

448 
	`LOG_VFY
("VFY:‡ddr %d‡lready seto %p,‚ot settingo %p\n",

449 
addr
, 
unš™M­
->
m­
[
idx
].
şazz
, clazz);

452 
unš™M­
->
m­
[
idx
].
şazz
 = clazz;

453  
idx
;

457 
	`LOG_VFY
("VFY:‡dd¸%d‚Ù found iÀunš™ m­\n", 
addr
);

458 
	`as£¹
(
çl£
);

460 
	}
}

465 
CÏssObjeù
* 
	$dvmG‘Unš™In¡ªû
(cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
idx
)

467 
	`as£¹
(
idx
 >ğ0 && idx < 
unš™M­
->
numEÁr›s
);

468  
unš™M­
->
m­
[
idx
].
şazz
;

469 
	}
}

472 
šlše
 
boŞ
 
	$»gTy³IsReã»nû
(
RegTy³
 
ty³
) {

473  (
ty³
 > 
kRegTy³MAX
 ||y³ =ğ
kRegTy³Unš™
 ||

474 
ty³
 =ğ
kRegTy³Z”o
);

475 
	}
}

478 
šlše
 
boŞ
 
	$»gTy³IsUnš™Reã»nû
(
RegTy³
 
ty³
) {

479  ((
ty³
 & 
kRegTy³Unš™Mask
è=ğ
kRegTy³Unš™
);

480 
	}
}

484 
CÏssObjeù
* 
	$»gTy³In™ŸlizedReã»nûToCÏss
(
RegTy³
 
ty³
)

486 
	`as£¹
(
	`»gTy³IsReã»nû
(
ty³
è&&y³ !ğ
kRegTy³Z”o
);

487 ià((
ty³
 & 0x01) == 0) {

488  (
CÏssObjeù
*è
ty³
;

491  
NULL
;

493 
	}
}

496 
šlše
 
	$»gTy³ToUnš™Index
(
RegTy³
 
ty³
) {

497 
	`as£¹
(
	`»gTy³IsUnš™Reã»nû
(
ty³
));

498  (
ty³
 & ~
kRegTy³Unš™Mask
è>> 
kRegTy³Unš™Shiá
;

499 
	}
}

502 
CÏssObjeù
* 
	$»gTy³Reã»nûToCÏss
(
RegTy³
 
ty³
,

503 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
)

505 
	`as£¹
(
	`»gTy³IsReã»nû
(
ty³
è&&y³ !ğ
kRegTy³Z”o
);

506 ià(
	`»gTy³IsUnš™Reã»nû
(
ty³
)) {

507 
	`as£¹
(
unš™M­
 !ğ
NULL
);

508  
	`dvmG‘Unš™In¡ªû
(
unš™M­
, 
	`»gTy³ToUnš™Index
(
ty³
));

510  (
CÏssObjeù
*è
ty³
;

512 
	}
}

515 
šlše
 
RegTy³
 
	$»gTy³FromCÏss
(
CÏssObjeù
* 
şazz
) {

516  (
u4
è
şazz
;

517 
	}
}

520 
RegTy³
 
	$»gTy³FromUnš™Index
(
uidx
) {

521  (
u4
è(
kRegTy³Unš™
 | (
uidx
 << 
kRegTy³Unš™Shiá
));

522 
	}
}

534 
boŞ
 
	$isIn™M‘hod
(cÚ¡ 
M‘hod
* 
m‘h
)

536  (*
m‘h
->
Çme
 =ğ'<' && 
	`¡rcmp
(meth->name+1, "init>") == 0);

537 
	}
}

542 
boŞ
 
	$isCÏssIn™M‘hod
(cÚ¡ 
M‘hod
* 
m‘h
)

544  (*
m‘h
->
Çme
 =ğ'<' && 
	`¡rcmp
(meth->name+1, "clinit>") == 0);

545 
	}
}

552 
CÏssObjeù
* 
	$lookupCÏssByDesütÜ
(cÚ¡ 
M‘hod
* 
m‘h
,

553 cÚ¡ * 
pDesütÜ
, 
V”ifyE¼Ü
* 
pFau»
)

570 
CÏssObjeù
* 
şazz
;

571 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
pDesütÜ
, 
m‘h
->şazz->
şassLßd”
);

572 ià(
şazz
 =ğ
NULL
) {

573 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

574 ià(
	`¡rchr
(
pDesütÜ
, '$'è!ğ
NULL
) {

575 
	`LOGV
("VFY: unableo find class„eferenced in signature (%s)\n",

576 
pDesütÜ
);

578 
	`LOG_VFY
("VFY: unableo find class„eferenced in signature (%s)\n",

579 
pDesütÜ
);

582 ià(
pDesütÜ
[0] == '[') {

588 ià(
pDesütÜ
[1] != 'L' &&…Descriptor[1] != '[') {

589 
	`LOG_VFY
("VFY: invalid char in signature in '%s'\n",

590 
pDesütÜ
);

591 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

602 
şazz
 = 
	`dvmFšdCÏssNoIn™
("[Ljava/lang/Object;",

603 
m‘h
->
şazz
->
şassLßd”
);

604 } ià(
pDesütÜ
[0] == 'L') {

609 
şazz
 = 
gDvm
.
şassJavaLªgObjeù
;

612 
	`LOG_VFY
("VFY: inv®id ch¬ iÀsigÇtu» iÀ'%s'\n", 
pDesütÜ
);

613 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

616 ià(
şazz
 =ğ
NULL
) {

617 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

621 ià(
	`dvmIsPrim™iveCÏss
(
şazz
)) {

622 
	`LOG_VFY
("VFY: inv®id u£ oà´im™ivty³ '%s'\n", 
pDesütÜ
);

623 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

624 
şazz
 = 
NULL
;

627  
şazz
;

628 
	}
}

639 
CÏssObjeù
* 
	$lookupSigÇtu»CÏss
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ ** 
pSig
,

640 
V”ifyE¼Ü
* 
pFau»
)

642 cÚ¡ * 
sig
 = *
pSig
;

643 cÚ¡ * 
’dp
 = 
sig
;

645 
	`as£¹
(
sig
 !ğ
NULL
 && *sig == 'L');

647 *++
’dp
 != ';' && *endp != '\0')

649 ià(*
’dp
 != ';') {

650 
	`LOG_VFY
("VFY: bad sigÇtu» compÚ’ˆ'%s' (missšg ';')\n", 
sig
);

651 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

652  
NULL
;

655 
’dp
++;

656 
ty³L’
 = 
’dp
 - 
sig
;

657 
ty³SŒ
[
ty³L’
+1];

658 
	`memıy
(
ty³SŒ
, 
sig
, 
ty³L’
);

659 
ty³SŒ
[
ty³L’
] = '\0';

661 *
pSig
 = 
’dp
 - 1;

663  
	`lookupCÏssByDesütÜ
(
m‘h
, 
ty³SŒ
, 
pFau»
);

664 
	}
}

674 
CÏssObjeù
* 
	$lookupSigÇtu»A¼ayCÏss
(cÚ¡ 
M‘hod
* 
m‘h
,

675 cÚ¡ ** 
pSig
, 
V”ifyE¼Ü
* 
pFau»
)

677 cÚ¡ * 
sig
 = *
pSig
;

678 cÚ¡ * 
’dp
 = 
sig
;

680 
	`as£¹
(
sig
 !ğ
NULL
 && *sig == '[');

683 *++
’dp
 == '[' && *endp != '\0')

686 ià(*
’dp
 == 'L') {

687 *++
’dp
 != ';' && *endp != '\0')

689 ià(*
’dp
 != ';') {

690 
	`LOG_VFY
("VFY: bad sigÇtu» compÚ’ˆ'%s' (missšg ';')\n", 
sig
);

691 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

692  
NULL
;

696 
ty³L’
 = 
’dp
 - 
sig
 +1;

697 
ty³SŒ
[
ty³L’
+1];

698 
	`memıy
(
ty³SŒ
, 
sig
, 
ty³L’
);

699 
ty³SŒ
[
ty³L’
] = '\0';

701 *
pSig
 = 
’dp
;

703  
	`lookupCÏssByDesütÜ
(
m‘h
, 
ty³SŒ
, 
pFau»
);

704 
	}
}

714 
boŞ
 
	$£tTy³sFromSigÇtu»
(cÚ¡ 
M‘hod
* 
m‘h
, 
RegTy³
* 
»gTy³s
,

715 
Unš™In¡ªûM­
* 
unš™M­
)

717 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

718 
aùu®Args
, 
ex³ùedArgs
, 
¬gS¹
;

719 
V”ifyE¼Ü
 
çu»
 = 
VERIFY_ERROR_NONE
;

721 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
m‘h
->
´ÙÙy³
);

722 
¬gS¹
 = 
m‘h
->
»gi¡”sSize
 - m‘h->
šsSize
;

723 
ex³ùedArgs
 = 
m‘h
->
šsSize
;

724 
aùu®Args
 = 0;

726 
	`as£¹
(
¬gS¹
 >= 0);

731 ià(!
	`dvmIsSticM‘hod
(
m‘h
)) {

737 ià(
	`isIn™M‘hod
(
m‘h
è&& m‘h->
şazz
 !ğ
gDvm
.
şassJavaLªgObjeù
) {

738 
uidx
 = 
	`dvmS‘Unš™In¡ªû
(
unš™M­
, 
kUnš™ThisArgAddr
,

739 
m‘h
->
şazz
);

740 
	`as£¹
(
uidx
 == 0);

741 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
	`»gTy³FromUnš™Index
(
uidx
);

743 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
	`»gTy³FromCÏss
(
m‘h
->
şazz
);

745 
aùu®Args
++;

749 cÚ¡ * 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

751 ià(
desütÜ
 =ğ
NULL
) {

755 ià(
aùu®Args
 >ğ
ex³ùedArgs
) {

756 
	`LOG_VFY
("VFY:ƒxpected %d‡rgs, found more (%s)\n",

757 
ex³ùedArgs
, 
desütÜ
);

758 
bad_sig
;

761 *
desütÜ
) {

773 
CÏssObjeù
* 
şazz
 =

774 
	`lookupCÏssByDesütÜ
(
m‘h
, 
desütÜ
, &
çu»
);

775 ià(!
	`VERIFY_OK
(
çu»
))

776 
bad_sig
;

777 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
	`»gTy³FromCÏss
(
şazz
);

779 
aùu®Args
++;

782 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³BoŞ—n
;

783 
aùu®Args
++;

786 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³Ch¬
;

787 
aùu®Args
++;

790 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³By‹
;

791 
aùu®Args
++;

794 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³IÁeg”
;

795 
aùu®Args
++;

798 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³ShÜt
;

799 
aùu®Args
++;

802 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³Flßt
;

803 
aùu®Args
++;

806 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³DoubËLo
;

807 
»gTy³s
[
¬gS¹
 + 
aùu®Args
 +1] = 
kRegTy³DoubËHi
;

808 
aùu®Args
 += 2;

811 
»gTy³s
[
¬gS¹
 + 
aùu®Args
] = 
kRegTy³LÚgLo
;

812 
»gTy³s
[
¬gS¹
 + 
aùu®Args
 +1] = 
kRegTy³LÚgHi
;

813 
aùu®Args
 += 2;

816 
	`LOG_VFY
("VFY: uÃx³ùed sigÇtu»y³ ch¬ '%c'\n", *
desütÜ
);

817 
bad_sig
;

821 ià(
aùu®Args
 !ğ
ex³ùedArgs
) {

822 
	`LOG_VFY
("VFY:ƒx³ùed %d‡rgs, found %d\n", 
ex³ùedArgs
, 
aùu®Args
);

823 
bad_sig
;

826 cÚ¡ * 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

833 *
desütÜ
) {

843 ià(*(
desütÜ
+1) != '\0')

844 
bad_sig
;

848 *++
desütÜ
 == '[')

850 ià(*
desütÜ
 == 'L') {

851 *++
desütÜ
 != ';' && *descriptor != '\0')

853 ià(*
desütÜ
 != ';')

854 
bad_sig
;

856 ià(*(
desütÜ
+1) != '\0')

857 
bad_sig
;

862 *++
desütÜ
 != ';' && *descriptor != '\0')

864 ià(*
desütÜ
 != ';')

865 
bad_sig
;

868 
bad_sig
;

871  
Œue
;

877 
bad_sig
:

879 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

880 
	`LOG_VFY
("VFY: bad signature '%s' for %s.%s\n",

881 
desc
, 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

882 
	`ä“
(
desc
);

884  
çl£
;

885 
	}
}

896 
RegTy³
 
	$g‘M‘hodR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
)

898 
RegTy³
 
ty³
;

899 cÚ¡ * 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

901 *
desütÜ
) {

903 
ty³
 = 
kRegTy³IÁeg”
;

906 
ty³
 = 
kRegTy³Ch¬
;

909 
ty³
 = 
kRegTy³ShÜt
;

912 
ty³
 = 
kRegTy³By‹
;

915 
ty³
 = 
kRegTy³BoŞ—n
;

918 
ty³
 = 
kRegTy³Unknown
;

921 
ty³
 = 
kRegTy³Flßt
;

924 
ty³
 = 
kRegTy³DoubËLo
;

927 
ty³
 = 
kRegTy³LÚgLo
;

932 
V”ifyE¼Ü
 
çu»
 = 
VERIFY_ERROR_NONE
;

933 
CÏssObjeù
* 
şazz
 =

934 
	`lookupCÏssByDesütÜ
(
m‘h
, 
desütÜ
, &
çu»
);

935 
	`as£¹
(
	`VERIFY_OK
(
çu»
));

936 
ty³
 = 
	`»gTy³FromCÏss
(
şazz
);

941 
	`as£¹
(
çl£
);

942 
ty³
 = 
kRegTy³CÚæiù
;

946  
ty³
;

947 
	}
}

956 
RegTy³
 
	$´imSigCh¬ToRegTy³
(
sigCh¬
)

958 
RegTy³
 
ty³
;

960 
sigCh¬
) {

962 
ty³
 = 
kRegTy³IÁeg”
;

965 
ty³
 = 
kRegTy³Ch¬
;

968 
ty³
 = 
kRegTy³ShÜt
;

971 
ty³
 = 
kRegTy³By‹
;

974 
ty³
 = 
kRegTy³BoŞ—n
;

977 
ty³
 = 
kRegTy³Flßt
;

980 
ty³
 = 
kRegTy³DoubËLo
;

983 
ty³
 = 
kRegTy³LÚgLo
;

988 
ty³
 = 
kRegTy³Unknown
;

991 
	`as£¹
(
çl£
);

992 
ty³
 = 
kRegTy³Unknown
;

996  
ty³
;

997 
	}
}

1021 
M‘hod
* 
	$v”ifyInvoÿtiÚArgs
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
RegTy³
* 
š¢Regs
,

1022 cÚ¡ 
š¢RegCouÁ
, cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

1023 
Unš™In¡ªûM­
* 
unš™M­
, 
M‘hodTy³
 
m‘hodTy³
, 
boŞ
 
isRªge
,

1024 
boŞ
 
isSu³r
, 
V”ifyE¼Ü
* 
pFau»
)

1026 
M‘hod
* 
»sM‘hod
;

1027 * 
sigOrigš®
 = 
NULL
;

1033 ià(
m‘hodTy³
 =ğ
METHOD_INTERFACE
) {

1034 
»sM‘hod
 = 
	`dvmO±ResŞveIÁ”çûM‘hod
(
m‘h
->
şazz
, 
pDecIn¢
->
vB
);

1036 
»sM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
m‘h
->
şazz
, 
pDecIn¢
->
vB
, 
m‘hodTy³
,

1037 
pFau»
);

1039 ià(
»sM‘hod
 =ğ
NULL
) {

1041 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

1042 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

1043 cÚ¡ * 
m‘hodName
;

1044 * 
m‘hodDesc
;

1045 cÚ¡ * 
şassDesütÜ
;

1047 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDecIn¢
->
vB
);

1048 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1049 
m‘hodDesc
 = 
	`dexCİyDesütÜFromM‘hodId
(
pDexFe
, 
pM‘hodId
);

1050 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

1052 ià(!
gDvm
.
İtimizšg
) {

1053 * 
dÙMissšgCÏss
 = 
	`dvmDesütÜToDÙ
(
şassDesütÜ
);

1054 * 
dÙM‘hCÏss
 = 
	`dvmDesütÜToDÙ
(
m‘h
->
şazz
->
desütÜ
);

1058 
	`LOGI
("Could‚ot find method %s.%s,„eferenced from "

1060 
dÙMissšgCÏss
, 
m‘hodName
 ,

1061 
dÙM‘hCÏss
, 
m‘h
->
Çme
 );

1063 
	`ä“
(
dÙMissšgCÏss
);

1064 
	`ä“
(
dÙM‘hCÏss
);

1068 
	`LOG_VFY
("VFY: unableo„esolve %s method %u: %s.%s %s\n",

1069 
	`dvmM‘hodTy³SŒ
(
m‘hodTy³
), 
pDecIn¢
->
vB
,

1070 
şassDesütÜ
, 
m‘hodName
, 
m‘hodDesc
);

1071 
	`ä“
(
m‘hodDesc
);

1072 ià(
	`VERIFY_OK
(*
pFau»
))

1073 *
pFau»
 = 
VERIFY_ERROR_NO_METHOD
;

1074 
ç
;

1082 ià(
»sM‘hod
->
Çme
[0] == '<') {

1083 ià(
m‘hodTy³
 !ğ
METHOD_DIRECT
 || !
	`isIn™M‘hod
(
»sM‘hod
)) {

1084 
	`LOG_VFY
("VFY: invalid callo %s.%s\n",

1085 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

1086 
bad_sig
;

1094 ià(
isSu³r
) {

1095 
	`as£¹
(
m‘hodTy³
 =ğ
METHOD_VIRTUAL
);

1096 
CÏssObjeù
* 
su³r
 = 
m‘h
->
şazz
->super;

1097 ià(
su³r
 =ğ
NULL
 || 
»sM‘hod
->
m‘hodIndex
 > su³r->
vbËCouÁ
) {

1098 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1099 
	`LOG_VFY
("VFY: invalid invoke-super from %s.%so super %s.%s %s\n",

1100 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
,

1101 (
su³r
 =ğ
NULL
è? "-" : su³r->
desütÜ
,

1102 
»sM‘hod
->
Çme
, 
desc
);

1103 
	`ä“
(
desc
);

1104 *
pFau»
 = 
VERIFY_ERROR_NO_METHOD
;

1105 
ç
;

1115 
sigOrigš®
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1116 cÚ¡ * 
sig
 = 
sigOrigš®
;

1117 
ex³ùedArgs
 = 
pDecIn¢
->
vA
;

1118 
aùu®Args
 = 0;

1120 ià(!
isRªge
 && 
ex³ùedArgs
 > 5) {

1121 
	`LOG_VFY
("VFY: invalid‡rg count in‚on-range invoke (%d)\n",

1122 
pDecIn¢
->
vA
);

1123 
ç
;

1125 ià(
ex³ùedArgs
 > 
m‘h
->
outsSize
) {

1126 
	`LOG_VFY
("VFY: invalid‡rg count (%d)ƒxceeds outsSize (%d)\n",

1127 
ex³ùedArgs
, 
m‘h
->
outsSize
);

1128 
ç
;

1131 ià(*
sig
++ != '(')

1132 
bad_sig
;

1140 ià(!
	`dvmIsSticM‘hod
(
»sM‘hod
)) {

1141 
CÏssObjeù
* 
aùu®ThisRef
;

1142 
RegTy³
 
aùu®ArgTy³
;

1144 
aùu®ArgTy³
 = 
	`g‘InvoÿtiÚThis
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
,

1145 
pFau»
);

1146 ià(!
	`VERIFY_OK
(*
pFau»
))

1147 
ç
;

1149 ià(
	`»gTy³IsUnš™Reã»nû
(
aùu®ArgTy³
è&& 
»sM‘hod
->
Çme
[0] != '<')

1151 
	`LOG_VFY
("VFY: 'this'‡rg must be initialized\n");

1152 
ç
;

1154 ià(
m‘hodTy³
 !ğ
METHOD_INTERFACE
 && 
aùu®ArgTy³
 !ğ
kRegTy³Z”o
) {

1155 
aùu®ThisRef
 = 
	`»gTy³Reã»nûToCÏss
(
aùu®ArgTy³
, 
unš™M­
);

1156 ià(!
	`dvmIn¡ªûof
(
aùu®ThisRef
, 
»sM‘hod
->
şazz
)) {

1157 
	`LOG_VFY
("VFY: 'this'‡rg '%s'‚ot instance of '%s'\n",

1158 
aùu®ThisRef
->
desütÜ
,

1159 
»sM‘hod
->
şazz
->
desütÜ
);

1160 
ç
;

1163 
aùu®Args
++;

1170 *
sig
 != '\0' && *sig != ')') {

1171 ià(
aùu®Args
 >ğ
ex³ùedArgs
) {

1172 
	`LOG_VFY
("VFY:ƒxpected %d‡rgs, found more (%c)\n",

1173 
ex³ùedArgs
, *
sig
);

1174 
bad_sig
;

1177 
u4
 
g‘Reg
;

1178 ià(
isRªge
)

1179 
g‘Reg
 = 
pDecIn¢
->
vC
 + 
aùu®Args
;

1181 
g‘Reg
 = 
pDecIn¢
->
¬g
[
aùu®Args
];

1183 *
sig
) {

1186 
CÏssObjeù
* 
şazz
 = 
	`lookupSigÇtu»CÏss
(
m‘h
, &
sig
, 
pFau»
);

1187 ià(!
	`VERIFY_OK
(*
pFau»
))

1188 
bad_sig
;

1189 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1190 
	`»gTy³FromCÏss
(
şazz
), 
pFau»
);

1191 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1192 
	`LOG_VFY
("VFY: bad‡rg %d (into %s)\n",

1193 
aùu®Args
, 
şazz
->
desütÜ
);

1194 
bad_sig
;

1197 
aùu®Args
++;

1201 
CÏssObjeù
* 
şazz
 =

1202 
	`lookupSigÇtu»A¼ayCÏss
(
m‘h
, &
sig
, 
pFau»
);

1203 ià(!
	`VERIFY_OK
(*
pFau»
))

1204 
bad_sig
;

1205 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1206 
	`»gTy³FromCÏss
(
şazz
), 
pFau»
);

1207 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1208 
	`LOG_VFY
("VFY: bad‡rg %d (into %s)\n",

1209 
aùu®Args
, 
şazz
->
desütÜ
);

1210 
bad_sig
;

1213 
aùu®Args
++;

1216 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1217 
kRegTy³BoŞ—n
, 
pFau»
);

1218 
aùu®Args
++;

1221 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1222 
kRegTy³Ch¬
, 
pFau»
);

1223 
aùu®Args
++;

1226 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1227 
kRegTy³By‹
, 
pFau»
);

1228 
aùu®Args
++;

1231 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1232 
kRegTy³IÁeg”
, 
pFau»
);

1233 
aùu®Args
++;

1236 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1237 
kRegTy³ShÜt
, 
pFau»
);

1238 
aùu®Args
++;

1241 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1242 
kRegTy³Flßt
, 
pFau»
);

1243 
aùu®Args
++;

1246 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1247 
kRegTy³DoubËLo
, 
pFau»
);

1248 
aùu®Args
 += 2;

1251 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
,

1252 
kRegTy³LÚgLo
, 
pFau»
);

1253 
aùu®Args
 += 2;

1256 
	`LOG_VFY
("VFY: invocationarget: bad signatureype char '%c'\n",

1257 *
sig
);

1258 
bad_sig
;

1261 
sig
++;

1263 ià(*
sig
 != ')') {

1264 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1265 
	`LOG_VFY
("VFY: invoÿtiÚ¬g‘: bad sigÇtu» '%s'\n", 
desc
);

1266 
	`ä“
(
desc
);

1267 
bad_sig
;

1270 ià(
aùu®Args
 !ğ
ex³ùedArgs
) {

1271 
	`LOG_VFY
("VFY:ƒx³ùed %d‡rgs, found %d\n", 
ex³ùedArgs
, 
aùu®Args
);

1272 
bad_sig
;

1275 
	`ä“
(
sigOrigš®
);

1276  
»sM‘hod
;

1278 
bad_sig
:

1279 ià(
»sM‘hod
 !ğ
NULL
) {

1280 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

1281 
	`LOG_VFY
("VFY:„ejecting callo %s.%s %s\n",

1282 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
, 
desc
);

1283 
	`ä“
(
desc
);

1286 
ç
:

1287 
	`ä“
(
sigOrigš®
);

1288 ià(*
pFau»
 =ğ
VERIFY_ERROR_NONE
)

1289 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1290  
NULL
;

1291 
	}
}

1302 
CÏssObjeù
* 
	$g‘F›ldCÏss
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
F›ld
* 
f›ld
)

1304 
CÏssObjeù
* 
f›ldCÏss
;

1305 cÚ¡ * 
sigÇtu»
 = 
f›ld
->signature;

1307 ià((*
sigÇtu»
 == 'L') || (*signature == '[')) {

1308 
f›ldCÏss
 = 
	`dvmFšdCÏssNoIn™
(
sigÇtu»
,

1309 
m‘h
->
şazz
->
şassLßd”
);

1311  
NULL
;

1314 ià(
f›ldCÏss
 =ğ
NULL
) {

1315 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

1316 
	`LOGV
("VFY: unableo find class '%s' for field %s.%s,rying Object\n",

1317 
f›ld
->
sigÇtu»
, 
m‘h
->
şazz
->
desütÜ
, f›ld->
Çme
);

1318 
f›ldCÏss
 = 
gDvm
.
şassJavaLªgObjeù
;

1320 
	`as£¹
(!
	`dvmIsPrim™iveCÏss
(
f›ldCÏss
));

1322  
f›ldCÏss
;

1323 
	}
}

1337 
šlše
 
RegTy³
 
	$g‘Regi¡”Ty³
(cÚ¡ 
RegTy³
* 
š¢Regs
,

1338 cÚ¡ 
š¢RegCouÁ
, 
u4
 
v¤c
, 
V”ifyE¼Ü
* 
pFau»
)

1340 
RegTy³
 
ty³
;

1342 ià(
v¤c
 >ğ(
u4
è
š¢RegCouÁ
) {

1343 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1344  
kRegTy³Unknown
;

1346  
š¢Regs
[
v¤c
];

1348 
	}
}

1358 
CÏssObjeù
* 
	$g‘CÏssFromRegi¡”
(cÚ¡ 
RegTy³
* 
š¢Regs
,

1359 cÚ¡ 
š¢RegCouÁ
, 
u4
 
v¤c
, 
V”ifyE¼Ü
* 
pFau»
)

1361 
CÏssObjeù
* 
şazz
 = 
NULL
;

1362 
RegTy³
 
ty³
;

1365 
ty³
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
v¤c
, 
pFau»
);

1366 ià(!
	`VERIFY_OK
(*
pFau»
))

1367 
ba
;

1370 ià(
ty³
 =ğ
kRegTy³Z”o
)

1371 
ba
;

1373 ià(!
	`»gTy³IsReã»nû
(
ty³
)) {

1374 
	`LOG_VFY
("VFY:riedo get class from‚on-ref„egister v%d (type=%d)\n",

1375 
v¤c
, 
ty³
);

1376 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1377 
ba
;

1379 ià(
	`»gTy³IsUnš™Reã»nû
(
ty³
)) {

1380 
	`LOG_VFY
("VFY:„egi¡” %u hŞd unš™Ÿlized„eã»nû\n", 
v¤c
);

1381 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1382 
ba
;

1385 
şazz
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
ty³
);

1387 
ba
:

1388  
şazz
;

1389 
	}
}

1401 
RegTy³
 
	$g‘InvoÿtiÚThis
(cÚ¡ 
RegTy³
* 
š¢Regs
,

1402 cÚ¡ 
š¢RegCouÁ
, cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
,

1403 
V”ifyE¼Ü
* 
pFau»
)

1405 
RegTy³
 
thisTy³
 = 
kRegTy³Unknown
;

1407 ià(
pDecIn¢
->
vA
 < 1) {

1408 
	`LOG_VFY
("VFY: invoke†acks 'this'\n");

1409 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1410 
ba
;

1414 
thisTy³
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vC
, 
pFau»
);

1415 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1416 
	`LOG_VFY
("VFY: faedØg‘ 'this' from„egi¡” %u\n", 
pDecIn¢
->
vC
);

1417 
ba
;

1420 ià(!
	`»gTy³IsReã»nû
(
thisTy³
)) {

1421 
	`LOG_VFY
("VFY:riedo get class from‚on-ref„egister v%d (type=%d)\n",

1422 
pDecIn¢
->
vC
, 
thisTy³
);

1423 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1424 
ba
;

1427 
ba
:

1428  
thisTy³
;

1429 
	}
}

1438 
	$£tRegi¡”Ty³
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1439 
u4
 
vd¡
, 
RegTy³
 
ÃwTy³
, 
V”ifyE¼Ü
* 
pFau»
)

1442 
ÃwTy³
) {

1443 
kRegTy³Unknown
:

1444 
kRegTy³BoŞ—n
:

1445 
kRegTy³OÃ
:

1446 
kRegTy³By‹
:

1447 
kRegTy³PosBy‹
:

1448 
kRegTy³ShÜt
:

1449 
kRegTy³PosShÜt
:

1450 
kRegTy³Ch¬
:

1451 
kRegTy³IÁeg”
:

1452 
kRegTy³Flßt
:

1453 
kRegTy³Z”o
:

1454 ià(
vd¡
 >ğ(
u4
è
š¢RegCouÁ
) {

1455 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1457 
š¢Regs
[
vd¡
] = 
ÃwTy³
;

1460 
kRegTy³LÚgLo
:

1461 
kRegTy³DoubËLo
:

1462 ià(
vd¡
+1 >ğ(
u4
è
š¢RegCouÁ
) {

1463 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1465 
š¢Regs
[
vd¡
] = 
ÃwTy³
;

1466 
š¢Regs
[
vd¡
+1] = 
ÃwTy³
+1;

1469 
kRegTy³LÚgHi
:

1470 
kRegTy³DoubËHi
:

1472 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1475 
kRegTy³Unš™
:

1477 ià(
	`»gTy³IsReã»nû
(
ÃwTy³
)) {

1478 ià(
vd¡
 >ğ(
u4
è
š¢RegCouÁ
) {

1479 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1482 
š¢Regs
[
vd¡
] = 
ÃwTy³
;

1499 
kRegTy³CÚæiù
:

1500 
	`LOG_VFY
("UÃx³ùed s‘y³ %d\n", 
ÃwTy³
);

1501 
	`as£¹
(
çl£
);

1502 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1505 
	}
}

1520 
	$v”ifyRegi¡”Ty³
(cÚ¡ 
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1521 
u4
 
v¤c
, 
RegTy³
 
checkTy³
, 
V”ifyE¼Ü
* 
pFau»
)

1523 ià(
v¤c
 >ğ(
u4
è
š¢RegCouÁ
) {

1524 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1528 
RegTy³
 
¤cTy³
 = 
š¢Regs
[
v¤c
];

1531 
checkTy³
) {

1532 
kRegTy³Flßt
:

1533 
kRegTy³BoŞ—n
:

1534 
kRegTy³PosBy‹
:

1535 
kRegTy³By‹
:

1536 
kRegTy³PosShÜt
:

1537 
kRegTy³ShÜt
:

1538 
kRegTy³Ch¬
:

1539 
kRegTy³IÁeg”
:

1540 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
checkTy³
)) {

1541 
	`LOG_VFY
("VFY:„egister1 v%uype %d, wanted %d\n",

1542 
v¤c
, 
¤cTy³
, 
checkTy³
);

1543 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1546 
kRegTy³LÚgLo
:

1547 
kRegTy³DoubËLo
:

1548 ià(
v¤c
+1 >ğ(
u4
è
š¢RegCouÁ
) {

1549 
	`LOG_VFY
("VFY:„egister2 v%u out of„ange (%d)\n",

1550 
v¤c
, 
š¢RegCouÁ
);

1551 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1552 } ià(
š¢Regs
[
v¤c
+1] !ğ
¤cTy³
+1) {

1553 
	`LOG_VFY
("VFY:„egister2 v%u-%u values %d,%d\n",

1554 
v¤c
, v¤c+1, 
š¢Regs
[vsrc], insnRegs[vsrc+1]);

1555 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1556 } ià(!
	`ÿnCÚv”tTo2
(
¤cTy³
, 
checkTy³
)) {

1557 
	`LOG_VFY
("VFY:„egister2 v%uype %d, wanted %d\n",

1558 
v¤c
, 
¤cTy³
, 
checkTy³
);

1559 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1563 
kRegTy³LÚgHi
:

1564 
kRegTy³DoubËHi
:

1565 
kRegTy³Z”o
:

1566 
kRegTy³OÃ
:

1567 
kRegTy³Unknown
:

1568 
kRegTy³CÚæiù
:

1570 
	`as£¹
(
çl£
);

1571 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1573 
kRegTy³Unš™
:

1576 ià(!
	`»gTy³IsReã»nû
(
checkTy³
)) {

1577 
	`LOG_VFY
("VFY: uÃx³ùed checky³ %d\n", 
checkTy³
);

1578 
	`as£¹
(
çl£
);

1579 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1582 ià(
	`»gTy³IsUnš™Reã»nû
(
checkTy³
)) {

1583 
	`LOG_VFY
("VFY: uninitialized„ef‚otƒxpected‡s„eg check\n");

1584 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1588 ià(!
	`»gTy³IsReã»nû
(
¤cTy³
)) {

1589 
	`LOG_VFY
("VFY:„egi¡”1 v%uy³ %d, wª‹d„ef\n", 
v¤c
, 
¤cTy³
);

1590 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1593 ià(
	`»gTy³IsUnš™Reã»nû
(
¤cTy³
)) {

1594 
	`LOG_VFY
("VFY:„egi¡”1 v%u hŞd unš™Ÿlized„ef\n", 
v¤c
);

1595 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1599 ià(
¤cTy³
 !ğ
kRegTy³Z”o
) {

1600 
CÏssObjeù
* 
¤cCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
¤cTy³
);

1601 
CÏssObjeù
* 
checkCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
checkTy³
);

1602 
	`as£¹
(
¤cCÏss
 !ğ
NULL
);

1603 
	`as£¹
(
checkCÏss
 !ğ
NULL
);

1605 ià(
	`dvmIsIÁ”çûCÏss
(
checkCÏss
)) {

1621 ià(!
	`dvmIn¡ªûof
(
¤cCÏss
, 
checkCÏss
)) {

1622 
	`LOG_VFY
("VFY: %s is‚ot instance of %s\n",

1623 
¤cCÏss
->
desütÜ
, 
checkCÏss
->descriptor);

1624 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1630 
	}
}

1636 
	$£tResuÉRegi¡”Ty³
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1637 
RegTy³
 
ÃwTy³
, 
V”ifyE¼Ü
* 
pFau»
)

1639 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
 + 
kExŒaRegs
,

1640 
	`RESULT_REGISTER
(
š¢RegCouÁ
), 
ÃwTy³
, 
pFau»
);

1641 
	}
}

1650 
	$m¬kRefsAsIn™Ÿlized
(
RegTy³
* 
š¢Regs
, 
š¢RegCouÁ
,

1651 
Unš™In¡ªûM­
* 
unš™M­
, 
RegTy³
 
unš™Ty³
, 
V”ifyE¼Ü
* 
pFau»
)

1653 
CÏssObjeù
* 
şazz
;

1654 
RegTy³
 
š™Ty³
;

1655 
i
, 
chªged
;

1657 
şazz
 = 
	`dvmG‘Unš™In¡ªû
(
unš™M­
, 
	`»gTy³ToUnš™Index
(
unš™Ty³
));

1658 ià(
şazz
 =ğ
NULL
) {

1659 
	`LOGE
("VFY: unableo findype=0x%x (idx=%d)\n",

1660 
unš™Ty³
, 
	`»gTy³ToUnš™Index
(uninitType));

1661 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1664 
š™Ty³
 = 
	`»gTy³FromCÏss
(
şazz
);

1666 
chªged
 = 0;

1667 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

1668 ià(
š¢Regs
[
i
] =ğ
unš™Ty³
) {

1669 
š¢Regs
[
i
] = 
š™Ty³
;

1670 
chªged
++;

1674 
	`as£¹
(
chªged
 > 0);

1677 
	}
}

1686 
	$m¬kUnš™RefsAsInv®id
(
RegTy³
* 
š¢Regs
, 
š¢RegCouÁ
,

1687 
Unš™In¡ªûM­
* 
unš™M­
, 
RegTy³
 
unš™Ty³
)

1689 
i
, 
chªged
;

1691 
chªged
 = 0;

1692 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

1693 ià(
š¢Regs
[
i
] =ğ
unš™Ty³
) {

1694 
š¢Regs
[
i
] = 
kRegTy³CÚæiù
;

1695 
chªged
++;

1701 
	}
}

1707 
šlše
 
RegTy³
* 
	$g‘Regi¡”Lše
(cÚ¡ 
Regi¡”TabË
* 
»gTabË
,

1708 
š¢Idx
)

1710  
»gTabË
->
addrRegs
[
š¢Idx
];

1711 
	}
}

1716 
šlše
 
	$cİyRegi¡”s
(
RegTy³
* 
d¡
, cÚ¡ RegTy³* 
¤c
,

1717 
numRegs
)

1719 
	`memıy
(
d¡
, 
¤c
, 
numRegs
 * (
RegTy³
));

1720 
	}
}

1728 
šlše
 
	$com·»Regi¡”s
(cÚ¡ 
RegTy³
* 
¤c1
, cÚ¡ RegTy³* 
¤c2
,

1729 
numRegs
)

1731  
	`memcmp
(
¤c1
, 
¤c2
, 
numRegs
 * (
RegTy³
));

1732 
	}
}

1743 
	eTy³C©egÜy
 {

1744 
	mkTy³C©egÜyUnknown
 = 0,

1745 
	mkTy³C©egÜy1Ä
,

1746 
	mkTy³C©egÜy2
,

1747 
	mkTy³C©egÜyRef
,

1748 } 
	tTy³C©egÜy
;

1762 
	$checkTy³C©egÜy
(
RegTy³
 
ty³
, 
Ty³C©egÜy
 
ÿt
,

1763 
V”ifyE¼Ü
* 
pFau»
)

1765 
ÿt
) {

1766 
kTy³C©egÜy1Ä
:

1767 
ty³
) {

1768 
kRegTy³Flßt
:

1769 
kRegTy³Z”o
:

1770 
kRegTy³OÃ
:

1771 
kRegTy³BoŞ—n
:

1772 
kRegTy³PosBy‹
:

1773 
kRegTy³By‹
:

1774 
kRegTy³PosShÜt
:

1775 
kRegTy³ShÜt
:

1776 
kRegTy³Ch¬
:

1777 
kRegTy³IÁeg”
:

1780 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1785 
kTy³C©egÜy2
:

1786 
ty³
) {

1787 
kRegTy³LÚgLo
:

1788 
kRegTy³DoubËLo
:

1791 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1796 
kTy³C©egÜyRef
:

1797 ià(
ty³
 !ğ
kRegTy³Z”o
 && !
	`»gTy³IsReã»nû
(type))

1798 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1802 
	`as£¹
(
çl£
);

1803 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1806 
	}
}

1815 
	$checkWidePaœ
(
RegTy³
 
ty³l
, RegTy³ 
ty³h
, 
V”ifyE¼Ü
* 
pFau»
)

1817 ià((
ty³h
 !ğ
ty³l
+1))

1818 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1819 
	}
}

1828 
	$cİyRegi¡”1
(
RegTy³
* 
š¢Regs
, 
š¢RegCouÁ
, 
u4
 
vd¡
,

1829 
u4
 
v¤c
, 
Ty³C©egÜy
 
ÿt
, 
V”ifyE¼Ü
* 
pFau»
)

1831 
RegTy³
 
ty³
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
v¤c
, 
pFau»
);

1832 ià(
	`VERIFY_OK
(*
pFau»
))

1833 
	`checkTy³C©egÜy
(
ty³
, 
ÿt
, 
pFau»
);

1834 ià(
	`VERIFY_OK
(*
pFau»
))

1835 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
vd¡
, 
ty³
, 
pFau»
);

1837 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1838 
	`LOG_VFY
("VFY: cİy1 v%u<-v%uy³=%d c©=%d\n", 
vd¡
, 
v¤c
, 
ty³
, 
ÿt
);

1840 
	}
}

1846 
	$cİyRegi¡”2
(
RegTy³
* 
š¢Regs
, 
š¢RegCouÁ
, 
u4
 
vd¡
,

1847 
u4
 
v¤c
, 
V”ifyE¼Ü
* 
pFau»
)

1849 
RegTy³
 
ty³l
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
v¤c
, 
pFau»
);

1850 
RegTy³
 
ty³h
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
v¤c
+1, 
pFau»
);

1851 ià(
	`VERIFY_OK
(*
pFau»
)) {

1852 
	`checkTy³C©egÜy
(
ty³l
, 
kTy³C©egÜy2
, 
pFau»
);

1853 
	`checkWidePaœ
(
ty³l
, 
ty³h
, 
pFau»
);

1855 ià(
	`VERIFY_OK
(*
pFau»
))

1856 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
vd¡
, 
ty³l
, 
pFau»
);

1858 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1859 
	`LOG_VFY
("VFY: cİy2 v%u<-v%uy³=%d/%d\n", 
vd¡
, 
v¤c
, 
ty³l
, 
ty³h
);

1861 
	}
}

1870 
	$cİyResuÉRegi¡”1
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1871 
u4
 
vd¡
, 
Ty³C©egÜy
 
ÿt
, 
V”ifyE¼Ü
* 
pFau»
)

1873 
RegTy³
 
ty³
;

1874 
u4
 
v¤c
;

1876 
v¤c
 = 
	`RESULT_REGISTER
(
š¢RegCouÁ
);

1877 
ty³
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
 + 
kExŒaRegs
, 
v¤c
, 
pFau»
);

1878 ià(
	`VERIFY_OK
(*
pFau»
))

1879 
	`checkTy³C©egÜy
(
ty³
, 
ÿt
, 
pFau»
);

1880 ià(
	`VERIFY_OK
(*
pFau»
)) {

1881 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
vd¡
, 
ty³
, 
pFau»
);

1882 
š¢Regs
[
v¤c
] = 
kRegTy³Unknown
;

1885 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1886 
	`LOG_VFY
("VFY: copyRes1 v%u<-v%u cat=%dype=%d\n",

1887 
vd¡
, 
v¤c
, 
ÿt
, 
ty³
);

1889 
	}
}

1898 
	$cİyResuÉRegi¡”2
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1899 
u4
 
vd¡
, 
V”ifyE¼Ü
* 
pFau»
)

1901 
RegTy³
 
ty³l
, 
ty³h
;

1902 
u4
 
v¤c
;

1904 
v¤c
 = 
	`RESULT_REGISTER
(
š¢RegCouÁ
);

1905 
ty³l
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
 + 
kExŒaRegs
, 
v¤c
,

1906 
pFau»
);

1907 
ty³h
 = 
	`g‘Regi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
 + 
kExŒaRegs
, 
v¤c
+1,

1908 
pFau»
);

1909 ià(
	`VERIFY_OK
(*
pFau»
)) {

1910 
	`checkTy³C©egÜy
(
ty³l
, 
kTy³C©egÜy2
, 
pFau»
);

1911 
	`checkWidePaœ
(
ty³l
, 
ty³h
, 
pFau»
);

1913 ià(
	`VERIFY_OK
(*
pFau»
)) {

1914 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
vd¡
, 
ty³l
, 
pFau»
);

1915 
š¢Regs
[
v¤c
] = 
kRegTy³Unknown
;

1916 
š¢Regs
[
v¤c
+1] = 
kRegTy³Unknown
;

1919 ià(!
	`VERIFY_OK
(*
pFau»
)) {

1920 
	`LOG_VFY
("VFY: copyRes2 v%u<-v%uype=%d/%d\n",

1921 
vd¡
, 
v¤c
, 
ty³l
, 
ty³h
);

1923 
	}
}

1929 
	$checkUnİ
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1930 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³
,

1931 
V”ifyE¼Ü
* 
pFau»
)

1933 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vB
, 
¤cTy³
, 
pFau»
);

1934 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vA
, 
d¡Ty³
, 
pFau»
);

1935 
	}
}

1953 
boŞ
 
	$upÿ¡BoŞ—nOp
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1954 
u4
 
»g1
, u4 
»g2
)

1956 
RegTy³
 
ty³1
, 
ty³2
;

1958 
ty³1
 = 
š¢Regs
[
»g1
];

1959 
ty³2
 = 
š¢Regs
[
»g2
];

1961 ià((
ty³1
 =ğ
kRegTy³BoŞ—n
 ||y³1 =ğ
kRegTy³Z”o
 ||

1962 
ty³1
 =ğ
kRegTy³OÃ
) &&

1963 (
ty³2
 =ğ
kRegTy³BoŞ—n
 ||y³2 =ğ
kRegTy³Z”o
 ||

1964 
ty³2
 =ğ
kRegTy³OÃ
))

1966  
Œue
;

1968  
çl£
;

1969 
	}
}

1978 
	$checkL™İ
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

1979 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³
,

1980 
boŞ
 
checkBoŞ—nOp
, 
V”ifyE¼Ü
* 
pFau»
)

1982 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vB
, 
¤cTy³
, 
pFau»
);

1983 ià(
	`VERIFY_OK
(*
pFau»
è&& 
checkBoŞ—nOp
) {

1984 
	`as£¹
(
d¡Ty³
 =ğ
kRegTy³IÁeg”
);

1986 ià(
	`upÿ¡BoŞ—nOp
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vB
,…DecInsn->vB)

1987 && (
pDecIn¢
->
vC
 == 0 ||…DecInsn->vC == 1))

1989 
d¡Ty³
 = 
kRegTy³BoŞ—n
;

1992 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vA
, 
d¡Ty³
, 
pFau»
);

1993 
	}
}

2000 
	$checkBšİ
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

2001 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³1
,

2002 
RegTy³
 
¤cTy³2
, 
boŞ
 
checkBoŞ—nOp
, 
V”ifyE¼Ü
* 
pFau»
)

2004 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vB
, 
¤cTy³1
,

2005 
pFau»
);

2006 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vC
, 
¤cTy³2
,

2007 
pFau»
);

2008 ià(
	`VERIFY_OK
(*
pFau»
è&& 
checkBoŞ—nOp
) {

2009 
	`as£¹
(
d¡Ty³
 =ğ
kRegTy³IÁeg”
);

2010 ià(
	`upÿ¡BoŞ—nOp
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vB
,…DecIn¢->
vC
))

2011 
d¡Ty³
 = 
kRegTy³BoŞ—n
;

2013 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vA
, 
d¡Ty³
, 
pFau»
);

2014 
	}
}

2020 
	$checkBšİ2addr
(
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

2021 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
RegTy³
 
d¡Ty³
, RegTy³ 
¤cTy³1
,

2022 
RegTy³
 
¤cTy³2
, 
boŞ
 
checkBoŞ—nOp
, 
V”ifyE¼Ü
* 
pFau»
)

2024 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vA
, 
¤cTy³1
,

2025 
pFau»
);

2026 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vB
, 
¤cTy³2
,

2027 
pFau»
);

2028 ià(
	`VERIFY_OK
(*
pFau»
è&& 
checkBoŞ—nOp
) {

2029 
	`as£¹
(
d¡Ty³
 =ğ
kRegTy³IÁeg”
);

2030 ià(
	`upÿ¡BoŞ—nOp
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vA
,…DecIn¢->
vB
))

2031 
d¡Ty³
 = 
kRegTy³BoŞ—n
;

2033 
	`£tRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
pDecIn¢
->
vA
, 
d¡Ty³
, 
pFau»
);

2034 
	}
}

2070 
RegTy³
 
	$adju¡FÜRightShiá
(
RegTy³
* 
wÜkRegs
, cÚ¡ 
š¢RegCouÁ
,

2071 
»g
, 
shiáCouÁ
, 
boŞ
 
isUnsigÃdShiá
,

2072 
V”ifyE¼Ü
* 
pFau»
)

2074 
RegTy³
 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
»g
, 
pFau»
);

2075 
RegTy³
 
ÃwTy³
;

2078 ià(
shiáCouÁ
 == 0)

2079  
¤cTy³
;

2082 ià(
isUnsigÃdShiá
)

2083 
ÃwTy³
 = 
kRegTy³IÁeg”
;

2085 
ÃwTy³
 = 
¤cTy³
;

2087 ià(
shiáCouÁ
 >= 32) {

2088 
	`LOG_VFY
("GÙ uÃx³ùedly†¬gshiá couÁ %u\n", 
shiáCouÁ
);

2090  
ÃwTy³
;

2093 
¤cTy³
) {

2094 
kRegTy³IÁeg”
:

2095 
kRegTy³Flßt
:

2096 ià(
isUnsigÃdShiá
) {

2097 ià(
shiáCouÁ
 > 24)

2098 
ÃwTy³
 = 
kRegTy³PosBy‹
;

2099 ià(
shiáCouÁ
 >= 16)

2100 
ÃwTy³
 = 
kRegTy³Ch¬
;

2102 ià(
shiáCouÁ
 >= 24)

2103 
ÃwTy³
 = 
kRegTy³By‹
;

2104 ià(
shiáCouÁ
 >= 16)

2105 
ÃwTy³
 = 
kRegTy³ShÜt
;

2108 
kRegTy³ShÜt
:

2109 ià(
isUnsigÃdShiá
) {

2112 ià(
shiáCouÁ
 >= 8)

2113 
ÃwTy³
 = 
kRegTy³By‹
;

2116 
kRegTy³PosShÜt
:

2117 ià(
shiáCouÁ
 >= 8)

2118 
ÃwTy³
 = 
kRegTy³PosBy‹
;

2120 
kRegTy³Ch¬
:

2121 ià(
shiáCouÁ
 > 8)

2122 
ÃwTy³
 = 
kRegTy³PosBy‹
;

2124 
kRegTy³By‹
:

2127 
kRegTy³PosBy‹
:

2129 
ÃwTy³
 = 
¤cTy³
;

2131 
kRegTy³Z”o
:

2132 
kRegTy³OÃ
:

2133 
kRegTy³BoŞ—n
:

2135 
ÃwTy³
 = 
kRegTy³Z”o
;

2139 
	`as£¹
(
çl£
);

2143 ià(
ÃwTy³
 !ğ
¤cTy³
) {

2144 
	`LOGVV
("narrowing: %d(%d) --> %do %d\n",

2145 
shiáCouÁ
, 
isUnsigÃdShiá
, 
¤cTy³
, 
ÃwTy³
);

2147 
	`LOGVV
("not‚arrowed: %d(%d) --> %d\n",

2148 
shiáCouÁ
, 
isUnsigÃdShiá
, 
¤cTy³
);

2150  
ÃwTy³
;

2151 
	}
}

2165 
	$g‘CÏssD•th
(
CÏssObjeù
* 
şazz
)

2167 
d•th
 = 0;

2169 
şazz
->
su³r
 !ğ
NULL
) {

2170 
şazz
 = cÏzz->
su³r
;

2171 
d•th
++;

2173  
d•th
;

2174 
	}
}

2183 
CÏssObjeù
* 
	$digFÜSu³rşass
(
CÏssObjeù
* 
c1
, CÏssObjeù* 
c2
)

2185 
d•th1
, 
d•th2
;

2187 
d•th1
 = 
	`g‘CÏssD•th
(
c1
);

2188 
d•th2
 = 
	`g‘CÏssD•th
(
c2
);

2190 ià(
gDebugV”bo£
) {

2191 
	`LOGVV
("COMMON: %s(%d) + %s(%d)\n",

2192 
c1
->
desütÜ
, 
d•th1
, 
c2
->desütÜ, 
d•th2
);

2196 ià(
d•th1
 > 
d•th2
) {

2197 
d•th1
 > 
d•th2
) {

2198 
c1
 = c1->
su³r
;

2199 
d•th1
--;

2202 
d•th2
 > 
d•th1
) {

2203 
c2
 = c2->
su³r
;

2204 
d•th2
--;

2209 
c1
 !ğ
c2
) {

2210 
c1
 = c1->
su³r
;

2211 
c2
 = c2->
su³r
;

2213 
	`as£¹
(
c1
 !ğ
NULL
 && 
c2
 != NULL);

2216 ià(
gDebugV”bo£
) {

2217 
	`LOGVV
(" : --> %s\n", 
c1
->
desütÜ
);

2219  
c1
;

2220 
	}
}

2239 
CÏssObjeù
* 
	$fšdCommÚA¼aySu³rşass
(
CÏssObjeù
* 
c1
, CÏssObjeù* 
c2
)

2241 
CÏssObjeù
* 
¬¿yCÏss
 = 
NULL
;

2242 
CÏssObjeù
* 
commÚEËm
;

2243 
i
, 
numDims
;

2245 
	`as£¹
(
c1
->
¬¿yDim
 > 0);

2246 
	`as£¹
(
c2
->
¬¿yDim
 > 0);

2248 ià(
c1
->
¬¿yDim
 =ğ
c2
->arrayDim) {

2250 
commÚEËm
 = 
	`fšdCommÚSu³rşass
(
c1
->
–em’tCÏss
, 
c2
->elementClass);

2251 
numDims
 = 
c1
->
¬¿yDim
;

2253 ià(
c1
->
¬¿yDim
 < 
c2
->arrayDim)

2254 
numDims
 = 
c1
->
¬¿yDim
;

2256 
numDims
 = 
c2
->
¬¿yDim
;

2257 
commÚEËm
 = 
c1
->
su³r
;

2261 
i
 = 0; i < 
numDims
; i++) {

2262 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
commÚEËm
);

2263 
commÚEËm
 = 
¬¿yCÏss
;

2266 
	`LOGVV
("ArrayMerge '%s' + '%s' --> '%s'\n",

2267 
c1
->
desütÜ
, 
c2
->desütÜ, 
¬¿yCÏss
->descriptor);

2268  
¬¿yCÏss
;

2269 
	}
}

2301 
CÏssObjeù
* 
	$fšdCommÚSu³rşass
(
CÏssObjeù
* 
c1
, CÏssObjeù* 
c2
)

2303 
	`as£¹
(!
	`dvmIsPrim™iveCÏss
(
c1
è&& !dvmIsPrim™iveCÏss(
c2
));

2305 ià(
c1
 =ğ
c2
)

2306  
c1
;

2308 ià(
	`dvmIsIÁ”çûCÏss
(
c1
è&& 
	`dvmIm¶em’ts
(
c2
, c1)) {

2309 ià(
gDebugV”bo£
)

2310 
	`LOGVV
("COMMON/I1: %s + %s --> %s\n",

2311 
c1
->
desütÜ
, 
c2
->descriptor, c1->descriptor);

2312  
c1
;

2314 ià(
	`dvmIsIÁ”çûCÏss
(
c2
è&& 
	`dvmIm¶em’ts
(
c1
, c2)) {

2315 ià(
gDebugV”bo£
)

2316 
	`LOGVV
("COMMON/I2: %s + %s --> %s\n",

2317 
c1
->
desütÜ
, 
c2
->descriptor, c2->descriptor);

2318  
c2
;

2321 ià(
	`dvmIsA¼ayCÏss
(
c1
è&& dvmIsA¼ayCÏss(
c2
) &&

2322 !
	`dvmIsPrim™iveCÏss
(
c1
->
–em’tCÏss
) &&

2323 !
	`dvmIsPrim™iveCÏss
(
c2
->
–em’tCÏss
))

2325  
	`fšdCommÚA¼aySu³rşass
(
c1
, 
c2
);

2328  
	`digFÜSu³rşass
(
c1
, 
c2
);

2329 
	}
}

2336 
RegTy³
 
	$m”geTy³s
(
RegTy³
 
ty³1
, RegTy³ 
ty³2
, 
boŞ
* 
pChªged
)

2338 
RegTy³
 
»suÉ
;

2343 ià(
ty³1
 =ğ
ty³2
)

2344  
ty³1
;

2354 ià(
ty³1
 < 
kRegTy³MAX
) {

2355 ià(
ty³2
 < 
kRegTy³MAX
) {

2356 
»suÉ
 = 
gDvmM”geTab
[
ty³1
][
ty³2
];

2359 ià(
ty³1
 =ğ
kRegTy³Z”o
)

2360 
»suÉ
 = 
ty³2
;

2362 
»suÉ
 = 
kRegTy³CÚæiù
;

2365 ià(
ty³2
 < 
kRegTy³MAX
) {

2367 ià(
ty³2
 =ğ
kRegTy³Z”o
)

2368 
»suÉ
 = 
ty³1
;

2370 
»suÉ
 = 
kRegTy³CÚæiù
;

2373 ià(
	`»gTy³IsUnš™Reã»nû
(
ty³1
) ||

2374 
	`»gTy³IsUnš™Reã»nû
(
ty³2
))

2377 
»suÉ
 = 
kRegTy³CÚæiù
;

2379 
CÏssObjeù
* 
şazz1
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
ty³1
);

2380 
CÏssObjeù
* 
şazz2
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
ty³2
);

2381 
CÏssObjeù
* 
m”gedCÏss
;

2383 
m”gedCÏss
 = 
	`fšdCommÚSu³rşass
(
şazz1
, 
şazz2
);

2384 
	`as£¹
(
m”gedCÏss
 !ğ
NULL
);

2385 
»suÉ
 = 
	`»gTy³FromCÏss
(
m”gedCÏss
);

2390 ià(
»suÉ
 !ğ
ty³1
)

2391 *
pChªged
 = 
Œue
;

2392  
»suÉ
;

2393 
	}
}

2401 
	$upd©eRegi¡”s
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

2402 
Regi¡”TabË
* 
»gTabË
, 
ÃxtIn¢
, cÚ¡ 
RegTy³
* 
wÜkRegs
)

2404 
RegTy³
* 
rg‘Regs
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
ÃxtIn¢
);

2405 cÚ¡ 
š¢RegCouÁ
 = 
m‘h
->
»gi¡”sSize
;

2408 ià(!
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
ÃxtIn¢
)) {

2409 
	`LOGE
("š¢FÏgs[0x%x]=0x%08x\n", 
ÃxtIn¢
, 
š¢FÏgs
[nextInsn]);

2410 
	`LOGE
(" In %s.%s %s\n",

2411 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, meth->descriptor);

2412 
	`as£¹
(
çl£
);

2416 ià(!
	`dvmIn¢IsVis™edOrChªged
(
š¢FÏgs
, 
ÃxtIn¢
)) {

2424 
	`LOGVV
("COPY iÁØ0x%04x\n", 
ÃxtIn¢
);

2425 
	`cİyRegi¡”s
(
rg‘Regs
, 
wÜkRegs
, 
š¢RegCouÁ
 + 
kExŒaRegs
);

2426 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
ÃxtIn¢
, 
Œue
);

2428 ià(
gDebugV”bo£
) {

2429 
	`LOGVV
("MERGE iÁØ0x%04x\n", 
ÃxtIn¢
);

2434 
boŞ
 
chªged
 = 
çl£
;

2435 
i
;

2437 
i
 = 0; i < 
š¢RegCouÁ
 + 
kExŒaRegs
; i++) {

2438 
rg‘Regs
[
i
] = 
	`m”geTy³s
Ñ¬g‘Regs[i], 
wÜkRegs
[i], &
chªged
);

2441 ià(
gDebugV”bo£
) {

2446 ià(
chªged
)

2447 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
ÃxtIn¢
, 
Œue
);

2449 
	}
}

2475 
In¡F›ld
* 
	$g‘In¡F›ld
(cÚ¡ 
M‘hod
* 
m‘h
,

2476 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
RegTy³
 
objTy³
, 
f›ldIdx
,

2477 
V”ifyE¼Ü
* 
pFau»
)

2479 
In¡F›ld
* 
š¡F›ld
 = 
NULL
;

2480 
CÏssObjeù
* 
objCÏss
;

2481 
boŞ
 
mu¡BeLoÿl
 = 
çl£
;

2483 ià(!
	`»gTy³IsReã»nû
(
objTy³
)) {

2484 
	`LOG_VFY
("VFY:‡ttempto‡ccess field in‚on-referenceype %d\n",

2485 
objTy³
);

2486 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2487 
ba
;

2490 
š¡F›ld
 = 
	`dvmO±ResŞveIn¡F›ld
(
m‘h
->
şazz
, 
f›ldIdx
, 
pFau»
);

2491 ià(
š¡F›ld
 =ğ
NULL
) {

2492 
	`LOG_VFY
("VFY: uÇbËØ»sŞvš¡ªû f›ld %u\n", 
f›ldIdx
);

2493 
	`as£¹
(!
	`VERIFY_OK
(*
pFau»
));

2494 
ba
;

2497 ià(
objTy³
 =ğ
kRegTy³Z”o
)

2498 
ba
;

2505 
objCÏss
 = 
	`»gTy³Reã»nûToCÏss
(
objTy³
, 
unš™M­
);

2506 
	`as£¹
(
objCÏss
 !ğ
NULL
);

2507 ià(
	`»gTy³IsUnš™Reã»nû
(
objTy³
)) {

2508 ià(!
	`isIn™M‘hod
(
m‘h
è|| m‘h->
şazz
 !ğ
objCÏss
) {

2509 
	`LOG_VFY
("VFY:‡ttempto‡ccess field via uninitialized„ef\n");

2510 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2511 
ba
;

2513 
mu¡BeLoÿl
 = 
Œue
;

2516 ià(!
	`dvmIn¡ªûof
(
objCÏss
, 
š¡F›ld
->
f›ld
.
şazz
)) {

2517 
	`LOG_VFY
("VFY: invalid field‡ccess (field %s.%s,hrough %s„ef)\n",

2518 
š¡F›ld
->
f›ld
.
şazz
->
desütÜ
, in¡F›ld->f›ld.
Çme
,

2519 
objCÏss
->
desütÜ
);

2520 *
pFau»
 = 
VERIFY_ERROR_NO_FIELD
;

2521 
ba
;

2524 ià(
mu¡BeLoÿl
) {

2526 ià(
š¡F›ld
 < 
objCÏss
->
if›lds
 ||

2527 
š¡F›ld
 >ğ
objCÏss
->
if›lds
 + objCÏss->
if›ldCouÁ
)

2529 
	`LOG_VFY
("VFY: invalid constructor field‡ccess (field %s in %s)\n",

2530 
š¡F›ld
->
f›ld
.
Çme
, 
objCÏss
->
desütÜ
);

2531 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2532 
ba
;

2536 
ba
:

2537  
š¡F›ld
;

2538 
	}
}

2546 
SticF›ld
* 
	$g‘SticF›ld
(cÚ¡ 
M‘hod
* 
m‘h
, 
f›ldIdx
,

2547 
V”ifyE¼Ü
* 
pFau»
)

2549 
SticF›ld
* 
¡©icF›ld
;

2551 
¡©icF›ld
 = 
	`dvmO±ResŞveSticF›ld
(
m‘h
->
şazz
, 
f›ldIdx
, 
pFau»
);

2552 ià(
¡©icF›ld
 =ğ
NULL
) {

2553 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

2554 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

2556 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
f›ldIdx
);

2558 
	`LOG_VFY
("VFY: uÇbËØ»sŞv¡©iøf›ld %u (%sèš %s\n", 
f›ldIdx
,

2559 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

2560 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
şassIdx
));

2561 
	`as£¹
(!
	`VERIFY_OK
(*
pFau»
));

2562 
ba
;

2565 
ba
:

2566  
¡©icF›ld
;

2567 
	}
}

2575 
	$checkFš®F›ldAcûss
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
F›ld
* 
f›ld
,

2576 
V”ifyE¼Ü
* 
pFau»
)

2578 ià(!
	`dvmIsFš®F›ld
(
f›ld
))

2582 ià(
m‘h
->
şazz
 !ğ
f›ld
->clazz) {

2583 
	`LOG_VFY_METH
(
m‘h
, "VFY: can't modify final field %s.%s\n",

2584 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
);

2585 *
pFau»
 = 
VERIFY_ERROR_ACCESS_FIELD
;

2597 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

2598 ià(!
	`isCÏssIn™M‘hod
(
m‘h
)) {

2599 
	`LOG_VFY_METH
(
m‘h
,

2601 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2604 ià(!
	`isIn™M‘hod
(
m‘h
)) {

2605 
	`LOG_VFY_METH
(
m‘h
,

2607 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2611 
	}
}

2618 
	$checkA¼ayIndexTy³
(cÚ¡ 
M‘hod
* 
m‘h
, 
RegTy³
 
»gTy³
,

2619 
V”ifyE¼Ü
* 
pFau»
)

2621 ià(
	`VERIFY_OK
(*
pFau»
)) {

2627 
	`checkTy³C©egÜy
(
»gTy³
, 
kTy³C©egÜy1Ä
, 
pFau»
);

2628 ià(!
	`VERIFY_OK
(*
pFau»
)) {

2629 
	`LOG_VFY_METH
(
m‘h
, "Invalid„egype for‡rray index (%d)\n",

2630 
»gTy³
);

2633 
	}
}

2646 
boŞ
 
	$checkCÚ¡ruùÜR‘uº
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
RegTy³
* 
š¢Regs
,

2647 cÚ¡ 
š¢RegCouÁ
)

2649 
i
;

2651 ià(!
	`isIn™M‘hod
(
m‘h
))

2652  
Œue
;

2654 
RegTy³
 
unš™This
 = 
	`»gTy³FromUnš™Index
(
kUnš™ThisArgSlÙ
);

2656 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

2657 ià(
š¢Regs
[
i
] =ğ
unš™This
) {

2658 
	`LOG_VFY
("VFY: <init>„eturning without calling superclass init\n");

2659  
çl£
;

2662  
Œue
;

2663 
	}
}

2673 
boŞ
 
	$checkMoveExû±iÚ
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
,

2674 cÚ¡ * 
logNÙe
)

2676 
	`as£¹
(
š¢Idx
 >ğ0 && in¢Idx < ()
	`dvmG‘M‘hodIn¢sSize
(
m‘h
));

2678 ià((
m‘h
->
š¢s
[
š¢Idx
] & 0xffè=ğ
OP_MOVE_EXCEPTION
) {

2679 
	`LOG_VFY
("VFY: invalid use of move-exception\n");

2680  
çl£
;

2682  
Œue
;

2683 
	}
}

2696 
CÏssObjeù
* 
	$g‘CaughtExû±iÚTy³
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
,

2697 
V”ifyE¼Ü
* 
pFau»
)

2699 
V”ifyE¼Ü
 
loÿlFau»
;

2700 cÚ¡ 
DexCode
* 
pCode
;

2701 
DexFe
* 
pDexFe
;

2702 
CÏssObjeù
* 
commÚSu³r
 = 
NULL
;

2703 
boŞ
 
foundPossibËHªdËr
 = 
çl£
;

2704 
u4
 
hªdËrsSize
;

2705 
u4
 
off£t
;

2706 
u4
 
i
;

2708 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

2709 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

2711 ià(
pCode
->
Œ›sSize
 != 0) {

2712 
hªdËrsSize
 = 
	`dexG‘HªdËrsSize
(
pCode
);

2713 
off£t
 = 
	`dexG‘Fœ¡HªdËrOff£t
(
pCode
);

2715 
hªdËrsSize
 = 0;

2716 
off£t
 = 0;

2719 
i
 = 0; i < 
hªdËrsSize
; i++) {

2720 
DexC©chI‹¿tÜ
 
™”©Ü
;

2721 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
off£t
);

2724 cÚ¡ 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

2726 ià(
hªdËr
 =ğ
NULL
) {

2730 ià(
hªdËr
->
add»ss
 =ğ(
u4
è
š¢Idx
) {

2731 
CÏssObjeù
* 
şazz
;

2732 
foundPossibËHªdËr
 = 
Œue
;

2734 ià(
hªdËr
->
ty³Idx
 =ğ
kDexNoIndex
)

2735 
şazz
 = 
gDvm
.
şassJavaLªgThrowabË
;

2737 
şazz
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->şazz, 
hªdËr
->
ty³Idx
,

2738 &
loÿlFau»
);

2740 ià(
şazz
 =ğ
NULL
) {

2741 
	`LOG_VFY
("VFY: unableo„esolveƒxception class %u (%s)\n",

2742 
hªdËr
->
ty³Idx
,

2743 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
hªdËr
->
ty³Idx
));

2749 ià(
commÚSu³r
 =ğ
NULL
)

2750 
commÚSu³r
 = 
şazz
;

2752 
commÚSu³r
 = 
	`fšdCommÚSu³rşass
(
şazz
, commonSuper);

2757 
off£t
 = 
	`dexC©chI‹¿tÜG‘EndOff£t
(&
™”©Ü
, 
pCode
);

2760 ià(
commÚSu³r
 =ğ
NULL
) {

2762 
	`LOG_VFY_METH
(
m‘h
,

2763 "VFY: uÇbËØfšdƒxû±iÚ hªdË¸©‡dd¸0x%x\n", 
š¢Idx
);

2764 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2769  
commÚSu³r
;

2770 
	}
}

2782 
boŞ
 
	$š™Regi¡”TabË
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
,

2783 
Regi¡”TabË
* 
»gTabË
, 
Regi¡”T¿ckšgMode
 
ŒackRegsFÜ
)

2785 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

2786 
i
;

2788 
»gTabË
->
š¢RegCouÁPlus
 = 
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
;

2789 
»gTabË
->
addrRegs
 = (
RegTy³
**è
	`ÿÎoc
(
š¢sSize
, (RegType*));

2790 ià(
»gTabË
->
addrRegs
 =ğ
NULL
)

2791  
çl£
;

2793 
	`as£¹
(
š¢sSize
 > 0);

2801 
š‹»¡šgCouÁ
 = 0;

2804 
i
 = 0; i < 
š¢sSize
; i++) {

2805 
boŞ
 
š‹»¡šg
;

2807 
ŒackRegsFÜ
) {

2808 
kT¿ckRegsAÎ
:

2809 
š‹»¡šg
 = 
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
i
);

2811 
kT¿ckRegsGcPošts
:

2812 
š‹»¡šg
 = 
	`dvmIn¢IsGcPošt
(
š¢FÏgs
, 
i
) ||

2813 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

2815 
kT¿ckRegsB¿nches
:

2816 
š‹»¡šg
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

2819 
	`dvmAbÜt
();

2820  
çl£
;

2823 ià(
š‹»¡šg
)

2824 
š‹»¡šgCouÁ
++;

2831 
»gTabË
->
»gAÎoc
 = (
RegTy³
*)

2832 
	`ÿÎoc
(
»gTabË
->
š¢RegCouÁPlus
 * 
š‹»¡šgCouÁ
, (
RegTy³
));

2833 ià(
»gTabË
->
»gAÎoc
 =ğ
NULL
)

2834  
çl£
;

2836 
RegTy³
* 
»gPŒ
 = 
»gTabË
->
»gAÎoc
;

2837 
i
 = 0; i < 
š¢sSize
; i++) {

2838 
boŞ
 
š‹»¡šg
;

2840 
ŒackRegsFÜ
) {

2841 
kT¿ckRegsAÎ
:

2842 
š‹»¡šg
 = 
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
i
);

2844 
kT¿ckRegsGcPošts
:

2845 
š‹»¡šg
 = 
	`dvmIn¢IsGcPošt
(
š¢FÏgs
, 
i
) ||

2846 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

2848 
kT¿ckRegsB¿nches
:

2849 
š‹»¡šg
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
i
);

2852 
	`dvmAbÜt
();

2853  
çl£
;

2856 ià(
š‹»¡šg
) {

2857 
»gTabË
->
addrRegs
[
i
] = 
»gPŒ
;

2858 
»gPŒ
 +ğ
»gTabË
->
š¢RegCouÁPlus
;

2866 
	`as£¹
(
»gPŒ
 - 
»gTabË
->
»gAÎoc
 ==

2867 
»gTabË
->
š¢RegCouÁPlus
 * 
š‹»¡šgCouÁ
);

2868 
	`as£¹
(
»gTabË
->
addrRegs
[0] !ğ
NULL
);

2869  
Œue
;

2870 
	}
}

2878 
	$v”ifyFËdNewA¼ayRegs
(cÚ¡ 
M‘hod
* 
m‘h
,

2879 cÚ¡ 
RegTy³
* 
š¢Regs
, cÚ¡ 
š¢RegCouÁ
,

2880 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
CÏssObjeù
* 
»sCÏss
, 
boŞ
 
isRªge
,

2881 
V”ifyE¼Ü
* 
pFau»
)

2883 
u4
 
¬gCouÁ
 = 
pDecIn¢
->
vA
;

2884 
RegTy³
 
ex³ùedTy³
;

2885 
Prim™iveTy³
 
–emTy³
;

2886 
ui
;

2888 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
»sCÏss
));

2889 
–emTy³
 = 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
;

2890 ià(
–emTy³
 =ğ
PRIM_NOT
) {

2891 
ex³ùedTy³
 = 
	`»gTy³FromCÏss
(
»sCÏss
->
–em’tCÏss
);

2893 
ex³ùedTy³
 = 
	`´im™iveTy³ToRegTy³
(
–emTy³
);

2902 
ui
 = 0; u˜< 
¬gCouÁ
; ui++) {

2903 
u4
 
g‘Reg
;

2905 ià(
isRªge
)

2906 
g‘Reg
 = 
pDecIn¢
->
vC
 + 
ui
;

2908 
g‘Reg
 = 
pDecIn¢
->
¬g
[
ui
];

2910 
	`v”ifyRegi¡”Ty³
(
š¢Regs
, 
š¢RegCouÁ
, 
g‘Reg
, 
ex³ùedTy³
,

2911 
pFau»
);

2912 ià(!
	`VERIFY_OK
(*
pFau»
)) {

2913 
	`LOG_VFY
("VFY: fËd-Ãw-¬¿y‡rg %u(%uènÙ v®id\n", 
ui
, 
g‘Reg
);

2917 
	}
}

2934 
boŞ
 
	$»¶aûFašgIn¡ruùiÚ
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

2935 
š¢Idx
, 
V”ifyE¼Ü
 
çu»
)

2937 
V”ifyE¼ÜRefTy³
 
»fTy³
;

2938 cÚ¡ 
u2
* 
ŞdIn¢s
 = 
m‘h
->
š¢s
 + 
š¢Idx
;

2939 
u2
 
ŞdIn¢
 = *
ŞdIn¢s
;

2940 
boŞ
 
»suÉ
 = 
çl£
;

2942 
	`dvmMakeCodeR—dWr™e
(
m‘h
);

2945 
u2
* 
ÃwIn¢s
 = (u2*è
m‘h
->
š¢s
 + 
š¢Idx
;

2952 
ŞdIn¢
 & 0xff) {

2953 
OP_CONST_CLASS
:

2954 
OP_CHECK_CAST
:

2955 
OP_INSTANCE_OF
:

2956 
OP_NEW_INSTANCE
:

2957 
OP_NEW_ARRAY
:

2958 
OP_FILLED_NEW_ARRAY
:

2959 
OP_FILLED_NEW_ARRAY_RANGE
:

2960 
»fTy³
 = 
VERIFY_ERROR_REF_CLASS
;

2963 
OP_IGET
:

2964 
OP_IGET_BOOLEAN
:

2965 
OP_IGET_BYTE
:

2966 
OP_IGET_CHAR
:

2967 
OP_IGET_SHORT
:

2968 
OP_IGET_WIDE
:

2969 
OP_IGET_OBJECT
:

2970 
OP_IPUT
:

2971 
OP_IPUT_BOOLEAN
:

2972 
OP_IPUT_BYTE
:

2973 
OP_IPUT_CHAR
:

2974 
OP_IPUT_SHORT
:

2975 
OP_IPUT_WIDE
:

2976 
OP_IPUT_OBJECT
:

2977 
OP_SGET
:

2978 
OP_SGET_BOOLEAN
:

2979 
OP_SGET_BYTE
:

2980 
OP_SGET_CHAR
:

2981 
OP_SGET_SHORT
:

2982 
OP_SGET_WIDE
:

2983 
OP_SGET_OBJECT
:

2984 
OP_SPUT
:

2985 
OP_SPUT_BOOLEAN
:

2986 
OP_SPUT_BYTE
:

2987 
OP_SPUT_CHAR
:

2988 
OP_SPUT_SHORT
:

2989 
OP_SPUT_WIDE
:

2990 
OP_SPUT_OBJECT
:

2991 
»fTy³
 = 
VERIFY_ERROR_REF_FIELD
;

2994 
OP_INVOKE_VIRTUAL
:

2995 
OP_INVOKE_VIRTUAL_RANGE
:

2996 
OP_INVOKE_SUPER
:

2997 
OP_INVOKE_SUPER_RANGE
:

2998 
OP_INVOKE_DIRECT
:

2999 
OP_INVOKE_DIRECT_RANGE
:

3000 
OP_INVOKE_STATIC
:

3001 
OP_INVOKE_STATIC_RANGE
:

3002 
OP_INVOKE_INTERFACE
:

3003 
OP_INVOKE_INTERFACE_RANGE
:

3004 
»fTy³
 = 
VERIFY_ERROR_REF_METHOD
;

3009 
	`LOG_VFY
("GLITCH: verifier‡skedo„eplace opcode 0x%02x\n",

3010 
ŞdIn¢
 & 0xff);

3011 
ba
;

3015 
width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
š¢Idx
);

3016 
width
) {

3021 
ÃwIn¢s
[2] = 
OP_NOP
;

3025 
	`LOGE
("ERROR: stomped‡ %d-unit instruction with‡ verifierƒrror\n",

3026 
width
);

3027 
	`dvmAbÜt
();

3031 
ÃwIn¢s
[0] = 
OP_THROW_VERIFICATION_ERROR
 |

3032 (
çu»
 << 8è| (
»fTy³
 << (8 + 
kV”ifyE¼ÜRefTy³Shiá
));

3034 
»suÉ
 = 
Œue
;

3036 
ba
:

3037 
	`dvmMakeCodeR—dOÆy
(
m‘h
);

3038  
»suÉ
;

3039 
	}
}

3051 
boŞ
 
	$dvmV”ifyCodeFlow
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

3052 
Unš™In¡ªûM­
* 
unš™M­
)

3054 
boŞ
 
»suÉ
 = 
çl£
;

3055 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

3056 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

3057 cÚ¡ 
boŞ
 
g’”©eRegi¡”M­
 = 
gDvm
.
g’”©eRegi¡”M­s
;

3058 
i
, 
off£t
;

3059 
boŞ
 
isCÚd™iÚ®
;

3060 
Regi¡”TabË
 
»gTabË
;

3062 
	`mem£t
(&
»gTabË
, 0, (regTable));

3064 #iâdeà
NDEBUG


3065 
	`checkM”geTab
();

3072 ià(
gDvm
.
şassJavaLªgCÏss
 =ğ
NULL
)

3073 
gDvm
.
şassJavaLªgCÏss
 =

3074 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Class;");

3075 ià(
gDvm
.
şassJavaLªgSŒšg
 =ğ
NULL
)

3076 
gDvm
.
şassJavaLªgSŒšg
 =

3077 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/String;");

3078 ià(
gDvm
.
şassJavaLªgThrowabË
 =ğ
NULL
) {

3079 
gDvm
.
şassJavaLªgThrowabË
 =

3080 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Throwable;");

3081 
gDvm
.
offJavaLªgThrowabË_ÿu£
 =

3082 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgThrowabË
,

3085 ià(
gDvm
.
şassJavaLªgObjeù
 =ğ
NULL
)

3086 
gDvm
.
şassJavaLªgObjeù
 =

3087 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Object;");

3089 ià(
m‘h
->
»gi¡”sSize
 * 
š¢sSize
 > 2*1024*1024) {

3091 
	`LOG_VFY_METH
(
m‘h
,

3093 
m‘h
->
»gi¡”sSize
, 
š¢sSize
);

3094 
ba
;

3102 ià(!
	`š™Regi¡”TabË
(
m‘h
, 
š¢FÏgs
, &
»gTabË
,

3103 
g’”©eRegi¡”M­
 ? 
kT¿ckRegsGcPošts
 : 
kT¿ckRegsB¿nches
))

3104 
ba
;

3110 ià(!
	`£tTy³sFromSigÇtu»
(
m‘h
, 
»gTabË
.
addrRegs
[0], 
unš™M­
))

3111 
ba
;

3116 ià(!
	`doCodeV”ifiÿtiÚ
(
m‘h
, 
š¢FÏgs
, &
»gTabË
, 
unš™M­
))

3117 
ba
;

3122 ià(
g’”©eRegi¡”M­
) {

3123 
Regi¡”M­
* 
pM­
;

3124 
V”if›rD©a
 
vd
;

3126 
vd
.
m‘hod
 = 
m‘h
;

3127 
vd
.
š¢sSize
 = insnsSize;

3128 
vd
.
š¢RegCouÁ
 = 
m‘h
->
»gi¡”sSize
;

3129 
vd
.
š¢FÏgs
 = insnFlags;

3130 
vd
.
addrRegs
 = 
»gTabË
.addrRegs;

3132 
pM­
 = 
	`dvmG’”©eRegi¡”M­V
(&
vd
);

3133 ià(
pM­
 !ğ
NULL
) {

3139 
	`dvmS‘Regi¡”M­
((
M‘hod
*)
m‘h
, 
pM­
);

3146 
»suÉ
 = 
Œue
;

3148 
ba
:

3149 
	`ä“
(
»gTabË
.
addrRegs
);

3150 
	`ä“
(
»gTabË
.
»gAÎoc
);

3151  
»suÉ
;

3152 
	}
}

3205 
boŞ
 
	$doCodeV”ifiÿtiÚ
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

3206 
Regi¡”TabË
* 
»gTabË
, 
Unš™In¡ªûM­
* 
unš™M­
)

3208 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

3209 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

3210 
RegTy³
 
wÜkRegs
[
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
];

3211 
boŞ
 
»suÉ
 = 
çl£
;

3212 
boŞ
 
debugV”bo£
 = 
çl£
;

3213 
š¢Idx
, 
¡¬tGuess
, 
´evAddr
;

3218 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 0, 
Œue
);

3220 ià(
	`doV”bo£Loggšg
(
m‘h
)) {

3221 
	`IF_LOGI
() {

3222 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3223 
	`LOGI
("Now verifying: %s.%s %s (ins=%d„egs=%d)\n",

3224 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
,

3225 
m‘h
->
šsSize
, m‘h->
»gi¡”sSize
);

3226 
	`LOGI
(" ------ [0 4 8 12 16 20 24 28 32 36\n");

3227 
	`ä“
(
desc
);

3229 
debugV”bo£
 = 
Œue
;

3230 
gDebugV”bo£
 = 
Œue
;

3232 
gDebugV”bo£
 = 
çl£
;

3235 
¡¬tGuess
 = 0;

3240 
Œue
) {

3245 
š¢Idx
 = 
¡¬tGuess
; in¢Idx < 
š¢sSize
; insnIdx++) {

3246 ià(
	`dvmIn¢IsChªged
(
š¢FÏgs
, 
š¢Idx
))

3250 ià(
š¢Idx
 =ğ
š¢sSize
) {

3251 ià(
¡¬tGuess
 != 0) {

3253 
¡¬tGuess
 = 0;

3272 ià(
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
š¢Idx
)) {

3273 
RegTy³
* 
š¢Regs
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
);

3274 
	`as£¹
(
š¢Regs
 !ğ
NULL
);

3275 
	`cİyRegi¡”s
(
wÜkRegs
, 
š¢Regs
, 
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
);

3277 ià(
debugV”bo£
) {

3278 
	`dumpRegTy³s
(
m‘h
, 
š¢FÏgs
, 
wÜkRegs
, 
š¢Idx
, 
NULL
,
unš™M­
,

3279 
SHOW_REG_DETAILS
);

3283 ià(
debugV”bo£
) {

3284 
	`dumpRegTy³s
(
m‘h
, 
š¢FÏgs
, 
wÜkRegs
, 
š¢Idx
, 
NULL
,
unš™M­
,

3285 
SHOW_REG_DETAILS
);

3288 #iâdeà
NDEBUG


3293 
RegTy³
* 
š¢Regs
 = 
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
);

3294 ià(
š¢Regs
 !ğ
NULL
 &&

3295 
	`com·»Regi¡”s
(
wÜkRegs
, 
š¢Regs
,

3296 
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
) != 0)

3298 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3299 
	`LOG_VFY
("HUH? workRegs diverged in %s.%s %s\n",

3300 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

3301 
	`ä“
(
desc
);

3302 
	`dumpRegTy³s
(
m‘h
, 
š¢FÏgs
, 
wÜkRegs
, 0, "work",

3303 
unš™M­
, 
DRT_SHOW_REF_TYPES
 | 
DRT_SHOW_LOCALS
);

3304 
	`dumpRegTy³s
(
m‘h
, 
š¢FÏgs
, 
š¢Regs
, 0, "insn",

3305 
unš™M­
, 
DRT_SHOW_REF_TYPES
 | 
DRT_SHOW_LOCALS
);

3312 ià(!
	`v”ifyIn¡ruùiÚ
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
wÜkRegs
, 
š¢Idx
,

3313 
unš™M­
, &
¡¬tGuess
))

3316 
ba
;

3321 cÚ¡ 
gcMask
 = 
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 |

3322 
kIn¡rCªThrow
 | 
kIn¡rCªR‘uº
;

3323 
OpCode
 
İCode
 = *(
m‘h
->
š¢s
 + 
š¢Idx
) & 0xff;

3324 
æags
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
İCode
);

3327 
»gWidth
 = (
m‘h
->
»gi¡”sSize
 + 7) / 8;

3328 ià(
»gWidth
 == 3)

3329 
»gWidth
 = 4;

3330 ià(
»gWidth
 > 4) {

3331 
»gWidth
 = ((regWidth + 3) / 4) * 4;

3332 ià(
çl£
) {

3333 
	`LOGW
("WOW: %d„egs -> %d %s.%s\n",

3334 
m‘h
->
»gi¡”sSize
, 
»gWidth
,

3335 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

3340 ià((
æags
 & 
gcMask
) != 0) {

3342 
gDvm__gcIn¡r
++;

3344 ià(
š¢sSize
 < 256)

3345 
gDvm__gcD©a
 += 1;

3347 
gDvm__gcD©a
 += 2;

3348 
gDvm__gcD©a
 +ğ
»gWidth
;

3350 
gDvm__gcSim¶eD©a
 +ğ
»gWidth
;

3352 
gDvm__tÙ®In¡r
++;

3359 
	`dvmIn¢S‘Vis™ed
(
š¢FÏgs
, 
š¢Idx
, 
Œue
);

3360 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
š¢Idx
, 
çl£
);

3363 ià(
DEAD_CODE_SCAN
 && !
	`IS_METHOD_FLAG_SET
(
m‘h
, 
METHOD_ISWRITABLE
)) {

3372 
d—dS¹
 = -1;

3373 
š¢Idx
 = 0; in¢Idx < 
š¢sSize
;

3374 
š¢Idx
 +ğ
	`dvmIn¢G‘Width
(
š¢FÏgs
, insnIdx))

3380 
š¡r
 = 
m‘h
->
š¢s
[
š¢Idx
];

3381 ià(
š¡r
 =ğ
kPackedSw™chSigÇtu»
 ||

3382 
š¡r
 =ğ
kS·r£Sw™chSigÇtu»
 ||

3383 
š¡r
 =ğ
kA¼ayD©aSigÇtu»
 ||

3384 (
š¡r
 =ğ
OP_NOP
 &&

3385 (
m‘h
->
š¢s
[
š¢Idx
+1] =ğ
kPackedSw™chSigÇtu»
 ||

3386 
m‘h
->
š¢s
[
š¢Idx
+1] =ğ
kS·r£Sw™chSigÇtu»
 ||

3387 
m‘h
->
š¢s
[
š¢Idx
+1] =ğ
kA¼ayD©aSigÇtu»
)))

3389 
	`dvmIn¢S‘Vis™ed
(
š¢FÏgs
, 
š¢Idx
, 
Œue
);

3392 ià(!
	`dvmIn¢IsVis™ed
(
š¢FÏgs
, 
š¢Idx
)) {

3393 ià(
d—dS¹
 < 0)

3394 
d—dS¹
 = 
š¢Idx
;

3395 } ià(
d—dS¹
 >= 0) {

3396 
	`IF_LOGD
() {

3397 * 
desc
 =

3398 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3399 
	`LOGD
("VFY: dead code 0x%04x-%04x in %s.%s %s\n",

3400 
d—dS¹
, 
š¢Idx
-1,

3401 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

3402 
	`ä“
(
desc
);

3405 
d—dS¹
 = -1;

3408 ià(
d—dS¹
 >= 0) {

3409 
	`IF_LOGD
() {

3410 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

3411 
	`LOGD
("VFY: dead code 0x%04x-%04x in %s.%s %s\n",

3412 
d—dS¹
, 
š¢Idx
-1,

3413 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

3414 
	`ä“
(
desc
);

3419 
»suÉ
 = 
Œue
;

3421 
ba
:

3422  
»suÉ
;

3423 
	}
}

3440 
boŞ
 
	$v”ifyIn¡ruùiÚ
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

3441 
Regi¡”TabË
* 
»gTabË
, 
RegTy³
* 
wÜkRegs
, 
š¢Idx
,

3442 
Unš™In¡ªûM­
* 
unš™M­
, * 
pS¹Guess
)

3444 cÚ¡ 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

3445 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
š¢Idx
;

3446 
boŞ
 
»suÉ
 = 
çl£
;

3468 cÚ¡ 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

3469 
RegTy³
 
’ŒyRegs
[
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
];

3470 
CÏssObjeù
* 
»sCÏss
;

3471 cÚ¡ * 
şassName
;

3472 
b¿nchT¬g‘
 = 0;

3473 cÚ¡ 
š¢RegCouÁ
 = 
m‘h
->
»gi¡”sSize
;

3474 
RegTy³
 
tmpTy³
;

3475 
DecodedIn¡ruùiÚ
 
decIn¢
;

3476 
boŞ
 
ju¡S‘ResuÉ
 = 
çl£
;

3477 
V”ifyE¼Ü
 
çu»
 = 
VERIFY_ERROR_NONE
;

3479 #iâdeà
NDEBUG


3480 
	`mem£t
(&
decIn¢
, 0x81, (decInsn));

3482 
	`dexDecodeIn¡ruùiÚ
(
gDvm
.
š¡rFÜm©
, 
š¢s
, &
decIn¢
);

3484 
ÃxtFÏgs
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
decIn¢
.
İCode
);

3493 ià((
ÃxtFÏgs
 & 
kIn¡rCªThrow
è!ğ0 && 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
š¢Idx
))

3495 
	`cİyRegi¡”s
(
’ŒyRegs
, 
wÜkRegs
, 
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
);

3497 #iâdeà
NDEBUG


3498 
	`mem£t
(
’ŒyRegs
, 0xdd,

3499 (
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
è* (
RegTy³
));

3503 
decIn¢
.
İCode
) {

3504 
OP_NOP
:

3510 ià(
decIn¢
.
vA
 != 0) {

3511 
	`LOG_VFY
("VFY:ƒncountered dataable in instruction stream\n");

3512 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3516 
OP_MOVE
:

3517 
OP_MOVE_FROM16
:

3518 
OP_MOVE_16
:

3519 
	`cİyRegi¡”1
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, decIn¢.
vB
,

3520 
kTy³C©egÜy1Ä
, &
çu»
);

3522 
OP_MOVE_WIDE
:

3523 
OP_MOVE_WIDE_FROM16
:

3524 
OP_MOVE_WIDE_16
:

3525 
	`cİyRegi¡”2
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, decIn¢.
vB
, &
çu»
);

3527 
OP_MOVE_OBJECT
:

3528 
OP_MOVE_OBJECT_FROM16
:

3529 
OP_MOVE_OBJECT_16
:

3530 
	`cİyRegi¡”1
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, decIn¢.
vB
,

3531 
kTy³C©egÜyRef
, &
çu»
);

3545 
OP_MOVE_RESULT
:

3546 
	`cİyResuÉRegi¡”1
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3547 
kTy³C©egÜy1Ä
, &
çu»
);

3549 
OP_MOVE_RESULT_WIDE
:

3550 
	`cİyResuÉRegi¡”2
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

3552 
OP_MOVE_RESULT_OBJECT
:

3553 
	`cİyResuÉRegi¡”1
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3554 
kTy³C©egÜyRef
, &
çu»
);

3557 
OP_MOVE_EXCEPTION
:

3567 
»sCÏss
 = 
	`g‘CaughtExû±iÚTy³
(
m‘h
, 
š¢Idx
, &
çu»
);

3568 ià(
»sCÏss
 =ğ
NULL
) {

3569 
	`as£¹
(!
	`VERIFY_OK
(
çu»
));

3571 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3572 
	`»gTy³FromCÏss
(
»sCÏss
), &
çu»
);

3576 
OP_RETURN_VOID
:

3577 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
)) {

3578 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3579 } ià(
	`g‘M‘hodR‘uºTy³
(
m‘h
è!ğ
kRegTy³Unknown
) {

3580 
	`LOG_VFY
("VFY:„eturn-void‚otƒxpected\n");

3581 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3584 
OP_RETURN
:

3585 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
)) {

3586 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3589 
RegTy³
 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
m‘h
);

3590 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

3591 ià(!
	`VERIFY_OK
(
çu»
))

3592 
	`LOG_VFY
("VFY:„eturn-32‚otƒxpected\n");

3595 
»tuºTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3596 &
çu»
);

3597 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

3598 ià(!
	`VERIFY_OK
(
çu»
))

3599 
	`LOG_VFY
("VFY:„‘uº-32 oÀšv®id„egi¡” v%d\n", 
decIn¢
.
vA
);

3602 
OP_RETURN_WIDE
:

3603 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
)) {

3604 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3606 
RegTy³
 
»tuºTy³
, 
»tuºTy³Hi
;

3609 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
m‘h
);

3610 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜy2
, &
çu»
);

3611 ià(!
	`VERIFY_OK
(
çu»
))

3612 
	`LOG_VFY
("VFY:„eturn-wide‚otƒxpected\n");

3615 
»tuºTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3616 &
çu»
);

3617 
»tuºTy³Hi
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
,

3618 
decIn¢
.
vA
 +1, &
çu»
);

3619 ià(
	`VERIFY_OK
(
çu»
)) {

3620 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜy2
, &
çu»
);

3621 
	`checkWidePaœ
(
»tuºTy³
, 
»tuºTy³Hi
, &
çu»
);

3623 ià(!
	`VERIFY_OK
(
çu»
)) {

3624 
	`LOG_VFY
("VFY:„eturn-wide on invalid„egister…air v%d\n",

3625 
decIn¢
.
vA
);

3629 
OP_RETURN_OBJECT
:

3630 ià(!
	`checkCÚ¡ruùÜR‘uº
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
)) {

3631 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3633 
RegTy³
 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
m‘h
);

3634 
	`checkTy³C©egÜy
(
»tuºTy³
, 
kTy³C©egÜyRef
, &
çu»
);

3635 ià(!
	`VERIFY_OK
(
çu»
)) {

3636 
	`LOG_VFY
("VFY:„eturn-object‚otƒxpected\n");

3641 
	`as£¹
(
»tuºTy³
 !ğ
kRegTy³Z”o
);

3642 
	`as£¹
(!
	`»gTy³IsUnš™Reã»nû
(
»tuºTy³
));

3654 
CÏssObjeù
* 
deşCÏss
;

3656 
deşCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
»tuºTy³
);

3657 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

3658 
decIn¢
.
vA
, &
çu»
);

3659 ià(!
	`VERIFY_OK
(
çu»
))

3661 ià(
»sCÏss
 !ğ
NULL
) {

3662 ià(!
	`dvmIsIÁ”çûCÏss
(
deşCÏss
) &&

3663 !
	`dvmIn¡ªûof
(
»sCÏss
, 
deşCÏss
))

3665 
	`LOG_VFY
("VFY:„eturning %s (cl=%p), declared %s (cl=%p)\n",

3666 
»sCÏss
->
desütÜ
,„esCÏss->
şassLßd”
,

3667 
deşCÏss
->
desütÜ
, deşCÏss->
şassLßd”
);

3668 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3675 
OP_CONST_4
:

3676 
OP_CONST_16
:

3677 
OP_CONST
:

3679 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3680 
	`dvmD‘”mšeC©1CÚ¡
((
s4
)
decIn¢
.
vB
), &
çu»
);

3682 
OP_CONST_HIGH16
:

3684 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3685 
	`dvmD‘”mšeC©1CÚ¡
((
s4
è
decIn¢
.
vB
 << 16), &
çu»
);

3687 
OP_CONST_WIDE_16
:

3688 
OP_CONST_WIDE_32
:

3689 
OP_CONST_WIDE
:

3690 
OP_CONST_WIDE_HIGH16
:

3692 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3693 
kRegTy³LÚgLo
, &
çu»
);

3695 
OP_CONST_STRING
:

3696 
OP_CONST_STRING_JUMBO
:

3697 
	`as£¹
(
gDvm
.
şassJavaLªgSŒšg
 !ğ
NULL
);

3698 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3699 
	`»gTy³FromCÏss
(
gDvm
.
şassJavaLªgSŒšg
), &
çu»
);

3701 
OP_CONST_CLASS
:

3702 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

3704 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

3705 ià(
»sCÏss
 =ğ
NULL
) {

3706 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

3707 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

3708 
	`LOG_VFY
("VFY: unableo„esolve const-class %d (%s) in %s\n",

3709 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

3710 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

3712 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3713 
	`»gTy³FromCÏss
(
gDvm
.
şassJavaLªgCÏss
), &
çu»
);

3717 
OP_MONITOR_ENTER
:

3718 
OP_MONITOR_EXIT
:

3719 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

3720 ià(
	`VERIFY_OK
(
çu»
)) {

3721 ià(!
	`»gTy³IsReã»nû
(
tmpTy³
)) {

3722 
	`LOG_VFY
("VFY: monitor op on‚on-object\n");

3723 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3728 
OP_CHECK_CAST
:

3737 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

3738 ià(
»sCÏss
 =ğ
NULL
) {

3739 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

3740 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

3741 
	`LOG_VFY
("VFY: unableo„esolve check-cast %d (%s) in %s\n",

3742 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

3743 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

3745 
RegTy³
 
ÜigTy³
;

3747 
ÜigTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3748 &
çu»
);

3749 ià(!
	`VERIFY_OK
(
çu»
))

3751 ià(!
	`»gTy³IsReã»nû
(
ÜigTy³
)) {

3752 
	`LOG_VFY
("VFY: check-ÿ¡ oÀnÚ-»ã»nû iÀv%u\n",
decIn¢
.
vA
);

3753 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3756 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3757 
	`»gTy³FromCÏss
(
»sCÏss
), &
çu»
);

3760 
OP_INSTANCE_OF
:

3762 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
, &
çu»
);

3763 ià(!
	`VERIFY_OK
(
çu»
))

3765 ià(!
	`»gTy³IsReã»nû
(
tmpTy³
)) {

3766 
	`LOG_VFY
("VFY: vB‚Ù‡„eã»nû (%d)\n", 
tmpTy³
);

3767 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3772 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vC
, &
çu»
);

3773 ià(
»sCÏss
 =ğ
NULL
) {

3774 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vC
);

3775 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

3776 
	`LOG_VFY
("VFY: unableo„esolve instanceof %d (%s) in %s\n",

3777 
decIn¢
.
vC
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

3778 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

3781 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3782 
kRegTy³BoŞ—n
, &
çu»
);

3786 
OP_ARRAY_LENGTH
:

3787 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

3788 
decIn¢
.
vB
, &
çu»
);

3789 ià(!
	`VERIFY_OK
(
çu»
))

3791 ià(
»sCÏss
 !ğ
NULL
 && !
	`dvmIsA¼ayCÏss
(resClass)) {

3792 
	`LOG_VFY
("VFY:‡rray-length on‚on-array\n");

3793 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3796 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
,

3797 &
çu»
);

3800 
OP_NEW_INSTANCE
:

3801 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

3802 ià(
»sCÏss
 =ğ
NULL
) {

3803 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

3804 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

3805 
	`LOG_VFY
("VFY: unableo„esolve‚ew-instance %d (%s) in %s\n",

3806 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

3807 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

3809 
RegTy³
 
unš™Ty³
;

3812 ià(
	`dvmIsAb¡¿ùCÏss
(
»sCÏss
è|| 
	`dvmIsIÁ”çûCÏss
(resClass)) {

3813 
	`LOG_VFY
("VFY:‚ew-instance on interface or‡bstract class %s\n",

3814 
»sCÏss
->
desütÜ
);

3815 
çu»
 = 
VERIFY_ERROR_INSTANTIATION
;

3820 
uidx
 = 
	`dvmS‘Unš™In¡ªû
(
unš™M­
, 
š¢Idx
, 
»sCÏss
);

3821 
	`as£¹
(
uidx
 >= 0);

3822 
unš™Ty³
 = 
	`»gTy³FromUnš™Index
(
uidx
);

3828 
	`m¬kUnš™RefsAsInv®id
(
wÜkRegs
, 
š¢RegCouÁ
, 
unš™M­
,

3829 
unš™Ty³
);

3832 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3833 
unš™Ty³
, &
çu»
);

3836 
OP_NEW_ARRAY
:

3837 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vC
, &
çu»
);

3838 ià(
»sCÏss
 =ğ
NULL
) {

3839 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vC
);

3840 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

3841 
	`LOG_VFY
("VFY: unableo„esolve‚ew-array %d (%s) in %s\n",

3842 
decIn¢
.
vC
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

3843 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

3844 } ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
)) {

3845 
	`LOG_VFY
("VFY:‚ew-array on‚on-array class\n");

3846 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3849 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

3850 
kRegTy³IÁeg”
, &
çu»
);

3852 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3853 
	`»gTy³FromCÏss
(
»sCÏss
), &
çu»
);

3856 
OP_FILLED_NEW_ARRAY
:

3857 
OP_FILLED_NEW_ARRAY_RANGE
:

3858 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
m‘h
->
şazz
, 
decIn¢
.
vB
, &
çu»
);

3859 ià(
»sCÏss
 =ğ
NULL
) {

3860 cÚ¡ * 
badCÏssDesc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
decIn¢
.
vB
);

3861 
	`dvmLogUÇbËToResŞveCÏss
(
badCÏssDesc
, 
m‘h
);

3862 
	`LOG_VFY
("VFY: unableo„esolve filled-array %d (%s) in %s\n",

3863 
decIn¢
.
vB
, 
badCÏssDesc
, 
m‘h
->
şazz
->
desütÜ
);

3864 
	`as£¹
(
çu»
 !ğ
VERIFY_ERROR_GENERIC
);

3865 } ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
)) {

3866 
	`LOG_VFY
("VFY: filled-new-array on‚on-array class\n");

3867 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3869 
boŞ
 
isRªge
 = (
decIn¢
.
İCode
 =ğ
OP_FILLED_NEW_ARRAY_RANGE
);

3872 
	`v”ifyFËdNewA¼ayRegs
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

3873 
»sCÏss
, 
isRªge
, &
çu»
);

3875 
	`£tResuÉRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
,

3876 
	`»gTy³FromCÏss
(
»sCÏss
), &
çu»
);

3877 
ju¡S‘ResuÉ
 = 
Œue
;

3881 
OP_CMPL_FLOAT
:

3882 
OP_CMPG_FLOAT
:

3883 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
, 
kRegTy³Flßt
,

3884 &
çu»
);

3885 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
, 
kRegTy³Flßt
,

3886 &
çu»
);

3887 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
,

3888 &
çu»
);

3890 
OP_CMPL_DOUBLE
:

3891 
OP_CMPG_DOUBLE
:

3892 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
, 
kRegTy³DoubËLo
,

3893 &
çu»
);

3894 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
, 
kRegTy³DoubËLo
,

3895 &
çu»
);

3896 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
,

3897 &
çu»
);

3899 
OP_CMP_LONG
:

3900 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
, 
kRegTy³LÚgLo
,

3901 &
çu»
);

3902 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
, 
kRegTy³LÚgLo
,

3903 &
çu»
);

3904 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
,

3905 &
çu»
);

3908 
OP_THROW
:

3909 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

3910 
decIn¢
.
vA
, &
çu»
);

3911 ià(
	`VERIFY_OK
(
çu»
è&& 
»sCÏss
 !ğ
NULL
) {

3912 ià(!
	`dvmIn¡ªûof
(
»sCÏss
, 
gDvm
.
şassJavaLªgThrowabË
)) {

3913 
	`LOG_VFY
("VFY:hrown class %s‚ot instanceof Throwable\n",

3914 
»sCÏss
->
desütÜ
);

3915 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3920 
OP_GOTO
:

3921 
OP_GOTO_16
:

3922 
OP_GOTO_32
:

3926 
OP_PACKED_SWITCH
:

3927 
OP_SPARSE_SWITCH
:

3929 
	`v”ifyRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

3930 
kRegTy³IÁeg”
, &
çu»
);

3933 
OP_FILL_ARRAY_DATA
:

3935 
RegTy³
 
v®ueTy³
;

3936 cÚ¡ 
u2
 *
¬¿yD©a
;

3937 
u2
 
–emWidth
;

3940 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

3941 
decIn¢
.
vA
, &
çu»
);

3942 ià(!
	`VERIFY_OK
(
çu»
))

3946 ià(
»sCÏss
 =ğ
NULL
)

3949 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

3950 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
 ||

3951 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_VOID
)

3953 
	`LOG_VFY
("VFY: invalid fill-array-data on %s\n",

3954 
»sCÏss
->
desütÜ
);

3955 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3959 
v®ueTy³
 = 
	`´im™iveTy³ToRegTy³
(

3960 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
);

3961 
	`as£¹
(
v®ueTy³
 !ğ
kRegTy³Unknown
);

3967 
¬¿yD©a
 = 
š¢s
 + (š¢s[1] | (((
s4
)insns[2]) << 16));

3968 ià(
¬¿yD©a
[0] !ğ
kA¼ayD©aSigÇtu»
) {

3969 
	`LOG_VFY
("VFY: invalid magic for‡rray-data\n");

3970 
çu»
 = 
VERIFY_ERROR_GENERIC
;

3974 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
) {

3975 
PRIM_BOOLEAN
:

3976 
PRIM_BYTE
:

3977 
–emWidth
 = 1;

3979 
PRIM_CHAR
:

3980 
PRIM_SHORT
:

3981 
–emWidth
 = 2;

3983 
PRIM_FLOAT
:

3984 
PRIM_INT
:

3985 
–emWidth
 = 4;

3987 
PRIM_DOUBLE
:

3988 
PRIM_LONG
:

3989 
–emWidth
 = 8;

3992 
–emWidth
 = 0;

4001 ià(
¬¿yD©a
[1] !ğ
–emWidth
) {

4002 
	`LOG_VFY
("VFY:‡rray-data size mismatch (%d vs %d)\n",

4003 
¬¿yD©a
[1], 
–emWidth
);

4004 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4009 
OP_IF_EQ
:

4010 
OP_IF_NE
:

4012 
RegTy³
 
ty³1
, 
ty³2
;

4013 
boŞ
 
tmpResuÉ
;

4015 
ty³1
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4016 &
çu»
);

4017 
ty³2
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4018 &
çu»
);

4019 ià(!
	`VERIFY_OK
(
çu»
))

4023 ià(
	`»gTy³IsReã»nû
(
ty³1
è&&„egTy³IsReã»nû(
ty³2
))

4027 
	`checkTy³C©egÜy
(
ty³1
, 
kTy³C©egÜy1Ä
, &
çu»
);

4028 
	`checkTy³C©egÜy
(
ty³2
, 
kTy³C©egÜy1Ä
, &
çu»
);

4029 ià(!
	`VERIFY_OK
(
çu»
)) {

4030 
	`LOG_VFY
("VFY:‡rgso if-eq/if-ne must both be„efs or cat1\n");

4035 
OP_IF_LT
:

4036 
OP_IF_GE
:

4037 
OP_IF_GT
:

4038 
OP_IF_LE
:

4039 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

4040 ià(!
	`VERIFY_OK
(
çu»
))

4042 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4043 ià(!
	`VERIFY_OK
(
çu»
)) {

4044 
	`LOG_VFY
("VFY:‡rgso 'if' must be cat-1nr\n");

4047 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
, &
çu»
);

4048 ià(!
	`VERIFY_OK
(
çu»
))

4050 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4051 ià(!
	`VERIFY_OK
(
çu»
)) {

4052 
	`LOG_VFY
("VFY:‡rgso 'if' must be cat-1nr\n");

4056 
OP_IF_EQZ
:

4057 
OP_IF_NEZ
:

4058 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

4059 ià(!
	`VERIFY_OK
(
çu»
))

4061 ià(
	`»gTy³IsReã»nû
(
tmpTy³
))

4063 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4064 ià(!
	`VERIFY_OK
(
çu»
))

4065 
	`LOG_VFY
("VFY:ƒxpected cat-1‡rgo if\n");

4067 
OP_IF_LTZ
:

4068 
OP_IF_GEZ
:

4069 
OP_IF_GTZ
:

4070 
OP_IF_LEZ
:

4071 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

4072 ià(!
	`VERIFY_OK
(
çu»
))

4074 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy1Ä
, &
çu»
);

4075 ià(!
	`VERIFY_OK
(
çu»
))

4076 
	`LOG_VFY
("VFY:ƒxpected cat-1‡rgo if\n");

4079 
OP_AGET
:

4080 
tmpTy³
 = 
kRegTy³IÁeg”
;

4081 
ag‘_1Ä_commÚ
;

4082 
OP_AGET_BOOLEAN
:

4083 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4084 
ag‘_1Ä_commÚ
;

4085 
OP_AGET_BYTE
:

4086 
tmpTy³
 = 
kRegTy³By‹
;

4087 
ag‘_1Ä_commÚ
;

4088 
OP_AGET_CHAR
:

4089 
tmpTy³
 = 
kRegTy³Ch¬
;

4090 
ag‘_1Ä_commÚ
;

4091 
OP_AGET_SHORT
:

4092 
tmpTy³
 = 
kRegTy³ShÜt
;

4093 
ag‘_1Ä_commÚ
;

4094 
ag‘_1Ä_commÚ
:

4096 
RegTy³
 
¤cTy³
, 
šdexTy³
;

4098 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
,

4099 &
çu»
);

4100 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4101 ià(!
	`VERIFY_OK
(
çu»
))

4104 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4105 
decIn¢
.
vB
, &
çu»
);

4106 ià(!
	`VERIFY_OK
(
çu»
))

4108 ià(
»sCÏss
 !ğ
NULL
) {

4110 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4111 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4113 
	`LOG_VFY
("VFY: invalid‡get-1nrarget %s\n",

4114 
»sCÏss
->
desütÜ
);

4115 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4120 
¤cTy³
 = 
	`´im™iveTy³ToRegTy³
(

4121 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
);

4123 ià(!
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
¤cTy³
)) {

4124 
	`LOG_VFY
("VFY: invalid‡get-1nr,‡rrayype=%d with"

4126 
¤cTy³
, 
tmpTy³
, 
»sCÏss
->
desütÜ
);

4127 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4132 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4133 
tmpTy³
, &
çu»
);

4137 
OP_AGET_WIDE
:

4139 
RegTy³
 
d¡Ty³
, 
šdexTy³
;

4141 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
,

4142 &
çu»
);

4143 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4144 ià(!
	`VERIFY_OK
(
çu»
))

4147 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4148 
decIn¢
.
vB
, &
çu»
);

4149 ià(!
	`VERIFY_OK
(
çu»
))

4151 ià(
»sCÏss
 !ğ
NULL
) {

4153 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4154 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4156 
	`LOG_VFY
("VFY: invalid‡get-widearget %s\n",

4157 
»sCÏss
->
desütÜ
);

4158 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4163 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
) {

4164 
PRIM_LONG
:

4165 
d¡Ty³
 = 
kRegTy³LÚgLo
;

4167 
PRIM_DOUBLE
:

4168 
d¡Ty³
 = 
kRegTy³DoubËLo
;

4171 
	`LOG_VFY
("VFY: invalid‡get-wide on %s\n",

4172 
»sCÏss
->
desütÜ
);

4173 
d¡Ty³
 = 
kRegTy³Unknown
;

4174 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4184 
d¡Ty³
 = 
kRegTy³LÚgLo
;

4186 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4187 
d¡Ty³
, &
çu»
);

4191 
OP_AGET_OBJECT
:

4193 
RegTy³
 
d¡Ty³
, 
šdexTy³
;

4195 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
,

4196 &
çu»
);

4197 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4198 ià(!
	`VERIFY_OK
(
çu»
))

4202 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4203 
decIn¢
.
vB
, &
çu»
);

4204 ià(!
	`VERIFY_OK
(
çu»
))

4206 ià(
»sCÏss
 !ğ
NULL
) {

4207 
CÏssObjeù
* 
–em’tCÏss
;

4209 
	`as£¹
(
»sCÏss
 !ğ
NULL
);

4210 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
)) {

4211 
	`LOG_VFY
("VFY:‡get-object on‚on-array class\n");

4212 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4215 
	`as£¹
(
»sCÏss
->
–em’tCÏss
 !ğ
NULL
);

4222 ià(
»sCÏss
->
desütÜ
[1] == '[') {

4223 
	`as£¹
(
»sCÏss
->
¬¿yDim
 > 1);

4224 
–em’tCÏss
 = 
	`dvmFšdA¼ayCÏss
(&
»sCÏss
->
desütÜ
[1],

4225 
»sCÏss
->
şassLßd”
);

4226 } ià(
»sCÏss
->
desütÜ
[1] == 'L') {

4227 
	`as£¹
(
»sCÏss
->
¬¿yDim
 == 1);

4228 
–em’tCÏss
 = 
»sCÏss
->elementClass;

4230 
	`LOG_VFY
("VFY:‡get-object on‚on-ref‡rray class (%s)\n",

4231 
»sCÏss
->
desütÜ
);

4232 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4236 
d¡Ty³
 = 
	`»gTy³FromCÏss
(
–em’tCÏss
);

4245 
d¡Ty³
 = 
kRegTy³Z”o
;

4247 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4248 
d¡Ty³
, &
çu»
);

4251 
OP_APUT
:

4252 
tmpTy³
 = 
kRegTy³IÁeg”
;

4253 
­ut_1Ä_commÚ
;

4254 
OP_APUT_BOOLEAN
:

4255 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4256 
­ut_1Ä_commÚ
;

4257 
OP_APUT_BYTE
:

4258 
tmpTy³
 = 
kRegTy³By‹
;

4259 
­ut_1Ä_commÚ
;

4260 
OP_APUT_CHAR
:

4261 
tmpTy³
 = 
kRegTy³Ch¬
;

4262 
­ut_1Ä_commÚ
;

4263 
OP_APUT_SHORT
:

4264 
tmpTy³
 = 
kRegTy³ShÜt
;

4265 
­ut_1Ä_commÚ
;

4266 
­ut_1Ä_commÚ
:

4268 
RegTy³
 
¤cTy³
, 
d¡Ty³
, 
šdexTy³
;

4270 
šdexTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
,

4271 &
çu»
);

4272 
	`checkA¼ayIndexTy³
(
m‘h
, 
šdexTy³
, &
çu»
);

4273 ià(!
	`VERIFY_OK
(
çu»
))

4277 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4278 &
çu»
);

4279 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
tmpTy³
)) {

4280 
	`LOG_VFY
("VFY: invalid„egype %d on‡put instr (need %d)\n",

4281 
¤cTy³
, 
tmpTy³
);

4282 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4286 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4287 
decIn¢
.
vB
, &
çu»
);

4288 ià(!
	`VERIFY_OK
(
çu»
))

4292 ià(
»sCÏss
 =ğ
NULL
)

4295 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4296 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4298 
	`LOG_VFY
("VFY: inv®id‡put-1Ä oÀ%s\n", 
»sCÏss
->
desütÜ
);

4299 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4304 
d¡Ty³
 = 
	`´im™iveTy³ToRegTy³
(

4305 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
);

4306 
	`as£¹
(
d¡Ty³
 !ğ
kRegTy³Unknown
);

4308 ià(!
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
d¡Ty³
)) {

4309 
	`LOG_VFY
("VFY: invalid‡put-1nr on %s (inst=%d dst=%d)\n",

4310 
»sCÏss
->
desütÜ
, 
tmpTy³
, 
d¡Ty³
);

4311 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4316 
OP_APUT_WIDE
:

4317 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
,

4318 &
çu»
);

4319 
	`checkA¼ayIndexTy³
(
m‘h
, 
tmpTy³
, &
çu»
);

4320 ià(!
	`VERIFY_OK
(
çu»
))

4323 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

4324 ià(
	`VERIFY_OK
(
çu»
)) {

4325 
RegTy³
 
ty³Hi
 =

4326 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
+1, &
çu»
);

4327 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy2
, &
çu»
);

4328 
	`checkWidePaœ
(
tmpTy³
, 
ty³Hi
, &
çu»
);

4330 ià(!
	`VERIFY_OK
(
çu»
))

4333 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4334 
decIn¢
.
vB
, &
çu»
);

4335 ià(!
	`VERIFY_OK
(
çu»
))

4337 ià(
»sCÏss
 !ğ
NULL
) {

4339 ià(!
	`dvmIsA¼ayCÏss
(
»sCÏss
è||„esCÏss->
¬¿yDim
 != 1 ||

4340 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
 =ğ
PRIM_NOT
)

4342 
	`LOG_VFY
("VFY: invalid‡put-wide on %s\n",

4343 
»sCÏss
->
desütÜ
);

4344 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4348 
»sCÏss
->
–em’tCÏss
->
´im™iveTy³
) {

4349 
PRIM_LONG
:

4350 
PRIM_DOUBLE
:

4354 
	`LOG_VFY
("VFY: invalid‡put-wide on %s\n",

4355 
»sCÏss
->
desütÜ
);

4356 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4361 
OP_APUT_OBJECT
:

4362 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vC
,

4363 &
çu»
);

4364 
	`checkA¼ayIndexTy³
(
m‘h
, 
tmpTy³
, &
çu»
);

4365 ià(!
	`VERIFY_OK
(
çu»
))

4369 
»sCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4370 
decIn¢
.
vA
, &
çu»
);

4371 ià(!
	`VERIFY_OK
(
çu»
))

4373 ià(
»sCÏss
 !ğ
NULL
) {

4374 
CÏssObjeù
* 
¬¿yCÏss
;

4375 
CÏssObjeù
* 
–em’tCÏss
;

4382 
¬¿yCÏss
 = 
	`g‘CÏssFromRegi¡”
(
wÜkRegs
, 
š¢RegCouÁ
,

4383 
decIn¢
.
vB
, &
çu»
);

4385 ià(
¬¿yCÏss
 !ğ
NULL
) {

4387 ià(!
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
)) {

4388 
	`LOG_VFY
("VFY: invalid‡put-object on %s\n",

4389 
¬¿yCÏss
->
desütÜ
);

4390 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4404 ià(
¬¿yCÏss
->
desütÜ
[1] == '[') {

4405 
	`as£¹
(
¬¿yCÏss
->
¬¿yDim
 > 1);

4406 
–em’tCÏss
 = 
	`dvmFšdA¼ayCÏss
(&
¬¿yCÏss
->
desütÜ
[1],

4407 
¬¿yCÏss
->
şassLßd”
);

4409 
	`as£¹
(
¬¿yCÏss
->
¬¿yDim
 == 1);

4410 
–em’tCÏss
 = 
¬¿yCÏss
->elementClass;

4412 ià(
–em’tCÏss
->
´im™iveTy³
 !ğ
PRIM_NOT
) {

4413 
	`LOG_VFY
("VFY: invalid‡put-object of %s into %s\n",

4414 
»sCÏss
->
desütÜ
, 
¬¿yCÏss
->descriptor);

4415 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4422 
OP_IGET
:

4423 
tmpTy³
 = 
kRegTy³IÁeg”
;

4424 
ig‘_1Ä_commÚ
;

4425 
OP_IGET_BOOLEAN
:

4426 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4427 
ig‘_1Ä_commÚ
;

4428 
OP_IGET_BYTE
:

4429 
tmpTy³
 = 
kRegTy³By‹
;

4430 
ig‘_1Ä_commÚ
;

4431 
OP_IGET_CHAR
:

4432 
tmpTy³
 = 
kRegTy³Ch¬
;

4433 
ig‘_1Ä_commÚ
;

4434 
OP_IGET_SHORT
:

4435 
tmpTy³
 = 
kRegTy³ShÜt
;

4436 
ig‘_1Ä_commÚ
;

4437 
ig‘_1Ä_commÚ
:

4439 
CÏssObjeù
* 
f›ldCÏss
;

4440 
In¡F›ld
* 
š¡F›ld
;

4441 
RegTy³
 
objTy³
, 
f›ldTy³
;

4443 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4444 &
çu»
);

4445 ià(!
	`VERIFY_OK
(
çu»
))

4447 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4448 &
çu»
);

4449 ià(!
	`VERIFY_OK
(
çu»
))

4453 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
š¡F›ld
->
f›ld
.
sigÇtu»
[0]);

4454 ià(
f›ldTy³
 =ğ
kRegTy³Unknown
 ||

4455 !
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
))

4457 
	`LOG_VFY
("VFY: invalid iget-1nr of %s.%s (inst=%d field=%d)\n",

4458 
š¡F›ld
->
f›ld
.
şazz
->
desütÜ
,

4459 
š¡F›ld
->
f›ld
.
Çme
, 
tmpTy³
, 
f›ldTy³
);

4460 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4464 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, 
tmpTy³
,

4465 &
çu»
);

4468 
OP_IGET_WIDE
:

4470 
RegTy³
 
d¡Ty³
;

4471 
CÏssObjeù
* 
f›ldCÏss
;

4472 
In¡F›ld
* 
š¡F›ld
;

4473 
RegTy³
 
objTy³
;

4475 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4476 &
çu»
);

4477 ià(!
	`VERIFY_OK
(
çu»
))

4479 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4480 &
çu»
);

4481 ià(!
	`VERIFY_OK
(
çu»
))

4484 
š¡F›ld
->
f›ld
.
sigÇtu»
[0]) {

4486 
d¡Ty³
 = 
kRegTy³DoubËLo
;

4489 
d¡Ty³
 = 
kRegTy³LÚgLo
;

4492 
	`LOG_VFY
("VFY: invalid iget-wide of %s.%s\n",

4493 
š¡F›ld
->
f›ld
.
şazz
->
desütÜ
,

4494 
š¡F›ld
->
f›ld
.
Çme
);

4495 
d¡Ty³
 = 
kRegTy³Unknown
;

4496 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4499 ià(
	`VERIFY_OK
(
çu»
)) {

4500 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4501 
d¡Ty³
, &
çu»
);

4505 
OP_IGET_OBJECT
:

4507 
CÏssObjeù
* 
f›ldCÏss
;

4508 
In¡F›ld
* 
š¡F›ld
;

4509 
RegTy³
 
objTy³
;

4511 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4512 &
çu»
);

4513 ià(!
	`VERIFY_OK
(
çu»
))

4515 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4516 &
çu»
);

4517 ià(!
	`VERIFY_OK
(
çu»
))

4519 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, &
š¡F›ld
->
f›ld
);

4520 ià(
f›ldCÏss
 =ğ
NULL
) {

4522 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'\n",

4523 
š¡F›ld
->
f›ld
.
sigÇtu»
);

4524 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4527 ià(
	`VERIFY_OK
(
çu»
)) {

4528 
	`as£¹
(!
	`dvmIsPrim™iveCÏss
(
f›ldCÏss
));

4529 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4530 
	`»gTy³FromCÏss
(
f›ldCÏss
), &
çu»
);

4534 
OP_IPUT
:

4535 
tmpTy³
 = 
kRegTy³IÁeg”
;

4536 
ut_1Ä_commÚ
;

4537 
OP_IPUT_BOOLEAN
:

4538 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4539 
ut_1Ä_commÚ
;

4540 
OP_IPUT_BYTE
:

4541 
tmpTy³
 = 
kRegTy³By‹
;

4542 
ut_1Ä_commÚ
;

4543 
OP_IPUT_CHAR
:

4544 
tmpTy³
 = 
kRegTy³Ch¬
;

4545 
ut_1Ä_commÚ
;

4546 
OP_IPUT_SHORT
:

4547 
tmpTy³
 = 
kRegTy³ShÜt
;

4548 
ut_1Ä_commÚ
;

4549 
ut_1Ä_commÚ
:

4551 
RegTy³
 
¤cTy³
, 
f›ldTy³
, 
objTy³
;

4552 
CÏssObjeù
* 
f›ldCÏss
;

4553 
In¡F›ld
* 
š¡F›ld
;

4555 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4556 &
çu»
);

4562 ià(
tmpTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
)

4563 
¤cTy³
 = 
kRegTy³BoŞ—n
;

4566 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
tmpTy³
)) {

4567 
	`LOG_VFY
("VFY: invalid„egype %d on iput instr (need %d)\n",

4568 
¤cTy³
, 
tmpTy³
);

4569 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4573 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4574 &
çu»
);

4575 ià(!
	`VERIFY_OK
(
çu»
))

4577 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4578 &
çu»
);

4579 ià(!
	`VERIFY_OK
(
çu»
))

4581 
	`checkFš®F›ldAcûss
(
m‘h
, &
š¡F›ld
->
f›ld
, &
çu»
);

4582 ià(!
	`VERIFY_OK
(
çu»
))

4586 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
š¡F›ld
->
f›ld
.
sigÇtu»
[0]);

4587 ià(
f›ldTy³
 =ğ
kRegTy³Unknown
 ||

4588 !
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
))

4590 
	`LOG_VFY
("VFY: invalid iput-1nr of %s.%s (inst=%d field=%d)\n",

4591 
š¡F›ld
->
f›ld
.
şazz
->
desütÜ
,

4592 
š¡F›ld
->
f›ld
.
Çme
, 
tmpTy³
, 
f›ldTy³
);

4593 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4598 
OP_IPUT_WIDE
:

4599 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

4600 ià(
	`VERIFY_OK
(
çu»
)) {

4601 
RegTy³
 
ty³Hi
 =

4602 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
+1, &
çu»
);

4603 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy2
, &
çu»
);

4604 
	`checkWidePaœ
(
tmpTy³
, 
ty³Hi
, &
çu»
);

4606 ià(
	`VERIFY_OK
(
çu»
)) {

4607 
CÏssObjeù
* 
f›ldCÏss
;

4608 
In¡F›ld
* 
š¡F›ld
;

4609 
RegTy³
 
objTy³
;

4611 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4612 &
çu»
);

4613 ià(!
	`VERIFY_OK
(
çu»
))

4615 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4616 &
çu»
);

4617 ià(!
	`VERIFY_OK
(
çu»
))

4619 
	`checkFš®F›ldAcûss
(
m‘h
, &
š¡F›ld
->
f›ld
, &
çu»
);

4620 ià(!
	`VERIFY_OK
(
çu»
))

4624 
š¡F›ld
->
f›ld
.
sigÇtu»
[0]) {

4630 
	`LOG_VFY
("VFY: invalid iput-wide of %s.%s\n",

4631 
š¡F›ld
->
f›ld
.
şazz
->
desütÜ
,

4632 
š¡F›ld
->
f›ld
.
Çme
);

4633 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4638 
OP_IPUT_OBJECT
:

4640 
CÏssObjeù
* 
f›ldCÏss
;

4641 
CÏssObjeù
* 
v®ueCÏss
;

4642 
In¡F›ld
* 
š¡F›ld
;

4643 
RegTy³
 
objTy³
, 
v®ueTy³
;

4645 
objTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vB
,

4646 &
çu»
);

4647 ià(!
	`VERIFY_OK
(
çu»
))

4649 
š¡F›ld
 = 
	`g‘In¡F›ld
(
m‘h
, 
unš™M­
, 
objTy³
, 
decIn¢
.
vC
,

4650 &
çu»
);

4651 ià(!
	`VERIFY_OK
(
çu»
))

4653 
	`checkFš®F›ldAcûss
(
m‘h
, &
š¡F›ld
->
f›ld
, &
çu»
);

4654 ià(!
	`VERIFY_OK
(
çu»
))

4657 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, &
š¡F›ld
->
f›ld
);

4658 ià(
f›ldCÏss
 =ğ
NULL
) {

4659 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'\n",

4660 
š¡F›ld
->
f›ld
.
sigÇtu»
);

4661 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4665 
v®ueTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4666 &
çu»
);

4667 ià(!
	`VERIFY_OK
(
çu»
))

4669 ià(!
	`»gTy³IsReã»nû
(
v®ueTy³
)) {

4670 
	`LOG_VFY
("VFY: storing‚on-ref v%d into„ef field '%s' (%s)\n",

4671 
decIn¢
.
vA
, 
š¡F›ld
->
f›ld
.
Çme
,

4672 
f›ldCÏss
->
desütÜ
);

4673 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4676 ià(
v®ueTy³
 !ğ
kRegTy³Z”o
) {

4677 
v®ueCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
v®ueTy³
);

4678 ià(
v®ueCÏss
 =ğ
NULL
) {

4679 
	`LOG_VFY
("VFY: storing uninit„ef v%d into„ef field\n",

4680 
decIn¢
.
vA
);

4681 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4685 ià(!
	`dvmIsIÁ”çûCÏss
(
f›ldCÏss
) &&

4686 !
	`dvmIn¡ªûof
(
v®ueCÏss
, 
f›ldCÏss
))

4688 
	`LOG_VFY
("VFY: storingype '%s' into fieldype '%s' (%s.%s)\n",

4689 
v®ueCÏss
->
desütÜ
, 
f›ldCÏss
->descriptor,

4690 
š¡F›ld
->
f›ld
.
şazz
->
desütÜ
,

4691 
š¡F›ld
->
f›ld
.
Çme
);

4692 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4699 
OP_SGET
:

4700 
tmpTy³
 = 
kRegTy³IÁeg”
;

4701 
sg‘_1Ä_commÚ
;

4702 
OP_SGET_BOOLEAN
:

4703 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4704 
sg‘_1Ä_commÚ
;

4705 
OP_SGET_BYTE
:

4706 
tmpTy³
 = 
kRegTy³By‹
;

4707 
sg‘_1Ä_commÚ
;

4708 
OP_SGET_CHAR
:

4709 
tmpTy³
 = 
kRegTy³Ch¬
;

4710 
sg‘_1Ä_commÚ
;

4711 
OP_SGET_SHORT
:

4712 
tmpTy³
 = 
kRegTy³ShÜt
;

4713 
sg‘_1Ä_commÚ
;

4714 
sg‘_1Ä_commÚ
:

4716 
SticF›ld
* 
¡©icF›ld
;

4717 
RegTy³
 
f›ldTy³
;

4719 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

4720 ià(!
	`VERIFY_OK
(
çu»
))

4731 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
¡©icF›ld
->
f›ld
.
sigÇtu»
[0]);

4732 ià(!
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
)) {

4733 
	`LOG_VFY
("VFY: invalid sget-1nr of %s.%s (inst=%d‡ctual=%d)\n",

4734 
¡©icF›ld
->
f›ld
.
şazz
->
desütÜ
,

4735 
¡©icF›ld
->
f›ld
.
Çme
, 
tmpTy³
, 
f›ldTy³
);

4736 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4740 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, 
tmpTy³
,

4741 &
çu»
);

4744 
OP_SGET_WIDE
:

4746 
SticF›ld
* 
¡©icF›ld
;

4747 
RegTy³
 
d¡Ty³
;

4749 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

4750 ià(!
	`VERIFY_OK
(
çu»
))

4753 
¡©icF›ld
->
f›ld
.
sigÇtu»
[0]) {

4755 
d¡Ty³
 = 
kRegTy³DoubËLo
;

4758 
d¡Ty³
 = 
kRegTy³LÚgLo
;

4761 
	`LOG_VFY
("VFY: invalid sget-wide of %s.%s\n",

4762 
¡©icF›ld
->
f›ld
.
şazz
->
desütÜ
,

4763 
¡©icF›ld
->
f›ld
.
Çme
);

4764 
d¡Ty³
 = 
kRegTy³Unknown
;

4765 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4768 ià(
	`VERIFY_OK
(
çu»
)) {

4769 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4770 
d¡Ty³
, &
çu»
);

4774 
OP_SGET_OBJECT
:

4776 
SticF›ld
* 
¡©icF›ld
;

4777 
CÏssObjeù
* 
f›ldCÏss
;

4779 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

4780 ià(!
	`VERIFY_OK
(
çu»
))

4782 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, &
¡©icF›ld
->
f›ld
);

4783 ià(
f›ldCÏss
 =ğ
NULL
) {

4784 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'\n",

4785 
¡©icF›ld
->
f›ld
.
sigÇtu»
);

4786 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4789 ià(
	`dvmIsPrim™iveCÏss
(
f›ldCÏss
)) {

4790 
	`LOG_VFY
("VFY:‡ttempto get…rim field with sget-object\n");

4791 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4794 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4795 
	`»gTy³FromCÏss
(
f›ldCÏss
), &
çu»
);

4798 
OP_SPUT
:

4799 
tmpTy³
 = 
kRegTy³IÁeg”
;

4800 
¥ut_1Ä_commÚ
;

4801 
OP_SPUT_BOOLEAN
:

4802 
tmpTy³
 = 
kRegTy³BoŞ—n
;

4803 
¥ut_1Ä_commÚ
;

4804 
OP_SPUT_BYTE
:

4805 
tmpTy³
 = 
kRegTy³By‹
;

4806 
¥ut_1Ä_commÚ
;

4807 
OP_SPUT_CHAR
:

4808 
tmpTy³
 = 
kRegTy³Ch¬
;

4809 
¥ut_1Ä_commÚ
;

4810 
OP_SPUT_SHORT
:

4811 
tmpTy³
 = 
kRegTy³ShÜt
;

4812 
¥ut_1Ä_commÚ
;

4813 
¥ut_1Ä_commÚ
:

4815 
RegTy³
 
¤cTy³
, 
f›ldTy³
;

4816 
SticF›ld
* 
¡©icF›ld
;

4818 
¤cTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4819 &
çu»
);

4825 ià(
tmpTy³
 =ğ
kRegTy³BoŞ—n
 && 
¤cTy³
 =ğ
kRegTy³By‹
)

4826 
¤cTy³
 = 
kRegTy³BoŞ—n
;

4829 ià(!
	`ÿnCÚv”tTo1Ä
(
¤cTy³
, 
tmpTy³
)) {

4830 
	`LOG_VFY
("VFY: invalid„egype %d on sput instr (need %d)\n",

4831 
¤cTy³
, 
tmpTy³
);

4832 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4836 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

4837 ià(!
	`VERIFY_OK
(
çu»
))

4839 
	`checkFš®F›ldAcûss
(
m‘h
, &
¡©icF›ld
->
f›ld
, &
çu»
);

4840 ià(!
	`VERIFY_OK
(
çu»
))

4850 
f›ldTy³
 = 
	`´imSigCh¬ToRegTy³
(
¡©icF›ld
->
f›ld
.
sigÇtu»
[0]);

4851 ià(!
	`checkF›ldA¼ayStÜe1Ä
(
tmpTy³
, 
f›ldTy³
)) {

4852 
	`LOG_VFY
("VFY: invalid sput-1nr of %s.%s (inst=%d‡ctual=%d)\n",

4853 
¡©icF›ld
->
f›ld
.
şazz
->
desütÜ
,

4854 
¡©icF›ld
->
f›ld
.
Çme
, 
tmpTy³
, 
f›ldTy³
);

4855 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4860 
OP_SPUT_WIDE
:

4861 
tmpTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
, &
çu»
);

4862 ià(
	`VERIFY_OK
(
çu»
)) {

4863 
RegTy³
 
ty³Hi
 =

4864 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
+1, &
çu»
);

4865 
	`checkTy³C©egÜy
(
tmpTy³
, 
kTy³C©egÜy2
, &
çu»
);

4866 
	`checkWidePaœ
(
tmpTy³
, 
ty³Hi
, &
çu»
);

4868 ià(
	`VERIFY_OK
(
çu»
)) {

4869 
SticF›ld
* 
¡©icF›ld
;

4871 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

4872 ià(!
	`VERIFY_OK
(
çu»
))

4874 
	`checkFš®F›ldAcûss
(
m‘h
, &
¡©icF›ld
->
f›ld
, &
çu»
);

4875 ià(!
	`VERIFY_OK
(
çu»
))

4879 
¡©icF›ld
->
f›ld
.
sigÇtu»
[0]) {

4885 
	`LOG_VFY
("VFY: invalid sput-wide of %s.%s\n",

4886 
¡©icF›ld
->
f›ld
.
şazz
->
desütÜ
,

4887 
¡©icF›ld
->
f›ld
.
Çme
);

4888 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4893 
OP_SPUT_OBJECT
:

4895 
CÏssObjeù
* 
f›ldCÏss
;

4896 
CÏssObjeù
* 
v®ueCÏss
;

4897 
SticF›ld
* 
¡©icF›ld
;

4898 
RegTy³
 
v®ueTy³
;

4900 
¡©icF›ld
 = 
	`g‘SticF›ld
(
m‘h
, 
decIn¢
.
vB
, &
çu»
);

4901 ià(!
	`VERIFY_OK
(
çu»
))

4903 
	`checkFš®F›ldAcûss
(
m‘h
, &
¡©icF›ld
->
f›ld
, &
çu»
);

4904 ià(!
	`VERIFY_OK
(
çu»
))

4907 
f›ldCÏss
 = 
	`g‘F›ldCÏss
(
m‘h
, &
¡©icF›ld
->
f›ld
);

4908 ià(
f›ldCÏss
 =ğ
NULL
) {

4909 
	`LOG_VFY
("VFY: unableo„ecover field class from '%s'\n",

4910 
¡©icF›ld
->
f›ld
.
sigÇtu»
);

4911 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4915 
v®ueTy³
 = 
	`g‘Regi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
decIn¢
.
vA
,

4916 &
çu»
);

4917 ià(!
	`VERIFY_OK
(
çu»
))

4919 ià(!
	`»gTy³IsReã»nû
(
v®ueTy³
)) {

4920 
	`LOG_VFY
("VFY: storing‚on-ref v%d into„ef field '%s' (%s)\n",

4921 
decIn¢
.
vA
, 
¡©icF›ld
->
f›ld
.
Çme
,

4922 
f›ldCÏss
->
desütÜ
);

4923 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4926 ià(
v®ueTy³
 !ğ
kRegTy³Z”o
) {

4927 
v®ueCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
v®ueTy³
);

4928 ià(
v®ueCÏss
 =ğ
NULL
) {

4929 
	`LOG_VFY
("VFY: storing uninit„ef v%d into„ef field\n",

4930 
decIn¢
.
vA
);

4931 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4935 ià(!
	`dvmIsIÁ”çûCÏss
(
f›ldCÏss
) &&

4936 !
	`dvmIn¡ªûof
(
v®ueCÏss
, 
f›ldCÏss
))

4938 
	`LOG_VFY
("VFY: storingype '%s' into fieldype '%s' (%s.%s)\n",

4939 
v®ueCÏss
->
desütÜ
, 
f›ldCÏss
->descriptor,

4940 
¡©icF›ld
->
f›ld
.
şazz
->
desütÜ
,

4941 
¡©icF›ld
->
f›ld
.
Çme
);

4942 
çu»
 = 
VERIFY_ERROR_GENERIC
;

4949 
OP_INVOKE_VIRTUAL
:

4950 
OP_INVOKE_VIRTUAL_RANGE
:

4951 
OP_INVOKE_SUPER
:

4952 
OP_INVOKE_SUPER_RANGE
:

4954 
M‘hod
* 
ÿÎedM‘hod
;

4955 
RegTy³
 
»tuºTy³
;

4956 
boŞ
 
isRªge
;

4957 
boŞ
 
isSu³r
;

4959 
isRªge
 = (
decIn¢
.
İCode
 =ğ
OP_INVOKE_VIRTUAL_RANGE
 ||

4960 
decIn¢
.
İCode
 =ğ
OP_INVOKE_SUPER_RANGE
);

4961 
isSu³r
 = (
decIn¢
.
İCode
 =ğ
OP_INVOKE_SUPER
 ||

4962 
decIn¢
.
İCode
 =ğ
OP_INVOKE_SUPER_RANGE
);

4964 
ÿÎedM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
,

4965 &
decIn¢
, 
unš™M­
, 
METHOD_VIRTUAL
, 
isRªge
,

4966 
isSu³r
, &
çu»
);

4967 ià(!
	`VERIFY_OK
(
çu»
))

4969 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
);

4970 
	`£tResuÉRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
»tuºTy³
, &
çu»
);

4971 
ju¡S‘ResuÉ
 = 
Œue
;

4974 
OP_INVOKE_DIRECT
:

4975 
OP_INVOKE_DIRECT_RANGE
:

4977 
RegTy³
 
»tuºTy³
;

4978 
M‘hod
* 
ÿÎedM‘hod
;

4979 
boŞ
 
isRªge
;

4981 
isRªge
 = (
decIn¢
.
İCode
 =ğ
OP_INVOKE_DIRECT_RANGE
);

4982 
ÿÎedM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
,

4983 &
decIn¢
, 
unš™M­
, 
METHOD_DIRECT
, 
isRªge
,

4984 
çl£
, &
çu»
);

4985 ià(!
	`VERIFY_OK
(
çu»
))

4997 ià(
	`isIn™M‘hod
(
ÿÎedM‘hod
)) {

4998 
RegTy³
 
thisTy³
;

4999 
thisTy³
 = 
	`g‘InvoÿtiÚThis
(
wÜkRegs
, 
š¢RegCouÁ
,

5000 &
decIn¢
, &
çu»
);

5001 ià(!
	`VERIFY_OK
(
çu»
))

5005 ià(
thisTy³
 =ğ
kRegTy³Z”o
) {

5006 
	`LOG_VFY
("VFY: unableo initialize‚ull„ef\n");

5007 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5011 
CÏssObjeù
* 
thisCÏss
;

5013 
thisCÏss
 = 
	`»gTy³Reã»nûToCÏss
(
thisTy³
, 
unš™M­
);

5014 
	`as£¹
(
thisCÏss
 !ğ
NULL
);

5017 ià(
ÿÎedM‘hod
->
şazz
 =ğ
thisCÏss
->
su³r
) {

5018 ià(
thisCÏss
 !ğ
m‘h
->
şazz
) {

5019 
	`LOG_VFY
("VFY: invoke-direct <init> on super only "

5021 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5024 } ià(
ÿÎedM‘hod
->
şazz
 !ğ
thisCÏss
) {

5025 
	`LOG_VFY
("VFY: invoke-direct <init> must be on current "

5027 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5032 ià(!
	`»gTy³IsUnš™Reã»nû
(
thisTy³
)) {

5033 
	`LOG_VFY
("VFY: can only initializehe uninitialized\n");

5034 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5044 
uidx
 = 
	`»gTy³ToUnš™Index
(
thisTy³
);

5045 
	`m¬kRefsAsIn™Ÿlized
(
wÜkRegs
, 
š¢RegCouÁ
, 
unš™M­
,

5046 
thisTy³
, &
çu»
);

5047 ià(!
	`VERIFY_OK
(
çu»
))

5050 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
);

5051 
	`£tResuÉRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
,

5052 
»tuºTy³
, &
çu»
);

5053 
ju¡S‘ResuÉ
 = 
Œue
;

5056 
OP_INVOKE_STATIC
:

5057 
OP_INVOKE_STATIC_RANGE
:

5059 
RegTy³
 
»tuºTy³
;

5060 
M‘hod
* 
ÿÎedM‘hod
;

5061 
boŞ
 
isRªge
;

5063 
isRªge
 = (
decIn¢
.
İCode
 =ğ
OP_INVOKE_STATIC_RANGE
);

5064 
ÿÎedM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
,

5065 &
decIn¢
, 
unš™M­
, 
METHOD_STATIC
, 
isRªge
,

5066 
çl£
, &
çu»
);

5067 ià(!
	`VERIFY_OK
(
çu»
))

5070 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
);

5071 
	`£tResuÉRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
»tuºTy³
, &
çu»
);

5072 
ju¡S‘ResuÉ
 = 
Œue
;

5075 
OP_INVOKE_INTERFACE
:

5076 
OP_INVOKE_INTERFACE_RANGE
:

5078 
RegTy³
 
»tuºTy³
;

5079 
M‘hod
* 
absM‘hod
;

5080 
boŞ
 
isRªge
;

5082 
isRªge
 = (
decIn¢
.
İCode
 =ğ
OP_INVOKE_INTERFACE_RANGE
);

5083 
absM‘hod
 = 
	`v”ifyInvoÿtiÚArgs
(
m‘h
, 
wÜkRegs
, 
š¢RegCouÁ
,

5084 &
decIn¢
, 
unš™M­
, 
METHOD_INTERFACE
, 
isRªge
,

5085 
çl£
, &
çu»
);

5086 ià(!
	`VERIFY_OK
(
çu»
))

5095 
thisTy³
 = 
	`g‘InvoÿtiÚThis
(
wÜkRegs
, 
š¢RegCouÁ
,

5096 &
decIn¢
, &
çu»
);

5097 ià(!
	`VERIFY_OK
(
çu»
))

5100 ià(
thisTy³
 =ğ
kRegTy³Z”o
) {

5103 
CÏssObjeù
* 
thisCÏss
;

5105 
thisCÏss
 = 
	`»gTy³In™ŸlizedReã»nûToCÏss
(
thisTy³
);

5106 ià(
thisCÏss
 =ğ
NULL
) {

5107 
	`LOG_VFY
("VFY: interface call on uninitialized\n");

5108 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5118 ià(
thisCÏss
 !ğ
absM‘hod
->
şazz
 &&

5119 
thisCÏss
 !ğ
gDvm
.
şassJavaLªgObjeù
 &&

5120 !
	`dvmIm¶em’ts
(
thisCÏss
, 
absM‘hod
->
şazz
))

5122 
	`LOG_VFY
("VFY: unableo match‡bsMethod '%s' with %s interfaces\n",

5123 
absM‘hod
->
Çme
, 
thisCÏss
->
desütÜ
);

5124 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5135 
»tuºTy³
 = 
	`g‘M‘hodR‘uºTy³
(
absM‘hod
);

5136 
	`£tResuÉRegi¡”Ty³
(
wÜkRegs
, 
š¢RegCouÁ
, 
»tuºTy³
, &
çu»
);

5137 
ju¡S‘ResuÉ
 = 
Œue
;

5141 
OP_NEG_INT
:

5142 
OP_NOT_INT
:

5143 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5144 
kRegTy³IÁeg”
, kRegTy³IÁeg”, &
çu»
);

5146 
OP_NEG_LONG
:

5147 
OP_NOT_LONG
:

5148 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5149 
kRegTy³LÚgLo
, kRegTy³LÚgLo, &
çu»
);

5151 
OP_NEG_FLOAT
:

5152 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5153 
kRegTy³Flßt
, kRegTy³Flßt, &
çu»
);

5155 
OP_NEG_DOUBLE
:

5156 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5157 
kRegTy³DoubËLo
, kRegTy³DoubËLo, &
çu»
);

5159 
OP_INT_TO_LONG
:

5160 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5161 
kRegTy³LÚgLo
, 
kRegTy³IÁeg”
, &
çu»
);

5163 
OP_INT_TO_FLOAT
:

5164 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5165 
kRegTy³Flßt
, 
kRegTy³IÁeg”
, &
çu»
);

5167 
OP_INT_TO_DOUBLE
:

5168 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5169 
kRegTy³DoubËLo
, 
kRegTy³IÁeg”
, &
çu»
);

5171 
OP_LONG_TO_INT
:

5172 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5173 
kRegTy³IÁeg”
, 
kRegTy³LÚgLo
, &
çu»
);

5175 
OP_LONG_TO_FLOAT
:

5176 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5177 
kRegTy³Flßt
, 
kRegTy³LÚgLo
, &
çu»
);

5179 
OP_LONG_TO_DOUBLE
:

5180 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5181 
kRegTy³DoubËLo
, 
kRegTy³LÚgLo
, &
çu»
);

5183 
OP_FLOAT_TO_INT
:

5184 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5185 
kRegTy³IÁeg”
, 
kRegTy³Flßt
, &
çu»
);

5187 
OP_FLOAT_TO_LONG
:

5188 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5189 
kRegTy³LÚgLo
, 
kRegTy³Flßt
, &
çu»
);

5191 
OP_FLOAT_TO_DOUBLE
:

5192 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5193 
kRegTy³DoubËLo
, 
kRegTy³Flßt
, &
çu»
);

5195 
OP_DOUBLE_TO_INT
:

5196 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5197 
kRegTy³IÁeg”
, 
kRegTy³DoubËLo
, &
çu»
);

5199 
OP_DOUBLE_TO_LONG
:

5200 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5201 
kRegTy³LÚgLo
, 
kRegTy³DoubËLo
, &
çu»
);

5203 
OP_DOUBLE_TO_FLOAT
:

5204 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5205 
kRegTy³Flßt
, 
kRegTy³DoubËLo
, &
çu»
);

5207 
OP_INT_TO_BYTE
:

5208 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5209 
kRegTy³By‹
, 
kRegTy³IÁeg”
, &
çu»
);

5211 
OP_INT_TO_CHAR
:

5212 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5213 
kRegTy³Ch¬
, 
kRegTy³IÁeg”
, &
çu»
);

5215 
OP_INT_TO_SHORT
:

5216 
	`checkUnİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5217 
kRegTy³ShÜt
, 
kRegTy³IÁeg”
, &
çu»
);

5220 
OP_ADD_INT
:

5221 
OP_SUB_INT
:

5222 
OP_MUL_INT
:

5223 
OP_REM_INT
:

5224 
OP_DIV_INT
:

5225 
OP_SHL_INT
:

5226 
OP_SHR_INT
:

5227 
OP_USHR_INT
:

5228 
	`checkBšİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5229 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5231 
OP_AND_INT
:

5232 
OP_OR_INT
:

5233 
OP_XOR_INT
:

5234 
	`checkBšİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5235 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5237 
OP_ADD_LONG
:

5238 
OP_SUB_LONG
:

5239 
OP_MUL_LONG
:

5240 
OP_DIV_LONG
:

5241 
OP_REM_LONG
:

5242 
OP_AND_LONG
:

5243 
OP_OR_LONG
:

5244 
OP_XOR_LONG
:

5245 
	`checkBšİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5246 
kRegTy³LÚgLo
, kRegTy³LÚgLo, kRegTy³LÚgLo, 
çl£
, &
çu»
);

5248 
OP_SHL_LONG
:

5249 
OP_SHR_LONG
:

5250 
OP_USHR_LONG
:

5252 
	`checkBšİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5253 
kRegTy³LÚgLo
, kRegTy³LÚgLo, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5255 
OP_ADD_FLOAT
:

5256 
OP_SUB_FLOAT
:

5257 
OP_MUL_FLOAT
:

5258 
OP_DIV_FLOAT
:

5259 
OP_REM_FLOAT
:

5260 
	`checkBšİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5261 
kRegTy³Flßt
, kRegTy³Flßt, kRegTy³Flßt, 
çl£
, &
çu»
);

5263 
OP_ADD_DOUBLE
:

5264 
OP_SUB_DOUBLE
:

5265 
OP_MUL_DOUBLE
:

5266 
OP_DIV_DOUBLE
:

5267 
OP_REM_DOUBLE
:

5268 
	`checkBšİ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5269 
kRegTy³DoubËLo
, kRegTy³DoubËLo, kRegTy³DoubËLo, 
çl£
,

5270 &
çu»
);

5272 
OP_ADD_INT_2ADDR
:

5273 
OP_SUB_INT_2ADDR
:

5274 
OP_MUL_INT_2ADDR
:

5275 
OP_REM_INT_2ADDR
:

5276 
OP_SHL_INT_2ADDR
:

5277 
OP_SHR_INT_2ADDR
:

5278 
OP_USHR_INT_2ADDR
:

5279 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5280 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5282 
OP_AND_INT_2ADDR
:

5283 
OP_OR_INT_2ADDR
:

5284 
OP_XOR_INT_2ADDR
:

5285 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5286 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5288 
OP_DIV_INT_2ADDR
:

5289 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5290 
kRegTy³IÁeg”
, kRegTy³IÁeg”, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5292 
OP_ADD_LONG_2ADDR
:

5293 
OP_SUB_LONG_2ADDR
:

5294 
OP_MUL_LONG_2ADDR
:

5295 
OP_DIV_LONG_2ADDR
:

5296 
OP_REM_LONG_2ADDR
:

5297 
OP_AND_LONG_2ADDR
:

5298 
OP_OR_LONG_2ADDR
:

5299 
OP_XOR_LONG_2ADDR
:

5300 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5301 
kRegTy³LÚgLo
, kRegTy³LÚgLo, kRegTy³LÚgLo, 
çl£
, &
çu»
);

5303 
OP_SHL_LONG_2ADDR
:

5304 
OP_SHR_LONG_2ADDR
:

5305 
OP_USHR_LONG_2ADDR
:

5306 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5307 
kRegTy³LÚgLo
, kRegTy³LÚgLo, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5309 
OP_ADD_FLOAT_2ADDR
:

5310 
OP_SUB_FLOAT_2ADDR
:

5311 
OP_MUL_FLOAT_2ADDR
:

5312 
OP_DIV_FLOAT_2ADDR
:

5313 
OP_REM_FLOAT_2ADDR
:

5314 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5315 
kRegTy³Flßt
, kRegTy³Flßt, kRegTy³Flßt, 
çl£
, &
çu»
);

5317 
OP_ADD_DOUBLE_2ADDR
:

5318 
OP_SUB_DOUBLE_2ADDR
:

5319 
OP_MUL_DOUBLE_2ADDR
:

5320 
OP_DIV_DOUBLE_2ADDR
:

5321 
OP_REM_DOUBLE_2ADDR
:

5322 
	`checkBšİ2addr
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5323 
kRegTy³DoubËLo
, kRegTy³DoubËLo, kRegTy³DoubËLo, 
çl£
,

5324 &
çu»
);

5326 
OP_ADD_INT_LIT16
:

5327 
OP_RSUB_INT
:

5328 
OP_MUL_INT_LIT16
:

5329 
OP_DIV_INT_LIT16
:

5330 
OP_REM_INT_LIT16
:

5331 
	`checkL™İ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5332 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5334 
OP_AND_INT_LIT16
:

5335 
OP_OR_INT_LIT16
:

5336 
OP_XOR_INT_LIT16
:

5337 
	`checkL™İ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5338 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5340 
OP_ADD_INT_LIT8
:

5341 
OP_RSUB_INT_LIT8
:

5342 
OP_MUL_INT_LIT8
:

5343 
OP_DIV_INT_LIT8
:

5344 
OP_REM_INT_LIT8
:

5345 
OP_SHL_INT_LIT8
:

5346 
	`checkL™İ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5347 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
çl£
, &
çu»
);

5349 
OP_SHR_INT_LIT8
:

5350 
tmpTy³
 = 
	`adju¡FÜRightShiá
(
wÜkRegs
, 
š¢RegCouÁ
,

5351 
decIn¢
.
vB
, decIn¢.
vC
, 
çl£
, &
çu»
);

5352 
	`checkL™İ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5353 
tmpTy³
, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5355 
OP_USHR_INT_LIT8
:

5356 
tmpTy³
 = 
	`adju¡FÜRightShiá
(
wÜkRegs
, 
š¢RegCouÁ
,

5357 
decIn¢
.
vB
, decIn¢.
vC
, 
Œue
, &
çu»
);

5358 
	`checkL™İ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5359 
tmpTy³
, 
kRegTy³IÁeg”
, 
çl£
, &
çu»
);

5361 
OP_AND_INT_LIT8
:

5362 
OP_OR_INT_LIT8
:

5363 
OP_XOR_INT_LIT8
:

5364 
	`checkL™İ
(
wÜkRegs
, 
š¢RegCouÁ
, &
decIn¢
,

5365 
kRegTy³IÁeg”
, kRegTy³IÁeg”, 
Œue
, &
çu»
);

5373 
OP_THROW_VERIFICATION_ERROR
:

5408 
OP_EXECUTE_INLINE
:

5409 
OP_INVOKE_DIRECT_EMPTY
:

5410 
OP_IGET_QUICK
:

5411 
OP_IGET_WIDE_QUICK
:

5412 
OP_IGET_OBJECT_QUICK
:

5413 
OP_IPUT_QUICK
:

5414 
OP_IPUT_WIDE_QUICK
:

5415 
OP_IPUT_OBJECT_QUICK
:

5416 
OP_INVOKE_VIRTUAL_QUICK
:

5417 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

5418 
OP_INVOKE_SUPER_QUICK
:

5419 
OP_INVOKE_SUPER_QUICK_RANGE
:

5420 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5424 
OP_UNUSED_3E
:

5425 
OP_UNUSED_3F
:

5426 
OP_UNUSED_40
:

5427 
OP_UNUSED_41
:

5428 
OP_UNUSED_42
:

5429 
OP_UNUSED_43
:

5430 
OP_UNUSED_73
:

5431 
OP_UNUSED_79
:

5432 
OP_UNUSED_7A
:

5433 
OP_UNUSED_E3
:

5434 
OP_UNUSED_E4
:

5435 
OP_UNUSED_E5
:

5436 
OP_UNUSED_E6
:

5437 
OP_UNUSED_E7
:

5438 
OP_UNUSED_E8
:

5439 
OP_UNUSED_E9
:

5440 
OP_UNUSED_EA
:

5441 
OP_UNUSED_EB
:

5442 
OP_UNUSED_EC
:

5443 
OP_UNUSED_EF
:

5444 
OP_UNUSED_F1
:

5445 
OP_UNUSED_FC
:

5446 
OP_UNUSED_FD
:

5447 
OP_UNUSED_FE
:

5448 
OP_UNUSED_FF
:

5449 
çu»
 = 
VERIFY_ERROR_GENERIC
;

5458 ià(!
	`VERIFY_OK
(
çu»
)) {

5459 ià(
çu»
 =ğ
VERIFY_ERROR_GENERIC
 || 
gDvm
.
İtimizšg
) {

5461 
	`LOG_VFY_METH
(
m‘h
, "VFY:„ejecting opcode 0x%02x‡t 0x%04x\n",

5462 
decIn¢
.
İCode
, 
š¢Idx
);

5463 
ba
;

5466 
	`LOGD
("VFY:„eplacing opcode 0x%02x‡t 0x%04x\n",

5467 
decIn¢
.
İCode
, 
š¢Idx
);

5468 ià(!
	`»¶aûFašgIn¡ruùiÚ
(
m‘h
, 
š¢FÏgs
, 
š¢Idx
, 
çu»
)) {

5469 
	`LOG_VFY_METH
(
m‘h
, "VFY:„ejecting opcode 0x%02x‡t 0x%04x\n",

5470 
decIn¢
.
İCode
, 
š¢Idx
);

5471 
ba
;

5474 
š¢s
 = 
m‘h
->š¢ + 
š¢Idx
;

5477 
çu»
 = 
VERIFY_ERROR_NONE
;

5478 
ÃxtFÏgs
 = 
kIn¡rCªThrow
;

5487 ià(!
ju¡S‘ResuÉ
) {

5488 
»g
 = 
	`RESULT_REGISTER
(
š¢RegCouÁ
);

5489 
wÜkRegs
[
»g
] = wÜkRegs[»g+1] = 
kRegTy³Unknown
;

5495 ià((
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

5496 
š¢Width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
š¢Idx
);

5497 ià(
š¢Idx
+
š¢Width
 >ğ
š¢sSize
) {

5498 
	`LOG_VFY_METH
(
m‘h
,

5500 
š¢Idx
);

5501 
ba
;

5508 ià(!
	`checkMoveExû±iÚ
(
m‘h
, 
š¢Idx
+
š¢Width
, "next"))

5509 
ba
;

5511 ià(
	`g‘Regi¡”Lše
(
»gTabË
, 
š¢Idx
+
š¢Width
è!ğ
NULL
) {

5516 
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
š¢Idx
+
š¢Width
,

5517 
wÜkRegs
);

5524 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
š¢Idx
+
š¢Width
, 
Œue
);

5538 ià((
ÃxtFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

5539 
boŞ
 
isCÚd™iÚ®
;

5541 ià(!
	`dvmG‘B¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
š¢Idx
, &
b¿nchT¬g‘
,

5542 &
isCÚd™iÚ®
))

5545 
	`LOG_VFY_METH
(
m‘h
, "VFY: bad b¿nch‡ˆ%d\n", 
š¢Idx
);

5546 
ba
;

5548 
	`as£¹
(
isCÚd™iÚ®
 || (
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) == 0);

5549 
	`as£¹
(!
isCÚd™iÚ®
 || (
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0);

5551 ià(!
	`checkMoveExû±iÚ
(
m‘h
, 
š¢Idx
+
b¿nchT¬g‘
, "branch"))

5552 
ba
;

5555 
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
š¢Idx
+
b¿nchT¬g‘
,

5556 
wÜkRegs
);

5565 ià((
ÃxtFÏgs
 & 
kIn¡rCªSw™ch
) != 0) {

5566 
off£tToSw™ch
 = 
š¢s
[1] | (((
s4
)insns[2]) << 16);

5567 cÚ¡ 
u2
* 
sw™chIn¢s
 = 
š¢s
 + 
off£tToSw™ch
;

5568 
sw™chCouÁ
 = 
sw™chIn¢s
[1];

5569 
off£tToT¬g‘s
, 
rg
;

5571 ià((*
š¢s
 & 0xffè=ğ
OP_PACKED_SWITCH
) {

5573 
off£tToT¬g‘s
 = 4;

5576 
	`as£¹
((*
š¢s
 & 0xffè=ğ
OP_SPARSE_SWITCH
);

5577 
off£tToT¬g‘s
 = 2 + 2*
sw™chCouÁ
;

5581 
rg
 = 0;¬g < 
sw™chCouÁ
;arg++) {

5582 
off£t
, 
absOff£t
;

5585 
off£t
 = 
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2] |

5586 (((
s4
è
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2 +1]) << 16);

5587 
absOff£t
 = 
š¢Idx
 + 
off£t
;

5589 
	`as£¹
(
absOff£t
 >ğ0 &&‡bsOff£ˆ< 
š¢sSize
);

5591 ià(!
	`checkMoveExû±iÚ
(
m‘h
, 
absOff£t
, "switch"))

5592 
ba
;

5594 
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
absOff£t
, 
wÜkRegs
);

5603 ià((
ÃxtFÏgs
 & 
kIn¡rCªThrow
è!ğ0 && 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
š¢Idx
))

5605 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

5606 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

5607 
DexC©chI‹¿tÜ
 
™”©Ü
;

5609 ià(
	`dexFšdC©chHªdËr
(&
™”©Ü
, 
pCode
, 
š¢Idx
)) {

5611 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

5613 ià(
hªdËr
 =ğ
NULL
) {

5618 
	`upd©eRegi¡”s
(
m‘h
, 
š¢FÏgs
, 
»gTabË
, 
hªdËr
->
add»ss
,

5619 
’ŒyRegs
);

5630 ià((
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

5631 *
pS¹Guess
 = 
š¢Idx
 + 
	`dvmIn¢G‘Width
(
š¢FÏgs
, insnIdx);

5632 } ià((
ÃxtFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

5634 *
pS¹Guess
 = 
š¢Idx
 + 
b¿nchT¬g‘
;

5637 
	`as£¹
(*
pS¹Guess
 >ğ0 && *pS¹Gues < 
š¢sSize
 &&

5638 
	`dvmIn¢G‘Width
(
š¢FÏgs
, *
pS¹Guess
) != 0);

5640 
»suÉ
 = 
Œue
;

5642 
ba
:

5643  
»suÉ
;

5644 
	}
}

5651 
	$logLoÿlsCb
(*
úxt
, 
u2
 
»g
, 
u4
 
¡¬tAdd»ss
, u4 
’dAdd»ss
,

5652 cÚ¡ *
Çme
, cÚ¡ *
desütÜ
,

5653 cÚ¡ *
sigÇtu»
)

5655 
addr
 = *((*)
úxt
);

5657 ià(
addr
 >ğ(è
¡¬tAdd»ss
 &&‡dd¸< (è
’dAdd»ss
)

5659 
	`LOGI
(" %2d: '%s' %s\n", 
»g
, 
Çme
, 
desütÜ
);

5661 
	}
}

5666 
	$dumpRegTy³s
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
,

5667 cÚ¡ 
RegTy³
* 
addrRegs
, 
addr
, cÚ¡ * 
addrName
,

5668 cÚ¡ 
Unš™In¡ªûM­
* 
unš™M­
, 
di¥ÏyFÏgs
)

5670 
»gCouÁ
 = 
m‘h
->
»gi¡”sSize
;

5671 
fuÎRegCouÁ
 = 
»gCouÁ
 + 
kExŒaRegs
;

5672 
boŞ
 
b¿nchT¬g‘
 = 
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
addr
);

5673 
i
;

5675 
	`as£¹
(
addr
 >ğ0 &&‡dd¸< (è
	`dvmG‘M‘hodIn¢sSize
(
m‘h
));

5677 
»gCh¬Size
 = 
fuÎRegCouÁ
 + (fullRegCount-1)/4 + 2 +1;

5678 
»gCh¬s
[
»gCh¬Size
 +1];

5679 
	`mem£t
(
»gCh¬s
, ' ', 
»gCh¬Size
);

5680 
»gCh¬s
[0] = '[';

5681 ià(
»gCouÁ
 == 0)

5682 
»gCh¬s
[1] = ']';

5684 
»gCh¬s
[1 + (
»gCouÁ
-1) + (regCount-1)/4 +1] = ']';

5685 
»gCh¬s
[
»gCh¬Size
] = '\0';

5689 
i
 = 0; i < 
»gCouÁ
 + 
kExŒaRegs
; i++) {

5690 
tch
;

5692 
addrRegs
[
i
]) {

5693 
kRegTy³Unknown
: 
tch
 = '.'; ;

5694 
kRegTy³CÚæiù
: 
tch
 = 'X'; ;

5695 
kRegTy³Flßt
: 
tch
 = 'F'; ;

5696 
kRegTy³Z”o
: 
tch
 = '0'; ;

5697 
kRegTy³OÃ
: 
tch
 = '1'; ;

5698 
kRegTy³BoŞ—n
: 
tch
 = 'Z'; ;

5699 
kRegTy³PosBy‹
: 
tch
 = 'b'; ;

5700 
kRegTy³By‹
: 
tch
 = 'B'; ;

5701 
kRegTy³PosShÜt
: 
tch
 = 's'; ;

5702 
kRegTy³ShÜt
: 
tch
 = 'S'; ;

5703 
kRegTy³Ch¬
: 
tch
 = 'C'; ;

5704 
kRegTy³IÁeg”
: 
tch
 = 'I'; ;

5705 
kRegTy³LÚgLo
: 
tch
 = 'J'; ;

5706 
kRegTy³LÚgHi
: 
tch
 = 'j'; ;

5707 
kRegTy³DoubËLo
: 
tch
 = 'D'; ;

5708 
kRegTy³DoubËHi
: 
tch
 = 'd'; ;

5710 ià(
	`»gTy³IsReã»nû
(
addrRegs
[
i
])) {

5711 ià(
	`»gTy³IsUnš™Reã»nû
(
addrRegs
[
i
]))

5712 
tch
 = 'U';

5714 
tch
 = 'L';

5716 
tch
 = '*';

5717 
	`as£¹
(
çl£
);

5722 ià(
i
 < 
»gCouÁ
)

5723 
»gCh¬s
[1 + 
i
 + (i/4)] = 
tch
;

5725 
»gCh¬s
[1 + 
i
 + (i/4è+ 2] = 
tch
;

5728 ià(
addr
 =ğ0 && 
addrName
 !ğ
NULL
)

5729 
	`LOGI
("%c% %s\n", 
b¿nchT¬g‘
 ? '>' : ' ', 
addrName
, 
»gCh¬s
);

5731 
	`LOGI
("%c0x%04x %s\n", 
b¿nchT¬g‘
 ? '>' : ' ', 
addr
, 
»gCh¬s
);

5733 ià(
di¥ÏyFÏgs
 & 
DRT_SHOW_REF_TYPES
) {

5734 
i
 = 0; i < 
»gCouÁ
 + 
kExŒaRegs
; i++) {

5735 ià(
	`»gTy³IsReã»nû
(
addrRegs
[
i
]è&&‡ddrRegs[i] !ğ
kRegTy³Z”o
)

5737 
CÏssObjeù
* 
şazz
;

5739 
şazz
 = 
	`»gTy³Reã»nûToCÏss
(
addrRegs
[
i
], 
unš™M­
);

5740 
	`as£¹
(
	`dvmV®id©eObjeù
((
Objeù
*)
şazz
));

5741 ià(
i
 < 
»gCouÁ
) {

5742 
	`LOGI
(" %2d: 0x%08x %s%s\n",

5743 
i
, 
addrRegs
[i],

5744 
	`»gTy³IsUnš™Reã»nû
(
addrRegs
[
i
]) ? "[U]" : "",

5745 
şazz
->
desütÜ
);

5747 
	`LOGI
(" RS: 0x%08x %s%s\n",

5748 
addrRegs
[
i
],

5749 
	`»gTy³IsUnš™Reã»nû
(
addrRegs
[
i
]) ? "[U]" : "",

5750 
şazz
->
desütÜ
);

5755 ià(
di¥ÏyFÏgs
 & 
DRT_SHOW_LOCALS
) {

5756 
	`dexDecodeDebugInfo
(
m‘h
->
şazz
->
pDvmDex
->
pDexFe
,

5757 
	`dvmG‘M‘hodCode
(
m‘h
),

5758 
m‘h
->
şazz
->
desütÜ
,

5759 
m‘h
->
´ÙÙy³
.
´ÙoIdx
,

5760 
m‘h
->
acûssFÏgs
,

5761 
NULL
, 
logLoÿlsCb
, &
addr
);

5763 
	}
}

	@analysis/CodeVerify.h

20 #iâdeà
_DALVIK_CODEVERIFY


21 
	#_DALVIK_CODEVERIFY


	)

23 
	~"ª®ysis/V”ifySubs.h
"

60 
	mkRegTy³Unknown
 = 0,

61 
	mkRegTy³Unš™
 = 1,

62 
	mkRegTy³CÚæiù
,

68 
	#kRegTy³1ÄSTART
 
kRegTy³Flßt


	)

69 
	mkRegTy³Flßt
,

70 
	mkRegTy³Z”o
,

71 
	mkRegTy³OÃ
,

72 
	mkRegTy³BoŞ—n
,

73 
	mkRegTy³PosBy‹
,

74 
	mkRegTy³By‹
,

75 
	mkRegTy³PosShÜt
,

76 
	mkRegTy³ShÜt
,

77 
	mkRegTy³Ch¬
,

78 
	mkRegTy³IÁeg”
,

79 
	#kRegTy³1ÄEND
 
kRegTy³IÁeg”


	)

81 
	mkRegTy³LÚgLo
,

82 
	mkRegTy³LÚgHi
,

83 
	mkRegTy³DoubËLo
,

84 
	mkRegTy³DoubËHi
,

96 
	mkRegTy³MAX


98 
	#kRegTy³Unš™Mask
 0xff

	)

99 
	#kRegTy³Unš™Shiá
 8

	)

107 
u4
 
	tRegTy³
;

110 cÚ¡ 
gDvmM”geTab
[
kRegTy³MAX
][kRegTypeMAX];

117 
INLINE
 
boŞ
 
	$dvmIn¢IsOpcode
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

118  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgWidthMask
) != 0;

119 
	}
}

124 
INLINE
 
	$dvmIn¢G‘Width
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

125  
š¢FÏgs
[
addr
] & 
kIn¢FÏgWidthMask
;

126 
	}
}

131 
INLINE
 
boŞ
 
	$dvmIn¢IsChªged
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

132  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgChªged
) != 0;

133 
	}
}

134 
INLINE
 
	$dvmIn¢S‘Chªged
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
, 
boŞ
 
chªged
)

136 ià(
chªged
)

137 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgChªged
;

139 
š¢FÏgs
[
addr
] &ğ~
kIn¢FÏgChªged
;

140 
	}
}

145 
INLINE
 
boŞ
 
	$dvmIn¢IsVis™ed
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

146  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgVis™ed
) != 0;

147 
	}
}

148 
INLINE
 
	$dvmIn¢S‘Vis™ed
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
, 
boŞ
 
chªged
)

150 ià(
chªged
)

151 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgVis™ed
;

153 
š¢FÏgs
[
addr
] &ğ~
kIn¢FÏgVis™ed
;

154 
	}
}

159 
INLINE
 
boŞ
 
	$dvmIn¢IsVis™edOrChªged
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

160  (
š¢FÏgs
[
addr
] & (
kIn¢FÏgVis™ed
|
kIn¢FÏgChªged
)) != 0;

161 
	}
}

166 
INLINE
 
boŞ
 
	$dvmIn¢IsInTry
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

167  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgInTry
) != 0;

168 
	}
}

169 
INLINE
 
	$dvmIn¢S‘InTry
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
, 
boŞ
 
šTry
)

171 
	`as£¹
(
šTry
);

173 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgInTry
;

176 
	}
}

181 
INLINE
 
boŞ
 
	$dvmIn¢IsB¿nchT¬g‘
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

182  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgB¿nchT¬g‘
) != 0;

183 
	}
}

184 
INLINE
 
	$dvmIn¢S‘B¿nchT¬g‘
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
,

185 
boŞ
 
isB¿nch
)

187 
	`as£¹
(
isB¿nch
);

189 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgB¿nchT¬g‘
;

192 
	}
}

197 
INLINE
 
boŞ
 
	$dvmIn¢IsGcPošt
(cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
addr
) {

198  (
š¢FÏgs
[
addr
] & 
kIn¢FÏgGcPošt
) != 0;

199 
	}
}

200 
INLINE
 
	$dvmIn¢S‘GcPošt
(
In¢FÏgs
* 
š¢FÏgs
, 
addr
,

201 
boŞ
 
isGcPošt
)

203 
	`as£¹
(
isGcPošt
);

205 
š¢FÏgs
[
addr
] |ğ
kIn¢FÏgGcPošt
;

208 
	}
}

215 
	sUnš™In¡ªûM­
 {

216 
	mnumEÁr›s
;

218 
	maddr
;

219 
CÏssObjeù
* 
	mşazz
;

220 } 
	mm­
[1];

221 } 
	tUnš™In¡ªûM­
;

222 
	#kUnš™ThisArgAddr
 (-1)

	)

223 
	#kUnš™ThisArgSlÙ
 0

	)

228 
Unš™In¡ªûM­
* 
dvmC»©eUnš™In¡ªûM­
(cÚ¡ 
M‘hod
* 
m‘h
,

229 cÚ¡ 
In¢FÏgs
* 
š¢FÏgs
, 
ÃwIn¡ªûCouÁ
);

234 
dvmF»eUnš™In¡ªûM­
(
Unš™In¡ªûM­
* 
unš™M­
);

262 
boŞ
 
dvmV”ifyCodeFlow
(
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

263 
Unš™In¡ªûM­
* 
unš™M­
);

	@analysis/DexOptimize.c

25 
	~"D®vik.h
"

26 
	~"libdex/In¡rUts.h
"

27 
	~"libdex/O±InvoÿtiÚ.h
"

28 
	~"ª®ysis/Regi¡”M­.h
"

30 
	~<zlib.h
>

32 
	~<¡dlib.h
>

33 
	~<uni¡d.h
>

34 
	~<sys/mmª.h
>

35 
	~<sys/¡©.h
>

36 
	~<sys/fe.h
>

37 
	~<sys/wa™.h
>

38 
	~<fú.h
>

39 
	~<”ºo.h
>

45 
	sIÆšeSub
 {

46 
M‘hod
* 
	mm‘hod
;

47 
	mšlšeIdx
;

48 } 
	tIÆšeSub
;

52 
wr™eD•’d’c›s
(
fd
, 
u4
 
modWh’
, u4 
üc
);

53 
boŞ
 
wr™eAuxD©a
(
fd
, cÚ¡ 
DexCÏssLookup
* 
pCÏssLookup
,\

54 cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
, cÚ¡ 
Regi¡”M­Bud”
* 
pRegM­Bud”
);

55 
logFaedWr™e
(
size_t
 
ex³ùed
, 
ssize_t
 
aùu®
, cÚ¡ * 
msg
,

56 
”r
);

58 
boŞ
 
»wr™eDex
(
u1
* 
addr
, 
Ën
, boŞ 
doV”ify
, boŞ 
doO±
,\

59 
u4
* 
pH—d”FÏgs
, 
DexCÏssLookup
** 
µCÏssLookup
);

60 
upd©eChecksum
(
u1
* 
addr
, 
Ën
, 
DexH—d”
* 
pH—d”
);

61 
boŞ
 
lßdAÎCÏs£s
(
DvmDex
* 
pDvmDex
);

62 
İtimizeLßdedCÏs£s
(
DexFe
* 
pDexFe
);

63 
İtimizeCÏss
(
CÏssObjeù
* 
şazz
, cÚ¡ 
IÆšeSub
* 
šlšeSubs
);

64 
boŞ
 
İtimizeM‘hod
(
M‘hod
* 
m‘hod
, cÚ¡ 
IÆšeSub
* 
šlšeSubs
);

65 
»wr™eIn¡F›ld
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
OpCode
 
ÃwOpc
);

66 
boŞ
 
»wr™eVœtu®Invoke
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
OpCode
 
ÃwOpc
);

67 
boŞ
 
»wr™eDœeùInvoke
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
);

68 
boŞ
 
»wr™eExecu‹IÆše
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
,

69 
M‘hodTy³
 
m‘hodTy³
, cÚ¡ 
IÆšeSub
* 
šlšeSubs
);

95 
	$dvmO³nCachedDexFe
(cÚ¡ * 
feName
, cÚ¡ * 
ÿcheFeName
,

96 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
, boŞ* 
pNewFe
, boŞ 
ü—‹IfMissšg
)

98 
fd
, 
cc
;

99 
¡©
 
fdSt
, 
feSt
;

100 
boŞ
 
»adOÆy
 = 
çl£
;

102 *
pNewFe
 = 
çl£
;

104 
»Œy
:

109 
fd
 = 
ü—‹IfMissšg
 ? 
	`İ’
(
ÿcheFeName
, 
O_CREAT
|
O_RDWR
, 0644) : -1;

110 ià(
fd
 < 0) {

111 
fd
 = 
	`İ’
(
ÿcheFeName
, 
O_RDONLY
, 0);

112 ià(
fd
 < 0) {

113 ià(
ü—‹IfMissšg
) {

114 
	`LOGE
("Can't open dex cache '%s': %s\n",

115 
ÿcheFeName
, 
	`¡»¼Ü
(
”ºo
));

117  
fd
;

119 
»adOÆy
 = 
Œue
;

127 
ŞdStus
;

128 
	`LOGV
("DexOpt:†ocking cache file %s (fd=%d, boot=%d)\n",

129 
ÿcheFeName
, 
fd
, 
isBoÙ¡¿p
);

130 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

131 
cc
 = 
	`æock
(
fd
, 
LOCK_EX
 | 
LOCK_NB
);

132 ià(
cc
 != 0) {

133 
	`LOGD
("DexO±: sË•šg oÀæock(%s)\n", 
ÿcheFeName
);

134 
cc
 = 
	`æock
(
fd
, 
LOCK_EX
);

136 
	`dvmChªgeStus
(
NULL
, 
ŞdStus
);

137 ià(
cc
 != 0) {

138 
	`LOGE
("Cª'ˆlock dex cach'%s': %d\n", 
ÿcheFeName
, 
cc
);

139 
	`şo£
(
fd
);

142 
	`LOGV
("DexOpt:†ocked cache file\n");

151 
cc
 = 
	`f¡©
(
fd
, &
fdSt
);

152 ià(
cc
 != 0) {

153 
	`LOGE
("Cª'ˆ¡© o³Àf'%s'\n", 
ÿcheFeName
);

154 
	`LOGVV
("DexO±: uÆockšg cachf%s\n", 
ÿcheFeName
);

155 
şo£_ç
;

157 
cc
 = 
	`¡©
(
ÿcheFeName
, &
feSt
);

158 ià(
cc
 != 0 ||

159 
fdSt
.
¡_dev
 !ğ
feSt
.¡_dev || fdSt.
¡_šo
 != fileStat.st_ino)

161 
	`LOGD
("DexOpt: our open cache file is stale; sleeping‡nd„etrying\n");

162 
	`LOGVV
("DexO±: uÆockšg cachf%s\n", 
ÿcheFeName
);

163 
	`æock
(
fd
, 
LOCK_UN
);

164 
	`şo£
(
fd
);

165 
	`u¦“p
(250 * 1000);

166 
»Œy
;

176 ià(
fdSt
.
¡_size
 == 0) {

177 ià(
»adOÆy
) {

178 
	`LOGW
("DexOpt: file has zero†ength‡nd isn't writable\n");

179 
şo£_ç
;

181 
cc
 = 
	`dexO±C»©eEm±yH—d”
(
fd
);

182 ià(
cc
 != 0)

183 
şo£_ç
;

184 *
pNewFe
 = 
Œue
;

185 
	`LOGV
("DexOpt: successfully initialized‚ew cache file\n");

187 
boŞ
 
ex³ùV”ify
, 
ex³ùO±
;

189 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
)

190 
ex³ùV”ify
 = 
çl£
;

191 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
)

192 
ex³ùV”ify
 = !
isBoÙ¡¿p
;

194 
ex³ùV”ify
 = 
Œue
;

196 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_NONE
)

197 
ex³ùO±
 = 
çl£
;

198 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
)

199 
ex³ùO±
 = 
ex³ùV”ify
;

201 
ex³ùO±
 = 
Œue
;

203 
	`LOGV
("checking deps,ƒxpecting vfy=%d opt=%d\n",

204 
ex³ùV”ify
, 
ex³ùO±
);

206 ià(!
	`dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
Œue
, 
modWh’
, 
üc
,

207 
ex³ùV”ify
, 
ex³ùO±
))

209 ià(
»adOÆy
) {

216 ià(
ü—‹IfMissšg
) {

217 
	`LOGW
("Cached DEX '%s' (%s) is stale‡nd‚ot writable\n",

218 
feName
, 
ÿcheFeName
);

220 
şo£_ç
;

244 
	`LOGD
("Stale deps in cache file;„emoving‡nd„etrying\n");

245 ià(
	`árunÿ‹
(
fd
, 0) != 0) {

246 
	`LOGW
("Warning: unableoruncate cache file '%s': %s\n",

247 
ÿcheFeName
, 
	`¡»¼Ü
(
”ºo
));

250 ià(
	`uÆšk
(
ÿcheFeName
) != 0) {

251 
	`LOGW
("Warning: unableo„emove cache file '%s': %d %s\n",

252 
ÿcheFeName
, 
”ºo
, 
	`¡»¼Ü
(errno));

255 
	`LOGVV
("DexO±: uÆockšg cachf%s\n", 
ÿcheFeName
);

256 
	`æock
(
fd
, 
LOCK_UN
);

257 
	`şo£
(
fd
);

258 
»Œy
;

260 
	`LOGV
("DexOpt: good deps in cache file\n");

264 
	`as£¹
(
fd
 >= 0);

265  
fd
;

267 
şo£_ç
:

268 
	`æock
(
fd
, 
LOCK_UN
);

269 
	`şo£
(
fd
);

271 
	}
}

278 
boŞ
 
	$dvmUÆockCachedDexFe
(
fd
)

280 
	`LOGVV
("DexO±: uÆockšg cachffd=%d\n", 
fd
);

281  (
	`æock
(
fd
, 
LOCK_UN
) == 0);

282 
	}
}

309 
boŞ
 
	$dvmO±imizeDexFe
(
fd
, 
off_t
 
dexOff£t
, 
dexL’gth
,

310 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
)

312 cÚ¡ * 
Ï¡P¬t
 = 
	`¡¼chr
(
feName
, '/');

313 ià(
Ï¡P¬t
 !ğ
NULL
)

314 
Ï¡P¬t
++;

316 
Ï¡P¬t
 = 
feName
;

329 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
 &&

330 (
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_NONE
 ||

331 
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
))

333 
	`LOGD
("DexO±: --- BEGIN (quickè'%s' ---\n", 
Ï¡P¬t
);

334  
	`dvmCÚtšueO±imiz©iÚ
(
fd
, 
dexOff£t
, 
dexL’gth
,

335 
feName
, 
modWh’
, 
üc
, 
isBoÙ¡¿p
);

339 
	`LOGD
("DexO±: --- BEGIN '%s' (boÙ¡¿p=%dè---\n", 
Ï¡P¬t
, 
isBoÙ¡¿p
);

341 
pid_t
 
pid
;

347 ià(
gDvm
.
İtimizšg
) {

348 
	`LOGW
("Rejeùšg„ecursivİtimiz©iÚ‡‰em± oÀ'%s'\n", 
feName
);

349  
çl£
;

352 
pid
 = 
	`fÜk
();

353 ià(
pid
 == 0) {

354 cÚ¡ 
kU£V®gršd
 = 0;

355 cÚ¡ * 
kDexO±Bš
 = "/bin/dexopt";

356 cÚ¡ * 
kV®gršd”
 = "/usr/bin/valgrind";

357 cÚ¡ 
kFixedArgCouÁ
 = 10;

358 cÚ¡ 
kV®gršdArgCouÁ
 = 5;

359 cÚ¡ 
kMaxIÁL’
 = 12;

360 
bıSize
 = 
	`dvmG‘BoÙP©hSize
();

361 
¬gc
 = 
kFixedArgCouÁ
 + 
bıSize


362 + (
kV®gršdArgCouÁ
 * 
kU£V®gršd
);

363 * 
¬gv
[
¬gc
+1];

364 
v®ues
[
¬gc
][
kMaxIÁL’
];

365 * 
execFe
;

366 * 
ªdroidRoÙ
;

367 
æags
;

370 
	`£gid
(0, 0);

373 
ªdroidRoÙ
 = 
	`g‘’v
("ANDROID_ROOT");

374 ià(
ªdroidRoÙ
 =ğ
NULL
) {

375 
	`LOGW
("ANDROID_ROOT‚ot set, defaultingo /system\n");

376 
ªdroidRoÙ
 = "/system";

378 
execFe
 = 
	`m®loc
(
	`¡¾’
(
ªdroidRoÙ
è+ sŒËn(
kDexO±Bš
) + 1);

379 
	`¡rıy
(
execFe
, 
ªdroidRoÙ
);

380 
	`¡rÿt
(
execFe
, 
kDexO±Bš
);

385 
curArg
 = 0;

387 ià(
kU£V®gršd
) {

389 
¬gv
[
curArg
++] = (*)
kV®gršd”
;

390 
¬gv
[
curArg
++] = "--tool=memcheck";

391 
¬gv
[
curArg
++] = "--leak-check=yes";

392 
¬gv
[
curArg
++] = "--leak-resolution=med";

393 
¬gv
[
curArg
++] = "--num-callers=16";

394 
	`as£¹
(
curArg
 =ğ
kV®gršdArgCouÁ
);

396 
¬gv
[
curArg
++] = 
execFe
;

398 
¬gv
[
curArg
++] = "--dex";

400 
	`¥rštf
(
v®ues
[2], "%d", 
DALVIK_VM_BUILD
);

401 
¬gv
[
curArg
++] = 
v®ues
[2];

403 
	`¥rštf
(
v®ues
[3], "%d", 
fd
);

404 
¬gv
[
curArg
++] = 
v®ues
[3];

406 
	`¥rštf
(
v®ues
[4], "%d", (è
dexOff£t
);

407 
¬gv
[
curArg
++] = 
v®ues
[4];

409 
	`¥rštf
(
v®ues
[5], "%d", (è
dexL’gth
);

410 
¬gv
[
curArg
++] = 
v®ues
[5];

412 
¬gv
[
curArg
++] = (*)
feName
;

414 
	`¥rštf
(
v®ues
[7], "%d", (è
modWh’
);

415 
¬gv
[
curArg
++] = 
v®ues
[7];

417 
	`¥rštf
(
v®ues
[8], "%d", (è
üc
);

418 
¬gv
[
curArg
++] = 
v®ues
[8];

420 
æags
 = 0;

421 ià(
gDvm
.
dexO±Mode
 !ğ
OPTIMIZE_MODE_NONE
) {

422 
æags
 |ğ
DEXOPT_OPT_ENABLED
;

423 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_ALL
)

424 
æags
 |ğ
DEXOPT_OPT_ALL
;

426 ià(
gDvm
.
şassV”ifyMode
 !ğ
VERIFY_MODE_NONE
) {

427 
æags
 |ğ
DEXOPT_VERIFY_ENABLED
;

428 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_ALL
)

429 
æags
 |ğ
DEXOPT_VERIFY_ALL
;

431 ià(
isBoÙ¡¿p
)

432 
æags
 |ğ
DEXOPT_IS_BOOTSTRAP
;

433 ià(
gDvm
.
g’”©eRegi¡”M­s
)

434 
æags
 |ğ
DEXOPT_GEN_REGISTER_MAP
;

435 
	`¥rštf
(
v®ues
[9], "%d", 
æags
);

436 
¬gv
[
curArg
++] = 
v®ues
[9];

438 
	`as£¹
(((!
kU£V®gršd
 && 
curArg
 =ğ
kFixedArgCouÁ
) ||

439 ((
kU£V®gršd
 && 
curArg
 =ğ
kFixedArgCouÁ
+
kV®gršdArgCouÁ
))));

441 
CÏssP©hEÁry
* 
ıe
;

442 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

443 
¬gv
[
curArg
++] = 
ıe
->
feName
;

445 
	`as£¹
(
curArg
 =ğ
¬gc
);

447 
¬gv
[
curArg
] = 
NULL
;

449 ià(
kU£V®gršd
)

450 
	`execv
(
kV®gršd”
, 
¬gv
);

452 
	`execv
(
execFe
, 
¬gv
);

454 
	`LOGE
("execv '%s'% çed: %s\n", 
execFe
,

455 
kU£V®gršd
 ? " [v®gršd]" : "", 
	`¡»¼Ü
(
”ºo
));

456 
	`ex™
(1);

458 
	`LOGV
("DexO±: wa™šg fÜ v”ify+İt,…id=%d\n", (è
pid
);

459 
¡©us
;

460 
pid_t
 
gÙPid
;

461 
ŞdStus
;

467 
ŞdStus
 = 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

468 
Œue
) {

469 
gÙPid
 = 
	`wa™pid
(
pid
, &
¡©us
, 0);

470 ià(
gÙPid
 =ğ-1 && 
”ºo
 =ğ
EINTR
) {

471 
	`LOGD
("waitpid interrupted,„etrying\n");

476 
	`dvmChªgeStus
(
NULL
, 
ŞdStus
);

477 ià(
gÙPid
 !ğ
pid
) {

478 
	`LOGE
("waitpid failed: wanted %d, got %d: %s\n",

479 (è
pid
, (è
gÙPid
, 
	`¡»¼Ü
(
”ºo
));

480  
çl£
;

483 ià(
	`WIFEXITED
(
¡©us
è&& 
	`WEXITSTATUS
(status) == 0) {

484 
	`LOGD
("DexO±: --- END '%s' (sucûssè---\n", 
Ï¡P¬t
);

485  
Œue
;

487 
	`LOGW
("DexOpt: --- END '%s' --- status=0x%04x,…rocess failed\n",

488 
Ï¡P¬t
, 
¡©us
);

489  
çl£
;

492 
	}
}

508 
boŞ
 
	$dvmCÚtšueO±imiz©iÚ
(
fd
, 
off_t
 
dexOff£t
, 
dexL’gth
,

509 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
)

511 
DexCÏssLookup
* 
pCÏssLookup
 = 
NULL
;

512 
IndexM­S‘
* 
pIndexM­S‘
 = 
NULL
;

513 
Regi¡”M­Bud”
* 
pRegM­Bud”
 = 
NULL
;

514 
boŞ
 
doV”ify
, 
doO±
;

515 
u4
 
h—d”FÏgs
 = 0;

517 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
)

518 
doV”ify
 = 
çl£
;

519 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
)

520 
doV”ify
 = !
isBoÙ¡¿p
;

522 
doV”ify
 = 
Œue
;

524 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_NONE
)

525 
doO±
 = 
çl£
;

526 ià(
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
)

527 
doO±
 = 
doV”ify
;

529 
doO±
 = 
Œue
;

531 
	`LOGV
("Continuing optimization (%s, isb=%d, vfy=%d, opt=%d)\n",

532 
feName
, 
isBoÙ¡¿p
, 
doV”ify
, 
doO±
);

534 
	`as£¹
(
dexOff£t
 >= 0);

537 ià(
dexL’gth
 < (è(
DexH—d”
)) {

538 
	`LOGE
("too smallo be DEX\n");

539  
çl£
;

541 ià(
dexOff£t
 < (è(
DexO±H—d”
)) {

542 
	`LOGE
("notƒnough„oom for opt header\n");

543  
çl£
;

546 
boŞ
 
»suÉ
 = 
çl£
;

553 
gDvm
.
İtimizšgBoÙ¡¿pCÏss
 = 
isBoÙ¡¿p
;

561 
boŞ
 
sucûss
;

562 * 
m­Addr
;

563 
m­Addr
 = 
	`mm­
(
NULL
, 
dexOff£t
 + 
dexL’gth
, 
PROT_READ
|
PROT_WRITE
,

564 
MAP_SHARED
, 
fd
, 0);

565 ià(
m­Addr
 =ğ
MAP_FAILED
) {

566 
	`LOGE
("uÇbËØmm­ DEX cache: %s\n", 
	`¡»¼Ü
(
”ºo
));

567 
ba
;

582 
sucûss
 = 
	`»wr™eDex
(((
u1
*è
m­Addr
è+ 
dexOff£t
, 
dexL’gth
,

583 
doV”ify
, 
doO±
, &
h—d”FÏgs
, &
pCÏssLookup
);

585 ià(
sucûss
) {

586 
DvmDex
* 
pDvmDex
 = 
NULL
;

587 
u1
* 
dexAddr
 = ((u1*è
m­Addr
è+ 
dexOff£t
;

589 ià(
	`dvmDexFeO³nP¬tŸl
(
dexAddr
, 
dexL’gth
, &
pDvmDex
) != 0) {

590 
	`LOGE
("Unableo create DexFile\n");

591 
sucûss
 = 
çl£
;

600 
pIndexM­S‘
 = 
	`dvmRewr™eCÚ¡ªts
(
pDvmDex
);

606 ià(
gDvm
.
g’”©eRegi¡”M­s
) {

607 
pRegM­Bud”
 = 
	`dvmG’”©eRegi¡”M­s
(
pDvmDex
);

608 ià(
pRegM­Bud”
 =ğ
NULL
) {

609 
	`LOGE
("Failed generating„egister maps\n");

610 
sucûss
 = 
çl£
;

614 
DexH—d”
* 
pH—d”
 = (DexH—d”*)
pDvmDex
->pHeader;

615 
	`upd©eChecksum
(
dexAddr
, 
dexL’gth
, 
pH—d”
);

617 
	`dvmDexFeF»e
(
pDvmDex
);

622 ià(
	`msync
(
m­Addr
, 
dexOff£t
 + 
dexL’gth
, 
MS_SYNC
) != 0) {

623 
	`LOGW
("msynøçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

633 ià(
	`munm­
(
m­Addr
, 
dexOff£t
 + 
dexL’gth
) != 0) {

634 
	`LOGE
("munm­ faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

635 
ba
;

639 ià(!
sucûss
)

640 
ba
;

644 
off_t
 
d•sOff£t
, 
auxOff£t
, 
’dOff£t
, 
adjOff£t
;

645 
d•sL’gth
, 
auxL’gth
;

647 
d•sOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

648 ià(
d•sOff£t
 < 0) {

649 
	`LOGE
("l£ekØEOF faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

650 
ba
;

652 
adjOff£t
 = (
d•sOff£t
 + 7) & ~(0x07);

653 ià(
adjOff£t
 !ğ
d•sOff£t
) {

654 
	`LOGV
("Adjusting deps start from %do %d\n",

655 (è
d•sOff£t
, (è
adjOff£t
);

656 
d•sOff£t
 = 
adjOff£t
;

657 
	`l£ek
(
fd
, 
d•sOff£t
, 
SEEK_SET
);

663 ià(
	`wr™eD•’d’c›s
(
fd
, 
modWh’
, 
üc
) != 0) {

664 
	`LOGW
("Failed writing dependencies\n");

665 
ba
;

669 
auxOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

670 
d•sL’gth
 = 
auxOff£t
 - 
d•sOff£t
;

672 
adjOff£t
 = (
auxOff£t
 + 7) & ~(0x07);

673 ià(
adjOff£t
 !ğ
auxOff£t
) {

674 
	`LOGV
("Adjusting‡ux start from %do %d\n",

675 (è
auxOff£t
, (è
adjOff£t
);

676 
auxOff£t
 = 
adjOff£t
;

677 
	`l£ek
(
fd
, 
auxOff£t
, 
SEEK_SET
);

683 ià(!
	`wr™eAuxD©a
(
fd
, 
pCÏssLookup
, 
pIndexM­S‘
, 
pRegM­Bud”
)) {

684 
	`LOGW
("Failed writing‡ux data\n");

685 
ba
;

688 
’dOff£t
 = 
	`l£ek
(
fd
, 0, 
SEEK_END
);

689 
auxL’gth
 = 
’dOff£t
 - 
auxOff£t
;

695 
DexO±H—d”
 
İtHdr
;

696 
	`mem£t
(&
İtHdr
, 0xff, (optHdr));

697 
	`memıy
(
İtHdr
.
magic
, 
DEX_OPT_MAGIC
, 4);

698 
	`memıy
(
İtHdr
.
magic
+4, 
DEX_OPT_MAGIC_VERS
, 4);

699 
İtHdr
.
dexOff£t
 = (
u4
) dexOffset;

700 
İtHdr
.
dexL’gth
 = (
u4
) dexLength;

701 
İtHdr
.
d•sOff£t
 = (
u4
) depsOffset;

702 
İtHdr
.
d•sL’gth
 = (
u4
) depsLength;

703 
İtHdr
.
auxOff£t
 = (
u4
)‡uxOffset;

704 
İtHdr
.
auxL’gth
 = (
u4
)‡uxLength;

706 
İtHdr
.
æags
 = 
h—d”FÏgs
;

708 
ssize_t
 
aùu®
;

709 
	`l£ek
(
fd
, 0, 
SEEK_SET
);

710 
aùu®
 = 
	`wr™e
(
fd
, &
İtHdr
, (optHdr));

711 ià(
aùu®
 !ğ(
İtHdr
)) {

712 
	`logFaedWr™e
((
İtHdr
), 
aùu®
, "İˆh—d”", 
”ºo
);

713 
ba
;

716 
	`LOGV
("Successfully wrote DEX header\n");

717 
»suÉ
 = 
Œue
;

721 
ba
:

722 
	`dvmF»eIndexM­S‘
(
pIndexM­S‘
);

723 
	`dvmF»eRegi¡”M­Bud”
(
pRegM­Bud”
);

724 
	`ä“
(
pCÏssLookup
);

725  
»suÉ
;

726 
	}
}

732 cÚ¡ * 
	$g‘CacheFeName
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
)

734 
ıe
->
kšd
) {

735 
kC³J¬
:

736  
	`dvmG‘J¬FeCacheFeName
((
J¬Fe
*è
ıe
->
±r
);

737 
kC³Dex
:

738  
	`dvmG‘RawDexFeCacheFeName
((
RawDexFe
*è
ıe
->
±r
);

740 
	`LOGE
("DexO±: uÃx³ùed c³ kšd %d\n", 
ıe
->
kšd
);

741 
	`dvmAbÜt
();

742  
NULL
;

744 
	}
}

749 cÚ¡ 
u1
* 
	$g‘SigÇtu»
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
)

751 
DvmDex
* 
pDvmDex
;

753 
ıe
->
kšd
) {

754 
kC³J¬
:

755 
pDvmDex
 = 
	`dvmG‘J¬FeDex
((
J¬Fe
*è
ıe
->
±r
);

757 
kC³Dex
:

758 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
((
RawDexFe
*è
ıe
->
±r
);

761 
	`LOGE
("uÃx³ùed c³ kšd %d\n", 
ıe
->
kšd
);

762 
	`dvmAbÜt
();

763 
pDvmDex
 = 
NULL
;

766 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

767  
pDvmDex
->
pDexFe
->
pH—d”
->
sigÇtu»
;

768 
	}
}

784 cÚ¡ 
size_t
 
	gkMšD•Size
 = 4 * 4;

785 cÚ¡ 
size_t
 
	gkMaxD•Size
 = 4 * 4 + 1024;

799 
boŞ
 
	$dvmCheckO±H—d”AndD•’d’c›s
(
fd
, 
boŞ
 
sourûAva
, 
u4
 
modWh’
,

800 
u4
 
üc
, 
boŞ
 
ex³ùV”ify
, boŞ 
ex³ùO±
)

802 
DexO±H—d”
 
İtHdr
;

803 
u1
* 
d•D©a
 = 
NULL
;

804 cÚ¡ 
u1
* 
magic
;

805 
off_t
 
po¢
;

806 
»suÉ
 = 
çl£
;

807 
ssize_t
 
aùu®
;

813 ià(
	`l£ek
(
fd
, 0, 
SEEK_SET
) != 0) {

814 
	`LOGE
("DexO±: faedØ£ekØ¡¬ˆoàfe: %s\n", 
	`¡»¼Ü
(
”ºo
));

815 
ba
;

822 ià(
	`»ad
(
fd
, &
İtHdr
, (optHdr)) != (optHdr)) {

823 
	`LOGE
("DexO±: faed„—dšg o± h—d”: %s\n", 
	`¡»¼Ü
(
”ºo
));

824 
ba
;

827 
magic
 = 
İtHdr
.magic;

828 ià(
	`memcmp
(
magic
, 
DEX_OPT_MAGIC
, 4) != 0) {

830 
	`LOGD
("DexOpt: incorrect opt magic‚umber (0x%02x %02x %02x %02x)\n",

831 
magic
[0], magic[1], magic[2], magic[3]);

832 
ba
;

834 ià(
	`memcmp
(
magic
+4, 
DEX_OPT_MAGIC_VERS
, 4) != 0) {

835 
	`LOGW
("DexOpt: stale opt version (0x%02x %02x %02x %02x)\n",

836 
magic
[4], magic[5], magic[6], magic[7]);

837 
ba
;

839 ià(
İtHdr
.
d•sL’gth
 < 
kMšD•Size
 || o±Hdr.d•sL’gth > 
kMaxD•Size
) {

840 
	`LOGW
("DexO±: weœd d• Ëngth %d, bašg\n", 
İtHdr
.
d•sL’gth
);

841 
ba
;

861 cÚ¡ 
u4
 
m©chMask
 = 
DEX_OPT_FLAG_BIG
;

862 
u4
 
ex³ùedFÏgs
 = 0;

863 #ià
__BYTE_ORDER
 !ğ
__LITTLE_ENDIAN


864 
ex³ùedFÏgs
 |ğ
DEX_OPT_FLAG_BIG
;

866 ià(
ex³ùV”ify
)

867 
ex³ùedFÏgs
 |ğ
DEX_FLAG_VERIFIED
;

868 ià(
ex³ùO±
)

869 
ex³ùedFÏgs
 |ğ
DEX_OPT_FLAG_FIELDS
 | 
DEX_OPT_FLAG_INVOCATIONS
;

870 ià((
ex³ùedFÏgs
 & 
m©chMask
è!ğ(
İtHdr
.
æags
 & matchMask)) {

871 
	`LOGI
("DexOpt: header flag mismatch (0x%02x vs 0x%02x, mask=0x%02x)\n",

872 
ex³ùedFÏgs
, 
İtHdr
.
æags
, 
m©chMask
);

873 
ba
;

876 
po¢
 = 
	`l£ek
(
fd
, 
İtHdr
.
d•sOff£t
, 
SEEK_SET
);

877 ià(
po¢
 < 0) {

878 
	`LOGW
("DexO±: s“kØd• çed: %s\n", 
	`¡»¼Ü
(
”ºo
));

879 
ba
;

885 
d•D©a
 = (
u1
*è
	`m®loc
(
İtHdr
.
d•sL’gth
);

886 ià(
d•D©a
 =ğ
NULL
) {

887 
	`LOGW
("DexOpt: unableo‡llocate %d bytes for deps\n",

888 
İtHdr
.
d•sL’gth
);

889 
ba
;

891 
aùu®
 = 
	`»ad
(
fd
, 
d•D©a
, 
İtHdr
.
d•sL’gth
);

892 ià(
aùu®
 !ğ(
ssize_t
è
İtHdr
.
d•sL’gth
) {

893 
	`LOGW
("DexOpt: failed„eading deps: %d of %d (err=%s)\n",

894 (è
aùu®
, 
İtHdr
.
d•sL’gth
, 
	`¡»¼Ü
(
”ºo
));

895 
ba
;

901 cÚ¡ 
u1
* 
±r
;

902 
u4
 
v®
;

904 
±r
 = 
d•D©a
;

905 
v®
 = 
	`»ad4LE
(&
±r
);

906 ià(
sourûAva
 && 
v®
 !ğ
modWh’
) {

907 
	`LOGI
("DexOpt: source file modime mismatch (%08x vs %08x)\n",

908 
v®
, 
modWh’
);

909 
ba
;

911 
v®
 = 
	`»ad4LE
(&
±r
);

912 ià(
sourûAva
 && 
v®
 !ğ
üc
) {

913 
	`LOGI
("DexO±: sourû fCRC mism©ch (%08x v %08x)\n", 
v®
, 
üc
);

914 
ba
;

916 
v®
 = 
	`»ad4LE
(&
±r
);

917 ià(
v®
 !ğ
DALVIK_VM_BUILD
) {

918 
	`LOGD
("DexOpt: VM build version mismatch (%d vs %d)\n",

919 
v®
, 
DALVIK_VM_BUILD
);

920 
ba
;

927 
CÏssP©hEÁry
* 
ıe
;

928 
u4
 
numD•s
;

930 
numD•s
 = 
	`»ad4LE
(&
±r
);

931 
	`LOGV
("+++ DexO±:‚umD• ğ%d\n", 
numD•s
);

932 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

933 cÚ¡ * 
ÿcheFeName
 = 
	`g‘CacheFeName
(
ıe
);

934 cÚ¡ 
u1
* 
sigÇtu»
 = 
	`g‘SigÇtu»
(
ıe
);

935 
size_t
 
Ën
 = 
	`¡¾’
(
ÿcheFeName
) +1;

936 
u4
 
¡ÜedSŒL’
;

938 ià(
numD•s
 == 0) {

940 
	`LOGI
("DexOpt:‚ot‡ll deps„epresented\n");

941 
ba
;

944 
¡ÜedSŒL’
 = 
	`»ad4LE
(&
±r
);

945 ià(
Ën
 !ğ
¡ÜedSŒL’
 ||

946 
	`¡rcmp
(
ÿcheFeName
, (cÚ¡ *è
±r
) != 0)

948 
	`LOGI
("DexOpt: mismatch dep‚ame: '%s' vs. '%s'\n",

949 
ÿcheFeName
, 
±r
);

950 
ba
;

953 
±r
 +ğ
¡ÜedSŒL’
;

955 ià(
	`memcmp
(
sigÇtu»
, 
±r
, 
kSHA1Dige¡L’
) != 0) {

956 
	`LOGI
("DexO±: mism©ch d• sigÇtu» fÜ '%s'\n", 
ÿcheFeName
);

957 
ba
;

959 
±r
 +ğ
kSHA1Dige¡L’
;

961 
	`LOGV
("DexO±: d• m©ch oÀ'%s'\n", 
ÿcheFeName
);

963 
numD•s
--;

966 ià(
numD•s
 != 0) {

968 
	`LOGI
("DexOpt: Some deps went‡way\n");

969 
ba
;

973 ià(
±r
 !ğ
d•D©a
 + 
İtHdr
.
d•sL’gth
) {

974 
	`LOGW
("DexOpt: Spurious dep data? %d vs %d\n",

975 (è(
±r
 - 
d•D©a
), 
İtHdr
.
d•sL’gth
);

976 
	`as£¹
(
çl£
);

979 
»suÉ
 = 
Œue
;

981 
ba
:

982 
	`ä“
(
d•D©a
);

983  
»suÉ
;

984 
	}
}

989 
	$wr™eD•’d’c›s
(
fd
, 
u4
 
modWh’
, u4 
üc
)

991 
u1
* 
buf
 = 
NULL
;

992 
ssize_t
 
aùu®
;

993 
»suÉ
 = -1;

994 
ssize_t
 
bufL’
;

995 
CÏssP©hEÁry
* 
ıe
;

996 
i
, 
numD•s
;

1001 
numD•s
 = 0;

1002 
bufL’
 = 0;

1003 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

1004 cÚ¡ * 
ÿcheFeName
 = 
	`g‘CacheFeName
(
ıe
);

1005 
	`LOGV
("+++ DexO±: found d• '%s'\n", 
ÿcheFeName
);

1007 
numD•s
++;

1008 
bufL’
 +ğ
	`¡¾’
(
ÿcheFeName
) +1;

1011 
bufL’
 +ğ4*4 + 
numD•s
 * (4+
kSHA1Dige¡L’
);

1013 
buf
 = 
	`m®loc
(
bufL’
);

1015 
	`£t4LE
(
buf
+0, 
modWh’
);

1016 
	`£t4LE
(
buf
+4, 
üc
);

1017 
	`£t4LE
(
buf
+8, 
DALVIK_VM_BUILD
);

1018 
	`£t4LE
(
buf
+12, 
numD•s
);

1024 
u1
* 
±r
 = 
buf
 + 4*4;

1025 
ıe
 = 
gDvm
.
boÙCÏssP©h
; c³->
±r
 !ğ
NULL
; cpe++) {

1026 cÚ¡ * 
ÿcheFeName
 = 
	`g‘CacheFeName
(
ıe
);

1027 cÚ¡ 
u1
* 
sigÇtu»
 = 
	`g‘SigÇtu»
(
ıe
);

1028 
Ën
 = 
	`¡¾’
(
ÿcheFeName
) +1;

1030 ià(
±r
 + 4 + 
Ën
 + 
kSHA1Dige¡L’
 > 
buf
 + 
bufL’
) {

1031 
	`LOGE
("DexOpt: overran buffer\n");

1032 
	`dvmAbÜt
();

1035 
	`£t4LE
(
±r
, 
Ën
);

1036 
±r
 += 4;

1037 
	`memıy
(
±r
, 
ÿcheFeName
, 
Ën
);

1038 
±r
 +ğ
Ën
;

1039 
	`memıy
(
±r
, 
sigÇtu»
, 
kSHA1Dige¡L’
);

1040 
±r
 +ğ
kSHA1Dige¡L’
;

1043 
	`as£¹
(
±r
 =ğ
buf
 + 
bufL’
);

1045 
aùu®
 = 
	`wr™e
(
fd
, 
buf
, 
bufL’
);

1046 ià(
aùu®
 !ğ
bufL’
) {

1047 
»suÉ
 = (
”ºo
 != 0) ?ƒrrno : -1;

1048 
	`logFaedWr™e
(
bufL’
, 
aùu®
, "d• info", 
”ºo
);

1050 
»suÉ
 = 0;

1053 
	`ä“
(
buf
);

1054  
»suÉ
;

1055 
	}
}

1064 
boŞ
 
	$wr™eChunk
(
fd
, 
u4
 
ty³
, cÚ¡ * 
d©a
, 
size_t
 
size
)

1066 
ssize_t
 
aùu®
;

1068 
¿w
[8];

1070 
u4
 
ty³
;

1071 
u4
 
size
;

1072 } 
ts
;

1073 } 
h—d”
;

1075 
	`as£¹
((
h—d”
) == 8);

1077 
	`LOGV
("Wr™šg chunk,y³=%.4 size=%d\n", (*è&
ty³
, 
size
);

1079 
h—d”
.
ts
.
ty³
 =ype;

1080 
h—d”
.
ts
.
size
 = (
u4
) size;

1081 
aùu®
 = 
	`wr™e
(
fd
, &
h—d”
, (header));

1082 ià(
aùu®
 !ğ(
h—d”
)) {

1083 
	`logFaedWr™e
(
size
, 
aùu®
, "aux chunk h—d” wr™e", 
”ºo
);

1084  
çl£
;

1087 ià(
size
 > 0) {

1088 
aùu®
 = 
	`wr™e
(
fd
, 
d©a
, 
size
);

1089 ià(
aùu®
 !ğ(
ssize_t
è
size
) {

1090 
	`logFaedWr™e
(
size
, 
aùu®
, "aux chunk wr™e", 
”ºo
);

1091  
çl£
;

1096 ià((
size
 & 7) != 0) {

1097 
·dSize
 = 8 - (
size
 & 7);

1098 
	`LOGV
("sizwa %d, in£¹šg %d…ad by‹s\n", 
size
, 
·dSize
);

1099 
	`l£ek
(
fd
, 
·dSize
, 
SEEK_CUR
);

1102 
	`as£¹
Ğ(()
	`l£ek
(
fd
, 0, 
SEEK_CUR
) & 7) == 0);

1104  
Œue
;

1105 
	}
}

1115 
boŞ
 
	$wr™eAuxD©a
(
fd
, cÚ¡ 
DexCÏssLookup
* 
pCÏssLookup
,

1116 cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
, cÚ¡ 
Regi¡”M­Bud”
* 
pRegM­Bud”
)

1119 ià(!
	`wr™eChunk
(
fd
, (
u4
è
kDexChunkCÏssLookup
,

1120 
pCÏssLookup
,…CÏssLookup->
size
))

1122  
çl£
;

1126 ià(
pIndexM­S‘
 !ğ
NULL
) {

1127 ià(!
	`wr™eChunk
(
fd
, 
pIndexM­S‘
->
chunkTy³
,

1128 
pIndexM­S‘
->
chunkD©a
,…IndexM­S‘->
chunkD©aL’
))

1130  
çl£
;

1135 ià(
pRegM­Bud”
 !ğ
NULL
) {

1136 ià(!
	`wr™eChunk
(
fd
, (
u4
è
kDexChunkRegi¡”M­s
,

1137 
pRegM­Bud”
->
d©a
,…RegM­Bud”->
size
))

1139  
çl£
;

1144 ià(!
	`wr™eChunk
(
fd
, (
u4
è
kDexChunkEnd
, 
NULL
, 0)) {

1145  
çl£
;

1148  
Œue
;

1149 
	}
}

1154 
	$logFaedWr™e
(
size_t
 
ex³ùed
, 
ssize_t
 
aùu®
, cÚ¡ * 
msg
,

1155 
”r
)

1157 
	`LOGE
("Write failed: %s (%d of %d): %s\n",

1158 
msg
, ()
aùu®
, ()
ex³ùed
, 
	`¡»¼Ü
(
”r
));

1159 
	}
}

1174 
boŞ
 
	$»wr™eDex
(
u1
* 
addr
, 
Ën
, 
boŞ
 
doV”ify
, boŞ 
doO±
,

1175 
u4
* 
pH—d”FÏgs
, 
DexCÏssLookup
** 
µCÏssLookup
)

1177 
u8
 
´•Wh’
, 
lßdWh’
, 
v”ifyWh’
, 
İtWh’
;

1178 
DvmDex
* 
pDvmDex
 = 
NULL
;

1179 
boŞ
 
»suÉ
 = 
çl£
;

1181 *
pH—d”FÏgs
 = 0;

1183 
	`LOGV
("+++ swapping bytes\n");

1184 ià(
	`dexFixBy‹Ord”šg
(
addr
, 
Ën
) != 0)

1185 
ba
;

1186 #ià
__BYTE_ORDER
 !ğ
__LITTLE_ENDIAN


1187 *
pH—d”FÏgs
 |ğ
DEX_OPT_FLAG_BIG
;

1193 ià(
	`dvmDexFeO³nP¬tŸl
(
addr
, 
Ën
, &
pDvmDex
) != 0) {

1194 
	`LOGE
("Unableo create DexFile\n");

1195 
ba
;

1202 *
µCÏssLookup
 = 
	`dexC»©eCÏssLookup
(
pDvmDex
->
pDexFe
);

1203 ià(*
µCÏssLookup
 =ğ
NULL
)

1204 
ba
;

1211 ià(!
doV”ify
 && !
doO±
) {

1212 
»suÉ
 = 
Œue
;

1213 
ba
;

1217 
pDvmDex
->
pDexFe
->
pCÏssLookup
 = *
µCÏssLookup
;

1219 
´•Wh’
 = 
	`dvmG‘R–©iveTimeU£c
();

1225 ià(!
	`lßdAÎCÏs£s
(
pDvmDex
))

1226 
ba
;

1227 
lßdWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

1233 ià(
doV”ify
) {

1234 
	`dvmV”ifyAÎCÏs£s
(
pDvmDex
->
pDexFe
);

1235 *
pH—d”FÏgs
 |ğ
DEX_FLAG_VERIFIED
;

1237 
v”ifyWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

1244 #iâdeà
PROFILE_FIELD_ACCESS


1245 ià(
doO±
) {

1246 
	`İtimizeLßdedCÏs£s
(
pDvmDex
->
pDexFe
);

1247 *
pH—d”FÏgs
 |ğ
DEX_OPT_FLAG_FIELDS
 | 
DEX_OPT_FLAG_INVOCATIONS
;

1250 
İtWh’
 = 
	`dvmG‘R–©iveTimeU£c
();

1252 
	`LOGD
("DexOpt:†oad %dms, verify %dms, opt %dms\n",

1253 (è(
lßdWh’
 - 
´•Wh’
) / 1000,

1254 (è(
v”ifyWh’
 - 
lßdWh’
) / 1000,

1255 (è(
İtWh’
 - 
v”ifyWh’
) / 1000);

1257 
»suÉ
 = 
Œue
;

1259 
ba
:

1261 
	`dvmDexFeF»e
(
pDvmDex
);

1263  
»suÉ
;

1264 
	}
}

1271 
	$upd©eChecksum
(
u1
* 
addr
, 
Ën
, 
DexH—d”
* 
pH—d”
)

1276 
uLÚg
 
adËr
 = 
	`adËr32
(0L, 
Z_NULL
, 0);

1277 cÚ¡ 
nÚSum
 = (
pH—d”
->
magic
è+ ÕH—d”->
checksum
);

1279 
adËr
 = 
	`adËr32
×dËr, 
addr
 + 
nÚSum
, 
Ën
 -‚onSum);

1280 
pH—d”
->
checksum
 = 
adËr
;

1281 
	}
}

1301 
boŞ
 
	$lßdAÎCÏs£s
(
DvmDex
* 
pDvmDex
)

1303 
u4
 
couÁ
 = 
pDvmDex
->
pDexFe
->
pH—d”
->
şassDefsSize
;

1304 
u4
 
idx
;

1305 
lßded
 = 0;

1307 
	`LOGV
("DexO±: +++ryšgØlßd %d cÏs£s\n", 
couÁ
);

1309 
	`dvmS‘BoÙP©hExŒaDex
(
pDvmDex
);

1319 ià(
	`dvmFšdSy¡emCÏss
("Ljava/Ïng/CÏss;"è=ğ
NULL
) {

1320 
	`LOGE
("ERROR: java.lang.Class does‚otƒxist!\n");

1321  
çl£
;

1324 
idx
 = 0; idx < 
couÁ
; idx++) {

1325 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1326 cÚ¡ * 
şassDesütÜ
;

1327 
CÏssObjeù
* 
ÃwCÏss
;

1329 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDvmDex
->
pDexFe
, 
idx
);

1330 
şassDesütÜ
 =

1331 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pCÏssDef
->
şassIdx
);

1333 
	`LOGV
("+++†ßdšg '%s'", 
şassDesütÜ
);

1336 
ÃwCÏss
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
şassDesütÜ
);

1337 ià(
ÃwCÏss
 =ğ
NULL
) {

1338 
	`LOGV
("DexO±: faed†ßdšg '%s'\n", 
şassDesütÜ
);

1339 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

1340 } ià(
ÃwCÏss
->
pDvmDex
 !=…DvmDex) {

1346 
	`LOGD
("DexOpt: '%s' has‡nƒarlier definition; blocking out\n",

1347 
şassDesütÜ
);

1348 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
CLASS_MULTIPLE_DEFS
);

1350 
lßded
++;

1353 
	`LOGV
("DexO±: +++ sucûssfuÎy†ßded %d cÏs£s\n", 
lßded
);

1355 
	`dvmS‘BoÙP©hExŒaDex
(
NULL
);

1356  
Œue
;

1357 
	}
}

1366 
IÆšeSub
* 
	$ü—‹IÆšeSubsTabË
()

1368 cÚ¡ 
IÆšeO³¿tiÚ
* 
İs
 = 
	`dvmG‘IÆšeOpsTabË
();

1369 cÚ¡ 
couÁ
 = 
	`dvmG‘IÆšeOpsTabËL’gth
();

1370 
IÆšeSub
* 
bË
;

1371 
M‘hod
* 
m‘hod
;

1372 
CÏssObjeù
* 
şazz
;

1373 
i
, 
bËIndex
;

1378 
bË
 = 
	`m®loc
((
IÆšeSub
è* (
couÁ
+1));

1380 
bËIndex
 = 0;

1381 
i
 = 0; i < 
couÁ
; i++) {

1382 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
İs
[
i
].
şassDesütÜ
, 
NULL
);

1383 ià(
şazz
 =ğ
NULL
) {

1384 
	`LOGV
("DexOpt: can't inline for class '%s':‚ot found\n",

1385 
İs
[
i
].
şassDesütÜ
);

1386 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

1392 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
İs
[
i
].
m‘hodName
,

1393 
İs
[
i
].
m‘hodSigÇtu»
);

1394 ià(
m‘hod
 =ğ
NULL
)

1395 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, 
İs
[
i
].
m‘hodName
,

1396 
İs
[
i
].
m‘hodSigÇtu»
);

1397 ià(
m‘hod
 =ğ
NULL
) {

1398 
	`LOGW
("DexOpt: can't inline %s.%s %s: method‚ot found\n",

1399 
İs
[
i
].
şassDesütÜ
, ops[i].
m‘hodName
,

1400 
İs
[
i
].
m‘hodSigÇtu»
);

1402 ià(!
	`dvmIsFš®CÏss
(
şazz
è&& !
	`dvmIsFš®M‘hod
(
m‘hod
)) {

1403 
	`LOGW
("DexOpt: WARNING: inline op on‚on-final class/method "

1405 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

1408 ià(
	`dvmIsSynchrÚizedM‘hod
(
m‘hod
) ||

1409 
	`dvmIsDeş¬edSynchrÚizedM‘hod
(
m‘hod
))

1411 
	`LOGW
("DexOpt: WARNING: inline op on synchronized method "

1413 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

1417 
bË
[
bËIndex
].
m‘hod
 = method;

1418 
bË
[
bËIndex
].
šlšeIdx
 = 
i
;

1419 
bËIndex
++;

1421 
	`LOGV
("DexO±: wÈšlš%d: %s.% %s\n", 
i
,

1422 
İs
[
i
].
şassDesütÜ
, ops[i].
m‘hodName
,

1423 
İs
[
i
].
m‘hodSigÇtu»
);

1429 
bË
[
bËIndex
].
m‘hod
 = 
NULL
;

1430 
	`LOGV
("DexO±: iÆšbË ha %dƒÁr›s\n", 
bËIndex
);

1432  
bË
;

1433 
	}
}

1439 
	$İtimizeLßdedCÏs£s
(
DexFe
* 
pDexFe
)

1441 
u4
 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

1442 
u4
 
idx
;

1443 
IÆšeSub
* 
šlšeSubs
 = 
NULL
;

1445 
	`LOGV
("DexO±: +++ o±imizšg u°tØ%d cÏs£s\n", 
couÁ
);

1446 
	`as£¹
(
gDvm
.
dexO±Mode
 !ğ
OPTIMIZE_MODE_NONE
);

1448 
šlšeSubs
 = 
	`ü—‹IÆšeSubsTabË
();

1450 
idx
 = 0; idx < 
couÁ
; idx++) {

1451 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1452 cÚ¡ * 
şassDesütÜ
;

1453 
CÏssObjeù
* 
şazz
;

1455 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

1456 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

1459 
şazz
 = 
	`dvmLookupCÏss
(
şassDesütÜ
, 
NULL
, 
çl£
);

1460 ià(
şazz
 !ğ
NULL
) {

1461 ià((
pCÏssDef
->
acûssFÏgs
 & 
CLASS_ISPREVERIFIED
) == 0 &&

1462 
gDvm
.
dexO±Mode
 =ğ
OPTIMIZE_MODE_VERIFIED
)

1464 
	`LOGV
("DexOpt:‚ot optimizing '%s':‚ot verified\n",

1465 
şassDesütÜ
);

1466 } ià(
şazz
->
pDvmDex
->
pDexFe
 !=…DexFile) {

1468 
	`LOGD
("DexOpt:‚ot optimizing '%s': multiple definitions\n",

1469 
şassDesütÜ
);

1471 
	`İtimizeCÏss
(
şazz
, 
šlšeSubs
);

1474 ((
DexCÏssDef
*)
pCÏssDef
)->
acûssFÏgs
 |=

1475 
CLASS_ISOPTIMIZED
;

1478 
	`LOGV
("DexOpt:‚ot optimizing unavailable class '%s'\n",

1479 
şassDesütÜ
);

1483 
	`ä“
(
šlšeSubs
);

1484 
	}
}

1489 
	$İtimizeCÏss
(
CÏssObjeù
* 
şazz
, cÚ¡ 
IÆšeSub
* 
šlšeSubs
)

1491 
i
;

1493 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

1494 ià(!
	`İtimizeM‘hod
(&
şazz
->
dœeùM‘hods
[
i
], 
šlšeSubs
))

1495 
ç
;

1497 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

1498 ià(!
	`İtimizeM‘hod
(&
şazz
->
vœtu®M‘hods
[
i
], 
šlšeSubs
))

1499 
ç
;

1504 
ç
:

1505 
	`LOGV
("DexO±: c—sšg o±imiz©iÚ‡‰em± Ú %s\n", 
şazz
->
desütÜ
);

1506 
	}
}

1514 
boŞ
 
	$İtimizeM‘hod
(
M‘hod
* 
m‘hod
, cÚ¡ 
IÆšeSub
* 
šlšeSubs
)

1516 
u4
 
š¢sSize
;

1517 
u2
* 
š¢s
;

1518 
u2
 
š¡
;

1520 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
è|| 
	`dvmIsAb¡¿ùM‘hod
(method))

1521  
Œue
;

1523 
š¢s
 = (
u2
*è
m‘hod
->insns;

1524 
	`as£¹
(
š¢s
 !ğ
NULL
);

1525 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘hod
);

1527 
š¢sSize
 > 0) {

1528 
width
;

1530 
š¡
 = *
š¢s
 & 0xff;

1532 
š¡
) {

1533 
OP_IGET
:

1534 
OP_IGET_BOOLEAN
:

1535 
OP_IGET_BYTE
:

1536 
OP_IGET_CHAR
:

1537 
OP_IGET_SHORT
:

1538 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
OP_IGET_QUICK
);

1540 
OP_IGET_WIDE
:

1541 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
OP_IGET_WIDE_QUICK
);

1543 
OP_IGET_OBJECT
:

1544 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
OP_IGET_OBJECT_QUICK
);

1546 
OP_IPUT
:

1547 
OP_IPUT_BOOLEAN
:

1548 
OP_IPUT_BYTE
:

1549 
OP_IPUT_CHAR
:

1550 
OP_IPUT_SHORT
:

1551 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
OP_IPUT_QUICK
);

1553 
OP_IPUT_WIDE
:

1554 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
OP_IPUT_WIDE_QUICK
);

1556 
OP_IPUT_OBJECT
:

1557 
	`»wr™eIn¡F›ld
(
m‘hod
, 
š¢s
, 
OP_IPUT_OBJECT_QUICK
);

1560 
OP_INVOKE_VIRTUAL
:

1561 ià(!
	`»wr™eExecu‹IÆše
(
m‘hod
, 
š¢s
, 
METHOD_VIRTUAL
,
šlšeSubs
))

1563 ià(!
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
, 
OP_INVOKE_VIRTUAL_QUICK
))

1564  
çl£
;

1567 
OP_INVOKE_VIRTUAL_RANGE
:

1568 ià(!
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
, 
OP_INVOKE_VIRTUAL_QUICK_RANGE
))

1569  
çl£
;

1571 
OP_INVOKE_SUPER
:

1572 ià(!
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
, 
OP_INVOKE_SUPER_QUICK
))

1573  
çl£
;

1575 
OP_INVOKE_SUPER_RANGE
:

1576 ià(!
	`»wr™eVœtu®Invoke
(
m‘hod
, 
š¢s
, 
OP_INVOKE_SUPER_QUICK_RANGE
))

1577  
çl£
;

1580 
OP_INVOKE_DIRECT
:

1581 ià(!
	`»wr™eExecu‹IÆše
(
m‘hod
, 
š¢s
, 
METHOD_DIRECT
, 
šlšeSubs
))

1583 ià(!
	`»wr™eDœeùInvoke
(
m‘hod
, 
š¢s
))

1584  
çl£
;

1587 
OP_INVOKE_STATIC
:

1588 
	`»wr™eExecu‹IÆše
(
m‘hod
, 
š¢s
, 
METHOD_STATIC
, 
šlšeSubs
);

1596 ià(*
š¢s
 =ğ
kPackedSw™chSigÇtu»
) {

1597 
width
 = 4 + 
š¢s
[1] * 2;

1598 } ià(*
š¢s
 =ğ
kS·r£Sw™chSigÇtu»
) {

1599 
width
 = 2 + 
š¢s
[1] * 4;

1600 } ià(*
š¢s
 =ğ
kA¼ayD©aSigÇtu»
) {

1601 
u2
 
–emWidth
 = 
š¢s
[1];

1602 
u4
 
Ën
 = 
š¢s
[2] | (((u4)insns[3]) << 16);

1603 
width
 = 4 + (
–emWidth
 * 
Ën
 + 1) / 2;

1605 
width
 = 
	`dexG‘In¡rWidth
(
gDvm
.
š¡rWidth
, 
š¡
);

1607 
	`as£¹
(
width
 > 0);

1609 
š¢s
 +ğ
width
;

1610 
š¢sSize
 -ğ
width
;

1613 
	`as£¹
(
š¢sSize
 == 0);

1614  
Œue
;

1615 
	}
}

1625 
	$tw—kLßd”
(
CÏssObjeù
* 
»ã¼”
, CÏssObjeù* 
»sCÏss
)

1627 ià(!
gDvm
.
İtimizšg
)

1629 
	`as£¹
(
»ã¼”
->
şassLßd”
 =ğ
NULL
);

1630 
	`as£¹
(
»sCÏss
->
şassLßd”
 =ğ
NULL
);

1632 ià(!
gDvm
.
İtimizšgBoÙ¡¿pCÏss
) {

1634 ià(
	`dvmIsA¼ayCÏss
(
»sCÏss
))

1635 
»sCÏss
 =„esCÏss->
–em’tCÏss
;

1636 ià(
»ã¼”
->
pDvmDex
 !ğ
»sCÏss
->pDvmDex)

1637 
»sCÏss
->
şassLßd”
 = (
Objeù
*) 0xdead3333;

1639 
	}
}

1644 
	$uÁw—kLßd”
(
CÏssObjeù
* 
»ã¼”
, CÏssObjeù* 
»sCÏss
)

1646 ià(!
gDvm
.
İtimizšg
 || gDvm.
İtimizšgBoÙ¡¿pCÏss
)

1649 ià(
	`dvmIsA¼ayCÏss
(
»sCÏss
))

1650 
»sCÏss
 =„esCÏss->
–em’tCÏss
;

1651 
»sCÏss
->
şassLßd”
 = 
NULL
;

1652 
	}
}

1665 
CÏssObjeù
* 
	$dvmO±ResŞveCÏss
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
şassIdx
,

1666 
V”ifyE¼Ü
* 
pFau»
)

1668 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

1669 
CÏssObjeù
* 
»sCÏss
;

1674 
»sCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
);

1675 ià(
»sCÏss
 =ğ
NULL
) {

1676 cÚ¡ * 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
);

1677 ià(
şassName
[0] != '\0' && className[1] == '\0') {

1679 
»sCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
şassName
[0]);

1681 
»sCÏss
 = 
	`dvmFšdCÏssNoIn™
(
şassName
, 
»ã¼”
->
şassLßd”
);

1683 ià(
»sCÏss
 =ğ
NULL
) {

1685 
	`LOGV
("DexOpt: class %d (%s)‚ot found\n",

1686 
şassIdx
,

1687 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
));

1688 ià(
pFau»
 !ğ
NULL
) {

1690 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
	`dvmTh»adS–f
());

1691 
Œue
) {

1692 
Objeù
* 
ÿu£
 = 
	`dvmG‘Exû±iÚCau£
(
exûp
);

1693 ià(
ÿu£
 =ğ
NULL
)

1695 
exûp
 = 
ÿu£
;

1697 ià(
	`¡rcmp
(
exûp
->
şazz
->
desütÜ
,

1700 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

1702 *
pFau»
 = 
VERIFY_ERROR_NO_CLASS
;

1705 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

1706  
NULL
;

1712 
	`dvmDexS‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
, 
»sCÏss
);

1716 ià(
	`IS_CLASS_FLAG_SET
(
»sCÏss
, 
CLASS_MULTIPLE_DEFS
)) {

1717 
	`LOGI
("DexOpt:‚ot„esolving‡mbiguous class '%s'\n",

1718 
»sCÏss
->
desütÜ
);

1719 ià(
pFau»
 !ğ
NULL
)

1720 *
pFau»
 = 
VERIFY_ERROR_NO_CLASS
;

1721  
NULL
;

1725 
	`tw—kLßd”
(
»ã¼”
, 
»sCÏss
);

1726 
boŞ
 
®lowed
 = 
	`dvmCheckCÏssAcûss
(
»ã¼”
, 
»sCÏss
);

1727 
	`uÁw—kLßd”
(
»ã¼”
, 
»sCÏss
);

1728 ià(!
®lowed
) {

1729 
	`LOGW
("DexOpt:„esolve class illegal‡ccess: %s -> %s\n",

1730 
»ã¼”
->
desütÜ
, 
»sCÏss
->descriptor);

1731 ià(
pFau»
 !ğ
NULL
)

1732 *
pFau»
 = 
VERIFY_ERROR_ACCESS_CLASS
;

1733  
NULL
;

1736  
»sCÏss
;

1737 
	}
}

1744 
In¡F›ld
* 
	$dvmO±ResŞveIn¡F›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
,

1745 
V”ifyE¼Ü
* 
pFau»
)

1747 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

1748 
In¡F›ld
* 
»sF›ld
;

1750 
»sF›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
pDvmDex
, 
if›ldIdx
);

1751 ià(
»sF›ld
 =ğ
NULL
) {

1752 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

1753 
CÏssObjeù
* 
»sCÏss
;

1755 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
if›ldIdx
);

1760 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
pFau»
);

1761 ià(
»sCÏss
 =ğ
NULL
) {

1763 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1764 ià(
pFau»
 !ğ
NULL
è{ 
	`as£¹
(!
	`VERIFY_OK
(*pFailure)); }

1765  
NULL
;

1768 
»sF›ld
 = (
In¡F›ld
*)
	`dvmFšdF›ldH›r
(
»sCÏss
,

1769 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

1770 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

1771 ià(
»sF›ld
 =ğ
NULL
) {

1772 
	`LOGD
("DexOpt: couldn't find field %s.%s\n",

1773 
»sCÏss
->
desütÜ
,

1774 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

1775 ià(
pFau»
 !ğ
NULL
)

1776 *
pFau»
 = 
VERIFY_ERROR_NO_FIELD
;

1777  
NULL
;

1779 ià(
	`dvmIsSticF›ld
(&
»sF›ld
->
f›ld
)) {

1780 
	`LOGD
("DexOpt: wanted instance, got static for field %s.%s\n",

1781 
»sCÏss
->
desütÜ
,

1782 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

1783 ià(
pFau»
 !ğ
NULL
)

1784 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

1785  
NULL
;

1791 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
if›ldIdx
, (
F›ld
*è
»sF›ld
);

1795 
	`tw—kLßd”
(
»ã¼”
, 
»sF›ld
->
f›ld
.
şazz
);

1796 
boŞ
 
®lowed
 = 
	`dvmCheckF›ldAcûss
(
»ã¼”
, (
F›ld
*)
»sF›ld
);

1797 
	`uÁw—kLßd”
(
»ã¼”
, 
»sF›ld
->
f›ld
.
şazz
);

1798 ià(!
®lowed
) {

1799 
	`LOGI
("DexOpt:‡ccess denied from %so field %s.%s\n",

1800 
»ã¼”
->
desütÜ
, 
»sF›ld
->
f›ld
.
şazz
->descriptor,

1801 
»sF›ld
->
f›ld
.
Çme
);

1802 ià(
pFau»
 !ğ
NULL
)

1803 *
pFau»
 = 
VERIFY_ERROR_ACCESS_FIELD
;

1804  
NULL
;

1807  
»sF›ld
;

1808 
	}
}

1817 
SticF›ld
* 
	$dvmO±ResŞveSticF›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
,

1818 
V”ifyE¼Ü
* 
pFau»
)

1820 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

1821 
SticF›ld
* 
»sF›ld
;

1823 
»sF›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
pDvmDex
, 
sf›ldIdx
);

1824 ià(
»sF›ld
 =ğ
NULL
) {

1825 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

1826 
CÏssObjeù
* 
»sCÏss
;

1828 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
sf›ldIdx
);

1833 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
pFau»
);

1834 ià(
»sCÏss
 =ğ
NULL
) {

1836 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1837 ià(
pFau»
 !ğ
NULL
è{ 
	`as£¹
(!
	`VERIFY_OK
(*pFailure)); }

1838  
NULL
;

1841 
»sF›ld
 = (
SticF›ld
*)
	`dvmFšdF›ldH›r
(
»sCÏss
,

1842 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

1843 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

1844 ià(
»sF›ld
 =ğ
NULL
) {

1845 
	`LOGD
("DexOpt: couldn't find static field\n");

1846 ià(
pFau»
 !ğ
NULL
)

1847 *
pFau»
 = 
VERIFY_ERROR_NO_FIELD
;

1848  
NULL
;

1850 ià(!
	`dvmIsSticF›ld
(&
»sF›ld
->
f›ld
)) {

1851 
	`LOGD
("DexOpt: wanted static, got instance for field %s.%s\n",

1852 
»sCÏss
->
desütÜ
,

1853 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

1854 ià(
pFau»
 !ğ
NULL
)

1855 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

1856  
NULL
;

1866 ià(
gDvm
.
İtimizšg
)

1867 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
sf›ldIdx
, (
F›ld
*è
»sF›ld
);

1871 
	`tw—kLßd”
(
»ã¼”
, 
»sF›ld
->
f›ld
.
şazz
);

1872 
boŞ
 
®lowed
 = 
	`dvmCheckF›ldAcûss
(
»ã¼”
, (
F›ld
*)
»sF›ld
);

1873 
	`uÁw—kLßd”
(
»ã¼”
, 
»sF›ld
->
f›ld
.
şazz
);

1874 ià(!
®lowed
) {

1875 
	`LOGI
("DexOpt:‡ccess denied from %so field %s.%s\n",

1876 
»ã¼”
->
desütÜ
, 
»sF›ld
->
f›ld
.
şazz
->descriptor,

1877 
»sF›ld
->
f›ld
.
Çme
);

1878 ià(
pFau»
 !ğ
NULL
)

1879 *
pFau»
 = 
VERIFY_ERROR_ACCESS_FIELD
;

1880  
NULL
;

1883  
»sF›ld
;

1884 
	}
}

1898 
	$»wr™eIn¡F›ld
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
OpCode
 
ÃwOpc
)

1900 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1901 
u2
 
f›ldIdx
 = 
š¢s
[1];

1902 
In¡F›ld
* 
f›ld
;

1903 
by‹Off£t
;

1905 
f›ld
 = 
	`dvmO±ResŞveIn¡F›ld
(
şazz
, 
f›ldIdx
, 
NULL
);

1906 ià(
f›ld
 =ğ
NULL
) {

1907 
	`LOGI
("DexOpt: unableo optimize field„ef 0x%04x‡t 0x%02x in %s.%s\n",

1908 
f›ldIdx
, (è(
š¢s
 - 
m‘hod
->š¢s), 
şazz
->
desütÜ
,

1909 
m‘hod
->
Çme
);

1913 ià(
f›ld
->
by‹Off£t
 >= 65536) {

1914 
	`LOGI
("DexO±: f›ld off£ˆexûed 64K (%d)\n", 
f›ld
->
by‹Off£t
);

1918 
š¢s
[0] = (š¢s[0] & 0xff00è| (
u2
è
ÃwOpc
;

1919 
š¢s
[1] = (
u2
è
f›ld
->
by‹Off£t
;

1920 
	`LOGVV
("DexOpt:„ewrote‡ccesso %s.%s --> %d\n",

1921 
f›ld
->f›ld.
şazz
->
desütÜ
, f›ld->f›ld.
Çme
,

1922 
f›ld
->
by‹Off£t
);

1923 
	}
}

1932 
M‘hod
* 
	$dvmO±ResŞveM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

1933 
M‘hodTy³
 
m‘hodTy³
, 
V”ifyE¼Ü
* 
pFau»
)

1935 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

1936 
M‘hod
* 
»sM‘hod
;

1938 
	`as£¹
(
m‘hodTy³
 =ğ
METHOD_DIRECT
 ||

1939 
m‘hodTy³
 =ğ
METHOD_VIRTUAL
 ||

1940 
m‘hodTy³
 =ğ
METHOD_STATIC
);

1942 
	`LOGVV
("---„esŞvšg m‘hod %u (»ã¼”=%s)\n", 
m‘hodIdx
,

1943 
»ã¼”
->
desütÜ
);

1945 
»sM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
);

1946 ià(
»sM‘hod
 =ğ
NULL
) {

1947 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

1948 
CÏssObjeù
* 
»sCÏss
;

1950 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

1952 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
pFau»
);

1953 ià(
»sCÏss
 =ğ
NULL
) {

1958 
	`LOGV
("DexOpt: can't find called method's class (?.%s)\n",

1959 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
));

1960 ià(
pFau»
 !ğ
NULL
è{ 
	`as£¹
(!
	`VERIFY_OK
(*pFailure)); }

1961  
NULL
;

1963 ià(
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

1965 
	`LOGW
("DexOpt: method is in‡n interface\n");

1966 ià(
pFau»
 !ğ
NULL
)

1967 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

1968  
NULL
;

1976 
DexPrÙo
 
´Ùo
;

1977 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

1979 ià(
m‘hodTy³
 =ğ
METHOD_DIRECT
) {

1980 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hod
(
»sCÏss
,

1981 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
), &
´Ùo
);

1984 
»sM‘hod
 = 
	`dvmFšdM‘hodH›r
(
»sCÏss
,

1985 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
), &
´Ùo
);

1988 ià(
»sM‘hod
 =ğ
NULL
) {

1989 
	`LOGV
("DexOpt: couldn't find method '%s'\n",

1990 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
));

1991 ià(
pFau»
 !ğ
NULL
)

1992 *
pFau»
 = 
VERIFY_ERROR_NO_METHOD
;

1993  
NULL
;

1995 ià(
m‘hodTy³
 =ğ
METHOD_STATIC
) {

1996 ià(!
	`dvmIsSticM‘hod
(
»sM‘hod
)) {

1997 
	`LOGD
("DexOpt: wanted static, got instance for method %s.%s\n",

1998 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

1999 ià(
pFau»
 !ğ
NULL
)

2000 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

2001  
NULL
;

2003 } ià(
m‘hodTy³
 =ğ
METHOD_VIRTUAL
) {

2004 ià(
	`dvmIsSticM‘hod
(
»sM‘hod
)) {

2005 
	`LOGD
("DexOpt: wanted instance, got static for method %s.%s\n",

2006 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

2007 ià(
pFau»
 !ğ
NULL
)

2008 *
pFau»
 = 
VERIFY_ERROR_CLASS_CHANGE
;

2009  
NULL
;

2014 ià(
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
è&& !
	`dvmIsAb¡¿ùCÏss
(
»sCÏss
)) {

2015 
	`LOGW
("DexOpt:…ure-abstract method '%s' in %s\n",

2016 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
),

2017 
»sCÏss
->
desütÜ
);

2018 ià(
pFau»
 !ğ
NULL
)

2019 *
pFau»
 = 
VERIFY_ERROR_GENERIC
;

2020  
NULL
;

2031 ià(
m‘hodTy³
 !ğ
METHOD_STATIC
 || 
gDvm
.
İtimizšg
)

2032 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

2035 
	`LOGVV
("--- found method %d (%s.%s)\n",

2036 
m‘hodIdx
, 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

2039 
	`tw—kLßd”
(
»ã¼”
, 
»sM‘hod
->
şazz
);

2040 
boŞ
 
®lowed
 = 
	`dvmCheckM‘hodAcûss
(
»ã¼”
, 
»sM‘hod
);

2041 
	`uÁw—kLßd”
(
»ã¼”
, 
»sM‘hod
->
şazz
);

2042 ià(!
®lowed
) {

2043 
	`IF_LOGI
() {

2044 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

2045 
	`LOGI
("DexOpt: illegal method‡ccess (call %s.%s %s from %s)\n",

2046 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
, 
desc
,

2047 
»ã¼”
->
desütÜ
);

2048 
	`ä“
(
desc
);

2050 ià(
pFau»
 !ğ
NULL
)

2051 *
pFau»
 = 
VERIFY_ERROR_ACCESS_METHOD
;

2052  
NULL
;

2055  
»sM‘hod
;

2056 
	}
}

2066 
boŞ
 
	$»wr™eVœtu®Invoke
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
, 
OpCode
 
ÃwOpc
)

2068 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2069 
M‘hod
* 
ba£M‘hod
;

2070 
u2
 
m‘hodIdx
 = 
š¢s
[1];

2072 
ba£M‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
METHOD_VIRTUAL
, 
NULL
);

2073 ià(
ba£M‘hod
 =ğ
NULL
) {

2074 
	`LOGD
("DexOpt: unableo optimize virt call 0x%04x‡t 0x%02x in %s.%s\n",

2075 
m‘hodIdx
,

2076 (è(
š¢s
 - 
m‘hod
->š¢s), 
şazz
->
desütÜ
,

2077 
m‘hod
->
Çme
);

2078  
çl£
;

2081 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL
 ||

2082 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL_RANGE
 ||

2083 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_SUPER
 ||

2084 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_SUPER_RANGE
);

2090 
š¢s
[0] = (š¢s[0] & 0xff00è| (
u2
è
ÃwOpc
;

2091 
š¢s
[1] = 
ba£M‘hod
->
m‘hodIndex
;

2097  
Œue
;

2098 
	}
}

2110 
boŞ
 
	$»wr™eDœeùInvoke
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
)

2112 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2113 
M‘hod
* 
ÿÎedM‘hod
;

2114 
u2
 
m‘hodIdx
 = 
š¢s
[1];

2116 
ÿÎedM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
METHOD_DIRECT
, 
NULL
);

2117 ià(
ÿÎedM‘hod
 =ğ
NULL
) {

2118 
	`LOGD
("DexOpt: unableo opt direct call 0x%04x‡t 0x%02x in %s.%s\n",

2119 
m‘hodIdx
,

2120 (è(
š¢s
 - 
m‘hod
->š¢s), 
şazz
->
desütÜ
,

2121 
m‘hod
->
Çme
);

2122  
çl£
;

2126 ià(
ÿÎedM‘hod
->
şazz
 =ğ
gDvm
.
şassJavaLªgObjeù
 &&

2127 
	`dvmCom·»NameDesütÜAndM‘hod
("<š™>", "()V", 
ÿÎedM‘hod
) == 0)

2134 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_INVOKE_DIRECT
);

2135 
š¢s
[0] = (š¢s[0] & 0xff00è| (
u2
è
OP_INVOKE_DIRECT_EMPTY
;

2142  
Œue
;

2143 
	}
}

2152 
M‘hod
* 
	$dvmO±ResŞveIÁ”çûM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
)

2154 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

2155 
M‘hod
* 
»sM‘hod
;

2156 
i
;

2158 
	`LOGVV
("---„esolving interface method %d (referrer=%s)\n",

2159 
m‘hodIdx
, 
»ã¼”
->
desütÜ
);

2161 
»sM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
);

2162 ià(
»sM‘hod
 =ğ
NULL
) {

2163 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

2164 
CÏssObjeù
* 
»sCÏss
;

2166 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

2168 
»sCÏss
 = 
	`dvmO±ResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
NULL
);

2169 ià(
»sCÏss
 =ğ
NULL
) {

2171 
	`dvmCË¬O±Exû±iÚ
(
	`dvmTh»adS–f
());

2172  
NULL
;

2174 ià(!
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

2176 
	`LOGI
("Interface method‚ot…art of interface class\n");

2177  
NULL
;

2180 cÚ¡ * 
m‘hodName
 =

2181 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

2182 
DexPrÙo
 
´Ùo
;

2183 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

2185 
	`LOGVV
("+++†ooking for '%s' '%s' in„esClass='%s'\n",

2186 
m‘hodName
, 
m‘hodSig
, 
»sCÏss
->
desütÜ
);

2187 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hod
(
»sCÏss
, 
m‘hodName
, &
´Ùo
);

2188 ià(
»sM‘hod
 =ğ
NULL
) {

2190 
	`LOGVV
("+++ did‚ot„esolve immediately\n");

2191 
i
 = 0; i < 
»sCÏss
->
iáabËCouÁ
; i++) {

2192 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hod
(
»sCÏss
->
iáabË
[
i
].
şazz
,

2193 
m‘hodName
, &
´Ùo
);

2194 ià(
»sM‘hod
 !ğ
NULL
)

2198 ià(
»sM‘hod
 =ğ
NULL
) {

2199 
	`LOGVV
("+++ uÇbËØ»sŞvm‘hod %s\n", 
m‘hodName
);

2200  
NULL
;

2203 
	`LOGVV
("+++„esŞved immedŸ‹ly: % (% %d)\n", 
»sM‘hod
->
Çme
,

2204 
»sM‘hod
->
şazz
->
desütÜ
, (
u4
è»sM‘hod->
m‘hodIndex
);

2208 ià(!
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
)) {

2209 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
»sM‘hod
->
´ÙÙy³
);

2210 
	`LOGW
("Found‚on-abstract interface method %s.%s %s\n",

2211 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
, 
desc
);

2212 
	`ä“
(
desc
);

2213  
NULL
;

2219 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

2222 
	`LOGVV
("--- found interface method %d (%s.%s)\n",

2223 
m‘hodIdx
, 
»sM‘hod
->
şazz
->
desütÜ
,„esM‘hod->
Çme
);

2227  
»sM‘hod
;

2228 
	}
}

2235 
boŞ
 
	$»wr™eExecu‹IÆše
(
M‘hod
* 
m‘hod
, 
u2
* 
š¢s
,

2236 
M‘hodTy³
 
m‘hodTy³
, cÚ¡ 
IÆšeSub
* 
šlšeSubs
)

2238 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2239 
M‘hod
* 
ÿÎedM‘hod
;

2240 
u2
 
m‘hodIdx
 = 
š¢s
[1];

2244 
ÿÎedM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
şazz
, 
m‘hodIdx
, 
m‘hodTy³
, 
NULL
);

2245 ià(
ÿÎedM‘hod
 =ğ
NULL
) {

2246 
	`LOGV
("+++ DexO± iÆše: cª'ˆfšd %d\n", 
m‘hodIdx
);

2247  
çl£
;

2250 
šlšeSubs
->
m‘hod
 !ğ
NULL
) {

2260 ià(
šlšeSubs
->
m‘hod
 =ğ
ÿÎedM‘hod
) {

2261 
	`as£¹
((
š¢s
[0] & 0xffè=ğ
OP_INVOKE_DIRECT
 ||

2262 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_STATIC
 ||

2263 (
š¢s
[0] & 0xffè=ğ
OP_INVOKE_VIRTUAL
);

2264 
š¢s
[0] = (š¢s[0] & 0xff00è| (
u2
è
OP_EXECUTE_INLINE
;

2265 
š¢s
[1] = (
u2
è
šlšeSubs
->
šlšeIdx
;

2270  
Œue
;

2273 
šlšeSubs
++;

2276  
çl£
;

2277 
	}
}

	@analysis/DexOptimize.h

20 #iâdeà
_DALVIK_DEXOPTIMIZE


21 
	#_DALVIK_DEXOPTIMIZE


	)

27 
	eDexO±imiz”Mode
 {

28 
	mOPTIMIZE_MODE_UNKNOWN
 = 0,

29 
	mOPTIMIZE_MODE_NONE
,

30 
	mOPTIMIZE_MODE_VERIFIED
,

31 
	mOPTIMIZE_MODE_ALL


32 } 
	tDexO±imiz”Mode
;

35 
	eDexİtFÏgs
 {

36 
	mDEXOPT_GEN_REGISTER_MAPS
 = 1,

42 
	eV”ifyE¼Ü
 {

43 
	mVERIFY_ERROR_NONE
 = 0,

44 
	mVERIFY_ERROR_GENERIC
,

46 
	mVERIFY_ERROR_NO_CLASS
,

47 
	mVERIFY_ERROR_NO_FIELD
,

48 
	mVERIFY_ERROR_NO_METHOD
,

49 
	mVERIFY_ERROR_ACCESS_CLASS
,

50 
	mVERIFY_ERROR_ACCESS_FIELD
,

51 
	mVERIFY_ERROR_ACCESS_METHOD
,

52 
	mVERIFY_ERROR_CLASS_CHANGE
,

53 
	mVERIFY_ERROR_INSTANTIATION
,

54 } 
	tV”ifyE¼Ü
;

63 
	eV”ifyE¼ÜRefTy³
 {

64 
	mVERIFY_ERROR_REF_CLASS
 = 0,

65 
	mVERIFY_ERROR_REF_FIELD
 = 1,

66 
	mVERIFY_ERROR_REF_METHOD
 = 2,

67 } 
	tV”ifyE¼ÜRefTy³
;

69 
	#kV”ifyE¼ÜRefTy³Shiá
 6

	)

71 
	#VERIFY_OK
(
_çu»
è((_çu»è=ğ
VERIFY_ERROR_NONE
)

	)

82 
dvmO³nCachedDexFe
(cÚ¡ * 
feName
, cÚ¡ * 
ÿchedFe
,

83 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
, boŞ* 
pNewFe
, boŞ 
ü—‹IfMissšg
);

91 
boŞ
 
dvmUÆockCachedDexFe
(
fd
);

97 
boŞ
 
dvmCheckO±H—d”AndD•’d’c›s
(
fd
, boŞ 
sourûAva
, 
u4
 
modWh’
,

98 
u4
 
üc
, 
boŞ
 
ex³ùV”ify
, boŞ 
ex³ùO±
);

106 
boŞ
 
dvmO±imizeDexFe
(
fd
, 
off_t
 
dexOff£t
, 
dexL’
,

107 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
);

112 
boŞ
 
dvmCÚtšueO±imiz©iÚ
(
fd
, 
off_t
 
dexOff£t
, 
dexL’gth
,

113 cÚ¡ * 
feName
, 
u4
 
modWh’
, u4 
üc
, 
boŞ
 
isBoÙ¡¿p
);

119 
CÏssObjeù
* 
dvmO±ResŞveCÏss
(CÏssObjeù* 
»ã¼”
, 
u4
 
şassIdx
,

120 
V”ifyE¼Ü
* 
pFau»
);

121 
M‘hod
* 
dvmO±ResŞveM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

122 
M‘hodTy³
 
m‘hodTy³
, 
V”ifyE¼Ü
* 
pFau»
);

123 
M‘hod
* 
dvmO±ResŞveIÁ”çûM‘hod
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
);

124 
In¡F›ld
* 
dvmO±ResŞveIn¡F›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
,

125 
V”ifyE¼Ü
* 
pFau»
);

126 
SticF›ld
* 
dvmO±ResŞveSticF›ld
(
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
,

127 
V”ifyE¼Ü
* 
pFau»
);

	@analysis/DexVerify.c

21 
	~"D®vik.h
"

22 
	~"ª®ysis/CodeV”ify.h
"

26 
boŞ
 
v”ifyM‘hod
(
M‘hod
* 
m‘h
, 
v”ifyFÏgs
);

27 
boŞ
 
v”ifyIn¡ruùiÚs
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

28 
v”ifyFÏgs
);

34 
boŞ
 
	$dvmV”ifiÿtiÚS¹up
()

36 
gDvm
.
š¡rWidth
 = 
	`dexC»©eIn¡rWidthTabË
();

37 
gDvm
.
š¡rFÜm©
 = 
	`dexC»©eIn¡rFÜm©TabË
();

38 
gDvm
.
š¡rFÏgs
 = 
	`dexC»©eIn¡rFÏgsTabË
();

39 ià(
gDvm
.
š¡rWidth
 =ğ
NULL
 || gDvm.
š¡rFÜm©
 == NULL ||

40 
gDvm
.
š¡rFÏgs
 =ğ
NULL
)

42 
	`LOGE
("Unableo create instructionables\n");

43  
çl£
;

46  
Œue
;

47 
	}
}

52 
	$dvmV”ifiÿtiÚShutdown
()

54 
	`ä“
(
gDvm
.
š¡rWidth
);

55 
	`ä“
(
gDvm
.
š¡rFÜm©
);

56 
	`ä“
(
gDvm
.
š¡rFÏgs
);

57 
	}
}

66 
boŞ
 
	$dvmV”ifyAÎCÏs£s
(
DexFe
* 
pDexFe
)

68 
u4
 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

69 
u4
 
idx
;

71 
	`as£¹
(
gDvm
.
İtimizšg
);

73 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
) {

74 
	`LOGV
("+++ verification is disabled, skipping‡ll classes\n");

75  
Œue
;

77 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
 &&

78 
gDvm
.
İtimizšgBoÙ¡¿pCÏss
)

80 
	`LOGV
("+++ verification disabled for bootstrap classes\n");

81  
Œue
;

84 
idx
 = 0; idx < 
couÁ
; idx++) {

85 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

86 cÚ¡ * 
şassDesütÜ
;

87 
CÏssObjeù
* 
şazz
;

89 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

90 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

93 
şazz
 = 
	`dvmLookupCÏss
(
şassDesütÜ
, 
NULL
, 
çl£
);

94 ià(
şazz
 !ğ
NULL
) {

95 ià(
şazz
->
pDvmDex
->
pDexFe
 !=…DexFile) {

96 
	`LOGD
("DexOpt:‚ot verifying '%s': multiple definitions\n",

97 
şassDesütÜ
);

99 ià(
	`dvmV”ifyCÏss
(
şazz
, 
VERIFY_DEFAULT
)) {

100 
	`as£¹
((
şazz
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
) ==

101 
pCÏssDef
->
acûssFÏgs
);

102 ((
DexCÏssDef
*)
pCÏssDef
)->
acûssFÏgs
 |=

103 
CLASS_ISPREVERIFIED
;

108 
	`LOGV
("DexO±: +++‚Ù v”ifyšg '%s'\n", 
şassDesütÜ
);

112  
Œue
;

113 
	}
}

124 
boŞ
 
	$dvmV”ifyCÏss
(
CÏssObjeù
* 
şazz
, 
v”ifyFÏgs
)

126 
i
;

128 ià(
	`dvmIsCÏssV”if›d
(
şazz
)) {

129 
	`LOGD
("IgnÜšg du¶iÿ‹ v”ify‡‰em± oÀ%s\n", 
şazz
->
desütÜ
);

130  
Œue
;

137 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

138 ià(!
	`v”ifyM‘hod
(&
şazz
->
dœeùM‘hods
[
i
], 
v”ifyFÏgs
)) {

139 
	`LOG_VFY
("V”if›¸»jeùed cÏs %s\n", 
şazz
->
desütÜ
);

140  
çl£
;

143 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

144 ià(!
	`v”ifyM‘hod
(&
şazz
->
vœtu®M‘hods
[
i
], 
v”ifyFÏgs
)) {

145 
	`LOG_VFY
("V”if›¸»jeùed cÏs %s\n", 
şazz
->
desütÜ
);

146  
çl£
;

150  
Œue
;

151 
	}
}

174 
boŞ
 
	$v”ifyM‘hod
(
M‘hod
* 
m‘h
, 
v”ifyFÏgs
)

176 
boŞ
 
»suÉ
 = 
çl£
;

177 
Unš™In¡ªûM­
* 
unš™M­
 = 
NULL
;

178 
In¢FÏgs
* 
š¢FÏgs
 = 
NULL
;

179 
i
, 
ÃwIn¡ªûCouÁ
;

186 ià(
	`dvmG‘M‘hodIn¢sSize
(
m‘h
) == 0) {

187 ià(!
	`dvmIsN©iveM‘hod
(
m‘h
è&& !
	`dvmIsAb¡¿ùM‘hod
(meth)) {

188 
	`LOG_VFY_METH
(
m‘h
,

190 
ba
;

193 
sucûss
;

200 ià(
m‘h
->
šsSize
 > m‘h->
»gi¡”sSize
) {

201 
	`LOG_VFY_METH
(
m‘h
, "VFY: bad„egister counts (ins=%d„egs=%d)\n",

202 
m‘h
->
šsSize
, m‘h->
»gi¡”sSize
);

203 
ba
;

212 
š¢FÏgs
 = (
In¢FÏgs
*)

213 
	`ÿÎoc
(
	`dvmG‘M‘hodIn¢sSize
(
m‘h
), (
In¢FÏgs
));

214 ià(
š¢FÏgs
 =ğ
NULL
)

215 
ba
;

222 ià(!
	`dvmCompu‹CodeWidths
(
m‘h
, 
š¢FÏgs
, &
ÃwIn¡ªûCouÁ
))

223 
ba
;

228 
unš™M­
 = 
	`dvmC»©eUnš™In¡ªûM­
(
m‘h
, 
š¢FÏgs
, 
ÃwIn¡ªûCouÁ
);

229 ià(
unš™M­
 =ğ
NULL
)

230 
ba
;

235 ià(!
	`dvmS‘TryFÏgs
(
m‘h
, 
š¢FÏgs
))

236 
ba
;

241 ià(!
	`v”ifyIn¡ruùiÚs
(
m‘h
, 
š¢FÏgs
, 
v”ifyFÏgs
))

242 
ba
;

252 ià(!
	`dvmV”ifyCodeFlow
(
m‘h
, 
š¢FÏgs
, 
unš™M­
)) {

254 
ba
;

257 
sucûss
:

258 
»suÉ
 = 
Œue
;

260 
ba
:

261 
	`dvmF»eUnš™In¡ªûM­
(
unš™M­
);

262 
	`ä“
(
š¢FÏgs
);

263  
»suÉ
;

264 
	}
}

271 
boŞ
 
	$checkA¼ayD©a
(cÚ¡ 
M‘hod
* 
m‘h
, 
curOff£t
)

273 cÚ¡ 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

274 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

275 cÚ¡ 
u2
* 
¬¿yD©a
;

276 
v®ueCouÁ
, 
v®ueWidth
, 
bËSize
;

277 
off£tToA¼ayD©a
;

279 
	`as£¹
(
curOff£t
 >ğ0 && curOff£ˆ< 
š¢CouÁ
);

282 
off£tToA¼ayD©a
 = 
š¢s
[1] | (((
s4
)insns[2]) << 16);

283 ià(
curOff£t
 + 
off£tToA¼ayD©a
 < 0 ||

284 
curOff£t
 + 
off£tToA¼ayD©a
 + 2 >ğ
š¢CouÁ
)

286 
	`LOG_VFY_METH
(
m‘h
,

288 
curOff£t
, 
off£tToA¼ayD©a
, 
š¢CouÁ
);

289  
çl£
;

293 
¬¿yD©a
 = 
š¢s
 + 
off£tToA¼ayD©a
;

296 ià((((
u4
è
¬¿yD©a
) & 0x03) != 0) {

297 
	`LOG_VFY_METH
(
m‘h
,

299 
curOff£t
, 
off£tToA¼ayD©a
);

300  
çl£
;

303 
v®ueWidth
 = 
¬¿yD©a
[1];

304 
v®ueCouÁ
 = *(
u4
*)(&
¬¿yD©a
[2]);

306 
bËSize
 = 4 + (
v®ueWidth
 * 
v®ueCouÁ
 + 1) / 2;

309 ià(
curOff£t
 + 
off£tToA¼ayD©a
 + 
bËSize
 > 
š¢CouÁ
) {

310 
	`LOG_VFY_METH
(
m‘h
,

313 
curOff£t
, 
off£tToA¼ayD©a
,

314 
curOff£t
 + 
off£tToA¼ayD©a
 + 
bËSize
,

315 
š¢CouÁ
);

316  
çl£
;

319  
Œue
;

320 
	}
}

326 
	$decodeIn¡ruùiÚ
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
,

327 
DecodedIn¡ruùiÚ
* 
pDecIn¢
)

329 
	`dexDecodeIn¡ruùiÚ
(
gDvm
.
š¡rFÜm©
, 
m‘h
->
š¢s
 + 
š¢Idx
, 
pDecIn¢
);

330 
	}
}

339 
boŞ
 
	$checkNewIn¡ªû
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
)

341 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

342 
DecodedIn¡ruùiÚ
 
decIn¢
;

343 cÚ¡ * 
şassDesütÜ
;

344 
u4
 
idx
;

346 
	`decodeIn¡ruùiÚ
(
m‘h
, 
š¢Idx
, &
decIn¢
);

347 
idx
 = 
decIn¢
.
vB
;

348 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
) {

349 
	`LOG_VFY_METH
(
m‘h
, "VFY: badype index %d (max %d)\n",

350 
idx
, 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

351  
çl£
;

354 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
idx
);

355 ià(
şassDesütÜ
[0] != 'L') {

356 
	`LOG_VFY_METH
(
m‘h
, "VFY: can't call‚ew-instance onype '%s'\n",

357 
şassDesütÜ
);

358  
çl£
;

361  
Œue
;

362 
	}
}

369 
boŞ
 
	$checkNewA¼ay
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
)

371 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

372 
DecodedIn¡ruùiÚ
 
decIn¢
;

373 cÚ¡ * 
şassDesütÜ
;

374 
u4
 
idx
;

376 
	`decodeIn¡ruùiÚ
(
m‘h
, 
š¢Idx
, &
decIn¢
);

377 
idx
 = 
decIn¢
.
vC
;

378 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
) {

379 
	`LOG_VFY_METH
(
m‘h
, "VFY: badype index %d (max %d)\n",

380 
idx
, 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

381  
çl£
;

384 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
idx
);

386 
b¿ck‘CouÁ
 = 0;

387 cÚ¡ * 
ı
 = 
şassDesütÜ
;

388 *
ı
++ == '[')

389 
b¿ck‘CouÁ
++;

391 ià(
b¿ck‘CouÁ
 == 0) {

393 
	`LOG_VFY_METH
(
m‘h
, "VFY: can't‚ew-array class '%s' (not‡n‡rray)\n",

394 
şassDesütÜ
);

395  
çl£
;

396 } ià(
b¿ck‘CouÁ
 > 255) {

398 
	`LOG_VFY_METH
(
m‘h
, "VFY: can't‚ew-array class '%s' (exceeds†imit)\n",

399 
şassDesütÜ
);

400  
çl£
;

403  
Œue
;

404 
	}
}

410 
boŞ
 
	$checkTy³Index
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
, 
boŞ
 
u£B
)

412 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

413 
DecodedIn¡ruùiÚ
 
decIn¢
;

414 
u4
 
idx
;

416 
	`decodeIn¡ruùiÚ
(
m‘h
, 
š¢Idx
, &
decIn¢
);

417 ià(
u£B
)

418 
idx
 = 
decIn¢
.
vB
;

420 
idx
 = 
decIn¢
.
vC
;

421 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
ty³IdsSize
) {

422 
	`LOG_VFY_METH
(
m‘h
, "VFY: badype index %d (max %d)\n",

423 
idx
, 
pDvmDex
->
pH—d”
->
ty³IdsSize
);

424  
çl£
;

427  
Œue
;

428 
	}
}

434 
boŞ
 
	$checkF›ldIndex
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
, 
boŞ
 
u£B
)

436 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

437 
DecodedIn¡ruùiÚ
 
decIn¢
;

438 
u4
 
idx
;

440 
	`decodeIn¡ruùiÚ
(
m‘h
, 
š¢Idx
, &
decIn¢
);

441 ià(
u£B
)

442 
idx
 = 
decIn¢
.
vB
;

444 
idx
 = 
decIn¢
.
vC
;

445 ià(
idx
 >ğ
pDvmDex
->
pH—d”
->
f›ldIdsSize
) {

446 
	`LOG_VFY_METH
(
m‘h
,

448 
idx
, 
pDvmDex
->
pH—d”
->
f›ldIdsSize
, 
š¢Idx
);

449  
çl£
;

452  
Œue
;

453 
	}
}

459 
boŞ
 
	$checkM‘hodIndex
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
)

461 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

462 
DecodedIn¡ruùiÚ
 
decIn¢
;

464 
	`decodeIn¡ruùiÚ
(
m‘h
, 
š¢Idx
, &
decIn¢
);

465 ià(
decIn¢
.
vB
 >ğ
pDvmDex
->
pH—d”
->
m‘hodIdsSize
) {

466 
	`LOG_VFY_METH
(
m‘h
, "VFY: bad method index %d (max %d)\n",

467 
decIn¢
.
vB
, 
pDvmDex
->
pH—d”
->
m‘hodIdsSize
);

468  
çl£
;

471  
Œue
;

472 
	}
}

478 
boŞ
 
	$checkSŒšgIndex
(cÚ¡ 
M‘hod
* 
m‘h
, 
š¢Idx
)

480 
DvmDex
* 
pDvmDex
 = 
m‘h
->
şazz
->pDvmDex;

481 
DecodedIn¡ruùiÚ
 
decIn¢
;

483 
	`decodeIn¡ruùiÚ
(
m‘h
, 
š¢Idx
, &
decIn¢
);

484 ià(
decIn¢
.
vB
 >ğ
pDvmDex
->
pH—d”
->
¡ršgIdsSize
) {

485 
	`LOG_VFY_METH
(
m‘h
, "VFY: bad string index %d (max %d)\n",

486 
decIn¢
.
vB
, 
pDvmDex
->
pH—d”
->
¡ršgIdsSize
);

487  
çl£
;

490  
Œue
;

491 
	}
}

532 
boŞ
 
	$v”ifyIn¡ruùiÚs
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

533 
v”ifyFÏgs
)

535 cÚ¡ 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

536 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

537 
i
;

540 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 0, 
Œue
);

542 
i
 = 0; i < 
š¢CouÁ
; ) {

548 cÚ¡ 
gcMask
 = 
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 |

549 
kIn¡rCªThrow
 | 
kIn¡rCªR‘uº
;

551 
width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
i
);

552 
OpCode
 
İcode
 = *
š¢s
 & 0xff;

553 
In¡ruùiÚFÏgs
 
İFÏgs
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
İcode
);

554 
off£t
, 
absOff£t
;

556 ià((
İFÏgs
 & 
gcMask
) != 0) {

562 
off£t
 = -1;

563 
boŞ
 
unu£d
;

564 ià(
	`dvmG‘B¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
i
, &
off£t
, &
unu£d
)) {

565 ià(
off£t
 < 0) {

566 
	`dvmIn¢S‘GcPošt
(
š¢FÏgs
, 
i
, 
Œue
);

570 
	`dvmIn¢S‘GcPošt
(
š¢FÏgs
, 
i
, 
Œue
);

574 
İcode
) {

575 
OP_NOP
:

579 
OP_CONST_STRING
:

580 
OP_CONST_STRING_JUMBO
:

581 ià(!
	`checkSŒšgIndex
(
m‘h
, 
i
))

582  
çl£
;

585 
OP_CONST_CLASS
:

586 
OP_CHECK_CAST
:

587 ià(!
	`checkTy³Index
(
m‘h
, 
i
, 
Œue
))

588  
çl£
;

590 
OP_INSTANCE_OF
:

591 ià(!
	`checkTy³Index
(
m‘h
, 
i
, 
çl£
))

592  
çl£
;

595 
OP_PACKED_SWITCH
:

596 
OP_SPARSE_SWITCH
:

598 ià(!
	`dvmCheckSw™chT¬g‘s
(
m‘h
, 
š¢FÏgs
, 
i
))

599  
çl£
;

602 
OP_FILL_ARRAY_DATA
:

604 ià(!
	`checkA¼ayD©a
(
m‘h
, 
i
))

605  
çl£
;

608 
OP_GOTO
:

609 
OP_GOTO_16
:

610 
OP_IF_EQ
:

611 
OP_IF_NE
:

612 
OP_IF_LT
:

613 
OP_IF_GE
:

614 
OP_IF_GT
:

615 
OP_IF_LE
:

616 
OP_IF_EQZ
:

617 
OP_IF_NEZ
:

618 
OP_IF_LTZ
:

619 
OP_IF_GEZ
:

620 
OP_IF_GTZ
:

621 
OP_IF_LEZ
:

623 ià(!
	`dvmCheckB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
i
, 
çl£
))

624  
çl£
;

626 
OP_GOTO_32
:

628 ià(!
	`dvmCheckB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
i
, 
Œue
))

629  
çl£
;

632 
OP_NEW_INSTANCE
:

633 ià(!
	`checkNewIn¡ªû
(
m‘h
, 
i
))

634  
çl£
;

637 
OP_NEW_ARRAY
:

638 ià(!
	`checkNewA¼ay
(
m‘h
, 
i
))

639  
çl£
;

642 
OP_FILLED_NEW_ARRAY
:

643 ià(!
	`checkTy³Index
(
m‘h
, 
i
, 
Œue
))

644  
çl£
;

646 
OP_FILLED_NEW_ARRAY_RANGE
:

647 ià(!
	`checkTy³Index
(
m‘h
, 
i
, 
Œue
))

648  
çl£
;

651 
OP_IGET
:

652 
OP_IGET_WIDE
:

653 
OP_IGET_OBJECT
:

654 
OP_IGET_BOOLEAN
:

655 
OP_IGET_BYTE
:

656 
OP_IGET_CHAR
:

657 
OP_IGET_SHORT
:

658 
OP_IPUT
:

659 
OP_IPUT_WIDE
:

660 
OP_IPUT_OBJECT
:

661 
OP_IPUT_BOOLEAN
:

662 
OP_IPUT_BYTE
:

663 
OP_IPUT_CHAR
:

664 
OP_IPUT_SHORT
:

666 ià(!
	`checkF›ldIndex
(
m‘h
, 
i
, 
çl£
))

667  
çl£
;

669 
OP_SGET
:

670 
OP_SGET_WIDE
:

671 
OP_SGET_OBJECT
:

672 
OP_SGET_BOOLEAN
:

673 
OP_SGET_BYTE
:

674 
OP_SGET_CHAR
:

675 
OP_SGET_SHORT
:

676 
OP_SPUT
:

677 
OP_SPUT_WIDE
:

678 
OP_SPUT_OBJECT
:

679 
OP_SPUT_BOOLEAN
:

680 
OP_SPUT_BYTE
:

681 
OP_SPUT_CHAR
:

682 
OP_SPUT_SHORT
:

684 ià(!
	`checkF›ldIndex
(
m‘h
, 
i
, 
Œue
))

685  
çl£
;

688 
OP_INVOKE_VIRTUAL
:

689 
OP_INVOKE_SUPER
:

690 
OP_INVOKE_DIRECT
:

691 
OP_INVOKE_STATIC
:

692 
OP_INVOKE_INTERFACE
:

693 
OP_INVOKE_VIRTUAL_RANGE
:

694 
OP_INVOKE_SUPER_RANGE
:

695 
OP_INVOKE_DIRECT_RANGE
:

696 
OP_INVOKE_STATIC_RANGE
:

697 
OP_INVOKE_INTERFACE_RANGE
:

699 ià(!
	`checkM‘hodIndex
(
m‘h
, 
i
))

700  
çl£
;

703 
OP_EXECUTE_INLINE
:

704 
OP_INVOKE_DIRECT_EMPTY
:

705 
OP_IGET_QUICK
:

706 
OP_IGET_WIDE_QUICK
:

707 
OP_IGET_OBJECT_QUICK
:

708 
OP_IPUT_QUICK
:

709 
OP_IPUT_WIDE_QUICK
:

710 
OP_IPUT_OBJECT_QUICK
:

711 
OP_INVOKE_VIRTUAL_QUICK
:

712 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

713 
OP_INVOKE_SUPER_QUICK
:

714 
OP_INVOKE_SUPER_QUICK_RANGE
:

715 ià((
v”ifyFÏgs
 & 
VERIFY_ALLOW_OPT_INSTRS
) == 0) {

716 
	`LOG_VFY
("VFY:‚otƒxpecting optimized instructions\n");

717  
çl£
;

726 
	`as£¹
(
width
 > 0);

727 
i
 +ğ
width
;

728 
š¢s
 +ğ
width
;

732 ià(
i
 !ğ
š¢CouÁ
) {

733 
	`LOG_VFY_METH
(
m‘h
,

735 
i
, 
š¢CouÁ
);

736  
çl£
;

739  
Œue
;

740 
	}
}

	@analysis/DexVerify.h

20 #iâdeà
_DALVIK_DEXVERIFY


21 
	#_DALVIK_DEXVERIFY


	)

29 
	mVERIFY_MODE_UNKNOWN
 = 0,

30 
	mVERIFY_MODE_NONE
,

31 
	mVERIFY_MODE_REMOTE
,

32 
	mVERIFY_MODE_ALL


33 } 
	tDexCÏssV”ifyMode
;

42 
	mVERIFY_DEFAULT
 = 0,

43 
	mVERIFY_ALLOW_OPT_INSTRS
 = 1,

46 
boŞ
 
dvmV”ifiÿtiÚS¹up
();

47 
dvmV”ifiÿtiÚShutdown
();

53 
boŞ
 
dvmV”ifyAÎCÏs£s
(
DexFe
* 
pDexFe
);

58 
boŞ
 
dvmV”ifyCÏss
(
CÏssObjeù
* 
şazz
, 
v”ifyFÏgs
);

63 
dvmF»eRegi¡”M­
(
Regi¡”M­
* 
pM­
);

	@analysis/ReduceConstants.c

23 
	~"D®vik.h
"

24 
	~"libdex/In¡rUts.h
"

25 
	~"libdex/O±InvoÿtiÚ.h
"

26 
	~"libdex/DexCÏss.h
"

241 
	sSÿnResuÉs
 {

243 
B™VeùÜ
* 
	mu£dCÏs£s
;

244 
B™VeùÜ
* 
	mu£dM‘hods
;

245 
B™VeùÜ
* 
	mu£dF›lds
;

246 
B™VeùÜ
* 
	mu£dSŒšgs
;

247 } 
	tSÿnResuÉs
;

250 (
	tAÎM‘hodsFunc
)(
	tDexFe
* 
	tpDexFe
, cÚ¡ * 
	tşassDesütÜ
,

251 
	tDexM‘hod
* 
	tpDexM‘hod
, * 
	t¬g
);

257 
	$ä“SÿnResuÉs
(
SÿnResuÉs
* 
pResuÉs
)

259 ià(
pResuÉs
 =ğ
NULL
)

262 
	`dvmF»eB™VeùÜ
(
pResuÉs
->
u£dCÏs£s
);

263 
	`dvmF»eB™VeùÜ
(
pResuÉs
->
u£dM‘hods
);

264 
	`dvmF»eB™VeùÜ
(
pResuÉs
->
u£dF›lds
);

265 
	`dvmF»eB™VeùÜ
(
pResuÉs
->
u£dSŒšgs
);

266 
	`ä“
(
pResuÉs
);

267 
	}
}

272 
SÿnResuÉs
* 
	$®locSÿnResuÉs
(cÚ¡ 
DexFe
* 
pDexFe
)

274 
SÿnResuÉs
* 
pResuÉs
;

275 cÚ¡ 
DexH—d”
* 
pH—d”
 = 
pDexFe
->pHeader;

277 
pResuÉs
 = (
SÿnResuÉs
*è
	`ÿÎoc
(1, (ScanResults));

278 ià(
pResuÉs
 =ğ
NULL
)

279  
NULL
;

281 
pResuÉs
->
u£dCÏs£s
 = 
	`dvmAÎocB™VeùÜ
(
pH—d”
->
ty³IdsSize
, 
çl£
);

282 
pResuÉs
->
u£dM‘hods
 = 
	`dvmAÎocB™VeùÜ
(
pH—d”
->
m‘hodIdsSize
, 
çl£
);

283 
pResuÉs
->
u£dF›lds
 = 
	`dvmAÎocB™VeùÜ
(
pH—d”
->
f›ldIdsSize
, 
çl£
);

284 
pResuÉs
->
u£dSŒšgs
 = 
	`dvmAÎocB™VeùÜ
(
pH—d”
->
¡ršgIdsSize
, 
çl£
);

286 ià(
pResuÉs
->
u£dCÏs£s
 =ğ
NULL
 ||

287 
pResuÉs
->
u£dM‘hods
 =ğ
NULL
 ||

288 
pResuÉs
->
u£dF›lds
 =ğ
NULL
 ||

289 
pResuÉs
->
u£dSŒšgs
 =ğ
NULL
)

291 
	`ä“SÿnResuÉs
(
pResuÉs
);

292  
NULL
;

295  
pResuÉs
;

296 
	}
}

306 
	$fÜAÎM‘hodsInCÏss
(
DexFe
* 
pDexFe
, cÚ¡ 
u1
** 
µEncodedD©a
,

307 cÚ¡ 
DexCÏssD©aH—d”
* 
pH—d”
, cÚ¡ * 
şassDesütÜ
,

308 
AÎM‘hodsFunc
 
func
, * 
¬g
)

310 
i
;

315 ià(
pH—d”
->
¡©icF›ldsSize
 != 0) {

316 
couÁ
 = (è
pH—d”
->
¡©icF›ldsSize
;

317 
u4
 
Ï¡Index
 = 0;

318 
DexF›ld
 
f›ld
;

319 
i
 = 0; i < 
couÁ
; i++) {

320 
	`dexR—dCÏssD©aF›ld
(
µEncodedD©a
, &
f›ld
, &
Ï¡Index
);

323 ià(
pH—d”
->
š¡ªûF›ldsSize
 != 0) {

324 
couÁ
 = (è
pH—d”
->
š¡ªûF›ldsSize
;

325 
u4
 
Ï¡Index
 = 0;

326 
DexF›ld
 
f›ld
;

327 
i
 = 0; i < 
couÁ
; i++) {

328 
	`dexR—dCÏssD©aF›ld
(
µEncodedD©a
, &
f›ld
, &
Ï¡Index
);

335 ià(
pH—d”
->
dœeùM‘hodsSize
 != 0) {

336 
couÁ
 = (è
pH—d”
->
dœeùM‘hodsSize
;

337 
u4
 
Ï¡Index
 = 0;

338 
DexM‘hod
 
m‘hod
;

340 
i
 = 0; i < 
couÁ
; i++) {

341 
	`dexR—dCÏssD©aM‘hod
(
µEncodedD©a
, &
m‘hod
, &
Ï¡Index
);

342 (
func
)(
pDexFe
, 
şassDesütÜ
, &
m‘hod
, 
¬g
);

345 ià(
pH—d”
->
vœtu®M‘hodsSize
 != 0) {

346 
couÁ
 = (è
pH—d”
->
vœtu®M‘hodsSize
;

347 
u4
 
Ï¡Index
 = 0;

348 
DexM‘hod
 
m‘hod
;

350 
i
 = 0; i < 
couÁ
; i++) {

351 
	`dexR—dCÏssD©aM‘hod
(
µEncodedD©a
, &
m‘hod
, &
Ï¡Index
);

352 (
func
)(
pDexFe
, 
şassDesütÜ
, &
m‘hod
, 
¬g
);

355 
	}
}

360 
	$fÜAÎM‘hods
(
DexFe
* 
pDexFe
, 
AÎM‘hodsFunc
 
func
, * 
¬g
)

362 
u4
 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

363 
u4
 
idx
;

365 
idx
 = 0; idx < 
couÁ
; idx++) {

366 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

367 
DexCÏssD©aH—d”
 
h—d”
;

368 cÚ¡ 
u1
* 
pEncodedD©a
;

370 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

371 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

373 cÚ¡ * 
şassDesütÜ
;

374 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

376 ià(
pEncodedD©a
 !ğ
NULL
) {

377 
	`dexR—dCÏssD©aH—d”
(&
pEncodedD©a
, &
h—d”
);

379 
	`fÜAÎM‘hodsInCÏss
(
pDexFe
, &
pEncodedD©a
, &
h—d”
,

380 
şassDesütÜ
, 
func
, 
¬g
);

386 
	}
}

391 
	$m¬kCÏss
(cÚ¡ 
u2
* 
±r
, 
SÿnResuÉs
* 
pResuÉs
)

393 
u2
 
şassIdx
 = *
±r
;

394 ià(!
	`dvmS‘B™
(
pResuÉs
->
u£dCÏs£s
, 
şassIdx
)) {

395 
	`LOGE
("UÇbËØm¬k cÏs %d‡ š-u£\n", 
şassIdx
);

397 
	}
}

402 
	$m¬kM‘hod
(cÚ¡ 
u2
* 
±r
, 
SÿnResuÉs
* 
pResuÉs
)

404 
u2
 
m‘hodIdx
 = *
±r
;

405 ià(!
	`dvmS‘B™
(
pResuÉs
->
u£dM‘hods
, 
m‘hodIdx
)) {

406 
	`LOGE
("UÇbËØm¬k m‘hod %d‡ š-u£\n", 
m‘hodIdx
);

408 
	}
}

413 
	$m¬kF›ld
(cÚ¡ 
u2
* 
±r
, 
SÿnResuÉs
* 
pResuÉs
)

415 
u2
 
f›ldIdx
 = *
±r
;

416 ià(!
	`dvmS‘B™
(
pResuÉs
->
u£dF›lds
, 
f›ldIdx
)) {

417 
	`LOGE
("UÇbËØm¬k f›ld %d‡ š-u£\n", 
f›ldIdx
);

419 
	}
}

424 
	$m¬kSŒšg
(cÚ¡ 
u2
* 
±r
, 
SÿnResuÉs
* 
pResuÉs
)

426 
u2
 
¡ršgIdx
 = *
±r
;

427 ià(!
	`dvmS‘B™
(
pResuÉs
->
u£dSŒšgs
, 
¡ršgIdx
)) {

428 
	`LOGE
("UÇbËØm¬k sŒšg %d‡ š-u£\n", 
¡ršgIdx
);

430 
	}
}

435 
	$m¬kJumboSŒšg
(
u2
* 
±r
, 
SÿnResuÉs
* 
pResuÉs
)

437 
u4
 
¡ršgIdx
;

440 
	`memıy
(&
¡ršgIdx
, 
±r
, (
u4
));

441 ià(!
	`dvmS‘B™
(
pResuÉs
->
u£dSŒšgs
, 
¡ršgIdx
)) {

442 
	`LOGE
("UÇbËØm¬k sŒšg %d‡ š-u£\n", 
¡ršgIdx
);

444 
	}
}

449 
šlše
 
	$upd©eV®ue
(
u2
* 
±r
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
,

450 
whichM­
)

452 cÚ¡ 
IndexM­
* 
pM­
 = &
pIndexM­S‘
->
m­
[
whichM­
];

453 ià(
pM­
 !ğ
NULL
) {

454 
u2
 
ÃwIdx
 = 
pM­
->
m­ToNew
[*
±r
];

455 
	`as£¹
(
ÃwIdx
 !ğ
kNoIndexM­pšg
);

456 *
±r
 = 
ÃwIdx
;

458 
	}
}

459 
	$upd©eCÏss
(
u2
* 
±r
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
)

461 
	`upd©eV®ue
(
±r
, 
pIndexM­S‘
, 
kM­CÏs£s
);

462 
	}
}

463 
	$upd©eM‘hod
(
u2
* 
±r
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
)

465 
	`upd©eV®ue
(
±r
, 
pIndexM­S‘
, 
kM­M‘hods
);

466 
	}
}

467 
	$upd©eF›ld
(
u2
* 
±r
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
)

469 
	`upd©eV®ue
(
±r
, 
pIndexM­S‘
, 
kM­F›lds
);

470 
	}
}

471 
	$upd©eSŒšg
(
u2
* 
±r
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
)

473 
	`upd©eV®ue
(
±r
, 
pIndexM­S‘
, 
kM­SŒšgs
);

474 
	}
}

475 
	$upd©eJumboSŒšg
(
u2
* 
±r
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
)

477 
u4
 
¡ršgIdx
;

478 
u4
 
ÃwIdx
;

481 
	`memıy
(&
¡ršgIdx
, 
±r
, (stringIdx));

484 
ÃwIdx
 = 
pIndexM­S‘
->
m­
[
kM­SŒšgs
].
m­ToNew
[*
±r
];

485 
	`as£¹
(
ÃwIdx
 !ğ
kNoIndexM­pšg
);

488 
	`memıy
(
±r
, &
ÃwIdx
, (newIdx));

489 
	}
}

500 
	$m¬kU£dCÚ¡ªtsFromIn¢s
(
u2
* 
š¢s
, 
u4
 
š¢sSize
,

501 
SÿnResuÉs
* 
pResuÉs
, cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
)

505 
š¢sSize
 > 0) {

506 
width
;

507 
u2
* 
pCÚ¡
 = 
š¢s
 + 1;

509 *
š¢s
 & 0xff) {

510 
OP_IGET
:

511 
OP_IGET_WIDE
:

512 
OP_IGET_OBJECT
:

513 
OP_IGET_BOOLEAN
:

514 
OP_IGET_BYTE
:

515 
OP_IGET_CHAR
:

516 
OP_IGET_SHORT
:

517 
OP_IPUT
:

518 
OP_IPUT_WIDE
:

519 
OP_IPUT_OBJECT
:

520 
OP_IPUT_BOOLEAN
:

521 
OP_IPUT_BYTE
:

522 
OP_IPUT_CHAR
:

523 
OP_IPUT_SHORT
:

524 
OP_SGET
:

525 
OP_SGET_WIDE
:

526 
OP_SGET_OBJECT
:

527 
OP_SGET_BOOLEAN
:

528 
OP_SGET_BYTE
:

529 
OP_SGET_CHAR
:

530 
OP_SGET_SHORT
:

531 
OP_SPUT
:

532 
OP_SPUT_WIDE
:

533 
OP_SPUT_OBJECT
:

534 
OP_SPUT_BOOLEAN
:

535 
OP_SPUT_BYTE
:

536 
OP_SPUT_CHAR
:

537 
OP_SPUT_SHORT
:

540 ià(
pResuÉs
 !ğ
NULL
)

541 
	`m¬kF›ld
(
pCÚ¡
, 
pResuÉs
);

543 
	`upd©eF›ld
(
pCÚ¡
, 
pIndexM­S‘
);

546 
OP_CONST_STRING
:

548 ià(
pResuÉs
 !ğ
NULL
)

549 
	`m¬kSŒšg
(
pCÚ¡
, 
pResuÉs
);

551 
	`upd©eSŒšg
(
pCÚ¡
, 
pIndexM­S‘
);

554 
OP_CONST_STRING_JUMBO
:

556 ià(
pResuÉs
 !ğ
NULL
)

557 
	`m¬kJumboSŒšg
(
pCÚ¡
, 
pResuÉs
);

559 
	`upd©eJumboSŒšg
(
pCÚ¡
, 
pIndexM­S‘
);

562 
OP_CONST_CLASS
:

563 
OP_CHECK_CAST
:

564 
OP_NEW_INSTANCE
:

565 
OP_FILLED_NEW_ARRAY_RANGE
:

566 
OP_INSTANCE_OF
:

567 
OP_NEW_ARRAY
:

568 
OP_FILLED_NEW_ARRAY
:

576 ià(
pResuÉs
 !ğ
NULL
)

577 
	`m¬kCÏss
(
pCÚ¡
, 
pResuÉs
);

579 
	`upd©eCÏss
(
pCÚ¡
, 
pIndexM­S‘
);

582 
OP_INVOKE_VIRTUAL
:

583 
OP_INVOKE_SUPER
:

584 
OP_INVOKE_DIRECT
:

585 
OP_INVOKE_STATIC
:

586 
OP_INVOKE_INTERFACE
:

587 
OP_INVOKE_VIRTUAL_RANGE
:

588 
OP_INVOKE_SUPER_RANGE
:

589 
OP_INVOKE_DIRECT_RANGE
:

590 
OP_INVOKE_STATIC_RANGE
:

591 
OP_INVOKE_INTERFACE_RANGE
:

594 ià(
pResuÉs
 !ğ
NULL
)

595 
	`m¬kM‘hod
(
pCÚ¡
, 
pResuÉs
);

597 
	`upd©eM‘hod
(
pCÚ¡
, 
pIndexM­S‘
);

605 
width
 = 
	`dexG‘In¡rOrTabËWidthAbs
(
gDvm
.
š¡rWidth
, 
š¢s
);

606 
	`as£¹
(
width
 > 0 && width <ğ()
š¢sSize
);

608 
š¢s
 +ğ
width
;

609 
š¢sSize
 -ğ
width
;

611 
	}
}

619 
	$m¬kU£dCÚ¡ªts
(
DexFe
* 
pDexFe
, cÚ¡ * 
şassDesütÜ
,

620 
DexM‘hod
* 
pDexM‘hod
, * 
¬g
)

622 
SÿnResuÉs
* 
pResuÉs
 = (SÿnResuÉs*è
¬g
;

623 cÚ¡ 
DexCode
* 
pDexCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

625 ià(
çl£
) {

626 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

627 cÚ¡ * 
m‘hodName
;

628 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

629 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

630 
	`´štf
(" %s.%s\n", 
şassDesütÜ
, 
m‘hodName
);

633 ià(
pDexCode
 !ğ
NULL
) {

634 
u2
* 
š¢s
 = (u2*è
pDexCode
->insns;

635 
u4
 
š¢sSize
 = 
pDexCode
->insnsSize;

636 
	`m¬kU£dCÚ¡ªtsFromIn¢s
(
š¢s
, 
š¢sSize
, 
pResuÉs
, 
NULL
);

640 
	}
}

647 
	$upd©eU£dCÚ¡ªts
(
DexFe
* 
pDexFe
, cÚ¡ * 
şassDesütÜ
,

648 
DexM‘hod
* 
pDexM‘hod
, * 
¬g
)

650 cÚ¡ 
IndexM­S‘
* 
pIndexM­S‘
 = (cÚ¡ IndexM­S‘*è
¬g
;

651 cÚ¡ 
DexCode
* 
pDexCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

653 ià(
çl£
) {

654 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

655 cÚ¡ * 
m‘hodName
;

656 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

657 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

658 
	`´štf
(" %s.%s\n", 
şassDesütÜ
, 
m‘hodName
);

661 ià(
pDexCode
 !ğ
NULL
) {

662 
u2
* 
š¢s
 = (u2*è
pDexCode
->insns;

663 
u4
 
š¢sSize
 = 
pDexCode
->insnsSize;

664 
	`m¬kU£dCÚ¡ªtsFromIn¢s
(
š¢s
, 
š¢sSize
, 
NULL
, 
pIndexM­S‘
);

668 
	}
}

673 
	$showB™CouÁ
(cÚ¡ * 
Ïb–
, 
£tCouÁ
, 
maxCouÁ
)

675 
	`´štf
("%s: %d oà%d (%.1f%% unu£d)\n", 
Ïb–
, 
£tCouÁ
, 
maxCouÁ
,

676 ((
maxCouÁ
 - 
£tCouÁ
) * 100.0f) / maxCount);

677 
	}
}

682 
	$summ¬izeResuÉs
(
DvmDex
* 
pDvmDex
, 
SÿnResuÉs
* 
pResuÉs
)

684 
DexFe
* 
pDexFe
 = 
pDvmDex
->pDexFile;

685 
i
;

688 
i
 = 0; i < (è
pDvmDex
->
pDexFe
->
pH—d”
->
ty³IdsSize
; i++) {

689 cÚ¡ 
DexTy³Id
* 
pDexTy³Id
;

690 cÚ¡ * 
şassDesü
;

692 
pDexTy³Id
 = 
	`dexG‘Ty³Id
(
pDexFe
, 
i
);

693 
şassDesü
 = 
	`dexSŒšgById
(
pDexFe
, 
pDexTy³Id
->
desütÜIdx
);

695 ià(
	`dvmIsB™S‘
(
pResuÉs
->
u£dSŒšgs
, 
i
))

696 
	`´štf
("u£d : %04x '%s'\n", 
i
, 
şassDesü
);

698 
	`´štf
("unu£d: %04x '%s'\n", 
i
, 
şassDesü
);

702 
i
 = 0; i < (è
pDvmDex
->
pDexFe
->
pH—d”
->
m‘hodIdsSize
; i++) {

703 cÚ¡ 
DexM‘hodId
* 
pDexM‘hodId
;

704 cÚ¡ 
DexTy³Id
* 
pDexTy³Id
;

705 cÚ¡ * 
şassDesü
;

706 cÚ¡ * 
m‘hodName
;

708 
pDexM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
i
);

709 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pDexM‘hodId
->
ÇmeIdx
);

711 
pDexTy³Id
 = 
	`dexG‘Ty³Id
(
pDexFe
, 
pDexM‘hodId
->
şassIdx
);

712 
şassDesü
 = 
	`dexSŒšgById
(
pDexFe
, 
pDexTy³Id
->
desütÜIdx
);

713 ià(
	`dvmIsB™S‘
(
pResuÉs
->
u£dM‘hods
, 
i
))

714 
	`´štf
("u£d : %s.%s\n", 
şassDesü
, 
m‘hodName
);

716 
	`´štf
("unu£d: %s.%s\n", 
şassDesü
, 
m‘hodName
);

720 
i
 = 0; i < (è
pDvmDex
->
pDexFe
->
pH—d”
->
f›ldIdsSize
; i++) {

721 cÚ¡ 
DexF›ldId
* 
pDexF›ldId
;

722 cÚ¡ 
DexTy³Id
* 
pDexTy³Id
;

723 cÚ¡ * 
şassDesü
;

724 cÚ¡ * 
f›ldName
;

726 
pDexF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
i
);

727 
f›ldName
 = 
	`dexSŒšgById
(
pDexFe
, 
pDexF›ldId
->
ÇmeIdx
);

729 
pDexTy³Id
 = 
	`dexG‘Ty³Id
(
pDexFe
, 
pDexF›ldId
->
şassIdx
);

730 
şassDesü
 = 
	`dexSŒšgById
(
pDexFe
, 
pDexTy³Id
->
desütÜIdx
);

731 ià(
	`dvmIsB™S‘
(
pResuÉs
->
u£dF›lds
, 
i
))

732 
	`´štf
("u£d : %s.%s\n", 
şassDesü
, 
f›ldName
);

734 
	`´štf
("unu£d: %s.%s\n", 
şassDesü
, 
f›ldName
);

738 
i
 = 0; i < (è
pDvmDex
->
pDexFe
->
pH—d”
->
¡ršgIdsSize
; i++) {

739 cÚ¡ * 
¡r
;

741 
¡r
 = 
	`dexSŒšgById
(
pDexFe
, 
i
);

743 ià(
	`dvmIsB™S‘
(
pResuÉs
->
u£dSŒšgs
, 
i
))

744 
	`´štf
("u£d : %04x '%s'\n", 
i
, 
¡r
);

746 
	`´štf
("unu£d: %04x '%s'\n", 
i
, 
¡r
);

750 
tÙ®Max
, 
tÙ®S‘
;

751 
£tCouÁ
;

753 
tÙ®Max
 = 
tÙ®S‘
 = 0;

755 
£tCouÁ
 = 
	`dvmCouÁS‘B™s
(
pResuÉs
->
u£dCÏs£s
);

756 
	`showB™CouÁ
("şas£s", 
£tCouÁ
, 
pDexFe
->
pH—d”
->
ty³IdsSize
);

757 
tÙ®S‘
 +ğ
£tCouÁ
;

758 
tÙ®Max
 +ğ
pDexFe
->
pH—d”
->
ty³IdsSize
;

760 
£tCouÁ
 = 
	`dvmCouÁS‘B™s
(
pResuÉs
->
u£dM‘hods
);

761 
	`showB™CouÁ
("m‘hods", 
£tCouÁ
, 
pDexFe
->
pH—d”
->
m‘hodIdsSize
);

762 
tÙ®S‘
 +ğ
£tCouÁ
;

763 
tÙ®Max
 +ğ
pDexFe
->
pH—d”
->
m‘hodIdsSize
;

765 
£tCouÁ
 = 
	`dvmCouÁS‘B™s
(
pResuÉs
->
u£dF›lds
);

766 
	`showB™CouÁ
("f›lds", 
£tCouÁ
, 
pDexFe
->
pH—d”
->
f›ldIdsSize
);

767 
tÙ®S‘
 +ğ
£tCouÁ
;

768 
tÙ®Max
 +ğ
pDexFe
->
pH—d”
->
f›ldIdsSize
;

770 
£tCouÁ
 = 
	`dvmCouÁS‘B™s
(
pResuÉs
->
u£dSŒšgs
);

771 
	`showB™CouÁ
("¡ršgs", 
£tCouÁ
, 
pDexFe
->
pH—d”
->
¡ršgIdsSize
);

772 
tÙ®S‘
 +ğ
£tCouÁ
;

773 
tÙ®Max
 +ğ
pDexFe
->
pH—d”
->
¡ršgIdsSize
;

775 
	`´štf
("TOTAL %d oà%d (%.1f%% unu£d -- %.1fK)\n", 
tÙ®S‘
, 
tÙ®Max
,

776 ((
tÙ®Max
 - 
tÙ®S‘
) * 100.0f) /otalMax,

777 (
tÙ®Max
 - 
tÙ®S‘
) / 256.0f);

778 
	}
}

787 
boŞ
 
	$cÚ¡ruùIndexM­
(
tÙ®CouÁ
, cÚ¡ 
B™VeùÜ
* 
pB™s
,

788 
IndexM­
* 
pM­
)

790 cÚ¡ 
kMaxIndex
 = 65534;

791 
£tCouÁ
;

793 
£tCouÁ
 = 
	`dvmCouÁS‘B™s
(
pB™s
);

794 ià(
£tCouÁ
 < 0 || s‘CouÁ > 
kMaxIndex
)

795  
Œue
;

797 
u2
* 
m­ToOld
 = (u2*è
	`m®loc
(
£tCouÁ
 * (u2));

798 
u2
* 
m­ToNew
 = (u2*è
	`m®loc
(
tÙ®CouÁ
 * (u2));

799 ià(
m­ToOld
 =ğ
NULL
 || 
m­ToNew
 == NULL) {

800 
	`ä“
(
m­ToOld
);

801 
	`ä“
(
m­ToNew
);

802  
çl£
;

806 
’Œy
, 
idx
 = 0;

807 
’Œy
 = 0;ƒÁry < 
tÙ®CouÁ
;ƒntry++) {

808 ià(
	`dvmIsB™S‘
(
pB™s
, 
’Œy
)) {

809 
m­ToNew
[
’Œy
] = 
idx
;

810 
m­ToOld
[
idx
] = 
’Œy
;

811 
idx
++;

813 
m­ToNew
[
’Œy
] = 
kNoIndexM­pšg
;

817 ià(
idx
 !ğ
£tCouÁ
) {

818 
	`LOGE
("GLITCH: idx=%d s‘CouÁ=%d\n", 
idx
, 
£tCouÁ
);

819 
	`dvmAbÜt
();

823 
pM­
->
m­ToOld
 = mapToOld;

824 
pM­
->
m­ToNew
 = mapToNew;

825 
pM­
->
ÜigCouÁ
 = 
tÙ®CouÁ
;

826 
pM­
->
ÃwCouÁ
 = 
£tCouÁ
;

828  
Œue
;

829 
	}
}

835 
boŞ
 
	$cÚ¡ruùReducšgD©aChunk
(
IndexM­S‘
* 
pIndexM­S‘
)

837 
chunkL’
 = 0;

838 
i
;

840 
pIndexM­S‘
->
chunkTy³
 = 
kDexChunkReducšgIndexM­
;

845 
i
 = 0; i < 
kNumIndexM­s
; i++) {

847 
chunkL’
 +ğ(
u4
);

850 
chunkL’
 +ğ(
u4
);

853 
chunkL’
 +ğ
pIndexM­S‘
->
m­
[
i
].
ÜigCouÁ
 * (
u2
);

854 
chunkL’
 = (chunkLen + 3) & ~3;

857 
pIndexM­S‘
->
chunkD©aL’
 = 
chunkL’
;

858 
pIndexM­S‘
->
chunkD©a
 = (
u1
*è
	`ÿÎoc
(1, 
chunkL’
);

859 ià(
pIndexM­S‘
->
chunkD©a
 =ğ
NULL
)

860  
çl£
;

865 
u1
* 
±r
 = 
pIndexM­S‘
->
chunkD©a
;

866 
i
 = 0; i < 
kNumIndexM­s
; i++) {

867 
u4
* 
wÜdPŒ
 = (u4*è
±r
;

868 
d©aL’
 = 
pIndexM­S‘
->
m­
[
i
].
ÜigCouÁ
 * (
u2
);

870 *
wÜdPŒ
++ = 
pIndexM­S‘
->
m­
[
i
].
ÜigCouÁ
;

871 *
wÜdPŒ
++ = 
pIndexM­S‘
->
m­
[
i
].
ÃwCouÁ
;

872 ià(
d©aL’
 != 0)

873 
	`memıy
(
wÜdPŒ
, 
pIndexM­S‘
->
m­
[
i
].
m­ToNew
, 
d©aL’
);

876 
±r
 = ((
u1
*è
wÜdPŒ
è+ 
d©aL’
;

877 
±r
 = (
u1
*) ((()…tr + 3) & ~3);

880 ià(
±r
 - (
u1
*è
pIndexM­S‘
->
chunkD©a
 !ğ
chunkL’
) {

881 
	`LOGE
("GLITCH:ƒxpected†en=%d,‡ctual=%d\n",

882 
chunkL’
, 
±r
 - (
u1
*è
pIndexM­S‘
->
chunkD©a
);

883 
	`dvmAbÜt
();

886  
Œue
;

887 
	}
}

893 
boŞ
 
	$cÚ¡ruùEx·ndšgD©aChunk
(
IndexM­S‘
* 
pIndexM­S‘
)

895 
chunkL’
 = 0;

896 
i
;

898 
pIndexM­S‘
->
chunkTy³
 = 
kDexChunkEx·ndšgIndexM­
;

903 
i
 = 0; i < 
kNumIndexM­s
; i++) {

905 
chunkL’
 +ğ(
u4
);

908 
chunkL’
 +ğ
pIndexM­S‘
->
m­
[
i
].
ÃwCouÁ
 * (
u2
);

909 
chunkL’
 = (chunkLen + 3) & ~3;

912 
pIndexM­S‘
->
chunkD©aL’
 = 
chunkL’
;

913 
pIndexM­S‘
->
chunkD©a
 = (
u1
*è
	`ÿÎoc
(1, 
chunkL’
);

914 ià(
pIndexM­S‘
->
chunkD©a
 =ğ
NULL
)

915  
çl£
;

920 
u1
* 
±r
 = 
pIndexM­S‘
->
chunkD©a
;

921 
i
 = 0; i < 
kNumIndexM­s
; i++) {

922 
u4
* 
wÜdPŒ
 = (u4*è
±r
;

923 
d©aL’
 = 
pIndexM­S‘
->
m­
[
i
].
ÃwCouÁ
 * (
u2
);

925 *
wÜdPŒ
++ = 
pIndexM­S‘
->
m­
[
i
].
ÃwCouÁ
;

926 ià(
d©aL’
 != 0)

927 
	`memıy
(
wÜdPŒ
, 
pIndexM­S‘
->
m­
[
i
].
m­ToOld
, 
d©aL’
);

930 
±r
 = ((
u1
*è
wÜdPŒ
è+ 
d©aL’
;

931 
±r
 = (
u1
*) ((()…tr + 3) & ~3);

934 ià(
±r
 - (
u1
*è
pIndexM­S‘
->
chunkD©a
 !ğ
chunkL’
) {

935 
	`LOGE
("GLITCH:ƒxpected†en=%d,‡ctual=%d\n",

936 
chunkL’
, 
±r
 - (
u1
*è
pIndexM­S‘
->
chunkD©a
);

937 
	`dvmAbÜt
();

940  
Œue
;

941 
	}
}

947 
boŞ
 
	$cÚ¡ruùD©aChunk
(
IndexM­S‘
* 
pIndexM­S‘
)

949 
	`as£¹
((
pIndexM­S‘
->
m­
[0].
m­ToOld
[0]è=ğ(
u2
));

950 
	`as£¹
((
pIndexM­S‘
->
m­
[0].
m­ToNew
[0]è=ğ(
u2
));

952 #ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_EXPANDING


953  
	`cÚ¡ruùEx·ndšgD©aChunk
(
pIndexM­S‘
);

955  
	`cÚ¡ruùReducšgD©aChunk
(
pIndexM­S‘
);

957 
	}
}

962 
IndexM­S‘
* 
	$ü—‹IndexM­S‘
(cÚ¡ 
DexFe
* 
pDexFe
,

963 
SÿnResuÉs
* 
pResuÉs
)

965 
IndexM­S‘
* 
pIndexM­S‘
;

966 
£tCouÁ
;

967 
boŞ
 
okay
 = 
Œue
;

969 
pIndexM­S‘
 = 
	`ÿÎoc
(1, (*pIndexMapSet));

970 ià(
pIndexM­S‘
 =ğ
NULL
)

971  
NULL
;

973 
okay
 = okay && 
	`cÚ¡ruùIndexM­
(
pDexFe
->
pH—d”
->
ty³IdsSize
,

974 
pResuÉs
->
u£dCÏs£s
, &
pIndexM­S‘
->
m­
[
kM­CÏs£s
]);

975 
okay
 = okay && 
	`cÚ¡ruùIndexM­
(
pDexFe
->
pH—d”
->
m‘hodIdsSize
,

976 
pResuÉs
->
u£dM‘hods
, &
pIndexM­S‘
->
m­
[
kM­M‘hods
]);

977 
okay
 = okay && 
	`cÚ¡ruùIndexM­
(
pDexFe
->
pH—d”
->
f›ldIdsSize
,

978 
pResuÉs
->
u£dF›lds
, &
pIndexM­S‘
->
m­
[
kM­F›lds
]);

979 
okay
 = okay && 
	`cÚ¡ruùIndexM­
(
pDexFe
->
pH—d”
->
¡ršgIdsSize
,

980 
pResuÉs
->
u£dSŒšgs
, &
pIndexM­S‘
->
m­
[
kM­SŒšgs
]);

982 
	`LOGVV
("Constr: %d %d %d %d\n",

983 
pIndexM­S‘
->
m­
[
kM­CÏs£s
].
m­ToOld
[0],

984 
pIndexM­S‘
->
m­
[
kM­M‘hods
].
m­ToOld
[0],

985 
pIndexM­S‘
->
m­
[
kM­F›lds
].
m­ToOld
[0],

986 
pIndexM­S‘
->
m­
[
kM­SŒšgs
].
m­ToOld
[0]);

988 
okay
 = okay && 
	`cÚ¡ruùD©aChunk
(
pIndexM­S‘
);

990 ià(!
okay
) {

991 
	`dvmF»eIndexM­S‘
(
pIndexM­S‘
);

992  
NULL
;

995  
pIndexM­S‘
;

996 
	}
}

1003 
	$dvmF»eIndexM­S‘
(
IndexM­S‘
* 
pIndexM­S‘
)

1005 
i
;

1007 ià(
pIndexM­S‘
 =ğ
NULL
)

1010 
i
 = 0; i < 
kNumIndexM­s
; i++) {

1011 
	`ä“
(
pIndexM­S‘
->
m­
[
i
].
m­ToOld
);

1012 
	`ä“
(
pIndexM­S‘
->
m­
[
i
].
m­ToNew
);

1014 
	`ä“
(
pIndexM­S‘
->
chunkD©a
);

1015 
	`ä“
(
pIndexM­S‘
);

1016 
	}
}

1021 
IndexM­S‘
* 
	$dvmRewr™eCÚ¡ªts
(
DvmDex
* 
pDvmDex
)

1023 #ià(
DVM_RESOLVER_CACHE
 !ğ
DVM_RC_REDUCING
) && \

1024 (
DVM_RESOLVER_CACHE
 !ğ
DVM_RC_EXPANDING
)

1026  
NULL
;

1035 
SÿnResuÉs
* 
pResuÉs
 = 
	`®locSÿnResuÉs
(
pDvmDex
->
pDexFe
);

1036 
	`fÜAÎM‘hods
(
pDvmDex
->
pDexFe
, 
m¬kU£dCÚ¡ªts
, 
pResuÉs
);

1038 
	`summ¬izeResuÉs
(
pDvmDex
, 
pResuÉs
);

1043 
IndexM­S‘
* 
pIndexM­S‘
 = 
	`ü—‹IndexM­S‘
(
pDvmDex
->
pDexFe
, 
pResuÉs
);

1044 #ià
DVM_RESOLVER_CACHE
 =ğ
DVM_RC_EXPANDING


1045 ià(
pIndexM­S‘
 !ğ
NULL
) {

1049 
	`fÜAÎM‘hods
(
pDvmDex
->
pDexFe
, 
upd©eU£dCÚ¡ªts
, 
pIndexM­S‘
);

1053 
	`ä“SÿnResuÉs
(
pResuÉs
);

1055  
pIndexM­S‘
;

1056 
	}
}

	@analysis/ReduceConstants.h

20 #iâdeà
_DALVIK_REDUCECONSTANTS


21 
	#_DALVIK_REDUCECONSTANTS


	)

23 
	#DVM_RC_DISABLED
 0

	)

24 
	#DVM_RC_REDUCING
 1

	)

25 
	#DVM_RC_EXPANDING
 2

	)

26 
	#DVM_RC_NO_CACHE
 3

	)

29 
	mkM­CÏs£s
 = 0,

30 
	mkM­M‘hods
 = 1,

31 
	mkM­F›lds
 = 2,

32 
	mkM­SŒšgs
 = 3,

34 
	mkNumIndexM­s


37 
	gDvmDex
;

39 
	#kNoIndexM­pšg
 ((
u2
è-1)

	)

44 
	sIndexM­
 {

45 
	mÜigCouÁ
;

46 
	mÃwCouÁ
;

47 
u2
* 
	mm­ToNew
;

48 
u2
* 
	mm­ToOld
;

49 } 
	tIndexM­
;

50 
	sIndexM­S‘
 {

52 
IndexM­
 
	mm­
[
kNumIndexM­s
];

55 
u4
 
	mchunkTy³
;

56 
	mchunkD©aL’
;

57 
u1
* 
	mchunkD©a
;

58 } 
	tIndexM­S‘
;

66 
IndexM­S‘
* 
dvmRewr™eCÚ¡ªts
(
DvmDex
* 
pDvmDex
);

69 
dvmF»eIndexM­S‘
(
IndexM­S‘
* 
šdexM­S‘
);

	@analysis/RegisterMap.c

23 
	~"D®vik.h
"

24 
	~"ª®ysis/CodeV”ify.h
"

25 
	~"ª®ysis/Regi¡”M­.h
"

26 
	~"libdex/DexC©ch.h
"

27 
	~"libdex/In¡rUts.h
"

28 
	~"libdex/Leb128.h
"

30 
	~<¡ddef.h
>

33 
	#REGISTER_MAP_VERIFY
 
çl£


	)

36 
	#REGISTER_MAP_VERBOSE
 
çl£


	)

40 
ouutTy³VeùÜ
(cÚ¡ 
RegTy³
* 
»gs
, 
š¢RegCouÁ
, 
u1
* 
d©a
);

41 
boŞ
 
v”ifyM­
(
V”if›rD©a
* 
vd©a
, cÚ¡ 
Regi¡”M­
* 
pM­
);

42 
com·»M­s
(cÚ¡ 
Regi¡”M­
* 
pM­1
, cÚ¡ Regi¡”M­* 
pM­2
);

44 
compu‹M­Sts
(
Regi¡”M­
* 
pM­
, cÚ¡ 
M‘hod
* 
m‘hod
);

45 
Regi¡”M­
* 
com´essM­Difã»ÁŸl
(cÚ¡ Regi¡”M­* 
pM­
,\

46 cÚ¡ 
M‘hod
* 
m‘h
);

47 
Regi¡”M­
* 
uncom´essM­Difã»ÁŸl
(cÚ¡ Regi¡”M­* 
pM­
);

51 #ifdeà
REGISTER_MAP_STATS


55 
	#kMaxGcPoštG­
 50

	)

56 
	#kUpd©ePo¢MšRegs
 24

	)

57 
	#kNumUpd©ePo¢s
 8

	)

58 
	#kMaxDiffB™s
 20

	)

59 
	sM­Sts
 {

65 
	mgcPoštG­
[
kMaxGcPoštG­
];

71 
	mgcG­CouÁ
;

76 
	mtÙ®GcPoštCouÁ
;

83 
	mupd©ePo¢
[
kNumUpd©ePo¢s
];

89 
	mupd©eLT16
;

90 
	mupd©eGE16
;

95 
	mnumDiffB™s
[
kMaxDiffB™s
];

102 
	mnumEx·ndedM­s
;

103 
	mtÙ®Ex·ndedM­Size
;

104 } 
	tM­Sts
;

110 
boŞ
 
	$dvmRegi¡”M­S¹up
()

112 #ifdeà
REGISTER_MAP_STATS


113 
M­Sts
* 
pSts
 = 
	`ÿÎoc
(1, (MapStats));

114 
gDvm
.
»gi¡”M­Sts
 = 
pSts
;

116  
Œue
;

117 
	}
}

122 
	$dvmRegi¡”M­Shutdown
()

124 #ifdeà
REGISTER_MAP_STATS


125 
	`ä“
(
gDvm
.
»gi¡”M­Sts
);

127 
	}
}

132 
	$dvmRegi¡”M­DumpSts
()

134 #ifdeà
REGISTER_MAP_STATS


135 
M­Sts
* 
pSts
 = (M­Sts*è
gDvm
.
»gi¡”M­Sts
;

136 
i
, 
’d
;

138 
’d
 = 
kMaxGcPoštG­
-1;ƒnd >= 0;ƒnd--) {

139 ià(
pSts
->
gcPoštG­
[
’d
] != 0)

143 
	`LOGI
("Register Map gcPointGap stats (diff count=%d,otal=%d):\n",

144 
pSts
->
gcG­CouÁ
,…Sts->
tÙ®GcPoštCouÁ
);

145 
	`as£¹
(
pSts
->
gcPoštG­
[0] == 0);

146 
i
 = 1; i <ğ
’d
; i++) {

147 
	`LOGI
(" %2d %d\n", 
i
, 
pSts
->
gcPoštG­
[i]);

151 
’d
 = 
kMaxDiffB™s
-1;ƒnd >= 0;ƒnd--) {

152 ià(
pSts
->
numDiffB™s
[
’d
] != 0)

156 
	`LOGI
("Register Map bit difference stats:\n");

157 
i
 = 0; i <ğ
’d
; i++) {

158 
	`LOGI
(" %2d %d\n", 
i
, 
pSts
->
numDiffB™s
[i]);

162 
	`LOGI
("Register Map update…osition stats (lt16=%d ge16=%d):\n",

163 
pSts
->
upd©eLT16
,…Sts->
upd©eGE16
);

164 
i
 = 0; i < 
kNumUpd©ePo¢s
; i++) {

165 
	`LOGI
(" %2d %d\n", 
i
, 
pSts
->
upd©ePo¢
[i]);

168 
	}
}

186 
Regi¡”M­
* 
	$dvmG’”©eRegi¡”M­V
(
V”if›rD©a
* 
vd©a
)

188 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

189 
Regi¡”M­
* 
pM­
 = 
NULL
;

190 
Regi¡”M­
* 
pResuÉ
 = 
NULL
;

191 
Regi¡”M­FÜm©
 
fÜm©
;

192 
u1
 
»gWidth
;

193 
u1
* 
m­D©a
;

194 
i
, 
by‹sFÜAddr
, 
gcPoštCouÁ
;

195 
bufSize
;

197 ià(
vd©a
->
m‘hod
->
»gi¡”sSize
 >= 2048) {

198 
	`LOGE
("ERROR:„egister map can't handle %d„egisters\n",

199 
vd©a
->
m‘hod
->
»gi¡”sSize
);

200 
ba
;

202 
»gWidth
 = (
vd©a
->
m‘hod
->
»gi¡”sSize
 + 7) / 8;

211 ià(
vd©a
->
š¢sSize
 < 256) {

212 
fÜm©
 = 
kRegM­FÜm©Com·ù8
;

213 
by‹sFÜAddr
 = 1;

215 
fÜm©
 = 
kRegM­FÜm©Com·ù16
;

216 
by‹sFÜAddr
 = 2;

225 
gcPoštCouÁ
 = 0;

226 
i
 = 0; i < 
vd©a
->
š¢sSize
; i++) {

227 ià(
	`dvmIn¢IsGcPošt
(
vd©a
->
š¢FÏgs
, 
i
))

228 
gcPoštCouÁ
++;

230 ià(
gcPoštCouÁ
 >= 65536) {

232 
	`LOGE
("ERROR:„egister map can't handle %d gc…oints in one method\n",

233 
gcPoštCouÁ
);

234 
ba
;

240 
bufSize
 = 
kH—d”Size
 + 
gcPoštCouÁ
 * (
by‹sFÜAddr
 + 
»gWidth
);

242 
	`LOGV
("+++ grm: %s.%s (adr=%d gpc=%d„wd=%d bsz=%d)\n",

243 
vd©a
->
m‘hod
->
şazz
->
desütÜ
, vd©a->m‘hod->
Çme
,

244 
by‹sFÜAddr
, 
gcPoštCouÁ
, 
»gWidth
, 
bufSize
);

246 
pM­
 = (
Regi¡”M­
*è
	`m®loc
(
bufSize
);

247 
	`dvmRegi¡”M­S‘FÜm©
(
pM­
, 
fÜm©
);

248 
	`dvmRegi¡”M­S‘OnH—p
(
pM­
, 
Œue
);

249 
	`dvmRegi¡”M­S‘RegWidth
(
pM­
, 
»gWidth
);

250 
	`dvmRegi¡”M­S‘NumEÁr›s
(
pM­
, 
gcPoštCouÁ
);

255 
m­D©a
 = 
pM­
->
d©a
;

256 
i
 = 0; i < 
vd©a
->
š¢sSize
; i++) {

257 ià(
	`dvmIn¢IsGcPošt
(
vd©a
->
š¢FÏgs
, 
i
)) {

258 
	`as£¹
(
vd©a
->
addrRegs
[
i
] !ğ
NULL
);

259 ià(
fÜm©
 =ğ
kRegM­FÜm©Com·ù8
) {

260 *
m­D©a
++ = 
i
;

262 *
m­D©a
++ = 
i
 & 0xff;

263 *
m­D©a
++ = 
i
 >> 8;

265 
	`ouutTy³VeùÜ
(
vd©a
->
addrRegs
[
i
], vd©a->
š¢RegCouÁ
, 
m­D©a
);

266 
m­D©a
 +ğ
»gWidth
;

270 
	`LOGV
("m­D©a=%°pM­=%°bufSize=%d\n", 
m­D©a
, 
pM­
, 
bufSize
);

271 
	`as£¹
(
m­D©a
 - (cÚ¡ 
u1
*è
pM­
 =ğ
bufSize
);

273 ià(
REGISTER_MAP_VERIFY
 && !
	`v”ifyM­
(
vd©a
, 
pM­
))

274 
ba
;

275 #ifdeà
REGISTER_MAP_STATS


276 
	`compu‹M­Sts
(
pM­
, 
vd©a
->
m‘hod
);

282 
Regi¡”M­
* 
pCompM­
;

284 
pCompM­
 = 
	`com´essM­Difã»ÁŸl
(
pM­
, 
vd©a
->
m‘hod
);

285 ià(
pCompM­
 !ğ
NULL
) {

286 ià(
REGISTER_MAP_VERIFY
) {

291 
Regi¡”M­
* 
pUncompM­
;

292 
pUncompM­
 = 
	`uncom´essM­Difã»ÁŸl
(
pCompM­
);

293 ià(
pUncompM­
 =ğ
NULL
) {

294 
	`LOGE
("Map failedo uncompress - %s.%s\n",

295 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

296 
vd©a
->
m‘hod
->
Çme
);

297 
	`ä“
(
pCompM­
);

299 
	`dvmAbÜt
();

301 ià(
	`com·»M­s
(
pM­
, 
pUncompM­
) != 0) {

302 
	`LOGE
("Map comparison failed - %s.%s\n",

303 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

304 
vd©a
->
m‘hod
->
Çme
);

305 
	`ä“
(
pCompM­
);

307 
	`dvmAbÜt
();

311 
	`ä“
(
pUncompM­
);

315 ià(
REGISTER_MAP_VERBOSE
) {

316 
	`LOGD
("Good compress on %s.%s\n",

317 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

318 
vd©a
->
m‘hod
->
Çme
);

320 
	`ä“
(
pM­
);

321 
pM­
 = 
pCompM­
;

323 ià(
REGISTER_MAP_VERBOSE
) {

324 
	`LOGD
("Unableo compress %s.%s (ent=%d„w=%d)\n",

325 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

326 
vd©a
->
m‘hod
->
Çme
,

327 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
),

328 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
));

332 
pResuÉ
 = 
pM­
;

334 
ba
:

335  
pResuÉ
;

336 
	}
}

341 
	$dvmF»eRegi¡”M­
(
Regi¡”M­
* 
pM­
)

343 ià(
pM­
 =ğ
NULL
)

346 
	`as£¹
(
	`dvmRegi¡”M­G‘OnH—p
(
pM­
));

347 
	`ä“
(
pM­
);

348 
	}
}

357 
šlše
 
boŞ
 
	$isReã»nûTy³
(
RegTy³
 
ty³
)

359  (
ty³
 > 
kRegTy³MAX
 ||y³ =ğ
kRegTy³Unš™
);

360 
	}
}

370 
	$ouutTy³VeùÜ
(cÚ¡ 
RegTy³
* 
»gs
, 
š¢RegCouÁ
, 
u1
* 
d©a
)

372 
u1
 
v®
 = 0;

373 
i
;

375 
i
 = 0; i < 
š¢RegCouÁ
; i++) {

376 
RegTy³
 
ty³
 = *
»gs
++;

377 
v®
 >>= 1;

378 ià(
	`isReã»nûTy³
(
ty³
))

379 
v®
 |= 0x80;

381 ià((
i
 & 0x07) == 7)

382 *
d©a
++ = 
v®
;

384 ià((
i
 & 0x07) != 0) {

386 
v®
 >>ğ8 - (
i
 & 0x07);

387 *
d©a
++ = 
v®
;

389 
	}
}

396 
	$dumpRegi¡”M­
(cÚ¡ 
Regi¡”M­
* 
pM­
, 
»gi¡”sSize
)

398 cÚ¡ 
u1
* 
¿wM­
 = 
pM­
->
d©a
;

399 cÚ¡ 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

400 cÚ¡ 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

401 cÚ¡ 
»gWidth
 = 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
);

402 
addrWidth
;

404 
fÜm©
) {

405 
kRegM­FÜm©Com·ù8
:

406 
addrWidth
 = 1;

408 
kRegM­FÜm©Com·ù16
:

409 
addrWidth
 = 2;

413 
	`LOGE
("Cª oÆy dum°Com·ù8 / Com·ù16 m­ ÒÙ %d)\n", 
fÜm©
);

417 ià(
»gi¡”sSize
 < 0)

418 
»gi¡”sSize
 = 8 * 
»gWidth
;

419 
	`as£¹
(
»gi¡”sSize
 <ğ
»gWidth
 * 8);

421 
’t
;

422 
’t
 = 0;ƒÁ < 
numEÁr›s
;ƒnt++) {

423 
i
, 
addr
;

425 
addr
 = *
¿wM­
++;

426 ià(
addrWidth
 > 1)

427 
addr
 |ğ(*
¿wM­
++) << 8;

429 cÚ¡ 
u1
* 
d©aS¹
 = 
¿wM­
;

430 
u1
 
v®
 = 0;

433 
outBuf
[
»gi¡”sSize
 +1];

434 
i
 = 0; i < 
»gi¡”sSize
; i++) {

435 
v®
 >>= 1;

436 ià((
i
 & 0x07) == 0)

437 
v®
 = *
¿wM­
++;

439 
outBuf
[
i
] = '0' + (
v®
 & 0x01);

441 
outBuf
[
i
] = '\0';

444 
hexBuf
[
»gWidth
 * 3 +1];

445 * 
ı
 = 
hexBuf
;

446 
¿wM­
 = 
d©aS¹
;

447 
i
 = 0; i < 
»gWidth
; i++) {

448 
	`¥rštf
(
ı
, " %02x", *
¿wM­
++);

449 
ı
 += 3;

451 
hexBuf
[
i
 * 3] = '\0';

453 
	`LOGD
(" %04x % %s\n", 
addr
, 
outBuf
, 
hexBuf
);

455 
	}
}

463 
boŞ
 
	$v”ifyM­
(
V”if›rD©a
* 
vd©a
, cÚ¡ 
Regi¡”M­
* 
pM­
)

465 cÚ¡ 
u1
* 
¿wM­
 = 
pM­
->
d©a
;

466 cÚ¡ 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

467 cÚ¡ 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

468 
’t
;

469 
boŞ
 
dumpM­
 = 
çl£
;

471 ià(
çl£
) {

472 cÚ¡ * 
cd
 = "Landroid/net/http/Request;";

473 cÚ¡ * 
mn
 = "readResponse";

474 cÚ¡ * 
sg
 = "(Landroid/net/http/AndroidHttpClientConnection;)V";

475 ià(
	`¡rcmp
(
vd©a
->
m‘hod
->
şazz
->
desütÜ
, 
cd
) == 0 &&

476 
	`¡rcmp
(
vd©a
->
m‘hod
->
Çme
, 
mn
) == 0)

478 * 
desc
;

479 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
vd©a
->
m‘hod
->
´ÙÙy³
);

480 
	`LOGI
("M­ fÜ %s.% %s\n", 
vd©a
->
m‘hod
->
şazz
->
desütÜ
,

481 
vd©a
->
m‘hod
->
Çme
, 
desc
);

482 
	`ä“
(
desc
);

484 
dumpM­
 = 
Œue
;

488 ià((
vd©a
->
m‘hod
->
»gi¡”sSize
 + 7è/ 8 !ğ
pM­
->
»gWidth
) {

489 
	`LOGE
("GLITCH:„egistersSize=%d,„egWidth=%d\n",

490 
vd©a
->
m‘hod
->
»gi¡”sSize
, 
pM­
->
»gWidth
);

491  
çl£
;

494 
’t
 = 0;ƒÁ < 
numEÁr›s
;ƒnt++) {

495 
addr
;

497 
fÜm©
) {

498 
kRegM­FÜm©Com·ù8
:

499 
addr
 = *
¿wM­
++;

501 
kRegM­FÜm©Com·ù16
:

502 
addr
 = *
¿wM­
++;

503 
addr
 |ğ(*
¿wM­
++) << 8;

507 
	`LOGE
("GLITCH: bad fÜm© (%d)", 
fÜm©
);

508 
	`dvmAbÜt
();

511 cÚ¡ 
u1
* 
d©aS¹
 = 
¿wM­
;

512 cÚ¡ 
RegTy³
* 
»gs
 = 
vd©a
->
addrRegs
[
addr
];

513 ià(
»gs
 =ğ
NULL
) {

514 
	`LOGE
("GLITCH:‡dd¸%d ha nØd©a\n", 
addr
);

515  
çl£
;

518 
u1
 
v®
 = 0;

519 
i
;

521 
i
 = 0; i < 
vd©a
->
m‘hod
->
»gi¡”sSize
; i++) {

522 
boŞ
 
b™IsRef
, 
»gIsRef
;

524 
v®
 >>= 1;

525 ià((
i
 & 0x07) == 0) {

527 
v®
 = *
¿wM­
++;

530 
b™IsRef
 = 
v®
 & 0x01;

532 
RegTy³
 
ty³
 = 
»gs
[
i
];

533 
»gIsRef
 = 
	`isReã»nûTy³
(
ty³
);

535 ià(
b™IsRef
 !ğ
»gIsRef
) {

536 
	`LOGE
("GLITCH:‡ddr %d„eg %d: bit=%d„eg=%d(%d)\n",

537 
addr
, 
i
, 
b™IsRef
, 
»gIsRef
, 
ty³
);

538  
çl£
;

545 ià(
dumpM­
)

546 
	`dumpRegi¡”M­
(
pM­
, 
vd©a
->
m‘hod
->
»gi¡”sSize
);

548  
Œue
;

549 
	}
}

561 
šlše
 
u1
* 
	$®ign32
(
u1
* 
±r
)

563  (
u1
*è(((è
±r
 + 3) & ~0x03);

564 
	}
}

569 
size_t
 
	$compu‹Regi¡”M­Size
(cÚ¡ 
Regi¡”M­
* 
pM­
)

571 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

572 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

573 
u2
 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

575 
	`as£¹
(
pM­
 !ğ
NULL
);

577 
fÜm©
) {

578 
kRegM­FÜm©NÚe
:

580 
kRegM­FÜm©Com·ù8
:

581  
kH—d”Size
 + (1 + 
pM­
->
»gWidth
è* 
numEÁr›s
;

582 
kRegM­FÜm©Com·ù16
:

583  
kH—d”Size
 + (2 + 
pM­
->
»gWidth
è* 
numEÁr›s
;

584 
kRegM­FÜm©Difã»ÁŸl
:

587 cÚ¡ 
u1
* 
±r
 = 
pM­
->
d©a
;

588 
Ën
 = 
	`»adUnsigÃdLeb128
(&
±r
);

589  
Ën
 + (
±r
 - (
u1
*è
pM­
);

592 
	`LOGE
("Bad„egi¡” m­ fÜm© %d\n", 
fÜm©
);

593 
	`dvmAbÜt
();

596 
	}
}

607 
boŞ
 
	$wr™eM­FÜM‘hod
(cÚ¡ 
M‘hod
* 
m‘h
, 
u1
** 
pPŒ
)

609 ià(
m‘h
->
»gi¡”M­
 =ğ
NULL
) {

610 ià(!
	`dvmIsAb¡¿ùM‘hod
(
m‘h
è&& !
	`dvmIsN©iveM‘hod
(meth)) {

611 
	`LOGW
("Warning:‚o map‡vailable for %s.%s\n",

612 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

615 *(*
pPŒ
)++ = 
kRegM­FÜm©NÚe
;

616  
Œue
;

620 
size_t
 
m­Size
 = 
	`compu‹Regi¡”M­Size
(
m‘h
->
»gi¡”M­
);

621 
	`memıy
(*
pPŒ
, 
m‘h
->
»gi¡”M­
, 
m­Size
);

624 
	`as£¹
(**
pPŒ
 =ğ
m‘h
->
»gi¡”M­
->
fÜm©
);

625 **
pPŒ
 &ğ~(
kRegM­FÜm©OnH—p
);

627 *
pPŒ
 +ğ
m­Size
;

629  
Œue
;

630 
	}
}

637 
boŞ
 
	$wr™eM­sAÎM‘hods
(
DvmDex
* 
pDvmDex
, cÚ¡ 
CÏssObjeù
* 
şazz
,

638 
u1
** 
pPŒ
, 
size_t
 
Ëngth
)

640 
Regi¡”M­M‘hodPoŞ
* 
pM‘hodPoŞ
;

641 
u1
* 
±r
 = *
pPŒ
;

642 
i
, 
m‘hodCouÁ
;

645 ià(
şazz
->
vœtu®M‘hodCouÁ
 + cÏzz->
dœeùM‘hodCouÁ
 >= 65536) {

646 
	`LOGE
("ToØmªy m‘hod š %s\n", 
şazz
->
desütÜ
);

647  
çl£
;

650 
pM‘hodPoŞ
 = (
Regi¡”M­M‘hodPoŞ
*è
±r
;

651 
±r
 +ğ
	`off£tof
(
Regi¡”M­M‘hodPoŞ
, 
m‘hodD©a
);

652 
m‘hodCouÁ
 = 0;

667 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

668 cÚ¡ 
M‘hod
* 
m‘h
 = &
şazz
->
dœeùM‘hods
[
i
];

669 ià(
	`dvmIsMœªdaM‘hod
(
m‘h
))

671 ià(!
	`wr™eM­FÜM‘hod
(&
şazz
->
dœeùM‘hods
[
i
], &
±r
)) {

672  
çl£
;

674 
m‘hodCouÁ
++;

678 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

679 cÚ¡ 
M‘hod
* 
m‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

680 ià(
	`dvmIsMœªdaM‘hod
(
m‘h
))

682 ià(!
	`wr™eM­FÜM‘hod
(&
şazz
->
vœtu®M‘hods
[
i
], &
±r
)) {

683  
çl£
;

685 
m‘hodCouÁ
++;

689 
pM‘hodPoŞ
->
m‘hodCouÁ
 = methodCount;

691 *
pPŒ
 = 
±r
;

692  
Œue
;

693 
	}
}

701 
size_t
 
	$wr™eM­sAÎCÏs£s
(
DvmDex
* 
pDvmDex
, 
u1
* 
ba£PŒ
, 
size_t
 
Ëngth
)

703 
DexFe
* 
pDexFe
 = 
pDvmDex
->pDexFile;

704 
u4
 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

705 
Regi¡”M­CÏssPoŞ
* 
pCÏssPoŞ
;

706 
u4
* 
off£tTabË
;

707 
u1
* 
±r
 = 
ba£PŒ
;

708 
u4
 
idx
;

710 
	`as£¹
(
gDvm
.
İtimizšg
);

712 
pCÏssPoŞ
 = (
Regi¡”M­CÏssPoŞ
*è
±r
;

713 
±r
 +ğ
	`off£tof
(
Regi¡”M­CÏssPoŞ
, 
şassD©aOff£t
);

714 
off£tTabË
 = (
u4
*è
±r
;

715 
±r
 +ğ
couÁ
 * (
u4
);

717 
pCÏssPoŞ
->
numCÏs£s
 = 
couÁ
;

722 
idx
 = 0; idx < 
couÁ
; idx++) {

723 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

724 cÚ¡ * 
şassDesütÜ
;

725 
CÏssObjeù
* 
şazz
;

727 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
idx
);

728 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

739 
şazz
 = 
NULL
;

740 ià((
pCÏssDef
->
acûssFÏgs
 & 
CLASS_ISPREVERIFIED
) != 0)

741 
şazz
 = 
	`dvmLookupCÏss
(
şassDesütÜ
, 
NULL
, 
çl£
);

743 ià(
şazz
 !ğ
NULL
) {

744 
off£tTabË
[
idx
] = 
±r
 - 
ba£PŒ
;

745 
	`LOGVV
("%d -> offset %d (%p-%p)\n",

746 
idx
, 
off£tTabË
[idx], 
±r
, 
ba£PŒ
);

748 ià(!
	`wr™eM­sAÎM‘hods
(
pDvmDex
, 
şazz
, &
±r
,

749 
Ëngth
 - (
±r
 - 
ba£PŒ
)))

754 
±r
 = 
	`®ign32
(ptr);

755 
	`LOGVV
("Siz% (%d+%d m‘hods): %d\n", 
şazz
->
desütÜ
,

756 
şazz
->
dœeùM‘hodCouÁ
, cÏzz->
vœtu®M‘hodCouÁ
,

757 (
±r
 - 
ba£PŒ
è- 
off£tTabË
[
idx
]);

759 
	`LOGV
("%4d NOT m­addšg '%s'\n", 
idx
, 
şassDesütÜ
);

760 
	`as£¹
(
off£tTabË
[
idx
] == 0);

764 ià(
±r
 - 
ba£PŒ
 >ğ()
Ëngth
) {

766 
	`LOGE
("Buffer overrun\n");

767 
	`dvmAbÜt
();

770  
±r
 - 
ba£PŒ
;

771 
	}
}

776 
Regi¡”M­Bud”
* 
	$dvmG’”©eRegi¡”M­s
(
DvmDex
* 
pDvmDex
)

778 
Regi¡”M­Bud”
* 
pBud”
;

780 
pBud”
 = (
Regi¡”M­Bud”
*è
	`ÿÎoc
(1, (RegisterMapBuilder));

781 ià(
pBud”
 =ğ
NULL
)

782  
NULL
;

800 ià(
	`sysC»©ePriv©eM­
(4 * 1024 * 1024, &
pBud”
->
memM­
) != 0) {

801 
	`ä“
(
pBud”
);

802  
NULL
;

808 
size_t
 
aùu®
 = 
	`wr™eM­sAÎCÏs£s
(
pDvmDex
, (
u1
*)
pBud”
->
memM­
.
addr
,

809 
pBud”
->
memM­
.
Ëngth
);

810 ià(
aùu®
 == 0) {

811 
	`dvmF»eRegi¡”M­Bud”
(
pBud”
);

812  
NULL
;

815 
	`LOGV
("TOTAL sizoà»gi¡” m­s: %d\n", 
aùu®
);

817 
pBud”
->
d©a
 =…Bud”->
memM­
.
addr
;

818 
pBud”
->
size
 = 
aùu®
;

819  
pBud”
;

820 
	}
}

825 
	$dvmF»eRegi¡”M­Bud”
(
Regi¡”M­Bud”
* 
pBud”
)

827 ià(
pBud”
 =ğ
NULL
)

830 
	`sysR–—£Shmem
(&
pBud”
->
memM­
);

831 
	`ä“
(
pBud”
);

832 
	}
}

840 cÚ¡ * 
	$dvmRegi¡”M­G‘CÏssD©a
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
şassIdx
,

841 
u4
* 
pNumM­s
)

843 cÚ¡ 
Regi¡”M­CÏssPoŞ
* 
pCÏssPoŞ
;

844 cÚ¡ 
Regi¡”M­M‘hodPoŞ
* 
pM‘hodPoŞ
;

846 
pCÏssPoŞ
 = (cÚ¡ 
Regi¡”M­CÏssPoŞ
*è
pDexFe
->
pRegi¡”M­PoŞ
;

847 ià(
pCÏssPoŞ
 =ğ
NULL
)

848  
NULL
;

850 ià(
şassIdx
 >ğ
pCÏssPoŞ
->
numCÏs£s
) {

851 
	`LOGE
("bad cÏs šdex (%d v %d)\n", 
şassIdx
, 
pCÏssPoŞ
->
numCÏs£s
);

852 
	`dvmAbÜt
();

855 
u4
 
şassOff£t
 = 
pCÏssPoŞ
->
şassD©aOff£t
[
şassIdx
];

856 ià(
şassOff£t
 == 0) {

857 
	`LOGV
("+++‚Øm­ fÜ cÏssIdx=%d\n", 
şassIdx
);

858  
NULL
;

861 
pM‘hodPoŞ
 =

862 (cÚ¡ 
Regi¡”M­M‘hodPoŞ
*è(((
u1
*è
pCÏssPoŞ
è+ 
şassOff£t
);

863 ià(
pNumM­s
 !ğ
NULL
)

864 *
pNumM­s
 = 
pM‘hodPoŞ
->
m‘hodCouÁ
;

865  
pM‘hodPoŞ
->
m‘hodD©a
;

866 
	}
}

871 cÚ¡ 
Regi¡”M­
* 
	$dvmRegi¡”M­G‘Next
(cÚ¡ ** 
pPŒ
)

873 cÚ¡ 
Regi¡”M­
* 
pM­
 = *
pPŒ
;

875 *
pPŒ
 = (((
u1
*è
pM­
è+ 
	`compu‹Regi¡”M­Size
(pMap));

876 
	`LOGVV
("getNext: %p -> %p (f=0x%x w=%dƒ=%d)\n",

877 
pM­
, *
pPŒ
,…M­->
fÜm©
,…M­->
»gWidth
,

878 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
));

879  
pM­
;

880 
	}
}

894 cÚ¡ 
u1
* 
	$dvmRegi¡”M­G‘Lše
(cÚ¡ 
Regi¡”M­
* 
pM­
, 
addr
)

896 
addrWidth
, 
lšeWidth
;

897 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

898 
u2
 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

900 
	`as£¹
(
numEÁr›s
 > 0);

902 
fÜm©
) {

903 
kRegM­FÜm©NÚe
:

904  
NULL
;

905 
kRegM­FÜm©Com·ù8
:

906 
addrWidth
 = 1;

908 
kRegM­FÜm©Com·ù16
:

909 
addrWidth
 = 2;

912 
	`LOGE
("UnknowÀfÜm© %d\n", 
fÜm©
);

913 
	`dvmAbÜt
();

914  
NULL
;

917 
lšeWidth
 = 
addrWidth
 + 
pM­
->
»gWidth
;

923 cÚ¡ 
kS—rchTh»shŞd
 = 8;

924 cÚ¡ 
u1
* 
d©a
 = 
NULL
;

925 
lšeAddr
;

927 ià(
numEÁr›s
 < 
kS—rchTh»shŞd
) {

928 
i
;

929 
d©a
 = 
pM­
->data;

930 
i
 = 
numEÁr›s
; i > 0; i--) {

931 
lšeAddr
 = 
d©a
[0];

932 ià(
addrWidth
 > 1)

933 
lšeAddr
 |ğ
d©a
[1] << 8;

934 ià(
lšeAddr
 =ğ
addr
)

935  
d©a
 + 
addrWidth
;

937 
d©a
 +ğ
lšeWidth
;

940 
hi
, 
lo
, 
mid
;

942 
lo
 = 0;

943 
hi
 = 
numEÁr›s
 -1;

945 
hi
 >ğ
lo
) {

946 
mid
 = (
hi
 + 
lo
) / 2;

947 
d©a
 = 
pM­
->d©¨+ 
lšeWidth
 * 
mid
;

949 
lšeAddr
 = 
d©a
[0];

950 ià(
addrWidth
 > 1)

951 
lšeAddr
 |ğ
d©a
[1] << 8;

953 ià(
addr
 > 
lšeAddr
) {

954 
lo
 = 
mid
 + 1;

955 } ià(
addr
 < 
lšeAddr
) {

956 
hi
 = 
mid
 - 1;

958  
d©a
 + 
addrWidth
;

963 
	`as£¹
(
d©a
 =ğ
pM­
->d©¨+ 
lšeWidth
 * 
numEÁr›s
);

964  
NULL
;

965 
	}
}

972 
	$com·»M­s
(cÚ¡ 
Regi¡”M­
* 
pM­1
, cÚ¡ Regi¡”M­* 
pM­2
)

974 
size_t
 
size1
, 
size2
;

976 
size1
 = 
	`compu‹Regi¡”M­Size
(
pM­1
);

977 
size2
 = 
	`compu‹Regi¡”M­Size
(
pM­2
);

978 ià(
size1
 !ğ
size2
) {

979 
	`LOGI
("com·»M­s: sizmism©ch (%zd v %zd)\n", 
size1
, 
size2
);

983 ià(
	`memcmp
(
pM­1
, 
pM­2
, 
size1
) != 0) {

984 
	`LOGI
("compareMaps: content mismatch\n");

989 
	}
}

1002 cÚ¡ 
Regi¡”M­
* 
	$dvmG‘Ex·ndedRegi¡”M­0
(
M‘hod
* 
m‘hod
)

1004 cÚ¡ 
Regi¡”M­
* 
curM­
 = 
m‘hod
->
»gi¡”M­
;

1005 
Regi¡”M­
* 
ÃwM­
;

1007 ià(
curM­
 =ğ
NULL
)

1008  
NULL
;

1012 ià(
Œue
) {

1013 ià(!
gDvm
.
zygÙe
 && 
	`±h»ad_mu‹x_Œylock
(&gDvm.
gcH—pLock
) == 0) {

1014 
	`LOGE
("GLITCH: dvmGetExpandedRegisterMap‚ot called‡t GCime\n");

1015 
	`dvmAbÜt
();

1019 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
curM­
);

1020 
fÜm©
) {

1021 
kRegM­FÜm©Com·ù8
:

1022 
kRegM­FÜm©Com·ù16
:

1023 ià(
REGISTER_MAP_VERBOSE
) {

1024 ià(
	`dvmRegi¡”M­G‘OnH—p
(
curM­
)) {

1025 
	`LOGD
("RegMap:‡lreadyƒxpanded: %s.%s\n",

1026 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1028 
	`LOGD
("RegMap: stored w/o compression: %s.%s\n",

1029 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1032  
curM­
;

1033 
kRegM­FÜm©Difã»ÁŸl
:

1034 
ÃwM­
 = 
	`uncom´essM­Difã»ÁŸl
(
curM­
);

1037 
	`LOGE
("UnknowÀfÜm© %d iÀdvmG‘Ex·ndedRegi¡”M­\n", 
fÜm©
);

1038 
	`dvmAbÜt
();

1041 ià(
ÃwM­
 =ğ
NULL
) {

1042 
	`LOGE
("Map failedo uncompress (fmt=%d) %s.%s\n",

1043 
fÜm©
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1044  
NULL
;

1047 #ifdeà
REGISTER_MAP_STATS


1052 
M­Sts
* 
pSts
 = (M­Sts*è
gDvm
.
»gi¡”M­Sts
;

1053 
pSts
->
numEx·ndedM­s
++;

1054 
pSts
->
tÙ®Ex·ndedM­Size
 +ğ
	`compu‹Regi¡”M­Size
(
ÃwM­
);

1055 
	`LOGD
("RMAP: count=%d size=%d\n",

1056 
pSts
->
numEx·ndedM­s
,…Sts->
tÙ®Ex·ndedM­Size
);

1060 
	`IF_LOGV
() {

1061 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1062 
	`LOGV
("Expanding map -> %s.%s:%s\n",

1063 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

1064 
	`ä“
(
desc
);

1070 
	`dvmS‘Regi¡”M­
(
m‘hod
, 
ÃwM­
);

1072 ià(
	`dvmRegi¡”M­G‘OnH—p
(
curM­
))

1073 
	`dvmF»eRegi¡”M­
((
Regi¡”M­
*è
curM­
);

1075  
ÃwM­
;

1076 
	}
}

1245 
	$compu‹M­Sts
(
Regi¡”M­
* 
pM­
, cÚ¡ 
M‘hod
* 
m‘hod
)

1247 #ifdeà
REGISTER_MAP_STATS


1248 
M­Sts
* 
pSts
 = (M­Sts*è
gDvm
.
»gi¡”M­Sts
;

1249 cÚ¡ 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

1250 cÚ¡ 
u2
 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

1251 cÚ¡ 
u1
* 
¿wM­
 = 
pM­
->
d©a
;

1252 cÚ¡ 
u1
* 
´evD©a
 = 
NULL
;

1253 
’t
, 
addr
, 
´evAddr
 = -1;

1255 
’t
 = 0;ƒÁ < 
numEÁr›s
;ƒnt++) {

1256 
fÜm©
) {

1257 
kRegM­FÜm©Com·ù8
:

1258 
addr
 = *
¿wM­
++;

1260 
kRegM­FÜm©Com·ù16
:

1261 
addr
 = *
¿wM­
++;

1262 
addr
 |ğ(*
¿wM­
++) << 8;

1266 
	`LOGE
("GLITCH: bad fÜm© (%d)", 
fÜm©
);

1267 
	`dvmAbÜt
();

1270 cÚ¡ 
u1
* 
d©aS¹
 = 
¿wM­
;

1272 
pSts
->
tÙ®GcPoštCouÁ
++;

1278 ià(
´evD©a
 !ğ
NULL
) {

1279 
	`as£¹
(
´evAddr
 >= 0);

1280 
addrDiff
 = 
addr
 - 
´evAddr
;

1282 ià(
addrDiff
 < 0) {

1283 
	`LOGE
("GLITCH:‡ddress went backward (0x%04x->0x%04x, %s.%s)\n",

1284 
´evAddr
, 
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1285 } ià(
addrDiff
 > 
kMaxGcPoštG­
) {

1286 ià(
REGISTER_MAP_VERBOSE
) {

1287 
	`LOGI
("HEY:‡ddrDiff is %d, max %d (0x%04x->0x%04x %s.%s)\n",

1288 
addrDiff
, 
kMaxGcPoštG­
, 
´evAddr
, 
addr
,

1289 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1293 
pSts
->
gcPoštG­
[
addrDiff
]++;

1295 
pSts
->
gcG­CouÁ
++;

1307 
numDiff
 = 0;

1308 
div
 = (è
kNumUpd©ePo¢s
 / 
m‘hod
->
»gi¡”sSize
;

1309 
»gBy‹
;

1310 
»gBy‹
 = 0;„egBy‹ < 
pM­
->
»gWidth
;„egByte++) {

1311 
´ev
, 
cur
, 
b™
;

1313 
´ev
 = 
´evD©a
[
»gBy‹
];

1314 
cur
 = 
d©aS¹
[
»gBy‹
];

1316 
b™
 = 0; bit < 8; bit++) {

1317 ià(((
´ev
 >> 
b™
è& 1è!ğ((
cur
 >> bit) & 1)) {

1318 
numDiff
++;

1320 
b™Num
 = 
»gBy‹
 * 8 + 
b™
;

1322 ià(
b™Num
 < 16)

1323 
pSts
->
upd©eLT16
++;

1325 
pSts
->
upd©eGE16
++;

1327 ià(
m‘hod
->
»gi¡”sSize
 < 16)

1330 ià(
b™Num
 >ğ
m‘hod
->
»gi¡”sSize
) {

1332 
	`LOGE
("WEIRD: bit=%d (%d/%d),…rev=%02x cur=%02x\n",

1333 
b™
, 
»gBy‹
, 
m‘hod
->
»gi¡”sSize
,

1334 
´ev
, 
cur
);

1335 
	`as£¹
(
çl£
);

1337 
idx
 = (è(
b™Num
 * 
div
);

1338 ià(!(
idx
 >ğ0 && idx < 
kNumUpd©ePo¢s
)) {

1339 
	`LOGE
("FAIL: bitNum=%d (of %d) div=%.3f idx=%d\n",

1340 
b™Num
, 
m‘hod
->
»gi¡”sSize
, 
div
, 
idx
);

1341 
	`as£¹
(
çl£
);

1343 
pSts
->
upd©ePo¢
[
idx
]++;

1348 ià(
numDiff
 > 
kMaxDiffB™s
) {

1349 ià(
REGISTER_MAP_VERBOSE
) {

1350 
	`LOGI
("WOW:‚umDifài %d, max %d\n", 
numDiff
, 
kMaxDiffB™s
);

1353 
pSts
->
numDiffB™s
[
numDiff
]++;

1358 
¿wM­
 +ğ
pM­
->
»gWidth
;

1360 
´evAddr
 = 
addr
;

1361 
´evD©a
 = 
d©aS¹
;

1364 
	}
}

1382 
	$compu‹B™Diff
(cÚ¡ 
u1
* 
b™s1
, cÚ¡ u1* 
b™s2
, 
by‹Width
,

1383 * 
pFœ¡B™Chªged
, * 
pNumB™sChªged
, 
u1
* 
ËbOutBuf
)

1385 
numB™sChªged
 = 0;

1386 
fœ¡B™Chªged
 = -1;

1387 
ËbSize
 = 0;

1388 
by‹Num
;

1394 
by‹Num
 = 0; by‹Num < 
by‹Width
; byteNum++) {

1395 
u1
 
by‹1
 = *
b™s1
++;

1396 
u1
 
by‹2
 = *
b™s2
++;

1397 ià(
by‹1
 !ğ
by‹2
) {

1401 
b™Num
;

1402 
b™Num
 = 0; bitNum < 8; bitNum++) {

1403 ià(((
by‹1
 >> 
b™Num
è& 0x01è!ğ((
by‹2
 >> bitNum) & 0x01)) {

1404 
b™Off£t
 = (
by‹Num
 << 3è+ 
b™Num
;

1406 ià(
fœ¡B™Chªged
 < 0)

1407 
fœ¡B™Chªged
 = 
b™Off£t
;

1408 
numB™sChªged
++;

1410 ià(
ËbOutBuf
 =ğ
NULL
) {

1411 
ËbSize
 +ğ
	`unsigÃdLeb128Size
(
b™Off£t
);

1413 
u1
* 
curBuf
 = 
ËbOutBuf
;

1414 
ËbOutBuf
 = 
	`wr™eUnsigÃdLeb128
ÖebOutBuf, 
b™Off£t
);

1415 
ËbSize
 +ğ
ËbOutBuf
 - 
curBuf
;

1422 ià(
numB™sChªged
 > 0)

1423 
	`as£¹
(
fœ¡B™Chªged
 >= 0);

1425 ià(
pFœ¡B™Chªged
 !ğ
NULL
)

1426 *
pFœ¡B™Chªged
 = 
fœ¡B™Chªged
;

1427 ià(
pNumB™sChªged
 !ğ
NULL
)

1428 *
pNumB™sChªged
 = 
numB™sChªged
;

1430  
ËbSize
;

1431 
	}
}

1441 
Regi¡”M­
* 
	$com´essM­Difã»ÁŸl
(cÚ¡ 
Regi¡”M­
* 
pM­
,

1442 cÚ¡ 
M‘hod
* 
m‘h
)

1444 
Regi¡”M­
* 
pNewM­
 = 
NULL
;

1445 
ÜigSize
 = 
	`compu‹Regi¡”M­Size
(
pM­
);

1446 
u1
* 
tmpBuf
 = 
NULL
;

1447 
u1
* 
tmpPŒ
;

1448 
addrWidth
, 
»gWidth
, 
numEÁr›s
;

1449 
boŞ
 
debug
 = 
çl£
;

1451 ià(
çl£
 &&

1452 
	`¡rcmp
(
m‘h
->
şazz
->
desütÜ
, "Landroid/text/StaticLayout;") == 0 &&

1453 
	`¡rcmp
(
m‘h
->
Çme
, "generate") == 0)

1455 
debug
 = 
Œue
;

1458 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

1459 
fÜm©
) {

1460 
kRegM­FÜm©Com·ù8
:

1461 
addrWidth
 = 1;

1463 
kRegM­FÜm©Com·ù16
:

1464 
addrWidth
 = 2;

1467 
	`LOGE
("ERROR: cª'ˆcom´es m­ w™h fÜm©=%d\n", 
fÜm©
);

1468 
ba
;

1471 
»gWidth
 = 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
);

1472 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

1474 ià(
debug
) {

1475 
	`LOGI
("COMPRESS: %s.%s‡w=%d„w=%d‚e=%d\n",

1476 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
,

1477 
addrWidth
, 
»gWidth
, 
numEÁr›s
);

1478 
	`dumpRegi¡”M­
(
pM­
, -1);

1481 ià(
numEÁr›s
 <= 1) {

1482 
	`LOGV
("Can't compress map with 0 or 1ƒntries\n");

1483 
ba
;

1503 
tmpBuf
 = (
u1
*è
	`m®loc
(
ÜigSize
 + (1 + 3 + 
»gWidth
));

1504 ià(
tmpBuf
 =ğ
NULL
)

1505 
ba
;

1507 
tmpPŒ
 = 
tmpBuf
;

1509 cÚ¡ 
u1
* 
m­D©a
 = 
pM­
->
d©a
;

1510 cÚ¡ 
u1
* 
´evB™s
;

1511 
u2
 
addr
, 
´evAddr
;

1513 
addr
 = *
m­D©a
++;

1514 ià(
addrWidth
 > 1)

1515 
addr
 |ğ(*
m­D©a
++) << 8;

1517 ià(
addr
 >= 128) {

1518 
	`LOGV
("Can't compress map with starting‡ddress >= 128\n");

1519 
ba
;

1528 *
tmpPŒ
++ = 
addr
 | (
addrWidth
 > 1 ? 0x80 : 0x00);

1529 
	`memıy
(
tmpPŒ
, 
m­D©a
, 
»gWidth
);

1531 
´evB™s
 = 
m­D©a
;

1532 
´evAddr
 = 
addr
;

1534 
tmpPŒ
 +ğ
»gWidth
;

1535 
m­D©a
 +ğ
»gWidth
;

1540 
’Œy
;

1541 
’Œy
 = 1;ƒÁry < 
numEÁr›s
;ƒntry++) {

1542 
addrDiff
;

1543 
u1
 
key
;

1548 
addr
 = *
m­D©a
++;

1549 ià(
addrWidth
 > 1)

1550 
addr
 |ğ(*
m­D©a
++) << 8;

1552 ià(
debug
)

1553 
	`LOGI
("‡ddr=0x%04xƒÁ=%d (aw=%d)\n", 
addr
, 
’Œy
, 
addrWidth
);

1555 
addrDiff
 = 
addr
 - 
´evAddr
;

1556 
	`as£¹
(
addrDiff
 > 0);

1557 ià(
addrDiff
 < 8) {

1559 
key
 = 
addrDiff
 -1;

1560 ià(
debug
)

1561 
	`LOGI
(" : sm®È%d, key=0x%02x\n", 
addrDiff
, 
key
);

1564 
key
 = 0x07;

1565 ià(
debug
)

1566 
	`LOGI
(" :†¬g%d, key=0x%02x\n", 
addrDiff
, 
key
);

1569 
numB™sChªged
, 
fœ¡B™Chªged
, 
ËbSize
;

1571 
ËbSize
 = 
	`compu‹B™Diff
(
´evB™s
, 
m­D©a
, 
»gWidth
,

1572 &
fœ¡B™Chªged
, &
numB™sChªged
, 
NULL
);

1574 ià(
debug
) {

1575 
	`LOGI
(" : diff fbc=%d‚bc=%d†s=%d (rw=%d)\n",

1576 
fœ¡B™Chªged
, 
numB™sChªged
, 
ËbSize
, 
»gWidth
);

1579 ià(
numB™sChªged
 == 0) {

1581 
key
 |= 0x08;

1582 ià(
debug
è
	`LOGI
(" :‚o bits changed\n");

1583 } ià(
numB™sChªged
 =ğ1 && 
fœ¡B™Chªged
 < 16) {

1585 
key
 |ğ
fœ¡B™Chªged
 << 4;

1586 ià(
debug
è
	`LOGI
(" : 1†ow bit changed\n");

1587 } ià(
numB™sChªged
 < 15 && 
ËbSize
 < 
»gWidth
) {

1589 
key
 |ğ0x08 | (
numB™sChªged
 << 4);

1590 ià(
debug
è
	`LOGI
(" : some bits changed\n");

1593 
key
 |= 0x08 | 0xf0;

1594 ià(
debug
è
	`LOGI
(" :ƒncode original\n");

1601 *
tmpPŒ
++ = 
key
;

1602 ià((
key
 & 0x07) == 0x07)

1603 
tmpPŒ
 = 
	`wr™eUnsigÃdLeb128
ÑmpPŒ, 
addrDiff
);

1605 ià((
key
 & 0x08) != 0) {

1606 
b™CouÁ
 = 
key
 >> 4;

1607 ià(
b™CouÁ
 == 0) {

1609 } ià(
b™CouÁ
 == 15) {

1611 
	`memıy
(
tmpPŒ
, 
m­D©a
, 
»gWidth
);

1612 
tmpPŒ
 +ğ
»gWidth
;

1615 (è
	`compu‹B™Diff
(
´evB™s
, 
m­D©a
, 
»gWidth
,

1616 
NULL
, NULL, 
tmpPŒ
);

1617 
tmpPŒ
 +ğ
ËbSize
;

1623 
´evB™s
 = 
m­D©a
;

1624 
´evAddr
 = 
addr
;

1625 
m­D©a
 +ğ
»gWidth
;

1630 ià(
tmpPŒ
 - 
tmpBuf
 >ğ
ÜigSize
) {

1631 ià(
debug
) {

1632 
	`LOGD
("Compressed size >= original (%d vs %d): %s.%s\n",

1633 
tmpPŒ
 - 
tmpBuf
, 
ÜigSize
,

1634 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

1636 
ba
;

1646 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

1647 
ÃwD©aSize
 = 
tmpPŒ
 - 
tmpBuf
;

1648 
ÃwM­Size
;

1650 
ÃwM­Size
 = 
kH—d”Size
 + 
	`unsigÃdLeb128Size
(
ÃwD©aSize
) +‚ewDataSize;

1651 ià(
ÃwM­Size
 >ğ
ÜigSize
) {

1652 ià(
debug
) {

1653 
	`LOGD
("Final comp size >= original (%d vs %d): %s.%s\n",

1654 
ÃwM­Size
, 
ÜigSize
, 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
);

1656 
ba
;

1659 
pNewM­
 = (
Regi¡”M­
*è
	`m®loc
(
ÃwM­Size
);

1660 ià(
pNewM­
 =ğ
NULL
)

1661 
ba
;

1662 
	`dvmRegi¡”M­S‘FÜm©
(
pNewM­
, 
kRegM­FÜm©Difã»ÁŸl
);

1663 
	`dvmRegi¡”M­S‘OnH—p
(
pNewM­
, 
Œue
);

1664 
	`dvmRegi¡”M­S‘RegWidth
(
pNewM­
, 
»gWidth
);

1665 
	`dvmRegi¡”M­S‘NumEÁr›s
(
pNewM­
, 
numEÁr›s
);

1667 
tmpPŒ
 = 
pNewM­
->
d©a
;

1668 
tmpPŒ
 = 
	`wr™eUnsigÃdLeb128
ÑmpPŒ, 
ÃwD©aSize
);

1669 
	`memıy
(
tmpPŒ
, 
tmpBuf
, 
ÃwD©aSize
);

1671 ià(
REGISTER_MAP_VERBOSE
) {

1672 
	`LOGD
("Compression successful (%d -> %d) from‡w=%d„w=%d‚e=%d\n",

1673 
	`compu‹Regi¡”M­Size
(
pM­
), compu‹Regi¡”M­Size(
pNewM­
),

1674 
addrWidth
, 
»gWidth
, 
numEÁr›s
);

1677 
ba
:

1678 
	`ä“
(
tmpBuf
);

1679  
pNewM­
;

1680 
	}
}

1685 
šlše
 
	$toggËB™
(
u1
* 
±r
, 
idx
)

1687 
±r
[
idx
 >> 3] ^= 1 << (idx & 0x07);

1688 
	}
}

1698 
Regi¡”M­
* 
	$uncom´essM­Difã»ÁŸl
(cÚ¡ 
Regi¡”M­
* 
pM­
)

1700 
Regi¡”M­
* 
pNewM­
 = 
NULL
;

1701 cÚ¡ 
kH—d”Size
 = 
	`off£tof
(
Regi¡”M­
, 
d©a
);

1702 
u1
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
pM­
);

1703 
Regi¡”M­FÜm©
 
ÃwFÜm©
;

1704 
»gWidth
, 
numEÁr›s
, 
ÃwAddrWidth
, 
ÃwM­Size
;

1706 ià(
fÜm©
 !ğ
kRegM­FÜm©Difã»ÁŸl
) {

1707 
	`LOGE
("NÙ difã»ÁŸÈ(%d)\n", 
fÜm©
);

1708 
ba
;

1711 
»gWidth
 = 
	`dvmRegi¡”M­G‘RegWidth
(
pM­
);

1712 
numEÁr›s
 = 
	`dvmRegi¡”M­G‘NumEÁr›s
(
pM­
);

1715 cÚ¡ 
u1
* 
¤cPŒ
 = 
pM­
->
d©a
;

1716 
ex³ùedSrcL’
 = 
	`»adUnsigÃdLeb128
(&
¤cPŒ
);

1717 cÚ¡ 
u1
* 
¤cS¹
 = 
¤cPŒ
;

1720 
addr
 = *
¤cPŒ
 & 0x7f;

1721 ià((*
¤cPŒ
 & 0x80) == 0) {

1722 
ÃwFÜm©
 = 
kRegM­FÜm©Com·ù8
;

1723 
ÃwAddrWidth
 = 1;

1725 
ÃwFÜm©
 = 
kRegM­FÜm©Com·ù16
;

1726 
ÃwAddrWidth
 = 2;

1728 
¤cPŒ
++;

1731 ià(
REGISTER_MAP_VERBOSE
) {

1732 
	`LOGI
("Expandingo map‡w=%d„w=%d‚e=%d\n",

1733 
ÃwAddrWidth
, 
»gWidth
, 
numEÁr›s
);

1735 
ÃwM­Size
 = 
kH—d”Size
 + (
ÃwAddrWidth
 + 
»gWidth
è* 
numEÁr›s
;

1736 
pNewM­
 = (
Regi¡”M­
*è
	`m®loc
(
ÃwM­Size
);

1737 ià(
pNewM­
 =ğ
NULL
)

1738 
ba
;

1740 
	`dvmRegi¡”M­S‘FÜm©
(
pNewM­
, 
ÃwFÜm©
);

1741 
	`dvmRegi¡”M­S‘OnH—p
(
pNewM­
, 
Œue
);

1742 
	`dvmRegi¡”M­S‘RegWidth
(
pNewM­
, 
»gWidth
);

1743 
	`dvmRegi¡”M­S‘NumEÁr›s
(
pNewM­
, 
numEÁr›s
);

1748 
u1
* 
d¡PŒ
 = 
pNewM­
->
d©a
;

1750 *
d¡PŒ
++ = 
addr
 & 0xff;

1751 ià(
ÃwAddrWidth
 > 1)

1752 *
d¡PŒ
++ = (
u1
è(
addr
 >> 8);

1754 
	`memıy
(
d¡PŒ
, 
¤cPŒ
, 
»gWidth
);

1756 
´evAddr
 = 
addr
;

1757 cÚ¡ 
u1
* 
´evB™s
 = 
d¡PŒ
;

1759 
d¡PŒ
 +ğ
»gWidth
;

1760 
¤cPŒ
 +ğ
»gWidth
;

1765 
’Œy
;

1766 
’Œy
 = 1;ƒÁry < 
numEÁr›s
;ƒntry++) {

1767 
addrDiff
;

1768 
u1
 
key
;

1770 
key
 = *
¤cPŒ
++;

1773 ià((
key
 & 0x07) == 7) {

1775 
addrDiff
 = 
	`»adUnsigÃdLeb128
(&
¤cPŒ
);

1777 
addrDiff
 = (
key
 & 0x07) +1;

1780 
addr
 = 
´evAddr
 + 
addrDiff
;

1781 *
d¡PŒ
++ = 
addr
 & 0xff;

1782 ià(
ÃwAddrWidth
 > 1)

1783 *
d¡PŒ
++ = (
u1
è(
addr
 >> 8);

1786 ià((
key
 & 0x08) != 0) {

1787 
b™CouÁ
 = (
key
 >> 4);

1788 ià(
b™CouÁ
 == 0) {

1790 
	`memıy
(
d¡PŒ
, 
´evB™s
, 
»gWidth
);

1791 } ià(
b™CouÁ
 == 15) {

1793 
	`memıy
(
d¡PŒ
, 
¤cPŒ
, 
»gWidth
);

1794 
¤cPŒ
 +ğ
»gWidth
;

1797 
	`memıy
(
d¡PŒ
, 
´evB™s
, 
»gWidth
);

1798 
b™CouÁ
--) {

1799 
b™Index
 = 
	`»adUnsigÃdLeb128
(&
¤cPŒ
);

1800 
	`toggËB™
(
d¡PŒ
, 
b™Index
);

1805 
	`memıy
(
d¡PŒ
, 
´evB™s
, 
»gWidth
);

1808 
	`toggËB™
(
d¡PŒ
, 
key
 >> 4);

1811 
´evAddr
 = 
addr
;

1812 
´evB™s
 = 
d¡PŒ
;

1813 
d¡PŒ
 +ğ
»gWidth
;

1816 ià(
d¡PŒ
 - (
u1
*è
pNewM­
 !ğ
ÃwM­Size
) {

1817 
	`LOGE
("ERROR: output %d bytes,ƒxpected %d\n",

1818 
d¡PŒ
 - (
u1
*è
pNewM­
, 
ÃwM­Size
);

1819 
ba
;

1822 ià(
¤cPŒ
 - 
¤cS¹
 !ğ
ex³ùedSrcL’
) {

1823 
	`LOGE
("ERROR: consumed %d bytes,ƒxpected %d\n",

1824 
¤cPŒ
 - 
¤cS¹
, 
ex³ùedSrcL’
);

1825 
ba
;

1828 ià(
REGISTER_MAP_VERBOSE
) {

1829 
	`LOGD
("Expansion successful (%d -> %d)\n",

1830 
	`compu‹Regi¡”M­Size
(
pM­
), compu‹Regi¡”M­Size(
pNewM­
));

1833  
pNewM­
;

1835 
ba
:

1836 
	`ä“
(
pNewM­
);

1837  
NULL
;

1838 
	}
}

1904 
u1
 
	tSRegTy³
;

1905 
	#kRegTy³Reã»nû
 
kRegTy³MAX


	)

1911 
	#kExŒaRegs
 2

	)

1912 
	#RESULT_REGISTER
(
_š¢RegCouÁPlus
è(_š¢RegCouÁPlu - 
kExŒaRegs
)

	)

1917 
	sWÜkS‹
 {

1921 cÚ¡ 
M‘hod
* 
	mm‘hod
;

1926 
	mš¢sSize
;

1932 
	mš¢RegCouÁPlus
;

1937 
In¢FÏgs
* 
	mš¢FÏgs
;

1948 
SRegTy³
** 
	maddrRegs
;

1953 
SRegTy³
* 
	m»gAÎoc
;

1954 } 
	tWÜkS‹
;

1957 
boŞ
 
g’”©eM­
(
WÜkS‹
* 
pS‹
, 
Regi¡”M­
* 
pM­
);

1958 
boŞ
 
ª®yzeM‘hod
(
WÜkS‹
* 
pS‹
);

1959 
boŞ
 
hªdËIn¡ruùiÚ
(
WÜkS‹
* 
pS‹
, 
SRegTy³
* 
wÜkRegs
,\

1960 
š¢Idx
, * 
pS¹Guess
);

1961 
upd©eRegi¡”s
(
WÜkS‹
* 
pS‹
, 
ÃxtIn¢
,\

1962 cÚ¡ 
SRegTy³
* 
wÜkRegs
);

1968 
boŞ
 
	$£tIn¢FÏgs
(
WÜkS‹
* 
pS‹
, * 
pGcPoštCouÁ
)

1970 cÚ¡ 
M‘hod
* 
m‘h
 = 
pS‹
->
m‘hod
;

1971 
In¢FÏgs
* 
š¢FÏgs
 = 
pS‹
->insnFlags;

1972 
š¢sSize
 = 
pS‹
->insnsSize;

1973 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

1974 
gcPoštCouÁ
 = 0;

1975 
off£t
;

1978 ià(!
	`dvmCompu‹CodeWidths
(
m‘h
, 
pS‹
->
š¢FÏgs
, 
NULL
))

1979  
çl£
;

1982 ià(!
	`dvmS‘TryFÏgs
(
m‘h
, 
pS‹
->
š¢FÏgs
))

1983  
çl£
;

1986 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 0, 
Œue
);

1998 
off£t
 = 0; off£ˆ< 
š¢sSize
; offset++) {

1999 
gcMask
 = 
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 |

2000 
kIn¡rCªThrow
 | 
kIn¡rCªR‘uº
;

2001 
u1
 
İcode
 = 
š¢s
[
off£t
] & 0xff;

2002 
In¡ruùiÚFÏgs
 
İFÏgs
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
İcode
);

2004 ià(
İFÏgs
 & 
kIn¡rCªB¿nch
) {

2005 ià(!
	`dvmCheckB¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
off£t
, 
Œue
))

2006  
çl£
;

2008 ià(
İFÏgs
 & 
kIn¡rCªSw™ch
) {

2009 ià(!
	`dvmCheckSw™chT¬g‘s
(
m‘h
, 
š¢FÏgs
, 
off£t
))

2010  
çl£
;

2013 ià((
İFÏgs
 & 
gcMask
) != 0) {

2014 
	`dvmIn¢S‘GcPošt
(
pS‹
->
š¢FÏgs
, 
off£t
, 
Œue
);

2015 
gcPoštCouÁ
++;

2019 *
pGcPoštCouÁ
 = 
gcPoštCouÁ
;

2020  
Œue
;

2021 
	}
}

2028 
Regi¡”M­
* 
	$dvmG’”©eRegi¡”M­
(cÚ¡ 
M‘hod
* 
m‘h
)

2030 
WÜkS‹
* 
pS‹
 = 
NULL
;

2031 
Regi¡”M­
* 
pM­
 = 
NULL
;

2032 
Regi¡”M­
* 
»suÉ
 = 
NULL
;

2033 
SRegTy³
* 
»gPŒ
;

2035 
pS‹
 = (
WÜkS‹
*è
	`ÿÎoc
(1, (WorkState));

2036 ià(
pS‹
 =ğ
NULL
)

2037 
ba
;

2039 
pM­
 = (
Regi¡”M­
*è
	`ÿÎoc
(1, (RegisterMap));

2040 ià(
pM­
 =ğ
NULL
)

2041 
ba
;

2043 
pS‹
->
m‘hod
 = 
m‘h
;

2044 
pS‹
->
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

2045 
pS‹
->
š¢RegCouÁPlus
 = 
m‘h
->
»gi¡”sSize
 + 
kExŒaRegs
;

2047 
pS‹
->
š¢FÏgs
 = 
	`ÿÎoc
((
In¢FÏgs
),…S‹->
š¢sSize
);

2048 
pS‹
->
addrRegs
 = 
	`ÿÎoc
((
SRegTy³
*),…S‹->
š¢sSize
);

2054 
gcPoštCouÁ
;

2055 ià(!
	`£tIn¢FÏgs
(
pS‹
, &
gcPoštCouÁ
))

2056 
ba
;

2058 ià(
gcPoštCouÁ
 == 0) {

2060 
	`LOG_VFY_METH
(
m‘h
, "Found do-nothing method\n");

2061 
ba
;

2064 
pS‹
->
»gAÎoc
 = (
SRegTy³
*)

2065 
	`ÿÎoc
((
SRegTy³
), 
pS‹
->
š¢sSize
 * 
gcPoštCouÁ
);

2066 
»gPŒ
 = 
pS‹
->
»gAÎoc
;

2072 
off£t
;

2073 
off£t
 = 0; off£ˆ< 
pS‹
->
š¢sSize
; offset++) {

2074 ià(
	`dvmIn¢IsGcPošt
(
pS‹
->
š¢FÏgs
, 
off£t
)) {

2075 
pS‹
->
addrRegs
[
off£t
] = 
»gPŒ
;

2076 
»gPŒ
 +ğ
pS‹
->
š¢RegCouÁPlus
;

2079 
	`as£¹
(
»gPŒ
 - 
pS‹
->
»gAÎoc
 =ğpS‹->
š¢sSize
 * 
gcPoštCouÁ
);

2080 
	`as£¹
(
pS‹
->
addrRegs
[0] !ğ
NULL
);

2085 ià(!
	`g’”©eM­
(
pS‹
, 
pM­
))

2086 
ba
;

2089 
»suÉ
 = 
pM­
;

2090 
pM­
 = 
NULL
;

2092 
ba
:

2093 ià(
pS‹
 !ğ
NULL
) {

2094 
	`ä“
(
pS‹
->
š¢FÏgs
);

2095 
	`ä“
(
pS‹
->
addrRegs
);

2096 
	`ä“
(
pS‹
->
»gAÎoc
);

2097 
	`ä“
(
pS‹
);

2099 ià(
pM­
 !ğ
NULL
)

2100 
	`dvmF»eRegi¡”M­
(
pM­
);

2101  
»suÉ
;

2102 
	}
}

2107 
	$dvmF»eRegi¡”M­
(
Regi¡”M­
* 
pM­
)

2109 ià(
pM­
 =ğ
NULL
)

2111 
	}
}

2117 
boŞ
 
	$g’”©eM­
(
WÜkS‹
* 
pS‹
, 
Regi¡”M­
* 
pM­
)

2119 
boŞ
 
»suÉ
 = 
çl£
;

2124 ià(!
	`ª®yzeM‘hod
(
pS‹
))

2125 
ba
;

2132 
»suÉ
 = 
Œue
;

2134 
ba
:

2135  
»suÉ
;

2136 
	}
}

2142 
boŞ
 
	$£tTy³sFromSigÇtu»
(
WÜkS‹
* 
pS‹
)

2144 cÚ¡ 
M‘hod
* 
m‘h
 = 
pS‹
->
m‘hod
;

2145 
¬gReg
 = 
m‘h
->
»gi¡”sSize
 - m‘h->
šsSize
;

2146 
SRegTy³
* 
pRegs
 = 
pS‹
->
addrRegs
[0];

2147 
SRegTy³
* 
pCurReg
 = &
pRegs
[
¬gReg
];

2148 cÚ¡ * 
cı
;

2153 ià(!
	`dvmIsSticM‘hod
(
m‘h
)) {

2154 *
pCurReg
++ = 
kRegTy³Reã»nû
;

2157 
cı
 = 
m‘h
->
shÜty
 +1;

2158 *
cı
 != 0) {

2159 *
cı
) {

2162 *
pCurReg
++ = 
kRegTy³Reã»nû
;

2165 *
pCurReg
++ = 
kRegTy³BoŞ—n
;

2168 *
pCurReg
++ = 
kRegTy³Ch¬
;

2171 *
pCurReg
++ = 
kRegTy³By‹
;

2174 *
pCurReg
++ = 
kRegTy³IÁeg”
;

2177 *
pCurReg
++ = 
kRegTy³ShÜt
;

2180 *
pCurReg
++ = 
kRegTy³Flßt
;

2183 *
pCurReg
++ = 
kRegTy³DoubËLo
;

2184 *
pCurReg
++ = 
kRegTy³DoubËHi
;

2187 *
pCurReg
++ = 
kRegTy³LÚgLo
;

2188 *
pCurReg
++ = 
kRegTy³LÚgHi
;

2191 
	`as£¹
(
çl£
);

2192  
çl£
;

2196 
	`as£¹
(
pCurReg
 - 
pRegs
 =ğ
m‘h
->
šsSize
);

2197  
Œue
;

2198 
	}
}

2204 
šlše
 
SRegTy³
* 
	$g‘Regi¡”Lše
(cÚ¡ 
WÜkS‹
* 
pS‹
, 
š¢Idx
)

2206  
pS‹
->
addrRegs
[
š¢Idx
];

2207 
	}
}

2212 
šlše
 
	$cİyRegi¡”s
(
SRegTy³
* 
d¡
, cÚ¡ SRegTy³* 
¤c
,

2213 
numRegs
)

2215 
	`memıy
(
d¡
, 
¤c
, 
numRegs
 * (
SRegTy³
));

2216 
	}
}

2221 
šlše
 
	$com·»Regi¡”s
(cÚ¡ 
SRegTy³
* 
¤c1
, cÚ¡ SRegTy³* 
¤c2
,

2222 
numRegs
)

2224  
	`memcmp
(
¤c1
, 
¤c2
, 
numRegs
 * (
SRegTy³
));

2225 
	}
}

2231 
boŞ
 
	$ª®yzeM‘hod
(
WÜkS‹
* 
pS‹
)

2233 cÚ¡ 
M‘hod
* 
m‘h
 = 
pS‹
->
m‘hod
;

2234 
SRegTy³
 
wÜkRegs
[
pS‹
->
š¢RegCouÁPlus
];

2235 
In¢FÏgs
* 
š¢FÏgs
 = 
pS‹
->insnFlags;

2236 
š¢sSize
 = 
pS‹
->insnsSize;

2237 
š¢Idx
, 
¡¬tGuess
;

2238 
boŞ
 
»suÉ
 = 
çl£
;

2244 ià(!
	`£tTy³sFromSigÇtu»
(
pS‹
))

2245 
ba
;

2250 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 0, 
Œue
);

2251 
¡¬tGuess
 = 0;

2253 ià(
Œue
) {

2254 
	`IF_LOGI
() {

2255 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

2256 
	`LOGI
("Now mapping: %s.%s %s (ins=%d„egs=%d)\n",

2257 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
,

2258 
m‘h
->
šsSize
, m‘h->
»gi¡”sSize
);

2259 
	`LOGI
(" ------ [0 4 8 12 16 20 24 28 32 36\n");

2260 
	`ä“
(
desc
);

2267 
Œue
) {

2272 
š¢Idx
 = 
¡¬tGuess
; in¢Idx < 
š¢sSize
; insnIdx++) {

2273 ià(
	`dvmIn¢IsChªged
(
š¢FÏgs
, 
š¢Idx
))

2277 ià(
š¢Idx
 =ğ
š¢sSize
) {

2278 ià(
¡¬tGuess
 != 0) {

2280 
¡¬tGuess
 = 0;

2299 ià(
	`dvmIn¢IsB¿nchT¬g‘
(
š¢FÏgs
, 
š¢Idx
)) {

2300 
SRegTy³
* 
š¢Regs
 = 
	`g‘Regi¡”Lše
(
pS‹
, 
š¢Idx
);

2301 
	`as£¹
(
š¢Regs
 !ğ
NULL
);

2302 
	`cİyRegi¡”s
(
wÜkRegs
, 
š¢Regs
, 
pS‹
->
š¢RegCouÁPlus
);

2305 #iâdeà
NDEBUG


2310 
SRegTy³
* 
š¢Regs
 = 
	`g‘Regi¡”Lše
(
pS‹
, 
š¢Idx
);

2311 ià(
š¢Regs
 !ğ
NULL
 &&

2312 
	`com·»Regi¡”s
(
wÜkRegs
, 
š¢Regs
,

2313 
pS‹
->
š¢RegCouÁPlus
) != 0)

2315 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

2316 
	`LOG_VFY
("HUH? workRegs diverged in %s.%s %s\n",

2317 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

2318 
	`ä“
(
desc
);

2326 ià(!
	`hªdËIn¡ruùiÚ
(
pS‹
, 
wÜkRegs
, 
š¢Idx
, &
¡¬tGuess
)) {

2327 
ba
;

2330 
	`dvmIn¢S‘Vis™ed
(
š¢FÏgs
, 
š¢Idx
, 
Œue
);

2331 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
š¢Idx
, 
çl£
);

2336 
»suÉ
 = 
Œue
;

2338 
ba
:

2339  
»suÉ
;

2340 
	}
}

2347 
M‘hod
* 
	$g‘InvokedM‘hod
(cÚ¡ 
M‘hod
* 
m‘h
,

2348 cÚ¡ 
DecodedIn¡ruùiÚ
* 
pDecIn¢
, 
M‘hodTy³
 
m‘hodTy³
)

2350 
M‘hod
* 
»sM‘hod
;

2351 * 
sigOrigš®
 = 
NULL
;

2357 ià(
m‘hodTy³
 =ğ
METHOD_INTERFACE
) {

2358 
»sM‘hod
 = 
	`dvmO±ResŞveIÁ”çûM‘hod
(
m‘h
->
şazz
, 
pDecIn¢
->
vB
);

2360 
»sM‘hod
 = 
	`dvmO±ResŞveM‘hod
(
m‘h
->
şazz
, 
pDecIn¢
->
vB
, 
m‘hodTy³
);

2362 ià(
»sM‘hod
 =ğ
NULL
) {

2364 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

2365 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

2366 cÚ¡ * 
m‘hodName
;

2367 * 
m‘hodDesc
;

2368 cÚ¡ * 
şassDesütÜ
;

2370 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDecIn¢
->
vB
);

2371 
m‘hodName
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

2372 
m‘hodDesc
 = 
	`dexCİyDesütÜFromM‘hodId
(
pDexFe
, 
pM‘hodId
);

2373 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

2375 
	`LOG_VFY
("VFY: unableo„esolve %s method %u: %s.%s %s\n",

2376 
	`dvmM‘hodTy³SŒ
(
m‘hodTy³
), 
pDecIn¢
->
vB
,

2377 
şassDesütÜ
, 
m‘hodName
, 
m‘hodDesc
);

2378 
	`ä“
(
m‘hodDesc
);

2379  
NULL
;

2382  
»sM‘hod
;

2383 
	}
}

2391 
SRegTy³
 
	$g‘M‘hodR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
)

2393 
SRegTy³
 
ty³
;

2395 
m‘h
->
shÜty
[0]) {

2397 
ty³
 = 
kRegTy³IÁeg”
;

2400 
ty³
 = 
kRegTy³Ch¬
;

2403 
ty³
 = 
kRegTy³ShÜt
;

2406 
ty³
 = 
kRegTy³By‹
;

2409 
ty³
 = 
kRegTy³BoŞ—n
;

2412 
ty³
 = 
kRegTy³Unknown
;

2415 
ty³
 = 
kRegTy³Flßt
;

2418 
ty³
 = 
kRegTy³DoubËLo
;

2421 
ty³
 = 
kRegTy³LÚgLo
;

2425 
ty³
 = 
kRegTy³Reã»nû
;

2429 
	`as£¹
(
çl£
);

2430 
ty³
 = 
kRegTy³CÚæiù
;

2434  
ty³
;

2435 
	}
}

2440 
šlše
 
	$cİyRegi¡”1
(
SRegTy³
* 
š¢Regs
, 
u4
 
vd¡
, u4 
v¤c
)

2442 
š¢Regs
[
vd¡
] = in¢Regs[
v¤c
];

2443 
	}
}

2448 
šlše
 
	$cİyRegi¡”2
(
SRegTy³
* 
š¢Regs
, 
u4
 
vd¡
, u4 
v¤c
)

2451 
SRegTy³
 
r1
 = 
š¢Regs
[
v¤c
];

2452 
SRegTy³
 
r2
 = 
š¢Regs
[
v¤c
+1];

2453 
š¢Regs
[
vd¡
] = 
r1
;

2454 
š¢Regs
[
vd¡
+1] = 
r2
;

2455 
	}
}

2460 
šlše
 
	$£tRegi¡”Ty³
(
SRegTy³
* 
š¢Regs
, 
u4
 
vd¡
, SRegTy³ 
ty³
)

2462 
š¢Regs
[
vd¡
] = 
ty³
;

2463 
	}
}

2468 
boŞ
 
	$hªdËIn¡ruùiÚ
(
WÜkS‹
* 
pS‹
, 
SRegTy³
* 
wÜkRegs
,

2469 
š¢Idx
, * 
pS¹Guess
)

2471 cÚ¡ 
M‘hod
* 
m‘h
 = 
pS‹
->
m‘hod
;

2472 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
š¢Idx
;

2473 
In¢FÏgs
* 
š¢FÏgs
 = 
pS‹
->insnFlags;

2474 
boŞ
 
»suÉ
 = 
çl£
;

2495 
DecodedIn¡ruùiÚ
 
decIn¢
;

2496 
SRegTy³
 
’ŒyRegs
[
pS‹
->
š¢RegCouÁPlus
];

2497 cÚ¡ 
š¢RegCouÁPlus
 = 
pS‹
->insnRegCountPlus;

2498 
boŞ
 
ju¡S‘ResuÉ
 = 
çl£
;

2499 
b¿nchT¬g‘
 = 0;

2500 
SRegTy³
 
tmpTy³
;

2502 
	`dexDecodeIn¡ruùiÚ
(
gDvm
.
š¡rFÜm©
, 
š¢s
, &
decIn¢
);

2503 cÚ¡ 
ÃxtFÏgs
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
decIn¢
.
İCode
);

2512 ià((
ÃxtFÏgs
 & 
kIn¡rCªThrow
è!ğ0 && 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
š¢Idx
))

2514 
	`cİyRegi¡”s
(
’ŒyRegs
, 
wÜkRegs
, 
š¢RegCouÁPlus
);

2517 
decIn¢
.
İCode
) {

2518 
OP_NOP
:

2521 
OP_MOVE
:

2522 
OP_MOVE_FROM16
:

2523 
OP_MOVE_16
:

2524 
OP_MOVE_OBJECT
:

2525 
OP_MOVE_OBJECT_FROM16
:

2526 
OP_MOVE_OBJECT_16
:

2527 
	`cİyRegi¡”1
(
wÜkRegs
, 
decIn¢
.
vA
, decIn¢.
vB
);

2529 
OP_MOVE_WIDE
:

2530 
OP_MOVE_WIDE_FROM16
:

2531 
OP_MOVE_WIDE_16
:

2532 
	`cİyRegi¡”2
(
wÜkRegs
, 
decIn¢
.
vA
, decIn¢.
vB
);

2546 
OP_MOVE_RESULT
:

2547 
OP_MOVE_RESULT_OBJECT
:

2548 
	`cİyRegi¡”1
(
wÜkRegs
, 
decIn¢
.
vA
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
));

2550 
OP_MOVE_RESULT_WIDE
:

2551 
	`cİyRegi¡”2
(
wÜkRegs
, 
decIn¢
.
vA
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
));

2554 
OP_MOVE_EXCEPTION
:

2561 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2564 
OP_RETURN_VOID
:

2565 
OP_RETURN
:

2566 
OP_RETURN_WIDE
:

2567 
OP_RETURN_OBJECT
:

2570 
OP_CONST_4
:

2571 
OP_CONST_16
:

2572 
OP_CONST
:

2574 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
,

2575 
	`dvmD‘”mšeC©1CÚ¡
((
s4
)
decIn¢
.
vB
));

2577 
OP_CONST_HIGH16
:

2579 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
,

2580 
	`dvmD‘”mšeC©1CÚ¡
((
s4
è
decIn¢
.
vB
 << 16));

2582 
OP_CONST_WIDE_16
:

2583 
OP_CONST_WIDE_32
:

2584 
OP_CONST_WIDE
:

2585 
OP_CONST_WIDE_HIGH16
:

2587 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2589 
OP_CONST_STRING
:

2590 
OP_CONST_STRING_JUMBO
:

2591 
OP_CONST_CLASS
:

2592 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2595 
OP_MONITOR_ENTER
:

2596 
OP_MONITOR_EXIT
:

2599 
OP_CHECK_CAST
:

2600 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2602 
OP_INSTANCE_OF
:

2604 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

2607 
OP_ARRAY_LENGTH
:

2608 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2611 
OP_NEW_INSTANCE
:

2612 
OP_NEW_ARRAY
:

2614 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2616 
OP_FILLED_NEW_ARRAY
:

2617 
OP_FILLED_NEW_ARRAY_RANGE
:

2618 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
),

2619 
kRegTy³Reã»nû
);

2620 
ju¡S‘ResuÉ
 = 
Œue
;

2623 
OP_CMPL_FLOAT
:

2624 
OP_CMPG_FLOAT
:

2625 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

2627 
OP_CMPL_DOUBLE
:

2628 
OP_CMPG_DOUBLE
:

2629 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

2631 
OP_CMP_LONG
:

2632 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³BoŞ—n
);

2635 
OP_THROW
:

2636 
OP_GOTO
:

2637 
OP_GOTO_16
:

2638 
OP_GOTO_32
:

2639 
OP_PACKED_SWITCH
:

2640 
OP_SPARSE_SWITCH
:

2643 
OP_FILL_ARRAY_DATA
:

2646 
OP_IF_EQ
:

2647 
OP_IF_NE
:

2648 
OP_IF_LT
:

2649 
OP_IF_GE
:

2650 
OP_IF_GT
:

2651 
OP_IF_LE
:

2652 
OP_IF_EQZ
:

2653 
OP_IF_NEZ
:

2654 
OP_IF_LTZ
:

2655 
OP_IF_GEZ
:

2656 
OP_IF_GTZ
:

2657 
OP_IF_LEZ
:

2660 
OP_AGET
:

2661 
tmpTy³
 = 
kRegTy³IÁeg”
;

2662 
ag‘_1Ä_commÚ
;

2663 
OP_AGET_BOOLEAN
:

2664 
tmpTy³
 = 
kRegTy³BoŞ—n
;

2665 
ag‘_1Ä_commÚ
;

2666 
OP_AGET_BYTE
:

2667 
tmpTy³
 = 
kRegTy³By‹
;

2668 
ag‘_1Ä_commÚ
;

2669 
OP_AGET_CHAR
:

2670 
tmpTy³
 = 
kRegTy³Ch¬
;

2671 
ag‘_1Ä_commÚ
;

2672 
OP_AGET_SHORT
:

2673 
tmpTy³
 = 
kRegTy³ShÜt
;

2674 
ag‘_1Ä_commÚ
;

2675 
ag‘_1Ä_commÚ
:

2676 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
tmpTy³
);

2679 
OP_AGET_WIDE
:

2685 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2688 
OP_AGET_OBJECT
:

2689 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2692 
OP_APUT
:

2693 
OP_APUT_BOOLEAN
:

2694 
OP_APUT_BYTE
:

2695 
OP_APUT_CHAR
:

2696 
OP_APUT_SHORT
:

2697 
OP_APUT_WIDE
:

2698 
OP_APUT_OBJECT
:

2701 
OP_IGET
:

2702 
tmpTy³
 = 
kRegTy³IÁeg”
;

2703 
ig‘_1Ä_commÚ
;

2704 
OP_IGET_BOOLEAN
:

2705 
tmpTy³
 = 
kRegTy³BoŞ—n
;

2706 
ig‘_1Ä_commÚ
;

2707 
OP_IGET_BYTE
:

2708 
tmpTy³
 = 
kRegTy³By‹
;

2709 
ig‘_1Ä_commÚ
;

2710 
OP_IGET_CHAR
:

2711 
tmpTy³
 = 
kRegTy³Ch¬
;

2712 
ig‘_1Ä_commÚ
;

2713 
OP_IGET_SHORT
:

2714 
tmpTy³
 = 
kRegTy³ShÜt
;

2715 
ig‘_1Ä_commÚ
;

2716 
ig‘_1Ä_commÚ
:

2717 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
tmpTy³
);

2720 
OP_IGET_WIDE
:

2721 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2724 
OP_IGET_OBJECT
:

2725 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2728 
OP_IPUT
:

2729 
OP_IPUT_BOOLEAN
:

2730 
OP_IPUT_BYTE
:

2731 
OP_IPUT_CHAR
:

2732 
OP_IPUT_SHORT
:

2733 
OP_IPUT_WIDE
:

2734 
OP_IPUT_OBJECT
:

2737 
OP_SGET
:

2738 
tmpTy³
 = 
kRegTy³IÁeg”
;

2739 
sg‘_1Ä_commÚ
;

2740 
OP_SGET_BOOLEAN
:

2741 
tmpTy³
 = 
kRegTy³BoŞ—n
;

2742 
sg‘_1Ä_commÚ
;

2743 
OP_SGET_BYTE
:

2744 
tmpTy³
 = 
kRegTy³By‹
;

2745 
sg‘_1Ä_commÚ
;

2746 
OP_SGET_CHAR
:

2747 
tmpTy³
 = 
kRegTy³Ch¬
;

2748 
sg‘_1Ä_commÚ
;

2749 
OP_SGET_SHORT
:

2750 
tmpTy³
 = 
kRegTy³ShÜt
;

2751 
sg‘_1Ä_commÚ
;

2752 
sg‘_1Ä_commÚ
:

2753 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
tmpTy³
);

2756 
OP_SGET_WIDE
:

2757 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2760 
OP_SGET_OBJECT
:

2761 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Reã»nû
);

2764 
OP_SPUT
:

2765 
OP_SPUT_BOOLEAN
:

2766 
OP_SPUT_BYTE
:

2767 
OP_SPUT_CHAR
:

2768 
OP_SPUT_SHORT
:

2769 
OP_SPUT_WIDE
:

2770 
OP_SPUT_OBJECT
:

2773 
OP_INVOKE_VIRTUAL
:

2774 
OP_INVOKE_VIRTUAL_RANGE
:

2775 
OP_INVOKE_SUPER
:

2776 
OP_INVOKE_SUPER_RANGE
:

2778 
M‘hod
* 
ÿÎedM‘hod
;

2780 
ÿÎedM‘hod
 = 
	`g‘InvokedM‘hod
(
m‘h
, &
decIn¢
, 
METHOD_VIRTUAL
);

2781 ià(
ÿÎedM‘hod
 =ğ
NULL
)

2782 
ba
;

2783 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
),

2784 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
));

2785 
ju¡S‘ResuÉ
 = 
Œue
;

2788 
OP_INVOKE_DIRECT
:

2789 
OP_INVOKE_DIRECT_RANGE
:

2791 
M‘hod
* 
ÿÎedM‘hod
;

2793 
ÿÎedM‘hod
 = 
	`g‘InvokedM‘hod
(
m‘h
, &
decIn¢
, 
METHOD_DIRECT
);

2794 ià(
ÿÎedM‘hod
 =ğ
NULL
)

2795 
ba
;

2796 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
),

2797 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
));

2798 
ju¡S‘ResuÉ
 = 
Œue
;

2801 
OP_INVOKE_STATIC
:

2802 
OP_INVOKE_STATIC_RANGE
:

2804 
M‘hod
* 
ÿÎedM‘hod
;

2806 
ÿÎedM‘hod
 = 
	`g‘InvokedM‘hod
(
m‘h
, &
decIn¢
, 
METHOD_STATIC
);

2807 ià(
ÿÎedM‘hod
 =ğ
NULL
)

2808 
ba
;

2809 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
),

2810 
	`g‘M‘hodR‘uºTy³
(
ÿÎedM‘hod
));

2811 
ju¡S‘ResuÉ
 = 
Œue
;

2814 
OP_INVOKE_INTERFACE
:

2815 
OP_INVOKE_INTERFACE_RANGE
:

2817 
M‘hod
* 
absM‘hod
;

2819 
absM‘hod
 = 
	`g‘InvokedM‘hod
(
m‘h
, &
decIn¢
, 
METHOD_INTERFACE
);

2820 ià(
absM‘hod
 =ğ
NULL
)

2821 
ba
;

2822 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
	`RESULT_REGISTER
(
š¢RegCouÁPlus
),

2823 
	`g‘M‘hodR‘uºTy³
(
absM‘hod
));

2824 
ju¡S‘ResuÉ
 = 
Œue
;

2828 
OP_NEG_INT
:

2829 
OP_NOT_INT
:

2830 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2832 
OP_NEG_LONG
:

2833 
OP_NOT_LONG
:

2834 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2836 
OP_NEG_FLOAT
:

2837 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Flßt
);

2839 
OP_NEG_DOUBLE
:

2840 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
);

2842 
OP_INT_TO_LONG
:

2843 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2845 
OP_INT_TO_FLOAT
:

2846 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Flßt
);

2848 
OP_INT_TO_DOUBLE
:

2849 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
);

2851 
OP_LONG_TO_INT
:

2852 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2854 
OP_LONG_TO_FLOAT
:

2855 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Flßt
);

2857 
OP_LONG_TO_DOUBLE
:

2858 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
);

2860 
OP_FLOAT_TO_INT
:

2861 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2863 
OP_FLOAT_TO_LONG
:

2864 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2866 
OP_FLOAT_TO_DOUBLE
:

2867 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
);

2869 
OP_DOUBLE_TO_INT
:

2870 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2872 
OP_DOUBLE_TO_LONG
:

2873 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2875 
OP_DOUBLE_TO_FLOAT
:

2876 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Flßt
);

2878 
OP_INT_TO_BYTE
:

2879 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³By‹
);

2881 
OP_INT_TO_CHAR
:

2882 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Ch¬
);

2884 
OP_INT_TO_SHORT
:

2885 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³ShÜt
);

2888 
OP_ADD_INT
:

2889 
OP_SUB_INT
:

2890 
OP_MUL_INT
:

2891 
OP_REM_INT
:

2892 
OP_DIV_INT
:

2893 
OP_SHL_INT
:

2894 
OP_SHR_INT
:

2895 
OP_USHR_INT
:

2896 
OP_AND_INT
:

2897 
OP_OR_INT
:

2898 
OP_XOR_INT
:

2899 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2901 
OP_ADD_LONG
:

2902 
OP_SUB_LONG
:

2903 
OP_MUL_LONG
:

2904 
OP_DIV_LONG
:

2905 
OP_REM_LONG
:

2906 
OP_AND_LONG
:

2907 
OP_OR_LONG
:

2908 
OP_XOR_LONG
:

2909 
OP_SHL_LONG
:

2910 
OP_SHR_LONG
:

2911 
OP_USHR_LONG
:

2912 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2914 
OP_ADD_FLOAT
:

2915 
OP_SUB_FLOAT
:

2916 
OP_MUL_FLOAT
:

2917 
OP_DIV_FLOAT
:

2918 
OP_REM_FLOAT
:

2919 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Flßt
);

2921 
OP_ADD_DOUBLE
:

2922 
OP_SUB_DOUBLE
:

2923 
OP_MUL_DOUBLE
:

2924 
OP_DIV_DOUBLE
:

2925 
OP_REM_DOUBLE
:

2926 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
);

2928 
OP_ADD_INT_2ADDR
:

2929 
OP_SUB_INT_2ADDR
:

2930 
OP_MUL_INT_2ADDR
:

2931 
OP_REM_INT_2ADDR
:

2932 
OP_SHL_INT_2ADDR
:

2933 
OP_SHR_INT_2ADDR
:

2934 
OP_USHR_INT_2ADDR
:

2935 
OP_AND_INT_2ADDR
:

2936 
OP_OR_INT_2ADDR
:

2937 
OP_XOR_INT_2ADDR
:

2938 
OP_DIV_INT_2ADDR
:

2939 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

2941 
OP_ADD_LONG_2ADDR
:

2942 
OP_SUB_LONG_2ADDR
:

2943 
OP_MUL_LONG_2ADDR
:

2944 
OP_DIV_LONG_2ADDR
:

2945 
OP_REM_LONG_2ADDR
:

2946 
OP_AND_LONG_2ADDR
:

2947 
OP_OR_LONG_2ADDR
:

2948 
OP_XOR_LONG_2ADDR
:

2949 
OP_SHL_LONG_2ADDR
:

2950 
OP_SHR_LONG_2ADDR
:

2951 
OP_USHR_LONG_2ADDR
:

2952 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³LÚgLo
);

2954 
OP_ADD_FLOAT_2ADDR
:

2955 
OP_SUB_FLOAT_2ADDR
:

2956 
OP_MUL_FLOAT_2ADDR
:

2957 
OP_DIV_FLOAT_2ADDR
:

2958 
OP_REM_FLOAT_2ADDR
:

2959 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³Flßt
);

2961 
OP_ADD_DOUBLE_2ADDR
:

2962 
OP_SUB_DOUBLE_2ADDR
:

2963 
OP_MUL_DOUBLE_2ADDR
:

2964 
OP_DIV_DOUBLE_2ADDR
:

2965 
OP_REM_DOUBLE_2ADDR
:

2966 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³DoubËLo
);

2968 
OP_ADD_INT_LIT16
:

2969 
OP_RSUB_INT
:

2970 
OP_MUL_INT_LIT16
:

2971 
OP_DIV_INT_LIT16
:

2972 
OP_REM_INT_LIT16
:

2973 
OP_AND_INT_LIT16
:

2974 
OP_OR_INT_LIT16
:

2975 
OP_XOR_INT_LIT16
:

2976 
OP_ADD_INT_LIT8
:

2977 
OP_RSUB_INT_LIT8
:

2978 
OP_MUL_INT_LIT8
:

2979 
OP_DIV_INT_LIT8
:

2980 
OP_REM_INT_LIT8
:

2981 
OP_SHL_INT_LIT8
:

2982 
OP_SHR_INT_LIT8
:

2983 
OP_USHR_INT_LIT8
:

2984 
OP_AND_INT_LIT8
:

2985 
OP_OR_INT_LIT8
:

2986 
OP_XOR_INT_LIT8
:

2987 
	`£tRegi¡”Ty³
(
wÜkRegs
, 
decIn¢
.
vA
, 
kRegTy³IÁeg”
);

3001 
OP_EXECUTE_INLINE
:

3002 
OP_INVOKE_DIRECT_EMPTY
:

3003 
OP_IGET_QUICK
:

3004 
OP_IGET_WIDE_QUICK
:

3005 
OP_IGET_OBJECT_QUICK
:

3006 
OP_IPUT_QUICK
:

3007 
OP_IPUT_WIDE_QUICK
:

3008 
OP_IPUT_OBJECT_QUICK
:

3009 
OP_INVOKE_VIRTUAL_QUICK
:

3010 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

3011 
OP_INVOKE_SUPER_QUICK
:

3012 
OP_INVOKE_SUPER_QUICK_RANGE
:

3013 
	`dvmAbÜt
();

3018 
OP_UNUSED_3E
:

3019 
OP_UNUSED_3F
:

3020 
OP_UNUSED_40
:

3021 
OP_UNUSED_41
:

3022 
OP_UNUSED_42
:

3023 
OP_UNUSED_43
:

3024 
OP_UNUSED_73
:

3025 
OP_UNUSED_79
:

3026 
OP_UNUSED_7A
:

3027 
OP_UNUSED_E3
:

3028 
OP_UNUSED_E4
:

3029 
OP_UNUSED_E5
:

3030 
OP_UNUSED_E6
:

3031 
OP_UNUSED_E7
:

3032 
OP_UNUSED_E8
:

3033 
OP_UNUSED_E9
:

3034 
OP_UNUSED_EA
:

3035 
OP_UNUSED_EB
:

3036 
OP_UNUSED_EC
:

3037 
OP_UNUSED_ED
:

3038 
OP_UNUSED_EF
:

3039 
OP_UNUSED_F1
:

3040 
OP_UNUSED_FC
:

3041 
OP_UNUSED_FD
:

3042 
OP_UNUSED_FE
:

3043 
OP_UNUSED_FF
:

3044 
	`dvmAbÜt
();

3059 ià(!
ju¡S‘ResuÉ
) {

3060 
»g
 = 
	`RESULT_REGISTER
(
pS‹
->
š¢RegCouÁPlus
);

3061 
wÜkRegs
[
»g
] = wÜkRegs[»g+1] = 
kRegTy³Unknown
;

3067 ià((
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

3068 
š¢Width
 = 
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
š¢Idx
);

3076 ià(
	`g‘Regi¡”Lše
(
pS‹
, 
š¢Idx
+
š¢Width
è!ğ
NULL
) {

3077 
	`upd©eRegi¡”s
(
pS‹
, 
š¢Idx
+
š¢Width
, 
wÜkRegs
);

3080 ià(!
	`dvmIn¢IsVis™ed
(
š¢FÏgs
, 
š¢Idx
+
š¢Width
) ||

3081 
	`com·»Regi¡”s
(
wÜkRegs
, 
’ŒyRegs
,

3082 
pS‹
->
š¢RegCouÁPlus
) != 0)

3084 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
š¢Idx
+
š¢Width
, 
Œue
);

3092 ià((
ÃxtFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

3093 
boŞ
 
isCÚd™iÚ®
;

3095 
	`dvmG‘B¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
š¢Idx
, &
b¿nchT¬g‘
,

3096 &
isCÚd™iÚ®
);

3097 
	`as£¹
(
isCÚd™iÚ®
 || (
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) == 0);

3098 
	`as£¹
(!
isCÚd™iÚ®
 || (
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0);

3100 
	`upd©eRegi¡”s
(
pS‹
, 
š¢Idx
+
b¿nchT¬g‘
, 
wÜkRegs
);

3106 ià((
ÃxtFÏgs
 & 
kIn¡rCªSw™ch
) != 0) {

3107 
off£tToSw™ch
 = 
š¢s
[1] | (((
s4
)insns[2]) << 16);

3108 cÚ¡ 
u2
* 
sw™chIn¢s
 = 
š¢s
 + 
off£tToSw™ch
;

3109 
sw™chCouÁ
 = 
sw™chIn¢s
[1];

3110 
off£tToT¬g‘s
, 
rg
;

3112 ià((*
š¢s
 & 0xffè=ğ
OP_PACKED_SWITCH
) {

3114 
off£tToT¬g‘s
 = 4;

3117 
	`as£¹
((*
š¢s
 & 0xffè=ğ
OP_SPARSE_SWITCH
);

3118 
off£tToT¬g‘s
 = 2 + 2*
sw™chCouÁ
;

3122 
rg
 = 0;¬g < 
sw™chCouÁ
;arg++) {

3123 
off£t
, 
absOff£t
;

3126 
off£t
 = 
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2] |

3127 (((
s4
è
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2 +1]) << 16);

3128 
absOff£t
 = 
š¢Idx
 + 
off£t
;

3129 
	`as£¹
(
absOff£t
 >ğ0 &&‡bsOff£ˆ< 
pS‹
->
š¢sSize
);

3131 
	`upd©eRegi¡”s
(
pS‹
, 
absOff£t
, 
wÜkRegs
);

3140 ià((
ÃxtFÏgs
 & 
kIn¡rCªThrow
è!ğ0 && 
	`dvmIn¢IsInTry
(
š¢FÏgs
, 
š¢Idx
))

3142 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

3143 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

3144 
DexC©chI‹¿tÜ
 
™”©Ü
;

3146 ià(
	`dexFšdC©chHªdËr
(&
™”©Ü
, 
pCode
, 
š¢Idx
)) {

3147 
Œue
) {

3148 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

3149 ià(
hªdËr
 =ğ
NULL
)

3153 
	`upd©eRegi¡”s
(
pS‹
, 
hªdËr
->
add»ss
, 
’ŒyRegs
);

3164 ià((
ÃxtFÏgs
 & 
kIn¡rCªCÚtšue
) != 0) {

3165 *
pS¹Guess
 = 
š¢Idx
 + 
	`dvmIn¢G‘Width
(
š¢FÏgs
, insnIdx);

3166 } ià((
ÃxtFÏgs
 & 
kIn¡rCªB¿nch
) != 0) {

3168 *
pS¹Guess
 = 
š¢Idx
 + 
b¿nchT¬g‘
;

3171 
	`as£¹
(*
pS¹Guess
 >ğ0 && *pS¹Gues < 
pS‹
->
š¢sSize
 &&

3172 
	`dvmIn¢G‘Width
(
š¢FÏgs
, *
pS¹Guess
) != 0);

3174 
»suÉ
 = 
Œue
;

3176 
ba
:

3177  
»suÉ
;

3178 
	}
}

3186 
SRegTy³
 
	$m”geTy³s
(
SRegTy³
 
ty³1
, SRegTy³ 
ty³2
, 
boŞ
* 
pChªged
)

3188 
SRegTy³
 
»suÉ
;

3193 ià(
ty³1
 =ğ
ty³2
)

3194  
ty³1
;

3204 ià(
ty³1
 < 
kRegTy³MAX
) {

3205 ià(
ty³2
 < 
kRegTy³MAX
) {

3206 
»suÉ
 = 
gDvmM”geTab
[
ty³1
][
ty³2
];

3209 ià(
ty³1
 =ğ
kRegTy³Z”o
)

3210 
»suÉ
 = 
ty³2
;

3212 
»suÉ
 = 
kRegTy³CÚæiù
;

3215 ià(
ty³2
 < 
kRegTy³MAX
) {

3217 ià(
ty³2
 =ğ
kRegTy³Z”o
)

3218 
»suÉ
 = 
ty³1
;

3220 
»suÉ
 = 
kRegTy³CÚæiù
;

3223 
	`as£¹
(
ty³1
 =ğ
ty³2
);

3224 
»suÉ
 = 
ty³1
;

3228 ià(
»suÉ
 !ğ
ty³1
)

3229 *
pChªged
 = 
Œue
;

3230  
»suÉ
;

3231 
	}
}

3239 
	$upd©eRegi¡”s
(
WÜkS‹
* 
pS‹
, 
ÃxtIn¢
,

3240 cÚ¡ 
SRegTy³
* 
wÜkRegs
)

3242 cÚ¡ 
M‘hod
* 
m‘h
 = 
pS‹
->
m‘hod
;

3243 
In¢FÏgs
* 
š¢FÏgs
 = 
pS‹
->insnFlags;

3244 cÚ¡ 
š¢RegCouÁPlus
 = 
pS‹
->insnRegCountPlus;

3245 
SRegTy³
* 
rg‘Regs
 = 
	`g‘Regi¡”Lše
(
pS‹
, 
ÃxtIn¢
);

3247 ià(!
	`dvmIn¢IsVis™edOrChªged
(
š¢FÏgs
, 
ÃxtIn¢
)) {

3255 
	`LOGVV
("COPY iÁØ0x%04x\n", 
ÃxtIn¢
);

3256 
	`cİyRegi¡”s
(
rg‘Regs
, 
wÜkRegs
, 
š¢RegCouÁPlus
);

3257 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
ÃxtIn¢
, 
Œue
);

3260 
	`LOGVV
("MERGE iÁØ0x%04x\n", 
ÃxtIn¢
);

3261 
boŞ
 
chªged
 = 
çl£
;

3262 
i
;

3264 
i
 = 0; i < 
š¢RegCouÁPlus
; i++) {

3265 
rg‘Regs
[
i
] = 
	`m”geTy³s
Ñ¬g‘Regs[i], 
wÜkRegs
[i], &
chªged
);

3268 ià(
chªged
)

3269 
	`dvmIn¢S‘Chªged
(
š¢FÏgs
, 
ÃxtIn¢
, 
Œue
);

3271 
	}
}

	@analysis/RegisterMap.h

22 #iâdeà
_DALVIK_REGISTERMAP


23 
	#_DALVIK_REGISTERMAP


	)

25 
	~"ª®ysis/V”ifySubs.h
"

26 
	~"ª®ysis/CodeV”ify.h
"

31 
	eRegi¡”M­FÜm©
 {

32 
	mkRegM­FÜm©Unknown
 = 0,

33 
	mkRegM­FÜm©NÚe
,

34 
	mkRegM­FÜm©Com·ù8
,

35 
	mkRegM­FÜm©Com·ù16
,

36 
	mkRegM­FÜm©Difã»ÁŸl
,

38 
	mkRegM­FÜm©OnH—p
 = 0x80,

39 } 
	tRegi¡”M­FÜm©
;

53 
	sRegi¡”M­
 {

55 
u1
 
	mfÜm©
;

56 
u1
 
	m»gWidth
;

57 
u1
 
	mnumEÁr›s
[2];

60 
u1
 
	md©a
[1];

63 
boŞ
 
dvmRegi¡”M­S¹up
();

64 
dvmRegi¡”M­Shutdown
();

69 
INLINE
 
Regi¡”M­FÜm©
 
	$dvmRegi¡”M­G‘FÜm©
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

70  
pM­
->
fÜm©
 & ~(
kRegM­FÜm©OnH—p
);

71 
	}
}

76 
INLINE
 
	$dvmRegi¡”M­S‘FÜm©
(
Regi¡”M­
* 
pM­
, 
Regi¡”M­FÜm©
 
fÜm©
)

78 
pM­
->
fÜm©
 &ğ
kRegM­FÜm©OnH—p
;

79 
pM­
->
fÜm©
 |= format;

80 
	}
}

85 
INLINE
 
boŞ
 
	$dvmRegi¡”M­G‘OnH—p
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

86  (
pM­
->
fÜm©
 & 
kRegM­FÜm©OnH—p
) != 0;

87 
	}
}

92 
INLINE
 
u1
 
	$dvmRegi¡”M­G‘RegWidth
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

93  
pM­
->
»gWidth
;

94 
	}
}

99 
INLINE
 
	$dvmRegi¡”M­S‘RegWidth
(
Regi¡”M­
* 
pM­
, 
»gWidth
) {

100 
pM­
->
»gWidth
 =„egWidth;

101 
	}
}

106 
INLINE
 
	$dvmRegi¡”M­S‘OnH—p
(
Regi¡”M­
* 
pM­
, 
boŞ
 
v®
) {

107 ià(
v®
)

108 
pM­
->
fÜm©
 |ğ
kRegM­FÜm©OnH—p
;

110 
pM­
->
fÜm©
 &ğ~(
kRegM­FÜm©OnH—p
);

111 
	}
}

116 
INLINE
 
u2
 
	$dvmRegi¡”M­G‘NumEÁr›s
(cÚ¡ 
Regi¡”M­
* 
pM­
) {

117  
pM­
->
numEÁr›s
[0] | (pMap->numEntries[1] << 8);

118 
	}
}

123 
INLINE
 
	$dvmRegi¡”M­S‘NumEÁr›s
(
Regi¡”M­
* 
pM­
, 
u2
 
numEÁr›s
) {

124 
pM­
->
numEÁr›s
[0] = (
u1
)‚umEntries;

125 
pM­
->
numEÁr›s
[1] =‚umEntries >> 8;

126 
	}
}

137 cÚ¡ 
u1
* 
dvmRegi¡”M­G‘Lše
(cÚ¡ 
Regi¡”M­
* 
pM­
, 
addr
);

148 
INLINE
 
	$dvmR–—£Regi¡”M­Lše
(cÚ¡ 
Regi¡”M­
* 
pM­
, cÚ¡ 
u1
* 
d©a
)

149 {
	}
}

162 
	sRegi¡”M­M‘hodPoŞ
 {

163 
u2
 
	mm‘hodCouÁ
;

166 
u4
 
	mm‘hodD©a
[1];

167 } 
	tRegi¡”M­M‘hodPoŞ
;

180 
	sRegi¡”M­CÏssPoŞ
 {

181 
u4
 
	mnumCÏs£s
;

184 
u4
 
	mşassD©aOff£t
[1];

185 } 
	tRegi¡”M­CÏssPoŞ
;

193 cÚ¡ * 
dvmRegi¡”M­G‘CÏssD©a
(cÚ¡ 
DexFe
* 
pDexFe
, 
u4
 
şassIdx
,

194 
u4
* 
pNumM­s
);

203 cÚ¡ 
Regi¡”M­
* 
dvmRegi¡”M­G‘Next
(cÚ¡ ** 
pPŒ
);

212 
	sRegi¡”M­Bud”
 {

214 * 
	md©a
;

215 
size_t
 
	msize
;

218 
MemM­pšg
 
	mmemM­
;

219 } 
	tRegi¡”M­Bud”
;

224 
Regi¡”M­Bud”
* 
dvmG’”©eRegi¡”M­s
(
DvmDex
* 
pDvmDex
);

229 
dvmF»eRegi¡”M­Bud”
(
Regi¡”M­Bud”
* 
pBud”
);

243 
	sV”if›rD©a
 {

247 cÚ¡ 
M‘hod
* 
	mm‘hod
;

252 
	mš¢sSize
;

259 
	mš¢RegCouÁ
;

264 
In¢FÏgs
* 
	mš¢FÏgs
;

272 
RegTy³
** 
	maddrRegs
;

273 } 
	tV”if›rD©a
;

281 
Regi¡”M­
* 
dvmG’”©eRegi¡”M­V
(
V”if›rD©a
* 
vd©a
);

293 cÚ¡ 
Regi¡”M­
* 
dvmG‘Ex·ndedRegi¡”M­0
(
M‘hod
* 
m‘hod
);

294 
INLINE
 cÚ¡ 
Regi¡”M­
* 
	$dvmG‘Ex·ndedRegi¡”M­
(
M‘hod
* 
m‘hod
)

296 cÚ¡ 
Regi¡”M­
* 
curM­
 = 
m‘hod
->
»gi¡”M­
;

297 ià(
curM­
 =ğ
NULL
)

298  
NULL
;

299 
Regi¡”M­FÜm©
 
fÜm©
 = 
	`dvmRegi¡”M­G‘FÜm©
(
curM­
);

300 ià(
fÜm©
 =ğ
kRegM­FÜm©Com·ù8
 || fÜm© =ğ
kRegM­FÜm©Com·ù16
) {

301  
curM­
;

303  
	`dvmG‘Ex·ndedRegi¡”M­0
(
m‘hod
);

305 
	}
}

308 
dvmRegi¡”M­DumpSts
();

	@analysis/VerifySubs.c

20 
	~"D®vik.h
"

21 
	~"ª®ysis/CodeV”ify.h
"

22 
	~"libdex/DexC©ch.h
"

23 
	~"libdex/In¡rUts.h
"

37 
boŞ
 
	$dvmCompu‹CodeWidths
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

38 * 
pNewIn¡ªûCouÁ
)

40 cÚ¡ 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

41 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->insns;

42 
boŞ
 
»suÉ
 = 
çl£
;

43 
ÃwIn¡ªûCouÁ
 = 0;

44 
i
;

47 
i
 = 0; i < 
š¢CouÁ
; ) {

48 
width
;

55 ià(*
š¢s
 =ğ
kPackedSw™chSigÇtu»
) {

56 
width
 = 4 + 
š¢s
[1] * 2;

57 } ià(*
š¢s
 =ğ
kS·r£Sw™chSigÇtu»
) {

58 
width
 = 2 + 
š¢s
[1] * 4;

59 } ià(*
š¢s
 =ğ
kA¼ayD©aSigÇtu»
) {

60 
u4
 
size
 = 
š¢s
[2] | (((u4)insns[3]) << 16);

61 
width
 = 4 + (
š¢s
[1] * 
size
 + 1) / 2;

63 
š¡r
 = *
š¢s
 & 0xff;

64 
width
 = 
	`dexG‘In¡rWidthAbs
(
gDvm
.
š¡rWidth
, 
š¡r
);

65 ià(
width
 == 0) {

66 
	`LOG_VFY_METH
(
m‘h
,

67 "VFY: inv®id…o¡-İˆš¡ruùiÚ (0x%x)\n", 
š¡r
);

68 
	`LOGI
("### instr=%d width=%dable=%d\n",

69 
š¡r
, 
width
, 
	`dexG‘In¡rWidthAbs
(
gDvm
.
š¡rWidth
, instr));

70 
ba
;

72 ià(
width
 < 0 || width > 5) {

73 
	`LOGE
("VFY: biz¬» width v®u%d\n", 
width
);

74 
	`dvmAbÜt
();

77 ià(
š¡r
 =ğ
OP_NEW_INSTANCE
)

78 
ÃwIn¡ªûCouÁ
++;

81 ià(
width
 > 65535) {

82 
	`LOG_VFY_METH
(
m‘h
, "VFY: in§Ã width %d\n", 
width
);

83 
ba
;

86 
š¢FÏgs
[
i
] |ğ
width
;

87 
i
 +ğ
width
;

88 
š¢s
 +ğ
width
;

90 ià(
i
 !ğ(è
	`dvmG‘M‘hodIn¢sSize
(
m‘h
)) {

91 
	`LOG_VFY_METH
(
m‘h
, "VFY: code did‚otƒnd whereƒxpected (%d vs. %d)\n",

92 
i
, 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
));

93 
ba
;

96 
»suÉ
 = 
Œue
;

97 ià(
pNewIn¡ªûCouÁ
 !ğ
NULL
)

98 *
pNewIn¡ªûCouÁ
 = 
ÃwIn¡ªûCouÁ
;

100 
ba
:

101  
»suÉ
;

102 
	}
}

113 
boŞ
 
	$dvmS‘TryFÏgs
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
)

115 
u4
 
š¢sSize
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

116 
DexFe
* 
pDexFe
 = 
m‘h
->
şazz
->
pDvmDex
->pDexFile;

117 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

118 
u4
 
Œ›sSize
 = 
pCode
->triesSize;

119 cÚ¡ 
DexTry
* 
pTr›s
;

120 
u4
 
hªdËrsSize
;

121 
u4
 
off£t
;

122 
u4
 
i
;

124 ià(
Œ›sSize
 == 0) {

125  
Œue
;

128 
pTr›s
 = 
	`dexG‘Tr›s
(
pCode
);

129 
hªdËrsSize
 = 
	`dexG‘HªdËrsSize
(
pCode
);

131 
i
 = 0; i < 
Œ›sSize
; i++) {

132 cÚ¡ 
DexTry
* 
pTry
 = &
pTr›s
[
i
];

133 
u4
 
¡¬t
 = 
pTry
->
¡¬tAddr
;

134 
u4
 
’d
 = 
¡¬t
 + 
pTry
->
š¢CouÁ
;

135 
u4
 
addr
;

137 ià((
¡¬t
 >ğ
’d
è|| (¡¬ˆ>ğ
š¢sSize
) || (end > insnsSize)) {

138 
	`LOG_VFY_METH
(
m‘h
,

140 
¡¬t
, 
’d
, 
š¢sSize
);

141  
çl£
;

144 ià(
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
¡¬t
) == 0) {

145 
	`LOG_VFY_METH
(
m‘h
,

147 
¡¬t
);

148  
çl£
;

151 
addr
 = 
¡¬t
;‡dd¸< 
’d
;

152 
addr
 +ğ
	`dvmIn¢G‘Width
(
š¢FÏgs
,‡ddr))

154 
	`as£¹
(
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
addr
) != 0);

155 
	`dvmIn¢S‘InTry
(
š¢FÏgs
, 
addr
, 
Œue
);

160 
off£t
 = 
	`dexG‘Fœ¡HªdËrOff£t
(
pCode
);

161 
i
 = 0; i < 
hªdËrsSize
; i++) {

162 
DexC©chI‹¿tÜ
 
™”©Ü
;

163 
	`dexC©chI‹¿tÜIn™
(&
™”©Ü
, 
pCode
, 
off£t
);

166 
DexC©chHªdËr
* 
hªdËr
 = 
	`dexC©chI‹¿tÜNext
(&
™”©Ü
);

167 
u4
 
addr
;

169 ià(
hªdËr
 =ğ
NULL
) {

173 
addr
 = 
hªdËr
->
add»ss
;

174 ià(
	`dvmIn¢G‘Width
(
š¢FÏgs
, 
addr
) == 0) {

175 
	`LOG_VFY_METH
(
m‘h
,

177 
addr
);

178  
çl£
;

181 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 
addr
, 
Œue
);

184 
off£t
 = 
	`dexC©chI‹¿tÜG‘EndOff£t
(&
™”©Ü
, 
pCode
);

187  
Œue
;

188 
	}
}

194 
boŞ
 
	$dvmCheckSw™chT¬g‘s
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

195 
curOff£t
)

197 cÚ¡ 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

198 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

199 cÚ¡ 
u2
* 
sw™chIn¢s
;

200 
u2
 
ex³ùedSigÇtu»
;

201 
sw™chCouÁ
, 
bËSize
;

202 
off£tToSw™ch
, 
off£tToKeys
, 
off£tToT¬g‘s
, 
rg
;

203 
off£t
, 
absOff£t
;

205 
	`as£¹
(
curOff£t
 >ğ0 && curOff£ˆ< 
š¢CouÁ
);

208 
off£tToSw™ch
 = (
s2
è
š¢s
[1];

209 ià(
curOff£t
 + 
off£tToSw™ch
 < 0 ||

210 
curOff£t
 + 
off£tToSw™ch
 + 2 >ğ
š¢CouÁ
)

212 
	`LOG_VFY_METH
(
m‘h
,

214 
curOff£t
, 
off£tToSw™ch
, 
š¢CouÁ
);

215  
çl£
;

219 
sw™chIn¢s
 = 
š¢s
 + 
off£tToSw™ch
;

222 ià((((
u4
è
sw™chIn¢s
) & 0x03) != 0) {

223 
	`LOG_VFY_METH
(
m‘h
,

225 
curOff£t
, 
off£tToSw™ch
);

226  
çl£
;

229 
sw™chCouÁ
 = 
sw™chIn¢s
[1];

231 ià((*
š¢s
 & 0xffè=ğ
OP_PACKED_SWITCH
) {

233 
off£tToT¬g‘s
 = 4;

234 
off£tToKeys
 = -1;

235 
ex³ùedSigÇtu»
 = 
kPackedSw™chSigÇtu»
;

238 
off£tToKeys
 = 2;

239 
off£tToT¬g‘s
 = 2 + 2*
sw™chCouÁ
;

240 
ex³ùedSigÇtu»
 = 
kS·r£Sw™chSigÇtu»
;

242 
bËSize
 = 
off£tToT¬g‘s
 + 
sw™chCouÁ
*2;

244 ià(
sw™chIn¢s
[0] !ğ
ex³ùedSigÇtu»
) {

245 
	`LOG_VFY_METH
(
m‘h
,

247 
sw™chIn¢s
[0], 
ex³ùedSigÇtu»
);

248  
çl£
;

252 ià(
curOff£t
 + 
off£tToSw™ch
 + 
bËSize
 > 
š¢CouÁ
) {

253 
	`LOG_VFY_METH
(
m‘h
,

255 
curOff£t
, 
off£tToSw™ch
, curOff£ˆ+ off£tToSw™ch + 
bËSize
,

256 
š¢CouÁ
);

257  
çl£
;

261 ià(
off£tToKeys
 > 0 && 
sw™chCouÁ
 > 1) {

262 
s4
 
Ï¡Key
;

264 
Ï¡Key
 = 
sw™chIn¢s
[
off£tToKeys
] |

265 (
sw™chIn¢s
[
off£tToKeys
+1] << 16);

266 
rg
 = 1;¬g < 
sw™chCouÁ
;arg++) {

267 
s4
 
key
 = (s4è
sw™chIn¢s
[
off£tToKeys
 + 
rg
*2] |

268 (
s4
è(
sw™chIn¢s
[
off£tToKeys
 + 
rg
*2 +1] << 16);

269 ià(
key
 <ğ
Ï¡Key
) {

270 
	`LOG_VFY_METH
(
m‘h
,

272 
Ï¡Key
, 
key
);

273  
çl£
;

276 
Ï¡Key
 = 
key
;

281 
rg
 = 0;¬g < 
sw™chCouÁ
;arg++) {

282 
off£t
 = (
s4
è
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2] |

283 (
s4
è(
sw™chIn¢s
[
off£tToT¬g‘s
 + 
rg
*2 +1] << 16);

284 
absOff£t
 = 
curOff£t
 + 
off£t
;

286 ià(
absOff£t
 < 0 ||‡bsOff£ˆ>ğ
š¢CouÁ
 ||

287 !
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
absOff£t
))

289 
	`LOG_VFY_METH
(
m‘h
,

291 
off£t
, 
absOff£t
, 
curOff£t
, 
rg
);

292  
çl£
;

294 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 
absOff£t
, 
Œue
);

297  
Œue
;

298 
	}
}

310 
boŞ
 
	$dvmCheckB¿nchT¬g‘
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

311 
curOff£t
, 
boŞ
 
£lfOkay
)

313 cÚ¡ 
š¢CouÁ
 = 
	`dvmG‘M‘hodIn¢sSize
(
m‘h
);

314 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

315 
off£t
, 
absOff£t
;

316 
boŞ
 
isCÚd™iÚ®
;

318 ià(!
	`dvmG‘B¿nchT¬g‘
(
m‘h
, 
š¢FÏgs
, 
curOff£t
, &
off£t
,

319 &
isCÚd™iÚ®
))

320  
çl£
;

322 ià(!
£lfOkay
 && 
off£t
 == 0) {

323 
	`LOG_VFY_METH
(
m‘h
, "VFY: branch offset of zero‚ot‡llowed‡t 0x%x\n",

324 
curOff£t
);

325  
çl£
;

333 ià(((
s8
è
curOff£t
 + (s8è
off£t
) != (s8)(curOffset + offset)) {

334 
	`LOG_VFY_METH
(
m‘h
, "VFY: brancharget overflow 0x%x +%d\n",

335 
curOff£t
, 
off£t
);

336  
çl£
;

338 
absOff£t
 = 
curOff£t
 + 
off£t
;

339 ià(
absOff£t
 < 0 ||‡bsOff£ˆ>ğ
š¢CouÁ
 ||

340 !
	`dvmIn¢IsOpcode
(
š¢FÏgs
, 
absOff£t
))

342 
	`LOG_VFY_METH
(
m‘h
,

344 
off£t
, 
absOff£t
, 
curOff£t
);

345  
çl£
;

347 
	`dvmIn¢S‘B¿nchT¬g‘
(
š¢FÏgs
, 
absOff£t
, 
Œue
);

349  
Œue
;

350 
	}
}

358 
	$dvmLogV”ifyFau»
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ * 
fÜm©
, ...)

360 
va_li¡
 
­
;

361 
logLev–
;

363 ià(
gDvm
.
İtimizšg
) {

367 
logLev–
 = 
ANDROID_LOG_WARN
;

370 
	`va_¡¬t
(
­
, 
fÜm©
);

371 
	`LOG_PRI_VA
(
logLev–
, 
LOG_TAG
, 
fÜm©
, 
­
);

372 ià(
m‘h
 !ğ
NULL
) {

373 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

374 
	`LOG_PRI
(
logLev–
, 
LOG_TAG
, "VFY:„ejected %s.%s %s\n",

375 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
desc
);

376 
	`ä“
(
desc
);

378 
	}
}

387 
	$dvmLogUÇbËToResŞveCÏss
(cÚ¡ * 
missšgCÏssDesü
,

388 cÚ¡ 
M‘hod
* 
m‘h
)

390 ià(
gDvm
.
İtimizšg
)

393 * 
dÙMissšgCÏss
 = 
	`dvmDesütÜToDÙ
(
missšgCÏssDesü
);

394 * 
dÙFromCÏss
 = 
	`dvmDesütÜToDÙ
(
m‘h
->
şazz
->
desütÜ
);

397 
	`LOGE
("Could‚ot find class '%s',„eferenced from method %s.%s\n",

398 
dÙMissšgCÏss
, 
dÙFromCÏss
, 
m‘h
->
Çme
 );

400 
	`ä“
(
dÙMissšgCÏss
);

401 
	`ä“
(
dÙFromCÏss
);

403 
	}
}

410 
boŞ
 
	$dvmG‘B¿nchT¬g‘
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

411 
curOff£t
, * 
pOff£t
, 
boŞ
* 
pCÚd™iÚ®
)

413 cÚ¡ 
u2
* 
š¢s
 = 
m‘h
->š¢ + 
curOff£t
;

414 
tmp
;

416 *
š¢s
 & 0xff) {

417 
OP_GOTO
:

418 *
pOff£t
 = ((
s2
è*
š¢s
) >> 8;

419 *
pCÚd™iÚ®
 = 
çl£
;

421 
OP_GOTO_32
:

422 *
pOff£t
 = 
š¢s
[1] | (((
u4
) insns[2]) << 16);

423 *
pCÚd™iÚ®
 = 
çl£
;

425 
OP_GOTO_16
:

426 *
pOff£t
 = (
s2
è
š¢s
[1];

427 *
pCÚd™iÚ®
 = 
çl£
;

429 
OP_IF_EQ
:

430 
OP_IF_NE
:

431 
OP_IF_LT
:

432 
OP_IF_GE
:

433 
OP_IF_GT
:

434 
OP_IF_LE
:

435 
OP_IF_EQZ
:

436 
OP_IF_NEZ
:

437 
OP_IF_LTZ
:

438 
OP_IF_GEZ
:

439 
OP_IF_GTZ
:

440 
OP_IF_LEZ
:

441 *
pOff£t
 = (
s2
è
š¢s
[1];

442 *
pCÚd™iÚ®
 = 
Œue
;

445  
çl£
;

449  
Œue
;

450 
	}
}

456 
	$dvmD‘”mšeC©1CÚ¡
(
s4
 
v®ue
)

458 ià(
v®ue
 < -32768)

459  
kRegTy³IÁeg”
;

460 ià(
v®ue
 < -128)

461  
kRegTy³ShÜt
;

462 ià(
v®ue
 < 0)

463  
kRegTy³By‹
;

464 ià(
v®ue
 == 0)

465  
kRegTy³Z”o
;

466 ià(
v®ue
 == 1)

467  
kRegTy³OÃ
;

468 ià(
v®ue
 < 128)

469  
kRegTy³PosBy‹
;

470 ià(
v®ue
 < 32768)

471  
kRegTy³PosShÜt
;

472 ià(
v®ue
 < 65536)

473  
kRegTy³Ch¬
;

475  
kRegTy³IÁeg”
;

476 
	}
}

	@analysis/VerifySubs.h

20 #iâdeà
_DALVIK_VERIFYSUBS


21 
	#_DALVIK_VERIFYSUBS


	)

31 
u4
 
	tIn¢FÏgs
;

33 
	#kIn¢FÏgWidthMask
 0x0000ffff

	)

34 
	#kIn¢FÏgInTry
 (1 << 16)

	)

35 
	#kIn¢FÏgB¿nchT¬g‘
 (1 << 17)

	)

36 
	#kIn¢FÏgGcPošt
 (1 << 18)

	)

37 
	#kIn¢FÏgVis™ed
 (1 << 30)

	)

38 
	#kIn¢FÏgChªged
 (1 << 31)

	)

41 
boŞ
 
dvmCompu‹CodeWidths
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

42 * 
pNewIn¡ªûCouÁ
);

45 
boŞ
 
dvmS‘TryFÏgs
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
);

48 
boŞ
 
dvmCheckSw™chT¬g‘s
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

49 
curOff£t
);

52 
boŞ
 
dvmCheckB¿nchT¬g‘
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

53 
curOff£t
, 
boŞ
 
£lfOkay
);

56 
	#LOG_VFY
(...è
	`dvmLogV”ifyFau»
(
NULL
, 
__VA_ARGS__
)

	)

57 
	#LOG_VFY_METH
(
_m‘h
, ...è
	`dvmLogV”ifyFau»
(_m‘h, 
__VA_ARGS__
)

	)

60 
	$dvmLogV”ifyFau»
(cÚ¡ 
M‘hod
* 
m‘h
, cÚ¡ * 
fÜm©
, ...)

61 #ià
	`defšed
(
__GNUC__
)

62 
	`__©Œibu‹__
 ((
	$fÜm©
(
´štf
, 2, 3)))

67 
	`dvmLogUÇbËToResŞveCÏss
(cÚ¡ * 
missšgCÏssDesü
,

68 cÚ¡ 
M‘hod
* 
m‘h
);

71 
boŞ
 
	`dvmG‘B¿nchT¬g‘
(cÚ¡ 
M‘hod
* 
m‘h
, 
In¢FÏgs
* 
š¢FÏgs
,

72 
curOff£t
, * 
pOff£t
, 
boŞ
* 
pCÚd™iÚ®
);

75 
	`dvmD‘”mšeC©1CÚ¡
(
s4
 
v®ue
);

	@arch/arm/HintsEABI.c

21 
	~"D®vik.h
"

22 
	~"libdex/DexCÏss.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<sys/¡©.h
>

57 
u4
 
	$dvmPÏtfÜmInvokeHšts
(cÚ¡ 
DexPrÙo
* 
´Ùo
)

59 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

60 
·dFÏgs
, 
jniHšts
;

61 
sigBy‹
;

62 
¡ackOff£t
, 
·dMask
, 
hšts
;

64 
¡ackOff£t
 = 
·dFÏgs
 = 0;

65 
·dMask
 = 0x00000001;

68 
sig
++;

70 
Œue
) {

71 
sigBy‹
 = *(
sig
++);

73 ià(
sigBy‹
 == '\0')

76 ià(
sigBy‹
 == 'D' || sigByte == 'J') {

77 ià((
¡ackOff£t
 & 1) != 0) {

78 
·dFÏgs
 |ğ
·dMask
;

79 
¡ackOff£t
++;

80 
·dMask
 <<= 1;

82 
¡ackOff£t
 += 2;

83 
·dMask
 <<= 2;

85 
¡ackOff£t
++;

86 
·dMask
 <<= 1;

90 
jniHšts
 = 0;

92 ià(
¡ackOff£t
 > 
DALVIK_JNI_COUNT_SHIFT
) {

94 
jniHšts
 = 
DALVIK_JNI_NO_ARG_INFO
;

96 
	`as£¹
((
·dFÏgs
 & (0xfffffffà<< 
DALVIK_JNI_COUNT_SHIFT
)) == 0);

97 
¡ackOff£t
 -= 2;

98 ià(
¡ackOff£t
 < 0)

99 
¡ackOff£t
 = 0;

100 
jniHšts
 |ğ((
¡ackOff£t
+1è/ 2è<< 
DALVIK_JNI_COUNT_SHIFT
;

101 
jniHšts
 |ğ
·dFÏgs
;

104  
jniHšts
;

105 
	}
}

	@arch/generic/Call.c

22 
	~"D®vik.h
"

23 
	~"ffi.h
"

25 
	~<as£¹.h
>

30 
ffi_ty³
* 
	$g‘FfiTy³
(
sigTy³
)

32 
sigTy³
) {

33 'V':  &
ffi_ty³_void
;

34 'F':  &
ffi_ty³_æßt
;

35 'D':  &
ffi_ty³_doubË
;

36 'J':  &
ffi_ty³_sšt64
;

38 'L':  &
ffi_ty³_poš‹r
;

39 :  &
ffi_ty³_ušt32
;

41 
	}
}

60 
	$dvmPÏtfÜmInvoke
(* 
pEnv
, 
CÏssObjeù
* 
şazz
, 
¬gInfo
, 
¬gc
,

61 cÚ¡ 
u4
* 
¬gv
, cÚ¡ * 
shÜty
, * 
func
, 
JV®ue
* 
pR‘uº
)

63 cÚ¡ 
kMaxArgs
 = 
¬gc
+2;

64 
ffi_cif
 
cif
;

65 
ffi_ty³
* 
ty³s
[
kMaxArgs
];

66 * 
v®ues
[
kMaxArgs
];

67 
ffi_ty³
* 
»tTy³
;

68 cÚ¡ * 
sig
;

69 
sigBy‹
;

70 
¤cArg
, 
d¡Arg
;

72 
ty³s
[0] = &
ffi_ty³_poš‹r
;

73 
v®ues
[0] = &
pEnv
;

75 
ty³s
[1] = &
ffi_ty³_poš‹r
;

76 ià(
şazz
 !ğ
NULL
) {

77 
v®ues
[1] = &
şazz
;

78 
¤cArg
 = 0;

80 
v®ues
[1] = (*è
¬gv
++;

81 
¤cArg
 = 1;

83 
d¡Arg
 = 2;

89 
»tTy³
 = 
	`g‘FfiTy³
(*
shÜty
);

90 (
sigBy‹
 = *++
shÜty
) != '\0') {

91 
ty³s
[
d¡Arg
] = 
	`g‘FfiTy³
(
sigBy‹
);

92 
v®ues
[
d¡Arg
++] = (*è
¬gv
++;

93 ià(
sigBy‹
 == 'D' || sigByte == 'J')

94 
¬gv
++;

100 ià(
	`ffi_´•_cif
(&
cif
, 
FFI_DEFAULT_ABI
, 
d¡Arg
, 
»tTy³
, 
ty³s
è!ğ
FFI_OK
) {

101 
	`LOGE
("ffi_prep_cif failed\n");

102 
	`dvmAbÜt
();

105 
	`ffi_ÿÎ
(&
cif
, 
	`FFI_FN
(
func
), 
pR‘uº
, 
v®ues
);

106 
	}
}

	@arch/generic/Hints.c

21 
	~"D®vik.h
"

22 
	~"libdex/DexCÏss.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<sys/¡©.h
>

52 
u4
 
	$dvmPÏtfÜmInvokeHšts
ĞcÚ¡ 
DexPrÙo
* 
´Ùo
)

55  
DALVIK_JNI_NO_ARG_INFO
;

56 
	}
}

	@arch/x86/Hints386ABI.c

21 
	~"D®vik.h
"

22 
	~"libdex/DexCÏss.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ddef.h
>

26 
	~<sys/¡©.h
>

61 
u4
 
	$dvmPÏtfÜmInvokeHšts
ĞcÚ¡ 
DexPrÙo
* 
´Ùo
)

63 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

64 
jniHšts
, 
wÜdCouÁ
;

65 
sigBy‹
;

67 
wÜdCouÁ
 = 0;

68 
Œue
) {

69 
sigBy‹
 = *(
sig
++);

71 ià(
sigBy‹
 == '\0')

74 
wÜdCouÁ
++;

76 ià(
sigBy‹
 == 'D' || sigByte == 'J') {

77 
wÜdCouÁ
++;

81 ià(
wÜdCouÁ
 > 0xFFFF) {

83 
jniHšts
 = 
DALVIK_JNI_NO_ARG_INFO
;

85 
jniHšts
 = 
wÜdCouÁ
;

88  
jniHšts
;

89 
	}
}

	@compiler/Compiler.c

17 
	~<sys/mmª.h
>

18 
	~<”ºo.h
>

20 
	~"D®vik.h
"

21 
	~"š‹½/J™.h
"

22 
	~"Comp”IÁ”Çls.h
"

25 
šlše
 
boŞ
 
	$wÜkQueueL’gth
()

27  
gDvmJ™
.
comp”QueueL’gth
;

28 
	}
}

30 
Comp”WÜkOrd”
 
	$wÜkDequeue
()

32 
	`as£¹
(
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkDequeueIndex
].
kšd


33 !ğ
kWÜkOrd”Inv®id
);

34 
Comp”WÜkOrd”
 
wÜk
 =

35 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkDequeueIndex
];

36 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkDequeueIndex
++].
kšd
 =

37 
kWÜkOrd”Inv®id
;

38 ià(
gDvmJ™
.
comp”WÜkDequeueIndex
 =ğ
COMPILER_WORK_QUEUE_SIZE
) {

39 
gDvmJ™
.
comp”WÜkDequeueIndex
 = 0;

41 
gDvmJ™
.
comp”QueueL’gth
--;

44 ià(
gDvmJ™
.
comp”QueueL’gth
 > gDvmJ™.
comp”MaxQueued
)

45 
gDvmJ™
.
comp”MaxQueued
 = gDvmJ™.
comp”QueueL’gth
;

47  
wÜk
;

48 
	}
}

50 
boŞ
 
	$dvmComp”WÜkEnqueue
(cÚ¡ 
u2
 *
pc
, 
WÜkOrd”Kšd
 
kšd
, * 
šfo
)

52 
cc
;

53 
i
;

54 
numWÜk
;

56 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

59 ià(
gDvmJ™
.
comp”QueueL’gth
 =ğ
COMPILER_WORK_QUEUE_SIZE
 ||

60 
gDvmJ™
.
codeCacheFuÎ
 =ğ
Œue
) {

61 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

62  
çl£
;

65 
numWÜk
 = 
gDvmJ™
.
comp”QueueL’gth
,

66 
i
 = 
gDvmJ™
.
comp”WÜkDequeueIndex
;

67 
numWÜk
 > 0;

68 
numWÜk
--) {

70 ià(
gDvmJ™
.
comp”WÜkQueue
[
i
++].
pc
 ==…c)

71 
dÚe
;

73 ià(
i
 =ğ
COMPILER_WORK_QUEUE_SIZE
)

74 
i
 = 0;

77 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkEnqueueIndex
].
pc
 =…c;

78 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkEnqueueIndex
].
kšd
 = kind;

79 
gDvmJ™
.
comp”WÜkQueue
[gDvmJ™.
comp”WÜkEnqueueIndex
].
šfo
 = info;

80 
gDvmJ™
.
comp”WÜkEnqueueIndex
++;

81 ià(
gDvmJ™
.
comp”WÜkEnqueueIndex
 =ğ
COMPILER_WORK_QUEUE_SIZE
)

82 
gDvmJ™
.
comp”WÜkEnqueueIndex
 = 0;

83 
gDvmJ™
.
comp”QueueL’gth
++;

84 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueAùiv™y
);

85 
	`as£¹
(
cc
 == 0);

87 
dÚe
:

88 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

89  
Œue
;

90 
	}
}

93 
	$dvmComp”D¿šQueue
()

95 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

96 
	`wÜkQueueL’gth
(è!ğ0 && !
gDvmJ™
.
h®tComp”Th»ad
) {

97 
	`±h»ad_cÚd_wa™
(&
gDvmJ™
.
comp”QueueEm±y
, &gDvmJ™.
comp”Lock
);

99 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

100 
	}
}

102 *
	$comp”Th»adS¹
(*
¬g
)

104 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

110 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

111 !
gDvmJ™
.
h®tComp”Th»ad
) {

112 ià(
	`wÜkQueueL’gth
() == 0) {

113 
cc
;

114 
cc
 = 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueEm±y
);

115 
	`as£¹
(
cc
 == 0);

116 
	`±h»ad_cÚd_wa™
(&
gDvmJ™
.
comp”QueueAùiv™y
,

117 &
gDvmJ™
.
comp”Lock
);

121 
Comp”WÜkOrd”
 
wÜk
 = 
	`wÜkDequeue
();

122 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

124 
	`dvmCheckSu¥’dP’dšg
(
NULL
);

126 ià(
gDvmJ™
.
j™TabËEÁr›sU£d
 >

127 (
gDvmJ™
.
j™TabËSize
 - gDvmJit.jitTableSize/4)) {

128 
	`dvmJ™ResizeJ™TabË
(
gDvmJ™
.
j™TabËSize
 * 2);

130 ià(
gDvmJ™
.
h®tComp”Th»ad
) {

131 
	`LOGD
("Compiler shutdown in…rogress - discarding„equest");

134 ià(
	`dvmComp”DoWÜk
(&
wÜk
)) {

135 
	`dvmJ™S‘CodeAddr
(
wÜk
.
pc
, wÜk.
»suÉ
.
codeAdd»ss
,

136 
wÜk
.
»suÉ
.
š¡ruùiÚS‘
);

139 
	`ä“
(
wÜk
.
šfo
);

140 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

141 } 
	`wÜkQueueL’gth
() != 0);

144 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueEm±y
);

145 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

147 
	`LOGD
("Compilerhread shutting down\n");

148  
NULL
;

149 
	}
}

151 
boŞ
 
	$dvmComp”S‘upCodeCache
()

153 
	`dvmComp”Tem¶©eS¹
();

154 
	`dmvComp”Tem¶©eEnd
();

157 
gDvmJ™
.
codeCache
 = 
	`mm­
(0, 
CODE_CACHE_SIZE
,

158 
PROT_READ
 | 
PROT_WRITE
 | 
PROT_EXEC
,

159 
MAP_PRIVATE
 | 
MAP_ANONYMOUS
, -1, 0);

160 ià(
gDvmJ™
.
codeCache
 =ğ
MAP_FAILED
) {

161 
	`LOGE
("FaedØü—‹hcodÿche: %s\n", 
	`¡»¼Ü
(
”ºo
));

162  
çl£
;

166 
‹m¶©eSize
 = (
šŒ_t
è
dmvComp”Tem¶©eEnd
 -

167 (
šŒ_t
è
dvmComp”Tem¶©eS¹
;

168 
	`memıy
((*è
gDvmJ™
.
codeCache
,

169 (*è
dvmComp”Tem¶©eS¹
,

170 
‹m¶©eSize
);

172 
gDvmJ™
.
‹m¶©eSize
 =emplateSize;

173 
gDvmJ™
.
codeCacheBy‹U£d
 = 
‹m¶©eSize
;

176 
	`ÿcheæush
((
šŒ_t
è
gDvmJ™
.
codeCache
,

177 (
šŒ_t
è
gDvmJ™
.
codeCache
 + 
CODE_CACHE_SIZE
, 0);

178  
Œue
;

179 
	}
}

181 
boŞ
 
	$dvmComp”S¹up
()

184 
	`as£¹
(
CHAINING_CELL_NORMAL
 == 0);

187 ià(!
	`dvmComp”ArchIn™
())

188 
ç
;

195 ià(
gDvmJ™
.
codeCache
 =ğ
NULL
) {

196 ià(!
	`dvmComp”S‘upCodeCache
())

197 
ç
;

201 ià(
	`dvmComp”H—pIn™
(è=ğ
çl£
) {

202 
ç
;

205 
	`dvmIn™Mu‹x
(&
gDvmJ™
.
comp”Lock
);

206 
	`±h»ad_cÚd_š™
(&
gDvmJ™
.
comp”QueueAùiv™y
, 
NULL
);

207 
	`±h»ad_cÚd_š™
(&
gDvmJ™
.
comp”QueueEm±y
, 
NULL
);

209 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

211 
gDvmJ™
.
h®tComp”Th»ad
 = 
çl£
;

214 
	`mem£t
(
gDvmJ™
.
comp”WÜkQueue
, 0,

215 (
Comp”WÜkOrd”
è* 
COMPILER_WORK_QUEUE_SIZE
);

216 
gDvmJ™
.
comp”WÜkEnqueueIndex
 = gDvmJ™.
comp”WÜkDequeueIndex
 = 0;

217 
gDvmJ™
.
comp”QueueL’gth
 = 0;

218 
gDvmJ™
.
comp”HighW©”
 =

219 
COMPILER_WORK_QUEUE_SIZE
 - (COMPILER_WORK_QUEUE_SIZE/4);

221 
	`as£¹
(
gDvmJ™
.
comp”HighW©”
 < 
COMPILER_WORK_QUEUE_SIZE
);

222 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
gDvmJ™
.
comp”HªdË
, "Compiler",

223 
comp”Th»adS¹
, 
NULL
)) {

224 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

225 
ç
;

229 
gDvmJ™
.
m‘hodStsTabË
 = 
	`dvmHashTabËC»©e
(32, 
NULL
);

231 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

233  
Œue
;

235 
ç
:

236  
çl£
;

237 
	}
}

239 
	$dvmComp”Shutdown
()

241 *
th»adR‘uº
;

243 ià(
gDvmJ™
.
comp”HªdË
) {

245 
gDvmJ™
.
h®tComp”Th»ad
 = 
Œue
;

247 
	`dvmLockMu‹x
(&
gDvmJ™
.
comp”Lock
);

248 
	`±h»ad_cÚd_sigÇl
(&
gDvmJ™
.
comp”QueueAùiv™y
);

249 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
comp”Lock
);

251 ià(
	`±h»ad_još
(
gDvmJ™
.
comp”HªdË
, &
th»adR‘uº
) != 0)

252 
	`LOGW
("Compilerhread join failed\n");

254 
	`LOGD
("Compilerhread has shut down\n");

256 
	}
}

	@compiler/Compiler.h

17 #iâdeà
_DALVIK_VM_COMPILER


18 
	#_DALVIK_VM_COMPILER


	)

20 
	#CODE_CACHE_SIZE
 1024*1024

	)

21 
	#MAX_JIT_RUN_LEN
 64

	)

22 
	#COMPILER_WORK_QUEUE_SIZE
 100

	)

24 
	#COMPILER_TRACED
(
X
)

	)

25 
	#COMPILER_TRACEE
(
X
)

	)

26 
	#COMPILER_TRACE_CHAINING
(
X
)

	)

28 
	eJ™In¡ruùiÚS‘Ty³
 {

29 
	mDALVIK_JIT_NONE
 = 0,

30 
	mDALVIK_JIT_ARM
,

31 
	mDALVIK_JIT_THUMB
,

32 
	mDALVIK_JIT_THUMB2
,

33 
	mDALVIK_JIT_THUMB2EE
,

34 
	mDALVIK_JIT_X86


35 } 
	tJ™In¡ruùiÚS‘Ty³
;

38 
	sJ™T¿n¦©iÚInfo
 {

39 *
	mcodeAdd»ss
;

40 
J™In¡ruùiÚS‘Ty³
 
	mš¡ruùiÚS‘
;

41 } 
	tJ™T¿n¦©iÚInfo
;

43 
	eWÜkOrd”Kšd
 {

44 
	mkWÜkOrd”Inv®id
 = 0,

45 
	mkWÜkOrd”M‘hod
 = 1,

46 
	mkWÜkOrd”T¿û
 = 2,

47 } 
	tWÜkOrd”Kšd
;

49 
	sComp”WÜkOrd”
 {

50 cÚ¡ 
u2
* 
	mpc
;

51 
WÜkOrd”Kšd
 
	mkšd
;

52 * 
	mšfo
;

53 
J™T¿n¦©iÚInfo
 
	m»suÉ
;

54 } 
	tComp”WÜkOrd”
;

56 
	eJ™S‹
 {

57 
	mkJ™Off
 = 0,

58 
	mkJ™NÜm®
 = 1,

59 
	mkJ™TS–eùReque¡
 = 2,

60 
	mkJ™TS–eù
 = 3,

61 
	mkJ™TS–eùAbÜt
 = 4,

62 
	mkJ™TS–eùEnd
 = 5,

63 
	mkJ™SšgËS‹p
 = 6,

64 
	mkJ™SšgËS‹pEnd
 = 7,

65 } 
	tJ™S‹
;

67 
	eJ™Hšt
 {

68 
	mkJ™HštNÚe
 = 0,

69 
	mkJ™HštTak’
 = 1,

70 
	mkJ™HštNÙTak’
 = 2,

71 
	mkJ™HštNoBŸs
 = 3,

72 } 
	tj™Hšt
;

81 
u2
 
	m¡¬tOff£t
;

82 
	mnumIn¡s
:8;

83 
	mrunEnd
:1;

84 
j™Hšt
 
	mhšt
:7;

85 } 
	tJ™CodeDesc
;

88 
J™CodeDesc
 
	mäag
;

89 * 
	mhšt
;

90 } 
	tJ™T¿ûRun
;

99 cÚ¡ 
M‘hod
* 
	mm‘hod
;

100 
J™T¿ûRun
 
	mŒaû
[];

101 } 
	tJ™T¿ûDesütiÚ
;

103 
	sComp”M‘hodSts
 {

104 cÚ¡ 
M‘hod
 *
	mm‘hod
;

105 
	md®vikSize
;

106 
	mcompedD®vikSize
;

107 
	mÇtiveSize
;

108 } 
	tComp”M‘hodSts
;

110 
boŞ
 
dvmComp”S‘upCodeCache
();

111 
boŞ
 
dvmComp”ArchIn™
();

112 
dvmComp”ArchDump
();

113 
boŞ
 
dvmComp”S¹up
();

114 
dvmComp”Shutdown
();

115 
boŞ
 
dvmComp”WÜkEnqueue
(cÚ¡ 
u2
* 
pc
, 
WÜkOrd”Kšd
 
kšd
, * 
šfo
);

116 *
dvmCheckCodeCache
(*
m‘hod
);

117 
boŞ
 
dvmCompeM‘hod
(cÚ¡ 
M‘hod
 *
m‘hod
, 
J™T¿n¦©iÚInfo
 *
šfo
);

118 
boŞ
 
dvmCompeT¿û
(
J™T¿ûDesütiÚ
 *
Œaû
, 
numMaxIn¡s
,

119 
J™T¿n¦©iÚInfo
 *
šfo
);

120 
dvmComp”DumpSts
();

121 
dvmComp”D¿šQueue
();

122 
dvmJ™UnchašAÎ
();

123 
dvmComp”SÜtAndPrštT¿ûProfes
();

	@compiler/CompilerIR.h

17 
	~"codeg’/O±imiz”.h
"

19 #iâdeà
_DALVIK_VM_COMPILER_IR


20 
	#_DALVIK_VM_COMPILER_IR


	)

22 
	eBBTy³
 {

24 
	mCHAINING_CELL_NORMAL
 = 0,

25 
	mCHAINING_CELL_HOT
,

26 
	mCHAINING_CELL_INVOKE_SINGLETON
,

27 
	mCHAINING_CELL_INVOKE_PREDICTED
,

28 
	mCHAINING_CELL_LAST
,

29 
	mDALVIK_BYTECODE
,

30 
	mPC_RECONSTRUCTION
,

31 
	mEXCEPTION_HANDLING
,

32 } 
	tBBTy³
;

34 
	sChašC–lCouÁs
 {

36 
u1
 
	mcouÁ
[
CHAINING_CELL_LAST
];

37 
u4
 
	mdummyFÜAlignm’t
;

38 } 
	mu
;

39 } 
	tChašC–lCouÁs
;

41 
	sLIR
 {

42 
	moff£t
;

43 
LIR
 *
	mÃxt
;

44 
LIR
 *
	m´ev
;

45 
LIR
 *
	mrg‘
;

46 } 
	tLIR
;

48 
	sMIR
 {

49 
DecodedIn¡ruùiÚ
 
	md®vikIn¢
;

50 
	mwidth
;

51 
	moff£t
;

52 
MIR
 *
	m´ev
;

53 
MIR
 *
	mÃxt
;

54 } 
	tMIR
;

56 
	sBasicBlock
 {

57 
	mid
;

58 
	mvis™ed
;

59 
	m¡¬tOff£t
;

60 cÚ¡ 
M‘hod
 *
	mcÚššgM‘hod
;

61 
BBTy³
 
	mblockTy³
;

62 
boŞ
 
	mÃedF®lThroughB¿nch
;

63 
MIR
 *
	mfœ¡MIRIn¢
;

64 
MIR
 *
	mÏ¡MIRIn¢
;

65 
BasicBlock
 *
	mçÎThrough
;

66 
BasicBlock
 *
	mk’
;

67 
BasicBlock
 *
	mÃxt
;

68 } 
	tBasicBlock
;

70 
	sComp©iÚUn™
 {

71 
	mnumIn¡s
;

72 
	mnumBlocks
;

73 
BasicBlock
 **
	mblockLi¡
;

74 cÚ¡ 
M‘hod
 *
	mm‘hod
;

75 cÚ¡ 
J™T¿ûDesütiÚ
 *
	mŒaûDesc
;

76 
LIR
 *
	mfœ¡LIRIn¢
;

77 
LIR
 *
	mÏ¡LIRIn¢
;

78 
LIR
 *
	mwÜdLi¡
;

79 
LIR
 *
	mchašC–lOff£tLIR
;

80 
GrowabËLi¡
 
	mpcRecÚ¡ruùiÚLi¡
;

81 
	mh—d”Size
;

82 
	md©aOff£t
;

83 
	mtÙ®Size
;

84 *
	mcodeBufãr
;

85 *
	mba£Addr
;

86 
boŞ
 
	m´štMe
;

87 
boŞ
 
	m®lSšgËS‹p
;

88 
boŞ
 
	mh®veIn¡CouÁ
;

89 
boŞ
 
	mexecutiÚCouÁ
;

90 
	mnumChaššgC–ls
[
CHAINING_CELL_LAST
];

91 
LIR
 *
	mfœ¡ChaššgLIR
[
CHAINING_CELL_LAST
];

92 
Regi¡”ScÜebßrd
 
	m»gi¡”ScÜebßrd
;

93 
	mİtRound
;

94 
J™In¡ruùiÚS‘Ty³
 
	mš¡ruùiÚS‘
;

95 } 
	tComp©iÚUn™
;

97 
BasicBlock
 *
dvmComp”NewBB
(
BBTy³
 
blockTy³
);

99 
dvmComp”Aµ’dMIR
(
BasicBlock
 *
bb
, 
MIR
 *
mœ
);

101 
dvmComp”Aµ’dLIR
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
lœ
);

103 
dvmComp”In£¹LIRBefÜe
(
LIR
 *
cu¼’tLIR
, LIR *
ÃwLIR
);

106 
dvmComp”DumpComp©iÚUn™
(
Comp©iÚUn™
 *
cUn™
);

	@compiler/CompilerInternals.h

17 #iâdeà
_DALVIK_VM_COMPILER_INTERNAL


18 
	#_DALVIK_VM_COMPILER_INTERNAL


	)

20 
	~"D®vik.h
"

21 
	~"Comp”Ut™y.h
"

22 
	~"Comp”IR.h
"

23 
	~"codeg’/Comp”Codeg’.h
"

24 
	~"š‹½/J™.h
"

	@compiler/CompilerUtility.h

17 #iâdeà
_DALVIK_VM_COMPILER_UTILITY


18 
	#_DALVIK_VM_COMPILER_UTILITY


	)

20 
	#ARENA_DEFAULT_SIZE
 4096

	)

23 
boŞ
 
dvmComp”H—pIn™
();

25 
	sA»ÇMemBlock
 {

26 
size_t
 
	mby‹sAÎoÿ‹d
;

27 
A»ÇMemBlock
 *
	mÃxt
;

28 
	m±r
[0];

29 } 
	tA»ÇMemBlock
;

31 *
dvmComp”New
(
size_t
 
size
, 
boŞ
 
z”o
);

33 
dvmComp”A»ÇRe£t
();

35 
	sGrowabËLi¡
 {

36 
size_t
 
	mnumAÎoÿ‹d
;

37 
size_t
 
	mnumU£d
;

38 **
	m–emLi¡
;

39 } 
	tGrowabËLi¡
;

41 
dvmIn™GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, 
size_t
 
š™L’gth
);

42 
dvmIn£¹GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, *
–em
);

	@compiler/Frontend.c

17 
	~"D®vik.h
"

18 
	~"libdex/OpCode.h
"

19 
	~"dexdump/OpCodeNames.h
"

20 
	~"š‹½/J™.h
"

21 
	~"Comp”IÁ”Çls.h
"

26 
šlše
 
	$·r£In¢
(cÚ¡ 
u2
 *
codePŒ
, 
DecodedIn¡ruùiÚ
 *
decIn¢
,

27 
boŞ
 
´štMe
)

29 
u2
 
š¡r
 = *
codePŒ
;

30 
OpCode
 
İcode
 = 
š¡r
 & 0xff;

31 
š¢Width
;

34 ià(
İcode
 =ğ
OP_NOP
 && 
š¡r
 != 0) {

37 
š¢Width
 = 
gDvm
.
š¡rWidth
[
İcode
];

38 ià(
š¢Width
 < 0) {

39 
š¢Width
 = -insnWidth;

43 
	`dexDecodeIn¡ruùiÚ
(
gDvm
.
š¡rFÜm©
, 
codePŒ
, 
decIn¢
);

44 ià(
´štMe
) {

45 
	`LOGD
("%p: %#06x %s\n", 
codePŒ
, 
İcode
, 
	`g‘OpcodeName
(opcode));

47  
š¢Width
;

48 
	}
}

54 
šlše
 
boŞ
 
	$fšdBlockBound¬y
(cÚ¡ 
M‘hod
 *
ÿÎ”
, 
MIR
 *
š¢
,

55 
curOff£t
,

56 *
rg‘
, 
boŞ
 *
isInvoke
,

57 cÚ¡ 
M‘hod
 **
ÿÎ“
)

59 
š¢
->
d®vikIn¢
.
İCode
) {

61 
OP_RETURN_VOID
:

62 
OP_RETURN
:

63 
OP_RETURN_WIDE
:

64 
OP_RETURN_OBJECT
:

65 
OP_THROW
:

66 
OP_INVOKE_VIRTUAL
:

67 
OP_INVOKE_VIRTUAL_RANGE
:

68 
OP_INVOKE_INTERFACE
:

69 
OP_INVOKE_INTERFACE_RANGE
:

70 
OP_INVOKE_VIRTUAL_QUICK
:

71 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

72 *
isInvoke
 = 
Œue
;

74 
OP_INVOKE_SUPER
:

75 
OP_INVOKE_SUPER_RANGE
: {

76 
mIndex
 = 
ÿÎ”
->
şazz
->
pDvmDex
->

77 
pResM‘hods
[
š¢
->
d®vikIn¢
.
vB
]->
m‘hodIndex
;

78 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

79 
ÿÎ”
->
şazz
->
su³r
->
vbË
[
mIndex
];

81 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

82 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

84 *
isInvoke
 = 
Œue
;

85 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

88 
OP_INVOKE_STATIC
:

89 
OP_INVOKE_STATIC_RANGE
: {

90 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

91 
ÿÎ”
->
şazz
->
pDvmDex
->
pResM‘hods
[
š¢
->
d®vikIn¢
.
vB
];

93 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

94 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

96 *
isInvoke
 = 
Œue
;

97 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

100 
OP_INVOKE_SUPER_QUICK
:

101 
OP_INVOKE_SUPER_QUICK_RANGE
: {

102 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

103 
ÿÎ”
->
şazz
->
su³r
->
vbË
[
š¢
->
d®vikIn¢
.
vB
];

105 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

106 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

108 *
isInvoke
 = 
Œue
;

109 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

112 
OP_INVOKE_DIRECT
:

113 
OP_INVOKE_DIRECT_RANGE
: {

114 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

115 
ÿÎ”
->
şazz
->
pDvmDex
->
pResM‘hods
[
š¢
->
d®vikIn¢
.
vB
];

116 ià(
ÿÎ“M‘hod
 && !
	`dvmIsN©iveM‘hod
(calleeMethod)) {

117 *
rg‘
 = (è
ÿÎ“M‘hod
->
š¢s
;

119 *
isInvoke
 = 
Œue
;

120 *
ÿÎ“
 = 
ÿÎ“M‘hod
;

123 
OP_GOTO
:

124 
OP_GOTO_16
:

125 
OP_GOTO_32
:

126 *
rg‘
 = 
curOff£t
 + (è
š¢
->
d®vikIn¢
.
vA
;

129 
OP_IF_EQ
:

130 
OP_IF_NE
:

131 
OP_IF_LT
:

132 
OP_IF_GE
:

133 
OP_IF_GT
:

134 
OP_IF_LE
:

135 *
rg‘
 = 
curOff£t
 + (è
š¢
->
d®vikIn¢
.
vC
;

138 
OP_IF_EQZ
:

139 
OP_IF_NEZ
:

140 
OP_IF_LTZ
:

141 
OP_IF_GEZ
:

142 
OP_IF_GTZ
:

143 
OP_IF_LEZ
:

144 *
rg‘
 = 
curOff£t
 + (è
š¢
->
d®vikIn¢
.
vB
;

148  
çl£
;

149 }  
Œue
;

150 
	}
}

155 
šlše
 
boŞ
 
	$isUncÚd™iÚ®B¿nch
(
MIR
 *
š¢
)

157 
š¢
->
d®vikIn¢
.
İCode
) {

158 
OP_RETURN_VOID
:

159 
OP_RETURN
:

160 
OP_RETURN_WIDE
:

161 
OP_RETURN_OBJECT
:

162 
OP_GOTO
:

163 
OP_GOTO_16
:

164 
OP_GOTO_32
:

165  
Œue
;

167  
çl£
;

169 
	}
}

174 
	$com·»M‘hod
(cÚ¡ 
Comp”M‘hodSts
 *
m1
,

175 cÚ¡ 
Comp”M‘hodSts
 *
m2
)

177  (è
m1
->
m‘hod
 - (è
m2
->method;

178 
	}
}

185 
Comp”M‘hodSts
 *
	$ª®yzeM‘hodBody
(cÚ¡ 
M‘hod
 *
m‘hod
)

187 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

188 cÚ¡ 
u2
 *
codePŒ
 = 
dexCode
->
š¢s
;

189 cÚ¡ 
u2
 *
codeEnd
 = 
dexCode
->
š¢s
 + dexCode->
š¢sSize
;

190 
š¢Size
 = 0;

191 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
m‘hod
->
Çme
);

193 
Comp”M‘hodSts
 
dummyM‘hodEÁry
;

194 
Comp”M‘hodSts
 *
»®M‘hodEÁry
;

197 
dummyM‘hodEÁry
.
m‘hod
 = method;

198 
»®M‘hodEÁry
 = 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodStsTabË
, 
hashV®ue
,

199 &
dummyM‘hodEÁry
,

200 (
HashCom·»Func
è
com·»M‘hod
,

201 
çl£
);

204 ià(
»®M‘hodEÁry
 !ğ
NULL
) {

205  
»®M‘hodEÁry
;

211 
»®M‘hodEÁry
 =

212 (
Comp”M‘hodSts
 *è
	`ÿÎoc
(1, (CompilerMethodStats));

213 
»®M‘hodEÁry
->
m‘hod
 = method;

215 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodStsTabË
, 
hashV®ue
,

216 
»®M‘hodEÁry
,

217 (
HashCom·»Func
è
com·»M‘hod
,

218 
Œue
);

221 
codePŒ
 < 
codeEnd
) {

222 
DecodedIn¡ruùiÚ
 
d®vikIn¢
;

223 
width
 = 
	`·r£In¢
(
codePŒ
, &
d®vikIn¢
, 
çl£
);

226 ià(
width
 == 0)

229 
š¢Size
 +ğ
width
;

230 
codePŒ
 +ğ
width
;

233 
»®M‘hodEÁry
->
d®vikSize
 = 
š¢Size
 * 2;

234  
»®M‘hodEÁry
;

235 
	}
}

242 
boŞ
 
	$dvmCompeT¿û
(
J™T¿ûDesütiÚ
 *
desc
, 
numMaxIn¡s
,

243 
J™T¿n¦©iÚInfo
 *
šfo
)

245 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
desc
->
m‘hod
);

246 cÚ¡ 
J™T¿ûRun
* 
cu¼Run
 = &
desc
->
Œaû
[0];

247 
curOff£t
 = 
cu¼Run
->
äag
.
¡¬tOff£t
;

248 
numIn¡s
 = 
cu¼Run
->
äag
.numInsts;

249 cÚ¡ 
u2
 *
codePŒ
 = 
dexCode
->
š¢s
 + 
curOff£t
;

250 
ŒaûSize
 = 0;

251 cÚ¡ 
u2
 *
¡¬tCodePŒ
 = 
codePŒ
;

252 
BasicBlock
 *
¡¬tBB
, *
curBB
, *
Ï¡BB
;

253 
numBlocks
 = 0;

254 
comp©iÚId
;

255 
Comp©iÚUn™
 
cUn™
;

256 
Comp”M‘hodSts
 *
m‘hodSts
;

258 
comp©iÚId
++;

259 
	`mem£t
(&
cUn™
, 0, (
Comp©iÚUn™
));

262 
m‘hodSts
 = 
	`ª®yzeM‘hodBody
(
desc
->
m‘hod
);

264 
cUn™
.
»gi¡”ScÜebßrd
.
nuÎCheckedRegs
 =

265 
	`dvmAÎocB™VeùÜ
(
desc
->
m‘hod
->
»gi¡”sSize
, 
çl£
);

268 
cUn™
.
´štMe
 = 
gDvmJ™
.printMe;

271 
cUn™
.
executiÚCouÁ
 = 
gDvmJ™
.
´ofe
;

274 ià(
gDvmJ™
.
m‘hodTabË
) {

275 
Ën
 = 
	`¡¾’
(
desc
->
m‘hod
->
şazz
->
desütÜ
) +

276 
	`¡¾’
(
desc
->
m‘hod
->
Çme
) + 1;

277 *
fuÎSigÇtu»
 = 
	`dvmComp”New
(
Ën
, 
Œue
);

278 
	`¡rıy
(
fuÎSigÇtu»
, 
desc
->
m‘hod
->
şazz
->
desütÜ
);

279 
	`¡rÿt
(
fuÎSigÇtu»
, 
desc
->
m‘hod
->
Çme
);

281 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
fuÎSigÇtu»
);

289 
boŞ
 
m‘hodFound
 =

290 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

291 
fuÎSigÇtu»
, (
HashCom·»Func
è
¡rcmp
,

292 
çl£
) !=

293 
NULL
;

296 ià(
m‘hodFound
 =ğ
çl£
) {

297 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
desc
->
m‘hod
->
şazz
->
desütÜ
);

298 
m‘hodFound
 =

299 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

300 (*è
desc
->
m‘hod
->
şazz
->
desütÜ
,

301 (
HashCom·»Func
è
¡rcmp
, 
çl£
) !=

302 
NULL
;

304 ià(
m‘hodFound
 =ğ
çl£
) {

305 
hashV®ue
 = 
	`dvmCompu‹Utf8Hash
(
desc
->
m‘hod
->
Çme
);

306 
m‘hodFound
 =

307 
	`dvmHashTabËLookup
(
gDvmJ™
.
m‘hodTabË
, 
hashV®ue
,

308 (*è
desc
->
m‘hod
->
Çme
,

309 (
HashCom·»Func
è
¡rcmp
, 
çl£
) !=

310 
NULL
;

324 ià(
gDvmJ™
.
šşudeS–eùedM‘hod
 !ğ
m‘hodFound
) {

325 
cUn™
.
®lSšgËS‹p
 = 
Œue
;

330 ià(
gDvmJ™
.
šşudeS–eùedM‘hod
 =ğ
Œue
) {

331 
cUn™
.
´štMe
 = 
Œue
;

337 
Ï¡BB
 = 
¡¬tBB
 = 
curBB
 = 
	`dvmComp”NewBB
(
DALVIK_BYTECODE
);

338 
curBB
->
¡¬tOff£t
 = 
curOff£t
;

339 
curBB
->
id
 = 
numBlocks
++;

341 ià(
cUn™
.
´štMe
) {

342 
	`LOGD
("--------\nCompiler: Buildingrace for %s, offset 0x%x\n",

343 
desc
->
m‘hod
->
Çme
, 
curOff£t
);

351 
MIR
 *
š¢
;

352 
width
;

353 
š¢
 = 
	`dvmComp”New
((
MIR
),
çl£
);

354 
š¢
->
off£t
 = 
curOff£t
;

355 
width
 = 
	`·r£In¢
(
codePŒ
, &
š¢
->
d®vikIn¢
, 
cUn™
.
´štMe
);

358 
	`as£¹
(
width
);

359 
š¢
->
width
 = width;

360 
ŒaûSize
 +ğ
width
;

361 
	`dvmComp”Aµ’dMIR
(
curBB
, 
š¢
);

362 
cUn™
.
numIn¡s
++;

364 ià(
cUn™
.
numIn¡s
 >ğ
numMaxIn¡s
) {

367 ià(--
numIn¡s
 == 0) {

368 ià(
cu¼Run
->
äag
.
runEnd
) {

371 
curBB
 = 
	`dvmComp”NewBB
(
DALVIK_BYTECODE
);

372 
Ï¡BB
->
Ãxt
 = 
curBB
;

373 
Ï¡BB
 = 
curBB
;

374 
curBB
->
id
 = 
numBlocks
++;

375 
cu¼Run
++;

376 
curOff£t
 = 
cu¼Run
->
äag
.
¡¬tOff£t
;

377 
numIn¡s
 = 
cu¼Run
->
äag
.numInsts;

378 
curBB
->
¡¬tOff£t
 = 
curOff£t
;

379 
codePŒ
 = 
dexCode
->
š¢s
 + 
curOff£t
;

382 
curOff£t
 +ğ
width
;

383 
codePŒ
 +ğ
width
;

388 
m‘hodSts
->
compedD®vikSize
 +ğ
ŒaûSize
 * 2;

395 
curBB
 = 
¡¬tBB
; curBB; curBB = curBB->
Ãxt
) {

396 
MIR
 *
Ï¡In¢
 = 
curBB
->
Ï¡MIRIn¢
;

398 ià(
Ï¡In¢
 =ğ
NULL
) {

401 
curOff£t
 = 
Ï¡In¢
->
off£t
;

402 
rg‘Off£t
 = 
curOff£t
;

403 
çÎThroughOff£t
 = 
curOff£t
 + 
Ï¡In¢
->
width
;

404 
boŞ
 
isInvoke
 = 
çl£
;

405 cÚ¡ 
M‘hod
 *
ÿÎ“
 = 
NULL
;

407 
	`fšdBlockBound¬y
(
desc
->
m‘hod
, 
curBB
->
Ï¡MIRIn¢
, 
curOff£t
,

408 &
rg‘Off£t
, &
isInvoke
, &
ÿÎ“
);

411 
BasicBlock
 *
£¬chBB
;

414 
£¬chBB
 = 
curBB
->
Ãxt
; searchBB; searchBB = searchBB->next) {

415 ià(
rg‘Off£t
 =ğ
£¬chBB
->
¡¬tOff£t
) {

416 
curBB
->
k’
 = 
£¬chBB
;

418 ià(
çÎThroughOff£t
 =ğ
£¬chBB
->
¡¬tOff£t
) {

419 
curBB
->
çÎThrough
 = 
£¬chBB
;

423 
æags
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
,

424 
Ï¡In¢
->
d®vikIn¢
.
İCode
);

434 
curBB
->
ÃedF®lThroughB¿nch
 =

435 ((
æags
 & (
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 | 
kIn¡rCªR‘uº
 |

436 
kIn¡rInvoke
)) == 0) ||

437 (
Ï¡In¢
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_DIRECT_EMPTY
);

441 ià(
curBB
->
k’
 =ğ
NULL
 &&

442 (
isInvoke
 || (
rg‘Off£t
 !ğ
curOff£t
))) {

443 
BasicBlock
 *
ÃwBB
;

444 ià(
isInvoke
) {

446 ià(
ÿÎ“
) {

447 
ÃwBB
 = 
	`dvmComp”NewBB
(
CHAINING_CELL_INVOKE_SINGLETON
);

448 
ÃwBB
->
¡¬tOff£t
 = 0;

449 
ÃwBB
->
cÚššgM‘hod
 = 
ÿÎ“
;

452 
ÃwBB
 = 
	`dvmComp”NewBB
(
CHAINING_CELL_INVOKE_PREDICTED
);

453 
ÃwBB
->
¡¬tOff£t
 = 0;

457 
ÃwBB
 = 
	`dvmComp”NewBB
(
æags
 & 
kIn¡rUncÚd™iÚ®
 ?

458 
CHAINING_CELL_HOT
 :

459 
CHAINING_CELL_NORMAL
);

460 
ÃwBB
->
¡¬tOff£t
 = 
rg‘Off£t
;

462 
ÃwBB
->
id
 = 
numBlocks
++;

463 
curBB
->
k’
 = 
ÃwBB
;

464 
Ï¡BB
->
Ãxt
 = 
ÃwBB
;

465 
Ï¡BB
 = 
ÃwBB
;

469 ià(!
	`isUncÚd™iÚ®B¿nch
(
Ï¡In¢
è&& 
curBB
->
çÎThrough
 =ğ
NULL
) {

475 ià(
isInvoke
 || 
curBB
->
ÃedF®lThroughB¿nch
) {

476 
Ï¡BB
->
Ãxt
 = 
	`dvmComp”NewBB
(
CHAINING_CELL_HOT
);

478 
Ï¡BB
->
Ãxt
 = 
	`dvmComp”NewBB
(
CHAINING_CELL_NORMAL
);

480 
Ï¡BB
 =†a¡BB->
Ãxt
;

481 
Ï¡BB
->
id
 = 
numBlocks
++;

482 
Ï¡BB
->
¡¬tOff£t
 = 
çÎThroughOff£t
;

483 
curBB
->
çÎThrough
 = 
Ï¡BB
;

488 
Ï¡BB
->
Ãxt
 = 
	`dvmComp”NewBB
(
PC_RECONSTRUCTION
);

489 
Ï¡BB
 =†a¡BB->
Ãxt
;

490 
Ï¡BB
->
id
 = 
numBlocks
++;

493 
Ï¡BB
->
Ãxt
 = 
	`dvmComp”NewBB
(
EXCEPTION_HANDLING
);

494 
Ï¡BB
 =†a¡BB->
Ãxt
;

495 
Ï¡BB
->
id
 = 
numBlocks
++;

497 ià(
cUn™
.
´štMe
) {

498 
	`LOGD
("TRACEINFO (%d): 0x%08x %s%s 0x%x %d of %d, %d blocks",

499 
comp©iÚId
,

500 (
šŒ_t
è
desc
->
m‘hod
->
š¢s
,

501 
desc
->
m‘hod
->
şazz
->
desütÜ
,

502 
desc
->
m‘hod
->
Çme
,

503 
desc
->
Œaû
[0].
äag
.
¡¬tOff£t
,

504 
ŒaûSize
,

505 
dexCode
->
š¢sSize
,

506 
numBlocks
);

509 
BasicBlock
 **
blockLi¡
;

511 
cUn™
.
m‘hod
 = 
desc
->method;

512 
cUn™
.
ŒaûDesc
 = 
desc
;

513 
cUn™
.
numBlocks
 =‚umBlocks;

514 
	`dvmIn™GrowabËLi¡
(&
cUn™
.
pcRecÚ¡ruùiÚLi¡
, 8);

515 
blockLi¡
 = 
cUn™
.blockList =

516 
	`dvmComp”New
((
BasicBlock
 *è* 
numBlocks
, 
Œue
);

518 
i
;

520 
i
 = 0, 
curBB
 = 
¡¬tBB
; i < 
numBlocks
; i++) {

521 
blockLi¡
[
i
] = 
curBB
;

522 
curBB
 = curBB->
Ãxt
;

525 
	`as£¹
(
curBB
 =ğ
NULL
);

527 ià(
cUn™
.
´štMe
) {

528 
	`dvmComp”DumpComp©iÚUn™
(&
cUn™
);

532 
cUn™
.
š¡ruùiÚS‘
 = 
	`dvmComp”In¡ruùiÚS‘
(&cUnit);

535 
	`dvmComp”MIR2LIR
(&
cUn™
);

538 
	`dvmComp”As£mbËLIR
(&
cUn™
, 
šfo
);

540 ià(
cUn™
.
´štMe
) {

541 ià(
cUn™
.
h®veIn¡CouÁ
) {

542 
	`LOGD
("Assembler‡borted");

544 
	`dvmComp”Codeg’Dump
(&
cUn™
);

546 
	`LOGD
("End %s%s, %d Dalvik instructions",

547 
desc
->
m‘hod
->
şazz
->
desütÜ
, desc->m‘hod->
Çme
,

548 
cUn™
.
numIn¡s
);

552 
	`dvmComp”A»ÇRe£t
();

555 
	`dvmF»eB™VeùÜ
(
cUn™
.
»gi¡”ScÜebßrd
.
nuÎCheckedRegs
);

557 ià(!
cUn™
.
h®veIn¡CouÁ
) {

559 
m‘hodSts
->
ÇtiveSize
 +ğ
cUn™
.
tÙ®Size
;

560  
šfo
->
codeAdd»ss
 !ğ
NULL
;

564  
	`dvmCompeT¿û
(
desc
, 
cUn™
.
numIn¡s
 / 2, 
šfo
);

566 
	}
}

575 
boŞ
 
	$dvmCompeM‘hod
(cÚ¡ 
M‘hod
 *
m‘hod
, 
J™T¿n¦©iÚInfo
 *
šfo
)

577 cÚ¡ 
DexCode
 *
dexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

578 cÚ¡ 
u2
 *
codePŒ
 = 
dexCode
->
š¢s
;

579 cÚ¡ 
u2
 *
codeEnd
 = 
dexCode
->
š¢s
 + dexCode->
š¢sSize
;

580 
blockID
 = 0;

581 
curOff£t
 = 0;

583 
BasicBlock
 *
fœ¡Block
 = 
	`dvmComp”NewBB
(
DALVIK_BYTECODE
);

584 
fœ¡Block
->
id
 = 
blockID
++;

587 
B™VeùÜ
 *
bbS¹Addr
 = 
	`dvmAÎocB™VeùÜ
(
dexCode
->
š¢sSize
+1, 
çl£
);

588 
	`dvmS‘B™
(
bbS¹Addr
, 0);

594 
codePŒ
 < 
codeEnd
) {

595 
MIR
 *
š¢
 = 
	`dvmComp”New
((MIR), 
çl£
);

596 
š¢
->
off£t
 = 
curOff£t
;

597 
width
 = 
	`·r£In¢
(
codePŒ
, &
š¢
->
d®vikIn¢
, 
çl£
);

598 
boŞ
 
isInvoke
 = 
çl£
;

599 cÚ¡ 
M‘hod
 *
ÿÎ“
;

600 
š¢
->
width
 = width;

603 ià(
width
 == 0)

605 
	`dvmComp”Aµ’dMIR
(
fœ¡Block
, 
š¢
);

610 
rg‘
 = 
curOff£t
;

617 ià(
	`fšdBlockBound¬y
(
m‘hod
, 
š¢
, 
curOff£t
, &
rg‘
, &
isInvoke
,

618 &
ÿÎ“
)) {

619 
	`dvmS‘B™
(
bbS¹Addr
, 
curOff£t
 + 
width
);

620 ià(
rg‘
 !ğ
curOff£t
) {

621 
	`dvmS‘B™
(
bbS¹Addr
, 
rg‘
);

625 
codePŒ
 +ğ
width
;

627 
curOff£t
 +ğ
width
;

635 
numBlocks
 = 
	`dvmCouÁS‘B™s
(
bbS¹Addr
);

636 ià(
	`dvmIsB™S‘
(
bbS¹Addr
, 
dexCode
->
š¢sSize
)) {

637 
numBlocks
--;

640 
Comp©iÚUn™
 
cUn™
;

641 
BasicBlock
 **
blockLi¡
;

643 
	`mem£t
(&
cUn™
, 0, (
Comp©iÚUn™
));

644 
cUn™
.
m‘hod
 = method;

645 
blockLi¡
 = 
cUn™
.blockList =

646 
	`dvmComp”New
((
BasicBlock
 *è* 
numBlocks
, 
Œue
);

652 
blockLi¡
[0] = 
fœ¡Block
;

653 
cUn™
.
numBlocks
 = 1;

655 
i
;

656 
i
 = 0; i < 
numBlocks
; i++) {

657 
MIR
 *
š¢
;

658 
BasicBlock
 *
curBB
 = 
blockLi¡
[
i
];

659 
curOff£t
 = 
curBB
->
Ï¡MIRIn¢
->
off£t
;

661 
š¢
 = 
curBB
->
fœ¡MIRIn¢
->
Ãxt
; insn; insn = insn->next) {

663 ià(
	`dvmIsB™S‘
(
bbS¹Addr
, 
š¢
->
off£t
)) {

664 
j
;

665 
j
 = 0; j < 
cUn™
.
numBlocks
; j++) {

666 ià(
blockLi¡
[
j
]->
fœ¡MIRIn¢
->
off£t
 =ğ
š¢
->offset)

671 ià(
j
 =ğ
cUn™
.
numBlocks
) {

672 
BasicBlock
 *
ÃwBB
 = 
	`dvmComp”NewBB
(
DALVIK_BYTECODE
);

673 
ÃwBB
->
id
 = 
blockID
++;

674 
ÃwBB
->
fœ¡MIRIn¢
 = 
š¢
;

675 
ÃwBB
->
¡¬tOff£t
 = 
š¢
->
off£t
;

676 
ÃwBB
->
Ï¡MIRIn¢
 = 
curBB
->lastMIRInsn;

677 
curBB
->
Ï¡MIRIn¢
 = 
š¢
->
´ev
;

678 
š¢
->
´ev
->
Ãxt
 = 
NULL
;

679 
š¢
->
´ev
 = 
NULL
;

685 ià(!
	`isUncÚd™iÚ®B¿nch
(
curBB
->
Ï¡MIRIn¢
)) {

686 
curBB
->
çÎThrough
 = 
ÃwBB
;

690 
blockLi¡
[
cUn™
.
numBlocks
++] = 
ÃwBB
;

697 ià(
numBlocks
 !ğ
cUn™
.numBlocks) {

698 
	`LOGE
("Ex³ù %d v %d basiøblocks\n", 
numBlocks
, 
cUn™
.numBlocks);

699 
	`dvmAbÜt
();

702 
	`dvmF»eB™VeùÜ
(
bbS¹Addr
);

705 
i
 = 0; i < 
numBlocks
; i++) {

706 
BasicBlock
 *
curBB
 = 
blockLi¡
[
i
];

707 
MIR
 *
š¢
 = 
curBB
->
Ï¡MIRIn¢
;

708 
rg‘
 = 
š¢
->
off£t
;

709 
boŞ
 
isInvoke
;

710 cÚ¡ 
M‘hod
 *
ÿÎ“
;

712 
	`fšdBlockBound¬y
(
m‘hod
, 
š¢
, 
rg‘
, &rg‘, &
isInvoke
, &
ÿÎ“
);

715 ià(
rg‘
 !ğ
š¢
->
off£t
) {

716 
j
;

718 ià(
rg‘
 > 
š¢
->
off£t
) {

719 
j
 = 
i
 + 1;

722 
j
 = 0;

724 ; 
j
 < 
numBlocks
; j++) {

725 ià(
blockLi¡
[
j
]->
fœ¡MIRIn¢
->
off£t
 =ğ
rg‘
) {

726 
curBB
->
k’
 = 
blockLi¡
[
j
];

732 ià(
j
 =ğ
numBlocks
 && !
isInvoke
) {

733 
	`LOGE
("Target‚ot found for insn %x:ƒxpectarget %x\n",

734 
curBB
->
Ï¡MIRIn¢
->
off£t
, 
rg‘
);

735 
	`dvmAbÜt
();

741 
cUn™
.
š¡ruùiÚS‘
 = 
	`dvmComp”In¡ruùiÚS‘
(&cUnit);

743 
	`dvmComp”MIR2LIR
(&
cUn™
);

745 
	`dvmComp”As£mbËLIR
(&
cUn™
, 
šfo
);

747 
	`dvmComp”DumpComp©iÚUn™
(&
cUn™
);

749 
	`dvmComp”A»ÇRe£t
();

751  
šfo
->
codeAdd»ss
 !ğ
NULL
;

752 
	}
}

	@compiler/IntermediateRep.c

17 
	~"D®vik.h
"

18 
	~"Comp”IÁ”Çls.h
"

21 
BasicBlock
 *
	$dvmComp”NewBB
(
BBTy³
 
blockTy³
)

23 
BasicBlock
 *
bb
 = 
	`dvmComp”New
((BasicBlock), 
Œue
);

24 
bb
->
blockTy³
 = blockType;

25  
bb
;

26 
	}
}

29 
	$dvmComp”Aµ’dMIR
(
BasicBlock
 *
bb
, 
MIR
 *
mœ
)

31 ià(
bb
->
fœ¡MIRIn¢
 =ğ
NULL
) {

32 
	`as£¹
(
bb
->
fœ¡MIRIn¢
 =ğ
NULL
);

33 
bb
->
Ï¡MIRIn¢
 = bb->
fœ¡MIRIn¢
 = 
mœ
;

34 
mœ
->
´ev
 = mœ->
Ãxt
 = 
NULL
;

36 
bb
->
Ï¡MIRIn¢
->
Ãxt
 = 
mœ
;

37 
mœ
->
´ev
 = 
bb
->
Ï¡MIRIn¢
;

38 
mœ
->
Ãxt
 = 
NULL
;

39 
bb
->
Ï¡MIRIn¢
 = 
mœ
;

41 
	}
}

47 
	$dvmComp”Aµ’dLIR
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
lœ
)

49 ià(
cUn™
->
fœ¡LIRIn¢
 =ğ
NULL
) {

50 
	`as£¹
(
cUn™
->
Ï¡LIRIn¢
 =ğ
NULL
);

51 
cUn™
->
Ï¡LIRIn¢
 = cUn™->
fœ¡LIRIn¢
 = 
lœ
;

52 
lœ
->
´ev
 =†œ->
Ãxt
 = 
NULL
;

54 
cUn™
->
Ï¡LIRIn¢
->
Ãxt
 = 
lœ
;

55 
lœ
->
´ev
 = 
cUn™
->
Ï¡LIRIn¢
;

56 
lœ
->
Ãxt
 = 
NULL
;

57 
cUn™
->
Ï¡LIRIn¢
 = 
lœ
;

59 
	}
}

67 
	$dvmComp”In£¹LIRBefÜe
(
LIR
 *
cu¼’tLIR
, LIR *
ÃwLIR
)

69 ià(
cu¼’tLIR
->
´ev
 =ğ
NULL
)

70 
	`dvmAbÜt
();

71 
LIR
 *
´evLIR
 = 
cu¼’tLIR
->
´ev
;

73 
´evLIR
->
Ãxt
 = 
ÃwLIR
;

74 
ÃwLIR
->
´ev
 = 
´evLIR
;

75 
ÃwLIR
->
Ãxt
 = 
cu¼’tLIR
;

76 
cu¼’tLIR
->
´ev
 = 
ÃwLIR
;

77 
	}
}

	@compiler/Utility.c

17 
	~"D®vik.h
"

18 
	~"Comp”IÁ”Çls.h
"

20 
A»ÇMemBlock
 *
	g¬’aH—d
, *
	gcu¼’tA»Ç
;

21 
	gnumA»ÇBlocks
;

24 
boŞ
 
	$dvmComp”H—pIn™
()

26 
	`as£¹
(
¬’aH—d
 =ğ
NULL
);

27 
¬’aH—d
 =

28 (
A»ÇMemBlock
 *è
	`m®loc
((A»ÇMemBlockè+ 
ARENA_DEFAULT_SIZE
);

29 ià(
¬’aH—d
 =ğ
NULL
) {

30 
	`LOGE
("No memory†efto create compiler heap memory\n");

31  
çl£
;

33 
cu¼’tA»Ç
 = 
¬’aH—d
;

34 
cu¼’tA»Ç
->
by‹sAÎoÿ‹d
 = 0;

35 
cu¼’tA»Ç
->
Ãxt
 = 
NULL
;

36 
numA»ÇBlocks
 = 1;

38  
Œue
;

39 
	}
}

42 * 
	$dvmComp”New
(
size_t
 
size
, 
boŞ
 
z”o
)

44 
size
 = (size + 3) & ~3;

45 
»Œy
:

47 ià(
size
 + 
cu¼’tA»Ç
->
by‹sAÎoÿ‹d
 <ğ
ARENA_DEFAULT_SIZE
) {

48 *
±r
;

49 
±r
 = &
cu¼’tA»Ç
->±r[cu¼’tA»Ç->
by‹sAÎoÿ‹d
];

50 
cu¼’tA»Ç
->
by‹sAÎoÿ‹d
 +ğ
size
;

51 ià(
z”o
) {

52 
	`mem£t
(
±r
, 0, 
size
);

54  
±r
;

60 ià(
cu¼’tA»Ç
->
Ãxt
) {

61 
cu¼’tA»Ç
 = cu¼’tA»Ç->
Ãxt
;

62 
»Œy
;

69 ià(
size
 > 
ARENA_DEFAULT_SIZE
) {

70 
	`LOGE
("Requesting %d bytes whichƒxceedhe maximal size‡llowed\n",

71 
size
);

72  
NULL
;

75 
A»ÇMemBlock
 *
ÃwA»Ç
 = (ArenaMemBlock *)

76 
	`m®loc
((
A»ÇMemBlock
è+ 
ARENA_DEFAULT_SIZE
);

77 
ÃwA»Ç
->
by‹sAÎoÿ‹d
 = 0;

78 
ÃwA»Ç
->
Ãxt
 = 
NULL
;

79 
cu¼’tA»Ç
->
Ãxt
 = 
ÃwA»Ç
;

80 
cu¼’tA»Ç
 = 
ÃwA»Ç
;

81 
numA»ÇBlocks
++;

82 
	`LOGD
("TÙ®‡»Ç…age fÜ JIT: %d", 
numA»ÇBlocks
);

83 
»Œy
;

85  
NULL
;

86 
	}
}

89 
	$dvmComp”A»ÇRe£t
()

91 
A»ÇMemBlock
 *
block
;

93 
block
 = 
¬’aH—d
; block; block = block->
Ãxt
) {

94 
block
->
by‹sAÎoÿ‹d
 = 0;

96 
cu¼’tA»Ç
 = 
¬’aH—d
;

97 
	}
}

100 
	$dvmIn™GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, 
size_t
 
š™L’gth
)

102 
gLi¡
->
numAÎoÿ‹d
 = 
š™L’gth
;

103 
gLi¡
->
numU£d
 = 0;

104 
gLi¡
->
–emLi¡
 = (**è
	`dvmComp”New
((*è* 
š™L’gth
,

105 
Œue
);

106 
	}
}

109 
	$ex·ndGrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
)

111 
ÃwL’gth
 = 
gLi¡
->
numAÎoÿ‹d
;

112 ià(
ÃwL’gth
 < 128) {

113 
ÃwL’gth
 <<= 1;

115 
ÃwL’gth
 += 128;

117 *
ÃwA¼ay
 = 
	`dvmComp”New
((*è* 
ÃwL’gth
, 
Œue
);

118 
	`memıy
(
ÃwA¼ay
, 
gLi¡
->
–emLi¡
, (*è* gLi¡->
numAÎoÿ‹d
);

119 
gLi¡
->
numAÎoÿ‹d
 = 
ÃwL’gth
;

120 
gLi¡
->
–emLi¡
 = 
ÃwA¼ay
;

121 
	}
}

124 
	$dvmIn£¹GrowabËLi¡
(
GrowabËLi¡
 *
gLi¡
, *
–em
)

126 ià(
gLi¡
->
numU£d
 =ğgLi¡->
numAÎoÿ‹d
) {

127 
	`ex·ndGrowabËLi¡
(
gLi¡
);

129 
gLi¡
->
–emLi¡
[gLi¡->
numU£d
++] = 
–em
;

130 
	}
}

133 
	$dvmComp”DumpComp©iÚUn™
(
Comp©iÚUn™
 *
cUn™
)

135 
i
;

136 
BasicBlock
 *
bb
;

137 
	`LOGD
("%d block šÙ®\n", 
cUn™
->
numBlocks
);

139 
i
 = 0; i < 
cUn™
->
numBlocks
; i++) {

140 
bb
 = 
cUn™
->
blockLi¡
[
i
];

141 
	`LOGD
("Block %d (insn %04x - %04x%s)\n",

142 
bb
->
id
, bb->
¡¬tOff£t
,

143 
bb
->
Ï¡MIRIn¢
 ? bb->Ï¡MIRIn¢->
off£t
 : bb->
¡¬tOff£t
,

144 
bb
->
Ï¡MIRIn¢
 ? "" : "ƒmpty");

145 ià(
bb
->
k’
) {

146 
	`LOGD
(" Taken branch: block %d (%04x)\n",

147 
bb
->
k’
->
id
, bb->k’->
¡¬tOff£t
);

149 ià(
bb
->
çÎThrough
) {

150 
	`LOGD
(" Fallthrough : block %d (%04x)\n",

151 
bb
->
çÎThrough
->
id
, bb->çÎThrough->
¡¬tOff£t
);

154 
	}
}

159 
	$dumpM‘hodSts
(*
comp”M‘hodSts
, *
tÙ®M‘hodSts
)

161 
Comp”M‘hodSts
 *
m‘hodSts
 =

162 (
Comp”M‘hodSts
 *è
comp”M‘hodSts
;

163 
Comp”M‘hodSts
 *
tÙ®Sts
 =

164 (
Comp”M‘hodSts
 *è
tÙ®M‘hodSts
;

165 cÚ¡ 
M‘hod
 *
m‘hod
 = 
m‘hodSts
->method;

167 
tÙ®Sts
->
d®vikSize
 +ğ
m‘hodSts
->dalvikSize;

168 
tÙ®Sts
->
compedD®vikSize
 +ğ
m‘hodSts
->compiledDalvikSize;

169 
tÙ®Sts
->
ÇtiveSize
 +ğ
m‘hodSts
->nativeSize;

173 
lim™
 = (
m‘hodSts
->
d®vikSize
 >> 2) * 3;

176 ià(
m‘hodSts
->
compedD®vikSize
 >ğ
lim™
) {

177 
	`LOGD
("Method stats: %s%s, %d/%d (compiled/total Dalvik), %d (native)",

178 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

179 
m‘hodSts
->
compedD®vikSize
,

180 
m‘hodSts
->
d®vikSize
,

181 
m‘hodSts
->
ÇtiveSize
);

185 
	}
}

191 
	$dvmComp”DumpSts
()

193 
Comp”M‘hodSts
 
tÙ®M‘hodSts
;

195 
	`mem£t
(&
tÙ®M‘hodSts
, 0, (
Comp”M‘hodSts
));

196 
	`LOGD
("%d compilations using %d + %d bytes",

197 
gDvmJ™
.
numComp©iÚs
,

198 
gDvmJ™
.
‹m¶©eSize
,

199 
gDvmJ™
.
codeCacheBy‹U£d
 - gDvmJ™.
‹m¶©eSize
);

200 
	`LOGD
("Compiler‡rena uses %d blocks (%d bytesƒach)",

201 
numA»ÇBlocks
, 
ARENA_DEFAULT_SIZE
);

202 
	`LOGD
("Comp” wÜk queuËngth i %d/%d", 
gDvmJ™
.
comp”QueueL’gth
,

203 
gDvmJ™
.
comp”MaxQueued
);

204 
	`dvmJ™Sts
();

205 
	`dvmComp”ArchDump
();

206 
	`dvmHashFÜ—ch
(
gDvmJ™
.
m‘hodStsTabË
, 
dumpM‘hodSts
,

207 &
tÙ®M‘hodSts
);

208 
	`LOGD
("Code size stats: %d/%d (compiled/total Dalvik), %d (native)",

209 
tÙ®M‘hodSts
.
compedD®vikSize
,

210 
tÙ®M‘hodSts
.
d®vikSize
,

211 
tÙ®M‘hodSts
.
ÇtiveSize
);

212 
	}
}

	@compiler/codegen/CompilerCodegen.h

17 
	~"../Comp”IR.h
"

19 #iâdeà
_DALVIK_VM_COMPILERCODEGEN_H_


20 
	#_DALVIK_VM_COMPILERCODEGEN_H_


	)

23 
boŞ
 
dvmComp”DoWÜk
(
Comp”WÜkOrd”
 *
wÜk
);

26 
dvmComp”MIR2LIR
(
Comp©iÚUn™
 *
cUn™
);

29 
dvmComp”As£mbËLIR
(
Comp©iÚUn™
 *
cUn™
, 
J™T¿n¦©iÚInfo
 *
šfo
);

32 
dvmComp”Codeg’Dump
(
Comp©iÚUn™
 *
cUn™
);

35 * 
dvmJ™Chaš
(*
tgtAddr
, 
u4
* 
b¿nchAddr
);

36 
u4
* 
dvmJ™Unchaš
(*
codeAddr
);

37 
dvmJ™UnchašAÎ
();

40 
J™In¡ruùiÚS‘Ty³
 
dvmComp”In¡ruùiÚS‘
(
Comp©iÚUn™
 *
cUn™
);

	@compiler/codegen/Optimizer.h

17 
	~"D®vik.h
"

18 
	~"comp”/Comp”IÁ”Çls.h
"

20 #iâdeà
_DALVIK_VM_COMPILER_OPTIMIZATION_H


21 
	#_DALVIK_VM_COMPILER_OPTIMIZATION_H


	)

24 
	gComp©iÚUn™
;

25 
	gLIR
;

33 
	sRegi¡”ScÜebßrd
 {

34 
B™VeùÜ
 *
	mnuÎCheckedRegs
;

35 
	mliveD®vikReg
;

36 
	mÇtiveReg
;

37 
	mÇtiveRegHi
;

38 
boŞ
 
	misWide
;

39 } 
	tRegi¡”ScÜebßrd
;

41 
dvmComp”AµlyLoÿlO±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
,

42 
LIR
 *
h—d
,

43 
LIR
 *

);

45 
dvmComp”AµlyGlob®O±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
);

	@compiler/codegen/arm/ArchUtility.c

17 
	~"../../Comp”IÁ”Çls.h
"

18 
	~"dexdump/OpCodeNames.h
"

19 
	~"ArmLIR.h
"

22 * 
	$decodeRegLi¡
(
veùÜ
, *
buf
)

24 
i
;

25 
boŞ
 
´š‹d
 = 
çl£
;

26 
buf
[0] = 0;

27 
i
 = 0; i < 8; i++, 
veùÜ
 >>= 1) {

28 ià(
veùÜ
 & 0x1) {

29 ià(
´š‹d
) {

30 
	`¥rštf
(
buf
 + 
	`¡¾’
(buf), ",„%d", 
i
);

32 
´š‹d
 = 
Œue
;

33 
	`¥rštf
(
buf
, "r%d", 
i
);

37  
buf
;

38 
	}
}

40 
	$ex·ndImmedŸ‹
(
v®ue
)

42 
mode
 = (
v®ue
 & 0xf00) >> 8;

43 
u4
 
b™s
 = 
v®ue
 & 0xff;

44 
mode
) {

46  
b™s
;

48  (
b™s
 << 16) | bits;

50  (
b™s
 << 24) | (bits << 8);

52  (
b™s
 << 24) | (bits << 16) | (bits << 8) | bits;

56 
b™s
 = (bits | 0x80) << 24;

57  
b™s
 >> (((
v®ue
 & 0xf80) >> 7) - 8);

58 
	}
}

64 
	$budIn¢SŒšg
(*
fmt
, 
ArmLIR
 *
lœ
, * 
buf
,

65 *
ba£Addr
, 
size
)

67 
i
;

68 *
bufEnd
 = &
buf
[
size
-1];

69 *
fmtEnd
 = &
fmt
[
	`¡¾’
(fmt)];

70 
tbuf
[256];

71 
nc
;

72 
fmt
 < 
fmtEnd
) {

73 
İ”ªd
;

74 ià(*
fmt
 == '!') {

75 
fmt
++;

76 
	`as£¹
(
fmt
 < 
fmtEnd
);

77 
nc
 = *
fmt
++;

78 ià(
nc
=='!') {

79 
	`¡rıy
(
tbuf
, "!");

81 
	`as£¹
(
fmt
 < 
fmtEnd
);

82 
	`as£¹
(()(
nc
-'0') < 3);

83 
İ”ªd
 = 
lœ
->
İ”ªds
[
nc
-'0'];

84 *
fmt
++) {

86 
İ”ªd
 = 
	`ex·ndImmedŸ‹
(operand);

87 
	`¥rštf
(
tbuf
,"%d [0x%x]", 
İ”ªd
, operand);

90 
	`¥rštf
(
tbuf
,"s%d",
İ”ªd
 & 
FP_REG_MASK
);

93 
	`¥rštf
(
tbuf
,"d%d",(
İ”ªd
 & 
FP_REG_MASK
) >> 1);

96 
	`¥rštf
(
tbuf
,"%04x", 
İ”ªd
);

100 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
);

103 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
+8);

106 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
*4);

109 
	`¥rštf
(
tbuf
,"%d", 
İ”ªd
*2);

112 
İ”ªd
) {

113 
ARM_COND_EQ
:

114 
	`¡rıy
(
tbuf
, "beq");

116 
ARM_COND_NE
:

117 
	`¡rıy
(
tbuf
, "bne");

119 
ARM_COND_LT
:

120 
	`¡rıy
(
tbuf
, "blt");

122 
ARM_COND_GE
:

123 
	`¡rıy
(
tbuf
, "bge");

125 
ARM_COND_GT
:

126 
	`¡rıy
(
tbuf
, "bgt");

128 
ARM_COND_LE
:

129 
	`¡rıy
(
tbuf
, "ble");

131 
ARM_COND_CS
:

132 
	`¡rıy
(
tbuf
, "bcs");

134 
ARM_COND_MI
:

135 
	`¡rıy
(
tbuf
, "bmi");

138 
	`¡rıy
(
tbuf
, "");

143 
	`¥rštf
(
tbuf
,"0x%08x",

144 (è
ba£Addr
 + 
lœ
->
g’”ic
.
off£t
 + 4 +

145 (
İ”ªd
 << 1));

148 
off£t_1
 = 
lœ
->
İ”ªds
[0];

149 
off£t_2
 = 
	`NEXT_LIR
(
lœ
)->
İ”ªds
[0];

150 
šŒ_t
 
rg‘
 =

151 ((((
šŒ_t
è
ba£Addr
 + 
lœ
->
g’”ic
.
off£t
 + 4) &

152 ~3è+ (
off£t_1
 << 21 >> 9è+ (
off£t_2
 << 1)) &

154 
	`¥rštf
(
tbuf
, "%p", (*è
rg‘
);

160 
	`¡rıy
(
tbuf
, "see‡bove");

163 
	`decodeRegLi¡
(
İ”ªd
, 
tbuf
);

166 
	`¡rıy
(
tbuf
,"DecodeError");

169 ià(
buf
+
	`¡¾’
(
tbuf
è<ğ
bufEnd
) {

170 
	`¡rıy
(
buf
, 
tbuf
);

171 
buf
 +ğ
	`¡¾’
(
tbuf
);

177 *
buf
++ = *
fmt
++;

179 ià(
buf
 =ğ
bufEnd
)

182 *
buf
 = 0;

183 
	}
}

186 
	$dumpLIRIn¢
(
LIR
 *
¬g
, *
ba£Addr
)

188 
ArmLIR
 *
lœ
 = (ArmLIR *è
¬g
;

189 
buf
[256];

190 
İName
[256];

191 
off£t
 = 
lœ
->
g’”ic
.offset;

192 
de¡
 = 
lœ
->
İ”ªds
[0];

193 
u2
 *
cPŒ
 = (u2*)
ba£Addr
;

195 
lœ
->
İCode
) {

196 
ARM_PSEUDO_TARGET_LABEL
:

198 
ARM_PSEUDO_CHAINING_CELL_NORMAL
:

199 
	`LOGD
("-------- chaššg c–ÈÒÜm®): 0x%04x\n", 
de¡
);

201 
ARM_PSEUDO_CHAINING_CELL_HOT
:

202 
	`LOGD
("-------- chaššg c–È(hÙ): 0x%04x\n", 
de¡
);

204 
ARM_PSEUDO_CHAINING_CELL_INVOKE_PREDICTED
:

205 
	`LOGD
("-------- chaining cell (predicted)\n");

207 
ARM_PSEUDO_CHAINING_CELL_INVOKE_SINGLETON
:

208 
	`LOGD
("-------- chaining cell (invoke singleton): %s/%p\n",

209 ((
M‘hod
 *)
de¡
)->
Çme
,

210 ((
M‘hod
 *)
de¡
)->
š¢s
);

212 
ARM_PSEUDO_DALVIK_BYTECODE_BOUNDARY
:

213 
	`LOGD
("-------- d®vik off£t: 0x%04x @ %s\n", 
de¡
,

214 
	`g‘OpcodeName
(
lœ
->
İ”ªds
[1]));

216 
ARM_PSEUDO_ALIGN4
:

217 
	`LOGD
("%°(%04x): .®ign4\n", 
ba£Addr
 + 
off£t
, offset);

219 
ARM_PSEUDO_PC_RECONSTRUCTION_CELL
:

220 
	`LOGD
("--------„ecÚ¡ruù d®vik PC : 0x%04x @ +0x%04x\n", 
de¡
,

221 
lœ
->
İ”ªds
[1]);

223 
ARM_PSEUDO_PC_RECONSTRUCTION_BLOCK_LABEL
:

226 
ARM_PSEUDO_EH_BLOCK_LABEL
:

227 
	`LOGD
("Exception_Handling:\n");

229 
ARM_PSEUDO_NORMAL_BLOCK_LABEL
:

230 
	`LOGD
("L%#06x:\n", 
de¡
);

233 ià(
lœ
->
isNİ
) {

236 
	`budIn¢SŒšg
(
EncodšgM­
[
lœ
->
İCode
].
Çme
,†œ, 
İName
,

237 
ba£Addr
, 256);

238 
	`budIn¢SŒšg
(
EncodšgM­
[
lœ
->
İCode
].
fmt
,†œ, 
buf
, 
ba£Addr
,

240 
	`LOGD
("%p (%04x): %-8s%s\n",

241 
ba£Addr
 + 
off£t
, off£t, 
İName
, 
buf
);

244 
	}
}

247 
	$dvmComp”Codeg’Dump
(
Comp©iÚUn™
 *
cUn™
)

249 
	`LOGD
("Dumping LIR insns\n");

250 
LIR
 *
lœIn¢
;

251 
ArmLIR
 *
¬mLIR
;

253 
	`LOGD
("š¡®Ëd codi © %p\n", 
cUn™
->
ba£Addr
);

254 
	`LOGD
("tÙ® sizi %d by‹s\n", 
cUn™
->
tÙ®Size
);

255 
lœIn¢
 = 
cUn™
->
fœ¡LIRIn¢
;†œIn¢;†œIn¢ =†œIn¢->
Ãxt
) {

256 
	`dumpLIRIn¢
(
lœIn¢
, 
cUn™
->
ba£Addr
);

258 
lœIn¢
 = 
cUn™
->
wÜdLi¡
;†œIn¢;†œIn¢ =†œIn¢->
Ãxt
) {

259 
¬mLIR
 = (
ArmLIR
 *è
lœIn¢
;

260 
	`LOGD
("%p (%04x): .word (0x%x)\n",

261 (*)
cUn™
->
ba£Addr
 + 
¬mLIR
->
g’”ic
.
off£t
,‡rmLIR->generic.offset,

262 
¬mLIR
->
İ”ªds
[0]);

264 
	}
}

	@compiler/codegen/arm/ArmLIR.h

17 
	~"D®vik.h
"

18 
	~"comp”/Comp”IÁ”Çls.h
"

20 #iâdeà
_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMLIR_H


21 
	#_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMLIR_H


	)

56 
	#FP_REG_OFFSET
 32

	)

58 
	#FP_DOUBLE
 64

	)

60 
	#FPREG
(
x
è((x & 
FP_REG_OFFSET
è=ğFP_REG_OFFSET)

	)

61 
	#LOWREG
(
x
è((x & 0x7è=ğx)

	)

62 
	#DOUBLEREG
(
x
è((x & 
FP_DOUBLE
è=ğFP_DOUBLE)

	)

63 
	#SINGLEREG
(
x
è(
	`FPREG
(xè&& !
	`DOUBLEREG
(x))

	)

65 
	#FP_REG_MASK
 (
FP_REG_OFFSET
-1)

	)

67 
	#THUMB_REG_MASK
 0x7

	)

70 
	eN©iveRegi¡”PoŞ
 {

71 
	mr0
 = 0,

72 
	mr1
 = 1,

73 
	mr2
 = 2,

74 
	mr3
 = 3,

75 
	mr4PC
 = 4,

76 
	mrFP
 = 5,

77 
	mrGLUE
 = 6,

78 
	mr7
 = 7,

79 
	mr8
 = 8,

80 
	mr9
 = 9,

81 
	mr10
 = 10,

82 
	mr11
 = 11,

83 
	mr12
 = 12,

84 
	mr13
 = 13,

85 
	m¾r
 = 14,

86 
	m½c
 = 15,

87 
	mä0
 = 0 + 
FP_REG_OFFSET
,

88 
	mä1
 = 1 + 
FP_REG_OFFSET
,

89 
	mä2
 = 2 + 
FP_REG_OFFSET
,

90 
	mä3
 = 3 + 
FP_REG_OFFSET
,

91 
	mä4
 = 4 + 
FP_REG_OFFSET
,

92 
	mä5
 = 5 + 
FP_REG_OFFSET
,

93 
	mä6
 = 6 + 
FP_REG_OFFSET
,

94 
	mä7
 = 7 + 
FP_REG_OFFSET
,

95 
	mä8
 = 8 + 
FP_REG_OFFSET
,

96 
	mä9
 = 9 + 
FP_REG_OFFSET
,

97 
	mä10
 = 10 + 
FP_REG_OFFSET
,

98 
	mä11
 = 11 + 
FP_REG_OFFSET
,

99 
	mä12
 = 12 + 
FP_REG_OFFSET
,

100 
	mä13
 = 13 + 
FP_REG_OFFSET
,

101 
	mä14
 = 14 + 
FP_REG_OFFSET
,

102 
	mä15
 = 15 + 
FP_REG_OFFSET
,

103 
	mä16
 = 16 + 
FP_REG_OFFSET
,

104 
	mä17
 = 17 + 
FP_REG_OFFSET
,

105 
	mä18
 = 18 + 
FP_REG_OFFSET
,

106 
	mä19
 = 19 + 
FP_REG_OFFSET
,

107 
	mä20
 = 20 + 
FP_REG_OFFSET
,

108 
	mä21
 = 21 + 
FP_REG_OFFSET
,

109 
	mä22
 = 22 + 
FP_REG_OFFSET
,

110 
	mä23
 = 23 + 
FP_REG_OFFSET
,

111 
	mä24
 = 24 + 
FP_REG_OFFSET
,

112 
	mä25
 = 25 + 
FP_REG_OFFSET
,

113 
	mä26
 = 26 + 
FP_REG_OFFSET
,

114 
	mä27
 = 27 + 
FP_REG_OFFSET
,

115 
	mä28
 = 28 + 
FP_REG_OFFSET
,

116 
	mä29
 = 29 + 
FP_REG_OFFSET
,

117 
	mä30
 = 30 + 
FP_REG_OFFSET
,

118 
	mä31
 = 31 + 
FP_REG_OFFSET
,

119 
	mdr0
 = 
ä0
 + 
FP_DOUBLE
,

120 
	mdr1
 = 
ä2
 + 
FP_DOUBLE
,

121 
	mdr2
 = 
ä4
 + 
FP_DOUBLE
,

122 
	mdr3
 = 
ä6
 + 
FP_DOUBLE
,

123 
	mdr4
 = 
ä8
 + 
FP_DOUBLE
,

124 
	mdr5
 = 
ä10
 + 
FP_DOUBLE
,

125 
	mdr6
 = 
ä12
 + 
FP_DOUBLE
,

126 
	mdr7
 = 
ä14
 + 
FP_DOUBLE
,

127 
	mdr8
 = 
ä16
 + 
FP_DOUBLE
,

128 
	mdr9
 = 
ä18
 + 
FP_DOUBLE
,

129 
	mdr10
 = 
ä20
 + 
FP_DOUBLE
,

130 
	mdr11
 = 
ä22
 + 
FP_DOUBLE
,

131 
	mdr12
 = 
ä24
 + 
FP_DOUBLE
,

132 
	mdr13
 = 
ä26
 + 
FP_DOUBLE
,

133 
	mdr14
 = 
ä28
 + 
FP_DOUBLE
,

134 
	mdr15
 = 
ä30
 + 
FP_DOUBLE
,

135 } 
	tN©iveRegi¡”PoŞ
;

138 
	eArmCÚd™iÚCode
 {

139 
	mARM_COND_EQ
 = 0x0,

140 
	mARM_COND_NE
 = 0x1,

141 
	mARM_COND_LT
 = 0xb,

142 
	mARM_COND_GE
 = 0xa,

143 
	mARM_COND_GT
 = 0xc,

144 
	mARM_COND_LE
 = 0xd,

145 
	mARM_COND_CS
 = 0x2,

146 
	mARM_COND_MI
 = 0x4,

147 } 
	tArmCÚd™iÚCode
;

149 
	#isP£udoOpCode
(
İCode
è(()(İCodeè< 0)

	)

156 
	eArmOpCode
 {

157 
	mARM_PSEUDO_TARGET_LABEL
 = -11,

158 
	mARM_PSEUDO_CHAINING_CELL_HOT
 = -10,

159 
	mARM_PSEUDO_CHAINING_CELL_INVOKE_PREDICTED
 = -9,

160 
	mARM_PSEUDO_CHAINING_CELL_INVOKE_SINGLETON
 = -8,

161 
	mARM_PSEUDO_CHAINING_CELL_NORMAL
 = -7,

162 
	mARM_PSEUDO_DALVIK_BYTECODE_BOUNDARY
 = -6,

163 
	mARM_PSEUDO_ALIGN4
 = -5,

164 
	mARM_PSEUDO_PC_RECONSTRUCTION_CELL
 = -4,

165 
	mARM_PSEUDO_PC_RECONSTRUCTION_BLOCK_LABEL
 = -3,

166 
	mARM_PSEUDO_EH_BLOCK_LABEL
 = -2,

167 
	mARM_PSEUDO_NORMAL_BLOCK_LABEL
 = -1,

169 
	mARM_16BIT_DATA
,

170 
	mTHUMB_ADC
,

171 
	mTHUMB_ADD_RRI3
,

172 
	mTHUMB_ADD_RI8
,

173 
	mTHUMB_ADD_RRR
,

174 
	mTHUMB_ADD_RR_LH
,

175 
	mTHUMB_ADD_RR_HL
,

176 
	mTHUMB_ADD_RR_HH
,

177 
	mTHUMB_ADD_PC_REL
,

178 
	mTHUMB_ADD_SP_REL
,

179 
	mTHUMB_ADD_SPI7
,

180 
	mTHUMB_AND_RR
,

181 
	mTHUMB_ASR
,

182 
	mTHUMB_ASRV
,

183 
	mTHUMB_B_COND
,

184 
	mTHUMB_B_UNCOND
,

185 
	mTHUMB_BIC
,

186 
	mTHUMB_BKPT
,

187 
	mTHUMB_BLX_1
,

188 
	mTHUMB_BLX_2
,

189 
	mTHUMB_BL_1
,

190 
	mTHUMB_BL_2
,

191 
	mTHUMB_BLX_R
,

192 
	mTHUMB_BX
,

193 
	mTHUMB_CMN
,

194 
	mTHUMB_CMP_RI8
,

195 
	mTHUMB_CMP_RR
,

196 
	mTHUMB_CMP_LH
,

197 
	mTHUMB_CMP_HL
,

198 
	mTHUMB_CMP_HH
,

199 
	mTHUMB_EOR
,

200 
	mTHUMB_LDMIA
,

201 
	mTHUMB_LDR_RRI5
,

202 
	mTHUMB_LDR_RRR
,

203 
	mTHUMB_LDR_PC_REL
,

204 
	mTHUMB_LDR_SP_REL
,

205 
	mTHUMB_LDRB_RRI5
,

206 
	mTHUMB_LDRB_RRR
,

207 
	mTHUMB_LDRH_RRI5
,

208 
	mTHUMB_LDRH_RRR
,

209 
	mTHUMB_LDRSB_RRR
,

210 
	mTHUMB_LDRSH_RRR
,

211 
	mTHUMB_LSL
,

212 
	mTHUMB_LSLV
,

213 
	mTHUMB_LSR
,

214 
	mTHUMB_LSRV
,

215 
	mTHUMB_MOV_IMM
,

216 
	mTHUMB_MOV_RR
,

217 
	mTHUMB_MOV_RR_H2H
,

218 
	mTHUMB_MOV_RR_H2L
,

219 
	mTHUMB_MOV_RR_L2H
,

220 
	mTHUMB_MUL
,

221 
	mTHUMB_MVN
,

222 
	mTHUMB_NEG
,

223 
	mTHUMB_ORR
,

224 
	mTHUMB_POP
,

225 
	mTHUMB_PUSH
,

226 
	mTHUMB_ROR
,

227 
	mTHUMB_SBC
,

228 
	mTHUMB_STMIA
,

229 
	mTHUMB_STR_RRI5
,

230 
	mTHUMB_STR_RRR
,

231 
	mTHUMB_STR_SP_REL
,

232 
	mTHUMB_STRB_RRI5
,

233 
	mTHUMB_STRB_RRR
,

234 
	mTHUMB_STRH_RRI5
,

235 
	mTHUMB_STRH_RRR
,

236 
	mTHUMB_SUB_RRI3
,

237 
	mTHUMB_SUB_RI8
,

238 
	mTHUMB_SUB_RRR
,

239 
	mTHUMB_SUB_SPI7
,

240 
	mTHUMB_SWI
,

241 
	mTHUMB_TST
,

242 
	mTHUMB2_VLDRS
,

244 
	mTHUMB2_VLDRD
,

246 
	mTHUMB2_VMULS
,

248 
	mTHUMB2_VMULD
,

250 
	mTHUMB2_VSTRS
,

252 
	mTHUMB2_VSTRD
,

254 
	mTHUMB2_VSUBS
,

256 
	mTHUMB2_VSUBD
,

258 
	mTHUMB2_VADDS
,

260 
	mTHUMB2_VADDD
,

262 
	mTHUMB2_VDIVS
,

264 
	mTHUMB2_VDIVD
,

266 
	mTHUMB2_VCVTIF
,

268 
	mTHUMB2_VCVTID
,

270 
	mTHUMB2_VCVTFI
,

272 
	mTHUMB2_VCVTDI
,

274 
	mTHUMB2_VCVTFD
,

276 
	mTHUMB2_VCVTDF
,

278 
	mTHUMB2_VSQRTS
,

280 
	mTHUMB2_VSQRTD
,

282 
	mTHUMB2_MOV_IMM_SHIFT
,

284 
	mTHUMB2_MOV_IMM16
,

286 
	mTHUMB2_STR_RRI12
,

288 
	mTHUMB2_LDR_RRI12
,

290 
	mTHUMB2_STR_RRI8_PREDEC
,

292 
	mTHUMB2_LDR_RRI8_PREDEC
,

294 
	mTHUMB2_CBNZ
,

296 
	mTHUMB2_CBZ
,

298 
	mTHUMB2_ADD_RRI12
,

300 
	mTHUMB2_MOV_RR
,

302 
	mTHUMB2_VMOVS
,

304 
	mTHUMB2_VMOVD
,

306 
	mARM_LAST
,

307 } 
	tArmOpCode
;

310 
	eArmOpF—tu»FÏgs
 {

311 
	mIS_BRANCH
 = 1 << 1,

312 
	mCLOBBER_DEST
 = 1 << 2,

313 
	mCLOBBER_SRC1
 = 1 << 3,

314 
	mNO_OPERAND
 = 1 << 4,

315 
	mIS_UNARY_OP
 = 1 << 5,

316 
	mIS_BINARY_OP
 = 1 << 6,

317 
	mIS_TERTIARY_OP
 = 1 << 7,

318 } 
	tArmOpF—tu»FÏgs
;

321 
	eArmEncodšgKšd
 {

322 
	mUNUSED
,

323 
	mBITBLT
,

324 
	mDFP
,

325 
	mSFP
,

326 
	mMODIMM
,

327 
	mIMM16
,

328 
	mIMM6
,

329 
	mIMM12
,

330 } 
	tArmEncodšgKšd
;

333 
	sArmEncodšgM­
 {

334 
u4
 
	msk–‘Ú
;

336 
ArmEncodšgKšd
 
	mkšd
;

337 
	m’d
;

338 
	m¡¬t
;

339 } 
	mf›ldLoc
[3];

340 
ArmOpCode
 
	mİCode
;

341 
	mæags
;

342 *
	mÇme
;

343 * 
	mfmt
;

344 
	msize
;

345 } 
	tArmEncodšgM­
;

347 
ArmEncodšgM­
 
EncodšgM­
[
ARM_LAST
];

354 
	sArmLIR
 {

355 
LIR
 
	mg’”ic
;

356 
ArmOpCode
 
	mİCode
;

357 
	mİ”ªds
[3];

358 
boŞ
 
	misNİ
;

359 
	mage
;

360 
	msize
;

361 } 
	tArmLIR
;

364 
	sP»diùedChaššgC–l
 {

365 
u4
 
	mb¿nch
;

366 cÚ¡ 
CÏssObjeù
 *
	mşazz
;

367 cÚ¡ 
M‘hod
 *
	mm‘hod
;

368 
u4
 
	mcouÁ”
;

369 } 
	tP»diùedChaššgC–l
;

372 
	#PREDICTED_CHAIN_BX_PAIR_INIT
 0

	)

373 
	#PREDICTED_CHAIN_CLAZZ_INIT
 0

	)

374 
	#PREDICTED_CHAIN_METHOD_INIT
 0

	)

375 
	#PREDICTED_CHAIN_COUNTER_INIT
 0

	)

378 
	#PREDICTED_CHAIN_COUNTER_DELAY
 16

	)

381 
	#PREDICTED_CHAIN_COUNTER_RECHAIN
 1024

	)

384 
	#PREDICTED_CHAIN_COUNTER_AVOID
 0x7fffffff

	)

387 
	#NEXT_LIR
(
lœ
è((
ArmLIR
 *èlœ->
g’”ic
.
Ãxt
)

	)

388 
	#PREV_LIR
(
lœ
è((
ArmLIR
 *èlœ->
g’”ic
.
´ev
)

	)

390 
	#NEXT_LIR_LVALUE
(
lœ
èÖœ)->
g’”ic
.
Ãxt


	)

391 
	#PREV_LIR_LVALUE
(
lœ
èÖœ)->
g’”ic
.
´ev


	)

393 
	#CHAIN_CELL_OFFSET_TAG
 0xcdab

	)

	@compiler/codegen/arm/Assemble.c

17 
	~"D®vik.h
"

18 
	~"libdex/OpCode.h
"

19 
	~"dexdump/OpCodeNames.h
"

21 
	~"../../Comp”IÁ”Çls.h
"

22 
	~"ArmLIR.h
"

23 
	~<uni¡d.h
>

41 
	#ENCODING_MAP
(
İcode
, 
sk–‘Ú
, 
k0
, 
ds
, 
de
, 
k1
, 
s1s
, 
s1e
, 
k2
, 
s2s
, 
s2e
, \

42 
İ”ªds
, 
Çme
, 
fmt
, 
size
) \

43 {
sk–‘Ú
, {{
k0
, 
ds
, 
de
}, {
k1
, 
s1s
, 
s1e
}, {
k2
, 
s2s
, 
s2e
}}, \

44 
İcode
, 
İ”ªds
, 
Çme
, 
fmt
, 
size
}

	)

74 
ArmEncodšgM­
 
	gEncodšgM­
[
ARM_LAST
] = {

75 
ENCODING_MAP
(
ARM_16BIT_DATA
, 0x0000,

76 
BITBLT
, 15, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

77 
IS_UNARY_OP
,

79 
ENCODING_MAP
(
THUMB_ADC
, 0x4140,

80 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

81 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

83 
ENCODING_MAP
(
THUMB_ADD_RRI3
, 0x1c00,

84 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

85 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

87 
ENCODING_MAP
(
THUMB_ADD_RI8
, 0x3000,

88 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

89 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

91 
ENCODING_MAP
(
THUMB_ADD_RRR
, 0x1800,

92 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

93 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

95 
ENCODING_MAP
(
THUMB_ADD_RR_LH
, 0x4440,

96 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

97 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

100 
ENCODING_MAP
(
THUMB_ADD_RR_HL
, 0x4480,

101 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

102 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

104 
ENCODING_MAP
(
THUMB_ADD_RR_HH
, 0x44c0,

105 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

106 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

108 
ENCODING_MAP
(
THUMB_ADD_PC_REL
, 0xa000,

109 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

110 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

112 
ENCODING_MAP
(
THUMB_ADD_SP_REL
, 0xa800,

113 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

114 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

116 
ENCODING_MAP
(
THUMB_ADD_SPI7
, 0xb000,

117 
BITBLT
, 6, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

118 
IS_UNARY_OP
 | 
CLOBBER_DEST
,

120 
ENCODING_MAP
(
THUMB_AND_RR
, 0x4000,

121 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

122 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

124 
ENCODING_MAP
(
THUMB_ASR
, 0x1000,

125 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

126 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

128 
ENCODING_MAP
(
THUMB_ASRV
, 0x4100,

129 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

130 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

132 
ENCODING_MAP
(
THUMB_B_COND
, 0xd000,

133 
BITBLT
, 7, 0, BITBLT, 11, 8, 
UNUSED
, -1, -1,

134 
IS_BINARY_OP
 | 
IS_BRANCH
,

136 
ENCODING_MAP
(
THUMB_B_UNCOND
, 0xe000,

137 
BITBLT
, 10, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

138 
NO_OPERAND
 | 
IS_BRANCH
,

140 
ENCODING_MAP
(
THUMB_BIC
, 0x4380,

141 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

142 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

144 
ENCODING_MAP
(
THUMB_BKPT
, 0xbe00,

145 
BITBLT
, 7, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

146 
IS_UNARY_OP
 | 
IS_BRANCH
,

148 
ENCODING_MAP
(
THUMB_BLX_1
, 0xf000,

149 
BITBLT
, 10, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

150 
IS_BINARY_OP
 | 
IS_BRANCH
,

152 
ENCODING_MAP
(
THUMB_BLX_2
, 0xe800,

153 
BITBLT
, 10, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

154 
IS_BINARY_OP
 | 
IS_BRANCH
,

156 
ENCODING_MAP
(
THUMB_BL_1
, 0xf000,

157 
BITBLT
, 10, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

158 
IS_UNARY_OP
 | 
IS_BRANCH
,

160 
ENCODING_MAP
(
THUMB_BL_2
, 0xf800,

161 
BITBLT
, 10, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

162 
IS_UNARY_OP
 | 
IS_BRANCH
,

164 
ENCODING_MAP
(
THUMB_BLX_R
, 0x4780,

165 
BITBLT
, 6, 3, 
UNUSED
, -1, -1, UNUSED, -1, -1,

166 
IS_UNARY_OP
 | 
IS_BRANCH
,

168 
ENCODING_MAP
(
THUMB_BX
, 0x4700,

169 
BITBLT
, 6, 3, 
UNUSED
, -1, -1, UNUSED, -1, -1,

170 
IS_UNARY_OP
 | 
IS_BRANCH
,

172 
ENCODING_MAP
(
THUMB_CMN
, 0x42c0,

173 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

174 
IS_BINARY_OP
,

176 
ENCODING_MAP
(
THUMB_CMP_RI8
, 0x2800,

177 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

178 
IS_BINARY_OP
,

180 
ENCODING_MAP
(
THUMB_CMP_RR
, 0x4280,

181 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

182 
IS_BINARY_OP
,

184 
ENCODING_MAP
(
THUMB_CMP_LH
, 0x4540,

185 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

186 
IS_BINARY_OP
,

188 
ENCODING_MAP
(
THUMB_CMP_HL
, 0x4580,

189 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

190 
IS_BINARY_OP
,

192 
ENCODING_MAP
(
THUMB_CMP_HH
, 0x45c0,

193 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

194 
IS_BINARY_OP
,

196 
ENCODING_MAP
(
THUMB_EOR
, 0x4040,

197 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

198 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

200 
ENCODING_MAP
(
THUMB_LDMIA
, 0xc800,

201 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

202 
IS_BINARY_OP
 | 
CLOBBER_DEST
 | 
CLOBBER_SRC1
,

204 
ENCODING_MAP
(
THUMB_LDR_RRI5
, 0x6800,

205 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

206 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

208 
ENCODING_MAP
(
THUMB_LDR_RRR
, 0x5800,

209 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

210 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

212 
ENCODING_MAP
(
THUMB_LDR_PC_REL
, 0x4800,

213 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

214 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

216 
ENCODING_MAP
(
THUMB_LDR_SP_REL
, 0x9800,

217 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

218 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

220 
ENCODING_MAP
(
THUMB_LDRB_RRI5
, 0x7800,

221 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

222 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

224 
ENCODING_MAP
(
THUMB_LDRB_RRR
, 0x5c00,

225 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

226 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

228 
ENCODING_MAP
(
THUMB_LDRH_RRI5
, 0x8800,

229 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

230 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

232 
ENCODING_MAP
(
THUMB_LDRH_RRR
, 0x5a00,

233 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

234 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

236 
ENCODING_MAP
(
THUMB_LDRSB_RRR
, 0x5600,

237 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

238 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

240 
ENCODING_MAP
(
THUMB_LDRSH_RRR
, 0x5e00,

241 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

242 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

244 
ENCODING_MAP
(
THUMB_LSL
, 0x0000,

245 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

246 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

248 
ENCODING_MAP
(
THUMB_LSLV
, 0x4080,

249 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

250 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

252 
ENCODING_MAP
(
THUMB_LSR
, 0x0800,

253 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

254 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

256 
ENCODING_MAP
(
THUMB_LSRV
, 0x40c0,

257 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

258 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

260 
ENCODING_MAP
(
THUMB_MOV_IMM
, 0x2000,

261 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

262 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

264 
ENCODING_MAP
(
THUMB_MOV_RR
, 0x1c00,

265 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

266 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

268 
ENCODING_MAP
(
THUMB_MOV_RR_H2H
, 0x46c0,

269 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

270 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

272 
ENCODING_MAP
(
THUMB_MOV_RR_H2L
, 0x4640,

273 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

274 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

276 
ENCODING_MAP
(
THUMB_MOV_RR_L2H
, 0x4680,

277 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

278 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

280 
ENCODING_MAP
(
THUMB_MUL
, 0x4340,

281 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

282 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

284 
ENCODING_MAP
(
THUMB_MVN
, 0x43c0,

285 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

286 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

288 
ENCODING_MAP
(
THUMB_NEG
, 0x4240,

289 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

290 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

292 
ENCODING_MAP
(
THUMB_ORR
, 0x4300,

293 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

294 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

296 
ENCODING_MAP
(
THUMB_POP
, 0xbc00,

297 
BITBLT
, 8, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

298 
IS_UNARY_OP
,

300 
ENCODING_MAP
(
THUMB_PUSH
, 0xb400,

301 
BITBLT
, 8, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

302 
IS_UNARY_OP
,

304 
ENCODING_MAP
(
THUMB_ROR
, 0x41c0,

305 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

306 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

308 
ENCODING_MAP
(
THUMB_SBC
, 0x4180,

309 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

310 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

312 
ENCODING_MAP
(
THUMB_STMIA
, 0xc000,

313 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

314 
IS_BINARY_OP
 | 
CLOBBER_SRC1
,

316 
ENCODING_MAP
(
THUMB_STR_RRI5
, 0x6000,

317 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

318 
IS_TERTIARY_OP
,

320 
ENCODING_MAP
(
THUMB_STR_RRR
, 0x5000,

321 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

322 
IS_TERTIARY_OP
,

324 
ENCODING_MAP
(
THUMB_STR_SP_REL
, 0x9000,

325 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

326 
IS_BINARY_OP
,

328 
ENCODING_MAP
(
THUMB_STRB_RRI5
, 0x7000,

329 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

330 
IS_TERTIARY_OP
,

332 
ENCODING_MAP
(
THUMB_STRB_RRR
, 0x5400,

333 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

334 
IS_TERTIARY_OP
,

336 
ENCODING_MAP
(
THUMB_STRH_RRI5
, 0x8000,

337 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 10, 6,

338 
IS_TERTIARY_OP
,

340 
ENCODING_MAP
(
THUMB_STRH_RRR
, 0x5200,

341 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

342 
IS_TERTIARY_OP
,

344 
ENCODING_MAP
(
THUMB_SUB_RRI3
, 0x1e00,

345 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

346 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

348 
ENCODING_MAP
(
THUMB_SUB_RI8
, 0x3800,

349 
BITBLT
, 10, 8, BITBLT, 7, 0, 
UNUSED
, -1, -1,

350 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

352 
ENCODING_MAP
(
THUMB_SUB_RRR
, 0x1a00,

353 
BITBLT
, 2, 0, BITBLT, 5, 3, BITBLT, 8, 6,

354 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

356 
ENCODING_MAP
(
THUMB_SUB_SPI7
, 0xb080,

357 
BITBLT
, 6, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

358 
IS_UNARY_OP
 | 
CLOBBER_DEST
,

360 
ENCODING_MAP
(
THUMB_SWI
, 0xdf00,

361 
BITBLT
, 7, 0, 
UNUSED
, -1, -1, UNUSED, -1, -1,

362 
IS_UNARY_OP
 | 
IS_BRANCH
,

364 
ENCODING_MAP
(
THUMB_TST
, 0x4200,

365 
BITBLT
, 2, 0, BITBLT, 5, 3, 
UNUSED
, -1, -1,

366 
IS_UNARY_OP
,

368 
ENCODING_MAP
(
THUMB2_VLDRS
, 0xed900a00,

369 
SFP
, 22, 12, 
BITBLT
, 19, 16, BITBLT, 7, 0,

370 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

372 
ENCODING_MAP
(
THUMB2_VLDRD
, 0xed900b00,

373 
DFP
, 22, 12, 
BITBLT
, 19, 16, BITBLT, 7, 0,

374 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

376 
ENCODING_MAP
(
THUMB2_VMULS
, 0xee200a00,

377 
SFP
, 22, 12, SFP, 7, 16, SFP, 5, 0,

378 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

380 
ENCODING_MAP
(
THUMB2_VMULD
, 0xee200b00,

381 
DFP
, 22, 12, DFP, 7, 16, DFP, 5, 0,

382 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

384 
ENCODING_MAP
(
THUMB2_VSTRS
, 0xed800a00,

385 
SFP
, 22, 12, 
BITBLT
, 19, 16, BITBLT, 7, 0,

386 
IS_TERTIARY_OP
,

388 
ENCODING_MAP
(
THUMB2_VSTRD
, 0xed800b00,

389 
DFP
, 22, 12, 
BITBLT
, 19, 16, BITBLT, 7, 0,

390 
IS_TERTIARY_OP
,

392 
ENCODING_MAP
(
THUMB2_VSUBS
, 0xee300a40,

393 
SFP
, 22, 12, SFP, 7, 16, SFP, 5, 0,

394 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

396 
ENCODING_MAP
(
THUMB2_VSUBD
, 0xee300b40,

397 
DFP
, 22, 12, DFP, 7, 16, DFP, 5, 0,

398 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

400 
ENCODING_MAP
(
THUMB2_VADDS
, 0xee300a00,

401 
SFP
, 22, 12, SFP, 7, 16, SFP, 5, 0,

402 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

404 
ENCODING_MAP
(
THUMB2_VADDD
, 0xee300b00,

405 
DFP
, 22, 12, DFP, 7, 16, DFP, 5, 0,

406 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

408 
ENCODING_MAP
(
THUMB2_VDIVS
, 0xee800a00,

409 
SFP
, 22, 12, SFP, 7, 16, SFP, 5, 0,

410 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

412 
ENCODING_MAP
(
THUMB2_VDIVD
, 0xee800b00,

413 
DFP
, 22, 12, DFP, 7, 16, DFP, 5, 0,

414 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

416 
ENCODING_MAP
(
THUMB2_VCVTIF
, 0xeeb80ac0,

417 
SFP
, 22, 12, SFP, 5, 0, 
UNUSED
, -1, -1,

418 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

420 
ENCODING_MAP
(
THUMB2_VCVTID
, 0xeeb80bc0,

421 
DFP
, 22, 12, 
SFP
, 5, 0, 
UNUSED
, -1, -1,

422 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

424 
ENCODING_MAP
(
THUMB2_VCVTFI
, 0xeebd0ac0,

425 
SFP
, 22, 12, SFP, 5, 0, 
UNUSED
, -1, -1,

426 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

428 
ENCODING_MAP
(
THUMB2_VCVTDI
, 0xeebd0bc0,

429 
SFP
, 22, 12, 
DFP
, 5, 0, 
UNUSED
, -1, -1,

430 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

432 
ENCODING_MAP
(
THUMB2_VCVTFD
, 0xeeb70ac0,

433 
DFP
, 22, 12, 
SFP
, 5, 0, 
UNUSED
, -1, -1,

434 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

436 
ENCODING_MAP
(
THUMB2_VCVTDF
, 0xeeb70bc0,

437 
SFP
, 22, 12, 
DFP
, 5, 0, 
UNUSED
, -1, -1,

438 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

440 
ENCODING_MAP
(
THUMB2_VSQRTS
, 0xeeb10ac0,

441 
SFP
, 22, 12, SFP, 5, 0, 
UNUSED
, -1, -1,

442 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

444 
ENCODING_MAP
(
THUMB2_VSQRTD
, 0xeeb10bc0,

445 
DFP
, 22, 12, DFP, 5, 0, 
UNUSED
, -1, -1,

446 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

448 
ENCODING_MAP
(
THUMB2_MOV_IMM_SHIFT
, 0xf04f0000,

449 
BITBLT
, 11, 8, 
MODIMM
, -1, -1, 
UNUSED
, -1, -1,

450 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

452 
ENCODING_MAP
(
THUMB2_MOV_IMM16
, 0xf2400000,

453 
BITBLT
, 11, 8, 
IMM16
, -1, -1, 
UNUSED
, -1, -1,

454 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

456 
ENCODING_MAP
(
THUMB2_STR_RRI12
, 0xf8c00000,

457 
BITBLT
, 15, 12, BITBLT, 19, 16, BITBLT, 11, 0,

458 
IS_TERTIARY_OP
,

460 
ENCODING_MAP
(
THUMB2_LDR_RRI12
, 0xf8d00000,

461 
BITBLT
, 15, 12, BITBLT, 19, 16, BITBLT, 11, 0,

462 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

464 
ENCODING_MAP
(
THUMB2_STR_RRI8_PREDEC
, 0xf8400c00,

465 
BITBLT
, 15, 12, BITBLT, 19, 16, BITBLT, 8, 0,

466 
IS_TERTIARY_OP
,

468 
ENCODING_MAP
(
THUMB2_LDR_RRI8_PREDEC
, 0xf8500c00,

469 
BITBLT
, 15, 12, BITBLT, 19, 16, BITBLT, 8, 0,

470 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

472 
ENCODING_MAP
(
THUMB2_CBNZ
, 0xb900,

473 
BITBLT
, 2, 0, 
IMM6
, -1, -1, 
UNUSED
, -1, -1,

474 
IS_BINARY_OP
,

476 
ENCODING_MAP
(
THUMB2_CBZ
, 0xb100,

477 
BITBLT
, 2, 0, 
IMM6
, -1, -1, 
UNUSED
, -1, -1,

478 
IS_BINARY_OP
,

480 
ENCODING_MAP
(
THUMB2_ADD_RRI12
, 0xf1000000,

481 
BITBLT
, 11, 8, BITBLT, 19, 16, 
IMM12
, -1, -1,

482 
IS_TERTIARY_OP
 | 
CLOBBER_DEST
,

484 
ENCODING_MAP
(
THUMB2_MOV_RR
, 0xea4f0000,

485 
BITBLT
, 11, 8, BITBLT, 3, 0, 
UNUSED
, -1, -1,

486 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

488 
ENCODING_MAP
(
THUMB2_VMOVS
, 0xeeb00a40,

489 
SFP
, 22, 12, SFP, 5, 0, 
UNUSED
, -1, -1,

490 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

492 
ENCODING_MAP
(
THUMB2_VMOVD
, 0xeeb00b40,

493 
DFP
, 22, 12, DFP, 5, 0, 
UNUSED
, -1, -1,

494 
IS_BINARY_OP
 | 
CLOBBER_DEST
,

498 
	#PADDING_MOV_R0_R0
 0x1C00

	)

501 
	$š¡®lD©aCÚ‹Á
(
Comp©iÚUn™
 *
cUn™
)

503 *
d©aPŒ
 = (*è((*è
cUn™
->
ba£Addr
 + cUn™->
d©aOff£t
);

504 
ArmLIR
 *
d©aLIR
 = (ArmLIR *è
cUn™
->
wÜdLi¡
;

505 
d©aLIR
) {

506 *
d©aPŒ
++ = 
d©aLIR
->
İ”ªds
[0];

507 
d©aLIR
 = 
	`NEXT_LIR
(dataLIR);

509 
	}
}

512 
	$j™T¿ûDesütiÚSize
(cÚ¡ 
J™T¿ûDesütiÚ
 *
desc
)

514 
runCouÁ
;

515 
runCouÁ
 = 0; ;„unCount++) {

516 ià(
desc
->
Œaû
[
runCouÁ
].
äag
.
runEnd
)

519  (
J™CodeDesc
è+ ((
runCouÁ
+1è* (
J™T¿ûRun
));

520 
	}
}

523 
boŞ
 
	$as£mbËIn¡ruùiÚs
(
Comp©iÚUn™
 *
cUn™
, 
šŒ_t
 
¡¬tAddr
)

525 *
bufãrAddr
 = (*è
cUn™
->
codeBufãr
;

526 
ArmLIR
 *
lœ
;

528 
lœ
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;†œ;†œ = 
	`NEXT_LIR
(lir)) {

529 ià(
lœ
->
İCode
 < 0) {

530 ià((
lœ
->
İCode
 =ğ
ARM_PSEUDO_ALIGN4
) &&

532 (
lœ
->
İ”ªds
[0] == 1)) {

533 *
bufãrAddr
++ = 
PADDING_MOV_R0_R0
;

538 ià(
lœ
->
isNİ
) {

542 ià(
lœ
->
İCode
 =ğ
THUMB_LDR_PC_REL
 ||

543 
lœ
->
İCode
 =ğ
THUMB_ADD_PC_REL
) {

544 
ArmLIR
 *
lœT¬g‘
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

545 
šŒ_t
 
pc
 = (
lœ
->
g’”ic
.
off£t
 + 4) & ~3;

551 
šŒ_t
 
rg‘
 = 
lœT¬g‘
->
g’”ic
.
off£t
 + 
lœ
->
İ”ªds
[2];

552 
d–
 = 
rg‘
 - 
pc
;

553 ià(
d–
 & 0x3) {

554 
	`LOGE
("PC-»Èdi¡ªû i nÙ muÉË oà4: %d\n", 
d–
);

555 
	`dvmAbÜt
();

557 ià(
d–
 > 1023) {

558  
Œue
;

560 
lœ
->
İ”ªds
[1] = 
d–
 >> 2;

561 } ià(
lœ
->
İCode
 =ğ
THUMB2_CBNZ
 ||†œ->İCod=ğ
THUMB2_CBZ
) {

562 
ArmLIR
 *
rg‘LIR
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

563 
šŒ_t
 
pc
 = 
lœ
->
g’”ic
.
off£t
 + 4;

564 
šŒ_t
 
rg‘
 = 
rg‘LIR
->
g’”ic
.
off£t
;

565 
d–
 = 
rg‘
 - 
pc
;

566 ià(
d–
 > 126 || delta < 0) {

567  
Œue
;

569 
lœ
->
İ”ªds
[1] = 
d–
 >> 1;

570 } ià(
lœ
->
İCode
 =ğ
THUMB_B_COND
) {

571 
ArmLIR
 *
rg‘LIR
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

572 
šŒ_t
 
pc
 = 
lœ
->
g’”ic
.
off£t
 + 4;

573 
šŒ_t
 
rg‘
 = 
rg‘LIR
->
g’”ic
.
off£t
;

574 
d–
 = 
rg‘
 - 
pc
;

575 ià(
d–
 > 254 || delta < -256) {

576  
Œue
;

578 
lœ
->
İ”ªds
[0] = 
d–
 >> 1;

579 } ià(
lœ
->
İCode
 =ğ
THUMB_B_UNCOND
) {

580 
ArmLIR
 *
rg‘LIR
 = (ArmLIR *è
lœ
->
g’”ic
.
rg‘
;

581 
šŒ_t
 
pc
 = 
lœ
->
g’”ic
.
off£t
 + 4;

582 
šŒ_t
 
rg‘
 = 
rg‘LIR
->
g’”ic
.
off£t
;

583 
d–
 = 
rg‘
 - 
pc
;

584 ià(
d–
 > 2046 || delta < -2048) {

585 
	`LOGE
("UncÚd™iÚ® b¿nch di¡ªû ouˆoà¿nge: %d\n", 
d–
);

586 
	`dvmAbÜt
();

588 
lœ
->
İ”ªds
[0] = 
d–
 >> 1;

589 } ià(
lœ
->
İCode
 =ğ
THUMB_BLX_1
) {

590 
	`as£¹
(
	`NEXT_LIR
(
lœ
)->
İCode
 =ğ
THUMB_BLX_2
);

592 
šŒ_t
 
curPC
 = (
¡¬tAddr
 + 
lœ
->
g’”ic
.
off£t
 + 4) & ~3;

593 
šŒ_t
 
rg‘
 = 
lœ
->
İ”ªds
[1];

596 ià(
curPC
 & 0x2) {

597 
rg‘
 |= 0x2;

599 
d–
 = 
rg‘
 - 
curPC
;

600 
	`as£¹
((
d–
 >= -(1<<22)) && (delta <= ((1<<22)-2)));

602 
lœ
->
İ”ªds
[0] = (
d–
 >> 12) & 0x7ff;

603 
	`NEXT_LIR
(
lœ
)->
İ”ªds
[0] = (
d–
>> 1) & 0x7ff;

606 
ArmEncodšgM­
 *
’cod”
 = &
EncodšgM­
[
lœ
->
İCode
];

607 
u4
 
b™s
 = 
’cod”
->
sk–‘Ú
;

608 
i
;

609 
i
 = 0; i < 3; i++) {

610 
u4
 
v®ue
;

611 
’cod”
->
f›ldLoc
[
i
].
kšd
) {

612 
UNUSED
:

614 
IMM6
:

615 
v®ue
 = ((
lœ
->
İ”ªds
[
i
] & 0x20) >> 5) << 9;

616 
v®ue
 |ğ(
lœ
->
İ”ªds
[
i
] & 0x1f) << 3;

617 
b™s
 |ğ
v®ue
;

619 
BITBLT
:

620 
v®ue
 = (
lœ
->
İ”ªds
[
i
] << 
’cod”
->
f›ldLoc
[i].
¡¬t
) &

621 ((1 << (
’cod”
->
f›ldLoc
[
i
].
’d
 + 1)) - 1);

622 
b™s
 |ğ
v®ue
;

624 
DFP
:

626 
v®ue
 = ((
lœ
->
İ”ªds
[
i
] & 0x10) >> 4) <<

627 
’cod”
->
f›ldLoc
[
i
].
’d
;

629 
v®ue
 |ğ(
lœ
->
İ”ªds
[
i
] & 0x0f) <<

630 
’cod”
->
f›ldLoc
[
i
].
¡¬t
;

631 
b™s
 |ğ
v®ue
;

633 
SFP
:

635 
v®ue
 = (
lœ
->
İ”ªds
[
i
] & 0x1) <<

636 
’cod”
->
f›ldLoc
[
i
].
’d
;

638 
v®ue
 |ğ((
lœ
->
İ”ªds
[
i
] & 0x1e) >> 1) <<

639 
’cod”
->
f›ldLoc
[
i
].
¡¬t
;

640 
b™s
 |ğ
v®ue
;

642 
IMM12
:

643 
MODIMM
:

644 
v®ue
 = ((
lœ
->
İ”ªds
[
i
] & 0x800) >> 11) << 26;

645 
v®ue
 |ğ((
lœ
->
İ”ªds
[
i
] & 0x700) >> 8) << 12;

646 
v®ue
 |ğ
lœ
->
İ”ªds
[
i
] & 0x0ff;

647 
b™s
 |ğ
v®ue
;

649 
IMM16
:

650 
v®ue
 = ((
lœ
->
İ”ªds
[
i
] & 0x0800) >> 11) << 26;

651 
v®ue
 |ğ((
lœ
->
İ”ªds
[
i
] & 0xf000) >> 12) << 16;

652 
v®ue
 |ğ((
lœ
->
İ”ªds
[
i
] & 0x0700) >> 8) << 12;

653 
v®ue
 |ğ
lœ
->
İ”ªds
[
i
] & 0x0ff;

654 
b™s
 |ğ
v®ue
;

657 
	`as£¹
(0);

660 ià(
’cod”
->
size
 == 2) {

661 *
bufãrAddr
++ = (
b™s
 >> 16) & 0xffff;

663 *
bufãrAddr
++ = 
b™s
 & 0xffff;

665  
çl£
;

666 
	}
}

706 
	$dvmComp”As£mbËLIR
(
Comp©iÚUn™
 *
cUn™
, 
J™T¿n¦©iÚInfo
 *
šfo
)

708 
LIR
 *
lœ
;

709 
ArmLIR
 *
¬mLIR
;

710 
off£t
 = 0;

711 
i
;

712 
ChašC–lCouÁs
 
chašC–lCouÁs
;

713 
descSize
 = 
	`j™T¿ûDesütiÚSize
(
cUn™
->
ŒaûDesc
);

715 
šfo
->
codeAdd»ss
 = 
NULL
;

716 
šfo
->
š¡ruùiÚS‘
 = 
cUn™
->instructionSet;

719 
¬mLIR
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;

720 
¬mLIR
;

721 
¬mLIR
 = 
	`NEXT_LIR
(armLIR)) {

722 
¬mLIR
->
g’”ic
.
off£t
 = offset;

723 ià(
¬mLIR
->
İCode
 >ğ0 && !¬mLIR->
isNİ
) {

724 
¬mLIR
->
size
 = 
EncodšgM­
[¬mLIR->
İCode
].size * 2;

725 
off£t
 +ğ
¬mLIR
->
size
;

726 } ià(
¬mLIR
->
İCode
 =ğ
ARM_PSEUDO_ALIGN4
) {

727 ià(
off£t
 & 0x2) {

728 
off£t
 += 2;

729 
¬mLIR
->
İ”ªds
[0] = 1;

731 
¬mLIR
->
İ”ªds
[0] = 0;

738 
off£t
 = (offset + 3) & ~3;

741 
u4
 
chašC–lOff£t
 = 
off£t
;

742 
ArmLIR
 *
chašC–lOff£tLIR
 = (ArmLIR *è
cUn™
->chainCellOffsetLIR;

743 
	`as£¹
(
chašC–lOff£tLIR
);

744 
	`as£¹
(
chašC–lOff£t
 < 0x10000);

745 
	`as£¹
(
chašC–lOff£tLIR
->
İCode
 =ğ
ARM_16BIT_DATA
 &&

746 
chašC–lOff£tLIR
->
İ”ªds
[0] =ğ
CHAIN_CELL_OFFSET_TAG
);

754 
chašC–lOff£tLIR
->
İ”ªds
[0] =

755 
gDvmJ™
.
´ofe
 ? (
chašC–lOff£t
 - 4) : chainCellOffset;

757 
off£t
 +ğ(
chašC–lCouÁs
è+ 
descSize
;

759 
	`as£¹
((
off£t
 & 0x3) == 0);

762 
cUn™
->
d©aOff£t
 = 
off£t
;

764 
lœ
 = 
cUn™
->
wÜdLi¡
;†œ;†œ =†œ->
Ãxt
) {

765 
lœ
->
off£t
 = offset;

766 
off£t
 += 4;

769 
cUn™
->
tÙ®Size
 = 
off£t
;

771 ià(
gDvmJ™
.
codeCacheBy‹U£d
 + 
cUn™
->
tÙ®Size
 > 
CODE_CACHE_SIZE
) {

772 
gDvmJ™
.
codeCacheFuÎ
 = 
Œue
;

773 
cUn™
->
ba£Addr
 = 
NULL
;

778 
cUn™
->
codeBufãr
 = 
	`dvmComp”New
(
chašC–lOff£t
, 
Œue
);

779 ià(
cUn™
->
codeBufãr
 =ğ
NULL
) {

780 
	`LOGE
("Code buffer‡llocation failure\n");

781 
cUn™
->
ba£Addr
 = 
NULL
;

785 
boŞ
 
as£mbËrFau»
 = 
	`as£mbËIn¡ruùiÚs
(

786 
cUn™
, (
šŒ_t
è
gDvmJ™
.
codeCache
 + gDvmJ™.
codeCacheBy‹U£d
);

792 ià(
as£mbËrFau»
) {

793 
cUn™
->
h®veIn¡CouÁ
 = 
Œue
;

798 
cUn™
->
ba£Addr
 = (*è
gDvmJ™
.
codeCache
 + gDvmJ™.
codeCacheBy‹U£d
;

799 
gDvmJ™
.
codeCacheBy‹U£d
 +ğ
off£t
;

802 
	`memıy
((*)
cUn™
->
ba£Addr
, cUn™->
codeBufãr
, 
chašC–lOff£t
);

803 
gDvmJ™
.
numComp©iÚs
++;

806 
i
=0; i< 
CHAINING_CELL_LAST
; i++) {

807 
chašC–lCouÁs
.
u
.
couÁ
[
i
] = 
cUn™
->
numChaššgC–ls
[i];

809 
	`memıy
((*)
cUn™
->
ba£Addr
 + 
chašC–lOff£t
, &
chašC–lCouÁs
,

810 (
chašC–lCouÁs
));

813 
	`memıy
((*)
cUn™
->
ba£Addr
 + 
chašC–lOff£t
 + (
chašC–lCouÁs
),

814 
cUn™
->
ŒaûDesc
, 
descSize
);

817 
	`š¡®lD©aCÚ‹Á
(
cUn™
);

820 
	`ÿcheæush
(()
cUn™
->
ba£Addr
,

821 ()((*è
cUn™
->
ba£Addr
 + 
off£t
), 0);

824 
šfo
->
codeAdd»ss
 = (*)
cUn™
->
ba£Addr
 + cUn™->
h—d”Size
;

825 
šfo
->
š¡ruùiÚS‘
 = 
cUn™
->instructionSet;

827 ià(
šfo
->
š¡ruùiÚS‘
 !ğ
DALVIK_JIT_ARM
)

828 
šfo
->
codeAdd»ss
 = (*)info->codeAddress + 1;

829 
	}
}

831 
u4
 
	$as£mbËBXPaœ
(
b¿nchOff£t
)

833 
u4
 
thumb1
, 
thumb2
;

835 ià((
b¿nchOff£t
 < -2048) | (branchOffset > 2046)) {

836 
thumb1
 = (0xf000 | ((
b¿nchOff£t
>>12) & 0x7ff));

837 
thumb2
 = (0xf800 | ((
b¿nchOff£t
>> 1) & 0x7ff));

839 
thumb1
 = (0xe000 | ((
b¿nchOff£t
>> 1) & 0x7ff));

840 
thumb2
 = 0x4300;

843  
thumb2
<<16 | 
thumb1
;

844 
	}
}

858 * 
	$dvmJ™Chaš
(* 
tgtAddr
, 
u4
* 
b¿nchAddr
)

860 
ba£Addr
 = (
u4
è
b¿nchAddr
 + 4;

861 
b¿nchOff£t
 = (è
tgtAddr
 - 
ba£Addr
;

862 
u4
 
ÃwIn¡
;

864 ià(
gDvm
.
sumTh»adSu¥’dCouÁ
 == 0) {

865 
	`as£¹
((
b¿nchOff£t
 >= -(1<<22)) && (branchOffset <= ((1<<22)-2)));

867 
gDvmJ™
.
Œª¦©iÚChašs
++;

869 
	`COMPILER_TRACE_CHAINING
(

870 
	`LOGD
("Jit Runtime: chaining 0x%xo 0x%x\n",

871 (è
b¿nchAddr
, (è
tgtAddr
 & -2));

873 
ÃwIn¡
 = 
	`as£mbËBXPaœ
(
b¿nchOff£t
);

875 *
b¿nchAddr
 = 
ÃwIn¡
;

876 
	`ÿcheæush
(()
b¿nchAddr
, ()branchAddr + 4, 0);

879  
tgtAddr
;

880 
	}
}

900 cÚ¡ 
M‘hod
 *
	$dvmJ™ToP©chP»diùedChaš
(cÚ¡ 
M‘hod
 *
m‘hod
,

901 *
unu£d
,

902 
P»diùedChaššgC–l
 *
ûÎ
,

903 cÚ¡ 
CÏssObjeù
 *
şazz
)

906 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

907 
ûÎ
->
couÁ”
 = 
PREDICTED_CHAIN_COUNTER_AVOID
;

908 
	`ÿcheæush
((è
ûÎ
, () (cell+1), 0);

909 
	`COMPILER_TRACE_CHAINING
(

910 
	`LOGD
("Jit Runtime:…redicted chain %po‚ative method %s ignored",

911 
ûÎ
, 
m‘hod
->
Çme
));

912 
dÚe
;

914 
tgtAddr
 = (è
	`dvmJ™G‘CodeAddr
(
m‘hod
->
š¢s
);

920 ià(
tgtAddr
 == 0) {

925 
ûÎ
->
couÁ”
 = 
PREDICTED_CHAIN_COUNTER_DELAY
;

926 
	`ÿcheæush
((è
ûÎ
, () (cell+1), 0);

927 
	`COMPILER_TRACE_CHAINING
(

928 
	`LOGD
("Jit Runtime:…redicted chain %po method %s delayed",

929 
ûÎ
, 
m‘hod
->
Çme
));

930 
dÚe
;

934 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_JIT
);

936 
ba£Addr
 = (è
ûÎ
 + 4;

937 
b¿nchOff£t
 = 
tgtAddr
 - 
ba£Addr
;

939 
	`COMPILER_TRACE_CHAINING
(

940 
	`LOGD
("Jit Runtime:…redicted chain %p from %so %s (%s)…atched",

941 
ûÎ
, c–l->
şazz
 ? c–l->şazz->
desütÜ
 : "NULL",

942 
şazz
->
desütÜ
,

943 
m‘hod
->
Çme
));

945 
ûÎ
->
b¿nch
 = 
	`as£mbËBXPaœ
(
b¿nchOff£t
);

946 
ûÎ
->
şazz
 = clazz;

947 
ûÎ
->
m‘hod
 = method;

948 
ûÎ
->
couÁ”
 = 
PREDICTED_CHAIN_COUNTER_RECHAIN
;

950 
	`ÿcheæush
((è
ûÎ
, () (cell+1), 0);

953 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_JIT
);

955 
dÚe
:

956  
m‘hod
;

957 
	}
}

966 
u4
* 
	$dvmJ™Unchaš
(* 
codeAddr
)

968 
u2
* 
pChašC–lOff£t
 = (u2*)((*)
codeAddr
 - 3);

969 
u2
 
chašC–lOff£t
 = *
pChašC–lOff£t
;

970 
ChašC–lCouÁs
 *
pChašC–lCouÁs
 =

971 (
ChašC–lCouÁs
*)((*)
codeAddr
 + 
chašC–lOff£t
 - 3);

972 
ûÎSize
;

973 
u4
* 
pChašC–ls
;

974 
u4
* 
pS¹
;

975 
u4
 
thumb1
;

976 
u4
 
thumb2
;

977 
u4
 
ÃwIn¡
;

978 
i
,
j
;

979 
P»diùedChaššgC–l
 *
´edChašC–l
;

982 
i
 = 0, 
ûÎSize
 = 0; i < 
CHAINING_CELL_LAST
; i++) {

983 ià(
i
 !ğ
CHAINING_CELL_INVOKE_PREDICTED
) {

984 
ûÎSize
 +ğ
pChašC–lCouÁs
->
u
.
couÁ
[
i
] * 2;

986 
ûÎSize
 +ğ
pChašC–lCouÁs
->
u
.
couÁ
[
i
] * 4;

991 
pS¹
 = 
pChašC–ls
 = ((
u4
 *è
pChašC–lCouÁs
è- 
ûÎSize
;

994 
i
 = 0; i < 
CHAINING_CELL_LAST
; i++) {

995 
–emSize
 = 2;

996 ià(
i
 =ğ
CHAINING_CELL_INVOKE_PREDICTED
) {

997 
–emSize
 = 4;

1000 
j
 = 0; j < 
pChašC–lCouÁs
->
u
.
couÁ
[
i
]; j++) {

1001 
rg‘Off£t
;

1002 
i
) {

1003 
CHAINING_CELL_NORMAL
:

1004 
rg‘Off£t
 = 
	`off£tof
(
IÁ”pS‹
,

1005 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pNÜm®
);

1007 
CHAINING_CELL_HOT
:

1008 
CHAINING_CELL_INVOKE_SINGLETON
:

1009 
rg‘Off£t
 = 
	`off£tof
(
IÁ”pS‹
,

1010 
j™ToIÁ”pEÁr›s
.
dvmJ™ToT¿ûS–eù
);

1012 
CHAINING_CELL_INVOKE_PREDICTED
:

1013 
rg‘Off£t
 = 0;

1014 
´edChašC–l
 = (
P»diùedChaššgC–l
 *è
pChašC–ls
;

1016 
´edChašC–l
->
b¿nch
 = 
PREDICTED_CHAIN_BX_PAIR_INIT
;

1017 
´edChašC–l
->
şazz
 = 
PREDICTED_CHAIN_CLAZZ_INIT
;

1018 
´edChašC–l
->
m‘hod
 = 
PREDICTED_CHAIN_METHOD_INIT
;

1019 
´edChašC–l
->
couÁ”
 = 
PREDICTED_CHAIN_COUNTER_INIT
;

1022 
	`dvmAbÜt
();

1024 
	`COMPILER_TRACE_CHAINING
(

1025 
	`LOGD
("J™ RuÁime: unchaššg 0x%x", ()
pChašC–ls
));

1031 ià(
i
 !ğ
CHAINING_CELL_INVOKE_PREDICTED
) {

1032 
rg‘Off£t
 =argetOffset >> 2;

1033 
thumb1
 = 0x6800 | (
rg‘Off£t
 << 6) |

1034 (
rGLUE
 << 3è| (
r0
 << 0);

1035 
thumb2
 = 0x4780 | (
r0
 << 3);

1036 
ÃwIn¡
 = 
thumb2
<<16 | 
thumb1
;

1037 *
pChašC–ls
 = 
ÃwIn¡
;

1039 
pChašC–ls
 +ğ
–emSize
;

1042  
pChašC–ls
;

1043 
	}
}

1046 
	$dvmJ™UnchašAÎ
()

1048 
u4
* 
lowAdd»ss
 = 
NULL
;

1049 
u4
* 
highAdd»ss
 = 
NULL
;

1050 
i
;

1051 ià(
gDvmJ™
.
pJ™EÁryTabË
 !ğ
NULL
) {

1052 
	`COMPILER_TRACE_CHAINING
(
	`LOGD
("Jit Runtime: unchaining‡ll"));

1053 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

1054 
i
 = 0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

1055 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
dPC
 &&

1056 
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
) {

1057 
u4
* 
Ï¡Add»ss
;

1058 
Ï¡Add»ss
 =

1059 
	`dvmJ™Unchaš
(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
);

1060 ià(
lowAdd»ss
 =ğ
NULL
 ||

1061 (
u4
*)
gDvmJ™
.
pJ™EÁryTabË
[
i
].
codeAdd»ss
 < 
lowAdd»ss
)

1062 
lowAdd»ss
 = 
Ï¡Add»ss
;

1063 ià(
Ï¡Add»ss
 > 
highAdd»ss
)

1064 
highAdd»ss
 = 
Ï¡Add»ss
;

1067 
	`ÿcheæush
(()
lowAdd»ss
, ()
highAdd»ss
, 0);

1068 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

1070 
	}
}

1072 
	sj™ProfeAddrToLše
 {

1073 
u4
 
	mlšeNum
;

1074 
u4
 
	mby‹codeOff£t
;

1075 } 
	tj™ProfeAddrToLše
;

1079 
	$addrToLšeCb
 (*
úxt
, 
u4
 
by‹codeOff£t
, u4 
lšeNum
)

1081 
j™ProfeAddrToLše
 *
addrToLše
 = (j™ProfeAddrToLš*è
úxt
;

1084 ià(
addrToLše
->
by‹codeOff£t
 >= bytecodeOffset) {

1085 
addrToLše
->
lšeNum
 =†ineNum;

1088 
	}
}

1090 *
	$g‘T¿ûBa£
(cÚ¡ 
J™EÁry
 *
p
)

1092  (*)
p
->
codeAdd»ss
 -

1093 (6 + (
p
->
u
.
šfo
.
š¡ruùiÚS‘
 =ğ
DALVIK_JIT_ARM
 ? 0 : 1));

1094 
	}
}

1097 
	$dumpT¿ûProfe
(
J™EÁry
 *
p
)

1099 
ChašC–lCouÁs
* 
pC–lCouÁs
;

1100 * 
ŒaûBa£
;

1101 
u4
* 
pExecutiÚCouÁ
;

1102 
u2
* 
pC–lOff£t
;

1103 
J™T¿ûDesütiÚ
 *
desc
;

1104 cÚ¡ 
M‘hod
* 
m‘hod
;

1106 
ŒaûBa£
 = 
	`g‘T¿ûBa£
(
p
);

1108 ià(
p
->
codeAdd»ss
 =ğ
NULL
) {

1109 
	`LOGD
("TRACEPROFILE 0x%08x 0 NULL 0 0", ()
ŒaûBa£
);

1113 
pExecutiÚCouÁ
 = (
u4
*è(
ŒaûBa£
);

1114 
pC–lOff£t
 = (
u2
*è(
ŒaûBa£
 + 4);

1115 
pC–lCouÁs
 = (
ChašC–lCouÁs
*è((*)
pC–lOff£t
 + *pCellOffset);

1116 
desc
 = (
J™T¿ûDesütiÚ
*è((*)
pC–lCouÁs
 + (*pCellCounts));

1117 
m‘hod
 = 
desc
->method;

1118 *
m‘hodDesc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1119 
j™ProfeAddrToLše
 
addrToLše
 = {0, 
desc
->
Œaû
[0].
äag
.
¡¬tOff£t
};

1128 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
,

1129 
	`dvmG‘M‘hodCode
(
m‘hod
),

1130 
m‘hod
->
şazz
->
desütÜ
,

1131 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

1132 
m‘hod
->
acûssFÏgs
,

1133 
addrToLšeCb
, 
NULL
, &
addrToLše
);

1135 
	`LOGD
("TRACEPROFILE 0x%08x % 10d [%#x(+%d), %d] %s%s;%s",

1136 ()
ŒaûBa£
,

1137 *
pExecutiÚCouÁ
,

1138 
desc
->
Œaû
[0].
äag
.
¡¬tOff£t
,

1139 
desc
->
Œaû
[0].
äag
.
numIn¡s
,

1140 
addrToLše
.
lšeNum
,

1141 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
m‘hodDesc
);

1142 
	`ä“
(
m‘hodDesc
);

1144  *
pExecutiÚCouÁ
;

1145 
	}
}

1148 
šlše
 
	$g‘ProfeCouÁ
(cÚ¡ 
J™EÁry
 *
’Œy
)

1150 ià(
’Œy
->
dPC
 =ğ0 ||ƒÁry->
codeAdd»ss
 == 0)

1152 
u4
 *
pExecutiÚCouÁ
 = (u4 *è
	`g‘T¿ûBa£
(
’Œy
);

1154  *
pExecutiÚCouÁ
;

1155 
	}
}

1159 
	$sÜtT¿ûProfeCouÁ
(cÚ¡ *
’Œy1
, cÚ¡ *
’Œy2
)

1161 cÚ¡ 
J™EÁry
 *
j™EÁry1
 = 
’Œy1
;

1162 cÚ¡ 
J™EÁry
 *
j™EÁry2
 = 
’Œy2
;

1164 
couÁ1
 = 
	`g‘ProfeCouÁ
(
j™EÁry1
);

1165 
couÁ2
 = 
	`g‘ProfeCouÁ
(
j™EÁry2
);

1166  (
couÁ1
 =ğ
couÁ2
) ? 0 : ((count1 > count2) ? -1 : 1);

1167 
	}
}

1170 
	$dvmComp”SÜtAndPrštT¿ûProfes
()

1172 
J™EÁry
 *
sÜ‹dEÁr›s
;

1173 
numT¿ûs
 = 0;

1174 
couÁs
 = 0;

1175 
i
;

1178 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

1181 
sÜ‹dEÁr›s
 = 
	`m®loc
((
J™EÁry
è* 
gDvmJ™
.
j™TabËSize
);

1182 ià(
sÜ‹dEÁr›s
 =ğ
NULL
)

1183 
dÚe
;

1184 
	`memıy
(
sÜ‹dEÁr›s
, 
gDvmJ™
.
pJ™EÁryTabË
,

1185 (
J™EÁry
è* 
gDvmJ™
.
j™TabËSize
);

1186 
	`qsÜt
(
sÜ‹dEÁr›s
, 
gDvmJ™
.
j™TabËSize
, (
J™EÁry
),

1187 
sÜtT¿ûProfeCouÁ
);

1190 
i
=0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

1191 ià(
sÜ‹dEÁr›s
[
i
].
dPC
 != 0) {

1192 
couÁs
 +ğ
	`dumpT¿ûProfe
(&
sÜ‹dEÁr›s
[
i
]);

1193 
numT¿ûs
++;

1196 ià(
numT¿ûs
 == 0)

1197 
numT¿ûs
 = 1;

1198 
	`LOGD
("JIT: Av”agexecutiÚ couÁ -> %d",()(
couÁs
 / 
numT¿ûs
));

1200 
	`ä“
(
sÜ‹dEÁr›s
);

1201 
dÚe
:

1202 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

1204 
	}
}

	@compiler/codegen/arm/Codegen-armv5te-vfp.c

17 
	~"D®vik.h
"

18 
	~"š‹½/IÁ”pDefs.h
"

19 
	~"libdex/OpCode.h
"

20 
	~"dexdump/OpCodeNames.h
"

21 
	~"vm/comp”/Comp”IÁ”Çls.h
"

22 
	~"ArmLIR.h
"

23 
	~"vm/m‹½/commÚ/FšdIÁ”çû.h
"

25 
	~"¬mv5‹-vå/ArchV¬ŸÁ.h
"

27 
	~"ThumbUt.c
"

28 
	~"Codeg’.c
"

29 
	~"¬mv5‹-vå/ArchV¬ŸÁ.c
"

	@compiler/codegen/arm/Codegen-armv5te.c

17 
	~"D®vik.h
"

18 
	~"š‹½/IÁ”pDefs.h
"

19 
	~"libdex/OpCode.h
"

20 
	~"dexdump/OpCodeNames.h
"

21 
	~"vm/comp”/Comp”IÁ”Çls.h
"

22 
	~"ArmLIR.h
"

23 
	~"vm/m‹½/commÚ/FšdIÁ”çû.h
"

25 
	~"¬mv5‹/ArchV¬ŸÁ.h
"

27 
	~"ThumbUt.c
"

28 
	~"Codeg’.c
"

29 
	~"¬mv5‹/ArchV¬ŸÁ.c
"

	@compiler/codegen/arm/Codegen-armv7-a.c

17 
	~"D®vik.h
"

18 
	~"š‹½/IÁ”pDefs.h
"

19 
	~"libdex/OpCode.h
"

20 
	~"dexdump/OpCodeNames.h
"

21 
	~"vm/comp”/Comp”IÁ”Çls.h
"

22 
	~"ArmLIR.h
"

23 
	~"vm/m‹½/commÚ/FšdIÁ”çû.h
"

25 
	~"¬mv7-a/ArchV¬ŸÁ.h
"

27 
	~"Thumb2Ut.c
"

28 
	~"Codeg’.c
"

29 
	~"¬mv7-a/ArchV¬ŸÁ.c
"

	@compiler/codegen/arm/Codegen.c

29 
šŒ_t
 
	g‹m¶©eEÁryOff£ts
[
TEMPLATE_LAST_MARK
];

32 
	gİcodeCov”age
[256];

40 
ArmLIR
 *
	$ÃwLIR0
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
)

42 
ArmLIR
 *
š¢
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

43 
	`as£¹
(
	`isP£udoOpCode
(
İCode
è|| (
EncodšgM­
[İCode].
æags
 & 
NO_OPERAND
));

44 
š¢
->
İCode
 = opCode;

45 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

46  
š¢
;

47 
	}
}

49 
ArmLIR
 *
	$ÃwLIR1
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

50 
de¡
)

52 
ArmLIR
 *
š¢
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

53 
	`as£¹
(
	`isP£udoOpCode
(
İCode
è|| (
EncodšgM­
[İCode].
æags
 & 
IS_UNARY_OP
));

54 
š¢
->
İCode
 = opCode;

55 
š¢
->
İ”ªds
[0] = 
de¡
;

56 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

57  
š¢
;

58 
	}
}

60 
ArmLIR
 *
	$ÃwLIR2
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

61 
de¡
, 
¤c1
)

63 
ArmLIR
 *
š¢
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

64 
	`as£¹
(
	`isP£udoOpCode
(
İCode
) ||

65 (
EncodšgM­
[
İCode
].
æags
 & 
IS_BINARY_OP
));

66 
š¢
->
İCode
 = opCode;

67 
š¢
->
İ”ªds
[0] = 
de¡
;

68 
š¢
->
İ”ªds
[1] = 
¤c1
;

69 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

70  
š¢
;

71 
	}
}

73 
ArmLIR
 *
	$ÃwLIR3
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

74 
de¡
, 
¤c1
, 
¤c2
)

76 
ArmLIR
 *
š¢
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

77 
	`as£¹
(
	`isP£udoOpCode
(
İCode
) ||

78 (
EncodšgM­
[
İCode
].
æags
 & 
IS_TERTIARY_OP
));

79 
š¢
->
İCode
 = opCode;

80 
š¢
->
İ”ªds
[0] = 
de¡
;

81 
š¢
->
İ”ªds
[1] = 
¤c1
;

82 
š¢
->
İ”ªds
[2] = 
¤c2
;

83 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
š¢
);

84  
š¢
;

85 
	}
}

87 
ArmLIR
 *
	$ÃwLIR23
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

88 
¤cde¡
, 
¤c2
)

90 
	`as£¹
(!
	`isP£udoOpCode
(
İCode
));

91 ià(
EncodšgM­
[
İCode
].
æags
 & 
IS_BINARY_OP
)

92  
	`ÃwLIR2
(
cUn™
, 
İCode
, 
¤cde¡
, 
¤c2
);

94  
	`ÃwLIR3
(
cUn™
, 
İCode
, 
¤cde¡
, srcde¡, 
¤c2
);

95 
	}
}

105 
ArmLIR
 *
	$addWÜdD©a
(
Comp©iÚUn™
 *
cUn™
, 
v®ue
, 
boŞ
 
šPÏû
)

108 ià(!
šPÏû
) {

109 
ArmLIR
 *
ÃwV®ue
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

110 
ÃwV®ue
->
İ”ªds
[0] = 
v®ue
;

111 
ÃwV®ue
->
g’”ic
.
Ãxt
 = 
cUn™
->
wÜdLi¡
;

112 
cUn™
->
wÜdLi¡
 = (
LIR
 *è
ÃwV®ue
;

113  
ÃwV®ue
;

116 
	`ÃwLIR1
(
cUn™
, 
ARM_16BIT_DATA
, (
v®ue
 & 0xffff));

117 
	`ÃwLIR1
(
cUn™
, 
ARM_16BIT_DATA
, (
v®ue
 >> 16));

119  
NULL
;

120 
	}
}

126 
ArmLIR
 *
	$sÿnL™”®PoŞ
(
Comp©iÚUn™
 *
cUn™
, 
v®ue
,

127 
d–
)

129 
LIR
 *
d©aT¬g‘
 = 
cUn™
->
wÜdLi¡
;

130 
d©aT¬g‘
) {

131 ià(((è(
v®ue
 - ((
ArmLIR
 *è
d©aT¬g‘
)->
İ”ªds
[0])) <=

132 
d–
)

133  (
ArmLIR
 *è
d©aT¬g‘
;

134 
d©aT¬g‘
 = d©aT¬g‘->
Ãxt
;

136  
NULL
;

137 
	}
}

140 
	$g’R‘uºCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

142 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_RETURN
);

143 #ià
	`defšed
(
INVOKE_STATS
)

144 
gDvmJ™
.
»tuºOp
++;

146 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
);

148 
ArmLIR
 *
b¿nch
 = 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
NULL
);

150 
ArmLIR
 *
püLab–
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

151 
püLab–
->
İCode
 = 
ARM_PSEUDO_PC_RECONSTRUCTION_CELL
;

152 
püLab–
->
İ”ªds
[0] = 
dPC
;

153 
püLab–
->
İ”ªds
[1] = 
mœ
->
off£t
;

155 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, 
püLab–
);

157 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *è
püLab–
;

158 
	}
}

164 
	$g’Bš¬yOpWide
(
Comp©iÚUn™
 *
cUn™
, 
vDe¡
,

165 
ArmOpCode
 
´eš¡
, ArmOpCod
š¡
,

166 
»g0
, 
»g2
)

168 
»g1
 = 
	`NEXT_REG
(
»g0
);

169 
»g3
 = 
	`NEXT_REG
(
»g2
);

170 
	`ÃwLIR23
(
cUn™
, 
´eš¡
, 
»g0
, 
»g2
);

171 
	`ÃwLIR23
(
cUn™
, 
š¡
, 
»g1
, 
»g3
);

172 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vDe¡
, 
»g2
);

173 
	}
}

176 
	$g’Bš¬yOp
(
Comp©iÚUn™
 *
cUn™
, 
vDe¡
, 
ArmOpCode
 
š¡
,

177 
»g0
, 
»g1
, 
»gDe¡
)

179 ià(
EncodšgM­
[
š¡
].
æags
 & 
IS_BINARY_OP
) {

180 
	`ÃwLIR2
(
cUn™
, 
š¡
, 
»g0
, 
»g1
);

181 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g1
);

183 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»gDe¡
, 
»g0
, 
»g1
);

184 
	`¡ÜeV®ue
(
cUn™
, 
»gDe¡
, 
vDe¡
, 
»g1
);

186 
	}
}

189 
šlše
 
ArmLIR
 *
	$g’CheckCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
dOff£t
,

190 
ArmLIR
 *
b¿nch
,

191 
ArmLIR
 *
püLab–
)

194 ià(
püLab–
 =ğ
NULL
) {

195 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
dOff£t
);

196 
püLab–
 = 
	`dvmComp”New
((
ArmLIR
), 
Œue
);

197 
püLab–
->
İCode
 = 
ARM_PSEUDO_PC_RECONSTRUCTION_CELL
;

198 
püLab–
->
İ”ªds
[0] = 
dPC
;

199 
püLab–
->
İ”ªds
[1] = 
dOff£t
;

201 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, 
püLab–
);

204 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *è
püLab–
;

205  
püLab–
;

206 
	}
}

213 
šlše
 
ArmLIR
 *
	$š”tRegRegCheck
(
Comp©iÚUn™
 *
cUn™
,

214 
ArmCÚd™iÚCode
 
cÚd
,

215 
»g1
, 
»g2
, 
dOff£t
,

216 
ArmLIR
 *
püLab–
)

218 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RR
, 
»g1
, 
»g2
);

219 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
cÚd
);

220  
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

221 
	}
}

228 
ArmLIR
 *
	$g’NuÎCheck
(
Comp©iÚUn™
 *
cUn™
, 
vReg
, 
mReg
,

229 
dOff£t
, 
ArmLIR
 *
püLab–
)

232 ià(
	`dvmIsB™S‘
(
cUn™
->
»gi¡”ScÜebßrd
.
nuÎCheckedRegs
, 
vReg
)) {

233  
püLab–
;

235 
	`dvmS‘B™
(
cUn™
->
»gi¡”ScÜebßrd
.
nuÎCheckedRegs
, 
vReg
);

236  
	`g’RegImmCheck
(
cUn™
, 
ARM_COND_EQ
, 
mReg
, 0, 
dOff£t
, 
püLab–
);

237 
	}
}

243 
ArmLIR
 *
	$g’Z”oCheck
(
Comp©iÚUn™
 *
cUn™
, 
mReg
,

244 
dOff£t
, 
ArmLIR
 *
püLab–
)

246  
	`g’RegImmCheck
(
cUn™
, 
ARM_COND_EQ
, 
mReg
, 0, 
dOff£t
, 
püLab–
);

247 
	}
}

250 
ArmLIR
 *
	$g’BoundsCheck
(
Comp©iÚUn™
 *
cUn™
, 
rIndex
,

251 
rBound
, 
dOff£t
, 
ArmLIR
 *
püLab–
)

253  
	`š”tRegRegCheck
(
cUn™
, 
ARM_COND_CS
, 
rIndex
, 
rBound
, 
dOff£t
,

254 
püLab–
);

255 
	}
}

258 
šlše
 
ArmLIR
 *
	$g’T¿p
(
Comp©iÚUn™
 *
cUn™
, 
dOff£t
,

259 
ArmLIR
 *
püLab–
)

261 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR0
(
cUn™
, 
THUMB_B_UNCOND
);

262  
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

263 
	}
}

266 
	$g’IG‘Wide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
f›ldOff£t
)

268 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

269 
»g0
, 
»g1
, 
»g2
, 
»g3
;

274 
»g2
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
vB
, 
çl£
);

276 
»g3
 = 
»g2
 ^ 0x1;

280 
»g0
 = (
»g2
 + 2) & 0x2;

281 
»g1
 = 
	`NEXT_REG
(
»g0
);

283 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
vB
, 
»g2
);

284 
	`lßdCÚ¡ªt
(
cUn™
, 
»g3
, 
f›ldOff£t
);

285 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
vB
, 
»g2
, 
mœ
->
off£t
, 
NULL
);

286 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»g2
,„eg2, 
»g3
);

287 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
»g2
, (1<<
»g0
 | 1<<
»g1
));

288 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
dIn¢
->
vA
, 
»g3
);

289 
	}
}

292 
	$g’IPutWide
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
f›ldOff£t
)

294 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

295 
»g0
, 
»g1
, 
»g2
, 
»g3
;

300 
»g2
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
vB
, 
çl£
);

302 
»g3
 = 
»g2
 ^ 0x1;

306 
»g0
 = (
»g2
 + 2) & 0x2;

307 
»g1
 = 
	`NEXT_REG
(
»g0
);

310 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
vB
, 
»g2
);

311 
	`lßdV®uePaœ
(
cUn™
, 
dIn¢
->
vA
, 
»g0
, 
»g1
);

312 
	`upd©eLiveRegi¡”Paœ
(
cUn™
, 
dIn¢
->
vA
, 
»g0
, 
»g1
);

313 
	`lßdCÚ¡ªt
(
cUn™
, 
»g3
, 
f›ldOff£t
);

314 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
vB
, 
»g2
, 
mœ
->
off£t
, 
NULL
);

315 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»g2
,„eg2, 
»g3
);

316 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
»g2
, (1<<
»g0
 | 1<<
»g1
));

317 
	}
}

329 
	$g’IG‘
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
ArmOpCode
 
š¡
,

330 
f›ldOff£t
)

332 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

333 
»g0
, 
»g1
;

335 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
vB
, 
çl£
);

336 
»g1
 = 
	`NEXT_REG
(
»g0
);

338 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
vB
, 
»g0
);

339 
	`lßdCÚ¡ªt
(
cUn™
, 
»g1
, 
f›ldOff£t
);

340 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
vB
, 
»g0
, 
mœ
->
off£t
, 
NULL
);

341 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g0
,„eg0, 
»g1
);

342 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
dIn¢
->
vA
, 
»g1
);

343 
	}
}

353 
	$g’IPut
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
ArmOpCode
 
š¡
,

354 
f›ldOff£t
)

356 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

357 
»g0
, 
»g1
, 
»g2
;

359 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
vB
, 
çl£
);

360 
»g1
 = 
	`NEXT_REG
(
»g0
);

361 
»g2
 = 
	`NEXT_REG
(
»g1
);

364 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
vB
, 
»g0
);

365 
	`lßdCÚ¡ªt
(
cUn™
, 
»g1
, 
f›ldOff£t
);

366 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
vA
, 
»g2
);

367 
	`upd©eLiveRegi¡”
(
cUn™
, 
dIn¢
->
vA
, 
»g2
);

368 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
vB
, 
»g0
, 
mœ
->
off£t
, 
NULL
);

369 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g2
, 
»g0
, 
»g1
);

370 
	}
}

385 
	$g’A¼ayG‘
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
ArmOpCode
 
š¡
,

386 
vA¼ay
, 
vIndex
, 
vDe¡
, 
sÿË
)

388 
ËnOff£t
 = 
	`off£tof
(
A¼ayObjeù
, 
Ëngth
);

389 
d©aOff£t
 = 
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
);

390 
»g0
, 
»g1
, 
»g2
, 
»g3
;

392 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vA¼ay
, 
çl£
);

393 
»g1
 = 
	`NEXT_REG
(
»g0
);

394 
»g2
 = 
	`NEXT_REG
(
»g1
);

395 
»g3
 = 
	`NEXT_REG
(
»g2
);

397 
	`lßdV®ue
(
cUn™
, 
vA¼ay
, 
»g2
);

398 
	`lßdV®ue
(
cUn™
, 
vIndex
, 
»g3
);

401 
ArmLIR
 * 
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
vA¼ay
, 
»g2
, 
mœ
->
off£t
,

402 
NULL
);

403 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
»g0
, 
»g2
, 
ËnOff£t
 >> 2);

404 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
»g2
, 
d©aOff£t
);

405 
	`g’BoundsCheck
(
cUn™
, 
»g3
, 
»g0
, 
mœ
->
off£t
, 
püLab–
);

406 ià(
sÿË
) {

407 
	`ÃwLIR3
(
cUn™
, 
THUMB_LSL
, 
»g3
,„eg3, 
sÿË
);

409 ià(
sÿË
==3) {

410 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g0
, 
»g2
, 
»g3
);

411 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
»g2
, 4);

412 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g1
, 
»g2
, 
»g3
);

413 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vDe¡
, 
»g3
);

415 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g0
, 
»g2
, 
»g3
);

416 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g3
);

418 
	}
}

430 
	$g’A¼ayPut
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
ArmOpCode
 
š¡
,

431 
vA¼ay
, 
vIndex
, 
vSrc
, 
sÿË
)

433 
ËnOff£t
 = 
	`off£tof
(
A¼ayObjeù
, 
Ëngth
);

434 
d©aOff£t
 = 
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
);

435 
»g0
, 
»g1
, 
»g2
, 
»g3
;

437 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vA¼ay
, 
çl£
);

438 
»g1
 = 
	`NEXT_REG
(
»g0
);

439 
»g2
 = 
	`NEXT_REG
(
»g1
);

440 
»g3
 = 
	`NEXT_REG
(
»g2
);

442 
	`lßdV®ue
(
cUn™
, 
vA¼ay
, 
»g2
);

443 
	`lßdV®ue
(
cUn™
, 
vIndex
, 
»g3
);

446 
ArmLIR
 * 
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
vA¼ay
, 
»g2
, 
mœ
->
off£t
,

447 
NULL
);

448 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
»g0
, 
»g2
, 
ËnOff£t
 >> 2);

449 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
»g2
, 
d©aOff£t
);

450 
	`g’BoundsCheck
(
cUn™
, 
»g3
, 
»g0
, 
mœ
->
off£t
, 
püLab–
);

452 ià(
sÿË
==3) {

453 
	`lßdV®uePaœ
(
cUn™
, 
vSrc
, 
»g0
, 
»g1
);

454 
	`upd©eLiveRegi¡”Paœ
(
cUn™
, 
vSrc
, 
»g0
, 
»g1
);

456 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
»g0
);

457 
	`upd©eLiveRegi¡”
(
cUn™
, 
vSrc
, 
»g0
);

459 ià(
sÿË
) {

460 
	`ÃwLIR3
(
cUn™
, 
THUMB_LSL
, 
»g3
,„eg3, 
sÿË
);

466 ià(
sÿË
==3) {

467 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g0
, 
»g2
, 
»g3
);

468 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
»g2
, 4);

469 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g1
, 
»g2
, 
»g3
);

471 
	`ÃwLIR3
(
cUn™
, 
š¡
, 
»g0
, 
»g2
, 
»g3
);

473 
	}
}

475 
boŞ
 
	$g’ShiáOpLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

476 
vSrc1
, 
vShiá
)

482 
	`lßdV®ue
(
cUn™
, 
vShiá
, 
r2
);

483 
	`lßdV®uePaœ
(
cUn™
, 
vSrc1
, 
r0
, 
r1
);

484  
mœ
->
d®vikIn¢
.
İCode
) {

485 
OP_SHL_LONG
:

486 
OP_SHL_LONG_2ADDR
:

487 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_SHL_LONG
);

489 
OP_SHR_LONG
:

490 
OP_SHR_LONG_2ADDR
:

491 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_SHR_LONG
);

493 
OP_USHR_LONG
:

494 
OP_USHR_LONG_2ADDR
:

495 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_USHR_LONG
);

498  
Œue
;

500 
	`¡ÜeV®uePaœ
(
cUn™
, 
r0
, 
r1
, 
vDe¡
, 
r2
);

501  
çl£
;

502 
	}
}

503 
boŞ
 
	$g’Ar™hOpFlßtPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

504 
vDe¡
, 
vSrc1
, 
vSrc2
)

510 * 
funù
;

511 
»g0
, 
»g1
;

514 
	`__«abi_çdd
(
a
, 
b
);

515 
	`__«abi_fsub
(
a
, 
b
);

516 
	`__«abi_fdiv
(
a
, 
b
);

517 
	`__«abi_fmul
(
a
, 
b
);

518 
	`fmodf
(
a
, 
b
);

520 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
çl£
);

521 
»g1
 = 
	`NEXT_REG
(
»g0
);

523 
mœ
->
d®vikIn¢
.
İCode
) {

524 
OP_ADD_FLOAT_2ADDR
:

525 
OP_ADD_FLOAT
:

526 
funù
 = (*è
__«abi_çdd
;

528 
OP_SUB_FLOAT_2ADDR
:

529 
OP_SUB_FLOAT
:

530 
funù
 = (*è
__«abi_fsub
;

532 
OP_DIV_FLOAT_2ADDR
:

533 
OP_DIV_FLOAT
:

534 
funù
 = (*è
__«abi_fdiv
;

536 
OP_MUL_FLOAT_2ADDR
:

537 
OP_MUL_FLOAT
:

538 
funù
 = (*è
__«abi_fmul
;

540 
OP_REM_FLOAT_2ADDR
:

541 
OP_REM_FLOAT
:

542 
funù
 = (*è
fmodf
;

544 
OP_NEG_FLOAT
: {

545 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

546 
	`lßdCÚ¡ªt
(
cUn™
, 
»g1
, 0x80000000);

547 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»g0
,„eg0, 
»g1
);

548 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g1
);

549  
çl£
;

552  
Œue
;

554 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, ()
funù
);

555 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
r0
);

556 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
r1
);

557 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

558 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

559  
çl£
;

560 
	}
}

562 
boŞ
 
	$g’Ar™hOpDoubËPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

563 
vDe¡
, 
vSrc1
, 
vSrc2
)

565 * 
funù
;

566 
»g0
, 
»g1
, 
»g2
;

569 
	`__«abi_dadd
(
a
, 
b
);

570 
	`__«abi_dsub
(
a
, 
b
);

571 
	`__«abi_ddiv
(
a
, 
b
);

572 
	`__«abi_dmul
(
a
, 
b
);

573 
	`fmod
(
a
, 
b
);

575 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
Œue
);

576 
»g1
 = 
	`NEXT_REG
(
»g0
);

577 
»g2
 = 
	`NEXT_REG
(
»g1
);

579 
mœ
->
d®vikIn¢
.
İCode
) {

580 
OP_ADD_DOUBLE_2ADDR
:

581 
OP_ADD_DOUBLE
:

582 
funù
 = (*è
__«abi_dadd
;

584 
OP_SUB_DOUBLE_2ADDR
:

585 
OP_SUB_DOUBLE
:

586 
funù
 = (*è
__«abi_dsub
;

588 
OP_DIV_DOUBLE_2ADDR
:

589 
OP_DIV_DOUBLE
:

590 
funù
 = (*è
__«abi_ddiv
;

592 
OP_MUL_DOUBLE_2ADDR
:

593 
OP_MUL_DOUBLE
:

594 
funù
 = (*è
__«abi_dmul
;

596 
OP_REM_DOUBLE_2ADDR
:

597 
OP_REM_DOUBLE
:

598 
funù
 = (*è
fmod
;

600 
OP_NEG_DOUBLE
: {

601 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
»g0
, 
»g1
);

602 
	`lßdCÚ¡ªt
(
cUn™
, 
»g2
, 0x80000000);

603 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»g1
,„eg1, 
»g2
);

604 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vDe¡
, 
»g2
);

605  
çl£
;

608  
Œue
;

614 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
funù
);

615 
	`lßdV®uePaœ
(
cUn™
, 
vSrc1
, 
r0
, 
r1
);

616 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
r2
, 
r3
);

617 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

618 
	`¡ÜeV®uePaœ
(
cUn™
, 
r0
, 
r1
, 
vDe¡
, 
r2
);

619  
çl£
;

620 
	}
}

622 
boŞ
 
	$g’Ar™hOpLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

623 
vSrc1
, 
vSrc2
)

625 
fœ¡Op
 = 
THUMB_BKPT
;

626 
£cÚdOp
 = 
THUMB_BKPT
;

627 
boŞ
 
ÿÎOut
 = 
çl£
;

628 *
ÿÎTgt
;

629 
»tReg
 = 
r0
;

630 
»g0
, 
»g1
, 
»g2
, 
»g3
;

632 
	`__«abi_ldivmod
(
İ1
, 
İ2
);

634 
mœ
->
d®vikIn¢
.
İCode
) {

635 
OP_NOT_LONG
:

636 
fœ¡Op
 = 
THUMB_MVN
;

637 
£cÚdOp
 = 
THUMB_MVN
;

639 
OP_ADD_LONG
:

640 
OP_ADD_LONG_2ADDR
:

641 
fœ¡Op
 = 
THUMB_ADD_RRR
;

642 
£cÚdOp
 = 
THUMB_ADC
;

644 
OP_SUB_LONG
:

645 
OP_SUB_LONG_2ADDR
:

646 
fœ¡Op
 = 
THUMB_SUB_RRR
;

647 
£cÚdOp
 = 
THUMB_SBC
;

649 
OP_MUL_LONG
:

650 
OP_MUL_LONG_2ADDR
:

651 
	`lßdV®uePaœ
(
cUn™
, 
vSrc1
, 
r0
, 
r1
);

652 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
r2
, 
r3
);

653 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_MUL_LONG
);

654 
	`¡ÜeV®uePaœ
(
cUn™
, 
r0
, 
r1
, 
vDe¡
, 
r2
);

655  
çl£
;

657 
OP_DIV_LONG
:

658 
OP_DIV_LONG_2ADDR
:

659 
ÿÎOut
 = 
Œue
;

660 
»tReg
 = 
r0
;

661 
ÿÎTgt
 = (*)
__«abi_ldivmod
;

664 
OP_REM_LONG
:

665 
OP_REM_LONG_2ADDR
:

666 
ÿÎOut
 = 
Œue
;

667 
ÿÎTgt
 = (*)
__«abi_ldivmod
;

668 
»tReg
 = 
r2
;

670 
OP_AND_LONG
:

671 
OP_AND_LONG_2ADDR
:

672 
fœ¡Op
 = 
THUMB_AND_RR
;

673 
£cÚdOp
 = 
THUMB_AND_RR
;

675 
OP_OR_LONG
:

676 
OP_OR_LONG_2ADDR
:

677 
fœ¡Op
 = 
THUMB_ORR
;

678 
£cÚdOp
 = 
THUMB_ORR
;

680 
OP_XOR_LONG
:

681 
OP_XOR_LONG_2ADDR
:

682 
fœ¡Op
 = 
THUMB_EOR
;

683 
£cÚdOp
 = 
THUMB_EOR
;

685 
OP_NEG_LONG
: {

686 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
Œue
);

687 
»g1
 = 
	`NEXT_REG
(
»g0
);

688 
»g2
 = 
	`NEXT_REG
(
»g1
);

689 
»g3
 = 
	`NEXT_REG
(
»g2
);

691 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
»g0
, 
»g1
);

692 
	`lßdCÚ¡ªt
(
cUn™
, 
»g3
, 0);

693 
	`ÃwLIR3
(
cUn™
, 
THUMB_SUB_RRR
, 
»g2
, 
»g3
, 
»g0
);

694 
	`ÃwLIR2
(
cUn™
, 
THUMB_SBC
, 
»g3
, 
»g1
);

695 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g2
, 
»g3
, 
vDe¡
, 
»g0
);

696  
çl£
;

699 
	`LOGE
("Invalid†ong‡rith op");

700 
	`dvmAbÜt
();

702 ià(!
ÿÎOut
) {

703 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc1
, 
Œue
);

704 
»g1
 = 
	`NEXT_REG
(
»g0
);

705 
»g2
 = 
	`NEXT_REG
(
»g1
);

706 
»g3
 = 
	`NEXT_REG
(
»g2
);

708 
	`lßdV®uePaœ
(
cUn™
, 
vSrc1
, 
»g0
, 
»g1
);

709 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
»g2
, 
»g3
);

710 
	`g’Bš¬yOpWide
(
cUn™
, 
vDe¡
, 
fœ¡Op
, 
£cÚdOp
, 
»g0
, 
»g2
);

716 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
r2
, 
r3
);

717 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, (è
ÿÎTgt
);

718 
	`lßdV®uePaœ
(
cUn™
, 
vSrc1
, 
r0
, 
r1
);

719 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

720 
	`¡ÜeV®uePaœ
(
cUn™
, 
»tReg
,„‘Reg+1, 
vDe¡
, 
r4PC
);

722  
çl£
;

723 
	}
}

725 
boŞ
 
	$g’Ar™hOpIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

726 
vSrc1
, 
vSrc2
)

728 
¬mOp
 = 
THUMB_BKPT
;

729 
boŞ
 
ÿÎOut
 = 
çl£
;

730 
boŞ
 
checkZ”o
 = 
çl£
;

731 
»tReg
 = 
r0
;

732 *
ÿÎTgt
;

733 
»g0
, 
»g1
, 
»gDe¡
;

736 
	`__«abi_idivmod
(
İ1
, 
İ2
);

737 
	`__«abi_idiv
(
İ1
, 
İ2
);

739 
mœ
->
d®vikIn¢
.
İCode
) {

740 
OP_NEG_INT
:

741 
¬mOp
 = 
THUMB_NEG
;

743 
OP_NOT_INT
:

744 
¬mOp
 = 
THUMB_MVN
;

746 
OP_ADD_INT
:

747 
OP_ADD_INT_2ADDR
:

748 
¬mOp
 = 
THUMB_ADD_RRR
;

750 
OP_SUB_INT
:

751 
OP_SUB_INT_2ADDR
:

752 
¬mOp
 = 
THUMB_SUB_RRR
;

754 
OP_MUL_INT
:

755 
OP_MUL_INT_2ADDR
:

756 
¬mOp
 = 
THUMB_MUL
;

758 
OP_DIV_INT
:

759 
OP_DIV_INT_2ADDR
:

760 
ÿÎOut
 = 
Œue
;

761 
checkZ”o
 = 
Œue
;

762 
ÿÎTgt
 = 
__«abi_idiv
;

763 
»tReg
 = 
r0
;

766 
OP_REM_INT
:

767 
OP_REM_INT_2ADDR
:

768 
ÿÎOut
 = 
Œue
;

769 
checkZ”o
 = 
Œue
;

770 
ÿÎTgt
 = 
__«abi_idivmod
;

771 
»tReg
 = 
r1
;

773 
OP_AND_INT
:

774 
OP_AND_INT_2ADDR
:

775 
¬mOp
 = 
THUMB_AND_RR
;

777 
OP_OR_INT
:

778 
OP_OR_INT_2ADDR
:

779 
¬mOp
 = 
THUMB_ORR
;

781 
OP_XOR_INT
:

782 
OP_XOR_INT_2ADDR
:

783 
¬mOp
 = 
THUMB_EOR
;

785 
OP_SHL_INT
:

786 
OP_SHL_INT_2ADDR
:

787 
¬mOp
 = 
THUMB_LSLV
;

789 
OP_SHR_INT
:

790 
OP_SHR_INT_2ADDR
:

791 
¬mOp
 = 
THUMB_ASRV
;

793 
OP_USHR_INT
:

794 
OP_USHR_INT_2ADDR
:

795 
¬mOp
 = 
THUMB_LSRV
;

798 
	`LOGE
("Invalid word‡rith op: 0x%x(%d)",

799 
mœ
->
d®vikIn¢
.
İCode
, mir->dalvikInsn.opCode);

800 
	`dvmAbÜt
();

802 ià(!
ÿÎOut
) {

804 ià(
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 =ğ
vSrc1
) {

805 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc1
, 
çl£
);

806 
»g1
 = 
	`NEXT_REG
(
»g0
);

807 
»gDe¡
 = 
	`NEXT_REG
(
»g1
);

809 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
»g0
);

810 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g1
);

811 
	`g’Bš¬yOp
(
cUn™
, 
vDe¡
, 
¬mOp
, 
»g0
, 
»g1
, 
»gDe¡
);

813 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
çl£
);

814 
»g1
 = 
	`NEXT_REG
(
»g0
);

815 
»gDe¡
 = 
	`NEXT_REG
(
»g1
);

817 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
»g1
);

818 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

819 
	`g’Bš¬yOp
(
cUn™
, 
vDe¡
, 
¬mOp
, 
»g1
, 
»g0
, 
»gDe¡
);

826 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, (è
ÿÎTgt
);

831 ià(
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 !ğ
vSrc2
 ||

832 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveReg
 =ğ
r0
) {

834 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
r1
);

836 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
r0
);

838 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
r0
);

839 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
r1
);

841 ià(
checkZ”o
) {

842 
	`g’NuÎCheck
(
cUn™
, 
vSrc2
, 
r1
, 
mœ
->
off£t
, 
NULL
);

844 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

845 
	`¡ÜeV®ue
(
cUn™
, 
»tReg
, 
vDe¡
, 
r2
);

847  
çl£
;

848 
	}
}

850 
boŞ
 
	$g’Ar™hOp
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

852 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

853 
vA
 = 
mœ
->
d®vikIn¢
.vA;

854 
vB
 = 
mœ
->
d®vikIn¢
.vB;

855 
vC
 = 
mœ
->
d®vikIn¢
.vC;

857 ià((
İCode
 >ğ
OP_ADD_LONG_2ADDR
è&& (İCod<ğ
OP_XOR_LONG_2ADDR
)) {

858  
	`g’Ar™hOpLÚg
(
cUn™
,
mœ
, 
vA
, vA, 
vB
);

860 ià((
İCode
 >ğ
OP_ADD_LONG
è&& (İCod<ğ
OP_XOR_LONG
)) {

861  
	`g’Ar™hOpLÚg
(
cUn™
,
mœ
, 
vA
, 
vB
, 
vC
);

863 ià((
İCode
 >ğ
OP_SHL_LONG_2ADDR
è&& (İCod<ğ
OP_USHR_LONG_2ADDR
)) {

864  
	`g’ShiáOpLÚg
(
cUn™
,
mœ
, 
vA
, vA, 
vB
);

866 ià((
İCode
 >ğ
OP_SHL_LONG
è&& (İCod<ğ
OP_USHR_LONG
)) {

867  
	`g’ShiáOpLÚg
(
cUn™
,
mœ
, 
vA
, 
vB
, 
vC
);

869 ià((
İCode
 >ğ
OP_ADD_INT_2ADDR
è&& (İCod<ğ
OP_USHR_INT_2ADDR
)) {

870  
	`g’Ar™hOpIÁ
(
cUn™
,
mœ
, 
vA
, vA, 
vB
);

872 ià((
İCode
 >ğ
OP_ADD_INT
è&& (İCod<ğ
OP_USHR_INT
)) {

873  
	`g’Ar™hOpIÁ
(
cUn™
,
mœ
, 
vA
, 
vB
, 
vC
);

875 ià((
İCode
 >ğ
OP_ADD_FLOAT_2ADDR
è&& (İCod<ğ
OP_REM_FLOAT_2ADDR
)) {

876  
	`g’Ar™hOpFlßt
(
cUn™
,
mœ
, 
vA
, vA, 
vB
);

878 ià((
İCode
 >ğ
OP_ADD_FLOAT
è&& (İCod<ğ
OP_REM_FLOAT
)) {

879  
	`g’Ar™hOpFlßt
(
cUn™
, 
mœ
, 
vA
, 
vB
, 
vC
);

881 ià((
İCode
 >ğ
OP_ADD_DOUBLE_2ADDR
è&& (İCod<ğ
OP_REM_DOUBLE_2ADDR
)) {

882  
	`g’Ar™hOpDoubË
(
cUn™
,
mœ
, 
vA
, vA, 
vB
);

884 ià((
İCode
 >ğ
OP_ADD_DOUBLE
è&& (İCod<ğ
OP_REM_DOUBLE
)) {

885  
	`g’Ar™hOpDoubË
(
cUn™
,
mœ
, 
vA
, 
vB
, 
vC
);

887  
Œue
;

888 
	}
}

890 
boŞ
 
	$g’CÚv”siÚC®l
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, *
funù
,

891 
¤cSize
, 
tgtSize
)

897 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, ()
funù
);

898 ià(
¤cSize
 == 1) {

899 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
r0
);

901 
	`lßdV®uePaœ
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
r0
, 
r1
);

903 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

904 ià(
tgtSize
 == 1) {

905 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

907 
	`¡ÜeV®uePaœ
(
cUn™
, 
r0
, 
r1
, 
mœ
->
d®vikIn¢
.
vA
, 
r2
);

909  
çl£
;

910 
	}
}

912 
boŞ
 
	$g’IÆšedSŒšgL’gth
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

914 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

915 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

916 
»gObj
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
çl£
);

917 
»g1
 = 
	`NEXT_REG
(
»gObj
);

918 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[0], 
»gObj
);

919 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
¬g
[0], 
»gObj
, 
mœ
->
off£t
, 
NULL
);

920 
	`lßdWÜdDi¥
(
cUn™
, 
»gObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
, 
»g1
);

921 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
»g1
, 
rGLUE
, 
off£t
 >> 2);

922  
çl£
;

923 
	}
}

935 
boŞ
 
	$g’IÆšedSŒšgCh¬At
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

937 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

938 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

939 
cÚ‹Ás
 = 
	`off£tof
(
A¼ayObjeù
, contents);

940 
»gObj
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
çl£
);

941 
»gIdx
 = 
	`NEXT_REG
(
»gObj
);

942 
»gMax
 = 
	`NEXT_REG
(
»gIdx
);

943 
»gOff
 = 
	`NEXT_REG
(
»gMax
);

944 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[0], 
»gObj
);

945 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[1], 
»gIdx
);

946 
ArmLIR
 * 
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
¬g
[0], 
»gObj
,

947 
mœ
->
off£t
, 
NULL
);

948 
	`lßdWÜdDi¥
(
cUn™
, 
»gObj
, 
gDvm
.
offJavaLªgSŒšg_couÁ
, 
»gMax
);

949 
	`lßdWÜdDi¥
(
cUn™
, 
»gObj
, 
gDvm
.
offJavaLªgSŒšg_off£t
, 
»gOff
);

950 
	`lßdWÜdDi¥
(
cUn™
, 
»gObj
, 
gDvm
.
offJavaLªgSŒšg_v®ue
,„egObj);

951 
	`g’BoundsCheck
(
cUn™
, 
»gIdx
, 
»gMax
, 
mœ
->
off£t
, 
püLab–
);

953 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
»gObj
, 
cÚ‹Ás
);

954 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»gIdx
,„egIdx, 
»gOff
);

955 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»gIdx
,„egIdx,„egIdx);

956 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDRH_RRR
, 
»gMax
, 
»gObj
, 
»gIdx
);

957 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
»gMax
, 
rGLUE
, 
off£t
 >> 2);

958  
çl£
;

959 
	}
}

961 
boŞ
 
	$g’IÆšedAbsIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

963 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

964 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

965 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
çl£
);

966 
sign
 = 
	`NEXT_REG
(
»g0
);

968 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[0], 
»g0
);

969 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
sign
, 
»g0
, 31);

970 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
»g0
,„eg0, 
sign
);

971 
	`ÃwLIR2
(
cUn™
, 
THUMB_EOR
, 
»g0
, 
sign
);

972 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
»g0
, 
rGLUE
, 
off£t
 >> 2);

973  
çl£
;

974 
	}
}

976 
boŞ
 
	$g’IÆšedAbsFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

978 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

979 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

980 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
çl£
);

981 
signMask
 = 
	`NEXT_REG
(
»g0
);

982 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[0], 
»g0
);

983 
	`lßdCÚ¡ªt
(
cUn™
, 
signMask
, 0x7fffffff);

984 
	`ÃwLIR2
(
cUn™
, 
THUMB_AND_RR
, 
»g0
, 
signMask
);

985 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
»g0
, 
rGLUE
, 
off£t
 >> 2);

986  
çl£
;

987 
	}
}

989 
boŞ
 
	$g’IÆšedAbsDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

991 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

992 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

993 
İlo
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
Œue
);

994 
İhi
 = 
	`NEXT_REG
(
İlo
);

995 
signMask
 = 
	`NEXT_REG
(
İhi
);

996 
	`lßdV®uePaœ
(
cUn™
, 
dIn¢
->
¬g
[0], 
İlo
, 
İhi
);

997 
	`lßdCÚ¡ªt
(
cUn™
, 
signMask
, 0x7fffffff);

998 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
İlo
, 
rGLUE
, 
off£t
 >> 2);

999 
	`ÃwLIR2
(
cUn™
, 
THUMB_AND_RR
, 
İhi
, 
signMask
);

1000 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
İhi
, 
rGLUE
, (
off£t
 >> 2)+1);

1001  
çl£
;

1002 
	}
}

1005 
boŞ
 
	$g’IÆšedMšMaxIÁ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
boŞ
 
isMš
)

1007 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

1008 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1009 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
çl£
);

1010 
»g1
 = 
	`NEXT_REG
(
»g0
);

1011 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[0], 
»g0
);

1012 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[1], 
»g1
);

1013 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RR
, 
»g0
, 
»g1
);

1014 
ArmLIR
 *
b¿nch1
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 2,

1015 
isMš
 ? 
ARM_COND_LT
 : 
ARM_COND_GT
);

1016 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
»g0
, 
»g1
);

1017 
ArmLIR
 *
rg‘
 =

1018 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
»g0
, 
rGLUE
, 
off£t
 >> 2);

1019 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

1020  
çl£
;

1021 
	}
}

1023 
boŞ
 
	$g’IÆšedAbsLÚg
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1025 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

1026 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

1027 
İlo
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
dIn¢
->
¬g
[0], 
Œue
);

1028 
İhi
 = 
	`NEXT_REG
(
İlo
);

1029 
sign
 = 
	`NEXT_REG
(
İhi
);

1031 
	`lßdV®uePaœ
(
cUn™
, 
dIn¢
->
¬g
[0], 
İlo
, 
İhi
);

1032 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
sign
, 
İhi
, 31);

1033 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
İlo
, o¶o, 
sign
);

1034 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADC
, 
İhi
, 
sign
);

1035 
	`ÃwLIR2
(
cUn™
, 
THUMB_EOR
, 
İlo
, 
sign
);

1036 
	`ÃwLIR2
(
cUn™
, 
THUMB_EOR
, 
İhi
, 
sign
);

1037 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
İlo
, 
rGLUE
, 
off£t
 >> 2);

1038 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
İhi
, 
rGLUE
, (
off£t
 >> 2)+1);

1039  
çl£
;

1040 
	}
}

1042 
	$g’ProûssArgsNoRªge
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1043 
DecodedIn¡ruùiÚ
 *
dIn¢
,

1044 
ArmLIR
 **
püLab–
)

1046 
i
;

1047 
»gMask
 = 0;

1050 
i
 = 0; i < 
dIn¢
->
vA
; i++) {

1051 
»gMask
 |ğ1 << 
i
;

1052 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[
i
], i);

1054 ià(
»gMask
) {

1056 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
r7
, 
rFP
);

1057 
	`ÃwLIR2
(
cUn™
, 
THUMB_SUB_RI8
, 
r7
,

1058 (
SckSaveA»a
è+ (
dIn¢
->
vA
 << 2));

1060 ià(
püLab–
) {

1061 *
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
¬g
[0], 
r0
, 
mœ
->
off£t
,

1062 
NULL
);

1064 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
r7
, 
»gMask
);

1066 
	}
}

1068 
	$g’ProûssArgsRªge
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1069 
DecodedIn¡ruùiÚ
 *
dIn¢
,

1070 
ArmLIR
 **
püLab–
)

1072 
¤cOff£t
 = 
dIn¢
->
vC
 << 2;

1073 
numArgs
 = 
dIn¢
->
vA
;

1074 
»gMask
;

1079 ià(
¤cOff£t
 < 8) {

1080 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
r4PC
, 
rFP
, 
¤cOff£t
);

1082 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, 
¤cOff£t
);

1083 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
r4PC
, 
rFP
,„4PC);

1086 
»gMask
 = (1 << ((
numArgs
 < 4) ?‚umArgs : 4)) - 1;

1087 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
r4PC
, 
»gMask
);

1089 ià((
SckSaveA»a
è+ (
numArgs
 << 2) < 256) {

1090 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
r7
, 
rFP
);

1091 
	`ÃwLIR2
(
cUn™
, 
THUMB_SUB_RI8
, 
r7
,

1092 (
SckSaveA»a
è+ (
numArgs
 << 2));

1094 
	`lßdCÚ¡ªt
(
cUn™
, 
r7
, (
SckSaveA»a
è+ (
numArgs
 << 2));

1095 
	`ÃwLIR3
(
cUn™
, 
THUMB_SUB_RRR
, 
r7
, 
rFP
,„7);

1099 ià(
püLab–
) {

1100 *
püLab–
 = 
	`g’NuÎCheck
(
cUn™
, 
dIn¢
->
vC
, 
r0
, 
mœ
->
off£t
, 
NULL
);

1107 ià(
numArgs
 >= 8) {

1108 
ArmLIR
 *
loİLab–
 = 
NULL
;

1113 
	`ÃwLIR1
(
cUn™
, 
THUMB_PUSH
, 1 << 
r0
 | 1 << 5);

1115 ià(
numArgs
 > 11) {

1116 
	`lßdCÚ¡ªt
(
cUn™
, 5, ((
numArgs
 - 4) >> 2) << 2);

1117 
loİLab–
 = 
	`ÃwLIR0
(
cUn™
, 
ARM_PSEUDO_TARGET_LABEL
);

1119 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
r7
, 
»gMask
);

1120 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
r4PC
, 
»gMask
);

1122 ià(
numArgs
 > 11) {

1123 
	`ÃwLIR2
(
cUn™
, 
THUMB_SUB_RI8
, 5, 4);

1124 
	`g’CÚd™iÚ®B¿nch
(
cUn™
, 
ARM_COND_NE
, 
loİLab–
);

1129 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
r7
, 
»gMask
);

1132 ià((
numArgs
 > 4) && (numArgs % 4)) {

1133 
»gMask
 = ((1 << (
numArgs
 & 0x3)) - 1) << 1;

1134 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
r4PC
, 
»gMask
);

1136 ià(
numArgs
 >= 8)

1137 
	`ÃwLIR1
(
cUn™
, 
THUMB_POP
, 1 << 
r0
 | 1 << 5);

1140 ià((
numArgs
 > 4) && (numArgs % 4)) {

1141 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
r7
, 
»gMask
);

1143 
	}
}

1149 
	$g’InvokeSšgËtÚCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1150 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
,

1151 
ArmLIR
 *
püLab–
,

1152 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
)

1154 
ArmLIR
 *
»tChaššgC–l
 = &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
];

1157 
ArmLIR
 *
addrR‘Chaš
 = 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_PC_REL
,

1158 
r1
, 0, 0);

1160 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

1161 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1162 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1168 ià(
	`dvmIsN©iveM‘hod
(
ÿÎ“M‘hod
)) {

1169 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_INVOKE_METHOD_NATIVE
);

1170 #ià
	`defšed
(
INVOKE_STATS
)

1171 
gDvmJ™
.
švokeN©ive
++;

1174 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_INVOKE_METHOD_CHAIN
);

1175 #ià
	`defšed
(
INVOKE_STATS
)

1176 
gDvmJ™
.
švokeChaš
++;

1179 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

1182 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

1183 
	}
}

1205 
	$g’InvokeVœtu®CommÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1206 
m‘hodIndex
,

1207 
ArmLIR
 *
»tChaššgC–l
,

1208 
ArmLIR
 *
´edChaššgC–l
,

1209 
ArmLIR
 *
püLab–
)

1214 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

1215 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1218 
ArmLIR
 *
addrR‘Chaš
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_PC_REL
,

1219 
r1
, 0);

1220 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1223 
ArmLIR
 *
´ediùedChaššgC–l
 =

1224 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_PC_REL
, 
r2
, 0);

1225 
´ediùedChaššgC–l
->
g’”ic
.
rg‘
 = (
LIR
 *è
´edChaššgC–l
;

1227 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_INVOKE_METHOD_PREDICTED_CHAIN
);

1230 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
´edChaššgC–l
);

1236 ià(
püLab–
 =ğ
NULL
) {

1237 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
);

1238 
püLab–
 = 
	`dvmComp”New
((
ArmLIR
), 
Œue
);

1239 
püLab–
->
İCode
 = 
ARM_PSEUDO_PC_RECONSTRUCTION_CELL
;

1240 
püLab–
->
İ”ªds
[0] = 
dPC
;

1241 
püLab–
->
İ”ªds
[1] = 
mœ
->
off£t
;

1243 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, 
püLab–
);

1247 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
püLab–
);

1259 ià(
m‘hodIndex
 < 32) {

1260 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
r7
, 
m‘hodIndex
);

1262 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 
m‘hodIndex
<<2);

1263 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRR
, 
r0
, 
r7
,„0);

1267 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
r1
, 0);

1269 
ArmLIR
 *
by·ssRechaššg
 =

1270 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
ARM_COND_GT
);

1272 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r7
, 
rGLUE
,

1273 
	`off£tof
(
IÁ”pS‹
,

1274 
j™ToIÁ”pEÁr›s
.
dvmJ™ToP©chP»diùedChaš
)

1286 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r7
);

1289 
addrR‘Chaš
 = 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_PC_REL
, 
r1
, 0, 0);

1290 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1292 
by·ssRechaššg
->
g’”ic
.
rg‘
 = (
LIR
 *è
addrR‘Chaš
;

1298 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_INVOKE_METHOD_NO_OPT
);

1299 #ià
	`defšed
(
INVOKE_STATS
)

1300 
gDvmJ™
.
švokeP»diùedChaš
++;

1303 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

1304 
	}
}

1315 
ArmLIR
 *
	$g’CheckP»diùedChaš
(
Comp©iÚUn™
 *
cUn™
,

1316 
ArmLIR
 *
´edChaššgC–l
,

1317 
ArmLIR
 *
»tChaššgC–l
,

1318 
MIR
 *
mœ
)

1321 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r3
, 
r0
,

1322 
	`off£tof
(
Objeù
, 
şazz
) >> 2);

1328 
ArmLIR
 *
g‘P»diùedCÏss
 =

1329 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_PC_REL
, 
r2
, 0,

1330 
	`off£tof
(
P»diùedChaššgC–l
, 
şazz
));

1331 
g‘P»diùedCÏss
->
g’”ic
.
rg‘
 = (
LIR
 *è
´edChaššgC–l
;

1337 
ArmLIR
 *
g‘P»diùedM‘hod
 =

1338 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_PC_REL
, 
r0
, 0,

1339 
	`off£tof
(
P»diùedChaššgC–l
, 
m‘hod
));

1340 
g‘P»diùedM‘hod
->
g’”ic
.
rg‘
 = (
LIR
 *è
´edChaššgC–l
;

1343 
ArmLIR
 *
g‘RechaššgReque¡CouÁ
 =

1344 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_PC_REL
, 
r7
, 0,

1345 
	`off£tof
(
P»diùedChaššgC–l
, 
couÁ”
));

1346 
g‘RechaššgReque¡CouÁ
->
g’”ic
.
rg‘
 =

1347 (
LIR
 *è
´edChaššgC–l
;

1350 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

1351 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1354 
ArmLIR
 *
addrR‘Chaš
 = 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_PC_REL
,

1355 
r1
, 0, 0);

1356 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

1359 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RR
, 
r2
, 
r3
);

1361  
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
ARM_COND_EQ
);

1362 
	}
}

1365 
	$g’PuÁToIÁ”p
(
Comp©iÚUn™
 *
cUn™
, 
off£t
)

1368 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
));

1369 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r1
, 
rGLUE
,

1370 
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pPuÁ
) >> 2);

1371 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r1
);

1372 
	}
}

1378 
	$g’IÁ”pSšgËS‹p
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1380 
æags
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
mœ
->
d®vikIn¢
.
İCode
);

1381 
æagsToCheck
 = 
kIn¡rCªB¿nch
 | 
kIn¡rCªSw™ch
 | 
kIn¡rCªR‘uº
 |

1382 
kIn¡rCªThrow
;

1383 ià((
mœ
->
Ãxt
 =ğ
NULL
è|| (
æags
 & 
æagsToCheck
)) {

1384 
	`g’PuÁToIÁ”p
(
cUn™
, 
mœ
->
off£t
);

1387 
’ŒyAddr
 = 
	`off£tof
(
IÁ”pS‹
,

1388 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pSšgËS‹p
);

1389 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r2
, 
rGLUE
, 
’ŒyAddr
 >> 2);

1391 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

1393 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
Ãxt
->
off£t
));

1394 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

1395 
	}
}

1405 
boŞ
 
	$hªdËFmt10t_Fmt20t_Fmt30t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

1406 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

1409 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

1410  
çl£
;

1411 
	}
}

1413 
boŞ
 
	$hªdËFmt10x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1415 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

1416 ià(((
d®vikOpCode
 >ğ
OP_UNUSED_3E
è&& (d®vikOpCod<ğ
OP_UNUSED_43
)) ||

1417 ((
d®vikOpCode
 >ğ
OP_UNUSED_E3
è&& (d®vikOpCod<ğ
OP_UNUSED_EC
))) {

1418 
	`LOGE
("Codeg’: gÙ unu£d opcod0x%x\n",
d®vikOpCode
);

1419  
Œue
;

1421 
d®vikOpCode
) {

1422 
OP_RETURN_VOID
:

1423 
	`g’R‘uºCommÚ
(
cUn™
,
mœ
);

1425 
OP_UNUSED_73
:

1426 
OP_UNUSED_79
:

1427 
OP_UNUSED_7A
:

1428 
	`LOGE
("Codeg’: gÙ unu£d opcod0x%x\n",
d®vikOpCode
);

1429  
Œue
;

1430 
OP_NOP
:

1433  
Œue
;

1435  
çl£
;

1436 
	}
}

1438 
boŞ
 
	$hªdËFmt11n_Fmt31i
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1440 
»g0
, 
»g1
, 
»g2
;

1442 
mœ
->
d®vikIn¢
.
İCode
) {

1443 
OP_CONST
:

1444 
OP_CONST_4
: {

1446 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
çl£
);

1447 
»g1
 = 
	`NEXT_REG
(
»g0
);

1448 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 
mœ
->
d®vikIn¢
.
vB
);

1449 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
mœ
->
d®vikIn¢
.
vA
, 
»g1
);

1452 
OP_CONST_WIDE_32
: {

1454 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
Œue
);

1455 
»g1
 = 
	`NEXT_REG
(
»g0
);

1456 
»g2
 = 
	`NEXT_REG
(
»g1
);

1457 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 
mœ
->
d®vikIn¢
.
vB
);

1458 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
»g1
, 
»g0
, 31);

1459 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
mœ
->
d®vikIn¢
.
vA
, 
»g2
);

1463  
Œue
;

1465  
çl£
;

1466 
	}
}

1468 
boŞ
 
	$hªdËFmt21h
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1470 
»g0
, 
»g1
, 
»g2
;

1473 
mœ
->
d®vikIn¢
.
İCode
) {

1474 
OP_CONST_HIGH16
: {

1475 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
çl£
);

1476 
»g1
 = 
	`NEXT_REG
(
»g0
);

1477 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 
mœ
->
d®vikIn¢
.
vB
 << 16);

1478 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
mœ
->
d®vikIn¢
.
vA
, 
»g1
);

1481 
OP_CONST_WIDE_HIGH16
: {

1482 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
Œue
);

1483 
»g1
 = 
	`NEXT_REG
(
»g0
);

1484 
»g2
 = 
	`NEXT_REG
(
»g1
);

1485 
	`lßdCÚ¡ªt
(
cUn™
, 
»g1
, 
mœ
->
d®vikIn¢
.
vB
 << 16);

1486 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 0);

1487 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
mœ
->
d®vikIn¢
.
vA
, 
»g2
);

1491  
Œue
;

1493  
çl£
;

1494 
	}
}

1496 
boŞ
 
	$hªdËFmt20bc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1499 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1500  
çl£
;

1501 
	}
}

1503 
boŞ
 
	$hªdËFmt21c_Fmt31c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1506 
»gvA
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
çl£
);

1508 
»gvNÚe
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
çl£
);

1510 
»gvAWide
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
Œue
);

1512 
»gvNÚeWide
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
Œue
);

1514 
mœ
->
d®vikIn¢
.
İCode
) {

1519 
OP_CONST_STRING_JUMBO
:

1520 
OP_CONST_STRING
: {

1521 *
¡rPŒ
 = (*)

1522 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResSŒšgs
[
mœ
->
d®vikIn¢
.
vB
]);

1523 
	`as£¹
(
¡rPŒ
 !ğ
NULL
);

1524 
	`lßdCÚ¡ªt
(
cUn™
, 
»gvNÚe
, (è
¡rPŒ
 );

1525 
	`¡ÜeV®ue
(
cUn™
, 
»gvNÚe
, 
mœ
->
d®vikIn¢
.
vA
, 
	`NEXT_REG
(regvNone));

1532 
OP_CONST_CLASS
: {

1533 *
şassPŒ
 = (*)

1534 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vB
]);

1535 
	`as£¹
(
şassPŒ
 !ğ
NULL
);

1536 
	`lßdCÚ¡ªt
(
cUn™
, 
»gvNÚe
, (è
şassPŒ
 );

1537 
	`¡ÜeV®ue
(
cUn™
, 
»gvNÚe
, 
mœ
->
d®vikIn¢
.
vA
, 
	`NEXT_REG
(regvNone));

1540 
OP_SGET_OBJECT
:

1541 
OP_SGET_BOOLEAN
:

1542 
OP_SGET_CHAR
:

1543 
OP_SGET_BYTE
:

1544 
OP_SGET_SHORT
:

1545 
OP_SGET
: {

1546 
v®Off£t
 = 
	`off£tof
(
SticF›ld
, 
v®ue
);

1547 *
f›ldPŒ
 = (*)

1548 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1549 
	`as£¹
(
f›ldPŒ
 !ğ
NULL
);

1550 
	`lßdCÚ¡ªt
(
cUn™
, 
»gvNÚe
, (è
f›ldPŒ
 + 
v®Off£t
);

1551 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
»gvNÚe
,„egvNone, 0);

1552 
	`¡ÜeV®ue
(
cUn™
, 
»gvNÚe
, 
mœ
->
d®vikIn¢
.
vA
, 
	`NEXT_REG
(regvNone));

1555 
OP_SGET_WIDE
: {

1556 
v®Off£t
 = 
	`off£tof
(
SticF›ld
, 
v®ue
);

1557 *
f›ldPŒ
 = (*)

1558 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1559 
»g0
, 
»g1
, 
»g2
;

1561 
	`as£¹
(
f›ldPŒ
 !ğ
NULL
);

1562 
»g0
 = 
»gvNÚeWide
;

1563 
»g1
 = 
	`NEXT_REG
(
»g0
);

1564 
»g2
 = 
	`NEXT_REG
(
»g1
);

1565 
	`lßdCÚ¡ªt
(
cUn™
, 
»g2
, (è
f›ldPŒ
 + 
v®Off£t
);

1566 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
»g2
, (1<<
»g0
 | 1<<
»g1
));

1567 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
mœ
->
d®vikIn¢
.
vA
, 
»g2
);

1570 
OP_SPUT_OBJECT
:

1571 
OP_SPUT_BOOLEAN
:

1572 
OP_SPUT_CHAR
:

1573 
OP_SPUT_BYTE
:

1574 
OP_SPUT_SHORT
:

1575 
OP_SPUT
: {

1576 
v®Off£t
 = 
	`off£tof
(
SticF›ld
, 
v®ue
);

1577 *
f›ldPŒ
 = (*)

1578 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1580 
	`as£¹
(
f›ldPŒ
 !ğ
NULL
);

1581 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»gvA
);

1582 
	`upd©eLiveRegi¡”
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»gvA
);

1583 
	`lßdCÚ¡ªt
(
cUn™
, 
	`NEXT_REG
(
»gvA
), (è
f›ldPŒ
 + 
v®Off£t
);

1584 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
»gvA
, 
	`NEXT_REG
(regvA), 0);

1587 
OP_SPUT_WIDE
: {

1588 
»g0
, 
»g1
, 
»g2
;

1589 
v®Off£t
 = 
	`off£tof
(
SticF›ld
, 
v®ue
);

1590 *
f›ldPŒ
 = (*)

1591 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vB
]);

1593 
	`as£¹
(
f›ldPŒ
 !ğ
NULL
);

1594 
»g0
 = 
»gvAWide
;

1595 
»g1
 = 
	`NEXT_REG
(
»g0
);

1596 
»g2
 = 
	`NEXT_REG
(
»g1
);

1597 
	`lßdV®uePaœ
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»g0
, 
»g1
);

1598 
	`upd©eLiveRegi¡”Paœ
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»g0
, 
»g1
);

1599 
	`lßdCÚ¡ªt
(
cUn™
, 
»g2
, (è
f›ldPŒ
 + 
v®Off£t
);

1600 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
»g2
, (1<<
»g0
 | 1<<
»g1
));

1603 
OP_NEW_INSTANCE
: {

1608 
CÏssObjeù
 *
şassPŒ
 = (*)

1609 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vB
]);

1610 
	`as£¹
(
şassPŒ
 !ğ
NULL
);

1611 
	`as£¹
(
şassPŒ
->
¡©us
 & 
CLASS_INITIALIZED
);

1612 ià((
şassPŒ
->
acûssFÏgs
 & (
ACC_INTERFACE
|
ACC_ABSTRACT
)) != 0) {

1614 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1615  
çl£
;

1617 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmAÎocObjeù
);

1618 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
şassPŒ
);

1619 
	`g’ExpÜtPC
(
cUn™
, 
mœ
, 
r2
, 
r3
 );

1620 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
ALLOC_DONT_TRACK
);

1621 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

1626 
	`g’Z”oCheck
(
cUn™
, 
r0
, 
mœ
->
off£t
, 
NULL
);

1627 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

1630 
OP_CHECK_CAST
: {

1635 
CÏssObjeù
 *
şassPŒ
 =

1636 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vB
]);

1637 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, (è
şassPŒ
 );

1638 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r0
);

1644 
ArmLIR
 * 
püLab–
 = 
	`g’Z”oCheck
(
cUn™
, 
r1
, 
mœ
->
off£t
, 
NULL
);

1645 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
r0
, 0);

1646 
ArmLIR
 *
b¿nch1
 =

1647 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 4, 
ARM_COND_EQ
);

1649 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
,„0,

1650 
	`off£tof
(
Objeù
, 
şazz
) >> 2);

1651 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmIn¡ªûofNÚTrivŸl
);

1652 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RR
, 
r0
, 
r1
);

1653 
ArmLIR
 *
b¿nch2
 =

1654 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 2, 
ARM_COND_EQ
);

1655 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

1657 
	`g’Z”oCheck
(
cUn™
, 
r0
, 
mœ
->
off£t
, 
püLab–
);

1659 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
ARM_PSEUDO_TARGET_LABEL
);

1660 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

1661 
b¿nch2
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

1665  
Œue
;

1667  
çl£
;

1668 
	}
}

1670 
boŞ
 
	$hªdËFmt11x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1672 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

1673 
d®vikOpCode
) {

1674 
OP_MOVE_EXCEPTION
: {

1675 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
£lf
);

1676 
exOff£t
 = 
	`off£tof
(
Th»ad
, 
exû±iÚ
);

1677 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r1
, 
rGLUE
, 
off£t
 >> 2);

1678 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
r1
, 
exOff£t
 >> 2);

1679 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

1682 
OP_MOVE_RESULT
:

1683 
OP_MOVE_RESULT_OBJECT
: {

1684 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

1685 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
rGLUE
, 
off£t
 >> 2);

1686 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

1689 
OP_MOVE_RESULT_WIDE
: {

1690 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

1691 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
rGLUE
, 
off£t
 >> 2);

1692 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r1
, 
rGLUE
, (
off£t
 >> 2)+1);

1693 
	`¡ÜeV®uePaœ
(
cUn™
, 
r0
, 
r1
, 
mœ
->
d®vikIn¢
.
vA
, 
r2
);

1696 
OP_RETURN_WIDE
: {

1697 
	`lßdV®uePaœ
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r0
, 
r1
);

1698 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

1699 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
r0
, 
rGLUE
, 
off£t
 >> 2);

1700 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
r1
, 
rGLUE
, (
off£t
 >> 2)+1);

1701 
	`g’R‘uºCommÚ
(
cUn™
,
mœ
);

1704 
OP_RETURN
:

1705 
OP_RETURN_OBJECT
: {

1706 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r0
);

1707 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

1708 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
r0
, 
rGLUE
, 
off£t
 >> 2);

1709 
	`g’R‘uºCommÚ
(
cUn™
,
mœ
);

1718 
OP_MONITOR_ENTER
:

1719 
OP_MONITOR_EXIT
: {

1720 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
£lf
);

1721 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

1722 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
rGLUE
, 
off£t
 >> 2);

1723 ià(
d®vikOpCode
 =ğ
OP_MONITOR_ENTER
) {

1724 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, ()
dvmLockObjeù
);

1726 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, ()
dvmUÆockObjeù
);

1733 
	`g’NuÎCheck
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
, mœ->
off£t
, 
NULL
);

1735 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

1738 
OP_THROW
: {

1739 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

1743  
Œue
;

1745  
çl£
;

1746 
	}
}

1748 
boŞ
 
	$g’CÚv”siÚPÜbË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1750 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

1752 
	`__«abi_i2f
Ğ
İ1
 );

1753 
	`__«abi_f2iz
Ğ
İ1
 );

1754 
	`__«abi_d2f
Ğ
İ1
 );

1755 
	`__«abi_f2d
Ğ
İ1
 );

1756 
	`__«abi_i2d
Ğ
İ1
 );

1757 
	`__«abi_d2iz
Ğ
İ1
 );

1758 
	`__«abi_l2f
Ğ
İ1
 );

1759 
	`__«abi_l2d
Ğ
İ1
 );

1761 
İCode
) {

1762 
OP_INT_TO_FLOAT
:

1763  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_i2f
, 1, 1);

1764 
OP_FLOAT_TO_INT
:

1765  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_f2iz
, 1, 1);

1766 
OP_DOUBLE_TO_FLOAT
:

1767  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_d2f
, 2, 1);

1768 
OP_FLOAT_TO_DOUBLE
:

1769  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_f2d
, 1, 2);

1770 
OP_INT_TO_DOUBLE
:

1771  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_i2d
, 1, 2);

1772 
OP_DOUBLE_TO_INT
:

1773  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_d2iz
, 2, 1);

1774 
OP_FLOAT_TO_LONG
:

1775  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
dvmJ™f2l
, 1, 2);

1776 
OP_LONG_TO_FLOAT
:

1777  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_l2f
, 2, 1);

1778 
OP_DOUBLE_TO_LONG
:

1779  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
dvmJ™d2l
, 2, 2);

1780 
OP_LONG_TO_DOUBLE
:

1781  
	`g’CÚv”siÚC®l
(
cUn™
, 
mœ
, (*)
__«abi_l2d
, 2, 2);

1783  
Œue
;

1785  
çl£
;

1786 
	}
}

1788 
boŞ
 
	$hªdËFmt12x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1790 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

1791 
vSrc1De¡
 = 
mœ
->
d®vikIn¢
.
vA
;

1792 
vSrc2
 = 
mœ
->
d®vikIn¢
.
vB
;

1793 
»g0
, 
»g1
, 
»g2
;

1797 iàĞ(
İCode
 >ğ
OP_ADD_INT_2ADDR
è&& (İCod<ğ
OP_REM_DOUBLE_2ADDR
)) {

1798  
	`g’Ar™hOp
Ğ
cUn™
, 
mœ
 );

1805 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
çl£
);

1806 
»g1
 = 
	`NEXT_REG
(
»g0
);

1807 
»g2
 = 
	`NEXT_REG
(
»g1
);

1809 
İCode
) {

1810 
OP_INT_TO_FLOAT
:

1811 
OP_FLOAT_TO_INT
:

1812 
OP_DOUBLE_TO_FLOAT
:

1813 
OP_FLOAT_TO_DOUBLE
:

1814 
OP_INT_TO_DOUBLE
:

1815 
OP_DOUBLE_TO_INT
:

1816 
OP_FLOAT_TO_LONG
:

1817 
OP_LONG_TO_FLOAT
:

1818 
OP_DOUBLE_TO_LONG
:

1819 
OP_LONG_TO_DOUBLE
:

1820  
	`g’CÚv”siÚ
(
cUn™
, 
mœ
);

1821 
OP_NEG_INT
:

1822 
OP_NOT_INT
:

1823  
	`g’Ar™hOpIÁ
(
cUn™
, 
mœ
, 
vSrc1De¡
, vSrc1De¡, 
vSrc2
);

1824 
OP_NEG_LONG
:

1825 
OP_NOT_LONG
:

1826  
	`g’Ar™hOpLÚg
(
cUn™
,
mœ
, 
vSrc1De¡
, vSrc1De¡, 
vSrc2
);

1827 
OP_NEG_FLOAT
:

1828  
	`g’Ar™hOpFlßt
(
cUn™
, 
mœ
, 
vSrc1De¡
, vSrc1De¡, 
vSrc2
);

1829 
OP_NEG_DOUBLE
:

1830  
	`g’Ar™hOpDoubË
(
cUn™
, 
mœ
, 
vSrc1De¡
, vSrc1De¡, 
vSrc2
);

1831 
OP_MOVE_WIDE
: {

1832 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
Œue
);

1833 
»g1
 = 
	`NEXT_REG
(
»g0
);

1834 
»g2
 = 
	`NEXT_REG
(
»g1
);

1836 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
»g0
, 
»g1
);

1837 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vSrc1De¡
, 
»g2
);

1840 
OP_INT_TO_LONG
: {

1841 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
Œue
);

1842 
»g1
 = 
	`NEXT_REG
(
»g0
);

1843 
»g2
 = 
	`NEXT_REG
(
»g1
);

1845 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

1846 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
»g1
, 
»g0
, 31);

1847 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vSrc1De¡
, 
»g2
);

1850 
OP_MOVE
:

1851 
OP_MOVE_OBJECT
:

1852 
OP_LONG_TO_INT
:

1853 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

1854 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vSrc1De¡
, 
»g1
);

1856 
OP_INT_TO_BYTE
:

1857 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

1858 
	`ÃwLIR3
(
cUn™
, 
THUMB_LSL
, 
»g0
,„eg0, 24);

1859 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
»g0
,„eg0, 24);

1860 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vSrc1De¡
, 
»g1
);

1862 
OP_INT_TO_SHORT
:

1863 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

1864 
	`ÃwLIR3
(
cUn™
, 
THUMB_LSL
, 
»g0
,„eg0, 16);

1865 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
»g0
,„eg0, 16);

1866 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vSrc1De¡
, 
»g1
);

1868 
OP_INT_TO_CHAR
:

1869 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

1870 
	`ÃwLIR3
(
cUn™
, 
THUMB_LSL
, 
»g0
,„eg0, 16);

1871 
	`ÃwLIR3
(
cUn™
, 
THUMB_LSR
, 
»g0
,„eg0, 16);

1872 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vSrc1De¡
, 
»g1
);

1874 
OP_ARRAY_LENGTH
: {

1875 
ËnOff£t
 = 
	`off£tof
(
A¼ayObjeù
, 
Ëngth
);

1876 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

1877 
	`g’NuÎCheck
(
cUn™
, 
vSrc2
, 
»g0
, 
mœ
->
off£t
, 
NULL
);

1878 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
»g0
,„eg0, 
ËnOff£t
 >> 2);

1879 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vSrc1De¡
, 
»g1
);

1883  
Œue
;

1885  
çl£
;

1886 
	}
}

1888 
boŞ
 
	$hªdËFmt21s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1890 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

1891 
»g0
, 
»g1
, 
»g2
;

1894 ià(
d®vikOpCode
 =ğ
OP_CONST_WIDE_16
) {

1895 
vDe¡
 = 
mœ
->
d®vikIn¢
.
vA
;

1896 
BBBB
 = 
mœ
->
d®vikIn¢
.
vB
;

1898 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
Œue
);

1899 
»g1
 = 
	`NEXT_REG
(
»g0
);

1900 
»g2
 = 
	`NEXT_REG
(
»g1
);

1902 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 
BBBB
);

1903 
	`ÃwLIR3
(
cUn™
, 
THUMB_ASR
, 
»g1
, 
»g0
, 31);

1906 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vDe¡
, 
»g2
);

1907 } ià(
d®vikOpCode
 =ğ
OP_CONST_16
) {

1908 
vDe¡
 = 
mœ
->
d®vikIn¢
.
vA
;

1909 
BBBB
 = 
mœ
->
d®vikIn¢
.
vB
;

1911 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vNÚe
, 
çl£
);

1912 
»g1
 = 
	`NEXT_REG
(
»g0
);

1914 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 
BBBB
);

1915 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g1
);

1917  
Œue
;

1919  
çl£
;

1920 
	}
}

1923 
boŞ
 
	$hªdËFmt21t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

1924 
ArmLIR
 *
Ïb–Li¡
)

1926 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

1927 
ArmCÚd™iÚCode
 
cÚd
;

1928 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
çl£
);

1930 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»g0
);

1931 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
»g0
, 0);

1933 
d®vikOpCode
) {

1934 
OP_IF_EQZ
:

1935 
cÚd
 = 
ARM_COND_EQ
;

1937 
OP_IF_NEZ
:

1938 
cÚd
 = 
ARM_COND_NE
;

1940 
OP_IF_LTZ
:

1941 
cÚd
 = 
ARM_COND_LT
;

1943 
OP_IF_GEZ
:

1944 
cÚd
 = 
ARM_COND_GE
;

1946 
OP_IF_GTZ
:

1947 
cÚd
 = 
ARM_COND_GT
;

1949 
OP_IF_LEZ
:

1950 
cÚd
 = 
ARM_COND_LE
;

1953 
cÚd
 = 0;

1954 
	`LOGE
("UÃx³ùed opcod(%dèfÜ Fmt21t\n", 
d®vikOpCode
);

1955 
	`dvmAbÜt
();

1957 
	`g’CÚd™iÚ®B¿nch
(
cUn™
, 
cÚd
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

1959 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

1960  
çl£
;

1961 
	}
}

1963 
boŞ
 
	$hªdËFmt22b_Fmt22s
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

1965 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

1966 
vSrc
 = 
mœ
->
d®vikIn¢
.
vB
;

1967 
vDe¡
 = 
mœ
->
d®vikIn¢
.
vA
;

1968 
l™
 = 
mœ
->
d®vikIn¢
.
vC
;

1969 
¬mOp
;

1970 
»g0
, 
»g1
, 
»gDe¡
;

1972 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc
, 
çl£
);

1973 
»g1
 = 
	`NEXT_REG
(
»g0
);

1974 
»gDe¡
 = 
	`NEXT_REG
(
»g1
);

1977 
	`__«abi_idivmod
(
İ1
, 
İ2
);

1978 
	`__«abi_idiv
(
İ1
, 
İ2
);

1980 
d®vikOpCode
) {

1981 
OP_ADD_INT_LIT8
:

1982 
OP_ADD_INT_LIT16
:

1983 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
»g0
);

1984 ià(
l™
 <= 7 &&†it >= 0) {

1985 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
»gDe¡
, 
»g0
, 
l™
);

1986 
	`¡ÜeV®ue
(
cUn™
, 
»gDe¡
, 
vDe¡
, 
»g1
);

1987 } ià(
l™
 <= 255 &&†it >= 0) {

1988 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
»g0
, 
l™
);

1989 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g1
);

1990 } ià(
l™
 >= -7 &&†it <= 0) {

1992 
	`ÃwLIR3
(
cUn™
, 
THUMB_SUB_RRI3
, 
»gDe¡
, 
»g0
, -
l™
);

1993 
	`¡ÜeV®ue
(
cUn™
, 
»gDe¡
, 
vDe¡
, 
»g1
);

1994 } ià(
l™
 >= -255 &&†it <= 0) {

1996 
	`ÃwLIR2
(
cUn™
, 
THUMB_SUB_RI8
, 
»g0
, -
l™
);

1997 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g1
);

1999 
	`lßdCÚ¡ªt
(
cUn™
, 
»g1
, 
l™
);

2000 
	`g’Bš¬yOp
(
cUn™
, 
vDe¡
, 
THUMB_ADD_RRR
, 
»g0
, 
»g1
, 
»gDe¡
);

2004 
OP_RSUB_INT_LIT8
:

2005 
OP_RSUB_INT
:

2006 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
»g1
);

2007 
	`lßdCÚ¡ªt
(
cUn™
, 
»g0
, 
l™
);

2008 
	`g’Bš¬yOp
(
cUn™
, 
vDe¡
, 
THUMB_SUB_RRR
, 
»g0
, 
»g1
, 
»gDe¡
);

2011 
OP_MUL_INT_LIT8
:

2012 
OP_MUL_INT_LIT16
:

2013 
OP_AND_INT_LIT8
:

2014 
OP_AND_INT_LIT16
:

2015 
OP_OR_INT_LIT8
:

2016 
OP_OR_INT_LIT16
:

2017 
OP_XOR_INT_LIT8
:

2018 
OP_XOR_INT_LIT16
:

2019 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
»g0
);

2020 
	`lßdCÚ¡ªt
(
cUn™
, 
»g1
, 
l™
);

2021 
d®vikOpCode
) {

2022 
OP_MUL_INT_LIT8
:

2023 
OP_MUL_INT_LIT16
:

2024 
¬mOp
 = 
THUMB_MUL
;

2026 
OP_AND_INT_LIT8
:

2027 
OP_AND_INT_LIT16
:

2028 
¬mOp
 = 
THUMB_AND_RR
;

2030 
OP_OR_INT_LIT8
:

2031 
OP_OR_INT_LIT16
:

2032 
¬mOp
 = 
THUMB_ORR
;

2034 
OP_XOR_INT_LIT8
:

2035 
OP_XOR_INT_LIT16
:

2036 
¬mOp
 = 
THUMB_EOR
;

2039 
	`dvmAbÜt
();

2041 
	`g’Bš¬yOp
(
cUn™
, 
vDe¡
, 
¬mOp
, 
»g0
, 
»g1
, 
»gDe¡
);

2044 
OP_SHL_INT_LIT8
:

2045 
OP_SHR_INT_LIT8
:

2046 
OP_USHR_INT_LIT8
:

2047 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
»g0
);

2048 
d®vikOpCode
) {

2049 
OP_SHL_INT_LIT8
:

2050 
¬mOp
 = 
THUMB_LSL
;

2052 
OP_SHR_INT_LIT8
:

2053 
¬mOp
 = 
THUMB_ASR
;

2055 
OP_USHR_INT_LIT8
:

2056 
¬mOp
 = 
THUMB_LSR
;

2058 : 
	`dvmAbÜt
();

2060 
	`ÃwLIR3
(
cUn™
, 
¬mOp
, 
»g0
,„eg0, 
l™
);

2061 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vDe¡
, 
»g1
);

2064 
OP_DIV_INT_LIT8
:

2065 
OP_DIV_INT_LIT16
:

2067 ià(
l™
 == 0) {

2069 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

2070  
çl£
;

2072 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, ()
__«abi_idiv
);

2073 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
l™
);

2074 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
r0
);

2075 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

2076 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r2
);

2079 
OP_REM_INT_LIT8
:

2080 
OP_REM_INT_LIT16
:

2082 ià(
l™
 == 0) {

2084 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

2085  
çl£
;

2087 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, ()
__«abi_idivmod
);

2088 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
l™
);

2089 
	`lßdV®ue
(
cUn™
, 
vSrc
, 
r0
);

2090 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

2091 
	`¡ÜeV®ue
(
cUn™
, 
r1
, 
vDe¡
, 
r2
);

2094  
Œue
;

2096  
çl£
;

2097 
	}
}

2099 
boŞ
 
	$hªdËFmt22c
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2101 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

2102 
f›ldOff£t
;

2104 ià(
d®vikOpCode
 >ğ
OP_IGET
 && d®vikOpCod<ğ
OP_IPUT_SHORT
) {

2105 
In¡F›ld
 *
pIn¡F›ld
 = (InstField *)

2106 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResF›lds
[
mœ
->
d®vikIn¢
.
vC
];

2107 
f›ldOff£t
;

2109 
	`as£¹
(
pIn¡F›ld
 !ğ
NULL
);

2110 
f›ldOff£t
 = 
pIn¡F›ld
->
by‹Off£t
;

2113 
f›ldOff£t
 = 0;

2115 
d®vikOpCode
) {

2120 
OP_NEW_ARRAY
: {

2121 *
şassPŒ
 = (*)

2122 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vC
]);

2123 
	`as£¹
(
şassPŒ
 !ğ
NULL
);

2124 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
r1
);

2125 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
şassPŒ
 );

2126 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmAÎocA¼ayByCÏss
);

2127 
ArmLIR
 *
püLab–
 =

2128 
	`g’RegImmCheck
(
cUn™
, 
ARM_COND_MI
, 
r1
, 0, 
mœ
->
off£t
, 
NULL
);

2129 
	`g’ExpÜtPC
(
cUn™
, 
mœ
, 
r2
, 
r3
 );

2130 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_IMM
,
r2
,
ALLOC_DONT_TRACK
);

2131 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

2136 
	`g’Z”oCheck
(
cUn™
, 
r0
, 
mœ
->
off£t
, 
püLab–
);

2137 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

2144 
OP_INSTANCE_OF
: {

2145 
CÏssObjeù
 *
şassPŒ
 =

2146 (
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResCÏs£s
[
mœ
->
d®vikIn¢
.
vC
]);

2147 
	`as£¹
(
şassPŒ
 !ğ
NULL
);

2148 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
r0
);

2149 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, (è
şassPŒ
 );

2150 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
r0
, 0);

2152 
ArmLIR
 *
b¿nch1
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 4,

2153 
ARM_COND_EQ
);

2155 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r1
, 
r0
,

2156 
	`off£tof
(
Objeù
, 
şazz
) >> 2);

2157 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmIn¡ªûofNÚTrivŸl
);

2158 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 1);

2159 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RR
, 
r1
, 
r2
);

2160 
ArmLIR
 *
b¿nch2
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 2,

2161 
ARM_COND_EQ
);

2162 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
r0
, 
r1
);

2163 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
r1
, 
r2
);

2164 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

2166 
ArmLIR
 *
rg‘
 = 
	`ÃwLIR0
(
cUn™
, 
ARM_PSEUDO_TARGET_LABEL
);

2167 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

2168 
b¿nch1
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

2169 
b¿nch2
->
g’”ic
.
rg‘
 = (
LIR
 *)target;

2172 
OP_IGET_WIDE
:

2173 
	`g’IG‘Wide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2175 
OP_IGET
:

2176 
OP_IGET_OBJECT
:

2177 
	`g’IG‘
(
cUn™
, 
mœ
, 
THUMB_LDR_RRR
, 
f›ldOff£t
);

2179 
OP_IGET_BOOLEAN
:

2180 
	`g’IG‘
(
cUn™
, 
mœ
, 
THUMB_LDRB_RRR
, 
f›ldOff£t
);

2182 
OP_IGET_BYTE
:

2183 
	`g’IG‘
(
cUn™
, 
mœ
, 
THUMB_LDRSB_RRR
, 
f›ldOff£t
);

2185 
OP_IGET_CHAR
:

2186 
	`g’IG‘
(
cUn™
, 
mœ
, 
THUMB_LDRH_RRR
, 
f›ldOff£t
);

2188 
OP_IGET_SHORT
:

2189 
	`g’IG‘
(
cUn™
, 
mœ
, 
THUMB_LDRSH_RRR
, 
f›ldOff£t
);

2191 
OP_IPUT_WIDE
:

2192 
	`g’IPutWide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2194 
OP_IPUT
:

2195 
OP_IPUT_OBJECT
:

2196 
	`g’IPut
(
cUn™
, 
mœ
, 
THUMB_STR_RRR
, 
f›ldOff£t
);

2198 
OP_IPUT_SHORT
:

2199 
OP_IPUT_CHAR
:

2200 
	`g’IPut
(
cUn™
, 
mœ
, 
THUMB_STRH_RRR
, 
f›ldOff£t
);

2202 
OP_IPUT_BYTE
:

2203 
OP_IPUT_BOOLEAN
:

2204 
	`g’IPut
(
cUn™
, 
mœ
, 
THUMB_STRB_RRR
, 
f›ldOff£t
);

2207  
Œue
;

2209  
çl£
;

2210 
	}
}

2212 
boŞ
 
	$hªdËFmt22cs
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2214 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

2215 
f›ldOff£t
 = 
mœ
->
d®vikIn¢
.
vC
;

2216 
d®vikOpCode
) {

2217 
OP_IGET_QUICK
:

2218 
OP_IGET_OBJECT_QUICK
:

2219 
	`g’IG‘
(
cUn™
, 
mœ
, 
THUMB_LDR_RRR
, 
f›ldOff£t
);

2221 
OP_IPUT_QUICK
:

2222 
OP_IPUT_OBJECT_QUICK
:

2223 
	`g’IPut
(
cUn™
, 
mœ
, 
THUMB_STR_RRR
, 
f›ldOff£t
);

2225 
OP_IGET_WIDE_QUICK
:

2226 
	`g’IG‘Wide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2228 
OP_IPUT_WIDE_QUICK
:

2229 
	`g’IPutWide
(
cUn™
, 
mœ
, 
f›ldOff£t
);

2232  
Œue
;

2234  
çl£
;

2236 
	}
}

2239 
boŞ
 
	$hªdËFmt22t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

2240 
ArmLIR
 *
Ïb–Li¡
)

2242 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

2243 
ArmCÚd™iÚCode
 
cÚd
;

2244 
»g0
, 
»g1
;

2246 ià(
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 =ğ(è
mœ
->
d®vikIn¢
.
vA
) {

2247 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
çl£
);

2248 
»g1
 = 
	`NEXT_REG
(
»g0
);

2250 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
»g1
);

2251 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»g0
);

2253 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
çl£
);

2254 
»g1
 = 
	`NEXT_REG
(
»g0
);

2256 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
»g0
);

2257 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vB
, 
»g1
);

2259 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RR
, 
»g0
, 
»g1
);

2261 
d®vikOpCode
) {

2262 
OP_IF_EQ
:

2263 
cÚd
 = 
ARM_COND_EQ
;

2265 
OP_IF_NE
:

2266 
cÚd
 = 
ARM_COND_NE
;

2268 
OP_IF_LT
:

2269 
cÚd
 = 
ARM_COND_LT
;

2271 
OP_IF_GE
:

2272 
cÚd
 = 
ARM_COND_GE
;

2274 
OP_IF_GT
:

2275 
cÚd
 = 
ARM_COND_GT
;

2277 
OP_IF_LE
:

2278 
cÚd
 = 
ARM_COND_LE
;

2281 
cÚd
 = 0;

2282 
	`LOGE
("UÃx³ùed opcod(%dèfÜ Fmt22t\n", 
d®vikOpCode
);

2283 
	`dvmAbÜt
();

2285 
	`g’CÚd™iÚ®B¿nch
(
cUn™
, 
cÚd
, &
Ïb–Li¡
[
bb
->
k’
->
id
]);

2287 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
]);

2288  
çl£
;

2289 
	}
}

2291 
boŞ
 
	$hªdËFmt22x_Fmt32x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2293 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

2294 
vSrc1De¡
 = 
mœ
->
d®vikIn¢
.
vA
;

2295 
vSrc2
 = 
mœ
->
d®vikIn¢
.
vB
;

2296 
»g0
, 
»g1
, 
»g2
;

2298 
İCode
) {

2299 
OP_MOVE_16
:

2300 
OP_MOVE_OBJECT_16
:

2301 
OP_MOVE_FROM16
:

2302 
OP_MOVE_OBJECT_FROM16
: {

2303 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
çl£
);

2304 
»g1
 = 
	`NEXT_REG
(
»g0
);

2305 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
»g0
);

2306 
	`¡ÜeV®ue
(
cUn™
, 
»g0
, 
vSrc1De¡
, 
»g1
);

2309 
OP_MOVE_WIDE_16
:

2310 
OP_MOVE_WIDE_FROM16
: {

2311 
»g0
 = 
	`£ËùFœ¡Regi¡”
(
cUn™
, 
vSrc2
, 
Œue
);

2312 
»g1
 = 
	`NEXT_REG
(
»g0
);

2313 
»g2
 = 
	`NEXT_REG
(
»g1
);

2314 
	`lßdV®uePaœ
(
cUn™
, 
vSrc2
, 
»g0
, 
»g1
);

2315 
	`¡ÜeV®uePaœ
(
cUn™
, 
»g0
, 
»g1
, 
vSrc1De¡
, 
»g2
);

2319  
Œue
;

2321  
çl£
;

2322 
	}
}

2324 
boŞ
 
	$hªdËFmt23x
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2326 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

2327 
vA
 = 
mœ
->
d®vikIn¢
.vA;

2328 
vB
 = 
mœ
->
d®vikIn¢
.vB;

2329 
vC
 = 
mœ
->
d®vikIn¢
.vC;

2332 iàĞ(
İCode
 >ğ
OP_ADD_INT
è&& (İCod<ğ
OP_REM_DOUBLE
)) {

2333  
	`g’Ar™hOp
Ğ
cUn™
, 
mœ
 );

2336 
İCode
) {

2337 
OP_CMPL_FLOAT
:

2338 
OP_CMPG_FLOAT
:

2339 
OP_CMPL_DOUBLE
:

2340 
OP_CMPG_DOUBLE
:

2341  
	`g’CmpX
(
cUn™
, 
mœ
, 
vA
, 
vB
, 
vC
);

2342 
OP_CMP_LONG
:

2343 
	`lßdV®uePaœ
(
cUn™
,
vB
, 
r0
, 
r1
);

2344 
	`lßdV®uePaœ
(
cUn™
, 
vC
, 
r2
, 
r3
);

2345 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMP_LONG
);

2346 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vA
, 
r1
);

2348 
OP_AGET_WIDE
:

2349 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
THUMB_LDR_RRR
, 
vB
, 
vC
, 
vA
, 3);

2351 
OP_AGET
:

2352 
OP_AGET_OBJECT
:

2353 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
THUMB_LDR_RRR
, 
vB
, 
vC
, 
vA
, 2);

2355 
OP_AGET_BOOLEAN
:

2356 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
THUMB_LDRB_RRR
, 
vB
, 
vC
, 
vA
, 0);

2358 
OP_AGET_BYTE
:

2359 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
THUMB_LDRSB_RRR
, 
vB
, 
vC
, 
vA
, 0);

2361 
OP_AGET_CHAR
:

2362 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
THUMB_LDRH_RRR
, 
vB
, 
vC
, 
vA
, 1);

2364 
OP_AGET_SHORT
:

2365 
	`g’A¼ayG‘
(
cUn™
, 
mœ
, 
THUMB_LDRSH_RRR
, 
vB
, 
vC
, 
vA
, 1);

2367 
OP_APUT_WIDE
:

2368 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
THUMB_STR_RRR
, 
vB
, 
vC
, 
vA
, 3);

2370 
OP_APUT
:

2371 
OP_APUT_OBJECT
:

2372 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
THUMB_STR_RRR
, 
vB
, 
vC
, 
vA
, 2);

2374 
OP_APUT_SHORT
:

2375 
OP_APUT_CHAR
:

2376 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
THUMB_STRH_RRR
, 
vB
, 
vC
, 
vA
, 1);

2378 
OP_APUT_BYTE
:

2379 
OP_APUT_BOOLEAN
:

2380 
	`g’A¼ayPut
(
cUn™
, 
mœ
, 
THUMB_STRB_RRR
, 
vB
, 
vC
, 
vA
, 0);

2383  
Œue
;

2385  
çl£
;

2386 
	}
}

2388 
boŞ
 
	$hªdËFmt31t
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2390 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

2391 
d®vikOpCode
) {

2392 
OP_FILL_ARRAY_DATA
: {

2393 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmIÁ”pHªdËFlA¼ayD©a
);

2394 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r0
);

2395 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, (
mœ
->
d®vikIn¢
.
vB
 << 1) +

2396 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

2397 
	`g’ExpÜtPC
(
cUn™
, 
mœ
, 
r2
, 
r3
 );

2398 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

2399 
	`g’Z”oCheck
(
cUn™
, 
r0
, 
mœ
->
off£t
, 
NULL
);

2408 
OP_PACKED_SWITCH
:

2409 
OP_SPARSE_SWITCH
: {

2410 ià(
d®vikOpCode
 =ğ
OP_PACKED_SWITCH
) {

2411 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmIÁ”pHªdËPackedSw™ch
);

2413 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
dvmIÁ”pHªdËS·r£Sw™ch
);

2415 
	`lßdV®ue
(
cUn™
, 
mœ
->
d®vikIn¢
.
vA
, 
r1
);

2416 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (
mœ
->
d®vikIn¢
.
vB
 << 1) +

2417 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

2418 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

2419 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, ()(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

2420 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r2
, 
rGLUE
,

2421 
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pNoChaš
)

2423 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
r0
,„0,„0);

2424 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
r4PC
, 
r0
, 
r1
);

2425 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r2
);

2429  
Œue
;

2431  
çl£
;

2432 
	}
}

2434 
boŞ
 
	$hªdËFmt35c_3rc
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
BasicBlock
 *
bb
,

2435 
ArmLIR
 *
Ïb–Li¡
)

2437 
ArmLIR
 *
»tChaššgC–l
 = 
NULL
;

2438 
ArmLIR
 *
püLab–
 = 
NULL
;

2440 ià(
bb
->
çÎThrough
 !ğ
NULL
)

2441 
»tChaššgC–l
 = &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
];

2443 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

2444 
mœ
->
d®vikIn¢
.
İCode
) {

2450 
OP_INVOKE_VIRTUAL
:

2451 
OP_INVOKE_VIRTUAL_RANGE
: {

2452 
ArmLIR
 *
´edChaššgC–l
 = &
Ïb–Li¡
[
bb
->
k’
->
id
];

2453 
m‘hodIndex
 =

2454 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
dIn¢
->
vB
]->

2455 
m‘hodIndex
;

2457 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_VIRTUAL
)

2458 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2460 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2462 
	`g’InvokeVœtu®CommÚ
(
cUn™
, 
mœ
, 
m‘hodIndex
,

2463 
»tChaššgC–l
,

2464 
´edChaššgC–l
,

2465 
püLab–
);

2473 
OP_INVOKE_SUPER
:

2474 
OP_INVOKE_SUPER_RANGE
: {

2475 
mIndex
 = 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->

2476 
pResM‘hods
[
dIn¢
->
vB
]->
m‘hodIndex
;

2477 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

2478 
cUn™
->
m‘hod
->
şazz
->
su³r
->
vbË
[
mIndex
];

2480 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_SUPER
)

2481 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2483 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2486 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

2488 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

2489 
ÿÎ“M‘hod
);

2493 
OP_INVOKE_DIRECT
:

2494 
OP_INVOKE_DIRECT_RANGE
: {

2495 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

2496 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
dIn¢
->
vB
];

2498 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_DIRECT
)

2499 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2501 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2504 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

2506 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

2507 
ÿÎ“M‘hod
);

2511 
OP_INVOKE_STATIC
:

2512 
OP_INVOKE_STATIC_RANGE
: {

2513 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

2514 
cUn™
->
m‘hod
->
şazz
->
pDvmDex
->
pResM‘hods
[
dIn¢
->
vB
];

2516 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_STATIC
)

2517 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
,

2518 
NULL
 );

2520 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
,

2521 
NULL
 );

2524 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

2526 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

2527 
ÿÎ“M‘hod
);

2594 
OP_INVOKE_INTERFACE
:

2595 
OP_INVOKE_INTERFACE_RANGE
: {

2596 
ArmLIR
 *
´edChaššgC–l
 = &
Ïb–Li¡
[
bb
->
k’
->
id
];

2597 
m‘hodIndex
 = 
dIn¢
->
vB
;

2599 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_INTERFACE
)

2600 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2602 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2607 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
,

2608 (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

2611 
ArmLIR
 *
addrR‘Chaš
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_PC_REL
,

2612 
r1
, 0);

2613 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

2616 
ArmLIR
 *
´ediùedChaššgC–l
 =

2617 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_PC_REL
, 
r2
, 0);

2618 
´ediùedChaššgC–l
->
g’”ic
.
rg‘
 = (
LIR
 *è
´edChaššgC–l
;

2620 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_INVOKE_METHOD_PREDICTED_CHAIN
);

2623 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
´edChaššgC–l
);

2629 ià(
püLab–
 =ğ
NULL
) {

2630 
dPC
 = (è(
cUn™
->
m‘hod
->
š¢s
 + 
mœ
->
off£t
);

2631 
püLab–
 = 
	`dvmComp”New
((
ArmLIR
), 
Œue
);

2632 
püLab–
->
İCode
 = 
ARM_PSEUDO_PC_RECONSTRUCTION_CELL
;

2633 
püLab–
->
İ”ªds
[0] = 
dPC
;

2634 
püLab–
->
İ”ªds
[1] = 
mœ
->
off£t
;

2636 
	`dvmIn£¹GrowabËLi¡
(&
cUn™
->
pcRecÚ¡ruùiÚLi¡
, 
püLab–
);

2640 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
püLab–
);

2652 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_L2H
, 
r9
 & 
THUMB_REG_MASK
, 
r1
);

2653 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_L2H
, 
r10
 & 
THUMB_REG_MASK
, 
r2
);

2654 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_L2H
, 
r12
 & 
THUMB_REG_MASK
, 
r3
);

2657 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
r0
, 
r3
);

2660 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, 
dIn¢
->
vB
);

2663 
	`lßdCÚ¡ªt
(
cUn™
, 
r2
, (ècUn™->
m‘hod
);

2666 
	`lßdCÚ¡ªt
(
cUn™
, 
r3
, (ècUn™->
m‘hod
->
şazz
->
pDvmDex
);

2668 
	`lßdCÚ¡ªt
(
cUn™
, 
r7
,

2669 (
šŒ_t
è
dvmFšdIÁ”çûM‘hodInCache
);

2670 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r7
);

2674 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_H2L
, 
r1
, 
r9
 & 
THUMB_REG_MASK
);

2677 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
r1
, 0);

2679 
ArmLIR
 *
by·ssRechaššg
 =

2680 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
ARM_COND_GT
);

2682 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r7
, 
rGLUE
,

2683 
	`off£tof
(
IÁ”pS‹
,

2684 
j™ToIÁ”pEÁr›s
.
dvmJ™ToP©chP»diùedChaš
)

2687 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_H2L
, 
r2
, 
r10
 & 
THUMB_REG_MASK
);

2688 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_H2L
, 
r3
, 
r12
 & 
THUMB_REG_MASK
);

2699 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r7
);

2702 
addrR‘Chaš
 = 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_PC_REL
,

2703 
r1
, 0, 0);

2704 
addrR‘Chaš
->
g’”ic
.
rg‘
 = (
LIR
 *è
»tChaššgC–l
;

2706 
by·ssRechaššg
->
g’”ic
.
rg‘
 = (
LIR
 *è
addrR‘Chaš
;

2713 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_INVOKE_METHOD_NO_OPT
);

2714 #ià
	`defšed
(
INVOKE_STATS
)

2715 
gDvmJ™
.
švokeP»diùedChaš
++;

2718 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

2722 
OP_INVOKE_DIRECT_EMPTY
: {

2723  
çl£
;

2725 
OP_FILLED_NEW_ARRAY
:

2726 
OP_FILLED_NEW_ARRAY_RANGE
: {

2728 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

2732  
Œue
;

2734  
çl£
;

2735 
	}
}

2737 
boŞ
 
	$hªdËFmt35ms_3rms
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
,

2738 
BasicBlock
 *
bb
, 
ArmLIR
 *
Ïb–Li¡
)

2740 
ArmLIR
 *
»tChaššgC–l
 = &
Ïb–Li¡
[
bb
->
çÎThrough
->
id
];

2741 
ArmLIR
 *
´edChaššgC–l
 = &
Ïb–Li¡
[
bb
->
k’
->
id
];

2742 
ArmLIR
 *
püLab–
 = 
NULL
;

2744 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

2745 
mœ
->
d®vikIn¢
.
İCode
) {

2747 
OP_INVOKE_VIRTUAL_QUICK_RANGE
:

2748 
OP_INVOKE_VIRTUAL_QUICK
: {

2749 
m‘hodIndex
 = 
dIn¢
->
vB
;

2750 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_VIRTUAL_QUICK
)

2751 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2753 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2755 
	`g’InvokeVœtu®CommÚ
(
cUn™
, 
mœ
, 
m‘hodIndex
,

2756 
»tChaššgC–l
,

2757 
´edChaššgC–l
,

2758 
püLab–
);

2762 
OP_INVOKE_SUPER_QUICK
:

2763 
OP_INVOKE_SUPER_QUICK_RANGE
: {

2764 cÚ¡ 
M‘hod
 *
ÿÎ“M‘hod
 =

2765 
cUn™
->
m‘hod
->
şazz
->
su³r
->
vbË
[
dIn¢
->
vB
];

2767 ià(
mœ
->
d®vikIn¢
.
İCode
 =ğ
OP_INVOKE_SUPER_QUICK
)

2768 
	`g’ProûssArgsNoRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2770 
	`g’ProûssArgsRªge
(
cUn™
, 
mœ
, 
dIn¢
, &
püLab–
);

2773 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, (è
ÿÎ“M‘hod
);

2775 
	`g’InvokeSšgËtÚCommÚ
(
cUn™
, 
mœ
, 
bb
, 
Ïb–Li¡
, 
püLab–
,

2776 
ÿÎ“M‘hod
);

2778 
	`g’T¿p
(
cUn™
, 
mœ
->
off£t
, 
püLab–
);

2782  
Œue
;

2784  
çl£
;

2785 
	}
}

2793 
boŞ
 
	$hªdËFmt3šlše
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2795 
DecodedIn¡ruùiÚ
 *
dIn¢
 = &
mœ
->
d®vikIn¢
;

2796  
mœ
->
d®vikIn¢
.
İCode
) {

2797 
OP_EXECUTE_INLINE
: {

2798 
i
;

2799 cÚ¡ 
IÆšeO³¿tiÚ
* 
šLšeTabË
 = 
	`dvmG‘IÆšeOpsTabË
();

2800 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

2801 
İ”©iÚ
 = 
dIn¢
->
vB
;

2803 
İ”©iÚ
) {

2804 
INLINE_EMPTYINLINEMETHOD
:

2805  
çl£
;

2806 
INLINE_STRING_LENGTH
:

2807  
	`g’IÆšedSŒšgL’gth
(
cUn™
, 
mœ
);

2808 
INLINE_MATH_ABS_INT
:

2809  
	`g’IÆšedAbsIÁ
(
cUn™
, 
mœ
);

2810 
INLINE_MATH_ABS_LONG
:

2811  
	`g’IÆšedAbsLÚg
(
cUn™
, 
mœ
);

2812 
INLINE_MATH_MIN_INT
:

2813  
	`g’IÆšedMšMaxIÁ
(
cUn™
, 
mœ
, 
Œue
);

2814 
INLINE_MATH_MAX_INT
:

2815  
	`g’IÆšedMšMaxIÁ
(
cUn™
, 
mœ
, 
çl£
);

2816 
INLINE_STRING_CHARAT
:

2817  
	`g’IÆšedSŒšgCh¬At
(
cUn™
, 
mœ
);

2818 
INLINE_MATH_SQRT
:

2819 ià(
	`g’IÆšeSq¹
(
cUn™
, 
mœ
))

2820  
çl£
;

2823 
INLINE_MATH_COS
:

2824 ià(
	`g’IÆšeCos
(
cUn™
, 
mœ
))

2825  
çl£
;

2828 
INLINE_MATH_SIN
:

2829 ià(
	`g’IÆšeSš
(
cUn™
, 
mœ
))

2830  
çl£
;

2833 
INLINE_MATH_ABS_FLOAT
:

2834  
	`g’IÆšedAbsFlßt
(
cUn™
, 
mœ
);

2835 
INLINE_MATH_ABS_DOUBLE
:

2836  
	`g’IÆšedAbsDoubË
(
cUn™
, 
mœ
);

2837 
INLINE_STRING_COMPARETO
:

2838 
INLINE_STRING_EQUALS
:

2841 
	`dvmAbÜt
();

2845 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
r4PC
, 
rGLUE
);

2846 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
r4PC
, 
off£t
);

2848 
	`ÃwLIR1
(
cUn™
, 
THUMB_PUSH
, (1<<
r4PC
 | 1<<
rFP
));

2851 
	`lßdCÚ¡ªt
(
cUn™
, 
r4PC
, ()
šLšeTabË
[
İ”©iÚ
].
func
);

2854 
	`g’ExpÜtPC
(
cUn™
, 
mœ
, 
r0
, 
r1
 );

2857 
i
=0; i < 
dIn¢
->
vA
; i++) {

2858 
	`lßdV®ue
(
cUn™
, 
dIn¢
->
¬g
[
i
], i);

2861 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r4PC
);

2864 
	`ÃwLIR1
(
cUn™
, 
THUMB_ADD_SPI7
, 2);

2867 
	`g’Z”oCheck
(
cUn™
, 
r0
, 
mœ
->
off£t
, 
NULL
);

2869 
	`»£tRegi¡”ScÜebßrd
(
cUn™
);

2873  
Œue
;

2875  
çl£
;

2876 
	}
}

2878 
boŞ
 
	$hªdËFmt51l
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

2880 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 
mœ
->
d®vikIn¢
.
vB_wide
 & 0xFFFFFFFFUL);

2881 
	`lßdCÚ¡ªt
(
cUn™
, 
r1
, (
mœ
->
d®vikIn¢
.
vB_wide
>>32) & 0xFFFFFFFFUL);

2882 
	`¡ÜeV®uePaœ
(
cUn™
, 
r0
, 
r1
, 
mœ
->
d®vikIn¢
.
vA
, 
r2
);

2883  
çl£
;

2884 
	}
}

2894 
	$hªdËNÜm®ChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

2895 
off£t
)

2897 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
rGLUE
,

2898 
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pNÜm®
) >> 2);

2899 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r0
);

2900 
	`addWÜdD©a
(
cUn™
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
), 
Œue
);

2901 
	}
}

2907 
	$hªdËHÙChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

2908 
off£t
)

2910 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
rGLUE
,

2911 
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToT¿ûS–eù
) >> 2);

2912 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r0
);

2913 
	`addWÜdD©a
(
cUn™
, (è(cUn™->
m‘hod
->
š¢s
 + 
off£t
), 
Œue
);

2914 
	}
}

2917 
	$hªdËInvokeSšgËtÚChaššgC–l
(
Comp©iÚUn™
 *
cUn™
,

2918 cÚ¡ 
M‘hod
 *
ÿÎ“
)

2920 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r0
, 
rGLUE
,

2921 
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
.
dvmJ™ToT¿ûS–eù
) >> 2);

2922 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r0
);

2923 
	`addWÜdD©a
(
cUn™
, (è(
ÿÎ“
->
š¢s
), 
Œue
);

2924 
	}
}

2927 
	$hªdËInvokeP»diùedChaššgC–l
(
Comp©iÚUn™
 *
cUn™
)

2931 
	`addWÜdD©a
(
cUn™
, 
PREDICTED_CHAIN_BX_PAIR_INIT
, 
Œue
);

2933 
	`addWÜdD©a
(
cUn™
, 
PREDICTED_CHAIN_CLAZZ_INIT
, 
Œue
);

2935 
	`addWÜdD©a
(
cUn™
, 
PREDICTED_CHAIN_METHOD_INIT
, 
Œue
);

2940 
	`addWÜdD©a
(
cUn™
, 
PREDICTED_CHAIN_COUNTER_INIT
, 
Œue
);

2941 
	}
}

2944 
	$hªdËPCRecÚ¡ruùiÚ
(
Comp©iÚUn™
 *
cUn™
,

2945 
ArmLIR
 *
rg‘Lab–
)

2947 
ArmLIR
 **
püLab–
 =

2948 (
ArmLIR
 **è
cUn™
->
pcRecÚ¡ruùiÚLi¡
.
–emLi¡
;

2949 
numEËms
 = 
cUn™
->
pcRecÚ¡ruùiÚLi¡
.
numU£d
;

2950 
i
;

2951 
i
 = 0; i < 
numEËms
; i++) {

2952 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
püLab–
[
i
]);

2954 
	`lßdCÚ¡ªt
(
cUn™
, 
r0
, 
püLab–
[
i
]->
İ”ªds
[0]);

2955 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
, 
rg‘Lab–
);

2957 
	}
}

2960 
	$dvmComp”MIR2LIR
(
Comp©iÚUn™
 *
cUn™
)

2963 
ArmLIR
 *
Ïb–Li¡
 =

2964 
	`dvmComp”New
((
ArmLIR
è* 
cUn™
->
numBlocks
, 
Œue
);

2965 
GrowabËLi¡
 
chaššgLi¡ByTy³
[
CHAINING_CELL_LAST
];

2966 
i
;

2971 
i
 = 0; i < 
CHAINING_CELL_LAST
; i++) {

2972 
	`dvmIn™GrowabËLi¡
(&
chaššgLi¡ByTy³
[
i
], 2);

2975 
BasicBlock
 **
blockLi¡
 = 
cUn™
->blockList;

2977 ià(
cUn™
->
executiÚCouÁ
) {

2993 
	`ÃwLIR1
(
cUn™
, 
ARM_16BIT_DATA
, 0);

2994 
	`ÃwLIR1
(
cUn™
, 
ARM_16BIT_DATA
, 0);

2995 
cUn™
->
chašC–lOff£tLIR
 =

2996 (
LIR
 *è
	`ÃwLIR1
(
cUn™
, 
ARM_16BIT_DATA
, 
CHAIN_CELL_OFFSET_TAG
);

2997 
cUn™
->
h—d”Size
 = 6;

2998 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR_H2L
, 
r0
, 
½c
 & 
THUMB_REG_MASK
);

2999 
	`ÃwLIR2
(
cUn™
, 
THUMB_SUB_RI8
, 
r0
, 10);

3000 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r1
, 
r0
, 0);

3001 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
r1
, 1);

3002 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
r1
, 
r0
, 0);

3005 
cUn™
->
chašC–lOff£tLIR
 =

3006 (
LIR
 *è
	`ÃwLIR1
(
cUn™
, 
ARM_16BIT_DATA
, 
CHAIN_CELL_OFFSET_TAG
);

3007 
cUn™
->
h—d”Size
 = 2;

3011 
i
 = 0; i < 
cUn™
->
numBlocks
; i++) {

3012 
blockLi¡
[
i
]->
vis™ed
 = 
Œue
;

3013 
MIR
 *
mœ
;

3015 
Ïb–Li¡
[
i
].
İ”ªds
[0] = 
blockLi¡
[i]->
¡¬tOff£t
;

3017 ià(
blockLi¡
[
i
]->
blockTy³
 >ğ
CHAINING_CELL_LAST
) {

3022 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è&
Ïb–Li¡
[
i
]);

3025 ià(
blockLi¡
[
i
]->
blockTy³
 =ğ
DALVIK_BYTECODE
) {

3026 
Ïb–Li¡
[
i
].
İCode
 = 
ARM_PSEUDO_NORMAL_BLOCK_LABEL
;

3028 
	`»£tRegi¡”ScÜebßrd
(
cUn™
);

3030 
blockLi¡
[
i
]->
blockTy³
) {

3031 
CHAINING_CELL_NORMAL
:

3032 
Ïb–Li¡
[
i
].
İCode
 = 
ARM_PSEUDO_CHAINING_CELL_NORMAL
;

3034 
	`dvmIn£¹GrowabËLi¡
(

3035 &
chaššgLi¡ByTy³
[
CHAINING_CELL_NORMAL
], (*è
i
);

3037 
CHAINING_CELL_INVOKE_SINGLETON
:

3038 
Ïb–Li¡
[
i
].
İCode
 =

3039 
ARM_PSEUDO_CHAINING_CELL_INVOKE_SINGLETON
;

3040 
Ïb–Li¡
[
i
].
İ”ªds
[0] =

3041 (è
blockLi¡
[
i
]->
cÚššgM‘hod
;

3043 
	`dvmIn£¹GrowabËLi¡
(

3044 &
chaššgLi¡ByTy³
[
CHAINING_CELL_INVOKE_SINGLETON
],

3045 (*è
i
);

3047 
CHAINING_CELL_INVOKE_PREDICTED
:

3048 
Ïb–Li¡
[
i
].
İCode
 =

3049 
ARM_PSEUDO_CHAINING_CELL_INVOKE_PREDICTED
;

3051 
	`dvmIn£¹GrowabËLi¡
(

3052 &
chaššgLi¡ByTy³
[
CHAINING_CELL_INVOKE_PREDICTED
],

3053 (*è
i
);

3055 
CHAINING_CELL_HOT
:

3056 
Ïb–Li¡
[
i
].
İCode
 =

3057 
ARM_PSEUDO_CHAINING_CELL_HOT
;

3059 
	`dvmIn£¹GrowabËLi¡
(

3060 &
chaššgLi¡ByTy³
[
CHAINING_CELL_HOT
],

3061 (*è
i
);

3063 
PC_RECONSTRUCTION
:

3065 
Ïb–Li¡
[
i
].
İCode
 =

3066 
ARM_PSEUDO_PC_RECONSTRUCTION_BLOCK_LABEL
;

3067 
	`as£¹
 (
i
 =ğ
cUn™
->
numBlocks
 - 2);

3068 
	`hªdËPCRecÚ¡ruùiÚ
(
cUn™
, &
Ïb–Li¡
[
i
+1]);

3070 
EXCEPTION_HANDLING
:

3071 
Ïb–Li¡
[
i
].
İCode
 = 
ARM_PSEUDO_EH_BLOCK_LABEL
;

3072 ià(
cUn™
->
pcRecÚ¡ruùiÚLi¡
.
numU£d
) {

3073 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
r1
, 
rGLUE
,

3074 
	`off£tof
(
IÁ”pS‹
,

3075 
j™ToIÁ”pEÁr›s
.
dvmJ™ToIÁ”pPuÁ
)

3077 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r1
);

3086 
ArmLIR
 *
h—dLIR
 = 
NULL
;

3088 
mœ
 = 
blockLi¡
[
i
]->
fœ¡MIRIn¢
; mœ; mœ = mœ->
Ãxt
) {

3089 
OpCode
 
d®vikOpCode
 = 
mœ
->
d®vikIn¢
.
İCode
;

3090 
In¡ruùiÚFÜm©
 
d®vikFÜm©
 =

3091 
	`dexG‘In¡rFÜm©
(
gDvm
.
š¡rFÜm©
, 
d®vikOpCode
);

3092 
ArmLIR
 *
bound¬yLIR
 =

3093 
	`ÃwLIR2
(
cUn™
, 
ARM_PSEUDO_DALVIK_BYTECODE_BOUNDARY
,

3094 
mœ
->
off£t
,
d®vikOpCode
);

3096 ià(
h—dLIR
 =ğ
NULL
) {

3097 
h—dLIR
 = 
bound¬yLIR
;

3099 
boŞ
 
nÙHªdËd
;

3104 
boŞ
 
sšgËS‹pMe
 =

3105 
gDvmJ™
.
šşudeS–eùedOp
 !=

3106 ((
gDvmJ™
.
İLi¡
[
d®vikOpCode
 >> 3] &

3107 (1 << (
d®vikOpCode
 & 0x7))) !=

3109 ià(
sšgËS‹pMe
 || 
cUn™
->
®lSšgËS‹p
) {

3110 
nÙHªdËd
 = 
çl£
;

3111 
	`g’IÁ”pSšgËS‹p
(
cUn™
, 
mœ
);

3113 
İcodeCov”age
[
d®vikOpCode
]++;

3114 
d®vikFÜm©
) {

3115 
kFmt10t
:

3116 
kFmt20t
:

3117 
kFmt30t
:

3118 
nÙHªdËd
 = 
	`hªdËFmt10t_Fmt20t_Fmt30t
(
cUn™
,

3119 
mœ
, 
blockLi¡
[
i
], 
Ïb–Li¡
);

3121 
kFmt10x
:

3122 
nÙHªdËd
 = 
	`hªdËFmt10x
(
cUn™
, 
mœ
);

3124 
kFmt11n
:

3125 
kFmt31i
:

3126 
nÙHªdËd
 = 
	`hªdËFmt11n_Fmt31i
(
cUn™
, 
mœ
);

3128 
kFmt11x
:

3129 
nÙHªdËd
 = 
	`hªdËFmt11x
(
cUn™
, 
mœ
);

3131 
kFmt12x
:

3132 
nÙHªdËd
 = 
	`hªdËFmt12x
(
cUn™
, 
mœ
);

3134 
kFmt20bc
:

3135 
nÙHªdËd
 = 
	`hªdËFmt20bc
(
cUn™
, 
mœ
);

3137 
kFmt21c
:

3138 
kFmt31c
:

3139 
nÙHªdËd
 = 
	`hªdËFmt21c_Fmt31c
(
cUn™
, 
mœ
);

3141 
kFmt21h
:

3142 
nÙHªdËd
 = 
	`hªdËFmt21h
(
cUn™
, 
mœ
);

3144 
kFmt21s
:

3145 
nÙHªdËd
 = 
	`hªdËFmt21s
(
cUn™
, 
mœ
);

3147 
kFmt21t
:

3148 
nÙHªdËd
 = 
	`hªdËFmt21t
(
cUn™
, 
mœ
, 
blockLi¡
[
i
],

3149 
Ïb–Li¡
);

3151 
kFmt22b
:

3152 
kFmt22s
:

3153 
nÙHªdËd
 = 
	`hªdËFmt22b_Fmt22s
(
cUn™
, 
mœ
);

3155 
kFmt22c
:

3156 
nÙHªdËd
 = 
	`hªdËFmt22c
(
cUn™
, 
mœ
);

3158 
kFmt22cs
:

3159 
nÙHªdËd
 = 
	`hªdËFmt22cs
(
cUn™
, 
mœ
);

3161 
kFmt22t
:

3162 
nÙHªdËd
 = 
	`hªdËFmt22t
(
cUn™
, 
mœ
, 
blockLi¡
[
i
],

3163 
Ïb–Li¡
);

3165 
kFmt22x
:

3166 
kFmt32x
:

3167 
nÙHªdËd
 = 
	`hªdËFmt22x_Fmt32x
(
cUn™
, 
mœ
);

3169 
kFmt23x
:

3170 
nÙHªdËd
 = 
	`hªdËFmt23x
(
cUn™
, 
mœ
);

3172 
kFmt31t
:

3173 
nÙHªdËd
 = 
	`hªdËFmt31t
(
cUn™
, 
mœ
);

3175 
kFmt3rc
:

3176 
kFmt35c
:

3177 
nÙHªdËd
 = 
	`hªdËFmt35c_3rc
(
cUn™
, 
mœ
, 
blockLi¡
[
i
],

3178 
Ïb–Li¡
);

3180 
kFmt3rms
:

3181 
kFmt35ms
:

3182 
nÙHªdËd
 = 
	`hªdËFmt35ms_3rms
(
cUn™
, 
mœ
,
blockLi¡
[
i
],

3183 
Ïb–Li¡
);

3185 
kFmt3šlše
:

3186 
nÙHªdËd
 = 
	`hªdËFmt3šlše
(
cUn™
, 
mœ
);

3188 
kFmt51l
:

3189 
nÙHªdËd
 = 
	`hªdËFmt51l
(
cUn™
, 
mœ
);

3192 
nÙHªdËd
 = 
Œue
;

3196 ià(
nÙHªdËd
) {

3197 
	`LOGE
("%#06x: Opcode 0x%x (%s) / Fmt %d‚ot handled\n",

3198 
mœ
->
off£t
,

3199 
d®vikOpCode
, 
	`g‘OpcodeName
(dalvikOpCode),

3200 
d®vikFÜm©
);

3201 
	`dvmAbÜt
();

3206 
	`dvmComp”AµlyLoÿlO±imiz©iÚs
(
cUn™
, (
LIR
 *è
h—dLIR
,

3207 
cUn™
->
Ï¡LIRIn¢
);

3212 ià(
blockLi¡
[
i
]->
ÃedF®lThroughB¿nch
) {

3213 
	`g’UncÚd™iÚ®B¿nch
(
cUn™
,

3214 &
Ïb–Li¡
[
blockLi¡
[
i
]->
çÎThrough
->
id
]);

3220 
i
 = 0; i < 
CHAINING_CELL_LAST
; i++) {

3221 
size_t
 
j
;

3222 *
blockIdLi¡
 = (*è
chaššgLi¡ByTy³
[
i
].
–emLi¡
;

3224 
cUn™
->
numChaššgC–ls
[
i
] = 
chaššgLi¡ByTy³
[i].
numU£d
;

3227 ià(
cUn™
->
numChaššgC–ls
[
i
] == 0)

3231 
cUn™
->
fœ¡ChaššgLIR
[
i
] = (
LIR
 *è&
Ïb–Li¡
[
blockIdLi¡
[0]];

3233 
j
 = 0; j < 
chaššgLi¡ByTy³
[
i
].
numU£d
; j++) {

3234 
blockId
 = 
blockIdLi¡
[
j
];

3237 
	`ÃwLIR0
(
cUn™
, 
ARM_PSEUDO_ALIGN4
);

3240 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è&
Ïb–Li¡
[
blockId
]);

3243 
blockLi¡
[
blockId
]->
blockTy³
) {

3244 
CHAINING_CELL_NORMAL
:

3245 
	`hªdËNÜm®ChaššgC–l
(
cUn™
,

3246 
blockLi¡
[
blockId
]->
¡¬tOff£t
);

3248 
CHAINING_CELL_INVOKE_SINGLETON
:

3249 
	`hªdËInvokeSšgËtÚChaššgC–l
(
cUn™
,

3250 
blockLi¡
[
blockId
]->
cÚššgM‘hod
);

3252 
CHAINING_CELL_INVOKE_PREDICTED
:

3253 
	`hªdËInvokeP»diùedChaššgC–l
(
cUn™
);

3255 
CHAINING_CELL_HOT
:

3256 
	`hªdËHÙChaššgC–l
(
cUn™
,

3257 
blockLi¡
[
blockId
]->
¡¬tOff£t
);

3260 
	`dvmAbÜt
();

3266 
	`dvmComp”AµlyGlob®O±imiz©iÚs
(
cUn™
);

3267 
	}
}

3270 
boŞ
 
	$dvmComp”DoWÜk
(
Comp”WÜkOrd”
 *
wÜk
)

3272 
boŞ
 
»s
;

3274 ià(
gDvmJ™
.
codeCacheFuÎ
) {

3275  
çl£
;

3278 
wÜk
->
kšd
) {

3279 
kWÜkOrd”M‘hod
:

3280 
»s
 = 
	`dvmCompeM‘hod
(
wÜk
->
šfo
, &wÜk->
»suÉ
);

3282 
kWÜkOrd”T¿û
:

3284 
»s
 = 
	`dvmCompeT¿û
(
wÜk
->
šfo
, 
JIT_MAX_TRACE_LEN
, &wÜk->
»suÉ
);

3287 
»s
 = 
çl£
;

3288 
	`dvmAbÜt
();

3290  
»s
;

3291 
	}
}

3294 
	$dvmComp”ArchDump
()

3297 
i
, 
¡¬t
, 
¡»ak
;

3298 
buf
[1024];

3300 
¡»ak
 = 
i
 = 0;

3301 
buf
[0] = 0;

3302 
İcodeCov”age
[
i
] == 0 && i < 256) {

3303 
i
++;

3305 ià(
i
 == 256) {

3308 
¡¬t
 = 
i
++, 
¡»ak
 = 1; i < 256; i++) {

3309 ià(
İcodeCov”age
[
i
]) {

3310 
¡»ak
++;

3312 ià(
¡»ak
 == 1) {

3313 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x,", 
¡¬t
);

3315 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x-%x,", 
¡¬t
, s¹ + 
¡»ak
 - 1);

3317 
¡»ak
 = 0;

3318 
İcodeCov”age
[
i
] == 0 && i < 256) {

3319 
i
++;

3321 ià(
i
 < 256) {

3322 
¡»ak
 = 1;

3323 
¡¬t
 = 
i
;

3327 ià(
¡»ak
) {

3328 ià(
¡»ak
 == 1) {

3329 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x", 
¡¬t
);

3331 
	`¥rštf
(
buf
+
	`¡¾’
(buf), "%x-%x", 
¡¬t
, s¹ + 
¡»ak
 - 1);

3334 ià(
	`¡¾’
(
buf
)) {

3335 
	`LOGD
("d®vik.vm.j™.İ = %s", 
buf
);

3337 
	}
}

	@compiler/codegen/arm/Codegen.h

17 #iâdeà
_DALVIK_VM_COMPILER_CODEGEN_ARM_CODEGEN_H


18 
	#_DALVIK_VM_COMPILER_CODEGEN_ARM_CODEGEN_H


	)

25 
ArmLIR
 *
ÃwLIR0
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
);

26 
ArmLIR
 *
ÃwLIR1
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

27 
de¡
);

28 
ArmLIR
 *
ÃwLIR2
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

29 
de¡
, 
¤c1
);

30 
ArmLIR
 *
ÃwLIR3
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

31 
de¡
, 
¤c1
, 
¤c2
);

32 
ArmLIR
 *
ÃwLIR23
(
Comp©iÚUn™
 *
cUn™
, 
ArmOpCode
 
İCode
,

33 
¤cde¡
, 
¤c2
);

34 
ArmLIR
 *
sÿnL™”®PoŞ
(
Comp©iÚUn™
 *
cUn™
, 
v®ue
,

35 
d–
);

36 
ArmLIR
 *
addWÜdD©a
(
Comp©iÚUn™
 *
cUn™
, 
v®ue
, 
boŞ
 
šPÏû
);

37 
šlše
 
ArmLIR
 *
g’CheckCommÚ
(
Comp©iÚUn™
 *
cUn™
, 
dOff£t
,

38 
ArmLIR
 *
b¿nch
,

39 
ArmLIR
 *
püLab–
);

42 
g’Di¥©chToHªdËr
(
Comp©iÚUn™
 *
cUn™
, 
Tem¶©eOpCode
 
İCode
);

43 
boŞ
 
dvmComp”ArchIn™
();

44 
boŞ
 
g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

45 
boŞ
 
g’IÆšeCos
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

46 
boŞ
 
g’IÆšeSš
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

47 
boŞ
 
g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
);

48 
boŞ
 
g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

49 
vSrc1
, 
vSrc2
);

50 
boŞ
 
g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

51 
vSrc1
, 
vSrc2
);

52 
boŞ
 
g’CmpX
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
, 
vSrc1
,

53 
vSrc2
);

	@compiler/codegen/arm/GlobalOptimizations.c

17 
	~"D®vik.h
"

18 
	~"vm/comp”/Comp”IÁ”Çls.h
"

19 
	~"ArmLIR.h
"

25 
	$­¶yRedundªtB¿nchElimš©iÚ
(
Comp©iÚUn™
 *
cUn™
)

27 
ArmLIR
 *
thisLIR
;

29 
thisLIR
 = (
ArmLIR
 *è
cUn™
->
fœ¡LIRIn¢
;

30 
thisLIR
 !ğ(
ArmLIR
 *è
cUn™
->
Ï¡LIRIn¢
;

31 
thisLIR
 = 
	`NEXT_LIR
(thisLIR)) {

34 ià(
thisLIR
->
İCode
 =ğ
THUMB_B_UNCOND
) {

35 
ArmLIR
 *
ÃxtLIR
 = 
thisLIR
;

37 
Œue
) {

38 
ÃxtLIR
 = 
	`NEXT_LIR
(nextLIR);

43 ià(
ÃxtLIR
 =ğ(
ArmLIR
 *è
thisLIR
->
g’”ic
.
rg‘
) {

44 
thisLIR
->
isNİ
 = 
Œue
;

51 ià(!
	`isP£udoOpCode
(
ÃxtLIR
->
İCode
) ||

52 
ÃxtLIR
->
İCode
 =ğ
ARM_PSEUDO_ALIGN4
)

57 
	}
}

59 
	$dvmComp”AµlyGlob®O±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
)

61 
	`­¶yRedundªtB¿nchElimš©iÚ
(
cUn™
);

62 
	}
}

	@compiler/codegen/arm/LocalOptimizations.c

17 
	~"D®vik.h
"

18 
	~"vm/comp”/Comp”IÁ”Çls.h
"

19 
	~"ArmLIR.h
"

21 
ArmLIR
* 
dvmComp”G’Cİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
);

24 
šlše
 
boŞ
 
	$isD®vikLßd
(
ArmLIR
 *
lœ
)

26  ((
lœ
->
İ”ªds
[1] =ğ
rFP
) &&

27 ((
lœ
->
İCode
 =ğ
THUMB_LDR_RRI5
) ||

28 (
lœ
->
İCode
 =ğ
THUMB2_LDR_RRI12
) ||

29 (
lœ
->
İCode
 =ğ
THUMB2_VLDRS
) ||

30 (
lœ
->
İCode
 =ğ
THUMB2_VLDRD
)));

31 
	}
}

33 
šlše
 
boŞ
 
	$isD®vikStÜe
(
ArmLIR
 *
lœ
)

35  ((
lœ
->
İ”ªds
[1] =ğ
rFP
) &&

36 ((
lœ
->
İCode
 =ğ
THUMB_STR_RRI5
) ||

37 (
lœ
->
İCode
 =ğ
THUMB2_STR_RRI12
) ||

38 (
lœ
->
İCode
 =ğ
THUMB2_VSTRS
) ||

39 (
lœ
->
İCode
 =ğ
THUMB2_VSTRD
)));

40 
	}
}

47 
	$­¶yLßdStÜeElimš©iÚ
(
Comp©iÚUn™
 *
cUn™
,

48 
ArmLIR
 *
h—dLIR
,

49 
ArmLIR
 *
LIR
)

51 
ArmLIR
 *
thisLIR
;

53 
cUn™
->
İtRound
++;

54 
thisLIR
 = 
h—dLIR
;

55 
thisLIR
 !ğ
LIR
;

56 
thisLIR
 = 
	`NEXT_LIR
(thisLIR)) {

58 ià(
thisLIR
->
age
 >ğ
cUn™
->
İtRound
) {

61 ià(
	`isD®vikStÜe
(
thisLIR
)) {

62 
dRegId
 = 
thisLIR
->
İ”ªds
[2];

63 
ÇtiveRegId
 = 
thisLIR
->
İ”ªds
[0];

64 
ArmLIR
 *
checkLIR
;

65 
sškDi¡ªû
 = 0;

67 
checkLIR
 = 
	`NEXT_LIR
(
thisLIR
);

68 
checkLIR
 !ğ
LIR
;

69 
checkLIR
 = 
	`NEXT_LIR
(checkLIR)) {

72 ià(
	`isD®vikLßd
(
checkLIR
) &&

73 
checkLIR
->
İ”ªds
[2] =ğ
dRegId
 ) {

74 ià(
	`FPREG
(
ÇtiveRegId
è!ğFPREG(
checkLIR
->
İ”ªds
[0])) {

78 ià(
checkLIR
->
İ”ªds
[0] !ğ
ÇtiveRegId
) {

79 
ArmLIR
 *
moveLIR
;

80 
moveLIR
 = 
	`dvmComp”RegCİy
(
cUn™
,

81 
checkLIR
->
İ”ªds
[0],

82 
ÇtiveRegId
);

87 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
checkLIR
,

88 (
LIR
 *è
moveLIR
);

90 
checkLIR
->
isNİ
 = 
Œue
;

94 } ià(
	`isD®vikStÜe
(
checkLIR
) &&

95 
checkLIR
->
İ”ªds
[2] =ğ
dRegId
) {

96 
thisLIR
->
isNİ
 = 
Œue
;

100 
boŞ
 
¡İH”e
 = 
çl£
;

103 
¡İH”e
 |ğ
checkLIR
->
g’”ic
.
Ãxt
 =ğ
NULL
;

109 
¡İH”e
 |ğ
checkLIR
->
İCode
 =ğ
THUMB_STMIA
 ||

110 
checkLIR
->
İCode
 =ğ
THUMB_LDMIA
 ||

111 
checkLIR
->
İCode
 =ğ
THUMB_STR_RRR
 ||

112 
checkLIR
->
İCode
 =ğ
THUMB_LDR_RRR
 ||

113 
checkLIR
->
İCode
 =ğ
THUMB2_VLDRD
 ||

114 
checkLIR
->
İCode
 =ğ
THUMB2_VSTRD
;

117 ià(!
	`isP£udoOpCode
(
checkLIR
->
İCode
)) {

120 
¡İH”e
 |ğ(
EncodšgM­
[
checkLIR
->
İCode
].
æags
 &

121 
CLOBBER_DEST
) != 0 &&

122 
checkLIR
->
İ”ªds
[0] =ğ
ÇtiveRegId
;

124 
¡İH”e
 |ğ(
EncodšgM­
[
checkLIR
->
İCode
].
æags
 &

125 
IS_BRANCH
) != 0;

129 ià(
¡İH”e
 =ğ
Œue
) {

132 ià(
sškDi¡ªû
 != 0) {

133 
ArmLIR
 *
ÃwStÜeLIR
 =

134 
	`dvmComp”New
((
ArmLIR
), 
Œue
);

135 *
ÃwStÜeLIR
 = *
thisLIR
;

136 
ÃwStÜeLIR
->
age
 = 
cUn™
->
İtRound
;

141 
	`dvmComp”In£¹LIRBefÜe
((
LIR
 *è
checkLIR
,

142 (
LIR
 *è
ÃwStÜeLIR
);

143 
thisLIR
->
isNİ
 = 
Œue
;

151 ià(!
	`isP£udoOpCode
(
checkLIR
->
İCode
)) {

152 
sškDi¡ªû
++;

158 
	}
}

160 
	$dvmComp”AµlyLoÿlO±imiz©iÚs
(
Comp©iÚUn™
 *
cUn™
, 
LIR
 *
h—dLIR
,

161 
LIR
 *
LIR
)

163 
	`­¶yLßdStÜeElimš©iÚ
(
cUn™
,

164 (
ArmLIR
 *è
h—dLIR
,

165 (
ArmLIR
 *è
LIR
);

166 
	}
}

	@compiler/codegen/arm/Thumb2Util.c

25 
	~"Codeg’.h
"

28 
lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
);

29 
g’ExpÜtPC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rDPC
, 
rAddr
);

30 
g’CÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
,

31 
ArmCÚd™iÚCode
 
cÚd
,

32 
ArmLIR
 *
rg‘
);

33 
ArmLIR
 *
g’UncÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
, ArmLIR *
rg‘
);

34 
lßdV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡Lo
,

35 
rDe¡Hi
);

36 
¡ÜeV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
rSrcLo
, 
rSrcHi
,

37 
vDe¡
, 
rSü©ch
);

38 
lßdV®ueAdd»ss
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
vDe¡
);

39 
lßdV®ue
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
);

40 
lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
di¥Ïûm’t
,

41 
rDe¡
);

42 
¡ÜeV®ue
(
Comp©iÚUn™
 *
cUn™
, 
rSrc
, 
vDe¡
,

43 
rSü©ch
);

44 
šlše
 
ArmLIR
 *
g’RegImmCheck
(
Comp©iÚUn™
 *
cUn™
,

45 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

46 
checkV®ue
, 
dOff£t
,

47 
ArmLIR
 *
püLab–
);

48 
ArmLIR
* 
dvmComp”RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
);

57 
	#vNÚe
 (-1)

	)

60 
	#NEXT_REG
(
»g
è(Ôeg + 1è& 3)

	)

67 
šlše
 
	$»£tRegi¡”ScÜebßrd
(
Comp©iÚUn™
 *
cUn™
)

69 
Regi¡”ScÜebßrd
 *
»gi¡”ScÜebßrd
 = &
cUn™
->registerScoreboard;

71 
	`dvmCË¬AÎB™s
(
»gi¡”ScÜebßrd
->
nuÎCheckedRegs
);

72 
»gi¡”ScÜebßrd
->
liveD®vikReg
 = 
vNÚe
;

73 
»gi¡”ScÜebßrd
->
ÇtiveReg
 = 
vNÚe
;

74 
»gi¡”ScÜebßrd
->
ÇtiveRegHi
 = 
vNÚe
;

75 
	}
}

78 
šlše
 
	$klNuÎCheckedRegi¡”
(
Comp©iÚUn™
 *
cUn™
, 
vReg
)

80 
	`dvmCË¬B™
(
cUn™
->
»gi¡”ScÜebßrd
.
nuÎCheckedRegs
, 
vReg
);

81 
	}
}

84 
šlše
 
	$upd©eLiveRegi¡”Paœ
(
Comp©iÚUn™
 *
cUn™
,

85 
vReg
, 
mRegLo
, 
mRegHi
)

87 
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 = 
vReg
;

88 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveReg
 = 
mRegLo
;

89 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveRegHi
 = 
mRegHi
;

90 
cUn™
->
»gi¡”ScÜebßrd
.
isWide
 = 
Œue
;

91 
	}
}

94 
šlše
 
	$upd©eLiveRegi¡”
(
Comp©iÚUn™
 *
cUn™
,

95 
vReg
, 
mReg
)

97 
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 = 
vReg
;

98 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveReg
 = 
mReg
;

99 
cUn™
->
»gi¡”ScÜebßrd
.
isWide
 = 
çl£
;

100 
	}
}

106 
šlše
 
	$£ËùFœ¡Regi¡”
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
,

107 
boŞ
 
isWide
)

109 
Regi¡”ScÜebßrd
 *
»gi¡”ScÜebßrd
 = &
cUn™
->registerScoreboard;

112 ià(
»gi¡”ScÜebßrd
->
liveD®vikReg
 =ğ
vNÚe
)

113  
r0
;

116 ià(
»gi¡”ScÜebßrd
->
liveD®vikReg
 =ğ
vSrc
) {

117 ià(
isWide
 !ğ
Œue
) {

118  
»gi¡”ScÜebßrd
->
ÇtiveReg
;

121  (
»gi¡”ScÜebßrd
->
ÇtiveReg
 + 1) & 2;

126 ià(
isWide
) {

127  (
»gi¡”ScÜebßrd
->
ÇtiveReg
 + 2) & 2;

129  (
»gi¡”ScÜebßrd
->
ÇtiveReg
 + 1) & 3;

132 
	}
}

136 
ArmLIR
* 
	$dvmComp”RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

138 
ArmLIR
* 
»s
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

139 
»s
->
İ”ªds
[0] = 
rDe¡
;

140 
»s
->
İ”ªds
[1] = 
rSrc
;

141 ià(
rDe¡
 =ğ
rSrc
) {

142 
»s
->
isNİ
 = 
Œue
;

144 ià(
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc
)) {

145 
»s
->
İCode
 = 
THUMB_MOV_RR
;

146 } ià(
	`FPREG
(
rDe¡
è&& FPREG(
rSrc
)) {

147 ià(
	`DOUBLEREG
(
rDe¡
)) {

148 
	`as£¹
(
	`DOUBLEREG
(
rSrc
));

149 
»s
->
İCode
 = 
THUMB2_VMOVD
;

151 
	`as£¹
(
	`SINGLEREG
(
rSrc
));

152 
»s
->
İCode
 = 
THUMB2_VMOVS
;

156 
	`as£¹
(!
	`FPREG
(
rDe¡
));

157 
	`as£¹
(!
	`FPREG
(
rSrc
));

158 
»s
->
İCode
 = 
THUMB2_MOV_RR
;

161  
»s
;

162 
	}
}

164 
	$ËadšgZ”os
(
u4
 
v®
)

166 
u4
 
®t
;

167 
n
;

168 
couÁ
;

170 
couÁ
 = 16;

171 
n
 = 32;

173 
®t
 = 
v®
 >> 
couÁ
;

174 ià(
®t
 != 0) {

175 
n
 =‚ - 
couÁ
;

176 
v®
 = 
®t
;

178 
couÁ
 >>= 1;

179 } 
couÁ
);

180  
n
 - 
v®
;

181 
	}
}

187 
	$modif›dImmedŸ‹
(
u4
 
v®ue
)

189 
zL—dšg
;

190 
zT¿šg
;

191 
u4
 
b0
 = 
v®ue
 & 0xff;

194 ià(
v®ue
 <= 0xFF)

195  
b0
;

196 ià(
v®ue
 =ğ((
b0
 << 16) | b0))

197  (0x1 << 8è| 
b0
;

198 ià(
v®ue
 =ğ((
b0
 << 24) | (b0 << 16) | (b0 << 8) | b0))

199  (0x3 << 8è| 
b0
;

200 
b0
 = (
v®ue
 >> 8) & 0xff;

201 ià(
v®ue
 =ğ((
b0
 << 24) | (b0 << 8)))

202  (0x2 << 8è| 
b0
;

204 
zL—dšg
 = 
	`ËadšgZ”os
(
v®ue
);

205 
zT¿šg
 = 32 - 
	`ËadšgZ”os
(~
v®ue
 & (value - 1));

207 ià((
zL—dšg
 + 
zT¿šg
) < 24)

210 
v®ue
 <<ğ
zL—dšg
 + 1;

212 
v®ue
 >>= 25;

214  
v®ue
 | ((0x8 + 
zL—dšg
) << 7);

215 
	}
}

221 
	$lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
)

223 
modImm
;

225 ià((
v®ue
 & 0xff) == value) {

226 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_IMM
, 
rDe¡
, 
v®ue
);

228 } ià((
v®ue
 & 0xFFFFFF00) == 0xFFFFFF00) {

229 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_IMM
, 
rDe¡
, ~
v®ue
);

230 
	`ÃwLIR2
(
cUn™
, 
THUMB_MVN
, 
rDe¡
,„Dest);

234 
modImm
 = 
	`modif›dImmedŸ‹
(
v®ue
);

235 ià(
modImm
 >= 0) {

236 
	`ÃwLIR2
(
cUn™
, 
THUMB2_MOV_IMM_SHIFT
, 
rDe¡
, 
modImm
);

240 ià((
v®ue
 & 0xffff) == value) {

241 
	`ÃwLIR2
(
cUn™
, 
THUMB2_MOV_IMM16
, 
rDe¡
, 
v®ue
);

245 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
, 
v®ue
, 255);

246 ià(
d©aT¬g‘
 =ğ
NULL
) {

247 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, 
v®ue
, 
çl£
);

249 
ArmLIR
 *
lßdPcR–
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

250 
lßdPcR–
->
İCode
 = 
THUMB_LDR_PC_REL
;

251 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

252 
lßdPcR–
->
İ”ªds
[0] = 
rDe¡
;

253 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

259 ià(
d©aT¬g‘
->
İ”ªds
[0] !ğ
v®ue
) {

260 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
rDe¡
, 
v®ue
 - 
d©aT¬g‘
->
İ”ªds
[0]);

262 
	}
}

265 
	$g’ExpÜtPC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rDPC
, 
rAddr
)

267 
off£t
 = 
	`off£tof
(
SckSaveA»a
, 
xŒa
.
cu¼’tPc
);

268 
	`lßdCÚ¡ªt
(
cUn™
, 
rDPC
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

269 
	`ÃwLIR3
(
cUn™
, 
THUMB2_STR_RRI8_PREDEC
, 
rDPC
, 
rFP
,

270 (
SckSaveA»a
è- 
off£t
);

271 
	}
}

274 
	$g’CÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
,

275 
ArmCÚd™iÚCode
 
cÚd
,

276 
ArmLIR
 *
rg‘
)

278 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
cÚd
);

279 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

280 
	}
}

283 
ArmLIR
 *
	$g’UncÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
, 
ArmLIR
 *
rg‘
)

285 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR0
(
cUn™
, 
THUMB_B_UNCOND
);

286 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

287  
b¿nch
;

288 
	}
}

294 
	$lßdV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡Lo
,

295 
rDe¡Hi
)

297 
boŞ
 
®lLowRegs
 = (
	`LOWREG
(
rDe¡Lo
è&& LOWREG(
rDe¡Hi
));

300 ià(
®lLowRegs
 && 
vSrc
 <= 30) {

301 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡Lo
, 
rFP
, 
vSrc
);

302 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡Hi
, 
rFP
, 
vSrc
+1);

304 
	`as£¹
(
rDe¡Lo
 < 
rDe¡Hi
);

305 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc
, 
rDe¡Lo
);

306 ià(
®lLowRegs
) {

307 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
rDe¡Lo
, (1<<rDe¡Loè| (1<<(
rDe¡Hi
)));

309 
	`as£¹
(0);

312 
	}
}

318 
	$¡ÜeV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
rSrcLo
, 
rSrcHi
,

319 
vDe¡
, 
rSü©ch
)

321 
boŞ
 
®lLowRegs
 = (
	`LOWREG
(
rSrcLo
è&& LOWREG(
rSrcHi
));

322 
	`klNuÎCheckedRegi¡”
(
cUn™
, 
vDe¡
);

323 
	`klNuÎCheckedRegi¡”
(
cUn™
, 
vDe¡
+1);

324 
	`upd©eLiveRegi¡”Paœ
(
cUn™
, 
vDe¡
, 
rSrcLo
, 
rSrcHi
);

327 ià(
®lLowRegs
 && 
vDe¡
 <= 30) {

328 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rSrcLo
, 
rFP
, 
vDe¡
);

329 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rSrcHi
, 
rFP
, 
vDe¡
+1);

331 
	`as£¹
(
rSrcLo
 < 
rSrcHi
);

332 
	`lßdV®ueAdd»ss
(
cUn™
, 
vDe¡
, 
rSü©ch
);

333 ià(
®lLowRegs
) {

334 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
rSü©ch
,

335 (1<<
rSrcLo
è| (1 << (
rSrcHi
)));

337 
	`as£¹
(0);

340 
	}
}

342 
	$addRegi¡”Regi¡”
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
,

343 
rSrc1
, 
rSrc2
)

345 ià(!
	`LOWREG
(
rDe¡
è|| !LOWREG(
rSrc1
è|| !LOWREG(
rSrc2
)) {

346 
	`as£¹
(0);

349 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
rDe¡
, 
rFP
,„Dest);

351 
	}
}

354 
	$addRegi¡”ImmedŸ‹
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
,

355 
v®ue
)

358 ià(
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc
è&& (
v®ue
 <= 7)) {

359 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
rDe¡
, 
rSrc
, 
v®ue
);

360 } ià(
	`LOWREG
(
rDe¡
è&& (rDe¡ =ğ
rSrc
è&& ((
v®ue
 & 0xff) == 0xff)) {

361 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
rDe¡
, 
v®ue
);

362 } ià(
v®ue
 <= 4095) {

363 
	`ÃwLIR3
(
cUn™
, 
THUMB2_ADD_RRI12
, 
rDe¡
, 
rSrc
, 
v®ue
);

365 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
v®ue
);

366 
	`addRegi¡”Regi¡”
(
cUn™
, 
rDe¡
,„De¡, 
rFP
);

368 
	}
}

371 
	$lßdV®ueAdd»ss
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
)

373 
	`addRegi¡”ImmedŸ‹
(
cUn™
, 
rDe¡
, 
rFP
, 
vSrc
*4);

374 
	}
}

385 
	$lßdFlßt
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
)

387 
	`as£¹
(
vSrc
 <= 255);

388 
	`as£¹
(
	`SINGLEREG
(
rDe¡
));

389 
	`ÃwLIR3
(
cUn™
, 
THUMB2_VLDRS
, 
rDe¡
, 
rFP
, 
vSrc
);

390 
	}
}

393 
	$¡ÜeFlßt
(
Comp©iÚUn™
 *
cUn™
, 
rSrc
, 
vDe¡
,

394 
rSü©ch
)

396 
	`as£¹
(
vSrc
 <= 255);

397 
	`as£¹
(
	`SINGLEREG
(
rSrc
));

398 
	`ÃwLIR3
(
cUn™
, 
THUMB2_VSTRS
, 
rSrc
, 
rFP
, 
vDe¡
);

399 
	}
}

402 
	$lßdDoubË
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
)

404 
	`as£¹
(
vSrc
 <= 255);

405 
	`as£¹
(
	`DOUBLEREG
(
rDe¡
));

406 
	`ÃwLIR3
(
cUn™
, 
THUMB2_VLDRD
, 
rDe¡
, 
rFP
, 
vSrc
);

407 
	}
}

410 
	$¡ÜeDoubË
(
Comp©iÚUn™
 *
cUn™
, 
rSrc
, 
vDe¡
,

411 
rSü©ch
)

413 
	`as£¹
(
vSrc
 <= 255);

414 
	`as£¹
(
	`DOUBLEREG
(
rSrc
));

415 
	`ÃwLIR3
(
cUn™
, 
THUMB2_VSTRD
, 
rSrc
, 
rFP
, 
vDe¡
);

416 
	}
}

420 
	$lßdV®ue
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
)

422 
	`lßdWÜdDi¥
(
cUn™
, 
rFP
, 
vSrc
 * 4, 
rDe¡
);

423 
	}
}

426 
	$lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
di¥Ïûm’t
,

427 
rDe¡
)

429 
boŞ
 
®lLowRegs
 = (
	`LOWREG
(
rBa£
è&& LOWREG(
rDe¡
));

430 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

432 ià(
®lLowRegs
 && 
di¥Ïûm’t
 < 128) {

433 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡
, 
rBa£
, 
di¥Ïûm’t
 >> 2);

434 } ià(
di¥Ïûm’t
 < 4092) {

435 
	`ÃwLIR3
(
cUn™
, 
THUMB2_LDR_RRI12
, 
rDe¡
, 
rFP
, 
di¥Ïûm’t
);

437 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
di¥Ïûm’t
);

438 ià(
®lLowRegs
) {

439 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRR
, 
rDe¡
, 
rBa£
,„Dest);

441 
	`as£¹
(0);

444 
	}
}

447 
	$¡ÜeV®ue
(
Comp©iÚUn™
 *
cUn™
, 
rSrc
, 
vDe¡
,

448 
rSü©ch
)

450 
	`klNuÎCheckedRegi¡”
(
cUn™
, 
vDe¡
);

451 
	`upd©eLiveRegi¡”
(
cUn™
, 
vDe¡
, 
rSrc
);

454 ià(
	`LOWREG
(
rSrc
è&& 
vDe¡
 <= 31) {

455 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rSrc
, 
rFP
, 
vDe¡
);

456 } ià(
vDe¡
 <= 1023) {

457 
	`ÃwLIR3
(
cUn™
, 
THUMB2_STR_RRI12
, 
rSrc
, 
rFP
, 
vDe¡
*4);

459 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
vDe¡
*4);

460 ià(
	`LOWREG
(
rSrc
)) {

461 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRR
, 
rSrc
, 
rFP
, 
rSü©ch
);

463 
	`as£¹
(0);

466 
	}
}

472 
ArmLIR
 *
	$g’RegImmCheck
(
Comp©iÚUn™
 *
cUn™
,

473 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

474 
checkV®ue
, 
dOff£t
,

475 
ArmLIR
 *
püLab–
)

477 
ArmLIR
 *
b¿nch
;

478 ià((
	`LOWREG
(
»g
)è&& (
checkV®ue
 == 0) &&

479 ((
cÚd
 =ğ
ARM_COND_EQ
è|| (cÚd =ğ
ARM_COND_NE
))) {

480 
b¿nch
 = 
	`ÃwLIR2
(
cUn™
,

481 (
cÚd
 =ğ
ARM_COND_EQ
è? 
THUMB2_CBZ
 : 
THUMB2_CBNZ
,

482 
»g
, 0);

484 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
»g
, 
checkV®ue
);

485 
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
cÚd
);

487  
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

488 
	}
}

	@compiler/codegen/arm/ThumbUtil.c

25 
	~"Codeg’.h
"

28 
lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
);

29 
g’ExpÜtPC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rDPC
, 
rAddr
);

30 
g’CÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
,

31 
ArmCÚd™iÚCode
 
cÚd
,

32 
ArmLIR
 *
rg‘
);

33 
ArmLIR
 *
g’UncÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
, ArmLIR *
rg‘
);

34 
lßdV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡Lo
,

35 
rDe¡Hi
);

36 
¡ÜeV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
rSrcLo
, 
rSrcHi
,

37 
vDe¡
, 
rSü©ch
);

38 
lßdV®ueAdd»ss
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
vDe¡
);

39 
lßdV®ue
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
);

40 
lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
di¥Ïûm’t
,

41 
rDe¡
);

42 
¡ÜeV®ue
(
Comp©iÚUn™
 *
cUn™
, 
rSrc
, 
vDe¡
,

43 
rSü©ch
);

44 
šlše
 
ArmLIR
 *
g’RegImmCheck
(
Comp©iÚUn™
 *
cUn™
,

45 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

46 
checkV®ue
, 
dOff£t
,

47 
ArmLIR
 *
püLab–
);

48 
ArmLIR
* 
dvmComp”RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
);

57 
	#vNÚe
 (-1)

	)

60 
	#NEXT_REG
(
»g
è(Ôeg + 1è& 3)

	)

67 
šlše
 
	$»£tRegi¡”ScÜebßrd
(
Comp©iÚUn™
 *
cUn™
)

69 
Regi¡”ScÜebßrd
 *
»gi¡”ScÜebßrd
 = &
cUn™
->registerScoreboard;

71 
	`dvmCË¬AÎB™s
(
»gi¡”ScÜebßrd
->
nuÎCheckedRegs
);

72 
»gi¡”ScÜebßrd
->
liveD®vikReg
 = 
vNÚe
;

73 
»gi¡”ScÜebßrd
->
ÇtiveReg
 = 
vNÚe
;

74 
»gi¡”ScÜebßrd
->
ÇtiveRegHi
 = 
vNÚe
;

75 
	}
}

78 
šlše
 
	$klNuÎCheckedRegi¡”
(
Comp©iÚUn™
 *
cUn™
, 
vReg
)

80 
	`dvmCË¬B™
(
cUn™
->
»gi¡”ScÜebßrd
.
nuÎCheckedRegs
, 
vReg
);

81 
	}
}

84 
šlše
 
	$upd©eLiveRegi¡”Paœ
(
Comp©iÚUn™
 *
cUn™
,

85 
vReg
, 
mRegLo
, 
mRegHi
)

87 
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 = 
vReg
;

88 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveReg
 = 
mRegLo
;

89 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveRegHi
 = 
mRegHi
;

90 
cUn™
->
»gi¡”ScÜebßrd
.
isWide
 = 
Œue
;

91 
	}
}

94 
šlše
 
	$upd©eLiveRegi¡”
(
Comp©iÚUn™
 *
cUn™
,

95 
vReg
, 
mReg
)

97 
cUn™
->
»gi¡”ScÜebßrd
.
liveD®vikReg
 = 
vReg
;

98 
cUn™
->
»gi¡”ScÜebßrd
.
ÇtiveReg
 = 
mReg
;

99 
cUn™
->
»gi¡”ScÜebßrd
.
isWide
 = 
çl£
;

100 
	}
}

106 
šlše
 
	$£ËùFœ¡Regi¡”
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
,

107 
boŞ
 
isWide
)

109 
Regi¡”ScÜebßrd
 *
»gi¡”ScÜebßrd
 = &
cUn™
->registerScoreboard;

112 ià(
»gi¡”ScÜebßrd
->
liveD®vikReg
 =ğ
vNÚe
)

113  
r0
;

116 ià(
»gi¡”ScÜebßrd
->
liveD®vikReg
 =ğ
vSrc
) {

117 ià(
isWide
 !ğ
Œue
) {

118  
»gi¡”ScÜebßrd
->
ÇtiveReg
;

121  (
»gi¡”ScÜebßrd
->
ÇtiveReg
 + 1) & 2;

126 ià(
isWide
) {

127  (
»gi¡”ScÜebßrd
->
ÇtiveReg
 + 2) & 2;

129  (
»gi¡”ScÜebßrd
->
ÇtiveReg
 + 1) & 3;

132 
	}
}

136 
ArmLIR
* 
	$dvmComp”RegCİy
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
rSrc
)

138 
ArmLIR
* 
»s
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

139 
	`as£¹
(
	`LOWREG
(
rDe¡
è&& LOWREG(
rSrc
));

140 
»s
->
İ”ªds
[0] = 
rDe¡
;

141 
»s
->
İ”ªds
[1] = 
rSrc
;

142 
»s
->
İCode
 = 
THUMB_MOV_RR
;

143 ià(
rDe¡
 =ğ
rSrc
) {

144 
»s
->
isNİ
 = 
Œue
;

146  
»s
;

147 
	}
}

153 
	$lßdCÚ¡ªt
(
Comp©iÚUn™
 *
cUn™
, 
rDe¡
, 
v®ue
)

156 ià((
v®ue
 >= 0) && (value <= 255)) {

157 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_IMM
, 
rDe¡
, 
v®ue
);

159 } ià((
v®ue
 & 0xFFFFFF00) == 0xFFFFFF00) {

160 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_IMM
, 
rDe¡
, ~
v®ue
);

161 
	`ÃwLIR2
(
cUn™
, 
THUMB_MVN
, 
rDe¡
,„Dest);

165 
ArmLIR
 *
d©aT¬g‘
 = 
	`sÿnL™”®PoŞ
(
cUn™
, 
v®ue
, 255);

166 ià(
d©aT¬g‘
 =ğ
NULL
) {

167 
d©aT¬g‘
 = 
	`addWÜdD©a
(
cUn™
, 
v®ue
, 
çl£
);

169 
ArmLIR
 *
lßdPcR–
 = 
	`dvmComp”New
((ArmLIR), 
Œue
);

170 
lßdPcR–
->
İCode
 = 
THUMB_LDR_PC_REL
;

171 
lßdPcR–
->
g’”ic
.
rg‘
 = (
LIR
 *è
d©aT¬g‘
;

172 
lßdPcR–
->
İ”ªds
[0] = 
rDe¡
;

173 
	`dvmComp”Aµ’dLIR
(
cUn™
, (
LIR
 *è
lßdPcR–
);

179 ià(
d©aT¬g‘
->
İ”ªds
[0] !ğ
v®ue
) {

180 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
rDe¡
, 
v®ue
 - 
d©aT¬g‘
->
İ”ªds
[0]);

182 
	}
}

185 
	$g’ExpÜtPC
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
rDPC
, 
rAddr
)

187 
off£t
 = 
	`off£tof
(
SckSaveA»a
, 
xŒa
.
cu¼’tPc
);

188 
	`lßdCÚ¡ªt
(
cUn™
, 
rDPC
, (è(cUn™->
m‘hod
->
š¢s
 + 
mœ
->
off£t
));

189 
	`ÃwLIR2
(
cUn™
, 
THUMB_MOV_RR
, 
rAddr
, 
rFP
);

190 
	`ÃwLIR2
(
cUn™
, 
THUMB_SUB_RI8
, 
rAddr
, (
SckSaveA»a
è- 
off£t
);

191 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rDPC
, 
rAddr
, 0);

192 
	}
}

195 
	$g’CÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
,

196 
ArmCÚd™iÚCode
 
cÚd
,

197 
ArmLIR
 *
rg‘
)

199 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
cÚd
);

200 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

201 
	}
}

204 
ArmLIR
 *
	$g’UncÚd™iÚ®B¿nch
(
Comp©iÚUn™
 *
cUn™
, 
ArmLIR
 *
rg‘
)

206 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR0
(
cUn™
, 
THUMB_B_UNCOND
);

207 
b¿nch
->
g’”ic
.
rg‘
 = (
LIR
 *)arget;

208  
b¿nch
;

209 
	}
}

215 
	$lßdV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡Lo
,

216 
rDe¡Hi
)

219 ià(
vSrc
 <= 30) {

220 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡Lo
, 
rFP
, 
vSrc
);

221 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡Hi
, 
rFP
, 
vSrc
+1);

223 ià(
vSrc
 <= 64) {

225 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
rDe¡Lo
, 
rFP
, 4);

226 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
rDe¡Lo
, (
vSrc
-1)*4);

229 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡Lo
, 
vSrc
*4);

230 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
rDe¡Lo
, 
rFP
,„DestLo);

232 
	`as£¹
(
rDe¡Lo
 < 
rDe¡Hi
);

233 
	`ÃwLIR2
(
cUn™
, 
THUMB_LDMIA
, 
rDe¡Lo
, (1<<rDe¡Loè| (1<<(
rDe¡Hi
)));

235 
	}
}

241 
	$¡ÜeV®uePaœ
(
Comp©iÚUn™
 *
cUn™
, 
rSrcLo
, 
rSrcHi
,

242 
vDe¡
, 
rSü©ch
)

244 
	`klNuÎCheckedRegi¡”
(
cUn™
, 
vDe¡
);

245 
	`klNuÎCheckedRegi¡”
(
cUn™
, 
vDe¡
+1);

246 
	`upd©eLiveRegi¡”Paœ
(
cUn™
, 
vDe¡
, 
rSrcLo
, 
rSrcHi
);

249 ià(
vDe¡
 <= 30) {

250 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rSrcLo
, 
rFP
, 
vDe¡
);

251 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rSrcHi
, 
rFP
, 
vDe¡
+1);

253 ià(
vDe¡
 <= 64) {

255 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
rSü©ch
, 
rFP
, 4);

256 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
rSü©ch
, (
vDe¡
-1)*4);

259 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
vDe¡
*4);

260 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
rSü©ch
, 
rFP
,„Scratch);

262 
	`as£¹
(
rSrcLo
 < 
rSrcHi
);

263 
	`ÃwLIR2
(
cUn™
, 
THUMB_STMIA
, 
rSü©ch
, (1<<
rSrcLo
è| (1 << (
rSrcHi
)));

265 
	}
}

268 
	$lßdV®ueAdd»ss
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
)

271 ià(
vSrc
 <= 1) {

272 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
rDe¡
, 
rFP
, 
vSrc
*4);

273 } ià(
vSrc
 <= 64) {

275 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRI3
, 
rDe¡
, 
rFP
, 4);

276 
	`ÃwLIR2
(
cUn™
, 
THUMB_ADD_RI8
, 
rDe¡
, (
vSrc
-1)*4);

278 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
vSrc
*4);

279 
	`ÃwLIR3
(
cUn™
, 
THUMB_ADD_RRR
, 
rDe¡
, 
rFP
,„Dest);

281 
	}
}

284 
	$lßdV®ue
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
)

287 ià(
vSrc
 <= 31) {

288 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡
, 
rFP
, 
vSrc
);

290 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
vSrc
*4);

291 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRR
, 
rDe¡
, 
rFP
,„Dest);

293 
	}
}

296 
	$lßdWÜdDi¥
(
Comp©iÚUn™
 *
cUn™
, 
rBa£
, 
di¥Ïûm’t
,

297 
rDe¡
)

299 
	`as£¹
((
di¥Ïûm’t
 & 0x3) == 0);

301 ià(
di¥Ïûm’t
 < 128) {

302 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRI5
, 
rDe¡
, 
rBa£
, 
di¥Ïûm’t
 >> 2);

304 
	`lßdCÚ¡ªt
(
cUn™
, 
rDe¡
, 
di¥Ïûm’t
);

305 
	`ÃwLIR3
(
cUn™
, 
THUMB_LDR_RRR
, 
rDe¡
, 
rBa£
,„Dest);

307 
	}
}

310 
	$¡ÜeV®ue
(
Comp©iÚUn™
 *
cUn™
, 
rSrc
, 
vDe¡
,

311 
rSü©ch
)

313 
	`klNuÎCheckedRegi¡”
(
cUn™
, 
vDe¡
);

314 
	`upd©eLiveRegi¡”
(
cUn™
, 
vDe¡
, 
rSrc
);

317 ià(
vDe¡
 <= 31) {

318 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
rSrc
, 
rFP
, 
vDe¡
);

320 
	`lßdCÚ¡ªt
(
cUn™
, 
rSü©ch
, 
vDe¡
*4);

321 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRR
, 
rSrc
, 
rFP
, 
rSü©ch
);

323 
	}
}

329 
šlše
 
ArmLIR
 *
	$g’RegImmCheck
(
Comp©iÚUn™
 *
cUn™
,

330 
ArmCÚd™iÚCode
 
cÚd
, 
»g
,

331 
checkV®ue
, 
dOff£t
,

332 
ArmLIR
 *
püLab–
)

334 
	`ÃwLIR2
(
cUn™
, 
THUMB_CMP_RI8
, 
»g
, 
checkV®ue
);

335 
ArmLIR
 *
b¿nch
 = 
	`ÃwLIR2
(
cUn™
, 
THUMB_B_COND
, 0, 
cÚd
);

336  
	`g’CheckCommÚ
(
cUn™
, 
dOff£t
, 
b¿nch
, 
püLab–
);

337 
	}
}

	@compiler/codegen/arm/armv5te-vfp/ArchVariant.c

22 
	#USE_IN_CACHE_HANDLER
 1

	)

28 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
(
Comp©iÚUn™
 *
cUn™
)

30  
DALVIK_JIT_THUMB
;

31 
	}
}

37 
	$g’Di¥©chToHªdËr
(
Comp©iÚUn™
 *
cUn™
, 
Tem¶©eOpCode
 
İCode
)

39 #ià
USE_IN_CACHE_HANDLER


48 
	`ÃwLIR2
(
cUn™
, 
THUMB_BLX_1
,

49 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
],

50 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
]);

51 
	`ÃwLIR2
(
cUn™
, 
THUMB_BLX_2
,

52 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
],

53 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
]);

59 *
‹m¶©ePŒ
;

61 
	#JIT_TEMPLATE
(
X
è
dvmComp”_TEMPLATE_
##
	`X
();

	)

62 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

63 #undeà
JIT_TEMPLATE


64 
İCode
) {

65 
	#JIT_TEMPLATE
(
X
) \

66 
TEMPLATE_
##
X
: { 
‹m¶©ePŒ
 = 
dvmComp”_TEMPLATE_
##X; ; }

	)

67 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

68 #undeà
JIT_TEMPLATE


69 : 
‹m¶©ePŒ
 = 
NULL
;

71 
	`lßdCÚ¡ªt
(
cUn™
, 
r7
, (è
‹m¶©ePŒ
);

72 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r7
);

74 
	}
}

77 
boŞ
 
	$dvmComp”ArchIn™
()

80 
	#JIT_TEMPLATE
(
X
è
dvmComp”_TEMPLATE_
##
	`X
();

	)

81 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

82 #undeà
JIT_TEMPLATE


84 
i
 = 0;

85 
	`dvmComp”Tem¶©eS¹
();

91 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

92 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

93 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

94 #undeà
JIT_TEMPLATE


97 
	`as£¹
(
	`off£tof
(
CÏssObjeù
, 
vbË
) < 128 &&

98 (
	`off£tof
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

99 
	`as£¹
(
	`off£tof
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

100 (
	`off£tof
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

101 
	`as£¹
(
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

104 
	`as£¹
((
SckSaveA»a
) < 236);

111 
	`as£¹
(
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
) < 108);

112  
Œue
;

113 
	}
}

115 
boŞ
 
	$g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

117 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

118 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

119 
vSrc
 = 
mœ
->
d®vikIn¢
.
vA
;

120 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc
, 
r2
);

121 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_SQRT_DOUBLE_VFP
);

122 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
r0
, 
rGLUE
, 
off£t
 >> 2);

123 
	`ÃwLIR3
(
cUn™
, 
THUMB_STR_RRI5
, 
r1
, 
rGLUE
, (
off£t
 >> 2) + 1);

124  
çl£
;

125 
	}
}

127 
boŞ
 
	$g’IÆšeCos
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

129  
çl£
;

130 
	}
}

132 
boŞ
 
	$g’IÆšeSš
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

134  
çl£
;

135 
	}
}

137 
boŞ
 
	$g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

138 
vSrc1
, 
vSrc2
)

140 
Tem¶©eOpCode
 
İCode
;

146 
mœ
->
d®vikIn¢
.
İCode
) {

147 
OP_ADD_FLOAT_2ADDR
:

148 
OP_ADD_FLOAT
:

149 
İCode
 = 
TEMPLATE_ADD_FLOAT_VFP
;

151 
OP_SUB_FLOAT_2ADDR
:

152 
OP_SUB_FLOAT
:

153 
İCode
 = 
TEMPLATE_SUB_FLOAT_VFP
;

155 
OP_DIV_FLOAT_2ADDR
:

156 
OP_DIV_FLOAT
:

157 
İCode
 = 
TEMPLATE_DIV_FLOAT_VFP
;

159 
OP_MUL_FLOAT_2ADDR
:

160 
OP_MUL_FLOAT
:

161 
İCode
 = 
TEMPLATE_MUL_FLOAT_VFP
;

163 
OP_REM_FLOAT_2ADDR
:

164 
OP_REM_FLOAT
:

165 
OP_NEG_FLOAT
: {

166  
	`g’Ar™hOpFlßtPÜbË
(
cUn™
, 
mœ
, 
vDe¡
,

167 
vSrc1
, 
vSrc2
);

170  
Œue
;

172 
	`lßdV®ueAdd»ss
(
cUn™
, 
vDe¡
, 
r0
);

173 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1
, 
r1
);

174 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r2
);

175 
	`g’Di¥©chToHªdËr
(
cUn™
, 
İCode
);

176  
çl£
;

177 
	}
}

179 
boŞ
 
	$g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

180 
vSrc1
, 
vSrc2
)

182 
Tem¶©eOpCode
 
İCode
;

188 
mœ
->
d®vikIn¢
.
İCode
) {

189 
OP_ADD_DOUBLE_2ADDR
:

190 
OP_ADD_DOUBLE
:

191 
İCode
 = 
TEMPLATE_ADD_DOUBLE_VFP
;

193 
OP_SUB_DOUBLE_2ADDR
:

194 
OP_SUB_DOUBLE
:

195 
İCode
 = 
TEMPLATE_SUB_DOUBLE_VFP
;

197 
OP_DIV_DOUBLE_2ADDR
:

198 
OP_DIV_DOUBLE
:

199 
İCode
 = 
TEMPLATE_DIV_DOUBLE_VFP
;

201 
OP_MUL_DOUBLE_2ADDR
:

202 
OP_MUL_DOUBLE
:

203 
İCode
 = 
TEMPLATE_MUL_DOUBLE_VFP
;

205 
OP_REM_DOUBLE_2ADDR
:

206 
OP_REM_DOUBLE
:

207 
OP_NEG_DOUBLE
: {

208  
	`g’Ar™hOpDoubËPÜbË
(
cUn™
, 
mœ
, 
vDe¡
,

209 
vSrc1
, 
vSrc2
);

212  
Œue
;

214 
	`lßdV®ueAdd»ss
(
cUn™
, 
vDe¡
, 
r0
);

215 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1
, 
r1
);

216 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r2
);

217 
	`g’Di¥©chToHªdËr
(
cUn™
, 
İCode
);

218  
çl£
;

219 
	}
}

221 
boŞ
 
	$g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

223 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

224 
vSrc1De¡
 = 
mœ
->
d®vikIn¢
.
vA
;

225 
vSrc2
 = 
mœ
->
d®vikIn¢
.
vB
;

226 
Tem¶©eOpCode
 
‹m¶©e
;

228 
İCode
) {

229 
OP_INT_TO_FLOAT
:

230 
‹m¶©e
 = 
TEMPLATE_INT_TO_FLOAT_VFP
;

232 
OP_FLOAT_TO_INT
:

233 
‹m¶©e
 = 
TEMPLATE_FLOAT_TO_INT_VFP
;

235 
OP_DOUBLE_TO_FLOAT
:

236 
‹m¶©e
 = 
TEMPLATE_DOUBLE_TO_FLOAT_VFP
;

238 
OP_FLOAT_TO_DOUBLE
:

239 
‹m¶©e
 = 
TEMPLATE_FLOAT_TO_DOUBLE_VFP
;

241 
OP_INT_TO_DOUBLE
:

242 
‹m¶©e
 = 
TEMPLATE_INT_TO_DOUBLE_VFP
;

244 
OP_DOUBLE_TO_INT
:

245 
‹m¶©e
 = 
TEMPLATE_DOUBLE_TO_INT_VFP
;

247 
OP_FLOAT_TO_LONG
:

248 
OP_LONG_TO_FLOAT
:

249 
OP_DOUBLE_TO_LONG
:

250 
OP_LONG_TO_DOUBLE
:

251  
	`g’CÚv”siÚPÜbË
(
cUn™
, 
mœ
);

253  
Œue
;

255 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1De¡
, 
r0
);

256 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r1
);

257 
	`g’Di¥©chToHªdËr
(
cUn™
, 
‹m¶©e
);

258  
çl£
;

259 
	}
}

261 
boŞ
 
	$g’CmpX
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
, 
vSrc1
,

262 
vSrc2
)

264 
Tem¶©eOpCode
 
‹m¶©e
;

270 
mœ
->
d®vikIn¢
.
İCode
) {

271 
OP_CMPL_FLOAT
:

272 
‹m¶©e
 = 
TEMPLATE_CMPL_FLOAT_VFP
;

274 
OP_CMPG_FLOAT
:

275 
‹m¶©e
 = 
TEMPLATE_CMPG_FLOAT_VFP
;

277 
OP_CMPL_DOUBLE
:

278 
‹m¶©e
 = 
TEMPLATE_CMPL_DOUBLE_VFP
;

280 
OP_CMPG_DOUBLE
:

281 
‹m¶©e
 = 
TEMPLATE_CMPG_DOUBLE_VFP
;

284  
Œue
;

286 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1
, 
r0
);

287 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r1
);

288 
	`g’Di¥©chToHªdËr
(
cUn™
, 
‹m¶©e
);

289 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

290  
çl£
;

291 
	}
}

	@compiler/codegen/arm/armv5te-vfp/ArchVariant.h

17 #iâdeà
_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H


18 
	#_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

23 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

31 } 
	tTem¶©eOpCode
;

32 #undeà
JIT_TEMPLATE


	@compiler/codegen/arm/armv5te/ArchVariant.c

22 
	#USE_IN_CACHE_HANDLER
 1

	)

28 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
(
Comp©iÚUn™
 *
cUn™
)

30  
DALVIK_JIT_THUMB
;

31 
	}
}

37 
	$g’Di¥©chToHªdËr
(
Comp©iÚUn™
 *
cUn™
, 
Tem¶©eOpCode
 
İCode
)

39 #ià
USE_IN_CACHE_HANDLER


48 
	`ÃwLIR2
(
cUn™
, 
THUMB_BLX_1
,

49 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
],

50 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
]);

51 
	`ÃwLIR2
(
cUn™
, 
THUMB_BLX_2
,

52 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
],

53 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
]);

59 *
‹m¶©ePŒ
;

61 
	#JIT_TEMPLATE
(
X
è
dvmComp”_TEMPLATE_
##
	`X
();

	)

62 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

63 #undeà
JIT_TEMPLATE


64 
İCode
) {

65 
	#JIT_TEMPLATE
(
X
) \

66 
TEMPLATE_
##
X
: { 
‹m¶©ePŒ
 = 
dvmComp”_TEMPLATE_
##X; ; }

	)

67 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

68 #undeà
JIT_TEMPLATE


69 : 
‹m¶©ePŒ
 = 
NULL
;

71 
	`lßdCÚ¡ªt
(
cUn™
, 
r7
, (è
‹m¶©ePŒ
);

72 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r7
);

74 
	}
}

77 
boŞ
 
	$dvmComp”ArchIn™
()

80 
	#JIT_TEMPLATE
(
X
è
dvmComp”_TEMPLATE_
##
	`X
();

	)

81 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

82 #undeà
JIT_TEMPLATE


84 
i
 = 0;

85 
	`dvmComp”Tem¶©eS¹
();

91 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

92 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

93 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

94 #undeà
JIT_TEMPLATE


97 
	`as£¹
(
	`off£tof
(
CÏssObjeù
, 
vbË
) < 128 &&

98 (
	`off£tof
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

99 
	`as£¹
(
	`off£tof
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

100 (
	`off£tof
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

101 
	`as£¹
(
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

104 
	`as£¹
((
SckSaveA»a
) < 236);

111 
	`as£¹
(
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
) < 108);

112  
Œue
;

113 
	}
}

115 
boŞ
 
	$g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

117  
çl£
;

118 
	}
}

120 
boŞ
 
	$g’IÆšeCos
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

122  
çl£
;

123 
	}
}

125 
boŞ
 
	$g’IÆšeSš
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

127  
çl£
;

128 
	}
}

130 
boŞ
 
	$g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

132  
	`g’CÚv”siÚPÜbË
(
cUn™
, 
mœ
);

133 
	}
}

135 
boŞ
 
	$g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

136 
vSrc1
, 
vSrc2
)

138  
	`g’Ar™hOpFlßtPÜbË
(
cUn™
, 
mœ
, 
vDe¡
, 
vSrc1
, 
vSrc2
);

139 
	}
}

141 
boŞ
 
	$g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

142 
vSrc1
, 
vSrc2
)

144  
	`g’Ar™hOpDoubËPÜbË
(
cUn™
, 
mœ
, 
vDe¡
, 
vSrc1
, 
vSrc2
);

145 
	}
}

147 
boŞ
 
	$g’CmpX
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
, 
vSrc1
,

148 
vSrc2
)

154 
mœ
->
d®vikIn¢
.
İCode
) {

155 
OP_CMPL_FLOAT
:

156 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
r0
);

157 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
r1
);

158 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPL_FLOAT
);

159 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

161 
OP_CMPG_FLOAT
:

162 
	`lßdV®ue
(
cUn™
, 
vSrc1
, 
r0
);

163 
	`lßdV®ue
(
cUn™
, 
vSrc2
, 
r1
);

164 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPG_FLOAT
);

165 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

167 
OP_CMPL_DOUBLE
:

168 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1
, 
r0
);

169 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r1
);

170 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPL_DOUBLE
);

171 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

173 
OP_CMPG_DOUBLE
:

174 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1
, 
r0
);

175 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r1
);

176 
	`g’Di¥©chToHªdËr
(
cUn™
, 
TEMPLATE_CMPG_DOUBLE
);

177 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

180  
Œue
;

182  
çl£
;

183 
	}
}

	@compiler/codegen/arm/armv5te/ArchVariant.h

17 #iâdeà
_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_ARCHVARIANT_H


18 
	#_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_ARCHVARIANT_H


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

23 
	~"../../../‹m¶©e/¬mv5‹/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

31 } 
	tTem¶©eOpCode
;

32 #undeà
JIT_TEMPLATE


	@compiler/codegen/arm/armv7-a/ArchVariant.c

18 
lßdFlßt
(
Comp©iÚUn™
 *
cUn™
, 
vSrc
, 
rDe¡
);

25 
	#USE_IN_CACHE_HANDLER
 1

	)

31 
J™In¡ruùiÚS‘Ty³
 
	$dvmComp”In¡ruùiÚS‘
(
Comp©iÚUn™
 *
cUn™
)

33  
DALVIK_JIT_THUMB2
;

34 
	}
}

40 
	$g’Di¥©chToHªdËr
(
Comp©iÚUn™
 *
cUn™
, 
Tem¶©eOpCode
 
İCode
)

42 #ià
USE_IN_CACHE_HANDLER


51 
	`ÃwLIR2
(
cUn™
, 
THUMB_BLX_1
,

52 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
],

53 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
]);

54 
	`ÃwLIR2
(
cUn™
, 
THUMB_BLX_2
,

55 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
],

56 (è
gDvmJ™
.
codeCache
 + 
‹m¶©eEÁryOff£ts
[
İCode
]);

62 *
‹m¶©ePŒ
;

64 
	#JIT_TEMPLATE
(
X
è
dvmComp”_TEMPLATE_
##
	`X
();

	)

65 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

66 #undeà
JIT_TEMPLATE


67 
İCode
) {

68 
	#JIT_TEMPLATE
(
X
) \

69 
TEMPLATE_
##
X
: { 
‹m¶©ePŒ
 = 
dvmComp”_TEMPLATE_
##X; ; }

	)

70 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

71 #undeà
JIT_TEMPLATE


72 : 
‹m¶©ePŒ
 = 
NULL
;

74 
	`lßdCÚ¡ªt
(
cUn™
, 
r7
, (è
‹m¶©ePŒ
);

75 
	`ÃwLIR1
(
cUn™
, 
THUMB_BLX_R
, 
r7
);

77 
	}
}

80 
boŞ
 
	$dvmComp”ArchIn™
()

83 
	#JIT_TEMPLATE
(
X
è
dvmComp”_TEMPLATE_
##
	`X
();

	)

84 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

85 #undeà
JIT_TEMPLATE


87 
i
 = 0;

88 
	`dvmComp”Tem¶©eS¹
();

94 
	#JIT_TEMPLATE
(
X
è
‹m¶©eEÁryOff£ts
[
i
++] = \

95 (
šŒ_t
è
dvmComp”_TEMPLATE_
##
X
 - (šŒ_tè
dvmComp”Tem¶©eS¹
;

	)

96 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

97 #undeà
JIT_TEMPLATE


100 
	`as£¹
(
	`off£tof
(
CÏssObjeù
, 
vbË
) < 128 &&

101 (
	`off£tof
(
CÏssObjeù
, 
vbË
) & 0x3) == 0);

102 
	`as£¹
(
	`off£tof
(
A¼ayObjeù
, 
Ëngth
) < 128 &&

103 (
	`off£tof
(
A¼ayObjeù
, 
Ëngth
) & 0x3) == 0);

104 
	`as£¹
(
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
) < 256);

107 
	`as£¹
((
SckSaveA»a
) < 236);

114 
	`as£¹
(
	`off£tof
(
IÁ”pS‹
, 
j™ToIÁ”pEÁr›s
) < 108);

115  
Œue
;

116 
	}
}

118 
boŞ
 
	$g’IÆšeSq¹
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

120 
off£t
 = 
	`off£tof
(
IÁ”pS‹
, 
»tv®
);

121 
vSrc
 = 
mœ
->
d®vikIn¢
.
vA
;

122 
	`lßdDoubË
(
cUn™
, 
vSrc
, 
dr1
);

123 
	`ÃwLIR2
(
cUn™
, 
THUMB2_VSQRTD
, 
dr0
, 
dr1
);

124 
	`as£¹
(
off£t
 & 0x3 == 0);

125 
	`as£¹
(
off£t
 < 1024);

126 
	`ÃwLIR3
(
cUn™
, 
THUMB2_VSTRD
, 
dr0
, 
rGLUE
, 
off£t
 >> 2);

127  
Œue
;

128 
	}
}

130 
boŞ
 
	$g’IÆšeCos
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

132  
çl£
;

133 
	}
}

135 
boŞ
 
	$g’IÆšeSš
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

137  
çl£
;

138 
	}
}

140 
boŞ
 
	$g’Ar™hOpFlßt
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

141 
vSrc1
, 
vSrc2
)

143 
İ
 = 
THUMB_BKPT
;

149 
mœ
->
d®vikIn¢
.
İCode
) {

150 
OP_ADD_FLOAT_2ADDR
:

151 
OP_ADD_FLOAT
:

152 
İ
 = 
THUMB2_VADDS
;

154 
OP_SUB_FLOAT_2ADDR
:

155 
OP_SUB_FLOAT
:

156 
İ
 = 
THUMB2_VSUBS
;

158 
OP_DIV_FLOAT_2ADDR
:

159 
OP_DIV_FLOAT
:

160 
İ
 = 
THUMB2_VDIVS
;

162 
OP_MUL_FLOAT_2ADDR
:

163 
OP_MUL_FLOAT
:

164 
İ
 = 
THUMB2_VMULS
;

166 
OP_REM_FLOAT_2ADDR
:

167 
OP_REM_FLOAT
:

168 
OP_NEG_FLOAT
: {

169  
	`g’Ar™hOpFlßtPÜbË
(
cUn™
, 
mœ
, 
vDe¡
, 
vSrc1
, 
vSrc2
);

172  
Œue
;

174 
	`lßdFlßt
(
cUn™
, 
vSrc1
, 
ä2
);

175 
	`lßdFlßt
(
cUn™
, 
vSrc2
, 
ä4
);

176 
	`ÃwLIR3
(
cUn™
, 
İ
, 
ä0
, 
ä2
, 
ä4
);

177 
	`¡ÜeFlßt
(
cUn™
, 
ä0
, 
vDe¡
, 0);

178  
çl£
;

179 
	}
}

181 
boŞ
 
	$g’Ar™hOpDoubË
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
,

182 
vSrc1
, 
vSrc2
)

184 
İ
 = 
THUMB_BKPT
;

190 
mœ
->
d®vikIn¢
.
İCode
) {

191 
OP_ADD_DOUBLE_2ADDR
:

192 
OP_ADD_DOUBLE
:

193 
İ
 = 
THUMB2_VADDD
;

195 
OP_SUB_DOUBLE_2ADDR
:

196 
OP_SUB_DOUBLE
:

197 
İ
 = 
THUMB2_VSUBD
;

199 
OP_DIV_DOUBLE_2ADDR
:

200 
OP_DIV_DOUBLE
:

201 
İ
 = 
THUMB2_VDIVD
;

203 
OP_MUL_DOUBLE_2ADDR
:

204 
OP_MUL_DOUBLE
:

205 
İ
 = 
THUMB2_VMULD
;

207 
OP_REM_DOUBLE_2ADDR
:

208 
OP_REM_DOUBLE
:

209 
OP_NEG_DOUBLE
: {

210  
	`g’Ar™hOpDoubËPÜbË
(
cUn™
, 
mœ
, 
vDe¡
, 
vSrc1
, 
vSrc2
);

213  
Œue
;

215 
	`lßdDoubË
(
cUn™
, 
vSrc1
, 
dr1
);

216 
	`lßdDoubË
(
cUn™
, 
vSrc2
, 
dr2
);

217 
	`ÃwLIR3
(
cUn™
, 
İ
, 
dr0
, 
dr1
, 
dr2
);

218 
	`¡ÜeDoubË
(
cUn™
, 
dr0
, 
vDe¡
, 0);

219  
çl£
;

220 
	}
}

222 
boŞ
 
	$g’CÚv”siÚ
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
)

224 
OpCode
 
İCode
 = 
mœ
->
d®vikIn¢
.opCode;

225 
vSrc1De¡
 = 
mœ
->
d®vikIn¢
.
vA
;

226 
vSrc2
 = 
mœ
->
d®vikIn¢
.
vB
;

227 
İ
 = 
THUMB_BKPT
;

228 
boŞ
 
lÚgSrc
 = 
çl£
;

229 
boŞ
 
lÚgDe¡
 = 
çl£
;

230 
¤cReg
;

231 
tgtReg
;

233 
İCode
) {

234 
OP_INT_TO_FLOAT
:

235 
lÚgSrc
 = 
çl£
;

236 
lÚgDe¡
 = 
çl£
;

237 
İ
 = 
THUMB2_VCVTIF
;

239 
OP_FLOAT_TO_INT
:

240 
lÚgSrc
 = 
çl£
;

241 
lÚgDe¡
 = 
çl£
;

242 
İ
 = 
THUMB2_VCVTFI
;

244 
OP_DOUBLE_TO_FLOAT
:

245 
lÚgSrc
 = 
Œue
;

246 
lÚgDe¡
 = 
çl£
;

247 
İ
 = 
THUMB2_VCVTDF
;

249 
OP_FLOAT_TO_DOUBLE
:

250 
lÚgSrc
 = 
çl£
;

251 
lÚgDe¡
 = 
Œue
;

252 
İ
 = 
THUMB2_VCVTFD
;

254 
OP_INT_TO_DOUBLE
:

255 
lÚgSrc
 = 
çl£
;

256 
lÚgDe¡
 = 
Œue
;

257 
İ
 = 
THUMB2_VCVTID
;

259 
OP_DOUBLE_TO_INT
:

260 
lÚgSrc
 = 
Œue
;

261 
lÚgDe¡
 = 
çl£
;

262 
İ
 = 
THUMB2_VCVTDI
;

264 
OP_FLOAT_TO_LONG
:

265 
OP_LONG_TO_FLOAT
:

266 
OP_DOUBLE_TO_LONG
:

267 
OP_LONG_TO_DOUBLE
:

268  
	`g’CÚv”siÚPÜbË
(
cUn™
, 
mœ
);

270  
Œue
;

272 ià(
lÚgSrc
) {

273 
¤cReg
 = 
dr1
;

274 
	`lßdDoubË
(
cUn™
, 
vSrc2
, 
¤cReg
);

276 
¤cReg
 = 
ä2
;

277 
	`lßdFlßt
(
cUn™
, 
vSrc2
, 
¤cReg
);

279 ià(
lÚgDe¡
) {

280 
	`ÃwLIR2
(
cUn™
, 
İ
, 
dr0
, 
¤cReg
);

281 
	`¡ÜeDoubË
(
cUn™
, 
dr0
, 
vSrc1De¡
, 0);

283 
	`ÃwLIR2
(
cUn™
, 
İ
, 
ä0
, 
¤cReg
);

284 
	`¡ÜeFlßt
(
cUn™
, 
ä0
, 
vSrc1De¡
, 0);

286  
çl£
;

287 
	}
}

289 
boŞ
 
	$g’CmpX
(
Comp©iÚUn™
 *
cUn™
, 
MIR
 *
mœ
, 
vDe¡
, 
vSrc1
,

290 
vSrc2
)

292 
Tem¶©eOpCode
 
‹m¶©e
;

298 
mœ
->
d®vikIn¢
.
İCode
) {

299 
OP_CMPL_FLOAT
:

300 
‹m¶©e
 = 
TEMPLATE_CMPL_FLOAT_VFP
;

302 
OP_CMPG_FLOAT
:

303 
‹m¶©e
 = 
TEMPLATE_CMPG_FLOAT_VFP
;

305 
OP_CMPL_DOUBLE
:

306 
‹m¶©e
 = 
TEMPLATE_CMPL_DOUBLE_VFP
;

308 
OP_CMPG_DOUBLE
:

309 
‹m¶©e
 = 
TEMPLATE_CMPG_DOUBLE_VFP
;

312  
Œue
;

314 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc1
, 
r0
);

315 
	`lßdV®ueAdd»ss
(
cUn™
, 
vSrc2
, 
r1
);

316 
	`g’Di¥©chToHªdËr
(
cUn™
, 
‹m¶©e
);

317 
	`¡ÜeV®ue
(
cUn™
, 
r0
, 
vDe¡
, 
r1
);

318  
çl£
;

319 
	}
}

	@compiler/codegen/arm/armv7-a/ArchVariant.h

17 #iâdeà
_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H


18 
	#_DALVIK_VM_COMPILER_CODEGEN_ARM_ARMV5TE_VFP_ARCHVARIANT_H


	)

21 
	#JIT_TEMPLATE
(
X
è
TEMPLATE_
##X,

	)

23 
	~"../../../‹m¶©e/¬mv5‹-vå/Tem¶©eOpLi¡.h
"

30 
	mTEMPLATE_LAST_MARK
,

31 } 
	tTem¶©eOpCode
;

32 #undeà
JIT_TEMPLATE


	@compiler/template/armv5te-vfp/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
MUL_LONG
)

31 
	$JIT_TEMPLATE
(
SHL_LONG
)

32 
	$JIT_TEMPLATE
(
SHR_LONG
)

33 
	$JIT_TEMPLATE
(
USHR_LONG
)

34 
	$JIT_TEMPLATE
(
ADD_FLOAT_VFP
)

35 
	$JIT_TEMPLATE
(
SUB_FLOAT_VFP
)

36 
	$JIT_TEMPLATE
(
MUL_FLOAT_VFP
)

37 
	$JIT_TEMPLATE
(
DIV_FLOAT_VFP
)

38 
	$JIT_TEMPLATE
(
ADD_DOUBLE_VFP
)

39 
	$JIT_TEMPLATE
(
SUB_DOUBLE_VFP
)

40 
	$JIT_TEMPLATE
(
MUL_DOUBLE_VFP
)

41 
	$JIT_TEMPLATE
(
DIV_DOUBLE_VFP
)

42 
	$JIT_TEMPLATE
(
DOUBLE_TO_FLOAT_VFP
)

43 
	$JIT_TEMPLATE
(
DOUBLE_TO_INT_VFP
)

44 
	$JIT_TEMPLATE
(
FLOAT_TO_DOUBLE_VFP
)

45 
	$JIT_TEMPLATE
(
FLOAT_TO_INT_VFP
)

46 
	$JIT_TEMPLATE
(
INT_TO_DOUBLE_VFP
)

47 
	$JIT_TEMPLATE
(
INT_TO_FLOAT_VFP
)

48 
	$JIT_TEMPLATE
(
CMPG_DOUBLE_VFP
)

49 
	$JIT_TEMPLATE
(
CMPL_DOUBLE_VFP
)

50 
	$JIT_TEMPLATE
(
CMPG_FLOAT_VFP
)

51 
	$JIT_TEMPLATE
(
CMPL_FLOAT_VFP
)

52 
	`JIT_TEMPLATE
(
SQRT_DOUBLE_VFP
)

	@compiler/template/armv5te/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
CMPG_DOUBLE
)

31 
	$JIT_TEMPLATE
(
CMPL_DOUBLE
)

32 
	$JIT_TEMPLATE
(
CMPG_FLOAT
)

33 
	$JIT_TEMPLATE
(
CMPL_FLOAT
)

34 
	$JIT_TEMPLATE
(
MUL_LONG
)

35 
	$JIT_TEMPLATE
(
SHL_LONG
)

36 
	$JIT_TEMPLATE
(
SHR_LONG
)

37 
	`JIT_TEMPLATE
(
USHR_LONG
)

	@compiler/template/armv7-a/TemplateOpList.h

20 #iâdeà
JIT_TEMPLATE


21 
	#JIT_TEMPLATE
(
X
)

	)

24 
	$JIT_TEMPLATE
(
CMP_LONG
)

25 
	$JIT_TEMPLATE
(
RETURN
)

26 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NO_OPT
)

27 
	$JIT_TEMPLATE
(
INVOKE_METHOD_CHAIN
)

28 
	$JIT_TEMPLATE
(
INVOKE_METHOD_PREDICTED_CHAIN
)

29 
	$JIT_TEMPLATE
(
INVOKE_METHOD_NATIVE
)

30 
	$JIT_TEMPLATE
(
MUL_LONG
)

31 
	$JIT_TEMPLATE
(
SHL_LONG
)

32 
	$JIT_TEMPLATE
(
SHR_LONG
)

33 
	$JIT_TEMPLATE
(
USHR_LONG
)

34 
	$JIT_TEMPLATE
(
ADD_FLOAT_VFP
)

35 
	$JIT_TEMPLATE
(
SUB_FLOAT_VFP
)

36 
	$JIT_TEMPLATE
(
MUL_FLOAT_VFP
)

37 
	$JIT_TEMPLATE
(
DIV_FLOAT_VFP
)

38 
	$JIT_TEMPLATE
(
ADD_DOUBLE_VFP
)

39 
	$JIT_TEMPLATE
(
SUB_DOUBLE_VFP
)

40 
	$JIT_TEMPLATE
(
MUL_DOUBLE_VFP
)

41 
	$JIT_TEMPLATE
(
DIV_DOUBLE_VFP
)

42 
	$JIT_TEMPLATE
(
DOUBLE_TO_FLOAT_VFP
)

43 
	$JIT_TEMPLATE
(
DOUBLE_TO_INT_VFP
)

44 
	$JIT_TEMPLATE
(
FLOAT_TO_DOUBLE_VFP
)

45 
	$JIT_TEMPLATE
(
FLOAT_TO_INT_VFP
)

46 
	$JIT_TEMPLATE
(
INT_TO_DOUBLE_VFP
)

47 
	$JIT_TEMPLATE
(
INT_TO_FLOAT_VFP
)

48 
	$JIT_TEMPLATE
(
CMPG_DOUBLE_VFP
)

49 
	$JIT_TEMPLATE
(
CMPL_DOUBLE_VFP
)

50 
	$JIT_TEMPLATE
(
CMPG_FLOAT_VFP
)

51 
	$JIT_TEMPLATE
(
CMPL_FLOAT_VFP
)

52 
	`JIT_TEMPLATE
(
SQRT_DOUBLE_VFP
)

	@hprof/Hprof.c

24 
	~"H´of.h
"

26 
	~<¡ršg.h
>

27 
	~<uni¡d.h
>

28 
	~<”ºo.h
>

29 
	~<sys/time.h
>

30 
	~<time.h
>

33 
	#kH—dSuffix
 "-h±emp"

	)

35 
h´of_cÚ‹xt_t
 *

36 
	$h´ofS¹up
(cÚ¡ *
ouutFeName
)

38 
h´of_cÚ‹xt_t
 *
ùx
;

40 
ùx
 = 
	`m®loc
((*ctx));

41 ià(
ùx
 !ğ
NULL
) {

42 
Ën
 = 
	`¡¾’
(
ouutFeName
);

43 
feName
[
Ën
 + (
kH—dSuffix
)];

44 
FILE
 *
å
;

49 
	`¥rštf
(
feName
, "%s" 
kH—dSuffix
, 
ouutFeName
);

50 ià(
	`acûss
(
feName
, 
F_OK
) == 0) {

51 
	`LOGE
("h´of:em°f% exi¡s, bašg\n", 
feName
);

52 
	`ä“
(
ùx
);

53  
NULL
;

56 
å
 = 
	`fİ’
(
feName
, "w+");

57 ià(
å
 =ğ
NULL
) {

58 
	`LOGE
("h´of: cª'ˆİ’ %s: %s.\n", 
feName
, 
	`¡»¼Ü
(
”ºo
));

59 
	`ä“
(
ùx
);

60  
NULL
;

62 ià(
	`uÆšk
(
feName
) != 0) {

63 
	`LOGW
("h´of: WARNING: uÇbËØ»mov‹m°f%s\n", 
feName
);

66 
	`LOGI
("h´of: dumpšg VM h—°tØ\"%s\".\n", 
feName
);

68 
	`h´ofS¹up_SŒšg
();

69 
	`h´ofS¹up_CÏss
();

70 #ià
WITH_HPROF_STACK


71 
	`h´ofS¹up_SckF¿me
();

72 
	`h´ofS¹up_Sck
();

76 
	`h´ofCÚ‹xtIn™
(
ùx
, 
	`¡rdup
(
ouutFeName
), 
å
, 
çl£
);

78 
	`LOGE
("hprof: can't‡llocate context.\n");

81  
ùx
;

82 
	}
}

89 
boŞ


90 
	$cİyFeToFe
(
FILE
 *
d¡Fp
, FILE *
¤cFp
)

92 
buf
[65536];

93 
size_t
 
d©aR—d
, 
d©aWr™‹n
;

95 
Œue
) {

96 
d©aR—d
 = 
	`ä—d
(
buf
, 1, (buf), 
¤cFp
);

97 ià(
d©aR—d
 > 0) {

98 
d©aWr™‹n
 = 
	`fwr™e
(
buf
, 1, 
d©aR—d
, 
d¡Fp
);

99 ià(
d©aWr™‹n
 !ğ
d©aR—d
) {

100 
	`LOGE
("hprof: failed writing data (%d of %d): %s\n",

101 
d©aWr™‹n
, 
d©aR—d
, 
	`¡»¼Ü
(
”ºo
));

102  
çl£
;

105 ià(
	`ãof
(
¤cFp
))

106  
Œue
;

107 
	`LOGE
("hprof: failed„eading data (res=%d): %s\n",

108 
d©aR—d
, 
	`¡»¼Ü
(
”ºo
));

109  
çl£
;

112 
	}
}

117 
boŞ


118 
	$h´ofShutdown
(
h´of_cÚ‹xt_t
 *
ùx
)

120 
FILE
 *
‹mpFp
 = 
ùx
->
å
;

121 
FILE
 *
å
;

124 
	`h´ofFlushCu¼’tRecÜd
(
ùx
);

125 
	`ä“
(
ùx
->
curRec
.
body
);

126 
ùx
->
curRec
.
body
 = 
NULL
;

127 
ùx
->
curRec
.
®locL’
 = 0;

128 
ùx
->
å
 = 
NULL
;

130 
	`LOGI
("h´of: dumpšg h—°¡ršg tØ\"%s\".\n", 
ùx
->
feName
);

131 
å
 = 
	`fİ’
(
ùx
->
feName
, "w");

132 ià(
å
 =ğ
NULL
) {

133 
	`LOGE
("ÿn'ˆİ’ %s: %s\n", 
ùx
->
feName
, 
	`¡»¼Ü
(
”ºo
));

134 
	`fşo£
(
‹mpFp
);

135 
	`ä“
(
ùx
->
feName
);

136 
	`ä“
(
ùx
);

137  
çl£
;

139 
	`h´ofCÚ‹xtIn™
(
ùx
, ctx->
feName
, 
å
, 
Œue
);

141 
	`h´ofDumpSŒšgs
(
ùx
);

142 
	`h´ofDumpCÏs£s
(
ùx
);

147 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_STACK_TRACE
, 
HPROF_TIME
);

148 
	`h´ofAddU4ToRecÜd
(&
ùx
->
curRec
, 
HPROF_NULL_STACK_TRACE
);

149 
	`h´ofAddU4ToRecÜd
(&
ùx
->
curRec
, 
HPROF_NULL_THREAD
);

150 
	`h´ofAddU4ToRecÜd
(&
ùx
->
curRec
, 0);

152 #ià
WITH_HPROF_STACK


153 
	`h´ofDumpSckF¿mes
(
ùx
);

154 
	`h´ofDumpScks
(
ùx
);

157 
	`h´ofFlushCu¼’tRecÜd
(
ùx
);

159 
	`h´ofShutdown_CÏss
();

160 
	`h´ofShutdown_SŒšg
();

161 #ià
WITH_HPROF_STACK


162 
	`h´ofShutdown_Sck
();

163 
	`h´ofShutdown_SckF¿me
();

171 
	`»wšd
(
‹mpFp
);

172 ià(!
	`cİyFeToFe
(
ùx
->
å
, 
‹mpFp
)) {

173 
	`LOGW
("hprof: file copy failed, hprof data may be incomplete\n");

177 
	`fşo£
(
‹mpFp
);

178 
	`fşo£
(
ùx
->
å
);

179 
	`ä“
(
ùx
->
feName
);

180 
	`ä“
(
ùx
->
curRec
.
body
);

181 
	`ä“
(
ùx
);

184 
	`LOGI
("hprof: heap dump completed,emp file„emoved\n");

185  
Œue
;

186 
	}
}

	@hprof/Hprof.h

16 #iâdeà
_DALVIK_HPROF_HPROF


17 
	#_DALVIK_HPROF_HPROF


	)

19 
	~"D®vik.h
"

21 
	#HPROF_ID_SIZE
 ( (
u4
))

	)

23 
	#UNIQUE_ERROR
() \

24 -((((
ušŒ_t
)
__func__
è<< 16 | 
__LINE__
è& (0x7fffffff))

	)

26 
	#HPROF_TIME
 0

	)

27 
	#HPROF_NULL_STACK_TRACE
 0

	)

28 
	#HPROF_NULL_THREAD
 0

	)

30 
u4
 
	th´of_id
;

31 
h´of_id
 
	th´of_¡ršg_id
;

32 
h´of_id
 
	th´of_objeù_id
;

33 
h´of_id
 
	th´of_şass_objeù_id
;

34 #ià
WITH_HPROF_STACK


35 
h´of_id
 
	th´of_¡ack_äame_id
;

38 
	eh´of_basic_ty³
 {

39 
	mh´of_basic_objeù
 = 2,

40 
	mh´of_basic_boŞ—n
 = 4,

41 
	mh´of_basic_ch¬
 = 5,

42 
	mh´of_basic_æßt
 = 6,

43 
	mh´of_basic_doubË
 = 7,

44 
	mh´of_basic_by‹
 = 8,

45 
	mh´of_basic_shÜt
 = 9,

46 
	mh´of_basic_št
 = 10,

47 
	mh´of_basic_lÚg
 = 11,

48 } 
	th´of_basic_ty³
;

50 
	eh´of_g_t
 {

51 
	mHPROF_TAG_STRING
 = 0x01,

52 
	mHPROF_TAG_LOAD_CLASS
 = 0x02,

53 
	mHPROF_TAG_UNLOAD_CLASS
 = 0x03,

54 
	mHPROF_TAG_STACK_FRAME
 = 0x04,

55 
	mHPROF_TAG_STACK_TRACE
 = 0x05,

56 
	mHPROF_TAG_ALLOC_SITES
 = 0x06,

57 
	mHPROF_TAG_HEAP_SUMMARY
 = 0x07,

58 
	mHPROF_TAG_START_THREAD
 = 0x0A,

59 
	mHPROF_TAG_END_THREAD
 = 0x0B,

60 
	mHPROF_TAG_HEAP_DUMP
 = 0x0C,

61 
	mHPROF_TAG_HEAP_DUMP_SEGMENT
 = 0x1C,

62 
	mHPROF_TAG_HEAP_DUMP_END
 = 0x2C,

63 
	mHPROF_TAG_CPU_SAMPLES
 = 0x0D,

64 
	mHPROF_TAG_CONTROL_SETTINGS
 = 0x0E,

65 } 
	th´of_g_t
;

71 
	eh´of_h—p_g_t
 {

73 
	mHPROF_ROOT_UNKNOWN
 = 0xFF,

74 
	mHPROF_ROOT_JNI_GLOBAL
 = 0x01,

75 
	mHPROF_ROOT_JNI_LOCAL
 = 0x02,

76 
	mHPROF_ROOT_JAVA_FRAME
 = 0x03,

77 
	mHPROF_ROOT_NATIVE_STACK
 = 0x04,

78 
	mHPROF_ROOT_STICKY_CLASS
 = 0x05,

79 
	mHPROF_ROOT_THREAD_BLOCK
 = 0x06,

80 
	mHPROF_ROOT_MONITOR_USED
 = 0x07,

81 
	mHPROF_ROOT_THREAD_OBJECT
 = 0x08,

82 
	mHPROF_CLASS_DUMP
 = 0x20,

83 
	mHPROF_INSTANCE_DUMP
 = 0x21,

84 
	mHPROF_OBJECT_ARRAY_DUMP
 = 0x22,

85 
	mHPROF_PRIMITIVE_ARRAY_DUMP
 = 0x23,

88 
	mHPROF_HEAP_DUMP_INFO
 = 0xfe,

89 
	mHPROF_ROOT_INTERNED_STRING
 = 0x89,

90 
	mHPROF_ROOT_FINALIZING
 = 0x8a,

91 
	mHPROF_ROOT_DEBUGGER
 = 0x8b,

92 
	mHPROF_ROOT_REFERENCE_CLEANUP
 = 0x8c,

93 
	mHPROF_ROOT_VM_INTERNAL
 = 0x8d,

94 
	mHPROF_ROOT_JNI_MONITOR
 = 0x8e,

95 
	mHPROF_UNREACHABLE
 = 0x90,

96 
	mHPROF_PRIMITIVE_ARRAY_NODATA_DUMP
 = 0xc3,

97 } 
	th´of_h—p_g_t
;

108 
	sh´of_»cÜd_t
 {

109 *
	mbody
;

110 
u4
 
	mtime
;

111 
u4
 
	mËngth
;

112 
size_t
 
	m®locL’
;

113 
u1
 
	mg
;

114 
boŞ
 
	mdœty
;

115 } 
	th´of_»cÜd_t
;

118 
	mHPROF_HEAP_DEFAULT
 = 0,

119 
	mHPROF_HEAP_ZYGOTE
 = 'Z',

120 
	mHPROF_HEAP_APP
 = 'A'

121 } 
	tH´ofH—pId
;

123 
	sh´of_cÚ‹xt_t
 {

127 
h´of_»cÜd_t
 
	mcurRec
;

128 *
	mfeName
;

129 
FILE
 *
	må
;

130 
u4
 
	mgcTh»adS”ŸlNumb”
;

131 
u1
 
	mgcSÿnS‹
;

132 
H´ofH—pId
 
	mcu¼’tH—p
;

133 
u4
 
	m¡ackT¿ûS”ŸlNumb”
;

134 
size_t
 
	mobjeùsInSegm’t
;

135 } 
	th´of_cÚ‹xt_t
;

142 
h´of_¡ršg_id
 
h´ofLookupSŒšgId
(cÚ¡ *
¡r
);

144 
h´ofDumpSŒšgs
(
h´of_cÚ‹xt_t
 *
ùx
);

146 
h´ofS¹up_SŒšg
();

147 
h´ofShutdown_SŒšg
();

154 
h´of_şass_objeù_id
 
h´ofLookupCÏssId
(cÚ¡ 
CÏssObjeù
 *
şazz
);

156 
h´ofDumpCÏs£s
(
h´of_cÚ‹xt_t
 *
ùx
);

158 
h´ofS¹up_CÏss
();

159 
h´ofShutdown_CÏss
();

166 
h´ofS¹H—pDump
(
h´of_cÚ‹xt_t
 *
ùx
);

167 
h´ofFšishH—pDump
(
h´of_cÚ‹xt_t
 *
ùx
);

169 
h´ofS‘GcSÿnS‹
(
h´of_cÚ‹xt_t
 *
ùx
,

170 
h´of_h—p_g_t
 
¡©e
, 
u4
 
th»adS”ŸlNumb”
);

171 
h´ofM¬kRoÙObjeù
(
h´of_cÚ‹xt_t
 *
ùx
,

172 cÚ¡ 
Objeù
 *
obj
, 
jobjeù
 
jniObj
);

174 
h´ofDumpH—pObjeù
(
h´of_cÚ‹xt_t
 *
ùx
, cÚ¡ 
Objeù
 *
obj
);

180 
h´ofCÚ‹xtIn™
(
h´of_cÚ‹xt_t
 *
ùx
, *
feName
, 
FILE
 *
å
,

181 
boŞ
 
wr™eH—d”
);

183 
h´ofFlushRecÜd
(
h´of_»cÜd_t
 *
»c
, 
FILE
 *
å
);

184 
h´ofFlushCu¼’tRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
);

185 
h´ofS¹NewRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
, 
u1
 
g
, 
u4
 
time
);

187 
h´ofAddU1ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u1
 
v®ue
);

188 
h´ofAddU1Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

189 cÚ¡ 
u1
 *
v®ues
, 
size_t
 
numV®ues
);

191 
h´ofAddUtf8SŒšgToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ *
¡r
);

193 
h´ofAddU2ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u2
 
v®ue
);

194 
h´ofAddU2Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

195 cÚ¡ 
u2
 *
v®ues
, 
size_t
 
numV®ues
);

197 
h´ofAddU4ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u4
 
v®ue
);

198 
h´ofAddU4Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

199 cÚ¡ 
u4
 *
v®ues
, 
size_t
 
numV®ues
);

201 
h´ofAddU8ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u8
 
v®ue
);

202 
h´ofAddU8Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
,

203 cÚ¡ 
u8
 *
v®ues
, 
size_t
 
numV®ues
);

205 
	#h´ofAddIdToRecÜd
(
»c
, 
id
è
	`h´ofAddU4ToRecÜd
(Ôec), (
u4
)(id))

	)

206 
	#h´ofAddIdLi¡ToRecÜd
(
»c
, 
v®ues
, 
numV®ues
) \

207 
	`h´ofAddU4Li¡ToRecÜd
((
»c
), (cÚ¡ 
u4
 *)(
v®ues
), (
numV®ues
))

	)

209 #ià
WITH_HPROF_STACK


215 
h´ofFlInSckT¿û
(*
objeùPŒ
);

217 
h´ofDumpScks
(
h´of_cÚ‹xt_t
 *
ùx
);

219 
h´ofS¹up_Sck
();

220 
h´ofShutdown_Sck
();

226 
h´ofDumpSckF¿mes
(
h´of_cÚ‹xt_t
 *
ùx
);

228 
h´ofS¹up_SckF¿me
();

229 
h´ofShutdown_SckF¿me
();

237 
h´of_cÚ‹xt_t
 *
h´ofS¹up
(cÚ¡ *
ouutFeName
);

238 
boŞ
 
h´ofShutdown
(
h´of_cÚ‹xt_t
 *
ùx
);

247 
h´ofDumpH—p
(cÚ¡ * 
feName
);

248 
dvmH—pS‘H´ofGcSÿnS‹
(
h´of_h—p_g_t
 
¡©e
, 
u4
 
th»adS”ŸlNumb”
);

	@hprof/HprofClass.c

20 
	~"H´of.h
"

22 
HashTabË
 *
	ggCÏssHashTabË
;

25 
	$h´ofS¹up_CÏss
()

27 
gCÏssHashTabË
 = 
	`dvmHashTabËC»©e
(128, 
NULL
);

28 ià(
gCÏssHashTabË
 =ğ
NULL
) {

29  
	`UNIQUE_ERROR
();

32 
	}
}

35 
	$h´ofShutdown_CÏss
()

37 
	`dvmHashTabËF»e
(
gCÏssHashTabË
);

40 
	}
}

42 
u4


43 
	$compu‹CÏssHash
(cÚ¡ 
CÏssObjeù
 *
şazz
)

45 
u4
 
hash
;

46 cÚ¡ *
ı
;

47 
c
;

49 
ı
 = 
şazz
->
desütÜ
;

50 
hash
 = (
u4
)
şazz
->
şassLßd”
;

51 (
c
 = *
ı
++) != '\0') {

52 
hash
 = hash * 31 + 
c
;

55  
hash
;

56 
	}
}

59 
	$şassCmp
(cÚ¡ *
v1
, cÚ¡ *
v2
)

61 cÚ¡ 
CÏssObjeù
 *
c1
 = (cÚ¡ CÏssObjeù *)
v1
;

62 cÚ¡ 
CÏssObjeù
 *
c2
 = (cÚ¡ CÏssObjeù *)
v2
;

63 
šŒ_t
 
diff
;

65 
diff
 = (
ušŒ_t
)
c1
->
şassLßd”
 - (ušŒ_t)
c2
->classLoader;

66 ià(
diff
 == 0) {

67  
	`¡rcmp
(
c1
->
desütÜ
, 
c2
->descriptor);

69  
diff
;

70 
	}
}

73 
	$g‘P»‰yCÏssNameId
(cÚ¡ *
desütÜ
)

75 
h´of_¡ršg_id
 
şassNameId
;

76 *
dÙName
 = 
	`dvmDesütÜToDÙ
(
desütÜ
);

82 ià(
dÙName
[0] == '[') {

83 cÚ¡ *
c
;

84 *
ÃwName
;

85 *
nc
;

86 
size_t
 
dim
;

87 
size_t
 
ÃwL’
;

89 
c
 = 
dÙName
;

90 
dim
 = 0;

91 *
c
 == '[') {

92 
dim
++;

93 
c
++;

95 ià(*
c
 == 'L') {

96 
c
++;

102 *
c
) {

103 'Z': 
c
 = "boolean;"; ;

104 'C': 
c
 = "char;"; ;

105 'F': 
c
 = "float;"; ;

106 'D': 
c
 = "double;"; ;

107 'B': 
c
 = "byte;"; ;

108 'S': 
c
 = "short;"; ;

109 'I': 
c
 = "int;"; ;

110 'J': 
c
 = "long;"; ;

111 : 
	`as£¹
(
çl£
); 
c
 = "UNKNOWN;"; ;

119 
ÃwL’
 = 
	`¡¾’
(
c
)-1 + 
dim
*2;

120 
ÃwName
 = 
	`m®loc
(
ÃwL’
 + 1);

121 ià(
ÃwName
 =ğ
NULL
) {

124 
	`¡rıy
(
ÃwName
, 
c
);

125 
ÃwName
[
ÃwL’
] = '\0';

129 
nc
 = 
ÃwName
 + 
ÃwL’
 - 
dim
*2;

130 
	`as£¹
(*
nc
 == ';');

132 
dim
--) {

133 *
nc
++ = '[';

134 *
nc
++ = ']';

136 
	`as£¹
(*
nc
 == '\0');

138 
şassNameId
 = 
	`h´ofLookupSŒšgId
(
ÃwName
);

139 
	`ä“
(
ÃwName
);

141 
şassNameId
 = 
	`h´ofLookupSŒšgId
(
dÙName
);

144 
	`ä“
(
dÙName
);

145  
şassNameId
;

146 
	}
}

149 
h´of_şass_objeù_id


150 
	$h´ofLookupCÏssId
(cÚ¡ 
CÏssObjeù
 *
şazz
)

152 *
v®
;

154 ià(
şazz
 =ğ
NULL
) {

158  (
h´of_şass_objeù_id
)0;

161 
	`dvmHashTabËLock
(
gCÏssHashTabË
);

166 
v®
 = 
	`dvmHashTabËLookup
(
gCÏssHashTabË
, 
	`compu‹CÏssHash
(
şazz
),

167 (*)
şazz
, 
şassCmp
, 
Œue
);

168 
	`as£¹
(
v®
 !ğ
NULL
);

170 
	`dvmHashTabËUÆock
(
gCÏssHashTabË
);

177 
	`g‘P»‰yCÏssNameId
(
şazz
->
desütÜ
);

179  (
h´of_şass_objeù_id
)
şazz
;

180 
	}
}

183 
	$h´ofDumpCÏs£s
(
h´of_cÚ‹xt_t
 *
ùx
)

185 
HashI‹r
 
™”
;

186 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

187 
”r
;

189 
	`dvmHashTabËLock
(
gCÏssHashTabË
);

191 
”r
 = 0, 
	`dvmHashI‹rBegš
(
gCÏssHashTabË
, &
™”
);

192 
”r
 =ğ0 && !
	`dvmHashI‹rDÚe
(&
™”
);

193 
	`dvmHashI‹rNext
(&
™”
))

195 
”r
 = 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_LOAD_CLASS
, 
HPROF_TIME
);

196 ià(
”r
 == 0) {

197 cÚ¡ 
CÏssObjeù
 *
şazz
;

199 
şazz
 = (cÚ¡ 
CÏssObjeù
 *)
	`dvmHashI‹rD©a
(&
™”
);

200 
	`as£¹
(
şazz
 !ğ
NULL
);

211 
	`h´ofAddU4ToRecÜd
(
»c
, 
şazz
->
£rŸlNumb”
);

212 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_şass_objeù_id
)
şazz
);

213 
	`h´ofAddU4ToRecÜd
(
»c
, 
HPROF_NULL_STACK_TRACE
);

214 
	`h´ofAddIdToRecÜd
(
»c
, 
	`g‘P»‰yCÏssNameId
(
şazz
->
desütÜ
));

218 
	`dvmHashTabËUÆock
(
gCÏssHashTabË
);

220  
”r
;

221 
	}
}

	@hprof/HprofHeap.c

19 
	~"H´of.h
"

21 
	~"®loc/H—pIÁ”Çl.h
"

22 
	~"®loc/H—pSourû.h
"

28 
	#DUMP_PRIM_DATA
 1

	)

30 
	#OBJECTS_PER_SEGMENT
 ((
size_t
)128)

	)

31 
	#BYTES_PER_SEGMENT
 ((
size_t
)4096)

	)

34 
	$h´ofS¹H—pDump
(
h´of_cÚ‹xt_t
 *
ùx
)

36 
	`UNUSED_PARAMETER
(
ùx
);

38 
ùx
->
objeùsInSegm’t
 = 
OBJECTS_PER_SEGMENT
;

39 
ùx
->
cu¼’tH—p
 = 
HPROF_HEAP_DEFAULT
;

41 
	}
}

44 
	$h´ofFšishH—pDump
(
h´of_cÚ‹xt_t
 *
ùx
)

46  
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_HEAP_DUMP_END
, 
HPROF_TIME
);

47 
	}
}

50 
	$h´ofS‘GcSÿnS‹
(
h´of_cÚ‹xt_t
 *
ùx
,

51 
h´of_h—p_g_t
 
¡©e
, 
u4
 
th»adS”ŸlNumb”
)

55 
ùx
->
gcSÿnS‹
 = 
¡©e
;

56 
ùx
->
gcTh»adS”ŸlNumb”
 = 
th»adS”ŸlNumb”
;

58 
	}
}

60 
h´of_basic_ty³


61 
	$sigÇtu»ToBasicTy³AndSize
(cÚ¡ *
sig
, 
size_t
 *
sizeOut
)

63 
c
 = 
sig
[0];

64 
h´of_basic_ty³
 
»t
;

65 
size_t
 
size
;

67 
c
) {

69 'L': 
»t
 = 
h´of_basic_objeù
; 
size
 = 4; ;

70 'Z': 
»t
 = 
h´of_basic_boŞ—n
; 
size
 = 1; ;

71 'C': 
»t
 = 
h´of_basic_ch¬
; 
size
 = 2; ;

72 'F': 
»t
 = 
h´of_basic_æßt
; 
size
 = 4; ;

73 'D': 
»t
 = 
h´of_basic_doubË
; 
size
 = 8; ;

74 'B': 
»t
 = 
h´of_basic_by‹
; 
size
 = 1; ;

75 'S': 
»t
 = 
h´of_basic_shÜt
; 
size
 = 2; ;

76 : 
	`as£¹
(
çl£
);

77 'I': 
»t
 = 
h´of_basic_št
; 
size
 = 4; ;

78 'J': 
»t
 = 
h´of_basic_lÚg
; 
size
 = 8; ;

81 ià(
sizeOut
 !ğ
NULL
) {

82 *
sizeOut
 = 
size
;

85  
»t
;

86 
	}
}

88 
h´of_basic_ty³


89 
	$´im™iveToBasicTy³AndSize
(
Prim™iveTy³
 
´im
, 
size_t
 *
sizeOut
)

91 
h´of_basic_ty³
 
»t
;

92 
size_t
 
size
;

94 
´im
) {

95 
PRIM_BOOLEAN
: 
»t
 = 
h´of_basic_boŞ—n
; 
size
 = 1; ;

96 
PRIM_CHAR
: 
»t
 = 
h´of_basic_ch¬
; 
size
 = 2; ;

97 
PRIM_FLOAT
: 
»t
 = 
h´of_basic_æßt
; 
size
 = 4; ;

98 
PRIM_DOUBLE
: 
»t
 = 
h´of_basic_doubË
; 
size
 = 8; ;

99 
PRIM_BYTE
: 
»t
 = 
h´of_basic_by‹
; 
size
 = 1; ;

100 
PRIM_SHORT
: 
»t
 = 
h´of_basic_shÜt
; 
size
 = 2; ;

101 : 
	`as£¹
(
çl£
);

102 
PRIM_INT
: 
»t
 = 
h´of_basic_št
; 
size
 = 4; ;

103 
PRIM_LONG
: 
»t
 = 
h´of_basic_lÚg
; 
size
 = 8; ;

106 ià(
sizeOut
 !ğ
NULL
) {

107 *
sizeOut
 = 
size
;

110  
»t
;

111 
	}
}

119 
	$h´ofM¬kRoÙObjeù
(
h´of_cÚ‹xt_t
 *
ùx
, cÚ¡ 
Objeù
 *
obj
, 
jobjeù
 
jniObj
)

121 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

122 
”r
;

123 
h´of_h—p_g_t
 
h—pTag
 = 
ùx
->
gcSÿnS‹
;

125 ià(
h—pTag
 == 0) {

129 ià(
ùx
->
objeùsInSegm’t
 >ğ
OBJECTS_PER_SEGMENT
 ||

130 
»c
->
Ëngth
 >ğ
BYTES_PER_SEGMENT
)

134 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_HEAP_DUMP_SEGMENT
, 
HPROF_TIME
);

135 
ùx
->
objeùsInSegm’t
 = 0;

138 
h—pTag
) {

141 
HPROF_ROOT_UNKNOWN
:

142 
HPROF_ROOT_STICKY_CLASS
:

143 
HPROF_ROOT_MONITOR_USED
:

144 
HPROF_ROOT_INTERNED_STRING
:

145 
HPROF_ROOT_FINALIZING
:

146 
HPROF_ROOT_DEBUGGER
:

147 
HPROF_ROOT_REFERENCE_CLEANUP
:

148 
HPROF_ROOT_VM_INTERNAL
:

149 
HPROF_UNREACHABLE
:

150 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

151 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

157 
HPROF_ROOT_JNI_GLOBAL
:

158 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

159 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

160 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)
jniObj
);

167 
HPROF_ROOT_JNI_LOCAL
:

168 
HPROF_ROOT_JNI_MONITOR
:

169 
HPROF_ROOT_JAVA_FRAME
:

170 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

171 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

172 
	`h´ofAddU4ToRecÜd
(
»c
, 
ùx
->
gcTh»adS”ŸlNumb”
);

173 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)-1);

179 
HPROF_ROOT_NATIVE_STACK
:

180 
HPROF_ROOT_THREAD_BLOCK
:

181 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

182 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

183 
	`h´ofAddU4ToRecÜd
(
»c
, 
ùx
->
gcTh»adS”ŸlNumb”
);

190 
HPROF_ROOT_THREAD_OBJECT
:

191 
	`h´ofAddU1ToRecÜd
(
»c
, 
h—pTag
);

192 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

193 
	`h´ofAddU4ToRecÜd
(
»c
, 
ùx
->
gcTh»adS”ŸlNumb”
);

194 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)-1);

198 
”r
 = 0;

202 
ùx
->
objeùsInSegm’t
++;

204  
”r
;

205 
	}
}

208 
	$¡ackT¿ûS”ŸlNumb”
(cÚ¡ *
obj
)

211 #ià
WITH_HPROF_STACK


212 
DvmH—pChunk
 *
chunk
 = 
	`±r2chunk
(
obj
);

213  
chunk
->
¡ackT¿ûS”ŸlNumb”
;

215  
HPROF_NULL_STACK_TRACE
;

217 
	}
}

220 
	$h´ofDumpH—pObjeù
(
h´of_cÚ‹xt_t
 *
ùx
, cÚ¡ 
Objeù
 *
obj
)

222 cÚ¡ 
CÏssObjeù
 *
şazz
;

223 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

224 
H´ofH—pId
 
desœedH—p
;

226 
desœedH—p
 =

227 
	`dvmH—pSourûG‘PŒFÏg
(
	`±r2chunk
(
obj
), 
HS_ALLOCATED_IN_ZYGOTE
) ?

228 
HPROF_HEAP_ZYGOTE
 : 
HPROF_HEAP_APP
;

230 ià(
ùx
->
objeùsInSegm’t
 >ğ
OBJECTS_PER_SEGMENT
 ||

231 
»c
->
Ëngth
 >ğ
BYTES_PER_SEGMENT
)

235 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_HEAP_DUMP_SEGMENT
, 
HPROF_TIME
);

236 
ùx
->
objeùsInSegm’t
 = 0;

240 
ùx
->
cu¼’tH—p
 = 
HPROF_HEAP_DEFAULT
;

243 ià(
desœedH—p
 !ğ
ùx
->
cu¼’tH—p
) {

244 
h´of_¡ršg_id
 
ÇmeId
;

249 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_HEAP_DUMP_INFO
);

250 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)
desœedH—p
);

251 
desœedH—p
) {

252 
HPROF_HEAP_APP
:

253 
ÇmeId
 = 
	`h´ofLookupSŒšgId
("app");

255 
HPROF_HEAP_ZYGOTE
:

256 
ÇmeId
 = 
	`h´ofLookupSŒšgId
("zygote");

260 
	`as£¹
(!"Unexpected desiredHeap");

261 
ÇmeId
 = 
	`h´ofLookupSŒšgId
("<ILLEGAL>");

264 
	`h´ofAddIdToRecÜd
(
»c
, 
ÇmeId
);

265 
ùx
->
cu¼’tH—p
 = 
desœedH—p
;

268 
şazz
 = 
obj
->clazz;

270 ià(
şazz
 =ğ
NULL
) {

275 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_INSTANCE_DUMP
);

277 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

278 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

279 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_şass_objeù_id
)
şazz
);

280 
	`h´ofAddIdToRecÜd
(
»c
, 0);

281 } ià(
şazz
 =ğ
gDvm
.
uÆškedJavaLªgCÏss
) {

284 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_CLASS_DUMP
);

287 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_şass_objeù_id
)
obj
);

288 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

289 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_şass_objeù_id
)0);

290 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

291 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

292 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

293 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)0);

294 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)0);

295 
	`h´ofAddU4ToRecÜd
(
»c
, 0);

296 
	`h´ofAddU2ToRecÜd
(
»c
, 0);

297 
	`h´ofAddU2ToRecÜd
(
»c
, 0);

298 
	`h´ofAddU2ToRecÜd
(
»c
, 0);

300 
h´of_şass_objeù_id
 
şazzId
;

302 
şazzId
 = 
	`h´ofLookupCÏssId
(
şazz
);

304 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

305 cÚ¡ 
CÏssObjeù
 *
thisCÏss
 = (cÚ¡ CÏssObjeù *)
obj
;

306 
i
, 
n
;

309 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_CLASS_DUMP
);

311 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
thisCÏss
));

312 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
thisCÏss
));

313 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
thisCÏss
->
su³r
));

314 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
thisCÏss
->
şassLßd”
);

315 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

316 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)0);

317 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)0);

318 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_id
)0);

319 ià(
obj
 =ğ(
Objeù
 *)
gDvm
.
şassJavaLªgCÏss
) {

320 
	`h´ofAddU4ToRecÜd
(
»c
, (
CÏssObjeù
));

322 
	`h´ofAddU4ToRecÜd
(
»c
, 
thisCÏss
->
objeùSize
);

325 
	`h´ofAddU2ToRecÜd
(
»c
, 0);

329 
n
 = 
thisCÏss
->
sf›ldCouÁ
;

330 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)
n
);

331 
i
 = 0; i < 
n
; i++) {

332 cÚ¡ 
SticF›ld
 *
f
 = &
thisCÏss
->
sf›lds
[
i
];

333 
h´of_basic_ty³
 
t
;

334 
size_t
 
size
;

336 
t
 = 
	`sigÇtu»ToBasicTy³AndSize
(
f
->
f›ld
.
sigÇtu»
, &
size
);

337 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
f
->
f›ld
.
Çme
));

338 
	`h´ofAddU1ToRecÜd
(
»c
, 
t
);

339 ià(
size
 == 1) {

340 
	`h´ofAddU1ToRecÜd
(
»c
, (
u1
)
f
->
v®ue
.
b
);

341 } ià(
size
 == 2) {

342 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)
f
->
v®ue
.
c
);

343 } ià(
size
 == 4) {

344 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)
f
->
v®ue
.
i
);

345 } ià(
size
 == 8) {

346 
	`h´ofAddU8ToRecÜd
(
»c
, (
u8
)
f
->
v®ue
.
j
);

348 
	`as£¹
(
çl£
);

354 
n
 = 
thisCÏss
->
if›ldCouÁ
;

355 
	`h´ofAddU2ToRecÜd
(
»c
, (
u2
)
n
);

356 
i
 = 0; i < 
n
; i++) {

357 cÚ¡ 
In¡F›ld
 *
f
 = &
thisCÏss
->
if›lds
[
i
];

358 
h´of_basic_ty³
 
t
;

360 
t
 = 
	`sigÇtu»ToBasicTy³AndSize
(
f
->
f›ld
.
sigÇtu»
, 
NULL
);

361 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
f
->
f›ld
.
Çme
));

362 
	`h´ofAddU1ToRecÜd
(
»c
, 
t
);

364 } ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISARRAY
)) {

365 cÚ¡ 
A¼ayObjeù
 *
aobj
 = (cÚ¡ A¼ayObjeù *)
obj
;

366 
u4
 
Ëngth
 = 
aobj
->length;

368 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOBJECTARRAY
)) {

371 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_OBJECT_ARRAY_DUMP
);

373 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

374 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

375 
	`h´ofAddU4ToRecÜd
(
»c
, 
Ëngth
);

376 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
şazz
));

380 
	`h´ofAddIdLi¡ToRecÜd
(
»c
,

381 (cÚ¡ 
h´of_objeù_id
 *)
aobj
->
cÚ‹Ás
, 
Ëngth
);

383 
h´of_basic_ty³
 
t
;

384 
size_t
 
size
;

386 
t
 = 
	`´im™iveToBasicTy³AndSize
(
şazz
->
–em’tCÏss
->

387 
´im™iveTy³
, &
size
);

391 #ià
DUMP_PRIM_DATA


392 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_PRIMITIVE_ARRAY_DUMP
);

394 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_PRIMITIVE_ARRAY_NODATA_DUMP
);

397 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

398 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

399 
	`h´ofAddU4ToRecÜd
(
»c
, 
Ëngth
);

400 
	`h´ofAddU1ToRecÜd
(
»c
, 
t
);

402 #ià
DUMP_PRIM_DATA


405 ià(
size
 == 1) {

406 
	`h´ofAddU1Li¡ToRecÜd
(
»c
, (cÚ¡ 
u1
 *)
aobj
->
cÚ‹Ás
,

407 
Ëngth
);

408 } ià(
size
 == 2) {

409 
	`h´ofAddU2Li¡ToRecÜd
(
»c
, (cÚ¡ 
u2
 *)
aobj
->
cÚ‹Ás
,

410 
Ëngth
);

411 } ià(
size
 == 4) {

412 
	`h´ofAddU4Li¡ToRecÜd
(
»c
, (cÚ¡ 
u4
 *)
aobj
->
cÚ‹Ás
,

413 
Ëngth
);

414 } ià(
size
 == 8) {

415 
	`h´ofAddU8Li¡ToRecÜd
(
»c
, (cÚ¡ 
u8
 *)
aobj
->
cÚ‹Ás
,

416 
Ëngth
);

421 cÚ¡ 
CÏssObjeù
 *
sşass
;

422 
size_t
 
sizeP©chOff£t
, 
§vedL’
;

426 
	`h´ofAddU1ToRecÜd
(
»c
, 
HPROF_INSTANCE_DUMP
);

427 
	`h´ofAddIdToRecÜd
(
»c
, (
h´of_objeù_id
)
obj
);

428 
	`h´ofAddU4ToRecÜd
(
»c
, 
	`¡ackT¿ûS”ŸlNumb”
(
obj
));

429 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupCÏssId
(
şazz
));

435 
sizeP©chOff£t
 = 
»c
->
Ëngth
;

436 
	`h´ofAddU4ToRecÜd
(
»c
, 0x77777777);

441 
sşass
 = 
şazz
;

442 
sşass
 !ğ
NULL
) {

443 
i
, 
if›ldCouÁ
;

445 
if›ldCouÁ
 = 
sşass
->ifieldCount;

446 
i
 = 0; i < 
if›ldCouÁ
; i++) {

447 cÚ¡ 
In¡F›ld
 *
f
 = &
sşass
->
if›lds
[
i
];

448 
h´of_basic_ty³
 
t
;

449 
size_t
 
size
;

451 
t
 = 
	`sigÇtu»ToBasicTy³AndSize
(
f
->
f›ld
.
sigÇtu»
, &
size
);

452 ià(
size
 == 1) {

453 
	`h´ofAddU1ToRecÜd
(
»c
,

454 (
u1
)
	`dvmG‘F›ldBy‹
(
obj
, 
f
->
by‹Off£t
));

455 } ià(
size
 == 2) {

456 
	`h´ofAddU2ToRecÜd
(
»c
,

457 (
u2
)
	`dvmG‘F›ldCh¬
(
obj
, 
f
->
by‹Off£t
));

458 } ià(
size
 == 4) {

459 
	`h´ofAddU4ToRecÜd
(
»c
,

460 (
u4
)
	`dvmG‘F›ldIÁ
(
obj
, 
f
->
by‹Off£t
));

461 } ià(
size
 == 8) {

462 
	`h´ofAddU8ToRecÜd
(
»c
,

463 (
u8
)
	`dvmG‘F›ldLÚg
(
obj
, 
f
->
by‹Off£t
));

465 
	`as£¹
(
çl£
);

469 
sşass
 = sşass->
su³r
;

474 
§vedL’
 = 
»c
->
Ëngth
;

475 
»c
->
Ëngth
 = 
sizeP©chOff£t
;

476 
	`h´ofAddU4ToRecÜd
(
»c
, 
§vedL’
 - (
sizeP©chOff£t
 + 4));

477 
»c
->
Ëngth
 = 
§vedL’
;

481 
ùx
->
objeùsInSegm’t
++;

484 
	}
}

	@hprof/HprofOutput.c

16 
	~<sys/time.h
>

17 
	~<time.h
>

18 
	~"H´of.h
"

20 
	#HPROF_MAGIC_STRING
 "JAVA PROFILE 1.0.3"

	)

22 
	#U2_TO_BUF_BE
(
buf
, 
off£t
, 
v®ue
) \

24 *
buf_
 = (*)(
buf
); \

25 
off£t_
 = ()(
off£t
); \

26 
u2
 
v®ue_
 = (u2)(
v®ue
); \

27 
buf_
[
off£t_
 + 0] = ()(
v®ue_
 >> 8); \

28 
buf_
[
off£t_
 + 1] = ()(
v®ue_
 ); \

29 } 0)

	)

31 
	#U4_TO_BUF_BE
(
buf
, 
off£t
, 
v®ue
) \

33 *
buf_
 = (*)(
buf
); \

34 
off£t_
 = ()(
off£t
); \

35 
u4
 
v®ue_
 = (u4)(
v®ue
); \

36 
buf_
[
off£t_
 + 0] = ()(
v®ue_
 >> 24); \

37 
buf_
[
off£t_
 + 1] = ()(
v®ue_
 >> 16); \

38 
buf_
[
off£t_
 + 2] = ()(
v®ue_
 >> 8); \

39 
buf_
[
off£t_
 + 3] = ()(
v®ue_
 ); \

40 } 0)

	)

42 
	#U8_TO_BUF_BE
(
buf
, 
off£t
, 
v®ue
) \

44 *
buf_
 = (*)(
buf
); \

45 
off£t_
 = ()(
off£t
); \

46 
u8
 
v®ue_
 = (u8)(
v®ue
); \

47 
buf_
[
off£t_
 + 0] = ()(
v®ue_
 >> 56); \

48 
buf_
[
off£t_
 + 1] = ()(
v®ue_
 >> 48); \

49 
buf_
[
off£t_
 + 2] = ()(
v®ue_
 >> 40); \

50 
buf_
[
off£t_
 + 3] = ()(
v®ue_
 >> 32); \

51 
buf_
[
off£t_
 + 4] = ()(
v®ue_
 >> 24); \

52 
buf_
[
off£t_
 + 5] = ()(
v®ue_
 >> 16); \

53 
buf_
[
off£t_
 + 6] = ()(
v®ue_
 >> 8); \

54 
buf_
[
off£t_
 + 7] = ()(
v®ue_
 ); \

55 } 0)

	)

58 
	$h´ofCÚ‹xtIn™
(
h´of_cÚ‹xt_t
 *
ùx
, *
feName
, 
FILE
 *
å
,

59 
boŞ
 
wr™eH—d”
)

61 
	`mem£t
(
ùx
, 0,  (*ctx));

62 
ùx
->
feName
 = fileName;

63 
ùx
->
å
 = fp;

65 
ùx
->
curRec
.
®locL’
 = 128;

66 
ùx
->
curRec
.
body
 = 
	`m®loc
(ùx->curRec.
®locL’
);

69 ià(
wr™eH—d”
) {

70 
magic
[] = 
HPROF_MAGIC_STRING
;

71 
buf
[4];

72 
timev®
 
now
;

73 
u8
 
nowMs
;

79 
	`fwr™e
(
magic
, 1, (magic), 
å
);

84 
	`U4_TO_BUF_BE
(
buf
, 0, (*));

85 
	`fwr™e
(
buf
, 1, (
u4
), 
å
);

89 ià(
	`g‘timeofday
(&
now
, 
NULL
) < 0) {

90 
nowMs
 = 0;

92 
nowMs
 = (
u8
)
now
.
tv_£c
 * 1000 +‚ow.
tv_u£c
 / 1000;

97 
	`U4_TO_BUF_BE
(
buf
, 0, (
u4
)(
nowMs
 >> 32));

98 
	`fwr™e
(
buf
, 1, (
u4
), 
å
);

102 
	`U4_TO_BUF_BE
(
buf
, 0, (
u4
)(
nowMs
 & 0xffffffffULL));

103 
	`fwr™e
(
buf
, 1, (
u4
), 
å
);

105 
	}
}

108 
	$h´ofFlushRecÜd
(
h´of_»cÜd_t
 *
»c
, 
FILE
 *
å
)

110 ià(
»c
->
dœty
) {

111 
h—dBuf
[ (
u1
è+ 2 *  (
u4
)];

112 
nb
;

114 
h—dBuf
[0] = 
»c
->
g
;

115 
	`U4_TO_BUF_BE
(
h—dBuf
, 1, 
»c
->
time
);

116 
	`U4_TO_BUF_BE
(
h—dBuf
, 5, 
»c
->
Ëngth
);

118 
nb
 = 
	`fwr™e
(
h—dBuf
, 1, (h—dBuf), 
å
);

119 ià(
nb
 !ğ(
h—dBuf
)) {

120  
	`UNIQUE_ERROR
();

122 
nb
 = 
	`fwr™e
(
»c
->
body
, 1,„ec->
Ëngth
, 
å
);

123 ià(
nb
 !ğ()
»c
->
Ëngth
) {

124  
	`UNIQUE_ERROR
();

127 
»c
->
dœty
 = 
çl£
;

132 
	}
}

135 
	$h´ofFlushCu¼’tRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
)

137  
	`h´ofFlushRecÜd
(&
ùx
->
curRec
, ctx->
å
);

138 
	}
}

141 
	$h´ofS¹NewRecÜd
(
h´of_cÚ‹xt_t
 *
ùx
, 
u1
 
g
, 
u4
 
time
)

143 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

144 
”r
;

146 
”r
 = 
	`h´ofFlushRecÜd
(
»c
, 
ùx
->
å
);

147 ià(
”r
 != 0) {

148  
”r
;

149 } ià(
»c
->
dœty
) {

150  
	`UNIQUE_ERROR
();

153 
»c
->
dœty
 = 
Œue
;

154 
»c
->
g
 =ag;

155 
»c
->
time
 =ime;

156 
»c
->
Ëngth
 = 0;

159 
	}
}

161 
šlše
 

162 
	$gu¬ª‹eRecÜdAµ’d
(
h´of_»cÜd_t
 *
»c
, 
size_t
 
nmÜe
)

164 
size_t
 
mšSize
;

166 
mšSize
 = 
»c
->
Ëngth
 + 
nmÜe
;

167 ià(
mšSize
 > 
»c
->
®locL’
) {

168 *
ÃwBody
;

169 
size_t
 
ÃwAÎocL’
;

171 
ÃwAÎocL’
 = 
»c
->
®locL’
 * 2;

172 ià(
ÃwAÎocL’
 < 
mšSize
) {

173 
ÃwAÎocL’
 = 
»c
->
®locL’
 + 
nmÜe
 +‚more/2;

175 
ÃwBody
 = 
	`»®loc
(
»c
->
body
, 
ÃwAÎocL’
);

176 ià(
ÃwBody
 !ğ
NULL
) {

177 
»c
->
body
 = 
ÃwBody
;

178 
»c
->
®locL’
 = 
ÃwAÎocL’
;

181  
	`UNIQUE_ERROR
();

185 
	`as£¹
(
»c
->
Ëngth
 + 
nmÜe
 <ğ»c->
®locL’
);

187 
	}
}

190 
	$h´ofAddU1Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u1
 *
v®ues
, 
size_t
 
numV®ues
)

192 
”r
;

194 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
);

195 ià(
”r
 != 0) {

196  
”r
;

199 
	`memıy
(
»c
->
body
 +„ec->
Ëngth
, 
v®ues
, 
numV®ues
);

200 
»c
->
Ëngth
 +ğ
numV®ues
;

203 
	}
}

206 
	$h´ofAddU1ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u1
 
v®ue
)

208 
”r
;

210 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 1);

211 ià(
”r
 != 0) {

212  
”r
;

215 
»c
->
body
[»c->
Ëngth
++] = 
v®ue
;

218 
	}
}

221 
	$h´ofAddUtf8SŒšgToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ *
¡r
)

226  
	`h´ofAddU1Li¡ToRecÜd
(
»c
, (cÚ¡ 
u1
 *)
¡r
, 
	`¡¾’
(str));

227 
	}
}

230 
	$h´ofAddU2Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u2
 *
v®ues
, 
size_t
 
numV®ues
)

232 *
š£¹
;

233 
size_t
 
i
;

234 
”r
;

236 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
 * 2);

237 ià(
”r
 != 0) {

238  
”r
;

243 
š£¹
 = 
»c
->
body
 +„ec->
Ëngth
;

244 
i
 = 0; i < 
numV®ues
; i++) {

245 
	`U2_TO_BUF_BE
(
š£¹
, 0, *
v®ues
++);

246 
š£¹
 +ğ(*
v®ues
);

248 
»c
->
Ëngth
 +ğ
numV®ues
 * 2;

251 
	}
}

254 
	$h´ofAddU2ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u2
 
v®ue
)

256  
	`h´ofAddU2Li¡ToRecÜd
(
»c
, &
v®ue
, 1);

257 
	}
}

260 
	$h´ofAddU4Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u4
 *
v®ues
, 
size_t
 
numV®ues
)

262 *
š£¹
;

263 
size_t
 
i
;

264 
”r
;

266 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
 * 4);

267 ià(
”r
 != 0) {

268  
”r
;

273 
š£¹
 = 
»c
->
body
 +„ec->
Ëngth
;

274 
i
 = 0; i < 
numV®ues
; i++) {

275 
	`U4_TO_BUF_BE
(
š£¹
, 0, *
v®ues
++);

276 
š£¹
 +ğ(*
v®ues
);

278 
»c
->
Ëngth
 +ğ
numV®ues
 * 4;

281 
	}
}

284 
	$h´ofAddU4ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u4
 
v®ue
)

286  
	`h´ofAddU4Li¡ToRecÜd
(
»c
, &
v®ue
, 1);

287 
	}
}

290 
	$h´ofAddU8Li¡ToRecÜd
(
h´of_»cÜd_t
 *
»c
, cÚ¡ 
u8
 *
v®ues
, 
size_t
 
numV®ues
)

292 *
š£¹
;

293 
size_t
 
i
;

294 
”r
;

296 
”r
 = 
	`gu¬ª‹eRecÜdAµ’d
(
»c
, 
numV®ues
 * 8);

297 ià(
”r
 != 0) {

298  
”r
;

303 
š£¹
 = 
»c
->
body
 +„ec->
Ëngth
;

304 
i
 = 0; i < 
numV®ues
; i++) {

305 
	`U8_TO_BUF_BE
(
š£¹
, 0, *
v®ues
++);

306 
š£¹
 +ğ(*
v®ues
);

308 
»c
->
Ëngth
 +ğ
numV®ues
 * 8;

311 
	}
}

314 
	$h´ofAddU8ToRecÜd
(
h´of_»cÜd_t
 *
»c
, 
u8
 
v®ue
)

316  
	`h´ofAddU8Li¡ToRecÜd
(
»c
, &
v®ue
, 1);

317 
	}
}

	@hprof/HprofStack.c

17 
	~"H´of.h
"

18 
	~"H´ofSck.h
"

19 
	~"®loc/H—pIÁ”Çl.h
"

21 
HashTabË
 *
	ggSckT¿ûHashTabË
 = 
NULL
;

22 
	ggS”ŸlNumb”
 = 0;

25 
	#STACK_DEPTH
 8

	)

28 
	m£rŸlNumb”
;

29 
	mth»adS”ŸlNumb”
;

30 
	mäameIds
[
STACK_DEPTH
];

31 } 
	tSckT¿û
;

34 
SckT¿û
 
	mŒaû
;

35 
u1
 
	mlive
;

36 } 
	tSckT¿ûEÁry
;

38 
u4
 
compu‹SckT¿ûHash
(cÚ¡ 
SckT¿ûEÁry
 *
¡ackT¿ûEÁry
);

41 
	$h´ofS¹up_Sck
()

43 
HashI‹r
 
™”
;

46 
	`dvmHashI‹rBegš
(
gSckT¿ûHashTabË
, &
™”
);

47 !
	`dvmHashI‹rDÚe
(&
™”
);

48 
	`dvmHashI‹rNext
(&
™”
)) {

49 
SckT¿ûEÁry
 *
¡ackT¿ûEÁry
;

52 
¡ackT¿ûEÁry
 = (
SckT¿ûEÁry
 *è
	`dvmHashI‹rD©a
(&
™”
);

53 
¡ackT¿ûEÁry
->
live
 = 0;

57 
	}
}

60 
	$h´ofShutdown_Sck
()

62 
HashI‹r
 
™”
;

65 
	`dvmHashI‹rBegš
(
gSckT¿ûHashTabË
, &
™”
);

66 !
	`dvmHashI‹rDÚe
(&
™”
);

67 
	`dvmHashI‹rNext
(&
™”
)) {

68 
SckT¿ûEÁry
 *
¡ackT¿ûEÁry
;

74 
¡ackT¿ûEÁry
 = (
SckT¿ûEÁry
 *è
	`dvmHashI‹rD©a
(&
™”
);

75 ià(!
¡ackT¿ûEÁry
->
live
) {

76 
	`dvmHashTabËRemove
(
gSckT¿ûHashTabË
,

77 
	`compu‹SckT¿ûHash
(
¡ackT¿ûEÁry
), stackTraceEntry);

78 
	`ä“
(
¡ackT¿ûEÁry
);

83 
	}
}

85 
u4


86 
	$compu‹SckT¿ûHash
(cÚ¡ 
SckT¿ûEÁry
 *
¡ackT¿ûEÁry
)

88 
u4
 
hash
 = 0;

89 cÚ¡ *
ı
 = (cÚ¡ *è&
¡ackT¿ûEÁry
->
Œaû
;

90 
i
;

92 
i
 = 0; i < (è(
SckT¿û
); i++) {

93 
hash
 = hash * 31 + 
ı
[
i
];

96  
hash
;

97 
	}
}

101 
	$¡ackCmp
(cÚ¡ *
bËI‹m
, cÚ¡ *
loo£I‹m
)

103  
	`memcmp
(&((
SckT¿ûEÁry
 *è
bËI‹m
)->
Œaû
,

104 &((
SckT¿ûEÁry
 *è
loo£I‹m
)->
Œaû
, (
SckT¿û
));

105 
	}
}

107 
SckT¿ûEÁry
 *

108 
	$¡ackDup
(cÚ¡ 
SckT¿ûEÁry
 *
¡ackT¿û
)

110 
SckT¿ûEÁry
 *
ÃwSckT¿û
 = 
	`m®loc
((StackTraceEntry));

111 
	`memıy
(
ÃwSckT¿û
, 
¡ackT¿û
, (
SckT¿ûEÁry
));

112  
ÃwSckT¿û
;

113 
	}
}

115 
u4


116 
	$h´ofLookupSckS”ŸlNumb”
(cÚ¡ 
SckT¿ûEÁry
 *
¡ackT¿û
)

118 
SckT¿ûEÁry
 *
v®
;

119 
u4
 
hashV®ue
;

120 
£rŸl
;

128 ià(
gSckT¿ûHashTabË
 =ğ
NULL
) {

129 
gSckT¿ûHashTabË
 = 
	`dvmHashTabËC»©e
(512, 
ä“
);

131 
	`dvmHashTabËLock
(
gSckT¿ûHashTabË
);

133 
hashV®ue
 = 
	`compu‹SckT¿ûHash
(
¡ackT¿û
);

134 
v®
 = 
	`dvmHashTabËLookup
(
gSckT¿ûHashTabË
, 
hashV®ue
, (*)
¡ackT¿û
,

135 (
HashCom·»Func
)
¡ackCmp
, 
çl£
);

136 ià(
v®
 =ğ
NULL
) {

137 
SckT¿ûEÁry
 *
ÃwSckT¿û
;

139 
ÃwSckT¿û
 = 
	`¡ackDup
(
¡ackT¿û
);

140 
ÃwSckT¿û
->
Œaû
.
£rŸlNumb”
 = ++
gS”ŸlNumb”
;

141 
v®
 = 
	`dvmHashTabËLookup
(
gSckT¿ûHashTabË
, 
hashV®ue
,

142 (*)
ÃwSckT¿û
, (
HashCom·»Func
)
¡ackCmp
, 
Œue
);

143 
	`as£¹
(
v®
 !ğ
NULL
);

147 
v®
->
live
 = 1;

150 
£rŸl
 = 
v®
->
Œaû
.
£rŸlNumb”
;

152 
	`dvmHashTabËUÆock
(
gSckT¿ûHashTabË
);

154  
£rŸl
;

155 
	}
}

158 
	$h´ofDumpScks
(
h´of_cÚ‹xt_t
 *
ùx
)

160 
HashI‹r
 
™”
;

161 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

163 
	`dvmHashTabËLock
(
gSckT¿ûHashTabË
);

165 
	`dvmHashI‹rBegš
(
gSckT¿ûHashTabË
, &
™”
);

166 !
	`dvmHashI‹rDÚe
(&
™”
);

167 
	`dvmHashI‹rNext
(&
™”
))

169 cÚ¡ 
SckT¿ûEÁry
 *
¡ackT¿ûEÁry
;

170 
couÁ
;

171 
i
;

173 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_STACK_TRACE
, 
HPROF_TIME
);

175 
¡ackT¿ûEÁry
 = (cÚ¡ 
SckT¿ûEÁry
 *è
	`dvmHashI‹rD©a
(&
™”
);

176 
	`as£¹
(
¡ackT¿ûEÁry
 !ğ
NULL
);

185 
	`h´ofAddU4ToRecÜd
(
»c
, 
¡ackT¿ûEÁry
->
Œaû
.
£rŸlNumb”
);

186 
	`h´ofAddU4ToRecÜd
(
»c
, 
¡ackT¿ûEÁry
->
Œaû
.
th»adS”ŸlNumb”
);

188 
couÁ
 = 0;

189 (
couÁ
 < 
STACK_DEPTH
) &&

190 (
¡ackT¿ûEÁry
->
Œaû
.
äameIds
[
couÁ
] != 0)) {

191 
couÁ
++;

193 
	`h´ofAddU4ToRecÜd
(
»c
, 
couÁ
);

194 
i
 = 0; i < 
couÁ
; i++) {

195 
	`h´ofAddU4ToRecÜd
(
»c
, 
¡ackT¿ûEÁry
->
Œaû
.
äameIds
[
i
]);

199 
	`dvmHashTabËUÆock
(
gSckT¿ûHashTabË
);

202 
	}
}

205 
	$h´ofFlInSckT¿û
(*
objeùPŒ
)

208 
DvmH—pChunk
 *
chunk
;

209 
SckT¿ûEÁry
 
¡ackT¿ûEÁry
;

210 
Th»ad
* 
£lf
;

211 * 
å
;

212 
i
;

214 ià(
objeùPŒ
 =ğ
NULL
) {

217 
£lf
 = 
	`dvmTh»adS–f
();

218 ià(
£lf
 =ğ
NULL
) {

221 
å
 = 
£lf
->
curF¿me
;

224 
¡ackT¿ûEÁry
.
Œaû
.
£rŸlNumb”
 = -1;

230 
¡ackT¿ûEÁry
.
Œaû
.
th»adS”ŸlNumb”
 = (è
£lf
;

232 
	`mem£t
(&
¡ackT¿ûEÁry
.
Œaû
.
äameIds
, 0,

233 (
¡ackT¿ûEÁry
.
Œaû
.
äameIds
));

235 
i
 = 0;

236 (
å
 !ğ
NULL
è&& (
i
 < 
STACK_DEPTH
)) {

237 cÚ¡ 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

238 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

239 
SckF¿meEÁry
 
äame
;

241 ià(!
	`dvmIsB»akF¿me
(
å
)) {

242 
äame
.äame.
m‘hod
 = method;

243 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

244 
äame
.äame.
pc
 = 0;

246 
	`as£¹
(
§veA»a
->
xŒa
.
cu¼’tPc
 >ğ
m‘hod
->
š¢s
 &&

247 
§veA»a
->
xŒa
.
cu¼’tPc
 <

248 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

249 
äame
.äame.
pc
 = (è(
§veA»a
->
xŒa
.
cu¼’tPc
 -

250 
m‘hod
->
š¢s
);

254 
¡ackT¿ûEÁry
.
Œaû
.
äameIds
[
i
++] =

255 
	`h´ofLookupSckF¿meId
(&
äame
);

258 
	`as£¹
(
å
 !ğ
§veA»a
->
´evF¿me
);

259 
å
 = 
§veA»a
->
´evF¿me
;

263 
chunk
 = 
	`±r2chunk
(
objeùPŒ
);

264 
chunk
->
¡ackT¿ûS”ŸlNumb”
 =

265 
	`h´ofLookupSckS”ŸlNumb”
(&
¡ackT¿ûEÁry
);

266 
	}
}

	@hprof/HprofStack.h

16 #iâdeà
_DALVIK_HPROF_STACK


17 
	#_DALVIK_HPROF_STACK


	)

19 
	~"../®loc/H—pIÁ”Çl.h
"

22 cÚ¡ 
M‘hod
 *
	mm‘hod
;

23 
	mpc
;

24 } 
	tSckF¿me
;

27 
SckF¿me
 
	mäame
;

28 
	mlive
;

29 } 
	tSckF¿meEÁry
;

31 
h´ofS¹upSck
();

32 
h´ofShutdown_Sck
();

33 
h´ofDumpScks
(
h´of_cÚ‹xt_t
 *
ùx
);

34 
h´ofFlInSckT¿û
(*
objeùPŒ
);

36 
h´ofS¹up_SckF¿me
();

37 
h´ofShutdown_SckF¿me
();

38 
h´of_¡ack_äame_id
 
h´ofLookupSckF¿meId
(cÚ¡ 
SckF¿meEÁry


39 *
¡ackF¿meEÁry
);

40 
h´ofDumpSckF¿mes
(
h´of_cÚ‹xt_t
 *
ùx
);

	@hprof/HprofStackFrame.c

17 
	~"H´of.h
"

18 
	~"H´ofSck.h
"

20 
	~"®loc/H—pIÁ”Çl.h
"

22 
HashTabË
 *
	ggSckF¿meHashTabË
;

24 
u4
 
compu‹SckF¿meHash
(cÚ¡ 
SckF¿meEÁry
 *
¡ackF¿meEÁry
);

27 
	$h´ofS¹up_SckF¿me
()

29 
HashI‹r
 
™”
;

34 
	`h´ofLookupSŒšgId
("<unknown>");

37 
	`dvmHashI‹rBegš
(
gSckF¿meHashTabË
, &
™”
);

38 !
	`dvmHashI‹rDÚe
(&
™”
);

39 
	`dvmHashI‹rNext
(&
™”
)) {

40 
SckF¿meEÁry
 *
¡ackF¿meEÁry
;

41 cÚ¡ 
M‘hod
 *
m‘hod
;

44 
¡ackF¿meEÁry
 = (
SckF¿meEÁry
 *è
	`dvmHashI‹rD©a
(&
™”
);

45 
¡ackF¿meEÁry
->
live
 = 0;

47 
m‘hod
 = 
¡ackF¿meEÁry
->
äame
.method;

48 ià(
m‘hod
 =ğ
NULL
) {

58 ià(
m‘hod
->
Çme
) {

59 
	`h´ofLookupSŒšgId
(
m‘hod
->
Çme
);

62 
DexSŒšgCache
 
ÿche
;

63 cÚ¡ * 
desütÜ
;

65 
	`dexSŒšgCacheIn™
(&
ÿche
);

66 
desütÜ
 = 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
, &
ÿche
);

67 
	`h´ofLookupSŒšgId
(
desütÜ
);

68 
	`dexSŒšgCacheR–—£
(&
ÿche
);

70 cÚ¡ * 
sourûFe
 = 
	`dvmG‘M‘hodSourûFe
(
m‘hod
);

71 ià(
sourûFe
) {

72 
	`h´ofLookupSŒšgId
(
sourûFe
);

75 ià(
m‘hod
->
şazz
) {

76 
	`h´ofLookupCÏssId
(
m‘hod
->
şazz
);

81 
	}
}

84 
	$h´ofShutdown_SckF¿me
()

86 
HashI‹r
 
™”
;

89 
	`dvmHashI‹rBegš
(
gSckF¿meHashTabË
, &
™”
);

90 !
	`dvmHashI‹rDÚe
(&
™”
);

91 
	`dvmHashI‹rNext
(&
™”
)) {

92 cÚ¡ 
SckF¿meEÁry
 *
¡ackF¿meEÁry
;

98 
¡ackF¿meEÁry
 = (cÚ¡ 
SckF¿meEÁry
 *è
	`dvmHashI‹rD©a
(&
™”
);

99 ià(!
¡ackF¿meEÁry
->
live
) {

100 
	`dvmHashTabËRemove
(
gSckF¿meHashTabË
,

101 
	`compu‹SckF¿meHash
(
¡ackF¿meEÁry
),

102 (*è
¡ackF¿meEÁry
);

103 
	`ä“
((*è
¡ackF¿meEÁry
);

108 
	}
}

111 
u4


112 
	$compu‹SckF¿meHash
(cÚ¡ 
SckF¿meEÁry
 *
¡ackF¿meEÁry
)

114 
u4
 
hash
 = 0;

115 cÚ¡ *
ı
 = (*è&
¡ackF¿meEÁry
->
äame
;

116 
i
;

118 
i
 = 0; i < (è(
SckF¿me
); i++) {

119 
hash
 = 31 * hash + 
ı
[
i
];

121  
hash
;

122 
	}
}

126 
	$¡ackF¿meCmp
(cÚ¡ *
bËI‹m
, cÚ¡ *
loo£I‹m
)

128  
	`memcmp
(&((
SckF¿meEÁry
 *)
bËI‹m
)->
äame
,

129 &((
SckF¿meEÁry
 *è
loo£I‹m
)->
äame
, (
SckF¿me
));

130 
	}
}

132 
SckF¿meEÁry
 *

133 
	$¡ackF¿meDup
(cÚ¡ 
SckF¿meEÁry
 *
¡ackF¿meEÁry
)

135 
SckF¿meEÁry
 *
ÃwSckF¿meEÁry
 = 
	`m®loc
((StackFrameEntry));

136 
	`memıy
(
ÃwSckF¿meEÁry
, 
¡ackF¿meEÁry
, (
SckF¿meEÁry
));

137  
ÃwSckF¿meEÁry
;

138 
	}
}

140 
h´of_¡ack_äame_id


141 
	$h´ofLookupSckF¿meId
(cÚ¡ 
SckF¿meEÁry
 *
¡ackF¿meEÁry
)

143 
SckF¿meEÁry
 *
v®
;

144 
u4
 
hashV®ue
;

152 ià(
gSckF¿meHashTabË
 =ğ
NULL
) {

153 
gSckF¿meHashTabË
 = 
	`dvmHashTabËC»©e
(512, 
ä“
);

155 
	`dvmHashTabËLock
(
gSckF¿meHashTabË
);

157 
hashV®ue
 = 
	`compu‹SckF¿meHash
(
¡ackF¿meEÁry
);

158 
v®
 = 
	`dvmHashTabËLookup
(
gSckF¿meHashTabË
, 
hashV®ue
,

159 (*)
¡ackF¿meEÁry
, (
HashCom·»Func
)
¡ackF¿meCmp
, 
çl£
);

160 ià(
v®
 =ğ
NULL
) {

161 cÚ¡ 
SckF¿meEÁry
 *
ÃwSckF¿meEÁry
;

163 
ÃwSckF¿meEÁry
 = 
	`¡ackF¿meDup
(
¡ackF¿meEÁry
);

164 
v®
 = 
	`dvmHashTabËLookup
(
gSckF¿meHashTabË
, 
hashV®ue
,

165 (*)
ÃwSckF¿meEÁry
, (
HashCom·»Func
)
¡ackF¿meCmp
, 
Œue
);

166 
	`as£¹
(
v®
 !ğ
NULL
);

170 
v®
->
live
 = 1;

172 
	`dvmHashTabËUÆock
(
gSckF¿meHashTabË
);

174  (
h´of_¡ack_äame_id
è
v®
;

175 
	}
}

178 
	$h´ofDumpSckF¿mes
(
h´of_cÚ‹xt_t
 *
ùx
)

180 
HashI‹r
 
™”
;

181 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

183 
	`dvmHashTabËLock
(
gSckF¿meHashTabË
);

185 
	`dvmHashI‹rBegš
(
gSckF¿meHashTabË
, &
™”
);

186 !
	`dvmHashI‹rDÚe
(&
™”
);

187 
	`dvmHashI‹rNext
(&
™”
))

189 cÚ¡ 
SckF¿meEÁry
 *
¡ackF¿meEÁry
;

190 cÚ¡ 
M‘hod
 *
m‘hod
;

191 
pc
;

192 cÚ¡ *
sourûFe
;

193 
CÏssObjeù
 *
şazz
;

194 
lšeNum
;

196 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_STACK_FRAME
, 
HPROF_TIME
);

198 
¡ackF¿meEÁry
 = (cÚ¡ 
SckF¿meEÁry
 *è
	`dvmHashI‹rD©a
(&
™”
);

199 
	`as£¹
(
¡ackF¿meEÁry
 !ğ
NULL
);

201 
m‘hod
 = 
¡ackF¿meEÁry
->
äame
.method;

202 
pc
 = 
¡ackF¿meEÁry
->
äame
.pc;

203 
sourûFe
 = 
	`dvmG‘M‘hodSourûFe
(
m‘hod
);

204 ià(
sourûFe
 =ğ
NULL
) {

205 
sourûFe
 = "<unknown>";

206 
lšeNum
 = 0;

208 
lšeNum
 = 
	`dvmLšeNumFromPC
(
m‘hod
, 
pc
);

210 
şazz
 = (
CÏssObjeù
 *è
	`h´ofLookupCÏssId
(
m‘hod
->clazz);

224 
DexSŒšgCache
 
ÿche
;

225 cÚ¡ * 
desütÜ
;

227 
	`dexSŒšgCacheIn™
(&
ÿche
);

228 
desütÜ
 = 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
, &
ÿche
);

230 
	`h´ofAddIdToRecÜd
(
»c
, (
u4
è
¡ackF¿meEÁry
);

231 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
m‘hod
->
Çme
));

232 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
desütÜ
));

233 
	`h´ofAddIdToRecÜd
(
»c
, 
	`h´ofLookupSŒšgId
(
sourûFe
));

234 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
è
şazz
->
£rŸlNumb”
);

235 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
è
lšeNum
);

237 
	`dexSŒšgCacheR–—£
(&
ÿche
);

240 
	`dvmHashTabËUÆock
(
gSckF¿meHashTabË
);

242 
	}
}

	@hprof/HprofString.c

19 
	~"H´of.h
"

21 
HashTabË
 *
	ggSŒšgHashTabË
;

24 
	$h´ofS¹up_SŒšg
()

26 
gSŒšgHashTabË
 = 
	`dvmHashTabËC»©e
(512, 
ä“
);

27 ià(
gSŒšgHashTabË
 =ğ
NULL
) {

28  
	`UNIQUE_ERROR
();

31 
	}
}

34 
	$h´ofShutdown_SŒšg
()

36 
	`dvmHashTabËF»e
(
gSŒšgHashTabË
);

38 
	}
}

40 
u4


41 
	$compu‹Utf8Hash
(cÚ¡ *
¡r
)

43 
u4
 
hash
 = 0;

44 cÚ¡ *
ı
;

45 
c
;

47 
ı
 = 
¡r
;

48 (
c
 = *
ı
++) != '\0') {

49 
hash
 = hash * 31 + 
c
;

52  
hash
;

53 
	}
}

55 
h´of_¡ršg_id


56 
	$h´ofLookupSŒšgId
(cÚ¡ *
¡r
)

58 *
v®
;

59 
u4
 
hashV®ue
;

61 
	`dvmHashTabËLock
(
gSŒšgHashTabË
);

63 
hashV®ue
 = 
	`compu‹Utf8Hash
(
¡r
);

64 
v®
 = 
	`dvmHashTabËLookup
(
gSŒšgHashTabË
, 
hashV®ue
, (*)
¡r
,

65 (
HashCom·»Func
)
¡rcmp
, 
çl£
);

66 ià(
v®
 =ğ
NULL
) {

67 cÚ¡ *
ÃwSŒ
;

69 
ÃwSŒ
 = 
	`¡rdup
(
¡r
);

70 
v®
 = 
	`dvmHashTabËLookup
(
gSŒšgHashTabË
, 
hashV®ue
, (*)
ÃwSŒ
,

71 (
HashCom·»Func
)
¡rcmp
, 
Œue
);

72 
	`as£¹
(
v®
 !ğ
NULL
);

75 
	`dvmHashTabËUÆock
(
gSŒšgHashTabË
);

77  (
h´of_¡ršg_id
)
v®
;

78 
	}
}

81 
	$h´ofDumpSŒšgs
(
h´of_cÚ‹xt_t
 *
ùx
)

83 
HashI‹r
 
™”
;

84 
h´of_»cÜd_t
 *
»c
 = &
ùx
->
curRec
;

85 
”r
;

87 
	`dvmHashTabËLock
(
gSŒšgHashTabË
);

89 
”r
 = 0, 
	`dvmHashI‹rBegš
(
gSŒšgHashTabË
, &
™”
);

90 
”r
 =ğ0 && !
	`dvmHashI‹rDÚe
(&
™”
);

91 
	`dvmHashI‹rNext
(&
™”
))

93 
”r
 = 
	`h´ofS¹NewRecÜd
(
ùx
, 
HPROF_TAG_STRING
, 
HPROF_TIME
);

94 ià(
”r
 == 0) {

95 cÚ¡ *
¡r
;

97 
¡r
 = (cÚ¡ *)
	`dvmHashI‹rD©a
(&
™”
);

98 
	`as£¹
(
¡r
 !ğ
NULL
);

108 
”r
 = 
	`h´ofAddU4ToRecÜd
(
»c
, (
u4
)
¡r
);

109 ià(
”r
 == 0) {

110 
”r
 = 
	`h´ofAddUtf8SŒšgToRecÜd
(
»c
, 
¡r
);

115 
	`dvmHashTabËUÆock
(
gSŒšgHashTabË
);

117  
”r
;

118 
	}
}

	@interp/Interp.c

28 
	~"D®vik.h
"

29 
	~"š‹½/IÁ”pDefs.h
"

44 
	$dvmIn™B»akpošts
()

46 #ifdeà
WITH_DEBUGGER


47 
	`mem£t
(
gDvm
.
debugB»akAddr
, 0, (gDvm.debugBreakAddr));

49 
	`as£¹
(
çl£
);

51 
	}
}

67 
	$dvmAddB»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
)

69 #ifdeà
WITH_DEBUGGER


70 cÚ¡ 
u2
* 
addr
 = 
m‘hod
->
š¢s
 + 
š¡rOff£t
;

71 cÚ¡ 
u2
** 
±r
 = 
gDvm
.
debugB»akAddr
;

72 
i
;

74 
	`LOGV
("BKP:‡dd %p %s.%s (%s:%d)\n",

75 
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

76 
	`dvmG‘M‘hodSourûFe
(
m‘hod
), 
	`dvmLšeNumFromPC
(m‘hod, 
š¡rOff£t
));

78 
m‘hod
->
debugB»akpoštCouÁ
++;

79 
i
 = 0; i < 
MAX_BREAKPOINTS
; i++, 
±r
++) {

80 ià(*
±r
 =ğ
NULL
) {

81 *
±r
 = 
addr
;

85 ià(
i
 =ğ
MAX_BREAKPOINTS
) {

87 
	`LOGE
("ERROR: max breakpointsƒxceeded\n");

88 
	`as£¹
(
çl£
);

91 
	`as£¹
(
çl£
);

93 
	}
}

105 
	$dvmCË¬B»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
)

107 #ifdeà
WITH_DEBUGGER


108 cÚ¡ 
u2
* 
addr
 = 
m‘hod
->
š¢s
 + 
š¡rOff£t
;

109 cÚ¡ 
u2
** 
±r
 = 
gDvm
.
debugB»akAddr
;

110 
i
;

112 
	`LOGV
("BKP: clear %p %s.%s (%s:%d)\n",

113 
addr
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

114 
	`dvmG‘M‘hodSourûFe
(
m‘hod
), 
	`dvmLšeNumFromPC
(m‘hod, 
š¡rOff£t
));

116 
m‘hod
->
debugB»akpoštCouÁ
--;

117 
	`as£¹
(
m‘hod
->
debugB»akpoštCouÁ
 >= 0);

118 
i
 = 0; i < 
MAX_BREAKPOINTS
; i++, 
±r
++) {

119 ià(*
±r
 =ğ
addr
) {

120 *
±r
 = 
NULL
;

124 ià(
i
 =ğ
MAX_BREAKPOINTS
) {

126 
	`LOGE
("ERROR: b»akpošˆÚ %°nÙ found\n", 
addr
);

127 
	`as£¹
(
çl£
);

130 
	`as£¹
(
çl£
);

132 
	}
}

143 
boŞ
 
	$dvmAddSšgËS‹p
(
Th»ad
* 
th»ad
, 
size
, 
d•th
)

145 #ifdeà
WITH_DEBUGGER


146 
S‹pCÚŒŞ
* 
pCŒl
 = &
gDvm
.
¡•CÚŒŞ
;

148 ià(
pCŒl
->
aùive
 && 
th»ad
 !=…Ctrl->thread) {

149 
	`LOGW
("WARNING: single-step‡ctive for %p;‡dding %p\n",

150 
pCŒl
->
th»ad
,hread);

163 
pCŒl
->
size
 = size;

164 
pCŒl
->
d•th
 = depth;

165 
pCŒl
->
th»ad
 =hread;

180 cÚ¡ 
SckSaveA»a
* 
§veA»a
;

181 * 
å
;

182 * 
´evFp
 = 
NULL
;

184 
å
 = 
th»ad
->
curF¿me
; f°!ğ
NULL
; f°ğ
§veA»a
->
´evF¿me
) {

185 cÚ¡ 
M‘hod
* 
m‘hod
;

187 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

188 
m‘hod
 = 
§veA»a
->method;

190 ià(!
	`dvmIsB»akF¿me
(
å
è&& !
	`dvmIsN©iveM‘hod
(
m‘hod
))

192 
´evFp
 = 
å
;

194 ià(
å
 =ğ
NULL
) {

195 
	`LOGW
("Unexpected: step„eq in‚ative-onlyhreadid=%d\n",

196 
th»ad
->
th»adId
);

197  
çl£
;

199 ià(
´evFp
 !ğ
NULL
) {

205 
	`LOGV
("##### init step while in‚ative method\n");

206 
å
 = 
´evFp
;

207 
	`as£¹
(!
	`dvmIsB»akF¿me
(
å
));

208 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
));

209 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

216 
pCŒl
->
m‘hod
 = 
§veA»a
->method;

218 ià(
pCŒl
->
pAdd»ssS‘
 !ğ
NULL
) {

220 
	`ä“
((*)
pCŒl
->
pAdd»ssS‘
);

221 
pCŒl
->
pAdd»ssS‘
 = 
NULL
;

223 ià(
	`dvmIsN©iveM‘hod
(
pCŒl
->
m‘hod
)) {

224 
pCŒl
->
lše
 = -1;

226 
pCŒl
->
lše
 = 
	`dvmLšeNumFromPC
(
§veA»a
->
m‘hod
,

227 
§veA»a
->
xŒa
.
cu¼’tPc
 - saveA»a->
m‘hod
->
š¢s
);

228 
pCŒl
->
pAdd»ssS‘


229 ğ
	`dvmAdd»ssS‘FÜLše
(
§veA»a
->
m‘hod
, 
pCŒl
->
lše
);

231 
pCŒl
->
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
th»ad
,h»ad->
curF¿me
);

232 
pCŒl
->
aùive
 = 
Œue
;

234 
	`LOGV
("##### step init:hread=%p meth=%p '%s'†ine=%d frameDepth=%d depth=%s size=%s\n",

235 
pCŒl
->
th»ad
,…CŒl->
m‘hod
,…CŒl->m‘hod->
Çme
,

236 
pCŒl
->
lše
,…CŒl->
äameD•th
,

237 
	`dvmJdwpS‹pD•thSŒ
(
pCŒl
->
d•th
),

238 
	`dvmJdwpS‹pSizeSŒ
(
pCŒl
->
size
));

240  
Œue
;

242 
	`as£¹
(
çl£
);

243  
çl£
;

245 
	}
}

250 
	$dvmCË¬SšgËS‹p
(
Th»ad
* 
th»ad
)

252 #ifdeà
WITH_DEBUGGER


253 
	`UNUSED_PARAMETER
(
th»ad
);

255 
gDvm
.
¡•CÚŒŞ
.
aùive
 = 
çl£
;

257 
	`as£¹
(
çl£
);

259 
	}
}

279 
Objeù
* 
	$dvmG‘ThisPŒ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
å
)

281 ià(
	`dvmIsSticM‘hod
(
m‘hod
))

282  
NULL
;

283 #ifdeà
WITH_TAINT_TRACKING


284  (
Objeù
*)
å
[(
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
)<<1];

286  (
Objeù
*)
å
[
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
];

288 
	}
}

291 #ià
defšed
(
WITH_TRACKREF_CHECKS
)

299 
	$dvmIÁ”pCheckT¿ckedRefs
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
,

300 
debugT¿ckedRefS¹
)

302 ià(
	`dvmReã»nûTabËEÁr›s
(&
£lf
->
š‹º®LoÿlRefTabË
)

303 !ğ(
size_t
è
debugT¿ckedRefS¹
)

305 * 
desc
;

306 
Objeù
** 
tİ
;

307 
couÁ
;

309 
couÁ
 = 
	`dvmReã»nûTabËEÁr›s
(&
£lf
->
š‹º®LoÿlRefTabË
);

311 
	`LOGE
("TRACK: unreleased internal„eference (prev=%dotal=%d)\n",

312 
debugT¿ckedRefS¹
, 
couÁ
);

313 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

314 
	`LOGE
(" cu¼’ˆm‘hod i %s.% %s\n", 
m‘hod
->
şazz
->
desütÜ
,

315 
m‘hod
->
Çme
, 
desc
);

316 
	`ä“
(
desc
);

317 
tİ
 = 
£lf
->
š‹º®LoÿlRefTabË
.
bË
 + 
debugT¿ckedRefS¹
;

318 
tİ
 < 
£lf
->
š‹º®LoÿlRefTabË
.
ÃxtEÁry
) {

319 
	`LOGE
(" %p (%s)\n",

320 *
tİ
,

321 ((*
tİ
)->
şazz
 !ğ
NULL
è? (*tİ)->şazz->
desütÜ
 : "");

322 
tİ
++;

324 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

326 
	`dvmAbÜt
();

329 
	}
}

333 #ifdeà
LOG_INSTR


337 
	$dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
)

339 
i
, 
loÿlCouÁ
;

341 
loÿlCouÁ
 = 
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
;

343 
	`LOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", "Regi¡” (å=%p):\n", 
äamePŒ
);

344 
i
 = 
m‘hod
->
»gi¡”sSize
-1; i >= 0; i--) {

345 ià(
i
 >ğ
loÿlCouÁ
) {

346 
	`LOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", " v%-2d in%-2d : 0x%08x\n",

347 #ifdeà
WITH_TAINT_TRACKING


348 
i
, i-
loÿlCouÁ
, 
äamePŒ
[i<<1]);

350 
i
, i-
loÿlCouÁ
, 
äamePŒ
[i]);

353 ià(
šOÆy
) {

354 
	`LOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", " [...]\n");

357 cÚ¡ * 
Çme
 = "";

358 
j
;

360 
DexFe
* 
pDexFe
 = 
m‘hod
->
şazz
->pDexFile;

361 cÚ¡ 
DexCode
* 
pDexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

362 
loÿlsSize
 = 
	`dexG‘LoÿlsSize
(
pDexFe
, 
pDexCode
);

363 cÚ¡ 
DexLoÿl
* 
loÿls
 = 
	`dvmDexG‘Loÿls
(
pDexFe
, 
pDexCode
);

364 
j
 = 0; j < 
loÿlsSize
, j++) {

365 ià(
loÿls
[
j
].
»gi¡”Num
 =ğ(
u4
è
i
) {

366 
Çme
 = 
	`dvmDexSŒšgSŒ
(
loÿls
[
j
].
pName
);

371 
	`LOG
(
LOG_VERBOSE
, 
LOG_TAG
"i", " v%-2d : 0x%08x %s\n",

372 #ifdeà
WITH_TAINT_TRACKING


373 
i
, 
äamePŒ
[i<<1], 
Çme
);

375 
i
, 
äamePŒ
[i], 
Çme
);

379 
	}
}

396 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


397 
šlše
 
s4
 
	$s4FromSw™chD©a
(cÚ¡ * 
sw™chD©a
) {

398  *(
s4
*è
sw™chD©a
;

399 
	}
}

401 
šlše
 
s4
 
	$s4FromSw™chD©a
(cÚ¡ * 
sw™chD©a
) {

402 
u2
* 
d©a
 = 
sw™chD©a
;

403  
d©a
[0] | (((
s4
) data[1]) << 16);

404 
	}
}

413 
s4
 
	$dvmIÁ”pHªdËPackedSw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, 
s4
 
‹¡V®
)

415 cÚ¡ 
kIn¡rL’
 = 3;

416 
u2
 
size
;

417 
s4
 
fœ¡Key
;

418 cÚ¡ 
s4
* 
’Œ›s
;

429 ià(*
sw™chD©a
++ !ğ
kPackedSw™chSigÇtu»
) {

431 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

433  
kIn¡rL’
;

436 
size
 = *
sw™chD©a
++;

437 
	`as£¹
(
size
 > 0);

439 
fœ¡Key
 = *
sw™chD©a
++;

440 
fœ¡Key
 |ğ(*
sw™chD©a
++) << 16;

442 ià(
‹¡V®
 < 
fœ¡Key
 ||e¡V® >ğfœ¡Key + 
size
) {

443 
	`LOGVV
("Value %d‚ot found in switch (%d-%d)\n",

444 
‹¡V®
, 
fœ¡Key
, fœ¡Key+
size
-1);

445  
kIn¡rL’
;

451 
’Œ›s
 = (cÚ¡ 
s4
*è
sw™chD©a
;

452 
	`as£¹
(((
u4
)
’Œ›s
 & 0x3) == 0);

454 
	`as£¹
(
‹¡V®
 - 
fœ¡Key
 >ğ0 &&e¡V® - fœ¡Key < 
size
);

455 
	`LOGVV
("Value %d found in slot %d (goto 0x%02x)\n",

456 
‹¡V®
,e¡V® - 
fœ¡Key
,

457 
	`s4FromSw™chD©a
(&
’Œ›s
[
‹¡V®
 - 
fœ¡Key
]));

458  
	`s4FromSw™chD©a
(&
’Œ›s
[
‹¡V®
 - 
fœ¡Key
]);

459 
	}
}

467 
s4
 
	$dvmIÁ”pHªdËS·r£Sw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, 
s4
 
‹¡V®
)

469 cÚ¡ 
kIn¡rL’
 = 3;

470 
u2
 
id’t
, 
size
;

471 cÚ¡ 
s4
* 
keys
;

472 cÚ¡ 
s4
* 
’Œ›s
;

473 
i
;

485 ià(*
sw™chD©a
++ !ğ
kS·r£Sw™chSigÇtu»
) {

487 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

489  
kIn¡rL’
;

492 
size
 = *
sw™chD©a
++;

493 
	`as£¹
(
size
 > 0);

498 
keys
 = (cÚ¡ 
s4
*è
sw™chD©a
;

499 
	`as£¹
(((
u4
)
keys
 & 0x3) == 0);

504 
’Œ›s
 = 
keys
 + 
size
;

505 
	`as£¹
(((
u4
)
’Œ›s
 & 0x3) == 0);

514 
i
 = 0; i < 
size
; i++) {

515 
s4
 
k
 = 
	`s4FromSw™chD©a
(&
keys
[
i
]);

516 ià(
k
 =ğ
‹¡V®
) {

517 
	`LOGVV
("Value %d found inƒntry %d (goto 0x%02x)\n",

518 
‹¡V®
, 
i
, 
	`s4FromSw™chD©a
(&
’Œ›s
[i]));

519  
	`s4FromSw™chD©a
(&
’Œ›s
[
i
]);

520 } ià(
k
 > 
‹¡V®
) {

525 
	`LOGVV
("V®u%d‚Ù found iÀsw™ch\n", 
‹¡V®
);

526  
kIn¡rL’
;

527 
	}
}

538 
	$cİySw­³dA¼ayD©a
(* 
de¡
, cÚ¡ 
u2
* 
¤c
, 
u4
 
size
, u2 
width
)

540 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


541 
	`memıy
(
de¡
, 
¤c
, 
size
*
width
);

543 
i
;

545 
width
) {

548 
i
 = (
size
-1) & ~1; i >= 0; i -= 2) {

549 ((
u1
*)
de¡
)[
i
] = ((u1*)
¤c
)[i+1];

550 ((
u1
*)
de¡
)[
i
+1] = ((u1*)
¤c
)[i];

556 ià((
size
 & 1) != 0) {

557 ((
u1
*)
de¡
)[
size
-1] = ((u1*)
¤c
)[size];

562 
	`memıy
(
de¡
, 
¤c
, 
size
*
width
);

566 
i
 = 0; i < (è
size
; i++) {

567 ((
u4
*)
de¡
)[
i
] = (
¤c
[(i << 1) + 1] << 16) | src[i << 1];

572 
i
 = 0; i < (è(
size
 << 1); i += 2) {

573 ((*)
de¡
)[
i
] = (
¤c
[(i << 1) + 3] << 16) | src[(i << 1) + 2];

574 ((*)
de¡
)[
i
+1] = (
¤c
[(i << 1) + 1] << 16) | src[i << 1];

578 
	`LOGE
("UÃx³ùed width %d iÀcİySw­³dA¼ayD©a\n", 
width
);

579 
	`dvmAbÜt
();

583 
	}
}

591 
boŞ
 
	$dvmIÁ”pHªdËFlA¼ayD©a
(
A¼ayObjeù
* 
¬¿yObj
, cÚ¡ 
u2
* 
¬¿yD©a
)

593 
u2
 
width
;

594 
u4
 
size
;

596 ià(
¬¿yObj
 =ğ
NULL
) {

597 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

598  
çl£
;

611 ià(
¬¿yD©a
[0] !ğ
kA¼ayD©aSigÇtu»
) {

612 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad‡rray data magic");

613  
çl£
;

616 
width
 = 
¬¿yD©a
[1];

617 
size
 = 
¬¿yD©a
[2] | (((
u4
)arrayData[3]) << 16);

619 ià(
size
 > 
¬¿yObj
->
Ëngth
) {

620 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayIndexOutOfBoundsExû±iÚ;", 
NULL
);

621  
çl£
;

623 
	`cİySw­³dA¼ayD©a
(
¬¿yObj
->
cÚ‹Ás
, &
¬¿yD©a
[4], 
size
, 
width
);

624 #ifdeà
WITH_TAINT_TRACKING


625 ià(
¬¿yObj
->
Ëngth
 =ğ
size
) {

626 
¬¿yObj
->
št
.
g
 = 
TAINT_CLEAR
;

629  
Œue
;

630 
	}
}

638 
M‘hod
* 
	$dvmIÁ”pFšdIÁ”çûM‘hod
(
CÏssObjeù
* 
thisCÏss
, 
u4
 
m‘hodIdx
,

639 cÚ¡ 
M‘hod
* 
m‘hod
, 
DvmDex
* 
m‘hodCÏssDex
)

641 
M‘hod
* 
absM‘hod
;

642 
M‘hod
* 
m‘hodToC®l
;

643 
i
, 
vbËIndex
;

649 
absM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
m‘hodIdx
);

650 ià(
absM‘hod
 =ğ
NULL
) {

651 
absM‘hod
 = 
	`dvmResŞveIÁ”çûM‘hod
(
m‘hod
->
şazz
, 
m‘hodIdx
);

652 ià(
absM‘hod
 =ğ
NULL
) {

653 
	`LOGV
("+ unknown method\n");

654  
NULL
;

659 
	`as£¹
(
	`dvmIsAb¡¿ùM‘hod
(
absM‘hod
));

671 
i
 = 0; i < 
thisCÏss
->
iáabËCouÁ
; i++) {

672 ià(
thisCÏss
->
iáabË
[
i
].
şazz
 =ğ
absM‘hod
->clazz)

675 ià(
i
 =ğ
thisCÏss
->
iáabËCouÁ
) {

677 
	`dvmThrowExû±iÚ
("Ljava/lang/IncompatibleClassChangeError;",

679  
NULL
;

682 
	`as£¹
(
absM‘hod
->
m‘hodIndex
 <

683 
thisCÏss
->
iáabË
[
i
].
şazz
->
vœtu®M‘hodCouÁ
);

685 
vbËIndex
 =

686 
thisCÏss
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
absM‘hod
->
m‘hodIndex
];

687 
	`as£¹
(
vbËIndex
 >ğ0 && vbËIndex < 
thisCÏss
->
vbËCouÁ
);

688 
m‘hodToC®l
 = 
thisCÏss
->
vbË
[
vbËIndex
];

692 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

693 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

695  
NULL
;

698 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

699 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

702 
	`LOGVV
("+++ interface=%s.%s concrete=%s.%s\n",

703 
absM‘hod
->
şazz
->
desütÜ
,‡bsM‘hod->
Çme
,

704 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

705 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

707  
m‘hodToC®l
;

708 
	}
}

717 
	#kThrowShow_acûssFromCÏss
 1

	)

718 * 
	$şassNameFromIndex
(cÚ¡ 
M‘hod
* 
m‘hod
, 
»f
,

719 
V”ifyE¼ÜRefTy³
 
»fTy³
, 
æags
)

721 cÚ¡ 
kBufL’
 = 256;

722 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

724 ià(
»fTy³
 =ğ
VERIFY_ERROR_REF_FIELD
) {

726 cÚ¡ 
DexF›ldId
* 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
»f
);

727 
»f
 = 
pF›ldId
->
şassIdx
;

728 } ià(
»fTy³
 =ğ
VERIFY_ERROR_REF_METHOD
) {

730 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
»f
);

731 
»f
 = 
pM‘hodId
->
şassIdx
;

734 cÚ¡ * 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
»f
);

735 * 
dÙCÏssName
 = 
	`dvmDesütÜToDÙ
(
şassName
);

736 ià(
æags
 == 0)

737  
dÙCÏssName
;

739 * 
»suÉ
 = (*è
	`m®loc
(
kBufL’
);

741 ià((
æags
 & 
kThrowShow_acûssFromCÏss
) != 0) {

742 * 
dÙFromName
 = 
	`dvmDesütÜToDÙ
(
m‘hod
->
şazz
->
desütÜ
);

743 
	`¢´štf
(
»suÉ
, 
kBufL’
, "triedo‡ccess class %s from class %s",

744 
dÙCÏssName
, 
dÙFromName
);

745 
	`ä“
(
dÙFromName
);

747 
	`as£¹
(
çl£
);

748 
»suÉ
[0] = '\0';

751 
	`ä“
(
dÙCÏssName
);

752  
»suÉ
;

753 
	}
}

754 * 
	$f›ldNameFromIndex
(cÚ¡ 
M‘hod
* 
m‘hod
, 
»f
,

755 
V”ifyE¼ÜRefTy³
 
»fTy³
, 
æags
)

757 cÚ¡ 
kBufL’
 = 256;

758 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

759 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

760 cÚ¡ * 
şassName
;

761 cÚ¡ * 
f›ldName
;

763 ià(
»fTy³
 !ğ
VERIFY_ERROR_REF_FIELD
) {

764 
	`LOGW
("Ex³ùed„eàty³ %d, gÙ %d\n", 
VERIFY_ERROR_REF_FIELD
, 
»fTy³
);

765  
NULL
;

768 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
»f
);

769 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
şassIdx
);

770 
f›ldName
 = 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

772 * 
dÙName
 = 
	`dvmDesütÜToDÙ
(
şassName
);

773 * 
»suÉ
 = (*è
	`m®loc
(
kBufL’
);

775 ià((
æags
 & 
kThrowShow_acûssFromCÏss
) != 0) {

776 * 
dÙFromName
 = 
	`dvmDesütÜToDÙ
(
m‘hod
->
şazz
->
desütÜ
);

777 
	`¢´štf
(
»suÉ
, 
kBufL’
, "triedo‡ccess field %s.%s from class %s",

778 
dÙName
, 
f›ldName
, 
dÙFromName
);

779 
	`ä“
(
dÙFromName
);

781 
	`¢´štf
(
»suÉ
, 
kBufL’
, "%s.%s", 
dÙName
, 
f›ldName
);

784 
	`ä“
(
dÙName
);

785  
»suÉ
;

786 
	}
}

787 * 
	$m‘hodNameFromIndex
(cÚ¡ 
M‘hod
* 
m‘hod
, 
»f
,

788 
V”ifyE¼ÜRefTy³
 
»fTy³
, 
æags
)

790 cÚ¡ 
kBufL’
 = 384;

791 cÚ¡ 
DvmDex
* 
pDvmDex
 = 
m‘hod
->
şazz
->pDvmDex;

792 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

793 cÚ¡ * 
şassName
;

794 cÚ¡ * 
m‘hodName
;

796 ià(
»fTy³
 !ğ
VERIFY_ERROR_REF_METHOD
) {

797 
	`LOGW
("Ex³ùed„eàty³ %d, gÙ %d\n", 
VERIFY_ERROR_REF_METHOD
,
»fTy³
);

798  
NULL
;

801 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
»f
);

802 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
şassIdx
);

803 
m‘hodName
 = 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

805 * 
dÙName
 = 
	`dvmDesütÜToDÙ
(
şassName
);

806 * 
»suÉ
 = (*è
	`m®loc
(
kBufL’
);

808 ià((
æags
 & 
kThrowShow_acûssFromCÏss
) != 0) {

809 * 
dÙFromName
 = 
	`dvmDesütÜToDÙ
(
m‘hod
->
şazz
->
desütÜ
);

810 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

811 
	`¢´štf
(
»suÉ
, 
kBufL’
,

813 
dÙName
, 
m‘hodName
, 
desc
, 
dÙFromName
);

814 
	`ä“
(
dÙFromName
);

815 
	`ä“
(
desc
);

817 
	`¢´štf
(
»suÉ
, 
kBufL’
, "%s.%s", 
dÙName
, 
m‘hodName
);

820 
	`ä“
(
dÙName
);

821  
»suÉ
;

822 
	}
}

833 
	$dvmThrowV”ifiÿtiÚE¼Ü
(cÚ¡ 
M‘hod
* 
m‘hod
, 
kšd
, 
»f
)

835 cÚ¡ 
ty³Mask
 = 0xfà<< 
kV”ifyE¼ÜRefTy³Shiá
;

836 
V”ifyE¼Ü
 
”rÜKšd
 = 
kšd
 & ~
ty³Mask
;

837 
V”ifyE¼ÜRefTy³
 
»fTy³
 = 
kšd
 >> 
kV”ifyE¼ÜRefTy³Shiá
;

838 cÚ¡ * 
exû±iÚName
 = "Ljava/lang/VerifyError;";

839 * 
msg
 = 
NULL
;

841 (
V”ifyE¼Ü
è
”rÜKšd
) {

842 
VERIFY_ERROR_NO_CLASS
:

843 
exû±iÚName
 = "Ljava/lang/NoClassDefFoundError;";

844 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

846 
VERIFY_ERROR_NO_FIELD
:

847 
exû±iÚName
 = "Ljava/lang/NoSuchFieldError;";

848 
msg
 = 
	`f›ldNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

850 
VERIFY_ERROR_NO_METHOD
:

851 
exû±iÚName
 = "Ljava/lang/NoSuchMethodError;";

852 
msg
 = 
	`m‘hodNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

854 
VERIFY_ERROR_ACCESS_CLASS
:

855 
exû±iÚName
 = "Ljava/lang/IllegalAccessError;";

856 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
,

857 
kThrowShow_acûssFromCÏss
);

859 
VERIFY_ERROR_ACCESS_FIELD
:

860 
exû±iÚName
 = "Ljava/lang/IllegalAccessError;";

861 
msg
 = 
	`f›ldNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
,

862 
kThrowShow_acûssFromCÏss
);

864 
VERIFY_ERROR_ACCESS_METHOD
:

865 
exû±iÚName
 = "Ljava/lang/IllegalAccessError;";

866 
msg
 = 
	`m‘hodNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
,

867 
kThrowShow_acûssFromCÏss
);

869 
VERIFY_ERROR_CLASS_CHANGE
:

870 
exû±iÚName
 = "Ljava/lang/IncompatibleClassChangeError;";

871 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

873 
VERIFY_ERROR_INSTANTIATION
:

874 
exû±iÚName
 = "Ljava/lang/InstantiationError;";

875 
msg
 = 
	`şassNameFromIndex
(
m‘hod
, 
»f
, 
»fTy³
, 0);

878 
VERIFY_ERROR_GENERIC
:

881 
VERIFY_ERROR_NONE
:

883 
	`as£¹
(
çl£
);

884 
msg
 = 
	`¡rdup
("weird -‚oƒrror specified");

890 
	`dvmThrowExû±iÚ
(
exû±iÚName
, 
msg
);

891 
	`ä“
(
msg
);

892 
	}
}

905 #ifdeà
WITH_TAINT_TRACKING


906 
	$dvmIÁ”´‘
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
JV®ue
* 
pResuÉ
, 
u4
* 
¹ašt
)

908 
	$dvmIÁ”´‘
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
JV®ue
* 
pResuÉ
)

911 
IÁ”pS‹
 
š‹½S‹
;

912 
boŞ
 
chªge
;

913 #ià
	`defšed
(
WITH_JIT
)

915 
	`dvmJ™ToIÁ”pNÜm®
();

916 
	`dvmJ™ToIÁ”pNoChaš
();

917 
	`dvmJ™ToIÁ”pPuÁ
();

918 
	`dvmJ™ToIÁ”pSšgËS‹p
();

919 
	`dvmJ™ToT¿ûS–eù
();

920 
	`dvmJ™ToP©chP»diùedChaš
();

926 
J™ToIÁ”pEÁr›s
 
j™ToIÁ”pEÁr›s
 = {

927 
dvmJ™ToIÁ”pNÜm®
,

928 
dvmJ™ToIÁ”pNoChaš
,

929 
dvmJ™ToIÁ”pPuÁ
,

930 
dvmJ™ToIÁ”pSšgËS‹p
,

931 
dvmJ™ToT¿ûS–eù
,

932 
dvmJ™ToP©chP»diùedChaš
,

937 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

938 
š‹½S‹
.
debugT¿ckedRefS¹
 =

939 
	`dvmReã»nûTabËEÁr›s
(&
£lf
->
š‹º®LoÿlRefTabË
);

941 #ià
	`defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

942 
š‹½S‹
.
debugIsM‘hodEÁry
 = 
Œue
;

944 #ià
	`defšed
(
WITH_JIT
)

945 
š‹½S‹
.
j™S‹
 = 
gDvmJ™
.
pJ™EÁryTabË
 ? 
kJ™NÜm®
 : 
kJ™Off
;

948 
š‹½S‹
.
j™ToIÁ”pEÁr›s
 = jitToInterpEntries;

955 
š‹½S‹
.
Ï¡Th»shF‹r
 = 0;

963 #ifdeà
WITH_TAINT_TRACKING


964 
š‹½S‹
.
¹ašt
.
g
 = 
TAINT_CLEAR
;

966 
š‹½S‹
.
m‘hod
 = method;

967 
š‹½S‹
.
å
 = (
u4
*è
£lf
->
curF¿me
;

968 
š‹½S‹
.
pc
 = 
m‘hod
->
š¢s
;

969 
š‹½S‹
.
’ŒyPošt
 = 
kIÁ”pEÁryIn¡r
;

971 ià(
	`dvmDebugg”OrProf”Aùive
())

972 
š‹½S‹
.
ÃxtMode
 = 
INTERP_DBG
;

974 
š‹½S‹
.
ÃxtMode
 = 
INTERP_STD
;

976 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

982 ià(
m‘hod
->
şazz
->
¡©us
 < 
CLASS_INITIALIZING
 ||

983 
m‘hod
->
şazz
->
¡©us
 =ğ
CLASS_ERROR
)

985 
	`LOGE
("ERROR:riedoƒxecute code in unprepared class '%s' (%d)\n",

986 
m‘hod
->
şazz
->
desütÜ
, m‘hod->şazz->
¡©us
);

987 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

988 
	`dvmAbÜt
();

991 
	`boŞ
 (*
	tIÁ”´‘”
)(
	tTh»ad
*, 
	tIÁ”pS‹
*);

992 
IÁ”´‘”
 
¡dIÁ”p
;

993 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeIÁ”pFa¡
)

994 
¡dIÁ”p
 = 
dvmM‹½Std
;

995 #ià
	`defšed
(
WITH_JIT
)

996 ià(
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
)

1001 
¡dIÁ”p
 = 
dvmM‹½Std
;

1004 
¡dIÁ”p
 = 
dvmIÁ”´‘Std
;

1006 
chªge
 = 
Œue
;

1007 
chªge
) {

1008 
š‹½S‹
.
ÃxtMode
) {

1009 
INTERP_STD
:

1010 
	`LOGVV
("th»adid=%d: iÁ”°STD\n", 
£lf
->
th»adId
);

1011 
chªge
 = (*
¡dIÁ”p
)(
£lf
, &
š‹½S‹
);

1013 #ià
	`defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
è|| defšed(
WITH_JIT
)

1014 
INTERP_DBG
:

1015 
	`LOGVV
("th»adid=%d: iÁ”°DBG\n", 
£lf
->
th»adId
);

1016 
chªge
 = 
	`dvmIÁ”´‘Dbg
(
£lf
, &
š‹½S‹
);

1020 
	`dvmAbÜt
();

1024 *
pResuÉ
 = 
š‹½S‹
.
»tv®
;

1025 #ifdeà
WITH_TAINT_TRACKING


1026 *
¹ašt
 = 
š‹½S‹
.¹ašt.
g
;

1028 
	}
}

	@interp/Interp.h

19 #iâdeà
_DALVIK_INTERP_INTERP


20 
	#_DALVIK_INTERP_INTERP


	)

26 #ifdeà
WITH_TAINT_TRACKING


27 
dvmIÁ”´‘
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
, 
JV®ue
* 
pResuÉ
, 
u4
* 
¹ašt
);

29 
dvmIÁ”´‘
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
, 
JV®ue
* 
pResuÉ
);

38 
dvmThrowV”ifiÿtiÚE¼Ü
(cÚ¡ 
M‘hod
* 
m‘hod
, 
kšd
, 
»f
);

43 
dvmIn™B»akpošts
();

44 
dvmAddB»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
);

45 
dvmCË¬B»akAddr
(
M‘hod
* 
m‘hod
, 
š¡rOff£t
);

46 
boŞ
 
dvmAddSšgËS‹p
(
Th»ad
* 
th»ad
, 
size
, 
d•th
);

47 
dvmCË¬SšgËS‹p
(
Th»ad
* 
th»ad
);

	@interp/InterpDefs.h

24 #iâdeà
_DALVIK_INTERP_DEFS


25 
	#_DALVIK_INTERP_DEFS


	)

27 #ifdeà
WITH_TAINT_TRACKING


28 
	~"š‹½/Tašt.h
"

35 
	eIÁ”pEÁry
 {

36 
	mkIÁ”pEÁryIn¡r
 = 0,

37 
	mkIÁ”pEÁryR‘uº
 = 1,

38 
	mkIÁ”pEÁryThrow
 = 2,

39 #ià
defšed
(
WITH_JIT
)

40 
	mkIÁ”pEÁryResume
 = 3,

42 } 
	tIÁ”pEÁry
;

44 #ià
defšed
(
WITH_JIT
)

72 
	sJ™ToIÁ”pEÁr›s
 {

73 *
	mdvmJ™ToIÁ”pNÜm®
;

74 *
	mdvmJ™ToIÁ”pNoChaš
;

75 *
	mdvmJ™ToIÁ”pPuÁ
;

76 *
	mdvmJ™ToIÁ”pSšgËS‹p
;

77 *
	mdvmJ™ToT¿ûS–eù
;

78 *
	mdvmJ™ToP©chP»diùedChaš
;

81 
	#JIT_TRACE_THRESH_FILTER_SIZE
 16

	)

88 
	sIÁ”pS‹
 {

93 cÚ¡ 
u2
* 
	mpc
;

94 
u4
* 
	må
;

96 
JV®ue
 
	m»tv®
;

97 #ifdeà
WITH_TAINT_TRACKING


98 
Tašt
 
	m¹ašt
;

101 cÚ¡ 
M‘hod
* 
	mm‘hod
;

107 
DvmDex
* 
	mm‘hodCÏssDex
;

108 
Th»ad
* 
	m£lf
;

111 * 
	mbaPŒ
;

117 cÚ¡ 
u1
* 
	mš‹½SckEnd
;

118 vŞ©* 
	mpS–fSu¥’dCouÁ
;

119 #ià
defšed
(
WITH_DEBUGGER
)

120 vŞ©
u1
* 
	mpDebugg”Aùive
;

122 #ià
defšed
(
WITH_PROFILER
)

123 vŞ©* 
	mpAùiveProf”s
;

131 
IÁ”pEÁry
 
	m’ŒyPošt
;

132 
	mÃxtMode
;

134 #ià
defšed
(
WITH_JIT
)

138 * 
	mpJ™ProfTabË
;

139 
J™S‹
 
	mj™S‹
;

140 * 
	mj™Resume
;

141 
u2
* 
	mj™ResumePC
;

144 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

145 
boŞ
 
	mdebugIsM‘hodEÁry
;

147 #ià
defšed
(
WITH_TRACKREF_CHECKS
)

148 
	mdebugT¿ckedRefS¹
;

151 #ià
defšed
(
WITH_JIT
)

152 
J™ToIÁ”pEÁr›s
 
	mj™ToIÁ”pEÁr›s
;

154 
	mcu¼T¿ûRun
;

155 
	mtÙ®T¿ûL’
;

156 cÚ¡ 
u2
* 
	mcu¼T¿ûH—d
;

157 cÚ¡ 
u2
* 
	mcu¼RunH—d
;

158 
	mcu¼RunL’
;

159 
	mÏ¡Th»shF‹r
;

160 cÚ¡ 
u2
* 
	mth»shF‹r
[
JIT_TRACE_THRESH_FILTER_SIZE
];

161 
J™T¿ûRun
 
	mŒaû
[
MAX_JIT_RUN_LEN
];

164 } 
	tIÁ”pS‹
;

169 
boŞ
 
dvmIÁ”´‘Dbg
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
);

170 
boŞ
 
dvmIÁ”´‘Std
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
);

171 
	#INTERP_STD
 0

	)

172 
	#INTERP_DBG
 1

	)

177 
boŞ
 
dvmM‹½Std
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
);

182 
Objeù
* 
dvmG‘ThisPŒ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
å
);

187 
dvmIÁ”pCheckT¿ckedRefs
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
,

188 
debugT¿ckedRefS¹
);

193 
s4
 
dvmIÁ”pHªdËPackedSw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, s4 
‹¡V®
);

194 
s4
 
dvmIÁ”pHªdËS·r£Sw™ch
(cÚ¡ 
u2
* 
sw™chD©a
, s4 
‹¡V®
);

199 
boŞ
 
dvmIÁ”pHªdËFlA¼ayD©a
(
A¼ayObjeù
* 
¬¿yObjeù
,

200 cÚ¡ 
u2
* 
¬¿yD©a
);

205 
M‘hod
* 
dvmIÁ”pFšdIÁ”çûM‘hod
(
CÏssObjeù
* 
thisCÏss
, 
u4
 
m‘hodIdx
,

206 cÚ¡ 
M‘hod
* 
m‘hod
, 
DvmDex
* 
m‘hodCÏssDex
);

212 
šlše
 
boŞ
 
	$dvmDebugg”OrProf”Aùive
()

214  
gDvm
.
debugg”Aùive


215 #ià
	`defšed
(
WITH_PROFILER
)

216 || 
gDvm
.
aùiveProf”s
 != 0

219 
	}
}

221 #ià
defšed
(
WITH_JIT
)

226 
šlše
 
boŞ
 
	$dvmJ™Debugg”OrProf”Aùive
(
j™S‹
)

228  
j™S‹
 !ğ
kJ™Off


229 #ià
	`defšed
(
WITH_PROFILER
)

230 || 
gDvm
.
aùiveProf”s
 != 0

232 ||
gDvm
.
debugg”Aùive
;

233 
	}
}

	@interp/Jit.c

16 #ifdeà
WITH_JIT


22 
	~"D®vik.h
"

23 
	~"J™.h
"

26 
	~"dexdump/OpCodeNames.h
"

27 
	~<uni¡d.h
>

28 
	~<±h»ad.h
>

29 
	~<sys/time.h
>

30 
	~<sigÇl.h
>

31 
	~"comp”/Comp”.h
"

32 
	~"comp”/Comp”Ut™y.h
"

33 
	~"comp”/Comp”IR.h
"

34 
	~<”ºo.h
>

36 
	$dvmJ™S¹up
()

38 
i
;

39 
boŞ
 
»s
 = 
Œue
;

42 
»s
 &ğ
	`dvmComp”S¹up
();

44 
	`dvmIn™Mu‹x
(&
gDvmJ™
.
bËLock
);

45 ià(
»s
 && 
gDvm
.
executiÚMode
 =ğ
kExecutiÚModeJ™
) {

46 
J™EÁry
 *
pJ™TabË
 = 
NULL
;

47 *
pJ™ProfTabË
 = 
NULL
;

48 
	`as£¹
(
gDvm
.
j™TabËSize
 &&

49 !(
gDvm
.
j™TabËSize
 & (
gDvmJ™
.jitTableSize - 1)));

50 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

51 
pJ™TabË
 = (
J™EÁry
*)

52 
	`ÿÎoc
(
gDvmJ™
.
j™TabËSize
, (*
pJ™TabË
));

53 ià(!
pJ™TabË
) {

54 
	`LOGE
("jitable‡llocation failed\n");

55 
»s
 = 
çl£
;

56 
dÚe
;

66 
pJ™ProfTabË
 = (*)
	`m®loc
(
JIT_PROF_SIZE
);

67 ià(!
pJ™ProfTabË
) {

68 
	`LOGE
("jit…rofable‡llocation failed\n");

69 
»s
 = 
çl£
;

70 
dÚe
;

72 
	`mem£t
(
pJ™ProfTabË
,0,
JIT_PROF_SIZE
);

73 
i
=0; i < 
gDvmJ™
.
j™TabËSize
; i++) {

74 
pJ™TabË
[
i
].
u
.
šfo
.
chaš
 = 
gDvmJ™
.
j™TabËSize
;

77 
	`as£¹
(
pJ™TabË
[0].
u
.
šfo
.
chaš
 =ğ
gDvm
.
maxJ™TabËEÁr›s
);

79 
dÚe
:

80 
gDvmJ™
.
pJ™EÁryTabË
 = 
pJ™TabË
;

81 
gDvmJ™
.
j™TabËMask
 = gDvmJ™.
j™TabËSize
 - 1;

82 
gDvmJ™
.
j™TabËEÁr›sU£d
 = 0;

83 
gDvmJ™
.
pProfTabËCİy
 = gDvmJ™.
pProfTabË
 = 
pJ™ProfTabË
;

84 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

86  
»s
;

87 
	}
}

93 
	$dvmJ™StİT¿n¦©iÚReque¡s
()

106 
gDvmJ™
.
pProfTabË
 = gDvmJ™.
pProfTabËCİy
 = 
NULL
;

107 
	}
}

109 #ià
defšed
(
EXIT_STATS
)

111 
	$dvmBumpNoChaš
()

113 
gDvm
.
j™NoChašEx™
++;

114 
	}
}

117 
	$dvmBumpNÜm®
()

119 
gDvm
.
j™NÜm®Ex™
++;

120 
	}
}

123 
	$dvmBumpPuÁ
(
äom
)

125 
gDvm
.
j™PuÁEx™
++;

126 
	}
}

130 
	$dvmJ™Sts
()

132 
i
;

133 
h™
;

134 
nÙ_h™
;

135 
chašs
;

136 ià(
gDvmJ™
.
pJ™EÁryTabË
) {

137 
i
=0, 
chašs
=
h™
=
nÙ_h™
=0;

138 
i
 < (è
gDvmJ™
.
j™TabËSize
;

139 
i
++) {

140 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
dPC
 != 0)

141 
h™
++;

143 
nÙ_h™
++;

144 ià(
gDvmJ™
.
pJ™EÁryTabË
[
i
].
u
.
šfo
.
chaš
 !ğgDvmJ™.
j™TabËSize
)

145 
chašs
++;

147 
	`LOGD
(

149 
h™
, 
nÙ_h™
 + h™, 
chašs
, 
gDvmJ™
.
comp”MaxQueued
,

150 
gDvmJ™
.
th»shŞd
, gDvmJ™.
blockšgMode
 ? "Blocking" : "Non-blocking");

151 #ià
	`defšed
(
EXIT_STATS
)

152 
	`LOGD
(

154 
gDvmJ™
.
addrLookupsFound
, gDvmJ™.
addrLookupsNÙFound
,

155 
gDvmJ™
.
noChašEx™
, gDvmJ™.
nÜm®Ex™
, gDvmJ™.
puÁEx™
);

157 
	`LOGD
("JIT: %d T¿n¦©iÚ chašs", 
gDvmJ™
.
Œª¦©iÚChašs
);

158 #ià
	`defšed
(
INVOKE_STATS
)

159 
	`LOGD
("JIT: Invoke: %d chainable, %d…red. chain, %d‚ative, "

161 
gDvmJ™
.
švokeChaš
, gDvmJ™.
švokeP»diùedChaš
,

162 
gDvmJ™
.
švokeN©ive
, gDvmJ™.
»tuºOp
);

164 ià(
gDvmJ™
.
´ofe
) {

165 
	`dvmComp”SÜtAndPrštT¿ûProfes
();

168 
	}
}

175 
	$dvmJ™Shutdown
()

178 
	`dvmComp”Shutdown
();

180 
	`dvmComp”DumpSts
();

182 
	`dvmDe¡royMu‹x
(&
gDvmJ™
.
bËLock
);

184 ià(
gDvmJ™
.
pJ™EÁryTabË
) {

185 
	`ä“
(
gDvmJ™
.
pJ™EÁryTabË
);

186 
gDvmJ™
.
pJ™EÁryTabË
 = 
NULL
;

189 ià(
gDvmJ™
.
pProfTabË
) {

190 
	`ä“
(
gDvmJ™
.
pProfTabË
);

191 
gDvmJ™
.
pProfTabË
 = 
NULL
;

193 
	}
}

211 
	$dvmCheckJ™
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
)

213 
æags
,
i
,
Ën
;

214 
sw™chIÁ”p
 = 
çl£
;

215 
debugOrProfe
 = (
gDvm
.
debugg”Aùive
 || 
£lf
->
su¥’dCouÁ


216 #ià
	`defšed
(
WITH_PROFILER
)

217 || 
gDvm
.
aùiveProf”s


221 
š‹½S‹
->
j™S‹
) {

222 * 
nİSŒ
;

223 
rg‘
;

224 
off£t
;

225 
DecodedIn¡ruùiÚ
 
decIn¢
;

226 
kJ™TS–eù
:

227 
	`dexDecodeIn¡ruùiÚ
(
gDvm
.
š¡rFÜm©
, 
pc
, &
decIn¢
);

228 #ià
	`defšed
(
SHOW_TRACE
)

229 
	`LOGD
("T¿ûG’:‡ddšg %s",
	`g‘OpcodeName
(
decIn¢
.
İCode
));

231 
æags
 = 
	`dexG‘In¡rFÏgs
(
gDvm
.
š¡rFÏgs
, 
decIn¢
.
İCode
);

232 
Ën
 = 
	`dexG‘In¡rOrTabËWidthAbs
(
gDvm
.
š¡rWidth
, 
pc
);

233 
off£t
 = 
pc
 - 
š‹½S‹
->
m‘hod
->
š¢s
;

234 ià(
pc
 !ğ
š‹½S‹
->
cu¼RunH—d
 + iÁ”pS‹->
cu¼RunL’
) {

235 
cu¼T¿ûRun
;

237 
cu¼T¿ûRun
 = ++
š‹½S‹
->currTraceRun;

238 
š‹½S‹
->
cu¼RunL’
 = 0;

239 
š‹½S‹
->
cu¼RunH—d
 = (
u2
*)
pc
;

240 
š‹½S‹
->
Œaû
[
cu¼T¿ûRun
].
äag
.
¡¬tOff£t
 = 
off£t
;

241 
š‹½S‹
->
Œaû
[
cu¼T¿ûRun
].
äag
.
numIn¡s
 = 0;

242 
š‹½S‹
->
Œaû
[
cu¼T¿ûRun
].
äag
.
runEnd
 = 
çl£
;

243 
š‹½S‹
->
Œaû
[
cu¼T¿ûRun
].
äag
.
hšt
 = 
kJ™HštNÚe
;

245 
š‹½S‹
->
Œaû
[š‹½S‹->
cu¼T¿ûRun
].
äag
.
numIn¡s
++;

246 
š‹½S‹
->
tÙ®T¿ûL’
++;

247 
š‹½S‹
->
cu¼RunL’
 +ğ
Ën
;

248 iàĞ((
æags
 & 
kIn¡rUncÚd™iÚ®
) == 0) &&

250 (
decIn¢
.
İCode
 !ğ
OP_INVOKE_DIRECT_EMPTY
) &&

251 ((
æags
 & (
kIn¡rCªB¿nch
 |

252 
kIn¡rCªSw™ch
 |

253 
kIn¡rCªR‘uº
 |

254 
kIn¡rInvoke
)) != 0)) {

255 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùEnd
;

256 #ià
	`defšed
(
SHOW_TRACE
)

257 
	`LOGD
("TraceGen:ƒnding on %s, basic blockƒnd",

258 
	`g‘OpcodeName
(
decIn¢
.
İCode
));

261 ià(
decIn¢
.
İCode
 =ğ
OP_THROW
) {

262 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùEnd
;

264 ià(
š‹½S‹
->
tÙ®T¿ûL’
 >ğ
JIT_MAX_TRACE_LEN
) {

265 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùEnd
;

267 ià(
debugOrProfe
) {

268 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùAbÜt
;

269 
sw™chIÁ”p
 = !
debugOrProfe
;

272 ià((
æags
 & 
kIn¡rCªR‘uº
) != kInstrCanReturn) {

276 
kJ™TS–eùEnd
:

278 ià(
š‹½S‹
->
tÙ®T¿ûL’
 == 0) {

279 
sw™chIÁ”p
 = !
debugOrProfe
;

282 
J™T¿ûDesütiÚ
* 
desc
 =

283 (
J™T¿ûDesütiÚ
*)
	`m®loc
((JitTraceDescription) +

284 (
J™T¿ûRun
è* (
š‹½S‹
->
cu¼T¿ûRun
+1));

285 ià(
desc
 =ğ
NULL
) {

286 
	`LOGE
("Out of memory inrace selection");

287 
	`dvmJ™StİT¿n¦©iÚReque¡s
();

288 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùAbÜt
;

289 
sw™chIÁ”p
 = !
debugOrProfe
;

292 
š‹½S‹
->
Œaû
[š‹½S‹->
cu¼T¿ûRun
].
äag
.
runEnd
 =

293 
Œue
;

294 
š‹½S‹
->
j™S‹
 = 
kJ™NÜm®
;

295 
desc
->
m‘hod
 = 
š‹½S‹
->method;

296 
	`memıy
((*)&(
desc
->
Œaû
[0]),

297 (*)&(
š‹½S‹
->
Œaû
[0]),

298 (
J™T¿ûRun
è* (
š‹½S‹
->
cu¼T¿ûRun
+1));

299 #ià
	`defšed
(
SHOW_TRACE
)

300 
	`LOGD
("TraceGen:race done,‡ddingo queue");

302 
	`dvmComp”WÜkEnqueue
(

303 
š‹½S‹
->
cu¼T¿ûH—d
,
kWÜkOrd”T¿û
,
desc
);

304 ià(
gDvmJ™
.
blockšgMode
) {

305 
	`dvmComp”D¿šQueue
();

307 
sw™chIÁ”p
 = !
debugOrProfe
;

310 
kJ™SšgËS‹p
:

311 
š‹½S‹
->
j™S‹
 = 
kJ™SšgËS‹pEnd
;

313 
kJ™SšgËS‹pEnd
:

314 
š‹½S‹
->
’ŒyPošt
 = 
kIÁ”pEÁryResume
;

315 
sw™chIÁ”p
 = !
debugOrProfe
;

317 
kJ™TS–eùAbÜt
:

318 #ià
	`defšed
(
SHOW_TRACE
)

319 
	`LOGD
("TraceGen:race‡bort");

321 
š‹½S‹
->
j™S‹
 = 
kJ™NÜm®
;

322 
sw™chIÁ”p
 = !
debugOrProfe
;

324 
kJ™NÜm®
:

325 
sw™chIÁ”p
 = !
debugOrProfe
;

328 
	`dvmAbÜt
();

330  
sw™chIÁ”p
;

331 
	}
}

333 
šlše
 
J™EÁry
 *
	$fšdJ™EÁry
(cÚ¡ 
u2
* 
pc
)

335 
idx
 = 
	`dvmJ™Hash
(
pc
);

338 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
pc
)

339  &
gDvmJ™
.
pJ™EÁryTabË
[
idx
];

341 
chašEndM¬k”
 = 
gDvmJ™
.
j™TabËSize
;

342 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) {

343 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

344 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
pc
)

345  &
gDvmJ™
.
pJ™EÁryTabË
[
idx
];

348  
NULL
;

349 
	}
}

351 
J™EÁry
 *
	$dvmFšdJ™EÁry
(cÚ¡ 
u2
* 
pc
)

353  
	`fšdJ™EÁry
(
pc
);

354 
	}
}

360 * 
	$dvmJ™G‘CodeAddr
(cÚ¡ 
u2
* 
dPC
)

362 
idx
 = 
	`dvmJ™Hash
(
dPC
);

365 ià(
gDvm
.
sumTh»adSu¥’dCouÁ
 > 0) {

366  
NULL
;

370 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 == dPC) {

371 #ià
	`defšed
(
EXIT_STATS
)

372 
gDvmJ™
.
addrLookupsFound
++;

374  
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
codeAdd»ss
;

376 
chašEndM¬k”
 = 
gDvmJ™
.
j™TabËSize
;

377 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) {

378 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

379 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 == dPC) {

380 #ià
	`defšed
(
EXIT_STATS
)

381 
gDvmJ™
.
addrLookupsFound
++;

383  
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
codeAdd»ss
;

387 #ià
	`defšed
(
EXIT_STATS
)

388 
gDvmJ™
.
addrLookupsNÙFound
++;

390  
NULL
;

391 
	}
}

397 
J™EÁry
 *
	$dvmJ™LookupAndAdd
(cÚ¡ 
u2
* 
dPC
)

399 
u4
 
chašEndM¬k”
 = 
gDvmJ™
.
j™TabËSize
;

400 
u4
 
idx
 = 
	`dvmJ™Hash
(
dPC
);

403 (
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) &&

404 (
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 != dPC)) {

405 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

408 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 != dPC) {

415 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

422 
	`MEM_BARRIER
();

423 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 !ğ
NULL
) {

424 
u4
 
´ev
;

425 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
u
.
šfo
.
chaš
 !ğ
chašEndM¬k”
) {

426 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 == dPC) {

428 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

429  &
gDvmJ™
.
pJ™EÁryTabË
[
idx
];

431 
idx
 = 
gDvmJ™
.
pJ™EÁryTabË
[idx].
u
.
šfo
.
chaš
;

435 
	`as£¹
(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 !ğ
NULL
);

437 
´ev
 = 
idx
;

438 
Œue
) {

439 
idx
++;

440 ià(
idx
 =ğ
chašEndM¬k”
)

441 
idx
 = 0;

442 ià((
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
NULL
) ||

443 (
idx
 =ğ
´ev
))

446 ià(
idx
 !ğ
´ev
) {

447 
J™EÁryInfoUniÚ
 
ŞdV®ue
;

448 
J™EÁryInfoUniÚ
 
ÃwV®ue
;

455 
ŞdV®ue
 = 
gDvmJ™
.
pJ™EÁryTabË
[
´ev
].
u
;

456 
ÃwV®ue
 = 
ŞdV®ue
;

457 
ÃwV®ue
.
šfo
.
chaš
 = 
idx
;

458 } !
	`ATOMIC_CMP_SWAP
(

459 &
gDvmJ™
.
pJ™EÁryTabË
[
´ev
].
u
.
šfoWÜd
,

460 
ŞdV®ue
.
šfoWÜd
, 
ÃwV®ue
.infoWord));

463 ià(
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 =ğ
NULL
) {

465 
gDvmJ™
.
pJ™EÁryTabË
[
idx
].
dPC
 = dPC;

466 
gDvmJ™
.
j™TabËEÁr›sU£d
++;

469 
idx
 = 
chašEndM¬k”
;

471 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

473  (
idx
 =ğ
chašEndM¬k”
è? 
NULL
 : &
gDvmJ™
.
pJ™EÁryTabË
[idx];

474 
	}
}

482 
	$dvmJ™S‘CodeAddr
(cÚ¡ 
u2
* 
dPC
, *
nPC
, 
J™In¡ruùiÚS‘Ty³
 
£t
) {

483 
J™EÁryInfoUniÚ
 
ŞdV®ue
;

484 
J™EÁryInfoUniÚ
 
ÃwV®ue
;

485 
J™EÁry
 *
j™EÁry
 = 
	`dvmJ™LookupAndAdd
(
dPC
);

486 
	`as£¹
(
j™EÁry
);

489 
ŞdV®ue
 = 
j™EÁry
->
u
;

490 
ÃwV®ue
 = 
ŞdV®ue
;

491 
ÃwV®ue
.
šfo
.
š¡ruùiÚS‘
 = 
£t
;

492 } !
	`ATOMIC_CMP_SWAP
(

493 &
j™EÁry
->
u
.
šfoWÜd
,

494 
ŞdV®ue
.
šfoWÜd
, 
ÃwV®ue
.infoWord));

495 
j™EÁry
->
codeAdd»ss
 = 
nPC
;

496 
	}
}

505 
boŞ
 
	$dvmJ™CheckT¿ûReque¡
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
)

507 
boŞ
 
»s
 = 
çl£
;

508 
i
;

509 ià(
gDvmJ™
.
pJ™EÁryTabË
 !ğ
NULL
) {

511 
i
=0; i< 
JIT_TRACE_THRESH_FILTER_SIZE
; i++) {

512 ià(
š‹½S‹
->
pc
 =ğš‹½S‹->
th»shF‹r
[
i
]) {

516 ià(
i
 =ğ
JIT_TRACE_THRESH_FILTER_SIZE
) {

521 
i
 = 
	`¿nd
(è% 
JIT_TRACE_THRESH_FILTER_SIZE
;

522 
š‹½S‹
->
th»shF‹r
[
i
] = iÁ”pS‹->
pc
;

523 
»s
 = 
Œue
;

529 iàĞ
»s
 || (
gDvmJ™
.
comp”QueueL’gth
 >ğgDvmJ™.
comp”HighW©”
) ||

530 
gDvm
.
debugg”Aùive
 || 
£lf
->
su¥’dCouÁ


531 #ià
	`defšed
(
WITH_PROFILER
)

532 || 
gDvm
.
aùiveProf”s


535 ià(
š‹½S‹
->
j™S‹
 !ğ
kJ™Off
) {

536 
š‹½S‹
->
j™S‹
 = 
kJ™NÜm®
;

538 } ià(
š‹½S‹
->
j™S‹
 =ğ
kJ™TS–eùReque¡
) {

539 
J™EÁry
 *
¦Ù
 = 
	`dvmJ™LookupAndAdd
(
š‹½S‹
->
pc
);

540 ià(
¦Ù
 =ğ
NULL
) {

547 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùAbÜt
;

548 
	`LOGD
("JIT: JitTable full, disabling…rofiling");

549 
	`dvmJ™StİT¿n¦©iÚReque¡s
();

550 } ià(
¦Ù
->
u
.
šfo
.
ŒaûReque¡ed
) {

552 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eùAbÜt
;

555 
J™EÁryInfoUniÚ
 
ŞdV®ue
;

556 
J™EÁryInfoUniÚ
 
ÃwV®ue
;

558 
ŞdV®ue
 = 
¦Ù
->
u
;

559 
ÃwV®ue
 = 
ŞdV®ue
;

560 
ÃwV®ue
.
šfo
.
ŒaûReque¡ed
 = 
Œue
;

561 } !
	`ATOMIC_CMP_SWAP
Ğ&
¦Ù
->
u
.
šfoWÜd
,

562 
ŞdV®ue
.
šfoWÜd
, 
ÃwV®ue
.infoWord));

565 
š‹½S‹
->
j™S‹
) {

566 
kJ™TS–eùReque¡
:

567 
š‹½S‹
->
j™S‹
 = 
kJ™TS–eù
;

568 
š‹½S‹
->
cu¼T¿ûH—d
 = iÁ”pS‹->
pc
;

569 
š‹½S‹
->
cu¼T¿ûRun
 = 0;

570 
š‹½S‹
->
tÙ®T¿ûL’
 = 0;

571 
š‹½S‹
->
cu¼RunH—d
 = iÁ”pS‹->
pc
;

572 
š‹½S‹
->
cu¼RunL’
 = 0;

573 
š‹½S‹
->
Œaû
[0].
äag
.
¡¬tOff£t
 =

574 
š‹½S‹
->
pc
 - iÁ”pS‹->
m‘hod
->
š¢s
;

575 
š‹½S‹
->
Œaû
[0].
äag
.
numIn¡s
 = 0;

576 
š‹½S‹
->
Œaû
[0].
äag
.
runEnd
 = 
çl£
;

577 
š‹½S‹
->
Œaû
[0].
äag
.
hšt
 = 
kJ™HštNÚe
;

579 
kJ™TS–eù
:

580 
kJ™TS–eùAbÜt
:

581 
»s
 = 
Œue
;

582 
kJ™SšgËS‹p
:

583 
kJ™SšgËS‹pEnd
:

584 
kJ™Off
:

585 
kJ™NÜm®
:

588 
	`dvmAbÜt
();

591  
»s
;

592 
	}
}

598 
boŞ
 
	$dvmJ™ResizeJ™TabË
Ğ
size
 )

600 
J™EÁry
 *
pNewTabË
;

601 
J™EÁry
 *
pOldTabË
;

602 
u4
 
ÃwMask
;

603 
ŞdSize
;

604 
i
;

606 
	`as£¹
(
gDvm
.
pJ™EÁryTabË
 !ğ
NULL
);

607 
	`as£¹
(
size
 && !(size & (size - 1)));

609 
	`LOGD
("J™:„esizšg J™TabË from %dØ%d", 
gDvmJ™
.
j™TabËSize
, 
size
);

611 
ÃwMask
 = 
size
 - 1;

613 ià(
size
 <ğ
gDvmJ™
.
j™TabËSize
) {

614  
Œue
;

617 
pNewTabË
 = (
J™EÁry
*)
	`ÿÎoc
(
size
, (*pNewTable));

618 ià(
pNewTabË
 =ğ
NULL
) {

619  
Œue
;

621 
i
=0; i< 
size
; i++) {

622 
pNewTabË
[
i
].
u
.
šfo
.
chaš
 = 
size
;

626 
	`dvmSu¥’dAÎTh»ads
(
SUSPEND_FOR_JIT
);

628 
pOldTabË
 = 
gDvmJ™
.
pJ™EÁryTabË
;

629 
ŞdSize
 = 
gDvmJ™
.
j™TabËSize
;

631 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

632 
gDvmJ™
.
pJ™EÁryTabË
 = 
pNewTabË
;

633 
gDvmJ™
.
j™TabËSize
 = 
size
;

634 
gDvmJ™
.
j™TabËMask
 = 
size
 - 1;

635 
gDvmJ™
.
j™TabËEÁr›sU£d
 = 0;

636 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

638 
i
=0; i < 
ŞdSize
; i++) {

639 ià(
pOldTabË
[
i
].
dPC
) {

640 
J™EÁry
 *
p
;

641 
u2
 
chaš
;

642 
p
 = 
	`dvmJ™LookupAndAdd
(
pOldTabË
[
i
].
dPC
);

643 
p
->
dPC
 = 
pOldTabË
[
i
].dPC;

648 ià(
pOldTabË
[
i
].
codeAdd»ss
 !ğ
NULL
) {

649 
p
->
codeAdd»ss
 = 
pOldTabË
[
i
].codeAddress;

652 
	`dvmLockMu‹x
(&
gDvmJ™
.
bËLock
);

653 
chaš
 = 
p
->
u
.
šfo
.chain;

654 
p
->
u
 = 
pOldTabË
[
i
].u;

655 
p
->
u
.
šfo
.
chaš
 = chain;

656 
	`dvmUÆockMu‹x
(&
gDvmJ™
.
bËLock
);

660 
	`ä“
(
pOldTabË
);

663 
	`dvmResumeAÎTh»ads
(
SUSPEND_FOR_JIT
);

665  
çl£
;

666 
	}
}

672 
s8
 
	$dvmJ™d2l
(
d
)

674 cÚ¡ 
kMaxLÚg
 = ()(
s8
)0x7fffffffffffffffULL;

675 cÚ¡ 
kMšLÚg
 = ()(
s8
)0x8000000000000000ULL;

676 ià(
d
 >ğ
kMaxLÚg
)

677  (
s8
)0x7fffffffffffffffULL;

678 ià(
d
 <ğ
kMšLÚg
)

679  (
s8
)0x8000000000000000ULL;

680 ià(
d
 != d)

683  (
s8
)
d
;

684 
	}
}

686 
s8
 
	$dvmJ™f2l
(
f
)

688 cÚ¡ 
kMaxLÚg
 = ()(
s8
)0x7fffffffffffffffULL;

689 cÚ¡ 
kMšLÚg
 = ()(
s8
)0x8000000000000000ULL;

690 ià(
f
 >ğ
kMaxLÚg
)

691  (
s8
)0x7fffffffffffffffULL;

692 ià(
f
 <ğ
kMšLÚg
)

693  (
s8
)0x8000000000000000ULL;

694 ià(
f
 != f)

697  (
s8
)
f
;

698 
	}
}

	@interp/Jit.h

19 #iâdeà
_DALVIK_INTERP_JIT


20 
	#_DALVIK_INTERP_JIT


	)

22 
	~"IÁ”pDefs.h
"

24 
	#JIT_PROF_SIZE
 512

	)

26 
	#JIT_MAX_TRACE_LEN
 100

	)

32 
šlše
 
u4
 
	$dvmJ™HashMask
ĞcÚ¡ 
u2
* 
p
, 
u4
 
mask
 ) {

33  ((((
u4
)
p
>>12)^(u4í)>>1è& (
mask
);

34 
	}
}

36 
šlše
 
u4
 
	$dvmJ™Hash
ĞcÚ¡ 
u2
* 
p
 ) {

37  
	`dvmJ™HashMask
Ğ
p
, 
gDvmJ™
.
j™TabËMask
 );

38 
	}
}

46 
	sJ™EÁryInfo
 {

47 
	mŒaûReque¡ed
:1;

48 
	misM‘hodEÁry
:1;

49 
	mšlšeCªdid©e
:1;

50 
	m´ofeEÇbËd
:1;

51 
J™In¡ruùiÚS‘Ty³
 
	mš¡ruùiÚS‘
:4;

52 
	munu£d
:8;

53 
u2
 
	mchaš
;

54 } 
	tJ™EÁryInfo
;

56 
	uJ™EÁryInfoUniÚ
 {

57 
J™EÁryInfo
 
	mšfo
;

58 vŞ©
	mšfoWÜd
;

59 } 
	tJ™EÁryInfoUniÚ
;

61 
	sJ™EÁry
 {

62 
J™EÁryInfoUniÚ
 
	mu
;

63 
u2
 
	mchaš
;

64 cÚ¡ 
u2
* 
	mdPC
;

65 * 
	mcodeAdd»ss
;

66 } 
	tJ™EÁry
;

68 
dvmJ™S¹up
();

69 
dvmJ™Shutdown
();

70 
dvmCheckJ™
(cÚ¡ 
u2
* 
pc
, 
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
);

71 * 
dvmJ™G‘CodeAddr
(cÚ¡ 
u2
* 
dPC
);

72 
boŞ
 
dvmJ™CheckT¿ûReque¡
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
);

73 
dvmJ™StİT¿n¦©iÚReque¡s
();

74 
dvmJ™Sts
();

75 
boŞ
 
dvmJ™ResizeJ™TabË
(
size
);

76 
J™EÁry
 *
dvmFšdJ™EÁry
(cÚ¡ 
u2
* 
pc
);

77 
s8
 
dvmJ™d2l
(
d
);

78 
s8
 
dvmJ™f2l
(
f
);

79 
dvmJ™S‘CodeAddr
(cÚ¡ 
u2
* 
dPC
, *
nPC
, 
J™In¡ruùiÚS‘Ty³
 
£t
);

	@interp/Stack.c

21 
	~"D®vik.h
"

22 
	~"jni.h
"

24 
	~<¡dlib.h
>

25 
	~<¡d¬g.h
>

33 
boŞ
 
	$dvmIn™IÁ”pSck
(
Th»ad
* 
th»ad
, 
¡ackSize
)

35 
	`as£¹
(
th»ad
->
š‹½SckS¹
 !ğ
NULL
);

37 
	`as£¹
(
th»ad
->
curF¿me
 =ğ
NULL
);

39  
Œue
;

40 
	}
}

58 
boŞ
 
	$dvmPushIÁ”pF¿me
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

60 
SckSaveA»a
* 
§veBlock
;

61 
SckSaveA»a
* 
b»akSaveBlock
;

62 
¡ackReq
;

63 
u1
* 
¡ackPŒ
;

65 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

66 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hod
));

68 #ifdeà
WITH_TAINT_TRACKING


70 
¡ackReq
 = 
m‘hod
->
»gi¡”sSize
 * 8 + 4

71 + (
SckSaveA»a
) * 2

72 + 
m‘hod
->
outsSize
 * 8 + 4;

74 
¡ackReq
 = 
m‘hod
->
»gi¡”sSize
 * 4

75 + (
SckSaveA»a
) * 2

76 + 
m‘hod
->
outsSize
 * 4;

79 ià(
£lf
->
curF¿me
 !ğ
NULL
)

80 
¡ackPŒ
 = (
u1
*è
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

82 
¡ackPŒ
 = 
£lf
->
š‹½SckS¹
;

84 ià(
¡ackPŒ
 - 
¡ackReq
 < 
£lf
->
š‹½SckEnd
) {

86 
	`LOGW
("Stack overflow on callo interp "

88 
¡ackReq
, 
£lf
->
š‹½SckS¹
, s–f->
curF¿me
,

89 
£lf
->
š‹½SckSize
, 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

90 
	`dvmHªdËSckOv”æow
(
£lf
);

91 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

92  
çl£
;

99 
¡ackPŒ
 -ğ(
SckSaveA»a
);

100 
b»akSaveBlock
 = (
SckSaveA»a
*)
¡ackPŒ
;

101 #ifdeà
WITH_TAINT_TRACKING


103 
¡ackPŒ
 -ğ
m‘hod
->
»gi¡”sSize
 * 8 + 4 + (
SckSaveA»a
);

105 
¡ackPŒ
 -ğ
m‘hod
->
»gi¡”sSize
 * 4 + (
SckSaveA»a
);

107 
§veBlock
 = (
SckSaveA»a
*è
¡ackPŒ
;

109 #ià!
	`defšed
(
NDEBUG
è&& !defšed(
PAD_SAVE_AREA
)

111 #ifdeà
WITH_TAINT_TRACKING


112 
	`mem£t
(
¡ackPŒ
 - (
m‘hod
->
outsSize
*8+4), 0xaf, 
¡ackReq
);

114 
	`mem£t
(
¡ackPŒ
 - (
m‘hod
->
outsSize
*4), 0xaf, 
¡ackReq
);

117 #ifdeà
EASY_GDB


118 
b»akSaveBlock
->
´evSave
 = 
	`FP_FROM_SAVEAREA
(
£lf
->
curF¿me
);

119 
§veBlock
->
´evSave
 = 
b»akSaveBlock
;

122 
b»akSaveBlock
->
´evF¿me
 = 
£lf
->
curF¿me
;

123 
b»akSaveBlock
->
§vedPc
 = 
NULL
;

124 
b»akSaveBlock
->
xŒa
.
loÿlRefCook›
 = 0;

125 
b»akSaveBlock
->
m‘hod
 = 
NULL
;

126 
§veBlock
->
´evF¿me
 = 
	`FP_FROM_SAVEAREA
(
b»akSaveBlock
);

127 
§veBlock
->
§vedPc
 = 
NULL
;

128 
§veBlock
->
xŒa
.
cu¼’tPc
 = 
NULL
;

129 
§veBlock
->
m‘hod
 = method;

131 
	`LOGVV
("PUSH frame: old=%p‚ew=%p (size=%d)\n",

132 
£lf
->
curF¿me
, 
	`FP_FROM_SAVEAREA
(
§veBlock
),

133 (
u1
*)
£lf
->
curF¿me
 - (u1*)
	`FP_FROM_SAVEAREA
(
§veBlock
));

135 
£lf
->
curF¿me
 = 
	`FP_FROM_SAVEAREA
(
§veBlock
);

137  
Œue
;

138 
	}
}

149 
boŞ
 
	$dvmPushJNIF¿me
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

151 
SckSaveA»a
* 
§veBlock
;

152 
SckSaveA»a
* 
b»akSaveBlock
;

153 
¡ackReq
;

154 
u1
* 
¡ackPŒ
;

156 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
m‘hod
));

158 #ifdeà
WITH_TAINT_TRACKING


160 
¡ackReq
 = 
m‘hod
->
»gi¡”sSize
 * 8 + 4

161 + (
SckSaveA»a
) * 2;

163 
¡ackReq
 = 
m‘hod
->
»gi¡”sSize
 * 4

164 + (
SckSaveA»a
) * 2;

167 ià(
£lf
->
curF¿me
 !ğ
NULL
)

168 
¡ackPŒ
 = (
u1
*è
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

170 
¡ackPŒ
 = 
£lf
->
š‹½SckS¹
;

172 ià(
¡ackPŒ
 - 
¡ackReq
 < 
£lf
->
š‹½SckEnd
) {

174 
	`LOGW
("Stack overflow on callo‚ative "

176 
¡ackReq
, 
£lf
->
š‹½SckS¹
, s–f->
curF¿me
,

177 
£lf
->
š‹½SckSize
, 
m‘hod
->
Çme
);

178 
	`dvmHªdËSckOv”æow
(
£lf
);

179 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

180  
çl£
;

188 
¡ackPŒ
 -ğ(
SckSaveA»a
);

189 
b»akSaveBlock
 = (
SckSaveA»a
*)
¡ackPŒ
;

190 #ifdeà
WITH_TAINT_TRACKING


192 
¡ackPŒ
 -ğ
m‘hod
->
»gi¡”sSize
 * 8 + 4 + (
SckSaveA»a
);

194 
¡ackPŒ
 -ğ
m‘hod
->
»gi¡”sSize
 * 4 + (
SckSaveA»a
);

196 
§veBlock
 = (
SckSaveA»a
*è
¡ackPŒ
;

198 #ià!
	`defšed
(
NDEBUG
è&& !defšed(
PAD_SAVE_AREA
)

200 
	`mem£t
(
¡ackPŒ
, 0xaf, 
¡ackReq
);

202 #ifdeà
EASY_GDB


203 ià(
£lf
->
curF¿me
 =ğ
NULL
)

204 
b»akSaveBlock
->
´evSave
 = 
NULL
;

206 
b»akSaveBlock
->
´evSave
 = 
	`FP_FROM_SAVEAREA
(
£lf
->
curF¿me
);

207 
§veBlock
->
´evSave
 = 
b»akSaveBlock
;

210 
b»akSaveBlock
->
´evF¿me
 = 
£lf
->
curF¿me
;

211 
b»akSaveBlock
->
§vedPc
 = 
NULL
;

212 
b»akSaveBlock
->
xŒa
.
loÿlRefCook›
 = 0;

213 
b»akSaveBlock
->
m‘hod
 = 
NULL
;

214 
§veBlock
->
´evF¿me
 = 
	`FP_FROM_SAVEAREA
(
b»akSaveBlock
);

215 
§veBlock
->
§vedPc
 = 
NULL
;

216 #ifdeà
USE_INDIRECT_REF


217 
§veBlock
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

219 
§veBlock
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

221 
§veBlock
->
m‘hod
 = method;

223 
	`LOGVV
("PUSH JNI frame: old=%p‚ew=%p (size=%d)\n",

224 
£lf
->
curF¿me
, 
	`FP_FROM_SAVEAREA
(
§veBlock
),

225 (
u1
*)
£lf
->
curF¿me
 - (u1*)
	`FP_FROM_SAVEAREA
(
§veBlock
));

227 
£lf
->
curF¿me
 = 
	`FP_FROM_SAVEAREA
(
§veBlock
);

229  
Œue
;

230 
	}
}

238 
boŞ
 
	$dvmPushLoÿlF¿me
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
)

240 
SckSaveA»a
* 
§veBlock
;

241 
¡ackReq
;

242 
u1
* 
¡ackPŒ
;

244 
	`as£¹
(
	`dvmIsN©iveM‘hod
(
m‘hod
));

246 
¡ackReq
 = (
SckSaveA»a
);

248 
	`as£¹
(
£lf
->
curF¿me
 !ğ
NULL
);

249 
¡ackPŒ
 = (
u1
*è
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

251 ià(
¡ackPŒ
 - 
¡ackReq
 < 
£lf
->
š‹½SckEnd
) {

253 
	`LOGW
("Stack overflow on PushLocal "

255 
¡ackReq
, 
£lf
->
š‹½SckS¹
, s–f->
curF¿me
,

256 
£lf
->
š‹½SckSize
, 
m‘hod
->
Çme
);

257 
	`dvmHªdËSckOv”æow
(
£lf
);

258 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

259  
çl£
;

266 
¡ackPŒ
 -ğ(
SckSaveA»a
);

267 
§veBlock
 = (
SckSaveA»a
*è
¡ackPŒ
;

269 #ià!
	`defšed
(
NDEBUG
è&& !defšed(
PAD_SAVE_AREA
)

271 
	`mem£t
(
¡ackPŒ
, 0xaf, 
¡ackReq
);

273 #ifdeà
EASY_GDB


274 
§veBlock
->
´evSave
 = 
	`FP_FROM_SAVEAREA
(
£lf
->
curF¿me
);

277 
§veBlock
->
´evF¿me
 = 
£lf
->
curF¿me
;

278 
§veBlock
->
§vedPc
 = 
NULL
;

279 #ifdeà
USE_INDIRECT_REF


280 
§veBlock
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

282 
§veBlock
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

284 
§veBlock
->
m‘hod
 = method;

286 
	`LOGVV
("PUSH JNI†ocal frame: old=%p‚ew=%p (size=%d)\n",

287 
£lf
->
curF¿me
, 
	`FP_FROM_SAVEAREA
(
§veBlock
),

288 (
u1
*)
£lf
->
curF¿me
 - (u1*)
	`FP_FROM_SAVEAREA
(
§veBlock
));

290 
£lf
->
curF¿me
 = 
	`FP_FROM_SAVEAREA
(
§veBlock
);

292  
Œue
;

293 
	}
}

301 
boŞ
 
	$dvmPİLoÿlF¿me
(
Th»ad
* 
£lf
)

303 
SckSaveA»a
* 
§veBlock
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

305 
	`as£¹
(!
	`dvmIsB»akF¿me
(
£lf
->
curF¿me
));

306 ià(
§veBlock
->
m‘hod
 !ğ
	`SAVEAREA_FROM_FP
(§veBlock->
´evF¿me
)->method) {

311 
	`as£¹
(
	`dvmIsB»akF¿me
(
§veBlock
->
´evF¿me
) ||

312 !
	`dvmIsN©iveM‘hod
(

313 
	`SAVEAREA_FROM_FP
(
§veBlock
->
´evF¿me
)->
m‘hod
));

314  
çl£
;

317 
	`LOGVV
("POP JNI†ocal frame:„emoving %s,‚ow %s\n",

318 
§veBlock
->
m‘hod
->
Çme
,

319 
	`SAVEAREA_FROM_FP
(
§veBlock
->
´evF¿me
)->
m‘hod
->
Çme
);

320 
	`dvmPİJniLoÿls
(
£lf
, 
§veBlock
);

321 
£lf
->
curF¿me
 = 
§veBlock
->
´evF¿me
;

323  
Œue
;

324 
	}
}

335 
boŞ
 
	$dvmPİF¿me
(
Th»ad
* 
£lf
)

337 
SckSaveA»a
* 
§veBlock
;

339 ià(
£lf
->
curF¿me
 =ğ
NULL
)

340  
çl£
;

342 
§veBlock
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

343 
	`as£¹
(!
	`dvmIsB»akF¿me
(
£lf
->
curF¿me
));

349 
§veBlock
->
´evF¿me
 !ğ
NULL
 && saveBlock->
m‘hod
 != NULL) {

352 ià(
	`dvmIsN©iveM‘hod
(
§veBlock
->
m‘hod
)) {

353 
	`LOGVV
("Popping JNI stack frame for %s.%s%s\n",

354 
§veBlock
->
m‘hod
->
şazz
->
desütÜ
,

355 
§veBlock
->
m‘hod
->
Çme
,

356 (
	`SAVEAREA_FROM_FP
(
§veBlock
->
´evF¿me
)->
m‘hod
 =ğ
NULL
) ?

358 
	`as£¹
(
§veBlock
->
xŒa
.
loÿlRefCook›
 != 0);

362 
	`dvmPİJniLoÿls
(
£lf
, 
§veBlock
);

365 
§veBlock
 = 
	`SAVEAREA_FROM_FP
(§veBlock->
´evF¿me
);

367 ià(
§veBlock
->
m‘hod
 !ğ
NULL
) {

368 
	`LOGE
("PopFrame missedhe break\n");

369 
	`as£¹
(
çl£
);

370 
	`dvmAbÜt
();

373 
	`LOGVV
("POP frame: cur=%p‚ew=%p\n",

374 
£lf
->
curF¿me
, 
§veBlock
->
´evF¿me
);

376 
£lf
->
curF¿me
 = 
§veBlock
->
´evF¿me
;

377  
Œue
;

378 
	}
}

385 
CÏssObjeù
* 
	$ÿÎP»p
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

386 
boŞ
 
checkAcûss
)

388 
CÏssObjeù
* 
şazz
;

390 #iâdeà
NDEBUG


391 ià(
£lf
->
¡©us
 !ğ
THREAD_RUNNING
) {

392 
	`LOGW
("threadid=%d: status=%d on callo %s.%s -\n",

393 
£lf
->
th»adId
, s–f->
¡©us
,

394 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

398 
	`as£¹
(
£lf
 !ğ
NULL
);

399 
	`as£¹
(
m‘hod
 !ğ
NULL
);

401 ià(
obj
 !ğ
NULL
)

402 
şazz
 = 
obj
->clazz;

404 
şazz
 = 
m‘hod
->clazz;

406 
	`IF_LOGVV
() {

407 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

408 
	`LOGVV
("th»ad=%d‚©ivcodÿÎšg %s.% %s\n", 
£lf
->
th»adId
,

409 
şazz
->
desütÜ
, 
m‘hod
->
Çme
, 
desc
);

410 
	`ä“
(
desc
);

413 ià(
checkAcûss
) {

415 ià(!
	`dvmCheckM‘hodAcûss
(
	`dvmG‘C®Ër2CÏss
(
£lf
->
curF¿me
),

416 
m‘hod
))

419 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessException;",

421  
NULL
;

431 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

433 ià(!
	`dvmPushJNIF¿me
(
£lf
, 
m‘hod
)) {

434 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

435  
NULL
;

439 ià(!
	`dvmPushIÁ”pF¿me
(
£lf
, 
m‘hod
)) {

440 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

441  
NULL
;

445  
şazz
;

446 
	}
}

455 
	$dvmC®lM‘hod
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

456 
JV®ue
* 
pResuÉ
, ...)

458 
JV®ue
 
»suÉ
;

460 
va_li¡
 
¬gs
;

461 
	`va_¡¬t
(
¬gs
, 
pResuÉ
);

462 
	`dvmC®lM‘hodV
(
£lf
, 
m‘hod
, 
obj
, 
çl£
, 
pResuÉ
, 
¬gs
);

463 
	`va_’d
(
¬gs
);

464 
	}
}

475 
	$dvmC®lM‘hodV
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

476 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, 
va_li¡
 
¬gs
)

478 cÚ¡ * 
desc
 = &(
m‘hod
->
shÜty
[1]);

479 
v”ifyCouÁ
 = 0;

480 
CÏssObjeù
* 
şazz
;

481 
u4
* 
šs
;

483 #ifdeà
WITH_TAINT_TRACKING


484 
¦Ù_út
 = 0;

485 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hod
);

488 
şazz
 = 
	`ÿÎP»p
(
£lf
, 
m‘hod
, 
obj
, 
çl£
);

489 ià(
şazz
 =ğ
NULL
)

493 #ifdeà
WITH_TAINT_TRACKING


494 ià(
ÇtiveT¬g‘
) {

496 
šs
 = ((
u4
*)
£lf
->
curF¿me
è+ (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

499 
šs
 = ((
u4
*)
£lf
->
curF¿me
) +

500 ((
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
) << 1);

503 
šs
 = ((
u4
*)
£lf
->
curF¿me
è+ (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

509 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

510 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


511 
	`as£¹
(
obj
 !ğ
NULL
 && 
	`dvmIsV®idObjeù
(obj));

513 *
šs
++ = (
u4
è
obj
;

514 #ifdeà
WITH_TAINT_TRACKING


515 ià(!
ÇtiveT¬g‘
) {

516 *
šs
++ = 
TAINT_CLEAR
;

518 
¦Ù_út
++;

520 
v”ifyCouÁ
++;

523 
JNIEnv
* 
’v
 = 
£lf
->
jniEnv
;

524 *
desc
 != '\0') {

525 *(
desc
++)) {

527 
u8
 
v®
 = 
	`va_¬g
(
¬gs
, u8);

528 
	`memıy
(
šs
, &
v®
, 8);

529 #ifdeà
WITH_TAINT_TRACKING


530 ià(
ÇtiveT¬g‘
) {

531 
šs
 += 2;

533 
šs
[2] = ins[1];

534 
šs
[1] = 
TAINT_CLEAR
;

535 
šs
[3] = 
TAINT_CLEAR
;

536 
šs
 += 4;

538 
¦Ù_út
 += 2;

540 
šs
 += 2;

542 
v”ifyCouÁ
 += 2;

547 
f
 = (è
	`va_¬g
(
¬gs
, );

548 *
šs
++ = 
	`dvmFlßtToU4
(
f
);

549 #ifdeà
WITH_TAINT_TRACKING


550 ià(!
ÇtiveT¬g‘
) {

551 *
šs
++ = 
TAINT_CLEAR
;

553 
¦Ù_út
++;

555 
v”ifyCouÁ
++;

559 * 
¬gObj
 = 
	`va_¬g
(
¬gs
, *);

560 
	`as£¹
(
obj
 =ğ
NULL
 || 
	`dvmIsV®idObjeù
(obj));

561 ià(
äomJni
)

562 *
šs
++ = (
u4
è
	`dvmDecodeIndœeùRef
(
’v
, 
¬gObj
);

564 *
šs
++ = (
u4
è
¬gObj
;

565 #ifdeà
WITH_TAINT_TRACKING


566 ià(!
ÇtiveT¬g‘
) {

567 *
šs
++ = 
TAINT_CLEAR
;

569 
¦Ù_út
++;

571 
v”ifyCouÁ
++;

576 *
šs
++ = 
	`va_¬g
(
¬gs
, 
u4
);

577 #ifdeà
WITH_TAINT_TRACKING


578 ià(!
ÇtiveT¬g‘
) {

579 *
šs
++ = 
TAINT_CLEAR
;

581 
¦Ù_út
++;

583 
v”ifyCouÁ
++;

589 #ifdeà
WITH_TAINT_TRACKING


591 *
šs
++ = 
TAINT_CLEAR
;

593 
i
;

594 ià(
ÇtiveT¬g‘
) {

595 
i
 = 0; i < 
¦Ù_út
; i++) {

596 *
šs
++ = 
TAINT_CLEAR
;

602 #iâdeà
NDEBUG


603 ià(
v”ifyCouÁ
 !ğ
m‘hod
->
šsSize
) {

604 
	`LOGE
("GÙ vfycouÁ=%d insSize=%d fÜ %s.%s\n", 
v”ifyCouÁ
,

605 
m‘hod
->
šsSize
, 
şazz
->
desütÜ
, m‘hod->
Çme
);

606 
	`as£¹
(
çl£
);

607 
ba
;

613 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

614 #ifdeà
WITH_PROFILER


615 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

621 (*
m‘hod
->
ÇtiveFunc
)(
£lf
->
curF¿me
, 
pResuÉ
, method, self);

622 #ifdeà
WITH_PROFILER


623 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

626 #ifdeà
WITH_TAINT_TRACKING


627 
u4
 
¹ašt
;

628 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, 
pResuÉ
, &
¹ašt
);

630 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, 
pResuÉ
);

634 
ba
:

635 
	`dvmPİF¿me
(
£lf
);

636 
	}
}

651 
	$dvmC®lM‘hodA
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

652 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
jv®ue
* 
¬gs
)

654 cÚ¡ * 
desc
 = &(
m‘hod
->
shÜty
[1]);

655 
v”ifyCouÁ
 = 0;

656 
CÏssObjeù
* 
şazz
;

657 
u4
* 
šs
;

659 #ifdeà
WITH_TAINT_TRACKING


660 
¦Ù_út
 = 0;

661 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hod
);

664 
şazz
 = 
	`ÿÎP»p
(
£lf
, 
m‘hod
, 
obj
, 
çl£
);

665 ià(
şazz
 =ğ
NULL
)

669 #ifdeà
WITH_TAINT_TRACKING


670 ià(
ÇtiveT¬g‘
) {

672 
šs
 = ((
u4
*)
£lf
->
curF¿me
è+ (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

675 
šs
 = ((
u4
*)
£lf
->
curF¿me
) +

676 ((
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
) << 1);

679 
šs
 = ((
u4
*)
£lf
->
curF¿me
è+ (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

683 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

684 
	`as£¹
(
obj
 !ğ
NULL
);

685 *
šs
++ = (
u4
è
obj
;

686 #ifdeà
WITH_TAINT_TRACKING


687 ià(!
ÇtiveT¬g‘
) {

688 *
šs
++ = 
TAINT_CLEAR
;

690 
¦Ù_út
++;

692 
v”ifyCouÁ
++;

695 
JNIEnv
* 
’v
 = 
£lf
->
jniEnv
;

696 *
desc
 != '\0') {

697 *
desc
++) {

700 
	`memıy
(
šs
, &
¬gs
->
j
, 8);

701 #ifdeà
WITH_TAINT_TRACKING


702 ià(
ÇtiveT¬g‘
) {

703 
šs
 += 2;

705 
šs
[2] = ins[1];

706 
šs
[1] = 
TAINT_CLEAR
;

707 
šs
[3] = 
TAINT_CLEAR
;

708 
šs
 += 4;

710 
¦Ù_út
 += 2;

712 
šs
 += 2;

714 
v”ifyCouÁ
++;

717 ià(
äomJni
)

718 *
šs
++ = (
u4
è
	`dvmDecodeIndœeùRef
(
’v
, 
¬gs
->
l
);

720 *
šs
++ = (
u4
è
¬gs
->
l
;

721 #ifdeà
WITH_TAINT_TRACKING


722 ià(!
ÇtiveT¬g‘
) {

723 *
šs
++ = 
TAINT_CLEAR
;

725 
¦Ù_út
++;

730 *
šs
++ = 
¬gs
->
i
;

731 #ifdeà
WITH_TAINT_TRACKING


732 ià(!
ÇtiveT¬g‘
) {

733 *
šs
++ = 
TAINT_CLEAR
;

735 
¦Ù_út
++;

739 *
šs
++ = 
¬gs
->
s
;

740 #ifdeà
WITH_TAINT_TRACKING


741 ià(!
ÇtiveT¬g‘
) {

742 *
šs
++ = 
TAINT_CLEAR
;

744 
¦Ù_út
++;

748 *
šs
++ = 
¬gs
->
c
;

749 #ifdeà
WITH_TAINT_TRACKING


750 ià(!
ÇtiveT¬g‘
) {

751 *
šs
++ = 
TAINT_CLEAR
;

753 
¦Ù_út
++;

757 *
šs
++ = 
¬gs
->
b
;

758 #ifdeà
WITH_TAINT_TRACKING


759 ià(!
ÇtiveT¬g‘
) {

760 *
šs
++ = 
TAINT_CLEAR
;

762 
¦Ù_út
++;

766 *
šs
++ = 
¬gs
->
z
;

767 #ifdeà
WITH_TAINT_TRACKING


768 ià(!
ÇtiveT¬g‘
) {

769 *
šs
++ = 
TAINT_CLEAR
;

771 
¦Ù_út
++;

775 
	`LOGE
("Invalid char %c in short signature of %s.%s\n",

776 *(
desc
-1), 
şazz
->
desütÜ
, 
m‘hod
->
Çme
);

777 
	`as£¹
(
çl£
);

778 
ba
;

781 
v”ifyCouÁ
++;

782 
¬gs
++;

785 #ifdeà
WITH_TAINT_TRACKING


787 *
šs
++ = 
TAINT_CLEAR
;

789 
i
;

790 ià(
ÇtiveT¬g‘
) {

791 
i
 = 0; i < 
¦Ù_út
; i++) {

792 *
šs
++ = 
TAINT_CLEAR
;

798 #iâdeà
NDEBUG


799 ià(
v”ifyCouÁ
 !ğ
m‘hod
->
šsSize
) {

800 
	`LOGE
("GÙ vfycouÁ=%d insSize=%d fÜ %s.%s\n", 
v”ifyCouÁ
,

801 
m‘hod
->
šsSize
, 
şazz
->
desütÜ
, m‘hod->
Çme
);

802 
	`as£¹
(
çl£
);

803 
ba
;

807 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

808 #ifdeà
WITH_PROFILER


809 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

815 (*
m‘hod
->
ÇtiveFunc
)(
£lf
->
curF¿me
, 
pResuÉ
, method, self);

816 #ifdeà
WITH_PROFILER


817 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

820 #ifdeà
WITH_TAINT_TRACKING


821 
u4
 
¹ašt
;

822 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, 
pResuÉ
, &
¹ašt
);

824 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, 
pResuÉ
);

828 
ba
:

829 
	`dvmPİF¿me
(
£lf
);

830 
	}
}

843 
Objeù
* 
	$dvmInvokeM‘hod
(
Objeù
* 
obj
, cÚ¡ 
M‘hod
* 
m‘hod
,

844 
A¼ayObjeù
* 
¬gLi¡
, A¼ayObjeù* 
·¿ms
, 
CÏssObjeù
* 
»tuºTy³
,

845 
boŞ
 
noAcûssCheck
)

847 
CÏssObjeù
* 
şazz
;

848 
Objeù
* 
»tObj
 = 
NULL
;

849 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

850 
s4
* 
šs
;

851 
v”ifyCouÁ
, 
¬gLi¡L’gth
;

852 
JV®ue
 
»tv®
;

854 #ifdeà
WITH_TAINT_TRACKING


855 
u4
 
¹ašt
 = 
TAINT_CLEAR
;

856 
¦Ù_út
 = 0;

857 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hod
);

862 
u4
 
ÇtiveTag
 = 
TAINT_CLEAR
;

866 ià(
¬gLi¡
 !ğ
NULL
)

867 
¬gLi¡L’gth
 = 
¬gLi¡
->
Ëngth
;

869 
¬gLi¡L’gth
 = 0;

870 ià(
¬gLi¡L’gth
 !ğ(è
·¿ms
->
Ëngth
) {

871 
	`LOGI
("invoke:ƒxpected %d‡rgs,„eceived %d‡rgs\n",

872 
·¿ms
->
Ëngth
, 
¬gLi¡L’gth
);

873 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

875  
NULL
;

878 
şazz
 = 
	`ÿÎP»p
(
£lf
, 
m‘hod
, 
obj
, !
noAcûssCheck
);

879 ià(
şazz
 =ğ
NULL
)

880  
NULL
;

883 #ifdeà
WITH_TAINT_TRACKING


884 ià(
ÇtiveT¬g‘
) {

886 
šs
 = ((
s4
*)
£lf
->
curF¿me
è+ (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

889 
šs
 = ((
s4
*)
£lf
->
curF¿me
) +

890 ((
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
) << 1);

893 
šs
 = ((
s4
*)
£lf
->
curF¿me
è+ (
m‘hod
->
»gi¡”sSize
 - m‘hod->
šsSize
);

895 
v”ifyCouÁ
 = 0;

900 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

901 
	`as£¹
(
obj
 !ğ
NULL
);

902 *
šs
++ = (
s4
è
obj
;

903 #ifdeà
WITH_TAINT_TRACKING


904 ià(!
ÇtiveT¬g‘
) {

905 *
šs
++ = 
TAINT_CLEAR
;

907 
¦Ù_út
++;

909 
v”ifyCouÁ
++;

916 
D©aObjeù
** 
¬gs
;

917 
CÏssObjeù
** 
ty³s
;

918 
i
;

920 
¬gs
 = (
D©aObjeù
**è
¬gLi¡
->
cÚ‹Ás
;

921 
ty³s
 = (
CÏssObjeù
**è
·¿ms
->
cÚ‹Ás
;

922 
i
 = 0; i < 
¬gLi¡L’gth
; i++) {

923 
width
;

924 #ifdeà
WITH_TAINT_TRACKING


925 
g
 = 
	`dvmG‘Prim™iveTašt
(*
¬gs
, *
ty³s
);

927 
width
 = 
	`dvmCÚv”tArgum’t
(*
¬gs
++, *
ty³s
++, 
šs
);

928 ià(
width
 < 0) {

929 ià(*(
¬gs
-1è!ğ
NULL
) {

930 
	`LOGV
("invoke:ype mismatch on‡rg %d ('%s' '%s')\n",

931 
i
, (*(
¬gs
-1))->
obj
.
şazz
->
desütÜ
,

932 (*(
ty³s
-1))->
desütÜ
);

934 
	`dvmPİF¿me
(
£lf
);

935 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

937 
ba_pİ³d
;

940 #ifdeà
WITH_TAINT_TRACKING


942 ià(
ÇtiveT¬g‘
) {

943 
ÇtiveTag
 |ğ
g
;

944 
šs
 +ğ
width
;

946 ià(
width
 == 2) {

947 
šs
[2] = ins[1];

948 
šs
[1] = 
g
;

949 
šs
[3] = 
g
;

950 
šs
 += 4;

951 } ià(
width
 == 1) {

952 
šs
[1] = 
g
;

953 
šs
 += 2;

955 
	`dvmPİF¿me
(
£lf
);

956 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

958 
ba_pİ³d
;

961 
¦Ù_út
 +ğ
width
;

963 
šs
 +ğ
width
;

965 
v”ifyCouÁ
 +ğ
width
;

968 #ifdeà
WITH_TAINT_TRACKING


970 *
šs
++ = 
TAINT_CLEAR
;

972 
i
;

973 ià(
ÇtiveT¬g‘
) {

974 
i
 = 0; i < 
¦Ù_út
; i++) {

975 *
šs
++ = 
ÇtiveTag
;

981 ià(
v”ifyCouÁ
 !ğ
m‘hod
->
šsSize
) {

982 
	`LOGE
("GÙ vfycouÁ=%d insSize=%d fÜ %s.%s\n", 
v”ifyCouÁ
,

983 
m‘hod
->
šsSize
, 
şazz
->
desütÜ
, m‘hod->
Çme
);

984 
	`as£¹
(
çl£
);

985 
ba
;

989 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
)) {

990 #ifdeà
WITH_PROFILER


991 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

997 (*
m‘hod
->
ÇtiveFunc
)(
£lf
->
curF¿me
, &
»tv®
, method, self);

998 #ifdeà
WITH_PROFILER


999 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hod
);

1001 #ifdeà
WITH_TAINT_TRACKING


1002 
¹ašt
 = ((
u4
*)
£lf
->
curF¿me
)[
¦Ù_út
];

1005 #ifdeà
WITH_TAINT_TRACKING


1006 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, &
»tv®
, &
¹ašt
);

1008 
	`dvmIÁ”´‘
(
£lf
, 
m‘hod
, &
»tv®
);

1020 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1021 
	`dvmW¿pExû±iÚ
("Ljava/lang/reflect/InvocationTargetException;");

1030 ià(
»tuºTy³
 !ğ
NULL
) {

1031 
»tObj
 = (
Objeù
*)
	`dvmW¿pPrim™ive
(
»tv®
, 
»tuºTy³
);

1032 #ifdeà
WITH_TAINT_TRACKING


1033 
	`dvmS‘Prim™iveTašt
(
»tObj
, 
»tuºTy³
, 
¹ašt
);

1035 
	`dvmR–—£T¿ckedAÎoc
(
»tObj
, 
NULL
);

1039 
ba
:

1040 
	`dvmPİF¿me
(
£lf
);

1041 
ba_pİ³d
:

1042  
»tObj
;

1043 
	}
}

1045 
	sLšeNumFromPcCÚ‹xt
 {

1046 
u4
 
	madd»ss
;

1047 
u4
 
	mlšeNum
;

1048 } 
	tLšeNumFromPcCÚ‹xt
;

1050 
	$lšeNumFÜPcCb
(*
úxt
, 
u4
 
add»ss
, u4 
lšeNum
)

1052 
LšeNumFromPcCÚ‹xt
 *
pCÚ‹xt
 = (LšeNumFromPcCÚ‹xˆ*)
úxt
;

1058 ià(
add»ss
 > 
pCÚ‹xt
->address) {

1064 
pCÚ‹xt
->
lšeNum
 =†ineNum;

1066  (
add»ss
 =ğ
pCÚ‹xt
->address) ? 1 : 0;

1067 
	}
}

1077 
	$dvmLšeNumFromPC
(cÚ¡ 
M‘hod
* 
m‘hod
, 
u4
 
»lPc
)

1079 cÚ¡ 
DexCode
* 
pDexCode
 = 
	`dvmG‘M‘hodCode
(
m‘hod
);

1081 ià(
pDexCode
 =ğ
NULL
) {

1082 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
è&& !
	`dvmIsAb¡¿ùM‘hod
(method))

1087 
LšeNumFromPcCÚ‹xt
 
cÚ‹xt
;

1088 
	`mem£t
(&
cÚ‹xt
, 0, (context));

1089 
cÚ‹xt
.
add»ss
 = 
»lPc
;

1091 
cÚ‹xt
.
lšeNum
 = -1;

1093 
	`dexDecodeDebugInfo
(
m‘hod
->
şazz
->
pDvmDex
->
pDexFe
, 
pDexCode
,

1094 
m‘hod
->
şazz
->
desütÜ
,

1095 
m‘hod
->
´ÙÙy³
.
´ÙoIdx
,

1096 
m‘hod
->
acûssFÏgs
,

1097 
lšeNumFÜPcCb
, 
NULL
, &
cÚ‹xt
);

1099  
cÚ‹xt
.
lšeNum
;

1100 
	}
}

1107 
	$dvmCompu‹ExaùF¿meD•th
(cÚ¡ * 
å
)

1109 
couÁ
 = 0;

1111  ; 
å
 !ğ
NULL
; f°ğ
	`SAVEAREA_FROM_FP
(å)->
´evF¿me
) {

1112 ià(!
	`dvmIsB»akF¿me
(
å
))

1113 
couÁ
++;

1116  
couÁ
;

1117 
	}
}

1128 
	$dvmCompu‹VagueF¿meD•th
(
Th»ad
* 
th»ad
, cÚ¡ * 
å
)

1130 cÚ¡ 
u1
* 
š‹½SckS¹
 = 
th»ad
->interpStackStart;

1131 cÚ¡ 
u1
* 
š‹½SckBÙtom
 = 
š‹½SckS¹
 - 
th»ad
->
š‹½SckSize
;

1133 
	`as£¹
((
u1
*è
å
 >ğ
š‹½SckBÙtom
 && (u1*èå < 
š‹½SckS¹
);

1134  
š‹½SckS¹
 - (
u1
*è
å
;

1135 
	}
}

1142 * 
	$dvmG‘C®ËrFP
(cÚ¡ * 
curF¿me
)

1144 * 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
´evF¿me
;

1145 
SckSaveA»a
* 
§veA»a
;

1147 
»Œy
:

1148 ià(
	`dvmIsB»akF¿me
(
ÿÎ”
)) {

1150 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(ÿÎ”)->
´evF¿me
;

1151 ià(
ÿÎ”
 =ğ
NULL
)

1152  
NULL
;

1159 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
ÿÎ”
);

1160 ià(
	`dvmIsReæeùiÚM‘hod
(
§veA»a
->
m‘hod
)) {

1161 
ÿÎ”
 = 
§veA»a
->
´evF¿me
;

1162 
	`as£¹
(
ÿÎ”
 !ğ
NULL
);

1163 
»Œy
;

1167  
ÿÎ”
;

1168 
	}
}

1175 
CÏssObjeù
* 
	$dvmG‘C®ËrCÏss
(cÚ¡ * 
curF¿me
)

1177 * 
ÿÎ”
;

1179 
ÿÎ”
 = 
	`dvmG‘C®ËrFP
(
curF¿me
);

1180 ià(
ÿÎ”
 =ğ
NULL
)

1181  
NULL
;

1183  
	`SAVEAREA_FROM_FP
(
ÿÎ”
)->
m‘hod
->
şazz
;

1184 
	}
}

1192 
CÏssObjeù
* 
	$dvmG‘C®Ër2CÏss
(cÚ¡ * 
curF¿me
)

1194 * 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
´evF¿me
;

1195 * 
ÿÎ”C®Ër
;

1198 ià(
	`dvmIsB»akF¿me
(
ÿÎ”
è&& 
	`SAVEAREA_FROM_FP
(ÿÎ”)->
´evF¿me
 =ğ
NULL
)

1199  
NULL
;

1202 
ÿÎ”C®Ër
 = 
	`dvmG‘C®ËrFP
(
ÿÎ”
);

1203 ià(
ÿÎ”C®Ër
 =ğ
NULL
)

1204  
NULL
;

1206  
	`SAVEAREA_FROM_FP
(
ÿÎ”C®Ër
)->
m‘hod
->
şazz
;

1207 
	}
}

1215 
CÏssObjeù
* 
	$dvmG‘C®Ër3CÏss
(cÚ¡ * 
curF¿me
)

1217 * 
ÿÎ”
 = 
	`SAVEAREA_FROM_FP
(
curF¿me
)->
´evF¿me
;

1218 
i
;

1221 ià(
	`dvmIsB»akF¿me
(
ÿÎ”
è&& 
	`SAVEAREA_FROM_FP
(ÿÎ”)->
´evF¿me
 =ğ
NULL
)

1222  
NULL
;

1225 
i
 = 0; i < 2; i++) {

1226 
ÿÎ”
 = 
	`dvmG‘C®ËrFP
(caller);

1227 ià(
ÿÎ”
 =ğ
NULL
)

1228  
NULL
;

1231  
	`SAVEAREA_FROM_FP
(
ÿÎ”
)->
m‘hod
->
şazz
;

1232 
	}
}

1246 
boŞ
 
	$dvmC»©eSckT¿ûA¼ay
(cÚ¡ * 
å
, cÚ¡ 
M‘hod
*** 
pA¼ay
,

1247 * 
pL’gth
)

1249 cÚ¡ 
M‘hod
** 
¬¿y
;

1250 
idx
, 
d•th
;

1252 
d•th
 = 
	`dvmCompu‹ExaùF¿meD•th
(
å
);

1253 
¬¿y
 = (cÚ¡ 
M‘hod
**è
	`m®loc
(
d•th
 * (Method*));

1254 ià(
¬¿y
 =ğ
NULL
)

1255  
çl£
;

1257 
idx
 = 0; 
å
 !ğ
NULL
; f°ğ
	`SAVEAREA_FROM_FP
(å)->
´evF¿me
) {

1258 ià(!
	`dvmIsB»akF¿me
(
å
))

1259 
¬¿y
[
idx
++] = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

1261 
	`as£¹
(
idx
 =ğ
d•th
);

1263 *
pA¼ay
 = 
¬¿y
;

1264 *
pL’gth
 = 
d•th
;

1265  
Œue
;

1266 
	}
}

1279 
	$dvmHªdËSckOv”æow
(
Th»ad
* 
£lf
)

1284 ià(
£lf
->
¡ackOv”æowed
) {

1288 
	`LOGE
("DalvikVM: double-overflow of stack inhreadid=%d;‡borting\n",

1289 
£lf
->
th»adId
);

1290 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

1291 
	`dvmAbÜt
();

1295 
	`LOGI
("Sck ov”æow,ƒx·ndšg (%°tØ%p)\n", 
£lf
->
š‹½SckEnd
,

1296 
£lf
->
š‹½SckS¹
 - s–f->
š‹½SckSize
);

1298 
£lf
->
š‹½SckEnd
 = s–f->
š‹½SckS¹
 - s–f->
š‹½SckSize
;

1299 
£lf
->
¡ackOv”æowed
 = 
Œue
;

1307 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1308 ià(
exûp
 !ğ
NULL
) {

1309 
	`LOGW
("Stack overflow whilehrowingƒxception\n");

1310 
	`dvmCË¬Exû±iÚ
(
£lf
);

1312 
	`dvmThrowChašedExû±iÚ
("Ljava/Ïng/SckOv”æowE¼Ü;", 
NULL
, 
exûp
);

1313 
	}
}

1319 
	$dvmCËªupSckOv”æow
(
Th»ad
* 
£lf
)

1321 cÚ¡ 
u1
* 
ÃwSckEnd
;

1323 
	`as£¹
(
£lf
->
¡ackOv”æowed
);

1325 
ÃwSckEnd
 = (
£lf
->
š‹½SckS¹
 - s–f->
š‹½SckSize
)

1326 + 
STACK_OVERFLOW_RESERVE
;

1327 ià((
u1
*)
£lf
->
curF¿me
 <ğ
ÃwSckEnd
) {

1328 
	`LOGE
("Can't shrink stack: curFrame is in„eserved‡rea (%p %p)\n",

1329 
£lf
->
š‹½SckEnd
, s–f->
curF¿me
);

1330 
	`dvmDumpTh»ad
(
£lf
, 
çl£
);

1331 
	`dvmAbÜt
();

1334 
£lf
->
š‹½SckEnd
 = 
ÃwSckEnd
;

1335 
£lf
->
¡ackOv”æowed
 = 
çl£
;

1337 
	`LOGI
("Sh¿nk sck (tØ%p, curF¿mi %p)\n", 
£lf
->
š‹½SckEnd
,

1338 
£lf
->
curF¿me
);

1339 
	}
}

1354 
	$dumpF¿mes
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, * 
äamePŒ
,

1355 
Th»ad
* 
th»ad
)

1357 cÚ¡ 
SckSaveA»a
* 
§veA»a
;

1358 cÚ¡ 
M‘hod
* 
m‘hod
;

1359 
checkCouÁ
 = 0;

1360 cÚ¡ 
u2
* 
cu¼’tPc
 = 
NULL
;

1361 
boŞ
 
fœ¡
 = 
Œue
;

1367 ià(
äamePŒ
 !ğ
NULL
 && !
	`dvmIsB»akF¿me
(framePtr)) {

1368 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1370 ià(
§veA»a
->
xŒa
.
cu¼’tPc
 !ğ
NULL
)

1371 
cu¼’tPc
 = 
§veA»a
->
xŒa
.currentPc;

1374 
äamePŒ
 !ğ
NULL
) {

1375 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
äamePŒ
);

1376 
m‘hod
 = 
§veA»a
->method;

1378 ià(
	`dvmIsB»akF¿me
(
äamePŒ
)) {

1381 
»lPc
;

1383 ià(
cu¼’tPc
 !ğ
NULL
)

1384 
»lPc
 = 
cu¼’tPc
 - 
§veA»a
->
m‘hod
->
š¢s
;

1386 
»lPc
 = -1;

1388 * 
şassName
 = 
	`dvmDesütÜToDÙ
(
m‘hod
->
şazz
->
desütÜ
);

1389 ià(
	`dvmIsN©iveM‘hod
(
m‘hod
))

1390 
	`dvmPrštDebugMes§ge
(
rg‘
,

1391 "‡ˆ%s.%s(N©ivM‘hod)\n", 
şassName
, 
m‘hod
->
Çme
);

1393 
	`dvmPrštDebugMes§ge
(
rg‘
,

1395 
şassName
, 
m‘hod
->
Çme
, 
	`dvmG‘M‘hodSourûFe
(method),

1396 (
»lPc
 >ğ0 && 
fœ¡
) ? "~" : "",

1397 
»lPc
 < 0 ? -1 : 
	`dvmLšeNumFromPC
(
m‘hod
,„elPc));

1399 
	`ä“
(
şassName
);

1401 ià(
fœ¡
 &&

1402 (
th»ad
->
¡©us
 =ğ
THREAD_WAIT
 ||

1403 
th»ad
->
¡©us
 =ğ
THREAD_TIMED_WAIT
))

1406 
MÚ™Ü
* 
mÚ
 = 
th»ad
->
wa™MÚ™Ü
;

1407 
Objeù
* 
obj
 = 
	`dvmG‘MÚ™ÜObjeù
(
mÚ
);

1408 ià(
obj
 !ğ
NULL
) {

1409 
şassName
 = 
	`dvmDesütÜToDÙ
(
obj
->
şazz
->
desütÜ
);

1410 
	`dvmPrštDebugMes§ge
(
rg‘
,

1411 " - wa™šg oÀ<%p> (¨%s)\n", 
mÚ
, 
şassName
);

1412 
	`ä“
(
şassName
);

1424 
cu¼’tPc
 = 
§veA»a
->
§vedPc
;

1426 
fœ¡
 = 
çl£
;

1428 ià(
§veA»a
->
´evF¿me
 !ğ
NULL
 && saveA»a->´evF¿m<ğ
äamePŒ
) {

1429 
	`LOGW
("Warning:†oop in stackrace‡t frame %d (%p -> %p)\n",

1430 
checkCouÁ
, 
äamePŒ
, 
§veA»a
->
´evF¿me
);

1433 
äamePŒ
 = 
§veA»a
->
´evF¿me
;

1435 
checkCouÁ
++;

1436 ià(
checkCouÁ
 > 300) {

1437 
	`dvmPrštDebugMes§ge
(
rg‘
,

1439 
checkCouÁ
);

1443 
	`dvmPrštDebugMes§ge
(
rg‘
, "\n");

1444 
	}
}

1450 
	$dvmDumpTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
)

1452 
	`dumpF¿mes
(
rg‘
, 
th»ad
->
curF¿me
,hread);

1453 
	}
}

1466 
	$dvmDumpRuÂšgTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
)

1468 
SckSaveA»a
* 
§veA»a
;

1469 cÚ¡ 
u1
* 
ÜigSck
;

1470 
u1
* 
¡ackCİy
 = 
NULL
;

1471 
ÜigSize
, 
åOff£t
;

1472 * 
å
;

1473 
d•thLim™
 = 200;

1475 ià(
th»ad
 =ğ
NULL
 ||h»ad->
curF¿me
 == NULL) {

1476 
	`dvmPrštDebugMes§ge
(
rg‘
,

1478 
th»ad
, (th»ad !ğ
NULL
è?h»ad->
th»adId
 : 0);

1483 
	`sched_y›ld
();

1486 
ÜigSize
 = 
th»ad
->
š‹½SckSize
;

1487 
ÜigSck
 = (cÚ¡ 
u1
*è
th»ad
->
š‹½SckS¹
 - 
ÜigSize
;

1488 
¡ackCİy
 = (
u1
*è
	`m®loc
(
ÜigSize
);

1489 
åOff£t
 = (
u1
*è
th»ad
->
curF¿me
 - 
ÜigSck
;

1490 
	`memıy
(
¡ackCİy
, 
ÜigSck
, 
ÜigSize
);

1496 
å
 = 
¡ackCİy
 + 
åOff£t
;

1497 
Œue
) {

1498 
´evOff£t
;

1500 ià(
d•thLim™
-- < 0) {

1502 
	`dvmPrštDebugMes§ge
(
rg‘
, "DumpRunning: depth†imit hit\n");

1503 
	`dvmAbÜt
();

1505 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1506 ià(
§veA»a
->
´evF¿me
 =ğ
NULL
)

1509 
´evOff£t
 = (
u1
*è
§veA»a
->
´evF¿me
 - 
ÜigSck
;

1510 ià(
´evOff£t
 < 0 ||…»vOff£ˆ> 
ÜigSize
) {

1511 
	`dvmPrštDebugMes§ge
(
rg‘
,

1513 
´evOff£t
, 
ÜigSck
, 
§veA»a
->
´evF¿me
);

1514 
§veA»a
->
´evF¿me
 = 
NULL
;

1518 
§veA»a
->
´evF¿me
 = 
¡ackCİy
 + 
´evOff£t
;

1519 
å
 = 
§veA»a
->
´evF¿me
;

1525 
	`dumpF¿mes
(
rg‘
, 
¡ackCİy
 + 
åOff£t
, 
th»ad
);

1526 
	`ä“
(
¡ackCİy
);

1527 
	}
}

	@interp/Stack.h

19 #iâdeà
_DALVIK_INTERP_STACK


20 
	#_DALVIK_INTERP_STACK


	)

22 
	~"jni.h
"

23 
	~<¡d¬g.h
>

109 
	gSckSaveA»a
;

110 
SckSaveA»a
 
	tSckSaveA»a
;

121 
	sSckSaveA»a
 {

122 #ifdeà
PAD_SAVE_AREA


123 
u4
 
	m·d0
, 
	m·d1
, 
	m·d2
;

126 #ifdeà
EASY_GDB


128 
SckSaveA»a
* 
	m´evSave
;

132 * 
	m´evF¿me
;

135 cÚ¡ 
u2
* 
	m§vedPc
;

138 cÚ¡ 
M‘hod
* 
	mm‘hod
;

142 #ifdeà
USE_INDIRECT_REF


143 
u4
 
	mloÿlRefCook›
;

145 
Objeù
** 
	mloÿlRefCook›
;

150 cÚ¡ 
u2
* 
	mcu¼’tPc
;

151 } 
	mxŒa
;

154 cÚ¡ 
u2
* 
	m»tuºAddr
;

155 #ifdeà
PAD_SAVE_AREA


156 
u4
 
	m·d3
, 
	m·d4
, 
	m·d5
;

161 
	#SAVEAREA_FROM_FP
(
_å
è((
SckSaveA»a
*)(_åè-1)

	)

162 
	#FP_FROM_SAVEAREA
(
_§ve
è((*è((
SckSaveA»a
*)(_§veè+1))

	)

165 #ifdeà
WITH_TAINT_TRACKING


166 
	#OUTS_FROM_FP
(
_å
, 
_¬gCouÁ
) \

167 ((
u4
*è((
u1
*)
	`SAVEAREA_FROM_FP
(
_å
) - \

168 Ğ(((
u4
è* (
_¬gCouÁ
))<<1è+4è))

	)

170 
	#OUTS_FROM_FP
(
_å
, 
_¬gCouÁ
) \

171 ((
u4
*è((
u1
*)
	`SAVEAREA_FROM_FP
(
_å
è- (u4è* (
_¬gCouÁ
)))

	)

175 #ifdeà
WITH_TAINT_TRACKING


176 
	#STACK_OVERFLOW_RESERVE
 1024

	)

178 
	#STACK_OVERFLOW_RESERVE
 512

	)

184 
INLINE
 
boŞ
 
	$dvmIsB»akF¿me
(cÚ¡ 
u4
* 
å
)

186  
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
 =ğ
NULL
;

187 
	}
}

193 
boŞ
 
dvmIn™IÁ”pSck
(
Th»ad
* 
th»ad
, 
¡ackSize
);

199 
boŞ
 
dvmPushJNIF¿me
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
);

204 
boŞ
 
dvmPushLoÿlF¿me
(
Th»ad
* 
th»ad
, cÚ¡ 
M‘hod
* 
m‘hod
);

205 
boŞ
 
dvmPİLoÿlF¿me
(
Th»ad
* 
th»ad
);

214 
dvmC®lM‘hod
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

215 
JV®ue
* 
pResuÉ
, ...);

216 
dvmC®lM‘hodV
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

217 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, 
va_li¡
 
¬gs
);

218 
dvmC®lM‘hodA
(
Th»ad
* 
£lf
, cÚ¡ 
M‘hod
* 
m‘hod
, 
Objeù
* 
obj
,

219 
boŞ
 
äomJni
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
jv®ue
* 
¬gs
);

233 
Objeù
* 
dvmInvokeM‘hod
(Objeù* 
švokeObj
, cÚ¡ 
M‘hod
* 
m‘h
,

234 
A¼ayObjeù
* 
¬gLi¡
, A¼ayObjeù* 
·¿ms
, 
CÏssObjeù
* 
»tuºTy³
,

235 
boŞ
 
noAcûssCheck
);

242 
dvmLšeNumFromPC
(cÚ¡ 
M‘hod
* 
m‘hod
, 
u4
 
»lPc
);

249 
dvmCompu‹ExaùF¿meD•th
(cÚ¡ * 
å
);

250 
dvmCompu‹VagueF¿meD•th
(
Th»ad
* 
th»ad
, cÚ¡ * 
å
);

255 * 
dvmG‘C®ËrFP
(cÚ¡ * 
curF¿me
);

260 
CÏssObjeù
* 
dvmG‘C®ËrCÏss
(cÚ¡ * 
curF¿me
);

268 
CÏssObjeù
* 
dvmG‘C®Ër2CÏss
(cÚ¡ * 
curF¿me
);

276 
CÏssObjeù
* 
dvmG‘C®Ër3CÏss
(cÚ¡ * 
curF¿me
);

282 
boŞ
 
dvmC»©eSckT¿ûA¼ay
(cÚ¡ * 
å
, cÚ¡ 
M‘hod
*** 
pA¼ay
,

283 * 
pL’gth
);

288 
dvmHªdËSckOv”æow
(
Th»ad
* 
£lf
);

289 
dvmCËªupSckOv”æow
(
Th»ad
* 
£lf
);

292 
dvmDumpTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
);

293 
dvmDumpRuÂšgTh»adSck
(cÚ¡ 
DebugOuutT¬g‘
* 
rg‘
, 
Th»ad
* 
th»ad
);

	@interp/Taint.h

19 #iâdeà
_DALVIK_INTERP_TAINT


20 
	#_DALVIK_INTERP_TAINT


	)

23 
	sTašt
 {

24 
u4
 
	mg
;

25 } 
	tTašt
;

29 
	#TAINT_CLEAR
 ((
u4
)0x00000000è

	)

30 
	#TAINT_LOCATION
 ((
u4
)0x00000001è

	)

31 
	#TAINT_CONTACTS
 ((
u4
)0x00000002è

	)

32 
	#TAINT_MIC
 ((
u4
)0x00000004è

	)

33 
	#TAINT_PHONE_NUMBER
 ((
u4
)0x00000008è

	)

34 
	#TAINT_LOCATION_GPS
 ((
u4
)0x00000010è

	)

35 
	#TAINT_LOCATION_NET
 ((
u4
)0x00000020è

	)

36 
	#TAINT_LOCATION_LAST
 ((
u4
)0x00000040è

	)

37 
	#TAINT_CAMERA
 ((
u4
)0x00000080è

	)

38 
	#TAINT_ACCELEROMETER
 ((
u4
)0x00000100è

	)

39 
	#TAINT_SMS
 ((
u4
)0x00000200è

	)

40 
	#TAINT_IMEI
 ((
u4
)0x00000400è

	)

41 
	#TAINT_IMSI
 ((
u4
)0x00000800è

	)

42 
	#TAINT_ICCID
 ((
u4
)0x00001000è

	)

43 
	#TAINT_DEVICE_SN
 ((
u4
)0x00002000è

	)

44 
	#TAINT_ACCOUNT
 ((
u4
)0x00004000è

	)

45 
	#TAINT_HISTORY
 ((
u4
)0x00008000è

	)

	@jdwp/ExpandBuf.c

20 
	~"jdwp/Ex·ndBuf.h
"

21 
	~"B™s.h
"

22 
	~"CommÚ.h
"

24 
	~<¡dlib.h
>

25 
	~<¡ršg.h
>

30 
	sEx·ndBuf
 {

31 
u1
* 
	m¡Üage
;

32 
	mcurL’
;

33 
	mmaxL’
;

36 
	#kIn™ŸlStÜage
 64

	)

41 
Ex·ndBuf
* 
	$ex·ndBufAÎoc
()

43 
Ex·ndBuf
* 
ÃwBuf
;

45 
ÃwBuf
 = (
Ex·ndBuf
*è
	`m®loc
((*newBuf));

46 
ÃwBuf
->
¡Üage
 = (
u1
*è
	`m®loc
(
kIn™ŸlStÜage
);

47 
ÃwBuf
->
curL’
 = 0;

48 
ÃwBuf
->
maxL’
 = 
kIn™ŸlStÜage
;

50  
ÃwBuf
;

51 
	}
}

56 
	$ex·ndBufF»e
(
Ex·ndBuf
* 
pBuf
)

58 ià(
pBuf
 =ğ
NULL
)

61 
	`ä“
(
pBuf
->
¡Üage
);

62 
	`ä“
(
pBuf
);

63 
	}
}

68 
u1
* 
	$ex·ndBufG‘Bufãr
(
Ex·ndBuf
* 
pBuf
)

70  
pBuf
->
¡Üage
;

71 
	}
}

76 
size_t
 
	$ex·ndBufG‘L’gth
(
Ex·ndBuf
* 
pBuf
)

78  
pBuf
->
curL’
;

79 
	}
}

86 
	$’su»S·û
(
Ex·ndBuf
* 
pBuf
, 
ÃwCouÁ
)

88 
u1
* 
ÃwPŒ
;

90 ià(
pBuf
->
curL’
 + 
ÃwCouÁ
 <ğpBuf->
maxL’
)

93 
pBuf
->
curL’
 + 
ÃwCouÁ
 >…Buf->
maxL’
)

94 
pBuf
->
maxL’
 *= 2;

96 
ÃwPŒ
 = 
	`»®loc
(
pBuf
->
¡Üage
,…Buf->
maxL’
);

97 ià(
ÃwPŒ
 =ğ
NULL
) {

98 
	`LOGE
("»®loc(%dèçed\n", 
pBuf
->
maxL’
);

99 
	`abÜt
();

102 
pBuf
->
¡Üage
 = 
ÃwPŒ
;

103 
	}
}

108 
u1
* 
	$ex·ndBufAddS·û
(
Ex·ndBuf
* 
pBuf
, 
g­Size
)

110 
u1
* 
g­S¹
;

112 
	`’su»S·û
(
pBuf
, 
g­Size
);

113 
g­S¹
 = 
pBuf
->
¡Üage
 +…Buf->
curL’
;

115 
pBuf
->
curL’
 +ğ
g­Size
;

117  
g­S¹
;

118 
	}
}

123 
	$ex·ndBufAdd1
(
Ex·ndBuf
* 
pBuf
, 
u1
 
v®
)

125 
	`’su»S·û
(
pBuf
, (
v®
));

126 *(
pBuf
->
¡Üage
 +…Buf->
curL’
èğ
v®
;

127 
pBuf
->
curL’
++;

128 
	}
}

133 
	$ex·ndBufAdd2BE
(
Ex·ndBuf
* 
pBuf
, 
u2
 
v®
)

135 
	`’su»S·û
(
pBuf
, (
v®
));

136 
	`£t2BE
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
v®
);

137 
pBuf
->
curL’
 +ğ(
v®
);

138 
	}
}

143 
	$ex·ndBufAdd4BE
(
Ex·ndBuf
* 
pBuf
, 
u4
 
v®
)

145 
	`’su»S·û
(
pBuf
, (
v®
));

146 
	`£t4BE
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
v®
);

147 
pBuf
->
curL’
 +ğ(
v®
);

148 
	}
}

153 
	$ex·ndBufAdd8BE
(
Ex·ndBuf
* 
pBuf
, 
u8
 
v®
)

155 
	`’su»S·û
(
pBuf
, (
v®
));

156 
	`£t8BE
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
v®
);

157 
pBuf
->
curL’
 +ğ(
v®
);

158 
	}
}

168 
	$ex·ndBufAddUtf8SŒšg
(
Ex·ndBuf
* 
pBuf
, cÚ¡ 
u1
* 
¡r
)

170 
¡rL’
 = 
	`¡¾’
((cÚ¡ *)
¡r
);

172 
	`’su»S·û
(
pBuf
, (
u4
è+ 
¡rL’
);

173 
	`£tUtf8SŒšg
(
pBuf
->
¡Üage
 +…Buf->
curL’
, 
¡r
);

174 
pBuf
->
curL’
 +ğ(
u4
è+ 
¡rL’
;

175 
	}
}

	@jdwp/ExpandBuf.h

19 #iâdeà
_DALVIK_JDWP_EXPANDBUF


20 
	#_DALVIK_JDWP_EXPANDBUF


	)

22 
	~"CommÚ.h
"

24 
	gEx·ndBuf
;

25 
Ex·ndBuf
 
	tEx·ndBuf
;

28 
Ex·ndBuf
* 
ex·ndBufAÎoc
();

30 
ex·ndBufF»e
(
Ex·ndBuf
* 
pBuf
);

36 
u1
* 
ex·ndBufG‘Bufãr
(
Ex·ndBuf
* 
pBuf
);

37 
size_t
 
ex·ndBufG‘L’gth
(
Ex·ndBuf
* 
pBuf
);

50 
u1
* 
ex·ndBufAddS·û
(
Ex·ndBuf
* 
pBuf
, 
g­Size
);

51 
ex·ndBufAdd1
(
Ex·ndBuf
* 
pBuf
, 
u1
 
v®
);

52 
ex·ndBufAdd2BE
(
Ex·ndBuf
* 
pBuf
, 
u2
 
v®
);

53 
ex·ndBufAdd4BE
(
Ex·ndBuf
* 
pBuf
, 
u4
 
v®
);

54 
ex·ndBufAdd8BE
(
Ex·ndBuf
* 
pBuf
, 
u8
 
v®
);

55 
ex·ndBufAddUtf8SŒšg
(
Ex·ndBuf
* 
pBuf
, cÚ¡ 
u1
* 
¡r
);

	@jdwp/Jdwp.h

24 #iâdeà
_DALVIK_JDWP_JDWP


25 
	#_DALVIK_JDWP_JDWP


	)

27 
	~"jdwp/JdwpCÚ¡ªts.h
"

28 
	~"jdwp/Ex·ndBuf.h
"

29 
	~"CommÚ.h
"

30 
	~"B™s.h
"

31 
	~<±h»ad.h
>

33 
	gJdwpS‹
;

34 
JdwpS‹
 
	tJdwpS‹
;

41 
u4
 
	tF›ldId
;

42 
u4
 
	tM‘hodId
;

43 
u8
 
	tObjeùId
;

44 
u8
 
	tRefTy³Id
;

45 
u8
 
	tF¿meId
;

51 
INLINE
 
F›ldId
 
	$dvmR—dF›ldId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad4BE
ÕBuf); 
	}
}

52 
INLINE
 
M‘hodId
 
	$dvmR—dM‘hodId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad4BE
ÕBuf); 
	}
}

53 
INLINE
 
ObjeùId
 
	$dvmR—dObjeùId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad8BE
ÕBuf); 
	}
}

54 
INLINE
 
RefTy³Id
 
	$dvmR—dRefTy³Id
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad8BE
ÕBuf); 
	}
}

55 
INLINE
 
F¿meId
 
	$dvmR—dF¿meId
(cÚ¡ 
u1
** 
pBuf
è{  
	`»ad8BE
ÕBuf); 
	}
}

56 
INLINE
 
	$dvmS‘F›ldId
(
u1
* 
buf
, 
F›ldId
 
v®
è{  
	`£t4BE
(buf, v®); 
	}
}

57 
INLINE
 
	$dvmS‘M‘hodId
(
u1
* 
buf
, 
M‘hodId
 
v®
è{  
	`£t4BE
(buf, v®); 
	}
}

58 
INLINE
 
	$dvmS‘ObjeùId
(
u1
* 
buf
, 
ObjeùId
 
v®
è{  
	`£t8BE
(buf, v®); 
	}
}

59 
INLINE
 
	$dvmS‘RefTy³Id
(
u1
* 
buf
, 
RefTy³Id
 
v®
è{  
	`£t8BE
(buf, v®); 
	}
}

60 
INLINE
 
	$dvmS‘F¿meId
(
u1
* 
buf
, 
F¿meId
 
v®
è{  
	`£t8BE
(buf, v®); 
	}
}

61 
INLINE
 
	$ex·ndBufAddF›ldId
(
Ex·ndBuf
* 
pR•ly
, 
F›ldId
 
id
) {

62 
	`ex·ndBufAdd4BE
(
pR•ly
, 
id
);

63 
	}
}

64 
INLINE
 
	$ex·ndBufAddM‘hodId
(
Ex·ndBuf
* 
pR•ly
, 
M‘hodId
 
id
) {

65 
	`ex·ndBufAdd4BE
(
pR•ly
, 
id
);

66 
	}
}

67 
INLINE
 
	$ex·ndBufAddObjeùId
(
Ex·ndBuf
* 
pR•ly
, 
ObjeùId
 
id
) {

68 
	`ex·ndBufAdd8BE
(
pR•ly
, 
id
);

69 
	}
}

70 
INLINE
 
	$ex·ndBufAddRefTy³Id
(
Ex·ndBuf
* 
pR•ly
, 
RefTy³Id
 
id
) {

71 
	`ex·ndBufAdd8BE
(
pR•ly
, 
id
);

72 
	}
}

73 
INLINE
 
	$ex·ndBufAddF¿meId
(
Ex·ndBuf
* 
pR•ly
, 
F¿meId
 
id
) {

74 
	`ex·ndBufAdd8BE
(
pR•ly
, 
id
);

75 
	}
}

81 
	sJdwpLoÿtiÚ
 {

82 
u1
 
	mty³Tag
;

83 
RefTy³Id
 
	mşassId
;

84 
M‘hodId
 
	mm‘hodId
;

85 
u8
 
	midx
;

86 } 
	tJdwpLoÿtiÚ
;

92 
	eJdwpT¿n¥ÜtTy³
 {

93 
	mkJdwpT¿n¥ÜtUnknown
 = 0,

94 
	mkJdwpT¿n¥ÜtSock‘
,

95 
	mkJdwpT¿n¥ÜtAndroidAdb
,

96 } 
	tJdwpT¿n¥ÜtTy³
;

101 
	sJdwpS¹upP¬ams
 {

102 
JdwpT¿n¥ÜtTy³
 
	mŒª¥Üt
;

103 
boŞ
 
	m£rv”
;

104 
boŞ
 
	msu¥’d
;

105 
	mho¡
[64];

106 
	mpÜt
;

108 } 
	tJdwpS¹upP¬ams
;

118 
JdwpS‹
* 
dvmJdwpS¹up
(cÚ¡ 
JdwpS¹upP¬ams
* 
·¿ms
);

123 
dvmJdwpShutdown
(
JdwpS‹
* 
¡©e
);

128 
boŞ
 
dvmJdwpIsAùive
(
JdwpS‹
* 
¡©e
);

134 
±h»ad_t
 
dvmJdwpG‘DebugTh»ad
(
JdwpS‹
* 
¡©e
);

139 
s8
 
dvmJdwpLa¡Debugg”Aùiv™y
(
JdwpS‹
* 
¡©e
);

161 
dvmJdwpS‘Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
);

162 
dvmJdwpCË¬Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
);

167 
boŞ
 
dvmJdwpCheckCÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

168 
boŞ
 
dvmJdwpAcû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

169 
boŞ
 
dvmJdwpE¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

170 
dvmJdwpClo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
);

171 
boŞ
 
dvmJdwpProûssIncomšg
(
JdwpS‹
* 
¡©e
);

192 
boŞ
 
dvmJdwpPo¡VMS¹
(
JdwpS‹
* 
¡©e
, boŞ 
su¥’d
);

204 
boŞ
 
dvmJdwpPo¡LoÿtiÚEv’t
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
,

205 
ObjeùId
 
thisPŒ
, 
ev’tFÏgs
);

212 
boŞ
 
dvmJdwpPo¡Exû±iÚ
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pThrowLoc
,

213 
ObjeùId
 
exûpId
, 
RefTy³Id
 
exûpCÏssId
, cÚ¡ 
JdwpLoÿtiÚ
* 
pC©chLoc
,

214 
ObjeùId
 
thisPŒ
);

219 
boŞ
 
dvmJdwpPo¡Th»adChªge
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
, boŞ 
¡¬t
);

224 
boŞ
 
dvmJdwpPo¡CÏssP»·»
(
JdwpS‹
* 
¡©e
, 
g
, 
RefTy³Id
 
»fTy³Id
,

225 cÚ¡ * 
sigÇtu»
, 
¡©us
);

230 
boŞ
 
dvmJdwpPo¡VMD—th
(
JdwpS‹
* 
¡©e
);

235 
dvmJdwpDdmS’dChunk
(
JdwpS‹
* 
¡©e
, 
ty³
, 
Ën
, cÚ¡ 
u1
* 
buf
);

	@jdwp/JdwpAdb.c

16 
	~"jdwp/JdwpPriv.h
"

17 
	~"jdwp/JdwpHªdËr.h
"

18 
	~<sys/sock‘.h
>

19 
	~<sys/un.h
>

20 
	~<”ºo.h
>

21 
	~<uni¡d.h
>

40 
	#kIÅutBufãrSize
 8192

	)

42 
	#kMagicHªdshake
 "JDWP-Hªdshake"

	)

43 
	#kMagicHªdshakeL’
 ((
kMagicHªdshake
)-1)

	)

45 
	#kJdwpCÚŒŞName
 "\0jdwp-cÚŒŞ"

	)

46 
	#kJdwpCÚŒŞNameL’
 ((
kJdwpCÚŒŞName
)-1)

	)

48 
	sJdwpN‘S‹
 {

49 
	mcÚŒŞSock
;

50 
	mş›ÁSock
;

51 
boŞ
 
	mawa™šgHªdshake
;

52 
boŞ
 
	mshu‰šgDown
;

53 
	mwakeFds
[2];

55 
	mšputCouÁ
;

56 
	mšputBufãr
[
kIÅutBufãrSize
];

58 
sockËn_t
 
	mcÚŒŞAddrL’
;

60 
sockaddr_un
 
	mcÚŒŞAddrUn
;

61 
sockaddr
 
	mcÚŒŞAddrPÏš
;

62 } 
	mcÚŒŞAddr
;

66 
	$adbS‹F»e
Ğ
JdwpN‘S‹
* 
ÃtS‹
 )

68 ià(
ÃtS‹
 =ğ
NULL
)

71 ià(
ÃtS‹
->
ş›ÁSock
 >= 0) {

72 
	`shutdown
(
ÃtS‹
->
ş›ÁSock
, 
SHUT_RDWR
);

73 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

75 ià(
ÃtS‹
->
cÚŒŞSock
 >= 0) {

76 
	`shutdown
(
ÃtS‹
->
cÚŒŞSock
, 
SHUT_RDWR
);

77 
	`şo£
(
ÃtS‹
->
cÚŒŞSock
);

79 ià(
ÃtS‹
->
wakeFds
[0] >= 0) {

80 
	`şo£
(
ÃtS‹
->
wakeFds
[0]);

81 
ÃtS‹
->
wakeFds
[0] = -1;

83 ià(
ÃtS‹
->
wakeFds
[1] >= 0) {

84 
	`şo£
(
ÃtS‹
->
wakeFds
[1]);

85 
ÃtS‹
->
wakeFds
[1] = -1;

88 
	`ä“
(
ÃtS‹
);

89 
	}
}

92 
JdwpN‘S‹
*

93 
	$adbS‹AÎoc
()

95 
JdwpN‘S‹
* 
ÃtS‹
 = 
	`ÿÎoc
((*netState),1);

97 
ÃtS‹
->
cÚŒŞSock
 = -1;

98 
ÃtS‹
->
ş›ÁSock
 = -1;

100 
ÃtS‹
->
cÚŒŞAddr
.
cÚŒŞAddrUn
.
sun_çmy
 = 
AF_UNIX
;

101 
ÃtS‹
->
cÚŒŞAddrL’
 =

102 (
ÃtS‹
->
cÚŒŞAddr
.
cÚŒŞAddrUn
.
sun_çmy
) +

103 
kJdwpCÚŒŞNameL’
;

105 
	`memıy
(
ÃtS‹
->
cÚŒŞAddr
.
cÚŒŞAddrUn
.
sun_·th
,

106 
kJdwpCÚŒŞName
, 
kJdwpCÚŒŞNameL’
);

108 
ÃtS‹
->
wakeFds
[0] = -1;

109 
ÃtS‹
->
wakeFds
[1] = -1;

111  
ÃtS‹
;

112 
	}
}

120 
boŞ
 
	$¡¬tup
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

122 
JdwpN‘S‹
* 
ÃtS‹
;

124 
	`LOGV
("ADBransport startup\n");

126 
¡©e
->
ÃtS‹
 =‚‘S‹ = 
	`adbS‹AÎoc
();

127 ià(
ÃtS‹
 =ğ
NULL
)

128  
çl£
;

130  
Œue
;

131 
	}
}

140 
	$»ûiveCl›ÁFd
(
JdwpN‘S‹
* 
ÃtS‹
)

142 
msghdr
 
msg
;

143 
cmsghdr
* 
cmsg
;

144 
iovec
 
iov
;

145 
dummy
 = '!';

147 
cmsghdr
 
cm
;

148 
bufãr
[
	`CMSG_SPACE
(())];

149 } 
cm_un
;

150 
»t
;

152 
iov
.
iov_ba£
 = &
dummy
;

153 
iov
.
iov_Ën
 = 1;

154 
msg
.
msg_Çme
 = 
NULL
;

155 
msg
.
msg_Çm–’
 = 0;

156 
msg
.
msg_iov
 = &
iov
;

157 
msg
.
msg_iovËn
 = 1;

158 
msg
.
msg_æags
 = 0;

159 
msg
.
msg_cÚŒŞ
 = 
cm_un
.
bufãr
;

160 
msg
.
msg_cÚŒŞËn
 = (
cm_un
.
bufãr
);

162 
cmsg
 = 
	`CMSG_FIRSTHDR
(&
msg
);

163 
cmsg
->
cmsg_Ën
 = 
msg
.
msg_cÚŒŞËn
;

164 
cmsg
->
cmsg_Ëv–
 = 
SOL_SOCKET
;

165 
cmsg
->
cmsg_ty³
 = 
SCM_RIGHTS
;

166 ((*)
	`CMSG_DATA
(
cmsg
))[0] = -1;

169 
»t
 = 
	`»cvmsg
(
ÃtS‹
->
cÚŒŞSock
, &
msg
, 0);

170 } 
»t
 < 0 && 
”ºo
 =ğ
EINTR
);

172 ià(
»t
 <= 0) {

173 ià(
»t
 < 0) {

174 
	`LOGW
("receiving file descriptor from ADB failed (socket %d): %s\n",

175 
ÃtS‹
->
cÚŒŞSock
, 
	`¡»¼Ü
(
”ºo
));

177 
	`LOGI
("adbd disconnected\n");

179 
	`şo£
(
ÃtS‹
->
cÚŒŞSock
);

180 
ÃtS‹
->
cÚŒŞSock
 = -1;

184  ((*)
	`CMSG_DATA
(
cmsg
))[0];

185 
	}
}

194 
boŞ
 
	$acû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

196 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

197 
»ŒyCouÁ
 = 0;

201 
»Œy
:

202 ià(
ÃtS‹
->
shu‰šgDown
)

203  
çl£
;

205 ià(
ÃtS‹
->
cÚŒŞSock
 < 0) {

206 
¦“p_ms
 = 500;

207 cÚ¡ 
¦“p_max_ms
 = 2*1000;

208 
buff
[5];

210 
ÃtS‹
->
cÚŒŞSock
 = 
	`sock‘
(
PF_UNIX
, 
SOCK_STREAM
, 0);

211 ià(
ÃtS‹
->
cÚŒŞSock
 < 0) {

212 
	`LOGE
("Could‚ot create ADB control socket:%s\n",

213 
	`¡»¼Ü
(
”ºo
));

214  
çl£
;

217 ià(
	`pe
(
ÃtS‹
->
wakeFds
) < 0) {

218 
	`LOGE
("pipe failed");

219  
çl£
;

222 
	`¢´štf
(
buff
, (buff), "%04x", 
	`g‘pid
());

223 
buff
[4] = 0;

239 
»t
 = 
	`cÚÃù
(
ÃtS‹
->
cÚŒŞSock
,

240 &
ÃtS‹
->
cÚŒŞAddr
.
cÚŒŞAddrPÏš
,

241 
ÃtS‹
->
cÚŒŞAddrL’
);

242 ià(!
»t
) {

245 
»t
 = 
	`£nd
Ğ
ÃtS‹
->
cÚŒŞSock
, 
buff
, 4, 0 );

246 } 
»t
 < 0 && 
”ºo
 =ğ
EINTR
);

248 ià(
»t
 >= 0) {

249 
	`LOGV
("PID s’ˆa '%.*s'ØADB\n", 4, 
buff
);

253 
	`LOGE
("Weird, can't send JDWP…rocess…ido ADB: %s\n",

254 
	`¡»¼Ü
(
”ºo
));

255  
çl£
;

257 
	`LOGV
("Can't connecto ADB control socket:%s\n",

258 
	`¡»¼Ü
(
”ºo
));

260 
	`u¦“p
Ğ
¦“p_ms
*1000 );

262 
¦“p_ms
 += (sleep_ms >> 1);

263 ià(
¦“p_ms
 > 
¦“p_max_ms
)

264 
¦“p_ms
 = 
¦“p_max_ms
;

268 
	`LOGV
("tryingo„eceive file descriptor from ADB\n");

270 
ÃtS‹
->
ş›ÁSock
 = 
	`»ûiveCl›ÁFd
(netState);

271 ià(
ÃtS‹
->
shu‰šgDown
)

272  
çl£
;

274 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

275 ià(++
»ŒyCouÁ
 > 5) {

276 
	`LOGE
("adb connection max„etriesƒxceeded\n");

277  
çl£
;

279 
»Œy
;

281 
	`LOGV
("»ûived fdesütÜ %d from ADB\n", 
ÃtS‹
->
ş›ÁSock
);

282 
ÃtS‹
->
awa™šgHªdshake
 = 1;

283 
ÃtS‹
->
šputCouÁ
 = 0;

284  
Œue
;

286 
	}
}

291 
boŞ
 
	$e¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

293  
çl£
;

294 
	}
}

300 
	$şo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

302 
JdwpN‘S‹
* 
ÃtS‹
;

304 
	`as£¹
(
¡©e
 !ğ
NULL
 && s‹->
ÃtS‹
 != NULL);

306 
ÃtS‹
 = 
¡©e
->netState;

307 ià(
ÃtS‹
->
ş›ÁSock
 < 0)

310 
	`LOGV
("+++ closed JDWP <-> ADB connection\n");

312 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

313 
ÃtS‹
->
ş›ÁSock
 = -1;

314 
	}
}

322 
	$adbS‹Shutdown
(
JdwpN‘S‹
* 
ÃtS‹
)

324 
cÚŒŞSock
;

325 
ş›ÁSock
;

327 ià(
ÃtS‹
 =ğ
NULL
)

330 
ÃtS‹
->
shu‰šgDown
 = 
Œue
;

332 
ş›ÁSock
 = 
ÃtS‹
->clientSock;

333 ià(
ş›ÁSock
 >= 0) {

334 
	`shutdown
(
ş›ÁSock
, 
SHUT_RDWR
);

335 
ÃtS‹
->
ş›ÁSock
 = -1;

338 
cÚŒŞSock
 = 
ÃtS‹
->controlSock;

339 ià(
cÚŒŞSock
 >= 0) {

340 
	`shutdown
(
cÚŒŞSock
, 
SHUT_RDWR
);

341 
ÃtS‹
->
cÚŒŞSock
 = -1;

344 ià(
ÃtS‹
->
wakeFds
[1] >= 0) {

345 
	`LOGV
("+++ writingo wakePipe\n");

346 (è
	`wr™e
(
ÃtS‹
->
wakeFds
[1], "", 1);

348 
	}
}

350 
	$ÃtShutdown
(
JdwpS‹
* 
¡©e
)

352 
	`adbS‹Shutdown
(
¡©e
->
ÃtS‹
);

353 
	}
}

359 
	$ÃtF»e
(
JdwpS‹
* 
¡©e
)

361 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

363 
	`adbS‹F»e
(
ÃtS‹
);

364 
	}
}

369 
boŞ
 
	$isCÚÃùed
(
JdwpS‹
* 
¡©e
)

371  (
¡©e
->
ÃtS‹
 !ğ
NULL
 &&

372 
¡©e
->
ÃtS‹
->
ş›ÁSock
 >= 0);

373 
	}
}

378 
boŞ
 
	$awa™šgHªdshake
(
JdwpS‹
* 
¡©e
)

380  
¡©e
->
ÃtS‹
->
awa™šgHªdshake
;

381 
	}
}

386 
boŞ
 
	$haveFuÎPack‘
(
JdwpN‘S‹
* 
ÃtS‹
)

388 
Ëngth
;

390 ià(
ÃtS‹
->
awa™šgHªdshake
)

391  (
ÃtS‹
->
šputCouÁ
 >ğ(è
kMagicHªdshakeL’
);

393 ià(
ÃtS‹
->
šputCouÁ
 < 4)

394  
çl£
;

396 
Ëngth
 = 
	`g‘4BE
(
ÃtS‹
->
šputBufãr
);

397  (
ÃtS‹
->
šputCouÁ
 >ğ
Ëngth
);

398 
	}
}

406 
	$cÚsumeBy‹s
(
JdwpN‘S‹
* 
ÃtS‹
, 
couÁ
)

408 
	`as£¹
(
couÁ
 > 0);

409 
	`as£¹
(
couÁ
 <ğ
ÃtS‹
->
šputCouÁ
);

411 ià(
couÁ
 =ğ
ÃtS‹
->
šputCouÁ
) {

412 
ÃtS‹
->
šputCouÁ
 = 0;

416 
	`memmove
(
ÃtS‹
->
šputBufãr
,‚‘S‹->šputBufã¸+ 
couÁ
,

417 
ÃtS‹
->
šputCouÁ
 - 
couÁ
);

418 
ÃtS‹
->
šputCouÁ
 -ğ
couÁ
;

419 
	}
}

424 
boŞ
 
	$hªdËPack‘
(
JdwpS‹
* 
¡©e
)

426 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

427 cÚ¡ * 
buf
 = 
ÃtS‹
->
šputBufãr
;

428 
JdwpReqH—d”
 
hdr
;

429 
u4
 
Ëngth
, 
id
;

430 
u1
 
æags
, 
cmdS‘
, 
cmd
;

431 
u2
 
”rÜ
;

432 
boŞ
 
»¶y
;

433 
d©aL’
;

435 
cmd
 = 
cmdS‘
 = 0;

439 
Ëngth
 = 
	`»ad4BE
(&
buf
);

440 
id
 = 
	`»ad4BE
(&
buf
);

441 
æags
 = 
	`»ad1
(&
buf
);

442 ià((
æags
 & 
kJDWPFÏgR•ly
) != 0) {

443 
»¶y
 = 
Œue
;

444 
”rÜ
 = 
	`»ad2BE
(&
buf
);

446 
»¶y
 = 
çl£
;

447 
cmdS‘
 = 
	`»ad1
(&
buf
);

448 
cmd
 = 
	`»ad1
(&
buf
);

451 
	`as£¹
((è
Ëngth
 <ğ
ÃtS‹
->
šputCouÁ
);

452 
d©aL’
 = 
Ëngth
 - (
buf
 - 
ÃtS‹
->
šputBufãr
);

454 ià(!
»¶y
) {

455 
Ex·ndBuf
* 
pR•ly
 = 
	`ex·ndBufAÎoc
();

457 
hdr
.
Ëngth
 =†ength;

458 
hdr
.
id
 = id;

459 
hdr
.
cmdS‘
 = cmdSet;

460 
hdr
.
cmd
 = cmd;

461 
	`dvmJdwpProûssReque¡
(
¡©e
, &
hdr
, 
buf
, 
d©aL’
, 
pR•ly
);

462 ià(
	`ex·ndBufG‘L’gth
(
pR•ly
) > 0) {

463 
cc
;

470 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
, 
	`ex·ndBufG‘Bufãr
(
pR•ly
),

471 
	`ex·ndBufG‘L’gth
(
pR•ly
));

472 ià(
cc
 !ğ(è
	`ex·ndBufG‘L’gth
(
pR•ly
)) {

473 
	`LOGE
("Faed s’dšg„•lyØdebugg”: %s\n", 
	`¡»¼Ü
(
”ºo
));

474 
	`ex·ndBufF»e
(
pR•ly
);

475  
çl£
;

478 
	`LOGW
("NØ»¶y c»©ed fÜ s‘=%d cmd=%d\n", 
cmdS‘
, 
cmd
);

480 
	`ex·ndBufF»e
(
pR•ly
);

482 
	`LOGV
("reply?!\n");

483 
	`as£¹
(
çl£
);

486 
	`LOGV
("----------\n");

488 
	`cÚsumeBy‹s
(
ÃtS‹
, 
Ëngth
);

489  
Œue
;

490 
	}
}

507 
boŞ
 
	$´oûssIncomšg
(
JdwpS‹
* 
¡©e
)

509 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

510 
»adCouÁ
;

512 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 >= 0);

514 ià(!
	`haveFuÎPack‘
(
ÃtS‹
)) {

516 
”ºo
 = 0;

518 
£lCouÁ
;

519 
fd_£t
 
»adfds
;

520 
maxfd
 = -1;

521 
fd
;

523 
	`FD_ZERO
(&
»adfds
);

526 
fd
 = 
ÃtS‹
->
cÚŒŞSock
;

527 ià(
fd
 >= 0) {

528 
	`FD_SET
(
fd
, &
»adfds
);

529 ià(
maxfd
 < 
fd
)

530 
maxfd
 = 
fd
;

532 
fd
 = 
ÃtS‹
->
ş›ÁSock
;

533 ià(
fd
 >= 0) {

534 
	`FD_SET
(
fd
, &
»adfds
);

535 ià(
maxfd
 < 
fd
)

536 
maxfd
 = 
fd
;

538 
fd
 = 
ÃtS‹
->
wakeFds
[0];

539 ià(
fd
 >= 0) {

540 
	`FD_SET
(
fd
, &
»adfds
);

541 ià(
maxfd
 < 
fd
)

542 
maxfd
 = 
fd
;

544 
	`LOGI
("NOTE:ƒntering select w/o wakepipe\n");

547 ià(
maxfd
 < 0) {

548 
	`LOGV
("+++‡ll fds‡re closed\n");

549  
çl£
;

564 
£lCouÁ
 = 
	`£Ëù
(
maxfd
+1, &
»adfds
, 
NULL
, NULL, NULL);

565 ià(
£lCouÁ
 < 0) {

566 ià(
”ºo
 =ğ
EINTR
)

568 
	`LOGE
("£Ëù faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

569 
ç
;

572 ià(
ÃtS‹
->
wakeFds
[0] >= 0 &&

573 
	`FD_ISSET
(
ÃtS‹
->
wakeFds
[0], &
»adfds
))

575 
	`LOGD
("Got wake-up signal, bailing out of select\n");

576 
ç
;

578 ià(
ÃtS‹
->
cÚŒŞSock
 >= 0 &&

579 
	`FD_ISSET
(
ÃtS‹
->
cÚŒŞSock
, &
»adfds
))

581 
sock
 = 
	`»ûiveCl›ÁFd
(
ÃtS‹
);

582 ià(
sock
 >= 0) {

583 
	`LOGI
("Ignoring second debugger --‡ccepting‡nd dropping\n");

584 
	`şo£
(
sock
);

586 
	`as£¹
(
ÃtS‹
->
cÚŒŞSock
 < 0);

594 ià(
ÃtS‹
->
ş›ÁSock
 >= 0 &&

595 
	`FD_ISSET
(
ÃtS‹
->
ş›ÁSock
, &
»adfds
))

597 
»adCouÁ
 = 
	`»ad
(
ÃtS‹
->
ş›ÁSock
,

598 
ÃtS‹
->
šputBufãr
 +‚‘S‹->
šputCouÁ
,

599 (
ÃtS‹
->
šputBufãr
è-‚‘S‹->
šputCouÁ
);

600 ià(
»adCouÁ
 < 0) {

602 ià(
”ºo
 !ğ
EINTR
)

603 
ç
;

604 
	`LOGD
("+++ EINTR hit\n");

605  
Œue
;

606 } ià(
»adCouÁ
 == 0) {

608 
	`LOGV
("+++…eer disconnected\n");

609 
ç
;

615 
ÃtS‹
->
šputCouÁ
 +ğ
»adCouÁ
;

616 ià(!
	`haveFuÎPack‘
(
ÃtS‹
))

617  
Œue
;

628 ià(
ÃtS‹
->
awa™šgHªdshake
) {

629 
cc
;

631 ià(
	`memcmp
(
ÃtS‹
->
šputBufãr
,

632 
kMagicHªdshake
, 
kMagicHªdshakeL’
) != 0)

634 
	`LOGE
("ERROR: bad hªdshak'%.14s'\n", 
ÃtS‹
->
šputBufãr
);

635 
ç
;

638 
”ºo
 = 0;

639 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
,‚‘S‹->
šputBufãr
,

640 
kMagicHªdshakeL’
);

641 ià(
cc
 !ğ
kMagicHªdshakeL’
) {

642 
	`LOGE
("Failed writing handshake bytes: %s (%d of %d)\n",

643 
	`¡»¼Ü
(
”ºo
), 
cc
, (è
kMagicHªdshakeL’
);

644 
ç
;

647 
	`cÚsumeBy‹s
(
ÃtS‹
, 
kMagicHªdshakeL’
);

648 
ÃtS‹
->
awa™šgHªdshake
 = 
çl£
;

649 
	`LOGV
("+++ handshake complete\n");

650  
Œue
;

656  
	`hªdËPack‘
(
¡©e
);

658 
ç
:

659 
	`şo£CÚÃùiÚ
(
¡©e
);

660  
çl£
;

661 
	}
}

671 
boŞ
 
	$£ndReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
)

673 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

674 
cc
;

677 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

679 
	`LOGV
("NOT sending„equest --‚o debugger is‡ttached\n");

680  
çl£
;

688 
”ºo
 = 0;

689 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
, 
	`ex·ndBufG‘Bufãr
(
pReq
),

690 
	`ex·ndBufG‘L’gth
(
pReq
));

691 ià(
cc
 !ğ(è
	`ex·ndBufG‘L’gth
(
pReq
)) {

692 
	`LOGE
("Failed sending„eqo debugger: %s (%d of %d)\n",

693 
	`¡»¼Ü
(
”ºo
), 
cc
, (è
	`ex·ndBufG‘L’gth
(
pReq
));

694  
çl£
;

697  
Œue
;

698 
	}
}

704 cÚ¡ 
JdwpT¿n¥Üt
 
	gsock‘T¿n¥Üt
 = {

705 
¡¬tup
,

706 
acû±CÚÃùiÚ
,

707 
e¡ablishCÚÃùiÚ
,

708 
şo£CÚÃùiÚ
,

709 
ÃtShutdown
,

710 
ÃtF»e
,

711 
isCÚÃùed
,

712 
awa™šgHªdshake
,

713 
´oûssIncomšg
,

714 
£ndReque¡


720 cÚ¡ 
JdwpT¿n¥Üt
* 
	$dvmJdwpAndroidAdbT¿n¥Üt
()

722  &
sock‘T¿n¥Üt
;

723 
	}
}

	@jdwp/JdwpConstants.c

21 
	~"jdwp/JdwpCÚ¡ªts.h
"

26 cÚ¡ * 
	$dvmJdwpE¼ÜSŒ
(
JdwpE¼Ü
 
”rÜ
)

28 
”rÜ
) {

29 
ERR_NONE
:

31 
ERR_INVALID_THREAD
:

33 
ERR_INVALID_THREAD_GROUP
:

35 
ERR_INVALID_PRIORITY
:

37 
ERR_THREAD_NOT_SUSPENDED
:

39 
ERR_THREAD_SUSPENDED
:

41 
ERR_INVALID_OBJECT
:

43 
ERR_INVALID_CLASS
:

45 
ERR_CLASS_NOT_PREPARED
:

47 
ERR_INVALID_METHODID
:

49 
ERR_INVALID_LOCATION
:

51 
ERR_INVALID_FIELDID
:

53 
ERR_INVALID_FRAMEID
:

55 
ERR_NO_MORE_FRAMES
:

57 
ERR_OPAQUE_FRAME
:

59 
ERR_NOT_CURRENT_FRAME
:

61 
ERR_TYPE_MISMATCH
:

63 
ERR_INVALID_SLOT
:

65 
ERR_DUPLICATE
:

67 
ERR_NOT_FOUND
:

69 
ERR_INVALID_MONITOR
:

71 
ERR_NOT_MONITOR_OWNER
:

73 
ERR_INTERRUPT
:

75 
ERR_INVALID_CLASS_FORMAT
:

77 
ERR_CIRCULAR_CLASS_DEFINITION
:

79 
ERR_FAILS_VERIFICATION
:

81 
ERR_ADD_METHOD_NOT_IMPLEMENTED
:

83 
ERR_SCHEMA_CHANGE_NOT_IMPLEMENTED
:

85 
ERR_INVALID_TYPESTATE
:

87 
ERR_HIERARCHY_CHANGE_NOT_IMPLEMENTED
:

89 
ERR_DELETE_METHOD_NOT_IMPLEMENTED
:

91 
ERR_UNSUPPORTED_VERSION
:

93 
ERR_NAMES_DONT_MATCH
:

95 
ERR_CLASS_MODIFIERS_CHANGE_NOT_IMPLEMENTED
:

97 
ERR_METHOD_MODIFIERS_CHANGE_NOT_IMPLEMENTED
:

99 
ERR_NOT_IMPLEMENTED
:

101 
ERR_NULL_POINTER
:

103 
ERR_ABSENT_INFORMATION
:

105 
ERR_INVALID_EVENT_TYPE
:

107 
ERR_ILLEGAL_ARGUMENT
:

109 
ERR_OUT_OF_MEMORY
:

111 
ERR_ACCESS_DENIED
:

113 
ERR_VM_DEAD
:

115 
ERR_INTERNAL
:

117 
ERR_UNATTACHED_THREAD
:

119 
ERR_INVALID_TAG
:

121 
ERR_ALREADY_INVOKING
:

123 
ERR_INVALID_INDEX
:

125 
ERR_INVALID_LENGTH
:

127 
ERR_INVALID_STRING
:

129 
ERR_INVALID_CLASS_LOADER
:

131 
ERR_INVALID_ARRAY
:

133 
ERR_TRANSPORT_LOAD
:

135 
ERR_TRANSPORT_INIT
:

137 
ERR_NATIVE_METHOD
:

139 
ERR_INVALID_COUNT
:

144 
	}
}

149 cÚ¡ * 
	$dvmJdwpEv’tKšdSŒ
(
JdwpEv’tKšd
 
kšd
)

151 
kšd
) {

152 
EK_SINGLE_STEP
:  "SINGLE_STEP";

153 
EK_BREAKPOINT
:  "BREAKPOINT";

154 
EK_FRAME_POP
:  "FRAME_POP";

155 
EK_EXCEPTION
:  "EXCEPTION";

156 
EK_USER_DEFINED
:  "USER_DEFINED";

157 
EK_THREAD_START
:  "THREAD_START";

159 
EK_CLASS_PREPARE
:  "CLASS_PREPARE";

160 
EK_CLASS_UNLOAD
:  "CLASS_UNLOAD";

161 
EK_CLASS_LOAD
:  "CLASS_LOAD";

162 
EK_FIELD_ACCESS
:  "FIELD_ACCESS";

163 
EK_FIELD_MODIFICATION
:  "FIELD_MODIFICATION";

164 
EK_EXCEPTION_CATCH
:  "EXCEPTION_CATCH";

165 
EK_METHOD_ENTRY
:  "METHOD_ENTRY";

166 
EK_METHOD_EXIT
:  "METHOD_EXIT";

167 
EK_VM_INIT
:  "VM_INIT";

168 
EK_VM_DEATH
:  "VM_DEATH";

169 
EK_VM_DISCONNECTED
:  "VM_DISCONNECTED";

171 
EK_THREAD_DEATH
:  "THREAD_DEATH";

174 
	}
}

179 cÚ¡ * 
	$dvmJdwpS‹pD•thSŒ
(
JdwpS‹pD•th
 
d•th
)

181 
d•th
) {

182 
SD_INTO
:  "INTO";

183 
SD_OVER
:  "OVER";

184 
SD_OUT
:  "OUT";

187 
	}
}

192 cÚ¡ * 
	$dvmJdwpS‹pSizeSŒ
(
JdwpS‹pSize
 
size
)

194 
size
) {

195 
SS_MIN
:  "MIN";

196 
SS_LINE
:  "LINE";

199 
	}
}

204 cÚ¡ * 
	$dvmJdwpSu¥’dPŞicySŒ
(
JdwpSu¥’dPŞicy
 
pŞicy
)

206 
pŞicy
) {

207 
SP_NONE
:  "NONE";

208 
SP_EVENT_THREAD
:  "EVENT_THREAD";

209 
SP_ALL
:  "ALL";

212 
	}
}

217 cÚ¡ * 
	$dvmJdwpSu¥’dStusSŒ
(
JdwpSu¥’dStus
 
¡©us
)

219 
¡©us
) {

221 
SUSPEND_STATUS_SUSPENDED
:  "SUSPENDED";

224 
	}
}

229 cÚ¡ * 
	$dvmJdwpTh»adStusSŒ
(
JdwpTh»adStus
 
¡©us
)

231 
¡©us
) {

232 
TS_ZOMBIE
:  "ZOMBIE";

233 
TS_RUNNING
:  "RUNNING";

234 
TS_SLEEPING
:  "SLEEPING";

235 
TS_MONITOR
:  "MONITOR";

236 
TS_WAIT
:  "WAIT";

239 
	}
};

	@jdwp/JdwpConstants.h

19 #iâdeà
_DALVIK_JDWP_JDWPCONSTANTS


20 
	#_DALVIK_JDWP_JDWPCONSTANTS


	)

25 
	eJdwpE¼Ü
 {

26 
	mERR_NONE
 = 0,

27 
	mERR_INVALID_THREAD
 = 10,

28 
	mERR_INVALID_THREAD_GROUP
 = 11,

29 
	mERR_INVALID_PRIORITY
 = 12,

30 
	mERR_THREAD_NOT_SUSPENDED
 = 13,

31 
	mERR_THREAD_SUSPENDED
 = 14,

32 
	mERR_INVALID_OBJECT
 = 20,

33 
	mERR_INVALID_CLASS
 = 21,

34 
	mERR_CLASS_NOT_PREPARED
 = 22,

35 
	mERR_INVALID_METHODID
 = 23,

36 
	mERR_INVALID_LOCATION
 = 24,

37 
	mERR_INVALID_FIELDID
 = 25,

38 
	mERR_INVALID_FRAMEID
 = 30,

39 
	mERR_NO_MORE_FRAMES
 = 31,

40 
	mERR_OPAQUE_FRAME
 = 32,

41 
	mERR_NOT_CURRENT_FRAME
 = 33,

42 
	mERR_TYPE_MISMATCH
 = 34,

43 
	mERR_INVALID_SLOT
 = 35,

44 
	mERR_DUPLICATE
 = 40,

45 
	mERR_NOT_FOUND
 = 41,

46 
	mERR_INVALID_MONITOR
 = 50,

47 
	mERR_NOT_MONITOR_OWNER
 = 51,

48 
	mERR_INTERRUPT
 = 52,

49 
	mERR_INVALID_CLASS_FORMAT
 = 60,

50 
	mERR_CIRCULAR_CLASS_DEFINITION
 = 61,

51 
	mERR_FAILS_VERIFICATION
 = 62,

52 
	mERR_ADD_METHOD_NOT_IMPLEMENTED
 = 63,

53 
	mERR_SCHEMA_CHANGE_NOT_IMPLEMENTED
 = 64,

54 
	mERR_INVALID_TYPESTATE
 = 65,

55 
	mERR_HIERARCHY_CHANGE_NOT_IMPLEMENTED
 = 66,

56 
	mERR_DELETE_METHOD_NOT_IMPLEMENTED
 = 67,

57 
	mERR_UNSUPPORTED_VERSION
 = 68,

58 
	mERR_NAMES_DONT_MATCH
 = 69,

59 
	mERR_CLASS_MODIFIERS_CHANGE_NOT_IMPLEMENTED
 = 70,

60 
	mERR_METHOD_MODIFIERS_CHANGE_NOT_IMPLEMENTED
 = 71,

61 
	mERR_NOT_IMPLEMENTED
 = 99,

62 
	mERR_NULL_POINTER
 = 100,

63 
	mERR_ABSENT_INFORMATION
 = 101,

64 
	mERR_INVALID_EVENT_TYPE
 = 102,

65 
	mERR_ILLEGAL_ARGUMENT
 = 103,

66 
	mERR_OUT_OF_MEMORY
 = 110,

67 
	mERR_ACCESS_DENIED
 = 111,

68 
	mERR_VM_DEAD
 = 112,

69 
	mERR_INTERNAL
 = 113,

70 
	mERR_UNATTACHED_THREAD
 = 115,

71 
	mERR_INVALID_TAG
 = 500,

72 
	mERR_ALREADY_INVOKING
 = 502,

73 
	mERR_INVALID_INDEX
 = 503,

74 
	mERR_INVALID_LENGTH
 = 504,

75 
	mERR_INVALID_STRING
 = 506,

76 
	mERR_INVALID_CLASS_LOADER
 = 507,

77 
	mERR_INVALID_ARRAY
 = 508,

78 
	mERR_TRANSPORT_LOAD
 = 509,

79 
	mERR_TRANSPORT_INIT
 = 510,

80 
	mERR_NATIVE_METHOD
 = 511,

81 
	mERR_INVALID_COUNT
 = 512,

83 
JdwpE¼Ü
 
	tJdwpE¼Ü
;

84 cÚ¡ * 
dvmJdwpE¼ÜSŒ
(
JdwpE¼Ü
 
”rÜ
);

90 
	eJdwpCÏssStus
 {

91 
	mCS_VERIFIED
 = 0x01,

92 
	mCS_PREPARED
 = 0x02,

93 
	mCS_INITIALIZED
 = 0x04,

94 
	mCS_ERROR
 = 0x08,

100 
	eJdwpEv’tKšd
 {

101 
	mEK_SINGLE_STEP
 = 1,

102 
	mEK_BREAKPOINT
 = 2,

103 
	mEK_FRAME_POP
 = 3,

104 
	mEK_EXCEPTION
 = 4,

105 
	mEK_USER_DEFINED
 = 5,

106 
	mEK_THREAD_START
 = 6,

107 
	mEK_THREAD_END
 = 7,

108 
	mEK_CLASS_PREPARE
 = 8,

109 
	mEK_CLASS_UNLOAD
 = 9,

110 
	mEK_CLASS_LOAD
 = 10,

111 
	mEK_FIELD_ACCESS
 = 20,

112 
	mEK_FIELD_MODIFICATION
 = 21,

113 
	mEK_EXCEPTION_CATCH
 = 30,

114 
	mEK_METHOD_ENTRY
 = 40,

115 
	mEK_METHOD_EXIT
 = 41,

116 
	mEK_VM_INIT
 = 90,

117 
	mEK_VM_DEATH
 = 99,

118 
	mEK_VM_DISCONNECTED
 = 100,

119 
	mEK_VM_START
 = 
EK_VM_INIT
,

120 
	mEK_THREAD_DEATH
 = 
EK_THREAD_END
,

122 cÚ¡ * 
dvmJdwpEv’tKšdSŒ
(
JdwpEv’tKšd
 
kšd
);

127 
	eJdwpModKšd
 {

128 
	mMK_COUNT
 = 1,

129 
	mMK_CONDITIONAL
 = 2,

130 
	mMK_THREAD_ONLY
 = 3,

131 
	mMK_CLASS_ONLY
 = 4,

132 
	mMK_CLASS_MATCH
 = 5,

133 
	mMK_CLASS_EXCLUDE
 = 6,

134 
	mMK_LOCATION_ONLY
 = 7,

135 
	mMK_EXCEPTION_ONLY
 = 8,

136 
	mMK_FIELD_ONLY
 = 9,

137 
	mMK_STEP
 = 10,

138 
	mMK_INSTANCE_ONLY
 = 11,

144 
	eJdwpInvokeO±iÚs
 {

145 
	mINVOKE_SINGLE_THREADED
 = 0x01,

146 
	mINVOKE_NONVIRTUAL
 = 0x02,

152 
	eJdwpS‹pD•th
 {

153 
	mSD_INTO
 = 0,

154 
	mSD_OVER
 = 1,

155 
	mSD_OUT
 = 2,

157 cÚ¡ * 
dvmJdwpS‹pD•thSŒ
(
JdwpS‹pD•th
 
d•th
);

162 
	eJdwpS‹pSize
 {

163 
	mSS_MIN
 = 0,

164 
	mSS_LINE
 = 1,

166 cÚ¡ * 
dvmJdwpS‹pSizeSŒ
(
JdwpS‹pSize
 
size
);

171 
	eJdwpSu¥’dPŞicy
 {

172 
	mSP_NONE
 = 0,

173 
	mSP_EVENT_THREAD
 = 1,

174 
	mSP_ALL
 = 2,

176 cÚ¡ * 
dvmJdwpSu¥’dPŞicySŒ
(
JdwpSu¥’dPŞicy
 
pŞicy
);

181 
	eJdwpSu¥’dStus
 {

182 
	mSUSPEND_STATUS_SUSPENDED
 = 1,

184 cÚ¡ * 
dvmJdwpSu¥’dStusSŒ
(
JdwpSu¥’dStus
 
¡©us
);

189 
	eJdwpTh»adStus
 {

190 
	mTS_ZOMBIE
 = 0,

191 
	mTS_RUNNING
 = 1,

192 
	mTS_SLEEPING
 = 2,

193 
	mTS_MONITOR
 = 3,

194 
	mTS_WAIT
 = 4,

196 cÚ¡ * 
dvmJdwpTh»adStusSŒ
(
JdwpTh»adStus
 
¡©us
);

201 
	eJdwpTy³Tag
 {

202 
	mTT_CLASS
 = 1,

203 
	mTT_INTERFACE
 = 2,

204 
	mTT_ARRAY
 = 3,

210 
	eJdwpTy³
 {

211 
	mJT_ARRAY
 = '[',

212 
	mJT_BYTE
 = 'B',

213 
	mJT_CHAR
 = 'C',

214 
	mJT_OBJECT
 = 'L',

215 
	mJT_FLOAT
 = 'F',

216 
	mJT_DOUBLE
 = 'D',

217 
	mJT_INT
 = 'I',

218 
	mJT_LONG
 = 'J',

219 
	mJT_SHORT
 = 'S',

220 
	mJT_VOID
 = 'V',

221 
	mJT_BOOLEAN
 = 'Z',

222 
	mJT_STRING
 = 's',

223 
	mJT_THREAD
 = 't',

224 
	mJT_THREAD_GROUP
 = 'g',

225 
	mJT_CLASS_LOADER
 = 'l',

226 
	mJT_CLASS_OBJECT
 = 'c',

	@jdwp/JdwpEvent.c

19 
	~"jdwp/JdwpPriv.h
"

20 
	~"jdwp/JdwpCÚ¡ªts.h
"

21 
	~"jdwp/JdwpHªdËr.h
"

22 
	~"jdwp/JdwpEv’t.h
"

23 
	~"jdwp/Ex·ndBuf.h
"

25 
	~<¡dlib.h
>

26 
	~<¡ršg.h
>

27 
	~<¡ddef.h
>

28 
	~<uni¡d.h
>

95 
	#kJdwpEv’tCommªdS‘
 64

	)

96 
	#kJdwpCompos™eCommªd
 100

	)

103 
	sModBask‘
 {

104 cÚ¡ 
JdwpLoÿtiÚ
* 
	mpLoc
;

105 cÚ¡ * 
	mşassName
;

106 
ObjeùId
 
	mth»adId
;

107 
RefTy³Id
 
	mşassId
;

108 
RefTy³Id
 
	mexûpCÏssId
;

109 
boŞ
 
	mÿught
;

110 
F›ldId
 
	mf›ld
;

111 
ObjeùId
 
	mthisPŒ
;

113 } 
	tModBask‘
;

119 
u4
 
	$dvmJdwpNextReque¡S”Ÿl
(
JdwpS‹
* 
¡©e
)

121 
u4
 
»suÉ
;

123 
	`dvmDbgLockMu‹x
(&
¡©e
->
£rŸlLock
);

124 
»suÉ
 = 
¡©e
->
»que¡S”Ÿl
++;

125 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
£rŸlLock
);

127  
»suÉ
;

128 
	}
}

134 
u4
 
	$dvmJdwpNextEv’tS”Ÿl
(
JdwpS‹
* 
¡©e
)

136 
u4
 
»suÉ
;

138 
	`dvmDbgLockMu‹x
(&
¡©e
->
£rŸlLock
);

139 
»suÉ
 = 
¡©e
->
ev’tS”Ÿl
++;

140 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
£rŸlLock
);

142  
»suÉ
;

143 
	}
}

148 
	$lockEv’tMu‹x
(
JdwpS‹
* 
¡©e
)

151 
	`dvmDbgLockMu‹x
(&
¡©e
->
ev’tLock
);

153 
	}
}

158 
	$uÆockEv’tMu‹x
(
JdwpS‹
* 
¡©e
)

160 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
ev’tLock
);

161 
	}
}

170 
JdwpE¼Ü
 
	$dvmJdwpRegi¡”Ev’t
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
)

172 
JdwpE¼Ü
 
”r
 = 
ERR_NONE
;

173 
i
;

175 
	`lockEv’tMu‹x
(
¡©e
);

177 
	`as£¹
(
¡©e
 !ğ
NULL
);

178 
	`as£¹
(
pEv’t
 !ğ
NULL
);

179 
	`as£¹
(
pEv’t
->
´ev
 =ğ
NULL
);

180 
	`as£¹
(
pEv’t
->
Ãxt
 =ğ
NULL
);

186 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

187 
JdwpEv’tMod
* 
pMod
 = &
pEv’t
->
mods
[
i
];

188 ià(
pMod
->
modKšd
 =ğ
MK_LOCATION_ONLY
) {

190 
	`dvmDbgW©chLoÿtiÚ
(&
pMod
->
loÿtiÚOÆy
.
loc
);

192 ià(
pMod
->
modKšd
 =ğ
MK_STEP
) {

194 
	`dvmDbgCÚfigu»S‹p
(
pMod
->
¡•
.
th»adId
,…Mod->¡•.
size
,

195 
pMod
->
¡•
.
d•th
);

202 ià(
¡©e
->
ev’tLi¡
 !ğ
NULL
) {

203 
pEv’t
->
Ãxt
 = 
¡©e
->
ev’tLi¡
;

204 
¡©e
->
ev’tLi¡
->
´ev
 = 
pEv’t
;

206 
¡©e
->
ev’tLi¡
 = 
pEv’t
;

207 
¡©e
->
numEv’ts
++;

209 
ba
:

210 
	`uÆockEv’tMu‹x
(
¡©e
);

212  
”r
;

213 
	}
}

223 
	$uÄegi¡”Ev’t
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
)

225 
i
;

227 ià(
pEv’t
->
´ev
 =ğ
NULL
) {

229 
	`as£¹
(
¡©e
->
ev’tLi¡
 =ğ
pEv’t
);

231 
¡©e
->
ev’tLi¡
 = 
pEv’t
->
Ãxt
;

233 
pEv’t
->
´ev
->
Ãxt
 =…Event->next;

236 ià(
pEv’t
->
Ãxt
 !ğ
NULL
) {

237 
pEv’t
->
Ãxt
->
´ev
 =…Event->prev;

238 
pEv’t
->
Ãxt
 = 
NULL
;

240 
pEv’t
->
´ev
 = 
NULL
;

245 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

246 
JdwpEv’tMod
* 
pMod
 = &
pEv’t
->
mods
[
i
];

247 ià(
pMod
->
modKšd
 =ğ
MK_LOCATION_ONLY
) {

249 
	`dvmDbgUnw©chLoÿtiÚ
(&
pMod
->
loÿtiÚOÆy
.
loc
);

251 ià(
pMod
->
modKšd
 =ğ
MK_STEP
) {

253 
	`dvmDbgUncÚfigu»S‹p
(
pMod
->
¡•
.
th»adId
);

257 
¡©e
->
numEv’ts
--;

258 
	`as£¹
(
¡©e
->
numEv’ts
 !ğ0 || s‹->
ev’tLi¡
 =ğ
NULL
);

259 
	}
}

268 
	$dvmJdwpUÄegi¡”Ev’tById
(
JdwpS‹
* 
¡©e
, 
u4
 
»que¡Id
)

270 
JdwpEv’t
* 
pEv’t
;

272 
	`lockEv’tMu‹x
(
¡©e
);

274 
pEv’t
 = 
¡©e
->
ev’tLi¡
;

275 
pEv’t
 !ğ
NULL
) {

276 ià(
pEv’t
->
»que¡Id
 ==„equestId) {

277 
	`uÄegi¡”Ev’t
(
¡©e
, 
pEv’t
);

278 
	`dvmJdwpEv’tF»e
(
pEv’t
);

279 
dÚe
;

282 
pEv’t
 =…Ev’t->
Ãxt
;

287 
dÚe
:

288 
	`uÆockEv’tMu‹x
(
¡©e
);

289 
	}
}

294 
	$dvmJdwpUÄegi¡”AÎ
(
JdwpS‹
* 
¡©e
)

296 
JdwpEv’t
* 
pEv’t
;

297 
JdwpEv’t
* 
pNextEv’t
;

299 
	`lockEv’tMu‹x
(
¡©e
);

301 
pEv’t
 = 
¡©e
->
ev’tLi¡
;

302 
pEv’t
 !ğ
NULL
) {

303 
pNextEv’t
 = 
pEv’t
->
Ãxt
;

305 
	`uÄegi¡”Ev’t
(
¡©e
, 
pEv’t
);

306 
	`dvmJdwpEv’tF»e
(
pEv’t
);

307 
pEv’t
 = 
pNextEv’t
;

310 
¡©e
->
ev’tLi¡
 = 
NULL
;

312 
	`uÆockEv’tMu‹x
(
¡©e
);

313 
	}
}

321 
JdwpEv’t
* 
	$dvmJdwpEv’tAÎoc
(
numMods
)

323 
JdwpEv’t
* 
ÃwEv’t
;

324 
®locSize
 = 
	`off£tof
(
JdwpEv’t
, 
mods
) +

325 
numMods
 * (
ÃwEv’t
->
mods
[0]);

327 
ÃwEv’t
 = (
JdwpEv’t
*)
	`m®loc
(
®locSize
);

328 
	`mem£t
(
ÃwEv’t
, 0, 
®locSize
);

329  
ÃwEv’t
;

330 
	}
}

337 
	$dvmJdwpEv’tF»e
(
JdwpEv’t
* 
pEv’t
)

339 
i
;

341 ià(
pEv’t
 =ğ
NULL
)

345 
	`as£¹
(
pEv’t
->
´ev
 =ğ
NULL
);

346 
	`as£¹
(
pEv’t
->
Ãxt
 =ğ
NULL
);

352 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

353 ià(
pEv’t
->
mods
[
i
].
modKšd
 =ğ
MK_CLASS_MATCH
) {

354 
	`ä“
(
pEv’t
->
mods
[
i
].
şassM©ch
.
şassP©‹º
);

355 
pEv’t
->
mods
[
i
].
şassM©ch
.
şassP©‹º
 = 
NULL
;

357 ià(
pEv’t
->
mods
[
i
].
modKšd
 =ğ
MK_CLASS_EXCLUDE
) {

358 
	`ä“
(
pEv’t
->
mods
[
i
].
şassExşude
.
şassP©‹º
);

359 
pEv’t
->
mods
[
i
].
şassExşude
.
şassP©‹º
 = 
NULL
;

363 
	`ä“
(
pEv’t
);

364 
	}
}

372 
JdwpEv’t
** 
	$®locM©chLi¡
(
JdwpS‹
* 
¡©e
)

374  (
JdwpEv’t
**è
	`m®loc
((JdwpEv’t*è* 
¡©e
->
numEv’ts
);

375 
	}
}

381 
	$ş—nupM©chLi¡
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
** 
m©chLi¡
,

382 
m©chCouÁ
)

384 
JdwpEv’t
** 
µEv’t
 = 
m©chLi¡
;

386 
m©chCouÁ
--) {

387 
JdwpEv’t
* 
pEv’t
 = *
µEv’t
;

388 
i
;

390 
i
 = 0; i < 
pEv’t
->
modCouÁ
; i++) {

391 ià(
pEv’t
->
mods
[
i
].
modKšd
 =ğ
MK_COUNT
 &&

392 
pEv’t
->
mods
[
i
].
couÁ
.count == 0)

394 
	`LOGV
("##### Removingƒxpiredƒvent\n");

395 
	`uÄegi¡”Ev’t
(
¡©e
, 
pEv’t
);

396 
	`dvmJdwpEv’tF»e
(
pEv’t
);

401 
µEv’t
++;

404 
	`ä“
(
m©chLi¡
);

405 
	}
}

413 
boŞ
 
	$·‰”nM©ch
(cÚ¡ * 
·‰”n
, cÚ¡ * 
rg‘
)

415 
·tL’
 = 
	`¡¾’
(
·‰”n
);

417 ià(
·‰”n
[0] == '*') {

418 
rg‘L’
 = 
	`¡¾’
(
rg‘
);

419 
·tL’
--;

421 
	`LOGE
(">>> comparing '%s'o '%s'\n",

422 
·‰”n
+1, 
rg‘
 + (
rg‘L’
-
·tL’
));

424 ià(
rg‘L’
 < 
·tL’
)

425  
çl£
;

426  
	`¡rcmp
(
·‰”n
+1, 
rg‘
 + (
rg‘L’
-
·tL’
)) == 0;

427 } ià(
·‰”n
[
·tL’
-1] == '*') {

428 
i
;

430  
	`¡ºcmp
(
·‰”n
, 
rg‘
, 
·tL’
-1) == 0;

432  
	`¡rcmp
(
·‰”n
, 
rg‘
) == 0;

434 
	}
}

444 
šlše
 
boŞ
 
	$loÿtiÚM©ch
(cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc1
,

445 cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc2
)

447  
pLoc1
->
idx
 =ğ
pLoc2
->idx &&

448 
pLoc1
->
m‘hodId
 =ğ
pLoc2
->methodId &&

449 
pLoc1
->
şassId
 =ğ
pLoc2
->classId &&

450 
pLoc1
->
ty³Tag
 =ğ
pLoc2
->typeTag;

451 
	}
}

459 
boŞ
 
	$modsM©ch
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
, 
ModBask‘
* 
bask‘
)

461 
JdwpEv’tMod
* 
pMod
 = 
pEv’t
->
mods
;

462 
i
;

464 
i
 = 
pEv’t
->
modCouÁ
; i > 0; i--, 
pMod
++) {

465 
pMod
->
modKšd
) {

466 
MK_COUNT
:

467 
	`as£¹
(
pMod
->
couÁ
.count > 0);

468 
pMod
->
couÁ
.count--;

470 
MK_CONDITIONAL
:

471 
	`as£¹
(
çl£
);

473 
MK_THREAD_ONLY
:

474 ià(
pMod
->
th»adOÆy
.
th»adId
 !ğ
bask‘
->threadId)

475  
çl£
;

477 
MK_CLASS_ONLY
:

478 ià(!
	`dvmDbgM©chTy³
(
bask‘
->
şassId
,

479 
pMod
->
şassOÆy
.
»ã»nûTy³Id
))

480  
çl£
;

482 
MK_CLASS_MATCH
:

483 ià(!
	`·‰”nM©ch
(
pMod
->
şassM©ch
.
şassP©‹º
,

484 
bask‘
->
şassName
))

485  
çl£
;

487 
MK_CLASS_EXCLUDE
:

488 ià(
	`·‰”nM©ch
(
pMod
->
şassM©ch
.
şassP©‹º
,

489 
bask‘
->
şassName
))

490  
çl£
;

492 
MK_LOCATION_ONLY
:

493 ià(!
	`loÿtiÚM©ch
(&
pMod
->
loÿtiÚOÆy
.
loc
, 
bask‘
->
pLoc
))

494  
çl£
;

496 
MK_EXCEPTION_ONLY
:

497 ià(
pMod
->
exû±iÚOÆy
.
»fTy³Id
 != 0 &&

498 !
	`dvmDbgM©chTy³
(
bask‘
->
exûpCÏssId
,

499 
pMod
->
exû±iÚOÆy
.
»fTy³Id
))

500  
çl£
;

501 ià((
bask‘
->
ÿught
 && !
pMod
->
exû±iÚOÆy
.caught) ||

502 (!
bask‘
->
ÿught
 && !
pMod
->
exû±iÚOÆy
.
unÿught
))

503  
çl£
;

505 
MK_FIELD_ONLY
:

508 
MK_STEP
:

509 ià(
pMod
->
¡•
.
th»adId
 !ğ
bask‘
->threadId)

510  
çl£
;

512 
MK_INSTANCE_ONLY
:

513 ià(
pMod
->
š¡ªûOÆy
.
objeùId
 !ğ
bask‘
->
thisPŒ
)

514  
çl£
;

517 
	`LOGE
("unhªdËd mod kšd %d\n", 
pMod
->
modKšd
);

518 
	`as£¹
(
çl£
);

523  
Œue
;

524 
	}
}

536 
	$fšdM©chšgEv’ts
(
JdwpS‹
* 
¡©e
, 
JdwpEv’tKšd
 
ev’tKšd
,

537 
ModBask‘
* 
bask‘
, 
JdwpEv’t
** 
m©chLi¡
, * 
pM©chCouÁ
)

539 
JdwpEv’t
* 
pEv’t
;

542 
m©chLi¡
 +ğ*
pM©chCouÁ
;

544 
pEv’t
 = 
¡©e
->
ev’tLi¡
;

545 
pEv’t
 !ğ
NULL
) {

546 ià(
pEv’t
->
ev’tKšd
 =ğev’tKšd && 
	`modsM©ch
(
¡©e
,…Ev’t, 
bask‘
))

548 *
m©chLi¡
++ = 
pEv’t
;

549 (*
pM©chCouÁ
)++;

552 
pEv’t
 =…Ev’t->
Ãxt
;

554 
	}
}

560 
JdwpSu¥’dPŞicy
 
	$sÿnSu¥’dPŞicy
(
JdwpEv’t
** 
m©chLi¡
,

561 
m©chCouÁ
)

563 
JdwpSu¥’dPŞicy
 
pŞicy
 = 
SP_NONE
;

565 
m©chCouÁ
--) {

566 ià((*
m©chLi¡
)->
su¥’dPŞicy
 > 
pŞicy
)

567 
pŞicy
 = (*
m©chLi¡
)->
su¥’dPŞicy
;

568 
m©chLi¡
++;

571  
pŞicy
;

572 
	}
}

580 
	$su¥’dByPŞicy
(
JdwpS‹
* 
¡©e
,

581 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
)

583 ià(
su¥’dPŞicy
 =ğ
SP_NONE
)

586 ià(
su¥’dPŞicy
 =ğ
SP_ALL
) {

587 
	`dvmDbgSu¥’dVM
(
Œue
);

589 
	`as£¹
(
su¥’dPŞicy
 =ğ
SP_EVENT_THREAD
);

593 ià(
	`dvmDbgG‘Th»adS–fId
(è=ğ
¡©e
->
debugTh»adId
) {

594 
	`LOGI
("NOTE: suspendByPolicy‚ot suspending JDWPhread\n");

598 
DebugInvokeReq
* 
pReq
 = 
	`dvmDbgG‘InvokeReq
();

599 
Œue
) {

600 
pReq
->
»ady
 = 
Œue
;

601 
	`dvmDbgSu¥’dS–f
();

602 
pReq
->
»ady
 = 
çl£
;

608 ià(!
pReq
->
švokeN“ded
) {

614 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
	`dvmDbgG‘Th»adS–fId
());

617 
	`LOGV
("invoking method...\n");

618 
	`dvmDbgExecu‹M‘hod
(
pReq
);

620 
pReq
->
”r
 = 
ERR_NONE
;

623 
pReq
->
švokeN“ded
 = 
çl£
;

625 
	`LOGV
("invoke complete, signaling‡nd self-suspending\n");

626 
	`dvmDbgLockMu‹x
(&
pReq
->
lock
);

627 
	`dvmDbgCÚdSigÇl
(&
pReq
->
cv
);

628 
	`dvmDbgUÆockMu‹x
(&
pReq
->
lock
);

630 
	}
}

639 
boŞ
 
	$švokeInProg»ss
(
JdwpS‹
* 
¡©e
)

641 
DebugInvokeReq
* 
pReq
 = 
	`dvmDbgG‘InvokeReq
();

642  
pReq
->
švokeN“ded
;

643 
	}
}

655 
	$dvmJdwpS‘Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
)

657 
boŞ
 
wa™ed
 = 
çl£
;

660 
	`dvmDbgLockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

666 
¡©e
->
ev’tTh»adId
 != 0) {

667 
	`LOGV
("event in…rogress (0x%llx), 0x%llx sleeping\n",

668 
¡©e
->
ev’tTh»adId
, 
th»adId
);

669 
wa™ed
 = 
Œue
;

670 
	`dvmDbgCÚdWa™
(&
¡©e
->
ev’tTh»adCÚd
, &¡©e->
ev’tTh»adLock
);

673 ià(
wa™ed
 || 
th»adId
 != 0)

674 
	`LOGV
("ev’ˆtok’ g¿bbed (0x%Îx)\n", 
th»adId
);

675 ià(
th»adId
 != 0)

676 
¡©e
->
ev’tTh»adId
 = 
th»adId
;

678 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

679 
	}
}

684 
	$dvmJdwpCË¬Wa™FÜEv’tTh»ad
(
JdwpS‹
* 
¡©e
)

691 
	`dvmDbgLockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

693 
	`as£¹
(
¡©e
->
ev’tTh»adId
 != 0);

694 
	`LOGV
("ş—»dƒv’ˆtok’ (0x%Îx)\n", 
¡©e
->
ev’tTh»adId
);

696 
¡©e
->
ev’tTh»adId
 = 0;

698 
	`dvmDbgCÚdSigÇl
(&
¡©e
->
ev’tTh»adCÚd
);

700 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
ev’tTh»adLock
);

701 
	}
}

708 
Ex·ndBuf
* 
	$ev’tP»p
()

710 
Ex·ndBuf
* 
pReq
;

712 
pReq
 = 
	`ex·ndBufAÎoc
();

713 
	`ex·ndBufAddS·û
(
pReq
, 
kJDWPH—d”L’
);

715  
pReq
;

716 
	}
}

723 
	$ev’tFšish
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
)

725 
u1
* 
buf
 = 
	`ex·ndBufG‘Bufãr
(
pReq
);

727 
	`£t4BE
(
buf
, 
	`ex·ndBufG‘L’gth
(
pReq
));

728 
	`£t4BE
(
buf
+4, 
	`dvmJdwpNextReque¡S”Ÿl
(
¡©e
));

729 
	`£t1
(
buf
+8, 0);

730 
	`£t1
(
buf
+9, 
kJdwpEv’tCommªdS‘
);

731 
	`£t1
(
buf
+10, 
kJdwpCompos™eCommªd
);

733 
	`dvmJdwpS’dReque¡
(
¡©e
, 
pReq
);

735 
	`ex·ndBufF»e
(
pReq
);

736 
	}
}

747 
boŞ
 
	$dvmJdwpPo¡VMS¹
(
JdwpS‹
* 
¡©e
, 
boŞ
 
su¥’d
)

749 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
;

750 
ObjeùId
 
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

752 ià(
su¥’d
)

753 
su¥’dPŞicy
 = 
SP_ALL
;

755 
su¥’dPŞicy
 = 
SP_NONE
;

758 
	`lockEv’tMu‹x
(
¡©e
);

760 
Ex·ndBuf
* 
pReq
 = 
NULL
;

761 ià(
Œue
) {

762 
	`LOGV
("EVENT: %s\n", 
	`dvmJdwpEv’tKšdSŒ
(
EK_VM_START
));

763 
	`LOGV
(" su¥’dPŞicy=%s\n", 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

765 
pReq
 = 
	`ev’tP»p
();

766 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

767 
	`ex·ndBufAdd4BE
(
pReq
, 1);

769 
	`ex·ndBufAdd1
(
pReq
, 
EK_VM_START
);

770 
	`ex·ndBufAdd4BE
(
pReq
, 0);

771 
	`ex·ndBufAdd8BE
(
pReq
, 
th»adId
);

774 
	`uÆockEv’tMu‹x
(
¡©e
);

777 ià(
pReq
 !ğ
NULL
) {

778 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

779 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

780 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
th»adId
);

782 
	`ev’tFšish
(
¡©e
, 
pReq
);

784 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

785 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

788  
Œue
;

789 
	}
}

812 
boŞ
 
	$dvmJdwpPo¡LoÿtiÚEv’t
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
,

813 
ObjeùId
 
thisPŒ
, 
ev’tFÏgs
)

815 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

816 
ModBask‘
 
bask‘
;

817 
JdwpEv’t
** 
m©chLi¡
;

818 
m©chCouÁ
;

819 * 
ÇmeAÎoc
 = 
NULL
;

821 
	`mem£t
(&
bask‘
, 0, (basket));

822 
bask‘
.
pLoc
 =…Loc;

823 
bask‘
.
şassId
 = 
pLoc
->classId;

824 
bask‘
.
thisPŒ
 =hisPtr;

825 
bask‘
.
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

826 
bask‘
.
şassName
 = 
ÇmeAÎoc
 =

827 
	`dvmDesütÜToName
(
	`dvmDbgG‘CÏssDesütÜ
(
pLoc
->
şassId
));

835 ià(
bask‘
.
th»adId
 =ğ
¡©e
->
debugTh»adId
) {

836 
	`LOGV
("Ignoring†ocationƒvent in JDWPhread\n");

837 
	`ä“
(
ÇmeAÎoc
);

838  
çl£
;

850 ià(
	`švokeInProg»ss
(
¡©e
)) {

851 
	`LOGV
("NÙ checkšg b»akpošt duršg invok(%s)\n", 
bask‘
.
şassName
);

852 
	`ä“
(
ÇmeAÎoc
);

853  
çl£
;

857 
	`lockEv’tMu‹x
(
¡©e
);

859 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

860 
m©chCouÁ
 = 0;

862 ià((
ev’tFÏgs
 & 
DBG_BREAKPOINT
) != 0)

863 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_BREAKPOINT
, &
bask‘
, 
m©chLi¡
,

864 &
m©chCouÁ
);

865 ià((
ev’tFÏgs
 & 
DBG_SINGLE_STEP
) != 0)

866 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_SINGLE_STEP
, &
bask‘
, 
m©chLi¡
,

867 &
m©chCouÁ
);

868 ià((
ev’tFÏgs
 & 
DBG_METHOD_ENTRY
) != 0)

869 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_METHOD_ENTRY
, &
bask‘
, 
m©chLi¡
,

870 &
m©chCouÁ
);

871 ià((
ev’tFÏgs
 & 
DBG_METHOD_EXIT
) != 0)

872 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_METHOD_EXIT
, &
bask‘
, 
m©chLi¡
,

873 &
m©chCouÁ
);

875 
Ex·ndBuf
* 
pReq
 = 
NULL
;

876 ià(
m©chCouÁ
 != 0) {

877 
i
;

879 
	`LOGV
("EVENT: %s(%dotal) %s.%shread=%llx code=%llx)\n",

880 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

881 
bask‘
.
şassName
,

882 
	`dvmDbgG‘M‘hodName
(
pLoc
->
şassId
,…Loc->
m‘hodId
),

883 
bask‘
.
th»adId
, 
pLoc
->
idx
);

885 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

886 
	`LOGV
(" suspendPolicy=%s\n",

887 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

889 
pReq
 = 
	`ev’tP»p
();

890 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

891 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

893 
i
 = 0; i < 
m©chCouÁ
; i++) {

894 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

895 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

896 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

897 
	`dvmJdwpAddLoÿtiÚ
(
pReq
, 
pLoc
);

901 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

902 
	`uÆockEv’tMu‹x
(
¡©e
);

905 ià(
pReq
 !ğ
NULL
) {

906 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

907 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

908 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

910 
	`ev’tFšish
(
¡©e
, 
pReq
);

912 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

913 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

916 
	`ä“
(
ÇmeAÎoc
);

917  
m©chCouÁ
 != 0;

918 
	}
}

926 
boŞ
 
	$dvmJdwpPo¡Th»adChªge
(
JdwpS‹
* 
¡©e
, 
ObjeùId
 
th»adId
, 
boŞ
 
¡¬t
)

928 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

929 
ModBask‘
 
bask‘
;

930 
JdwpEv’t
** 
m©chLi¡
;

931 
m©chCouÁ
;

933 
	`as£¹
(
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
());

938 ià(
	`švokeInProg»ss
(
¡©e
)) {

939 
	`LOGW
("Not…ostinghread change during invoke\n");

940  
çl£
;

943 
	`mem£t
(&
bask‘
, 0, (basket));

944 
bask‘
.
th»adId
 =hreadId;

947 
	`lockEv’tMu‹x
(
¡©e
);

949 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

950 
m©chCouÁ
 = 0;

952 ià(
¡¬t
)

953 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_THREAD_START
, &
bask‘
, 
m©chLi¡
,

954 &
m©chCouÁ
);

956 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_THREAD_DEATH
, &
bask‘
, 
m©chLi¡
,

957 &
m©chCouÁ
);

959 
Ex·ndBuf
* 
pReq
 = 
NULL
;

960 ià(
m©chCouÁ
 != 0) {

961 
i
;

963 
	`LOGV
("EVENT: %s(%dotal)hread=%llx)\n",

964 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

965 
bask‘
.
th»adId
);

967 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

968 
	`LOGV
(" suspendPolicy=%s\n",

969 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

971 
pReq
 = 
	`ev’tP»p
();

972 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

973 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

975 
i
 = 0; i < 
m©chCouÁ
; i++) {

976 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

977 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

978 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

983 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

984 
	`uÆockEv’tMu‹x
(
¡©e
);

987 ià(
pReq
 !ğ
NULL
) {

988 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

989 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

990 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

992 
	`ev’tFšish
(
¡©e
, 
pReq
);

994 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

995 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

998  
m©chCouÁ
 != 0;

999 
	}
}

1006 
boŞ
 
	$dvmJdwpPo¡VMD—th
(
JdwpS‹
* 
¡©e
)

1008 
Ex·ndBuf
* 
pReq
;

1010 
	`LOGV
("EVENT: %s\n", 
	`dvmJdwpEv’tKšdSŒ
(
EK_VM_DEATH
));

1012 
pReq
 = 
	`ev’tP»p
();

1013 
	`ex·ndBufAdd1
(
pReq
, 
SP_NONE
);

1014 
	`ex·ndBufAdd4BE
(
pReq
, 1);

1016 
	`ex·ndBufAdd1
(
pReq
, 
EK_VM_DEATH
);

1017 
	`ex·ndBufAdd4BE
(
pReq
, 0);

1018 
	`ev’tFšish
(
¡©e
, 
pReq
);

1019  
Œue
;

1020 
	}
}

1030 
boŞ
 
	$dvmJdwpPo¡Exû±iÚ
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpLoÿtiÚ
* 
pThrowLoc
,

1031 
ObjeùId
 
exû±iÚId
, 
RefTy³Id
 
exû±iÚCÏssId
,

1032 cÚ¡ 
JdwpLoÿtiÚ
* 
pC©chLoc
, 
ObjeùId
 
thisPŒ
)

1034 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

1035 
ModBask‘
 
bask‘
;

1036 
JdwpEv’t
** 
m©chLi¡
;

1037 
m©chCouÁ
;

1038 * 
ÇmeAÎoc
 = 
NULL
;

1040 
	`mem£t
(&
bask‘
, 0, (basket));

1041 
bask‘
.
pLoc
 = 
pThrowLoc
;

1042 
bask‘
.
şassId
 = 
pThrowLoc
->classId;

1043 
bask‘
.
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

1044 
bask‘
.
şassName
 = 
ÇmeAÎoc
 =

1045 
	`dvmDesütÜToName
(
	`dvmDbgG‘CÏssDesütÜ
(
bask‘
.
şassId
));

1046 
bask‘
.
exûpCÏssId
 = 
exû±iÚCÏssId
;

1047 
bask‘
.
ÿught
 = (
pC©chLoc
->
şassId
 != 0);

1048 
bask‘
.
thisPŒ
 =hisPtr;

1051 ià(
	`švokeInProg»ss
(
¡©e
)) {

1052 
	`LOGV
("NÙ…o¡šgƒxû±iÚ h™ duršg invok(%s)\n",
bask‘
.
şassName
);

1053 
	`ä“
(
ÇmeAÎoc
);

1054  
çl£
;

1058 
	`lockEv’tMu‹x
(
¡©e
);

1060 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

1061 
m©chCouÁ
 = 0;

1063 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_EXCEPTION
, &
bask‘
, 
m©chLi¡
, &
m©chCouÁ
);

1065 
Ex·ndBuf
* 
pReq
 = 
NULL
;

1066 ià(
m©chCouÁ
 != 0) {

1067 
i
;

1069 
	`LOGV
("EVENT: %s(%dotal)hread=%llxƒxceptId=%llx caught=%d)\n",

1070 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

1071 
bask‘
.
th»adId
, 
exû±iÚId
, bask‘.
ÿught
);

1072 
	`LOGV
("hrow: %d %Îx %x %Îd (%s.%s)\n", 
pThrowLoc
->
ty³Tag
,

1073 
pThrowLoc
->
şassId
,…ThrowLoc->
m‘hodId
,…ThrowLoc->
idx
,

1074 
	`dvmDbgG‘CÏssDesütÜ
(
pThrowLoc
->
şassId
),

1075 
	`dvmDbgG‘M‘hodName
(
pThrowLoc
->
şassId
,…ThrowLoc->
m‘hodId
));

1076 ià(
pC©chLoc
->
şassId
 == 0) {

1077 
	`LOGV
(" catch: (not caught)\n");

1079 
	`LOGV
(" c©ch: %d %Îx %x %Îd (%s.%s)\n", 
pC©chLoc
->
ty³Tag
,

1080 
pC©chLoc
->
şassId
,…C©chLoc->
m‘hodId
,…C©chLoc->
idx
,

1081 
	`dvmDbgG‘CÏssDesütÜ
(
pC©chLoc
->
şassId
),

1082 
	`dvmDbgG‘M‘hodName
(
pC©chLoc
->
şassId
,…C©chLoc->
m‘hodId
));

1085 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

1086 
	`LOGV
(" suspendPolicy=%s\n",

1087 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

1089 
pReq
 = 
	`ev’tP»p
();

1090 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

1091 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

1093 
i
 = 0; i < 
m©chCouÁ
; i++) {

1094 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

1095 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

1096 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

1098 
	`dvmJdwpAddLoÿtiÚ
(
pReq
, 
pThrowLoc
);

1099 
	`ex·ndBufAdd1
(
pReq
, 
JT_OBJECT
);

1100 
	`ex·ndBufAdd8BE
(
pReq
, 
exû±iÚId
);

1101 
	`dvmJdwpAddLoÿtiÚ
(
pReq
, 
pC©chLoc
);

1105 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

1106 
	`uÆockEv’tMu‹x
(
¡©e
);

1109 ià(
pReq
 !ğ
NULL
) {

1110 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

1111 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

1112 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

1114 
	`ev’tFšish
(
¡©e
, 
pReq
);

1116 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

1117 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

1120 
	`ä“
(
ÇmeAÎoc
);

1121  
m©chCouÁ
 != 0;

1122 
	}
}

1130 
boŞ
 
	$dvmJdwpPo¡CÏssP»·»
(
JdwpS‹
* 
¡©e
, 
g
, 
RefTy³Id
 
»fTy³Id
,

1131 cÚ¡ * 
sigÇtu»
, 
¡©us
)

1133 
JdwpSu¥’dPŞicy
 
su¥’dPŞicy
 = 
SP_NONE
;

1134 
ModBask‘
 
bask‘
;

1135 
JdwpEv’t
** 
m©chLi¡
;

1136 
m©chCouÁ
;

1137 * 
ÇmeAÎoc
 = 
NULL
;

1139 
	`mem£t
(&
bask‘
, 0, (basket));

1140 
bask‘
.
şassId
 = 
»fTy³Id
;

1141 
bask‘
.
th»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

1142 
bask‘
.
şassName
 = 
ÇmeAÎoc
 =

1143 
	`dvmDesütÜToName
(
	`dvmDbgG‘CÏssDesütÜ
(
bask‘
.
şassId
));

1146 ià(
	`švokeInProg»ss
(
¡©e
)) {

1147 
	`LOGV
("NÙ…o¡šg cÏs ´• cau£d by invok(%s)\n",
bask‘
.
şassName
);

1148 
	`ä“
(
ÇmeAÎoc
);

1149  
çl£
;

1153 
	`lockEv’tMu‹x
(
¡©e
);

1155 
m©chLi¡
 = 
	`®locM©chLi¡
(
¡©e
);

1156 
m©chCouÁ
 = 0;

1158 
	`fšdM©chšgEv’ts
(
¡©e
, 
EK_CLASS_PREPARE
, &
bask‘
, 
m©chLi¡
,

1159 &
m©chCouÁ
);

1161 
Ex·ndBuf
* 
pReq
 = 
NULL
;

1162 ià(
m©chCouÁ
 != 0) {

1163 
i
;

1165 
	`LOGV
("EVENT: %s(%dotal)hread=%llx)\n",

1166 
	`dvmJdwpEv’tKšdSŒ
(
m©chLi¡
[0]->
ev’tKšd
), 
m©chCouÁ
,

1167 
bask‘
.
th»adId
);

1169 
su¥’dPŞicy
 = 
	`sÿnSu¥’dPŞicy
(
m©chLi¡
, 
m©chCouÁ
);

1170 
	`LOGV
(" suspendPolicy=%s\n",

1171 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
));

1173 ià(
bask‘
.
th»adId
 =ğ
¡©e
->
debugTh»adId
) {

1179 
	`LOGV
(" NOTE: class…repare in debuggerhread!\n");

1180 
bask‘
.
th»adId
 = 0;

1181 ià(
su¥’dPŞicy
 =ğ
SP_EVENT_THREAD
)

1182 
su¥’dPŞicy
 = 
SP_ALL
;

1185 
pReq
 = 
	`ev’tP»p
();

1186 
	`ex·ndBufAdd1
(
pReq
, 
su¥’dPŞicy
);

1187 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chCouÁ
);

1189 
i
 = 0; i < 
m©chCouÁ
; i++) {

1190 
	`ex·ndBufAdd1
(
pReq
, 
m©chLi¡
[
i
]->
ev’tKšd
);

1191 
	`ex·ndBufAdd4BE
(
pReq
, 
m©chLi¡
[
i
]->
»que¡Id
);

1192 
	`ex·ndBufAdd8BE
(
pReq
, 
bask‘
.
th»adId
);

1194 
	`ex·ndBufAdd1
(
pReq
, 
g
);

1195 
	`ex·ndBufAdd8BE
(
pReq
, 
»fTy³Id
);

1196 
	`ex·ndBufAddUtf8SŒšg
(
pReq
, (cÚ¡ 
u1
*è
sigÇtu»
);

1197 
	`ex·ndBufAdd4BE
(
pReq
, 
¡©us
);

1201 
	`ş—nupM©chLi¡
(
¡©e
, 
m©chLi¡
, 
m©chCouÁ
);

1203 
	`uÆockEv’tMu‹x
(
¡©e
);

1206 ià(
pReq
 !ğ
NULL
) {

1207 
ŞdStus
 = 
	`dvmDbgTh»adWa™šg
();

1208 ià(
su¥’dPŞicy
 !ğ
SP_NONE
)

1209 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 
bask‘
.
th»adId
);

1211 
	`ev’tFšish
(
¡©e
, 
pReq
);

1213 
	`su¥’dByPŞicy
(
¡©e
, 
su¥’dPŞicy
);

1214 
	`dvmDbgTh»adCÚtšušg
(
ŞdStus
);

1217 
	`ä“
(
ÇmeAÎoc
);

1218  
m©chCouÁ
 != 0;

1219 
	}
}

1227 
boŞ
 
	$dvmJdwpPo¡CÏssUÆßd
(
JdwpS‹
* 
¡©e
, 
RefTy³Id
 
»fTy³Id
)

1229 
	`as£¹
(
çl£
);

1230  
çl£
;

1231 
	}
}

1240 
boŞ
 
	$dvmJdwpPo¡F›ldAcûss
(
JdwpS‹
* 
¡©e
, 
STUFF
, 
ObjeùId
 
thisPŒ
,

1241 
boŞ
 
modif›d
)

1243 
	`as£¹
(
çl£
);

1244  
çl£
;

1245 
	}
}

1254 
	$dvmJdwpDdmS’dChunk
(
JdwpS‹
* 
¡©e
, 
ty³
, 
Ën
, cÚ¡ 
u1
* 
buf
)

1256 
Ex·ndBuf
* 
pReq
;

1257 
u1
* 
outBuf
;

1262 
pReq
 = 
	`ex·ndBufAÎoc
();

1263 
	`ex·ndBufAddS·û
(
pReq
, 
kJDWPH—d”L’
);

1264 
	`ex·ndBufAdd4BE
(
pReq
, 
ty³
);

1265 
	`ex·ndBufAdd4BE
(
pReq
, 
Ën
);

1266 ià(
Ën
 > 0) {

1267 
outBuf
 = 
	`ex·ndBufAddS·û
(
pReq
, 
Ën
);

1268 
	`memıy
(
outBuf
, 
buf
, 
Ën
);

1274 
outBuf
 = 
	`ex·ndBufG‘Bufãr
(
pReq
);

1276 
	`£t4BE
(
outBuf
, 
	`ex·ndBufG‘L’gth
(
pReq
));

1277 
	`£t4BE
(
outBuf
+4, 
	`dvmJdwpNextReque¡S”Ÿl
(
¡©e
));

1278 
	`£t1
(
outBuf
+8, 0);

1279 
	`£t1
(
outBuf
+9, 
kJDWPDdmCmdS‘
);

1280 
	`£t1
(
outBuf
+10, 
kJDWPDdmCmd
);

1286 
	`dvmJdwpS’dReque¡
(
¡©e
, 
pReq
);

1288 
	`ex·ndBufF»e
(
pReq
);

1289 
	}
}

	@jdwp/JdwpEvent.h

19 #iâdeà
_DALVIK_JDWP_JDWPEVENT


20 
	#_DALVIK_JDWP_JDWPEVENT


	)

22 
	~"JdwpCÚ¡ªts.h
"

23 
	~"Ex·ndBuf.h
"

28 
	uJdwpEv’tMod
 {

29 
u1
 
	mmodKšd
;

31 
u1
 
	mmodKšd
;

32 
	mcouÁ
;

33 } 
	mcouÁ
;

35 
u1
 
	mmodKšd
;

36 
u4
 
	mex´Id
;

37 } 
	mcÚd™iÚ®
;

39 
u1
 
	mmodKšd
;

40 
ObjeùId
 
	mth»adId
;

41 } 
	mth»adOÆy
;

43 
u1
 
	mmodKšd
;

44 
RefTy³Id
 
	m»ã»nûTy³Id
;

45 } 
	mşassOÆy
;

47 
u1
 
	mmodKšd
;

48 * 
	mşassP©‹º
;

49 } 
	mşassM©ch
;

51 
u1
 
	mmodKšd
;

52 * 
	mşassP©‹º
;

53 } 
	mşassExşude
;

55 
u1
 
	mmodKšd
;

56 
JdwpLoÿtiÚ
 
	mloc
;

57 } 
	mloÿtiÚOÆy
;

59 
u1
 
	mmodKšd
;

60 
u1
 
	mÿught
;

61 
u1
 
	munÿught
;

62 
RefTy³Id
 
	m»fTy³Id
;

63 } 
	mexû±iÚOÆy
;

65 
u1
 
	mmodKšd
;

66 
RefTy³Id
 
	m»fTy³Id
;

67 
F›ldId
 
	mf›ldId
;

68 } 
	mf›ldOÆy
;

70 
u1
 
	mmodKšd
;

71 
ObjeùId
 
	mth»adId
;

72 
	msize
;

73 
	md•th
;

74 } 
	m¡•
;

76 
u1
 
	mmodKšd
;

77 
ObjeùId
 
	mobjeùId
;

78 } 
	mš¡ªûOÆy
;

79 } 
	tJdwpEv’tMod
;

86 
	sJdwpEv’t
 {

87 
JdwpEv’t
* 
	m´ev
;

88 
JdwpEv’t
* 
	mÃxt
;

90 
JdwpEv’tKšd
 
	mev’tKšd
;

91 
JdwpSu¥’dPŞicy
 
	msu¥’dPŞicy
;

92 
	mmodCouÁ
;

93 
u4
 
	m»que¡Id
;

95 
JdwpEv’tMod
 
	mmods
[1];

96 } 
	tJdwpEv’t
;

101 
JdwpEv’t
* 
dvmJdwpEv’tAÎoc
(
numMods
);

102 
dvmJdwpEv’tF»e
(
JdwpEv’t
* 
pEv’t
);

110 
JdwpE¼Ü
 
dvmJdwpRegi¡”Ev’t
(
JdwpS‹
* 
¡©e
, 
JdwpEv’t
* 
pEv’t
);

115 
dvmJdwpUÄegi¡”Ev’tById
(
JdwpS‹
* 
¡©e
, 
u4
 
»que¡Id
);

120 
dvmJdwpUÄegi¡”AÎ
(
JdwpS‹
* 
¡©e
);

127 
boŞ
 
dvmJdwpS’dReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
);

	@jdwp/JdwpHandler.c

26 
	~"jdwp/JdwpPriv.h
"

27 
	~"jdwp/JdwpHªdËr.h
"

28 
	~"jdwp/JdwpEv’t.h
"

29 
	~"jdwp/JdwpCÚ¡ªts.h
"

30 
	~"jdwp/Ex·ndBuf.h
"

32 
	~"B™s.h
"

33 
	~"Atomic.h
"

35 
	~<¡dlib.h
>

36 
	~<¡ršg.h
>

37 
	~<uni¡d.h
>

40 
	~<time.h
>

41 
	~<sys/time.h
>

42 
	$showTime
(cÚ¡ * 
Ïb–
)

44 
timev®
 
tv
;

45 
mš
, 
£c
, 
m£c
;

47 
	`g‘timeofday
(&
tv
, 
NULL
);

48 
mš
 = (
tv
.
tv_£c
 / 60) % 60;

49 
£c
 = 
tv
.
tv_£c
 % 60;

50 
m£c
 = 
tv
.
tv_u£c
 / 1000;

52 
	`LOGI
("%02d:%02d.%03d %s\n", 
mš
, 
£c
, 
m£c
, 
Ïb–
);

53 
	}
}

59 
	$jdwpR—dLoÿtiÚ
(cÚ¡ 
u1
** 
pBuf
, 
JdwpLoÿtiÚ
* 
pLoc
)

61 
	`mem£t
(
pLoc
, 0, (*pLoc));

62 
pLoc
->
ty³Tag
 = 
	`»ad1
(
pBuf
);

63 
pLoc
->
şassId
 = 
	`dvmR—dObjeùId
(
pBuf
);

64 
pLoc
->
m‘hodId
 = 
	`dvmR—dM‘hodId
(
pBuf
);

65 
pLoc
->
idx
 = 
	`»ad8BE
(
pBuf
);

66 
	}
}

71 
	$dvmJdwpAddLoÿtiÚ
(
Ex·ndBuf
* 
pR•ly
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
)

73 
	`ex·ndBufAdd1
(
pR•ly
, 
pLoc
->
ty³Tag
);

74 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
pLoc
->
şassId
);

75 
	`ex·ndBufAddM‘hodId
(
pR•ly
, 
pLoc
->
m‘hodId
);

76 
	`ex·ndBufAdd8BE
(
pR•ly
, 
pLoc
->
idx
);

77 
	}
}

82 
u8
 
	$jdwpR—dV®ue
(cÚ¡ 
u1
** 
pBuf
, 
width
)

84 
u8
 
v®ue
;

86 
width
) {

87 1: 
v®ue
 = 
	`»ad1
(
pBuf
); ;

88 2: 
v®ue
 = 
	`»ad2BE
(
pBuf
); ;

89 4: 
v®ue
 = 
	`»ad4BE
(
pBuf
); ;

90 8: 
v®ue
 = 
	`»ad8BE
(
pBuf
); ;

91 : 
v®ue
 = (
u8
è-1; 
	`as£¹
(
çl£
); ;

94  
v®ue
;

95 
	}
}

100 
	$jdwpWr™eV®ue
(
Ex·ndBuf
* 
pR•ly
, 
width
, 
u8
 
v®ue
)

102 
width
) {

103 1: 
	`ex·ndBufAdd1
(
pR•ly
, 
v®ue
); ;

104 2: 
	`ex·ndBufAdd2BE
(
pR•ly
, 
v®ue
); ;

105 4: 
	`ex·ndBufAdd4BE
(
pR•ly
, 
v®ue
); ;

106 8: 
	`ex·ndBufAdd8BE
(
pR•ly
, 
v®ue
); ;

107 : 
	`as£¹
(
çl£
); ;

109 
	}
}

114 
JdwpE¼Ü
 
	$fšishInvoke
(
JdwpS‹
* 
¡©e
,

115 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
,

116 
ObjeùId
 
th»adId
, ObjeùId 
objeùId
, 
RefTy³Id
 
şassId
, 
M‘hodId
 
m‘hodId
)

118 
JdwpE¼Ü
 
”r
 = 
ERR_NONE
;

119 
u8
* 
¬gA¼ay
 = 
NULL
;

120 
u4
 
numArgs
;

121 
u4
 
İtiÚs
;

122 
i
;

124 
numArgs
 = 
	`»ad4BE
(&
buf
);

126 
	`LOGV
(" -->h»adId=%Îx objeùId=%Îx\n", 
th»adId
, 
objeùId
);

127 
	`LOGV
(" classId=%llx methodId=%x %s.%s\n",

128 
şassId
, 
m‘hodId
,

129 
	`dvmDbgG‘CÏssDesütÜ
(
şassId
),

130 
	`dvmDbgG‘M‘hodName
(
şassId
, 
m‘hodId
));

131 
	`LOGV
(" %d‡rgs:\n", 
numArgs
);

133 ià(
numArgs
 > 0)

134 
¬gA¼ay
 = (
ObjeùId
*è
	`m®loc
((ObjeùIdè* 
numArgs
);

136 
i
 = 0; i < (è
numArgs
; i++) {

137 
u1
 
ty³Tag
;

138 
u8
 
v®ue
;

139 
width
;

141 
ty³Tag
 = 
	`»ad1
(&
buf
);

142 
width
 = 
	`dvmDbgG‘TagWidth
(
ty³Tag
);

143 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

145 
	`LOGV
(" '%c'(%d): 0x%Îx\n", 
ty³Tag
, 
width
, 
v®ue
);

146 
¬gA¼ay
[
i
] = 
v®ue
;

149 
İtiÚs
 = 
	`»ad4BE
(&
buf
);

150 
	`LOGV
(" o±iÚs=0x%04x%s%s\n", 
İtiÚs
,

151 (
İtiÚs
 & 
INVOKE_SINGLE_THREADED
) ? " (SINGLE_THREADED)" : "",

152 (
İtiÚs
 & 
INVOKE_NONVIRTUAL
) ? " (NONVIRTUAL)" : "");

155 
u1
 
»suÉTag
;

156 
u8
 
»suÉV®ue
;

157 
ObjeùId
 
exû±ObjId
;

159 
”r
 = 
	`dvmDbgInvokeM‘hod
(
th»adId
, 
objeùId
, 
şassId
, 
m‘hodId
,

160 
numArgs
, 
¬gA¼ay
, 
İtiÚs
,

161 &
»suÉTag
, &
»suÉV®ue
, &
exû±ObjId
);

162 ià(
”r
 !ğ
ERR_NONE
)

163 
ba
;

165 ià(
”r
 =ğ
ERR_NONE
) {

166 
width
 = 
	`dvmDbgG‘TagWidth
(
»suÉTag
);

168 
	`ex·ndBufAdd1
(
pR•ly
, 
»suÉTag
);

169 ià(
width
 != 0)

170 
	`jdwpWr™eV®ue
(
pR•ly
, 
width
, 
»suÉV®ue
);

171 
	`ex·ndBufAdd1
(
pR•ly
, 
JT_OBJECT
);

172 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
exû±ObjId
);

174 
	`LOGV
(" -->„eturned '%c' 0x%llx (except=%08llx)\n",

175 
»suÉTag
, 
»suÉV®ue
, 
exû±ObjId
);

178 ià(
»suÉTag
 =ğ
JT_STRING
 && 
exû±ObjId
 == 0) {

179 ià(
»suÉV®ue
 != 0) {

180 * 
¡r
 = 
	`dvmDbgSŒšgToUtf8
(
»suÉV®ue
);

181 
	`LOGV
(" sŒšg '%s'\n", 
¡r
);

182 
	`ä“
(
¡r
);

184 
	`LOGV
(" string (null)\n");

189 
ba
:

190 
	`ä“
(
¬gA¼ay
);

191  
”r
;

192 
	}
}

198 
JdwpE¼Ü
 
	$hªdËVM_V”siÚ
(
JdwpS‹
* 
¡©e
, cÚ¡ 
u1
* 
buf
,

199 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

202 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "Android DalvikVM 1.0.1");

204 
	`ex·ndBufAdd4BE
(
pR•ly
, 1);

205 
	`ex·ndBufAdd4BE
(
pR•ly
, 5);

207 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "1.5.0");

209 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "DalvikVM");

211  
ERR_NONE
;

212 
	}
}

219 
JdwpE¼Ü
 
	$hªdËVM_CÏs£sBySigÇtu»
(
JdwpS‹
* 
¡©e
,

220 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

222 * 
şassDesütÜ
 = 
NULL
;

223 
u4
 
numCÏs£s
;

224 
size_t
 
¡rL’
;

225 
RefTy³Id
 
»fTy³Id
;

226 
i
;

228 
şassDesütÜ
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

229 
	`LOGV
(" Req fÜ cÏs by sigÇtu» '%s'\n", 
şassDesütÜ
);

237 ià(!
	`dvmDbgFšdLßdedCÏssBySigÇtu»
(
şassDesütÜ
, &
»fTy³Id
)) {

239 
	`LOGV
(" -->‚o match!\n");

240 
numCÏs£s
 = 0;

243 
numCÏs£s
 = 1;

246 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numCÏs£s
);

248 ià(
numCÏs£s
 > 0) {

249 
u1
 
ty³Tag
;

250 
u4
 
¡©us
;

253 
	`dvmDbgG‘CÏssInfo
(
»fTy³Id
, &
ty³Tag
, &
¡©us
, 
NULL
);

255 
	`ex·ndBufAdd1
(
pR•ly
, 
ty³Tag
);

256 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
»fTy³Id
);

257 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¡©us
);

260 
	`ä“
(
şassDesütÜ
);

262  
ERR_NONE
;

263 
	}
}

271 
JdwpE¼Ü
 
	$hªdËVM_AÎTh»ads
(
JdwpS‹
* 
¡©e
,

272 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

274 
u4
 
th»adCouÁ
;

275 
ObjeùId
* 
pTh»adIds
;

276 
ObjeùId
* 
w®k”
;

277 
i
;

279 
	`dvmDbgG‘AÎTh»ads
(&
pTh»adIds
, &
th»adCouÁ
);

281 
	`ex·ndBufAdd4BE
(
pR•ly
, 
th»adCouÁ
);

283 
w®k”
 = 
pTh»adIds
;

284 
i
 = 0; i < (è
th»adCouÁ
; i++) {

285 
	`ex·ndBufAddObjeùId
(
pR•ly
, *
w®k”
++);

288 
	`ä“
(
pTh»adIds
);

290  
ERR_NONE
;

291 
	}
}

296 
JdwpE¼Ü
 
	$hªdËVM_TİLev–Th»adGroups
(
JdwpS‹
* 
¡©e
,

297 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

299 
u4
 
groups
;

300 
ObjeùId
 
th»adGroupId
;

308 
groups
 = 1;

309 
	`ex·ndBufAdd4BE
(
pR•ly
, 
groups
);

312 
th»adGroupId
 = 
	`dvmDbgG‘Sy¡emTh»adGroupId
();

313 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
th»adGroupId
);

315  
ERR_NONE
;

316 
	}
}

323 
JdwpE¼Ü
 
	$hªdËVM_IDSizes
(
JdwpS‹
* 
¡©e
,

324 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

326 
	`ex·ndBufAdd4BE
(
pR•ly
, (
F›ldId
));

327 
	`ex·ndBufAdd4BE
(
pR•ly
, (
M‘hodId
));

328 
	`ex·ndBufAdd4BE
(
pR•ly
, (
ObjeùId
));

329 
	`ex·ndBufAdd4BE
(
pR•ly
, (
RefTy³Id
));

330 
	`ex·ndBufAdd4BE
(
pR•ly
, (
F¿meId
));

331  
ERR_NONE
;

332 
	}
}

340 
JdwpE¼Ü
 
	$hªdËVM_Di¥o£
(
JdwpS‹
* 
¡©e
,

341 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

343  
ERR_NONE
;

344 
	}
}

352 
JdwpE¼Ü
 
	$hªdËVM_Su¥’d
(
JdwpS‹
* 
¡©e
,

353 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

355 
	`dvmDbgSu¥’dVM
(
çl£
);

356  
ERR_NONE
;

357 
	}
}

362 
JdwpE¼Ü
 
	$hªdËVM_Resume
(
JdwpS‹
* 
¡©e
,

363 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

365 
	`dvmDbgResumeVM
();

366  
ERR_NONE
;

367 
	}
}

372 
JdwpE¼Ü
 
	$hªdËVM_Ex™
(
JdwpS‹
* 
¡©e
,

373 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

375 
u4
 
ex™Code
;

377 
ex™Code
 = 
	`g‘4BE
(
buf
);

379 
	`LOGW
("Debugg” i ‹ÎšghVMØex™ w™h code=%d\n", 
ex™Code
);

381 
	`dvmDbgEx™
(
ex™Code
);

382  
ERR_NOT_IMPLEMENTED
;

383 
	}
}

391 
JdwpE¼Ü
 
	$hªdËVM_C»©eSŒšg
(
JdwpS‹
* 
¡©e
,

392 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

394 * 
¡r
;

395 
size_t
 
¡rL’
;

396 
ObjeùId
 
¡ršgId
;

398 
¡r
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

400 
	`LOGV
(" ReqØü—‹ sŒšg '%s'\n", 
¡r
);

402 
¡ršgId
 = 
	`dvmDbgC»©eSŒšg
(
¡r
);

403 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
¡ršgId
);

405  
ERR_NONE
;

406 
	}
}

411 
JdwpE¼Ü
 
	$hªdËVM_C­ab™›s
(
JdwpS‹
* 
¡©e
,

412 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

414 
i
;

416 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

417 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

418 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

419 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

420 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

421 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

422 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

423  
ERR_NONE
;

424 
	}
}

429 
JdwpE¼Ü
 
	$hªdËVM_CÏssP©hs
(
JdwpS‹
* 
¡©e
,

430 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

432 
ba£Dœ
[2] = "/";

433 
u4
 
şassP©hs
;

434 
u4
 
boÙCÏssP©hs
;

435 
i
;

441 
şassP©hs
 = 1;

442 
boÙCÏssP©hs
 = 0;

444 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
ba£Dœ
);

445 
	`ex·ndBufAdd4BE
(
pR•ly
, 
şassP©hs
);

446 
i
 = 0; i < (è
şassP©hs
; i++) {

447 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) ".");

450 
	`ex·ndBufAdd4BE
(
pR•ly
, 
boÙCÏssP©hs
);

451 
i
 = 0; i < (è
şassP©hs
; i++) {

455  
ERR_NONE
;

456 
	}
}

463 
JdwpE¼Ü
 
	$HªdËVM_Di¥o£Objeùs
(
JdwpS‹
* 
¡©e
,

464 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

466  
ERR_NONE
;

467 
	}
}

472 
JdwpE¼Ü
 
	$hªdËVM_C­ab™›sNew
(
JdwpS‹
* 
¡©e
,

473 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

475 
i
;

477 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

478 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

479 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

480 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

481 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

482 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

483 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

484 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

485 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

486 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

487 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

488 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

489 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

490 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

491 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

492 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

493 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

494 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

495 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

496 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

497 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

500 
i
 = 22; i <= 32; i++)

501 
	`ex·ndBufAdd1
(
pR•ly
, 
çl£
);

502  
ERR_NONE
;

503 
	}
}

508 
JdwpE¼Ü
 
	$hªdËVM_AÎCÏs£sW™hG’”ic
(
JdwpS‹
* 
¡©e
,

509 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

511 
u4
 
numCÏs£s
 = 0;

512 
RefTy³Id
* 
şassRefBuf
 = 
NULL
;

513 
i
;

515 
	`dvmDbgG‘CÏssLi¡
(&
numCÏs£s
, &
şassRefBuf
);

517 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numCÏs£s
);

519 
i
 = 0; i < (è
numCÏs£s
; i++) {

520 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

521 
u1
 
»fTy³Tag
;

522 * 
sigÇtu»
;

523 
u4
 
¡©us
;

525 
	`dvmDbgG‘CÏssInfo
(
şassRefBuf
[
i
], &
»fTy³Tag
, &
¡©us
, &
sigÇtu»
);

527 
	`ex·ndBufAdd1
(
pR•ly
, 
»fTy³Tag
);

528 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
şassRefBuf
[
i
]);

529 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

530 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

531 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¡©us
);

533 
	`ä“
(
sigÇtu»
);

536 
	`ä“
(
şassRefBuf
);

538  
ERR_NONE
;

539 
	}
}

545 
JdwpE¼Ü
 
	$hªdËRT_SigÇtu»
(
JdwpS‹
* 
¡©e
,

546 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

548 * 
sigÇtu»
;

549 
RefTy³Id
 
»fTy³Id
;

551 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

553 
	`LOGV
(" Req fÜ sigÇtu» oà»fTy³Id=0x%Îx\n", 
»fTy³Id
);

554 
sigÇtu»
 = 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
);

555 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

556 
	`ä“
(
sigÇtu»
);

558  
ERR_NONE
;

559 
	}
}

564 
JdwpE¼Ü
 
	$hªdËRT_Modif›rs
(
JdwpS‹
* 
¡©e
,

565 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

567 
RefTy³Id
 
»fTy³Id
;

568 
u4
 
modB™s
;

570 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

571 
modB™s
 = 
	`dvmDbgG‘AcûssFÏgs
(
»fTy³Id
);

573 
	`ex·ndBufAdd4BE
(
pR•ly
, 
modB™s
);

575  
ERR_NONE
;

576 
	}
}

581 
JdwpE¼Ü
 
	$hªdËRT_G‘V®ues
(
JdwpS‹
* 
¡©e
,

582 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

584 
RefTy³Id
 
»fTy³Id
;

585 
u4
 
numF›lds
;

586 
i
;

588 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

589 
numF›lds
 = 
	`»ad4BE
(&
buf
);

591 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numF›lds
);

592 
i
 = 0; i < (è
numF›lds
; i++) {

593 
F›ldId
 
f›ldId
;

594 
u1
 
f›ldTag
;

595 
width
;

596 
u1
* 
±r
;

598 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

599 
f›ldTag
 = 
	`dvmDbgG‘F›ldTag
(
»fTy³Id
, 
f›ldId
);

600 
width
 = 
	`dvmDbgG‘TagWidth
(
f›ldTag
);

602 
	`ex·ndBufAdd1
(
pR•ly
, 
f›ldTag
);

603 
±r
 = 
	`ex·ndBufAddS·û
(
pR•ly
, 
width
);

604 
	`dvmDbgG‘SticF›ldV®ue
(
»fTy³Id
, 
f›ldId
, 
±r
, 
width
);

607  
ERR_NONE
;

608 
	}
}

613 
JdwpE¼Ü
 
	$hªdËRT_SourûFe
(
JdwpS‹
* 
¡©e
,

614 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

616 
RefTy³Id
 
»fTy³Id
;

617 cÚ¡ * 
feName
;

619 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

621 
feName
 = 
	`dvmDbgG‘SourûFe
(
»fTy³Id
);

622 ià(
feName
 !ğ
NULL
) {

623 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
feName
);

624  
ERR_NONE
;

626  
ERR_ABSENT_INFORMATION
;

628 
	}
}

633 
JdwpE¼Ü
 
	$hªdËRT_Stus
(
JdwpS‹
* 
¡©e
,

634 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

636 
RefTy³Id
 
»fTy³Id
;

637 
u1
 
ty³Tag
;

638 
u4
 
¡©us
;

640 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

643 
	`dvmDbgG‘CÏssInfo
(
»fTy³Id
, &
ty³Tag
, &
¡©us
, 
NULL
);

644 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¡©us
);

645  
ERR_NONE
;

646 
	}
}

651 
JdwpE¼Ü
 
	$hªdËRT_IÁ”çûs
(
JdwpS‹
* 
¡©e
,

652 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

654 
RefTy³Id
 
»fTy³Id
;

655 
u4
 
numIÁ”çûs
;

656 
i
;

658 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

660 
	`LOGV
(" Req fÜ iÁ”çû š %Îx (%s)\n", 
»fTy³Id
,

661 
	`dvmDbgG‘CÏssDesütÜ
(
»fTy³Id
));

663 
	`dvmDbgOuutAÎIÁ”çûs
(
»fTy³Id
, 
pR•ly
);

665  
ERR_NONE
;

666 
	}
}

673 
JdwpE¼Ü
 
	$hªdËRT_SourûDebugEx‹nsiÚ
(
JdwpS‹
* 
¡©e
,

674 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

677  
ERR_ABSENT_INFORMATION
;

678 
	}
}

683 
JdwpE¼Ü
 
	$hªdËRT_SigÇtu»W™hG’”ic
(
JdwpS‹
* 
¡©e
,

684 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

686 cÚ¡ 
u1
 
g’”icSigÇtu»
[1] = "";

687 * 
sigÇtu»
;

688 
RefTy³Id
 
»fTy³Id
;

690 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

692 
	`LOGV
(" Req fÜ sigÇtu» oà»fTy³Id=0x%Îx\n", 
»fTy³Id
);

693 
sigÇtu»
 = 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
);

694 ià(
sigÇtu»
 !ğ
NULL
)

695 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*è
sigÇtu»
);

697 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (cÚ¡ 
u1
*) "Lunknown;");

698 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, 
g’”icSigÇtu»
);

699 
	`ä“
(
sigÇtu»
);

701  
ERR_NONE
;

702 
	}
}

708 
JdwpE¼Ü
 
	$hªdËRT_CÏssLßd”
(
JdwpS‹
* 
¡©e
,

709 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

711 
RefTy³Id
 
»fTy³Id
;

712 
ObjeùId
 
şassLßd”Id
;

714 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

716 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`dvmDbgG‘CÏssLßd”
(
»fTy³Id
));

718  
ERR_NONE
;

719 
	}
}

725 
JdwpE¼Ü
 
	$hªdËRT_F›ldsW™hG’”ic
(
JdwpS‹
* 
¡©e
,

726 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

728 
RefTy³Id
 
»fTy³Id
;

729 
i
, 
numF›lds
;

731 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

732 
	`LOGV
(" Req fÜ f›ld š„efTy³Id=0x%Îx\n", 
»fTy³Id
);

734 * 
tmp
 = 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
);

735 
	`LOGV
(" --> '%s'\n", 
tmp
);

736 
	`ä“
(
tmp
);

739 
	`dvmDbgOuutAÎF›lds
(
»fTy³Id
, 
Œue
, 
pR•ly
);

741  
ERR_NONE
;

742 
	}
}

748 
JdwpE¼Ü
 
	$hªdËRT_M‘hodsW™hG’”ic
(
JdwpS‹
* 
¡©e
,

749 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

751 
RefTy³Id
 
»fTy³Id
;

752 
i
;

754 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

756 
	`LOGV
(" Req fÜ m‘hod š„efTy³Id=0x%Îx\n", 
»fTy³Id
);

758 * 
tmp
 = 
	`dvmDbgG‘SigÇtu»
(
»fTy³Id
);

759 
	`LOGV
(" --> '%s'\n", 
tmp
);

760 
	`ä“
(
tmp
);

763 
	`dvmDbgOuutAÎM‘hods
(
»fTy³Id
, 
Œue
, 
pR•ly
);

765  
ERR_NONE
;

766 
	}
}

771 
JdwpE¼Ü
 
	$hªdËCT_Su³rşass
(
JdwpS‹
* 
¡©e
,

772 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

774 
RefTy³Id
 
şassId
;

775 
RefTy³Id
 
su³rCÏssId
;

777 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

779 
su³rCÏssId
 = 
	`dvmDbgG‘Su³rşass
(
şassId
);

781 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
su³rCÏssId
);

783  
ERR_NONE
;

784 
	}
}

789 
JdwpE¼Ü
 
	$hªdËCT_S‘V®ues
(
JdwpS‹
* 
¡©e
,

790 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

792 
RefTy³Id
 
şassId
;

793 
u4
 
v®ues
;

794 
i
;

796 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

797 
v®ues
 = 
	`»ad4BE
(&
buf
);

799 
	`LOGV
(" ReqØ£ˆ%d v®ue š cÏssId=%Îx\n", 
v®ues
, 
şassId
);

801 
i
 = 0; i < (è
v®ues
; i++) {

802 
F›ldId
 
f›ldId
;

803 
u1
 
f›ldTag
;

804 
u8
 
v®ue
;

805 
width
;

807 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

808 
f›ldTag
 = 
	`dvmDbgG‘SticF›ldTag
(
şassId
, 
f›ldId
);

809 
width
 = 
	`dvmDbgG‘TagWidth
(
f›ldTag
);

810 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

812 
	`LOGV
(" --> f›ld=%xag=%ø-> %Îd\n", 
f›ldId
, 
f›ldTag
, 
v®ue
);

813 
	`dvmDbgS‘SticF›ldV®ue
(
şassId
, 
f›ldId
, 
v®ue
, 
width
);

816  
ERR_NONE
;

817 
	}
}

825 
JdwpE¼Ü
 
	$hªdËCT_InvokeM‘hod
(
JdwpS‹
* 
¡©e
,

826 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

828 
RefTy³Id
 
şassId
;

829 
ObjeùId
 
th»adId
;

830 
M‘hodId
 
m‘hodId
;

832 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

833 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

834 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

836  
	`fšishInvoke
(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
,

837 
th»adId
, 0, 
şassId
, 
m‘hodId
);

838 
	}
}

843 
JdwpE¼Ü
 
	$hªdËM_LšeTabË
(
JdwpS‹
* 
¡©e
,

844 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

846 
RefTy³Id
 
»fTy³Id
;

847 
M‘hodId
 
m‘hodId
;

849 
»fTy³Id
 = 
	`dvmR—dRefTy³Id
(&
buf
);

850 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

852 
	`LOGV
(" Req for†ineable in %s.%s\n",

853 
	`dvmDbgG‘CÏssDesütÜ
(
»fTy³Id
),

854 
	`dvmDbgG‘M‘hodName
(
»fTy³Id
,
m‘hodId
));

856 
	`dvmDbgOuutLšeTabË
(
»fTy³Id
, 
m‘hodId
, 
pR•ly
);

858  
ERR_NONE
;

859 
	}
}

864 
JdwpE¼Ü
 
	$hªdËM_V¬ŸbËTabËW™hG’”ic
(
JdwpS‹
* 
¡©e
,

865 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

867 
RefTy³Id
 
şassId
;

868 
M‘hodId
 
m‘hodId
;

870 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

871 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

873 
	`LOGV
(" Req for LocalVarTab in class=%s method=%s\n",

874 
	`dvmDbgG‘CÏssDesütÜ
(
şassId
),

875 
	`dvmDbgG‘M‘hodName
(
şassId
, 
m‘hodId
));

884 
	`dvmDbgOuutV¬ŸbËTabË
(
şassId
, 
m‘hodId
, 
Œue
, 
pR•ly
);

885  
ERR_NONE
;

886 
	}
}

895 
JdwpE¼Ü
 
	$hªdËOR_Reã»nûTy³
(
JdwpS‹
* 
¡©e
,

896 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

898 
ObjeùId
 
objeùId
;

899 
u1
 
»fTy³Tag
;

900 
RefTy³Id
 
ty³Id
;

902 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

903 
	`LOGV
(" Req fÜy³ oàobjeùId=0x%Îx\n", 
objeùId
);

905 
	`dvmDbgG‘ObjeùTy³
(
objeùId
, &
»fTy³Tag
, &
ty³Id
);

907 
	`ex·ndBufAdd1
(
pR•ly
, 
»fTy³Tag
);

908 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
ty³Id
);

910  
ERR_NONE
;

911 
	}
}

916 
JdwpE¼Ü
 
	$hªdËOR_G‘V®ues
(
JdwpS‹
* 
¡©e
,

917 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

919 
ObjeùId
 
objeùId
;

920 
u4
 
numF›lds
;

921 
i
;

923 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

924 
numF›lds
 = 
	`»ad4BE
(&
buf
);

926 
	`LOGV
(" Req fÜ %d f›ld äom objeùId=0x%Îx\n", 
numF›lds
, 
objeùId
);

928 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numF›lds
);

930 
i
 = 0; i < (è
numF›lds
; i++) {

931 
F›ldId
 
f›ldId
;

932 
u1
 
f›ldTag
;

933 
width
;

934 
u1
* 
±r
;

935 cÚ¡ * 
f›ldName
;

937 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

939 
f›ldTag
 = 
	`dvmDbgG‘F›ldTag
(
objeùId
, 
f›ldId
);

940 
width
 = 
	`dvmDbgG‘TagWidth
(
f›ldTag
);

942 
	`LOGV
(" --> fieldId %x -->ag '%c'(%d)\n",

943 
f›ldId
, 
f›ldTag
, 
width
);

945 
	`ex·ndBufAdd1
(
pR•ly
, 
f›ldTag
);

946 
±r
 = 
	`ex·ndBufAddS·û
(
pR•ly
, 
width
);

947 
	`dvmDbgG‘F›ldV®ue
(
objeùId
, 
f›ldId
, 
±r
, 
width
);

950  
ERR_NONE
;

951 
	}
}

956 
JdwpE¼Ü
 
	$hªdËOR_S‘V®ues
(
JdwpS‹
* 
¡©e
,

957 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

959 
ObjeùId
 
objeùId
;

960 
u4
 
numF›lds
;

961 
i
;

963 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

964 
numF›lds
 = 
	`»ad4BE
(&
buf
);

966 
	`LOGV
(" ReqØ£ˆ%d f›ld š objeùId=0x%Îx\n", 
numF›lds
, 
objeùId
);

968 
i
 = 0; i < (è
numF›lds
; i++) {

969 
F›ldId
 
f›ldId
;

970 
u1
 
f›ldTag
;

971 
width
;

972 
u8
 
v®ue
;

974 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

976 
f›ldTag
 = 
	`dvmDbgG‘F›ldTag
(
objeùId
, 
f›ldId
);

977 
width
 = 
	`dvmDbgG‘TagWidth
(
f›ldTag
);

978 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

980 
	`LOGV
(" --> fieldId=%xag='%c'(%d) value=%lld\n",

981 
f›ldId
, 
f›ldTag
, 
width
, 
v®ue
);

983 
	`dvmDbgS‘F›ldV®ue
(
objeùId
, 
f›ldId
, 
v®ue
, 
width
);

986  
ERR_NONE
;

987 
	}
}

1000 
JdwpE¼Ü
 
	$hªdËOR_InvokeM‘hod
(
JdwpS‹
* 
¡©e
,

1001 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1003 
ObjeùId
 
objeùId
;

1004 
ObjeùId
 
th»adId
;

1005 
RefTy³Id
 
şassId
;

1006 
M‘hodId
 
m‘hodId
;

1008 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

1009 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1010 
şassId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1011 
m‘hodId
 = 
	`dvmR—dM‘hodId
(&
buf
);

1013  
	`fšishInvoke
(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
,

1014 
th»adId
, 
objeùId
, 
şassId
, 
m‘hodId
);

1015 
	}
}

1020 
JdwpE¼Ü
 
	$hªdËOR_Di§bËCŞËùiÚ
(
JdwpS‹
* 
¡©e
,

1021 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1024  
ERR_NONE
;

1025 
	}
}

1030 
JdwpE¼Ü
 
	$hªdËOR_EÇbËCŞËùiÚ
(
JdwpS‹
* 
¡©e
,

1031 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1034  
ERR_NONE
;

1035 
	}
}

1040 
JdwpE¼Ü
 
	$hªdËOR_IsCŞËùed
(
JdwpS‹
* 
¡©e
,

1041 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1043 
ObjeùId
 
objeùId
;

1045 
objeùId
 = 
	`dvmR—dObjeùId
(&
buf
);

1047 
	`LOGV
(" Req IsCŞËùed(0x%Îx)\n", 
objeùId
);

1050 
	`ex·ndBufAdd1
(
pR•ly
, 0);

1052  
ERR_NONE
;

1053 
	}
}

1058 
JdwpE¼Ü
 
	$hªdËSR_V®ue
(
JdwpS‹
* 
¡©e
,

1059 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1061 
ObjeùId
 
¡ršgObjeù
;

1062 * 
¡r
;

1064 
¡ršgObjeù
 = 
	`dvmR—dObjeùId
(&
buf
);

1065 
¡r
 = 
	`dvmDbgSŒšgToUtf8
(
¡ršgObjeù
);

1067 
	`LOGV
(" Req fÜ sŒ %Îx --> '%s'\n", 
¡ršgObjeù
, 
¡r
);

1069 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*è
¡r
);

1070 
	`ä“
(
¡r
);

1072  
ERR_NONE
;

1073 
	}
}

1078 
JdwpE¼Ü
 
	$hªdËTR_Name
(
JdwpS‹
* 
¡©e
,

1079 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1081 
ObjeùId
 
th»adId
;

1082 * 
Çme
;

1084 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1086 
	`LOGV
(" Req fÜ‚amoàth»ad 0x%Îx\n", 
th»adId
);

1087 
Çme
 = 
	`dvmDbgG‘Th»adName
(
th»adId
);

1088 ià(
Çme
 =ğ
NULL
)

1089  
ERR_INVALID_THREAD
;

1091 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*è
Çme
);

1092 
	`ä“
(
Çme
);

1094  
ERR_NONE
;

1095 
	}
}

1103 
JdwpE¼Ü
 
	$hªdËTR_Su¥’d
(
JdwpS‹
* 
¡©e
,

1104 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1106 
ObjeùId
 
th»adId
;

1108 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1110 ià(
th»adId
 =ğ
	`dvmDbgG‘Th»adS–fId
()) {

1111 
	`LOGI
(" Warning: ignoring„equesto suspend self\n");

1112  
ERR_THREAD_NOT_SUSPENDED
;

1114 
	`LOGV
(" ReqØsu¥’dh»ad 0x%Îx\n", 
th»adId
);

1116 
	`dvmDbgSu¥’dTh»ad
(
th»adId
);

1118  
ERR_NONE
;

1119 
	}
}

1124 
JdwpE¼Ü
 
	$hªdËTR_Resume
(
JdwpS‹
* 
¡©e
,

1125 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1127 
ObjeùId
 
th»adId
;

1129 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1131 ià(
th»adId
 =ğ
	`dvmDbgG‘Th»adS–fId
()) {

1132 
	`LOGI
(" Warning: ignoring„equesto„esume self\n");

1133  
ERR_NONE
;

1135 
	`LOGV
(" ReqØ»sumth»ad 0x%Îx\n", 
th»adId
);

1137 
	`dvmDbgResumeTh»ad
(
th»adId
);

1139  
ERR_NONE
;

1140 
	}
}

1145 
JdwpE¼Ü
 
	$hªdËTR_Stus
(
JdwpS‹
* 
¡©e
,

1146 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1148 
ObjeùId
 
th»adId
;

1149 
u4
 
th»adStus
;

1150 
u4
 
su¥’dStus
;

1152 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1154 
	`LOGV
(" Req fÜ stu oàth»ad 0x%Îx\n", 
th»adId
);

1156 ià(!
	`dvmDbgG‘Th»adStus
(
th»adId
, &
th»adStus
, &
su¥’dStus
))

1157  
ERR_INVALID_THREAD
;

1159 
	`LOGV
(" --> %s, %s\n", 
	`dvmJdwpTh»adStusSŒ
(
th»adStus
),

1160 
	`dvmJdwpSu¥’dStusSŒ
(
su¥’dStus
));

1162 
	`ex·ndBufAdd4BE
(
pR•ly
, 
th»adStus
);

1163 
	`ex·ndBufAdd4BE
(
pR•ly
, 
su¥’dStus
);

1165  
ERR_NONE
;

1166 
	}
}

1171 
JdwpE¼Ü
 
	$hªdËTR_Th»adGroup
(
JdwpS‹
* 
¡©e
,

1172 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1174 
ObjeùId
 
th»adId
;

1175 
ObjeùId
 
th»adGroupId
;

1177 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1180 
th»adGroupId
 = 
	`dvmDbgG‘Th»adGroup
(
th»adId
);

1181 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
th»adGroupId
);

1183  
ERR_NONE
;

1184 
	}
}

1192 
JdwpE¼Ü
 
	$hªdËTR_F¿mes
(
JdwpS‹
* 
¡©e
,

1193 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1195 
ObjeùId
 
th»adId
;

1196 
u4
 
¡¬tF¿me
, 
Ëngth
, 
äames
;

1197 
i
, 
äameCouÁ
;

1199 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1200 
¡¬tF¿me
 = 
	`»ad4BE
(&
buf
);

1201 
Ëngth
 = 
	`»ad4BE
(&
buf
);

1203 ià(!
	`dvmDbgTh»adExi¡s
(
th»adId
))

1204  
ERR_INVALID_THREAD
;

1205 ià(!
	`dvmDbgIsSu¥’ded
(
th»adId
)) {

1206 
	`LOGV
(" Rejecting„eq for frames in„unninghread '%s' (%llx)\n",

1207 
	`dvmDbgG‘Th»adName
(
th»adId
),hreadId);

1208  
ERR_THREAD_NOT_SUSPENDED
;

1211 
äameCouÁ
 = 
	`dvmDbgG‘Th»adF¿meCouÁ
(
th»adId
);

1213 
	`LOGV
(" Request for frames:hreadId=%llx start=%d†ength=%d [count=%d]\n",

1214 
th»adId
, 
¡¬tF¿me
, 
Ëngth
, 
äameCouÁ
);

1215 ià(
äameCouÁ
 <= 0)

1216  
ERR_THREAD_NOT_SUSPENDED
;

1218 ià(
Ëngth
 =ğ(
u4
) -1)

1219 
Ëngth
 = 
äameCouÁ
;

1220 
	`as£¹
((è
¡¬tF¿me
 >ğ0 && (è¡¬tF¿m< 
äameCouÁ
);

1221 
	`as£¹
((è(
¡¬tF¿me
 + 
Ëngth
è<ğ
äameCouÁ
);

1223 
äames
 = 
Ëngth
;

1224 
	`ex·ndBufAdd4BE
(
pR•ly
, 
äames
);

1225 
i
 = 
¡¬tF¿me
; i < (è(¡¬tF¿me+
Ëngth
); i++) {

1226 
F¿meId
 
äameId
;

1227 
JdwpLoÿtiÚ
 
loc
;

1229 
	`dvmDbgG‘Th»adF¿me
(
th»adId
, 
i
, &
äameId
, &
loc
);

1231 
	`ex·ndBufAdd8BE
(
pR•ly
, 
äameId
);

1232 
	`dvmJdwpAddLoÿtiÚ
(
pR•ly
, &
loc
);

1234 
	`LOGVV
(" Frame %d: id=%llx†oc={type=%d cls=%llx mth=%x†oc=%llx}\n",

1235 
i
, 
äameId
, 
loc
.
ty³Tag
,†oc.
şassId
,†oc.
m‘hodId
,†oc.
idx
);

1238  
ERR_NONE
;

1239 
	}
}

1244 
JdwpE¼Ü
 
	$hªdËTR_F¿meCouÁ
(
JdwpS‹
* 
¡©e
,

1245 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1247 
ObjeùId
 
th»adId
;

1248 
äameCouÁ
;

1250 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1252 ià(!
	`dvmDbgTh»adExi¡s
(
th»adId
))

1253  
ERR_INVALID_THREAD
;

1254 ià(!
	`dvmDbgIsSu¥’ded
(
th»adId
)) {

1255 
	`LOGV
(" Rejecting„eq for frames in„unninghread '%s' (%llx)\n",

1256 
	`dvmDbgG‘Th»adName
(
th»adId
),hreadId);

1257  
ERR_THREAD_NOT_SUSPENDED
;

1260 
äameCouÁ
 = 
	`dvmDbgG‘Th»adF¿meCouÁ
(
th»adId
);

1261 ià(
äameCouÁ
 < 0)

1262  
ERR_INVALID_THREAD
;

1263 
	`ex·ndBufAdd4BE
(
pR•ly
, (
u4
)
äameCouÁ
);

1265  
ERR_NONE
;

1266 
	}
}

1271 
JdwpE¼Ü
 
	$hªdËTR_Cu¼’tCÚ‹ndedMÚ™Ü
(
JdwpS‹
* 
¡©e
,

1272 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1274 
ObjeùId
 
th»adId
;

1276 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1281  
ERR_NOT_IMPLEMENTED
;

1282 
	}
}

1290 
JdwpE¼Ü
 
	$hªdËTR_Su¥’dCouÁ
(
JdwpS‹
* 
¡©e
,

1291 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1293 
ObjeùId
 
th»adId
;

1294 
u4
 
su¥’dCouÁ
;

1296 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1298 
su¥’dCouÁ
 = 
	`dvmDbgG‘Th»adSu¥’dCouÁ
(
th»adId
);

1299 
	`ex·ndBufAdd4BE
(
pR•ly
, 
su¥’dCouÁ
);

1301  
ERR_NONE
;

1302 
	}
}

1309 
JdwpE¼Ü
 
	$hªdËTGR_Name
(
JdwpS‹
* 
¡©e
,

1310 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1312 
ObjeùId
 
th»adGroupId
;

1313 * 
Çme
 = 
NULL
;

1315 
th»adGroupId
 = 
	`dvmR—dObjeùId
(&
buf
);

1316 
	`LOGV
(" Req fÜ‚amoàth»adGroupId=0x%Îx\n", 
th»adGroupId
);

1318 
Çme
 = 
	`dvmDbgG‘Th»adGroupName
(
th»adGroupId
);

1319 ià(
Çme
 !ğ
NULL
)

1320 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*è
Çme
);

1322 
	`ex·ndBufAddUtf8SŒšg
(
pR•ly
, (
u1
*) "BAD-GROUP-ID");

1323 
	`LOGW
("badhread group ID\n");

1326 
	`ä“
(
Çme
);

1328  
ERR_NONE
;

1329 
	}
}

1335 
JdwpE¼Ü
 
	$hªdËTGR_P¬’t
(
JdwpS‹
* 
¡©e
,

1336 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1338 
ObjeùId
 
groupId
;

1339 
ObjeùId
 
·»ÁGroup
;

1341 
groupId
 = 
	`dvmR—dObjeùId
(&
buf
);

1343 
·»ÁGroup
 = 
	`dvmDbgG‘Th»adGroupP¬’t
(
groupId
);

1344 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
·»ÁGroup
);

1346  
ERR_NONE
;

1347 
	}
}

1353 
JdwpE¼Ü
 
	$hªdËTGR_Chd»n
(
JdwpS‹
* 
¡©e
,

1354 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1356 
ObjeùId
 
th»adGroupId
;

1357 
u4
 
th»adCouÁ
;

1358 
ObjeùId
 
th»adId
;

1359 
ObjeùId
* 
pTh»adIds
;

1360 
ObjeùId
* 
w®k”
;

1361 
i
;

1363 
th»adGroupId
 = 
	`dvmR—dObjeùId
(&
buf
);

1364 
	`LOGV
(" Req fÜh»ad šh»adGroupId=0x%Îx\n", 
th»adGroupId
);

1366 
	`dvmDbgG‘Th»adGroupTh»ads
(
th»adGroupId
, &
pTh»adIds
, &
th»adCouÁ
);

1368 
	`ex·ndBufAdd4BE
(
pR•ly
, 
th»adCouÁ
);

1370 
w®k”
 = 
pTh»adIds
;

1371 
i
 = 0; i < (è
th»adCouÁ
; i++)

1372 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
pTh»adIds
[
i
]);

1373 
	`ä“
(
pTh»adIds
);

1380 ià(
th»adGroupId
 =ğ
	`dvmDbgG‘Sy¡emTh»adGroupId
()) {

1381 
	`ex·ndBufAdd4BE
(
pR•ly
, 1);

1382 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
	`dvmDbgG‘MašTh»adGroupId
());

1384 
	`ex·ndBufAdd4BE
(
pR•ly
, 0);

1387  
ERR_NONE
;

1388 
	}
}

1393 
JdwpE¼Ü
 
	$hªdËAR_L’gth
(
JdwpS‹
* 
¡©e
,

1394 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1396 
ObjeùId
 
¬¿yId
;

1397 
u4
 
¬¿yL’gth
;

1399 
¬¿yId
 = 
	`dvmR—dObjeùId
(&
buf
);

1400 
	`LOGV
(" Req fÜ†’gth oà¬¿y 0x%Îx\n", 
¬¿yId
);

1402 
¬¿yL’gth
 = 
	`dvmDbgG‘A¼ayL’gth
(
¬¿yId
);

1404 
	`LOGV
(" --> %d\n", 
¬¿yL’gth
);

1406 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¬¿yL’gth
);

1408  
ERR_NONE
;

1409 
	}
}

1414 
JdwpE¼Ü
 
	$hªdËAR_G‘V®ues
(
JdwpS‹
* 
¡©e
,

1415 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1417 
ObjeùId
 
¬¿yId
;

1418 
u4
 
fœ¡Index
;

1419 
u4
 
Ëngth
;

1420 
u1
 
g
;

1422 
¬¿yId
 = 
	`dvmR—dObjeùId
(&
buf
);

1423 
fœ¡Index
 = 
	`»ad4BE
(&
buf
);

1424 
Ëngth
 = 
	`»ad4BE
(&
buf
);

1426 
g
 = 
	`dvmDbgG‘A¼ayEËm’tTag
(
¬¿yId
);

1427 
	`LOGV
(" Req for‡rray values 0x%llx first=%d†en=%d (elemag=%c)\n",

1428 
¬¿yId
, 
fœ¡Index
, 
Ëngth
, 
g
);

1430 
	`ex·ndBufAdd1
(
pR•ly
, 
g
);

1431 
	`ex·ndBufAdd4BE
(
pR•ly
, 
Ëngth
);

1433 ià(!
	`dvmDbgOuutA¼ay
(
¬¿yId
, 
fœ¡Index
, 
Ëngth
, 
pR•ly
))

1434  
ERR_INVALID_LENGTH
;

1436  
ERR_NONE
;

1437 
	}
}

1442 
JdwpE¼Ü
 
	$hªdËAR_S‘V®ues
(
JdwpS‹
* 
¡©e
,

1443 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1445 
ObjeùId
 
¬¿yId
;

1446 
u4
 
fœ¡Index
;

1447 
u4
 
v®ues
;

1448 
u1
 
g
;

1449 
i
;

1451 
¬¿yId
 = 
	`dvmR—dObjeùId
(&
buf
);

1452 
fœ¡Index
 = 
	`»ad4BE
(&
buf
);

1453 
v®ues
 = 
	`»ad4BE
(&
buf
);

1455 
	`LOGV
(" Reqo set‡rray values 0x%llx first=%d count=%d\n",

1456 
¬¿yId
, 
fœ¡Index
, 
v®ues
);

1458 ià(!
	`dvmDbgS‘A¼ayEËm’ts
(
¬¿yId
, 
fœ¡Index
, 
v®ues
, 
buf
))

1459  
ERR_INVALID_LENGTH
;

1461  
ERR_NONE
;

1462 
	}
}

1468 
JdwpE¼Ü
 
	$hªdËCLR_VisibËCÏs£s
(
JdwpS‹
* 
¡©e
,

1469 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1471 
ObjeùId
 
şassLßd”Objeù
;

1472 
u4
 
numCÏs£s
 = 0;

1473 
RefTy³Id
* 
şassRefBuf
 = 
NULL
;

1474 
i
;

1476 
şassLßd”Objeù
 = 
	`dvmR—dObjeùId
(&
buf
);

1478 
	`dvmDbgG‘VisibËCÏssLi¡
(
şassLßd”Objeù
, &
numCÏs£s
, &
şassRefBuf
);

1480 
	`ex·ndBufAdd4BE
(
pR•ly
, 
numCÏs£s
);

1481 
i
 = 0; i < (è
numCÏs£s
; i++) {

1482 
u1
 
»fTy³Tag
;

1484 
»fTy³Tag
 = 
	`dvmDbgG‘CÏssObjeùTy³
(
şassRefBuf
[
i
]);

1486 
	`ex·ndBufAdd1
(
pR•ly
, 
»fTy³Tag
);

1487 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
şassRefBuf
[
i
]);

1490  
ERR_NONE
;

1491 
	}
}

1498 
JdwpE¼Ü
 
	$hªdËER_S‘
(
JdwpS‹
* 
¡©e
,

1499 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1501 
JdwpEv’t
* 
pEv’t
;

1502 
JdwpE¼Ü
 
”r
;

1503 cÚ¡ 
u1
* 
ÜigBuf
 = 
buf
;

1505 
u1
 
ev’tKšd
;

1506 
u1
 
su¥’dPŞicy
;

1507 
u4
 
modif›rCouÁ
;

1508 
u4
 
»que¡Id
;

1509 
idx
;

1511 
ev’tKšd
 = 
	`»ad1
(&
buf
);

1512 
su¥’dPŞicy
 = 
	`»ad1
(&
buf
);

1513 
modif›rCouÁ
 = 
	`»ad4BE
(&
buf
);

1515 
	`LOGVV
(" Set(kind=%s(%u) suspend=%s(%u) mods=%u)\n",

1516 
	`dvmJdwpEv’tKšdSŒ
(
ev’tKšd
),ƒventKind,

1517 
	`dvmJdwpSu¥’dPŞicySŒ
(
su¥’dPŞicy
), suspendPolicy,

1518 
modif›rCouÁ
);

1520 
	`as£¹
(
modif›rCouÁ
 < 256);

1522 
pEv’t
 = 
	`dvmJdwpEv’tAÎoc
(
modif›rCouÁ
);

1523 
pEv’t
->
ev’tKšd
 =ƒventKind;

1524 
pEv’t
->
su¥’dPŞicy
 = suspendPolicy;

1525 
pEv’t
->
modCouÁ
 = 
modif›rCouÁ
;

1531 
idx
 = 0; idx < (è
modif›rCouÁ
; idx++) {

1532 
u1
 
modKšd
;

1534 
modKšd
 = 
	`»ad1
(&
buf
);

1536 
pEv’t
->
mods
[
idx
].
modKšd
 = modKind;

1538 
modKšd
) {

1539 
MK_COUNT
:

1541 
u4
 
couÁ
 = 
	`»ad4BE
(&
buf
);

1542 
	`LOGVV
(" CouÁ: %u\n", 
couÁ
);

1543 ià(
couÁ
 == 0)

1544  
ERR_INVALID_COUNT
;

1545 
pEv’t
->
mods
[
idx
].
couÁ
.count = count;

1548 
MK_CONDITIONAL
:

1550 
u4
 
ex´Id
 = 
	`»ad4BE
(&
buf
);

1551 
	`LOGVV
(" CÚd™iÚ®: %d\n", 
ex´Id
);

1552 
pEv’t
->
mods
[
idx
].
cÚd™iÚ®
.
ex´Id
 =ƒxprId;

1555 
MK_THREAD_ONLY
:

1557 
ObjeùId
 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1558 
	`LOGVV
(" Th»adOÆy: %Îx\n", 
th»adId
);

1559 
pEv’t
->
mods
[
idx
].
th»adOÆy
.
th»adId
 =hreadId;

1562 
MK_CLASS_ONLY
:

1564 
RefTy³Id
 
şazzId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1565 
	`LOGVV
(" ClassOnly: %llx (%s)\n",

1566 
şazzId
, 
	`dvmDbgG‘CÏssDesütÜ
(clazzId));

1567 
pEv’t
->
mods
[
idx
].
şassOÆy
.
»ã»nûTy³Id
 = 
şazzId
;

1570 
MK_CLASS_MATCH
:

1572 * 
·‰”n
;

1573 
size_t
 
¡rL’
;

1575 
·‰”n
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

1576 
	`LOGVV
(" CÏssM©ch: '%s'\n", 
·‰”n
);

1578 
pEv’t
->
mods
[
idx
].
şassM©ch
.
şassP©‹º
 =

1579 
	`dvmDÙToSÏsh
(
·‰”n
);

1580 
	`ä“
(
·‰”n
);

1583 
MK_CLASS_EXCLUDE
:

1585 * 
·‰”n
;

1586 
size_t
 
¡rL’
;

1588 
·‰”n
 = 
	`»adNewUtf8SŒšg
(&
buf
, &
¡rL’
);

1589 
	`LOGVV
(" CÏssExşude: '%s'\n", 
·‰”n
);

1590 
pEv’t
->
mods
[
idx
].
şassExşude
.
şassP©‹º
 =

1591 
	`dvmDÙToSÏsh
(
·‰”n
);

1592 
	`ä“
(
·‰”n
);

1595 
MK_LOCATION_ONLY
:

1597 
JdwpLoÿtiÚ
 
loc
;

1599 
	`jdwpR—dLoÿtiÚ
(&
buf
, &
loc
);

1600 
	`LOGVV
(" LocationOnly:ypeTag=%d classId=%llx methodId=%x idx=%llx\n",

1601 
loc
.
ty³Tag
,†oc.
şassId
,†oc.
m‘hodId
,†oc.
idx
);

1602 
pEv’t
->
mods
[
idx
].
loÿtiÚOÆy
.
loc
 =†oc;

1605 
MK_EXCEPTION_ONLY
:

1607 
RefTy³Id
 
exû±iÚOrNuÎ
;

1608 
u1
 
ÿught
, 
unÿught
;

1610 
exû±iÚOrNuÎ
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1611 
ÿught
 = 
	`»ad1
(&
buf
);

1612 
unÿught
 = 
	`»ad1
(&
buf
);

1613 
	`LOGVV
(" ExceptionOnly:ype=%llx(%s) caught=%d uncaught=%d\n",

1614 
exû±iÚOrNuÎ
, (exceptionOrNull == 0) ? "null"

1615 : 
	`dvmDbgG‘CÏssDesütÜ
(
exû±iÚOrNuÎ
),

1616 
ÿught
, 
unÿught
);

1618 
pEv’t
->
mods
[
idx
].
exû±iÚOÆy
.
»fTy³Id
 = 
exû±iÚOrNuÎ
;

1619 
pEv’t
->
mods
[
idx
].
exû±iÚOÆy
.
ÿught
 = caught;

1620 
pEv’t
->
mods
[
idx
].
exû±iÚOÆy
.
unÿught
 = uncaught;

1623 
MK_FIELD_ONLY
:

1625 
RefTy³Id
 
deş¬šg
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1626 
F›ldId
 
f›ldId
 = 
	`dvmR—dF›ldId
(&
buf
);

1627 
	`LOGVV
(" F›ldOÆy: %Îx %x\n", 
deş¬šg
, 
f›ldId
);

1628 
pEv’t
->
mods
[
idx
].
f›ldOÆy
.
»fTy³Id
 = 
deş¬šg
;

1629 
pEv’t
->
mods
[
idx
].
f›ldOÆy
.
f›ldId
 = fieldId;;

1632 
MK_STEP
:

1634 
ObjeùId
 
th»adId
;

1635 
u4
 
size
, 
d•th
;

1637 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1638 
size
 = 
	`»ad4BE
(&
buf
);

1639 
d•th
 = 
	`»ad4BE
(&
buf
);

1640 
	`LOGVV
(" Step:hread=%llx size=%s depth=%s\n",

1641 
th»adId
, 
	`dvmJdwpS‹pSizeSŒ
(
size
),

1642 
	`dvmJdwpS‹pD•thSŒ
(
d•th
));

1644 
pEv’t
->
mods
[
idx
].
¡•
.
th»adId
 =hreadId;

1645 
pEv’t
->
mods
[
idx
].
¡•
.
size
 = size;

1646 
pEv’t
->
mods
[
idx
].
¡•
.
d•th
 = depth;

1649 
MK_INSTANCE_ONLY
:

1651 
ObjeùId
 
š¡ªû
 = 
	`dvmR—dObjeùId
(&
buf
);

1652 
	`LOGVV
(" In¡ªûOÆy: %Îx\n", 
š¡ªû
);

1653 
pEv’t
->
mods
[
idx
].
š¡ªûOÆy
.
objeùId
 = 
š¡ªû
;

1657 
	`LOGW
("GLITCH: unsuµÜ‹d modKšd=%d\n", 
modKšd
);

1666 ià(
buf
 !ğ
ÜigBuf
 + 
d©aL’
) {

1667 
	`LOGW
("GLITCH: d©aL’ i %d, whavcÚsumed %d\n", 
d©aL’
,

1668 (è(
buf
 - 
ÜigBuf
));

1674 
»que¡Id
 = 
	`dvmJdwpNextEv’tS”Ÿl
(
¡©e
);

1675 
	`ex·ndBufAdd4BE
(
pR•ly
, 
»que¡Id
);

1677 
pEv’t
->
»que¡Id
 =„equestId;

1679 
	`LOGV
(" -->ƒv’ˆ»que¡Id=0x%x\n", 
»que¡Id
);

1682 
”r
 = 
	`dvmJdwpRegi¡”Ev’t
(
¡©e
, 
pEv’t
);

1683 ià(
”r
 !ğ
ERR_NONE
) {

1685 
	`dvmJdwpEv’tF»e
(
pEv’t
);

1686 
	`LOGW
("WARNING:ƒvent„equest„ejected\n");

1688  
”r
;

1689 
	}
}

1695 
JdwpE¼Ü
 
	$hªdËER_CË¬
(
JdwpS‹
* 
¡©e
,

1696 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1698 
u1
 
ev’tKšd
;

1699 
u4
 
»que¡Id
;

1701 
ev’tKšd
 = 
	`»ad1
(&
buf
);

1702 
»que¡Id
 = 
	`»ad4BE
(&
buf
);

1704 
	`LOGV
(" ReqØş—¸ev’tKšd=%d„eque¡Id=0x%08x\n", 
ev’tKšd
,
»que¡Id
);

1706 
	`dvmJdwpUÄegi¡”Ev’tById
(
¡©e
, 
»que¡Id
);

1708  
ERR_NONE
;

1709 
	}
}

1714 
JdwpE¼Ü
 
	$hªdËSF_G‘V®ues
(
JdwpS‹
* 
¡©e
,

1715 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1717 
ObjeùId
 
th»adId
;

1718 
F¿meId
 
äameId
;

1719 
u4
 
¦Ùs
;

1720 
i
;

1722 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1723 
äameId
 = 
	`dvmR—dF¿meId
(&
buf
);

1724 
¦Ùs
 = 
	`»ad4BE
(&
buf
);

1726 
	`LOGV
(" Req for %d slots inhreadId=%llx frameId=%llx\n",

1727 
¦Ùs
, 
th»adId
, 
äameId
);

1729 
	`ex·ndBufAdd4BE
(
pR•ly
, 
¦Ùs
);

1730 
i
 = 0; i < (è
¦Ùs
; i++) {

1731 
u4
 
¦Ù
;

1732 
u1
 
»qSigBy‹
;

1733 
width
;

1734 
u1
* 
±r
;

1736 
¦Ù
 = 
	`»ad4BE
(&
buf
);

1737 
»qSigBy‹
 = 
	`»ad1
(&
buf
);

1739 
	`LOGV
(" --> slÙ %d '%c'\n", 
¦Ù
, 
»qSigBy‹
);

1741 
width
 = 
	`dvmDbgG‘TagWidth
(
»qSigBy‹
);

1742 
±r
 = 
	`ex·ndBufAddS·û
(
pR•ly
, 
width
+1);

1743 
	`dvmDbgG‘LoÿlV®ue
(
th»adId
, 
äameId
, 
¦Ù
, 
»qSigBy‹
, 
±r
, 
width
);

1746  
ERR_NONE
;

1747 
	}
}

1752 
JdwpE¼Ü
 
	$hªdËSF_S‘V®ues
(
JdwpS‹
* 
¡©e
,

1753 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1755 
ObjeùId
 
th»adId
;

1756 
F¿meId
 
äameId
;

1757 
u4
 
¦Ùs
;

1758 
i
;

1760 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1761 
äameId
 = 
	`dvmR—dF¿meId
(&
buf
);

1762 
¦Ùs
 = 
	`»ad4BE
(&
buf
);

1764 
	`LOGV
(" Reqo set %d slots inhreadId=%llx frameId=%llx\n",

1765 
¦Ùs
, 
th»adId
, 
äameId
);

1767 
i
 = 0; i < (è
¦Ùs
; i++) {

1768 
u4
 
¦Ù
;

1769 
u1
 
sigBy‹
;

1770 
u8
 
v®ue
;

1771 
width
;

1773 
¦Ù
 = 
	`»ad4BE
(&
buf
);

1774 
sigBy‹
 = 
	`»ad1
(&
buf
);

1775 
width
 = 
	`dvmDbgG‘TagWidth
(
sigBy‹
);

1776 
v®ue
 = 
	`jdwpR—dV®ue
(&
buf
, 
width
);

1778 
	`LOGV
(" --> slÙ %d '%c' %Îx\n", 
¦Ù
, 
sigBy‹
, 
v®ue
);

1779 
	`dvmDbgS‘LoÿlV®ue
(
th»adId
, 
äameId
, 
¦Ù
, 
sigBy‹
, 
v®ue
, 
width
);

1782  
ERR_NONE
;

1783 
	}
}

1788 
JdwpE¼Ü
 
	$hªdËSF_ThisObjeù
(
JdwpS‹
* 
¡©e
,

1789 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1791 
ObjeùId
 
th»adId
;

1792 
F¿meId
 
äameId
;

1793 
u1
 
objeùTag
;

1794 
ObjeùId
 
objeùId
;

1795 * 
ty³Name
;

1797 
th»adId
 = 
	`dvmR—dObjeùId
(&
buf
);

1798 
äameId
 = 
	`dvmR—dF¿meId
(&
buf
);

1800 ià(!
	`dvmDbgG‘ThisObjeù
(
th»adId
, 
äameId
, &
objeùId
))

1801  
ERR_INVALID_FRAMEID
;

1803 ià(
objeùId
 == 0) {

1804 
ty³Name
 = 
	`¡rdup
("null");

1805 
objeùTag
 = 0;

1807 
ty³Name
 = 
	`dvmDbgG‘ObjeùTy³Name
(
objeùId
);

1808 
objeùTag
 = 
	`dvmDbgG‘ObjeùTag
(
objeùId
, 
ty³Name
);

1810 
	`LOGV
(" Req for 'this' inhread=%llx frame=%llx --> %llx %s '%c'\n",

1811 
th»adId
, 
äameId
, 
objeùId
, 
ty³Name
, ()
objeùTag
);

1812 
	`ä“
(
ty³Name
);

1814 
	`ex·ndBufAdd1
(
pR•ly
, 
objeùTag
);

1815 
	`ex·ndBufAddObjeùId
(
pR•ly
, 
objeùId
);

1817  
ERR_NONE
;

1818 
	}
}

1827 
JdwpE¼Ü
 
	$hªdËCOR_ReæeùedTy³
(
JdwpS‹
* 
¡©e
,

1828 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1830 
RefTy³Id
 
şassObjeùId
;

1832 
şassObjeùId
 = 
	`dvmR—dRefTy³Id
(&
buf
);

1834 
	`LOGV
(" Req for„efTypeId for class=%llx (%s)\n",

1835 
şassObjeùId
, 
	`dvmDbgG‘CÏssDesütÜ
(classObjectId));

1838 ià(
	`dvmDbgIsIÁ”çû
(
şassObjeùId
))

1839 
	`ex·ndBufAdd1
(
pR•ly
, 
TT_INTERFACE
);

1841 
	`ex·ndBufAdd1
(
pR•ly
, 
TT_CLASS
);

1842 
	`ex·ndBufAddRefTy³Id
(
pR•ly
, 
şassObjeùId
);

1844  
ERR_NONE
;

1845 
	}
}

1850 
JdwpE¼Ü
 
	$hªdËDDM_Chunk
(
JdwpS‹
* 
¡©e
,

1851 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

1853 
u1
* 
»¶yBuf
 = 
NULL
;

1854 
»¶yL’
 = -1;

1856 
	`LOGV
(" Hªdlšg DDM…ack‘ (%.4s)\n", 
buf
);

1861 ià(!
¡©e
->
ddmAùive
) {

1862 
¡©e
->
ddmAùive
 = 
Œue
;

1863 
	`dvmDbgDdmCÚÃùed
();

1875 ià(
	`dvmDbgDdmHªdËPack‘
(
buf
, 
d©aL’
, &
»¶yBuf
, &
»¶yL’
)) {

1876 
	`as£¹
(
»¶yL’
 > 0 &&„eplyLen < 1*1024*1024);

1877 
	`memıy
(
	`ex·ndBufAddS·û
(
pR•ly
, 
»¶yL’
), 
»¶yBuf
,„eplyLen);

1878 
	`ä“
(
»¶yBuf
);

1880  
ERR_NONE
;

1881 
	}
}

1886 
	$JdwpE¼Ü
 (*
	tJdwpReque¡HªdËr
)(
	tJdwpS‹
* 
	t¡©e
,

1887 cÚ¡ 
	tu1
* 
	tbuf
, 
	td©aL’
, 
	tEx·ndBuf
* 
	t»¶y
);

1890 
u1
 
cmdS‘
;

1891 
u1
 
cmd
;

1892 
JdwpReque¡HªdËr
 
func
;

1893 cÚ¡ * 
desü
;

1894 } 
	tJdwpHªdËrM­
;

1902 cÚ¡ 
JdwpHªdËrM­
 
gHªdËrM­
[] = {

1904 { 1, 1, 
hªdËVM_V”siÚ
, "VirtualMachine.Version" },

1905 { 1, 2, 
hªdËVM_CÏs£sBySigÇtu»
,

1908 { 1, 4, 
hªdËVM_AÎTh»ads
, "VirtualMachine.AllThreads" },

1909 { 1, 5, 
hªdËVM_TİLev–Th»adGroups
,

1911 { 1, 6, 
hªdËVM_Di¥o£
, "VirtualMachine.Dispose" },

1912 { 1, 7, 
hªdËVM_IDSizes
, "VirtualMachine.IDSizes" },

1913 { 1, 8, 
hªdËVM_Su¥’d
, "VirtualMachine.Suspend" },

1914 { 1, 9, 
hªdËVM_Resume
, "VirtualMachine.Resume" },

1915 { 1, 10, 
hªdËVM_Ex™
, "VirtualMachine.Exit" },

1916 { 1, 11, 
hªdËVM_C»©eSŒšg
, "VirtualMachine.CreateString" },

1917 { 1, 12, 
hªdËVM_C­ab™›s
, "VirtualMachine.Capabilities" },

1918 { 1, 13, 
hªdËVM_CÏssP©hs
, "VirtualMachine.ClassPaths" },

1919 { 1, 14, 
HªdËVM_Di¥o£Objeùs
, "VirtualMachine.DisposeObjects" },

1922 { 1, 17, 
hªdËVM_C­ab™›sNew
,

1926 { 1, 20, 
hªdËVM_AÎCÏs£sW™hG’”ic
,

1931 { 2, 1, 
hªdËRT_SigÇtu»
, "ReferenceType.Signature" },

1932 { 2, 2, 
hªdËRT_CÏssLßd”
, "ReferenceType.ClassLoader" },

1933 { 2, 3, 
hªdËRT_Modif›rs
, "ReferenceType.Modifiers" },

1936 { 2, 6, 
hªdËRT_G‘V®ues
, "ReferenceType.GetValues" },

1937 { 2, 7, 
hªdËRT_SourûFe
, "ReferenceType.SourceFile" },

1939 { 2, 9, 
hªdËRT_Stus
, "ReferenceType.Status" },

1940 { 2, 10, 
hªdËRT_IÁ”çûs
, "ReferenceType.Interfaces" },

1942 { 2, 12, 
hªdËRT_SourûDebugEx‹nsiÚ
,

1944 { 2, 13, 
hªdËRT_SigÇtu»W™hG’”ic
,

1946 { 2, 14, 
hªdËRT_F›ldsW™hG’”ic
,

1948 { 2, 15, 
hªdËRT_M‘hodsW™hG’”ic
,

1955 { 3, 1, 
hªdËCT_Su³rşass
, "ClassType.Superclass" },

1956 { 3, 2, 
hªdËCT_S‘V®ues
, "ClassType.SetValues" },

1957 { 3, 3, 
hªdËCT_InvokeM‘hod
, "ClassType.InvokeMethod" },

1966 { 6, 1, 
hªdËM_LšeTabË
, "Method.LineTable" },

1970 { 6, 5, 
hªdËM_V¬ŸbËTabËW™hG’”ic
,

1976 { 9, 1, 
hªdËOR_Reã»nûTy³
, "ObjectReference.ReferenceType" },

1977 { 9, 2, 
hªdËOR_G‘V®ues
, "ObjectReference.GetValues" },

1978 { 9, 3, 
hªdËOR_S‘V®ues
, "ObjectReference.SetValues" },

1981 { 9, 6, 
hªdËOR_InvokeM‘hod
, "ObjectReference.InvokeMethod" },

1982 { 9, 7, 
hªdËOR_Di§bËCŞËùiÚ
,

1984 { 9, 8, 
hªdËOR_EÇbËCŞËùiÚ
,

1986 { 9, 9, 
hªdËOR_IsCŞËùed
, "ObjectReference.IsCollected" },

1990 { 10, 1, 
hªdËSR_V®ue
, "StringReference.Value" },

1993 { 11, 1, 
hªdËTR_Name
, "ThreadReference.Name" },

1994 { 11, 2, 
hªdËTR_Su¥’d
, "ThreadReference.Suspend" },

1995 { 11, 3, 
hªdËTR_Resume
, "ThreadReference.Resume" },

1996 { 11, 4, 
hªdËTR_Stus
, "ThreadReference.Status" },

1997 { 11, 5, 
hªdËTR_Th»adGroup
, "ThreadReference.ThreadGroup" },

1998 { 11, 6, 
hªdËTR_F¿mes
, "ThreadReference.Frames" },

1999 { 11, 7, 
hªdËTR_F¿meCouÁ
, "ThreadReference.FrameCount" },

2001 { 11, 9, 
hªdËTR_Cu¼’tCÚ‹ndedMÚ™Ü
,

2005 { 11, 12, 
hªdËTR_Su¥’dCouÁ
, "ThreadReference.SuspendCount" },

2010 { 12, 1, 
hªdËTGR_Name
, "ThreadGroupReference.Name" },

2011 { 12, 2, 
hªdËTGR_P¬’t
, "ThreadGroupReference.Parent" },

2012 { 12, 3, 
hªdËTGR_Chd»n
, "ThreadGroupReference.Children" },

2015 { 13, 1, 
hªdËAR_L’gth
, "ArrayReference.Length" },

2016 { 13, 2, 
hªdËAR_G‘V®ues
, "ArrayReference.GetValues" },

2017 { 13, 3, 
hªdËAR_S‘V®ues
, "ArrayReference.SetValues" },

2020 { 14, 1, 
hªdËCLR_VisibËCÏs£s
,

2024 { 15, 1, 
hªdËER_S‘
, "EventRequest.Set" },

2025 { 15, 2, 
hªdËER_CË¬
, "EventRequest.Clear" },

2029 { 16, 1, 
hªdËSF_G‘V®ues
, "StackFrame.GetValues" },

2030 { 16, 2, 
hªdËSF_S‘V®ues
, "StackFrame.SetValues" },

2031 { 16, 3, 
hªdËSF_ThisObjeù
, "StackFrame.ThisObject" },

2035 { 17, 1, 
hªdËCOR_ReæeùedTy³
,"ClassObjectReference.ReflectedType" },

2040 { 199, 1, 
hªdËDDM_Chunk
, "DDM.Chunk" },

2041 
	}
};

2049 
	$dvmJdwpProûssReque¡
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpReqH—d”
* 
pH—d”
,

2050 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
)

2052 
JdwpE¼Ü
 
»suÉ
 = 
ERR_NONE
;

2053 
i
, 
»¥L’
;

2059 ià(
pH—d”
->
cmdS‘
 !ğ
kJDWPDdmCmdS‘
) {

2060 
	`dvmDbgAùive
();

2062 
¡©e
->
Ï¡Aùiv™ySec
 = 0;

2063 
	`MEM_BARRIER
();

2082 
	`dvmJdwpS‘Wa™FÜEv’tTh»ad
(
¡©e
, 0);

2088 
	`dvmDbgTh»adRuÂšg
();

2090 
	`ex·ndBufAddS·û
(
pR•ly
, 
kJDWPH—d”L’
);

2092 
i
 = 0; i < (è
	`NELEM
(
gHªdËrM­
); i++) {

2093 ià(
gHªdËrM­
[
i
].
cmdS‘
 =ğ
pH—d”
->cmdSet &&

2094 
gHªdËrM­
[
i
].
cmd
 =ğ
pH—d”
->cmd)

2096 
	`LOGV
("REQ: %s (cmd=%d/%d dataLen=%d id=0x%06x)\n",

2097 
gHªdËrM­
[
i
].
desü
, 
pH—d”
->
cmdS‘
,…H—d”->
cmd
,

2098 
d©aL’
, 
pH—d”
->
id
);

2099 
»suÉ
 = (*
gHªdËrM­
[
i
].
func
)(
¡©e
, 
buf
, 
d©aL’
, 
pR•ly
);

2103 ià(
i
 =ğ
	`NELEM
(
gHªdËrM­
)) {

2104 
	`LOGE
("REQ: UNSUPPORTED (cmd=%d/%d dataLen=%d id=0x%06x)\n",

2105 
pH—d”
->
cmdS‘
,…H—d”->
cmd
, 
d©aL’
,…H—d”->
id
);

2106 ià(
d©aL’
 > 0)

2107 
	`dvmPrštHexDumpDbg
(
buf
, 
d©aL’
, 
LOG_TAG
);

2108 
	`as£¹
(!"command‚ot implemented");

2109 
»suÉ
 = 
ERR_NOT_IMPLEMENTED
;

2117 
u1
* 
»¶yBuf
 = 
	`ex·ndBufG‘Bufãr
(
pR•ly
);

2118 
	`£t4BE
(
»¶yBuf
 + 4, 
pH—d”
->
id
);

2119 
	`£t1
(
»¶yBuf
 + 8, 
kJDWPFÏgR•ly
);

2120 
	`£t2BE
(
»¶yBuf
 + 9, 
»suÉ
);

2121 ià(
»suÉ
 =ğ
ERR_NONE
)

2122 
	`£t4BE
(
»¶yBuf
 + 0, 
	`ex·ndBufG‘L’gth
(
pR•ly
));

2124 
	`£t4BE
(
»¶yBuf
 + 0, 
kJDWPH—d”L’
);

2126 
»¥L’
 = 
	`ex·ndBufG‘L’gth
(
pR•ly
è- 
kJDWPH—d”L’
;

2127 
	`IF_LOG
(
LOG_VERBOSE
, 
LOG_TAG
) {

2128 
	`LOGV
("»¶y: d©aL’=%dƒ¼=%s(%d)%s\n", 
»¥L’
,

2129 
	`dvmJdwpE¼ÜSŒ
(
»suÉ
),„esult,

2130 
»suÉ
 !ğ
ERR_NONE
 ? " **FAILED**" : "");

2131 ià(
»¥L’
 > 0)

2132 
	`dvmPrštHexDumpDbg
(
	`ex·ndBufG‘Bufãr
(
pR•ly
è+ 
kJDWPH—d”L’
,

2133 
»¥L’
, 
LOG_TAG
);

2140 ià(
pH—d”
->
cmdS‘
 !ğ
kJDWPDdmCmdS‘
) {

2141 
Ï¡Sec
, 
Ï¡M£c
;

2143 
	`dvmJdwpG‘NowM£c
(&
Ï¡Sec
, &
Ï¡M£c
);

2144 
¡©e
->
Ï¡Aùiv™yM£c
 = 
Ï¡M£c
;

2145 
	`MEM_BARRIER
();

2146 
¡©e
->
Ï¡Aùiv™ySec
 = 
Ï¡Sec
;

2150 
	`dvmDbgTh»adWa™šg
();

2151 
	}
}

	@jdwp/JdwpHandler.h

19 #iâdeà
_DALVIK_JDWP_JDWPHANDLER


20 
	#_DALVIK_JDWP_JDWPHANDLER


	)

22 
	~"CommÚ.h
"

23 
	~"Ex·ndBuf.h
"

28 
	sJdwpReqH—d”
 {

29 
u4
 
	mËngth
;

30 
u4
 
	mid
;

31 
u1
 
	mcmdS‘
;

32 
u1
 
	mcmd
;

33 } 
	tJdwpReqH—d”
;

41 
dvmJdwpProûssReque¡
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpReqH—d”
* 
pH—d”
,

42 cÚ¡ 
u1
* 
buf
, 
d©aL’
, 
Ex·ndBuf
* 
pR•ly
);

45 
dvmJdwpAddLoÿtiÚ
(
Ex·ndBuf
* 
pR•ly
, cÚ¡ 
JdwpLoÿtiÚ
* 
pLoc
);

	@jdwp/JdwpMain.c

19 
	~"jdwp/JdwpPriv.h
"

20 
	~"D®vik.h
"

21 
	~"Atomic.h
"

23 
	~<¡dlib.h
>

24 
	~<uni¡d.h
>

25 
	~<sys/time.h
>

26 
	~<time.h
>

27 
	~<”ºo.h
>

30 * 
jdwpTh»adS¹
(* 
¬g
);

39 
JdwpS‹
* 
	$dvmJdwpS¹up
(cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

41 
JdwpS‹
* 
¡©e
 = 
NULL
;

42 
i
, 
¦“pI‹r
;

43 
u8
 
¡¬tWh’
;

46 
	`ªdroid_£tMšPriÜ™y
(
LOG_TAG
, 
ANDROID_LOG_DEBUG
);

48 
¡©e
 = (
JdwpS‹
*è
	`ÿÎoc
(1, (JdwpState));

50 
¡©e
->
·¿ms
 = *
pP¬ams
;

52 
¡©e
->
»que¡S”Ÿl
 = 0x10000000;

53 
¡©e
->
ev’tS”Ÿl
 = 0x20000000;

54 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
th»adS¹Lock
);

55 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
©chLock
);

56 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
£rŸlLock
);

57 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
ev’tLock
);

58 
¡©e
->
ev’tTh»adId
 = 0;

59 
	`dvmDbgIn™Mu‹x
(&
¡©e
->
ev’tTh»adLock
);

60 
	`dvmDbgIn™CÚd
(&
¡©e
->
th»adS¹CÚd
);

61 
	`dvmDbgIn™CÚd
(&
¡©e
->
©chCÚd
);

62 
	`dvmDbgIn™CÚd
(&
¡©e
->
ev’tTh»adCÚd
);

64 
pP¬ams
->
Œª¥Üt
) {

65 
kJdwpT¿n¥ÜtSock‘
:

67 
¡©e
->
Œª¥Üt
 = 
	`dvmJdwpSock‘T¿n¥Üt
();

69 
kJdwpT¿n¥ÜtAndroidAdb
:

71 
¡©e
->
Œª¥Üt
 = 
	`dvmJdwpAndroidAdbT¿n¥Üt
();

75 
	`LOGE
("UnknowÀŒª¥Üˆ%d\n", 
pP¬ams
->
Œª¥Üt
);

76 
	`as£¹
(
çl£
);

77 
ç
;

80 ià(!
	`dvmJdwpN‘S¹up
(
¡©e
, 
pP¬ams
))

81 
ç
;

87 
	`dvmDbgLockMu‹x
(&
¡©e
->
th»adS¹Lock
);

88 ià(
pP¬ams
->
su¥’d
)

89 
	`dvmDbgLockMu‹x
(&
¡©e
->
©chLock
);

95 ià(!
	`dvmC»©eIÁ”ÇlTh»ad
(&
¡©e
->
debugTh»adHªdË
, "JDWP",

96 
jdwpTh»adS¹
, 
¡©e
))

99 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
th»adS¹Lock
);

100 ià(
pP¬ams
->
su¥’d
)

101 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

102 
ç
;

109 
	`dvmDbgCÚdWa™
(&
¡©e
->
th»adS¹CÚd
, &¡©e->
th»adS¹Lock
);

110 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
th»adS¹Lock
);

121 ià(
pP¬ams
->
su¥’d
) {

122 
	`dvmChªgeStus
(
NULL
, 
THREAD_VMWAIT
);

123 
	`dvmDbgCÚdWa™
(&
¡©e
->
©chCÚd
, &¡©e->
©chLock
);

124 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

125 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

127 ià(!
	`dvmJdwpIsAùive
(
¡©e
)) {

128 
	`LOGE
("JDWP connection failed\n");

129 
ç
;

132 
	`LOGI
("JDWP connected\n");

141  
¡©e
;

143 
ç
:

144 
	`dvmJdwpShutdown
(
¡©e
);

145  
NULL
;

146 
	}
}

154 
	$dvmJdwpRe£tS‹
(
JdwpS‹
* 
¡©e
)

158 
	`dvmJdwpUÄegi¡”AÎ
(
¡©e
);

159 
	`as£¹
(
¡©e
->
ev’tLi¡
 =ğ
NULL
);

165 ià(
¡©e
->
ev’tTh»adId
 != 0) {

166 
	`LOGW
("WARNING:„esetting state whileƒvent in…rogress\n");

167 
	`as£¹
(
çl£
);

169 
	}
}

174 
	$dvmJdwpShutdown
(
JdwpS‹
* 
¡©e
)

176 * 
th»adR‘uº
;

178 ià(
¡©e
 =ğ
NULL
)

181 ià(
	`dvmJdwpIsT¿n¥ÜtDefšed
(
¡©e
)) {

182 ià(
	`dvmJdwpIsCÚÃùed
(
¡©e
))

183 
	`dvmJdwpPo¡VMD—th
(
¡©e
);

188 
	`LOGD
("JDWP shutting down‚et...\n");

189 
	`dvmJdwpN‘Shutdown
(
¡©e
);

191 ià(
¡©e
->
debugTh»adS¹ed
) {

192 
¡©e
->
run
 = 
çl£
;

193 ià(
	`±h»ad_još
(
¡©e
->
debugTh»adHªdË
, &
th»adR‘uº
) != 0) {

194 
	`LOGW
("JDWPhread join failed\n");

198 
	`LOGV
("JDWP freeing‚etstate...\n");

199 
	`dvmJdwpN‘F»e
(
¡©e
);

200 
¡©e
->
ÃtS‹
 = 
NULL
;

202 
	`as£¹
(
¡©e
->
ÃtS‹
 =ğ
NULL
);

204 
	`dvmJdwpRe£tS‹
(
¡©e
);

205 
	`ä“
(
¡©e
);

206 
	}
}

211 
boŞ
 
	$dvmJdwpIsAùive
(
JdwpS‹
* 
¡©e
)

213  
	`dvmJdwpIsCÚÃùed
(
¡©e
);

214 
	}
}

220 * 
	$jdwpTh»adS¹
(* 
¬g
)

222 
JdwpS‹
* 
¡©e
 = (JdwpS‹*è
¬g
;

224 
	`LOGV
("JDWP:hread„unning\n");

230 
¡©e
->
debugTh»adHªdË
 = 
	`dvmTh»adS–f
()->
hªdË
;

231 
¡©e
->
run
 = 
Œue
;

232 
	`MEM_BARRIER
();

233 
¡©e
->
debugTh»adS¹ed
 = 
Œue
;

235 
	`dvmDbgLockMu‹x
(&
¡©e
->
th»adS¹Lock
);

236 
	`dvmDbgCÚdBrßdÿ¡
(&
¡©e
->
th»adS¹CÚd
);

237 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
th»adS¹Lock
);

240 
	`dvmDbgTh»adWa™šg
();

250 
¡©e
->
run
) {

251 
boŞ
 
fœ¡
;

252 
cc
;

254 ià(
¡©e
->
·¿ms
.
£rv”
) {

259 ià(!
	`dvmJdwpAcû±CÚÃùiÚ
(
¡©e
))

268 ià(!
	`dvmJdwpE¡ablishCÚÃùiÚ
(
¡©e
)) {

270 
	`dvmDbgLockMu‹x
(&
¡©e
->
©chLock
);

271 
	`dvmDbgCÚdBrßdÿ¡
(&
¡©e
->
©chCÚd
);

272 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

278 
	`dvmDbgCÚÃùed
();

281 
fœ¡
 = 
Œue
;

282 
Œue
) {

284 ià(
	`dvmTh»adS–f
()->
¡©us
 !ğ
THREAD_VMWAIT
) {

285 
	`LOGE
("JDWPhread‚o†onger in VMWAIT (now %d);„esetting\n",

286 
	`dvmTh»adS–f
()->
¡©us
);

287 
	`dvmDbgTh»adWa™šg
();

290 ià(!
	`dvmJdwpProûssIncomšg
(
¡©e
))

293 ià(
fœ¡
 && !
	`dvmJdwpAwa™šgHªdshake
(
¡©e
)) {

295 
fœ¡
 = 
çl£
;

298 
¡©e
->
debugTh»adId
 = 
	`dvmDbgG‘Th»adS–fId
();

301 
	`dvmDbgLockMu‹x
(&
¡©e
->
©chLock
);

302 
	`dvmDbgCÚdBrßdÿ¡
(&
¡©e
->
©chCÚd
);

303 
	`dvmDbgUÆockMu‹x
(&
¡©e
->
©chLock
);

307 
	`dvmJdwpClo£CÚÃùiÚ
(
¡©e
);

309 ià(
¡©e
->
ddmAùive
) {

310 
¡©e
->
ddmAùive
 = 
çl£
;

313 
	`dvmDbgTh»adRuÂšg
();

314 
	`dvmDbgDdmDiscÚÃùed
();

315 
	`dvmDbgTh»adWa™šg
();

319 
	`dvmDbgDiscÚÃùed
();

322 
	`dvmUndoDebugg”Su¥’siÚs
();

324 
	`dvmJdwpRe£tS‹
(
¡©e
);

327 ià(!
¡©e
->
·¿ms
.
£rv”
)

328 
¡©e
->
run
 = 
çl£
;

332 
	`dvmDbgTh»adRuÂšg
();

334 
	`LOGV
("JDWP:hreadƒxiting\n");

335  
NULL
;

336 
	}
}

342 
±h»ad_t
 
	$dvmJdwpG‘DebugTh»ad
(
JdwpS‹
* 
¡©e
)

344 ià(
¡©e
 =ğ
NULL
)

347  
¡©e
->
debugTh»adHªdË
;

348 
	}
}

381 
	$dvmJdwpWa™FÜDebugg”
(
JdwpS‹
* 
¡©e
)

384 
	}
}

391 
	$dvmJdwpG‘NowM£c
(* 
pSec
, * 
pM£c
)

393 #ifdeà
HAVE_POSIX_CLOCKS


394 
time¥ec
 
now
;

395 
	`şock_g‘time
(
CLOCK_MONOTONIC
, &
now
);

396 *
pSec
 = 
now
.
tv_£c
;

397 *
pM£c
 = 
now
.
tv_n£c
 / 1000000;

399 
timev®
 
now
;

400 
	`g‘timeofday
(&
now
, 
NULL
);

401 *
pSec
 = 
now
.
tv_£c
;

402 *
pM£c
 = 
now
.
tv_u£c
 / 1000;

404 
	}
}

412 
s8
 
	$dvmJdwpLa¡Debugg”Aùiv™y
(
JdwpS‹
* 
¡©e
)

414 
Ï¡Sec
, 
Ï¡M£c
;

415 
nowSec
, 
nowM£c
;

418 
Ï¡Sec
 = 
¡©e
->
Ï¡Aùiv™ySec
;

419 
Ï¡M£c
 = 
¡©e
->
Ï¡Aùiv™yM£c
;

422 ià(
Ï¡Sec
 =ğ0 || 
¡©e
->
Ï¡Aùiv™ySec
 !=†astSec) {

428 
	`dvmJdwpG‘NowM£c
(&
nowSec
, &
nowM£c
);

430 
s8
 
Ï¡
 = (s8)
Ï¡Sec
 * 1000 + 
Ï¡M£c
;

431 
s8
 
now
 = (s8)
nowSec
 * 1000 + 
nowM£c
;

438  
now
 - 
Ï¡
;

439 
	}
}

	@jdwp/JdwpPriv.h

19 #iâdeà
_DALVIK_JDWP_JDWPPRIV


20 
	#_DALVIK_JDWP_JDWPPRIV


	)

22 
	#LOG_TAG
 "jdwp"

	)

24 
	~"jdwp/Jdwp.h
"

25 
	~"jdwp/JdwpEv’t.h
"

26 
	~"Debugg”.h
"

27 
	~<±h»ad.h
>

32 
	#kJDWPH—d”L’
 11

	)

33 
	#kJDWPFÏgR•ly
 0x80

	)

36 
	#kJDWPDdmCmdS‘
 199

	)

37 
	#kJDWPDdmCmd
 1

	)

43 
	gJdwpN‘S‹
;

44 
JdwpN‘S‹
 
	tJdwpN‘S‹
;

46 
	gJdwpS‹
;

51 
	sJdwpT¿n¥Üt
 {

52 
boŞ
 (*
¡¬tup
)(
JdwpS‹
* 
	m¡©e
, cÚ¡ 
JdwpS¹upP¬ams
* 
	mpP¬ams
);

53 
boŞ
 (*
acû±
)(
JdwpS‹
* 
	m¡©e
);

54 
boŞ
 (*
e¡ablish
)(
JdwpS‹
* 
	m¡©e
);

55 (*
	mşo£
)(
JdwpS‹
* 
	m¡©e
);

56 (*
	mshutdown
)(
JdwpS‹
* 
	m¡©e
);

57 (*
	mä“
)(
JdwpS‹
* 
	m¡©e
);

58 
boŞ
 (*
isCÚÃùed
)(
JdwpS‹
* 
	m¡©e
);

59 
boŞ
 (*
awa™šgHªdshake
)(
JdwpS‹
* 
	m¡©e
);

60 
boŞ
 (*
´oûssIncomšg
)(
JdwpS‹
* 
	m¡©e
);

61 
boŞ
 (*
£ndReque¡
)(
JdwpS‹
* 
	m¡©e
, 
Ex·ndBuf
* 
	mpReq
);

62 } 
	tJdwpT¿n¥Üt
;

64 cÚ¡ 
JdwpT¿n¥Üt
* 
dvmJdwpSock‘T¿n¥Üt
();

65 cÚ¡ 
JdwpT¿n¥Üt
* 
dvmJdwpAndroidAdbT¿n¥Üt
();

71 
	sJdwpS‹
 {

72 
JdwpS¹upP¬ams
 
	m·¿ms
;

75 
±h»ad_mu‹x_t
 
	mth»adS¹Lock
;

76 
±h»ad_cÚd_t
 
	mth»adS¹CÚd
;

78 
boŞ
 
	mdebugTh»adS¹ed
;

79 
±h»ad_t
 
	mdebugTh»adHªdË
;

80 
ObjeùId
 
	mdebugTh»adId
;

81 
boŞ
 
	mrun
;

83 cÚ¡ 
JdwpT¿n¥Üt
* 
	mŒª¥Üt
;

84 
JdwpN‘S‹
* 
	mÃtS‹
;

87 
±h»ad_mu‹x_t
 
	m©chLock
;

88 
±h»ad_cÚd_t
 
	m©chCÚd
;

91 vŞ©
	mÏ¡Aùiv™ySec
;

92 vŞ©
	mÏ¡Aùiv™yM£c
;

95 
u4
 
	m»que¡S”Ÿl
;

96 
u4
 
	mev’tS”Ÿl
;

97 
±h»ad_mu‹x_t
 
	m£rŸlLock
;

102 
	mnumEv’ts
;

103 
JdwpEv’t
* 
	mev’tLi¡
;

104 
±h»ad_mu‹x_t
 
	mev’tLock
;

110 
±h»ad_mu‹x_t
 
	mev’tTh»adLock
;

111 
±h»ad_cÚd_t
 
	mev’tTh»adCÚd
;

112 
ObjeùId
 
	mev’tTh»adId
;

117 
boŞ
 
	mddmAùive
;

122 
dvmJdwpRe£tS‹
(
JdwpS‹
* 
¡©e
);

125 
u4
 
dvmJdwpNextReque¡S”Ÿl
(
JdwpS‹
* 
¡©e
);

126 
u4
 
dvmJdwpNextEv’tS”Ÿl
(
JdwpS‹
* 
¡©e
);

129 
dvmJdwpG‘NowM£c
(* 
pSec
, * 
pM£c
);

135 
INLINE
 
boŞ
 
	$dvmJdwpN‘S¹up
(
JdwpS‹
* 
¡©e
,

136 cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

138  (*
¡©e
->
Œª¥Üt
->
¡¬tup
)(¡©e, 
pP¬ams
);

139 
	}
}

140 
INLINE
 
boŞ
 
	$dvmJdwpAcû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
) {

141  (*
¡©e
->
Œª¥Üt
->
acû±
)(state);

142 
	}
}

143 
INLINE
 
boŞ
 
	$dvmJdwpE¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
) {

144  (*
¡©e
->
Œª¥Üt
->
e¡ablish
)(state);

145 
	}
}

146 
INLINE
 
	$dvmJdwpClo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
) {

147 (*
¡©e
->
Œª¥Üt
->
şo£
)(state);

148 
	}
}

149 
INLINE
 
	$dvmJdwpN‘Shutdown
(
JdwpS‹
* 
¡©e
) {

150 (*
¡©e
->
Œª¥Üt
->
shutdown
)(state);

151 
	}
}

152 
INLINE
 
	$dvmJdwpN‘F»e
(
JdwpS‹
* 
¡©e
) {

153 (*
¡©e
->
Œª¥Üt
->
ä“
)(state);

154 
	}
}

155 
INLINE
 
boŞ
 
	$dvmJdwpIsT¿n¥ÜtDefšed
(
JdwpS‹
* 
¡©e
) {

156  
¡©e
 !ğ
NULL
 && s‹->
Œª¥Üt
 != NULL;

157 
	}
}

158 
INLINE
 
boŞ
 
	$dvmJdwpIsCÚÃùed
(
JdwpS‹
* 
¡©e
) {

159  
¡©e
 !ğ
NULL
 && (*¡©e->
Œª¥Üt
->
isCÚÃùed
)(state);

160 
	}
}

161 
INLINE
 
boŞ
 
	$dvmJdwpAwa™šgHªdshake
(
JdwpS‹
* 
¡©e
) {

162  (*
¡©e
->
Œª¥Üt
->
awa™šgHªdshake
)(state);

163 
	}
}

164 
INLINE
 
boŞ
 
	$dvmJdwpProûssIncomšg
(
JdwpS‹
* 
¡©e
) {

165  (*
¡©e
->
Œª¥Üt
->
´oûssIncomšg
)(state);

166 
	}
}

167 
INLINE
 
boŞ
 
	$dvmJdwpS’dReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
) {

168  (*
¡©e
->
Œª¥Üt
->
£ndReque¡
)(¡©e, 
pReq
);

169 
	}
}

	@jdwp/JdwpSocket.c

19 
	~"jdwp/JdwpPriv.h
"

20 
	~"jdwp/JdwpHªdËr.h
"

21 
	~"B™s.h
"

23 
	~<¡dlib.h
>

24 
	~<uni¡d.h
>

25 
	~<¡dio.h
>

26 
	~<¡ršg.h
>

27 
	~<”ºo.h
>

28 
	~<sys/ty³s.h
>

29 
	~<sys/sock‘.h
>

30 
	~<Ãtš‘/š.h
>

31 
	~<Ãtš‘/tı.h
>

32 
	~<¬·/š‘.h
>

33 
	~<Ãtdb.h
>

35 
	#kBa£PÜt
 8000

	)

36 
	#kMaxPÜt
 8040

	)

38 
	#kIÅutBufãrSize
 8192

	)

40 
	#kMagicHªdshake
 "JDWP-Hªdshake"

	)

41 
	#kMagicHªdshakeL’
 ((
kMagicHªdshake
)-1)

	)

44 
ÃtShutdown
(
JdwpN‘S‹
* 
¡©e
);

45 
ÃtF»e
(
JdwpN‘S‹
* 
¡©e
);

53 
	sJdwpN‘S‹
 {

54 
	mli¡’PÜt
;

55 
	mli¡’Sock
;

56 
	mş›ÁSock
;

57 
	mwakePe
[2];

59 
š_addr
 
	m»mÙeAddr
;

60 
	m»mÙePÜt
;

62 
boŞ
 
	mawa™šgHªdshake
;

65 
	mšputBufãr
[
kIÅutBufãrSize
];

66 
	mšputCouÁ
;

69 
JdwpN‘S‹
* 
ÃtS¹up
(
pÜt
);

74 
boŞ
 
	$´•¬eSock‘
(
JdwpS‹
* 
¡©e
, cÚ¡ 
JdwpS¹upP¬ams
* 
pP¬ams
)

76 
pÜt
;

78 ià(
pP¬ams
->
£rv”
) {

79 ià(
pP¬ams
->
pÜt
 != 0) {

81 
pÜt
 = 
pP¬ams
->port;

82 
¡©e
->
ÃtS‹
 = 
	`ÃtS¹up
(
pÜt
);

85 
pÜt
 = 
kBa£PÜt
;…Üˆ<ğ
kMaxPÜt
;…ort++) {

86 
¡©e
->
ÃtS‹
 = 
	`ÃtS¹up
(
pÜt
);

87 ià(
¡©e
->
ÃtS‹
 !ğ
NULL
)

91 ià(
¡©e
->
ÃtS‹
 =ğ
NULL
) {

92 
	`LOGE
("JDWP‚‘ s¹u°çed (»q…Üt=%d)\n", 
pP¬ams
->
pÜt
);

93  
çl£
;

96 
pÜt
 = 
pP¬ams
->port;

97 
¡©e
->
ÃtS‹
 = 
	`ÃtS¹up
(-1);

100 ià(
pP¬ams
->
su¥’d
)

101 
	`LOGI
("JDWP wÈwa™ fÜ debugg” oÀpÜˆ%d\n", 
pÜt
);

103 
	`LOGD
("JDWP will %s on…ort %d\n",

104 
pP¬ams
->
£rv”
 ? "li¡’" : "cÚÃù", 
pÜt
);

106  
Œue
;

107 
	}
}

113 
boŞ
 
	$awa™šgHªdshake
(
JdwpS‹
* 
¡©e
)

115  
¡©e
->
ÃtS‹
->
awa™šgHªdshake
;

116 
	}
}

130 
JdwpN‘S‹
* 
	$ÃtS¹up
(
pÜt
)

132 
JdwpN‘S‹
* 
ÃtS‹
;

133 
Úe
 = 1;

135 
ÃtS‹
 = (
JdwpN‘S‹
*è
	`m®loc
((*netState));

136 
	`mem£t
(
ÃtS‹
, 0, (*netState));

137 
ÃtS‹
->
li¡’Sock
 = -1;

138 
ÃtS‹
->
ş›ÁSock
 = -1;

139 
ÃtS‹
->
wakePe
[0] = -1;

140 
ÃtS‹
->
wakePe
[1] = -1;

142 ià(
pÜt
 < 0)

143  
ÃtS‹
;

145 
	`as£¹
(
pÜt
 != 0);

147 
ÃtS‹
->
li¡’Sock
 = 
	`sock‘
(
PF_INET
, 
SOCK_STREAM
, 
IPPROTO_TCP
);

148 ià(
ÃtS‹
->
li¡’Sock
 < 0) {

149 
	`LOGE
("Sock‘ c»©çed: %s\n", 
	`¡»¼Ü
(
”ºo
));

150 
ç
;

154 ià(
	`£tsockİt
(
ÃtS‹
->
li¡’Sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
, &
Úe
,

155 (
Úe
)) < 0)

157 
	`LOGE
("£tsockİt(SO_REUSEADDRèçed: %s\n", 
	`¡»¼Ü
(
”ºo
));

158 
ç
;

162 
sockaddr_š
 
addrIÃt
;

163 
sockaddr
 
addrPÏš
;

164 } 
addr
;

165 
addr
.
addrIÃt
.
sš_çmy
 = 
AF_INET
;

166 
addr
.
addrIÃt
.
sš_pÜt
 = 
	`htÚs
(
pÜt
);

167 
	`š‘_©Ú
("127.0.0.1", &
addr
.
addrIÃt
.
sš_addr
);

169 ià(
	`bšd
(
ÃtS‹
->
li¡’Sock
, &
addr
.
addrPÏš
, (addr)) != 0) {

170 
	`LOGV
("©‹m±ØbšdØpÜˆ%u faed: %s\n", 
pÜt
, 
	`¡»¼Ü
(
”ºo
));

171 
ç
;

174 
ÃtS‹
->
li¡’PÜt
 = 
pÜt
;

175 
	`LOGVV
("+++ boundØpÜˆ%d\n", 
ÃtS‹
->
li¡’PÜt
);

177 ià(
	`li¡’
(
ÃtS‹
->
li¡’Sock
, 5) != 0) {

178 
	`LOGE
("Li¡’ faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

179 
ç
;

182  
ÃtS‹
;

184 
ç
:

185 
	`ÃtShutdown
(
ÃtS‹
);

186 
	`ÃtF»e
(
ÃtS‹
);

187  
NULL
;

188 
	}
}

201 
	$ÃtShutdown
(
JdwpN‘S‹
* 
ÃtS‹
)

203 ià(
ÃtS‹
 =ğ
NULL
)

206 
li¡’Sock
 = 
ÃtS‹
->listenSock;

207 
ş›ÁSock
 = 
ÃtS‹
->clientSock;

210 
ÃtS‹
->
li¡’Sock
 =‚‘S‹->
ş›ÁSock
 = -1;

213 ià(
li¡’Sock
 >= 0) {

214 
	`shutdown
(
li¡’Sock
, 
SHUT_RDWR
);

215 
	`şo£
(
li¡’Sock
);

217 ià(
ş›ÁSock
 >= 0) {

218 
	`shutdown
(
ş›ÁSock
, 
SHUT_RDWR
);

219 
	`şo£
(
ş›ÁSock
);

223 ià(
ÃtS‹
->
wakePe
[1] >= 0) {

224 
	`LOGV
("+++ writingo wakePipe\n");

225 (è
	`wr™e
(
ÃtS‹
->
wakePe
[1], "", 1);

227 
	}
}

228 
	$ÃtShutdownEx‹º
(
JdwpS‹
* 
¡©e
)

230 
	`ÃtShutdown
(
¡©e
->
ÃtS‹
);

231 
	}
}

238 
	$ÃtF»e
(
JdwpN‘S‹
* 
ÃtS‹
)

240 ià(
ÃtS‹
 =ğ
NULL
)

242 
	`as£¹
(
ÃtS‹
->
li¡’Sock
 == -1);

243 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 == -1);

245 ià(
ÃtS‹
->
wakePe
[0] >= 0) {

246 
	`şo£
(
ÃtS‹
->
wakePe
[0]);

247 
ÃtS‹
->
wakePe
[0] = -1;

249 ià(
ÃtS‹
->
wakePe
[1] >= 0) {

250 
	`şo£
(
ÃtS‹
->
wakePe
[1]);

251 
ÃtS‹
->
wakePe
[1] = -1;

254 
	`ä“
(
ÃtS‹
);

255 
	}
}

256 
	$ÃtF»eEx‹º
(
JdwpS‹
* 
¡©e
)

258 
	`ÃtF»e
(
¡©e
->
ÃtS‹
);

259 
	}
}

264 
boŞ
 
	$isCÚÃùed
(
JdwpS‹
* 
¡©e
)

266  (
¡©e
->
ÃtS‹
 !ğ
NULL
 &&

267 
¡©e
->
ÃtS‹
->
ş›ÁSock
 >= 0);

268 
	}
}

273 
boŞ
 
	$isFdR—dabË
(
sock
)

275 
fd_£t
 
»adfds
;

276 
timev®
 
tv
;

277 
couÁ
;

279 
	`FD_ZERO
(&
»adfds
);

280 
	`FD_SET
(
sock
, &
»adfds
);

282 
tv
.
tv_£c
 = 0;

283 
tv
.
tv_u£c
 = 0;

284 
couÁ
 = 
	`£Ëù
(
sock
+1, &
»adfds
, 
NULL
, NULL, &
tv
);

285 ià(
couÁ
 <= 0)

286  
çl£
;

288 ià(
	`FD_ISSET
(
sock
, &
»adfds
))

289  
Œue
;

291 
	`LOGE
("WEIRD: odd behaviÜ iÀ£Ëù (couÁ=%d)\n", 
couÁ
);

292  
çl£
;

293 
	}
}

301 
boŞ
 
	$checkCÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

303 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

305 
	`as£¹
(
ÃtS‹
->
li¡’Sock
 >= 0);

307 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 < 0);

309 ià(!
	`isFdR—dabË
(
ÃtS‹
->
li¡’Sock
))

310  
çl£
;

311  
Œue
;

312 
	}
}

320 
	$£tNoD–ay
(
fd
)

322 
cc
, 
Ú
 = 1;

324 
cc
 = 
	`£tsockİt
(
fd
, 
IPPROTO_TCP
, 
TCP_NODELAY
, &
Ú
, (on));

325 
	`as£¹
(
cc
 == 0);

326  
cc
;

327 
	}
}

334 
boŞ
 
	$acû±CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

336 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

338 
sockaddr_š
 
addrIÃt
;

339 
sockaddr
 
addrPÏš
;

340 } 
addr
;

341 
sockËn_t
 
add¾’
;

342 
sock
;

344 ià(
ÃtS‹
->
li¡’Sock
 < 0)

345  
çl£
;

347 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 < 0);

349 
add¾’
 = (
addr
);

351 
sock
 = 
	`acû±
(
ÃtS‹
->
li¡’Sock
, &
addr
.
addrPÏš
, &
add¾’
);

352 ià(
sock
 < 0 && 
”ºo
 !ğ
EINTR
) {

355 ià(
”ºo
 =ğ
EINVAL
)

356 
	`LOGVV
("acû± faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

358 
	`LOGE
("acû± faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

359  
çl£
;

361 } 
sock
 < 0);

363 
ÃtS‹
->
»mÙeAddr
 = 
addr
.
addrIÃt
.
sš_addr
;

364 
ÃtS‹
->
»mÙePÜt
 = 
	`Áohs
(
addr
.
addrIÃt
.
sš_pÜt
);

365 
	`LOGV
("+++‡ccepted connection from %s:%u\n",

366 
	`š‘_Áß
(
ÃtS‹
->
»mÙeAddr
),‚‘S‹->
»mÙePÜt
);

368 
ÃtS‹
->
ş›ÁSock
 = 
sock
;

369 
ÃtS‹
->
awa™šgHªdshake
 = 
Œue
;

370 
ÃtS‹
->
šputCouÁ
 = 0;

372 
	`LOGV
("Setting TCP_NODELAY on‡ccepted socket\n");

373 
	`£tNoD–ay
(
ÃtS‹
->
ş›ÁSock
);

375 ià(
	`pe
(
ÃtS‹
->
wakePe
) < 0) {

376 
	`LOGE
("pipe failed");

377  
çl£
;

380  
Œue
;

381 
	}
}

386 
boŞ
 
	$e¡ablishCÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

389 
sockaddr_š
 
addrIÃt
;

390 
sockaddr
 
addrPÏš
;

391 } 
addr
;

392 
ho¡’t
* 
pEÁry
;

393 
auxBuf
[128];

394 
cc
, 
h_”ºo
;

396 
	`as£¹
(
¡©e
 !ğ
NULL
 && s‹->
ÃtS‹
 != NULL);

397 
	`as£¹
(!
¡©e
->
·¿ms
.
£rv”
);

398 
	`as£¹
(
¡©e
->
·¿ms
.
ho¡
[0] != '\0');

399 
	`as£¹
(
¡©e
->
·¿ms
.
pÜt
 != 0);

406 #ifdeà
HAVE_GETHOSTBYNAME_R


407 
ho¡’t
 
he
;

408 
cc
 = 
	`g‘ho¡byÇme_r
(
¡©e
->
·¿ms
.
ho¡
, &
he
, 
auxBuf
, (auxBuf),

409 &
pEÁry
, &
h_”ºo
);

410 ià(
cc
 != 0) {

411 
	`LOGW
("gethostbyname_r('%s') failed: %s\n",

412 
¡©e
->
·¿ms
.
ho¡
, 
	`¡»¼Ü
(
”ºo
));

413  
çl£
;

417 
h_”ºo
 = 0;

418 
pEÁry
 = 
	`g‘ho¡byÇme
(
¡©e
->
·¿ms
.
ho¡
);

419 ià(
pEÁry
 =ğ
NULL
) {

420 
	`LOGW
("gethostbyname('%s') failed: %s\n",

421 
¡©e
->
·¿ms
.
ho¡
, 
	`¡»¼Ü
(
h_”ºo
));

422  
çl£
;

427 
	`memıy
(&
addr
.
addrIÃt
.
sš_addr
, 
pEÁry
->
h_addr
,…EÁry->
h_Ëngth
);

428 
addr
.
addrIÃt
.
sš_çmy
 = 
pEÁry
->
h_add¹y³
;

430 
addr
.
addrIÃt
.
sš_pÜt
 = 
	`htÚs
(
¡©e
->
·¿ms
.
pÜt
);

432 
	`LOGI
("Connecting outo '%s' %d\n",

433 
	`š‘_Áß
(
addr
.
addrIÃt
.
sš_addr
), 
	`Áohs
×ddr.addrIÃt.
sš_pÜt
));

438 
JdwpN‘S‹
* 
ÃtS‹
;

439 
ÃtS‹
 = 
¡©e
->netState;

440 
ÃtS‹
->
ş›ÁSock
 = 
	`sock‘
(
PF_INET
, 
SOCK_STREAM
, 
IPPROTO_TCP
);

441 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

442 
	`LOGE
("UÇbËØü—‹ sock‘: %s\n", 
	`¡»¼Ü
(
”ºo
));

443  
çl£
;

449 ià(
	`cÚÃù
(
ÃtS‹
->
ş›ÁSock
, &
addr
.
addrPÏš
, (addr)) != 0) {

450 
	`LOGE
("Unableo connecto %s:%d: %s\n",

451 
	`š‘_Áß
(
addr
.
addrIÃt
.
sš_addr
), 
	`Áohs
×ddr.addrIÃt.
sš_pÜt
),

452 
	`¡»¼Ü
(
”ºo
));

453 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

454 
ÃtS‹
->
ş›ÁSock
 = -1;

455  
çl£
;

458 
	`LOGI
("Connectionƒstablishedo %s (%s:%d)\n",

459 
¡©e
->
·¿ms
.
ho¡
, 
	`š‘_Áß
(
addr
.
addrIÃt
.
sš_addr
),

460 
	`Áohs
(
addr
.
addrIÃt
.
sš_pÜt
));

461 
ÃtS‹
->
awa™šgHªdshake
 = 
Œue
;

462 
ÃtS‹
->
šputCouÁ
 = 0;

464 
	`£tNoD–ay
(
ÃtS‹
->
ş›ÁSock
);

466 ià(
	`pe
(
ÃtS‹
->
wakePe
) < 0) {

467 
	`LOGE
("pipe failed");

468  
çl£
;

471  
Œue
;

472 
	}
}

479 
	$şo£CÚÃùiÚ
(
JdwpS‹
* 
¡©e
)

481 
JdwpN‘S‹
* 
ÃtS‹
;

483 
	`as£¹
(
¡©e
 !ğ
NULL
 && s‹->
ÃtS‹
 != NULL);

485 
ÃtS‹
 = 
¡©e
->netState;

486 ià(
ÃtS‹
->
ş›ÁSock
 < 0)

489 
	`LOGV
("+++ closed connectiono %s:%u\n",

490 
	`š‘_Áß
(
ÃtS‹
->
»mÙeAddr
),‚‘S‹->
»mÙePÜt
);

492 
	`şo£
(
ÃtS‹
->
ş›ÁSock
);

493 
ÃtS‹
->
ş›ÁSock
 = -1;

496 
	}
}

501 
boŞ
 
	$haveFuÎPack‘
(
JdwpN‘S‹
* 
ÃtS‹
)

503 
Ëngth
;

505 ià(
ÃtS‹
->
awa™šgHªdshake
)

506  (
ÃtS‹
->
šputCouÁ
 >ğ(è
kMagicHªdshakeL’
);

508 ià(
ÃtS‹
->
šputCouÁ
 < 4)

509  
çl£
;

511 
Ëngth
 = 
	`g‘4BE
(
ÃtS‹
->
šputBufãr
);

512  (
ÃtS‹
->
šputCouÁ
 >ğ
Ëngth
);

513 
	}
}

521 
	$cÚsumeBy‹s
(
JdwpN‘S‹
* 
ÃtS‹
, 
couÁ
)

523 
	`as£¹
(
couÁ
 > 0);

524 
	`as£¹
(
couÁ
 <ğ
ÃtS‹
->
šputCouÁ
);

526 ià(
couÁ
 =ğ
ÃtS‹
->
šputCouÁ
) {

527 
ÃtS‹
->
šputCouÁ
 = 0;

531 
	`memmove
(
ÃtS‹
->
šputBufãr
,‚‘S‹->šputBufã¸+ 
couÁ
,

532 
ÃtS‹
->
šputCouÁ
 - 
couÁ
);

533 
ÃtS‹
->
šputCouÁ
 -ğ
couÁ
;

534 
	}
}

539 
	$dumpPack‘
(cÚ¡ * 
·ck‘Buf
)

541 cÚ¡ * 
buf
 = 
·ck‘Buf
;

542 
u4
 
Ëngth
, 
id
;

543 
u1
 
æags
, 
cmdS‘
, 
cmd
;

544 
u2
 
”rÜ
;

545 
boŞ
 
»¶y
;

546 
d©aL’
;

548 
cmd
 = 
cmdS‘
 = 0xcc;

550 
Ëngth
 = 
	`»ad4BE
(&
buf
);

551 
id
 = 
	`»ad4BE
(&
buf
);

552 
æags
 = 
	`»ad1
(&
buf
);

553 ià((
æags
 & 
kJDWPFÏgR•ly
) != 0) {

554 
»¶y
 = 
Œue
;

555 
”rÜ
 = 
	`»ad2BE
(&
buf
);

557 
»¶y
 = 
çl£
;

558 
cmdS‘
 = 
	`»ad1
(&
buf
);

559 
cmd
 = 
	`»ad1
(&
buf
);

562 
d©aL’
 = 
Ëngth
 - (
buf
 - 
·ck‘Buf
);

564 
	`LOGV
("--- %s: dataLen=%u id=0x%08x flags=0x%02x cmd=%d/%d\n",

565 
»¶y
 ? "reply" : "req",

566 
d©aL’
, 
id
, 
æags
, 
cmdS‘
, 
cmd
);

567 ià(
d©aL’
 > 0)

568 
	`dvmPrštHexDumpDbg
(
buf
, 
d©aL’
, 
LOG_TAG
);

569 
	}
}

574 
boŞ
 
	$hªdËPack‘
(
JdwpS‹
* 
¡©e
)

576 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

577 cÚ¡ * 
buf
 = 
ÃtS‹
->
šputBufãr
;

578 
JdwpReqH—d”
 
hdr
;

579 
u4
 
Ëngth
, 
id
;

580 
u1
 
æags
, 
cmdS‘
, 
cmd
;

581 
u2
 
”rÜ
;

582 
boŞ
 
»¶y
;

583 
d©aL’
;

585 
cmd
 = 
cmdS‘
 = 0;

589 
Ëngth
 = 
	`»ad4BE
(&
buf
);

590 
id
 = 
	`»ad4BE
(&
buf
);

591 
æags
 = 
	`»ad1
(&
buf
);

592 ià((
æags
 & 
kJDWPFÏgR•ly
) != 0) {

593 
»¶y
 = 
Œue
;

594 
”rÜ
 = 
	`»ad2BE
(&
buf
);

596 
»¶y
 = 
çl£
;

597 
cmdS‘
 = 
	`»ad1
(&
buf
);

598 
cmd
 = 
	`»ad1
(&
buf
);

601 
	`as£¹
((è
Ëngth
 <ğ
ÃtS‹
->
šputCouÁ
);

602 
d©aL’
 = 
Ëngth
 - (
buf
 - 
ÃtS‹
->
šputBufãr
);

604 ià(!
»¶y
) {

605 
Ex·ndBuf
* 
pR•ly
 = 
	`ex·ndBufAÎoc
();

607 
hdr
.
Ëngth
 =†ength;

608 
hdr
.
id
 = id;

609 
hdr
.
cmdS‘
 = cmdSet;

610 
hdr
.
cmd
 = cmd;

611 
	`dvmJdwpProûssReque¡
(
¡©e
, &
hdr
, 
buf
, 
d©aL’
, 
pR•ly
);

612 ià(
	`ex·ndBufG‘L’gth
(
pR•ly
) > 0) {

613 
cc
;

620 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
, 
	`ex·ndBufG‘Bufãr
(
pR•ly
),

621 
	`ex·ndBufG‘L’gth
(
pR•ly
));

622 ià(
cc
 !ğ(è
	`ex·ndBufG‘L’gth
(
pR•ly
)) {

623 
	`LOGE
("Faed s’dšg„•lyØdebugg”: %s\n", 
	`¡»¼Ü
(
”ºo
));

624 
	`ex·ndBufF»e
(
pR•ly
);

625  
çl£
;

628 
	`LOGW
("NØ»¶y c»©ed fÜ s‘=%d cmd=%d\n", 
cmdS‘
, 
cmd
);

630 
	`ex·ndBufF»e
(
pR•ly
);

632 
	`LOGV
("reply?!\n");

633 
	`as£¹
(
çl£
);

636 
	`LOGV
("----------\n");

638 
	`cÚsumeBy‹s
(
ÃtS‹
, 
Ëngth
);

639  
Œue
;

640 
	}
}

657 
boŞ
 
	$´oûssIncomšg
(
JdwpS‹
* 
¡©e
)

659 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

660 
»adCouÁ
;

662 
	`as£¹
(
ÃtS‹
->
ş›ÁSock
 >= 0);

664 ià(!
	`haveFuÎPack‘
(
ÃtS‹
)) {

666 
”ºo
 = 0;

668 
£lCouÁ
;

669 
fd_£t
 
»adfds
;

670 
maxfd
;

671 
fd
;

673 
maxfd
 = 
ÃtS‹
->
li¡’Sock
;

674 ià(
ÃtS‹
->
ş›ÁSock
 > 
maxfd
)

675 
maxfd
 = 
ÃtS‹
->
ş›ÁSock
;

676 ià(
ÃtS‹
->
wakePe
[0] > 
maxfd
)

677 
maxfd
 = 
ÃtS‹
->
wakePe
[0];

679 ià(
maxfd
 < 0) {

680 
	`LOGV
("+++‡ll fds‡re closed\n");

681  
çl£
;

684 
	`FD_ZERO
(&
»adfds
);

687 
fd
 = 
ÃtS‹
->
li¡’Sock
;

688 ià(
fd
 >= 0)

689 
	`FD_SET
(
fd
, &
»adfds
);

690 
fd
 = 
ÃtS‹
->
ş›ÁSock
;

691 ià(
fd
 >= 0)

692 
	`FD_SET
(
fd
, &
»adfds
);

693 
fd
 = 
ÃtS‹
->
wakePe
[0];

694 ià(
fd
 >= 0) {

695 
	`FD_SET
(
fd
, &
»adfds
);

697 
	`LOGI
("NOTE:ƒntering select w/o wakepipe\n");

712 
£lCouÁ
 = 
	`£Ëù
(
maxfd
+1, &
»adfds
, 
NULL
, NULL, NULL);

713 ià(
£lCouÁ
 < 0) {

714 ià(
”ºo
 =ğ
EINTR
)

716 
	`LOGE
("£Ëù faed: %s\n", 
	`¡»¼Ü
(
”ºo
));

717 
ç
;

720 ià(
ÃtS‹
->
wakePe
[0] >= 0 &&

721 
	`FD_ISSET
(
ÃtS‹
->
wakePe
[0], &
»adfds
))

723 ià(
ÃtS‹
->
li¡’Sock
 >= 0)

724 
	`LOGE
("Exit wake set, but‚otƒxiting?\n");

726 
	`LOGD
("Got wake-up signal, bailing out of select\n");

727 
ç
;

729 ià(
ÃtS‹
->
li¡’Sock
 >= 0 &&

730 
	`FD_ISSET
(
ÃtS‹
->
li¡’Sock
, &
»adfds
))

732 
	`LOGI
("Ignoring second debugger --‡ccepting‡nd dropping\n");

734 
sockaddr_š
 
addrIÃt
;

735 
sockaddr
 
addrPÏš
;

736 } 
addr
;

737 
sockËn_t
 
add¾’
;

738 
tmpSock
;

739 
tmpSock
 = 
	`acû±
(
ÃtS‹
->
li¡’Sock
, &
addr
.
addrPÏš
,

740 &
add¾’
);

741 ià(
tmpSock
 < 0)

742 
	`LOGI
("Weird --‡ccept failed\n");

744 
	`şo£
(
tmpSock
);

746 ià(
ÃtS‹
->
ş›ÁSock
 >= 0 &&

747 
	`FD_ISSET
(
ÃtS‹
->
ş›ÁSock
, &
»adfds
))

749 
»adCouÁ
 = 
	`»ad
(
ÃtS‹
->
ş›ÁSock
,

750 
ÃtS‹
->
šputBufãr
 +‚‘S‹->
šputCouÁ
,

751 (
ÃtS‹
->
šputBufãr
è-‚‘S‹->
šputCouÁ
);

752 ià(
»adCouÁ
 < 0) {

754 ià(
”ºo
 !ğ
EINTR
)

755 
ç
;

756 
	`LOGD
("+++ EINTR hit\n");

757  
Œue
;

758 } ià(
»adCouÁ
 == 0) {

760 
	`LOGD
("+++…eer disconnected\n");

761 
ç
;

767 
ÃtS‹
->
šputCouÁ
 +ğ
»adCouÁ
;

768 ià(!
	`haveFuÎPack‘
(
ÃtS‹
))

769  
Œue
;

780 ià(
ÃtS‹
->
awa™šgHªdshake
) {

781 
cc
;

783 ià(
	`memcmp
(
ÃtS‹
->
šputBufãr
,

784 
kMagicHªdshake
, 
kMagicHªdshakeL’
) != 0)

786 
	`LOGE
("ERROR: bad hªdshak'%.14s'\n", 
ÃtS‹
->
šputBufãr
);

787 
ç
;

790 
”ºo
 = 0;

791 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
,‚‘S‹->
šputBufãr
,

792 
kMagicHªdshakeL’
);

793 ià(
cc
 !ğ
kMagicHªdshakeL’
) {

794 
	`LOGE
("Failed writing handshake bytes: %s (%d of %d)\n",

795 
	`¡»¼Ü
(
”ºo
), 
cc
, (è
kMagicHªdshakeL’
);

796 
ç
;

799 
	`cÚsumeBy‹s
(
ÃtS‹
, 
kMagicHªdshakeL’
);

800 
ÃtS‹
->
awa™šgHªdshake
 = 
çl£
;

801 
	`LOGV
("+++ handshake complete\n");

802  
Œue
;

808  
	`hªdËPack‘
(
¡©e
);

810 
ç
:

811 
	`şo£CÚÃùiÚ
(
¡©e
);

812  
çl£
;

813 
	}
}

823 
boŞ
 
	$£ndReque¡
(
JdwpS‹
* 
¡©e
, 
Ex·ndBuf
* 
pReq
)

825 
JdwpN‘S‹
* 
ÃtS‹
 = 
¡©e
->netState;

826 
cc
;

828 
	`dumpPack‘
(
	`ex·ndBufG‘Bufãr
(
pReq
));

829 ià(
ÃtS‹
->
ş›ÁSock
 < 0) {

831 
	`LOGV
("NOT sending„equest --‚o debugger is‡ttached\n");

832  
çl£
;

840 
”ºo
 = 0;

841 
cc
 = 
	`wr™e
(
ÃtS‹
->
ş›ÁSock
, 
	`ex·ndBufG‘Bufãr
(
pReq
),

842 
	`ex·ndBufG‘L’gth
(
pReq
));

843 ià(
cc
 !ğ(è
	`ex·ndBufG‘L’gth
(
pReq
)) {

844 
	`LOGE
("Failed sending„eqo debugger: %s (%d of %d)\n",

845 
	`¡»¼Ü
(
”ºo
), 
cc
, (è
	`ex·ndBufG‘L’gth
(
pReq
));

846  
çl£
;

849  
Œue
;

850 
	}
}

856 cÚ¡ 
JdwpT¿n¥Üt
 
	gsock‘T¿n¥Üt
 = {

857 
´•¬eSock‘
,

858 
acû±CÚÃùiÚ
,

859 
e¡ablishCÚÃùiÚ
,

860 
şo£CÚÃùiÚ
,

861 
ÃtShutdownEx‹º
,

862 
ÃtF»eEx‹º
,

863 
isCÚÃùed
,

864 
awa™šgHªdshake
,

865 
´oûssIncomšg
,

866 
£ndReque¡


872 cÚ¡ 
JdwpT¿n¥Üt
* 
	$dvmJdwpSock‘T¿n¥Üt
()

874  &
sock‘T¿n¥Üt
;

875 
	}
}

	@mterp/Mterp.c

20 
	~"m‹½/M‹½.h
"

22 
	~<¡ddef.h
>

28 
boŞ
 
	$dvmCheckAsmCÚ¡ªts
()

30 
boŞ
 
çed
 = 
çl£
;

32 #iâdeà
DVM_NO_ASM_INTERP


34 
dvmAsmIn¡ruùiÚS¹
[];

35 
dvmAsmIn¡ruùiÚEnd
[];

36 
dvmAsmSi¡”S¹
[];

37 
dvmAsmSi¡”End
[];

39 
	#ASM_DEF_VERIFY


	)

40 
	~"m‹½/commÚ/asm-cÚ¡ªts.h
"

42 ià(
çed
) {

43 
	`LOGE
("Please correcthe values in mterp/common/asm-constants.h\n");

44 
	`dvmAbÜt
();

51 cÚ¡ 
width
 = 64;

52 
š‹½Size
 = 
dvmAsmIn¡ruùiÚEnd
 - 
dvmAsmIn¡ruùiÚS¹
;

53 ià(
š‹½Size
 !ğ0 && iÁ”pSiz!ğ256*
width
) {

54 
	`LOGE
("ERROR: uÃx³ùed‡sm iÁ”°siz%d\n", 
š‹½Size
);

55 
	`LOGE
("(did‡Àš¡ruùiÚ hªdË¸exûed %d by‹s?)\n", 
width
);

56 
	`dvmAbÜt
();

58 
si¡”Size
 = 
dvmAsmSi¡”End
 - 
dvmAsmSi¡”S¹
;

59 
	`LOGV
("mterp: interp is %d bytes, sisters‡re %d bytes\n",

60 
š‹½Size
, 
si¡”Size
);

64  !
çed
;

65 
	}
}

74 
boŞ
 
	$dvmM‹½Std
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
glue
)

76 
chªgeIÁ”p
;

79 
glue
->
£lf
 = self;

80 
glue
->
m‘hodCÏssDex
 = glue->
m‘hod
->
şazz
->
pDvmDex
;

82 
glue
->
š‹½SckEnd
 = 
£lf
->interpStackEnd;

83 
glue
->
pS–fSu¥’dCouÁ
 = &
£lf
->
su¥’dCouÁ
;

84 #ià
	`defšed
(
WITH_JIT
)

85 
glue
->
pJ™ProfTabË
 = 
gDvmJ™
.
pProfTabË
;

87 #ià
	`defšed
(
WITH_DEBUGGER
)

88 
glue
->
pDebugg”Aùive
 = &
gDvm
.
debugg”Aùive
;

90 #ià
	`defšed
(
WITH_PROFILER
)

91 
glue
->
pAùiveProf”s
 = &
gDvm
.
aùiveProf”s
;

94 
	`IF_LOGVV
() {

95 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
glue
->
m‘hod
->
´ÙÙy³
);

96 
	`LOGVV
("mterphreadid=%dƒntry %d: %s.%s %s\n",

97 
	`dvmTh»adS–f
()->
th»adId
,

98 
glue
->
’ŒyPošt
,

99 
glue
->
m‘hod
->
şazz
->
desütÜ
,

100 
glue
->
m‘hod
->
Çme
,

101 
desc
);

102 
	`ä“
(
desc
);

107 
chªgeIÁ”p
 = 
	`dvmM‹½StdRun
(
glue
);

108 ià(!
chªgeIÁ”p
) {

110 #ifdeà
LOG_INSTR


111 
	`LOGD
("|-- Leaving interpreter†oop");

113  
çl£
;

116 
	`LOGVV
(" m‹½„‘uºed, chªgeIÁ”p=%d\n", 
chªgeIÁ”p
);

117 
glue
->
ÃxtMode
 = 
INTERP_DBG
;

118  
Œue
;

120 
	}
}

	@mterp/Mterp.h

20 #iâdeà
_DALVIK_MTERP_MTERP


21 
	#_DALVIK_MTERP_MTERP


	)

23 
	~"D®vik.h
"

24 
	~"š‹½/IÁ”pDefs.h
"

25 #ià
defšed
(
WITH_JIT
)

26 
	~"š‹½/J™.h
"

34 
IÁ”pS‹
 
	tM‹½Glue
;

40 
boŞ
 
dvmCheckAsmCÚ¡ªts
();

52 
boŞ
 
dvmM‹½StdRun
(
M‹½Glue
* 
glue
);

53 
dvmM‹½StdBa
(
M‹½Glue
* 
glue
, 
boŞ
 
chªgeIÁ”p
);

	@mterp/armv5te/debug.c

1 
	~<š‰y³s.h
>

11 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

13 
ušt32_t
 
rPC
 
	`asm
("r4");

14 
ušt32_t
 
rFP
 
	`asm
("r5");

15 
ušt32_t
 
rGLUE
 
	`asm
("r6");

16 
ušt32_t
 
rINST
 
	`asm
("r7");

17 
ušt32_t
 
rIBASE
 
	`asm
("r8");

18 
ušt32_t
 
r9
 
	`asm
("r9");

19 
ušt32_t
 
r10
 
	`asm
("r10");

21 
dvmAsmIn¡ruùiÚS¹
[];

23 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

24 
	`´štf
(" :„PC=%08x„FP=%08x„GLUE=%08x„INST=%08x\n",

25 
rPC
, 
rFP
, 
rGLUE
, 
rINST
);

26 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

28 
M‹½Glue
* 
glue
 = (M‹½Glue*è
rGLUE
;

29 cÚ¡ 
M‘hod
* 
m‘hod
 = 
glue
->method;

30 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

36 
	}
}

41 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

43 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

44 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

45 #ifdeà
EASY_GDB


46 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

47 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

48 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

50 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

51 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

52 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

53 *(
u4
*)
å
);

55 
	}
}

60 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

66 
boŞ
 
isDœeù
 =

67 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

68 (
m‘hod
->
Çme
[0] == '<');

70 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

72 
	`´štf
("<%c:%s.%s %s> ",

73 
isDœeù
 ? 'D' : 'V',

74 
m‘hod
->
şazz
->
desütÜ
,

75 
m‘hod
->
Çme
,

76 
desc
);

78 
	`ä“
(
desc
);

79 
	}
}

	@mterp/c/OP_ADD_DOUBLE.c

1 
HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

2 
	gOP_END


	@mterp/c/OP_ADD_DOUBLE_2ADDR.c

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

2 
	gOP_END


	@mterp/c/OP_ADD_FLOAT.c

1 
HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

2 
	gOP_END


	@mterp/c/OP_ADD_FLOAT_2ADDR.c

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

2 
	gOP_END


	@mterp/c/OP_ADD_INT.c

1 
HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

2 
	gOP_END


	@mterp/c/OP_ADD_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

2 
	gOP_END


	@mterp/c/OP_ADD_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

2 
	gOP_END


	@mterp/c/OP_ADD_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

2 
	gOP_END


	@mterp/c/OP_ADD_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

2 
	gOP_END


	@mterp/c/OP_ADD_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

2 
	gOP_END


	@mterp/c/OP_AGET.c

1 
HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

2 
	gOP_END


	@mterp/c/OP_AGET_BOOLEAN.c

1 
HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

2 
	gOP_END


	@mterp/c/OP_AGET_BYTE.c

1 
HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

2 
	gOP_END


	@mterp/c/OP_AGET_CHAR.c

1 
HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2 
	gOP_END


	@mterp/c/OP_AGET_OBJECT.c

1 
HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

2 
	gOP_END


	@mterp/c/OP_AGET_SHORT.c

1 
HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2 
	gOP_END


	@mterp/c/OP_AGET_WIDE.c

1 
HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_AND_INT.c

1 
HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

2 
	gOP_END


	@mterp/c/OP_AND_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

2 
	gOP_END


	@mterp/c/OP_AND_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

2 
	gOP_END


	@mterp/c/OP_AND_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

2 
	gOP_END


	@mterp/c/OP_AND_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

2 
	gOP_END


	@mterp/c/OP_AND_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

2 
	gOP_END


	@mterp/c/OP_APUT.c

1 
HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2 
	gOP_END


	@mterp/c/OP_APUT_BOOLEAN.c

1 
HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2 
	gOP_END


	@mterp/c/OP_APUT_BYTE.c

1 
HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2 
	gOP_END


	@mterp/c/OP_APUT_CHAR.c

1 
HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2 
	gOP_END


	@mterp/c/OP_APUT_OBJECT.c

1 
	$HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

3 
A¼ayObjeù
* 
¬¿yObj
;

4 
Objeù
* 
obj
;

5 
u2
 
¬¿yInfo
;

6 
	`EXPORT_PC
();

7 
vd¡
 = 
	`INST_AA
(
š¡
);

8 
¬¿yInfo
 = 
	`FETCH
(1);

9 
v¤c1
 = 
¬¿yInfo
 & 0xff;

10 
v¤c2
 = 
¬¿yInfo
 >> 8;

11 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

12 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

13 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

14 
	`GOTO_exû±iÚThrown
();

15 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

16 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;",

17 
NULL
);

18 
	`GOTO_exû±iÚThrown
();

20 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

21 ià(
obj
 !ğ
NULL
) {

22 ià(!
	`checkFÜNuÎ
(
obj
))

23 
	`GOTO_exû±iÚThrown
();

24 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->obj.clazz)) {

25 
	`LOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)\n",

26 
obj
->
şazz
->
desütÜ
, obj,

27 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

30 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

31 
	`GOTO_exû±iÚThrown
();

34 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

35 ((
u4
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] =

36 
	`GET_REGISTER
(
vd¡
);

38 
	`SET_ARRAY_TAINT
(
¬¿yObj
,

39 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) |

40 
	`GET_REGISTER_TAINT
(
vd¡
)) );

42 
	}
}

43 
FINISH
(2);

44 
	gOP_END


	@mterp/c/OP_APUT_SHORT.c

1 
HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2 
	gOP_END


	@mterp/c/OP_APUT_WIDE.c

1 
HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_ARRAY_LENGTH.c

1 
	$HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

3 
A¼ayObjeù
* 
¬¿yObj
;

5 
vd¡
 = 
	`INST_A
(
š¡
);

6 
v¤c1
 = 
	`INST_B
(
š¡
);

7 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

8 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

9 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

10 
	`GOTO_exû±iÚThrown
();

12 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

14 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

16 
	}
}

17 
FINISH
(1);

18 
	gOP_END


	@mterp/c/OP_CHECK_CAST.c

1 
	$HANDLE_OPCODE
(
OP_CHECK_CAST
 )

3 
CÏssObjeù
* 
şazz
;

4 
Objeù
* 
obj
;

6 
	`EXPORT_PC
();

8 
v¤c1
 = 
	`INST_AA
(
š¡
);

9 
»f
 = 
	`FETCH
(1);

10 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

12 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

13 ià(
obj
 !ğ
NULL
) {

14 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

15 ià(!
	`checkFÜNuÎ
(
obj
))

16 
	`GOTO_exû±iÚThrown
();

18 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

19 ià(
şazz
 =ğ
NULL
) {

20 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

21 ià(
şazz
 =ğ
NULL
)

22 
	`GOTO_exû±iÚThrown
();

24 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

25 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

26 "Ljava/Ïng/CÏssCa¡Exû±iÚ;", 
obj
->
şazz
->
desütÜ
);

27 
	`GOTO_exû±iÚThrown
();

30 
	}
}

31 
FINISH
(2);

32 
	gOP_END


	@mterp/c/OP_CMPG_DOUBLE.c

1 
HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

2 
	gOP_END


	@mterp/c/OP_CMPG_FLOAT.c

1 
HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

2 
	gOP_END


	@mterp/c/OP_CMPL_DOUBLE.c

1 
HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

2 
	gOP_END


	@mterp/c/OP_CMPL_FLOAT.c

1 
HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

2 
	gOP_END


	@mterp/c/OP_CMP_LONG.c

1 
HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

2 
	gOP_END


	@mterp/c/OP_CONST.c

1 
	$HANDLE_OPCODE
(
OP_CONST
 )

3 
u4
 
tmp
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
tmp
 = 
	`FETCH
(1);

7 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

8 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

9 
	`SET_REGISTER
(
vd¡
, 
tmp
);

11 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

13 
	}
}

14 
FINISH
(3);

15 
	gOP_END


	@mterp/c/OP_CONST_16.c

1 
	$HANDLE_OPCODE
(
OP_CONST_16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

5 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

7 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

9 
	`FINISH
(2);

10 
OP_END


	@mterp/c/OP_CONST_4.c

1 
	$HANDLE_OPCODE
(
OP_CONST_4
 )

3 
s4
 
tmp
;

5 
vd¡
 = 
	`INST_A
(
š¡
);

6 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

7 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

8 
	`SET_REGISTER
(
vd¡
, 
tmp
);

10 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

12 
	}
}

13 
FINISH
(1);

14 
	gOP_END


	@mterp/c/OP_CONST_CLASS.c

1 
	$HANDLE_OPCODE
(
OP_CONST_CLASS
 )

3 
CÏssObjeù
* 
şazz
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
»f
 = 
	`FETCH
(1);

7 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

8 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

9 ià(
şazz
 =ğ
NULL
) {

10 
	`EXPORT_PC
();

11 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

12 ià(
şazz
 =ğ
NULL
)

13 
	`GOTO_exû±iÚThrown
();

15 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

17 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

19 
	}
}

20 
FINISH
(2);

21 
	gOP_END


	@mterp/c/OP_CONST_HIGH16.c

1 
	$HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

7 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

9 
	`FINISH
(2);

10 
OP_END


	@mterp/c/OP_CONST_STRING.c

1 
	$HANDLE_OPCODE
(
OP_CONST_STRING
 )

3 
SŒšgObjeù
* 
¡rObj
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
»f
 = 
	`FETCH
(1);

7 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

8 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

9 ià(
¡rObj
 =ğ
NULL
) {

10 
	`EXPORT_PC
();

11 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

12 ià(
¡rObj
 =ğ
NULL
)

13 
	`GOTO_exû±iÚThrown
();

15 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

17 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

19 
	}
}

20 
FINISH
(2);

21 
	gOP_END


	@mterp/c/OP_CONST_STRING_JUMBO.c

1 
	$HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

3 
SŒšgObjeù
* 
¡rObj
;

4 
u4
 
tmp
;

6 
vd¡
 = 
	`INST_AA
(
š¡
);

7 
tmp
 = 
	`FETCH
(1);

8 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

9 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

10 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

11 ià(
¡rObj
 =ğ
NULL
) {

12 
	`EXPORT_PC
();

13 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

14 ià(
¡rObj
 =ğ
NULL
)

15 
	`GOTO_exû±iÚThrown
();

17 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

19 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

21 
	}
}

22 
FINISH
(3);

23 
	gOP_END


	@mterp/c/OP_CONST_WIDE.c

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE
 )

3 
u8
 
tmp
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
tmp
 = 
	`FETCH
(1);

7 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

8 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

9 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

10 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

11 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

13 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

15 
	}
}

16 
FINISH
(5);

17 
	gOP_END


	@mterp/c/OP_CONST_WIDE_16.c

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

5 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

7 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

9 
	`FINISH
(2);

10 
OP_END


	@mterp/c/OP_CONST_WIDE_32.c

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

3 
u4
 
tmp
;

5 
vd¡
 = 
	`INST_AA
(
š¡
);

6 
tmp
 = 
	`FETCH
(1);

7 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

8 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

9 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

11 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

13 
	}
}

14 
FINISH
(3);

15 
	gOP_END


	@mterp/c/OP_CONST_WIDE_HIGH16.c

1 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

7 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

9 
	`FINISH
(2);

10 
OP_END


	@mterp/c/OP_DIV_DOUBLE.c

1 
HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

2 
	gOP_END


	@mterp/c/OP_DIV_DOUBLE_2ADDR.c

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

2 
	gOP_END


	@mterp/c/OP_DIV_FLOAT.c

1 
HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

2 
	gOP_END


	@mterp/c/OP_DIV_FLOAT_2ADDR.c

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

2 
	gOP_END


	@mterp/c/OP_DIV_INT.c

1 
HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

2 
	gOP_END


	@mterp/c/OP_DIV_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

2 
	gOP_END


	@mterp/c/OP_DIV_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

2 
	gOP_END


	@mterp/c/OP_DIV_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

2 
	gOP_END


	@mterp/c/OP_DIV_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

2 
	gOP_END


	@mterp/c/OP_DIV_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

2 
	gOP_END


	@mterp/c/OP_DOUBLE_TO_FLOAT.c

1 
HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

2 
	gOP_END


	@mterp/c/OP_DOUBLE_TO_INT.c

1 
HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

2 , 
_DOUBLE
, 
s4
, 
_INT
)

3 
	gOP_END


	@mterp/c/OP_DOUBLE_TO_LONG.c

1 
HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

2 , 
_DOUBLE
, 
s8
, 
_WIDE
)

3 
	gOP_END


	@mterp/c/OP_EXECUTE_INLINE.c

1 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

18 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

21 
	`EXPORT_PC
();

23 
v¤c1
 = 
	`INST_B
(
š¡
);

24 
»f
 = 
	`FETCH
(1);

25 
vd¡
 = 
	`FETCH
(2);

26 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

27 
v¤c1
, 
»f
, 
vd¡
);

29 
	`as£¹
((
vd¡
 >> 16) == 0);

30 
	`as£¹
(
v¤c1
 <= 4);

32 
v¤c1
) {

34 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

37 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

40 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

43 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

49 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


50 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

51 
	`GOTO_exû±iÚThrown
();

53 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

54 
	`GOTO_exû±iÚThrown
();

56 
	}
}

57 
FINISH
(3);

58 
	gOP_END


	@mterp/c/OP_FILLED_NEW_ARRAY.c

1 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

2 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

3 
OP_END


	@mterp/c/OP_FILLED_NEW_ARRAY_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

2 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

3 
OP_END


	@mterp/c/OP_FILL_ARRAY_DATA.c

1 
	$HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

3 cÚ¡ 
u2
* 
¬¿yD©a
;

4 
s4
 
off£t
;

5 
A¼ayObjeù
* 
¬¿yObj
;

7 
	`EXPORT_PC
();

8 
v¤c1
 = 
	`INST_AA
(
š¡
);

9 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

10 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

11 
¬¿yD©a
 = 
pc
 + 
off£t
;

12 #iâdeà
NDEBUG


13 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

14 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

17 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

19 
	`GOTO_exû±iÚThrown
();

22 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

23 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

24 
	`GOTO_exû±iÚThrown
();

26 
	`FINISH
(3);

27 
	}
}

28 
	gOP_END


	@mterp/c/OP_FLOAT_TO_DOUBLE.c

1 
HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

2 
	gOP_END


	@mterp/c/OP_FLOAT_TO_INT.c

1 
HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

2 , 
_FLOAT
, 
s4
, 
_INT
)

3 
	gOP_END


	@mterp/c/OP_FLOAT_TO_LONG.c

1 
HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

2 , 
_FLOAT
, 
s8
, 
_WIDE
)

3 
	gOP_END


	@mterp/c/OP_GOTO.c

1 
	$HANDLE_OPCODE
(
OP_GOTO
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 ià((
s1
)
vd¡
 < 0)

4 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

6 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

7 
	`ILOGV
("> branchaken");

8 ià((
s1
)
vd¡
 < 0)

9 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, (
s1
)
vd¡
);

10 
	`FINISH
((
s1
)
vd¡
);

11 
OP_END


	@mterp/c/OP_GOTO_16.c

1 
	$HANDLE_OPCODE
(
OP_GOTO_16
 )

3 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

5 ià(
off£t
 < 0)

6 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

8 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

9 
	`ILOGV
("> branchaken");

10 ià(
off£t
 < 0)

11 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

12 
	`FINISH
(
off£t
);

13 
	}
}

14 
	gOP_END


	@mterp/c/OP_GOTO_32.c

1 
	$HANDLE_OPCODE
(
OP_GOTO_32
 )

3 
s4
 
off£t
 = 
	`FETCH
(1);

4 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

6 ià(
off£t
 < 0)

7 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

9 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

10 
	`ILOGV
("> branchaken");

11 ià(
off£t
 <= 0)

12 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

13 
	`FINISH
(
off£t
);

14 
	}
}

15 
	gOP_END


	@mterp/c/OP_IF_EQ.c

1 
HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

2 
OP_END


	@mterp/c/OP_IF_EQZ.c

1 
HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

2 
OP_END


	@mterp/c/OP_IF_GE.c

1 
HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

2 
OP_END


	@mterp/c/OP_IF_GEZ.c

1 
HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

2 
OP_END


	@mterp/c/OP_IF_GT.c

1 
HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

2 
	gOP_END


	@mterp/c/OP_IF_GTZ.c

1 
HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

2 
	gOP_END


	@mterp/c/OP_IF_LE.c

1 
HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

2 
OP_END


	@mterp/c/OP_IF_LEZ.c

1 
HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

2 
OP_END


	@mterp/c/OP_IF_LT.c

1 
HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

2 
	gOP_END


	@mterp/c/OP_IF_LTZ.c

1 
HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

2 
	gOP_END


	@mterp/c/OP_IF_NE.c

1 
HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

2 
OP_END


	@mterp/c/OP_IF_NEZ.c

1 
HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

2 
OP_END


	@mterp/c/OP_IGET.c

1 
HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IGET_BOOLEAN.c

1 
HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IGET_BYTE.c

1 
HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IGET_CHAR.c

1 
HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IGET_OBJECT.c

1 
HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@mterp/c/OP_IGET_OBJECT_QUICK.c

1 
HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@mterp/c/OP_IGET_QUICK.c

1 
HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IGET_SHORT.c

1 
HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IGET_WIDE.c

1 
HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_IGET_WIDE_QUICK.c

1 
HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_INSTANCE_OF.c

1 
	$HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

3 
CÏssObjeù
* 
şazz
;

4 
Objeù
* 
obj
;

6 
vd¡
 = 
	`INST_A
(
š¡
);

7 
v¤c1
 = 
	`INST_B
(
š¡
);

8 
»f
 = 
	`FETCH
(1);

9 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

11 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

12 ià(
obj
 =ğ
NULL
) {

13 
	`SET_REGISTER
(
vd¡
, 0);

15 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

16 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

17 
	`GOTO_exû±iÚThrown
();

19 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

20 ià(
şazz
 =ğ
NULL
) {

21 
	`EXPORT_PC
();

22 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

23 ià(
şazz
 =ğ
NULL
)

24 
	`GOTO_exû±iÚThrown
();

26 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

28 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

31 
	}
}

32 
FINISH
(2);

33 
	gOP_END


	@mterp/c/OP_INT_TO_BYTE.c

1 
HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

2 
	gOP_END


	@mterp/c/OP_INT_TO_CHAR.c

1 
HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

2 
	gOP_END


	@mterp/c/OP_INT_TO_DOUBLE.c

1 
HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

2 
	gOP_END


	@mterp/c/OP_INT_TO_FLOAT.c

1 
HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

2 
	gOP_END


	@mterp/c/OP_INT_TO_LONG.c

1 
HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_INT_TO_SHORT.c

1 
HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

2 
	gOP_END


	@mterp/c/OP_INVOKE_DIRECT.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_DIRECT_EMPTY.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_EMPTY
 )

2 #ià
INTERP_TYPE
 !ğ
INTERP_DBG


4 
	`FINISH
(3);

6 ià(!
gDvm
.
debugg”Aùive
) {

8 
	`FINISH
(3);

9 
	}
} {

12 
GOTO_švoke
(
švokeDœeù
, 
çl£
);

15 
	gOP_END


	@mterp/c/OP_INVOKE_DIRECT_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

2 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

3 
OP_END


	@mterp/c/OP_INVOKE_INTERFACE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

2 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_INTERFACE_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

2 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

3 
OP_END


	@mterp/c/OP_INVOKE_STATIC.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_STATIC_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

2 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

3 
OP_END


	@mterp/c/OP_INVOKE_SUPER.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_SUPER_QUICK.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

2 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_SUPER_QUICK_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

2 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

3 
OP_END


	@mterp/c/OP_INVOKE_SUPER_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

2 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

3 
OP_END


	@mterp/c/OP_INVOKE_VIRTUAL.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_VIRTUAL_QUICK.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

2 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

3 
OP_END


	@mterp/c/OP_INVOKE_VIRTUAL_QUICK_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

2 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

3 
OP_END


	@mterp/c/OP_INVOKE_VIRTUAL_RANGE.c

1 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

2 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

3 
OP_END


	@mterp/c/OP_IPUT.c

1 
HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IPUT_BOOLEAN.c

1 
HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IPUT_BYTE.c

1 
HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IPUT_CHAR.c

1 
HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IPUT_OBJECT.c

12 
HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

13 
	gOP_END


	@mterp/c/OP_IPUT_OBJECT_QUICK.c

1 
HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@mterp/c/OP_IPUT_QUICK.c

1 
HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IPUT_SHORT.c

1 
HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_IPUT_WIDE.c

1 
HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_IPUT_WIDE_QUICK.c

1 
HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_LONG_TO_DOUBLE.c

1 
HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

2 
	gOP_END


	@mterp/c/OP_LONG_TO_FLOAT.c

1 
HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

2 
	gOP_END


	@mterp/c/OP_LONG_TO_INT.c

1 
HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

2 
	gOP_END


	@mterp/c/OP_MONITOR_ENTER.c

1 
	$HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

3 
Objeù
* 
obj
;

5 
v¤c1
 = 
	`INST_AA
(
š¡
);

6 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

7 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

8 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

9 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

10 
	`GOTO_exû±iÚThrown
();

11 
	`ILOGV
("+†ockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

12 
	`EXPORT_PC
();

13 
	`dvmLockObjeù
(
£lf
, 
obj
);

14 #ifdeà
WITH_DEADLOCK_PREDICTION


15 ià(
	`dvmCheckExû±iÚ
(
£lf
))

16 
	`GOTO_exû±iÚThrown
();

18 
	}
}

19 
FINISH
(1);

20 
	gOP_END


	@mterp/c/OP_MONITOR_EXIT.c

1 
	$HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

3 
Objeù
* 
obj
;

5 
	`EXPORT_PC
();

7 
v¤c1
 = 
	`INST_AA
(
š¡
);

8 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

9 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

10 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

11 ià(!
	`checkFÜNuÎ
(
obj
)) {

19 
	`ADJUST_PC
(1);

20 
	`GOTO_exû±iÚThrown
();

22 
	`ILOGV
("+ uÆockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

23 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

24 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

25 
	`ADJUST_PC
(1);

26 
	`GOTO_exû±iÚThrown
();

28 
	}
}

29 
FINISH
(1);

30 
	gOP_END


	@mterp/c/OP_MOVE.c

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`INST_A
(
š¡
);

3 
v¤c1
 = 
	`INST_B
(
š¡
);

4 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

5 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

6 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

7 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

9 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

11 
	`FINISH
(1);

12 
OP_END


	@mterp/c/OP_MOVE_16.c

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`FETCH
(1);

3 
v¤c1
 = 
	`FETCH
(2);

4 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

5 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

6 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

7 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

9 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

11 
	`FINISH
(3);

12 
OP_END


	@mterp/c/OP_MOVE_EXCEPTION.c

1 
	$HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

4 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

5 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

7 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

9 
	`dvmCË¬Exû±iÚ
(
£lf
);

10 
	`FINISH
(1);

11 
OP_END


	@mterp/c/OP_MOVE_FROM16.c

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

5 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

6 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

7 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

9 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

11 
	`FINISH
(2);

12 
OP_END


	@mterp/c/OP_MOVE_OBJECT.c

1 %
	gšşude
 "c/OP_MOVE.c"

	@mterp/c/OP_MOVE_OBJECT_16.c

1 %
	gšşude
 "c/OP_MOVE_16.c"

	@mterp/c/OP_MOVE_OBJECT_FROM16.c

1 %
	gšşude
 "c/OP_MOVE_FROM16.c"

	@mterp/c/OP_MOVE_RESULT.c

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

4 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

5 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

6 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

8 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

10 
	`FINISH
(1);

11 
OP_END


	@mterp/c/OP_MOVE_RESULT_OBJECT.c

1 %
	gšşude
 "c/OP_MOVE_RESULT.c"

	@mterp/c/OP_MOVE_RESULT_WIDE.c

1 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

4 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

6 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_RETURN_TAINT
());

8 
	`FINISH
(1);

9 
OP_END


	@mterp/c/OP_MOVE_WIDE.c

1 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

4 
vd¡
 = 
	`INST_A
(
š¡
);

5 
v¤c1
 = 
	`INST_B
(
š¡
);

6 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

7 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

8 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

10 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

12 
	`FINISH
(1);

13 
OP_END


	@mterp/c/OP_MOVE_WIDE_16.c

1 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

2 
vd¡
 = 
	`FETCH
(1);

3 
v¤c1
 = 
	`FETCH
(2);

4 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

5 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

6 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

8 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

10 
	`FINISH
(3);

11 
OP_END


	@mterp/c/OP_MOVE_WIDE_FROM16.c

1 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

2 
vd¡
 = 
	`INST_AA
(
š¡
);

3 
v¤c1
 = 
	`FETCH
(1);

4 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

5 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

6 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

8 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

10 
	`FINISH
(2);

11 
OP_END


	@mterp/c/OP_MUL_DOUBLE.c

1 
HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

2 
	gOP_END


	@mterp/c/OP_MUL_DOUBLE_2ADDR.c

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

2 
	gOP_END


	@mterp/c/OP_MUL_FLOAT.c

1 
HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

2 
	gOP_END


	@mterp/c/OP_MUL_FLOAT_2ADDR.c

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

2 
	gOP_END


	@mterp/c/OP_MUL_INT.c

1 
HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

2 
	gOP_END


	@mterp/c/OP_MUL_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

2 
	gOP_END


	@mterp/c/OP_MUL_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

2 
	gOP_END


	@mterp/c/OP_MUL_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

2 
	gOP_END


	@mterp/c/OP_MUL_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

2 
	gOP_END


	@mterp/c/OP_MUL_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

2 
	gOP_END


	@mterp/c/OP_NEG_DOUBLE.c

1 
HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

2 
	gOP_END


	@mterp/c/OP_NEG_FLOAT.c

1 
HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

2 
	gOP_END


	@mterp/c/OP_NEG_INT.c

1 
HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

2 
	gOP_END


	@mterp/c/OP_NEG_LONG.c

1 
HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_NEW_ARRAY.c

1 
	$HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

3 
CÏssObjeù
* 
¬¿yCÏss
;

4 
A¼ayObjeù
* 
ÃwA¼ay
;

5 
s4
 
Ëngth
;

7 
	`EXPORT_PC
();

9 
vd¡
 = 
	`INST_A
(
š¡
);

10 
v¤c1
 = 
	`INST_B
(
š¡
);

11 
»f
 = 
	`FETCH
(1);

12 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

13 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

14 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

15 ià(
Ëngth
 < 0) {

16 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Neg©iveA¼aySizeExû±iÚ;", 
NULL
);

17 
	`GOTO_exû±iÚThrown
();

19 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

20 ià(
¬¿yCÏss
 =ğ
NULL
) {

21 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

22 ià(
¬¿yCÏss
 =ğ
NULL
)

23 
	`GOTO_exû±iÚThrown
();

26 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

27 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

29 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

30 ià(
ÃwA¼ay
 =ğ
NULL
)

31 
	`GOTO_exû±iÚThrown
();

32 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

34 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

36 
	}
}

37 
FINISH
(2);

38 
	gOP_END


	@mterp/c/OP_NEW_INSTANCE.c

1 
	$HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

3 
CÏssObjeù
* 
şazz
;

4 
Objeù
* 
ÃwObj
;

6 
	`EXPORT_PC
();

8 
vd¡
 = 
	`INST_AA
(
š¡
);

9 
»f
 = 
	`FETCH
(1);

10 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

11 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

12 ià(
şazz
 =ğ
NULL
) {

13 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

14 ià(
şazz
 =ğ
NULL
)

15 
	`GOTO_exû±iÚThrown
();

18 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

19 
	`GOTO_exû±iÚThrown
();

29 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

30 ià(
ÃwObj
 =ğ
NULL
)

31 
	`GOTO_exû±iÚThrown
();

32 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

34 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

36 
	}
}

37 
FINISH
(2);

38 
	gOP_END


	@mterp/c/OP_NOP.c

1 
	$HANDLE_OPCODE
(
OP_NOP
)

2 
	`FINISH
(1);

3 
OP_END


	@mterp/c/OP_NOT_INT.c

1 
HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

2 
	gOP_END


	@mterp/c/OP_NOT_LONG.c

1 
HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_OR_INT.c

1 
HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

2 
	gOP_END


	@mterp/c/OP_OR_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

2 
	gOP_END


	@mterp/c/OP_OR_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

2 
	gOP_END


	@mterp/c/OP_OR_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

2 
	gOP_END


	@mterp/c/OP_OR_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

2 
	gOP_END


	@mterp/c/OP_OR_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

2 
	gOP_END


	@mterp/c/OP_PACKED_SWITCH.c

1 
	$HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

3 cÚ¡ 
u2
* 
sw™chD©a
;

4 
u4
 
‹¡V®
;

5 
s4
 
off£t
;

7 
v¤c1
 = 
	`INST_AA
(
š¡
);

8 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

9 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

10 
sw™chD©a
 = 
pc
 + 
off£t
;

11 #iâdeà
NDEBUG


12 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

13 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

16 
	`EXPORT_PC
();

17 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad…acked switch");

18 
	`GOTO_exû±iÚThrown
();

21 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

23 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

24 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

25 ià(
off£t
 <= 0)

26 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

27 
	`FINISH
(
off£t
);

28 
	}
}

29 
	gOP_END


	@mterp/c/OP_REM_DOUBLE.c

1 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

3 
u2
 
¤cRegs
;

4 
vd¡
 = 
	`INST_AA
(
š¡
);

5 
¤cRegs
 = 
	`FETCH
(1);

6 
v¤c1
 = 
¤cRegs
 & 0xff;

7 
v¤c2
 = 
¤cRegs
 >> 8;

8 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

9 
	`SET_REGISTER_DOUBLE
(
vd¡
,

10 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

12 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

13 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));

15 
	}
}

16 
FINISH
(2);

17 
	gOP_END


	@mterp/c/OP_REM_DOUBLE_2ADDR.c

1 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

2 
vd¡
 = 
	`INST_A
(
š¡
);

3 
v¤c1
 = 
	`INST_B
(
š¡
);

4 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER_DOUBLE
(
vd¡
,

6 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

8 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

9 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));

11 
	`FINISH
(1);

12 
OP_END


	@mterp/c/OP_REM_FLOAT.c

1 
	$HANDLE_OPCODE
(
OP_REM_FLOAT
 )

3 
u2
 
¤cRegs
;

4 
vd¡
 = 
	`INST_AA
(
š¡
);

5 
¤cRegs
 = 
	`FETCH
(1);

6 
v¤c1
 = 
¤cRegs
 & 0xff;

7 
v¤c2
 = 
¤cRegs
 >> 8;

8 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

9 
	`SET_REGISTER_FLOAT
(
vd¡
,

10 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

12 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

13 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));

15 
	}
}

16 
FINISH
(2);

17 
	gOP_END


	@mterp/c/OP_REM_FLOAT_2ADDR.c

1 
	$HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

2 
vd¡
 = 
	`INST_A
(
š¡
);

3 
v¤c1
 = 
	`INST_B
(
š¡
);

4 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

5 
	`SET_REGISTER_FLOAT
(
vd¡
,

6 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

8 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

9 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));

11 
	`FINISH
(1);

12 
OP_END


	@mterp/c/OP_REM_INT.c

1 
HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

2 
	gOP_END


	@mterp/c/OP_REM_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

2 
	gOP_END


	@mterp/c/OP_REM_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

2 
	gOP_END


	@mterp/c/OP_REM_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

2 
	gOP_END


	@mterp/c/OP_REM_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

2 
	gOP_END


	@mterp/c/OP_REM_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

2 
	gOP_END


	@mterp/c/OP_RETURN.c

1 
	$HANDLE_OPCODE
(
$İcode
 )

2 
v¤c1
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|return%s v%d",

4 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

5 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

7 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

9 
	`GOTO_»tuºFromM‘hod
();

10 
OP_END


	@mterp/c/OP_RETURN_OBJECT.c

1 %
	gšşude
 "c/OP_RETURN.c"

	@mterp/c/OP_RETURN_VOID.c

1 
	$HANDLE_OPCODE
(
OP_RETURN_VOID
 )

2 
	`ILOGV
("|return-void");

3 #iâdeà
NDEBUG


4 
»tv®
.
j
 = 0xababababULL;

7 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

9 
	`GOTO_»tuºFromM‘hod
();

10 
OP_END


	@mterp/c/OP_RETURN_WIDE.c

1 
	$HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

2 
v¤c1
 = 
	`INST_AA
(
š¡
);

3 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

4 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

6 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

8 
	`GOTO_»tuºFromM‘hod
();

9 
OP_END


	@mterp/c/OP_RSUB_INT.c

1 
	$HANDLE_OPCODE
(
OP_RSUB_INT
 )

3 
vd¡
 = 
	`INST_A
(
š¡
);

4 
v¤c1
 = 
	`INST_B
(
š¡
);

5 
v¤c2
 = 
	`FETCH
(1);

6 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

7 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

9 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

11 
	}
}

12 
FINISH
(2);

13 
	gOP_END


	@mterp/c/OP_RSUB_INT_LIT8.c

1 
	$HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

3 
u2
 
l™Info
;

4 
vd¡
 = 
	`INST_AA
(
š¡
);

5 
l™Info
 = 
	`FETCH
(1);

6 
v¤c1
 = 
l™Info
 & 0xff;

7 
v¤c2
 = 
l™Info
 >> 8;

8 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

9 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

11 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

13 
	}
}

14 
FINISH
(2);

15 
	gOP_END


	@mterp/c/OP_SGET.c

1 
HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SGET_BOOLEAN.c

1 
HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SGET_BYTE.c

1 
HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SGET_CHAR.c

1 
HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SGET_OBJECT.c

1 
HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@mterp/c/OP_SGET_SHORT.c

1 
HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SGET_WIDE.c

1 
HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_SHL_INT.c

1 
HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

2 
	gOP_END


	@mterp/c/OP_SHL_INT_2ADDR.c

1 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

2 
	gOP_END


	@mterp/c/OP_SHL_INT_LIT8.c

1 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

2 
	gOP_END


	@mterp/c/OP_SHL_LONG.c

1 
HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

2 
	gOP_END


	@mterp/c/OP_SHL_LONG_2ADDR.c

1 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

2 
	gOP_END


	@mterp/c/OP_SHR_INT.c

1 
HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

2 
	gOP_END


	@mterp/c/OP_SHR_INT_2ADDR.c

1 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

2 
	gOP_END


	@mterp/c/OP_SHR_INT_LIT8.c

1 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

2 
	gOP_END


	@mterp/c/OP_SHR_LONG.c

1 
HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

2 
	gOP_END


	@mterp/c/OP_SHR_LONG_2ADDR.c

1 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

2 
	gOP_END


	@mterp/c/OP_SPARSE_SWITCH.c

1 
	$HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

3 cÚ¡ 
u2
* 
sw™chD©a
;

4 
u4
 
‹¡V®
;

5 
s4
 
off£t
;

7 
v¤c1
 = 
	`INST_AA
(
š¡
);

8 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

9 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

10 
sw™chD©a
 = 
pc
 + 
off£t
;

11 #iâdeà
NDEBUG


12 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

13 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

16 
	`EXPORT_PC
();

17 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad sparse switch");

18 
	`GOTO_exû±iÚThrown
();

21 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

23 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

24 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

25 ià(
off£t
 <= 0)

26 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

27 
	`FINISH
(
off£t
);

28 
	}
}

29 
	gOP_END


	@mterp/c/OP_SPUT.c

1 
HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SPUT_BOOLEAN.c

1 
HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SPUT_BYTE.c

1 
HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SPUT_CHAR.c

1 
HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SPUT_OBJECT.c

1 
HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2 
	gOP_END


	@mterp/c/OP_SPUT_SHORT.c

1 
HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2 
	gOP_END


	@mterp/c/OP_SPUT_WIDE.c

1 
HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2 
	gOP_END


	@mterp/c/OP_SUB_DOUBLE.c

1 
HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

2 
	gOP_END


	@mterp/c/OP_SUB_DOUBLE_2ADDR.c

1 
HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

2 
	gOP_END


	@mterp/c/OP_SUB_FLOAT.c

1 
HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

2 
	gOP_END


	@mterp/c/OP_SUB_FLOAT_2ADDR.c

1 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

2 
	gOP_END


	@mterp/c/OP_SUB_INT.c

1 
HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

2 
	gOP_END


	@mterp/c/OP_SUB_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

2 
	gOP_END


	@mterp/c/OP_SUB_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

2 
	gOP_END


	@mterp/c/OP_SUB_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

2 
	gOP_END


	@mterp/c/OP_THROW.c

1 
	$HANDLE_OPCODE
(
OP_THROW
 )

3 
Objeù
* 
obj
;

5 
v¤c1
 = 
	`INST_AA
(
š¡
);

6 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

7 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

8 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) {

10 
	`LOGVV
("Badƒxception\n");

13 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

15 
	`GOTO_exû±iÚThrown
();

16 
	}
}

17 
	gOP_END


	@mterp/c/OP_THROW_VERIFICATION_ERROR.c

1 
	$HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

2 
	`EXPORT_PC
();

3 
v¤c1
 = 
	`INST_AA
(
š¡
);

4 
»f
 = 
	`FETCH
(1);

5 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

6 
	`GOTO_exû±iÚThrown
();

7 
OP_END


	@mterp/c/OP_UNUSED_3E.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_3E
)

2 
OP_END


	@mterp/c/OP_UNUSED_3F.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_3F
)

2 
OP_END


	@mterp/c/OP_UNUSED_40.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_40
)

2 
OP_END


	@mterp/c/OP_UNUSED_41.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_41
)

2 
OP_END


	@mterp/c/OP_UNUSED_42.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_42
)

2 
OP_END


	@mterp/c/OP_UNUSED_43.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_43
)

2 
OP_END


	@mterp/c/OP_UNUSED_73.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_73
)

2 
OP_END


	@mterp/c/OP_UNUSED_79.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_79
)

2 
OP_END


	@mterp/c/OP_UNUSED_7A.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_7A
)

2 
OP_END


	@mterp/c/OP_UNUSED_E3.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E3
)

2 
OP_END


	@mterp/c/OP_UNUSED_E4.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E4
)

2 
OP_END


	@mterp/c/OP_UNUSED_E5.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E5
)

2 
OP_END


	@mterp/c/OP_UNUSED_E6.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E6
)

2 
OP_END


	@mterp/c/OP_UNUSED_E7.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E7
)

2 
OP_END


	@mterp/c/OP_UNUSED_E8.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E8
)

2 
OP_END


	@mterp/c/OP_UNUSED_E9.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_E9
)

2 
OP_END


	@mterp/c/OP_UNUSED_EA.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_EA
)

2 
OP_END


	@mterp/c/OP_UNUSED_EB.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_EB
)

2 
OP_END


	@mterp/c/OP_UNUSED_EC.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_EC
)

2 
OP_END


	@mterp/c/OP_UNUSED_EF.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_EF
)

2 
OP_END


	@mterp/c/OP_UNUSED_F1.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_F1
)

2 
OP_END


	@mterp/c/OP_UNUSED_FC.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_FC
)

2 
OP_END


	@mterp/c/OP_UNUSED_FD.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_FD
)

2 
OP_END


	@mterp/c/OP_UNUSED_FE.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_FE
)

2 
OP_END


	@mterp/c/OP_UNUSED_FF.c

1 
	$HANDLE_OPCODE
(
OP_UNUSED_FF
)

5 
	`LOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

6 
	`dvmAbÜt
();

7 
	`FINISH
(1);

8 
OP_END


	@mterp/c/OP_USHR_INT.c

1 
HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

2 
	gOP_END


	@mterp/c/OP_USHR_INT_2ADDR.c

1 
HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

2 
	gOP_END


	@mterp/c/OP_USHR_INT_LIT8.c

1 
HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

2 
	gOP_END


	@mterp/c/OP_USHR_LONG.c

1 
HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

2 
	gOP_END


	@mterp/c/OP_USHR_LONG_2ADDR.c

1 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

2 
	gOP_END


	@mterp/c/OP_XOR_INT.c

1 
HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

2 
	gOP_END


	@mterp/c/OP_XOR_INT_2ADDR.c

1 
HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

2 
	gOP_END


	@mterp/c/OP_XOR_INT_LIT16.c

1 
HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

2 
	gOP_END


	@mterp/c/OP_XOR_INT_LIT8.c

1 
HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

2 
	gOP_END


	@mterp/c/OP_XOR_LONG.c

1 
HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

2 
	gOP_END


	@mterp/c/OP_XOR_LONG_2ADDR.c

1 
HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

2 
	gOP_END


	@mterp/c/gotoTargets.c

11 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
)

13 
CÏssObjeù
* 
¬¿yCÏss
;

14 
A¼ayObjeù
* 
ÃwA¼ay
;

15 
u4
* 
cÚ‹Ás
;

16 
ty³Ch
;

17 
i
;

18 
u4
 
¬g5
;

20 
	`EXPORT_PC
();

22 
»f
 = 
	`FETCH
(1);

23 
vd¡
 = 
	`FETCH
(2);

25 ià(
m‘hodC®lRªge
) {

26 
v¤c1
 = 
	`INST_AA
(
š¡
);

27 
¬g5
 = -1;

28 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

29 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

31 
¬g5
 = 
	`INST_A
(
š¡
);

32 
v¤c1
 = 
	`INST_B
(
š¡
);

33 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

34 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

40 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

41 ià(
¬¿yCÏss
 =ğ
NULL
) {

42 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

43 ià(
¬¿yCÏss
 =ğ
NULL
)

44 
	`GOTO_exû±iÚThrown
();

54 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

55 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

60 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'\n", 
¬¿yCÏss
->
desütÜ
);

61 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

62 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

64 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeError;",

66 
	`GOTO_exû±iÚThrown
();

67 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

69 
	`LOGE
("non-int…rimitives‚ot implemented\n");

70 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

72 
	`GOTO_exû±iÚThrown
();

75 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

76 ià(
ÃwA¼ay
 =ğ
NULL
)

77 
	`GOTO_exû±iÚThrown
();

82 
cÚ‹Ás
 = (
u4
*è
ÃwA¼ay
->contents;

83 ià(
m‘hodC®lRªge
) {

84 
i
 = 0; i < 
v¤c1
; i++)

85 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

87 
	`as£¹
(
v¤c1
 <= 5);

88 ià(
v¤c1
 == 5) {

89 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

90 
v¤c1
--;

92 
i
 = 0; i < 
v¤c1
; i++) {

93 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

94 
vd¡
 >>= 4;

98 
»tv®
.
l
 = 
ÃwA¼ay
;

100 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

102 
	}
}

103 
FINISH
(3);

104 
GOTO_TARGET_END


107 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
)

109 
M‘hod
* 
ba£M‘hod
;

110 
Objeù
* 
thisPŒ
;

112 
	`EXPORT_PC
();

114 
v¤c1
 = 
	`INST_AA
(
š¡
);

115 
»f
 = 
	`FETCH
(1);

116 
vd¡
 = 
	`FETCH
(2);

122 ià(
m‘hodC®lRªge
) {

123 
	`as£¹
(
v¤c1
 > 0);

124 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

125 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

126 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

128 
	`as£¹
((
v¤c1
>>4) > 0);

129 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

130 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

131 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

134 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

135 
	`GOTO_exû±iÚThrown
();

141 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

142 ià(
ba£M‘hod
 =ğ
NULL
) {

143 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

144 ià(
ba£M‘hod
 =ğ
NULL
) {

145 
	`ILOGV
("+ unknown method or‡ccess denied\n");

146 
	`GOTO_exû±iÚThrown
();

154 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

155 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

158 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

168 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

170 
	`GOTO_exû±iÚThrown
();

173 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

174 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

177 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s\n",

178 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

179 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

180 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

181 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

184 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

185 
	`LOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s\n",

186 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

187 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

188 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

191 
	`dvmDumpAÎCÏs£s
(0);

195 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

196 
	}
}

197 
GOTO_TARGET_END


199 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

201 
M‘hod
* 
ba£M‘hod
;

202 
u2
 
thisReg
;

204 
	`EXPORT_PC
();

206 
v¤c1
 = 
	`INST_AA
(
š¡
);

207 
»f
 = 
	`FETCH
(1);

208 
vd¡
 = 
	`FETCH
(2);

210 ià(
m‘hodC®lRªge
) {

211 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

212 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

213 
thisReg
 = 
vd¡
;

215 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

216 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

217 
thisReg
 = 
vd¡
 & 0x0f;

220 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

221 
	`GOTO_exû±iÚThrown
();

230 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

231 ià(
ba£M‘hod
 =ğ
NULL
) {

232 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

233 ià(
ba£M‘hod
 =ğ
NULL
) {

234 
	`ILOGV
("+ unknown method or‡ccess denied\n");

235 
	`GOTO_exû±iÚThrown
();

248 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

253 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchMethodError;",

254 
ba£M‘hod
->
Çme
);

255 
	`GOTO_exû±iÚThrown
();

257 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

259 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

260 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

262 
	`GOTO_exû±iÚThrown
();

265 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

266 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

268 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s\n",

269 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

270 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

271 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

273 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

274 
	}
}

275 
GOTO_TARGET_END


277 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

279 
Objeù
* 
thisPŒ
;

280 
CÏssObjeù
* 
thisCÏss
;

282 
	`EXPORT_PC
();

284 
v¤c1
 = 
	`INST_AA
(
š¡
);

285 
»f
 = 
	`FETCH
(1);

286 
vd¡
 = 
	`FETCH
(2);

292 ià(
m‘hodC®lRªge
) {

293 
	`as£¹
(
v¤c1
 > 0);

294 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

295 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

296 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

298 
	`as£¹
((
v¤c1
>>4) > 0);

299 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

300 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

301 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

303 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

304 
	`GOTO_exû±iÚThrown
();

306 
thisCÏss
 = 
thisPŒ
->
şazz
;

312 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

313 
m‘hodCÏssDex
);

314 ià(
m‘hodToC®l
 =ğ
NULL
) {

315 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

316 
	`GOTO_exû±iÚThrown
();

319 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

320 
	}
}

321 
GOTO_TARGET_END


323 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

325 
u2
 
thisReg
;

327 
v¤c1
 = 
	`INST_AA
(
š¡
);

328 
»f
 = 
	`FETCH
(1);

329 
vd¡
 = 
	`FETCH
(2);

331 
	`EXPORT_PC
();

333 ià(
m‘hodC®lRªge
) {

334 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

335 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

336 
thisReg
 = 
vd¡
;

338 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

339 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

340 
thisReg
 = 
vd¡
 & 0x0f;

342 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

343 
	`GOTO_exû±iÚThrown
();

345 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

346 ià(
m‘hodToC®l
 =ğ
NULL
) {

347 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

348 
METHOD_DIRECT
);

349 ià(
m‘hodToC®l
 =ğ
NULL
) {

350 
	`ILOGV
("+ unknown direct method\n");

351 
	`GOTO_exû±iÚThrown
();

354 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

355 
	}
}

356 
GOTO_TARGET_END


358 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

359 
v¤c1
 = 
	`INST_AA
(
š¡
);

360 
»f
 = 
	`FETCH
(1);

361 
vd¡
 = 
	`FETCH
(2);

363 
	`EXPORT_PC
();

365 ià(
m‘hodC®lRªge
)

366 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

367 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

369 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

370 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

372 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

373 ià(
m‘hodToC®l
 =ğ
NULL
) {

374 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

375 ià(
m‘hodToC®l
 =ğ
NULL
) {

376 
	`ILOGV
("+ unknown method\n");

377 
	`GOTO_exû±iÚThrown
();

379 
	}
}

380 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

381 
GOTO_TARGET_END


383 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

385 
Objeù
* 
thisPŒ
;

387 
	`EXPORT_PC
();

389 
v¤c1
 = 
	`INST_AA
(
š¡
);

390 
»f
 = 
	`FETCH
(1);

391 
vd¡
 = 
	`FETCH
(2);

397 ià(
m‘hodC®lRªge
) {

398 
	`as£¹
(
v¤c1
 > 0);

399 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

400 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

401 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

403 
	`as£¹
((
v¤c1
>>4) > 0);

404 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

405 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

406 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

409 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

410 
	`GOTO_exû±iÚThrown
();

416 
	`as£¹
(
»f
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

417 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

420 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

421 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

423 
	`GOTO_exû±iÚThrown
();

426 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

427 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

430 
	`LOGVV
("+++ virtual[%d]=%s.%s\n",

431 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

432 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

434 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

435 
	}
}

436 
GOTO_TARGET_END


438 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

440 
u2
 
thisReg
;

442 
	`EXPORT_PC
();

444 
v¤c1
 = 
	`INST_AA
(
š¡
);

445 
»f
 = 
	`FETCH
(1);

446 
vd¡
 = 
	`FETCH
(2);

448 ià(
m‘hodC®lRªge
) {

449 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

450 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

451 
thisReg
 = 
vd¡
;

453 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

454 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

455 
thisReg
 = 
vd¡
 & 0x0f;

458 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

459 
	`GOTO_exû±iÚThrown
();

462 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

463 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
NULL
);

464 
	`GOTO_exû±iÚThrown
();

467 
	`as£¹
(
»f
 < 
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

479 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

482 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

483 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

485 
	`GOTO_exû±iÚThrown
();

488 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

489 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

491 
	`LOGVV
("+++ super-virtual[%d]=%s.%s\n",

492 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

493 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

495 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

496 
	}
}

497 
GOTO_TARGET_END


505 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

507 
SckSaveA»a
* 
§veA»a
;

516 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryR‘uº
, 0);

518 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

519 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

520 
curM‘hod
->
shÜty
);

523 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

525 #ifdeà
EASY_GDB


526 
debugSaveA»a
 = 
§veA»a
;

528 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

529 
	`TRACE_METHOD_EXIT
(
£lf
, 
curM‘hod
);

533 
å
 = 
§veA»a
->
´evF¿me
;

534 
	`as£¹
(
å
 !ğ
NULL
);

535 ià(
	`dvmIsB»akF¿me
(
å
)) {

537 
	`LOGVV
("+++„eturned into break frame\n");

538 
	`GOTO_ba
();

542 
£lf
->
curF¿me
 = 
å
;

543 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

545 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

546 
pc
 = 
§veA»a
->
§vedPc
;

547 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

548 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

552 ià(
Œue


555 
	`FINISH
(3);

559 
	`as£¹
(
çl£
);

561 
	}
}

562 
GOTO_TARGET_END


571 
	$GOTO_TARGET
(
exû±iÚThrown
)

573 
Objeù
* 
exû±iÚ
;

574 
ÿtchR–Pc
;

580 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryThrow
, 0);

588 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

589 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

590 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

591 
	`dvmCË¬Exû±iÚ
(
£lf
);

593 
	`LOGV
("Handlingƒxception %s‡t %s:%d\n",

594 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

595 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

597 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

612 ià(
gDvm
.
debugg”Aùive
) {

613 * 
ÿtchF¿me
;

614 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

615 
exû±iÚ
, 
Œue
, &
ÿtchF¿me
);

616 
	`dvmDbgPo¡Exû±iÚ
(
å
, 
pc
 - 
curM‘hod
->
š¢s
, 
ÿtchF¿me
,

617 
ÿtchR–Pc
, 
exû±iÚ
);

633 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

634 
exû±iÚ
, 
çl£
, (*)&
å
);

647 ià(
£lf
->
¡ackOv”æowed
)

648 
	`dvmCËªupSckOv”æow
(
£lf
);

650 ià(
ÿtchR–Pc
 < 0) {

652 #ià
DVM_SHOW_EXCEPTION
 >= 2

653 
	`LOGD
("Exception %s from %s:%d‚ot caught†ocally\n",

654 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

655 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

657 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

658 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

659 
	`GOTO_ba
();

662 #ià
DVM_SHOW_EXCEPTION
 >= 3

664 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

665 
	`LOGD
("Exception %shrown from %s:%do %s:%d\n",

666 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

667 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

668 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

669 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

678 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

680 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

681 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

682 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

683 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

684 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

698 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

699 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

701 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

702 
	`FINISH
(0);

703 
	}
}

704 
GOTO_TARGET_END


724 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

725 
u2
 
couÁ
, u2 
»gs
)

727 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

734 
u4
* 
outs
;

735 
i
;

736 #ifdeà
WITH_TAINT_TRACKING


737 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
);

743 ià(
m‘hodC®lRªge
) {

746 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

747 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

748 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

749 #ifdeà
WITH_TAINT_TRACKING


750 ià(
ÇtiveT¬g‘
) {

751 
i
 = 0; i < 
v¤c1
; i++) {

752 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

755 
outs
[
v¤c1
] = 
TAINT_CLEAR
;

757 
i
 = 0; i < 
v¤c1
; i++) {

758 
outs
[
v¤c1
+1+
i
] = 
	`GET_REGISTER_TAINT
(
vd¡
+i);

761 
¦Ù
 = 0;

762 
i
 = 0; i < 
v¤c1
; i++) {

763 
¦Ù
 = 
i
 << 1;

764 
outs
[
¦Ù
] = 
	`GET_REGISTER
(
vd¡
+
i
);

765 
outs
[
¦Ù
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
+
i
);

768 
outs
[
v¤c1
<<1] = 
TAINT_CLEAR
;

771 
i
 = 0; i < 
v¤c1
; i++)

772 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

775 
u4
 
couÁ
 = 
v¤c1
 >> 4;

777 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

778 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

779 
	`as£¹
(
couÁ
 <= 5);

781 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

783 ià(
couÁ
 == 5) {

784 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

785 
couÁ
--;

787 
i
 = 0; i < (è
couÁ
; i++) {

788 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

789 
vd¡
 >>= 4;

792 
	`as£¹
((
vd¡
 >> 16) == 0);

793 #ifdeà
WITH_TAINT_TRACKING


794 ià(
ÇtiveT¬g‘
) {

795 
couÁ
) {

797 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

798 
outs
[
couÁ
+5] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

800 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

801 
outs
[
couÁ
+4] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

803 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

804 
outs
[
couÁ
+3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

806 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

807 
outs
[
couÁ
+2] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

809 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

810 
outs
[
couÁ
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

815 
outs
[
couÁ
] = 
TAINT_CLEAR
;

817 
couÁ
) {

819 
outs
[8] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

820 
outs
[9] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

822 
outs
[6] = 
	`GET_REGISTER
(
vd¡
 >> 12);

823 
outs
[7] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

825 
outs
[4] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

826 
outs
[5] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

828 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

829 
outs
[3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

831 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

832 
outs
[1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

837 
outs
[
couÁ
<<1] = 
TAINT_CLEAR
;

842 
couÁ
) {

844 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

846 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

848 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

850 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

852 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

859 
	}
}

870 
SckSaveA»a
* 
	gÃwSaveA»a
;

871 
u4
* 
	gÃwFp
;

873 
ILOGV
("> %s%s.%s %s",

874 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

875 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

876 
m‘hodToC®l
->
shÜty
);

878 #ifdeà
WITH_TAINT_TRACKING


879 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
) -

880 ((
m‘hodToC®l
->
»gi¡”sSize
 << 1) + 1);

882 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

884 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

887 ià(
	gŒue
) {

888 
u1
* 
	gbÙtom
;

889 #ifdeà
WITH_TAINT_TRACKING


890 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 -

891 (
m‘hodToC®l
->
outsSize
 * (
u4
) + 4);

893 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

895 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

897 
LOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p size=%d '%s')\n",

898 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

899 
£lf
->
š‹½SckSize
, 
m‘hodToC®l
->
Çme
);

900 
dvmHªdËSckOv”æow
(
£lf
);

901 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

902 
GOTO_exû±iÚThrown
();

908 #ifdeà
LOG_INSTR


909 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

916 #ifdeà
WITH_TAINT_TRACKING


919 
mem£t
(
ÃwFp
, 0xcc,

920 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 8);

922 
mem£t
(
ÃwFp
, 0xcc,

923 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

928 #ifdeà
EASY_GDB


929 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

931 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

932 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

933 #ià
defšed
(
WITH_JIT
)

934 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

936 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

938 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

943 
	gcurM‘hod
 = 
m‘hodToC®l
;

944 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

945 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

946 
	gå
 = 
£lf
->
curF¿me
 = 
ÃwFp
;

947 #ifdeà
EASY_GDB


948 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

950 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


951 
	gdebugIsM‘hodEÁry
 = 
Œue
;

953 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

954 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

955 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

956 
FINISH
(0);

959 #ifdeà
USE_INDIRECT_REF


960 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

962 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

965 
	g£lf
->
	gcurF¿me
 = 
ÃwFp
;

967 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

969 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

970 ià(
	ggDvm
.
	gdebugg”Aùive
) {

971 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

972 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_ENTRY
);

975 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

976 
TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

979 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

980 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

987 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

988 #ifdeà
WITH_TAINT_TRACKING


992 
u4
 
	gcouÁ
 = (
m‘hodC®lRªge
è? 
v¤c1
 : vsrc1 >> 4;

993 
u4
* 
	gouts
 = 
OUTS_FROM_FP
(
å
, 
couÁ
);

994 
SET_RETURN_TAINT
(
outs
[
couÁ
]);

998 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

999 ià(
	ggDvm
.
	gdebugg”Aùive
) {

1000 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

1001 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_EXIT
);

1004 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

1005 
TRACE_METHOD_EXIT
(
£lf
, 
m‘hodToC®l
);

1009 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

1010 
	g£lf
->
	gcurF¿me
 = 
å
;

1017 ià(
dvmCheckExû±iÚ
(
£lf
)) {

1018 
LOGV
("Exceptionhrown by/below‚ative code\n");

1019 
GOTO_exû±iÚThrown
();

1022 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

1023 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

1024 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

1025 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

1026 
curM‘hod
->
shÜty
);

1029 ià(
	gŒue


1032 
FINISH
(3);

1036 
as£¹
(
çl£
);

1040 
as£¹
(
çl£
);

1041 
	gGOTO_TARGET_END


	@mterp/c/header.c

18 
	~"D®vik.h
"

19 
	~"š‹½/IÁ”pDefs.h
"

20 
	~"m‹½/M‹½.h
"

21 
	~<m©h.h
>

22 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

48 
	#THREADED_INTERP


	)

50 #ifdeà
WITH_INSTR_CHECKS


51 
	#CHECK_BRANCH_OFFSETS


	)

52 
	#CHECK_REGISTER_INDICES


	)

69 #ià
defšed
(
__ARM_EABI__
)

71 
	#NO_UNALIGN_64__MEMCPY


	)

81 #ifdeà
PROFILE_FIELD_ACCESS


82 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

83 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

85 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

86 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

95 #ià
WITH_EXTRA_GC_CHECKS
 > 1

96 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

98 
	#EXPORT_EXTRA_PC
()

	)

110 #ifdeà
CHECK_BRANCH_OFFSETS


111 
	#ADJUST_PC
(
_off£t
) do { \

112 
myoff
 = 
_off£t
; \

113 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

114 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

116 * 
desc
; \

117 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

118 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

119 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

120 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

121 
	`ä“
(
desc
); \

122 
	`dvmAbÜt
(); \

124 
pc
 +ğ
myoff
; \

125 
	`EXPORT_EXTRA_PC
(); \

126 } 
çl£
)

	)

128 
	#ADJUST_PC
(
_off£t
) do { \

129 
pc
 +ğ
_off£t
; \

130 
	`EXPORT_EXTRA_PC
(); \

131 } 
çl£
)

	)

137 #ifdeà
LOG_INSTR


138 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

139 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

140 
	#ILOG
(
_Ëv–
, ...) do { \

141 
debugSŒBuf
[128]; \

142 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

143 ià(
curM‘hod
 !ğ
NULL
) \

144 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

145 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

147 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

148 
£lf
->
th»adId
, 
debugSŒBuf
); \

149 } 
çl£
)

	)

150 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

151 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

152 cÚ¡ 
	gkS·cšg
[] = " ";

154 
	#ILOGD
(...è(()0)

	)

155 
	#ILOGV
(...è(()0)

	)

156 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

162 #ifdeà
WITH_TAINT_TRACKING


163 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

164 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

165 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

166 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

167 
	#TLOG
(
_Ëv–
, ...) do { \

168 
debugSŒBuf
[128]; \

169 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

170 ià(
curM‘hod
 !ğ
NULL
) \

171 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

172 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

174 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

175 
£lf
->
th»adId
, 
debugSŒBuf
); \

176 } 
çl£
)

	)

178 
	#TLOGD
(...è(()0)

	)

179 
	#TLOGV
(...è(()0)

	)

180 
	#TLOGW
(...è(()0)

	)

181 
	#TLOGE
(...è(()0)

	)

185 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

187 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

188 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

190 
±r
 +ğ
idx
;

191 
cÚv
.
·¹s
[0] = 
±r
[0];

192 
cÚv
.
·¹s
[1] = 
±r
[1];

193  
cÚv
.
Î
;

194 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

195 
s8
 
v®
;

196 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

197  
v®
;

199  *((
s8
*è&
±r
[
idx
]);

201 
	}
}

203 #ifdeà
WITH_TAINT_TRACKING


205 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

208 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

210 
±r
 +ğ
idx
;

211 
cÚv
.
·¹s
[0] = 
±r
[0];

212 
cÚv
.
·¹s
[1] = 
±r
[2];

213  
cÚv
.
Î
;

214 
	}
}

218 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

220 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

221 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

223 
±r
 +ğ
idx
;

224 
cÚv
.
Î
 = 
v®
;

225 
±r
[0] = 
cÚv
.
·¹s
[0];

226 
±r
[1] = 
cÚv
.
·¹s
[1];

227 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

228 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

230 *((
s8
*è&
±r
[
idx
]èğ
v®
;

232 
	}
}

234 #ifdeà
WITH_TAINT_TRACKING


236 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

239 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

241 
±r
 +ğ
idx
;

242 
cÚv
.
Î
 = 
v®
;

243 
±r
[0] = 
cÚv
.
·¹s
[0];

244 
±r
[2] = 
cÚv
.
·¹s
[1];

245 
	}
}

249 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

251 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

252 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

254 
±r
 +ğ
idx
;

255 
cÚv
.
·¹s
[0] = 
±r
[0];

256 
cÚv
.
·¹s
[1] = 
±r
[1];

257  
cÚv
.
d
;

258 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

259 
dv®
;

260 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

261  
dv®
;

263  *((*è&
±r
[
idx
]);

265 
	}
}

267 #ifdeà
WITH_TAINT_TRACKING


269 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

272 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

274 
±r
 +ğ
idx
;

275 
cÚv
.
·¹s
[0] = 
±r
[0];

276 
cÚv
.
·¹s
[1] = 
±r
[2];

277  
cÚv
.
d
;

278 
	}
}

282 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

284 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

285 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

287 
±r
 +ğ
idx
;

288 
cÚv
.
d
 = 
dv®
;

289 
±r
[0] = 
cÚv
.
·¹s
[0];

290 
±r
[1] = 
cÚv
.
·¹s
[1];

291 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

292 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

294 *((*è&
±r
[
idx
]èğ
dv®
;

296 
	}
}

298 #ifdeà
WITH_TAINT_TRACKING


300 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

303 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

305 
±r
 +ğ
idx
;

306 
cÚv
.
d
 = 
dv®
;

307 
±r
[0] = 
cÚv
.
·¹s
[0];

308 
±r
[2] = 
cÚv
.
·¹s
[1];

309 
	}
}

320 #ifdeà
WITH_TAINT_TRACKING


324 #ifdeà
CHECK_REGISTER_INDICES


325 
	#GET_REGISTER
(
_idx
) \

326 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

327 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

328 
	#SET_REGISTER
(
_idx
, 
_v®
) \

329 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

330 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

331 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

332 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

333 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

334 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

335 
	#GET_REGISTER_WIDE
(
_idx
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

337 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

339 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

340 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

341 
	#GET_REGISTER_FLOAT
(
_idx
) \

342 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

343 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

344 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

345 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

346 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

347 
	#GET_REGISTER_DOUBLE
(
_idx
) \

348 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

349 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

350 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

351 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

352 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

354 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

355 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

356 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

357 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

358 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

359 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

360 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

361 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

362 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

363 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

364 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

365 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 #ifdeà
CHECK_REGISTER_INDICES


370 
	#GET_REGISTER
(
_idx
) \

371 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

372 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

373 
	#SET_REGISTER
(
_idx
, 
_v®
) \

374 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

375 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

376 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

377 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

378 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

379 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

380 
	#GET_REGISTER_WIDE
(
_idx
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

382 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

384 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

385 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

386 
	#GET_REGISTER_FLOAT
(
_idx
) \

387 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

388 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

389 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

390 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

391 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

392 
	#GET_REGISTER_DOUBLE
(
_idx
) \

393 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

394 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

395 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

396 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

397 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

399 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

400 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

401 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

402 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

403 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

404 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

405 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

406 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

407 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

408 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

409 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

410 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

414 #ifdeà
WITH_TAINT_TRACKING


416 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

417 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

418 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

419 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

420 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

422 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

423 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

424 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

425 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

426 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

427 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

428 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

429 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

432 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

433 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

436 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

437 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

439 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

440 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

441 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

442 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

443 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

444 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

445 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

446 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

447 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

448 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

449 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

450 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

451 
	#GET_RETURN_TAINT
(è(()0)

	)

452 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

462 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

467 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

472 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

473 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

479 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

492 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

502 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

503 #ià
defšed
(
WITH_JIT
)

504 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

505 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

506 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

507 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

509 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

510 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

511 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

514 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

527 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

529 ià(
obj
 =ğ
NULL
) {

530 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

531  
çl£
;

533 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


534 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

535 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

536 
	`dvmAbÜt
();

539 #iâdeà
NDEBUG


540 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

542 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

543 
	`dvmAbÜt
();

546  
Œue
;

547 
	}
}

558 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

560 ià(
obj
 =ğ
NULL
) {

561 
	`EXPORT_PC
();

562 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

563  
çl£
;

565 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


566 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

567 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

568 
	`dvmAbÜt
();

571 #iâdeà
NDEBUG


572 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

574 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

575 
	`dvmAbÜt
();

578  
Œue
;

579 
	}
}

	@mterp/c/opcommon.c

2 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

3 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

4 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

5 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

6 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

7 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

8 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

9 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

10 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

11 
u2
 
couÁ
, u2 
»gs
);

12 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

13 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

27 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

28 
	`HANDLE_OPCODE
(
_İcode
 ) \

29 
vd¡
 = 
	`INST_A
(
š¡
); \

30 
v¤c1
 = 
	`INST_B
(
š¡
); \

31 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

32 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

33 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

35 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

36 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

38 
	`FINISH
(1);

	)

40 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

41 
_tovty³
, 
_tÜty³
) \

42 
	`HANDLE_OPCODE
(
_İcode
 ) \

45 
_äomvty³
 
v®
; \

46 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

47 
vd¡
 = 
	`INST_A
(
š¡
); \

48 
v¤c1
 = 
	`INST_B
(
š¡
); \

49 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

50 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

51 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

52 
štMax
 = ~
štMš
; \

53 
»suÉ
 = (
_tovty³
è
v®
; \

54 ià(
v®
 >ğ
štMax
) \

55 
»suÉ
 = 
štMax
; \

56 ià(
v®
 <ğ
štMš
) \

57 
»suÉ
 = 
štMš
; \

58 ià(
v®
 != val) \

59 
»suÉ
 = 0; \

61 
»suÉ
 = (
_tovty³
è
v®
; \

62 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

64 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

65 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

68 
	`FINISH
(1);

	)

70 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

71 
	`HANDLE_OPCODE
(
_İcode
 ) \

72 
vd¡
 = 
	`INST_A
(
š¡
); \

73 
v¤c1
 = 
	`INST_B
(
š¡
); \

74 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

75 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

77 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

79 
	`FINISH
(1);

	)

82 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

83 
	`HANDLE_OPCODE
(
_İcode
 ) \

85 
»suÉ
; \

86 
u2
 
»gs
; \

87 
_v¬Ty³
 
v®1
, 
v®2
; \

88 
vd¡
 = 
	`INST_AA
(
š¡
); \

89 
»gs
 = 
	`FETCH
(1); \

90 
v¤c1
 = 
»gs
 & 0xff; \

91 
v¤c2
 = 
»gs
 >> 8; \

92 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

93 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

94 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

95 ià(
v®1
 =ğ
v®2
) \

96 
»suÉ
 = 0; \

97 ià(
v®1
 < 
v®2
) \

98 
»suÉ
 = -1; \

99 ià(
v®1
 > 
v®2
) \

100 
»suÉ
 = 1; \

102 
»suÉ
 = (
_ÇnV®
); \

103 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

104 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

106 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

109 
	`FINISH
(2);

	)

111 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

112 
	`HANDLE_OPCODE
(
_İcode
 ) \

113 
v¤c1
 = 
	`INST_A
(
š¡
); \

114 
v¤c2
 = 
	`INST_B
(
š¡
); \

115 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

116 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

117 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

118 
b¿nchOff£t
); \

119 
	`ILOGV
("> branchaken"); \

120 ià(
b¿nchOff£t
 < 0) \

121 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

122 
	`FINISH
(
b¿nchOff£t
); \

124 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

125 
	`FINISH
(2); \

126 }

	)

128 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

129 
	`HANDLE_OPCODE
(
_İcode
 ) \

130 
v¤c1
 = 
	`INST_AA
(
š¡
); \

131 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

132 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

133 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

134 
	`ILOGV
("> branchaken"); \

135 ià(
b¿nchOff£t
 < 0) \

136 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

137 
	`FINISH
(
b¿nchOff£t
); \

139 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

140 
	`FINISH
(2); \

141 }

	)

143 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

144 
	`HANDLE_OPCODE
(
_İcode
 ) \

145 
vd¡
 = 
	`INST_A
(
š¡
); \

146 
v¤c1
 = 
	`INST_B
(
š¡
); \

147 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

148 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

150 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

152 
	`FINISH
(1);

	)

154 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

155 
	`HANDLE_OPCODE
(
_İcode
 ) \

157 
u2
 
¤cRegs
; \

158 
vd¡
 = 
	`INST_AA
(
š¡
); \

159 
¤cRegs
 = 
	`FETCH
(1); \

160 
v¤c1
 = 
¤cRegs
 & 0xff; \

161 
v¤c2
 = 
¤cRegs
 >> 8; \

162 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

163 ià(
_chkdiv
 != 0) { \

164 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

165 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

166 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

167 ià(
£cÚdV®
 == 0) { \

168 
	`EXPORT_PC
(); \

169 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

171 
	`GOTO_exû±iÚThrown
(); \

173 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

174 ià(
_chkdiv
 == 1) \

175 
»suÉ
 = 
fœ¡V®
; \

177 
»suÉ
 = 0; \

179 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

181 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

184 
	`SET_REGISTER
(
vd¡
, \

185 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

188 
	`SET_REGISTER_TAINT
(
vd¡
, \

189 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

192 
	`FINISH
(2);

	)

194 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

195 
	`HANDLE_OPCODE
(
_İcode
 ) \

197 
u2
 
¤cRegs
; \

198 
vd¡
 = 
	`INST_AA
(
š¡
); \

199 
¤cRegs
 = 
	`FETCH
(1); \

200 
v¤c1
 = 
¤cRegs
 & 0xff; \

201 
v¤c2
 = 
¤cRegs
 >> 8; \

202 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

203 
	`SET_REGISTER
(
vd¡
, \

204 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

206 
	`SET_REGISTER_TAINT
(
vd¡
, \

207 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

210 
	`FINISH
(2);

	)

212 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

213 
	`HANDLE_OPCODE
(
_İcode
 ) \

214 
vd¡
 = 
	`INST_A
(
š¡
); \

215 
v¤c1
 = 
	`INST_B
(
š¡
); \

216 
v¤c2
 = 
	`FETCH
(1); \

217 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

218 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

219 ià(
_chkdiv
 != 0) { \

220 
s4
 
fœ¡V®
, 
»suÉ
; \

221 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

222 ià((
s2
è
v¤c2
 == 0) { \

223 
	`EXPORT_PC
(); \

224 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

226 
	`GOTO_exû±iÚThrown
(); \

228 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

230 ià(
_chkdiv
 == 1) \

231 
»suÉ
 = 
fœ¡V®
; \

233 
»suÉ
 = 0; \

235 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

237 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

240 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

243 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

245 
	`FINISH
(2);

	)

247 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

248 
	`HANDLE_OPCODE
(
_İcode
 ) \

250 
u2
 
l™Info
; \

251 
vd¡
 = 
	`INST_AA
(
š¡
); \

252 
l™Info
 = 
	`FETCH
(1); \

253 
v¤c1
 = 
l™Info
 & 0xff; \

254 
v¤c2
 = 
l™Info
 >> 8; \

255 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

256 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

257 ià(
_chkdiv
 != 0) { \

258 
s4
 
fœ¡V®
, 
»suÉ
; \

259 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

260 ià((
s1
è
v¤c2
 == 0) { \

261 
	`EXPORT_PC
(); \

262 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

264 
	`GOTO_exû±iÚThrown
(); \

266 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

267 ià(
_chkdiv
 == 1) \

268 
»suÉ
 = 
fœ¡V®
; \

270 
»suÉ
 = 0; \

272 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

274 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

276 
	`SET_REGISTER
(
vd¡
, \

277 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

280 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

283 
	`FINISH
(2);

	)

285 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

286 
	`HANDLE_OPCODE
(
_İcode
 ) \

288 
u2
 
l™Info
; \

289 
vd¡
 = 
	`INST_AA
(
š¡
); \

290 
l™Info
 = 
	`FETCH
(1); \

291 
v¤c1
 = 
l™Info
 & 0xff; \

292 
v¤c2
 = 
l™Info
 >> 8; \

293 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

294 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

295 
	`SET_REGISTER
(
vd¡
, \

296 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

298 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

301 
	`FINISH
(2);

	)

303 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

304 
	`HANDLE_OPCODE
(
_İcode
 ) \

305 
vd¡
 = 
	`INST_A
(
š¡
); \

306 
v¤c1
 = 
	`INST_B
(
š¡
); \

307 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

308 ià(
_chkdiv
 != 0) { \

309 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

310 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

311 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

312 ià(
£cÚdV®
 == 0) { \

313 
	`EXPORT_PC
(); \

314 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

316 
	`GOTO_exû±iÚThrown
(); \

318 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

319 ià(
_chkdiv
 == 1) \

320 
»suÉ
 = 
fœ¡V®
; \

322 
»suÉ
 = 0; \

324 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

326 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

328 
	`SET_REGISTER
(
vd¡
, \

329 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

332 
	`SET_REGISTER_TAINT
(
vd¡
, \

333 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

335 
	`FINISH
(1);

	)

337 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

338 
	`HANDLE_OPCODE
(
_İcode
 ) \

339 
vd¡
 = 
	`INST_A
(
š¡
); \

340 
v¤c1
 = 
	`INST_B
(
š¡
); \

341 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

342 
	`SET_REGISTER
(
vd¡
, \

343 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

345 
	`SET_REGISTER_TAINT
(
vd¡
, \

346 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

348 
	`FINISH
(1);

	)

350 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

351 
	`HANDLE_OPCODE
(
_İcode
 ) \

353 
u2
 
¤cRegs
; \

354 
vd¡
 = 
	`INST_AA
(
š¡
); \

355 
¤cRegs
 = 
	`FETCH
(1); \

356 
v¤c1
 = 
¤cRegs
 & 0xff; \

357 
v¤c2
 = 
¤cRegs
 >> 8; \

358 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

359 ià(
_chkdiv
 != 0) { \

360 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

361 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

362 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

363 ià(
£cÚdV®
 == 0LL) { \

364 
	`EXPORT_PC
(); \

365 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

367 
	`GOTO_exû±iÚThrown
(); \

369 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

370 
£cÚdV®
 == -1LL) \

372 ià(
_chkdiv
 == 1) \

373 
»suÉ
 = 
fœ¡V®
; \

375 
»suÉ
 = 0; \

377 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

379 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

381 
	`SET_REGISTER_WIDE
(
vd¡
, \

382 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

385 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

386 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

389 
	`FINISH
(2);

	)

391 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

392 
	`HANDLE_OPCODE
(
_İcode
 ) \

394 
u2
 
¤cRegs
; \

395 
vd¡
 = 
	`INST_AA
(
š¡
); \

396 
¤cRegs
 = 
	`FETCH
(1); \

397 
v¤c1
 = 
¤cRegs
 & 0xff; \

398 
v¤c2
 = 
¤cRegs
 >> 8; \

399 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

400 
	`SET_REGISTER_WIDE
(
vd¡
, \

401 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

403 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

404 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

407 
	`FINISH
(2);

	)

409 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

410 
	`HANDLE_OPCODE
(
_İcode
 ) \

411 
vd¡
 = 
	`INST_A
(
š¡
); \

412 
v¤c1
 = 
	`INST_B
(
š¡
); \

413 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

414 ià(
_chkdiv
 != 0) { \

415 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

416 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

417 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

418 ià(
£cÚdV®
 == 0LL) { \

419 
	`EXPORT_PC
(); \

420 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

422 
	`GOTO_exû±iÚThrown
(); \

424 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

425 
£cÚdV®
 == -1LL) \

427 ià(
_chkdiv
 == 1) \

428 
»suÉ
 = 
fœ¡V®
; \

430 
»suÉ
 = 0; \

432 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

434 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

436 
	`SET_REGISTER_WIDE
(
vd¡
, \

437 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

440 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

441 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

443 
	`FINISH
(1);

	)

445 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

446 
	`HANDLE_OPCODE
(
_İcode
 ) \

447 
vd¡
 = 
	`INST_A
(
š¡
); \

448 
v¤c1
 = 
	`INST_B
(
š¡
); \

449 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

450 
	`SET_REGISTER_WIDE
(
vd¡
, \

451 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

453 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

454 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

456 
	`FINISH
(1);

	)

458 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

459 
	`HANDLE_OPCODE
(
_İcode
 ) \

461 
u2
 
¤cRegs
; \

462 
vd¡
 = 
	`INST_AA
(
š¡
); \

463 
¤cRegs
 = 
	`FETCH
(1); \

464 
v¤c1
 = 
¤cRegs
 & 0xff; \

465 
v¤c2
 = 
¤cRegs
 >> 8; \

466 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

467 
	`SET_REGISTER_FLOAT
(
vd¡
, \

468 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

470 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

471 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

474 
	`FINISH
(2);

	)

476 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

477 
	`HANDLE_OPCODE
(
_İcode
 ) \

479 
u2
 
¤cRegs
; \

480 
vd¡
 = 
	`INST_AA
(
š¡
); \

481 
¤cRegs
 = 
	`FETCH
(1); \

482 
v¤c1
 = 
¤cRegs
 & 0xff; \

483 
v¤c2
 = 
¤cRegs
 >> 8; \

484 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

485 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

486 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

488 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

489 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

492 
	`FINISH
(2);

	)

494 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

495 
	`HANDLE_OPCODE
(
_İcode
 ) \

496 
vd¡
 = 
	`INST_A
(
š¡
); \

497 
v¤c1
 = 
	`INST_B
(
š¡
); \

498 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

499 
	`SET_REGISTER_FLOAT
(
vd¡
, \

500 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

502 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

503 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

505 
	`FINISH
(1);

	)

507 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

508 
	`HANDLE_OPCODE
(
_İcode
 ) \

509 
vd¡
 = 
	`INST_A
(
š¡
); \

510 
v¤c1
 = 
	`INST_B
(
š¡
); \

511 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

512 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

513 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

515 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

516 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

518 
	`FINISH
(1);

	)

520 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

521 
	`HANDLE_OPCODE
(
_İcode
 ) \

523 
A¼ayObjeù
* 
¬¿yObj
; \

524 
u2
 
¬¿yInfo
; \

525 
	`EXPORT_PC
(); \

526 
vd¡
 = 
	`INST_AA
(
š¡
); \

527 
¬¿yInfo
 = 
	`FETCH
(1); \

528 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

529 
v¤c2
 = 
¬¿yInfo
 >> 8; \

530 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

531 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

532 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

533 
	`GOTO_exû±iÚThrown
(); \

534 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

535 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

536 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

537 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

538 
NULL
); \

539 
	`GOTO_exû±iÚThrown
(); \

541 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

542 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

544 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

545 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

547 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

549 
	`FINISH
(2);

	)

551 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

552 
	`HANDLE_OPCODE
(
_İcode
 ) \

554 
A¼ayObjeù
* 
¬¿yObj
; \

555 
u2
 
¬¿yInfo
; \

556 
	`EXPORT_PC
(); \

557 
vd¡
 = 
	`INST_AA
(
š¡
); \

558 
¬¿yInfo
 = 
	`FETCH
(1); \

559 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

560 
v¤c2
 = 
¬¿yInfo
 >> 8; \

561 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

562 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

563 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

564 
	`GOTO_exû±iÚThrown
(); \

565 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

566 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

567 
NULL
); \

568 
	`GOTO_exû±iÚThrown
(); \

570 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

571 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

572 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

574 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

575 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

576 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

579 
	`FINISH
(2);

	)

598 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

599 
	`HANDLE_OPCODE
(
_İcode
 ) \

601 
In¡F›ld
* 
if›ld
; \

602 
Objeù
* 
obj
; \

603 
	`EXPORT_PC
(); \

604 
vd¡
 = 
	`INST_A
(
š¡
); \

605 
v¤c1
 = 
	`INST_B
(
š¡
); \

606 
»f
 = 
	`FETCH
(1); \

607 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

608 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

609 ià(!
	`checkFÜNuÎ
(
obj
)) \

610 
	`GOTO_exû±iÚThrown
(); \

611 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

612 ià(
if›ld
 =ğ
NULL
) { \

613 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

614 ià(
if›ld
 =ğ
NULL
) \

615 
	`GOTO_exû±iÚThrown
(); \

617 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

618 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

619 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

620 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

621 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

623 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

624 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

625 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

628 
	`FINISH
(2);

	)

630 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

631 
	`HANDLE_OPCODE
(
_İcode
 ) \

633 
Objeù
* 
obj
; \

634 
vd¡
 = 
	`INST_A
(
š¡
); \

635 
v¤c1
 = 
	`INST_B
(
š¡
); \

636 
»f
 = 
	`FETCH
(1); \

637 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

638 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

639 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

640 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

641 
	`GOTO_exû±iÚThrown
(); \

642 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

643 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

644 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

648 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

649 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

650 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

653 
	`FINISH
(2);

	)

655 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

656 
	`HANDLE_OPCODE
(
_İcode
 ) \

658 
In¡F›ld
* 
if›ld
; \

659 
Objeù
* 
obj
; \

660 
	`EXPORT_PC
(); \

661 
vd¡
 = 
	`INST_A
(
š¡
); \

662 
v¤c1
 = 
	`INST_B
(
š¡
); \

663 
»f
 = 
	`FETCH
(1); \

664 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

665 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

666 ià(!
	`checkFÜNuÎ
(
obj
)) \

667 
	`GOTO_exû±iÚThrown
(); \

668 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

669 ià(
if›ld
 =ğ
NULL
) { \

670 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

671 ià(
if›ld
 =ğ
NULL
) \

672 
	`GOTO_exû±iÚThrown
(); \

674 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

675 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

676 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

677 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

678 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

680 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

681 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

684 
	`FINISH
(2);

	)

686 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

687 
	`HANDLE_OPCODE
(
_İcode
 ) \

689 
Objeù
* 
obj
; \

690 
vd¡
 = 
	`INST_A
(
š¡
); \

691 
v¤c1
 = 
	`INST_B
(
š¡
); \

692 
»f
 = 
	`FETCH
(1); \

693 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

694 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

695 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

696 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

697 
	`GOTO_exû±iÚThrown
(); \

698 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

699 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

700 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

704 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

705 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

708 
	`FINISH
(2);

	)

710 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

711 
	`HANDLE_OPCODE
(
_İcode
 ) \

713 
SticF›ld
* 
sf›ld
; \

714 
vd¡
 = 
	`INST_AA
(
š¡
); \

715 
»f
 = 
	`FETCH
(1); \

716 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

717 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

718 ià(
sf›ld
 =ğ
NULL
) { \

719 
	`EXPORT_PC
(); \

720 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

721 ià(
sf›ld
 =ğ
NULL
) \

722 
	`GOTO_exû±iÚThrown
(); \

724 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

725 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

726 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

727 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

729 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

732 
	`FINISH
(2);

	)

734 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

735 
	`HANDLE_OPCODE
(
_İcode
 ) \

737 
SticF›ld
* 
sf›ld
; \

738 
vd¡
 = 
	`INST_AA
(
š¡
); \

739 
»f
 = 
	`FETCH
(1); \

740 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

741 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

742 ià(
sf›ld
 =ğ
NULL
) { \

743 
	`EXPORT_PC
(); \

744 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

745 ià(
sf›ld
 =ğ
NULL
) \

746 
	`GOTO_exû±iÚThrown
(); \

748 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

749 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

750 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

751 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

753 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

754 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

757 
	`FINISH
(2);

	)

	@mterp/common/FindInterface.h

18 
	~"D®vik.h
"

27 
INLINE
 
M‘hod
* 
	$dvmFšdIÁ”çûM‘hodInCache
(
CÏssObjeù
* 
thisCÏss
,

28 
u4
 
m‘hodIdx
, cÚ¡ 
M‘hod
* 
m‘hod
, 
DvmDex
* 
m‘hodCÏssDex
)

30 
	#ATOMIC_CACHE_CALC
 \

31 
	`dvmIÁ”pFšdIÁ”çûM‘hod
(
thisCÏss
, 
m‘hodIdx
, 
m‘hod
, 
m‘hodCÏssDex
)

	)

33  (
M‘hod
*è
	`ATOMIC_CACHE_LOOKUP
(
m‘hodCÏssDex
->
pIÁ”çûCache
,

34 
DEX_INTERFACE_CACHE_SIZE
, 
thisCÏss
, 
m‘hodIdx
);

36 #undeà
ATOMIC_CACHE_CALC


37 
	}
}

	@mterp/common/asm-constants.h

7 #ià
defšed
(
ASM_DEF_VERIFY
)

13 
	#MTERP_OFFSET
(
_Çme
, 
_ty³
, 
_f›ld
, 
_off£t
) \

14 ià(
	`off£tof
(
_ty³
, 
_f›ld
è!ğ
_off£t
) { \

15 
	`LOGE
("Bad‡sm offset %s (%d), should be %d\n", \

16 #_Çme, 
_off£t
, 
	`off£tof
(
_ty³
, 
_f›ld
)); \

17 
çed
 = 
Œue
; \

18 }

	)

19 
	#MTERP_SIZEOF
(
_Çme
, 
_ty³
, 
_size
) \

20 ià((
_ty³
è!ğ(
_size
)) { \

21 
	`LOGE
("Bad‡sm sizeof %s (%d), should be %d\n", \

22 #_Çme, (
_size
), (
_ty³
)); \

23 
çed
 = 
Œue
; \

24 }

	)

25 
	#MTERP_CONSTANT
(
_Çme
, 
_v®ue
) \

26 ià((
_Çme
è!ğ(
_v®ue
)) { \

27 
	`LOGE
("Bad‡sm constant %s (%d), should be %d\n", \

28 #_Çme, (
_v®ue
), (
_Çme
)); \

29 
çed
 = 
Œue
; \

30 }

	)

33 
	#MTERP_OFFSET
(
Çme
, 
ty³
, 
f›ld
, 
off£t
èÇmğ
	)
offset

34 
	#MTERP_SIZEOF
(
Çme
, 
ty³
, 
size
èÇmğ
	)
size

35 
	#MTERP_CONSTANT
(
Çme
, 
v®ue
èÇmğ
	)
value

43 #ià
defšed
(
__ARM_EABI__
)

44 
	#MTERP_NO_UNALIGN_64


	)

46 #ià
defšed
(
HAVE_SHORT_ENUMS
)

47 
	#MTERP_SMALL_ENUM
 1

	)

49 
	#MTERP_SMALL_ENUM
 4

	)

85 
	$MTERP_SIZEOF
(
sizeofGlob®_debugg”Aùive
, 
gDvm
.
debugg”Aùive
, 1)

86 #ià
	`defšed
(
WITH_PROFILER
)

87 
	$MTERP_SIZEOF
(
sizeofGlob®_aùiveProf”s
, 
gDvm
.
aùiveProf”s
, 4)

91 
	$MTERP_OFFSET
(
offGlue_pc
, 
M‹½Glue
, 
pc
, 0)

92 
	$MTERP_OFFSET
(
offGlue_å
, 
M‹½Glue
, 
å
, 4)

93 
	$MTERP_OFFSET
(
offGlue_»tv®
, 
M‹½Glue
, 
»tv®
, 8)

95 #ifdeà
WITH_TAINT_TRACKING


97 
	$MTERP_OFFSET
(
offGlue_¹ašt
, 
M‹½Glue
, 
¹ašt
, 16)

98 
	$MTERP_OFFSET
(
offGlue_m‘hod
, 
M‹½Glue
, 
m‘hod
, 20)

99 
	$MTERP_OFFSET
(
offGlue_m‘hodCÏssDex
, 
M‹½Glue
, 
m‘hodCÏssDex
, 24)

100 
	$MTERP_OFFSET
(
offGlue_£lf
, 
M‹½Glue
, 
£lf
, 28)

101 
	$MTERP_OFFSET
(
offGlue_baPŒ
, 
M‹½Glue
, 
baPŒ
, 32)

102 
	$MTERP_OFFSET
(
offGlue_š‹½SckEnd
, 
M‹½Glue
, 
š‹½SckEnd
, 36)

103 
	$MTERP_OFFSET
(
offGlue_pS–fSu¥’dCouÁ
, 
M‹½Glue
, 
pS–fSu¥’dCouÁ
, 40)

104 #ià
	`defšed
(
WITH_DEBUGGER
è&& defšed(
WITH_PROFILER
)

105 
	$MTERP_OFFSET
(
offGlue_pDebugg”Aùive
, 
M‹½Glue
, 
pDebugg”Aùive
, 44)

106 
	$MTERP_OFFSET
(
offGlue_pAùiveProf”s
, 
M‹½Glue
, 
pAùiveProf”s
, 48)

107 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 52)

108 #ià
	`defšed
(
WITH_JIT
)

109 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 60)

110 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 64)

111 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 68)

112 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 72)

114 #–ià
	`defšed
(
WITH_DEBUGGER
)

115 
	$MTERP_OFFSET
(
offGlue_pDebugg”Aùive
, 
M‹½Glue
, 
pDebugg”Aùive
, 44)

116 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 48)

117 #ià
	`defšed
(
WITH_JIT
)

118 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 56)

119 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 60)

120 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 64)

121 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 68)

123 #–ià
	`defšed
(
WITH_PROFILER
)

124 
	$MTERP_OFFSET
(
offGlue_pAùiveProf”s
, 
M‹½Glue
, 
pAùiveProf”s
, 44)

125 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 48)

126 #ià
	`defšed
(
WITH_JIT
)

127 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 56)

128 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 60)

129 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 64)

130 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 68)

133 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 44)

134 #ià
	`defšed
(
WITH_JIT
)

135 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 52)

136 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 56)

137 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 60)

138 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 64)

143 
	$MTERP_OFFSET
(
offGlue_m‘hod
, 
M‹½Glue
, 
m‘hod
, 16)

144 
	$MTERP_OFFSET
(
offGlue_m‘hodCÏssDex
, 
M‹½Glue
, 
m‘hodCÏssDex
, 20)

145 
	$MTERP_OFFSET
(
offGlue_£lf
, 
M‹½Glue
, 
£lf
, 24)

146 
	$MTERP_OFFSET
(
offGlue_baPŒ
, 
M‹½Glue
, 
baPŒ
, 28)

147 
	$MTERP_OFFSET
(
offGlue_š‹½SckEnd
, 
M‹½Glue
, 
š‹½SckEnd
, 32)

148 
	$MTERP_OFFSET
(
offGlue_pS–fSu¥’dCouÁ
, 
M‹½Glue
, 
pS–fSu¥’dCouÁ
, 36)

149 #ià
	`defšed
(
WITH_DEBUGGER
è&& defšed(
WITH_PROFILER
)

150 
	$MTERP_OFFSET
(
offGlue_pDebugg”Aùive
, 
M‹½Glue
, 
pDebugg”Aùive
, 40)

151 
	$MTERP_OFFSET
(
offGlue_pAùiveProf”s
, 
M‹½Glue
, 
pAùiveProf”s
, 44)

152 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 48)

153 #ià
	`defšed
(
WITH_JIT
)

154 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 56)

155 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 60)

156 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 64)

157 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 68)

159 #–ià
	`defšed
(
WITH_DEBUGGER
)

160 
	$MTERP_OFFSET
(
offGlue_pDebugg”Aùive
, 
M‹½Glue
, 
pDebugg”Aùive
, 40)

161 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 44)

162 #ià
	`defšed
(
WITH_JIT
)

163 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 52)

164 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 56)

165 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 60)

166 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 64)

168 #–ià
	`defšed
(
WITH_PROFILER
)

169 
	$MTERP_OFFSET
(
offGlue_pAùiveProf”s
, 
M‹½Glue
, 
pAùiveProf”s
, 40)

170 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 44)

171 #ià
	`defšed
(
WITH_JIT
)

172 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 52)

173 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 56)

174 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 60)

175 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 64)

178 
	$MTERP_OFFSET
(
offGlue_’ŒyPošt
, 
M‹½Glue
, 
’ŒyPošt
, 40)

179 #ià
	`defšed
(
WITH_JIT
)

180 
	$MTERP_OFFSET
(
offGlue_pJ™ProfTabË
, 
M‹½Glue
, 
pJ™ProfTabË
, 48)

181 
	$MTERP_OFFSET
(
offGlue_j™S‹
, 
M‹½Glue
, 
j™S‹
, 52)

182 
	$MTERP_OFFSET
(
offGlue_j™Resume
, 
M‹½Glue
, 
j™Resume
, 56)

183 
	$MTERP_OFFSET
(
offGlue_j™ResumePC
, 
M‹½Glue
, 
j™ResumePC
, 60)

189 
	$MTERP_OFFSET
(
offGlue_»tv®_z
, 
M‹½Glue
, 
»tv®
.
z
, 8)

190 
	$MTERP_OFFSET
(
offGlue_»tv®_i
, 
M‹½Glue
, 
»tv®
.
i
, 8)

191 
	$MTERP_OFFSET
(
offGlue_»tv®_j
, 
M‹½Glue
, 
»tv®
.
j
, 8)

192 
	$MTERP_OFFSET
(
offGlue_»tv®_l
, 
M‹½Glue
, 
»tv®
.
l
, 8)

195 
	$MTERP_OFFSET
(
offDvmDex_pResSŒšgs
, 
DvmDex
, 
pResSŒšgs
, 8)

196 
	$MTERP_OFFSET
(
offDvmDex_pResCÏs£s
, 
DvmDex
, 
pResCÏs£s
, 12)

197 
	$MTERP_OFFSET
(
offDvmDex_pResM‘hods
, 
DvmDex
, 
pResM‘hods
, 16)

198 
	$MTERP_OFFSET
(
offDvmDex_pResF›lds
, 
DvmDex
, 
pResF›lds
, 20)

199 
	$MTERP_OFFSET
(
offDvmDex_pIÁ”çûCache
, 
DvmDex
, 
pIÁ”çûCache
, 24)

202 #ifdeà
EASY_GDB


203 
	$MTERP_OFFSET
(
offSckSaveA»a_´evSave
, 
SckSaveA»a
, 
´evSave
, 0)

204 
	$MTERP_OFFSET
(
offSckSaveA»a_´evF¿me
, 
SckSaveA»a
, 
´evF¿me
, 4)

205 
	$MTERP_OFFSET
(
offSckSaveA»a_§vedPc
, 
SckSaveA»a
, 
§vedPc
, 8)

206 
	$MTERP_OFFSET
(
offSckSaveA»a_m‘hod
, 
SckSaveA»a
, 
m‘hod
, 12)

207 
	$MTERP_OFFSET
(
offSckSaveA»a_cu¼’tPc
, 
SckSaveA»a
, 
xŒa
.
cu¼’tPc
, 16)

208 
	`MTERP_OFFSET
(
offSckSaveA»a_loÿlRefCook›
, \

209 
SckSaveA»a
, 
xŒa
.
loÿlRefCook›
, 16)

210 
	$MTERP_OFFSET
(
offSckSaveA»a_»tuºAddr
, 
SckSaveA»a
, 
»tuºAddr
, 20)

211 
	$MTERP_SIZEOF
(
sizeofSckSaveA»a
, 
SckSaveA»a
, 24)

213 
	$MTERP_OFFSET
(
offSckSaveA»a_´evF¿me
, 
SckSaveA»a
, 
´evF¿me
, 0)

214 
	$MTERP_OFFSET
(
offSckSaveA»a_§vedPc
, 
SckSaveA»a
, 
§vedPc
, 4)

215 
	$MTERP_OFFSET
(
offSckSaveA»a_m‘hod
, 
SckSaveA»a
, 
m‘hod
, 8)

216 
	$MTERP_OFFSET
(
offSckSaveA»a_cu¼’tPc
, 
SckSaveA»a
, 
xŒa
.
cu¼’tPc
, 12)

217 
	`MTERP_OFFSET
(
offSckSaveA»a_loÿlRefCook›
, \

218 
SckSaveA»a
, 
xŒa
.
loÿlRefCook›
, 12)

219 
	$MTERP_OFFSET
(
offSckSaveA»a_»tuºAddr
, 
SckSaveA»a
, 
»tuºAddr
, 16)

220 
	$MTERP_SIZEOF
(
sizeofSckSaveA»a
, 
SckSaveA»a
, 20)

224 #ifdeà
PROFILE_FIELD_ACCESS


225 
	$MTERP_OFFSET
(
offIn¡F›ld_by‹Off£t
, 
In¡F›ld
, 
by‹Off£t
, 24)

227 
	$MTERP_OFFSET
(
offIn¡F›ld_by‹Off£t
, 
In¡F›ld
, 
by‹Off£t
, 16)

231 #ifdeà
WITH_TAINT_TRACKING


232 #ifdeà
PROFILE_FIELD_ACCESS


233 
	$MTERP_OFFSET
(
offSticF›ld_v®ue
, 
SticF›ld
, 
v®ue
, 24)

234 
	$MTERP_OFFSET
(
offSticF›ld_št
, 
SticF›ld
, 
št
, 32)

236 
	$MTERP_OFFSET
(
offSticF›ld_v®ue
, 
SticF›ld
, 
v®ue
, 16)

237 
	$MTERP_OFFSET
(
offSticF›ld_št
, 
SticF›ld
, 
št
, 24)

240 #ifdeà
PROFILE_FIELD_ACCESS


241 
	$MTERP_OFFSET
(
offSticF›ld_v®ue
, 
SticF›ld
, 
v®ue
, 24)

243 
	$MTERP_OFFSET
(
offSticF›ld_v®ue
, 
SticF›ld
, 
v®ue
, 16)

248 
	$MTERP_OFFSET
(
offM‘hod_şazz
, 
M‘hod
, 
şazz
, 0)

249 
	$MTERP_OFFSET
(
offM‘hod_acûssFÏgs
, 
M‘hod
, 
acûssFÏgs
, 4)

250 
	$MTERP_OFFSET
(
offM‘hod_m‘hodIndex
, 
M‘hod
, 
m‘hodIndex
, 8)

251 
	$MTERP_OFFSET
(
offM‘hod_»gi¡”sSize
, 
M‘hod
, 
»gi¡”sSize
, 10)

252 
	$MTERP_OFFSET
(
offM‘hod_outsSize
, 
M‘hod
, 
outsSize
, 12)

253 
	$MTERP_OFFSET
(
offM‘hod_Çme
, 
M‘hod
, 
Çme
, 16)

254 
	$MTERP_OFFSET
(
offM‘hod_š¢s
, 
M‘hod
, 
š¢s
, 32)

255 
	$MTERP_OFFSET
(
offM‘hod_ÇtiveFunc
, 
M‘hod
, 
ÇtiveFunc
, 40)

258 
	$MTERP_OFFSET
(
offIÆšeO³¿tiÚ_func
, 
IÆšeO³¿tiÚ
, 
func
, 0)

261 
	$MTERP_OFFSET
(
offTh»ad_¡ackOv”æowed
, 
Th»ad
, 
¡ackOv”æowed
, 40)

262 
	$MTERP_OFFSET
(
offTh»ad_curF¿me
, 
Th»ad
, 
curF¿me
, 44)

263 
	$MTERP_OFFSET
(
offTh»ad_exû±iÚ
, 
Th»ad
, 
exû±iÚ
, 48)

264 #ifdeà
USE_INDIRECT_REF


265 
	`MTERP_OFFSET
(
offTh»ad_jniLoÿl_tİCook›
, \

266 
Th»ad
, 
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
, 76)

268 
	`MTERP_OFFSET
(
offTh»ad_jniLoÿl_tİCook›
, \

269 
Th»ad
, 
jniLoÿlRefTabË
.
ÃxtEÁry
, 76)

273 
	$MTERP_OFFSET
(
offObjeù_şazz
, 
Objeù
, 
şazz
, 0)

276 
	$MTERP_OFFSET
(
offA¼ayObjeù_Ëngth
, 
A¼ayObjeù
, 
Ëngth
, 8)

277 #ifdeà
WITH_TAINT_TRACKING


278 
	$MTERP_OFFSET
(
offA¼ayObjeù_št
, 
A¼ayObjeù
, 
št
, 12)

281 #ifdeà
WITH_TAINT_TRACKING


284 #ifdeà
MTERP_NO_UNALIGN_64


285 
	$MTERP_OFFSET
(
offA¼ayObjeù_cÚ‹Ás
, 
A¼ayObjeù
, 
cÚ‹Ás
, 16)

287 
	$MTERP_OFFSET
(
offA¼ayObjeù_cÚ‹Ás
, 
A¼ayObjeù
, 
cÚ‹Ás
, 16)

292 #ifdeà
MTERP_NO_UNALIGN_64


293 
	$MTERP_OFFSET
(
offA¼ayObjeù_cÚ‹Ás
, 
A¼ayObjeù
, 
cÚ‹Ás
, 16)

295 
	$MTERP_OFFSET
(
offA¼ayObjeù_cÚ‹Ás
, 
A¼ayObjeù
, 
cÚ‹Ás
, 12)

301 
	$MTERP_OFFSET
(
offCÏssObjeù_desütÜ
, 
CÏssObjeù
, 
desütÜ
, 24)

302 
	$MTERP_OFFSET
(
offCÏssObjeù_acûssFÏgs
, 
CÏssObjeù
, 
acûssFÏgs
, 32)

303 
	$MTERP_OFFSET
(
offCÏssObjeù_pDvmDex
, 
CÏssObjeù
, 
pDvmDex
, 40)

304 
	$MTERP_OFFSET
(
offCÏssObjeù_¡©us
, 
CÏssObjeù
, 
¡©us
, 44)

305 
	$MTERP_OFFSET
(
offCÏssObjeù_su³r
, 
CÏssObjeù
, 
su³r
, 76)

306 
	$MTERP_OFFSET
(
offCÏssObjeù_vbËCouÁ
, 
CÏssObjeù
, 
vbËCouÁ
, 116)

307 
	$MTERP_OFFSET
(
offCÏssObjeù_vbË
, 
CÏssObjeù
, 
vbË
, 120)

310 
	$MTERP_SIZEOF
(
sizeofCÏssStus
, 
IÁ”pEÁry
, 
MTERP_SMALL_ENUM
)

311 
	$MTERP_CONSTANT
(
kIÁ”pEÁryIn¡r
, 0)

312 
	$MTERP_CONSTANT
(
kIÁ”pEÁryR‘uº
, 1)

313 
	$MTERP_CONSTANT
(
kIÁ”pEÁryThrow
, 2)

314 #ià
	`defšed
(
WITH_JIT
)

315 
	$MTERP_CONSTANT
(
kIÁ”pEÁryResume
, 3)

318 #ià
	`defšed
(
WITH_JIT
)

319 
	$MTERP_CONSTANT
(
kJ™Off
, 0)

320 
	$MTERP_CONSTANT
(
kJ™NÜm®
, 1)

321 
	$MTERP_CONSTANT
(
kJ™TS–eùReque¡
, 2)

322 
	$MTERP_CONSTANT
(
kJ™TS–eù
, 3)

323 
	$MTERP_CONSTANT
(
kJ™TS–eùAbÜt
, 4)

324 
	$MTERP_CONSTANT
(
kJ™TS–eùEnd
, 5)

325 
	$MTERP_CONSTANT
(
kJ™SšgËS‹p
, 6)

326 
	$MTERP_CONSTANT
(
kJ™SšgËS‹pEnd
, 7)

330 
	$MTERP_SIZEOF
(
sizeofCÏssStus
, 
CÏssStus
, 
MTERP_SMALL_ENUM
)

331 
	$MTERP_CONSTANT
(
CLASS_INITIALIZED
, 7)

334 
	$MTERP_SIZEOF
(
sizeofM‘hodTy³
, 
M‘hodTy³
, 
MTERP_SMALL_ENUM
)

335 
	$MTERP_CONSTANT
(
METHOD_DIRECT
, 1)

336 
	$MTERP_CONSTANT
(
METHOD_STATIC
, 2)

337 
	$MTERP_CONSTANT
(
METHOD_VIRTUAL
, 3)

338 
	$MTERP_CONSTANT
(
METHOD_INTERFACE
, 4)

341 
	$MTERP_CONSTANT
(
ACC_PRIVATE
, 0x0002)

342 
	$MTERP_CONSTANT
(
ACC_STATIC
, 0x0008)

343 
	$MTERP_CONSTANT
(
ACC_NATIVE
, 0x0100)

344 
	$MTERP_CONSTANT
(
ACC_INTERFACE
, 0x0200)

345 
	$MTERP_CONSTANT
(
ACC_ABSTRACT
, 0x0400)

348 
	$MTERP_CONSTANT
(
ALLOC_DONT_TRACK
, 0x02)

351 
	`MTERP_CONSTANT
(
OP_MOVE_EXCEPTION
, 0x0d)

	@mterp/cstubs/enddefs.c

3 #undeà
»tv®


4 #undeà
pc


5 #undeà
å


6 #undeà
curM‘hod


7 #undeà
m‘hodCÏssDex


8 #undeà
£lf


9 #undeà
debugT¿ckedRefS¹


11 #ifdeà
WITH_TAINT_TRACKING


12 #undeà
¹ašt


	@mterp/cstubs/entry.c

4 #undeà
H


5 
	#H
(
_İ
è
dvmM‹½_
##
	)
_op

6 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrs
)

8 #undeà
H


9 
	#H
(
_İ
è#_İ

	)

10 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrNames
)

12 
	~<£tjmp.h
>

20 
boŞ
 
	$dvmM‹½StdRun
(
M‹½Glue
* 
glue
)

22 
jmp_buf
 
jmpBuf
;

23 
chªgeIÁ”p
;

25 
glue
->
baPŒ
 = &
jmpBuf
;

31 
chªgeIÁ”p
 = 
	`£tjmp
(
jmpBuf
) -1;

32 ià(
chªgeIÁ”p
 >= 0) {

33 
Th»ad
* 
th»adS–f
 = 
	`dvmTh»adS–f
();

34 
	`LOGVV
("mterphreadid=%d„eturning %d\n",

35 
th»adS–f
->
th»adId
, 
chªgeIÁ”p
);

36  
chªgeIÁ”p
;

47 
glue
->
’ŒyPošt
) {

48 
kIÁ”pEÁryIn¡r
:

51 
kIÁ”pEÁryR‘uº
:

52 
	`dvmM‹½_»tuºFromM‘hod
(
glue
);

54 
kIÁ”pEÁryThrow
:

55 
	`dvmM‹½_exû±iÚThrown
(
glue
);

58 
	`dvmAbÜt
();

62 
Œue
) {

63 (*
	tHªdËr
)(
	tM‹½Glue
* 
	tglue
);

65 
u2
 
š¡
 = 
pc
[0];

66 
HªdËr
 
hªdËr
 = (HªdËrè
gDvmM‹½HªdËrs
[
š¡
 & 0xff];

67 
	`LOGVV
("handler %p %s\n",

68 
hªdËr
, (cÚ¡ *è
gDvmM‹½HªdËrNames
[
š¡
 & 0xff]);

69 (*
hªdËr
)(
glue
);

71 
	}
}

76 
	$dvmM‹½StdBa
(
M‹½Glue
* 
glue
, 
boŞ
 
chªgeIÁ”p
)

78 
jmp_buf
* 
pJmpBuf
 = 
glue
->
baPŒ
;

79 
	`lÚgjmp
(*
pJmpBuf
, (()
chªgeIÁ”p
)+1);

80 
	}
}

	@mterp/cstubs/stubdefs.c

2 
	#INTERP_TYPE
 
INTERP_STD


	)

3 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

4 
	#CHECK_TRACKED_REFS
(è(()0)

	)

11 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

12 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

14 
	#GOTO_TARGET
(
_rg‘
, ...) \

15 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

16 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

17 
u2
 
š¡
 = 
	`FETCH
(0); \

18 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

19 
SckSaveA»a
* 
debugSaveA»a
;

	)

21 
	#GOTO_TARGET_END
 }

	)

27 
	#»tv®
 
glue
->
»tv®


	)

28 
	#pc
 
glue
->
pc


	)

29 
	#å
 
glue
->
å


	)

30 
	#curM‘hod
 
glue
->
m‘hod


	)

31 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

32 
	#£lf
 
glue
->
£lf


	)

33 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

35 #ifdeà
WITH_TAINT_TRACKING


36 
	#¹ašt
 
glue
->
¹ašt


	)

40 
	#STUB_HACK
(
x
è
	)
x

48 
	#HANDLE_OPCODE
(
_İ
) \

49 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

50 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

51 
u2
 
š¡
 = 
	`FETCH
(0);

	)

53 
	#OP_END
 }

	)

59 
	#FINISH
(
_off£t
) { \

60 
	`ADJUST_PC
(
_off£t
); \

61 
	`CHECK_DEBUG_AND_PROF
(); \

62 
	`CHECK_TRACKED_REFS
(); \

64 }

	)

73 
	#GOTO_exû±iÚThrown
() \

75 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

77 } 
çl£
)

	)

79 
	#GOTO_»tuºFromM‘hod
() \

81 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

83 } 
çl£
)

	)

85 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

87 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

89 } 
çl£
)

	)

91 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

93 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

94 
_v¤c1
, 
_vd¡
); \

96 } 
çl£
)

	)

102 
	#GOTO_ba
() \

103 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

104 
	#GOTO_ba_sw™ch
() \

105 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

113 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

114 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

115 
	`EXPORT_PC
(); \

116 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

118 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

119 
	`ADJUST_PC
(
_pÿdj
); \

120 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

121 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

122 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

123 
	`GOTO_ba_sw™ch
(); \

125 }

	)

	@mterp/out/InterpC-allstubs.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

590 
	#INTERP_TYPE
 
INTERP_STD


	)

591 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

592 
	#CHECK_TRACKED_REFS
(è(()0)

	)

599 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

600 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

602 
	#GOTO_TARGET
(
_rg‘
, ...) \

603 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

604 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

605 
u2
 
š¡
 = 
	`FETCH
(0); \

606 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

607 
SckSaveA»a
* 
debugSaveA»a
;

	)

609 
	#GOTO_TARGET_END
 }

	)

615 
	#»tv®
 
glue
->
»tv®


	)

616 
	#pc
 
glue
->
pc


	)

617 
	#å
 
glue
->
å


	)

618 
	#curM‘hod
 
glue
->
m‘hod


	)

619 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

620 
	#£lf
 
glue
->
£lf


	)

621 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

623 #ifdeà
WITH_TAINT_TRACKING


624 
	#¹ašt
 
glue
->
¹ašt


	)

628 
	#STUB_HACK
(
x
è
	)
x

636 
	#HANDLE_OPCODE
(
_İ
) \

637 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

638 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

639 
u2
 
š¡
 = 
	`FETCH
(0);

	)

641 
	#OP_END
 }

	)

647 
	#FINISH
(
_off£t
) { \

648 
	`ADJUST_PC
(
_off£t
); \

649 
	`CHECK_DEBUG_AND_PROF
(); \

650 
	`CHECK_TRACKED_REFS
(); \

652 }

	)

661 
	#GOTO_exû±iÚThrown
() \

663 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

665 } 
çl£
)

	)

667 
	#GOTO_»tuºFromM‘hod
() \

669 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

671 } 
çl£
)

	)

673 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

675 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

677 } 
çl£
)

	)

679 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

681 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

682 
_v¤c1
, 
_vd¡
); \

684 } 
çl£
)

	)

690 
	#GOTO_ba
() \

691 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

692 
	#GOTO_ba_sw™ch
() \

693 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

701 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

702 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

706 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

707 
	`ADJUST_PC
(
_pÿdj
); \

708 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

709 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

710 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

711 
	`GOTO_ba_sw™ch
(); \

713 }

	)

718 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

719 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

720 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

721 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

722 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

723 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

724 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

725 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

726 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

727 
u2
 
couÁ
, u2 
»gs
);

728 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

729 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

743 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

744 
	`HANDLE_OPCODE
(
_İcode
 ) \

745 
vd¡
 = 
	`INST_A
(
š¡
); \

746 
v¤c1
 = 
	`INST_B
(
š¡
); \

747 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

748 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

749 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

751 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

752 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

754 
	`FINISH
(1);

	)

756 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

757 
_tovty³
, 
_tÜty³
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
_äomvty³
 
v®
; \

762 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

763 
vd¡
 = 
	`INST_A
(
š¡
); \

764 
v¤c1
 = 
	`INST_B
(
š¡
); \

765 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

766 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

767 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

768 
štMax
 = ~
štMš
; \

769 
»suÉ
 = (
_tovty³
è
v®
; \

770 ià(
v®
 >ğ
štMax
) \

771 
»suÉ
 = 
štMax
; \

772 ià(
v®
 <ğ
štMš
) \

773 
»suÉ
 = 
štMš
; \

774 ià(
v®
 != val) \

775 
»suÉ
 = 0; \

777 
»suÉ
 = (
_tovty³
è
v®
; \

778 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

780 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

781 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

784 
	`FINISH
(1);

	)

786 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

787 
	`HANDLE_OPCODE
(
_İcode
 ) \

788 
vd¡
 = 
	`INST_A
(
š¡
); \

789 
v¤c1
 = 
	`INST_B
(
š¡
); \

790 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

791 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

793 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

795 
	`FINISH
(1);

	)

798 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

799 
	`HANDLE_OPCODE
(
_İcode
 ) \

801 
»suÉ
; \

802 
u2
 
»gs
; \

803 
_v¬Ty³
 
v®1
, 
v®2
; \

804 
vd¡
 = 
	`INST_AA
(
š¡
); \

805 
»gs
 = 
	`FETCH
(1); \

806 
v¤c1
 = 
»gs
 & 0xff; \

807 
v¤c2
 = 
»gs
 >> 8; \

808 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

809 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

810 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

811 ià(
v®1
 =ğ
v®2
) \

812 
»suÉ
 = 0; \

813 ià(
v®1
 < 
v®2
) \

814 
»suÉ
 = -1; \

815 ià(
v®1
 > 
v®2
) \

816 
»suÉ
 = 1; \

818 
»suÉ
 = (
_ÇnV®
); \

819 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

820 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

822 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

825 
	`FINISH
(2);

	)

827 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

828 
	`HANDLE_OPCODE
(
_İcode
 ) \

829 
v¤c1
 = 
	`INST_A
(
š¡
); \

830 
v¤c2
 = 
	`INST_B
(
š¡
); \

831 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

832 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

833 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

834 
b¿nchOff£t
); \

835 
	`ILOGV
("> branchaken"); \

836 ià(
b¿nchOff£t
 < 0) \

837 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

838 
	`FINISH
(
b¿nchOff£t
); \

840 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

841 
	`FINISH
(2); \

842 }

	)

844 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

845 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
v¤c1
 = 
	`INST_AA
(
š¡
); \

847 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

848 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

849 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

850 
	`ILOGV
("> branchaken"); \

851 ià(
b¿nchOff£t
 < 0) \

852 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

853 
	`FINISH
(
b¿nchOff£t
); \

855 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

856 
	`FINISH
(2); \

857 }

	)

859 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

860 
	`HANDLE_OPCODE
(
_İcode
 ) \

861 
vd¡
 = 
	`INST_A
(
š¡
); \

862 
v¤c1
 = 
	`INST_B
(
š¡
); \

863 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

864 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

866 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

868 
	`FINISH
(1);

	)

870 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

871 
	`HANDLE_OPCODE
(
_İcode
 ) \

873 
u2
 
¤cRegs
; \

874 
vd¡
 = 
	`INST_AA
(
š¡
); \

875 
¤cRegs
 = 
	`FETCH
(1); \

876 
v¤c1
 = 
¤cRegs
 & 0xff; \

877 
v¤c2
 = 
¤cRegs
 >> 8; \

878 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

879 ià(
_chkdiv
 != 0) { \

880 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

881 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

882 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

883 ià(
£cÚdV®
 == 0) { \

884 
	`EXPORT_PC
(); \

885 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

887 
	`GOTO_exû±iÚThrown
(); \

889 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

890 ià(
_chkdiv
 == 1) \

891 
»suÉ
 = 
fœ¡V®
; \

893 
»suÉ
 = 0; \

895 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

897 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

900 
	`SET_REGISTER
(
vd¡
, \

901 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

904 
	`SET_REGISTER_TAINT
(
vd¡
, \

905 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

908 
	`FINISH
(2);

	)

910 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

911 
	`HANDLE_OPCODE
(
_İcode
 ) \

913 
u2
 
¤cRegs
; \

914 
vd¡
 = 
	`INST_AA
(
š¡
); \

915 
¤cRegs
 = 
	`FETCH
(1); \

916 
v¤c1
 = 
¤cRegs
 & 0xff; \

917 
v¤c2
 = 
¤cRegs
 >> 8; \

918 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

919 
	`SET_REGISTER
(
vd¡
, \

920 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

922 
	`SET_REGISTER_TAINT
(
vd¡
, \

923 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
v¤c2
 = 
	`FETCH
(1); \

933 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

934 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

935 ià(
_chkdiv
 != 0) { \

936 
s4
 
fœ¡V®
, 
»suÉ
; \

937 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

938 ià((
s2
è
v¤c2
 == 0) { \

939 
	`EXPORT_PC
(); \

940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

942 
	`GOTO_exû±iÚThrown
(); \

944 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

946 ià(
_chkdiv
 == 1) \

947 
»suÉ
 = 
fœ¡V®
; \

949 
»suÉ
 = 0; \

951 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

953 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

956 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

959 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

961 
	`FINISH
(2);

	)

963 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

964 
	`HANDLE_OPCODE
(
_İcode
 ) \

966 
u2
 
l™Info
; \

967 
vd¡
 = 
	`INST_AA
(
š¡
); \

968 
l™Info
 = 
	`FETCH
(1); \

969 
v¤c1
 = 
l™Info
 & 0xff; \

970 
v¤c2
 = 
l™Info
 >> 8; \

971 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

972 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

973 ià(
_chkdiv
 != 0) { \

974 
s4
 
fœ¡V®
, 
»suÉ
; \

975 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

976 ià((
s1
è
v¤c2
 == 0) { \

977 
	`EXPORT_PC
(); \

978 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

980 
	`GOTO_exû±iÚThrown
(); \

982 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

983 ià(
_chkdiv
 == 1) \

984 
»suÉ
 = 
fœ¡V®
; \

986 
»suÉ
 = 0; \

988 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

990 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

992 
	`SET_REGISTER
(
vd¡
, \

993 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

999 
	`FINISH
(2);

	)

1001 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1002 
	`HANDLE_OPCODE
(
_İcode
 ) \

1004 
u2
 
l™Info
; \

1005 
vd¡
 = 
	`INST_AA
(
š¡
); \

1006 
l™Info
 = 
	`FETCH
(1); \

1007 
v¤c1
 = 
l™Info
 & 0xff; \

1008 
v¤c2
 = 
l™Info
 >> 8; \

1009 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

1010 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1011 
	`SET_REGISTER
(
vd¡
, \

1012 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

1014 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

1017 
	`FINISH
(2);

	)

1019 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1020 
	`HANDLE_OPCODE
(
_İcode
 ) \

1021 
vd¡
 = 
	`INST_A
(
š¡
); \

1022 
v¤c1
 = 
	`INST_B
(
š¡
); \

1023 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1024 ià(
_chkdiv
 != 0) { \

1025 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1026 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1027 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1028 ià(
£cÚdV®
 == 0) { \

1029 
	`EXPORT_PC
(); \

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1032 
	`GOTO_exû±iÚThrown
(); \

1034 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1035 ià(
_chkdiv
 == 1) \

1036 
»suÉ
 = 
fœ¡V®
; \

1038 
»suÉ
 = 0; \

1040 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1042 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1044 
	`SET_REGISTER
(
vd¡
, \

1045 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1048 
	`SET_REGISTER_TAINT
(
vd¡
, \

1049 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1051 
	`FINISH
(1);

	)

1053 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1054 
	`HANDLE_OPCODE
(
_İcode
 ) \

1055 
vd¡
 = 
	`INST_A
(
š¡
); \

1056 
v¤c1
 = 
	`INST_B
(
š¡
); \

1057 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1058 
	`SET_REGISTER
(
vd¡
, \

1059 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1061 
	`SET_REGISTER_TAINT
(
vd¡
, \

1062 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1064 
	`FINISH
(1);

	)

1066 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1067 
	`HANDLE_OPCODE
(
_İcode
 ) \

1069 
u2
 
¤cRegs
; \

1070 
vd¡
 = 
	`INST_AA
(
š¡
); \

1071 
¤cRegs
 = 
	`FETCH
(1); \

1072 
v¤c1
 = 
¤cRegs
 & 0xff; \

1073 
v¤c2
 = 
¤cRegs
 >> 8; \

1074 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1075 ià(
_chkdiv
 != 0) { \

1076 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1077 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1078 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1079 ià(
£cÚdV®
 == 0LL) { \

1080 
	`EXPORT_PC
(); \

1081 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1083 
	`GOTO_exû±iÚThrown
(); \

1085 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1086 
£cÚdV®
 == -1LL) \

1088 ià(
_chkdiv
 == 1) \

1089 
»suÉ
 = 
fœ¡V®
; \

1091 
»suÉ
 = 0; \

1093 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1095 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1097 
	`SET_REGISTER_WIDE
(
vd¡
, \

1098 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1101 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1102 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1105 
	`FINISH
(2);

	)

1107 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1108 
	`HANDLE_OPCODE
(
_İcode
 ) \

1110 
u2
 
¤cRegs
; \

1111 
vd¡
 = 
	`INST_AA
(
š¡
); \

1112 
¤cRegs
 = 
	`FETCH
(1); \

1113 
v¤c1
 = 
¤cRegs
 & 0xff; \

1114 
v¤c2
 = 
¤cRegs
 >> 8; \

1115 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1116 
	`SET_REGISTER_WIDE
(
vd¡
, \

1117 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1119 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1120 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1123 
	`FINISH
(2);

	)

1125 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1126 
	`HANDLE_OPCODE
(
_İcode
 ) \

1127 
vd¡
 = 
	`INST_A
(
š¡
); \

1128 
v¤c1
 = 
	`INST_B
(
š¡
); \

1129 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1130 ià(
_chkdiv
 != 0) { \

1131 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1132 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1133 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1134 ià(
£cÚdV®
 == 0LL) { \

1135 
	`EXPORT_PC
(); \

1136 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1138 
	`GOTO_exû±iÚThrown
(); \

1140 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1141 
£cÚdV®
 == -1LL) \

1143 ià(
_chkdiv
 == 1) \

1144 
»suÉ
 = 
fœ¡V®
; \

1146 
»suÉ
 = 0; \

1148 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1150 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1152 
	`SET_REGISTER_WIDE
(
vd¡
, \

1153 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1156 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1157 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1159 
	`FINISH
(1);

	)

1161 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1162 
	`HANDLE_OPCODE
(
_İcode
 ) \

1163 
vd¡
 = 
	`INST_A
(
š¡
); \

1164 
v¤c1
 = 
	`INST_B
(
š¡
); \

1165 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1166 
	`SET_REGISTER_WIDE
(
vd¡
, \

1167 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1170 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1172 
	`FINISH
(1);

	)

1174 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1175 
	`HANDLE_OPCODE
(
_İcode
 ) \

1177 
u2
 
¤cRegs
; \

1178 
vd¡
 = 
	`INST_AA
(
š¡
); \

1179 
¤cRegs
 = 
	`FETCH
(1); \

1180 
v¤c1
 = 
¤cRegs
 & 0xff; \

1181 
v¤c2
 = 
¤cRegs
 >> 8; \

1182 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1183 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1184 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1186 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1187 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1190 
	`FINISH
(2);

	)

1192 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1193 
	`HANDLE_OPCODE
(
_İcode
 ) \

1195 
u2
 
¤cRegs
; \

1196 
vd¡
 = 
	`INST_AA
(
š¡
); \

1197 
¤cRegs
 = 
	`FETCH
(1); \

1198 
v¤c1
 = 
¤cRegs
 & 0xff; \

1199 
v¤c2
 = 
¤cRegs
 >> 8; \

1200 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1208 
	`FINISH
(2);

	)

1210 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1211 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
vd¡
 = 
	`INST_A
(
š¡
); \

1213 
v¤c1
 = 
	`INST_B
(
š¡
); \

1214 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1215 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1216 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1218 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1219 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1221 
	`FINISH
(1);

	)

1223 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1224 
	`HANDLE_OPCODE
(
_İcode
 ) \

1225 
vd¡
 = 
	`INST_A
(
š¡
); \

1226 
v¤c1
 = 
	`INST_B
(
š¡
); \

1227 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1228 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1229 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1231 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1232 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1234 
	`FINISH
(1);

	)

1236 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1237 
	`HANDLE_OPCODE
(
_İcode
 ) \

1239 
A¼ayObjeù
* 
¬¿yObj
; \

1240 
u2
 
¬¿yInfo
; \

1241 
	`EXPORT_PC
(); \

1242 
vd¡
 = 
	`INST_AA
(
š¡
); \

1243 
¬¿yInfo
 = 
	`FETCH
(1); \

1244 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1245 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1246 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1248 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1249 
	`GOTO_exû±iÚThrown
(); \

1250 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1251 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1252 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1253 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1254 
NULL
); \

1255 
	`GOTO_exû±iÚThrown
(); \

1257 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1258 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1260 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1261 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1263 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1265 
	`FINISH
(2);

	)

1267 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1268 
	`HANDLE_OPCODE
(
_İcode
 ) \

1270 
A¼ayObjeù
* 
¬¿yObj
; \

1271 
u2
 
¬¿yInfo
; \

1272 
	`EXPORT_PC
(); \

1273 
vd¡
 = 
	`INST_AA
(
š¡
); \

1274 
¬¿yInfo
 = 
	`FETCH
(1); \

1275 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1276 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1277 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1278 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1279 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1280 
	`GOTO_exû±iÚThrown
(); \

1281 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1282 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1283 
NULL
); \

1284 
	`GOTO_exû±iÚThrown
(); \

1286 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1287 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1288 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1290 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1291 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1292 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1295 
	`FINISH
(2);

	)

1314 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1315 
	`HANDLE_OPCODE
(
_İcode
 ) \

1317 
In¡F›ld
* 
if›ld
; \

1318 
Objeù
* 
obj
; \

1319 
	`EXPORT_PC
(); \

1320 
vd¡
 = 
	`INST_A
(
š¡
); \

1321 
v¤c1
 = 
	`INST_B
(
š¡
); \

1322 
»f
 = 
	`FETCH
(1); \

1323 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1324 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1325 ià(!
	`checkFÜNuÎ
(
obj
)) \

1326 
	`GOTO_exû±iÚThrown
(); \

1327 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1328 ià(
if›ld
 =ğ
NULL
) { \

1329 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1330 ià(
if›ld
 =ğ
NULL
) \

1331 
	`GOTO_exû±iÚThrown
(); \

1333 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1334 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1335 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1336 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1339 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1340 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1341 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1344 
	`FINISH
(2);

	)

1346 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1347 
	`HANDLE_OPCODE
(
_İcode
 ) \

1349 
Objeù
* 
obj
; \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1354 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1355 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1356 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1357 
	`GOTO_exû±iÚThrown
(); \

1358 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1359 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1360 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1364 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1365 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1366 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1369 
	`FINISH
(2);

	)

1371 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1372 
	`HANDLE_OPCODE
(
_İcode
 ) \

1374 
In¡F›ld
* 
if›ld
; \

1375 
Objeù
* 
obj
; \

1376 
	`EXPORT_PC
(); \

1377 
vd¡
 = 
	`INST_A
(
š¡
); \

1378 
v¤c1
 = 
	`INST_B
(
š¡
); \

1379 
»f
 = 
	`FETCH
(1); \

1380 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1381 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1382 ià(!
	`checkFÜNuÎ
(
obj
)) \

1383 
	`GOTO_exû±iÚThrown
(); \

1384 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1385 ià(
if›ld
 =ğ
NULL
) { \

1386 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1387 ià(
if›ld
 =ğ
NULL
) \

1388 
	`GOTO_exû±iÚThrown
(); \

1390 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1391 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1392 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1393 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1394 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1396 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1397 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1400 
	`FINISH
(2);

	)

1402 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1403 
	`HANDLE_OPCODE
(
_İcode
 ) \

1405 
Objeù
* 
obj
; \

1406 
vd¡
 = 
	`INST_A
(
š¡
); \

1407 
v¤c1
 = 
	`INST_B
(
š¡
); \

1408 
»f
 = 
	`FETCH
(1); \

1409 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1410 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1411 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1412 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1413 
	`GOTO_exû±iÚThrown
(); \

1414 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1415 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1416 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1420 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1421 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1424 
	`FINISH
(2);

	)

1426 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1427 
	`HANDLE_OPCODE
(
_İcode
 ) \

1429 
SticF›ld
* 
sf›ld
; \

1430 
vd¡
 = 
	`INST_AA
(
š¡
); \

1431 
»f
 = 
	`FETCH
(1); \

1432 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1433 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) { \

1435 
	`EXPORT_PC
(); \

1436 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1437 ià(
sf›ld
 =ğ
NULL
) \

1438 
	`GOTO_exû±iÚThrown
(); \

1440 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1441 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1442 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1443 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1445 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1448 
	`FINISH
(2);

	)

1450 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1451 
	`HANDLE_OPCODE
(
_İcode
 ) \

1453 
SticF›ld
* 
sf›ld
; \

1454 
vd¡
 = 
	`INST_AA
(
š¡
); \

1455 
»f
 = 
	`FETCH
(1); \

1456 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1457 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1458 ià(
sf›ld
 =ğ
NULL
) { \

1459 
	`EXPORT_PC
(); \

1460 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1461 ià(
sf›ld
 =ğ
NULL
) \

1462 
	`GOTO_exû±iÚThrown
(); \

1464 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1465 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1466 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1467 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1469 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1470 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1473 
	`FINISH
(2);

	)

1477 
	$HANDLE_OPCODE
(
OP_NOP
)

1478 
	`FINISH
(1);

1479 
OP_END


1482 
	$HANDLE_OPCODE
(
OP_MOVE
 )

1483 
vd¡
 = 
	`INST_A
(
š¡
);

1484 
v¤c1
 = 
	`INST_B
(
š¡
);

1485 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1486 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1487 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1488 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1490 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1492 
	`FINISH
(1);

1493 
OP_END


1496 
	$HANDLE_OPCODE
(
OP_MOVE_FROM16
 )

1497 
vd¡
 = 
	`INST_AA
(
š¡
);

1498 
v¤c1
 = 
	`FETCH
(1);

1499 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1500 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1501 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1502 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1504 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1506 
	`FINISH
(2);

1507 
OP_END


1510 
	$HANDLE_OPCODE
(
OP_MOVE_16
 )

1511 
vd¡
 = 
	`FETCH
(1);

1512 
v¤c1
 = 
	`FETCH
(2);

1513 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1514 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1515 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1516 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1518 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1520 
	`FINISH
(3);

1521 
OP_END


1524 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

1527 
vd¡
 = 
	`INST_A
(
š¡
);

1528 
v¤c1
 = 
	`INST_B
(
š¡
);

1529 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1530 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1531 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1533 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1535 
	`FINISH
(1);

1536 
OP_END


1539 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

1540 
vd¡
 = 
	`INST_AA
(
š¡
);

1541 
v¤c1
 = 
	`FETCH
(1);

1542 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1543 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1544 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1546 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1548 
	`FINISH
(2);

1549 
OP_END


1552 
	$HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

1553 
vd¡
 = 
	`FETCH
(1);

1554 
v¤c1
 = 
	`FETCH
(2);

1555 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1556 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1557 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1559 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1561 
	`FINISH
(3);

1562 
OP_END


1566 
	$HANDLE_OPCODE
(
OP_MOVE_OBJECT
 )

1567 
vd¡
 = 
	`INST_A
(
š¡
);

1568 
v¤c1
 = 
	`INST_B
(
š¡
);

1569 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1570 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1571 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1572 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1574 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1576 
	`FINISH
(1);

1577 
OP_END


1582 
	$HANDLE_OPCODE
(
OP_MOVE_OBJECT_FROM16
 )

1583 
vd¡
 = 
	`INST_AA
(
š¡
);

1584 
v¤c1
 = 
	`FETCH
(1);

1585 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1586 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1587 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1588 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1590 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1592 
	`FINISH
(2);

1593 
OP_END


1598 
	$HANDLE_OPCODE
(
OP_MOVE_OBJECT_16
 )

1599 
vd¡
 = 
	`FETCH
(1);

1600 
v¤c1
 = 
	`FETCH
(2);

1601 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1602 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1603 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1604 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1606 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1608 
	`FINISH
(3);

1609 
OP_END


1613 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT
 )

1614 
vd¡
 = 
	`INST_AA
(
š¡
);

1615 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1616 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1617 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1618 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1620 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

1622 
	`FINISH
(1);

1623 
OP_END


1626 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

1627 
vd¡
 = 
	`INST_AA
(
š¡
);

1628 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

1629 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

1631 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_RETURN_TAINT
());

1633 
	`FINISH
(1);

1634 
OP_END


1638 
	$HANDLE_OPCODE
(
OP_MOVE_RESULT_OBJECT
 )

1639 
vd¡
 = 
	`INST_AA
(
š¡
);

1640 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1641 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1642 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1643 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1645 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

1647 
	`FINISH
(1);

1648 
OP_END


1652 
	$HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

1653 
vd¡
 = 
	`INST_AA
(
š¡
);

1654 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

1655 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

1656 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

1658 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1660 
	`dvmCË¬Exû±iÚ
(
£lf
);

1661 
	`FINISH
(1);

1662 
OP_END


1665 
	$HANDLE_OPCODE
(
OP_RETURN_VOID
 )

1666 
	`ILOGV
("|return-void");

1667 #iâdeà
NDEBUG


1668 
»tv®
.
j
 = 0xababababULL;

1671 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

1673 
	`GOTO_»tuºFromM‘hod
();

1674 
OP_END


1677 
	$HANDLE_OPCODE
(
OP_RETURN
 )

1678 
v¤c1
 = 
	`INST_AA
(
š¡
);

1679 
	`ILOGV
("|return%s v%d",

1680 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1681 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1683 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

1685 
	`GOTO_»tuºFromM‘hod
();

1686 
OP_END


1689 
	$HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

1690 
v¤c1
 = 
	`INST_AA
(
š¡
);

1691 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

1692 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

1694 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1696 
	`GOTO_»tuºFromM‘hod
();

1697 
OP_END


1701 
	$HANDLE_OPCODE
(
OP_RETURN_OBJECT
 )

1702 
v¤c1
 = 
	`INST_AA
(
š¡
);

1703 
	`ILOGV
("|return%s v%d",

1704 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1705 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1707 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

1709 
	`GOTO_»tuºFromM‘hod
();

1710 
OP_END


1714 
	$HANDLE_OPCODE
(
OP_CONST_4
 )

1716 
s4
 
tmp
;

1718 
vd¡
 = 
	`INST_A
(
š¡
);

1719 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

1720 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

1721 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1723 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1725 
	}
}

1726 
FINISH
(1);

1727 
OP_END


1730 
	$HANDLE_OPCODE
(
OP_CONST_16
 )

1731 
vd¡
 = 
	`INST_AA
(
š¡
);

1732 
v¤c1
 = 
	`FETCH
(1);

1733 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1734 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

1736 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1738 
	`FINISH
(2);

1739 
OP_END


1742 
	$HANDLE_OPCODE
(
OP_CONST
 )

1744 
u4
 
tmp
;

1746 
vd¡
 = 
	`INST_AA
(
š¡
);

1747 
tmp
 = 
	`FETCH
(1);

1748 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1749 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

1750 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1752 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1754 
	}
}

1755 
FINISH
(3);

1756 
OP_END


1759 
	$HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

1760 
vd¡
 = 
	`INST_AA
(
š¡
);

1761 
v¤c1
 = 
	`FETCH
(1);

1762 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

1763 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

1765 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1767 
	`FINISH
(2);

1768 
OP_END


1771 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

1772 
vd¡
 = 
	`INST_AA
(
š¡
);

1773 
v¤c1
 = 
	`FETCH
(1);

1774 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1775 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

1777 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1779 
	`FINISH
(2);

1780 
OP_END


1783 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

1785 
u4
 
tmp
;

1787 
vd¡
 = 
	`INST_AA
(
š¡
);

1788 
tmp
 = 
	`FETCH
(1);

1789 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1790 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

1791 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

1793 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1795 
	}
}

1796 
FINISH
(3);

1797 
OP_END


1800 
	$HANDLE_OPCODE
(
OP_CONST_WIDE
 )

1802 
u8
 
tmp
;

1804 
vd¡
 = 
	`INST_AA
(
š¡
);

1805 
tmp
 = 
	`FETCH
(1);

1806 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

1807 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

1808 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

1809 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

1810 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

1812 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1814 
	}
}

1815 
FINISH
(5);

1816 
OP_END


1819 
	$HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

1820 
vd¡
 = 
	`INST_AA
(
š¡
);

1821 
v¤c1
 = 
	`FETCH
(1);

1822 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

1823 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

1825 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1827 
	`FINISH
(2);

1828 
OP_END


1831 
	$HANDLE_OPCODE
(
OP_CONST_STRING
 )

1833 
SŒšgObjeù
* 
¡rObj
;

1835 
vd¡
 = 
	`INST_AA
(
š¡
);

1836 
»f
 = 
	`FETCH
(1);

1837 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

1838 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

1839 ià(
¡rObj
 =ğ
NULL
) {

1840 
	`EXPORT_PC
();

1841 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

1842 ià(
¡rObj
 =ğ
NULL
)

1843 
	`GOTO_exû±iÚThrown
();

1845 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1847 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1849 
	}
}

1850 
FINISH
(2);

1851 
OP_END


1854 
	$HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

1856 
SŒšgObjeù
* 
¡rObj
;

1857 
u4
 
tmp
;

1859 
vd¡
 = 
	`INST_AA
(
š¡
);

1860 
tmp
 = 
	`FETCH
(1);

1861 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1862 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

1863 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

1864 ià(
¡rObj
 =ğ
NULL
) {

1865 
	`EXPORT_PC
();

1866 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

1867 ià(
¡rObj
 =ğ
NULL
)

1868 
	`GOTO_exû±iÚThrown
();

1870 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1872 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1874 
	}
}

1875 
FINISH
(3);

1876 
OP_END


1879 
	$HANDLE_OPCODE
(
OP_CONST_CLASS
 )

1881 
CÏssObjeù
* 
şazz
;

1883 
vd¡
 = 
	`INST_AA
(
š¡
);

1884 
»f
 = 
	`FETCH
(1);

1885 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

1886 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1887 ià(
şazz
 =ğ
NULL
) {

1888 
	`EXPORT_PC
();

1889 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

1890 ià(
şazz
 =ğ
NULL
)

1891 
	`GOTO_exû±iÚThrown
();

1893 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

1895 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1897 
	}
}

1898 
FINISH
(2);

1899 
OP_END


1902 
	$HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

1904 
Objeù
* 
obj
;

1906 
v¤c1
 = 
	`INST_AA
(
š¡
);

1907 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

1908 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

1909 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1910 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

1911 
	`GOTO_exû±iÚThrown
();

1912 
	`ILOGV
("+†ockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

1913 
	`EXPORT_PC
();

1914 
	`dvmLockObjeù
(
£lf
, 
obj
);

1915 #ifdeà
WITH_DEADLOCK_PREDICTION


1916 ià(
	`dvmCheckExû±iÚ
(
£lf
))

1917 
	`GOTO_exû±iÚThrown
();

1919 
	}
}

1920 
FINISH
(1);

1921 
OP_END


1924 
	$HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

1926 
Objeù
* 
obj
;

1928 
	`EXPORT_PC
();

1930 
v¤c1
 = 
	`INST_AA
(
š¡
);

1931 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

1932 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

1933 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1934 ià(!
	`checkFÜNuÎ
(
obj
)) {

1942 
	`ADJUST_PC
(1);

1943 
	`GOTO_exû±iÚThrown
();

1945 
	`ILOGV
("+ uÆockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

1946 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

1947 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1948 
	`ADJUST_PC
(1);

1949 
	`GOTO_exû±iÚThrown
();

1951 
	}
}

1952 
FINISH
(1);

1953 
OP_END


1956 
	$HANDLE_OPCODE
(
OP_CHECK_CAST
 )

1958 
CÏssObjeù
* 
şazz
;

1959 
Objeù
* 
obj
;

1961 
	`EXPORT_PC
();

1963 
v¤c1
 = 
	`INST_AA
(
š¡
);

1964 
»f
 = 
	`FETCH
(1);

1965 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

1967 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

1968 ià(
obj
 !ğ
NULL
) {

1969 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

1970 ià(!
	`checkFÜNuÎ
(
obj
))

1971 
	`GOTO_exû±iÚThrown
();

1973 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1974 ià(
şazz
 =ğ
NULL
) {

1975 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

1976 ià(
şazz
 =ğ
NULL
)

1977 
	`GOTO_exû±iÚThrown
();

1979 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

1980 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

1981 "Ljava/Ïng/CÏssCa¡Exû±iÚ;", 
obj
->
şazz
->
desütÜ
);

1982 
	`GOTO_exû±iÚThrown
();

1985 
	}
}

1986 
FINISH
(2);

1987 
OP_END


1990 
	$HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

1992 
CÏssObjeù
* 
şazz
;

1993 
Objeù
* 
obj
;

1995 
vd¡
 = 
	`INST_A
(
š¡
);

1996 
v¤c1
 = 
	`INST_B
(
š¡
);

1997 
»f
 = 
	`FETCH
(1);

1998 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

2000 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2001 ià(
obj
 =ğ
NULL
) {

2002 
	`SET_REGISTER
(
vd¡
, 0);

2004 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

2005 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2006 
	`GOTO_exû±iÚThrown
();

2008 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2009 ià(
şazz
 =ğ
NULL
) {

2010 
	`EXPORT_PC
();

2011 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

2012 ià(
şazz
 =ğ
NULL
)

2013 
	`GOTO_exû±iÚThrown
();

2015 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

2017 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2020 
	}
}

2021 
FINISH
(2);

2022 
OP_END


2025 
	$HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

2027 
A¼ayObjeù
* 
¬¿yObj
;

2029 
vd¡
 = 
	`INST_A
(
š¡
);

2030 
v¤c1
 = 
	`INST_B
(
š¡
);

2031 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2032 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

2033 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

2034 
	`GOTO_exû±iÚThrown
();

2036 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

2038 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2040 
	}
}

2041 
FINISH
(1);

2042 
OP_END


2045 
	$HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

2047 
CÏssObjeù
* 
şazz
;

2048 
Objeù
* 
ÃwObj
;

2050 
	`EXPORT_PC
();

2052 
vd¡
 = 
	`INST_AA
(
š¡
);

2053 
»f
 = 
	`FETCH
(1);

2054 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

2055 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2056 ià(
şazz
 =ğ
NULL
) {

2057 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

2058 ià(
şazz
 =ğ
NULL
)

2059 
	`GOTO_exû±iÚThrown
();

2062 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

2063 
	`GOTO_exû±iÚThrown
();

2073 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2074 ià(
ÃwObj
 =ğ
NULL
)

2075 
	`GOTO_exû±iÚThrown
();

2076 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

2078 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2080 
	}
}

2081 
FINISH
(2);

2082 
OP_END


2085 
	$HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

2087 
CÏssObjeù
* 
¬¿yCÏss
;

2088 
A¼ayObjeù
* 
ÃwA¼ay
;

2089 
s4
 
Ëngth
;

2091 
	`EXPORT_PC
();

2093 
vd¡
 = 
	`INST_A
(
š¡
);

2094 
v¤c1
 = 
	`INST_B
(
š¡
);

2095 
»f
 = 
	`FETCH
(1);

2096 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

2097 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

2098 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

2099 ià(
Ëngth
 < 0) {

2100 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Neg©iveA¼aySizeExû±iÚ;", 
NULL
);

2101 
	`GOTO_exû±iÚThrown
();

2103 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2104 ià(
¬¿yCÏss
 =ğ
NULL
) {

2105 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

2106 ià(
¬¿yCÏss
 =ğ
NULL
)

2107 
	`GOTO_exû±iÚThrown
();

2110 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

2111 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

2113 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

2114 ià(
ÃwA¼ay
 =ğ
NULL
)

2115 
	`GOTO_exû±iÚThrown
();

2116 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

2118 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2120 
	}
}

2121 
FINISH
(2);

2122 
OP_END


2126 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

2127 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

2128 
OP_END


2131 
	$HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

2132 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

2133 
OP_END


2136 
	$HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

2138 cÚ¡ 
u2
* 
¬¿yD©a
;

2139 
s4
 
off£t
;

2140 
A¼ayObjeù
* 
¬¿yObj
;

2142 
	`EXPORT_PC
();

2143 
v¤c1
 = 
	`INST_AA
(
š¡
);

2144 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2145 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

2146 
¬¿yD©a
 = 
pc
 + 
off£t
;

2147 #iâdeà
NDEBUG


2148 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

2149 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2152 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

2154 
	`GOTO_exû±iÚThrown
();

2157 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2158 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

2159 
	`GOTO_exû±iÚThrown
();

2161 
	`FINISH
(3);

2162 
	}
}

2163 
OP_END


2166 
	$HANDLE_OPCODE
(
OP_THROW
 )

2168 
Objeù
* 
obj
;

2170 
v¤c1
 = 
	`INST_AA
(
š¡
);

2171 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

2172 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

2173 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) {

2175 
	`LOGVV
("Badƒxception\n");

2178 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

2180 
	`GOTO_exû±iÚThrown
();

2181 
	}
}

2182 
OP_END


2185 
	$HANDLE_OPCODE
(
OP_GOTO
 )

2186 
vd¡
 = 
	`INST_AA
(
š¡
);

2187 ià((
s1
)
vd¡
 < 0)

2188 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

2190 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

2191 
	`ILOGV
("> branchaken");

2192 ià((
s1
)
vd¡
 < 0)

2193 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, (
s1
)
vd¡
);

2194 
	`FINISH
((
s1
)
vd¡
);

2195 
OP_END


2198 
	$HANDLE_OPCODE
(
OP_GOTO_16
 )

2200 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

2202 ià(
off£t
 < 0)

2203 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

2205 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

2206 
	`ILOGV
("> branchaken");

2207 ià(
off£t
 < 0)

2208 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2209 
	`FINISH
(
off£t
);

2210 
	}
}

2211 
OP_END


2214 
	$HANDLE_OPCODE
(
OP_GOTO_32
 )

2216 
s4
 
off£t
 = 
	`FETCH
(1);

2217 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

2219 ià(
off£t
 < 0)

2220 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

2222 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

2223 
	`ILOGV
("> branchaken");

2224 ià(
off£t
 <= 0)

2225 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2226 
	`FINISH
(
off£t
);

2227 
	}
}

2228 
OP_END


2231 
	$HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

2233 cÚ¡ 
u2
* 
sw™chD©a
;

2234 
u4
 
‹¡V®
;

2235 
s4
 
off£t
;

2237 
v¤c1
 = 
	`INST_AA
(
š¡
);

2238 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2239 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

2240 
sw™chD©a
 = 
pc
 + 
off£t
;

2241 #iâdeà
NDEBUG


2242 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

2243 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2246 
	`EXPORT_PC
();

2247 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad…acked switch");

2248 
	`GOTO_exû±iÚThrown
();

2251 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

2253 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

2254 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

2255 ià(
off£t
 <= 0)

2256 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2257 
	`FINISH
(
off£t
);

2258 
	}
}

2259 
OP_END


2262 
	$HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

2264 cÚ¡ 
u2
* 
sw™chD©a
;

2265 
u4
 
‹¡V®
;

2266 
s4
 
off£t
;

2268 
v¤c1
 = 
	`INST_AA
(
š¡
);

2269 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2270 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

2271 
sw™chD©a
 = 
pc
 + 
off£t
;

2272 #iâdeà
NDEBUG


2273 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

2274 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2277 
	`EXPORT_PC
();

2278 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad sparse switch");

2279 
	`GOTO_exû±iÚThrown
();

2282 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

2284 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

2285 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

2286 ià(
off£t
 <= 0)

2287 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2288 
	`FINISH
(
off£t
);

2289 
	}
}

2290 
OP_END


2293 
HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

2294 
OP_END


2297 
HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

2298 
OP_END


2301 
HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

2302 
OP_END


2305 
HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

2306 
OP_END


2309 
HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

2310 
OP_END


2313 
HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

2314 
OP_END


2317 
HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

2318 
OP_END


2321 
HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

2322 
OP_END


2325 
HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

2326 
OP_END


2329 
HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

2330 
OP_END


2333 
HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

2334 
OP_END


2337 
HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

2338 
OP_END


2341 
HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

2342 
OP_END


2345 
HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

2346 
OP_END


2349 
HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

2350 
OP_END


2353 
HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

2354 
OP_END


2357 
HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

2358 
OP_END


2361 
	$HANDLE_OPCODE
(
OP_UNUSED_3E
)

2362 
OP_END


2365 
	$HANDLE_OPCODE
(
OP_UNUSED_3F
)

2366 
OP_END


2369 
	$HANDLE_OPCODE
(
OP_UNUSED_40
)

2370 
OP_END


2373 
	$HANDLE_OPCODE
(
OP_UNUSED_41
)

2374 
OP_END


2377 
	$HANDLE_OPCODE
(
OP_UNUSED_42
)

2378 
OP_END


2381 
	$HANDLE_OPCODE
(
OP_UNUSED_43
)

2382 
OP_END


2385 
	`HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

2386 
OP_END


2389 
	`HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

2390 
OP_END


2393 
	`HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

2394 
OP_END


2397 
	`HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

2398 
OP_END


2401 
	`HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

2402 
OP_END


2405 
	`HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2406 
OP_END


2409 
	`HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2410 
OP_END


2413 
	`HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2414 
OP_END


2417 
	`HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2418 
OP_END


2421 
	$HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

2423 
A¼ayObjeù
* 
¬¿yObj
;

2424 
Objeù
* 
obj
;

2425 
u2
 
¬¿yInfo
;

2426 
	`EXPORT_PC
();

2427 
vd¡
 = 
	`INST_AA
(
š¡
);

2428 
¬¿yInfo
 = 
	`FETCH
(1);

2429 
v¤c1
 = 
¬¿yInfo
 & 0xff;

2430 
v¤c2
 = 
¬¿yInfo
 >> 8;

2431 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

2432 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2433 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

2434 
	`GOTO_exû±iÚThrown
();

2435 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

2436 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;",

2437 
NULL
);

2438 
	`GOTO_exû±iÚThrown
();

2440 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

2441 ià(
obj
 !ğ
NULL
) {

2442 ià(!
	`checkFÜNuÎ
(
obj
))

2443 
	`GOTO_exû±iÚThrown
();

2444 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->obj.clazz)) {

2445 
	`LOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)\n",

2446 
obj
->
şazz
->
desütÜ
, obj,

2447 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

2450 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

2451 
	`GOTO_exû±iÚThrown
();

2454 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

2455 ((
u4
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] =

2456 
	`GET_REGISTER
(
vd¡
);

2458 
	`SET_ARRAY_TAINT
(
¬¿yObj
,

2459 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) |

2460 
	`GET_REGISTER_TAINT
(
vd¡
)) );

2462 
	}
}

2463 
FINISH
(2);

2464 
OP_END


2467 
HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2468 
OP_END


2471 
HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2472 
OP_END


2475 
HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2476 
OP_END


2479 
HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2480 
OP_END


2483 
HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2484 
OP_END


2487 
HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2488 
OP_END


2491 
HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2492 
OP_END


2495 
HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2496 
OP_END


2499 
HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2500 
OP_END


2503 
HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2504 
OP_END


2507 
HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2508 
OP_END


2511 
HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2512 
OP_END


2515 
HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2516 
OP_END


2530 
HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2531 
OP_END


2534 
HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2535 
OP_END


2538 
HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2539 
OP_END


2542 
HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2543 
OP_END


2546 
HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2547 
OP_END


2550 
HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2551 
OP_END


2554 
HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2555 
OP_END


2558 
HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2559 
OP_END


2562 
HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2563 
OP_END


2566 
HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2567 
OP_END


2570 
HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2571 
OP_END


2574 
HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2575 
OP_END


2578 
HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2579 
OP_END


2582 
HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2583 
OP_END


2586 
HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2587 
OP_END


2590 
HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2591 
OP_END


2594 
HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2595 
OP_END


2598 
HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2599 
OP_END


2602 
HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2603 
OP_END


2606 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2607 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

2608 
OP_END


2611 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2612 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

2613 
OP_END


2616 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2617 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

2618 
OP_END


2621 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2622 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

2623 
OP_END


2626 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

2627 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

2628 
OP_END


2631 
	$HANDLE_OPCODE
(
OP_UNUSED_73
)

2632 
OP_END


2635 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

2636 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

2637 
OP_END


2640 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

2641 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

2642 
OP_END


2645 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

2646 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

2647 
OP_END


2650 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

2651 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

2652 
OP_END


2655 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

2656 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

2657 
OP_END


2660 
	$HANDLE_OPCODE
(
OP_UNUSED_79
)

2661 
OP_END


2664 
	$HANDLE_OPCODE
(
OP_UNUSED_7A
)

2665 
OP_END


2668 
	`HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

2669 
OP_END


2672 
	`HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

2673 
OP_END


2676 
	`HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

2677 
OP_END


2680 
	`HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

2681 
OP_END


2684 
	`HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

2685 
OP_END


2688 
	`HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

2689 
OP_END


2692 
	`HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

2693 
OP_END


2696 
	`HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

2697 
OP_END


2700 
	`HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

2701 
OP_END


2704 
	`HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

2705 
OP_END


2708 
	`HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

2709 
OP_END


2712 
	`HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

2713 
OP_END


2716 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

2717 , 
_FLOAT
, 
s4
, 
_INT
)

2718 
OP_END


2721 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

2722 , 
_FLOAT
, 
s8
, 
_WIDE
)

2723 
OP_END


2726 
	`HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

2727 
OP_END


2730 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

2731 , 
_DOUBLE
, 
s4
, 
_INT
)

2732 
OP_END


2735 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

2736 , 
_DOUBLE
, 
s8
, 
_WIDE
)

2737 
OP_END


2740 
	`HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

2741 
OP_END


2744 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

2745 
OP_END


2748 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

2749 
OP_END


2752 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

2753 
OP_END


2756 
	`HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

2757 
OP_END


2760 
	`HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

2761 
OP_END


2764 
	`HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

2765 
OP_END


2768 
	`HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

2769 
OP_END


2772 
	`HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

2773 
OP_END


2776 
	`HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

2777 
OP_END


2780 
	`HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

2781 
OP_END


2784 
	`HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

2785 
OP_END


2788 
	`HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

2789 
OP_END


2792 
	`HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

2793 
OP_END


2796 
	`HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

2797 
OP_END


2800 
	`HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

2801 
OP_END


2804 
	`HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

2805 
OP_END


2808 
	`HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

2809 
OP_END


2812 
	`HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

2813 
OP_END


2816 
	`HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

2817 
OP_END


2820 
	`HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

2821 
OP_END


2824 
	`HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

2825 
OP_END


2828 
	`HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

2829 
OP_END


2832 
	`HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

2833 
OP_END


2836 
	`HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

2837 
OP_END


2840 
	`HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

2841 
OP_END


2844 
	`HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

2845 
OP_END


2848 
	`HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

2849 
OP_END


2852 
	`HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

2853 
OP_END


2856 
	`HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

2857 
OP_END


2860 
	$HANDLE_OPCODE
(
OP_REM_FLOAT
 )

2862 
u2
 
¤cRegs
;

2863 
vd¡
 = 
	`INST_AA
(
š¡
);

2864 
¤cRegs
 = 
	`FETCH
(1);

2865 
v¤c1
 = 
¤cRegs
 & 0xff;

2866 
v¤c2
 = 
¤cRegs
 >> 8;

2867 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2868 
	`SET_REGISTER_FLOAT
(
vd¡
,

2869 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

2871 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

2872 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));

2874 
	}
}

2875 
FINISH
(2);

2876 
OP_END


2879 
HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

2880 
OP_END


2883 
HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

2884 
OP_END


2887 
HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

2888 
OP_END


2891 
HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

2892 
OP_END


2895 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

2897 
u2
 
¤cRegs
;

2898 
vd¡
 = 
	`INST_AA
(
š¡
);

2899 
¤cRegs
 = 
	`FETCH
(1);

2900 
v¤c1
 = 
¤cRegs
 & 0xff;

2901 
v¤c2
 = 
¤cRegs
 >> 8;

2902 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2903 
	`SET_REGISTER_DOUBLE
(
vd¡
,

2904 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

2906 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

2907 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));

2909 
	}
}

2910 
FINISH
(2);

2911 
OP_END


2914 
HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

2915 
OP_END


2918 
HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

2919 
OP_END


2922 
HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

2923 
OP_END


2926 
HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

2927 
OP_END


2930 
HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

2931 
OP_END


2934 
HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

2935 
OP_END


2938 
HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

2939 
OP_END


2942 
HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

2943 
OP_END


2946 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

2947 
OP_END


2950 
HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

2951 
OP_END


2954 
HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

2955 
OP_END


2958 
HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

2959 
OP_END


2962 
HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

2963 
OP_END


2966 
HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

2967 
OP_END


2970 
HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

2971 
OP_END


2974 
HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

2975 
OP_END


2978 
HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

2979 
OP_END


2982 
HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

2983 
OP_END


2986 
HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

2987 
OP_END


2990 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

2991 
OP_END


2994 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

2995 
OP_END


2998 
HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

2999 
OP_END


3002 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

3003 
OP_END


3006 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

3007 
OP_END


3010 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

3011 
OP_END


3014 
HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

3015 
OP_END


3018 
	$HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

3019 
vd¡
 = 
	`INST_A
(
š¡
);

3020 
v¤c1
 = 
	`INST_B
(
š¡
);

3021 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

3022 
	`SET_REGISTER_FLOAT
(
vd¡
,

3023 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

3025 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

3026 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));

3028 
	`FINISH
(1);

3029 
OP_END


3032 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

3033 
OP_END


3036 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

3037 
OP_END


3040 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

3041 
OP_END


3044 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

3045 
OP_END


3048 
	$HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

3049 
vd¡
 = 
	`INST_A
(
š¡
);

3050 
v¤c1
 = 
	`INST_B
(
š¡
);

3051 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

3052 
	`SET_REGISTER_DOUBLE
(
vd¡
,

3053 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

3055 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

3056 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));

3058 
	`FINISH
(1);

3059 
OP_END


3062 
	`HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

3063 
OP_END


3066 
	$HANDLE_OPCODE
(
OP_RSUB_INT
 )

3068 
vd¡
 = 
	`INST_A
(
š¡
);

3069 
v¤c1
 = 
	`INST_B
(
š¡
);

3070 
v¤c2
 = 
	`FETCH
(1);

3071 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

3072 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

3074 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

3076 
	}
}

3077 
FINISH
(2);

3078 
OP_END


3081 
HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

3082 
OP_END


3085 
HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

3086 
OP_END


3089 
HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

3090 
OP_END


3093 
HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

3094 
OP_END


3097 
HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

3098 
OP_END


3101 
HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

3102 
OP_END


3105 
HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

3106 
OP_END


3109 
	$HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

3111 
u2
 
l™Info
;

3112 
vd¡
 = 
	`INST_AA
(
š¡
);

3113 
l™Info
 = 
	`FETCH
(1);

3114 
v¤c1
 = 
l™Info
 & 0xff;

3115 
v¤c2
 = 
l™Info
 >> 8;

3116 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

3117 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

3119 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

3121 
	}
}

3122 
FINISH
(2);

3123 
OP_END


3126 
HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

3127 
OP_END


3130 
HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

3131 
OP_END


3134 
HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

3135 
OP_END


3138 
HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

3139 
OP_END


3142 
HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

3143 
OP_END


3146 
HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

3147 
OP_END


3150 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

3151 
OP_END


3154 
HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

3155 
OP_END


3158 
HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

3159 
OP_END


3162 
	$HANDLE_OPCODE
(
OP_UNUSED_E3
)

3163 
OP_END


3166 
	$HANDLE_OPCODE
(
OP_UNUSED_E4
)

3167 
OP_END


3170 
	$HANDLE_OPCODE
(
OP_UNUSED_E5
)

3171 
OP_END


3174 
	$HANDLE_OPCODE
(
OP_UNUSED_E6
)

3175 
OP_END


3178 
	$HANDLE_OPCODE
(
OP_UNUSED_E7
)

3179 
OP_END


3182 
	$HANDLE_OPCODE
(
OP_UNUSED_E8
)

3183 
OP_END


3186 
	$HANDLE_OPCODE
(
OP_UNUSED_E9
)

3187 
OP_END


3190 
	$HANDLE_OPCODE
(
OP_UNUSED_EA
)

3191 
OP_END


3194 
	$HANDLE_OPCODE
(
OP_UNUSED_EB
)

3195 
OP_END


3198 
	$HANDLE_OPCODE
(
OP_UNUSED_EC
)

3199 
OP_END


3202 
	$HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

3203 
	`EXPORT_PC
();

3204 
v¤c1
 = 
	`INST_AA
(
š¡
);

3205 
»f
 = 
	`FETCH
(1);

3206 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

3207 
	`GOTO_exû±iÚThrown
();

3208 
OP_END


3211 
	$HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

3228 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

3231 
	`EXPORT_PC
();

3233 
v¤c1
 = 
	`INST_B
(
š¡
);

3234 
»f
 = 
	`FETCH
(1);

3235 
vd¡
 = 
	`FETCH
(2);

3236 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

3237 
v¤c1
, 
»f
, 
vd¡
);

3239 
	`as£¹
((
vd¡
 >> 16) == 0);

3240 
	`as£¹
(
v¤c1
 <= 4);

3242 
v¤c1
) {

3244 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

3247 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

3250 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

3253 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3259 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


3260 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

3261 
	`GOTO_exû±iÚThrown
();

3263 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

3264 
	`GOTO_exû±iÚThrown
();

3266 
	}
}

3267 
FINISH
(3);

3268 
OP_END


3271 
	$HANDLE_OPCODE
(
OP_UNUSED_EF
)

3272 
OP_END


3275 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_EMPTY
 )

3276 #ià
INTERP_TYPE
 !ğ
INTERP_DBG


3278 
	`FINISH
(3);

3280 ià(!
gDvm
.
debugg”Aùive
) {

3282 
	`FINISH
(3);

3283 
	}
} {

3286 
GOTO_švoke
(
švokeDœeù
, 
çl£
);

3289 
OP_END


3292 
	$HANDLE_OPCODE
(
OP_UNUSED_F1
)

3293 
OP_END


3296 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

3297 
OP_END


3300 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

3301 
OP_END


3304 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

3305 
OP_END


3308 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

3309 
OP_END


3312 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

3313 
OP_END


3316 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

3317 
OP_END


3320 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

3321 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

3322 
OP_END


3325 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

3326 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

3327 
OP_END


3330 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

3331 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

3332 
OP_END


3335 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

3336 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

3337 
OP_END


3340 
	$HANDLE_OPCODE
(
OP_UNUSED_FC
)

3341 
OP_END


3344 
	$HANDLE_OPCODE
(
OP_UNUSED_FD
)

3345 
OP_END


3348 
	$HANDLE_OPCODE
(
OP_UNUSED_FE
)

3349 
OP_END


3352 
	$HANDLE_OPCODE
(
OP_UNUSED_FF
)

3356 
	`LOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

3357 
	`dvmAbÜt
();

3358 
	`FINISH
(1);

3359 
OP_END


3365 #undeà
H


3366 
	#H
(
_İ
è
dvmM‹½_
##
	)
_op

3367 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrs
)

3369 #undeà
H


3370 
	#H
(
_İ
è#_İ

	)

3371 
	$DEFINE_GOTO_TABLE
(
gDvmM‹½HªdËrNames
)

3373 
	~<£tjmp.h
>

3381 
boŞ
 
	$dvmM‹½StdRun
(
M‹½Glue
* 
glue
)

3383 
jmp_buf
 
jmpBuf
;

3384 
chªgeIÁ”p
;

3386 
glue
->
baPŒ
 = &
jmpBuf
;

3392 
chªgeIÁ”p
 = 
	`£tjmp
(
jmpBuf
) -1;

3393 ià(
chªgeIÁ”p
 >= 0) {

3394 
Th»ad
* 
th»adS–f
 = 
	`dvmTh»adS–f
();

3395 
	`LOGVV
("mterphreadid=%d„eturning %d\n",

3396 
th»adS–f
->
th»adId
, 
chªgeIÁ”p
);

3397  
chªgeIÁ”p
;

3408 
glue
->
’ŒyPošt
) {

3409 
kIÁ”pEÁryIn¡r
:

3412 
kIÁ”pEÁryR‘uº
:

3413 
	`dvmM‹½_»tuºFromM‘hod
(
glue
);

3415 
kIÁ”pEÁryThrow
:

3416 
	`dvmM‹½_exû±iÚThrown
(
glue
);

3419 
	`dvmAbÜt
();

3423 
Œue
) {

3424 (*
	tHªdËr
)(
	tM‹½Glue
* 
	tglue
);

3426 
u2
 
š¡
 = 
pc
[0];

3427 
HªdËr
 
hªdËr
 = (HªdËrè
gDvmM‹½HªdËrs
[
š¡
 & 0xff];

3428 
	`LOGVV
("handler %p %s\n",

3429 
hªdËr
, (cÚ¡ *è
gDvmM‹½HªdËrNames
[
š¡
 & 0xff]);

3430 (*
hªdËr
)(
glue
);

3432 
	}
}

3437 
	$dvmM‹½StdBa
(
M‹½Glue
* 
glue
, 
boŞ
 
chªgeIÁ”p
)

3439 
jmp_buf
* 
pJmpBuf
 = 
glue
->
baPŒ
;

3440 
	`lÚgjmp
(*
pJmpBuf
, (()
chªgeIÁ”p
)+1);

3441 
	}
}

3455 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
)

3457 
CÏssObjeù
* 
¬¿yCÏss
;

3458 
A¼ayObjeù
* 
ÃwA¼ay
;

3459 
u4
* 
cÚ‹Ás
;

3460 
ty³Ch
;

3461 
i
;

3462 
u4
 
¬g5
;

3464 
	`EXPORT_PC
();

3466 
»f
 = 
	`FETCH
(1);

3467 
vd¡
 = 
	`FETCH
(2);

3469 ià(
m‘hodC®lRªge
) {

3470 
v¤c1
 = 
	`INST_AA
(
š¡
);

3471 
¬g5
 = -1;

3472 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3473 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3475 
¬g5
 = 
	`INST_A
(
š¡
);

3476 
v¤c1
 = 
	`INST_B
(
š¡
);

3477 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

3478 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

3484 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

3485 ià(
¬¿yCÏss
 =ğ
NULL
) {

3486 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

3487 ià(
¬¿yCÏss
 =ğ
NULL
)

3488 
	`GOTO_exû±iÚThrown
();

3498 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

3499 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

3504 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'\n", 
¬¿yCÏss
->
desütÜ
);

3505 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

3506 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

3508 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeError;",

3510 
	`GOTO_exû±iÚThrown
();

3511 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

3513 
	`LOGE
("non-int…rimitives‚ot implemented\n");

3514 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

3516 
	`GOTO_exû±iÚThrown
();

3519 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

3520 ià(
ÃwA¼ay
 =ğ
NULL
)

3521 
	`GOTO_exû±iÚThrown
();

3526 
cÚ‹Ás
 = (
u4
*è
ÃwA¼ay
->contents;

3527 ià(
m‘hodC®lRªge
) {

3528 
i
 = 0; i < 
v¤c1
; i++)

3529 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3531 
	`as£¹
(
v¤c1
 <= 5);

3532 ià(
v¤c1
 == 5) {

3533 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

3534 
v¤c1
--;

3536 
i
 = 0; i < 
v¤c1
; i++) {

3537 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3538 
vd¡
 >>= 4;

3542 
»tv®
.
l
 = 
ÃwA¼ay
;

3544 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

3546 
	}
}

3547 
FINISH
(3);

3548 
GOTO_TARGET_END


3551 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
)

3553 
M‘hod
* 
ba£M‘hod
;

3554 
Objeù
* 
thisPŒ
;

3556 
	`EXPORT_PC
();

3558 
v¤c1
 = 
	`INST_AA
(
š¡
);

3559 
»f
 = 
	`FETCH
(1);

3560 
vd¡
 = 
	`FETCH
(2);

3566 ià(
m‘hodC®lRªge
) {

3567 
	`as£¹
(
v¤c1
 > 0);

3568 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3569 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3570 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3572 
	`as£¹
((
v¤c1
>>4) > 0);

3573 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

3574 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3575 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3578 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3579 
	`GOTO_exû±iÚThrown
();

3585 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3586 ià(
ba£M‘hod
 =ğ
NULL
) {

3587 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3588 ià(
ba£M‘hod
 =ğ
NULL
) {

3589 
	`ILOGV
("+ unknown method or‡ccess denied\n");

3590 
	`GOTO_exû±iÚThrown
();

3598 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3599 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3602 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3612 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3614 
	`GOTO_exû±iÚThrown
();

3617 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3618 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3621 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s\n",

3622 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3623 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3624 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3625 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3628 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

3629 
	`LOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s\n",

3630 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3631 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3632 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3635 
	`dvmDumpAÎCÏs£s
(0);

3639 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3640 
	}
}

3641 
GOTO_TARGET_END


3643 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

3645 
M‘hod
* 
ba£M‘hod
;

3646 
u2
 
thisReg
;

3648 
	`EXPORT_PC
();

3650 
v¤c1
 = 
	`INST_AA
(
š¡
);

3651 
»f
 = 
	`FETCH
(1);

3652 
vd¡
 = 
	`FETCH
(2);

3654 ià(
m‘hodC®lRªge
) {

3655 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3656 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3657 
thisReg
 = 
vd¡
;

3659 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

3660 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3661 
thisReg
 = 
vd¡
 & 0x0f;

3664 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3665 
	`GOTO_exû±iÚThrown
();

3674 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3675 ià(
ba£M‘hod
 =ğ
NULL
) {

3676 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3677 ià(
ba£M‘hod
 =ğ
NULL
) {

3678 
	`ILOGV
("+ unknown method or‡ccess denied\n");

3679 
	`GOTO_exû±iÚThrown
();

3692 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3697 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchMethodError;",

3698 
ba£M‘hod
->
Çme
);

3699 
	`GOTO_exû±iÚThrown
();

3701 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3703 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3704 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3706 
	`GOTO_exû±iÚThrown
();

3709 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3710 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3712 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s\n",

3713 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3714 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3715 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3717 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3718 
	}
}

3719 
GOTO_TARGET_END


3721 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

3723 
Objeù
* 
thisPŒ
;

3724 
CÏssObjeù
* 
thisCÏss
;

3726 
	`EXPORT_PC
();

3728 
v¤c1
 = 
	`INST_AA
(
š¡
);

3729 
»f
 = 
	`FETCH
(1);

3730 
vd¡
 = 
	`FETCH
(2);

3736 ià(
m‘hodC®lRªge
) {

3737 
	`as£¹
(
v¤c1
 > 0);

3738 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3739 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3740 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3742 
	`as£¹
((
v¤c1
>>4) > 0);

3743 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

3744 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3745 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3747 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3748 
	`GOTO_exû±iÚThrown
();

3750 
thisCÏss
 = 
thisPŒ
->
şazz
;

3756 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

3757 
m‘hodCÏssDex
);

3758 ià(
m‘hodToC®l
 =ğ
NULL
) {

3759 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3760 
	`GOTO_exû±iÚThrown
();

3763 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3764 
	}
}

3765 
GOTO_TARGET_END


3767 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

3769 
u2
 
thisReg
;

3771 
v¤c1
 = 
	`INST_AA
(
š¡
);

3772 
»f
 = 
	`FETCH
(1);

3773 
vd¡
 = 
	`FETCH
(2);

3775 
	`EXPORT_PC
();

3777 ià(
m‘hodC®lRªge
) {

3778 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3779 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3780 
thisReg
 = 
vd¡
;

3782 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

3783 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3784 
thisReg
 = 
vd¡
 & 0x0f;

3786 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3787 
	`GOTO_exû±iÚThrown
();

3789 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3790 ià(
m‘hodToC®l
 =ğ
NULL
) {

3791 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

3792 
METHOD_DIRECT
);

3793 ià(
m‘hodToC®l
 =ğ
NULL
) {

3794 
	`ILOGV
("+ unknown direct method\n");

3795 
	`GOTO_exû±iÚThrown
();

3798 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3799 
	}
}

3800 
GOTO_TARGET_END


3802 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

3803 
v¤c1
 = 
	`INST_AA
(
š¡
);

3804 
»f
 = 
	`FETCH
(1);

3805 
vd¡
 = 
	`FETCH
(2);

3807 
	`EXPORT_PC
();

3809 ià(
m‘hodC®lRªge
)

3810 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3811 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3813 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

3814 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3816 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3817 ià(
m‘hodToC®l
 =ğ
NULL
) {

3818 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

3819 ià(
m‘hodToC®l
 =ğ
NULL
) {

3820 
	`ILOGV
("+ unknown method\n");

3821 
	`GOTO_exû±iÚThrown
();

3823 
	}
}

3824 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3825 
GOTO_TARGET_END


3827 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

3829 
Objeù
* 
thisPŒ
;

3831 
	`EXPORT_PC
();

3833 
v¤c1
 = 
	`INST_AA
(
š¡
);

3834 
»f
 = 
	`FETCH
(1);

3835 
vd¡
 = 
	`FETCH
(2);

3841 ià(
m‘hodC®lRªge
) {

3842 
	`as£¹
(
v¤c1
 > 0);

3843 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3844 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3845 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3847 
	`as£¹
((
v¤c1
>>4) > 0);

3848 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3849 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3850 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3853 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3854 
	`GOTO_exû±iÚThrown
();

3860 
	`as£¹
(
»f
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3861 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

3864 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3865 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3867 
	`GOTO_exû±iÚThrown
();

3870 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3871 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3874 
	`LOGVV
("+++ virtual[%d]=%s.%s\n",

3875 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3876 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3878 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3879 
	}
}

3880 
GOTO_TARGET_END


3882 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

3884 
u2
 
thisReg
;

3886 
	`EXPORT_PC
();

3888 
v¤c1
 = 
	`INST_AA
(
š¡
);

3889 
»f
 = 
	`FETCH
(1);

3890 
vd¡
 = 
	`FETCH
(2);

3892 ià(
m‘hodC®lRªge
) {

3893 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3894 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3895 
thisReg
 = 
vd¡
;

3897 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3898 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3899 
thisReg
 = 
vd¡
 & 0x0f;

3902 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3903 
	`GOTO_exû±iÚThrown
();

3906 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3907 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
NULL
);

3908 
	`GOTO_exû±iÚThrown
();

3911 
	`as£¹
(
»f
 < 
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

3923 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

3926 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3927 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3929 
	`GOTO_exû±iÚThrown
();

3932 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3933 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3935 
	`LOGVV
("+++ super-virtual[%d]=%s.%s\n",

3936 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3937 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3939 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3940 
	}
}

3941 
GOTO_TARGET_END


3949 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

3951 
SckSaveA»a
* 
§veA»a
;

3960 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryR‘uº
, 0);

3962 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

3963 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

3964 
curM‘hod
->
shÜty
);

3967 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

3969 #ifdeà
EASY_GDB


3970 
debugSaveA»a
 = 
§veA»a
;

3972 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

3973 
	`TRACE_METHOD_EXIT
(
£lf
, 
curM‘hod
);

3977 
å
 = 
§veA»a
->
´evF¿me
;

3978 
	`as£¹
(
å
 !ğ
NULL
);

3979 ià(
	`dvmIsB»akF¿me
(
å
)) {

3981 
	`LOGVV
("+++„eturned into break frame\n");

3982 
	`GOTO_ba
();

3986 
£lf
->
curF¿me
 = 
å
;

3987 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3989 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3990 
pc
 = 
§veA»a
->
§vedPc
;

3991 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

3992 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

3996 ià(
Œue


3999 
	`FINISH
(3);

4003 
	`as£¹
(
çl£
);

4005 
	}
}

4006 
GOTO_TARGET_END


4015 
	$GOTO_TARGET
(
exû±iÚThrown
)

4017 
Objeù
* 
exû±iÚ
;

4018 
ÿtchR–Pc
;

4024 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryThrow
, 0);

4032 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4033 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

4034 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4035 
	`dvmCË¬Exû±iÚ
(
£lf
);

4037 
	`LOGV
("Handlingƒxception %s‡t %s:%d\n",

4038 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

4039 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

4041 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4056 ià(
gDvm
.
debugg”Aùive
) {

4057 * 
ÿtchF¿me
;

4058 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

4059 
exû±iÚ
, 
Œue
, &
ÿtchF¿me
);

4060 
	`dvmDbgPo¡Exû±iÚ
(
å
, 
pc
 - 
curM‘hod
->
š¢s
, 
ÿtchF¿me
,

4061 
ÿtchR–Pc
, 
exû±iÚ
);

4077 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

4078 
exû±iÚ
, 
çl£
, (*)&
å
);

4091 ià(
£lf
->
¡ackOv”æowed
)

4092 
	`dvmCËªupSckOv”æow
(
£lf
);

4094 ià(
ÿtchR–Pc
 < 0) {

4096 #ià
DVM_SHOW_EXCEPTION
 >= 2

4097 
	`LOGD
("Exception %s from %s:%d‚ot caught†ocally\n",

4098 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

4099 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

4101 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

4102 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4103 
	`GOTO_ba
();

4106 #ià
DVM_SHOW_EXCEPTION
 >= 3

4108 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4109 
	`LOGD
("Exception %shrown from %s:%do %s:%d\n",

4110 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

4111 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

4112 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

4113 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

4122 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4124 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4125 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

4126 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

4127 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4128 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

4142 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

4143 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

4145 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4146 
	`FINISH
(0);

4147 
	}
}

4148 
GOTO_TARGET_END


4168 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

4169 
u2
 
couÁ
, u2 
»gs
)

4171 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

4178 
u4
* 
outs
;

4179 
i
;

4180 #ifdeà
WITH_TAINT_TRACKING


4181 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
);

4187 ià(
m‘hodC®lRªge
) {

4190 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

4191 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

4192 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

4193 #ifdeà
WITH_TAINT_TRACKING


4194 ià(
ÇtiveT¬g‘
) {

4195 
i
 = 0; i < 
v¤c1
; i++) {

4196 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

4199 
outs
[
v¤c1
] = 
TAINT_CLEAR
;

4201 
i
 = 0; i < 
v¤c1
; i++) {

4202 
outs
[
v¤c1
+1+
i
] = 
	`GET_REGISTER_TAINT
(
vd¡
+i);

4205 
¦Ù
 = 0;

4206 
i
 = 0; i < 
v¤c1
; i++) {

4207 
¦Ù
 = 
i
 << 1;

4208 
outs
[
¦Ù
] = 
	`GET_REGISTER
(
vd¡
+
i
);

4209 
outs
[
¦Ù
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
+
i
);

4212 
outs
[
v¤c1
<<1] = 
TAINT_CLEAR
;

4215 
i
 = 0; i < 
v¤c1
; i++)

4216 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

4219 
u4
 
couÁ
 = 
v¤c1
 >> 4;

4221 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

4222 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

4223 
	`as£¹
(
couÁ
 <= 5);

4225 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

4227 ià(
couÁ
 == 5) {

4228 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4229 
couÁ
--;

4231 
i
 = 0; i < (è
couÁ
; i++) {

4232 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4233 
vd¡
 >>= 4;

4236 
	`as£¹
((
vd¡
 >> 16) == 0);

4237 #ifdeà
WITH_TAINT_TRACKING


4238 ià(
ÇtiveT¬g‘
) {

4239 
couÁ
) {

4241 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4242 
outs
[
couÁ
+5] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

4244 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4245 
outs
[
couÁ
+4] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

4247 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4248 
outs
[
couÁ
+3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

4250 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4251 
outs
[
couÁ
+2] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

4253 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4254 
outs
[
couÁ
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

4259 
outs
[
couÁ
] = 
TAINT_CLEAR
;

4261 
couÁ
) {

4263 
outs
[8] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4264 
outs
[9] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

4266 
outs
[6] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4267 
outs
[7] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

4269 
outs
[4] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4270 
outs
[5] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

4272 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4273 
outs
[3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

4275 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4276 
outs
[1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

4281 
outs
[
couÁ
<<1] = 
TAINT_CLEAR
;

4286 
couÁ
) {

4288 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4290 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4292 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4294 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4296 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4303 
	}
}

4314 
SckSaveA»a
* 
	gÃwSaveA»a
;

4315 
u4
* 
	gÃwFp
;

4317 
ILOGV
("> %s%s.%s %s",

4318 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

4319 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4320 
m‘hodToC®l
->
shÜty
);

4322 #ifdeà
WITH_TAINT_TRACKING


4323 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
) -

4324 ((
m‘hodToC®l
->
»gi¡”sSize
 << 1) + 1);

4326 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

4328 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

4331 ià(
	gŒue
) {

4332 
u1
* 
	gbÙtom
;

4333 #ifdeà
WITH_TAINT_TRACKING


4334 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 -

4335 (
m‘hodToC®l
->
outsSize
 * (
u4
) + 4);

4337 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

4339 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

4341 
LOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p size=%d '%s')\n",

4342 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

4343 
£lf
->
š‹½SckSize
, 
m‘hodToC®l
->
Çme
);

4344 
dvmHªdËSckOv”æow
(
£lf
);

4345 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

4346 
GOTO_exû±iÚThrown
();

4352 #ifdeà
LOG_INSTR


4353 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

4360 #ifdeà
WITH_TAINT_TRACKING


4363 
mem£t
(
ÃwFp
, 0xcc,

4364 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 8);

4366 
mem£t
(
ÃwFp
, 0xcc,

4367 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

4372 #ifdeà
EASY_GDB


4373 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

4375 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

4376 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

4377 #ià
defšed
(
WITH_JIT
)

4378 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

4380 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

4382 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

4387 
	gcurM‘hod
 = 
m‘hodToC®l
;

4388 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4389 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

4390 
	gå
 = 
£lf
->
curF¿me
 = 
ÃwFp
;

4391 #ifdeà
EASY_GDB


4392 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

4394 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


4395 
	gdebugIsM‘hodEÁry
 = 
Œue
;

4397 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

4398 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4399 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

4400 
FINISH
(0);

4403 #ifdeà
USE_INDIRECT_REF


4404 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

4406 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

4409 
	g£lf
->
	gcurF¿me
 = 
ÃwFp
;

4411 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

4413 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

4414 ià(
	ggDvm
.
	gdebugg”Aùive
) {

4415 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

4416 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_ENTRY
);

4419 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

4420 
TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

4423 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

4424 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

4431 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

4432 #ifdeà
WITH_TAINT_TRACKING


4436 
u4
 
	gcouÁ
 = (
m‘hodC®lRªge
è? 
v¤c1
 : vsrc1 >> 4;

4437 
u4
* 
	gouts
 = 
OUTS_FROM_FP
(
å
, 
couÁ
);

4438 
SET_RETURN_TAINT
(
outs
[
couÁ
]);

4442 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

4443 ià(
	ggDvm
.
	gdebugg”Aùive
) {

4444 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

4445 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_EXIT
);

4448 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

4449 
TRACE_METHOD_EXIT
(
£lf
, 
m‘hodToC®l
);

4453 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

4454 
	g£lf
->
	gcurF¿me
 = 
å
;

4461 ià(
dvmCheckExû±iÚ
(
£lf
)) {

4462 
LOGV
("Exceptionhrown by/below‚ative code\n");

4463 
GOTO_exû±iÚThrown
();

4466 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

4467 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

4468 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4469 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4470 
curM‘hod
->
shÜty
);

4473 ià(
	gŒue


4476 
FINISH
(3);

4480 
as£¹
(
çl£
);

4484 
as£¹
(
çl£
);

4485 
	gGOTO_TARGET_END


4490 #undeà
»tv®


4491 #undeà
pc


4492 #undeà
å


4493 #undeà
curM‘hod


4494 #undeà
m‘hodCÏssDex


4495 #undeà
£lf


4496 #undeà
debugT¿ckedRefS¹


4498 #ifdeà
WITH_TAINT_TRACKING


4499 #undeà
¹ašt


	@mterp/out/InterpC-armv4t.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

590 
	#INTERP_TYPE
 
INTERP_STD


	)

591 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

592 
	#CHECK_TRACKED_REFS
(è(()0)

	)

599 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

600 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

602 
	#GOTO_TARGET
(
_rg‘
, ...) \

603 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

604 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

605 
u2
 
š¡
 = 
	`FETCH
(0); \

606 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

607 
SckSaveA»a
* 
debugSaveA»a
;

	)

609 
	#GOTO_TARGET_END
 }

	)

615 
	#»tv®
 
glue
->
»tv®


	)

616 
	#pc
 
glue
->
pc


	)

617 
	#å
 
glue
->
å


	)

618 
	#curM‘hod
 
glue
->
m‘hod


	)

619 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

620 
	#£lf
 
glue
->
£lf


	)

621 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

623 #ifdeà
WITH_TAINT_TRACKING


624 
	#¹ašt
 
glue
->
¹ašt


	)

628 
	#STUB_HACK
(
x
è
	)
x

636 
	#HANDLE_OPCODE
(
_İ
) \

637 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

638 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

639 
u2
 
š¡
 = 
	`FETCH
(0);

	)

641 
	#OP_END
 }

	)

647 
	#FINISH
(
_off£t
) { \

648 
	`ADJUST_PC
(
_off£t
); \

649 
	`CHECK_DEBUG_AND_PROF
(); \

650 
	`CHECK_TRACKED_REFS
(); \

652 }

	)

661 
	#GOTO_exû±iÚThrown
() \

663 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

665 } 
çl£
)

	)

667 
	#GOTO_»tuºFromM‘hod
() \

669 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

671 } 
çl£
)

	)

673 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

675 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

677 } 
çl£
)

	)

679 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

681 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

682 
_v¤c1
, 
_vd¡
); \

684 } 
çl£
)

	)

690 
	#GOTO_ba
() \

691 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

692 
	#GOTO_ba_sw™ch
() \

693 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

701 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

702 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

706 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

707 
	`ADJUST_PC
(
_pÿdj
); \

708 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

709 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

710 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

711 
	`GOTO_ba_sw™ch
(); \

713 }

	)

718 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

719 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

720 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

721 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

722 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

723 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

724 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

725 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

726 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

727 
u2
 
couÁ
, u2 
»gs
);

728 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

729 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

743 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

744 
	`HANDLE_OPCODE
(
_İcode
 ) \

745 
vd¡
 = 
	`INST_A
(
š¡
); \

746 
v¤c1
 = 
	`INST_B
(
š¡
); \

747 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

748 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

749 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

751 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

752 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

754 
	`FINISH
(1);

	)

756 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

757 
_tovty³
, 
_tÜty³
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
_äomvty³
 
v®
; \

762 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

763 
vd¡
 = 
	`INST_A
(
š¡
); \

764 
v¤c1
 = 
	`INST_B
(
š¡
); \

765 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

766 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

767 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

768 
štMax
 = ~
štMš
; \

769 
»suÉ
 = (
_tovty³
è
v®
; \

770 ià(
v®
 >ğ
štMax
) \

771 
»suÉ
 = 
štMax
; \

772 ià(
v®
 <ğ
štMš
) \

773 
»suÉ
 = 
štMš
; \

774 ià(
v®
 != val) \

775 
»suÉ
 = 0; \

777 
»suÉ
 = (
_tovty³
è
v®
; \

778 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

780 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

781 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

784 
	`FINISH
(1);

	)

786 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

787 
	`HANDLE_OPCODE
(
_İcode
 ) \

788 
vd¡
 = 
	`INST_A
(
š¡
); \

789 
v¤c1
 = 
	`INST_B
(
š¡
); \

790 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

791 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

793 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

795 
	`FINISH
(1);

	)

798 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

799 
	`HANDLE_OPCODE
(
_İcode
 ) \

801 
»suÉ
; \

802 
u2
 
»gs
; \

803 
_v¬Ty³
 
v®1
, 
v®2
; \

804 
vd¡
 = 
	`INST_AA
(
š¡
); \

805 
»gs
 = 
	`FETCH
(1); \

806 
v¤c1
 = 
»gs
 & 0xff; \

807 
v¤c2
 = 
»gs
 >> 8; \

808 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

809 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

810 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

811 ià(
v®1
 =ğ
v®2
) \

812 
»suÉ
 = 0; \

813 ià(
v®1
 < 
v®2
) \

814 
»suÉ
 = -1; \

815 ià(
v®1
 > 
v®2
) \

816 
»suÉ
 = 1; \

818 
»suÉ
 = (
_ÇnV®
); \

819 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

820 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

822 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

825 
	`FINISH
(2);

	)

827 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

828 
	`HANDLE_OPCODE
(
_İcode
 ) \

829 
v¤c1
 = 
	`INST_A
(
š¡
); \

830 
v¤c2
 = 
	`INST_B
(
š¡
); \

831 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

832 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

833 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

834 
b¿nchOff£t
); \

835 
	`ILOGV
("> branchaken"); \

836 ià(
b¿nchOff£t
 < 0) \

837 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

838 
	`FINISH
(
b¿nchOff£t
); \

840 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

841 
	`FINISH
(2); \

842 }

	)

844 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

845 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
v¤c1
 = 
	`INST_AA
(
š¡
); \

847 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

848 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

849 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

850 
	`ILOGV
("> branchaken"); \

851 ià(
b¿nchOff£t
 < 0) \

852 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

853 
	`FINISH
(
b¿nchOff£t
); \

855 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

856 
	`FINISH
(2); \

857 }

	)

859 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

860 
	`HANDLE_OPCODE
(
_İcode
 ) \

861 
vd¡
 = 
	`INST_A
(
š¡
); \

862 
v¤c1
 = 
	`INST_B
(
š¡
); \

863 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

864 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

866 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

868 
	`FINISH
(1);

	)

870 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

871 
	`HANDLE_OPCODE
(
_İcode
 ) \

873 
u2
 
¤cRegs
; \

874 
vd¡
 = 
	`INST_AA
(
š¡
); \

875 
¤cRegs
 = 
	`FETCH
(1); \

876 
v¤c1
 = 
¤cRegs
 & 0xff; \

877 
v¤c2
 = 
¤cRegs
 >> 8; \

878 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

879 ià(
_chkdiv
 != 0) { \

880 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

881 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

882 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

883 ià(
£cÚdV®
 == 0) { \

884 
	`EXPORT_PC
(); \

885 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

887 
	`GOTO_exû±iÚThrown
(); \

889 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

890 ià(
_chkdiv
 == 1) \

891 
»suÉ
 = 
fœ¡V®
; \

893 
»suÉ
 = 0; \

895 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

897 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

900 
	`SET_REGISTER
(
vd¡
, \

901 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

904 
	`SET_REGISTER_TAINT
(
vd¡
, \

905 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

908 
	`FINISH
(2);

	)

910 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

911 
	`HANDLE_OPCODE
(
_İcode
 ) \

913 
u2
 
¤cRegs
; \

914 
vd¡
 = 
	`INST_AA
(
š¡
); \

915 
¤cRegs
 = 
	`FETCH
(1); \

916 
v¤c1
 = 
¤cRegs
 & 0xff; \

917 
v¤c2
 = 
¤cRegs
 >> 8; \

918 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

919 
	`SET_REGISTER
(
vd¡
, \

920 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

922 
	`SET_REGISTER_TAINT
(
vd¡
, \

923 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
v¤c2
 = 
	`FETCH
(1); \

933 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

934 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

935 ià(
_chkdiv
 != 0) { \

936 
s4
 
fœ¡V®
, 
»suÉ
; \

937 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

938 ià((
s2
è
v¤c2
 == 0) { \

939 
	`EXPORT_PC
(); \

940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

942 
	`GOTO_exû±iÚThrown
(); \

944 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

946 ià(
_chkdiv
 == 1) \

947 
»suÉ
 = 
fœ¡V®
; \

949 
»suÉ
 = 0; \

951 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

953 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

956 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

959 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

961 
	`FINISH
(2);

	)

963 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

964 
	`HANDLE_OPCODE
(
_İcode
 ) \

966 
u2
 
l™Info
; \

967 
vd¡
 = 
	`INST_AA
(
š¡
); \

968 
l™Info
 = 
	`FETCH
(1); \

969 
v¤c1
 = 
l™Info
 & 0xff; \

970 
v¤c2
 = 
l™Info
 >> 8; \

971 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

972 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

973 ià(
_chkdiv
 != 0) { \

974 
s4
 
fœ¡V®
, 
»suÉ
; \

975 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

976 ià((
s1
è
v¤c2
 == 0) { \

977 
	`EXPORT_PC
(); \

978 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

980 
	`GOTO_exû±iÚThrown
(); \

982 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

983 ià(
_chkdiv
 == 1) \

984 
»suÉ
 = 
fœ¡V®
; \

986 
»suÉ
 = 0; \

988 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

990 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

992 
	`SET_REGISTER
(
vd¡
, \

993 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

999 
	`FINISH
(2);

	)

1001 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1002 
	`HANDLE_OPCODE
(
_İcode
 ) \

1004 
u2
 
l™Info
; \

1005 
vd¡
 = 
	`INST_AA
(
š¡
); \

1006 
l™Info
 = 
	`FETCH
(1); \

1007 
v¤c1
 = 
l™Info
 & 0xff; \

1008 
v¤c2
 = 
l™Info
 >> 8; \

1009 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

1010 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1011 
	`SET_REGISTER
(
vd¡
, \

1012 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

1014 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

1017 
	`FINISH
(2);

	)

1019 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1020 
	`HANDLE_OPCODE
(
_İcode
 ) \

1021 
vd¡
 = 
	`INST_A
(
š¡
); \

1022 
v¤c1
 = 
	`INST_B
(
š¡
); \

1023 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1024 ià(
_chkdiv
 != 0) { \

1025 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1026 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1027 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1028 ià(
£cÚdV®
 == 0) { \

1029 
	`EXPORT_PC
(); \

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1032 
	`GOTO_exû±iÚThrown
(); \

1034 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1035 ià(
_chkdiv
 == 1) \

1036 
»suÉ
 = 
fœ¡V®
; \

1038 
»suÉ
 = 0; \

1040 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1042 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1044 
	`SET_REGISTER
(
vd¡
, \

1045 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1048 
	`SET_REGISTER_TAINT
(
vd¡
, \

1049 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1051 
	`FINISH
(1);

	)

1053 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1054 
	`HANDLE_OPCODE
(
_İcode
 ) \

1055 
vd¡
 = 
	`INST_A
(
š¡
); \

1056 
v¤c1
 = 
	`INST_B
(
š¡
); \

1057 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1058 
	`SET_REGISTER
(
vd¡
, \

1059 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1061 
	`SET_REGISTER_TAINT
(
vd¡
, \

1062 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1064 
	`FINISH
(1);

	)

1066 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1067 
	`HANDLE_OPCODE
(
_İcode
 ) \

1069 
u2
 
¤cRegs
; \

1070 
vd¡
 = 
	`INST_AA
(
š¡
); \

1071 
¤cRegs
 = 
	`FETCH
(1); \

1072 
v¤c1
 = 
¤cRegs
 & 0xff; \

1073 
v¤c2
 = 
¤cRegs
 >> 8; \

1074 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1075 ià(
_chkdiv
 != 0) { \

1076 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1077 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1078 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1079 ià(
£cÚdV®
 == 0LL) { \

1080 
	`EXPORT_PC
(); \

1081 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1083 
	`GOTO_exû±iÚThrown
(); \

1085 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1086 
£cÚdV®
 == -1LL) \

1088 ià(
_chkdiv
 == 1) \

1089 
»suÉ
 = 
fœ¡V®
; \

1091 
»suÉ
 = 0; \

1093 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1095 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1097 
	`SET_REGISTER_WIDE
(
vd¡
, \

1098 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1101 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1102 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1105 
	`FINISH
(2);

	)

1107 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1108 
	`HANDLE_OPCODE
(
_İcode
 ) \

1110 
u2
 
¤cRegs
; \

1111 
vd¡
 = 
	`INST_AA
(
š¡
); \

1112 
¤cRegs
 = 
	`FETCH
(1); \

1113 
v¤c1
 = 
¤cRegs
 & 0xff; \

1114 
v¤c2
 = 
¤cRegs
 >> 8; \

1115 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1116 
	`SET_REGISTER_WIDE
(
vd¡
, \

1117 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1119 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1120 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1123 
	`FINISH
(2);

	)

1125 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1126 
	`HANDLE_OPCODE
(
_İcode
 ) \

1127 
vd¡
 = 
	`INST_A
(
š¡
); \

1128 
v¤c1
 = 
	`INST_B
(
š¡
); \

1129 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1130 ià(
_chkdiv
 != 0) { \

1131 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1132 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1133 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1134 ià(
£cÚdV®
 == 0LL) { \

1135 
	`EXPORT_PC
(); \

1136 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1138 
	`GOTO_exû±iÚThrown
(); \

1140 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1141 
£cÚdV®
 == -1LL) \

1143 ià(
_chkdiv
 == 1) \

1144 
»suÉ
 = 
fœ¡V®
; \

1146 
»suÉ
 = 0; \

1148 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1150 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1152 
	`SET_REGISTER_WIDE
(
vd¡
, \

1153 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1156 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1157 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1159 
	`FINISH
(1);

	)

1161 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1162 
	`HANDLE_OPCODE
(
_İcode
 ) \

1163 
vd¡
 = 
	`INST_A
(
š¡
); \

1164 
v¤c1
 = 
	`INST_B
(
š¡
); \

1165 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1166 
	`SET_REGISTER_WIDE
(
vd¡
, \

1167 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1170 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1172 
	`FINISH
(1);

	)

1174 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1175 
	`HANDLE_OPCODE
(
_İcode
 ) \

1177 
u2
 
¤cRegs
; \

1178 
vd¡
 = 
	`INST_AA
(
š¡
); \

1179 
¤cRegs
 = 
	`FETCH
(1); \

1180 
v¤c1
 = 
¤cRegs
 & 0xff; \

1181 
v¤c2
 = 
¤cRegs
 >> 8; \

1182 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1183 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1184 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1186 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1187 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1190 
	`FINISH
(2);

	)

1192 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1193 
	`HANDLE_OPCODE
(
_İcode
 ) \

1195 
u2
 
¤cRegs
; \

1196 
vd¡
 = 
	`INST_AA
(
š¡
); \

1197 
¤cRegs
 = 
	`FETCH
(1); \

1198 
v¤c1
 = 
¤cRegs
 & 0xff; \

1199 
v¤c2
 = 
¤cRegs
 >> 8; \

1200 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1208 
	`FINISH
(2);

	)

1210 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1211 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
vd¡
 = 
	`INST_A
(
š¡
); \

1213 
v¤c1
 = 
	`INST_B
(
š¡
); \

1214 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1215 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1216 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1218 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1219 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1221 
	`FINISH
(1);

	)

1223 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1224 
	`HANDLE_OPCODE
(
_İcode
 ) \

1225 
vd¡
 = 
	`INST_A
(
š¡
); \

1226 
v¤c1
 = 
	`INST_B
(
š¡
); \

1227 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1228 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1229 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1231 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1232 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1234 
	`FINISH
(1);

	)

1236 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1237 
	`HANDLE_OPCODE
(
_İcode
 ) \

1239 
A¼ayObjeù
* 
¬¿yObj
; \

1240 
u2
 
¬¿yInfo
; \

1241 
	`EXPORT_PC
(); \

1242 
vd¡
 = 
	`INST_AA
(
š¡
); \

1243 
¬¿yInfo
 = 
	`FETCH
(1); \

1244 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1245 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1246 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1248 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1249 
	`GOTO_exû±iÚThrown
(); \

1250 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1251 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1252 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1253 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1254 
NULL
); \

1255 
	`GOTO_exû±iÚThrown
(); \

1257 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1258 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1260 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1261 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1263 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1265 
	`FINISH
(2);

	)

1267 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1268 
	`HANDLE_OPCODE
(
_İcode
 ) \

1270 
A¼ayObjeù
* 
¬¿yObj
; \

1271 
u2
 
¬¿yInfo
; \

1272 
	`EXPORT_PC
(); \

1273 
vd¡
 = 
	`INST_AA
(
š¡
); \

1274 
¬¿yInfo
 = 
	`FETCH
(1); \

1275 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1276 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1277 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1278 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1279 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1280 
	`GOTO_exû±iÚThrown
(); \

1281 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1282 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1283 
NULL
); \

1284 
	`GOTO_exû±iÚThrown
(); \

1286 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1287 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1288 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1290 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1291 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1292 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1295 
	`FINISH
(2);

	)

1314 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1315 
	`HANDLE_OPCODE
(
_İcode
 ) \

1317 
In¡F›ld
* 
if›ld
; \

1318 
Objeù
* 
obj
; \

1319 
	`EXPORT_PC
(); \

1320 
vd¡
 = 
	`INST_A
(
š¡
); \

1321 
v¤c1
 = 
	`INST_B
(
š¡
); \

1322 
»f
 = 
	`FETCH
(1); \

1323 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1324 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1325 ià(!
	`checkFÜNuÎ
(
obj
)) \

1326 
	`GOTO_exû±iÚThrown
(); \

1327 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1328 ià(
if›ld
 =ğ
NULL
) { \

1329 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1330 ià(
if›ld
 =ğ
NULL
) \

1331 
	`GOTO_exû±iÚThrown
(); \

1333 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1334 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1335 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1336 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1339 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1340 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1341 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1344 
	`FINISH
(2);

	)

1346 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1347 
	`HANDLE_OPCODE
(
_İcode
 ) \

1349 
Objeù
* 
obj
; \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1354 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1355 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1356 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1357 
	`GOTO_exû±iÚThrown
(); \

1358 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1359 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1360 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1364 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1365 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1366 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1369 
	`FINISH
(2);

	)

1371 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1372 
	`HANDLE_OPCODE
(
_İcode
 ) \

1374 
In¡F›ld
* 
if›ld
; \

1375 
Objeù
* 
obj
; \

1376 
	`EXPORT_PC
(); \

1377 
vd¡
 = 
	`INST_A
(
š¡
); \

1378 
v¤c1
 = 
	`INST_B
(
š¡
); \

1379 
»f
 = 
	`FETCH
(1); \

1380 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1381 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1382 ià(!
	`checkFÜNuÎ
(
obj
)) \

1383 
	`GOTO_exû±iÚThrown
(); \

1384 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1385 ià(
if›ld
 =ğ
NULL
) { \

1386 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1387 ià(
if›ld
 =ğ
NULL
) \

1388 
	`GOTO_exû±iÚThrown
(); \

1390 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1391 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1392 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1393 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1394 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1396 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1397 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1400 
	`FINISH
(2);

	)

1402 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1403 
	`HANDLE_OPCODE
(
_İcode
 ) \

1405 
Objeù
* 
obj
; \

1406 
vd¡
 = 
	`INST_A
(
š¡
); \

1407 
v¤c1
 = 
	`INST_B
(
š¡
); \

1408 
»f
 = 
	`FETCH
(1); \

1409 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1410 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1411 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1412 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1413 
	`GOTO_exû±iÚThrown
(); \

1414 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1415 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1416 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1420 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1421 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1424 
	`FINISH
(2);

	)

1426 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1427 
	`HANDLE_OPCODE
(
_İcode
 ) \

1429 
SticF›ld
* 
sf›ld
; \

1430 
vd¡
 = 
	`INST_AA
(
š¡
); \

1431 
»f
 = 
	`FETCH
(1); \

1432 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1433 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) { \

1435 
	`EXPORT_PC
(); \

1436 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1437 ià(
sf›ld
 =ğ
NULL
) \

1438 
	`GOTO_exû±iÚThrown
(); \

1440 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1441 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1442 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1443 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1445 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1448 
	`FINISH
(2);

	)

1450 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1451 
	`HANDLE_OPCODE
(
_İcode
 ) \

1453 
SticF›ld
* 
sf›ld
; \

1454 
vd¡
 = 
	`INST_AA
(
š¡
); \

1455 
»f
 = 
	`FETCH
(1); \

1456 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1457 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1458 ià(
sf›ld
 =ğ
NULL
) { \

1459 
	`EXPORT_PC
(); \

1460 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1461 ià(
sf›ld
 =ğ
NULL
) \

1462 
	`GOTO_exû±iÚThrown
(); \

1464 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1465 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1466 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1467 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1469 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1470 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1473 
	`FINISH
(2);

	)

1479 #undeà
»tv®


1480 #undeà
pc


1481 #undeà
å


1482 #undeà
curM‘hod


1483 #undeà
m‘hodCÏssDex


1484 #undeà
£lf


1485 #undeà
debugT¿ckedRefS¹


1487 #ifdeà
WITH_TAINT_TRACKING


1488 #undeà
¹ašt


1492 
	~<š‰y³s.h
>

1502 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1504 
ušt32_t
 
rPC
 
	`asm
("r4");

1505 
ušt32_t
 
rFP
 
	`asm
("r5");

1506 
ušt32_t
 
rGLUE
 
	`asm
("r6");

1507 
ušt32_t
 
rINST
 
	`asm
("r7");

1508 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1509 
ušt32_t
 
r9
 
	`asm
("r9");

1510 
ušt32_t
 
r10
 
	`asm
("r10");

1512 
dvmAsmIn¡ruùiÚS¹
[];

1514 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1515 
	`´štf
(" :„PC=%08x„FP=%08x„GLUE=%08x„INST=%08x\n",

1516 
rPC
, 
rFP
, 
rGLUE
, 
rINST
);

1517 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1519 
M‹½Glue
* 
glue
 = (M‹½Glue*è
rGLUE
;

1520 cÚ¡ 
M‘hod
* 
m‘hod
 = 
glue
->method;

1521 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1527 
	}
}

1532 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1534 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1535 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1536 #ifdeà
EASY_GDB


1537 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1538 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1539 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1541 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1542 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1543 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1544 *(
u4
*)
å
);

1546 
	}
}

1551 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1557 
boŞ
 
isDœeù
 =

1558 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1559 (
m‘hod
->
Çme
[0] == '<');

1561 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1563 
	`´štf
("<%c:%s.%s %s> ",

1564 
isDœeù
 ? 'D' : 'V',

1565 
m‘hod
->
şazz
->
desütÜ
,

1566 
m‘hod
->
Çme
,

1567 
desc
);

1569 
	`ä“
(
desc
);

1570 
	}
}

	@mterp/out/InterpC-armv5te-vfp.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

590 
	#INTERP_TYPE
 
INTERP_STD


	)

591 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

592 
	#CHECK_TRACKED_REFS
(è(()0)

	)

599 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

600 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

602 
	#GOTO_TARGET
(
_rg‘
, ...) \

603 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

604 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

605 
u2
 
š¡
 = 
	`FETCH
(0); \

606 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

607 
SckSaveA»a
* 
debugSaveA»a
;

	)

609 
	#GOTO_TARGET_END
 }

	)

615 
	#»tv®
 
glue
->
»tv®


	)

616 
	#pc
 
glue
->
pc


	)

617 
	#å
 
glue
->
å


	)

618 
	#curM‘hod
 
glue
->
m‘hod


	)

619 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

620 
	#£lf
 
glue
->
£lf


	)

621 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

623 #ifdeà
WITH_TAINT_TRACKING


624 
	#¹ašt
 
glue
->
¹ašt


	)

628 
	#STUB_HACK
(
x
è
	)
x

636 
	#HANDLE_OPCODE
(
_İ
) \

637 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

638 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

639 
u2
 
š¡
 = 
	`FETCH
(0);

	)

641 
	#OP_END
 }

	)

647 
	#FINISH
(
_off£t
) { \

648 
	`ADJUST_PC
(
_off£t
); \

649 
	`CHECK_DEBUG_AND_PROF
(); \

650 
	`CHECK_TRACKED_REFS
(); \

652 }

	)

661 
	#GOTO_exû±iÚThrown
() \

663 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

665 } 
çl£
)

	)

667 
	#GOTO_»tuºFromM‘hod
() \

669 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

671 } 
çl£
)

	)

673 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

675 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

677 } 
çl£
)

	)

679 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

681 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

682 
_v¤c1
, 
_vd¡
); \

684 } 
çl£
)

	)

690 
	#GOTO_ba
() \

691 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

692 
	#GOTO_ba_sw™ch
() \

693 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

701 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

702 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

706 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

707 
	`ADJUST_PC
(
_pÿdj
); \

708 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

709 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

710 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

711 
	`GOTO_ba_sw™ch
(); \

713 }

	)

718 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

719 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

720 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

721 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

722 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

723 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

724 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

725 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

726 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

727 
u2
 
couÁ
, u2 
»gs
);

728 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

729 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

743 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

744 
	`HANDLE_OPCODE
(
_İcode
 ) \

745 
vd¡
 = 
	`INST_A
(
š¡
); \

746 
v¤c1
 = 
	`INST_B
(
š¡
); \

747 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

748 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

749 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

751 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

752 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

754 
	`FINISH
(1);

	)

756 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

757 
_tovty³
, 
_tÜty³
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
_äomvty³
 
v®
; \

762 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

763 
vd¡
 = 
	`INST_A
(
š¡
); \

764 
v¤c1
 = 
	`INST_B
(
š¡
); \

765 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

766 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

767 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

768 
štMax
 = ~
štMš
; \

769 
»suÉ
 = (
_tovty³
è
v®
; \

770 ià(
v®
 >ğ
štMax
) \

771 
»suÉ
 = 
štMax
; \

772 ià(
v®
 <ğ
štMš
) \

773 
»suÉ
 = 
štMš
; \

774 ià(
v®
 != val) \

775 
»suÉ
 = 0; \

777 
»suÉ
 = (
_tovty³
è
v®
; \

778 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

780 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

781 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

784 
	`FINISH
(1);

	)

786 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

787 
	`HANDLE_OPCODE
(
_İcode
 ) \

788 
vd¡
 = 
	`INST_A
(
š¡
); \

789 
v¤c1
 = 
	`INST_B
(
š¡
); \

790 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

791 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

793 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

795 
	`FINISH
(1);

	)

798 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

799 
	`HANDLE_OPCODE
(
_İcode
 ) \

801 
»suÉ
; \

802 
u2
 
»gs
; \

803 
_v¬Ty³
 
v®1
, 
v®2
; \

804 
vd¡
 = 
	`INST_AA
(
š¡
); \

805 
»gs
 = 
	`FETCH
(1); \

806 
v¤c1
 = 
»gs
 & 0xff; \

807 
v¤c2
 = 
»gs
 >> 8; \

808 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

809 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

810 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

811 ià(
v®1
 =ğ
v®2
) \

812 
»suÉ
 = 0; \

813 ià(
v®1
 < 
v®2
) \

814 
»suÉ
 = -1; \

815 ià(
v®1
 > 
v®2
) \

816 
»suÉ
 = 1; \

818 
»suÉ
 = (
_ÇnV®
); \

819 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

820 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

822 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

825 
	`FINISH
(2);

	)

827 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

828 
	`HANDLE_OPCODE
(
_İcode
 ) \

829 
v¤c1
 = 
	`INST_A
(
š¡
); \

830 
v¤c2
 = 
	`INST_B
(
š¡
); \

831 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

832 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

833 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

834 
b¿nchOff£t
); \

835 
	`ILOGV
("> branchaken"); \

836 ià(
b¿nchOff£t
 < 0) \

837 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

838 
	`FINISH
(
b¿nchOff£t
); \

840 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

841 
	`FINISH
(2); \

842 }

	)

844 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

845 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
v¤c1
 = 
	`INST_AA
(
š¡
); \

847 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

848 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

849 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

850 
	`ILOGV
("> branchaken"); \

851 ià(
b¿nchOff£t
 < 0) \

852 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

853 
	`FINISH
(
b¿nchOff£t
); \

855 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

856 
	`FINISH
(2); \

857 }

	)

859 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

860 
	`HANDLE_OPCODE
(
_İcode
 ) \

861 
vd¡
 = 
	`INST_A
(
š¡
); \

862 
v¤c1
 = 
	`INST_B
(
š¡
); \

863 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

864 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

866 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

868 
	`FINISH
(1);

	)

870 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

871 
	`HANDLE_OPCODE
(
_İcode
 ) \

873 
u2
 
¤cRegs
; \

874 
vd¡
 = 
	`INST_AA
(
š¡
); \

875 
¤cRegs
 = 
	`FETCH
(1); \

876 
v¤c1
 = 
¤cRegs
 & 0xff; \

877 
v¤c2
 = 
¤cRegs
 >> 8; \

878 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

879 ià(
_chkdiv
 != 0) { \

880 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

881 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

882 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

883 ià(
£cÚdV®
 == 0) { \

884 
	`EXPORT_PC
(); \

885 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

887 
	`GOTO_exû±iÚThrown
(); \

889 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

890 ià(
_chkdiv
 == 1) \

891 
»suÉ
 = 
fœ¡V®
; \

893 
»suÉ
 = 0; \

895 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

897 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

900 
	`SET_REGISTER
(
vd¡
, \

901 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

904 
	`SET_REGISTER_TAINT
(
vd¡
, \

905 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

908 
	`FINISH
(2);

	)

910 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

911 
	`HANDLE_OPCODE
(
_İcode
 ) \

913 
u2
 
¤cRegs
; \

914 
vd¡
 = 
	`INST_AA
(
š¡
); \

915 
¤cRegs
 = 
	`FETCH
(1); \

916 
v¤c1
 = 
¤cRegs
 & 0xff; \

917 
v¤c2
 = 
¤cRegs
 >> 8; \

918 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

919 
	`SET_REGISTER
(
vd¡
, \

920 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

922 
	`SET_REGISTER_TAINT
(
vd¡
, \

923 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
v¤c2
 = 
	`FETCH
(1); \

933 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

934 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

935 ià(
_chkdiv
 != 0) { \

936 
s4
 
fœ¡V®
, 
»suÉ
; \

937 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

938 ià((
s2
è
v¤c2
 == 0) { \

939 
	`EXPORT_PC
(); \

940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

942 
	`GOTO_exû±iÚThrown
(); \

944 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

946 ià(
_chkdiv
 == 1) \

947 
»suÉ
 = 
fœ¡V®
; \

949 
»suÉ
 = 0; \

951 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

953 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

956 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

959 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

961 
	`FINISH
(2);

	)

963 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

964 
	`HANDLE_OPCODE
(
_İcode
 ) \

966 
u2
 
l™Info
; \

967 
vd¡
 = 
	`INST_AA
(
š¡
); \

968 
l™Info
 = 
	`FETCH
(1); \

969 
v¤c1
 = 
l™Info
 & 0xff; \

970 
v¤c2
 = 
l™Info
 >> 8; \

971 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

972 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

973 ià(
_chkdiv
 != 0) { \

974 
s4
 
fœ¡V®
, 
»suÉ
; \

975 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

976 ià((
s1
è
v¤c2
 == 0) { \

977 
	`EXPORT_PC
(); \

978 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

980 
	`GOTO_exû±iÚThrown
(); \

982 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

983 ià(
_chkdiv
 == 1) \

984 
»suÉ
 = 
fœ¡V®
; \

986 
»suÉ
 = 0; \

988 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

990 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

992 
	`SET_REGISTER
(
vd¡
, \

993 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

999 
	`FINISH
(2);

	)

1001 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1002 
	`HANDLE_OPCODE
(
_İcode
 ) \

1004 
u2
 
l™Info
; \

1005 
vd¡
 = 
	`INST_AA
(
š¡
); \

1006 
l™Info
 = 
	`FETCH
(1); \

1007 
v¤c1
 = 
l™Info
 & 0xff; \

1008 
v¤c2
 = 
l™Info
 >> 8; \

1009 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

1010 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1011 
	`SET_REGISTER
(
vd¡
, \

1012 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

1014 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

1017 
	`FINISH
(2);

	)

1019 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1020 
	`HANDLE_OPCODE
(
_İcode
 ) \

1021 
vd¡
 = 
	`INST_A
(
š¡
); \

1022 
v¤c1
 = 
	`INST_B
(
š¡
); \

1023 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1024 ià(
_chkdiv
 != 0) { \

1025 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1026 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1027 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1028 ià(
£cÚdV®
 == 0) { \

1029 
	`EXPORT_PC
(); \

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1032 
	`GOTO_exû±iÚThrown
(); \

1034 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1035 ià(
_chkdiv
 == 1) \

1036 
»suÉ
 = 
fœ¡V®
; \

1038 
»suÉ
 = 0; \

1040 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1042 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1044 
	`SET_REGISTER
(
vd¡
, \

1045 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1048 
	`SET_REGISTER_TAINT
(
vd¡
, \

1049 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1051 
	`FINISH
(1);

	)

1053 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1054 
	`HANDLE_OPCODE
(
_İcode
 ) \

1055 
vd¡
 = 
	`INST_A
(
š¡
); \

1056 
v¤c1
 = 
	`INST_B
(
š¡
); \

1057 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1058 
	`SET_REGISTER
(
vd¡
, \

1059 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1061 
	`SET_REGISTER_TAINT
(
vd¡
, \

1062 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1064 
	`FINISH
(1);

	)

1066 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1067 
	`HANDLE_OPCODE
(
_İcode
 ) \

1069 
u2
 
¤cRegs
; \

1070 
vd¡
 = 
	`INST_AA
(
š¡
); \

1071 
¤cRegs
 = 
	`FETCH
(1); \

1072 
v¤c1
 = 
¤cRegs
 & 0xff; \

1073 
v¤c2
 = 
¤cRegs
 >> 8; \

1074 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1075 ià(
_chkdiv
 != 0) { \

1076 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1077 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1078 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1079 ià(
£cÚdV®
 == 0LL) { \

1080 
	`EXPORT_PC
(); \

1081 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1083 
	`GOTO_exû±iÚThrown
(); \

1085 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1086 
£cÚdV®
 == -1LL) \

1088 ià(
_chkdiv
 == 1) \

1089 
»suÉ
 = 
fœ¡V®
; \

1091 
»suÉ
 = 0; \

1093 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1095 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1097 
	`SET_REGISTER_WIDE
(
vd¡
, \

1098 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1101 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1102 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1105 
	`FINISH
(2);

	)

1107 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1108 
	`HANDLE_OPCODE
(
_İcode
 ) \

1110 
u2
 
¤cRegs
; \

1111 
vd¡
 = 
	`INST_AA
(
š¡
); \

1112 
¤cRegs
 = 
	`FETCH
(1); \

1113 
v¤c1
 = 
¤cRegs
 & 0xff; \

1114 
v¤c2
 = 
¤cRegs
 >> 8; \

1115 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1116 
	`SET_REGISTER_WIDE
(
vd¡
, \

1117 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1119 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1120 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1123 
	`FINISH
(2);

	)

1125 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1126 
	`HANDLE_OPCODE
(
_İcode
 ) \

1127 
vd¡
 = 
	`INST_A
(
š¡
); \

1128 
v¤c1
 = 
	`INST_B
(
š¡
); \

1129 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1130 ià(
_chkdiv
 != 0) { \

1131 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1132 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1133 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1134 ià(
£cÚdV®
 == 0LL) { \

1135 
	`EXPORT_PC
(); \

1136 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1138 
	`GOTO_exû±iÚThrown
(); \

1140 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1141 
£cÚdV®
 == -1LL) \

1143 ià(
_chkdiv
 == 1) \

1144 
»suÉ
 = 
fœ¡V®
; \

1146 
»suÉ
 = 0; \

1148 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1150 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1152 
	`SET_REGISTER_WIDE
(
vd¡
, \

1153 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1156 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1157 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1159 
	`FINISH
(1);

	)

1161 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1162 
	`HANDLE_OPCODE
(
_İcode
 ) \

1163 
vd¡
 = 
	`INST_A
(
š¡
); \

1164 
v¤c1
 = 
	`INST_B
(
š¡
); \

1165 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1166 
	`SET_REGISTER_WIDE
(
vd¡
, \

1167 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1170 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1172 
	`FINISH
(1);

	)

1174 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1175 
	`HANDLE_OPCODE
(
_İcode
 ) \

1177 
u2
 
¤cRegs
; \

1178 
vd¡
 = 
	`INST_AA
(
š¡
); \

1179 
¤cRegs
 = 
	`FETCH
(1); \

1180 
v¤c1
 = 
¤cRegs
 & 0xff; \

1181 
v¤c2
 = 
¤cRegs
 >> 8; \

1182 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1183 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1184 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1186 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1187 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1190 
	`FINISH
(2);

	)

1192 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1193 
	`HANDLE_OPCODE
(
_İcode
 ) \

1195 
u2
 
¤cRegs
; \

1196 
vd¡
 = 
	`INST_AA
(
š¡
); \

1197 
¤cRegs
 = 
	`FETCH
(1); \

1198 
v¤c1
 = 
¤cRegs
 & 0xff; \

1199 
v¤c2
 = 
¤cRegs
 >> 8; \

1200 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1208 
	`FINISH
(2);

	)

1210 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1211 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
vd¡
 = 
	`INST_A
(
š¡
); \

1213 
v¤c1
 = 
	`INST_B
(
š¡
); \

1214 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1215 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1216 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1218 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1219 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1221 
	`FINISH
(1);

	)

1223 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1224 
	`HANDLE_OPCODE
(
_İcode
 ) \

1225 
vd¡
 = 
	`INST_A
(
š¡
); \

1226 
v¤c1
 = 
	`INST_B
(
š¡
); \

1227 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1228 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1229 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1231 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1232 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1234 
	`FINISH
(1);

	)

1236 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1237 
	`HANDLE_OPCODE
(
_İcode
 ) \

1239 
A¼ayObjeù
* 
¬¿yObj
; \

1240 
u2
 
¬¿yInfo
; \

1241 
	`EXPORT_PC
(); \

1242 
vd¡
 = 
	`INST_AA
(
š¡
); \

1243 
¬¿yInfo
 = 
	`FETCH
(1); \

1244 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1245 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1246 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1248 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1249 
	`GOTO_exû±iÚThrown
(); \

1250 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1251 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1252 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1253 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1254 
NULL
); \

1255 
	`GOTO_exû±iÚThrown
(); \

1257 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1258 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1260 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1261 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1263 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1265 
	`FINISH
(2);

	)

1267 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1268 
	`HANDLE_OPCODE
(
_İcode
 ) \

1270 
A¼ayObjeù
* 
¬¿yObj
; \

1271 
u2
 
¬¿yInfo
; \

1272 
	`EXPORT_PC
(); \

1273 
vd¡
 = 
	`INST_AA
(
š¡
); \

1274 
¬¿yInfo
 = 
	`FETCH
(1); \

1275 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1276 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1277 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1278 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1279 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1280 
	`GOTO_exû±iÚThrown
(); \

1281 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1282 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1283 
NULL
); \

1284 
	`GOTO_exû±iÚThrown
(); \

1286 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1287 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1288 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1290 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1291 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1292 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1295 
	`FINISH
(2);

	)

1314 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1315 
	`HANDLE_OPCODE
(
_İcode
 ) \

1317 
In¡F›ld
* 
if›ld
; \

1318 
Objeù
* 
obj
; \

1319 
	`EXPORT_PC
(); \

1320 
vd¡
 = 
	`INST_A
(
š¡
); \

1321 
v¤c1
 = 
	`INST_B
(
š¡
); \

1322 
»f
 = 
	`FETCH
(1); \

1323 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1324 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1325 ià(!
	`checkFÜNuÎ
(
obj
)) \

1326 
	`GOTO_exû±iÚThrown
(); \

1327 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1328 ià(
if›ld
 =ğ
NULL
) { \

1329 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1330 ià(
if›ld
 =ğ
NULL
) \

1331 
	`GOTO_exû±iÚThrown
(); \

1333 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1334 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1335 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1336 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1339 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1340 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1341 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1344 
	`FINISH
(2);

	)

1346 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1347 
	`HANDLE_OPCODE
(
_İcode
 ) \

1349 
Objeù
* 
obj
; \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1354 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1355 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1356 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1357 
	`GOTO_exû±iÚThrown
(); \

1358 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1359 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1360 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1364 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1365 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1366 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1369 
	`FINISH
(2);

	)

1371 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1372 
	`HANDLE_OPCODE
(
_İcode
 ) \

1374 
In¡F›ld
* 
if›ld
; \

1375 
Objeù
* 
obj
; \

1376 
	`EXPORT_PC
(); \

1377 
vd¡
 = 
	`INST_A
(
š¡
); \

1378 
v¤c1
 = 
	`INST_B
(
š¡
); \

1379 
»f
 = 
	`FETCH
(1); \

1380 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1381 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1382 ià(!
	`checkFÜNuÎ
(
obj
)) \

1383 
	`GOTO_exû±iÚThrown
(); \

1384 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1385 ià(
if›ld
 =ğ
NULL
) { \

1386 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1387 ià(
if›ld
 =ğ
NULL
) \

1388 
	`GOTO_exû±iÚThrown
(); \

1390 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1391 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1392 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1393 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1394 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1396 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1397 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1400 
	`FINISH
(2);

	)

1402 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1403 
	`HANDLE_OPCODE
(
_İcode
 ) \

1405 
Objeù
* 
obj
; \

1406 
vd¡
 = 
	`INST_A
(
š¡
); \

1407 
v¤c1
 = 
	`INST_B
(
š¡
); \

1408 
»f
 = 
	`FETCH
(1); \

1409 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1410 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1411 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1412 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1413 
	`GOTO_exû±iÚThrown
(); \

1414 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1415 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1416 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1420 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1421 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1424 
	`FINISH
(2);

	)

1426 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1427 
	`HANDLE_OPCODE
(
_İcode
 ) \

1429 
SticF›ld
* 
sf›ld
; \

1430 
vd¡
 = 
	`INST_AA
(
š¡
); \

1431 
»f
 = 
	`FETCH
(1); \

1432 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1433 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) { \

1435 
	`EXPORT_PC
(); \

1436 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1437 ià(
sf›ld
 =ğ
NULL
) \

1438 
	`GOTO_exû±iÚThrown
(); \

1440 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1441 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1442 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1443 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1445 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1448 
	`FINISH
(2);

	)

1450 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1451 
	`HANDLE_OPCODE
(
_İcode
 ) \

1453 
SticF›ld
* 
sf›ld
; \

1454 
vd¡
 = 
	`INST_AA
(
š¡
); \

1455 
»f
 = 
	`FETCH
(1); \

1456 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1457 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1458 ià(
sf›ld
 =ğ
NULL
) { \

1459 
	`EXPORT_PC
(); \

1460 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1461 ià(
sf›ld
 =ğ
NULL
) \

1462 
	`GOTO_exû±iÚThrown
(); \

1464 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1465 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1466 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1467 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1469 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1470 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1473 
	`FINISH
(2);

	)

1479 #undeà
»tv®


1480 #undeà
pc


1481 #undeà
å


1482 #undeà
curM‘hod


1483 #undeà
m‘hodCÏssDex


1484 #undeà
£lf


1485 #undeà
debugT¿ckedRefS¹


1487 #ifdeà
WITH_TAINT_TRACKING


1488 #undeà
¹ašt


1492 
	~<š‰y³s.h
>

1502 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1504 
ušt32_t
 
rPC
 
	`asm
("r4");

1505 
ušt32_t
 
rFP
 
	`asm
("r5");

1506 
ušt32_t
 
rGLUE
 
	`asm
("r6");

1507 
ušt32_t
 
rINST
 
	`asm
("r7");

1508 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1509 
ušt32_t
 
r9
 
	`asm
("r9");

1510 
ušt32_t
 
r10
 
	`asm
("r10");

1512 
dvmAsmIn¡ruùiÚS¹
[];

1514 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1515 
	`´štf
(" :„PC=%08x„FP=%08x„GLUE=%08x„INST=%08x\n",

1516 
rPC
, 
rFP
, 
rGLUE
, 
rINST
);

1517 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1519 
M‹½Glue
* 
glue
 = (M‹½Glue*è
rGLUE
;

1520 cÚ¡ 
M‘hod
* 
m‘hod
 = 
glue
->method;

1521 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1527 
	}
}

1532 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1534 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1535 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1536 #ifdeà
EASY_GDB


1537 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1538 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1539 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1541 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1542 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1543 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1544 *(
u4
*)
å
);

1546 
	}
}

1551 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1557 
boŞ
 
isDœeù
 =

1558 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1559 (
m‘hod
->
Çme
[0] == '<');

1561 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1563 
	`´štf
("<%c:%s.%s %s> ",

1564 
isDœeù
 ? 'D' : 'V',

1565 
m‘hod
->
şazz
->
desütÜ
,

1566 
m‘hod
->
Çme
,

1567 
desc
);

1569 
	`ä“
(
desc
);

1570 
	}
}

	@mterp/out/InterpC-armv5te.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

590 
	#INTERP_TYPE
 
INTERP_STD


	)

591 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

592 
	#CHECK_TRACKED_REFS
(è(()0)

	)

599 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

600 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

602 
	#GOTO_TARGET
(
_rg‘
, ...) \

603 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

604 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

605 
u2
 
š¡
 = 
	`FETCH
(0); \

606 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

607 
SckSaveA»a
* 
debugSaveA»a
;

	)

609 
	#GOTO_TARGET_END
 }

	)

615 
	#»tv®
 
glue
->
»tv®


	)

616 
	#pc
 
glue
->
pc


	)

617 
	#å
 
glue
->
å


	)

618 
	#curM‘hod
 
glue
->
m‘hod


	)

619 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

620 
	#£lf
 
glue
->
£lf


	)

621 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

623 #ifdeà
WITH_TAINT_TRACKING


624 
	#¹ašt
 
glue
->
¹ašt


	)

628 
	#STUB_HACK
(
x
è
	)
x

636 
	#HANDLE_OPCODE
(
_İ
) \

637 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

638 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

639 
u2
 
š¡
 = 
	`FETCH
(0);

	)

641 
	#OP_END
 }

	)

647 
	#FINISH
(
_off£t
) { \

648 
	`ADJUST_PC
(
_off£t
); \

649 
	`CHECK_DEBUG_AND_PROF
(); \

650 
	`CHECK_TRACKED_REFS
(); \

652 }

	)

661 
	#GOTO_exû±iÚThrown
() \

663 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

665 } 
çl£
)

	)

667 
	#GOTO_»tuºFromM‘hod
() \

669 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

671 } 
çl£
)

	)

673 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

675 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

677 } 
çl£
)

	)

679 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

681 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

682 
_v¤c1
, 
_vd¡
); \

684 } 
çl£
)

	)

690 
	#GOTO_ba
() \

691 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

692 
	#GOTO_ba_sw™ch
() \

693 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

701 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

702 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

706 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

707 
	`ADJUST_PC
(
_pÿdj
); \

708 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

709 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

710 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

711 
	`GOTO_ba_sw™ch
(); \

713 }

	)

718 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

719 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

720 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

721 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

722 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

723 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

724 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

725 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

726 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

727 
u2
 
couÁ
, u2 
»gs
);

728 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

729 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

743 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

744 
	`HANDLE_OPCODE
(
_İcode
 ) \

745 
vd¡
 = 
	`INST_A
(
š¡
); \

746 
v¤c1
 = 
	`INST_B
(
š¡
); \

747 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

748 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

749 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

751 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

752 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

754 
	`FINISH
(1);

	)

756 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

757 
_tovty³
, 
_tÜty³
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
_äomvty³
 
v®
; \

762 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

763 
vd¡
 = 
	`INST_A
(
š¡
); \

764 
v¤c1
 = 
	`INST_B
(
š¡
); \

765 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

766 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

767 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

768 
štMax
 = ~
štMš
; \

769 
»suÉ
 = (
_tovty³
è
v®
; \

770 ià(
v®
 >ğ
štMax
) \

771 
»suÉ
 = 
štMax
; \

772 ià(
v®
 <ğ
štMš
) \

773 
»suÉ
 = 
štMš
; \

774 ià(
v®
 != val) \

775 
»suÉ
 = 0; \

777 
»suÉ
 = (
_tovty³
è
v®
; \

778 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

780 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

781 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

784 
	`FINISH
(1);

	)

786 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

787 
	`HANDLE_OPCODE
(
_İcode
 ) \

788 
vd¡
 = 
	`INST_A
(
š¡
); \

789 
v¤c1
 = 
	`INST_B
(
š¡
); \

790 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

791 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

793 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

795 
	`FINISH
(1);

	)

798 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

799 
	`HANDLE_OPCODE
(
_İcode
 ) \

801 
»suÉ
; \

802 
u2
 
»gs
; \

803 
_v¬Ty³
 
v®1
, 
v®2
; \

804 
vd¡
 = 
	`INST_AA
(
š¡
); \

805 
»gs
 = 
	`FETCH
(1); \

806 
v¤c1
 = 
»gs
 & 0xff; \

807 
v¤c2
 = 
»gs
 >> 8; \

808 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

809 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

810 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

811 ià(
v®1
 =ğ
v®2
) \

812 
»suÉ
 = 0; \

813 ià(
v®1
 < 
v®2
) \

814 
»suÉ
 = -1; \

815 ià(
v®1
 > 
v®2
) \

816 
»suÉ
 = 1; \

818 
»suÉ
 = (
_ÇnV®
); \

819 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

820 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

822 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

825 
	`FINISH
(2);

	)

827 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

828 
	`HANDLE_OPCODE
(
_İcode
 ) \

829 
v¤c1
 = 
	`INST_A
(
š¡
); \

830 
v¤c2
 = 
	`INST_B
(
š¡
); \

831 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

832 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

833 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

834 
b¿nchOff£t
); \

835 
	`ILOGV
("> branchaken"); \

836 ià(
b¿nchOff£t
 < 0) \

837 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

838 
	`FINISH
(
b¿nchOff£t
); \

840 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

841 
	`FINISH
(2); \

842 }

	)

844 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

845 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
v¤c1
 = 
	`INST_AA
(
š¡
); \

847 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

848 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

849 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

850 
	`ILOGV
("> branchaken"); \

851 ià(
b¿nchOff£t
 < 0) \

852 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

853 
	`FINISH
(
b¿nchOff£t
); \

855 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

856 
	`FINISH
(2); \

857 }

	)

859 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

860 
	`HANDLE_OPCODE
(
_İcode
 ) \

861 
vd¡
 = 
	`INST_A
(
š¡
); \

862 
v¤c1
 = 
	`INST_B
(
š¡
); \

863 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

864 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

866 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

868 
	`FINISH
(1);

	)

870 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

871 
	`HANDLE_OPCODE
(
_İcode
 ) \

873 
u2
 
¤cRegs
; \

874 
vd¡
 = 
	`INST_AA
(
š¡
); \

875 
¤cRegs
 = 
	`FETCH
(1); \

876 
v¤c1
 = 
¤cRegs
 & 0xff; \

877 
v¤c2
 = 
¤cRegs
 >> 8; \

878 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

879 ià(
_chkdiv
 != 0) { \

880 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

881 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

882 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

883 ià(
£cÚdV®
 == 0) { \

884 
	`EXPORT_PC
(); \

885 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

887 
	`GOTO_exû±iÚThrown
(); \

889 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

890 ià(
_chkdiv
 == 1) \

891 
»suÉ
 = 
fœ¡V®
; \

893 
»suÉ
 = 0; \

895 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

897 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

900 
	`SET_REGISTER
(
vd¡
, \

901 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

904 
	`SET_REGISTER_TAINT
(
vd¡
, \

905 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

908 
	`FINISH
(2);

	)

910 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

911 
	`HANDLE_OPCODE
(
_İcode
 ) \

913 
u2
 
¤cRegs
; \

914 
vd¡
 = 
	`INST_AA
(
š¡
); \

915 
¤cRegs
 = 
	`FETCH
(1); \

916 
v¤c1
 = 
¤cRegs
 & 0xff; \

917 
v¤c2
 = 
¤cRegs
 >> 8; \

918 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

919 
	`SET_REGISTER
(
vd¡
, \

920 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

922 
	`SET_REGISTER_TAINT
(
vd¡
, \

923 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
v¤c2
 = 
	`FETCH
(1); \

933 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

934 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

935 ià(
_chkdiv
 != 0) { \

936 
s4
 
fœ¡V®
, 
»suÉ
; \

937 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

938 ià((
s2
è
v¤c2
 == 0) { \

939 
	`EXPORT_PC
(); \

940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

942 
	`GOTO_exû±iÚThrown
(); \

944 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

946 ià(
_chkdiv
 == 1) \

947 
»suÉ
 = 
fœ¡V®
; \

949 
»suÉ
 = 0; \

951 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

953 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

956 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

959 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

961 
	`FINISH
(2);

	)

963 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

964 
	`HANDLE_OPCODE
(
_İcode
 ) \

966 
u2
 
l™Info
; \

967 
vd¡
 = 
	`INST_AA
(
š¡
); \

968 
l™Info
 = 
	`FETCH
(1); \

969 
v¤c1
 = 
l™Info
 & 0xff; \

970 
v¤c2
 = 
l™Info
 >> 8; \

971 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

972 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

973 ià(
_chkdiv
 != 0) { \

974 
s4
 
fœ¡V®
, 
»suÉ
; \

975 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

976 ià((
s1
è
v¤c2
 == 0) { \

977 
	`EXPORT_PC
(); \

978 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

980 
	`GOTO_exû±iÚThrown
(); \

982 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

983 ià(
_chkdiv
 == 1) \

984 
»suÉ
 = 
fœ¡V®
; \

986 
»suÉ
 = 0; \

988 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

990 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

992 
	`SET_REGISTER
(
vd¡
, \

993 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

999 
	`FINISH
(2);

	)

1001 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1002 
	`HANDLE_OPCODE
(
_İcode
 ) \

1004 
u2
 
l™Info
; \

1005 
vd¡
 = 
	`INST_AA
(
š¡
); \

1006 
l™Info
 = 
	`FETCH
(1); \

1007 
v¤c1
 = 
l™Info
 & 0xff; \

1008 
v¤c2
 = 
l™Info
 >> 8; \

1009 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

1010 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1011 
	`SET_REGISTER
(
vd¡
, \

1012 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

1014 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

1017 
	`FINISH
(2);

	)

1019 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1020 
	`HANDLE_OPCODE
(
_İcode
 ) \

1021 
vd¡
 = 
	`INST_A
(
š¡
); \

1022 
v¤c1
 = 
	`INST_B
(
š¡
); \

1023 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1024 ià(
_chkdiv
 != 0) { \

1025 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1026 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1027 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1028 ià(
£cÚdV®
 == 0) { \

1029 
	`EXPORT_PC
(); \

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1032 
	`GOTO_exû±iÚThrown
(); \

1034 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1035 ià(
_chkdiv
 == 1) \

1036 
»suÉ
 = 
fœ¡V®
; \

1038 
»suÉ
 = 0; \

1040 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1042 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1044 
	`SET_REGISTER
(
vd¡
, \

1045 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1048 
	`SET_REGISTER_TAINT
(
vd¡
, \

1049 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1051 
	`FINISH
(1);

	)

1053 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1054 
	`HANDLE_OPCODE
(
_İcode
 ) \

1055 
vd¡
 = 
	`INST_A
(
š¡
); \

1056 
v¤c1
 = 
	`INST_B
(
š¡
); \

1057 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1058 
	`SET_REGISTER
(
vd¡
, \

1059 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1061 
	`SET_REGISTER_TAINT
(
vd¡
, \

1062 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1064 
	`FINISH
(1);

	)

1066 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1067 
	`HANDLE_OPCODE
(
_İcode
 ) \

1069 
u2
 
¤cRegs
; \

1070 
vd¡
 = 
	`INST_AA
(
š¡
); \

1071 
¤cRegs
 = 
	`FETCH
(1); \

1072 
v¤c1
 = 
¤cRegs
 & 0xff; \

1073 
v¤c2
 = 
¤cRegs
 >> 8; \

1074 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1075 ià(
_chkdiv
 != 0) { \

1076 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1077 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1078 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1079 ià(
£cÚdV®
 == 0LL) { \

1080 
	`EXPORT_PC
(); \

1081 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1083 
	`GOTO_exû±iÚThrown
(); \

1085 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1086 
£cÚdV®
 == -1LL) \

1088 ià(
_chkdiv
 == 1) \

1089 
»suÉ
 = 
fœ¡V®
; \

1091 
»suÉ
 = 0; \

1093 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1095 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1097 
	`SET_REGISTER_WIDE
(
vd¡
, \

1098 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1101 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1102 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1105 
	`FINISH
(2);

	)

1107 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1108 
	`HANDLE_OPCODE
(
_İcode
 ) \

1110 
u2
 
¤cRegs
; \

1111 
vd¡
 = 
	`INST_AA
(
š¡
); \

1112 
¤cRegs
 = 
	`FETCH
(1); \

1113 
v¤c1
 = 
¤cRegs
 & 0xff; \

1114 
v¤c2
 = 
¤cRegs
 >> 8; \

1115 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1116 
	`SET_REGISTER_WIDE
(
vd¡
, \

1117 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1119 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1120 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1123 
	`FINISH
(2);

	)

1125 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1126 
	`HANDLE_OPCODE
(
_İcode
 ) \

1127 
vd¡
 = 
	`INST_A
(
š¡
); \

1128 
v¤c1
 = 
	`INST_B
(
š¡
); \

1129 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1130 ià(
_chkdiv
 != 0) { \

1131 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1132 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1133 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1134 ià(
£cÚdV®
 == 0LL) { \

1135 
	`EXPORT_PC
(); \

1136 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1138 
	`GOTO_exû±iÚThrown
(); \

1140 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1141 
£cÚdV®
 == -1LL) \

1143 ià(
_chkdiv
 == 1) \

1144 
»suÉ
 = 
fœ¡V®
; \

1146 
»suÉ
 = 0; \

1148 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1150 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1152 
	`SET_REGISTER_WIDE
(
vd¡
, \

1153 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1156 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1157 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1159 
	`FINISH
(1);

	)

1161 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1162 
	`HANDLE_OPCODE
(
_İcode
 ) \

1163 
vd¡
 = 
	`INST_A
(
š¡
); \

1164 
v¤c1
 = 
	`INST_B
(
š¡
); \

1165 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1166 
	`SET_REGISTER_WIDE
(
vd¡
, \

1167 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1170 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1172 
	`FINISH
(1);

	)

1174 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1175 
	`HANDLE_OPCODE
(
_İcode
 ) \

1177 
u2
 
¤cRegs
; \

1178 
vd¡
 = 
	`INST_AA
(
š¡
); \

1179 
¤cRegs
 = 
	`FETCH
(1); \

1180 
v¤c1
 = 
¤cRegs
 & 0xff; \

1181 
v¤c2
 = 
¤cRegs
 >> 8; \

1182 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1183 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1184 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1186 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1187 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1190 
	`FINISH
(2);

	)

1192 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1193 
	`HANDLE_OPCODE
(
_İcode
 ) \

1195 
u2
 
¤cRegs
; \

1196 
vd¡
 = 
	`INST_AA
(
š¡
); \

1197 
¤cRegs
 = 
	`FETCH
(1); \

1198 
v¤c1
 = 
¤cRegs
 & 0xff; \

1199 
v¤c2
 = 
¤cRegs
 >> 8; \

1200 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1208 
	`FINISH
(2);

	)

1210 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1211 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
vd¡
 = 
	`INST_A
(
š¡
); \

1213 
v¤c1
 = 
	`INST_B
(
š¡
); \

1214 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1215 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1216 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1218 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1219 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1221 
	`FINISH
(1);

	)

1223 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1224 
	`HANDLE_OPCODE
(
_İcode
 ) \

1225 
vd¡
 = 
	`INST_A
(
š¡
); \

1226 
v¤c1
 = 
	`INST_B
(
š¡
); \

1227 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1228 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1229 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1231 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1232 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1234 
	`FINISH
(1);

	)

1236 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1237 
	`HANDLE_OPCODE
(
_İcode
 ) \

1239 
A¼ayObjeù
* 
¬¿yObj
; \

1240 
u2
 
¬¿yInfo
; \

1241 
	`EXPORT_PC
(); \

1242 
vd¡
 = 
	`INST_AA
(
š¡
); \

1243 
¬¿yInfo
 = 
	`FETCH
(1); \

1244 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1245 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1246 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1248 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1249 
	`GOTO_exû±iÚThrown
(); \

1250 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1251 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1252 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1253 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1254 
NULL
); \

1255 
	`GOTO_exû±iÚThrown
(); \

1257 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1258 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1260 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1261 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1263 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1265 
	`FINISH
(2);

	)

1267 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1268 
	`HANDLE_OPCODE
(
_İcode
 ) \

1270 
A¼ayObjeù
* 
¬¿yObj
; \

1271 
u2
 
¬¿yInfo
; \

1272 
	`EXPORT_PC
(); \

1273 
vd¡
 = 
	`INST_AA
(
š¡
); \

1274 
¬¿yInfo
 = 
	`FETCH
(1); \

1275 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1276 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1277 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1278 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1279 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1280 
	`GOTO_exû±iÚThrown
(); \

1281 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1282 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1283 
NULL
); \

1284 
	`GOTO_exû±iÚThrown
(); \

1286 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1287 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1288 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1290 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1291 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1292 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1295 
	`FINISH
(2);

	)

1314 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1315 
	`HANDLE_OPCODE
(
_İcode
 ) \

1317 
In¡F›ld
* 
if›ld
; \

1318 
Objeù
* 
obj
; \

1319 
	`EXPORT_PC
(); \

1320 
vd¡
 = 
	`INST_A
(
š¡
); \

1321 
v¤c1
 = 
	`INST_B
(
š¡
); \

1322 
»f
 = 
	`FETCH
(1); \

1323 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1324 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1325 ià(!
	`checkFÜNuÎ
(
obj
)) \

1326 
	`GOTO_exû±iÚThrown
(); \

1327 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1328 ià(
if›ld
 =ğ
NULL
) { \

1329 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1330 ià(
if›ld
 =ğ
NULL
) \

1331 
	`GOTO_exû±iÚThrown
(); \

1333 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1334 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1335 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1336 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1339 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1340 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1341 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1344 
	`FINISH
(2);

	)

1346 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1347 
	`HANDLE_OPCODE
(
_İcode
 ) \

1349 
Objeù
* 
obj
; \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1354 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1355 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1356 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1357 
	`GOTO_exû±iÚThrown
(); \

1358 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1359 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1360 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1364 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1365 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1366 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1369 
	`FINISH
(2);

	)

1371 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1372 
	`HANDLE_OPCODE
(
_İcode
 ) \

1374 
In¡F›ld
* 
if›ld
; \

1375 
Objeù
* 
obj
; \

1376 
	`EXPORT_PC
(); \

1377 
vd¡
 = 
	`INST_A
(
š¡
); \

1378 
v¤c1
 = 
	`INST_B
(
š¡
); \

1379 
»f
 = 
	`FETCH
(1); \

1380 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1381 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1382 ià(!
	`checkFÜNuÎ
(
obj
)) \

1383 
	`GOTO_exû±iÚThrown
(); \

1384 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1385 ià(
if›ld
 =ğ
NULL
) { \

1386 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1387 ià(
if›ld
 =ğ
NULL
) \

1388 
	`GOTO_exû±iÚThrown
(); \

1390 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1391 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1392 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1393 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1394 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1396 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1397 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1400 
	`FINISH
(2);

	)

1402 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1403 
	`HANDLE_OPCODE
(
_İcode
 ) \

1405 
Objeù
* 
obj
; \

1406 
vd¡
 = 
	`INST_A
(
š¡
); \

1407 
v¤c1
 = 
	`INST_B
(
š¡
); \

1408 
»f
 = 
	`FETCH
(1); \

1409 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1410 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1411 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1412 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1413 
	`GOTO_exû±iÚThrown
(); \

1414 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1415 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1416 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1420 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1421 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1424 
	`FINISH
(2);

	)

1426 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1427 
	`HANDLE_OPCODE
(
_İcode
 ) \

1429 
SticF›ld
* 
sf›ld
; \

1430 
vd¡
 = 
	`INST_AA
(
š¡
); \

1431 
»f
 = 
	`FETCH
(1); \

1432 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1433 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) { \

1435 
	`EXPORT_PC
(); \

1436 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1437 ià(
sf›ld
 =ğ
NULL
) \

1438 
	`GOTO_exû±iÚThrown
(); \

1440 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1441 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1442 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1443 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1445 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1448 
	`FINISH
(2);

	)

1450 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1451 
	`HANDLE_OPCODE
(
_İcode
 ) \

1453 
SticF›ld
* 
sf›ld
; \

1454 
vd¡
 = 
	`INST_AA
(
š¡
); \

1455 
»f
 = 
	`FETCH
(1); \

1456 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1457 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1458 ià(
sf›ld
 =ğ
NULL
) { \

1459 
	`EXPORT_PC
(); \

1460 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1461 ià(
sf›ld
 =ğ
NULL
) \

1462 
	`GOTO_exû±iÚThrown
(); \

1464 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1465 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1466 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1467 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1469 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1470 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1473 
	`FINISH
(2);

	)

1479 #undeà
»tv®


1480 #undeà
pc


1481 #undeà
å


1482 #undeà
curM‘hod


1483 #undeà
m‘hodCÏssDex


1484 #undeà
£lf


1485 #undeà
debugT¿ckedRefS¹


1487 #ifdeà
WITH_TAINT_TRACKING


1488 #undeà
¹ašt


1492 
	~<š‰y³s.h
>

1502 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

1504 
ušt32_t
 
rPC
 
	`asm
("r4");

1505 
ušt32_t
 
rFP
 
	`asm
("r5");

1506 
ušt32_t
 
rGLUE
 
	`asm
("r6");

1507 
ušt32_t
 
rINST
 
	`asm
("r7");

1508 
ušt32_t
 
rIBASE
 
	`asm
("r8");

1509 
ušt32_t
 
r9
 
	`asm
("r9");

1510 
ušt32_t
 
r10
 
	`asm
("r10");

1512 
dvmAsmIn¡ruùiÚS¹
[];

1514 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

1515 
	`´štf
(" :„PC=%08x„FP=%08x„GLUE=%08x„INST=%08x\n",

1516 
rPC
, 
rFP
, 
rGLUE
, 
rINST
);

1517 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

1519 
M‹½Glue
* 
glue
 = (M‹½Glue*è
rGLUE
;

1520 cÚ¡ 
M‘hod
* 
m‘hod
 = 
glue
->method;

1521 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

1527 
	}
}

1532 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

1534 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

1535 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

1536 #ifdeà
EASY_GDB


1537 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

1538 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

1539 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

1541 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

1542 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

1543 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

1544 *(
u4
*)
å
);

1546 
	}
}

1551 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

1557 
boŞ
 
isDœeù
 =

1558 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

1559 (
m‘hod
->
Çme
[0] == '<');

1561 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1563 
	`´štf
("<%c:%s.%s %s> ",

1564 
isDœeù
 ? 'D' : 'V',

1565 
m‘hod
->
şazz
->
desütÜ
,

1566 
m‘hod
->
Çme
,

1567 
desc
);

1569 
	`ä“
(
desc
);

1570 
	}
}

	@mterp/out/InterpC-armv7-a.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

590 
	#INTERP_TYPE
 
INTERP_STD


	)

591 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

592 
	#CHECK_TRACKED_REFS
(è(()0)

	)

599 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

600 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

602 
	#GOTO_TARGET
(
_rg‘
, ...) \

603 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

604 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

605 
u2
 
š¡
 = 
	`FETCH
(0); \

606 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

607 
SckSaveA»a
* 
debugSaveA»a
;

	)

609 
	#GOTO_TARGET_END
 }

	)

615 
	#»tv®
 
glue
->
»tv®


	)

616 
	#pc
 
glue
->
pc


	)

617 
	#å
 
glue
->
å


	)

618 
	#curM‘hod
 
glue
->
m‘hod


	)

619 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

620 
	#£lf
 
glue
->
£lf


	)

621 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

623 #ifdeà
WITH_TAINT_TRACKING


624 
	#¹ašt
 
glue
->
¹ašt


	)

628 
	#STUB_HACK
(
x
è
	)
x

636 
	#HANDLE_OPCODE
(
_İ
) \

637 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

638 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

639 
u2
 
š¡
 = 
	`FETCH
(0);

	)

641 
	#OP_END
 }

	)

647 
	#FINISH
(
_off£t
) { \

648 
	`ADJUST_PC
(
_off£t
); \

649 
	`CHECK_DEBUG_AND_PROF
(); \

650 
	`CHECK_TRACKED_REFS
(); \

652 }

	)

661 
	#GOTO_exû±iÚThrown
() \

663 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

665 } 
çl£
)

	)

667 
	#GOTO_»tuºFromM‘hod
() \

669 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

671 } 
çl£
)

	)

673 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

675 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

677 } 
çl£
)

	)

679 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

681 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

682 
_v¤c1
, 
_vd¡
); \

684 } 
çl£
)

	)

690 
	#GOTO_ba
() \

691 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

692 
	#GOTO_ba_sw™ch
() \

693 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

701 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

702 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

706 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

707 
	`ADJUST_PC
(
_pÿdj
); \

708 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

709 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

710 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

711 
	`GOTO_ba_sw™ch
(); \

713 }

	)

718 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

719 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

720 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

721 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

722 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

723 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

724 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

725 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

726 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

727 
u2
 
couÁ
, u2 
»gs
);

728 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

729 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

743 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

744 
	`HANDLE_OPCODE
(
_İcode
 ) \

745 
vd¡
 = 
	`INST_A
(
š¡
); \

746 
v¤c1
 = 
	`INST_B
(
š¡
); \

747 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

748 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

749 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

751 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

752 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

754 
	`FINISH
(1);

	)

756 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

757 
_tovty³
, 
_tÜty³
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
_äomvty³
 
v®
; \

762 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

763 
vd¡
 = 
	`INST_A
(
š¡
); \

764 
v¤c1
 = 
	`INST_B
(
š¡
); \

765 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

766 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

767 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

768 
štMax
 = ~
štMš
; \

769 
»suÉ
 = (
_tovty³
è
v®
; \

770 ià(
v®
 >ğ
štMax
) \

771 
»suÉ
 = 
štMax
; \

772 ià(
v®
 <ğ
štMš
) \

773 
»suÉ
 = 
štMš
; \

774 ià(
v®
 != val) \

775 
»suÉ
 = 0; \

777 
»suÉ
 = (
_tovty³
è
v®
; \

778 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

780 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

781 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

784 
	`FINISH
(1);

	)

786 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

787 
	`HANDLE_OPCODE
(
_İcode
 ) \

788 
vd¡
 = 
	`INST_A
(
š¡
); \

789 
v¤c1
 = 
	`INST_B
(
š¡
); \

790 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

791 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

793 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

795 
	`FINISH
(1);

	)

798 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

799 
	`HANDLE_OPCODE
(
_İcode
 ) \

801 
»suÉ
; \

802 
u2
 
»gs
; \

803 
_v¬Ty³
 
v®1
, 
v®2
; \

804 
vd¡
 = 
	`INST_AA
(
š¡
); \

805 
»gs
 = 
	`FETCH
(1); \

806 
v¤c1
 = 
»gs
 & 0xff; \

807 
v¤c2
 = 
»gs
 >> 8; \

808 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

809 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

810 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

811 ià(
v®1
 =ğ
v®2
) \

812 
»suÉ
 = 0; \

813 ià(
v®1
 < 
v®2
) \

814 
»suÉ
 = -1; \

815 ià(
v®1
 > 
v®2
) \

816 
»suÉ
 = 1; \

818 
»suÉ
 = (
_ÇnV®
); \

819 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

820 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

822 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

825 
	`FINISH
(2);

	)

827 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

828 
	`HANDLE_OPCODE
(
_İcode
 ) \

829 
v¤c1
 = 
	`INST_A
(
š¡
); \

830 
v¤c2
 = 
	`INST_B
(
š¡
); \

831 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

832 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

833 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

834 
b¿nchOff£t
); \

835 
	`ILOGV
("> branchaken"); \

836 ià(
b¿nchOff£t
 < 0) \

837 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

838 
	`FINISH
(
b¿nchOff£t
); \

840 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

841 
	`FINISH
(2); \

842 }

	)

844 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

845 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
v¤c1
 = 
	`INST_AA
(
š¡
); \

847 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

848 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

849 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

850 
	`ILOGV
("> branchaken"); \

851 ià(
b¿nchOff£t
 < 0) \

852 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

853 
	`FINISH
(
b¿nchOff£t
); \

855 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

856 
	`FINISH
(2); \

857 }

	)

859 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

860 
	`HANDLE_OPCODE
(
_İcode
 ) \

861 
vd¡
 = 
	`INST_A
(
š¡
); \

862 
v¤c1
 = 
	`INST_B
(
š¡
); \

863 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

864 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

866 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

868 
	`FINISH
(1);

	)

870 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

871 
	`HANDLE_OPCODE
(
_İcode
 ) \

873 
u2
 
¤cRegs
; \

874 
vd¡
 = 
	`INST_AA
(
š¡
); \

875 
¤cRegs
 = 
	`FETCH
(1); \

876 
v¤c1
 = 
¤cRegs
 & 0xff; \

877 
v¤c2
 = 
¤cRegs
 >> 8; \

878 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

879 ià(
_chkdiv
 != 0) { \

880 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

881 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

882 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

883 ià(
£cÚdV®
 == 0) { \

884 
	`EXPORT_PC
(); \

885 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

887 
	`GOTO_exû±iÚThrown
(); \

889 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

890 ià(
_chkdiv
 == 1) \

891 
»suÉ
 = 
fœ¡V®
; \

893 
»suÉ
 = 0; \

895 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

897 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

900 
	`SET_REGISTER
(
vd¡
, \

901 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

904 
	`SET_REGISTER_TAINT
(
vd¡
, \

905 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

908 
	`FINISH
(2);

	)

910 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

911 
	`HANDLE_OPCODE
(
_İcode
 ) \

913 
u2
 
¤cRegs
; \

914 
vd¡
 = 
	`INST_AA
(
š¡
); \

915 
¤cRegs
 = 
	`FETCH
(1); \

916 
v¤c1
 = 
¤cRegs
 & 0xff; \

917 
v¤c2
 = 
¤cRegs
 >> 8; \

918 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

919 
	`SET_REGISTER
(
vd¡
, \

920 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

922 
	`SET_REGISTER_TAINT
(
vd¡
, \

923 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
v¤c2
 = 
	`FETCH
(1); \

933 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

934 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

935 ià(
_chkdiv
 != 0) { \

936 
s4
 
fœ¡V®
, 
»suÉ
; \

937 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

938 ià((
s2
è
v¤c2
 == 0) { \

939 
	`EXPORT_PC
(); \

940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

942 
	`GOTO_exû±iÚThrown
(); \

944 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

946 ià(
_chkdiv
 == 1) \

947 
»suÉ
 = 
fœ¡V®
; \

949 
»suÉ
 = 0; \

951 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

953 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

956 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

959 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

961 
	`FINISH
(2);

	)

963 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

964 
	`HANDLE_OPCODE
(
_İcode
 ) \

966 
u2
 
l™Info
; \

967 
vd¡
 = 
	`INST_AA
(
š¡
); \

968 
l™Info
 = 
	`FETCH
(1); \

969 
v¤c1
 = 
l™Info
 & 0xff; \

970 
v¤c2
 = 
l™Info
 >> 8; \

971 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

972 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

973 ià(
_chkdiv
 != 0) { \

974 
s4
 
fœ¡V®
, 
»suÉ
; \

975 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

976 ià((
s1
è
v¤c2
 == 0) { \

977 
	`EXPORT_PC
(); \

978 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

980 
	`GOTO_exû±iÚThrown
(); \

982 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

983 ià(
_chkdiv
 == 1) \

984 
»suÉ
 = 
fœ¡V®
; \

986 
»suÉ
 = 0; \

988 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

990 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

992 
	`SET_REGISTER
(
vd¡
, \

993 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

999 
	`FINISH
(2);

	)

1001 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1002 
	`HANDLE_OPCODE
(
_İcode
 ) \

1004 
u2
 
l™Info
; \

1005 
vd¡
 = 
	`INST_AA
(
š¡
); \

1006 
l™Info
 = 
	`FETCH
(1); \

1007 
v¤c1
 = 
l™Info
 & 0xff; \

1008 
v¤c2
 = 
l™Info
 >> 8; \

1009 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

1010 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1011 
	`SET_REGISTER
(
vd¡
, \

1012 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

1014 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

1017 
	`FINISH
(2);

	)

1019 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1020 
	`HANDLE_OPCODE
(
_İcode
 ) \

1021 
vd¡
 = 
	`INST_A
(
š¡
); \

1022 
v¤c1
 = 
	`INST_B
(
š¡
); \

1023 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1024 ià(
_chkdiv
 != 0) { \

1025 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1026 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1027 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1028 ià(
£cÚdV®
 == 0) { \

1029 
	`EXPORT_PC
(); \

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1032 
	`GOTO_exû±iÚThrown
(); \

1034 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1035 ià(
_chkdiv
 == 1) \

1036 
»suÉ
 = 
fœ¡V®
; \

1038 
»suÉ
 = 0; \

1040 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1042 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1044 
	`SET_REGISTER
(
vd¡
, \

1045 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1048 
	`SET_REGISTER_TAINT
(
vd¡
, \

1049 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1051 
	`FINISH
(1);

	)

1053 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1054 
	`HANDLE_OPCODE
(
_İcode
 ) \

1055 
vd¡
 = 
	`INST_A
(
š¡
); \

1056 
v¤c1
 = 
	`INST_B
(
š¡
); \

1057 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1058 
	`SET_REGISTER
(
vd¡
, \

1059 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1061 
	`SET_REGISTER_TAINT
(
vd¡
, \

1062 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1064 
	`FINISH
(1);

	)

1066 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1067 
	`HANDLE_OPCODE
(
_İcode
 ) \

1069 
u2
 
¤cRegs
; \

1070 
vd¡
 = 
	`INST_AA
(
š¡
); \

1071 
¤cRegs
 = 
	`FETCH
(1); \

1072 
v¤c1
 = 
¤cRegs
 & 0xff; \

1073 
v¤c2
 = 
¤cRegs
 >> 8; \

1074 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1075 ià(
_chkdiv
 != 0) { \

1076 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1077 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1078 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1079 ià(
£cÚdV®
 == 0LL) { \

1080 
	`EXPORT_PC
(); \

1081 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1083 
	`GOTO_exû±iÚThrown
(); \

1085 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1086 
£cÚdV®
 == -1LL) \

1088 ià(
_chkdiv
 == 1) \

1089 
»suÉ
 = 
fœ¡V®
; \

1091 
»suÉ
 = 0; \

1093 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1095 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1097 
	`SET_REGISTER_WIDE
(
vd¡
, \

1098 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1101 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1102 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1105 
	`FINISH
(2);

	)

1107 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1108 
	`HANDLE_OPCODE
(
_İcode
 ) \

1110 
u2
 
¤cRegs
; \

1111 
vd¡
 = 
	`INST_AA
(
š¡
); \

1112 
¤cRegs
 = 
	`FETCH
(1); \

1113 
v¤c1
 = 
¤cRegs
 & 0xff; \

1114 
v¤c2
 = 
¤cRegs
 >> 8; \

1115 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1116 
	`SET_REGISTER_WIDE
(
vd¡
, \

1117 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1119 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1120 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1123 
	`FINISH
(2);

	)

1125 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1126 
	`HANDLE_OPCODE
(
_İcode
 ) \

1127 
vd¡
 = 
	`INST_A
(
š¡
); \

1128 
v¤c1
 = 
	`INST_B
(
š¡
); \

1129 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1130 ià(
_chkdiv
 != 0) { \

1131 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1132 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1133 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1134 ià(
£cÚdV®
 == 0LL) { \

1135 
	`EXPORT_PC
(); \

1136 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1138 
	`GOTO_exû±iÚThrown
(); \

1140 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1141 
£cÚdV®
 == -1LL) \

1143 ià(
_chkdiv
 == 1) \

1144 
»suÉ
 = 
fœ¡V®
; \

1146 
»suÉ
 = 0; \

1148 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1150 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1152 
	`SET_REGISTER_WIDE
(
vd¡
, \

1153 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1156 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1157 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1159 
	`FINISH
(1);

	)

1161 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1162 
	`HANDLE_OPCODE
(
_İcode
 ) \

1163 
vd¡
 = 
	`INST_A
(
š¡
); \

1164 
v¤c1
 = 
	`INST_B
(
š¡
); \

1165 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1166 
	`SET_REGISTER_WIDE
(
vd¡
, \

1167 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1170 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1172 
	`FINISH
(1);

	)

1174 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1175 
	`HANDLE_OPCODE
(
_İcode
 ) \

1177 
u2
 
¤cRegs
; \

1178 
vd¡
 = 
	`INST_AA
(
š¡
); \

1179 
¤cRegs
 = 
	`FETCH
(1); \

1180 
v¤c1
 = 
¤cRegs
 & 0xff; \

1181 
v¤c2
 = 
¤cRegs
 >> 8; \

1182 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1183 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1184 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1186 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1187 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1190 
	`FINISH
(2);

	)

1192 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1193 
	`HANDLE_OPCODE
(
_İcode
 ) \

1195 
u2
 
¤cRegs
; \

1196 
vd¡
 = 
	`INST_AA
(
š¡
); \

1197 
¤cRegs
 = 
	`FETCH
(1); \

1198 
v¤c1
 = 
¤cRegs
 & 0xff; \

1199 
v¤c2
 = 
¤cRegs
 >> 8; \

1200 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1208 
	`FINISH
(2);

	)

1210 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1211 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
vd¡
 = 
	`INST_A
(
š¡
); \

1213 
v¤c1
 = 
	`INST_B
(
š¡
); \

1214 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1215 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1216 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1218 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1219 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1221 
	`FINISH
(1);

	)

1223 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1224 
	`HANDLE_OPCODE
(
_İcode
 ) \

1225 
vd¡
 = 
	`INST_A
(
š¡
); \

1226 
v¤c1
 = 
	`INST_B
(
š¡
); \

1227 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1228 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1229 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1231 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1232 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1234 
	`FINISH
(1);

	)

1236 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1237 
	`HANDLE_OPCODE
(
_İcode
 ) \

1239 
A¼ayObjeù
* 
¬¿yObj
; \

1240 
u2
 
¬¿yInfo
; \

1241 
	`EXPORT_PC
(); \

1242 
vd¡
 = 
	`INST_AA
(
š¡
); \

1243 
¬¿yInfo
 = 
	`FETCH
(1); \

1244 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1245 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1246 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1248 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1249 
	`GOTO_exû±iÚThrown
(); \

1250 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1251 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1252 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1253 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1254 
NULL
); \

1255 
	`GOTO_exû±iÚThrown
(); \

1257 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1258 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1260 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1261 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1263 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1265 
	`FINISH
(2);

	)

1267 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1268 
	`HANDLE_OPCODE
(
_İcode
 ) \

1270 
A¼ayObjeù
* 
¬¿yObj
; \

1271 
u2
 
¬¿yInfo
; \

1272 
	`EXPORT_PC
(); \

1273 
vd¡
 = 
	`INST_AA
(
š¡
); \

1274 
¬¿yInfo
 = 
	`FETCH
(1); \

1275 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1276 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1277 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1278 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1279 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1280 
	`GOTO_exû±iÚThrown
(); \

1281 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1282 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1283 
NULL
); \

1284 
	`GOTO_exû±iÚThrown
(); \

1286 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1287 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1288 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1290 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1291 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1292 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1295 
	`FINISH
(2);

	)

1314 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1315 
	`HANDLE_OPCODE
(
_İcode
 ) \

1317 
In¡F›ld
* 
if›ld
; \

1318 
Objeù
* 
obj
; \

1319 
	`EXPORT_PC
(); \

1320 
vd¡
 = 
	`INST_A
(
š¡
); \

1321 
v¤c1
 = 
	`INST_B
(
š¡
); \

1322 
»f
 = 
	`FETCH
(1); \

1323 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1324 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1325 ià(!
	`checkFÜNuÎ
(
obj
)) \

1326 
	`GOTO_exû±iÚThrown
(); \

1327 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1328 ià(
if›ld
 =ğ
NULL
) { \

1329 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1330 ià(
if›ld
 =ğ
NULL
) \

1331 
	`GOTO_exû±iÚThrown
(); \

1333 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1334 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1335 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1336 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1339 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1340 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1341 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1344 
	`FINISH
(2);

	)

1346 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1347 
	`HANDLE_OPCODE
(
_İcode
 ) \

1349 
Objeù
* 
obj
; \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1354 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1355 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1356 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1357 
	`GOTO_exû±iÚThrown
(); \

1358 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1359 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1360 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1364 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1365 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1366 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1369 
	`FINISH
(2);

	)

1371 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1372 
	`HANDLE_OPCODE
(
_İcode
 ) \

1374 
In¡F›ld
* 
if›ld
; \

1375 
Objeù
* 
obj
; \

1376 
	`EXPORT_PC
(); \

1377 
vd¡
 = 
	`INST_A
(
š¡
); \

1378 
v¤c1
 = 
	`INST_B
(
š¡
); \

1379 
»f
 = 
	`FETCH
(1); \

1380 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1381 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1382 ià(!
	`checkFÜNuÎ
(
obj
)) \

1383 
	`GOTO_exû±iÚThrown
(); \

1384 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1385 ià(
if›ld
 =ğ
NULL
) { \

1386 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1387 ià(
if›ld
 =ğ
NULL
) \

1388 
	`GOTO_exû±iÚThrown
(); \

1390 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1391 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1392 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1393 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1394 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1396 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1397 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1400 
	`FINISH
(2);

	)

1402 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1403 
	`HANDLE_OPCODE
(
_İcode
 ) \

1405 
Objeù
* 
obj
; \

1406 
vd¡
 = 
	`INST_A
(
š¡
); \

1407 
v¤c1
 = 
	`INST_B
(
š¡
); \

1408 
»f
 = 
	`FETCH
(1); \

1409 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1410 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1411 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1412 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1413 
	`GOTO_exû±iÚThrown
(); \

1414 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1415 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1416 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1420 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1421 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1424 
	`FINISH
(2);

	)

1426 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1427 
	`HANDLE_OPCODE
(
_İcode
 ) \

1429 
SticF›ld
* 
sf›ld
; \

1430 
vd¡
 = 
	`INST_AA
(
š¡
); \

1431 
»f
 = 
	`FETCH
(1); \

1432 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1433 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) { \

1435 
	`EXPORT_PC
(); \

1436 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1437 ià(
sf›ld
 =ğ
NULL
) \

1438 
	`GOTO_exû±iÚThrown
(); \

1440 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1441 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1442 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1443 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1445 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1448 
	`FINISH
(2);

	)

1450 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1451 
	`HANDLE_OPCODE
(
_İcode
 ) \

1453 
SticF›ld
* 
sf›ld
; \

1454 
vd¡
 = 
	`INST_AA
(
š¡
); \

1455 
»f
 = 
	`FETCH
(1); \

1456 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1457 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1458 ià(
sf›ld
 =ğ
NULL
) { \

1459 
	`EXPORT_PC
(); \

1460 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1461 ià(
sf›ld
 =ğ
NULL
) \

1462 
	`GOTO_exû±iÚThrown
(); \

1464 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1465 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1466 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1467 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1469 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1470 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1473 
	`FINISH
(2);

	)

1477 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

1478 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

1479 
OP_END


1482 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

1483 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

1484 
OP_END


1487 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

1488 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

1489 
OP_END


1492 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

1493 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

1494 
OP_END


1497 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

1498 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

1499 
OP_END


1502 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

1503 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

1504 
OP_END


1507 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

1508 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

1509 
OP_END


1512 
	$HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

1513 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

1514 
OP_END


1517 
	$HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

1518 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

1519 
OP_END


1522 
	$HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

1523 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

1524 
OP_END


1527 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

1528 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

1529 
OP_END


1532 
	$HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

1533 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

1534 
OP_END


1537 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

1538 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

1539 
OP_END


1542 
	$HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

1543 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

1544 
OP_END


1557 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
)

1559 
CÏssObjeù
* 
¬¿yCÏss
;

1560 
A¼ayObjeù
* 
ÃwA¼ay
;

1561 
u4
* 
cÚ‹Ás
;

1562 
ty³Ch
;

1563 
i
;

1564 
u4
 
¬g5
;

1566 
	`EXPORT_PC
();

1568 
»f
 = 
	`FETCH
(1);

1569 
vd¡
 = 
	`FETCH
(2);

1571 ià(
m‘hodC®lRªge
) {

1572 
v¤c1
 = 
	`INST_AA
(
š¡
);

1573 
¬g5
 = -1;

1574 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1575 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1577 
¬g5
 = 
	`INST_A
(
š¡
);

1578 
v¤c1
 = 
	`INST_B
(
š¡
);

1579 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

1580 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

1586 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1587 ià(
¬¿yCÏss
 =ğ
NULL
) {

1588 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

1589 ià(
¬¿yCÏss
 =ğ
NULL
)

1590 
	`GOTO_exû±iÚThrown
();

1600 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

1601 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

1606 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'\n", 
¬¿yCÏss
->
desütÜ
);

1607 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

1608 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

1610 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeError;",

1612 
	`GOTO_exû±iÚThrown
();

1613 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

1615 
	`LOGE
("non-int…rimitives‚ot implemented\n");

1616 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

1618 
	`GOTO_exû±iÚThrown
();

1621 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

1622 ià(
ÃwA¼ay
 =ğ
NULL
)

1623 
	`GOTO_exû±iÚThrown
();

1628 
cÚ‹Ás
 = (
u4
*è
ÃwA¼ay
->contents;

1629 ià(
m‘hodC®lRªge
) {

1630 
i
 = 0; i < 
v¤c1
; i++)

1631 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

1633 
	`as£¹
(
v¤c1
 <= 5);

1634 ià(
v¤c1
 == 5) {

1635 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

1636 
v¤c1
--;

1638 
i
 = 0; i < 
v¤c1
; i++) {

1639 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

1640 
vd¡
 >>= 4;

1644 
»tv®
.
l
 = 
ÃwA¼ay
;

1646 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

1648 
	}
}

1649 
FINISH
(3);

1650 
GOTO_TARGET_END


1653 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
)

1655 
M‘hod
* 
ba£M‘hod
;

1656 
Objeù
* 
thisPŒ
;

1658 
	`EXPORT_PC
();

1660 
v¤c1
 = 
	`INST_AA
(
š¡
);

1661 
»f
 = 
	`FETCH
(1);

1662 
vd¡
 = 
	`FETCH
(2);

1668 ià(
m‘hodC®lRªge
) {

1669 
	`as£¹
(
v¤c1
 > 0);

1670 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1671 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1672 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1674 
	`as£¹
((
v¤c1
>>4) > 0);

1675 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

1676 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1677 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1680 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1681 
	`GOTO_exû±iÚThrown
();

1687 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1688 ià(
ba£M‘hod
 =ğ
NULL
) {

1689 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1690 ià(
ba£M‘hod
 =ğ
NULL
) {

1691 
	`ILOGV
("+ unknown method or‡ccess denied\n");

1692 
	`GOTO_exû±iÚThrown
();

1700 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

1701 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1704 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1714 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1716 
	`GOTO_exû±iÚThrown
();

1719 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1720 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1723 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s\n",

1724 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1725 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1726 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1727 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1730 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

1731 
	`LOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s\n",

1732 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1733 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1734 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1737 
	`dvmDumpAÎCÏs£s
(0);

1741 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1742 
	}
}

1743 
GOTO_TARGET_END


1745 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

1747 
M‘hod
* 
ba£M‘hod
;

1748 
u2
 
thisReg
;

1750 
	`EXPORT_PC
();

1752 
v¤c1
 = 
	`INST_AA
(
š¡
);

1753 
»f
 = 
	`FETCH
(1);

1754 
vd¡
 = 
	`FETCH
(2);

1756 ià(
m‘hodC®lRªge
) {

1757 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1758 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1759 
thisReg
 = 
vd¡
;

1761 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

1762 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1763 
thisReg
 = 
vd¡
 & 0x0f;

1766 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1767 
	`GOTO_exû±iÚThrown
();

1776 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1777 ià(
ba£M‘hod
 =ğ
NULL
) {

1778 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1779 ià(
ba£M‘hod
 =ğ
NULL
) {

1780 
	`ILOGV
("+ unknown method or‡ccess denied\n");

1781 
	`GOTO_exû±iÚThrown
();

1794 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1799 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchMethodError;",

1800 
ba£M‘hod
->
Çme
);

1801 
	`GOTO_exû±iÚThrown
();

1803 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1805 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1806 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1808 
	`GOTO_exû±iÚThrown
();

1811 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1812 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1814 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s\n",

1815 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1816 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1817 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1819 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1820 
	}
}

1821 
GOTO_TARGET_END


1823 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

1825 
Objeù
* 
thisPŒ
;

1826 
CÏssObjeù
* 
thisCÏss
;

1828 
	`EXPORT_PC
();

1830 
v¤c1
 = 
	`INST_AA
(
š¡
);

1831 
»f
 = 
	`FETCH
(1);

1832 
vd¡
 = 
	`FETCH
(2);

1838 ià(
m‘hodC®lRªge
) {

1839 
	`as£¹
(
v¤c1
 > 0);

1840 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1841 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1842 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1844 
	`as£¹
((
v¤c1
>>4) > 0);

1845 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

1846 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1847 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1849 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1850 
	`GOTO_exû±iÚThrown
();

1852 
thisCÏss
 = 
thisPŒ
->
şazz
;

1858 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

1859 
m‘hodCÏssDex
);

1860 ià(
m‘hodToC®l
 =ğ
NULL
) {

1861 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1862 
	`GOTO_exû±iÚThrown
();

1865 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1866 
	}
}

1867 
GOTO_TARGET_END


1869 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

1871 
u2
 
thisReg
;

1873 
v¤c1
 = 
	`INST_AA
(
š¡
);

1874 
»f
 = 
	`FETCH
(1);

1875 
vd¡
 = 
	`FETCH
(2);

1877 
	`EXPORT_PC
();

1879 ià(
m‘hodC®lRªge
) {

1880 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1881 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1882 
thisReg
 = 
vd¡
;

1884 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

1885 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1886 
thisReg
 = 
vd¡
 & 0x0f;

1888 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1889 
	`GOTO_exû±iÚThrown
();

1891 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1892 ià(
m‘hodToC®l
 =ğ
NULL
) {

1893 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

1894 
METHOD_DIRECT
);

1895 ià(
m‘hodToC®l
 =ğ
NULL
) {

1896 
	`ILOGV
("+ unknown direct method\n");

1897 
	`GOTO_exû±iÚThrown
();

1900 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1901 
	}
}

1902 
GOTO_TARGET_END


1904 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

1905 
v¤c1
 = 
	`INST_AA
(
š¡
);

1906 
»f
 = 
	`FETCH
(1);

1907 
vd¡
 = 
	`FETCH
(2);

1909 
	`EXPORT_PC
();

1911 ià(
m‘hodC®lRªge
)

1912 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1913 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1915 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

1916 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1918 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1919 ià(
m‘hodToC®l
 =ğ
NULL
) {

1920 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

1921 ià(
m‘hodToC®l
 =ğ
NULL
) {

1922 
	`ILOGV
("+ unknown method\n");

1923 
	`GOTO_exû±iÚThrown
();

1925 
	}
}

1926 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1927 
GOTO_TARGET_END


1929 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

1931 
Objeù
* 
thisPŒ
;

1933 
	`EXPORT_PC
();

1935 
v¤c1
 = 
	`INST_AA
(
š¡
);

1936 
»f
 = 
	`FETCH
(1);

1937 
vd¡
 = 
	`FETCH
(2);

1943 ià(
m‘hodC®lRªge
) {

1944 
	`as£¹
(
v¤c1
 > 0);

1945 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1946 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1947 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1949 
	`as£¹
((
v¤c1
>>4) > 0);

1950 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1951 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1952 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1955 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1956 
	`GOTO_exû±iÚThrown
();

1962 
	`as£¹
(
»f
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

1963 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

1966 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1967 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1969 
	`GOTO_exû±iÚThrown
();

1972 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1973 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1976 
	`LOGVV
("+++ virtual[%d]=%s.%s\n",

1977 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1978 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1980 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1981 
	}
}

1982 
GOTO_TARGET_END


1984 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

1986 
u2
 
thisReg
;

1988 
	`EXPORT_PC
();

1990 
v¤c1
 = 
	`INST_AA
(
š¡
);

1991 
»f
 = 
	`FETCH
(1);

1992 
vd¡
 = 
	`FETCH
(2);

1994 ià(
m‘hodC®lRªge
) {

1995 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1996 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1997 
thisReg
 = 
vd¡
;

1999 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

2000 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

2001 
thisReg
 = 
vd¡
 & 0x0f;

2004 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

2005 
	`GOTO_exû±iÚThrown
();

2008 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

2009 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
NULL
);

2010 
	`GOTO_exû±iÚThrown
();

2013 
	`as£¹
(
»f
 < 
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

2025 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

2028 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

2029 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

2031 
	`GOTO_exû±iÚThrown
();

2034 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

2035 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

2037 
	`LOGVV
("+++ super-virtual[%d]=%s.%s\n",

2038 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

2039 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

2041 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

2042 
	}
}

2043 
GOTO_TARGET_END


2051 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

2053 
SckSaveA»a
* 
§veA»a
;

2062 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryR‘uº
, 0);

2064 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

2065 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

2066 
curM‘hod
->
shÜty
);

2069 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

2071 #ifdeà
EASY_GDB


2072 
debugSaveA»a
 = 
§veA»a
;

2074 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

2075 
	`TRACE_METHOD_EXIT
(
£lf
, 
curM‘hod
);

2079 
å
 = 
§veA»a
->
´evF¿me
;

2080 
	`as£¹
(
å
 !ğ
NULL
);

2081 ià(
	`dvmIsB»akF¿me
(
å
)) {

2083 
	`LOGVV
("+++„eturned into break frame\n");

2084 
	`GOTO_ba
();

2088 
£lf
->
curF¿me
 = 
å
;

2089 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2091 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2092 
pc
 = 
§veA»a
->
§vedPc
;

2093 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

2094 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2098 ià(
Œue


2101 
	`FINISH
(3);

2105 
	`as£¹
(
çl£
);

2107 
	}
}

2108 
GOTO_TARGET_END


2117 
	$GOTO_TARGET
(
exû±iÚThrown
)

2119 
Objeù
* 
exû±iÚ
;

2120 
ÿtchR–Pc
;

2126 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryThrow
, 0);

2134 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

2135 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

2136 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2137 
	`dvmCË¬Exû±iÚ
(
£lf
);

2139 
	`LOGV
("Handlingƒxception %s‡t %s:%d\n",

2140 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

2141 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

2143 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

2158 ià(
gDvm
.
debugg”Aùive
) {

2159 * 
ÿtchF¿me
;

2160 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

2161 
exû±iÚ
, 
Œue
, &
ÿtchF¿me
);

2162 
	`dvmDbgPo¡Exû±iÚ
(
å
, 
pc
 - 
curM‘hod
->
š¢s
, 
ÿtchF¿me
,

2163 
ÿtchR–Pc
, 
exû±iÚ
);

2179 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

2180 
exû±iÚ
, 
çl£
, (*)&
å
);

2193 ià(
£lf
->
¡ackOv”æowed
)

2194 
	`dvmCËªupSckOv”æow
(
£lf
);

2196 ià(
ÿtchR–Pc
 < 0) {

2198 #ià
DVM_SHOW_EXCEPTION
 >= 2

2199 
	`LOGD
("Exception %s from %s:%d‚ot caught†ocally\n",

2200 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

2201 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

2203 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

2204 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2205 
	`GOTO_ba
();

2208 #ià
DVM_SHOW_EXCEPTION
 >= 3

2210 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2211 
	`LOGD
("Exception %shrown from %s:%do %s:%d\n",

2212 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

2213 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

2214 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

2215 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

2224 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2226 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2227 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

2228 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2229 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2230 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

2244 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

2245 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

2247 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2248 
	`FINISH
(0);

2249 
	}
}

2250 
GOTO_TARGET_END


2270 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

2271 
u2
 
couÁ
, u2 
»gs
)

2273 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

2280 
u4
* 
outs
;

2281 
i
;

2282 #ifdeà
WITH_TAINT_TRACKING


2283 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
);

2289 ià(
m‘hodC®lRªge
) {

2292 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

2293 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

2294 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

2295 #ifdeà
WITH_TAINT_TRACKING


2296 ià(
ÇtiveT¬g‘
) {

2297 
i
 = 0; i < 
v¤c1
; i++) {

2298 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

2301 
outs
[
v¤c1
] = 
TAINT_CLEAR
;

2303 
i
 = 0; i < 
v¤c1
; i++) {

2304 
outs
[
v¤c1
+1+
i
] = 
	`GET_REGISTER_TAINT
(
vd¡
+i);

2307 
¦Ù
 = 0;

2308 
i
 = 0; i < 
v¤c1
; i++) {

2309 
¦Ù
 = 
i
 << 1;

2310 
outs
[
¦Ù
] = 
	`GET_REGISTER
(
vd¡
+
i
);

2311 
outs
[
¦Ù
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
+
i
);

2314 
outs
[
v¤c1
<<1] = 
TAINT_CLEAR
;

2317 
i
 = 0; i < 
v¤c1
; i++)

2318 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

2321 
u4
 
couÁ
 = 
v¤c1
 >> 4;

2323 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

2324 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

2325 
	`as£¹
(
couÁ
 <= 5);

2327 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

2329 ià(
couÁ
 == 5) {

2330 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2331 
couÁ
--;

2333 
i
 = 0; i < (è
couÁ
; i++) {

2334 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2335 
vd¡
 >>= 4;

2338 
	`as£¹
((
vd¡
 >> 16) == 0);

2339 #ifdeà
WITH_TAINT_TRACKING


2340 ià(
ÇtiveT¬g‘
) {

2341 
couÁ
) {

2343 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2344 
outs
[
couÁ
+5] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

2346 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2347 
outs
[
couÁ
+4] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

2349 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2350 
outs
[
couÁ
+3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

2352 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2353 
outs
[
couÁ
+2] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

2355 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2356 
outs
[
couÁ
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

2361 
outs
[
couÁ
] = 
TAINT_CLEAR
;

2363 
couÁ
) {

2365 
outs
[8] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2366 
outs
[9] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

2368 
outs
[6] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2369 
outs
[7] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

2371 
outs
[4] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2372 
outs
[5] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

2374 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2375 
outs
[3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

2377 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2378 
outs
[1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

2383 
outs
[
couÁ
<<1] = 
TAINT_CLEAR
;

2388 
couÁ
) {

2390 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2392 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2394 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2396 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2398 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2405 
	}
}

2416 
SckSaveA»a
* 
	gÃwSaveA»a
;

2417 
u4
* 
	gÃwFp
;

2419 
ILOGV
("> %s%s.%s %s",

2420 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

2421 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2422 
m‘hodToC®l
->
shÜty
);

2424 #ifdeà
WITH_TAINT_TRACKING


2425 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
) -

2426 ((
m‘hodToC®l
->
»gi¡”sSize
 << 1) + 1);

2428 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

2430 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2433 ià(
	gŒue
) {

2434 
u1
* 
	gbÙtom
;

2435 #ifdeà
WITH_TAINT_TRACKING


2436 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 -

2437 (
m‘hodToC®l
->
outsSize
 * (
u4
) + 4);

2439 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

2441 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

2443 
LOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p size=%d '%s')\n",

2444 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

2445 
£lf
->
š‹½SckSize
, 
m‘hodToC®l
->
Çme
);

2446 
dvmHªdËSckOv”æow
(
£lf
);

2447 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

2448 
GOTO_exû±iÚThrown
();

2454 #ifdeà
LOG_INSTR


2455 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

2462 #ifdeà
WITH_TAINT_TRACKING


2465 
mem£t
(
ÃwFp
, 0xcc,

2466 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 8);

2468 
mem£t
(
ÃwFp
, 0xcc,

2469 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

2474 #ifdeà
EASY_GDB


2475 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

2477 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

2478 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

2479 #ià
defšed
(
WITH_JIT
)

2480 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

2482 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

2484 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

2489 
	gcurM‘hod
 = 
m‘hodToC®l
;

2490 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2491 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

2492 
	gå
 = 
£lf
->
curF¿me
 = 
ÃwFp
;

2493 #ifdeà
EASY_GDB


2494 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2496 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


2497 
	gdebugIsM‘hodEÁry
 = 
Œue
;

2499 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2500 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2501 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

2502 
FINISH
(0);

2505 #ifdeà
USE_INDIRECT_REF


2506 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

2508 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

2511 
	g£lf
->
	gcurF¿me
 = 
ÃwFp
;

2513 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

2515 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

2516 ià(
	ggDvm
.
	gdebugg”Aùive
) {

2517 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

2518 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_ENTRY
);

2521 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

2522 
TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

2525 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

2526 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

2533 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

2534 #ifdeà
WITH_TAINT_TRACKING


2538 
u4
 
	gcouÁ
 = (
m‘hodC®lRªge
è? 
v¤c1
 : vsrc1 >> 4;

2539 
u4
* 
	gouts
 = 
OUTS_FROM_FP
(
å
, 
couÁ
);

2540 
SET_RETURN_TAINT
(
outs
[
couÁ
]);

2544 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

2545 ià(
	ggDvm
.
	gdebugg”Aùive
) {

2546 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

2547 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_EXIT
);

2550 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

2551 
TRACE_METHOD_EXIT
(
£lf
, 
m‘hodToC®l
);

2555 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

2556 
	g£lf
->
	gcurF¿me
 = 
å
;

2563 ià(
dvmCheckExû±iÚ
(
£lf
)) {

2564 
LOGV
("Exceptionhrown by/below‚ative code\n");

2565 
GOTO_exû±iÚThrown
();

2568 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

2569 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

2570 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2571 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

2572 
curM‘hod
->
shÜty
);

2575 ià(
	gŒue


2578 
FINISH
(3);

2582 
as£¹
(
çl£
);

2586 
as£¹
(
çl£
);

2587 
	gGOTO_TARGET_END


2592 #undeà
»tv®


2593 #undeà
pc


2594 #undeà
å


2595 #undeà
curM‘hod


2596 #undeà
m‘hodCÏssDex


2597 #undeà
£lf


2598 #undeà
debugT¿ckedRefS¹


2600 #ifdeà
WITH_TAINT_TRACKING


2601 #undeà
¹ašt


2605 
	~<š‰y³s.h
>

2615 
	$dvmM‹½DumpArmRegs
(
ušt32_t
 
r0
, ušt32_ˆ
r1
, ušt32_ˆ
r2
, ušt32_ˆ
r3
)

2617 
ušt32_t
 
rPC
 
	`asm
("r4");

2618 
ušt32_t
 
rFP
 
	`asm
("r5");

2619 
ušt32_t
 
rGLUE
 
	`asm
("r6");

2620 
ušt32_t
 
rINST
 
	`asm
("r7");

2621 
ušt32_t
 
rIBASE
 
	`asm
("r8");

2622 
ušt32_t
 
r9
 
	`asm
("r9");

2623 
ušt32_t
 
r10
 
	`asm
("r10");

2625 
dvmAsmIn¡ruùiÚS¹
[];

2627 
	`´štf
("REGS:„0=%08x„1=%08x„2=%08x„3=%08x\n", 
r0
, 
r1
, 
r2
, 
r3
);

2628 
	`´štf
(" :„PC=%08x„FP=%08x„GLUE=%08x„INST=%08x\n",

2629 
rPC
, 
rFP
, 
rGLUE
, 
rINST
);

2630 
	`´štf
(" :„IBASE=%08x„9=%08x„10=%08x\n", 
rIBASE
, 
r9
, 
r10
);

2632 
M‹½Glue
* 
glue
 = (M‹½Glue*è
rGLUE
;

2633 cÚ¡ 
M‘hod
* 
m‘hod
 = 
glue
->method;

2634 
	`´štf
(" + s–ài %p\n", 
	`dvmTh»adS–f
());

2640 
	}
}

2645 
	$dvmDumpFp
(* 
å
, 
SckSaveA»a
* 
Ùh”SaveA»a
)

2647 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

2648 
	`´štf
("SckSaveA»¨fÜ f°%°[%p/%p]:\n", 
å
, 
§veA»a
, 
Ùh”SaveA»a
);

2649 #ifdeà
EASY_GDB


2650 
	`´štf
("…revSave=%p,…revFrame=%p savedPc=%p meth=%p curPc=%p\n",

2651 
§veA»a
->
´evSave
, saveA»a->
´evF¿me
, saveA»a->
§vedPc
,

2652 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
);

2654 
	`´štf
("…revFrame=%p savedPc=%p meth=%p curPc=%p fp[0]=0x%08x\n",

2655 
§veA»a
->
´evF¿me
, saveA»a->
§vedPc
,

2656 
§veA»a
->
m‘hod
, saveA»a->
xŒa
.
cu¼’tPc
,

2657 *(
u4
*)
å
);

2659 
	}
}

2664 
	$dvmM‹½PrštM‘hod
(
M‘hod
* 
m‘hod
)

2670 
boŞ
 
isDœeù
 =

2671 ((
m‘hod
->
acûssFÏgs
 & (
ACC_STATIC
|
ACC_PRIVATE
)) != 0) ||

2672 (
m‘hod
->
Çme
[0] == '<');

2674 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

2676 
	`´štf
("<%c:%s.%s %s> ",

2677 
isDœeù
 ? 'D' : 'V',

2678 
m‘hod
->
şazz
->
desütÜ
,

2679 
m‘hod
->
Çme
,

2680 
desc
);

2682 
	`ä“
(
desc
);

2683 
	}
}

	@mterp/out/InterpC-portdbg.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

589 
	#INTERP_FUNC_NAME
 
dvmIÁ”´‘Dbg


	)

590 
	#INTERP_TYPE
 
INTERP_DBG


	)

592 
	#CHECK_DEBUG_AND_PROF
() \

593 
	`checkDebugAndProf
(
pc
, 
å
, 
£lf
, 
curM‘hod
, &
debugIsM‘hodEÁry
)

	)

595 #ià
defšed
(
WITH_JIT
)

596 
	#CHECK_JIT
() \

597 ià(
	`dvmCheckJ™
(
pc
, 
£lf
, 
š‹½S‹
)è
	`GOTO_ba_sw™ch
()

	)

599 
	#CHECK_JIT
() \

600 (()0)

	)

609 
	#GOTO_TARGET_DECL
(
_rg‘
, ...)

	)

611 
	#GOTO_TARGET
(
_rg‘
, ...è_rg‘:

	)

613 
	#GOTO_TARGET_END


	)

616 
	#STUB_HACK
(
x
)

	)

626 #ifdeà
THREADED_INTERP


627 
	#H
(
_İ
è&&
İ_
##
	)
_op

628 
	#HANDLE_OPCODE
(
_İ
è
İ_
##_İ:

	)

629 
	#FINISH
(
_off£t
) { \

630 
	`ADJUST_PC
(
_off£t
); \

631 
š¡
 = 
	`FETCH
(0); \

632 
	`CHECK_DEBUG_AND_PROF
(); \

633 
	`CHECK_TRACKED_REFS
(); \

634 
	`CHECK_JIT
(); \

635 *
hªdËrTabË
[
	`INST_INST
(
š¡
)]; \

636 }

	)

638 
	#HANDLE_OPCODE
(
_İ
è_İ:

	)

639 
	#FINISH
(
_off£t
è{ 
	`ADJUST_PC
(_off£t); ; }

	)

642 
	#OP_END


	)

644 #ià
defšed
(
WITH_TRACKREF_CHECKS
)

645 
	#CHECK_TRACKED_REFS
() \

646 
	`dvmIÁ”pCheckT¿ckedRefs
(
£lf
, 
curM‘hod
, 
debugT¿ckedRefS¹
)

	)

648 
	#CHECK_TRACKED_REFS
(è(()0)

	)

657 
	#GOTO_exû±iÚThrown
(è
exû±iÚThrown
;

	)

659 
	#GOTO_»tuºFromM‘hod
(è
»tuºFromM‘hod
;

	)

661 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

663 
m‘hodC®lRªge
 = 
_m‘hodC®lRªge
; \

664 
_rg‘
; \

665 } 
çl£
)

	)

668 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
è
švokeM‘hod
;

	)

670 
	#GOTO_ba
(è
ba
;

	)

671 
	#GOTO_ba_sw™ch
(è
ba_sw™ch
;

	)

679 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

680 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

681 
	`EXPORT_PC
(); \

682 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

684 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

685 
	`ADJUST_PC
(
_pÿdj
); \

686 
š‹½S‹
->
’ŒyPošt
 = 
_’ŒyPošt
; \

687 
	`LOGVV
("threadid=%d: switcho %sƒp=%d‡dj=%d\n", \

688 
£lf
->
th»adId
, \

689 (
š‹½S‹
->
ÃxtMode
 =ğ
INTERP_STD
) ? "STD" : "DBG", \

690 (
_’ŒyPošt
), (
_pÿdj
)); \

691 
	`GOTO_ba_sw™ch
(); \

693 }

	)

698 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

699 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

700 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

701 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

702 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

703 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

704 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

705 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

706 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

707 
u2
 
couÁ
, u2 
»gs
);

708 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

709 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

723 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

724 
	`HANDLE_OPCODE
(
_İcode
 ) \

725 
vd¡
 = 
	`INST_A
(
š¡
); \

726 
v¤c1
 = 
	`INST_B
(
š¡
); \

727 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

728 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

729 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

731 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

732 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

734 
	`FINISH
(1);

	)

736 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

737 
_tovty³
, 
_tÜty³
) \

738 
	`HANDLE_OPCODE
(
_İcode
 ) \

741 
_äomvty³
 
v®
; \

742 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

743 
vd¡
 = 
	`INST_A
(
š¡
); \

744 
v¤c1
 = 
	`INST_B
(
š¡
); \

745 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

746 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

747 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

748 
štMax
 = ~
štMš
; \

749 
»suÉ
 = (
_tovty³
è
v®
; \

750 ià(
v®
 >ğ
štMax
) \

751 
»suÉ
 = 
štMax
; \

752 ià(
v®
 <ğ
štMš
) \

753 
»suÉ
 = 
štMš
; \

754 ià(
v®
 != val) \

755 
»suÉ
 = 0; \

757 
»suÉ
 = (
_tovty³
è
v®
; \

758 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

760 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

761 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

764 
	`FINISH
(1);

	)

766 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

767 
	`HANDLE_OPCODE
(
_İcode
 ) \

768 
vd¡
 = 
	`INST_A
(
š¡
); \

769 
v¤c1
 = 
	`INST_B
(
š¡
); \

770 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

771 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

773 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

775 
	`FINISH
(1);

	)

778 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

779 
	`HANDLE_OPCODE
(
_İcode
 ) \

781 
»suÉ
; \

782 
u2
 
»gs
; \

783 
_v¬Ty³
 
v®1
, 
v®2
; \

784 
vd¡
 = 
	`INST_AA
(
š¡
); \

785 
»gs
 = 
	`FETCH
(1); \

786 
v¤c1
 = 
»gs
 & 0xff; \

787 
v¤c2
 = 
»gs
 >> 8; \

788 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

789 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

790 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

791 ià(
v®1
 =ğ
v®2
) \

792 
»suÉ
 = 0; \

793 ià(
v®1
 < 
v®2
) \

794 
»suÉ
 = -1; \

795 ià(
v®1
 > 
v®2
) \

796 
»suÉ
 = 1; \

798 
»suÉ
 = (
_ÇnV®
); \

799 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

800 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

802 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

805 
	`FINISH
(2);

	)

807 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

808 
	`HANDLE_OPCODE
(
_İcode
 ) \

809 
v¤c1
 = 
	`INST_A
(
š¡
); \

810 
v¤c2
 = 
	`INST_B
(
š¡
); \

811 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

812 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

813 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

814 
b¿nchOff£t
); \

815 
	`ILOGV
("> branchaken"); \

816 ià(
b¿nchOff£t
 < 0) \

817 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

818 
	`FINISH
(
b¿nchOff£t
); \

820 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

821 
	`FINISH
(2); \

822 }

	)

824 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

825 
	`HANDLE_OPCODE
(
_İcode
 ) \

826 
v¤c1
 = 
	`INST_AA
(
š¡
); \

827 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

828 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

829 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

830 
	`ILOGV
("> branchaken"); \

831 ià(
b¿nchOff£t
 < 0) \

832 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

833 
	`FINISH
(
b¿nchOff£t
); \

835 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

836 
	`FINISH
(2); \

837 }

	)

839 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

840 
	`HANDLE_OPCODE
(
_İcode
 ) \

841 
vd¡
 = 
	`INST_A
(
š¡
); \

842 
v¤c1
 = 
	`INST_B
(
š¡
); \

843 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

844 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

846 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

848 
	`FINISH
(1);

	)

850 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

851 
	`HANDLE_OPCODE
(
_İcode
 ) \

853 
u2
 
¤cRegs
; \

854 
vd¡
 = 
	`INST_AA
(
š¡
); \

855 
¤cRegs
 = 
	`FETCH
(1); \

856 
v¤c1
 = 
¤cRegs
 & 0xff; \

857 
v¤c2
 = 
¤cRegs
 >> 8; \

858 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

859 ià(
_chkdiv
 != 0) { \

860 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

861 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

862 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

863 ià(
£cÚdV®
 == 0) { \

864 
	`EXPORT_PC
(); \

865 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

867 
	`GOTO_exû±iÚThrown
(); \

869 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

870 ià(
_chkdiv
 == 1) \

871 
»suÉ
 = 
fœ¡V®
; \

873 
»suÉ
 = 0; \

875 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

877 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

880 
	`SET_REGISTER
(
vd¡
, \

881 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

884 
	`SET_REGISTER_TAINT
(
vd¡
, \

885 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

888 
	`FINISH
(2);

	)

890 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

891 
	`HANDLE_OPCODE
(
_İcode
 ) \

893 
u2
 
¤cRegs
; \

894 
vd¡
 = 
	`INST_AA
(
š¡
); \

895 
¤cRegs
 = 
	`FETCH
(1); \

896 
v¤c1
 = 
¤cRegs
 & 0xff; \

897 
v¤c2
 = 
¤cRegs
 >> 8; \

898 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

899 
	`SET_REGISTER
(
vd¡
, \

900 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

902 
	`SET_REGISTER_TAINT
(
vd¡
, \

903 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

906 
	`FINISH
(2);

	)

908 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

909 
	`HANDLE_OPCODE
(
_İcode
 ) \

910 
vd¡
 = 
	`INST_A
(
š¡
); \

911 
v¤c1
 = 
	`INST_B
(
š¡
); \

912 
v¤c2
 = 
	`FETCH
(1); \

913 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

914 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

915 ià(
_chkdiv
 != 0) { \

916 
s4
 
fœ¡V®
, 
»suÉ
; \

917 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

918 ià((
s2
è
v¤c2
 == 0) { \

919 
	`EXPORT_PC
(); \

920 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

922 
	`GOTO_exû±iÚThrown
(); \

924 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

926 ià(
_chkdiv
 == 1) \

927 
»suÉ
 = 
fœ¡V®
; \

929 
»suÉ
 = 0; \

931 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

933 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

936 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

939 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

941 
	`FINISH
(2);

	)

943 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

944 
	`HANDLE_OPCODE
(
_İcode
 ) \

946 
u2
 
l™Info
; \

947 
vd¡
 = 
	`INST_AA
(
š¡
); \

948 
l™Info
 = 
	`FETCH
(1); \

949 
v¤c1
 = 
l™Info
 & 0xff; \

950 
v¤c2
 = 
l™Info
 >> 8; \

951 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

952 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

953 ià(
_chkdiv
 != 0) { \

954 
s4
 
fœ¡V®
, 
»suÉ
; \

955 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

956 ià((
s1
è
v¤c2
 == 0) { \

957 
	`EXPORT_PC
(); \

958 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

960 
	`GOTO_exû±iÚThrown
(); \

962 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

963 ià(
_chkdiv
 == 1) \

964 
»suÉ
 = 
fœ¡V®
; \

966 
»suÉ
 = 0; \

968 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

970 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

972 
	`SET_REGISTER
(
vd¡
, \

973 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

976 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

979 
	`FINISH
(2);

	)

981 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

982 
	`HANDLE_OPCODE
(
_İcode
 ) \

984 
u2
 
l™Info
; \

985 
vd¡
 = 
	`INST_AA
(
š¡
); \

986 
l™Info
 = 
	`FETCH
(1); \

987 
v¤c1
 = 
l™Info
 & 0xff; \

988 
v¤c2
 = 
l™Info
 >> 8; \

989 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

990 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

991 
	`SET_REGISTER
(
vd¡
, \

992 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

994 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

997 
	`FINISH
(2);

	)

999 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1000 
	`HANDLE_OPCODE
(
_İcode
 ) \

1001 
vd¡
 = 
	`INST_A
(
š¡
); \

1002 
v¤c1
 = 
	`INST_B
(
š¡
); \

1003 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1004 ià(
_chkdiv
 != 0) { \

1005 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1006 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1007 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1008 ià(
£cÚdV®
 == 0) { \

1009 
	`EXPORT_PC
(); \

1010 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1012 
	`GOTO_exû±iÚThrown
(); \

1014 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1015 ià(
_chkdiv
 == 1) \

1016 
»suÉ
 = 
fœ¡V®
; \

1018 
»suÉ
 = 0; \

1020 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1022 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1024 
	`SET_REGISTER
(
vd¡
, \

1025 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1028 
	`SET_REGISTER_TAINT
(
vd¡
, \

1029 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1031 
	`FINISH
(1);

	)

1033 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1034 
	`HANDLE_OPCODE
(
_İcode
 ) \

1035 
vd¡
 = 
	`INST_A
(
š¡
); \

1036 
v¤c1
 = 
	`INST_B
(
š¡
); \

1037 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1038 
	`SET_REGISTER
(
vd¡
, \

1039 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1041 
	`SET_REGISTER_TAINT
(
vd¡
, \

1042 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1044 
	`FINISH
(1);

	)

1046 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1047 
	`HANDLE_OPCODE
(
_İcode
 ) \

1049 
u2
 
¤cRegs
; \

1050 
vd¡
 = 
	`INST_AA
(
š¡
); \

1051 
¤cRegs
 = 
	`FETCH
(1); \

1052 
v¤c1
 = 
¤cRegs
 & 0xff; \

1053 
v¤c2
 = 
¤cRegs
 >> 8; \

1054 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1055 ià(
_chkdiv
 != 0) { \

1056 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1057 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1058 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1059 ià(
£cÚdV®
 == 0LL) { \

1060 
	`EXPORT_PC
(); \

1061 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1063 
	`GOTO_exû±iÚThrown
(); \

1065 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1066 
£cÚdV®
 == -1LL) \

1068 ià(
_chkdiv
 == 1) \

1069 
»suÉ
 = 
fœ¡V®
; \

1071 
»suÉ
 = 0; \

1073 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1075 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1077 
	`SET_REGISTER_WIDE
(
vd¡
, \

1078 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1081 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1082 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1085 
	`FINISH
(2);

	)

1087 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1088 
	`HANDLE_OPCODE
(
_İcode
 ) \

1090 
u2
 
¤cRegs
; \

1091 
vd¡
 = 
	`INST_AA
(
š¡
); \

1092 
¤cRegs
 = 
	`FETCH
(1); \

1093 
v¤c1
 = 
¤cRegs
 & 0xff; \

1094 
v¤c2
 = 
¤cRegs
 >> 8; \

1095 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1096 
	`SET_REGISTER_WIDE
(
vd¡
, \

1097 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1099 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1100 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1103 
	`FINISH
(2);

	)

1105 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1106 
	`HANDLE_OPCODE
(
_İcode
 ) \

1107 
vd¡
 = 
	`INST_A
(
š¡
); \

1108 
v¤c1
 = 
	`INST_B
(
š¡
); \

1109 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1110 ià(
_chkdiv
 != 0) { \

1111 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1112 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1113 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1114 ià(
£cÚdV®
 == 0LL) { \

1115 
	`EXPORT_PC
(); \

1116 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1118 
	`GOTO_exû±iÚThrown
(); \

1120 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1121 
£cÚdV®
 == -1LL) \

1123 ià(
_chkdiv
 == 1) \

1124 
»suÉ
 = 
fœ¡V®
; \

1126 
»suÉ
 = 0; \

1128 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1130 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1132 
	`SET_REGISTER_WIDE
(
vd¡
, \

1133 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1136 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1137 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1139 
	`FINISH
(1);

	)

1141 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1142 
	`HANDLE_OPCODE
(
_İcode
 ) \

1143 
vd¡
 = 
	`INST_A
(
š¡
); \

1144 
v¤c1
 = 
	`INST_B
(
š¡
); \

1145 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1146 
	`SET_REGISTER_WIDE
(
vd¡
, \

1147 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1149 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1150 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1152 
	`FINISH
(1);

	)

1154 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1155 
	`HANDLE_OPCODE
(
_İcode
 ) \

1157 
u2
 
¤cRegs
; \

1158 
vd¡
 = 
	`INST_AA
(
š¡
); \

1159 
¤cRegs
 = 
	`FETCH
(1); \

1160 
v¤c1
 = 
¤cRegs
 & 0xff; \

1161 
v¤c2
 = 
¤cRegs
 >> 8; \

1162 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1163 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1164 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1166 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1167 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1170 
	`FINISH
(2);

	)

1172 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1173 
	`HANDLE_OPCODE
(
_İcode
 ) \

1175 
u2
 
¤cRegs
; \

1176 
vd¡
 = 
	`INST_AA
(
š¡
); \

1177 
¤cRegs
 = 
	`FETCH
(1); \

1178 
v¤c1
 = 
¤cRegs
 & 0xff; \

1179 
v¤c2
 = 
¤cRegs
 >> 8; \

1180 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1181 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1182 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1184 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1185 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1188 
	`FINISH
(2);

	)

1190 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1191 
	`HANDLE_OPCODE
(
_İcode
 ) \

1192 
vd¡
 = 
	`INST_A
(
š¡
); \

1193 
v¤c1
 = 
	`INST_B
(
š¡
); \

1194 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1195 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1196 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1198 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1199 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1201 
	`FINISH
(1);

	)

1203 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1204 
	`HANDLE_OPCODE
(
_İcode
 ) \

1205 
vd¡
 = 
	`INST_A
(
š¡
); \

1206 
v¤c1
 = 
	`INST_B
(
š¡
); \

1207 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1208 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1209 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1211 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1212 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1214 
	`FINISH
(1);

	)

1216 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1217 
	`HANDLE_OPCODE
(
_İcode
 ) \

1219 
A¼ayObjeù
* 
¬¿yObj
; \

1220 
u2
 
¬¿yInfo
; \

1221 
	`EXPORT_PC
(); \

1222 
vd¡
 = 
	`INST_AA
(
š¡
); \

1223 
¬¿yInfo
 = 
	`FETCH
(1); \

1224 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1225 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1226 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1227 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1228 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1229 
	`GOTO_exû±iÚThrown
(); \

1230 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1231 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1232 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1233 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1234 
NULL
); \

1235 
	`GOTO_exû±iÚThrown
(); \

1237 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1238 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1240 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1241 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1243 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1245 
	`FINISH
(2);

	)

1247 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1248 
	`HANDLE_OPCODE
(
_İcode
 ) \

1250 
A¼ayObjeù
* 
¬¿yObj
; \

1251 
u2
 
¬¿yInfo
; \

1252 
	`EXPORT_PC
(); \

1253 
vd¡
 = 
	`INST_AA
(
š¡
); \

1254 
¬¿yInfo
 = 
	`FETCH
(1); \

1255 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1256 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1257 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1258 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1259 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1260 
	`GOTO_exû±iÚThrown
(); \

1261 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1262 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1263 
NULL
); \

1264 
	`GOTO_exû±iÚThrown
(); \

1266 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1267 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1268 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1270 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1271 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1272 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1275 
	`FINISH
(2);

	)

1294 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1295 
	`HANDLE_OPCODE
(
_İcode
 ) \

1297 
In¡F›ld
* 
if›ld
; \

1298 
Objeù
* 
obj
; \

1299 
	`EXPORT_PC
(); \

1300 
vd¡
 = 
	`INST_A
(
š¡
); \

1301 
v¤c1
 = 
	`INST_B
(
š¡
); \

1302 
»f
 = 
	`FETCH
(1); \

1303 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1304 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1305 ià(!
	`checkFÜNuÎ
(
obj
)) \

1306 
	`GOTO_exû±iÚThrown
(); \

1307 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1308 ià(
if›ld
 =ğ
NULL
) { \

1309 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1310 ià(
if›ld
 =ğ
NULL
) \

1311 
	`GOTO_exû±iÚThrown
(); \

1313 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1314 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1315 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1316 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1317 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1319 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1320 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1321 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1324 
	`FINISH
(2);

	)

1326 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1327 
	`HANDLE_OPCODE
(
_İcode
 ) \

1329 
Objeù
* 
obj
; \

1330 
vd¡
 = 
	`INST_A
(
š¡
); \

1331 
v¤c1
 = 
	`INST_B
(
š¡
); \

1332 
»f
 = 
	`FETCH
(1); \

1333 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1334 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1335 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1336 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1337 
	`GOTO_exû±iÚThrown
(); \

1338 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1339 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1340 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1344 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1345 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1346 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1349 
	`FINISH
(2);

	)

1351 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1352 
	`HANDLE_OPCODE
(
_İcode
 ) \

1354 
In¡F›ld
* 
if›ld
; \

1355 
Objeù
* 
obj
; \

1356 
	`EXPORT_PC
(); \

1357 
vd¡
 = 
	`INST_A
(
š¡
); \

1358 
v¤c1
 = 
	`INST_B
(
š¡
); \

1359 
»f
 = 
	`FETCH
(1); \

1360 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1361 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1362 ià(!
	`checkFÜNuÎ
(
obj
)) \

1363 
	`GOTO_exû±iÚThrown
(); \

1364 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1365 ià(
if›ld
 =ğ
NULL
) { \

1366 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1367 ià(
if›ld
 =ğ
NULL
) \

1368 
	`GOTO_exû±iÚThrown
(); \

1370 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1371 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1372 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1373 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1374 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1376 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1377 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1380 
	`FINISH
(2);

	)

1382 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1383 
	`HANDLE_OPCODE
(
_İcode
 ) \

1385 
Objeù
* 
obj
; \

1386 
vd¡
 = 
	`INST_A
(
š¡
); \

1387 
v¤c1
 = 
	`INST_B
(
š¡
); \

1388 
»f
 = 
	`FETCH
(1); \

1389 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1390 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1391 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1392 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1393 
	`GOTO_exû±iÚThrown
(); \

1394 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1395 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1396 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1400 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1401 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1404 
	`FINISH
(2);

	)

1406 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1407 
	`HANDLE_OPCODE
(
_İcode
 ) \

1409 
SticF›ld
* 
sf›ld
; \

1410 
vd¡
 = 
	`INST_AA
(
š¡
); \

1411 
»f
 = 
	`FETCH
(1); \

1412 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1413 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1414 ià(
sf›ld
 =ğ
NULL
) { \

1415 
	`EXPORT_PC
(); \

1416 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1417 ià(
sf›ld
 =ğ
NULL
) \

1418 
	`GOTO_exû±iÚThrown
(); \

1420 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1421 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1422 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1423 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1425 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1428 
	`FINISH
(2);

	)

1430 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1431 
	`HANDLE_OPCODE
(
_İcode
 ) \

1433 
SticF›ld
* 
sf›ld
; \

1434 
vd¡
 = 
	`INST_AA
(
š¡
); \

1435 
»f
 = 
	`FETCH
(1); \

1436 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1437 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1438 ià(
sf›ld
 =ğ
NULL
) { \

1439 
	`EXPORT_PC
(); \

1440 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1441 ià(
sf›ld
 =ğ
NULL
) \

1442 
	`GOTO_exû±iÚThrown
(); \

1444 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1445 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1446 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1447 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1449 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1450 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1453 
	`FINISH
(2);

	)

1465 
boŞ
 
	$isIÁ”e¡šgAddr
(cÚ¡ 
u2
* 
pc
)

1467 cÚ¡ 
u2
** 
±r
 = 
gDvm
.
debugB»akAddr
;

1468 
i
;

1470 
i
 = 0; i < 
MAX_BREAKPOINTS
; i++, 
±r
++) {

1471 ià(*
±r
 =ğ
pc
) {

1472 
	`LOGV
("BKP: h™ oÀ%p\n", 
pc
);

1473  
Œue
;

1476  
çl£
;

1477 
	}
}

1503 
	$upd©eDebugg”
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
,

1504 
boŞ
 
m‘hodEÁry
, 
Th»ad
* 
£lf
)

1506 
ev’tFÏgs
 = 0;

1515 
	`EXPORT_PC
();

1517 ià(
m‘hodEÁry
)

1518 
ev’tFÏgs
 |ğ
DBG_METHOD_ENTRY
;

1531 #ifdeà
WITH_DEBUGGER


1532 ià(
m‘hod
->
debugB»akpoštCouÁ
 > 0 && 
	`isIÁ”e¡šgAddr
(
pc
)) {

1533 
ev’tFÏgs
 |ğ
DBG_BREAKPOINT
;

1541 cÚ¡ 
S‹pCÚŒŞ
* 
pCŒl
 = &
gDvm
.
¡•CÚŒŞ
;

1542 ià(
pCŒl
->
aùive
 &&…CŒl->
th»ad
 =ğ
£lf
) {

1543 
lše
, 
äameD•th
;

1544 
boŞ
 
doStİ
 = 
çl£
;

1545 cÚ¡ * 
msg
 = 
NULL
;

1547 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

1549 ià(
pCŒl
->
d•th
 =ğ
SD_INTO
) {

1555 ià(
pCŒl
->
m‘hod
 != method) {

1556 
doStİ
 = 
Œue
;

1557 
msg
 = "new method";

1558 } ià(
pCŒl
->
size
 =ğ
SS_MIN
) {

1559 
doStİ
 = 
Œue
;

1560 
msg
 = "new instruction";

1561 } ià(!
	`dvmAdd»ssS‘G‘
(

1562 
pCŒl
->
pAdd»ssS‘
, 
pc
 - 
m‘hod
->
š¢s
)) {

1563 
doStİ
 = 
Œue
;

1564 
msg
 = "new†ine";

1566 } ià(
pCŒl
->
d•th
 =ğ
SD_OVER
) {

1574 
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
£lf
, 
å
);

1575 ià(
äameD•th
 < 
pCŒl
->frameDepth) {

1577 
doStİ
 = 
Œue
;

1578 
msg
 = "method…op";

1579 } ià(
äameD•th
 =ğ
pCŒl
->frameDepth) {

1581 ià(
pCŒl
->
size
 =ğ
SS_MIN
) {

1582 
doStİ
 = 
Œue
;

1583 
msg
 = "new instruction";

1584 } ià(!
	`dvmAdd»ssS‘G‘
(
pCŒl
->
pAdd»ssS‘
,

1585 
pc
 - 
m‘hod
->
š¢s
)) {

1586 
doStİ
 = 
Œue
;

1587 
msg
 = "new†ine";

1591 
	`as£¹
(
pCŒl
->
d•th
 =ğ
SD_OUT
);

1600 
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
£lf
, 
å
);

1601 ià(
äameD•th
 < 
pCŒl
->frameDepth) {

1602 
doStİ
 = 
Œue
;

1603 
msg
 = "method…op";

1607 ià(
doStİ
) {

1608 
	`LOGV
("#####S %s\n", 
msg
);

1609 
ev’tFÏgs
 |ğ
DBG_SINGLE_STEP
;

1624 
u2
 
š¡
 = 
	`INST_INST
(
	`FETCH
(0));

1625 ià(
š¡
 =ğ
OP_RETURN_VOID
 || in¡ =ğ
OP_RETURN
 || in¡ =ğ
OP_RETURN_WIDE
 ||

1626 
š¡
 =ğ
OP_RETURN_OBJECT
)

1628 
ev’tFÏgs
 |ğ
DBG_METHOD_EXIT
;

1635 ià(
ev’tFÏgs
 != 0) {

1636 
Objeù
* 
thisPŒ
 = 
	`dvmG‘ThisPŒ
(
m‘hod
, 
å
);

1637 ià(
thisPŒ
 !ğ
NULL
 && !
	`dvmIsV®idObjeù
(thisPtr)) {

1643 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1644 
	`LOGE
("HEY: inv®id 'this'…Œ %°(%s.% %s)\n", 
thisPŒ
,

1645 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

1646 
	`ä“
(
desc
);

1647 
	`dvmAbÜt
();

1649 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hod
, 
pc
 - m‘hod->
š¢s
, 
thisPŒ
,

1650 
ev’tFÏgs
);

1652 
	}
}

1662 
	$checkDebugAndProf
(cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
, 
Th»ad
* 
£lf
,

1663 cÚ¡ 
M‘hod
* 
m‘hod
, 
boŞ
* 
pIsM‘hodEÁry
)

1666 
	`as£¹
(
pc
 >ğ
m‘hod
->
š¢s
 &&…c <

1667 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

1674 ià(*
pIsM‘hodEÁry
) {

1675 cÚ¡ * 
cd
 = "Landroid/test/Arithmetic;";

1676 cÚ¡ * 
mn
 = "shiftTest2";

1677 cÚ¡ * 
sg
 = "()V";

1680 
	`¡rcmp
(
m‘hod
->
şazz
->
desütÜ
, 
cd
) == 0 &&

1681 
	`¡rcmp
(
m‘hod
->
Çme
, 
mn
) == 0 &&

1682 
	`¡rcmp
(
m‘hod
->
shÜty
, 
sg
) == 0)

1684 
	`LOGW
("Reached %s.%s,ƒnabling verbose mode\n",

1685 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

1686 
	`ªdroid_£tMšPriÜ™y
(
LOG_TAG
"i", 
ANDROID_LOG_VERBOSE
);

1687 
	`dumpRegs
(
m‘hod
, 
å
, 
Œue
);

1690 ià(!
gDvm
.
debugg”Aùive
)

1691 *
pIsM‘hodEÁry
 = 
çl£
;

1702 #ifdeà
WITH_PROFILER


1704 
boŞ
 
isEÁry
 = *
pIsM‘hodEÁry
;

1705 ià(
isEÁry
) {

1706 *
pIsM‘hodEÁry
 = 
çl£
;

1707 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

1709 ià(
gDvm
.
debugg”Aùive
) {

1710 
	`upd©eDebugg”
(
m‘hod
, 
pc
, 
å
, 
isEÁry
, 
£lf
);

1712 ià(
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 != 0) {

1720 
š¡
 = *
pc
 & 0xff;

1721 
gDvm
.
execu‹dIn¡rCouÁs
[
š¡
]++;

1725 ià(
gDvm
.
debugg”Aùive
) {

1726 
boŞ
 
isEÁry
 = *
pIsM‘hodEÁry
;

1727 
	`upd©eDebugg”
(
m‘hod
, 
pc
, 
å
, 
isEÁry
, 
£lf
);

1728 ià(
isEÁry
)

1729 *
pIsM‘hodEÁry
 = 
çl£
;

1732 
	}
}

1741 
boŞ
 
	$INTERP_FUNC_NAME
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
)

1743 #ià
	`defšed
(
EASY_GDB
)

1744 
SckSaveA»a
* 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

1746 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


1747 
boŞ
 
debugIsM‘hodEÁry
 = 
š‹½S‹
->debugIsMethodEntry;

1749 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

1750 
debugT¿ckedRefS¹
 = 
š‹½S‹
->debugTrackedRefStart;

1752 
DvmDex
* 
m‘hodCÏssDex
;

1753 
JV®ue
 
»tv®
;

1754 #ifdeà
WITH_TAINT_TRACKING


1755 
Tašt
 
¹ašt
;

1759 cÚ¡ 
M‘hod
* 
curM‘hod
;

1760 cÚ¡ 
u2
* 
pc
;

1761 
u4
* 
å
;

1762 
u2
 
š¡
;

1764 
u2
 
»f
;

1765 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
;

1767 cÚ¡ 
M‘hod
* 
m‘hodToC®l
;

1768 
boŞ
 
m‘hodC®lRªge
;

1771 #ià
	`defšed
(
THREADED_INTERP
)

1773 
	`DEFINE_GOTO_TABLE
(
hªdËrTabË
);

1776 #ià
	`defšed
(
WITH_JIT
)

1778 
	`LOGD
("*DebugInterp -ƒntrypoint is %d,gt is 0x%x, %s\n",

1779 
š‹½S‹
->
’ŒyPošt
,

1780 
š‹½S‹
->
pc
,

1781 
š‹½S‹
->
m‘hod
->
Çme
);

1784 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


1788 ià(
	`dvmJ™CheckT¿ûReque¡
(
£lf
,
š‹½S‹
)) {

1789 
š‹½S‹
->
ÃxtMode
 = 
INTERP_STD
;

1791  
Œue
;

1797 
curM‘hod
 = 
š‹½S‹
->
m‘hod
;

1798 
pc
 = 
š‹½S‹
->pc;

1799 
å
 = 
š‹½S‹
->fp;

1800 
»tv®
 = 
š‹½S‹
->retval;

1801 #ifdeà
WITH_TAINT_TRACKING


1802 
¹ašt
 = 
š‹½S‹
->rtaint;

1805 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

1807 
	`LOGVV
("threadid=%d:ƒntry(%s) %s.%s…c=0x%x fp=%pƒp=%d\n",

1808 
£lf
->
th»adId
, (
š‹½S‹
->
ÃxtMode
 =ğ
INTERP_STD
) ? "STD" : "DBG",

1809 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
pc
 - curM‘hod->
š¢s
,

1810 
å
, 
š‹½S‹
->
’ŒyPošt
);

1815 
m‘hodToC®l
 = (cÚ¡ 
M‘hod
*) -1;

1817 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


1818 ià(
debugIsM‘hodEÁry
) {

1819 
	`ILOGD
("|-- Now iÁ”´‘šg %s.%s", 
curM‘hod
->
şazz
->
desütÜ
,

1820 
curM‘hod
->
Çme
);

1821 
	`DUMP_REGS
(
curM‘hod
, 
š‹½S‹
->
å
, 
çl£
);

1825 
š‹½S‹
->
’ŒyPošt
) {

1826 
kIÁ”pEÁryIn¡r
:

1829 
kIÁ”pEÁryR‘uº
:

1830 
»tuºFromM‘hod
;

1831 
kIÁ”pEÁryThrow
:

1832 
exû±iÚThrown
;

1834 
	`dvmAbÜt
();

1837 #ifdeà
THREADED_INTERP


1838 
	`FINISH
(0);

1841 
	`CHECK_DEBUG_AND_PROF
();

1842 
	`CHECK_TRACKED_REFS
();

1845 
š¡
 = 
	`FETCH
(0);

1847 
	`INST_INST
(
š¡
)) {

1853 
	`HANDLE_OPCODE
(
OP_NOP
)

1854 
	`FINISH
(1);

1855 
OP_END


1858 
	`HANDLE_OPCODE
(
OP_MOVE
 )

1859 
vd¡
 = 
	`INST_A
(
š¡
);

1860 
v¤c1
 = 
	`INST_B
(
š¡
);

1861 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1862 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1863 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1864 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1866 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1868 
	`FINISH
(1);

1869 
OP_END


1872 
	`HANDLE_OPCODE
(
OP_MOVE_FROM16
 )

1873 
vd¡
 = 
	`INST_AA
(
š¡
);

1874 
v¤c1
 = 
	`FETCH
(1);

1875 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1876 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1877 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1878 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1880 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1882 
	`FINISH
(2);

1883 
OP_END


1886 
	`HANDLE_OPCODE
(
OP_MOVE_16
 )

1887 
vd¡
 = 
	`FETCH
(1);

1888 
v¤c1
 = 
	`FETCH
(2);

1889 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1890 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1891 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1892 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1894 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1896 
	`FINISH
(3);

1897 
OP_END


1900 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

1903 
vd¡
 = 
	`INST_A
(
š¡
);

1904 
v¤c1
 = 
	`INST_B
(
š¡
);

1905 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1906 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1907 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1909 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1911 
	`FINISH
(1);

1912 
OP_END


1915 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

1916 
vd¡
 = 
	`INST_AA
(
š¡
);

1917 
v¤c1
 = 
	`FETCH
(1);

1918 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1919 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1920 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1922 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1924 
	`FINISH
(2);

1925 
OP_END


1928 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

1929 
vd¡
 = 
	`FETCH
(1);

1930 
v¤c1
 = 
	`FETCH
(2);

1931 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1932 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1933 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1935 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1937 
	`FINISH
(3);

1938 
OP_END


1942 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT
 )

1943 
vd¡
 = 
	`INST_A
(
š¡
);

1944 
v¤c1
 = 
	`INST_B
(
š¡
);

1945 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1946 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1947 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1948 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1950 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1952 
	`FINISH
(1);

1953 
OP_END


1958 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT_FROM16
 )

1959 
vd¡
 = 
	`INST_AA
(
š¡
);

1960 
v¤c1
 = 
	`FETCH
(1);

1961 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1962 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1963 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1964 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1966 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1968 
	`FINISH
(2);

1969 
OP_END


1974 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT_16
 )

1975 
vd¡
 = 
	`FETCH
(1);

1976 
v¤c1
 = 
	`FETCH
(2);

1977 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1978 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1979 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1980 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1982 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1984 
	`FINISH
(3);

1985 
OP_END


1989 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT
 )

1990 
vd¡
 = 
	`INST_AA
(
š¡
);

1991 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1992 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1993 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1994 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

1998 
	`FINISH
(1);

1999 
OP_END


2002 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

2003 
vd¡
 = 
	`INST_AA
(
š¡
);

2004 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

2005 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

2007 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_RETURN_TAINT
());

2009 
	`FINISH
(1);

2010 
OP_END


2014 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT_OBJECT
 )

2015 
vd¡
 = 
	`INST_AA
(
š¡
);

2016 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

2017 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

2018 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

2019 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

2021 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

2023 
	`FINISH
(1);

2024 
OP_END


2028 
	`HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

2029 
vd¡
 = 
	`INST_AA
(
š¡
);

2030 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

2031 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

2032 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

2034 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2036 
	`dvmCË¬Exû±iÚ
(
£lf
);

2037 
	`FINISH
(1);

2038 
OP_END


2041 
	`HANDLE_OPCODE
(
OP_RETURN_VOID
 )

2042 
	`ILOGV
("|return-void");

2043 #iâdeà
NDEBUG


2044 
»tv®
.
j
 = 0xababababULL;

2047 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

2049 
	`GOTO_»tuºFromM‘hod
();

2050 
OP_END


2053 
	`HANDLE_OPCODE
(
OP_RETURN
 )

2054 
v¤c1
 = 
	`INST_AA
(
š¡
);

2055 
	`ILOGV
("|return%s v%d",

2056 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

2057 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

2059 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

2061 
	`GOTO_»tuºFromM‘hod
();

2062 
OP_END


2065 
	`HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

2066 
v¤c1
 = 
	`INST_AA
(
š¡
);

2067 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

2068 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

2070 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

2072 
	`GOTO_»tuºFromM‘hod
();

2073 
OP_END


2077 
	`HANDLE_OPCODE
(
OP_RETURN_OBJECT
 )

2078 
v¤c1
 = 
	`INST_AA
(
š¡
);

2079 
	`ILOGV
("|return%s v%d",

2080 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

2081 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

2083 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

2085 
	`GOTO_»tuºFromM‘hod
();

2086 
OP_END


2090 
	`HANDLE_OPCODE
(
OP_CONST_4
 )

2092 
s4
 
tmp
;

2094 
vd¡
 = 
	`INST_A
(
š¡
);

2095 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

2096 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

2097 
	`SET_REGISTER
(
vd¡
, 
tmp
);

2099 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2102 
	`FINISH
(1);

2103 
OP_END


2106 
	`HANDLE_OPCODE
(
OP_CONST_16
 )

2107 
vd¡
 = 
	`INST_AA
(
š¡
);

2108 
v¤c1
 = 
	`FETCH
(1);

2109 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

2110 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

2112 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2114 
	`FINISH
(2);

2115 
OP_END


2118 
	`HANDLE_OPCODE
(
OP_CONST
 )

2120 
u4
 
tmp
;

2122 
vd¡
 = 
	`INST_AA
(
š¡
);

2123 
tmp
 = 
	`FETCH
(1);

2124 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

2125 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

2126 
	`SET_REGISTER
(
vd¡
, 
tmp
);

2128 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2131 
	`FINISH
(3);

2132 
OP_END


2135 
	`HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

2136 
vd¡
 = 
	`INST_AA
(
š¡
);

2137 
v¤c1
 = 
	`FETCH
(1);

2138 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

2139 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

2141 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2143 
	`FINISH
(2);

2144 
OP_END


2147 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

2148 
vd¡
 = 
	`INST_AA
(
š¡
);

2149 
v¤c1
 = 
	`FETCH
(1);

2150 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

2151 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

2153 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

2155 
	`FINISH
(2);

2156 
OP_END


2159 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

2161 
u4
 
tmp
;

2163 
vd¡
 = 
	`INST_AA
(
š¡
);

2164 
tmp
 = 
	`FETCH
(1);

2165 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

2166 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

2167 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

2169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

2172 
	`FINISH
(3);

2173 
OP_END


2176 
	`HANDLE_OPCODE
(
OP_CONST_WIDE
 )

2178 
u8
 
tmp
;

2180 
vd¡
 = 
	`INST_AA
(
š¡
);

2181 
tmp
 = 
	`FETCH
(1);

2182 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

2183 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

2184 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

2185 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

2186 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

2188 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

2191 
	`FINISH
(5);

2192 
OP_END


2195 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

2196 
vd¡
 = 
	`INST_AA
(
š¡
);

2197 
v¤c1
 = 
	`FETCH
(1);

2198 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

2199 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

2201 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

2203 
	`FINISH
(2);

2204 
OP_END


2207 
	`HANDLE_OPCODE
(
OP_CONST_STRING
 )

2209 
SŒšgObjeù
* 
¡rObj
;

2211 
vd¡
 = 
	`INST_AA
(
š¡
);

2212 
»f
 = 
	`FETCH
(1);

2213 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

2214 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

2215 ià(
¡rObj
 =ğ
NULL
) {

2216 
	`EXPORT_PC
();

2217 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

2218 ià(
¡rObj
 =ğ
NULL
)

2219 
	`GOTO_exû±iÚThrown
();

2221 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

2223 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2226 
	`FINISH
(2);

2227 
OP_END


2230 
	`HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

2232 
SŒšgObjeù
* 
¡rObj
;

2233 
u4
 
tmp
;

2235 
vd¡
 = 
	`INST_AA
(
š¡
);

2236 
tmp
 = 
	`FETCH
(1);

2237 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

2238 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

2239 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

2240 ià(
¡rObj
 =ğ
NULL
) {

2241 
	`EXPORT_PC
();

2242 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

2243 ià(
¡rObj
 =ğ
NULL
)

2244 
	`GOTO_exû±iÚThrown
();

2246 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

2248 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2251 
	`FINISH
(3);

2252 
OP_END


2255 
	`HANDLE_OPCODE
(
OP_CONST_CLASS
 )

2257 
CÏssObjeù
* 
şazz
;

2259 
vd¡
 = 
	`INST_AA
(
š¡
);

2260 
»f
 = 
	`FETCH
(1);

2261 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

2262 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2263 ià(
şazz
 =ğ
NULL
) {

2264 
	`EXPORT_PC
();

2265 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

2266 ià(
şazz
 =ğ
NULL
)

2267 
	`GOTO_exû±iÚThrown
();

2269 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

2271 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2274 
	`FINISH
(2);

2275 
OP_END


2278 
	`HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

2280 
Objeù
* 
obj
;

2282 
v¤c1
 = 
	`INST_AA
(
š¡
);

2283 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

2284 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

2285 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2286 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2287 
	`GOTO_exû±iÚThrown
();

2288 
	`ILOGV
("+†ockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

2289 
	`EXPORT_PC
();

2290 
	`dvmLockObjeù
(
£lf
, 
obj
);

2291 #ifdeà
WITH_DEADLOCK_PREDICTION


2292 ià(
	`dvmCheckExû±iÚ
(
£lf
))

2293 
	`GOTO_exû±iÚThrown
();

2296 
	`FINISH
(1);

2297 
OP_END


2300 
	`HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

2302 
Objeù
* 
obj
;

2304 
	`EXPORT_PC
();

2306 
v¤c1
 = 
	`INST_AA
(
š¡
);

2307 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

2308 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

2309 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2310 ià(!
	`checkFÜNuÎ
(
obj
)) {

2318 
	`ADJUST_PC
(1);

2319 
	`GOTO_exû±iÚThrown
();

2321 
	`ILOGV
("+ uÆockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

2322 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

2323 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

2324 
	`ADJUST_PC
(1);

2325 
	`GOTO_exû±iÚThrown
();

2328 
	`FINISH
(1);

2329 
OP_END


2332 
	`HANDLE_OPCODE
(
OP_CHECK_CAST
 )

2334 
CÏssObjeù
* 
şazz
;

2335 
Objeù
* 
obj
;

2337 
	`EXPORT_PC
();

2339 
v¤c1
 = 
	`INST_AA
(
š¡
);

2340 
»f
 = 
	`FETCH
(1);

2341 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

2343 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2344 ià(
obj
 !ğ
NULL
) {

2345 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

2346 ià(!
	`checkFÜNuÎ
(
obj
))

2347 
	`GOTO_exû±iÚThrown
();

2349 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2350 ià(
şazz
 =ğ
NULL
) {

2351 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

2352 ià(
şazz
 =ğ
NULL
)

2353 
	`GOTO_exû±iÚThrown
();

2355 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

2356 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

2357 "Ljava/Ïng/CÏssCa¡Exû±iÚ;", 
obj
->
şazz
->
desütÜ
);

2358 
	`GOTO_exû±iÚThrown
();

2362 
	`FINISH
(2);

2363 
OP_END


2366 
	`HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

2368 
CÏssObjeù
* 
şazz
;

2369 
Objeù
* 
obj
;

2371 
vd¡
 = 
	`INST_A
(
š¡
);

2372 
v¤c1
 = 
	`INST_B
(
š¡
);

2373 
»f
 = 
	`FETCH
(1);

2374 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

2376 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2377 ià(
obj
 =ğ
NULL
) {

2378 
	`SET_REGISTER
(
vd¡
, 0);

2380 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

2381 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2382 
	`GOTO_exû±iÚThrown
();

2384 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2385 ià(
şazz
 =ğ
NULL
) {

2386 
	`EXPORT_PC
();

2387 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

2388 ià(
şazz
 =ğ
NULL
)

2389 
	`GOTO_exû±iÚThrown
();

2391 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

2393 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2397 
	`FINISH
(2);

2398 
OP_END


2401 
	`HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

2403 
A¼ayObjeù
* 
¬¿yObj
;

2405 
vd¡
 = 
	`INST_A
(
š¡
);

2406 
v¤c1
 = 
	`INST_B
(
š¡
);

2407 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2408 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

2409 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

2410 
	`GOTO_exû±iÚThrown
();

2412 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

2414 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2417 
	`FINISH
(1);

2418 
OP_END


2421 
	`HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

2423 
CÏssObjeù
* 
şazz
;

2424 
Objeù
* 
ÃwObj
;

2426 
	`EXPORT_PC
();

2428 
vd¡
 = 
	`INST_AA
(
š¡
);

2429 
»f
 = 
	`FETCH
(1);

2430 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

2431 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2432 ià(
şazz
 =ğ
NULL
) {

2433 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

2434 ià(
şazz
 =ğ
NULL
)

2435 
	`GOTO_exû±iÚThrown
();

2438 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

2439 
	`GOTO_exû±iÚThrown
();

2449 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2450 ià(
ÃwObj
 =ğ
NULL
)

2451 
	`GOTO_exû±iÚThrown
();

2452 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

2454 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2457 
	`FINISH
(2);

2458 
OP_END


2461 
	`HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

2463 
CÏssObjeù
* 
¬¿yCÏss
;

2464 
A¼ayObjeù
* 
ÃwA¼ay
;

2465 
s4
 
Ëngth
;

2467 
	`EXPORT_PC
();

2469 
vd¡
 = 
	`INST_A
(
š¡
);

2470 
v¤c1
 = 
	`INST_B
(
š¡
);

2471 
»f
 = 
	`FETCH
(1);

2472 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

2473 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

2474 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

2475 ià(
Ëngth
 < 0) {

2476 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Neg©iveA¼aySizeExû±iÚ;", 
NULL
);

2477 
	`GOTO_exû±iÚThrown
();

2479 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2480 ià(
¬¿yCÏss
 =ğ
NULL
) {

2481 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

2482 ià(
¬¿yCÏss
 =ğ
NULL
)

2483 
	`GOTO_exû±iÚThrown
();

2486 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

2487 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

2489 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

2490 ià(
ÃwA¼ay
 =ğ
NULL
)

2491 
	`GOTO_exû±iÚThrown
();

2492 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

2494 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2497 
	`FINISH
(2);

2498 
OP_END


2502 
	`HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

2503 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

2504 
OP_END


2507 
	`HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

2508 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

2509 
OP_END


2512 
	`HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

2514 cÚ¡ 
u2
* 
¬¿yD©a
;

2515 
s4
 
off£t
;

2516 
A¼ayObjeù
* 
¬¿yObj
;

2518 
	`EXPORT_PC
();

2519 
v¤c1
 = 
	`INST_AA
(
š¡
);

2520 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2521 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

2522 
¬¿yD©a
 = 
pc
 + 
off£t
;

2523 #iâdeà
NDEBUG


2524 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

2525 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2528 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

2530 
	`GOTO_exû±iÚThrown
();

2533 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2534 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

2535 
	`GOTO_exû±iÚThrown
();

2537 
	`FINISH
(3);

2539 
OP_END


2542 
	`HANDLE_OPCODE
(
OP_THROW
 )

2544 
Objeù
* 
obj
;

2546 
v¤c1
 = 
	`INST_AA
(
š¡
);

2547 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

2548 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

2549 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) {

2551 
	`LOGVV
("Badƒxception\n");

2554 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

2556 
	`GOTO_exû±iÚThrown
();

2558 
OP_END


2561 
	`HANDLE_OPCODE
(
OP_GOTO
 )

2562 
vd¡
 = 
	`INST_AA
(
š¡
);

2563 ià((
s1
)
vd¡
 < 0)

2564 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

2566 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

2567 
	`ILOGV
("> branchaken");

2568 ià((
s1
)
vd¡
 < 0)

2569 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, (
s1
)
vd¡
);

2570 
	`FINISH
((
s1
)
vd¡
);

2571 
OP_END


2574 
	`HANDLE_OPCODE
(
OP_GOTO_16
 )

2576 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

2578 ià(
off£t
 < 0)

2579 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

2581 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

2582 
	`ILOGV
("> branchaken");

2583 ià(
off£t
 < 0)

2584 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2585 
	`FINISH
(
off£t
);

2587 
OP_END


2590 
	`HANDLE_OPCODE
(
OP_GOTO_32
 )

2592 
s4
 
off£t
 = 
	`FETCH
(1);

2593 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

2595 ià(
off£t
 < 0)

2596 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

2598 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

2599 
	`ILOGV
("> branchaken");

2600 ià(
off£t
 <= 0)

2601 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2602 
	`FINISH
(
off£t
);

2604 
OP_END


2607 
	`HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

2609 cÚ¡ 
u2
* 
sw™chD©a
;

2610 
u4
 
‹¡V®
;

2611 
s4
 
off£t
;

2613 
v¤c1
 = 
	`INST_AA
(
š¡
);

2614 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2615 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

2616 
sw™chD©a
 = 
pc
 + 
off£t
;

2617 #iâdeà
NDEBUG


2618 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

2619 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2622 
	`EXPORT_PC
();

2623 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad…acked switch");

2624 
	`GOTO_exû±iÚThrown
();

2627 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

2629 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

2630 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

2631 ià(
off£t
 <= 0)

2632 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2633 
	`FINISH
(
off£t
);

2635 
OP_END


2638 
	`HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

2640 cÚ¡ 
u2
* 
sw™chD©a
;

2641 
u4
 
‹¡V®
;

2642 
s4
 
off£t
;

2644 
v¤c1
 = 
	`INST_AA
(
š¡
);

2645 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2646 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

2647 
sw™chD©a
 = 
pc
 + 
off£t
;

2648 #iâdeà
NDEBUG


2649 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

2650 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2653 
	`EXPORT_PC
();

2654 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad sparse switch");

2655 
	`GOTO_exû±iÚThrown
();

2658 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

2660 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

2661 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

2662 ià(
off£t
 <= 0)

2663 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2664 
	`FINISH
(
off£t
);

2666 
OP_END


2669 
	`HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

2670 
OP_END


2673 
	`HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

2674 
OP_END


2677 
	`HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

2678 
OP_END


2681 
	`HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

2682 
OP_END


2685 
	`HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

2686 
OP_END


2689 
	`HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

2690 
OP_END


2693 
	`HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

2694 
OP_END


2697 
	`HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

2698 
OP_END


2701 
	`HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

2702 
OP_END


2705 
	`HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

2706 
OP_END


2709 
	`HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

2710 
OP_END


2713 
	`HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

2714 
OP_END


2717 
	`HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

2718 
OP_END


2721 
	`HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

2722 
OP_END


2725 
	`HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

2726 
OP_END


2729 
	`HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

2730 
OP_END


2733 
	`HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

2734 
OP_END


2737 
	`HANDLE_OPCODE
(
OP_UNUSED_3E
)

2738 
OP_END


2741 
	`HANDLE_OPCODE
(
OP_UNUSED_3F
)

2742 
OP_END


2745 
	`HANDLE_OPCODE
(
OP_UNUSED_40
)

2746 
OP_END


2749 
	`HANDLE_OPCODE
(
OP_UNUSED_41
)

2750 
OP_END


2753 
	`HANDLE_OPCODE
(
OP_UNUSED_42
)

2754 
OP_END


2757 
	`HANDLE_OPCODE
(
OP_UNUSED_43
)

2758 
OP_END


2761 
	`HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

2762 
OP_END


2765 
	`HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

2766 
OP_END


2769 
	`HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

2770 
OP_END


2773 
	`HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

2774 
OP_END


2777 
	`HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

2778 
OP_END


2781 
	`HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2782 
OP_END


2785 
	`HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2786 
OP_END


2789 
	`HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2790 
OP_END


2793 
	`HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2794 
OP_END


2797 
	`HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

2799 
A¼ayObjeù
* 
¬¿yObj
;

2800 
Objeù
* 
obj
;

2801 
u2
 
¬¿yInfo
;

2802 
	`EXPORT_PC
();

2803 
vd¡
 = 
	`INST_AA
(
š¡
);

2804 
¬¿yInfo
 = 
	`FETCH
(1);

2805 
v¤c1
 = 
¬¿yInfo
 & 0xff;

2806 
v¤c2
 = 
¬¿yInfo
 >> 8;

2807 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

2808 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2809 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

2810 
	`GOTO_exû±iÚThrown
();

2811 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

2812 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;",

2813 
NULL
);

2814 
	`GOTO_exû±iÚThrown
();

2816 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

2817 ià(
obj
 !ğ
NULL
) {

2818 ià(!
	`checkFÜNuÎ
(
obj
))

2819 
	`GOTO_exû±iÚThrown
();

2820 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->obj.clazz)) {

2821 
	`LOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)\n",

2822 
obj
->
şazz
->
desütÜ
, obj,

2823 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

2826 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

2827 
	`GOTO_exû±iÚThrown
();

2830 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

2831 ((
u4
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] =

2832 
	`GET_REGISTER
(
vd¡
);

2834 
	`SET_ARRAY_TAINT
(
¬¿yObj
,

2835 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) |

2836 
	`GET_REGISTER_TAINT
(
vd¡
)) );

2839 
	`FINISH
(2);

2840 
OP_END


2843 
	`HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2844 
OP_END


2847 
	`HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2848 
OP_END


2851 
	`HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2852 
OP_END


2855 
	`HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2856 
OP_END


2859 
	`HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2860 
OP_END


2863 
	`HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2864 
OP_END


2867 
	`HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2868 
OP_END


2871 
	`HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2872 
OP_END


2875 
	`HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2876 
OP_END


2879 
	`HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2880 
OP_END


2883 
	`HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2884 
OP_END


2887 
	`HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2888 
OP_END


2891 
	`HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2892 
OP_END


2906 
	`HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2907 
OP_END


2910 
	`HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2911 
OP_END


2914 
	`HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2915 
OP_END


2918 
	`HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2919 
OP_END


2922 
	`HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2923 
OP_END


2926 
	`HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2927 
OP_END


2930 
	`HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2931 
OP_END


2934 
	`HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2935 
OP_END


2938 
	`HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2939 
OP_END


2942 
	`HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2943 
OP_END


2946 
	`HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2947 
OP_END


2950 
	`HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2951 
OP_END


2954 
	`HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2955 
OP_END


2958 
	`HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2959 
OP_END


2962 
	`HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2963 
OP_END


2966 
	`HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2967 
OP_END


2970 
	`HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2971 
OP_END


2974 
	`HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2975 
OP_END


2978 
	`HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2979 
OP_END


2982 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2983 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

2984 
OP_END


2987 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2988 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

2989 
OP_END


2992 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2993 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

2994 
OP_END


2997 
	`HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2998 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

2999 
OP_END


3002 
	`HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

3003 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

3004 
OP_END


3007 
	`HANDLE_OPCODE
(
OP_UNUSED_73
)

3008 
OP_END


3011 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

3012 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

3013 
OP_END


3016 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

3017 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

3018 
OP_END


3021 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

3022 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

3023 
OP_END


3026 
	`HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

3027 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

3028 
OP_END


3031 
	`HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

3032 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

3033 
OP_END


3036 
	`HANDLE_OPCODE
(
OP_UNUSED_79
)

3037 
OP_END


3040 
	`HANDLE_OPCODE
(
OP_UNUSED_7A
)

3041 
OP_END


3044 
	`HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

3045 
OP_END


3048 
	`HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

3049 
OP_END


3052 
	`HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

3053 
OP_END


3056 
	`HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

3057 
OP_END


3060 
	`HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

3061 
OP_END


3064 
	`HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

3065 
OP_END


3068 
	`HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

3069 
OP_END


3072 
	`HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

3073 
OP_END


3076 
	`HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

3077 
OP_END


3080 
	`HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

3081 
OP_END


3084 
	`HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

3085 
OP_END


3088 
	`HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

3089 
OP_END


3092 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

3093 , 
_FLOAT
, 
s4
, 
_INT
)

3094 
OP_END


3097 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

3098 , 
_FLOAT
, 
s8
, 
_WIDE
)

3099 
OP_END


3102 
	`HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

3103 
OP_END


3106 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

3107 , 
_DOUBLE
, 
s4
, 
_INT
)

3108 
OP_END


3111 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

3112 , 
_DOUBLE
, 
s8
, 
_WIDE
)

3113 
OP_END


3116 
	`HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

3117 
OP_END


3120 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

3121 
OP_END


3124 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

3125 
OP_END


3128 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

3129 
OP_END


3132 
	`HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

3133 
OP_END


3136 
	`HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

3137 
OP_END


3140 
	`HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

3141 
OP_END


3144 
	`HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

3145 
OP_END


3148 
	`HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

3149 
OP_END


3152 
	`HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

3153 
OP_END


3156 
	`HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

3157 
OP_END


3160 
	`HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

3161 
OP_END


3164 
	`HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

3165 
OP_END


3168 
	`HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

3169 
OP_END


3172 
	`HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

3173 
OP_END


3176 
	`HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

3177 
OP_END


3180 
	`HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

3181 
OP_END


3184 
	`HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

3185 
OP_END


3188 
	`HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

3189 
OP_END


3192 
	`HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

3193 
OP_END


3196 
	`HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

3197 
OP_END


3200 
	`HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

3201 
OP_END


3204 
	`HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

3205 
OP_END


3208 
	`HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

3209 
OP_END


3212 
	`HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

3213 
OP_END


3216 
	`HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

3217 
OP_END


3220 
	`HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

3221 
OP_END


3224 
	`HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

3225 
OP_END


3228 
	`HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

3229 
OP_END


3232 
	`HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

3233 
OP_END


3236 
	`HANDLE_OPCODE
(
OP_REM_FLOAT
 )

3238 
u2
 
¤cRegs
;

3239 
vd¡
 = 
	`INST_AA
(
š¡
);

3240 
¤cRegs
 = 
	`FETCH
(1);

3241 
v¤c1
 = 
¤cRegs
 & 0xff;

3242 
v¤c2
 = 
¤cRegs
 >> 8;

3243 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

3244 
	`SET_REGISTER_FLOAT
(
vd¡
,

3245 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

3247 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

3248 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));

3251 
	`FINISH
(2);

3252 
OP_END


3255 
	`HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

3256 
OP_END


3259 
	`HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

3260 
OP_END


3263 
	`HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

3264 
OP_END


3267 
	`HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

3268 
OP_END


3271 
	`HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

3273 
u2
 
¤cRegs
;

3274 
vd¡
 = 
	`INST_AA
(
š¡
);

3275 
¤cRegs
 = 
	`FETCH
(1);

3276 
v¤c1
 = 
¤cRegs
 & 0xff;

3277 
v¤c2
 = 
¤cRegs
 >> 8;

3278 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

3279 
	`SET_REGISTER_DOUBLE
(
vd¡
,

3280 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

3282 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

3283 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));

3286 
	`FINISH
(2);

3287 
OP_END


3290 
	`HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

3291 
OP_END


3294 
	`HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

3295 
OP_END


3298 
	`HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

3299 
OP_END


3302 
	`HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

3303 
OP_END


3306 
	`HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

3307 
OP_END


3310 
	`HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

3311 
OP_END


3314 
	`HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

3315 
OP_END


3318 
	`HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

3319 
OP_END


3322 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

3323 
OP_END


3326 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

3327 
OP_END


3330 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

3331 
OP_END


3334 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

3335 
OP_END


3338 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

3339 
OP_END


3342 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

3343 
OP_END


3346 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

3347 
OP_END


3350 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

3351 
OP_END


3354 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

3355 
OP_END


3358 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

3359 
OP_END


3362 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

3363 
OP_END


3366 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

3367 
OP_END


3370 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

3371 
OP_END


3374 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

3375 
OP_END


3378 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

3379 
OP_END


3382 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

3383 
OP_END


3386 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

3387 
OP_END


3390 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

3391 
OP_END


3394 
	`HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

3395 
vd¡
 = 
	`INST_A
(
š¡
);

3396 
v¤c1
 = 
	`INST_B
(
š¡
);

3397 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

3398 
	`SET_REGISTER_FLOAT
(
vd¡
,

3399 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

3401 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

3402 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));

3404 
	`FINISH
(1);

3405 
OP_END


3408 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

3409 
OP_END


3412 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

3413 
OP_END


3416 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

3417 
OP_END


3420 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

3421 
OP_END


3424 
	`HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

3425 
vd¡
 = 
	`INST_A
(
š¡
);

3426 
v¤c1
 = 
	`INST_B
(
š¡
);

3427 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

3428 
	`SET_REGISTER_DOUBLE
(
vd¡
,

3429 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

3431 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

3432 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));

3434 
	`FINISH
(1);

3435 
OP_END


3438 
	`HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

3439 
OP_END


3442 
	`HANDLE_OPCODE
(
OP_RSUB_INT
 )

3444 
vd¡
 = 
	`INST_A
(
š¡
);

3445 
v¤c1
 = 
	`INST_B
(
š¡
);

3446 
v¤c2
 = 
	`FETCH
(1);

3447 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

3448 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

3450 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

3453 
	`FINISH
(2);

3454 
OP_END


3457 
	`HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

3458 
OP_END


3461 
	`HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

3462 
OP_END


3465 
	`HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

3466 
OP_END


3469 
	`HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

3470 
OP_END


3473 
	`HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

3474 
OP_END


3477 
	`HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

3478 
OP_END


3481 
	`HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

3482 
OP_END


3485 
	`HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

3487 
u2
 
l™Info
;

3488 
vd¡
 = 
	`INST_AA
(
š¡
);

3489 
l™Info
 = 
	`FETCH
(1);

3490 
v¤c1
 = 
l™Info
 & 0xff;

3491 
v¤c2
 = 
l™Info
 >> 8;

3492 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

3493 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

3495 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

3498 
	`FINISH
(2);

3499 
OP_END


3502 
	`HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

3503 
OP_END


3506 
	`HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

3507 
OP_END


3510 
	`HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

3511 
OP_END


3514 
	`HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

3515 
OP_END


3518 
	`HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

3519 
OP_END


3522 
	`HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

3523 
OP_END


3526 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

3527 
OP_END


3530 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

3531 
OP_END


3534 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

3535 
OP_END


3538 
	`HANDLE_OPCODE
(
OP_UNUSED_E3
)

3539 
OP_END


3542 
	`HANDLE_OPCODE
(
OP_UNUSED_E4
)

3543 
OP_END


3546 
	`HANDLE_OPCODE
(
OP_UNUSED_E5
)

3547 
OP_END


3550 
	`HANDLE_OPCODE
(
OP_UNUSED_E6
)

3551 
OP_END


3554 
	`HANDLE_OPCODE
(
OP_UNUSED_E7
)

3555 
OP_END


3558 
	`HANDLE_OPCODE
(
OP_UNUSED_E8
)

3559 
OP_END


3562 
	`HANDLE_OPCODE
(
OP_UNUSED_E9
)

3563 
OP_END


3566 
	`HANDLE_OPCODE
(
OP_UNUSED_EA
)

3567 
OP_END


3570 
	`HANDLE_OPCODE
(
OP_UNUSED_EB
)

3571 
OP_END


3574 
	`HANDLE_OPCODE
(
OP_UNUSED_EC
)

3575 
OP_END


3578 
	`HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

3579 
	`EXPORT_PC
();

3580 
v¤c1
 = 
	`INST_AA
(
š¡
);

3581 
»f
 = 
	`FETCH
(1);

3582 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

3583 
	`GOTO_exû±iÚThrown
();

3584 
OP_END


3587 
	`HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

3604 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

3607 
	`EXPORT_PC
();

3609 
v¤c1
 = 
	`INST_B
(
š¡
);

3610 
»f
 = 
	`FETCH
(1);

3611 
vd¡
 = 
	`FETCH
(2);

3612 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

3613 
v¤c1
, 
»f
, 
vd¡
);

3615 
	`as£¹
((
vd¡
 >> 16) == 0);

3616 
	`as£¹
(
v¤c1
 <= 4);

3618 
v¤c1
) {

3620 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

3623 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

3626 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

3629 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3635 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


3636 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

3637 
	`GOTO_exû±iÚThrown
();

3639 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

3640 
	`GOTO_exû±iÚThrown
();

3643 
	`FINISH
(3);

3644 
OP_END


3647 
	`HANDLE_OPCODE
(
OP_UNUSED_EF
)

3648 
OP_END


3651 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT_EMPTY
 )

3652 #ià
INTERP_TYPE
 !ğ
INTERP_DBG


3654 
	`FINISH
(3);

3656 ià(!
gDvm
.
debugg”Aùive
) {

3658 
	`FINISH
(3);

3662 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

3665 
OP_END


3668 
	`HANDLE_OPCODE
(
OP_UNUSED_F1
)

3669 
OP_END


3672 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

3673 
OP_END


3676 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

3677 
OP_END


3680 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

3681 
OP_END


3684 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

3685 
OP_END


3688 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

3689 
OP_END


3692 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

3693 
OP_END


3696 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

3697 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

3698 
OP_END


3701 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

3702 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

3703 
OP_END


3706 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

3707 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

3708 
OP_END


3711 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

3712 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

3713 
OP_END


3716 
	`HANDLE_OPCODE
(
OP_UNUSED_FC
)

3717 
OP_END


3720 
	`HANDLE_OPCODE
(
OP_UNUSED_FD
)

3721 
OP_END


3724 
	`HANDLE_OPCODE
(
OP_UNUSED_FE
)

3725 
OP_END


3728 
	`HANDLE_OPCODE
(
OP_UNUSED_FF
)

3732 
	`LOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

3733 
	`dvmAbÜt
();

3734 
	`FINISH
(1);

3735 
OP_END


3748 
	`GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
)

3750 
CÏssObjeù
* 
¬¿yCÏss
;

3751 
A¼ayObjeù
* 
ÃwA¼ay
;

3752 
u4
* 
cÚ‹Ás
;

3753 
ty³Ch
;

3754 
i
;

3755 
u4
 
¬g5
;

3757 
	`EXPORT_PC
();

3759 
»f
 = 
	`FETCH
(1);

3760 
vd¡
 = 
	`FETCH
(2);

3762 ià(
m‘hodC®lRªge
) {

3763 
v¤c1
 = 
	`INST_AA
(
š¡
);

3764 
¬g5
 = -1;

3765 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3766 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3768 
¬g5
 = 
	`INST_A
(
š¡
);

3769 
v¤c1
 = 
	`INST_B
(
š¡
);

3770 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

3771 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

3777 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

3778 ià(
¬¿yCÏss
 =ğ
NULL
) {

3779 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

3780 ià(
¬¿yCÏss
 =ğ
NULL
)

3781 
	`GOTO_exû±iÚThrown
();

3791 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

3792 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

3797 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'\n", 
¬¿yCÏss
->
desütÜ
);

3798 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

3799 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

3801 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeError;",

3803 
	`GOTO_exû±iÚThrown
();

3804 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

3806 
	`LOGE
("non-int…rimitives‚ot implemented\n");

3807 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

3809 
	`GOTO_exû±iÚThrown
();

3812 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

3813 ià(
ÃwA¼ay
 =ğ
NULL
)

3814 
	`GOTO_exû±iÚThrown
();

3819 
cÚ‹Ás
 = (
u4
*è
ÃwA¼ay
->contents;

3820 ià(
m‘hodC®lRªge
) {

3821 
i
 = 0; i < 
v¤c1
; i++)

3822 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3824 
	`as£¹
(
v¤c1
 <= 5);

3825 ià(
v¤c1
 == 5) {

3826 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

3827 
v¤c1
--;

3829 
i
 = 0; i < 
v¤c1
; i++) {

3830 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3831 
vd¡
 >>= 4;

3835 
»tv®
.
l
 = 
ÃwA¼ay
;

3837 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

3840 
	`FINISH
(3);

3841 
GOTO_TARGET_END


3844 
	`GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
)

3846 
M‘hod
* 
ba£M‘hod
;

3847 
Objeù
* 
thisPŒ
;

3849 
	`EXPORT_PC
();

3851 
v¤c1
 = 
	`INST_AA
(
š¡
);

3852 
»f
 = 
	`FETCH
(1);

3853 
vd¡
 = 
	`FETCH
(2);

3859 ià(
m‘hodC®lRªge
) {

3860 
	`as£¹
(
v¤c1
 > 0);

3861 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3862 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3863 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3865 
	`as£¹
((
v¤c1
>>4) > 0);

3866 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

3867 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3868 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3871 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3872 
	`GOTO_exû±iÚThrown
();

3878 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3879 ià(
ba£M‘hod
 =ğ
NULL
) {

3880 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3881 ià(
ba£M‘hod
 =ğ
NULL
) {

3882 
	`ILOGV
("+ unknown method or‡ccess denied\n");

3883 
	`GOTO_exû±iÚThrown
();

3891 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3892 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3895 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3905 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3907 
	`GOTO_exû±iÚThrown
();

3910 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3911 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3914 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s\n",

3915 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3916 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3917 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3918 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3921 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

3922 
	`LOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s\n",

3923 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3924 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3925 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3928 
	`dvmDumpAÎCÏs£s
(0);

3932 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3934 
GOTO_TARGET_END


3936 
	`GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

3938 
M‘hod
* 
ba£M‘hod
;

3939 
u2
 
thisReg
;

3941 
	`EXPORT_PC
();

3943 
v¤c1
 = 
	`INST_AA
(
š¡
);

3944 
»f
 = 
	`FETCH
(1);

3945 
vd¡
 = 
	`FETCH
(2);

3947 ià(
m‘hodC®lRªge
) {

3948 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3949 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3950 
thisReg
 = 
vd¡
;

3952 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

3953 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3954 
thisReg
 = 
vd¡
 & 0x0f;

3957 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3958 
	`GOTO_exû±iÚThrown
();

3967 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3968 ià(
ba£M‘hod
 =ğ
NULL
) {

3969 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3970 ià(
ba£M‘hod
 =ğ
NULL
) {

3971 
	`ILOGV
("+ unknown method or‡ccess denied\n");

3972 
	`GOTO_exû±iÚThrown
();

3985 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3990 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchMethodError;",

3991 
ba£M‘hod
->
Çme
);

3992 
	`GOTO_exû±iÚThrown
();

3994 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3996 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3997 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3999 
	`GOTO_exû±iÚThrown
();

4002 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

4003 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

4005 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s\n",

4006 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

4007 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

4008 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

4010 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

4012 
GOTO_TARGET_END


4014 
	`GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

4016 
Objeù
* 
thisPŒ
;

4017 
CÏssObjeù
* 
thisCÏss
;

4019 
	`EXPORT_PC
();

4021 
v¤c1
 = 
	`INST_AA
(
š¡
);

4022 
»f
 = 
	`FETCH
(1);

4023 
vd¡
 = 
	`FETCH
(2);

4029 ià(
m‘hodC®lRªge
) {

4030 
	`as£¹
(
v¤c1
 > 0);

4031 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

4032 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

4033 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

4035 
	`as£¹
((
v¤c1
>>4) > 0);

4036 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

4037 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

4038 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

4040 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

4041 
	`GOTO_exû±iÚThrown
();

4043 
thisCÏss
 = 
thisPŒ
->
şazz
;

4049 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

4050 
m‘hodCÏssDex
);

4051 ià(
m‘hodToC®l
 =ğ
NULL
) {

4052 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4053 
	`GOTO_exû±iÚThrown
();

4056 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

4058 
GOTO_TARGET_END


4060 
	`GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

4062 
u2
 
thisReg
;

4064 
v¤c1
 = 
	`INST_AA
(
š¡
);

4065 
»f
 = 
	`FETCH
(1);

4066 
vd¡
 = 
	`FETCH
(2);

4068 
	`EXPORT_PC
();

4070 ià(
m‘hodC®lRªge
) {

4071 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

4072 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

4073 
thisReg
 = 
vd¡
;

4075 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

4076 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

4077 
thisReg
 = 
vd¡
 & 0x0f;

4079 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

4080 
	`GOTO_exû±iÚThrown
();

4082 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

4083 ià(
m‘hodToC®l
 =ğ
NULL
) {

4084 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

4085 
METHOD_DIRECT
);

4086 ià(
m‘hodToC®l
 =ğ
NULL
) {

4087 
	`ILOGV
("+ unknown direct method\n");

4088 
	`GOTO_exû±iÚThrown
();

4091 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

4093 
GOTO_TARGET_END


4095 
	`GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

4096 
v¤c1
 = 
	`INST_AA
(
š¡
);

4097 
»f
 = 
	`FETCH
(1);

4098 
vd¡
 = 
	`FETCH
(2);

4100 
	`EXPORT_PC
();

4102 ià(
m‘hodC®lRªge
)

4103 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

4104 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

4106 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

4107 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

4109 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

4110 ià(
m‘hodToC®l
 =ğ
NULL
) {

4111 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

4112 ià(
m‘hodToC®l
 =ğ
NULL
) {

4113 
	`ILOGV
("+ unknown method\n");

4114 
	`GOTO_exû±iÚThrown
();

4117 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

4118 
GOTO_TARGET_END


4120 
	`GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

4122 
Objeù
* 
thisPŒ
;

4124 
	`EXPORT_PC
();

4126 
v¤c1
 = 
	`INST_AA
(
š¡
);

4127 
»f
 = 
	`FETCH
(1);

4128 
vd¡
 = 
	`FETCH
(2);

4134 ià(
m‘hodC®lRªge
) {

4135 
	`as£¹
(
v¤c1
 > 0);

4136 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

4137 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

4138 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

4140 
	`as£¹
((
v¤c1
>>4) > 0);

4141 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

4142 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

4143 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

4146 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

4147 
	`GOTO_exû±iÚThrown
();

4153 
	`as£¹
(
»f
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

4154 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

4157 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

4158 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

4160 
	`GOTO_exû±iÚThrown
();

4163 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

4164 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

4167 
	`LOGVV
("+++ virtual[%d]=%s.%s\n",

4168 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

4169 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

4171 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

4173 
GOTO_TARGET_END


4175 
	`GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

4177 
u2
 
thisReg
;

4179 
	`EXPORT_PC
();

4181 
v¤c1
 = 
	`INST_AA
(
š¡
);

4182 
»f
 = 
	`FETCH
(1);

4183 
vd¡
 = 
	`FETCH
(2);

4185 ià(
m‘hodC®lRªge
) {

4186 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

4187 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

4188 
thisReg
 = 
vd¡
;

4190 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

4191 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

4192 
thisReg
 = 
vd¡
 & 0x0f;

4195 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

4196 
	`GOTO_exû±iÚThrown
();

4199 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

4200 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
NULL
);

4201 
	`GOTO_exû±iÚThrown
();

4204 
	`as£¹
(
»f
 < 
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

4216 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

4219 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

4220 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

4222 
	`GOTO_exû±iÚThrown
();

4225 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

4226 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

4228 
	`LOGVV
("+++ super-virtual[%d]=%s.%s\n",

4229 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

4230 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

4232 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

4234 
GOTO_TARGET_END


4242 
	`GOTO_TARGET
(
»tuºFromM‘hod
)

4244 
SckSaveA»a
* 
§veA»a
;

4253 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryR‘uº
, 0);

4255 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

4256 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4257 
curM‘hod
->
shÜty
);

4260 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

4262 #ifdeà
EASY_GDB


4263 
debugSaveA»a
 = 
§veA»a
;

4265 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

4266 
	`TRACE_METHOD_EXIT
(
£lf
, 
curM‘hod
);

4270 
å
 = 
§veA»a
->
´evF¿me
;

4271 
	`as£¹
(
å
 !ğ
NULL
);

4272 ià(
	`dvmIsB»akF¿me
(
å
)) {

4274 
	`LOGVV
("+++„eturned into break frame\n");

4275 
	`GOTO_ba
();

4279 
£lf
->
curF¿me
 = 
å
;

4280 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4282 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4283 
pc
 = 
§veA»a
->
§vedPc
;

4284 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

4285 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4289 ià(
Œue


4292 
	`FINISH
(3);

4296 
	`as£¹
(
çl£
);

4299 
GOTO_TARGET_END


4308 
	`GOTO_TARGET
(
exû±iÚThrown
)

4310 
Objeù
* 
exû±iÚ
;

4311 
ÿtchR–Pc
;

4317 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryThrow
, 0);

4325 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4326 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

4327 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4328 
	`dvmCË¬Exû±iÚ
(
£lf
);

4330 
	`LOGV
("Handlingƒxception %s‡t %s:%d\n",

4331 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

4332 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

4334 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4349 ià(
gDvm
.
debugg”Aùive
) {

4350 * 
ÿtchF¿me
;

4351 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

4352 
exû±iÚ
, 
Œue
, &
ÿtchF¿me
);

4353 
	`dvmDbgPo¡Exû±iÚ
(
å
, 
pc
 - 
curM‘hod
->
š¢s
, 
ÿtchF¿me
,

4354 
ÿtchR–Pc
, 
exû±iÚ
);

4370 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

4371 
exû±iÚ
, 
çl£
, (*)&
å
);

4384 ià(
£lf
->
¡ackOv”æowed
)

4385 
	`dvmCËªupSckOv”æow
(
£lf
);

4387 ià(
ÿtchR–Pc
 < 0) {

4389 #ià
DVM_SHOW_EXCEPTION
 >= 2

4390 
	`LOGD
("Exception %s from %s:%d‚ot caught†ocally\n",

4391 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

4392 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

4394 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

4395 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4396 
	`GOTO_ba
();

4399 #ià
DVM_SHOW_EXCEPTION
 >= 3

4401 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4402 
	`LOGD
("Exception %shrown from %s:%do %s:%d\n",

4403 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

4404 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

4405 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

4406 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

4415 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4417 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4418 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

4419 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

4420 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4421 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

4435 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

4436 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

4438 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4439 
	`FINISH
(0);

4441 
GOTO_TARGET_END


4461 
	`GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

4462 
u2
 
couÁ
, u2 
»gs
)

4464 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

4471 
u4
* 
outs
;

4472 
i
;

4473 #ifdeà
WITH_TAINT_TRACKING


4474 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
);

4480 ià(
m‘hodC®lRªge
) {

4483 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

4484 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

4485 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

4486 #ifdeà
WITH_TAINT_TRACKING


4487 ià(
ÇtiveT¬g‘
) {

4488 
i
 = 0; i < 
v¤c1
; i++) {

4489 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

4492 
outs
[
v¤c1
] = 
TAINT_CLEAR
;

4494 
i
 = 0; i < 
v¤c1
; i++) {

4495 
outs
[
v¤c1
+1+
i
] = 
	`GET_REGISTER_TAINT
(
vd¡
+i);

4498 
¦Ù
 = 0;

4499 
i
 = 0; i < 
v¤c1
; i++) {

4500 
¦Ù
 = 
i
 << 1;

4501 
outs
[
¦Ù
] = 
	`GET_REGISTER
(
vd¡
+
i
);

4502 
outs
[
¦Ù
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
+
i
);

4505 
outs
[
v¤c1
<<1] = 
TAINT_CLEAR
;

4508 
i
 = 0; i < 
v¤c1
; i++)

4509 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

4512 
u4
 
couÁ
 = 
v¤c1
 >> 4;

4514 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

4515 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

4516 
	`as£¹
(
couÁ
 <= 5);

4518 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

4520 ià(
couÁ
 == 5) {

4521 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4522 
couÁ
--;

4524 
i
 = 0; i < (è
couÁ
; i++) {

4525 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4526 
vd¡
 >>= 4;

4529 
	`as£¹
((
vd¡
 >> 16) == 0);

4530 #ifdeà
WITH_TAINT_TRACKING


4531 ià(
ÇtiveT¬g‘
) {

4532 
couÁ
) {

4534 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4535 
outs
[
couÁ
+5] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

4537 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4538 
outs
[
couÁ
+4] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

4540 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4541 
outs
[
couÁ
+3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

4543 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4544 
outs
[
couÁ
+2] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

4546 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4547 
outs
[
couÁ
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

4552 
outs
[
couÁ
] = 
TAINT_CLEAR
;

4554 
couÁ
) {

4556 
outs
[8] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4557 
outs
[9] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

4559 
outs
[6] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4560 
outs
[7] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

4562 
outs
[4] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4563 
outs
[5] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

4565 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4566 
outs
[3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

4568 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4569 
outs
[1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

4574 
outs
[
couÁ
<<1] = 
TAINT_CLEAR
;

4579 
couÁ
) {

4581 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4583 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4585 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4587 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4589 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4607 
SckSaveA»a
* 
ÃwSaveA»a
;

4608 
u4
* 
ÃwFp
;

4610 
	`ILOGV
("> %s%s.%s %s",

4611 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

4612 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4613 
m‘hodToC®l
->
shÜty
);

4615 #ifdeà
WITH_TAINT_TRACKING


4616 
ÃwFp
 = (
u4
*è
	`SAVEAREA_FROM_FP
(
å
) -

4617 ((
m‘hodToC®l
->
»gi¡”sSize
 << 1) + 1);

4619 
ÃwFp
 = (
u4
*è
	`SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

4621 
ÃwSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
ÃwFp
);

4624 ià(
Œue
) {

4625 
u1
* 
bÙtom
;

4626 #ifdeà
WITH_TAINT_TRACKING


4627 
bÙtom
 = (
u1
*è
ÃwSaveA»a
 -

4628 (
m‘hodToC®l
->
outsSize
 * (
u4
) + 4);

4630 
bÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

4632 ià(
bÙtom
 < 
£lf
->
š‹½SckEnd
) {

4634 
	`LOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p size=%d '%s')\n",

4635 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

4636 
£lf
->
š‹½SckSize
, 
m‘hodToC®l
->
Çme
);

4637 
	`dvmHªdËSckOv”æow
(
£lf
);

4638 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4639 
	`GOTO_exû±iÚThrown
();

4645 #ifdeà
LOG_INSTR


4646 ià(
m‘hodToC®l
->
»gi¡”sSize
 > m‘hodToC®l->
šsSize
) {

4653 #ifdeà
WITH_TAINT_TRACKING


4656 
	`mem£t
(
ÃwFp
, 0xcc,

4657 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 8);

4659 
	`mem£t
(
ÃwFp
, 0xcc,

4660 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

4665 #ifdeà
EASY_GDB


4666 
ÃwSaveA»a
->
´evSave
 = 
	`SAVEAREA_FROM_FP
(
å
);

4668 
ÃwSaveA»a
->
´evF¿me
 = 
å
;

4669 
ÃwSaveA»a
->
§vedPc
 = 
pc
;

4670 #ià
	`defšed
(
WITH_JIT
)

4671 
ÃwSaveA»a
->
»tuºAddr
 = 0;

4673 
ÃwSaveA»a
->
m‘hod
 = 
m‘hodToC®l
;

4675 ià(!
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

4680 
curM‘hod
 = 
m‘hodToC®l
;

4681 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4682 
pc
 = 
m‘hodToC®l
->
š¢s
;

4683 
å
 = 
£lf
->
curF¿me
 = 
ÃwFp
;

4684 #ifdeà
EASY_GDB


4685 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
ÃwFp
);

4687 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


4688 
debugIsM‘hodEÁry
 = 
Œue
;

4690 
	`ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

4691 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4692 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

4693 
	`FINISH
(0);

4696 #ifdeà
USE_INDIRECT_REF


4697 
ÃwSaveA»a
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

4699 
ÃwSaveA»a
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

4702 
£lf
->
curF¿me
 = 
ÃwFp
;

4704 
	`DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

4706 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4707 ià(
gDvm
.
debugg”Aùive
) {

4708 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

4709 
	`dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_ENTRY
);

4712 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

4713 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

4716 
	`ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

4717 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

4724 (*
m‘hodToC®l
->
ÇtiveFunc
)(
ÃwFp
, &
»tv®
, m‘hodToC®l, 
£lf
);

4725 #ifdeà
WITH_TAINT_TRACKING


4729 
u4
 
couÁ
 = (
m‘hodC®lRªge
è? 
v¤c1
 : vsrc1 >> 4;

4730 
u4
* 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

4731 
	`SET_RETURN_TAINT
(
outs
[
couÁ
]);

4735 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4736 ià(
gDvm
.
debugg”Aùive
) {

4737 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

4738 
	`dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_EXIT
);

4741 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

4742 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hodToC®l
);

4746 
	`dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

4747 
£lf
->
curF¿me
 = 
å
;

4754 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4755 
	`LOGV
("Exceptionhrown by/below‚ative code\n");

4756 
	`GOTO_exû±iÚThrown
();

4759 
	`ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

4760 
	`ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

4761 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4762 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4763 
curM‘hod
->
shÜty
);

4766 ià(
Œue


4769 
	`FINISH
(3);

4773 
	`as£¹
(
çl£
);

4777 
	`as£¹
(
çl£
);

4778 
GOTO_TARGET_END


4783 #iâdeà
THREADED_INTERP


4788 
ba
:

4789 
	`ILOGD
("|-- Leaving interpreter†oop");

4791 
š‹½S‹
->
»tv®
 =„etval;

4792 #ifdeà
WITH_TAINT_TRACKING


4793 
š‹½S‹
->
¹ašt
 =„taint;

4795  
çl£
;

4797 
ba_sw™ch
:

4805 #ià
	`defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

4806 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


4807 
š‹½S‹
->
debugIsM‘hodEÁry
 = debugIsMethodEntry;

4809 
š‹½S‹
->
debugIsM‘hodEÁry
 = 
çl£
;

4814 
š‹½S‹
->
m‘hod
 = 
curM‘hod
;

4815 
š‹½S‹
->
pc
 =…c;

4816 
š‹½S‹
->
å
 = fp;

4818 
š‹½S‹
->
»tv®
 =„etval;

4819 #ifdeà
WITH_TAINT_TRACKING


4820 
š‹½S‹
->
¹ašt
 =„taint;

4822 
š‹½S‹
->
ÃxtMode
 =

4823 (
INTERP_TYPE
 =ğ
INTERP_STD
è? 
INTERP_DBG
 : INTERP_STD;

4824 
	`LOGVV
(" meth='%s.%s'…c=0x%x fp=%p\n",

4825 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4826 
pc
 - 
curM‘hod
->
š¢s
, 
å
);

4827  
Œue
;

4828 
	}
}

	@mterp/out/InterpC-portstd.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

589 
	#INTERP_FUNC_NAME
 
dvmIÁ”´‘Std


	)

590 
	#INTERP_TYPE
 
INTERP_STD


	)

592 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

594 
	#CHECK_JIT
(è(()0)

	)

602 
	#GOTO_TARGET_DECL
(
_rg‘
, ...)

	)

604 
	#GOTO_TARGET
(
_rg‘
, ...è_rg‘:

	)

606 
	#GOTO_TARGET_END


	)

609 
	#STUB_HACK
(
x
)

	)

619 #ifdeà
THREADED_INTERP


620 
	#H
(
_İ
è&&
İ_
##
	)
_op

621 
	#HANDLE_OPCODE
(
_İ
è
İ_
##_İ:

	)

622 
	#FINISH
(
_off£t
) { \

623 
	`ADJUST_PC
(
_off£t
); \

624 
š¡
 = 
	`FETCH
(0); \

625 
	`CHECK_DEBUG_AND_PROF
(); \

626 
	`CHECK_TRACKED_REFS
(); \

627 
	`CHECK_JIT
(); \

628 *
hªdËrTabË
[
	`INST_INST
(
š¡
)]; \

629 }

	)

631 
	#HANDLE_OPCODE
(
_İ
è_İ:

	)

632 
	#FINISH
(
_off£t
è{ 
	`ADJUST_PC
(_off£t); ; }

	)

635 
	#OP_END


	)

637 #ià
defšed
(
WITH_TRACKREF_CHECKS
)

638 
	#CHECK_TRACKED_REFS
() \

639 
	`dvmIÁ”pCheckT¿ckedRefs
(
£lf
, 
curM‘hod
, 
debugT¿ckedRefS¹
)

	)

641 
	#CHECK_TRACKED_REFS
(è(()0)

	)

650 
	#GOTO_exû±iÚThrown
(è
exû±iÚThrown
;

	)

652 
	#GOTO_»tuºFromM‘hod
(è
»tuºFromM‘hod
;

	)

654 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

656 
m‘hodC®lRªge
 = 
_m‘hodC®lRªge
; \

657 
_rg‘
; \

658 } 
çl£
)

	)

661 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
è
švokeM‘hod
;

	)

663 
	#GOTO_ba
(è
ba
;

	)

664 
	#GOTO_ba_sw™ch
(è
ba_sw™ch
;

	)

672 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

673 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

674 
	`EXPORT_PC
(); \

675 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

677 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

678 
	`ADJUST_PC
(
_pÿdj
); \

679 
š‹½S‹
->
’ŒyPošt
 = 
_’ŒyPošt
; \

680 
	`LOGVV
("threadid=%d: switcho %sƒp=%d‡dj=%d\n", \

681 
£lf
->
th»adId
, \

682 (
š‹½S‹
->
ÃxtMode
 =ğ
INTERP_STD
) ? "STD" : "DBG", \

683 (
_’ŒyPošt
), (
_pÿdj
)); \

684 
	`GOTO_ba_sw™ch
(); \

686 }

	)

691 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

692 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

693 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

694 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

695 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

696 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

697 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

698 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

699 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

700 
u2
 
couÁ
, u2 
»gs
);

701 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

702 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

716 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

717 
	`HANDLE_OPCODE
(
_İcode
 ) \

718 
vd¡
 = 
	`INST_A
(
š¡
); \

719 
v¤c1
 = 
	`INST_B
(
š¡
); \

720 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

721 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

722 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

724 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

725 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

727 
	`FINISH
(1);

	)

729 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

730 
_tovty³
, 
_tÜty³
) \

731 
	`HANDLE_OPCODE
(
_İcode
 ) \

734 
_äomvty³
 
v®
; \

735 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

736 
vd¡
 = 
	`INST_A
(
š¡
); \

737 
v¤c1
 = 
	`INST_B
(
š¡
); \

738 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

739 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

740 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

741 
štMax
 = ~
štMš
; \

742 
»suÉ
 = (
_tovty³
è
v®
; \

743 ià(
v®
 >ğ
štMax
) \

744 
»suÉ
 = 
štMax
; \

745 ià(
v®
 <ğ
štMš
) \

746 
»suÉ
 = 
štMš
; \

747 ià(
v®
 != val) \

748 
»suÉ
 = 0; \

750 
»suÉ
 = (
_tovty³
è
v®
; \

751 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

753 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

754 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

757 
	`FINISH
(1);

	)

759 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

760 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
vd¡
 = 
	`INST_A
(
š¡
); \

762 
v¤c1
 = 
	`INST_B
(
š¡
); \

763 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

764 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

766 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

768 
	`FINISH
(1);

	)

771 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

772 
	`HANDLE_OPCODE
(
_İcode
 ) \

774 
»suÉ
; \

775 
u2
 
»gs
; \

776 
_v¬Ty³
 
v®1
, 
v®2
; \

777 
vd¡
 = 
	`INST_AA
(
š¡
); \

778 
»gs
 = 
	`FETCH
(1); \

779 
v¤c1
 = 
»gs
 & 0xff; \

780 
v¤c2
 = 
»gs
 >> 8; \

781 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

782 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

783 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

784 ià(
v®1
 =ğ
v®2
) \

785 
»suÉ
 = 0; \

786 ià(
v®1
 < 
v®2
) \

787 
»suÉ
 = -1; \

788 ià(
v®1
 > 
v®2
) \

789 
»suÉ
 = 1; \

791 
»suÉ
 = (
_ÇnV®
); \

792 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

793 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

795 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

798 
	`FINISH
(2);

	)

800 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

801 
	`HANDLE_OPCODE
(
_İcode
 ) \

802 
v¤c1
 = 
	`INST_A
(
š¡
); \

803 
v¤c2
 = 
	`INST_B
(
š¡
); \

804 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

805 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

806 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

807 
b¿nchOff£t
); \

808 
	`ILOGV
("> branchaken"); \

809 ià(
b¿nchOff£t
 < 0) \

810 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

811 
	`FINISH
(
b¿nchOff£t
); \

813 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

814 
	`FINISH
(2); \

815 }

	)

817 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

818 
	`HANDLE_OPCODE
(
_İcode
 ) \

819 
v¤c1
 = 
	`INST_AA
(
š¡
); \

820 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

821 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

822 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

823 
	`ILOGV
("> branchaken"); \

824 ià(
b¿nchOff£t
 < 0) \

825 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

826 
	`FINISH
(
b¿nchOff£t
); \

828 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

829 
	`FINISH
(2); \

830 }

	)

832 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

833 
	`HANDLE_OPCODE
(
_İcode
 ) \

834 
vd¡
 = 
	`INST_A
(
š¡
); \

835 
v¤c1
 = 
	`INST_B
(
š¡
); \

836 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

837 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

839 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

841 
	`FINISH
(1);

	)

843 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

844 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
u2
 
¤cRegs
; \

847 
vd¡
 = 
	`INST_AA
(
š¡
); \

848 
¤cRegs
 = 
	`FETCH
(1); \

849 
v¤c1
 = 
¤cRegs
 & 0xff; \

850 
v¤c2
 = 
¤cRegs
 >> 8; \

851 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

852 ià(
_chkdiv
 != 0) { \

853 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

854 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

855 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

856 ià(
£cÚdV®
 == 0) { \

857 
	`EXPORT_PC
(); \

858 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

860 
	`GOTO_exû±iÚThrown
(); \

862 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

863 ià(
_chkdiv
 == 1) \

864 
»suÉ
 = 
fœ¡V®
; \

866 
»suÉ
 = 0; \

868 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

870 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

873 
	`SET_REGISTER
(
vd¡
, \

874 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

877 
	`SET_REGISTER_TAINT
(
vd¡
, \

878 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

881 
	`FINISH
(2);

	)

883 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

884 
	`HANDLE_OPCODE
(
_İcode
 ) \

886 
u2
 
¤cRegs
; \

887 
vd¡
 = 
	`INST_AA
(
š¡
); \

888 
¤cRegs
 = 
	`FETCH
(1); \

889 
v¤c1
 = 
¤cRegs
 & 0xff; \

890 
v¤c2
 = 
¤cRegs
 >> 8; \

891 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

892 
	`SET_REGISTER
(
vd¡
, \

893 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

895 
	`SET_REGISTER_TAINT
(
vd¡
, \

896 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

899 
	`FINISH
(2);

	)

901 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

902 
	`HANDLE_OPCODE
(
_İcode
 ) \

903 
vd¡
 = 
	`INST_A
(
š¡
); \

904 
v¤c1
 = 
	`INST_B
(
š¡
); \

905 
v¤c2
 = 
	`FETCH
(1); \

906 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

907 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

908 ià(
_chkdiv
 != 0) { \

909 
s4
 
fœ¡V®
, 
»suÉ
; \

910 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

911 ià((
s2
è
v¤c2
 == 0) { \

912 
	`EXPORT_PC
(); \

913 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

915 
	`GOTO_exû±iÚThrown
(); \

917 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

919 ià(
_chkdiv
 == 1) \

920 
»suÉ
 = 
fœ¡V®
; \

922 
»suÉ
 = 0; \

924 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

926 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

929 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

932 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

934 
	`FINISH
(2);

	)

936 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

937 
	`HANDLE_OPCODE
(
_İcode
 ) \

939 
u2
 
l™Info
; \

940 
vd¡
 = 
	`INST_AA
(
š¡
); \

941 
l™Info
 = 
	`FETCH
(1); \

942 
v¤c1
 = 
l™Info
 & 0xff; \

943 
v¤c2
 = 
l™Info
 >> 8; \

944 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

945 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

946 ià(
_chkdiv
 != 0) { \

947 
s4
 
fœ¡V®
, 
»suÉ
; \

948 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

949 ià((
s1
è
v¤c2
 == 0) { \

950 
	`EXPORT_PC
(); \

951 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

953 
	`GOTO_exû±iÚThrown
(); \

955 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

956 ià(
_chkdiv
 == 1) \

957 
»suÉ
 = 
fœ¡V®
; \

959 
»suÉ
 = 0; \

961 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

963 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

965 
	`SET_REGISTER
(
vd¡
, \

966 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

969 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

972 
	`FINISH
(2);

	)

974 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

975 
	`HANDLE_OPCODE
(
_İcode
 ) \

977 
u2
 
l™Info
; \

978 
vd¡
 = 
	`INST_AA
(
š¡
); \

979 
l™Info
 = 
	`FETCH
(1); \

980 
v¤c1
 = 
l™Info
 & 0xff; \

981 
v¤c2
 = 
l™Info
 >> 8; \

982 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

983 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

984 
	`SET_REGISTER
(
vd¡
, \

985 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

987 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

990 
	`FINISH
(2);

	)

992 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

993 
	`HANDLE_OPCODE
(
_İcode
 ) \

994 
vd¡
 = 
	`INST_A
(
š¡
); \

995 
v¤c1
 = 
	`INST_B
(
š¡
); \

996 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

997 ià(
_chkdiv
 != 0) { \

998 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

999 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1000 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1001 ià(
£cÚdV®
 == 0) { \

1002 
	`EXPORT_PC
(); \

1003 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1005 
	`GOTO_exû±iÚThrown
(); \

1007 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1008 ià(
_chkdiv
 == 1) \

1009 
»suÉ
 = 
fœ¡V®
; \

1011 
»suÉ
 = 0; \

1013 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1015 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1017 
	`SET_REGISTER
(
vd¡
, \

1018 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1021 
	`SET_REGISTER_TAINT
(
vd¡
, \

1022 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1024 
	`FINISH
(1);

	)

1026 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1027 
	`HANDLE_OPCODE
(
_İcode
 ) \

1028 
vd¡
 = 
	`INST_A
(
š¡
); \

1029 
v¤c1
 = 
	`INST_B
(
š¡
); \

1030 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1031 
	`SET_REGISTER
(
vd¡
, \

1032 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1034 
	`SET_REGISTER_TAINT
(
vd¡
, \

1035 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1037 
	`FINISH
(1);

	)

1039 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1040 
	`HANDLE_OPCODE
(
_İcode
 ) \

1042 
u2
 
¤cRegs
; \

1043 
vd¡
 = 
	`INST_AA
(
š¡
); \

1044 
¤cRegs
 = 
	`FETCH
(1); \

1045 
v¤c1
 = 
¤cRegs
 & 0xff; \

1046 
v¤c2
 = 
¤cRegs
 >> 8; \

1047 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1048 ià(
_chkdiv
 != 0) { \

1049 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1050 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1051 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1052 ià(
£cÚdV®
 == 0LL) { \

1053 
	`EXPORT_PC
(); \

1054 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1056 
	`GOTO_exû±iÚThrown
(); \

1058 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1059 
£cÚdV®
 == -1LL) \

1061 ià(
_chkdiv
 == 1) \

1062 
»suÉ
 = 
fœ¡V®
; \

1064 
»suÉ
 = 0; \

1066 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1068 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1070 
	`SET_REGISTER_WIDE
(
vd¡
, \

1071 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1074 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1075 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1078 
	`FINISH
(2);

	)

1080 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1081 
	`HANDLE_OPCODE
(
_İcode
 ) \

1083 
u2
 
¤cRegs
; \

1084 
vd¡
 = 
	`INST_AA
(
š¡
); \

1085 
¤cRegs
 = 
	`FETCH
(1); \

1086 
v¤c1
 = 
¤cRegs
 & 0xff; \

1087 
v¤c2
 = 
¤cRegs
 >> 8; \

1088 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1089 
	`SET_REGISTER_WIDE
(
vd¡
, \

1090 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1092 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1093 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1096 
	`FINISH
(2);

	)

1098 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1099 
	`HANDLE_OPCODE
(
_İcode
 ) \

1100 
vd¡
 = 
	`INST_A
(
š¡
); \

1101 
v¤c1
 = 
	`INST_B
(
š¡
); \

1102 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1103 ià(
_chkdiv
 != 0) { \

1104 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1105 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1106 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1107 ià(
£cÚdV®
 == 0LL) { \

1108 
	`EXPORT_PC
(); \

1109 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1111 
	`GOTO_exû±iÚThrown
(); \

1113 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1114 
£cÚdV®
 == -1LL) \

1116 ià(
_chkdiv
 == 1) \

1117 
»suÉ
 = 
fœ¡V®
; \

1119 
»suÉ
 = 0; \

1121 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1123 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1125 
	`SET_REGISTER_WIDE
(
vd¡
, \

1126 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1129 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1130 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1132 
	`FINISH
(1);

	)

1134 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1135 
	`HANDLE_OPCODE
(
_İcode
 ) \

1136 
vd¡
 = 
	`INST_A
(
š¡
); \

1137 
v¤c1
 = 
	`INST_B
(
š¡
); \

1138 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1139 
	`SET_REGISTER_WIDE
(
vd¡
, \

1140 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1142 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1143 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1145 
	`FINISH
(1);

	)

1147 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1148 
	`HANDLE_OPCODE
(
_İcode
 ) \

1150 
u2
 
¤cRegs
; \

1151 
vd¡
 = 
	`INST_AA
(
š¡
); \

1152 
¤cRegs
 = 
	`FETCH
(1); \

1153 
v¤c1
 = 
¤cRegs
 & 0xff; \

1154 
v¤c2
 = 
¤cRegs
 >> 8; \

1155 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1156 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1157 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1159 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1160 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1163 
	`FINISH
(2);

	)

1165 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1166 
	`HANDLE_OPCODE
(
_İcode
 ) \

1168 
u2
 
¤cRegs
; \

1169 
vd¡
 = 
	`INST_AA
(
š¡
); \

1170 
¤cRegs
 = 
	`FETCH
(1); \

1171 
v¤c1
 = 
¤cRegs
 & 0xff; \

1172 
v¤c2
 = 
¤cRegs
 >> 8; \

1173 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1174 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1175 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1177 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1178 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1181 
	`FINISH
(2);

	)

1183 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1184 
	`HANDLE_OPCODE
(
_İcode
 ) \

1185 
vd¡
 = 
	`INST_A
(
š¡
); \

1186 
v¤c1
 = 
	`INST_B
(
š¡
); \

1187 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1188 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1189 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1191 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1192 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1194 
	`FINISH
(1);

	)

1196 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1197 
	`HANDLE_OPCODE
(
_İcode
 ) \

1198 
vd¡
 = 
	`INST_A
(
š¡
); \

1199 
v¤c1
 = 
	`INST_B
(
š¡
); \

1200 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1207 
	`FINISH
(1);

	)

1209 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1210 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
A¼ayObjeù
* 
¬¿yObj
; \

1213 
u2
 
¬¿yInfo
; \

1214 
	`EXPORT_PC
(); \

1215 
vd¡
 = 
	`INST_AA
(
š¡
); \

1216 
¬¿yInfo
 = 
	`FETCH
(1); \

1217 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1218 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1219 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1220 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1221 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1222 
	`GOTO_exû±iÚThrown
(); \

1223 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1224 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1225 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1226 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1227 
NULL
); \

1228 
	`GOTO_exû±iÚThrown
(); \

1230 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1231 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1233 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1234 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1236 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1238 
	`FINISH
(2);

	)

1240 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1241 
	`HANDLE_OPCODE
(
_İcode
 ) \

1243 
A¼ayObjeù
* 
¬¿yObj
; \

1244 
u2
 
¬¿yInfo
; \

1245 
	`EXPORT_PC
(); \

1246 
vd¡
 = 
	`INST_AA
(
š¡
); \

1247 
¬¿yInfo
 = 
	`FETCH
(1); \

1248 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1249 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1250 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1251 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1252 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1253 
	`GOTO_exû±iÚThrown
(); \

1254 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1255 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1256 
NULL
); \

1257 
	`GOTO_exû±iÚThrown
(); \

1259 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1260 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1261 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1263 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1264 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1265 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1268 
	`FINISH
(2);

	)

1287 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1288 
	`HANDLE_OPCODE
(
_İcode
 ) \

1290 
In¡F›ld
* 
if›ld
; \

1291 
Objeù
* 
obj
; \

1292 
	`EXPORT_PC
(); \

1293 
vd¡
 = 
	`INST_A
(
š¡
); \

1294 
v¤c1
 = 
	`INST_B
(
š¡
); \

1295 
»f
 = 
	`FETCH
(1); \

1296 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1297 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1298 ià(!
	`checkFÜNuÎ
(
obj
)) \

1299 
	`GOTO_exû±iÚThrown
(); \

1300 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1301 ià(
if›ld
 =ğ
NULL
) { \

1302 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1303 ià(
if›ld
 =ğ
NULL
) \

1304 
	`GOTO_exû±iÚThrown
(); \

1306 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1307 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1308 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1309 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1310 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1312 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1313 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1314 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1317 
	`FINISH
(2);

	)

1319 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1320 
	`HANDLE_OPCODE
(
_İcode
 ) \

1322 
Objeù
* 
obj
; \

1323 
vd¡
 = 
	`INST_A
(
š¡
); \

1324 
v¤c1
 = 
	`INST_B
(
š¡
); \

1325 
»f
 = 
	`FETCH
(1); \

1326 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1327 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1328 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1329 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1330 
	`GOTO_exû±iÚThrown
(); \

1331 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1332 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1333 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1338 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1339 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1342 
	`FINISH
(2);

	)

1344 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1345 
	`HANDLE_OPCODE
(
_İcode
 ) \

1347 
In¡F›ld
* 
if›ld
; \

1348 
Objeù
* 
obj
; \

1349 
	`EXPORT_PC
(); \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1354 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1355 ià(!
	`checkFÜNuÎ
(
obj
)) \

1356 
	`GOTO_exû±iÚThrown
(); \

1357 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1358 ià(
if›ld
 =ğ
NULL
) { \

1359 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1360 ià(
if›ld
 =ğ
NULL
) \

1361 
	`GOTO_exû±iÚThrown
(); \

1363 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1364 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1365 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1366 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1367 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1369 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1370 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1373 
	`FINISH
(2);

	)

1375 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1376 
	`HANDLE_OPCODE
(
_İcode
 ) \

1378 
Objeù
* 
obj
; \

1379 
vd¡
 = 
	`INST_A
(
š¡
); \

1380 
v¤c1
 = 
	`INST_B
(
š¡
); \

1381 
»f
 = 
	`FETCH
(1); \

1382 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1383 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1384 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1385 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1386 
	`GOTO_exû±iÚThrown
(); \

1387 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1388 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1389 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1393 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1394 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1397 
	`FINISH
(2);

	)

1399 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1400 
	`HANDLE_OPCODE
(
_İcode
 ) \

1402 
SticF›ld
* 
sf›ld
; \

1403 
vd¡
 = 
	`INST_AA
(
š¡
); \

1404 
»f
 = 
	`FETCH
(1); \

1405 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1406 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1407 ià(
sf›ld
 =ğ
NULL
) { \

1408 
	`EXPORT_PC
(); \

1409 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1410 ià(
sf›ld
 =ğ
NULL
) \

1411 
	`GOTO_exû±iÚThrown
(); \

1413 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1414 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1415 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1416 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1418 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1421 
	`FINISH
(2);

	)

1423 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1424 
	`HANDLE_OPCODE
(
_İcode
 ) \

1426 
SticF›ld
* 
sf›ld
; \

1427 
vd¡
 = 
	`INST_AA
(
š¡
); \

1428 
»f
 = 
	`FETCH
(1); \

1429 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1430 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1431 ià(
sf›ld
 =ğ
NULL
) { \

1432 
	`EXPORT_PC
(); \

1433 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) \

1435 
	`GOTO_exû±iÚThrown
(); \

1437 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1438 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1439 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1440 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1442 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1443 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1446 
	`FINISH
(2);

	)

1455 
boŞ
 
	$INTERP_FUNC_NAME
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
)

1457 #ià
	`defšed
(
EASY_GDB
)

1458 
SckSaveA»a
* 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

1460 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


1461 
boŞ
 
debugIsM‘hodEÁry
 = 
š‹½S‹
->debugIsMethodEntry;

1463 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

1464 
debugT¿ckedRefS¹
 = 
š‹½S‹
->debugTrackedRefStart;

1466 
DvmDex
* 
m‘hodCÏssDex
;

1467 
JV®ue
 
»tv®
;

1468 #ifdeà
WITH_TAINT_TRACKING


1469 
Tašt
 
¹ašt
;

1473 cÚ¡ 
M‘hod
* 
curM‘hod
;

1474 cÚ¡ 
u2
* 
pc
;

1475 
u4
* 
å
;

1476 
u2
 
š¡
;

1478 
u2
 
»f
;

1479 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
;

1481 cÚ¡ 
M‘hod
* 
m‘hodToC®l
;

1482 
boŞ
 
m‘hodC®lRªge
;

1485 #ià
	`defšed
(
THREADED_INTERP
)

1487 
	`DEFINE_GOTO_TABLE
(
hªdËrTabË
);

1490 #ià
	`defšed
(
WITH_JIT
)

1492 
	`LOGD
("*DebugInterp -ƒntrypoint is %d,gt is 0x%x, %s\n",

1493 
š‹½S‹
->
’ŒyPošt
,

1494 
š‹½S‹
->
pc
,

1495 
š‹½S‹
->
m‘hod
->
Çme
);

1498 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


1502 ià(
	`dvmJ™CheckT¿ûReque¡
(
£lf
,
š‹½S‹
)) {

1503 
š‹½S‹
->
ÃxtMode
 = 
INTERP_STD
;

1505  
Œue
;

1511 
curM‘hod
 = 
š‹½S‹
->
m‘hod
;

1512 
pc
 = 
š‹½S‹
->pc;

1513 
å
 = 
š‹½S‹
->fp;

1514 
»tv®
 = 
š‹½S‹
->retval;

1515 #ifdeà
WITH_TAINT_TRACKING


1516 
¹ašt
 = 
š‹½S‹
->rtaint;

1519 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

1521 
	`LOGVV
("threadid=%d:ƒntry(%s) %s.%s…c=0x%x fp=%pƒp=%d\n",

1522 
£lf
->
th»adId
, (
š‹½S‹
->
ÃxtMode
 =ğ
INTERP_STD
) ? "STD" : "DBG",

1523 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
pc
 - curM‘hod->
š¢s
,

1524 
å
, 
š‹½S‹
->
’ŒyPošt
);

1529 
m‘hodToC®l
 = (cÚ¡ 
M‘hod
*) -1;

1531 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


1532 ià(
debugIsM‘hodEÁry
) {

1533 
	`ILOGD
("|-- Now iÁ”´‘šg %s.%s", 
curM‘hod
->
şazz
->
desütÜ
,

1534 
curM‘hod
->
Çme
);

1535 
	`DUMP_REGS
(
curM‘hod
, 
š‹½S‹
->
å
, 
çl£
);

1539 
š‹½S‹
->
’ŒyPošt
) {

1540 
kIÁ”pEÁryIn¡r
:

1543 
kIÁ”pEÁryR‘uº
:

1544 
»tuºFromM‘hod
;

1545 
kIÁ”pEÁryThrow
:

1546 
exû±iÚThrown
;

1548 
	`dvmAbÜt
();

1551 #ifdeà
THREADED_INTERP


1552 
	`FINISH
(0);

1555 
	`CHECK_DEBUG_AND_PROF
();

1556 
	`CHECK_TRACKED_REFS
();

1559 
š¡
 = 
	`FETCH
(0);

1561 
	`INST_INST
(
š¡
)) {

1567 
	`HANDLE_OPCODE
(
OP_NOP
)

1568 
	`FINISH
(1);

1569 
OP_END


1572 
	`HANDLE_OPCODE
(
OP_MOVE
 )

1573 
vd¡
 = 
	`INST_A
(
š¡
);

1574 
v¤c1
 = 
	`INST_B
(
š¡
);

1575 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1576 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1577 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1578 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1580 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1582 
	`FINISH
(1);

1583 
OP_END


1586 
	`HANDLE_OPCODE
(
OP_MOVE_FROM16
 )

1587 
vd¡
 = 
	`INST_AA
(
š¡
);

1588 
v¤c1
 = 
	`FETCH
(1);

1589 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1590 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1591 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1592 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1594 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1596 
	`FINISH
(2);

1597 
OP_END


1600 
	`HANDLE_OPCODE
(
OP_MOVE_16
 )

1601 
vd¡
 = 
	`FETCH
(1);

1602 
v¤c1
 = 
	`FETCH
(2);

1603 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1604 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1605 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1606 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1608 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1610 
	`FINISH
(3);

1611 
OP_END


1614 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE
 )

1617 
vd¡
 = 
	`INST_A
(
š¡
);

1618 
v¤c1
 = 
	`INST_B
(
š¡
);

1619 
	`ILOGV
("|move-widv%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1620 
kS·cšg
+5, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1621 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1623 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1625 
	`FINISH
(1);

1626 
OP_END


1629 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE_FROM16
 )

1630 
vd¡
 = 
	`INST_AA
(
š¡
);

1631 
v¤c1
 = 
	`FETCH
(1);

1632 
	`ILOGV
("|move-wide/äom16 v%d,v%d (v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1633 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1634 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1636 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1638 
	`FINISH
(2);

1639 
OP_END


1642 
	`HANDLE_OPCODE
(
OP_MOVE_WIDE_16
 )

1643 
vd¡
 = 
	`FETCH
(1);

1644 
v¤c1
 = 
	`FETCH
(2);

1645 
	`ILOGV
("|move-wide/16 v%d,v%d %s(v%d=0x%08Îx)", 
vd¡
, 
v¤c1
,

1646 
kS·cšg
+8, 
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1647 
	`SET_REGISTER_WIDE
(
vd¡
, 
	`GET_REGISTER_WIDE
(
v¤c1
));

1649 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1651 
	`FINISH
(3);

1652 
OP_END


1656 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT
 )

1657 
vd¡
 = 
	`INST_A
(
š¡
);

1658 
v¤c1
 = 
	`INST_B
(
š¡
);

1659 
	`ILOGV
("|move%s v%d,v%d %s(v%d=0x%08x)",

1660 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1661 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1662 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1664 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1666 
	`FINISH
(1);

1667 
OP_END


1672 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT_FROM16
 )

1673 
vd¡
 = 
	`INST_AA
(
š¡
);

1674 
v¤c1
 = 
	`FETCH
(1);

1675 
	`ILOGV
("|move%s/from16 v%d,v%d %s(v%d=0x%08x)",

1676 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_FROM16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1677 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1678 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1680 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1682 
	`FINISH
(2);

1683 
OP_END


1688 
	`HANDLE_OPCODE
(
OP_MOVE_OBJECT_16
 )

1689 
vd¡
 = 
	`FETCH
(1);

1690 
v¤c1
 = 
	`FETCH
(2);

1691 
	`ILOGV
("|move%s/16 v%d,v%d %s(v%d=0x%08x)",

1692 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_16
è? "" : "-objeù", 
vd¡
, 
v¤c1
,

1693 
kS·cšg
, 
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1694 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
));

1696 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

1698 
	`FINISH
(3);

1699 
OP_END


1703 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT
 )

1704 
vd¡
 = 
	`INST_AA
(
š¡
);

1705 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1706 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1707 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1708 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1710 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

1712 
	`FINISH
(1);

1713 
OP_END


1716 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT_WIDE
 )

1717 
vd¡
 = 
	`INST_AA
(
š¡
);

1718 
	`ILOGV
("|move-»suÉ-widv%d %s(0x%08Îx)", 
vd¡
, 
kS·cšg
, 
»tv®
.
j
);

1719 
	`SET_REGISTER_WIDE
(
vd¡
, 
»tv®
.
j
);

1721 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
	`GET_RETURN_TAINT
());

1723 
	`FINISH
(1);

1724 
OP_END


1728 
	`HANDLE_OPCODE
(
OP_MOVE_RESULT_OBJECT
 )

1729 
vd¡
 = 
	`INST_AA
(
š¡
);

1730 
	`ILOGV
("|move-result%s v%d %s(v%d=0x%08x)",

1731 (
	`INST_INST
(
š¡
è=ğ
OP_MOVE_RESULT
) ? "" : "-object",

1732 
vd¡
, 
kS·cšg
+4, vd¡,
»tv®
.
i
);

1733 
	`SET_REGISTER
(
vd¡
, 
»tv®
.
i
);

1735 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_RETURN_TAINT
());

1737 
	`FINISH
(1);

1738 
OP_END


1742 
	`HANDLE_OPCODE
(
OP_MOVE_EXCEPTION
 )

1743 
vd¡
 = 
	`INST_AA
(
š¡
);

1744 
	`ILOGV
("|move-exû±iÚ v%d", 
vd¡
);

1745 
	`as£¹
(
£lf
->
exû±iÚ
 !ğ
NULL
);

1746 
	`SET_REGISTER
(
vd¡
, (
u4
)
£lf
->
exû±iÚ
);

1748 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1750 
	`dvmCË¬Exû±iÚ
(
£lf
);

1751 
	`FINISH
(1);

1752 
OP_END


1755 
	`HANDLE_OPCODE
(
OP_RETURN_VOID
 )

1756 
	`ILOGV
("|return-void");

1757 #iâdeà
NDEBUG


1758 
»tv®
.
j
 = 0xababababULL;

1761 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

1763 
	`GOTO_»tuºFromM‘hod
();

1764 
OP_END


1767 
	`HANDLE_OPCODE
(
OP_RETURN
 )

1768 
v¤c1
 = 
	`INST_AA
(
š¡
);

1769 
	`ILOGV
("|return%s v%d",

1770 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1771 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1773 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

1775 
	`GOTO_»tuºFromM‘hod
();

1776 
OP_END


1779 
	`HANDLE_OPCODE
(
OP_RETURN_WIDE
 )

1780 
v¤c1
 = 
	`INST_AA
(
š¡
);

1781 
	`ILOGV
("|»tuº-widv%d", 
v¤c1
);

1782 
»tv®
.
j
 = 
	`GET_REGISTER_WIDE
(
v¤c1
);

1784 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
));

1786 
	`GOTO_»tuºFromM‘hod
();

1787 
OP_END


1791 
	`HANDLE_OPCODE
(
OP_RETURN_OBJECT
 )

1792 
v¤c1
 = 
	`INST_AA
(
š¡
);

1793 
	`ILOGV
("|return%s v%d",

1794 (
	`INST_INST
(
š¡
è=ğ
OP_RETURN
è? "" : "-objeù", 
v¤c1
);

1795 
»tv®
.
i
 = 
	`GET_REGISTER
(
v¤c1
);

1797 
	`SET_RETURN_TAINT
(
	`GET_REGISTER_TAINT
(
v¤c1
));

1799 
	`GOTO_»tuºFromM‘hod
();

1800 
OP_END


1804 
	`HANDLE_OPCODE
(
OP_CONST_4
 )

1806 
s4
 
tmp
;

1808 
vd¡
 = 
	`INST_A
(
š¡
);

1809 
tmp
 = (
s4
è(
	`INST_B
(
š¡
) << 28) >> 28;

1810 
	`ILOGV
("|cÚ¡/4 v%d,#0x%02x", 
vd¡
, (
s4
)
tmp
);

1811 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1813 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1816 
	`FINISH
(1);

1817 
OP_END


1820 
	`HANDLE_OPCODE
(
OP_CONST_16
 )

1821 
vd¡
 = 
	`INST_AA
(
š¡
);

1822 
v¤c1
 = 
	`FETCH
(1);

1823 
	`ILOGV
("|cÚ¡/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1824 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c1
);

1826 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1828 
	`FINISH
(2);

1829 
OP_END


1832 
	`HANDLE_OPCODE
(
OP_CONST
 )

1834 
u4
 
tmp
;

1836 
vd¡
 = 
	`INST_AA
(
š¡
);

1837 
tmp
 = 
	`FETCH
(1);

1838 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1839 
	`ILOGV
("|cÚ¡ v%d,#0x%08x", 
vd¡
, 
tmp
);

1840 
	`SET_REGISTER
(
vd¡
, 
tmp
);

1842 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1845 
	`FINISH
(3);

1846 
OP_END


1849 
	`HANDLE_OPCODE
(
OP_CONST_HIGH16
 )

1850 
vd¡
 = 
	`INST_AA
(
š¡
);

1851 
v¤c1
 = 
	`FETCH
(1);

1852 
	`ILOGV
("|cÚ¡/high16 v%d,#0x%04x0000", 
vd¡
, 
v¤c1
);

1853 
	`SET_REGISTER
(
vd¡
, 
v¤c1
 << 16);

1855 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1857 
	`FINISH
(2);

1858 
OP_END


1861 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_16
 )

1862 
vd¡
 = 
	`INST_AA
(
š¡
);

1863 
v¤c1
 = 
	`FETCH
(1);

1864 
	`ILOGV
("|cÚ¡-wide/16 v%d,#0x%04x", 
vd¡
, (
s2
)
v¤c1
);

1865 
	`SET_REGISTER_WIDE
(
vd¡
, (
s2
)
v¤c1
);

1867 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1869 
	`FINISH
(2);

1870 
OP_END


1873 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_32
 )

1875 
u4
 
tmp
;

1877 
vd¡
 = 
	`INST_AA
(
š¡
);

1878 
tmp
 = 
	`FETCH
(1);

1879 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1880 
	`ILOGV
("|cÚ¡-wide/32 v%d,#0x%08x", 
vd¡
, 
tmp
);

1881 
	`SET_REGISTER_WIDE
(
vd¡
, (
s4
è
tmp
);

1883 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1886 
	`FINISH
(3);

1887 
OP_END


1890 
	`HANDLE_OPCODE
(
OP_CONST_WIDE
 )

1892 
u8
 
tmp
;

1894 
vd¡
 = 
	`INST_AA
(
š¡
);

1895 
tmp
 = 
	`FETCH
(1);

1896 
tmp
 |ğ(
u8
)
	`FETCH
(2) << 16;

1897 
tmp
 |ğ(
u8
)
	`FETCH
(3) << 32;

1898 
tmp
 |ğ(
u8
)
	`FETCH
(4) << 48;

1899 
	`ILOGV
("|cÚ¡-widv%d,#0x%08Îx", 
vd¡
, 
tmp
);

1900 
	`SET_REGISTER_WIDE
(
vd¡
, 
tmp
);

1902 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1905 
	`FINISH
(5);

1906 
OP_END


1909 
	`HANDLE_OPCODE
(
OP_CONST_WIDE_HIGH16
 )

1910 
vd¡
 = 
	`INST_AA
(
š¡
);

1911 
v¤c1
 = 
	`FETCH
(1);

1912 
	`ILOGV
("|cÚ¡-wide/high16 v%d,#0x%04x000000000000", 
vd¡
, 
v¤c1
);

1913 
	`SET_REGISTER_WIDE
(
vd¡
, ((
u8
è
v¤c1
) << 48);

1915 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, 
TAINT_CLEAR
);

1917 
	`FINISH
(2);

1918 
OP_END


1921 
	`HANDLE_OPCODE
(
OP_CONST_STRING
 )

1923 
SŒšgObjeù
* 
¡rObj
;

1925 
vd¡
 = 
	`INST_AA
(
š¡
);

1926 
»f
 = 
	`FETCH
(1);

1927 
	`ILOGV
("|cÚ¡-¡ršg v%d sŒšg@0x%04x", 
vd¡
, 
»f
);

1928 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
»f
);

1929 ià(
¡rObj
 =ğ
NULL
) {

1930 
	`EXPORT_PC
();

1931 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
»f
);

1932 ià(
¡rObj
 =ğ
NULL
)

1933 
	`GOTO_exû±iÚThrown
();

1935 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1937 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1940 
	`FINISH
(2);

1941 
OP_END


1944 
	`HANDLE_OPCODE
(
OP_CONST_STRING_JUMBO
 )

1946 
SŒšgObjeù
* 
¡rObj
;

1947 
u4
 
tmp
;

1949 
vd¡
 = 
	`INST_AA
(
š¡
);

1950 
tmp
 = 
	`FETCH
(1);

1951 
tmp
 |ğ(
u4
)
	`FETCH
(2) << 16;

1952 
	`ILOGV
("|cÚ¡-¡ršg/jumbØv%d sŒšg@0x%08x", 
vd¡
, 
tmp
);

1953 
¡rObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
m‘hodCÏssDex
, 
tmp
);

1954 ià(
¡rObj
 =ğ
NULL
) {

1955 
	`EXPORT_PC
();

1956 
¡rObj
 = 
	`dvmResŞveSŒšg
(
curM‘hod
->
şazz
, 
tmp
);

1957 ià(
¡rObj
 =ğ
NULL
)

1958 
	`GOTO_exû±iÚThrown
();

1960 
	`SET_REGISTER
(
vd¡
, (
u4
è
¡rObj
);

1962 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1965 
	`FINISH
(3);

1966 
OP_END


1969 
	`HANDLE_OPCODE
(
OP_CONST_CLASS
 )

1971 
CÏssObjeù
* 
şazz
;

1973 
vd¡
 = 
	`INST_AA
(
š¡
);

1974 
»f
 = 
	`FETCH
(1);

1975 
	`ILOGV
("|cÚ¡-şas v%d cÏss@0x%04x", 
vd¡
, 
»f
);

1976 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1977 ià(
şazz
 =ğ
NULL
) {

1978 
	`EXPORT_PC
();

1979 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

1980 ià(
şazz
 =ğ
NULL
)

1981 
	`GOTO_exû±iÚThrown
();

1983 
	`SET_REGISTER
(
vd¡
, (
u4
è
şazz
);

1985 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

1988 
	`FINISH
(2);

1989 
OP_END


1992 
	`HANDLE_OPCODE
(
OP_MONITOR_ENTER
 )

1994 
Objeù
* 
obj
;

1996 
v¤c1
 = 
	`INST_AA
(
š¡
);

1997 
	`ILOGV
("|monitor-enter v%d %s(0x%08x)",

1998 
v¤c1
, 
kS·cšg
+6, 
	`GET_REGISTER
(vsrc1));

1999 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2000 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2001 
	`GOTO_exû±iÚThrown
();

2002 
	`ILOGV
("+†ockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

2003 
	`EXPORT_PC
();

2004 
	`dvmLockObjeù
(
£lf
, 
obj
);

2005 #ifdeà
WITH_DEADLOCK_PREDICTION


2006 ià(
	`dvmCheckExû±iÚ
(
£lf
))

2007 
	`GOTO_exû±iÚThrown
();

2010 
	`FINISH
(1);

2011 
OP_END


2014 
	`HANDLE_OPCODE
(
OP_MONITOR_EXIT
 )

2016 
Objeù
* 
obj
;

2018 
	`EXPORT_PC
();

2020 
v¤c1
 = 
	`INST_AA
(
š¡
);

2021 
	`ILOGV
("|monitor-exit v%d %s(0x%08x)",

2022 
v¤c1
, 
kS·cšg
+5, 
	`GET_REGISTER
(vsrc1));

2023 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2024 ià(!
	`checkFÜNuÎ
(
obj
)) {

2032 
	`ADJUST_PC
(1);

2033 
	`GOTO_exû±iÚThrown
();

2035 
	`ILOGV
("+ uÆockšg %°%s\n", 
obj
, obj->
şazz
->
desütÜ
);

2036 ià(!
	`dvmUÆockObjeù
(
£lf
, 
obj
)) {

2037 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

2038 
	`ADJUST_PC
(1);

2039 
	`GOTO_exû±iÚThrown
();

2042 
	`FINISH
(1);

2043 
OP_END


2046 
	`HANDLE_OPCODE
(
OP_CHECK_CAST
 )

2048 
CÏssObjeù
* 
şazz
;

2049 
Objeù
* 
obj
;

2051 
	`EXPORT_PC
();

2053 
v¤c1
 = 
	`INST_AA
(
š¡
);

2054 
»f
 = 
	`FETCH
(1);

2055 
	`ILOGV
("|check-ÿ¡ v%d,şass@0x%04x", 
v¤c1
, 
»f
);

2057 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2058 ià(
obj
 !ğ
NULL
) {

2059 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

2060 ià(!
	`checkFÜNuÎ
(
obj
))

2061 
	`GOTO_exû±iÚThrown
();

2063 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2064 ià(
şazz
 =ğ
NULL
) {

2065 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

2066 ià(
şazz
 =ğ
NULL
)

2067 
	`GOTO_exû±iÚThrown
();

2069 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

2070 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

2071 "Ljava/Ïng/CÏssCa¡Exû±iÚ;", 
obj
->
şazz
->
desütÜ
);

2072 
	`GOTO_exû±iÚThrown
();

2076 
	`FINISH
(2);

2077 
OP_END


2080 
	`HANDLE_OPCODE
(
OP_INSTANCE_OF
 )

2082 
CÏssObjeù
* 
şazz
;

2083 
Objeù
* 
obj
;

2085 
vd¡
 = 
	`INST_A
(
š¡
);

2086 
v¤c1
 = 
	`INST_B
(
š¡
);

2087 
»f
 = 
	`FETCH
(1);

2088 
	`ILOGV
("|š¡ªû-oàv%d,v%d,şass@0x%04x", 
vd¡
, 
v¤c1
, 
»f
);

2090 
obj
 = (
Objeù
*)
	`GET_REGISTER
(
v¤c1
);

2091 ià(
obj
 =ğ
NULL
) {

2092 
	`SET_REGISTER
(
vd¡
, 0);

2094 #ià
	`defšed
(
WITH_EXTRA_OBJECT_VALIDATION
)

2095 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
))

2096 
	`GOTO_exû±iÚThrown
();

2098 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2099 ià(
şazz
 =ğ
NULL
) {

2100 
	`EXPORT_PC
();

2101 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
Œue
);

2102 ià(
şazz
 =ğ
NULL
)

2103 
	`GOTO_exû±iÚThrown
();

2105 
	`SET_REGISTER
(
vd¡
, 
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz));

2107 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2111 
	`FINISH
(2);

2112 
OP_END


2115 
	`HANDLE_OPCODE
(
OP_ARRAY_LENGTH
 )

2117 
A¼ayObjeù
* 
¬¿yObj
;

2119 
vd¡
 = 
	`INST_A
(
š¡
);

2120 
v¤c1
 = 
	`INST_B
(
š¡
);

2121 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2122 
	`ILOGV
("|¬¿y-Ëngth v%d,v%d (%p)", 
vd¡
, 
v¤c1
, 
¬¿yObj
);

2123 ià(!
	`checkFÜNuÎExpÜtPC
((
Objeù
*è
¬¿yObj
, 
å
, 
pc
))

2124 
	`GOTO_exû±iÚThrown
();

2126 
	`SET_REGISTER
(
vd¡
, 
¬¿yObj
->
Ëngth
);

2128 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2131 
	`FINISH
(1);

2132 
OP_END


2135 
	`HANDLE_OPCODE
(
OP_NEW_INSTANCE
 )

2137 
CÏssObjeù
* 
şazz
;

2138 
Objeù
* 
ÃwObj
;

2140 
	`EXPORT_PC
();

2142 
vd¡
 = 
	`INST_AA
(
š¡
);

2143 
»f
 = 
	`FETCH
(1);

2144 
	`ILOGV
("|Ãw-š¡ªû v%d,şass@0x%04x", 
vd¡
, 
»f
);

2145 
şazz
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2146 ià(
şazz
 =ğ
NULL
) {

2147 
şazz
 = 
	`dvmResŞveCÏss
(
curM‘hod
->şazz, 
»f
, 
çl£
);

2148 ià(
şazz
 =ğ
NULL
)

2149 
	`GOTO_exû±iÚThrown
();

2152 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
è&& !
	`dvmIn™CÏss
(clazz))

2153 
	`GOTO_exû±iÚThrown
();

2163 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

2164 ià(
ÃwObj
 =ğ
NULL
)

2165 
	`GOTO_exû±iÚThrown
();

2166 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwObj
);

2168 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2171 
	`FINISH
(2);

2172 
OP_END


2175 
	`HANDLE_OPCODE
(
OP_NEW_ARRAY
 )

2177 
CÏssObjeù
* 
¬¿yCÏss
;

2178 
A¼ayObjeù
* 
ÃwA¼ay
;

2179 
s4
 
Ëngth
;

2181 
	`EXPORT_PC
();

2183 
vd¡
 = 
	`INST_A
(
š¡
);

2184 
v¤c1
 = 
	`INST_B
(
š¡
);

2185 
»f
 = 
	`FETCH
(1);

2186 
	`ILOGV
("|new-array v%d,v%d,class@0x%04x (%dƒlements)",

2187 
vd¡
, 
v¤c1
, 
»f
, (
s4
è
	`GET_REGISTER
(vsrc1));

2188 
Ëngth
 = (
s4
è
	`GET_REGISTER
(
v¤c1
);

2189 ià(
Ëngth
 < 0) {

2190 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Neg©iveA¼aySizeExû±iÚ;", 
NULL
);

2191 
	`GOTO_exû±iÚThrown
();

2193 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

2194 ià(
¬¿yCÏss
 =ğ
NULL
) {

2195 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

2196 ià(
¬¿yCÏss
 =ğ
NULL
)

2197 
	`GOTO_exû±iÚThrown
();

2200 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

2201 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

2203 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
Ëngth
, 
ALLOC_DONT_TRACK
);

2204 ià(
ÃwA¼ay
 =ğ
NULL
)

2205 
	`GOTO_exû±iÚThrown
();

2206 
	`SET_REGISTER
(
vd¡
, (
u4
è
ÃwA¼ay
);

2208 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
);

2211 
	`FINISH
(2);

2212 
OP_END


2216 
	`HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY
 )

2217 
	`GOTO_švoke
(
fËdNewA¼ay
, 
çl£
);

2218 
OP_END


2221 
	`HANDLE_OPCODE
(
OP_FILLED_NEW_ARRAY_RANGE
 )

2222 
	`GOTO_švoke
(
fËdNewA¼ay
, 
Œue
);

2223 
OP_END


2226 
	`HANDLE_OPCODE
(
OP_FILL_ARRAY_DATA
)

2228 cÚ¡ 
u2
* 
¬¿yD©a
;

2229 
s4
 
off£t
;

2230 
A¼ayObjeù
* 
¬¿yObj
;

2232 
	`EXPORT_PC
();

2233 
v¤c1
 = 
	`INST_AA
(
š¡
);

2234 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2235 
	`ILOGV
("|fl-¬¿y-d©¨v%d +0x%04x", 
v¤c1
, 
off£t
);

2236 
¬¿yD©a
 = 
pc
 + 
off£t
;

2237 #iâdeà
NDEBUG


2238 ià(
¬¿yD©a
 < 
curM‘hod
->
š¢s
 ||

2239 
¬¿yD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2242 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

2244 
	`GOTO_exû±iÚThrown
();

2247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2248 ià(!
	`dvmIÁ”pHªdËFlA¼ayD©a
(
¬¿yObj
, 
¬¿yD©a
)) {

2249 
	`GOTO_exû±iÚThrown
();

2251 
	`FINISH
(3);

2253 
OP_END


2256 
	`HANDLE_OPCODE
(
OP_THROW
 )

2258 
Objeù
* 
obj
;

2260 
v¤c1
 = 
	`INST_AA
(
š¡
);

2261 
	`ILOGV
("|throw v%d (%p)", 
v¤c1
, (*)
	`GET_REGISTER
(vsrc1));

2262 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
);

2263 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) {

2265 
	`LOGVV
("Badƒxception\n");

2268 
	`dvmS‘Exû±iÚ
(
£lf
, 
obj
);

2270 
	`GOTO_exû±iÚThrown
();

2272 
OP_END


2275 
	`HANDLE_OPCODE
(
OP_GOTO
 )

2276 
vd¡
 = 
	`INST_AA
(
š¡
);

2277 ià((
s1
)
vd¡
 < 0)

2278 
	`ILOGV
("|gÙØ-0x%02x", -((
s1
)
vd¡
));

2280 
	`ILOGV
("|gÙØ+0x%02x", ((
s1
)
vd¡
));

2281 
	`ILOGV
("> branchaken");

2282 ià((
s1
)
vd¡
 < 0)

2283 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, (
s1
)
vd¡
);

2284 
	`FINISH
((
s1
)
vd¡
);

2285 
OP_END


2288 
	`HANDLE_OPCODE
(
OP_GOTO_16
 )

2290 
s4
 
off£t
 = (
s2
è
	`FETCH
(1);

2292 ià(
off£t
 < 0)

2293 
	`ILOGV
("|gÙo/16 -0x%04x", -
off£t
);

2295 
	`ILOGV
("|gÙo/16 +0x%04x", 
off£t
);

2296 
	`ILOGV
("> branchaken");

2297 ià(
off£t
 < 0)

2298 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2299 
	`FINISH
(
off£t
);

2301 
OP_END


2304 
	`HANDLE_OPCODE
(
OP_GOTO_32
 )

2306 
s4
 
off£t
 = 
	`FETCH
(1);

2307 
off£t
 |ğ((
s4
è
	`FETCH
(2)) << 16;

2309 ià(
off£t
 < 0)

2310 
	`ILOGV
("|gÙo/32 -0x%08x", -
off£t
);

2312 
	`ILOGV
("|gÙo/32 +0x%08x", 
off£t
);

2313 
	`ILOGV
("> branchaken");

2314 ià(
off£t
 <= 0)

2315 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2316 
	`FINISH
(
off£t
);

2318 
OP_END


2321 
	`HANDLE_OPCODE
(
OP_PACKED_SWITCH
 )

2323 cÚ¡ 
u2
* 
sw™chD©a
;

2324 
u4
 
‹¡V®
;

2325 
s4
 
off£t
;

2327 
v¤c1
 = 
	`INST_AA
(
š¡
);

2328 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2329 
	`ILOGV
("|·cked-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

2330 
sw™chD©a
 = 
pc
 + 
off£t
;

2331 #iâdeà
NDEBUG


2332 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

2333 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2336 
	`EXPORT_PC
();

2337 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad…acked switch");

2338 
	`GOTO_exû±iÚThrown
();

2341 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

2343 
off£t
 = 
	`dvmIÁ”pHªdËPackedSw™ch
(
sw™chD©a
, 
‹¡V®
);

2344 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

2345 ià(
off£t
 <= 0)

2346 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2347 
	`FINISH
(
off£t
);

2349 
OP_END


2352 
	`HANDLE_OPCODE
(
OP_SPARSE_SWITCH
 )

2354 cÚ¡ 
u2
* 
sw™chD©a
;

2355 
u4
 
‹¡V®
;

2356 
s4
 
off£t
;

2358 
v¤c1
 = 
	`INST_AA
(
š¡
);

2359 
off£t
 = 
	`FETCH
(1è| (((
s4
) FETCH(2)) << 16);

2360 
	`ILOGV
("|¥¬£-sw™ch v%d +0x%04x", 
v¤c1
, 
v¤c2
);

2361 
sw™chD©a
 = 
pc
 + 
off£t
;

2362 #iâdeà
NDEBUG


2363 ià(
sw™chD©a
 < 
curM‘hod
->
š¢s
 ||

2364 
sw™chD©a
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod))

2367 
	`EXPORT_PC
();

2368 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "bad sparse switch");

2369 
	`GOTO_exû±iÚThrown
();

2372 
‹¡V®
 = 
	`GET_REGISTER
(
v¤c1
);

2374 
off£t
 = 
	`dvmIÁ”pHªdËS·r£Sw™ch
(
sw™chD©a
, 
‹¡V®
);

2375 
	`ILOGV
("> b¿nchak’ (0x%04x)\n", 
off£t
);

2376 ià(
off£t
 <= 0)

2377 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
off£t
);

2378 
	`FINISH
(
off£t
);

2380 
OP_END


2383 
	`HANDLE_OP_CMPX
(
OP_CMPL_FLOAT
, "l-æßt", , 
_FLOAT
, -1)

2384 
OP_END


2387 
	`HANDLE_OP_CMPX
(
OP_CMPG_FLOAT
, "g-æßt", , 
_FLOAT
, 1)

2388 
OP_END


2391 
	`HANDLE_OP_CMPX
(
OP_CMPL_DOUBLE
, "l-doubË", , 
_DOUBLE
, -1)

2392 
OP_END


2395 
	`HANDLE_OP_CMPX
(
OP_CMPG_DOUBLE
, "g-doubË", , 
_DOUBLE
, 1)

2396 
OP_END


2399 
	`HANDLE_OP_CMPX
(
OP_CMP_LONG
, "-lÚg", 
s8
, 
_WIDE
, 0)

2400 
OP_END


2403 
	`HANDLE_OP_IF_XX
(
OP_IF_EQ
, "eq", ==)

2404 
OP_END


2407 
	`HANDLE_OP_IF_XX
(
OP_IF_NE
, "ne", !=)

2408 
OP_END


2411 
	`HANDLE_OP_IF_XX
(
OP_IF_LT
, "lt", <)

2412 
OP_END


2415 
	`HANDLE_OP_IF_XX
(
OP_IF_GE
, "ge", >=)

2416 
OP_END


2419 
	`HANDLE_OP_IF_XX
(
OP_IF_GT
, "gt", >)

2420 
OP_END


2423 
	`HANDLE_OP_IF_XX
(
OP_IF_LE
, "le", <=)

2424 
OP_END


2427 
	`HANDLE_OP_IF_XXZ
(
OP_IF_EQZ
, "eqz", ==)

2428 
OP_END


2431 
	`HANDLE_OP_IF_XXZ
(
OP_IF_NEZ
, "nez", !=)

2432 
OP_END


2435 
	`HANDLE_OP_IF_XXZ
(
OP_IF_LTZ
, "ltz", <)

2436 
OP_END


2439 
	`HANDLE_OP_IF_XXZ
(
OP_IF_GEZ
, "gez", >=)

2440 
OP_END


2443 
	`HANDLE_OP_IF_XXZ
(
OP_IF_GTZ
, "gtz", >)

2444 
OP_END


2447 
	`HANDLE_OP_IF_XXZ
(
OP_IF_LEZ
, "lez", <=)

2448 
OP_END


2451 
	`HANDLE_OPCODE
(
OP_UNUSED_3E
)

2452 
OP_END


2455 
	`HANDLE_OPCODE
(
OP_UNUSED_3F
)

2456 
OP_END


2459 
	`HANDLE_OPCODE
(
OP_UNUSED_40
)

2460 
OP_END


2463 
	`HANDLE_OPCODE
(
OP_UNUSED_41
)

2464 
OP_END


2467 
	`HANDLE_OPCODE
(
OP_UNUSED_42
)

2468 
OP_END


2471 
	`HANDLE_OPCODE
(
OP_UNUSED_43
)

2472 
OP_END


2475 
	`HANDLE_OP_AGET
(
OP_AGET
, "", 
u4
, )

2476 
OP_END


2479 
	`HANDLE_OP_AGET
(
OP_AGET_WIDE
, "-wide", 
s8
, 
_WIDE
)

2480 
OP_END


2483 
	`HANDLE_OP_AGET
(
OP_AGET_OBJECT
, "-objeù", 
u4
, )

2484 
OP_END


2487 
	`HANDLE_OP_AGET
(
OP_AGET_BOOLEAN
, "-boŞ—n", 
u1
, )

2488 
OP_END


2491 
	`HANDLE_OP_AGET
(
OP_AGET_BYTE
, "-by‹", 
s1
, )

2492 
OP_END


2495 
	`HANDLE_OP_AGET
(
OP_AGET_CHAR
, "-ch¬", 
u2
, )

2496 
OP_END


2499 
	`HANDLE_OP_AGET
(
OP_AGET_SHORT
, "-shÜt", 
s2
, )

2500 
OP_END


2503 
	`HANDLE_OP_APUT
(
OP_APUT
, "", 
u4
, )

2504 
OP_END


2507 
	`HANDLE_OP_APUT
(
OP_APUT_WIDE
, "-wide", 
s8
, 
_WIDE
)

2508 
OP_END


2511 
	`HANDLE_OPCODE
(
OP_APUT_OBJECT
 )

2513 
A¼ayObjeù
* 
¬¿yObj
;

2514 
Objeù
* 
obj
;

2515 
u2
 
¬¿yInfo
;

2516 
	`EXPORT_PC
();

2517 
vd¡
 = 
	`INST_AA
(
š¡
);

2518 
¬¿yInfo
 = 
	`FETCH
(1);

2519 
v¤c1
 = 
¬¿yInfo
 & 0xff;

2520 
v¤c2
 = 
¬¿yInfo
 >> 8;

2521 
	`ILOGV
("|­ut% v%d,v%d,v%d", "-objeù", 
vd¡
, 
v¤c1
, 
v¤c2
);

2522 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
);

2523 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
))

2524 
	`GOTO_exû±iÚThrown
();

2525 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) {

2526 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;",

2527 
NULL
);

2528 
	`GOTO_exû±iÚThrown
();

2530 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

2531 ià(
obj
 !ğ
NULL
) {

2532 ià(!
	`checkFÜNuÎ
(
obj
))

2533 
	`GOTO_exû±iÚThrown
();

2534 ià(!
	`dvmCªPutA¼ayEËm’t
(
obj
->
şazz
, 
¬¿yObj
->obj.clazz)) {

2535 
	`LOGV
("Can't…ut‡ '%s'(%p) into‡rrayype='%s'(%p)\n",

2536 
obj
->
şazz
->
desütÜ
, obj,

2537 
¬¿yObj
->
obj
.
şazz
->
desütÜ
,‡rrayObj);

2540 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

2541 
	`GOTO_exû±iÚThrown
();

2544 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));

2545 ((
u4
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] =

2546 
	`GET_REGISTER
(
vd¡
);

2548 
	`SET_ARRAY_TAINT
(
¬¿yObj
,

2549 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) |

2550 
	`GET_REGISTER_TAINT
(
vd¡
)) );

2553 
	`FINISH
(2);

2554 
OP_END


2557 
	`HANDLE_OP_APUT
(
OP_APUT_BOOLEAN
, "-boŞ—n", 
u1
, )

2558 
OP_END


2561 
	`HANDLE_OP_APUT
(
OP_APUT_BYTE
, "-by‹", 
s1
, )

2562 
OP_END


2565 
	`HANDLE_OP_APUT
(
OP_APUT_CHAR
, "-ch¬", 
u2
, )

2566 
OP_END


2569 
	`HANDLE_OP_APUT
(
OP_APUT_SHORT
, "-shÜt", 
s2
, )

2570 
OP_END


2573 
	`HANDLE_IGET_X
(
OP_IGET
, "", 
IÁ
, )

2574 
OP_END


2577 
	`HANDLE_IGET_X
(
OP_IGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2578 
OP_END


2581 
	`HANDLE_IGET_X
(
OP_IGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2582 
OP_END


2585 
	`HANDLE_IGET_X
(
OP_IGET_BOOLEAN
, "", 
IÁ
, )

2586 
OP_END


2589 
	`HANDLE_IGET_X
(
OP_IGET_BYTE
, "", 
IÁ
, )

2590 
OP_END


2593 
	`HANDLE_IGET_X
(
OP_IGET_CHAR
, "", 
IÁ
, )

2594 
OP_END


2597 
	`HANDLE_IGET_X
(
OP_IGET_SHORT
, "", 
IÁ
, )

2598 
OP_END


2601 
	`HANDLE_IPUT_X
(
OP_IPUT
, "", 
IÁ
, )

2602 
OP_END


2605 
	`HANDLE_IPUT_X
(
OP_IPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2606 
OP_END


2620 
	`HANDLE_IPUT_X
(
OP_IPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2621 
OP_END


2624 
	`HANDLE_IPUT_X
(
OP_IPUT_BOOLEAN
, "", 
IÁ
, )

2625 
OP_END


2628 
	`HANDLE_IPUT_X
(
OP_IPUT_BYTE
, "", 
IÁ
, )

2629 
OP_END


2632 
	`HANDLE_IPUT_X
(
OP_IPUT_CHAR
, "", 
IÁ
, )

2633 
OP_END


2636 
	`HANDLE_IPUT_X
(
OP_IPUT_SHORT
, "", 
IÁ
, )

2637 
OP_END


2640 
	`HANDLE_SGET_X
(
OP_SGET
, "", 
IÁ
, )

2641 
OP_END


2644 
	`HANDLE_SGET_X
(
OP_SGET_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2645 
OP_END


2648 
	`HANDLE_SGET_X
(
OP_SGET_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2649 
OP_END


2652 
	`HANDLE_SGET_X
(
OP_SGET_BOOLEAN
, "", 
IÁ
, )

2653 
OP_END


2656 
	`HANDLE_SGET_X
(
OP_SGET_BYTE
, "", 
IÁ
, )

2657 
OP_END


2660 
	`HANDLE_SGET_X
(
OP_SGET_CHAR
, "", 
IÁ
, )

2661 
OP_END


2664 
	`HANDLE_SGET_X
(
OP_SGET_SHORT
, "", 
IÁ
, )

2665 
OP_END


2668 
	`HANDLE_SPUT_X
(
OP_SPUT
, "", 
IÁ
, )

2669 
OP_END


2672 
	`HANDLE_SPUT_X
(
OP_SPUT_WIDE
, "-wide", 
LÚg
, 
_WIDE
)

2673 
OP_END


2676 
	`HANDLE_SPUT_X
(
OP_SPUT_OBJECT
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

2677 
OP_END


2680 
	`HANDLE_SPUT_X
(
OP_SPUT_BOOLEAN
, "", 
IÁ
, )

2681 
OP_END


2684 
	`HANDLE_SPUT_X
(
OP_SPUT_BYTE
, "", 
IÁ
, )

2685 
OP_END


2688 
	`HANDLE_SPUT_X
(
OP_SPUT_CHAR
, "", 
IÁ
, )

2689 
OP_END


2692 
	`HANDLE_SPUT_X
(
OP_SPUT_SHORT
, "", 
IÁ
, )

2693 
OP_END


2696 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL
 )

2697 
	`GOTO_švoke
(
švokeVœtu®
, 
çl£
);

2698 
OP_END


2701 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER
 )

2702 
	`GOTO_švoke
(
švokeSu³r
, 
çl£
);

2703 
OP_END


2706 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT
 )

2707 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

2708 
OP_END


2711 
	`HANDLE_OPCODE
(
OP_INVOKE_STATIC
 )

2712 
	`GOTO_švoke
(
švokeStic
, 
çl£
);

2713 
OP_END


2716 
	`HANDLE_OPCODE
(
OP_INVOKE_INTERFACE
 )

2717 
	`GOTO_švoke
(
švokeIÁ”çû
, 
çl£
);

2718 
OP_END


2721 
	`HANDLE_OPCODE
(
OP_UNUSED_73
)

2722 
OP_END


2725 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_RANGE
 )

2726 
	`GOTO_švoke
(
švokeVœtu®
, 
Œue
);

2727 
OP_END


2730 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_RANGE
 )

2731 
	`GOTO_švoke
(
švokeSu³r
, 
Œue
);

2732 
OP_END


2735 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT_RANGE
 )

2736 
	`GOTO_švoke
(
švokeDœeù
, 
Œue
);

2737 
OP_END


2740 
	`HANDLE_OPCODE
(
OP_INVOKE_STATIC_RANGE
 )

2741 
	`GOTO_švoke
(
švokeStic
, 
Œue
);

2742 
OP_END


2745 
	`HANDLE_OPCODE
(
OP_INVOKE_INTERFACE_RANGE
 )

2746 
	`GOTO_švoke
(
švokeIÁ”çû
, 
Œue
);

2747 
OP_END


2750 
	`HANDLE_OPCODE
(
OP_UNUSED_79
)

2751 
OP_END


2754 
	`HANDLE_OPCODE
(
OP_UNUSED_7A
)

2755 
OP_END


2758 
	`HANDLE_UNOP
(
OP_NEG_INT
, "neg-int", -, , )

2759 
OP_END


2762 
	`HANDLE_UNOP
(
OP_NOT_INT
, "not-int", , ^ 0xffffffff, )

2763 
OP_END


2766 
	`HANDLE_UNOP
(
OP_NEG_LONG
, "Ãg-lÚg", -, , 
_WIDE
)

2767 
OP_END


2770 
	`HANDLE_UNOP
(
OP_NOT_LONG
, "nÙ-lÚg", , ^ 0xffffffffffffffffULL, 
_WIDE
)

2771 
OP_END


2774 
	`HANDLE_UNOP
(
OP_NEG_FLOAT
, "Ãg-æßt", -, , 
_FLOAT
)

2775 
OP_END


2778 
	`HANDLE_UNOP
(
OP_NEG_DOUBLE
, "Ãg-doubË", -, , 
_DOUBLE
)

2779 
OP_END


2782 
	`HANDLE_NUMCONV
(
OP_INT_TO_LONG
, "št-to-lÚg", 
_INT
, 
_WIDE
)

2783 
OP_END


2786 
	`HANDLE_NUMCONV
(
OP_INT_TO_FLOAT
, "št-to-æßt", 
_INT
, 
_FLOAT
)

2787 
OP_END


2790 
	`HANDLE_NUMCONV
(
OP_INT_TO_DOUBLE
, "št-to-doubË", 
_INT
, 
_DOUBLE
)

2791 
OP_END


2794 
	`HANDLE_NUMCONV
(
OP_LONG_TO_INT
, "lÚg-to-št", 
_WIDE
, 
_INT
)

2795 
OP_END


2798 
	`HANDLE_NUMCONV
(
OP_LONG_TO_FLOAT
, "lÚg-to-æßt", 
_WIDE
, 
_FLOAT
)

2799 
OP_END


2802 
	`HANDLE_NUMCONV
(
OP_LONG_TO_DOUBLE
, "lÚg-to-doubË", 
_WIDE
, 
_DOUBLE
)

2803 
OP_END


2806 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_INT
, "float-to-int",

2807 , 
_FLOAT
, 
s4
, 
_INT
)

2808 
OP_END


2811 
	`HANDLE_FLOAT_TO_INT
(
OP_FLOAT_TO_LONG
, "float-to-long",

2812 , 
_FLOAT
, 
s8
, 
_WIDE
)

2813 
OP_END


2816 
	`HANDLE_NUMCONV
(
OP_FLOAT_TO_DOUBLE
, "æßt-to-doubË", 
_FLOAT
, 
_DOUBLE
)

2817 
OP_END


2820 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_INT
, "double-to-int",

2821 , 
_DOUBLE
, 
s4
, 
_INT
)

2822 
OP_END


2825 
	`HANDLE_FLOAT_TO_INT
(
OP_DOUBLE_TO_LONG
, "double-to-long",

2826 , 
_DOUBLE
, 
s8
, 
_WIDE
)

2827 
OP_END


2830 
	`HANDLE_NUMCONV
(
OP_DOUBLE_TO_FLOAT
, "doubË-to-æßt", 
_DOUBLE
, 
_FLOAT
)

2831 
OP_END


2834 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_BYTE
, "by‹", 
s1
)

2835 
OP_END


2838 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_CHAR
, "ch¬", 
u2
)

2839 
OP_END


2842 
	`HANDLE_INT_TO_SMALL
(
OP_INT_TO_SHORT
, "shÜt", 
s2
)

2843 
OP_END


2846 
	`HANDLE_OP_X_INT
(
OP_ADD_INT
, "add", +, 0)

2847 
OP_END


2850 
	`HANDLE_OP_X_INT
(
OP_SUB_INT
, "sub", -, 0)

2851 
OP_END


2854 
	`HANDLE_OP_X_INT
(
OP_MUL_INT
, "mul", *, 0)

2855 
OP_END


2858 
	`HANDLE_OP_X_INT
(
OP_DIV_INT
, "div", /, 1)

2859 
OP_END


2862 
	`HANDLE_OP_X_INT
(
OP_REM_INT
, "rem", %, 2)

2863 
OP_END


2866 
	`HANDLE_OP_X_INT
(
OP_AND_INT
, "and", &, 0)

2867 
OP_END


2870 
	`HANDLE_OP_X_INT
(
OP_OR_INT
, "or", |, 0)

2871 
OP_END


2874 
	`HANDLE_OP_X_INT
(
OP_XOR_INT
, "xor", ^, 0)

2875 
OP_END


2878 
	`HANDLE_OP_SHX_INT
(
OP_SHL_INT
, "shl", (
s4
), <<)

2879 
OP_END


2882 
	`HANDLE_OP_SHX_INT
(
OP_SHR_INT
, "shr", (
s4
), >>)

2883 
OP_END


2886 
	`HANDLE_OP_SHX_INT
(
OP_USHR_INT
, "ushr", (
u4
), >>)

2887 
OP_END


2890 
	`HANDLE_OP_X_LONG
(
OP_ADD_LONG
, "add", +, 0)

2891 
OP_END


2894 
	`HANDLE_OP_X_LONG
(
OP_SUB_LONG
, "sub", -, 0)

2895 
OP_END


2898 
	`HANDLE_OP_X_LONG
(
OP_MUL_LONG
, "mul", *, 0)

2899 
OP_END


2902 
	`HANDLE_OP_X_LONG
(
OP_DIV_LONG
, "div", /, 1)

2903 
OP_END


2906 
	`HANDLE_OP_X_LONG
(
OP_REM_LONG
, "rem", %, 2)

2907 
OP_END


2910 
	`HANDLE_OP_X_LONG
(
OP_AND_LONG
, "and", &, 0)

2911 
OP_END


2914 
	`HANDLE_OP_X_LONG
(
OP_OR_LONG
, "or", |, 0)

2915 
OP_END


2918 
	`HANDLE_OP_X_LONG
(
OP_XOR_LONG
, "xor", ^, 0)

2919 
OP_END


2922 
	`HANDLE_OP_SHX_LONG
(
OP_SHL_LONG
, "shl", (
s8
), <<)

2923 
OP_END


2926 
	`HANDLE_OP_SHX_LONG
(
OP_SHR_LONG
, "shr", (
s8
), >>)

2927 
OP_END


2930 
	`HANDLE_OP_SHX_LONG
(
OP_USHR_LONG
, "ushr", (
u8
), >>)

2931 
OP_END


2934 
	`HANDLE_OP_X_FLOAT
(
OP_ADD_FLOAT
, "add", +)

2935 
OP_END


2938 
	`HANDLE_OP_X_FLOAT
(
OP_SUB_FLOAT
, "sub", -)

2939 
OP_END


2942 
	`HANDLE_OP_X_FLOAT
(
OP_MUL_FLOAT
, "mul", *)

2943 
OP_END


2946 
	`HANDLE_OP_X_FLOAT
(
OP_DIV_FLOAT
, "div", /)

2947 
OP_END


2950 
	`HANDLE_OPCODE
(
OP_REM_FLOAT
 )

2952 
u2
 
¤cRegs
;

2953 
vd¡
 = 
	`INST_AA
(
š¡
);

2954 
¤cRegs
 = 
	`FETCH
(1);

2955 
v¤c1
 = 
¤cRegs
 & 0xff;

2956 
v¤c2
 = 
¤cRegs
 >> 8;

2957 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2958 
	`SET_REGISTER_FLOAT
(
vd¡
,

2959 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
v¤c1
), GET_REGISTER_FLOAT(
v¤c2
)));

2961 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

2962 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));

2965 
	`FINISH
(2);

2966 
OP_END


2969 
	`HANDLE_OP_X_DOUBLE
(
OP_ADD_DOUBLE
, "add", +)

2970 
OP_END


2973 
	`HANDLE_OP_X_DOUBLE
(
OP_SUB_DOUBLE
, "sub", -)

2974 
OP_END


2977 
	`HANDLE_OP_X_DOUBLE
(
OP_MUL_DOUBLE
, "mul", *)

2978 
OP_END


2981 
	`HANDLE_OP_X_DOUBLE
(
OP_DIV_DOUBLE
, "div", /)

2982 
OP_END


2985 
	`HANDLE_OPCODE
(
OP_REM_DOUBLE
 )

2987 
u2
 
¤cRegs
;

2988 
vd¡
 = 
	`INST_AA
(
š¡
);

2989 
¤cRegs
 = 
	`FETCH
(1);

2990 
v¤c1
 = 
¤cRegs
 & 0xff;

2991 
v¤c2
 = 
¤cRegs
 >> 8;

2992 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", "mod", 
vd¡
, 
v¤c1
, 
v¤c2
);

2993 
	`SET_REGISTER_DOUBLE
(
vd¡
,

2994 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
v¤c1
), GET_REGISTER_DOUBLE(
v¤c2
)));

2996 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

2997 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));

3000 
	`FINISH
(2);

3001 
OP_END


3004 
	`HANDLE_OP_X_INT_2ADDR
(
OP_ADD_INT_2ADDR
, "add", +, 0)

3005 
OP_END


3008 
	`HANDLE_OP_X_INT_2ADDR
(
OP_SUB_INT_2ADDR
, "sub", -, 0)

3009 
OP_END


3012 
	`HANDLE_OP_X_INT_2ADDR
(
OP_MUL_INT_2ADDR
, "mul", *, 0)

3013 
OP_END


3016 
	`HANDLE_OP_X_INT_2ADDR
(
OP_DIV_INT_2ADDR
, "div", /, 1)

3017 
OP_END


3020 
	`HANDLE_OP_X_INT_2ADDR
(
OP_REM_INT_2ADDR
, "rem", %, 2)

3021 
OP_END


3024 
	`HANDLE_OP_X_INT_2ADDR
(
OP_AND_INT_2ADDR
, "and", &, 0)

3025 
OP_END


3028 
	`HANDLE_OP_X_INT_2ADDR
(
OP_OR_INT_2ADDR
, "or", |, 0)

3029 
OP_END


3032 
	`HANDLE_OP_X_INT_2ADDR
(
OP_XOR_INT_2ADDR
, "xor", ^, 0)

3033 
OP_END


3036 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_SHL_INT_2ADDR
, "shl", (
s4
), <<)

3037 
OP_END


3040 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_SHR_INT_2ADDR
, "shr", (
s4
), >>)

3041 
OP_END


3044 
	`HANDLE_OP_SHX_INT_2ADDR
(
OP_USHR_INT_2ADDR
, "ushr", (
u4
), >>)

3045 
OP_END


3048 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_ADD_LONG_2ADDR
, "add", +, 0)

3049 
OP_END


3052 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_SUB_LONG_2ADDR
, "sub", -, 0)

3053 
OP_END


3056 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_MUL_LONG_2ADDR
, "mul", *, 0)

3057 
OP_END


3060 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_DIV_LONG_2ADDR
, "div", /, 1)

3061 
OP_END


3064 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_REM_LONG_2ADDR
, "rem", %, 2)

3065 
OP_END


3068 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_AND_LONG_2ADDR
, "and", &, 0)

3069 
OP_END


3072 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_OR_LONG_2ADDR
, "or", |, 0)

3073 
OP_END


3076 
	`HANDLE_OP_X_LONG_2ADDR
(
OP_XOR_LONG_2ADDR
, "xor", ^, 0)

3077 
OP_END


3080 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHL_LONG_2ADDR
, "shl", (
s8
), <<)

3081 
OP_END


3084 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_SHR_LONG_2ADDR
, "shr", (
s8
), >>)

3085 
OP_END


3088 
	`HANDLE_OP_SHX_LONG_2ADDR
(
OP_USHR_LONG_2ADDR
, "ushr", (
u8
), >>)

3089 
OP_END


3092 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_ADD_FLOAT_2ADDR
, "add", +)

3093 
OP_END


3096 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_SUB_FLOAT_2ADDR
, "sub", -)

3097 
OP_END


3100 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_MUL_FLOAT_2ADDR
, "mul", *)

3101 
OP_END


3104 
	`HANDLE_OP_X_FLOAT_2ADDR
(
OP_DIV_FLOAT_2ADDR
, "div", /)

3105 
OP_END


3108 
	`HANDLE_OPCODE
(
OP_REM_FLOAT_2ADDR
 )

3109 
vd¡
 = 
	`INST_A
(
š¡
);

3110 
v¤c1
 = 
	`INST_B
(
š¡
);

3111 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

3112 
	`SET_REGISTER_FLOAT
(
vd¡
,

3113 
	`fmodf
(
	`GET_REGISTER_FLOAT
(
vd¡
), GET_REGISTER_FLOAT(
v¤c1
)));

3115 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
,

3116 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));

3118 
	`FINISH
(1);

3119 
OP_END


3122 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_ADD_DOUBLE_2ADDR
, "add", +)

3123 
OP_END


3126 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_SUB_DOUBLE_2ADDR
, "sub", -)

3127 
OP_END


3130 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_MUL_DOUBLE_2ADDR
, "mul", *)

3131 
OP_END


3134 
	`HANDLE_OP_X_DOUBLE_2ADDR
(
OP_DIV_DOUBLE_2ADDR
, "div", /)

3135 
OP_END


3138 
	`HANDLE_OPCODE
(
OP_REM_DOUBLE_2ADDR
 )

3139 
vd¡
 = 
	`INST_A
(
š¡
);

3140 
v¤c1
 = 
	`INST_B
(
š¡
);

3141 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", "mod", 
vd¡
, 
v¤c1
);

3142 
	`SET_REGISTER_DOUBLE
(
vd¡
,

3143 
	`fmod
(
	`GET_REGISTER_DOUBLE
(
vd¡
), GET_REGISTER_DOUBLE(
v¤c1
)));

3145 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
,

3146 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));

3148 
	`FINISH
(1);

3149 
OP_END


3152 
	`HANDLE_OP_X_INT_LIT16
(
OP_ADD_INT_LIT16
, "add", +, 0)

3153 
OP_END


3156 
	`HANDLE_OPCODE
(
OP_RSUB_INT
 )

3158 
vd¡
 = 
	`INST_A
(
š¡
);

3159 
v¤c1
 = 
	`INST_B
(
š¡
);

3160 
v¤c2
 = 
	`FETCH
(1);

3161 
	`ILOGV
("|rsub-šˆv%d,v%d,#+0x%04x", 
vd¡
, 
v¤c1
, 
v¤c2
);

3162 
	`SET_REGISTER
(
vd¡
, (
s2
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

3164 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

3167 
	`FINISH
(2);

3168 
OP_END


3171 
	`HANDLE_OP_X_INT_LIT16
(
OP_MUL_INT_LIT16
, "mul", *, 0)

3172 
OP_END


3175 
	`HANDLE_OP_X_INT_LIT16
(
OP_DIV_INT_LIT16
, "div", /, 1)

3176 
OP_END


3179 
	`HANDLE_OP_X_INT_LIT16
(
OP_REM_INT_LIT16
, "rem", %, 2)

3180 
OP_END


3183 
	`HANDLE_OP_X_INT_LIT16
(
OP_AND_INT_LIT16
, "and", &, 0)

3184 
OP_END


3187 
	`HANDLE_OP_X_INT_LIT16
(
OP_OR_INT_LIT16
, "or", |, 0)

3188 
OP_END


3191 
	`HANDLE_OP_X_INT_LIT16
(
OP_XOR_INT_LIT16
, "xor", ^, 0)

3192 
OP_END


3195 
	`HANDLE_OP_X_INT_LIT8
(
OP_ADD_INT_LIT8
, "add", +, 0)

3196 
OP_END


3199 
	`HANDLE_OPCODE
(
OP_RSUB_INT_LIT8
 )

3201 
u2
 
l™Info
;

3202 
vd¡
 = 
	`INST_AA
(
š¡
);

3203 
l™Info
 = 
	`FETCH
(1);

3204 
v¤c1
 = 
l™Info
 & 0xff;

3205 
v¤c2
 = 
l™Info
 >> 8;

3206 
	`ILOGV
("|%s-št/l™8 v%d,v%d,#+0x%02x", "rsub", 
vd¡
, 
v¤c1
, 
v¤c2
);

3207 
	`SET_REGISTER
(
vd¡
, (
s1
è
v¤c2
 - (
s4
è
	`GET_REGISTER
(
v¤c1
));

3209 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
));

3212 
	`FINISH
(2);

3213 
OP_END


3216 
	`HANDLE_OP_X_INT_LIT8
(
OP_MUL_INT_LIT8
, "mul", *, 0)

3217 
OP_END


3220 
	`HANDLE_OP_X_INT_LIT8
(
OP_DIV_INT_LIT8
, "div", /, 1)

3221 
OP_END


3224 
	`HANDLE_OP_X_INT_LIT8
(
OP_REM_INT_LIT8
, "rem", %, 2)

3225 
OP_END


3228 
	`HANDLE_OP_X_INT_LIT8
(
OP_AND_INT_LIT8
, "and", &, 0)

3229 
OP_END


3232 
	`HANDLE_OP_X_INT_LIT8
(
OP_OR_INT_LIT8
, "or", |, 0)

3233 
OP_END


3236 
	`HANDLE_OP_X_INT_LIT8
(
OP_XOR_INT_LIT8
, "xor", ^, 0)

3237 
OP_END


3240 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_SHL_INT_LIT8
, "shl", (
s4
), <<)

3241 
OP_END


3244 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_SHR_INT_LIT8
, "shr", (
s4
), >>)

3245 
OP_END


3248 
	`HANDLE_OP_SHX_INT_LIT8
(
OP_USHR_INT_LIT8
, "ushr", (
u4
), >>)

3249 
OP_END


3252 
	`HANDLE_OPCODE
(
OP_UNUSED_E3
)

3253 
OP_END


3256 
	`HANDLE_OPCODE
(
OP_UNUSED_E4
)

3257 
OP_END


3260 
	`HANDLE_OPCODE
(
OP_UNUSED_E5
)

3261 
OP_END


3264 
	`HANDLE_OPCODE
(
OP_UNUSED_E6
)

3265 
OP_END


3268 
	`HANDLE_OPCODE
(
OP_UNUSED_E7
)

3269 
OP_END


3272 
	`HANDLE_OPCODE
(
OP_UNUSED_E8
)

3273 
OP_END


3276 
	`HANDLE_OPCODE
(
OP_UNUSED_E9
)

3277 
OP_END


3280 
	`HANDLE_OPCODE
(
OP_UNUSED_EA
)

3281 
OP_END


3284 
	`HANDLE_OPCODE
(
OP_UNUSED_EB
)

3285 
OP_END


3288 
	`HANDLE_OPCODE
(
OP_UNUSED_EC
)

3289 
OP_END


3292 
	`HANDLE_OPCODE
(
OP_THROW_VERIFICATION_ERROR
)

3293 
	`EXPORT_PC
();

3294 
v¤c1
 = 
	`INST_AA
(
š¡
);

3295 
»f
 = 
	`FETCH
(1);

3296 
	`dvmThrowV”ifiÿtiÚE¼Ü
(
curM‘hod
, 
v¤c1
, 
»f
);

3297 
	`GOTO_exû±iÚThrown
();

3298 
OP_END


3301 
	`HANDLE_OPCODE
(
OP_EXECUTE_INLINE
 )

3318 
u4
 
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
;

3321 
	`EXPORT_PC
();

3323 
v¤c1
 = 
	`INST_B
(
š¡
);

3324 
»f
 = 
	`FETCH
(1);

3325 
vd¡
 = 
	`FETCH
(2);

3326 
	`ILOGV
("|execute-inline‡rgs=%d @%d {regs=0x%04x}",

3327 
v¤c1
, 
»f
, 
vd¡
);

3329 
	`as£¹
((
vd¡
 >> 16) == 0);

3330 
	`as£¹
(
v¤c1
 <= 4);

3332 
v¤c1
) {

3334 
¬g3
 = 
	`GET_REGISTER
(
vd¡
 >> 12);

3337 
¬g2
 = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

3340 
¬g1
 = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

3343 
¬g0
 = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3349 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


3350 ià(!
	`dvmP”fÜmIÆšeOp4Dbg
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

3351 
	`GOTO_exû±iÚThrown
();

3353 ià(!
	`dvmP”fÜmIÆšeOp4Std
(
¬g0
, 
¬g1
, 
¬g2
, 
¬g3
, &
»tv®
, 
»f
))

3354 
	`GOTO_exû±iÚThrown
();

3357 
	`FINISH
(3);

3358 
OP_END


3361 
	`HANDLE_OPCODE
(
OP_UNUSED_EF
)

3362 
OP_END


3365 
	`HANDLE_OPCODE
(
OP_INVOKE_DIRECT_EMPTY
 )

3366 #ià
INTERP_TYPE
 !ğ
INTERP_DBG


3368 
	`FINISH
(3);

3370 ià(!
gDvm
.
debugg”Aùive
) {

3372 
	`FINISH
(3);

3376 
	`GOTO_švoke
(
švokeDœeù
, 
çl£
);

3379 
OP_END


3382 
	`HANDLE_OPCODE
(
OP_UNUSED_F1
)

3383 
OP_END


3386 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_QUICK
, "", 
IÁ
, )

3387 
OP_END


3390 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

3391 
OP_END


3394 
	`HANDLE_IGET_X_QUICK
(
OP_IGET_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

3395 
OP_END


3398 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_QUICK
, "", 
IÁ
, )

3399 
OP_END


3402 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_WIDE_QUICK
, "-wide", 
LÚg
, 
_WIDE
)

3403 
OP_END


3406 
	`HANDLE_IPUT_X_QUICK
(
OP_IPUT_OBJECT_QUICK
, "-objeù", 
Objeù
, 
_AS_OBJECT
)

3407 
OP_END


3410 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK
 )

3411 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
çl£
);

3412 
OP_END


3415 
	`HANDLE_OPCODE
(
OP_INVOKE_VIRTUAL_QUICK_RANGE
 )

3416 
	`GOTO_švoke
(
švokeVœtu®Quick
, 
Œue
);

3417 
OP_END


3420 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK
 )

3421 
	`GOTO_švoke
(
švokeSu³rQuick
, 
çl£
);

3422 
OP_END


3425 
	`HANDLE_OPCODE
(
OP_INVOKE_SUPER_QUICK_RANGE
 )

3426 
	`GOTO_švoke
(
švokeSu³rQuick
, 
Œue
);

3427 
OP_END


3430 
	`HANDLE_OPCODE
(
OP_UNUSED_FC
)

3431 
OP_END


3434 
	`HANDLE_OPCODE
(
OP_UNUSED_FD
)

3435 
OP_END


3438 
	`HANDLE_OPCODE
(
OP_UNUSED_FE
)

3439 
OP_END


3442 
	`HANDLE_OPCODE
(
OP_UNUSED_FF
)

3446 
	`LOGE
("unknowÀİcod0x%02x\n", 
	`INST_INST
(
š¡
));

3447 
	`dvmAbÜt
();

3448 
	`FINISH
(1);

3449 
OP_END


3462 
	`GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
)

3464 
CÏssObjeù
* 
¬¿yCÏss
;

3465 
A¼ayObjeù
* 
ÃwA¼ay
;

3466 
u4
* 
cÚ‹Ás
;

3467 
ty³Ch
;

3468 
i
;

3469 
u4
 
¬g5
;

3471 
	`EXPORT_PC
();

3473 
»f
 = 
	`FETCH
(1);

3474 
vd¡
 = 
	`FETCH
(2);

3476 ià(
m‘hodC®lRªge
) {

3477 
v¤c1
 = 
	`INST_AA
(
š¡
);

3478 
¬g5
 = -1;

3479 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3480 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3482 
¬g5
 = 
	`INST_A
(
š¡
);

3483 
v¤c1
 = 
	`INST_B
(
š¡
);

3484 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

3485 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

3491 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

3492 ià(
¬¿yCÏss
 =ğ
NULL
) {

3493 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

3494 ià(
¬¿yCÏss
 =ğ
NULL
)

3495 
	`GOTO_exû±iÚThrown
();

3505 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

3506 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

3511 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'\n", 
¬¿yCÏss
->
desütÜ
);

3512 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

3513 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

3515 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeError;",

3517 
	`GOTO_exû±iÚThrown
();

3518 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

3520 
	`LOGE
("non-int…rimitives‚ot implemented\n");

3521 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

3523 
	`GOTO_exû±iÚThrown
();

3526 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

3527 ià(
ÃwA¼ay
 =ğ
NULL
)

3528 
	`GOTO_exû±iÚThrown
();

3533 
cÚ‹Ás
 = (
u4
*è
ÃwA¼ay
->contents;

3534 ià(
m‘hodC®lRªge
) {

3535 
i
 = 0; i < 
v¤c1
; i++)

3536 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

3538 
	`as£¹
(
v¤c1
 <= 5);

3539 ià(
v¤c1
 == 5) {

3540 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

3541 
v¤c1
--;

3543 
i
 = 0; i < 
v¤c1
; i++) {

3544 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

3545 
vd¡
 >>= 4;

3549 
»tv®
.
l
 = 
ÃwA¼ay
;

3551 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

3554 
	`FINISH
(3);

3555 
GOTO_TARGET_END


3558 
	`GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
)

3560 
M‘hod
* 
ba£M‘hod
;

3561 
Objeù
* 
thisPŒ
;

3563 
	`EXPORT_PC
();

3565 
v¤c1
 = 
	`INST_AA
(
š¡
);

3566 
»f
 = 
	`FETCH
(1);

3567 
vd¡
 = 
	`FETCH
(2);

3573 ià(
m‘hodC®lRªge
) {

3574 
	`as£¹
(
v¤c1
 > 0);

3575 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3576 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3577 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3579 
	`as£¹
((
v¤c1
>>4) > 0);

3580 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

3581 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3582 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3585 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3586 
	`GOTO_exû±iÚThrown
();

3592 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3593 ià(
ba£M‘hod
 =ğ
NULL
) {

3594 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3595 ià(
ba£M‘hod
 =ğ
NULL
) {

3596 
	`ILOGV
("+ unknown method or‡ccess denied\n");

3597 
	`GOTO_exû±iÚThrown
();

3605 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3606 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3609 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3619 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3621 
	`GOTO_exû±iÚThrown
();

3624 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3625 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3628 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s\n",

3629 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3630 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3631 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3632 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3635 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

3636 
	`LOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s\n",

3637 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3638 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

3639 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3642 
	`dvmDumpAÎCÏs£s
(0);

3646 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3648 
GOTO_TARGET_END


3650 
	`GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

3652 
M‘hod
* 
ba£M‘hod
;

3653 
u2
 
thisReg
;

3655 
	`EXPORT_PC
();

3657 
v¤c1
 = 
	`INST_AA
(
š¡
);

3658 
»f
 = 
	`FETCH
(1);

3659 
vd¡
 = 
	`FETCH
(2);

3661 ià(
m‘hodC®lRªge
) {

3662 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3663 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3664 
thisReg
 = 
vd¡
;

3666 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

3667 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3668 
thisReg
 = 
vd¡
 & 0x0f;

3671 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3672 
	`GOTO_exû±iÚThrown
();

3681 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3682 ià(
ba£M‘hod
 =ğ
NULL
) {

3683 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

3684 ià(
ba£M‘hod
 =ğ
NULL
) {

3685 
	`ILOGV
("+ unknown method or‡ccess denied\n");

3686 
	`GOTO_exû±iÚThrown
();

3699 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3704 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchMethodError;",

3705 
ba£M‘hod
->
Çme
);

3706 
	`GOTO_exû±iÚThrown
();

3708 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

3710 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3711 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3713 
	`GOTO_exû±iÚThrown
();

3716 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3717 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3719 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s\n",

3720 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

3721 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3722 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3724 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3726 
GOTO_TARGET_END


3728 
	`GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

3730 
Objeù
* 
thisPŒ
;

3731 
CÏssObjeù
* 
thisCÏss
;

3733 
	`EXPORT_PC
();

3735 
v¤c1
 = 
	`INST_AA
(
š¡
);

3736 
»f
 = 
	`FETCH
(1);

3737 
vd¡
 = 
	`FETCH
(2);

3743 ià(
m‘hodC®lRªge
) {

3744 
	`as£¹
(
v¤c1
 > 0);

3745 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3746 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3747 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3749 
	`as£¹
((
v¤c1
>>4) > 0);

3750 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

3751 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3752 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3754 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3755 
	`GOTO_exû±iÚThrown
();

3757 
thisCÏss
 = 
thisPŒ
->
şazz
;

3763 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

3764 
m‘hodCÏssDex
);

3765 ià(
m‘hodToC®l
 =ğ
NULL
) {

3766 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

3767 
	`GOTO_exû±iÚThrown
();

3770 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3772 
GOTO_TARGET_END


3774 
	`GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

3776 
u2
 
thisReg
;

3778 
v¤c1
 = 
	`INST_AA
(
š¡
);

3779 
»f
 = 
	`FETCH
(1);

3780 
vd¡
 = 
	`FETCH
(2);

3782 
	`EXPORT_PC
();

3784 ià(
m‘hodC®lRªge
) {

3785 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3786 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3787 
thisReg
 = 
vd¡
;

3789 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

3790 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3791 
thisReg
 = 
vd¡
 & 0x0f;

3793 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3794 
	`GOTO_exû±iÚThrown
();

3796 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3797 ià(
m‘hodToC®l
 =ğ
NULL
) {

3798 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

3799 
METHOD_DIRECT
);

3800 ià(
m‘hodToC®l
 =ğ
NULL
) {

3801 
	`ILOGV
("+ unknown direct method\n");

3802 
	`GOTO_exû±iÚThrown
();

3805 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3807 
GOTO_TARGET_END


3809 
	`GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

3810 
v¤c1
 = 
	`INST_AA
(
š¡
);

3811 
»f
 = 
	`FETCH
(1);

3812 
vd¡
 = 
	`FETCH
(2);

3814 
	`EXPORT_PC
();

3816 ià(
m‘hodC®lRªge
)

3817 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3818 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3820 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

3821 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3823 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

3824 ià(
m‘hodToC®l
 =ğ
NULL
) {

3825 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

3826 ià(
m‘hodToC®l
 =ğ
NULL
) {

3827 
	`ILOGV
("+ unknown method\n");

3828 
	`GOTO_exû±iÚThrown
();

3831 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3832 
GOTO_TARGET_END


3834 
	`GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

3836 
Objeù
* 
thisPŒ
;

3838 
	`EXPORT_PC
();

3840 
v¤c1
 = 
	`INST_AA
(
š¡
);

3841 
»f
 = 
	`FETCH
(1);

3842 
vd¡
 = 
	`FETCH
(2);

3848 ià(
m‘hodC®lRªge
) {

3849 
	`as£¹
(
v¤c1
 > 0);

3850 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3851 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3852 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

3854 
	`as£¹
((
v¤c1
>>4) > 0);

3855 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3856 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3857 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

3860 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

3861 
	`GOTO_exû±iÚThrown
();

3867 
	`as£¹
(
»f
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

3868 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

3871 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3872 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3874 
	`GOTO_exû±iÚThrown
();

3877 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3878 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3881 
	`LOGVV
("+++ virtual[%d]=%s.%s\n",

3882 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3883 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3885 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3887 
GOTO_TARGET_END


3889 
	`GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

3891 
u2
 
thisReg
;

3893 
	`EXPORT_PC
();

3895 
v¤c1
 = 
	`INST_AA
(
š¡
);

3896 
»f
 = 
	`FETCH
(1);

3897 
vd¡
 = 
	`FETCH
(2);

3899 ià(
m‘hodC®lRªge
) {

3900 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

3901 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

3902 
thisReg
 = 
vd¡
;

3904 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

3905 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

3906 
thisReg
 = 
vd¡
 & 0x0f;

3909 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

3910 
	`GOTO_exû±iÚThrown
();

3913 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

3914 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
NULL
);

3915 
	`GOTO_exû±iÚThrown
();

3918 
	`as£¹
(
»f
 < 
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

3930 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

3933 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

3934 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

3936 
	`GOTO_exû±iÚThrown
();

3939 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

3940 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

3942 
	`LOGVV
("+++ super-virtual[%d]=%s.%s\n",

3943 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

3944 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

3946 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

3948 
GOTO_TARGET_END


3956 
	`GOTO_TARGET
(
»tuºFromM‘hod
)

3958 
SckSaveA»a
* 
§veA»a
;

3967 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryR‘uº
, 0);

3969 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

3970 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

3971 
curM‘hod
->
shÜty
);

3974 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

3976 #ifdeà
EASY_GDB


3977 
debugSaveA»a
 = 
§veA»a
;

3979 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

3980 
	`TRACE_METHOD_EXIT
(
£lf
, 
curM‘hod
);

3984 
å
 = 
§veA»a
->
´evF¿me
;

3985 
	`as£¹
(
å
 !ğ
NULL
);

3986 ià(
	`dvmIsB»akF¿me
(
å
)) {

3988 
	`LOGVV
("+++„eturned into break frame\n");

3989 
	`GOTO_ba
();

3993 
£lf
->
curF¿me
 = 
å
;

3994 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

3996 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

3997 
pc
 = 
§veA»a
->
§vedPc
;

3998 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

3999 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4003 ià(
Œue


4006 
	`FINISH
(3);

4010 
	`as£¹
(
çl£
);

4013 
GOTO_TARGET_END


4022 
	`GOTO_TARGET
(
exû±iÚThrown
)

4024 
Objeù
* 
exû±iÚ
;

4025 
ÿtchR–Pc
;

4031 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryThrow
, 0);

4039 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4040 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

4041 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4042 
	`dvmCË¬Exû±iÚ
(
£lf
);

4044 
	`LOGV
("Handlingƒxception %s‡t %s:%d\n",

4045 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

4046 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

4048 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4063 ià(
gDvm
.
debugg”Aùive
) {

4064 * 
ÿtchF¿me
;

4065 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

4066 
exû±iÚ
, 
Œue
, &
ÿtchF¿me
);

4067 
	`dvmDbgPo¡Exû±iÚ
(
å
, 
pc
 - 
curM‘hod
->
š¢s
, 
ÿtchF¿me
,

4068 
ÿtchR–Pc
, 
exû±iÚ
);

4084 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

4085 
exû±iÚ
, 
çl£
, (*)&
å
);

4098 ià(
£lf
->
¡ackOv”æowed
)

4099 
	`dvmCËªupSckOv”æow
(
£lf
);

4101 ià(
ÿtchR–Pc
 < 0) {

4103 #ià
DVM_SHOW_EXCEPTION
 >= 2

4104 
	`LOGD
("Exception %s from %s:%d‚ot caught†ocally\n",

4105 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

4106 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

4108 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

4109 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4110 
	`GOTO_ba
();

4113 #ià
DVM_SHOW_EXCEPTION
 >= 3

4115 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4116 
	`LOGD
("Exception %shrown from %s:%do %s:%d\n",

4117 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

4118 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

4119 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

4120 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

4129 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

4131 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4132 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

4133 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

4134 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4135 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

4149 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

4150 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

4152 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

4153 
	`FINISH
(0);

4155 
GOTO_TARGET_END


4175 
	`GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

4176 
u2
 
couÁ
, u2 
»gs
)

4178 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

4185 
u4
* 
outs
;

4186 
i
;

4187 #ifdeà
WITH_TAINT_TRACKING


4188 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
);

4194 ià(
m‘hodC®lRªge
) {

4197 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

4198 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

4199 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

4200 #ifdeà
WITH_TAINT_TRACKING


4201 ià(
ÇtiveT¬g‘
) {

4202 
i
 = 0; i < 
v¤c1
; i++) {

4203 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

4206 
outs
[
v¤c1
] = 
TAINT_CLEAR
;

4208 
i
 = 0; i < 
v¤c1
; i++) {

4209 
outs
[
v¤c1
+1+
i
] = 
	`GET_REGISTER_TAINT
(
vd¡
+i);

4212 
¦Ù
 = 0;

4213 
i
 = 0; i < 
v¤c1
; i++) {

4214 
¦Ù
 = 
i
 << 1;

4215 
outs
[
¦Ù
] = 
	`GET_REGISTER
(
vd¡
+
i
);

4216 
outs
[
¦Ù
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
+
i
);

4219 
outs
[
v¤c1
<<1] = 
TAINT_CLEAR
;

4222 
i
 = 0; i < 
v¤c1
; i++)

4223 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

4226 
u4
 
couÁ
 = 
v¤c1
 >> 4;

4228 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

4229 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

4230 
	`as£¹
(
couÁ
 <= 5);

4232 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

4234 ià(
couÁ
 == 5) {

4235 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4236 
couÁ
--;

4238 
i
 = 0; i < (è
couÁ
; i++) {

4239 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4240 
vd¡
 >>= 4;

4243 
	`as£¹
((
vd¡
 >> 16) == 0);

4244 #ifdeà
WITH_TAINT_TRACKING


4245 ià(
ÇtiveT¬g‘
) {

4246 
couÁ
) {

4248 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4249 
outs
[
couÁ
+5] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

4251 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4252 
outs
[
couÁ
+4] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

4254 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4255 
outs
[
couÁ
+3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

4257 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4258 
outs
[
couÁ
+2] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

4260 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4261 
outs
[
couÁ
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

4266 
outs
[
couÁ
] = 
TAINT_CLEAR
;

4268 
couÁ
) {

4270 
outs
[8] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4271 
outs
[9] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

4273 
outs
[6] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4274 
outs
[7] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

4276 
outs
[4] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4277 
outs
[5] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

4279 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4280 
outs
[3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

4282 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4283 
outs
[1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

4288 
outs
[
couÁ
<<1] = 
TAINT_CLEAR
;

4293 
couÁ
) {

4295 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

4297 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

4299 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

4301 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

4303 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

4321 
SckSaveA»a
* 
ÃwSaveA»a
;

4322 
u4
* 
ÃwFp
;

4324 
	`ILOGV
("> %s%s.%s %s",

4325 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

4326 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4327 
m‘hodToC®l
->
shÜty
);

4329 #ifdeà
WITH_TAINT_TRACKING


4330 
ÃwFp
 = (
u4
*è
	`SAVEAREA_FROM_FP
(
å
) -

4331 ((
m‘hodToC®l
->
»gi¡”sSize
 << 1) + 1);

4333 
ÃwFp
 = (
u4
*è
	`SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

4335 
ÃwSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
ÃwFp
);

4338 ià(
Œue
) {

4339 
u1
* 
bÙtom
;

4340 #ifdeà
WITH_TAINT_TRACKING


4341 
bÙtom
 = (
u1
*è
ÃwSaveA»a
 -

4342 (
m‘hodToC®l
->
outsSize
 * (
u4
) + 4);

4344 
bÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

4346 ià(
bÙtom
 < 
£lf
->
š‹½SckEnd
) {

4348 
	`LOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p size=%d '%s')\n",

4349 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

4350 
£lf
->
š‹½SckSize
, 
m‘hodToC®l
->
Çme
);

4351 
	`dvmHªdËSckOv”æow
(
£lf
);

4352 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4353 
	`GOTO_exû±iÚThrown
();

4359 #ifdeà
LOG_INSTR


4360 ià(
m‘hodToC®l
->
»gi¡”sSize
 > m‘hodToC®l->
šsSize
) {

4367 #ifdeà
WITH_TAINT_TRACKING


4370 
	`mem£t
(
ÃwFp
, 0xcc,

4371 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 8);

4373 
	`mem£t
(
ÃwFp
, 0xcc,

4374 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

4379 #ifdeà
EASY_GDB


4380 
ÃwSaveA»a
->
´evSave
 = 
	`SAVEAREA_FROM_FP
(
å
);

4382 
ÃwSaveA»a
->
´evF¿me
 = 
å
;

4383 
ÃwSaveA»a
->
§vedPc
 = 
pc
;

4384 #ià
	`defšed
(
WITH_JIT
)

4385 
ÃwSaveA»a
->
»tuºAddr
 = 0;

4387 
ÃwSaveA»a
->
m‘hod
 = 
m‘hodToC®l
;

4389 ià(!
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

4394 
curM‘hod
 = 
m‘hodToC®l
;

4395 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

4396 
pc
 = 
m‘hodToC®l
->
š¢s
;

4397 
å
 = 
£lf
->
curF¿me
 = 
ÃwFp
;

4398 #ifdeà
EASY_GDB


4399 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
ÃwFp
);

4401 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


4402 
debugIsM‘hodEÁry
 = 
Œue
;

4404 
	`ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

4405 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

4406 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

4407 
	`FINISH
(0);

4410 #ifdeà
USE_INDIRECT_REF


4411 
ÃwSaveA»a
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

4413 
ÃwSaveA»a
->
xŒa
.
loÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

4416 
£lf
->
curF¿me
 = 
ÃwFp
;

4418 
	`DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

4420 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4421 ià(
gDvm
.
debugg”Aùive
) {

4422 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

4423 
	`dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_ENTRY
);

4426 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

4427 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

4430 
	`ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

4431 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

4438 (*
m‘hodToC®l
->
ÇtiveFunc
)(
ÃwFp
, &
»tv®
, m‘hodToC®l, 
£lf
);

4439 #ifdeà
WITH_TAINT_TRACKING


4443 
u4
 
couÁ
 = (
m‘hodC®lRªge
è? 
v¤c1
 : vsrc1 >> 4;

4444 
u4
* 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

4445 
	`SET_RETURN_TAINT
(
outs
[
couÁ
]);

4449 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

4450 ià(
gDvm
.
debugg”Aùive
) {

4451 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

4452 
	`dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_EXIT
);

4455 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

4456 
	`TRACE_METHOD_EXIT
(
£lf
, 
m‘hodToC®l
);

4460 
	`dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

4461 
£lf
->
curF¿me
 = 
å
;

4468 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4469 
	`LOGV
("Exceptionhrown by/below‚ative code\n");

4470 
	`GOTO_exû±iÚThrown
();

4473 
	`ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

4474 
	`ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

4475 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

4476 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4477 
curM‘hod
->
shÜty
);

4480 ià(
Œue


4483 
	`FINISH
(3);

4487 
	`as£¹
(
çl£
);

4491 
	`as£¹
(
çl£
);

4492 
GOTO_TARGET_END


4497 #iâdeà
THREADED_INTERP


4502 
ba
:

4503 
	`ILOGD
("|-- Leaving interpreter†oop");

4505 
š‹½S‹
->
»tv®
 =„etval;

4506 #ifdeà
WITH_TAINT_TRACKING


4507 
š‹½S‹
->
¹ašt
 =„taint;

4509  
çl£
;

4511 
ba_sw™ch
:

4519 #ià
	`defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

4520 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


4521 
š‹½S‹
->
debugIsM‘hodEÁry
 = debugIsMethodEntry;

4523 
š‹½S‹
->
debugIsM‘hodEÁry
 = 
çl£
;

4528 
š‹½S‹
->
m‘hod
 = 
curM‘hod
;

4529 
š‹½S‹
->
pc
 =…c;

4530 
š‹½S‹
->
å
 = fp;

4532 
š‹½S‹
->
»tv®
 =„etval;

4533 #ifdeà
WITH_TAINT_TRACKING


4534 
š‹½S‹
->
¹ašt
 =„taint;

4536 
š‹½S‹
->
ÃxtMode
 =

4537 (
INTERP_TYPE
 =ğ
INTERP_STD
è? 
INTERP_DBG
 : INTERP_STD;

4538 
	`LOGVV
(" meth='%s.%s'…c=0x%x fp=%p\n",

4539 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

4540 
pc
 - 
curM‘hod
->
š¢s
, 
å
);

4541  
Œue
;

4542 
	}
}

	@mterp/out/InterpC-x86.c

25 
	~"D®vik.h
"

26 
	~"š‹½/IÁ”pDefs.h
"

27 
	~"m‹½/M‹½.h
"

28 
	~<m©h.h
>

29 
	~"m‹½/commÚ/FšdIÁ”çû.h
"

55 
	#THREADED_INTERP


	)

57 #ifdeà
WITH_INSTR_CHECKS


58 
	#CHECK_BRANCH_OFFSETS


	)

59 
	#CHECK_REGISTER_INDICES


	)

76 #ià
defšed
(
__ARM_EABI__
)

78 
	#NO_UNALIGN_64__MEMCPY


	)

88 #ifdeà
PROFILE_FIELD_ACCESS


89 
	#UPDATE_FIELD_GET
(
_f›ld
è{ (_f›ld)->
g‘s
++; }

	)

90 
	#UPDATE_FIELD_PUT
(
_f›ld
è{ (_f›ld)->
puts
++; }

	)

92 
	#UPDATE_FIELD_GET
(
_f›ld
è(()0)

	)

93 
	#UPDATE_FIELD_PUT
(
_f›ld
è(()0)

	)

102 #ià
WITH_EXTRA_GC_CHECKS
 > 1

103 
	#EXPORT_EXTRA_PC
(è(
£lf
->
cu¼’tPc2
 = 
pc
)

	)

105 
	#EXPORT_EXTRA_PC
()

	)

117 #ifdeà
CHECK_BRANCH_OFFSETS


118 
	#ADJUST_PC
(
_off£t
) do { \

119 
myoff
 = 
_off£t
; \

120 ià(
pc
 + 
myoff
 < 
curM‘hod
->
š¢s
 || \

121 
pc
 + 
myoff
 >ğ
curM‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(curMethod)) \

123 * 
desc
; \

124 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
curM‘hod
->
´ÙÙy³
); \

125 
	`LOGE
("Invalid branch %d‡t 0x%04x in %s.%s %s\n", \

126 
myoff
, (è(
pc
 - 
curM‘hod
->
š¢s
), \

127 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
desc
); \

128 
	`ä“
(
desc
); \

129 
	`dvmAbÜt
(); \

131 
pc
 +ğ
myoff
; \

132 
	`EXPORT_EXTRA_PC
(); \

133 } 
çl£
)

	)

135 
	#ADJUST_PC
(
_off£t
) do { \

136 
pc
 +ğ
_off£t
; \

137 
	`EXPORT_EXTRA_PC
(); \

138 } 
çl£
)

	)

144 #ifdeà
LOG_INSTR


145 
	#ILOGD
(...è
	`ILOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

146 
	#ILOGV
(...è
	`ILOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

147 
	#ILOG
(
_Ëv–
, ...) do { \

148 
debugSŒBuf
[128]; \

149 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

150 ià(
curM‘hod
 !ğ
NULL
) \

151 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|%04x%s\n", \

152 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), 
debugSŒBuf
); \

154 
	`LOG
(
_Ëv–
, 
LOG_TAG
"i", "%-2d|####%s\n", \

155 
£lf
->
th»adId
, 
debugSŒBuf
); \

156 } 
çl£
)

	)

157 
dvmDumpRegs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
äamePŒ
, 
boŞ
 
šOÆy
);

158 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è
	`dvmDumpRegs
(_m‘h, _äame, _šOÆy)

	)

159 cÚ¡ 
	gkS·cšg
[] = " ";

161 
	#ILOGD
(...è(()0)

	)

162 
	#ILOGV
(...è(()0)

	)

163 
	#DUMP_REGS
(
_m‘h
, 
_äame
, 
_šOÆy
è(()0)

	)

169 #ifdeà
WITH_TAINT_TRACKING


170 
	#TLOGD
(...è
	`TLOG
(
LOG_DEBUG
, 
__VA_ARGS__
)

	)

171 
	#TLOGV
(...è
	`TLOG
(
LOG_VERBOSE
, 
__VA_ARGS__
)

	)

172 
	#TLOGW
(...è
	`TLOG
(
LOG_WARN
, 
__VA_ARGS__
)

	)

173 
	#TLOGE
(...è
	`TLOG
(
LOG_ERROR
, 
__VA_ARGS__
)

	)

174 
	#TLOG
(
_Ëv–
, ...) do { \

175 
debugSŒBuf
[128]; \

176 
	`¢´štf
(
debugSŒBuf
, (debugSŒBuf), 
__VA_ARGS__
); \

177 ià(
curM‘hod
 !ğ
NULL
) \

178 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|%04x|%s.%s:%s\n", \

179 
£lf
->
th»adId
, ()(
pc
 - 
curM‘hod
->
š¢s
), curM‘hod->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
debugSŒBuf
); \

181 
	`LOG
(
_Ëv–
, 
LOG_TAG
"t", "%-2d|####%s\n", \

182 
£lf
->
th»adId
, 
debugSŒBuf
); \

183 } 
çl£
)

	)

185 
	#TLOGD
(...è(()0)

	)

186 
	#TLOGV
(...è(()0)

	)

187 
	#TLOGW
(...è(()0)

	)

188 
	#TLOGE
(...è(()0)

	)

192 
šlše
 
s8
 
	$g‘LÚgFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

194 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

195 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

197 
±r
 +ğ
idx
;

198 
cÚv
.
·¹s
[0] = 
±r
[0];

199 
cÚv
.
·¹s
[1] = 
±r
[1];

200  
cÚv
.
Î
;

201 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

202 
s8
 
v®
;

203 
	`memıy
(&
v®
, &
±r
[
idx
], 8);

204  
v®
;

206  *((
s8
*è&
±r
[
idx
]);

208 
	}
}

210 #ifdeà
WITH_TAINT_TRACKING


212 
šlše
 
s8
 
	$g‘LÚgFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

215 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

217 
±r
 +ğ
idx
;

218 
cÚv
.
·¹s
[0] = 
±r
[0];

219 
cÚv
.
·¹s
[1] = 
±r
[2];

220  
cÚv
.
Î
;

221 
	}
}

225 
šlše
 
	$putLÚgToA¼ay
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

227 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

228 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

230 
±r
 +ğ
idx
;

231 
cÚv
.
Î
 = 
v®
;

232 
±r
[0] = 
cÚv
.
·¹s
[0];

233 
±r
[1] = 
cÚv
.
·¹s
[1];

234 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

235 
	`memıy
(&
±r
[
idx
], &
v®
, 8);

237 *((
s8
*è&
±r
[
idx
]èğ
v®
;

239 
	}
}

241 #ifdeà
WITH_TAINT_TRACKING


243 
šlše
 
	$putLÚgToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
s8
 
v®
)

246 uniÚ { 
s8
 
Î
; 
u4
 
·¹s
[2]; } 
cÚv
;

248 
±r
 +ğ
idx
;

249 
cÚv
.
Î
 = 
v®
;

250 
±r
[0] = 
cÚv
.
·¹s
[0];

251 
±r
[2] = 
cÚv
.
·¹s
[1];

252 
	}
}

256 
šlše
 
	$g‘DoubËFromA¼ay
(cÚ¡ 
u4
* 
±r
, 
idx
)

258 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

259 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

261 
±r
 +ğ
idx
;

262 
cÚv
.
·¹s
[0] = 
±r
[0];

263 
cÚv
.
·¹s
[1] = 
±r
[1];

264  
cÚv
.
d
;

265 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

266 
dv®
;

267 
	`memıy
(&
dv®
, &
±r
[
idx
], 8);

268  
dv®
;

270  *((*è&
±r
[
idx
]);

272 
	}
}

274 #ifdeà
WITH_TAINT_TRACKING


276 
šlše
 
	$g‘DoubËFromA¼ayTašt
(cÚ¡ 
u4
* 
±r
, 
idx
)

279 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

281 
±r
 +ğ
idx
;

282 
cÚv
.
·¹s
[0] = 
±r
[0];

283 
cÚv
.
·¹s
[1] = 
±r
[2];

284  
cÚv
.
d
;

285 
	}
}

289 
šlše
 
	$putDoubËToA¼ay
(
u4
* 
±r
, 
idx
, 
dv®
)

291 #ià
	`defšed
(
NO_UNALIGN_64__UNION
)

292 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

294 
±r
 +ğ
idx
;

295 
cÚv
.
d
 = 
dv®
;

296 
±r
[0] = 
cÚv
.
·¹s
[0];

297 
±r
[1] = 
cÚv
.
·¹s
[1];

298 #–ià
	`defšed
(
NO_UNALIGN_64__MEMCPY
)

299 
	`memıy
(&
±r
[
idx
], &
dv®
, 8);

301 *((*è&
±r
[
idx
]èğ
dv®
;

303 
	}
}

305 #ifdeà
WITH_TAINT_TRACKING


307 
šlše
 
	$putDoubËToA¼ayTašt
(
u4
* 
±r
, 
idx
, 
dv®
)

310 uniÚ { 
d
; 
u4
 
·¹s
[2]; } 
cÚv
;

312 
±r
 +ğ
idx
;

313 
cÚv
.
d
 = 
dv®
;

314 
±r
[0] = 
cÚv
.
·¹s
[0];

315 
±r
[2] = 
cÚv
.
·¹s
[1];

316 
	}
}

327 #ifdeà
WITH_TAINT_TRACKING


331 #ifdeà
CHECK_REGISTER_INDICES


332 
	#GET_REGISTER
(
_idx
) \

333 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

334 (
å
[(
_idx
)<<1]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

335 
	#SET_REGISTER
(
_idx
, 
_v®
) \

336 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

337 (
å
[(
_idx
)<<1] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

338 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

339 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

340 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

341 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

342 
	#GET_REGISTER_WIDE
(
_idx
) \

343 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

344 
	`g‘LÚgFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

345 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

346 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

347 
	`putLÚgToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

348 
	#GET_REGISTER_FLOAT
(
_idx
) \

349 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

350 (*((*è&
å
[(
_idx
)<<1])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

351 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

352 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

353 (*((*è&
å
[(
_idx
)<<1]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

354 
	#GET_REGISTER_DOUBLE
(
_idx
) \

355 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

356 
	`g‘DoubËFromA¼ayTašt
(
å
, ((
_idx
)<<1)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

357 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

358 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

359 
	`putDoubËToA¼ayTašt
(
å
, ((
_idx
)<<1), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

361 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)<<1])

	)

362 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (_v®))

	)

363 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)<<1])

	)

364 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)<<1] = (
u4
)(_v®))

	)

365 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

366 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

367 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

368 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

369 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)<<1]))

	)

370 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)<<1]èğ(_v®))

	)

371 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ayTašt
(
å
, ((_idx)<<1))

	)

372 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ayTašt
(
å
, ((_idx)<<1), (_v®))

	)

376 #ifdeà
CHECK_REGISTER_INDICES


377 
	#GET_REGISTER
(
_idx
) \

378 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

379 (
å
[(
_idx
)]è: (
	`as£¹
(!"bad„eg"),1969è)

	)

380 
	#SET_REGISTER
(
_idx
, 
_v®
) \

381 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

382 (
å
[(
_idx
)] = (
u4
)(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

383 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
 *)
	`GET_REGISTER
(_idx))

	)

384 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

385 
	#GET_REGISTER_INT
(
_idx
è((
s4
è
	`GET_REGISTER
(_idx))

	)

386 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

387 
	#GET_REGISTER_WIDE
(
_idx
) \

388 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

389 
	`g‘LÚgFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

390 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
) \

391 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

392 
	`putLÚgToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969è)

	)

393 
	#GET_REGISTER_FLOAT
(
_idx
) \

394 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

395 (*((*è&
å
[(
_idx
)])è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

396 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
) \

397 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
 ? \

398 (*((*è&
å
[(
_idx
)]èğ(
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0fè)

	)

399 
	#GET_REGISTER_DOUBLE
(
_idx
) \

400 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

401 
	`g‘DoubËFromA¼ay
(
å
, (
_idx
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

402 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
) \

403 Ğ(
_idx
è< 
curM‘hod
->
»gi¡”sSize
-1 ? \

404 
	`putDoubËToA¼ay
(
å
, (
_idx
), (
_v®
)è: (
	`as£¹
(!"bad„eg"),1969.0è)

	)

406 
	#GET_REGISTER
(
_idx
è(
å
[(_idx)])

	)

407 
	#SET_REGISTER
(
_idx
, 
_v®
è(
å
[(_idx)] = (_v®))

	)

408 
	#GET_REGISTER_AS_OBJECT
(
_idx
è((
Objeù
*è
å
[(_idx)])

	)

409 
	#SET_REGISTER_AS_OBJECT
(
_idx
, 
_v®
è(
å
[(_idx)] = (
u4
)(_v®))

	)

410 
	#GET_REGISTER_INT
(
_idx
è((
s4
)
	`GET_REGISTER
(_idx))

	)

411 
	#SET_REGISTER_INT
(
_idx
, 
_v®
è
	`SET_REGISTER
(_idx, (
s4
)_v®)

	)

412 
	#GET_REGISTER_WIDE
(
_idx
è
	`g‘LÚgFromA¼ay
(
å
, (_idx))

	)

413 
	#SET_REGISTER_WIDE
(
_idx
, 
_v®
è
	`putLÚgToA¼ay
(
å
, (_idx), (_v®))

	)

414 
	#GET_REGISTER_FLOAT
(
_idx
è(*((*è&
å
[(_idx)]))

	)

415 
	#SET_REGISTER_FLOAT
(
_idx
, 
_v®
è(*((*è&
å
[(_idx)]èğ(_v®))

	)

416 
	#GET_REGISTER_DOUBLE
(
_idx
è
	`g‘DoubËFromA¼ay
(
å
, (_idx))

	)

417 
	#SET_REGISTER_DOUBLE
(
_idx
, 
_v®
è
	`putDoubËToA¼ay
(
å
, (_idx), (_v®))

	)

421 #ifdeà
WITH_TAINT_TRACKING


423 
	#GET_REGISTER_TAINT
(
_idx
è(
å
[((_idx)<<1)+1])

	)

424 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = (
u4
)(_v®))

	)

425 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(
å
[((_idx)<<1)+1])

	)

426 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(
å
[((_idx)<<1)+1] = \

427 
å
[((
_idx
)<<1)+3] = (
u4
)(
_v®
))

	)

429 
	#GET_REGISTER_TAINT_INT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

430 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

431 
	#GET_REGISTER_TAINT_FLOAT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

432 
	#SET_REGISTER_TAINT_FLOAT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

433 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è
	`GET_REGISTER_TAINT_WIDE
(_idx)

	)

434 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT_WIDE
(_idx, _v®)

	)

435 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è
	`GET_REGISTER_TAINT
(_idx)

	)

436 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è
	`SET_REGISTER_TAINT
(_idx, _v®)

	)

439 
	#GET_ARRAY_TAINT
(
_¬r
è((_¬r)->
št
.
g
)

	)

440 
	#SET_ARRAY_TAINT
(
_¬r
, 
_v®
è((_¬r)->
št
.
g
 = (
u4
)(_v®))

	)

443 
	#GET_RETURN_TAINT
(è(
¹ašt
.
g
)

	)

444 
	#SET_RETURN_TAINT
(
_v®
è(
¹ašt
.
g
 = (
u4
)(_v®))

	)

446 
	#GET_REGISTER_TAINT
(
_idx
è(()0)

	)

447 
	#SET_REGISTER_TAINT
(
_idx
, 
_v®
è(()0)

	)

448 
	#GET_REGISTER_TAINT_WIDE
(
_idx
è(()0)

	)

449 
	#SET_REGISTER_TAINT_WIDE
(
_idx
, 
_v®
è(()0)

	)

450 
	#GET_REGISTER_TAINT_INT
(
_idx
è(()0)

	)

451 
	#SET_REGISTER_TAINT_INT
(
_idx
, 
_v®
è(()0)

	)

452 
	#GET_REGISTER_TAINT_DOUBLE
(
_idx
è(()0)

	)

453 
	#SET_REGISTER_TAINT_DOUBLE
(
_idx
, 
_v®
è(()0)

	)

454 
	#GET_REGISTER_TAINT_AS_OBJECT
(
_idx
è(()0)

	)

455 
	#SET_REGISTER_TAINT_AS_OBJECT
(
_idx
, 
_v®
è(()0)

	)

456 
	#GET_ARRAY_TAINT
(
_f›ld
è(()0)

	)

457 
	#SET_ARRAY_TAINT
(
_f›ld
, 
_v®
è(()0)

	)

458 
	#GET_RETURN_TAINT
(è(()0)

	)

459 
	#SET_RETURN_TAINT
(
_v®
è(()0)

	)

469 
	#FETCH
(
_off£t
è(
pc
[(_off£t)])

	)

474 
	#INST_INST
(
_š¡
è((_š¡è& 0xff)

	)

479 
	#INST_A
(
_š¡
è(((_š¡è>> 8è& 0x0f)

	)

480 
	#INST_B
(
_š¡
è((_š¡è>> 12)

	)

486 
	#INST_AA
(
_š¡
è((_š¡è>> 8)

	)

499 
	#EXPORT_PC
(è(
	`SAVEAREA_FROM_FP
(
å
)->
xŒa
.
cu¼’tPc
 = 
pc
)

	)

509 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

510 #ià
defšed
(
WITH_JIT
)

511 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

512 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

513 
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
) : \

514 !
	`dvmJ™Debugg”OrProf”Aùive
(
š‹½S‹
->
j™S‹
è)

	)

516 
	#NEED_INTERP_SWITCH
(
_cu¼’t
) ( \

517 (
_cu¼’t
 =ğ
INTERP_STD
) ? \

518 
	`dvmDebugg”OrProf”Aùive
(è: !dvmDebugg”OrProf”Aùive(è)

	)

521 
	#NEED_INTERP_SWITCH
(
_cu¼’t
è(
çl£
)

	)

534 
šlše
 
boŞ
 
	$checkFÜNuÎ
(
Objeù
* 
obj
)

536 ià(
obj
 =ğ
NULL
) {

537 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

538  
çl£
;

540 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


541 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

542 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

543 
	`dvmAbÜt
();

546 #iâdeà
NDEBUG


547 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

549 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

550 
	`dvmAbÜt
();

553  
Œue
;

554 
	}
}

565 
šlše
 
boŞ
 
	$checkFÜNuÎExpÜtPC
(
Objeù
* 
obj
, 
u4
* 
å
, cÚ¡ 
u2
* 
pc
)

567 ià(
obj
 =ğ
NULL
) {

568 
	`EXPORT_PC
();

569 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

570  
çl£
;

572 #ifdeà
WITH_EXTRA_OBJECT_VALIDATION


573 ià(!
	`dvmIsV®idObjeù
(
obj
)) {

574 
	`LOGE
("Inv®id objeù %p\n", 
obj
);

575 
	`dvmAbÜt
();

578 #iâdeà
NDEBUG


579 ià(
obj
->
şazz
 =ğ
NULL
 || ((
u4
) obj->clazz) <= 65536) {

581 
	`LOGE
("Inv®id objeù cÏs %°(š %p)\n", 
obj
->
şazz
, obj);

582 
	`dvmAbÜt
();

585  
Œue
;

586 
	}
}

590 
	#INTERP_TYPE
 
INTERP_STD


	)

591 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

592 
	#CHECK_TRACKED_REFS
(è(()0)

	)

599 
	#GOTO_TARGET_DECL
(
_rg‘
, ...) \

600 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
);

	)

602 
	#GOTO_TARGET
(
_rg‘
, ...) \

603 
dvmM‹½_
##
	`_rg‘
(
M‹½Glue
* 
glue
, ## 
__VA_ARGS__
) { \

604 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

605 
u2
 
š¡
 = 
	`FETCH
(0); \

606 cÚ¡ 
M‘hod
* 
m‘hodToC®l
; \

607 
SckSaveA»a
* 
debugSaveA»a
;

	)

609 
	#GOTO_TARGET_END
 }

	)

615 
	#»tv®
 
glue
->
»tv®


	)

616 
	#pc
 
glue
->
pc


	)

617 
	#å
 
glue
->
å


	)

618 
	#curM‘hod
 
glue
->
m‘hod


	)

619 
	#m‘hodCÏssDex
 
glue
->
m‘hodCÏssDex


	)

620 
	#£lf
 
glue
->
£lf


	)

621 
	#debugT¿ckedRefS¹
 
glue
->
debugT¿ckedRefS¹


	)

623 #ifdeà
WITH_TAINT_TRACKING


624 
	#¹ašt
 
glue
->
¹ašt


	)

628 
	#STUB_HACK
(
x
è
	)
x

636 
	#HANDLE_OPCODE
(
_İ
) \

637 
dvmM‹½_
##
	`_İ
(
M‹½Glue
* 
glue
) { \

638 
u2
 
»f
, 
v¤c1
, 
v¤c2
, 
vd¡
; \

639 
u2
 
š¡
 = 
	`FETCH
(0);

	)

641 
	#OP_END
 }

	)

647 
	#FINISH
(
_off£t
) { \

648 
	`ADJUST_PC
(
_off£t
); \

649 
	`CHECK_DEBUG_AND_PROF
(); \

650 
	`CHECK_TRACKED_REFS
(); \

652 }

	)

661 
	#GOTO_exû±iÚThrown
() \

663 
	`dvmM‹½_exû±iÚThrown
(
glue
); \

665 } 
çl£
)

	)

667 
	#GOTO_»tuºFromM‘hod
() \

669 
	`dvmM‹½_»tuºFromM‘hod
(
glue
); \

671 } 
çl£
)

	)

673 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

675 
dvmM‹½_
##
	`_rg‘
(
glue
, 
_m‘hodC®lRªge
); \

677 } 
çl£
)

	)

679 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
) \

681 
	`dvmM‹½_švokeM‘hod
(
glue
, 
_m‘hodC®lRªge
, 
_m‘hodToC®l
, \

682 
_v¤c1
, 
_vd¡
); \

684 } 
çl£
)

	)

690 
	#GOTO_ba
() \

691 
	`dvmM‹½StdBa
(
glue
, 
çl£
);

	)

692 
	#GOTO_ba_sw™ch
() \

693 
	`dvmM‹½StdBa
(
glue
, 
Œue
);

	)

701 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

702 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

703 
	`EXPORT_PC
(); \

704 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

706 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

707 
	`ADJUST_PC
(
_pÿdj
); \

708 
glue
->
’ŒyPošt
 = 
_’ŒyPošt
; \

709 
	`LOGVV
("threadid=%d: switcho STDƒp=%d‡dj=%d\n", \

710 
£lf
->
th»adId
, (
_’ŒyPošt
), (
_pÿdj
)); \

711 
	`GOTO_ba_sw™ch
(); \

713 }

	)

718 
GOTO_TARGET_DECL
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
);

719 
GOTO_TARGET_DECL
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
);

720 
GOTO_TARGET_DECL
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
);

721 
GOTO_TARGET_DECL
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
);

722 
GOTO_TARGET_DECL
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
);

723 
GOTO_TARGET_DECL
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
);

724 
GOTO_TARGET_DECL
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
);

725 
GOTO_TARGET_DECL
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
);

726 
GOTO_TARGET_DECL
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
m‘hodToC®l
,

727 
u2
 
couÁ
, u2 
»gs
);

728 
GOTO_TARGET_DECL
(
»tuºFromM‘hod
);

729 
GOTO_TARGET_DECL
(
exû±iÚThrown
);

743 
	#HANDLE_NUMCONV
(
_İcode
, 
_İÇme
, 
_äomty³
, 
_tÙy³
) \

744 
	`HANDLE_OPCODE
(
_İcode
 ) \

745 
vd¡
 = 
	`INST_A
(
š¡
); \

746 
v¤c1
 = 
	`INST_B
(
š¡
); \

747 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

748 
SET_REGISTER
##
	`_tÙy³
(
vd¡
, \

749 
GET_REGISTER
##
	`_äomty³
(
v¤c1
)); \

751 
SET_REGISTER_TAINT
##
	`_tÙy³
(
vd¡
, \

752 
GET_REGISTER_TAINT
##
	`_äomty³
(
v¤c1
)); \

754 
	`FINISH
(1);

	)

756 
	#HANDLE_FLOAT_TO_INT
(
_İcode
, 
_İÇme
, 
_äomvty³
, 
_äom¹y³
, \

757 
_tovty³
, 
_tÜty³
) \

758 
	`HANDLE_OPCODE
(
_İcode
 ) \

761 
_äomvty³
 
v®
; \

762 
_tovty³
 
štMš
, 
štMax
, 
»suÉ
; \

763 
vd¡
 = 
	`INST_A
(
š¡
); \

764 
v¤c1
 = 
	`INST_B
(
š¡
); \

765 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

766 
v®
 = 
GET_REGISTER
##
	`_äom¹y³
(
v¤c1
); \

767 
štMš
 = (
_tovty³
) 1 << ((_tovtype) * 8 -1); \

768 
štMax
 = ~
štMš
; \

769 
»suÉ
 = (
_tovty³
è
v®
; \

770 ià(
v®
 >ğ
štMax
) \

771 
»suÉ
 = 
štMax
; \

772 ià(
v®
 <ğ
štMš
) \

773 
»suÉ
 = 
štMš
; \

774 ià(
v®
 != val) \

775 
»suÉ
 = 0; \

777 
»suÉ
 = (
_tovty³
è
v®
; \

778 
SET_REGISTER
##
	`_tÜty³
(
vd¡
, 
»suÉ
); \

780 
SET_REGISTER_TAINT
##
	`_tÜty³
(
vd¡
, \

781 
GET_REGISTER_TAINT
##
	`_äom¹y³
(
v¤c1
)); \

784 
	`FINISH
(1);

	)

786 
	#HANDLE_INT_TO_SMALL
(
_İcode
, 
_İÇme
, 
_ty³
) \

787 
	`HANDLE_OPCODE
(
_İcode
 ) \

788 
vd¡
 = 
	`INST_A
(
š¡
); \

789 
v¤c1
 = 
	`INST_B
(
š¡
); \

790 
	`ILOGV
("|št-to-% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

791 
	`SET_REGISTER
(
vd¡
, (
_ty³
è
	`GET_REGISTER
(
v¤c1
)); \

793 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

795 
	`FINISH
(1);

	)

798 
	#HANDLE_OP_CMPX
(
_İcode
, 
_İÇme
, 
_v¬Ty³
, 
_ty³
, 
_ÇnV®
) \

799 
	`HANDLE_OPCODE
(
_İcode
 ) \

801 
»suÉ
; \

802 
u2
 
»gs
; \

803 
_v¬Ty³
 
v®1
, 
v®2
; \

804 
vd¡
 = 
	`INST_AA
(
š¡
); \

805 
»gs
 = 
	`FETCH
(1); \

806 
v¤c1
 = 
»gs
 & 0xff; \

807 
v¤c2
 = 
»gs
 >> 8; \

808 
	`ILOGV
("|cmp% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

809 
v®1
 = 
GET_REGISTER
##
	`_ty³
(
v¤c1
); \

810 
v®2
 = 
GET_REGISTER
##
	`_ty³
(
v¤c2
); \

811 ià(
v®1
 =ğ
v®2
) \

812 
»suÉ
 = 0; \

813 ià(
v®1
 < 
v®2
) \

814 
»suÉ
 = -1; \

815 ià(
v®1
 > 
v®2
) \

816 
»suÉ
 = 1; \

818 
»suÉ
 = (
_ÇnV®
); \

819 
	`ILOGV
("+„esuÉ=%d\n", 
»suÉ
); \

820 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

822 
	`SET_REGISTER_TAINT
(
vd¡
, 
TAINT_CLEAR
); \

825 
	`FINISH
(2);

	)

827 
	#HANDLE_OP_IF_XX
(
_İcode
, 
_İÇme
, 
_cmp
) \

828 
	`HANDLE_OPCODE
(
_İcode
 ) \

829 
v¤c1
 = 
	`INST_A
(
š¡
); \

830 
v¤c2
 = 
	`INST_B
(
š¡
); \

831 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_cmp
 (s4èGET_REGISTER(
v¤c2
)) { \

832 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

833 
	`ILOGV
("|if-% v%d,v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
v¤c2
, \

834 
b¿nchOff£t
); \

835 
	`ILOGV
("> branchaken"); \

836 ià(
b¿nchOff£t
 < 0) \

837 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

838 
	`FINISH
(
b¿nchOff£t
); \

840 
	`ILOGV
("|if-% v%d,v%d,-", (
_İÇme
), 
v¤c1
, 
v¤c2
); \

841 
	`FINISH
(2); \

842 }

	)

844 
	#HANDLE_OP_IF_XXZ
(
_İcode
, 
_İÇme
, 
_cmp
) \

845 
	`HANDLE_OPCODE
(
_İcode
 ) \

846 
v¤c1
 = 
	`INST_AA
(
š¡
); \

847 ià((
s4
è
	`GET_REGISTER
(
v¤c1
è
_cmp
 0) { \

848 
b¿nchOff£t
 = (
s2
)
	`FETCH
(1); \

849 
	`ILOGV
("|if-% v%d,+0x%04x", (
_İÇme
), 
v¤c1
, 
b¿nchOff£t
); \

850 
	`ILOGV
("> branchaken"); \

851 ià(
b¿nchOff£t
 < 0) \

852 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryIn¡r
, 
b¿nchOff£t
); \

853 
	`FINISH
(
b¿nchOff£t
); \

855 
	`ILOGV
("|if-% v%d,-", (
_İÇme
), 
v¤c1
); \

856 
	`FINISH
(2); \

857 }

	)

859 
	#HANDLE_UNOP
(
_İcode
, 
_İÇme
, 
_pfx
, 
_sfx
, 
_ty³
) \

860 
	`HANDLE_OPCODE
(
_İcode
 ) \

861 
vd¡
 = 
	`INST_A
(
š¡
); \

862 
v¤c1
 = 
	`INST_B
(
š¡
); \

863 
	`ILOGV
("|% v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

864 
SET_REGISTER
##
	`_ty³
(
vd¡
, 
_pfx
 
GET_REGISTER
##_ty³(
v¤c1
è
_sfx
); \

866 
SET_REGISTER_TAINT
##
	`_ty³
(
vd¡
, 
GET_REGISTER_TAINT
##_ty³(
v¤c1
)); \

868 
	`FINISH
(1);

	)

870 
	#HANDLE_OP_X_INT
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

871 
	`HANDLE_OPCODE
(
_İcode
 ) \

873 
u2
 
¤cRegs
; \

874 
vd¡
 = 
	`INST_AA
(
š¡
); \

875 
¤cRegs
 = 
	`FETCH
(1); \

876 
v¤c1
 = 
¤cRegs
 & 0xff; \

877 
v¤c2
 = 
¤cRegs
 >> 8; \

878 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

879 ià(
_chkdiv
 != 0) { \

880 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

881 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

882 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c2
); \

883 ià(
£cÚdV®
 == 0) { \

884 
	`EXPORT_PC
(); \

885 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

887 
	`GOTO_exû±iÚThrown
(); \

889 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

890 ià(
_chkdiv
 == 1) \

891 
»suÉ
 = 
fœ¡V®
; \

893 
»suÉ
 = 0; \

895 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

897 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

900 
	`SET_REGISTER
(
vd¡
, \

901 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (s4èGET_REGISTER(
v¤c2
)); \

904 
	`SET_REGISTER_TAINT
(
vd¡
, \

905 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

908 
	`FINISH
(2);

	)

910 
	#HANDLE_OP_SHX_INT
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

911 
	`HANDLE_OPCODE
(
_İcode
 ) \

913 
u2
 
¤cRegs
; \

914 
vd¡
 = 
	`INST_AA
(
š¡
); \

915 
¤cRegs
 = 
	`FETCH
(1); \

916 
v¤c1
 = 
¤cRegs
 & 0xff; \

917 
v¤c2
 = 
¤cRegs
 >> 8; \

918 
	`ILOGV
("|%s-šˆv%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

919 
	`SET_REGISTER
(
vd¡
, \

920 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (GET_REGISTER(
v¤c2
) & 0x1f)); \

922 
	`SET_REGISTER_TAINT
(
vd¡
, \

923 (
	`GET_REGISTER_TAINT
(
v¤c1
)|GET_REGISTER_TAINT(
v¤c2
)) ); \

926 
	`FINISH
(2);

	)

928 
	#HANDLE_OP_X_INT_LIT16
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

929 
	`HANDLE_OPCODE
(
_İcode
 ) \

930 
vd¡
 = 
	`INST_A
(
š¡
); \

931 
v¤c1
 = 
	`INST_B
(
š¡
); \

932 
v¤c2
 = 
	`FETCH
(1); \

933 
	`ILOGV
("|%s-int/lit16 v%d,v%d,#+0x%04x", \

934 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

935 ià(
_chkdiv
 != 0) { \

936 
s4
 
fœ¡V®
, 
»suÉ
; \

937 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

938 ià((
s2
è
v¤c2
 == 0) { \

939 
	`EXPORT_PC
(); \

940 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

942 
	`GOTO_exû±iÚThrown
(); \

944 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s2
è
v¤c2
) == -1) { \

946 ià(
_chkdiv
 == 1) \

947 
»suÉ
 = 
fœ¡V®
; \

949 
»suÉ
 = 0; \

951 
»suÉ
 = 
fœ¡V®
 
	`_İ
 (
s2
è
v¤c2
; \

953 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

956 
	`SET_REGISTER
(
vd¡
, 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s2
è
v¤c2
); \

959 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

961 
	`FINISH
(2);

	)

963 
	#HANDLE_OP_X_INT_LIT8
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

964 
	`HANDLE_OPCODE
(
_İcode
 ) \

966 
u2
 
l™Info
; \

967 
vd¡
 = 
	`INST_AA
(
š¡
); \

968 
l™Info
 = 
	`FETCH
(1); \

969 
v¤c1
 = 
l™Info
 & 0xff; \

970 
v¤c2
 = 
l™Info
 >> 8; \

971 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

972 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

973 ià(
_chkdiv
 != 0) { \

974 
s4
 
fœ¡V®
, 
»suÉ
; \

975 
fœ¡V®
 = 
	`GET_REGISTER
(
v¤c1
); \

976 ià((
s1
è
v¤c2
 == 0) { \

977 
	`EXPORT_PC
(); \

978 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

980 
	`GOTO_exû±iÚThrown
(); \

982 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && ((
s1
è
v¤c2
) == -1) { \

983 ià(
_chkdiv
 == 1) \

984 
»suÉ
 = 
fœ¡V®
; \

986 
»suÉ
 = 0; \

988 
»suÉ
 = 
fœ¡V®
 
	`_İ
 ((
s1
è
v¤c2
); \

990 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

992 
	`SET_REGISTER
(
vd¡
, \

993 (
s4
è
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
s1
è
v¤c2
); \

996 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

999 
	`FINISH
(2);

	)

1001 
	#HANDLE_OP_SHX_INT_LIT8
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1002 
	`HANDLE_OPCODE
(
_İcode
 ) \

1004 
u2
 
l™Info
; \

1005 
vd¡
 = 
	`INST_AA
(
š¡
); \

1006 
l™Info
 = 
	`FETCH
(1); \

1007 
v¤c1
 = 
l™Info
 & 0xff; \

1008 
v¤c2
 = 
l™Info
 >> 8; \

1009 
	`ILOGV
("|%s-int/lit8 v%d,v%d,#+0x%02x", \

1010 (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1011 
	`SET_REGISTER
(
vd¡
, \

1012 
_ÿ¡
 
	`GET_REGISTER
(
v¤c1
è
	`_İ
 (
v¤c2
 & 0x1f)); \

1014 
	`SET_REGISTER_TAINT
(
vd¡
, 
	`GET_REGISTER_TAINT
(
v¤c1
)); \

1017 
	`FINISH
(2);

	)

1019 
	#HANDLE_OP_X_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1020 
	`HANDLE_OPCODE
(
_İcode
 ) \

1021 
vd¡
 = 
	`INST_A
(
š¡
); \

1022 
v¤c1
 = 
	`INST_B
(
š¡
); \

1023 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1024 ià(
_chkdiv
 != 0) { \

1025 
s4
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1026 
fœ¡V®
 = 
	`GET_REGISTER
(
vd¡
); \

1027 
£cÚdV®
 = 
	`GET_REGISTER
(
v¤c1
); \

1028 ià(
£cÚdV®
 == 0) { \

1029 
	`EXPORT_PC
(); \

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1032 
	`GOTO_exû±iÚThrown
(); \

1034 ià((
u4
)
fœ¡V®
 =ğ0x80000000 && 
£cÚdV®
 == -1) { \

1035 ià(
_chkdiv
 == 1) \

1036 
»suÉ
 = 
fœ¡V®
; \

1038 
»suÉ
 = 0; \

1040 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1042 
	`SET_REGISTER
(
vd¡
, 
»suÉ
); \

1044 
	`SET_REGISTER
(
vd¡
, \

1045 (
s4
è
	`GET_REGISTER
(
vd¡
è
	`_İ
 (s4èGET_REGISTER(
v¤c1
)); \

1048 
	`SET_REGISTER_TAINT
(
vd¡
, \

1049 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1051 
	`FINISH
(1);

	)

1053 
	#HANDLE_OP_SHX_INT_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1054 
	`HANDLE_OPCODE
(
_İcode
 ) \

1055 
vd¡
 = 
	`INST_A
(
š¡
); \

1056 
v¤c1
 = 
	`INST_B
(
š¡
); \

1057 
	`ILOGV
("|%s-št-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1058 
	`SET_REGISTER
(
vd¡
, \

1059 
_ÿ¡
 
	`GET_REGISTER
(
vd¡
è
	`_İ
 (GET_REGISTER(
v¤c1
) & 0x1f)); \

1061 
	`SET_REGISTER_TAINT
(
vd¡
, \

1062 (
	`GET_REGISTER_TAINT
(
vd¡
)|GET_REGISTER_TAINT(
v¤c1
)) ); \

1064 
	`FINISH
(1);

	)

1066 
	#HANDLE_OP_X_LONG
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1067 
	`HANDLE_OPCODE
(
_İcode
 ) \

1069 
u2
 
¤cRegs
; \

1070 
vd¡
 = 
	`INST_AA
(
š¡
); \

1071 
¤cRegs
 = 
	`FETCH
(1); \

1072 
v¤c1
 = 
¤cRegs
 & 0xff; \

1073 
v¤c2
 = 
¤cRegs
 >> 8; \

1074 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1075 ià(
_chkdiv
 != 0) { \

1076 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1077 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1078 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c2
); \

1079 ià(
£cÚdV®
 == 0LL) { \

1080 
	`EXPORT_PC
(); \

1081 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1083 
	`GOTO_exû±iÚThrown
(); \

1085 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1086 
£cÚdV®
 == -1LL) \

1088 ià(
_chkdiv
 == 1) \

1089 
»suÉ
 = 
fœ¡V®
; \

1091 
»suÉ
 = 0; \

1093 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1095 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1097 
	`SET_REGISTER_WIDE
(
vd¡
, \

1098 (
s8
è
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (s8èGET_REGISTER_WIDE(
v¤c2
)); \

1101 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1102 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1105 
	`FINISH
(2);

	)

1107 
	#HANDLE_OP_SHX_LONG
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1108 
	`HANDLE_OPCODE
(
_İcode
 ) \

1110 
u2
 
¤cRegs
; \

1111 
vd¡
 = 
	`INST_AA
(
š¡
); \

1112 
¤cRegs
 = 
	`FETCH
(1); \

1113 
v¤c1
 = 
¤cRegs
 & 0xff; \

1114 
v¤c2
 = 
¤cRegs
 >> 8; \

1115 
	`ILOGV
("|%s-lÚg v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1116 
	`SET_REGISTER_WIDE
(
vd¡
, \

1117 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
v¤c1
è
	`_İ
 (
	`GET_REGISTER
(
v¤c2
) & 0x3f)); \

1119 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1120 (
	`GET_REGISTER_TAINT_WIDE
(
v¤c1
)|GET_REGISTER_TAINT_WIDE(
v¤c2
)));\

1123 
	`FINISH
(2);

	)

1125 
	#HANDLE_OP_X_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
, 
_chkdiv
) \

1126 
	`HANDLE_OPCODE
(
_İcode
 ) \

1127 
vd¡
 = 
	`INST_A
(
š¡
); \

1128 
v¤c1
 = 
	`INST_B
(
š¡
); \

1129 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1130 ià(
_chkdiv
 != 0) { \

1131 
s8
 
fœ¡V®
, 
£cÚdV®
, 
»suÉ
; \

1132 
fœ¡V®
 = 
	`GET_REGISTER_WIDE
(
vd¡
); \

1133 
£cÚdV®
 = 
	`GET_REGISTER_WIDE
(
v¤c1
); \

1134 ià(
£cÚdV®
 == 0LL) { \

1135 
	`EXPORT_PC
(); \

1136 
	`dvmThrowExû±iÚ
("Ljava/lang/ArithmeticException;", \

1138 
	`GOTO_exû±iÚThrown
(); \

1140 ià((
u8
)
fœ¡V®
 == 0x8000000000000000ULL && \

1141 
£cÚdV®
 == -1LL) \

1143 ià(
_chkdiv
 == 1) \

1144 
»suÉ
 = 
fœ¡V®
; \

1146 
»suÉ
 = 0; \

1148 
»suÉ
 = 
fœ¡V®
 
_İ
 
£cÚdV®
; \

1150 
	`SET_REGISTER_WIDE
(
vd¡
, 
»suÉ
); \

1152 
	`SET_REGISTER_WIDE
(
vd¡
, \

1153 (
s8
è
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (s8)GET_REGISTER_WIDE(
v¤c1
));\

1156 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1157 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1159 
	`FINISH
(1);

	)

1161 
	#HANDLE_OP_SHX_LONG_2ADDR
(
_İcode
, 
_İÇme
, 
_ÿ¡
, 
_İ
) \

1162 
	`HANDLE_OPCODE
(
_İcode
 ) \

1163 
vd¡
 = 
	`INST_A
(
š¡
); \

1164 
v¤c1
 = 
	`INST_B
(
š¡
); \

1165 
	`ILOGV
("|%s-lÚg-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1166 
	`SET_REGISTER_WIDE
(
vd¡
, \

1167 
_ÿ¡
 
	`GET_REGISTER_WIDE
(
vd¡
è
	`_İ
 (
	`GET_REGISTER
(
v¤c1
) & 0x3f)); \

1169 
	`SET_REGISTER_TAINT_WIDE
(
vd¡
, \

1170 (
	`GET_REGISTER_TAINT_WIDE
(
vd¡
)|GET_REGISTER_TAINT_WIDE(
v¤c1
)));\

1172 
	`FINISH
(1);

	)

1174 
	#HANDLE_OP_X_FLOAT
(
_İcode
, 
_İÇme
, 
_İ
) \

1175 
	`HANDLE_OPCODE
(
_İcode
 ) \

1177 
u2
 
¤cRegs
; \

1178 
vd¡
 = 
	`INST_AA
(
š¡
); \

1179 
¤cRegs
 = 
	`FETCH
(1); \

1180 
v¤c1
 = 
¤cRegs
 & 0xff; \

1181 
v¤c2
 = 
¤cRegs
 >> 8; \

1182 
	`ILOGV
("|%s-æßˆv%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1183 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1184 
	`GET_REGISTER_FLOAT
(
v¤c1
è
_İ
 GET_REGISTER_FLOAT(
v¤c2
)); \

1186 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1187 (
	`GET_REGISTER_TAINT_FLOAT
(
v¤c1
)|GET_REGISTER_TAINT_FLOAT(
v¤c2
)));\

1190 
	`FINISH
(2);

	)

1192 
	#HANDLE_OP_X_DOUBLE
(
_İcode
, 
_İÇme
, 
_İ
) \

1193 
	`HANDLE_OPCODE
(
_İcode
 ) \

1195 
u2
 
¤cRegs
; \

1196 
vd¡
 = 
	`INST_AA
(
š¡
); \

1197 
¤cRegs
 = 
	`FETCH
(1); \

1198 
v¤c1
 = 
¤cRegs
 & 0xff; \

1199 
v¤c2
 = 
¤cRegs
 >> 8; \

1200 
	`ILOGV
("|%s-doubË v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1201 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1202 
	`GET_REGISTER_DOUBLE
(
v¤c1
è
_İ
 GET_REGISTER_DOUBLE(
v¤c2
)); \

1204 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1205 (
	`GET_REGISTER_TAINT_DOUBLE
(
v¤c1
)|GET_REGISTER_TAINT_DOUBLE(
v¤c2
)));\

1208 
	`FINISH
(2);

	)

1210 
	#HANDLE_OP_X_FLOAT_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1211 
	`HANDLE_OPCODE
(
_İcode
 ) \

1212 
vd¡
 = 
	`INST_A
(
š¡
); \

1213 
v¤c1
 = 
	`INST_B
(
š¡
); \

1214 
	`ILOGV
("|%s-æßt-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1215 
	`SET_REGISTER_FLOAT
(
vd¡
, \

1216 
	`GET_REGISTER_FLOAT
(
vd¡
è
_İ
 GET_REGISTER_FLOAT(
v¤c1
)); \

1218 
	`SET_REGISTER_TAINT_FLOAT
(
vd¡
, \

1219 (
	`GET_REGISTER_TAINT_FLOAT
(
vd¡
)|GET_REGISTER_TAINT_FLOAT(
v¤c1
)));\

1221 
	`FINISH
(1);

	)

1223 
	#HANDLE_OP_X_DOUBLE_2ADDR
(
_İcode
, 
_İÇme
, 
_İ
) \

1224 
	`HANDLE_OPCODE
(
_İcode
 ) \

1225 
vd¡
 = 
	`INST_A
(
š¡
); \

1226 
v¤c1
 = 
	`INST_B
(
š¡
); \

1227 
	`ILOGV
("|%s-doubË-2add¸v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
); \

1228 
	`SET_REGISTER_DOUBLE
(
vd¡
, \

1229 
	`GET_REGISTER_DOUBLE
(
vd¡
è
_İ
 GET_REGISTER_DOUBLE(
v¤c1
)); \

1231 
	`SET_REGISTER_TAINT_DOUBLE
(
vd¡
, \

1232 (
	`GET_REGISTER_TAINT_DOUBLE
(
vd¡
)|GET_REGISTER_TAINT_DOUBLE(
v¤c1
)));\

1234 
	`FINISH
(1);

	)

1236 
	#HANDLE_OP_AGET
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1237 
	`HANDLE_OPCODE
(
_İcode
 ) \

1239 
A¼ayObjeù
* 
¬¿yObj
; \

1240 
u2
 
¬¿yInfo
; \

1241 
	`EXPORT_PC
(); \

1242 
vd¡
 = 
	`INST_AA
(
š¡
); \

1243 
¬¿yInfo
 = 
	`FETCH
(1); \

1244 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1245 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1246 
	`ILOGV
("|ag‘% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1247 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1248 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1249 
	`GOTO_exû±iÚThrown
(); \

1250 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1251 
	`LOGV
("Invalid‡rray‡ccess: %p %d (len=%d)\n", \

1252 
¬¿yObj
, 
v¤c2
,‡¼ayObj->
Ëngth
); \

1253 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1254 
NULL
); \

1255 
	`GOTO_exû±iÚThrown
(); \

1257 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1258 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)]); \

1260 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1261 (
	`GET_ARRAY_TAINT
(
¬¿yObj
)|
	`GET_REGISTER_TAINT
(
v¤c2
))); \

1263 
	`ILOGV
("+ AGET[%d]=0x%x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
)); \

1265 
	`FINISH
(2);

	)

1267 
	#HANDLE_OP_APUT
(
_İcode
, 
_İÇme
, 
_ty³
, 
_»gsize
) \

1268 
	`HANDLE_OPCODE
(
_İcode
 ) \

1270 
A¼ayObjeù
* 
¬¿yObj
; \

1271 
u2
 
¬¿yInfo
; \

1272 
	`EXPORT_PC
(); \

1273 
vd¡
 = 
	`INST_AA
(
š¡
); \

1274 
¬¿yInfo
 = 
	`FETCH
(1); \

1275 
v¤c1
 = 
¬¿yInfo
 & 0xff; \

1276 
v¤c2
 = 
¬¿yInfo
 >> 8; \

1277 
	`ILOGV
("|­ut% v%d,v%d,v%d", (
_İÇme
), 
vd¡
, 
v¤c1
, 
v¤c2
); \

1278 
¬¿yObj
 = (
A¼ayObjeù
*è
	`GET_REGISTER
(
v¤c1
); \

1279 ià(!
	`checkFÜNuÎ
((
Objeù
*è
¬¿yObj
)) \

1280 
	`GOTO_exû±iÚThrown
(); \

1281 ià(
	`GET_REGISTER
(
v¤c2
è>ğ
¬¿yObj
->
Ëngth
) { \

1282 
	`dvmThrowExû±iÚ
("Ljava/lang/ArrayIndexOutOfBoundsException;", \

1283 
NULL
); \

1284 
	`GOTO_exû±iÚThrown
(); \

1286 
	`ILOGV
("+ APUT[%d]=0x%08x", 
	`GET_REGISTER
(
v¤c2
), GET_REGISTER(
vd¡
));\

1287 ((
_ty³
*è
¬¿yObj
->
cÚ‹Ás
)[
	`GET_REGISTER
(
v¤c2
)] = \

1288 
GET_REGISTER
##
	`_»gsize
(
vd¡
); \

1290 
	`SET_ARRAY_TAINT
(
¬¿yObj
, \

1291 (
	`GET_ARRAY_TAINT
(
¬¿yObj
) | \

1292 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)) ); \

1295 
	`FINISH
(2);

	)

1314 
	#HANDLE_IGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1315 
	`HANDLE_OPCODE
(
_İcode
 ) \

1317 
In¡F›ld
* 
if›ld
; \

1318 
Objeù
* 
obj
; \

1319 
	`EXPORT_PC
(); \

1320 
vd¡
 = 
	`INST_A
(
š¡
); \

1321 
v¤c1
 = 
	`INST_B
(
š¡
); \

1322 
»f
 = 
	`FETCH
(1); \

1323 
	`ILOGV
("|ig‘% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1324 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1325 ià(!
	`checkFÜNuÎ
(
obj
)) \

1326 
	`GOTO_exû±iÚThrown
(); \

1327 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1328 ià(
if›ld
 =ğ
NULL
) { \

1329 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1330 ià(
if›ld
 =ğ
NULL
) \

1331 
	`GOTO_exû±iÚThrown
(); \

1333 
SET_REGISTER
##
	`_»gsize
(
vd¡
, \

1334 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
)); \

1335 
	`ILOGV
("+ IGET '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1336 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1337 
	`UPDATE_FIELD_GET
(&
if›ld
->
f›ld
); \

1339 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1340 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1341 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
if›ld
->
by‹Off£t
)) ); \

1344 
	`FINISH
(2);

	)

1346 
	#HANDLE_IGET_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1347 
	`HANDLE_OPCODE
(
_İcode
 ) \

1349 
Objeù
* 
obj
; \

1350 
vd¡
 = 
	`INST_A
(
š¡
); \

1351 
v¤c1
 = 
	`INST_B
(
š¡
); \

1352 
»f
 = 
	`FETCH
(1); \

1353 
	`ILOGV
("|iget%s-quick v%d,v%d,field@+%u", \

1354 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1355 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1356 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1357 
	`GOTO_exû±iÚThrown
(); \

1358 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘F›ld
##
	`_áy³
(
obj
, 
»f
)); \

1359 
	`ILOGV
("+ IGETQ %d=0x%08Îx", 
»f
, \

1360 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1364 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, \

1365 (
	`GET_REGISTER_TAINT
(
v¤c1
)| \

1366 
dvmG‘F›ldTašt
##
	`_áy³
(
obj
,
»f
)) ); \

1369 
	`FINISH
(2);

	)

1371 
	#HANDLE_IPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1372 
	`HANDLE_OPCODE
(
_İcode
 ) \

1374 
In¡F›ld
* 
if›ld
; \

1375 
Objeù
* 
obj
; \

1376 
	`EXPORT_PC
(); \

1377 
vd¡
 = 
	`INST_A
(
š¡
); \

1378 
v¤c1
 = 
	`INST_B
(
š¡
); \

1379 
»f
 = 
	`FETCH
(1); \

1380 
	`ILOGV
("|ut% v%d,v%d,f›ld@0x%04x", (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1381 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1382 ià(!
	`checkFÜNuÎ
(
obj
)) \

1383 
	`GOTO_exû±iÚThrown
(); \

1384 
if›ld
 = (
In¡F›ld
*è
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1385 ià(
if›ld
 =ğ
NULL
) { \

1386 
if›ld
 = 
	`dvmResŞveIn¡F›ld
(
curM‘hod
->
şazz
, 
»f
); \

1387 ià(
if›ld
 =ğ
NULL
) \

1388 
	`GOTO_exû±iÚThrown
(); \

1390 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1391 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1392 
	`ILOGV
("+ IPUT '%s'=0x%08Îx", 
if›ld
->
f›ld
.
Çme
, \

1393 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1394 
	`UPDATE_FIELD_PUT
(&
if›ld
->
f›ld
); \

1396 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
if›ld
->
by‹Off£t
, \

1397 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1400 
	`FINISH
(2);

	)

1402 
	#HANDLE_IPUT_X_QUICK
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1403 
	`HANDLE_OPCODE
(
_İcode
 ) \

1405 
Objeù
* 
obj
; \

1406 
vd¡
 = 
	`INST_A
(
š¡
); \

1407 
v¤c1
 = 
	`INST_B
(
š¡
); \

1408 
»f
 = 
	`FETCH
(1); \

1409 
	`ILOGV
("|iput%s-quick v%d,v%d,field@0x%04x", \

1410 (
_İÇme
), 
vd¡
, 
v¤c1
, 
»f
); \

1411 
obj
 = (
Objeù
*è
	`GET_REGISTER
(
v¤c1
); \

1412 ià(!
	`checkFÜNuÎExpÜtPC
(
obj
, 
å
, 
pc
)) \

1413 
	`GOTO_exû±iÚThrown
(); \

1414 
dvmS‘F›ld
##
	`_áy³
(
obj
, 
»f
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1415 
	`ILOGV
("+ IPUTQ %d=0x%08Îx", 
»f
, \

1416 (
u8
è
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1420 
dvmS‘F›ldTašt
##
	`_áy³
(
obj
, 
»f
, \

1421 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1424 
	`FINISH
(2);

	)

1426 
	#HANDLE_SGET_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1427 
	`HANDLE_OPCODE
(
_İcode
 ) \

1429 
SticF›ld
* 
sf›ld
; \

1430 
vd¡
 = 
	`INST_AA
(
š¡
); \

1431 
»f
 = 
	`FETCH
(1); \

1432 
	`ILOGV
("|sg‘% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1433 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1434 ià(
sf›ld
 =ğ
NULL
) { \

1435 
	`EXPORT_PC
(); \

1436 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1437 ià(
sf›ld
 =ğ
NULL
) \

1438 
	`GOTO_exû±iÚThrown
(); \

1440 
SET_REGISTER
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ld
##
	`_áy³
(
sf›ld
)); \

1441 
	`ILOGV
("+ SGET '%s'=0x%08llx", \

1442 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1443 
	`UPDATE_FIELD_GET
(&
sf›ld
->
f›ld
); \

1445 
SET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
, 
dvmG‘SticF›ldTašt
##
	`_áy³
(
sf›ld
));\

1448 
	`FINISH
(2);

	)

1450 
	#HANDLE_SPUT_X
(
_İcode
, 
_İÇme
, 
_áy³
, 
_»gsize
) \

1451 
	`HANDLE_OPCODE
(
_İcode
 ) \

1453 
SticF›ld
* 
sf›ld
; \

1454 
vd¡
 = 
	`INST_AA
(
š¡
); \

1455 
»f
 = 
	`FETCH
(1); \

1456 
	`ILOGV
("|¥ut% v%d,sf›ld@0x%04x", (
_İÇme
), 
vd¡
, 
»f
); \

1457 
sf›ld
 = (
SticF›ld
*)
	`dvmDexG‘ResŞvedF›ld
(
m‘hodCÏssDex
, 
»f
); \

1458 ià(
sf›ld
 =ğ
NULL
) { \

1459 
	`EXPORT_PC
(); \

1460 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
curM‘hod
->
şazz
, 
»f
); \

1461 ià(
sf›ld
 =ğ
NULL
) \

1462 
	`GOTO_exû±iÚThrown
(); \

1464 
dvmS‘SticF›ld
##
	`_áy³
(
sf›ld
, 
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1465 
	`ILOGV
("+ SPUT '%s'=0x%08llx", \

1466 
sf›ld
->
f›ld
.
Çme
, (
u8
)
GET_REGISTER
##
	`_»gsize
(
vd¡
)); \

1467 
	`UPDATE_FIELD_PUT
(&
sf›ld
->
f›ld
); \

1469 
dvmS‘SticF›ldTašt
##
	`_áy³
(
sf›ld
, \

1470 
GET_REGISTER_TAINT
##
	`_»gsize
(
vd¡
)); \

1473 
	`FINISH
(2);

	)

1487 
	$GOTO_TARGET
(
fËdNewA¼ay
, 
boŞ
 
m‘hodC®lRªge
)

1489 
CÏssObjeù
* 
¬¿yCÏss
;

1490 
A¼ayObjeù
* 
ÃwA¼ay
;

1491 
u4
* 
cÚ‹Ás
;

1492 
ty³Ch
;

1493 
i
;

1494 
u4
 
¬g5
;

1496 
	`EXPORT_PC
();

1498 
»f
 = 
	`FETCH
(1);

1499 
vd¡
 = 
	`FETCH
(2);

1501 ià(
m‘hodC®lRªge
) {

1502 
v¤c1
 = 
	`INST_AA
(
š¡
);

1503 
¬g5
 = -1;

1504 
	`ILOGV
("|filled-new-array-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1505 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1507 
¬g5
 = 
	`INST_A
(
š¡
);

1508 
v¤c1
 = 
	`INST_B
(
š¡
);

1509 
	`ILOGV
("|filled-new-array‡rgs=%d @0x%04x {regs=0x%04x %x}",

1510 
v¤c1
, 
»f
, 
vd¡
, 
¬g5
);

1516 
¬¿yCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
m‘hodCÏssDex
, 
»f
);

1517 ià(
¬¿yCÏss
 =ğ
NULL
) {

1518 
¬¿yCÏss
 = 
	`dvmResŞveCÏss
(
curM‘hod
->
şazz
, 
»f
, 
çl£
);

1519 ià(
¬¿yCÏss
 =ğ
NULL
)

1520 
	`GOTO_exû±iÚThrown
();

1530 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
¬¿yCÏss
));

1531 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
¬¿yCÏss
));

1536 
	`LOGVV
("+++ fËd-Ãw-¬¿yy³ i '%s'\n", 
¬¿yCÏss
->
desütÜ
);

1537 
ty³Ch
 = 
¬¿yCÏss
->
desütÜ
[1];

1538 ià(
ty³Ch
 == 'D' ||ypeCh == 'J') {

1540 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeError;",

1542 
	`GOTO_exû±iÚThrown
();

1543 } ià(
ty³Ch
 != 'L' &&ypeCh != '[' &&ypeCh != 'I') {

1545 
	`LOGE
("non-int…rimitives‚ot implemented\n");

1546 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;",

1548 
	`GOTO_exû±iÚThrown
();

1551 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
¬¿yCÏss
, 
v¤c1
, 
ALLOC_DONT_TRACK
);

1552 ià(
ÃwA¼ay
 =ğ
NULL
)

1553 
	`GOTO_exû±iÚThrown
();

1558 
cÚ‹Ás
 = (
u4
*è
ÃwA¼ay
->contents;

1559 ià(
m‘hodC®lRªge
) {

1560 
i
 = 0; i < 
v¤c1
; i++)

1561 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

1563 
	`as£¹
(
v¤c1
 <= 5);

1564 ià(
v¤c1
 == 5) {

1565 
cÚ‹Ás
[4] = 
	`GET_REGISTER
(
¬g5
);

1566 
v¤c1
--;

1568 
i
 = 0; i < 
v¤c1
; i++) {

1569 
cÚ‹Ás
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

1570 
vd¡
 >>= 4;

1574 
»tv®
.
l
 = 
ÃwA¼ay
;

1576 
	`SET_RETURN_TAINT
(
TAINT_CLEAR
);

1578 
	}
}

1579 
FINISH
(3);

1580 
GOTO_TARGET_END


1583 
	$GOTO_TARGET
(
švokeVœtu®
, 
boŞ
 
m‘hodC®lRªge
)

1585 
M‘hod
* 
ba£M‘hod
;

1586 
Objeù
* 
thisPŒ
;

1588 
	`EXPORT_PC
();

1590 
v¤c1
 = 
	`INST_AA
(
š¡
);

1591 
»f
 = 
	`FETCH
(1);

1592 
vd¡
 = 
	`FETCH
(2);

1598 ià(
m‘hodC®lRªge
) {

1599 
	`as£¹
(
v¤c1
 > 0);

1600 
	`ILOGV
("|invoke-virtual-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1601 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1602 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1604 
	`as£¹
((
v¤c1
>>4) > 0);

1605 
	`ILOGV
("|invoke-virtual‡rgs=%d @0x%04x {regs=0x%04x %x}",

1606 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1607 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1610 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1611 
	`GOTO_exû±iÚThrown
();

1617 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1618 ià(
ba£M‘hod
 =ğ
NULL
) {

1619 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1620 ià(
ba£M‘hod
 =ğ
NULL
) {

1621 
	`ILOGV
("+ unknown method or‡ccess denied\n");

1622 
	`GOTO_exû±iÚThrown
();

1630 
	`as£¹
(
ba£M‘hod
->
m‘hodIndex
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

1631 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1634 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1644 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1646 
	`GOTO_exû±iÚThrown
();

1649 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1650 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1653 
	`LOGVV
("+++ base=%s.%s virtual[%d]=%s.%s\n",

1654 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1655 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1656 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1657 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1660 ià(
v¤c1
 !ğ
m‘hodToC®l
->
šsSize
) {

1661 
	`LOGW
("WRONG METHOD: base=%s.%s virtual[%d]=%s.%s\n",

1662 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1663 (
u4
è
ba£M‘hod
->
m‘hodIndex
,

1664 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1667 
	`dvmDumpAÎCÏs£s
(0);

1671 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1672 
	}
}

1673 
GOTO_TARGET_END


1675 
	$GOTO_TARGET
(
švokeSu³r
, 
boŞ
 
m‘hodC®lRªge
)

1677 
M‘hod
* 
ba£M‘hod
;

1678 
u2
 
thisReg
;

1680 
	`EXPORT_PC
();

1682 
v¤c1
 = 
	`INST_AA
(
š¡
);

1683 
»f
 = 
	`FETCH
(1);

1684 
vd¡
 = 
	`FETCH
(2);

1686 ià(
m‘hodC®lRªge
) {

1687 
	`ILOGV
("|invoke-super-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1688 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1689 
thisReg
 = 
vd¡
;

1691 
	`ILOGV
("|invoke-super‡rgs=%d @0x%04x {regs=0x%04x %x}",

1692 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1693 
thisReg
 = 
vd¡
 & 0x0f;

1696 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1697 
	`GOTO_exû±iÚThrown
();

1706 
ba£M‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1707 ià(
ba£M‘hod
 =ğ
NULL
) {

1708 
ba£M‘hod
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,
METHOD_VIRTUAL
);

1709 ià(
ba£M‘hod
 =ğ
NULL
) {

1710 
	`ILOGV
("+ unknown method or‡ccess denied\n");

1711 
	`GOTO_exû±iÚThrown
();

1724 ià(
ba£M‘hod
->
m‘hodIndex
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1729 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchMethodError;",

1730 
ba£M‘hod
->
Çme
);

1731 
	`GOTO_exû±iÚThrown
();

1733 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
ba£M‘hod
->
m‘hodIndex
];

1735 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1736 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1738 
	`GOTO_exû±iÚThrown
();

1741 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1742 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1744 
	`LOGVV
("+++ base=%s.%s super-virtual=%s.%s\n",

1745 
ba£M‘hod
->
şazz
->
desütÜ
, ba£M‘hod->
Çme
,

1746 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1747 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1749 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1750 
	}
}

1751 
GOTO_TARGET_END


1753 
	$GOTO_TARGET
(
švokeIÁ”çû
, 
boŞ
 
m‘hodC®lRªge
)

1755 
Objeù
* 
thisPŒ
;

1756 
CÏssObjeù
* 
thisCÏss
;

1758 
	`EXPORT_PC
();

1760 
v¤c1
 = 
	`INST_AA
(
š¡
);

1761 
»f
 = 
	`FETCH
(1);

1762 
vd¡
 = 
	`FETCH
(2);

1768 ià(
m‘hodC®lRªge
) {

1769 
	`as£¹
(
v¤c1
 > 0);

1770 
	`ILOGV
("|invoke-interface-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1771 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1772 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1774 
	`as£¹
((
v¤c1
>>4) > 0);

1775 
	`ILOGV
("|invoke-interface‡rgs=%d @0x%04x {regs=0x%04x %x}",

1776 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1777 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1779 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1780 
	`GOTO_exû±iÚThrown
();

1782 
thisCÏss
 = 
thisPŒ
->
şazz
;

1788 
m‘hodToC®l
 = 
	`dvmFšdIÁ”çûM‘hodInCache
(
thisCÏss
, 
»f
, 
curM‘hod
,

1789 
m‘hodCÏssDex
);

1790 ià(
m‘hodToC®l
 =ğ
NULL
) {

1791 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1792 
	`GOTO_exû±iÚThrown
();

1795 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1796 
	}
}

1797 
GOTO_TARGET_END


1799 
	$GOTO_TARGET
(
švokeDœeù
, 
boŞ
 
m‘hodC®lRªge
)

1801 
u2
 
thisReg
;

1803 
v¤c1
 = 
	`INST_AA
(
š¡
);

1804 
»f
 = 
	`FETCH
(1);

1805 
vd¡
 = 
	`FETCH
(2);

1807 
	`EXPORT_PC
();

1809 ià(
m‘hodC®lRªge
) {

1810 
	`ILOGV
("|invoke-direct-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1811 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1812 
thisReg
 = 
vd¡
;

1814 
	`ILOGV
("|invoke-direct‡rgs=%d @0x%04x {regs=0x%04x %x}",

1815 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1816 
thisReg
 = 
vd¡
 & 0x0f;

1818 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1819 
	`GOTO_exû±iÚThrown
();

1821 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1822 ià(
m‘hodToC®l
 =ğ
NULL
) {

1823 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
,

1824 
METHOD_DIRECT
);

1825 ià(
m‘hodToC®l
 =ğ
NULL
) {

1826 
	`ILOGV
("+ unknown direct method\n");

1827 
	`GOTO_exû±iÚThrown
();

1830 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1831 
	}
}

1832 
GOTO_TARGET_END


1834 
	$GOTO_TARGET
(
švokeStic
, 
boŞ
 
m‘hodC®lRªge
)

1835 
v¤c1
 = 
	`INST_AA
(
š¡
);

1836 
»f
 = 
	`FETCH
(1);

1837 
vd¡
 = 
	`FETCH
(2);

1839 
	`EXPORT_PC
();

1841 ià(
m‘hodC®lRªge
)

1842 
	`ILOGV
("|invoke-static-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1843 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1845 
	`ILOGV
("|invoke-static‡rgs=%d @0x%04x {regs=0x%04x %x}",

1846 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1848 
m‘hodToC®l
 = 
	`dvmDexG‘ResŞvedM‘hod
(
m‘hodCÏssDex
, 
»f
);

1849 ià(
m‘hodToC®l
 =ğ
NULL
) {

1850 
m‘hodToC®l
 = 
	`dvmResŞveM‘hod
(
curM‘hod
->
şazz
, 
»f
, 
METHOD_STATIC
);

1851 ià(
m‘hodToC®l
 =ğ
NULL
) {

1852 
	`ILOGV
("+ unknown method\n");

1853 
	`GOTO_exû±iÚThrown
();

1855 
	}
}

1856 
GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1857 
GOTO_TARGET_END


1859 
	$GOTO_TARGET
(
švokeVœtu®Quick
, 
boŞ
 
m‘hodC®lRªge
)

1861 
Objeù
* 
thisPŒ
;

1863 
	`EXPORT_PC
();

1865 
v¤c1
 = 
	`INST_AA
(
š¡
);

1866 
»f
 = 
	`FETCH
(1);

1867 
vd¡
 = 
	`FETCH
(2);

1873 ià(
m‘hodC®lRªge
) {

1874 
	`as£¹
(
v¤c1
 > 0);

1875 
	`ILOGV
("|invoke-virtual-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1876 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1877 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
);

1879 
	`as£¹
((
v¤c1
>>4) > 0);

1880 
	`ILOGV
("|invoke-virtual-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1881 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1882 
thisPŒ
 = (
Objeù
*è
	`GET_REGISTER
(
vd¡
 & 0x0f);

1885 ià(!
	`checkFÜNuÎ
(
thisPŒ
))

1886 
	`GOTO_exû±iÚThrown
();

1892 
	`as£¹
(
»f
 < 
thisPŒ
->
şazz
->
vbËCouÁ
);

1893 
m‘hodToC®l
 = 
thisPŒ
->
şazz
->
vbË
[
»f
];

1896 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1897 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1899 
	`GOTO_exû±iÚThrown
();

1902 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1903 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1906 
	`LOGVV
("+++ virtual[%d]=%s.%s\n",

1907 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1908 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1910 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1911 
	}
}

1912 
GOTO_TARGET_END


1914 
	$GOTO_TARGET
(
švokeSu³rQuick
, 
boŞ
 
m‘hodC®lRªge
)

1916 
u2
 
thisReg
;

1918 
	`EXPORT_PC
();

1920 
v¤c1
 = 
	`INST_AA
(
š¡
);

1921 
»f
 = 
	`FETCH
(1);

1922 
vd¡
 = 
	`FETCH
(2);

1924 ià(
m‘hodC®lRªge
) {

1925 
	`ILOGV
("|invoke-super-quick-range‡rgs=%d @0x%04x {regs=v%d-v%d}",

1926 
v¤c1
, 
»f
, 
vd¡
, vdst+vsrc1-1);

1927 
thisReg
 = 
vd¡
;

1929 
	`ILOGV
("|invoke-super-quick‡rgs=%d @0x%04x {regs=0x%04x %x}",

1930 
v¤c1
 >> 4, 
»f
, 
vd¡
, vsrc1 & 0x0f);

1931 
thisReg
 = 
vd¡
 & 0x0f;

1934 ià(!
	`checkFÜNuÎ
((
Objeù
*è
	`GET_REGISTER
(
thisReg
)))

1935 
	`GOTO_exû±iÚThrown
();

1938 ià(
»f
 >ğ
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
) {

1939 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
NULL
);

1940 
	`GOTO_exû±iÚThrown
();

1943 
	`as£¹
(
»f
 < 
curM‘hod
->
şazz
->
su³r
->
vbËCouÁ
);

1955 
m‘hodToC®l
 = 
curM‘hod
->
şazz
->
su³r
->
vbË
[
»f
];

1958 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
)) {

1959 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

1961 
	`GOTO_exû±iÚThrown
();

1964 
	`as£¹
(!
	`dvmIsAb¡¿ùM‘hod
(
m‘hodToC®l
) ||

1965 
m‘hodToC®l
->
ÇtiveFunc
 !ğ
NULL
);

1967 
	`LOGVV
("+++ super-virtual[%d]=%s.%s\n",

1968 
»f
, 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
);

1969 
	`as£¹
(
m‘hodToC®l
 !ğ
NULL
);

1971 
	`GOTO_švokeM‘hod
(
m‘hodC®lRªge
, 
m‘hodToC®l
, 
v¤c1
, 
vd¡
);

1972 
	}
}

1973 
GOTO_TARGET_END


1981 
	$GOTO_TARGET
(
»tuºFromM‘hod
)

1983 
SckSaveA»a
* 
§veA»a
;

1992 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryR‘uº
, 0);

1994 
	`ILOGV
(">„etval=0x%llx (leaving %s.%s %s)",

1995 
»tv®
.
j
, 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

1996 
curM‘hod
->
shÜty
);

1999 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
å
);

2001 #ifdeà
EASY_GDB


2002 
debugSaveA»a
 = 
§veA»a
;

2004 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_PROFILER
)

2005 
	`TRACE_METHOD_EXIT
(
£lf
, 
curM‘hod
);

2009 
å
 = 
§veA»a
->
´evF¿me
;

2010 
	`as£¹
(
å
 !ğ
NULL
);

2011 ià(
	`dvmIsB»akF¿me
(
å
)) {

2013 
	`LOGVV
("+++„eturned into break frame\n");

2014 
	`GOTO_ba
();

2018 
£lf
->
curF¿me
 = 
å
;

2019 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2021 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2022 
pc
 = 
§veA»a
->
§vedPc
;

2023 
	`ILOGD
("> (»tuºØ%s.% %s)", 
curM‘hod
->
şazz
->
desütÜ
,

2024 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2028 ià(
Œue


2031 
	`FINISH
(3);

2035 
	`as£¹
(
çl£
);

2037 
	}
}

2038 
GOTO_TARGET_END


2047 
	$GOTO_TARGET
(
exû±iÚThrown
)

2049 
Objeù
* 
exû±iÚ
;

2050 
ÿtchR–Pc
;

2056 
	`PERIODIC_CHECKS
(
kIÁ”pEÁryThrow
, 0);

2064 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

2065 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

2066 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2067 
	`dvmCË¬Exû±iÚ
(
£lf
);

2069 
	`LOGV
("Handlingƒxception %s‡t %s:%d\n",

2070 
exû±iÚ
->
şazz
->
desütÜ
, 
curM‘hod
->
Çme
,

2071 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

2073 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
	`defšed
(
WITH_DEBUGGER
)

2088 ià(
gDvm
.
debugg”Aùive
) {

2089 * 
ÿtchF¿me
;

2090 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

2091 
exû±iÚ
, 
Œue
, &
ÿtchF¿me
);

2092 
	`dvmDbgPo¡Exû±iÚ
(
å
, 
pc
 - 
curM‘hod
->
š¢s
, 
ÿtchF¿me
,

2093 
ÿtchR–Pc
, 
exû±iÚ
);

2109 
ÿtchR–Pc
 = 
	`dvmFšdC©chBlock
(
£lf
, 
pc
 - 
curM‘hod
->
š¢s
,

2110 
exû±iÚ
, 
çl£
, (*)&
å
);

2123 ià(
£lf
->
¡ackOv”æowed
)

2124 
	`dvmCËªupSckOv”æow
(
£lf
);

2126 ià(
ÿtchR–Pc
 < 0) {

2128 #ià
DVM_SHOW_EXCEPTION
 >= 2

2129 
	`LOGD
("Exception %s from %s:%d‚ot caught†ocally\n",

2130 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

2131 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
));

2133 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

2134 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2135 
	`GOTO_ba
();

2138 #ià
DVM_SHOW_EXCEPTION
 >= 3

2140 cÚ¡ 
M‘hod
* 
ÿtchM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2141 
	`LOGD
("Exception %shrown from %s:%do %s:%d\n",

2142 
exû±iÚ
->
şazz
->
desütÜ
, 
	`dvmG‘M‘hodSourûFe
(
curM‘hod
),

2143 
	`dvmLšeNumFromPC
(
curM‘hod
, 
pc
 - curM‘hod->
š¢s
),

2144 
	`dvmG‘M‘hodSourûFe
(
ÿtchM‘hod
),

2145 
	`dvmLšeNumFromPC
(
ÿtchM‘hod
, 
ÿtchR–Pc
));

2154 
curM‘hod
 = 
	`SAVEAREA_FROM_FP
(
å
)->
m‘hod
;

2156 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2157 
pc
 = 
curM‘hod
->
š¢s
 + 
ÿtchR–Pc
;

2158 
	`ILOGV
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2159 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2160 
	`DUMP_REGS
(
curM‘hod
, 
å
, 
çl£
);

2174 ià(
	`INST_INST
(
	`FETCH
(0)è=ğ
OP_MOVE_EXCEPTION
)

2175 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

2177 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

2178 
	`FINISH
(0);

2179 
	}
}

2180 
GOTO_TARGET_END


2200 
	$GOTO_TARGET
(
švokeM‘hod
, 
boŞ
 
m‘hodC®lRªge
, cÚ¡ 
M‘hod
* 
_m‘hodToC®l
,

2201 
u2
 
couÁ
, u2 
»gs
)

2203 
	`STUB_HACK
(
v¤c1
 = 
couÁ
; 
vd¡
 = 
»gs
; 
m‘hodToC®l
 = 
_m‘hodToC®l
;);

2210 
u4
* 
outs
;

2211 
i
;

2212 #ifdeà
WITH_TAINT_TRACKING


2213 
boŞ
 
ÇtiveT¬g‘
 = 
	`dvmIsN©iveM‘hod
(
m‘hodToC®l
);

2219 ià(
m‘hodC®lRªge
) {

2222 
	`as£¹
(
v¤c1
 <ğ
curM‘hod
->
outsSize
);

2223 
	`as£¹
(
v¤c1
 =ğ
m‘hodToC®l
->
šsSize
);

2224 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
v¤c1
);

2225 #ifdeà
WITH_TAINT_TRACKING


2226 ià(
ÇtiveT¬g‘
) {

2227 
i
 = 0; i < 
v¤c1
; i++) {

2228 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

2231 
outs
[
v¤c1
] = 
TAINT_CLEAR
;

2233 
i
 = 0; i < 
v¤c1
; i++) {

2234 
outs
[
v¤c1
+1+
i
] = 
	`GET_REGISTER_TAINT
(
vd¡
+i);

2237 
¦Ù
 = 0;

2238 
i
 = 0; i < 
v¤c1
; i++) {

2239 
¦Ù
 = 
i
 << 1;

2240 
outs
[
¦Ù
] = 
	`GET_REGISTER
(
vd¡
+
i
);

2241 
outs
[
¦Ù
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
+
i
);

2244 
outs
[
v¤c1
<<1] = 
TAINT_CLEAR
;

2247 
i
 = 0; i < 
v¤c1
; i++)

2248 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
+i);

2251 
u4
 
couÁ
 = 
v¤c1
 >> 4;

2253 
	`as£¹
(
couÁ
 <ğ
curM‘hod
->
outsSize
);

2254 
	`as£¹
(
couÁ
 =ğ
m‘hodToC®l
->
šsSize
);

2255 
	`as£¹
(
couÁ
 <= 5);

2257 
outs
 = 
	`OUTS_FROM_FP
(
å
, 
couÁ
);

2259 ià(
couÁ
 == 5) {

2260 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2261 
couÁ
--;

2263 
i
 = 0; i < (è
couÁ
; i++) {

2264 
outs
[
i
] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2265 
vd¡
 >>= 4;

2268 
	`as£¹
((
vd¡
 >> 16) == 0);

2269 #ifdeà
WITH_TAINT_TRACKING


2270 ià(
ÇtiveT¬g‘
) {

2271 
couÁ
) {

2273 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2274 
outs
[
couÁ
+5] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

2276 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2277 
outs
[
couÁ
+4] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

2279 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2280 
outs
[
couÁ
+3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

2282 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2283 
outs
[
couÁ
+2] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

2285 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2286 
outs
[
couÁ
+1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

2291 
outs
[
couÁ
] = 
TAINT_CLEAR
;

2293 
couÁ
) {

2295 
outs
[8] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2296 
outs
[9] = 
	`GET_REGISTER_TAINT
(
v¤c1
 & 0x0f);

2298 
outs
[6] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2299 
outs
[7] = 
	`GET_REGISTER_TAINT
(
vd¡
 >> 12);

2301 
outs
[4] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2302 
outs
[5] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x0f00) >> 8);

2304 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2305 
outs
[3] = 
	`GET_REGISTER_TAINT
((
vd¡
 & 0x00f0) >> 4);

2307 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2308 
outs
[1] = 
	`GET_REGISTER_TAINT
(
vd¡
 & 0x0f);

2313 
outs
[
couÁ
<<1] = 
TAINT_CLEAR
;

2318 
couÁ
) {

2320 
outs
[4] = 
	`GET_REGISTER
(
v¤c1
 & 0x0f);

2322 
outs
[3] = 
	`GET_REGISTER
(
vd¡
 >> 12);

2324 
outs
[2] = 
	`GET_REGISTER
((
vd¡
 & 0x0f00) >> 8);

2326 
outs
[1] = 
	`GET_REGISTER
((
vd¡
 & 0x00f0) >> 4);

2328 
outs
[0] = 
	`GET_REGISTER
(
vd¡
 & 0x0f);

2335 
	}
}

2346 
SckSaveA»a
* 
	gÃwSaveA»a
;

2347 
u4
* 
	gÃwFp
;

2349 
ILOGV
("> %s%s.%s %s",

2350 
dvmIsN©iveM‘hod
(
m‘hodToC®l
) ? "(NATIVE) " : "",

2351 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2352 
m‘hodToC®l
->
shÜty
);

2354 #ifdeà
WITH_TAINT_TRACKING


2355 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
) -

2356 ((
m‘hodToC®l
->
»gi¡”sSize
 << 1) + 1);

2358 
	gÃwFp
 = (
u4
*è
SAVEAREA_FROM_FP
(
å
è- 
m‘hodToC®l
->
»gi¡”sSize
;

2360 
	gÃwSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2363 ià(
	gŒue
) {

2364 
u1
* 
	gbÙtom
;

2365 #ifdeà
WITH_TAINT_TRACKING


2366 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 -

2367 (
m‘hodToC®l
->
outsSize
 * (
u4
) + 4);

2369 
	gbÙtom
 = (
u1
*è
ÃwSaveA»a
 - 
m‘hodToC®l
->
outsSize
 * (
u4
);

2371 ià(
	gbÙtom
 < 
	g£lf
->
	gš‹½SckEnd
) {

2373 
LOGV
("Stack overflow on method call (start=%pƒnd=%p‚ewBot=%p size=%d '%s')\n",

2374 
£lf
->
š‹½SckS¹
, s–f->
š‹½SckEnd
, 
bÙtom
,

2375 
£lf
->
š‹½SckSize
, 
m‘hodToC®l
->
Çme
);

2376 
dvmHªdËSckOv”æow
(
£lf
);

2377 
as£¹
(
dvmCheckExû±iÚ
(
£lf
));

2378 
GOTO_exû±iÚThrown
();

2384 #ifdeà
LOG_INSTR


2385 ià(
	gm‘hodToC®l
->
	g»gi¡”sSize
 > m‘hodToC®l->
	gšsSize
) {

2392 #ifdeà
WITH_TAINT_TRACKING


2395 
mem£t
(
ÃwFp
, 0xcc,

2396 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 8);

2398 
mem£t
(
ÃwFp
, 0xcc,

2399 (
m‘hodToC®l
->
»gi¡”sSize
 - m‘hodToC®l->
šsSize
) * 4);

2404 #ifdeà
EASY_GDB


2405 
	gÃwSaveA»a
->
	g´evSave
 = 
SAVEAREA_FROM_FP
(
å
);

2407 
	gÃwSaveA»a
->
	g´evF¿me
 = 
å
;

2408 
	gÃwSaveA»a
->
	g§vedPc
 = 
pc
;

2409 #ià
defšed
(
WITH_JIT
)

2410 
	gÃwSaveA»a
->
	g»tuºAddr
 = 0;

2412 
	gÃwSaveA»a
->
	gm‘hod
 = 
m‘hodToC®l
;

2414 ià(!
dvmIsN©iveM‘hod
(
m‘hodToC®l
)) {

2419 
	gcurM‘hod
 = 
m‘hodToC®l
;

2420 
	gm‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

2421 
	gpc
 = 
m‘hodToC®l
->
š¢s
;

2422 
	gå
 = 
£lf
->
curF¿me
 = 
ÃwFp
;

2423 #ifdeà
EASY_GDB


2424 
	gdebugSaveA»a
 = 
SAVEAREA_FROM_FP
(
ÃwFp
);

2426 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


2427 
	gdebugIsM‘hodEÁry
 = 
Œue
;

2429 
ILOGD
(">…ø<-- %s.% %s", 
curM‘hod
->
şazz
->
desütÜ
,

2430 
curM‘hod
->
Çme
, curM‘hod->
shÜty
);

2431 
DUMP_REGS
(
curM‘hod
, 
å
, 
Œue
);

2432 
FINISH
(0);

2435 #ifdeà
USE_INDIRECT_REF


2436 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
£gm’tS‹
.
®l
;

2438 
	gÃwSaveA»a
->
	gxŒa
.
	gloÿlRefCook›
 = 
£lf
->
jniLoÿlRefTabË
.
ÃxtEÁry
;

2441 
	g£lf
->
	gcurF¿me
 = 
ÃwFp
;

2443 
DUMP_REGS
(
m‘hodToC®l
, 
ÃwFp
, 
Œue
);

2445 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

2446 ià(
	ggDvm
.
	gdebugg”Aùive
) {

2447 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

2448 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_ENTRY
);

2451 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

2452 
TRACE_METHOD_ENTER
(
£lf
, 
m‘hodToC®l
);

2455 
ILOGD
(">‚©iv<-- %s.% %s", 
m‘hodToC®l
->
şazz
->
desütÜ
,

2456 
m‘hodToC®l
->
Çme
, m‘hodToC®l->
shÜty
);

2463 (*
	gm‘hodToC®l
->
	gÇtiveFunc
)(
	gÃwFp
, &
	g»tv®
, m‘hodToC®l, 
	g£lf
);

2464 #ifdeà
WITH_TAINT_TRACKING


2468 
u4
 
	gcouÁ
 = (
m‘hodC®lRªge
è? 
v¤c1
 : vsrc1 >> 4;

2469 
u4
* 
	gouts
 = 
OUTS_FROM_FP
(
å
, 
couÁ
);

2470 
SET_RETURN_TAINT
(
outs
[
couÁ
]);

2474 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_DEBUGGER
)

2475 ià(
	ggDvm
.
	gdebugg”Aùive
) {

2476 
dvmDbgPo¡LoÿtiÚEv’t
(
m‘hodToC®l
, -1,

2477 
dvmG‘ThisPŒ
(
curM‘hod
, 
å
), 
DBG_METHOD_EXIT
);

2480 #ià(
INTERP_TYPE
 =ğ
INTERP_DBG
è&& 
defšed
(
WITH_PROFILER
)

2481 
TRACE_METHOD_EXIT
(
£lf
, 
m‘hodToC®l
);

2485 
dvmPİJniLoÿls
(
£lf
, 
ÃwSaveA»a
);

2486 
	g£lf
->
	gcurF¿me
 = 
å
;

2493 ià(
dvmCheckExû±iÚ
(
£lf
)) {

2494 
LOGV
("Exceptionhrown by/below‚ative code\n");

2495 
GOTO_exû±iÚThrown
();

2498 
ILOGD
(">„‘v®=0x%Îx (Ëavšg‚©ive)", 
»tv®
.
j
);

2499 
ILOGD
("> (return from‚ative %s.%so %s.%s %s)",

2500 
m‘hodToC®l
->
şazz
->
desütÜ
, m‘hodToC®l->
Çme
,

2501 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

2502 
curM‘hod
->
shÜty
);

2505 ià(
	gŒue


2508 
FINISH
(3);

2512 
as£¹
(
çl£
);

2516 
as£¹
(
çl£
);

2517 
	gGOTO_TARGET_END


2522 #undeà
»tv®


2523 #undeà
pc


2524 #undeà
å


2525 #undeà
curM‘hod


2526 #undeà
m‘hodCÏssDex


2527 #undeà
£lf


2528 #undeà
debugT¿ckedRefS¹


2530 #ifdeà
WITH_TAINT_TRACKING


2531 #undeà
¹ašt


	@mterp/portable/debug.c

9 
boŞ
 
	$isIÁ”e¡šgAddr
(cÚ¡ 
u2
* 
pc
)

11 cÚ¡ 
u2
** 
±r
 = 
gDvm
.
debugB»akAddr
;

12 
i
;

14 
i
 = 0; i < 
MAX_BREAKPOINTS
; i++, 
±r
++) {

15 ià(*
±r
 =ğ
pc
) {

16 
	`LOGV
("BKP: h™ oÀ%p\n", 
pc
);

17  
Œue
;

20  
çl£
;

21 
	}
}

47 
	$upd©eDebugg”
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
,

48 
boŞ
 
m‘hodEÁry
, 
Th»ad
* 
£lf
)

50 
ev’tFÏgs
 = 0;

59 
	`EXPORT_PC
();

61 ià(
m‘hodEÁry
)

62 
ev’tFÏgs
 |ğ
DBG_METHOD_ENTRY
;

75 #ifdeà
WITH_DEBUGGER


76 ià(
m‘hod
->
debugB»akpoštCouÁ
 > 0 && 
	`isIÁ”e¡šgAddr
(
pc
)) {

77 
ev’tFÏgs
 |ğ
DBG_BREAKPOINT
;

85 cÚ¡ 
S‹pCÚŒŞ
* 
pCŒl
 = &
gDvm
.
¡•CÚŒŞ
;

86 ià(
pCŒl
->
aùive
 &&…CŒl->
th»ad
 =ğ
£lf
) {

87 
lše
, 
äameD•th
;

88 
boŞ
 
doStİ
 = 
çl£
;

89 cÚ¡ * 
msg
 = 
NULL
;

91 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
));

93 ià(
pCŒl
->
d•th
 =ğ
SD_INTO
) {

99 ià(
pCŒl
->
m‘hod
 != method) {

100 
doStİ
 = 
Œue
;

101 
msg
 = "new method";

102 } ià(
pCŒl
->
size
 =ğ
SS_MIN
) {

103 
doStİ
 = 
Œue
;

104 
msg
 = "new instruction";

105 } ià(!
	`dvmAdd»ssS‘G‘
(

106 
pCŒl
->
pAdd»ssS‘
, 
pc
 - 
m‘hod
->
š¢s
)) {

107 
doStİ
 = 
Œue
;

108 
msg
 = "new†ine";

110 } ià(
pCŒl
->
d•th
 =ğ
SD_OVER
) {

118 
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
£lf
, 
å
);

119 ià(
äameD•th
 < 
pCŒl
->frameDepth) {

121 
doStİ
 = 
Œue
;

122 
msg
 = "method…op";

123 } ià(
äameD•th
 =ğ
pCŒl
->frameDepth) {

125 ià(
pCŒl
->
size
 =ğ
SS_MIN
) {

126 
doStİ
 = 
Œue
;

127 
msg
 = "new instruction";

128 } ià(!
	`dvmAdd»ssS‘G‘
(
pCŒl
->
pAdd»ssS‘
,

129 
pc
 - 
m‘hod
->
š¢s
)) {

130 
doStİ
 = 
Œue
;

131 
msg
 = "new†ine";

135 
	`as£¹
(
pCŒl
->
d•th
 =ğ
SD_OUT
);

144 
äameD•th
 = 
	`dvmCompu‹VagueF¿meD•th
(
£lf
, 
å
);

145 ià(
äameD•th
 < 
pCŒl
->frameDepth) {

146 
doStİ
 = 
Œue
;

147 
msg
 = "method…op";

151 ià(
doStİ
) {

152 
	`LOGV
("#####S %s\n", 
msg
);

153 
ev’tFÏgs
 |ğ
DBG_SINGLE_STEP
;

168 
u2
 
š¡
 = 
	`INST_INST
(
	`FETCH
(0));

169 ià(
š¡
 =ğ
OP_RETURN_VOID
 || in¡ =ğ
OP_RETURN
 || in¡ =ğ
OP_RETURN_WIDE
 ||

170 
š¡
 =ğ
OP_RETURN_OBJECT
)

172 
ev’tFÏgs
 |ğ
DBG_METHOD_EXIT
;

179 ià(
ev’tFÏgs
 != 0) {

180 
Objeù
* 
thisPŒ
 = 
	`dvmG‘ThisPŒ
(
m‘hod
, 
å
);

181 ià(
thisPŒ
 !ğ
NULL
 && !
	`dvmIsV®idObjeù
(thisPtr)) {

187 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

188 
	`LOGE
("HEY: inv®id 'this'…Œ %°(%s.% %s)\n", 
thisPŒ
,

189 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

190 
	`ä“
(
desc
);

191 
	`dvmAbÜt
();

193 
	`dvmDbgPo¡LoÿtiÚEv’t
(
m‘hod
, 
pc
 - m‘hod->
š¢s
, 
thisPŒ
,

194 
ev’tFÏgs
);

196 
	}
}

206 
	$checkDebugAndProf
(cÚ¡ 
u2
* 
pc
, cÚ¡ 
u4
* 
å
, 
Th»ad
* 
£lf
,

207 cÚ¡ 
M‘hod
* 
m‘hod
, 
boŞ
* 
pIsM‘hodEÁry
)

210 
	`as£¹
(
pc
 >ğ
m‘hod
->
š¢s
 &&…c <

211 
m‘hod
->
š¢s
 + 
	`dvmG‘M‘hodIn¢sSize
(method));

218 ià(*
pIsM‘hodEÁry
) {

219 cÚ¡ * 
cd
 = "Landroid/test/Arithmetic;";

220 cÚ¡ * 
mn
 = "shiftTest2";

221 cÚ¡ * 
sg
 = "()V";

224 
	`¡rcmp
(
m‘hod
->
şazz
->
desütÜ
, 
cd
) == 0 &&

225 
	`¡rcmp
(
m‘hod
->
Çme
, 
mn
) == 0 &&

226 
	`¡rcmp
(
m‘hod
->
shÜty
, 
sg
) == 0)

228 
	`LOGW
("Reached %s.%s,ƒnabling verbose mode\n",

229 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

230 
	`ªdroid_£tMšPriÜ™y
(
LOG_TAG
"i", 
ANDROID_LOG_VERBOSE
);

231 
	`dumpRegs
(
m‘hod
, 
å
, 
Œue
);

234 ià(!
gDvm
.
debugg”Aùive
)

235 *
pIsM‘hodEÁry
 = 
çl£
;

246 #ifdeà
WITH_PROFILER


248 
boŞ
 
isEÁry
 = *
pIsM‘hodEÁry
;

249 ià(
isEÁry
) {

250 *
pIsM‘hodEÁry
 = 
çl£
;

251 
	`TRACE_METHOD_ENTER
(
£lf
, 
m‘hod
);

253 ià(
gDvm
.
debugg”Aùive
) {

254 
	`upd©eDebugg”
(
m‘hod
, 
pc
, 
å
, 
isEÁry
, 
£lf
);

256 ià(
gDvm
.
š¡ruùiÚCouÁEÇbËCouÁ
 != 0) {

264 
š¡
 = *
pc
 & 0xff;

265 
gDvm
.
execu‹dIn¡rCouÁs
[
š¡
]++;

269 ià(
gDvm
.
debugg”Aùive
) {

270 
boŞ
 
isEÁry
 = *
pIsM‘hodEÁry
;

271 
	`upd©eDebugg”
(
m‘hod
, 
pc
, 
å
, 
isEÁry
, 
£lf
);

272 ià(
isEÁry
)

273 *
pIsM‘hodEÁry
 = 
çl£
;

276 
	}
}

	@mterp/portable/enddefs.c

3 #iâdeà
THREADED_INTERP


8 
	gba
:

9 
ILOGD
("|-- Leaving interpreter†oop");

11 
	gš‹½S‹
->
	g»tv®
 = 
»tv®
;

12 #ifdeà
WITH_TAINT_TRACKING


13 
	gš‹½S‹
->
	g¹ašt
 = 
¹ašt
;

15  
	gçl£
;

17 
	gba_sw™ch
:

25 #ià
defšed
(
WITH_PROFILER
è|| defšed(
WITH_DEBUGGER
)

26 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


27 
š‹½S‹
->
debugIsM‘hodEÁry
 = debugIsMethodEntry;

29 
	gš‹½S‹
->
	gdebugIsM‘hodEÁry
 = 
çl£
;

34 
	gš‹½S‹
->
	gm‘hod
 = 
curM‘hod
;

35 
	gš‹½S‹
->
	gpc
 = 
pc
;

36 
	gš‹½S‹
->
	gå
 = 
å
;

38 
	gš‹½S‹
->
	g»tv®
 = 
»tv®
;

39 #ifdeà
WITH_TAINT_TRACKING


40 
	gš‹½S‹
->
	g¹ašt
 = 
¹ašt
;

42 
	gš‹½S‹
->
	gÃxtMode
 =

43 (
INTERP_TYPE
 =ğ
INTERP_STD
è? 
INTERP_DBG
 : INTERP_STD;

44 
LOGVV
(" meth='%s.%s'…c=0x%x fp=%p\n",

45 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
,

46 
pc
 - 
curM‘hod
->
š¢s
, 
å
);

47  
	gŒue
;

	@mterp/portable/entry.c

6 
boŞ
 
	$INTERP_FUNC_NAME
(
Th»ad
* 
£lf
, 
IÁ”pS‹
* 
š‹½S‹
)

8 #ià
	`defšed
(
EASY_GDB
)

9 
SckSaveA»a
* 
debugSaveA»a
 = 
	`SAVEAREA_FROM_FP
(
£lf
->
curF¿me
);

11 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


12 
boŞ
 
debugIsM‘hodEÁry
 = 
š‹½S‹
->debugIsMethodEntry;

14 #ià
	`defšed
(
WITH_TRACKREF_CHECKS
)

15 
debugT¿ckedRefS¹
 = 
š‹½S‹
->debugTrackedRefStart;

17 
DvmDex
* 
m‘hodCÏssDex
;

18 
JV®ue
 
»tv®
;

19 #ifdeà
WITH_TAINT_TRACKING


20 
Tašt
 
¹ašt
;

24 cÚ¡ 
M‘hod
* 
curM‘hod
;

25 cÚ¡ 
u2
* 
pc
;

26 
u4
* 
å
;

27 
u2
 
š¡
;

29 
u2
 
»f
;

30 
u2
 
v¤c1
, 
v¤c2
, 
vd¡
;

32 cÚ¡ 
M‘hod
* 
m‘hodToC®l
;

33 
boŞ
 
m‘hodC®lRªge
;

36 #ià
	`defšed
(
THREADED_INTERP
)

38 
	`DEFINE_GOTO_TABLE
(
hªdËrTabË
);

41 #ià
	`defšed
(
WITH_JIT
)

43 
	`LOGD
("*DebugInterp -ƒntrypoint is %d,gt is 0x%x, %s\n",

44 
š‹½S‹
->
’ŒyPošt
,

45 
š‹½S‹
->
pc
,

46 
š‹½S‹
->
m‘hod
->
Çme
);

49 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


53 ià(
	`dvmJ™CheckT¿ûReque¡
(
£lf
,
š‹½S‹
)) {

54 
š‹½S‹
->
ÃxtMode
 = 
INTERP_STD
;

56  
Œue
;

62 
curM‘hod
 = 
š‹½S‹
->
m‘hod
;

63 
pc
 = 
š‹½S‹
->pc;

64 
å
 = 
š‹½S‹
->fp;

65 
»tv®
 = 
š‹½S‹
->retval;

66 #ifdeà
WITH_TAINT_TRACKING


67 
¹ašt
 = 
š‹½S‹
->rtaint;

70 
m‘hodCÏssDex
 = 
curM‘hod
->
şazz
->
pDvmDex
;

72 
	`LOGVV
("threadid=%d:ƒntry(%s) %s.%s…c=0x%x fp=%pƒp=%d\n",

73 
£lf
->
th»adId
, (
š‹½S‹
->
ÃxtMode
 =ğ
INTERP_STD
) ? "STD" : "DBG",

74 
curM‘hod
->
şazz
->
desütÜ
, curM‘hod->
Çme
, 
pc
 - curM‘hod->
š¢s
,

75 
å
, 
š‹½S‹
->
’ŒyPošt
);

80 
m‘hodToC®l
 = (cÚ¡ 
M‘hod
*) -1;

82 #ià
INTERP_TYPE
 =ğ
INTERP_DBG


83 ià(
debugIsM‘hodEÁry
) {

84 
	`ILOGD
("|-- Now iÁ”´‘šg %s.%s", 
curM‘hod
->
şazz
->
desütÜ
,

85 
curM‘hod
->
Çme
);

86 
	`DUMP_REGS
(
curM‘hod
, 
š‹½S‹
->
å
, 
çl£
);

90 
š‹½S‹
->
’ŒyPošt
) {

91 
kIÁ”pEÁryIn¡r
:

94 
kIÁ”pEÁryR‘uº
:

95 
»tuºFromM‘hod
;

96 
kIÁ”pEÁryThrow
:

97 
exû±iÚThrown
;

99 
	`dvmAbÜt
();

102 #ifdeà
THREADED_INTERP


103 
	`FINISH
(0);

106 
	`CHECK_DEBUG_AND_PROF
();

107 
	`CHECK_TRACKED_REFS
();

110 
š¡
 = 
	`FETCH
(0);

112 
	`INST_INST
(
š¡
)) {

	@mterp/portable/portdbg.c

1 
	#INTERP_FUNC_NAME
 
dvmIÁ”´‘Dbg


	)

2 
	#INTERP_TYPE
 
INTERP_DBG


	)

4 
	#CHECK_DEBUG_AND_PROF
() \

5 
	`checkDebugAndProf
(
pc
, 
å
, 
£lf
, 
curM‘hod
, &
debugIsM‘hodEÁry
)

	)

7 #ià
defšed
(
WITH_JIT
)

8 
	#CHECK_JIT
() \

9 ià(
	`dvmCheckJ™
(
pc
, 
£lf
, 
š‹½S‹
)è
	`GOTO_ba_sw™ch
()

	)

11 
	#CHECK_JIT
() \

12 (()0)

	)

	@mterp/portable/portstd.c

1 
	#INTERP_FUNC_NAME
 
dvmIÁ”´‘Std


	)

2 
	#INTERP_TYPE
 
INTERP_STD


	)

4 
	#CHECK_DEBUG_AND_PROF
(è(()0)

	)

6 
	#CHECK_JIT
(è(()0)

	)

	@mterp/portable/stubdefs.c

6 
	#GOTO_TARGET_DECL
(
_rg‘
, ...)

	)

8 
	#GOTO_TARGET
(
_rg‘
, ...è_rg‘:

	)

10 
	#GOTO_TARGET_END


	)

13 
	#STUB_HACK
(
x
)

	)

23 #ifdeà
THREADED_INTERP


24 
	#H
(
_İ
è&&
İ_
##
	)
_op

25 
	#HANDLE_OPCODE
(
_İ
è
İ_
##_İ:

	)

26 
	#FINISH
(
_off£t
) { \

27 
	`ADJUST_PC
(
_off£t
); \

28 
š¡
 = 
	`FETCH
(0); \

29 
	`CHECK_DEBUG_AND_PROF
(); \

30 
	`CHECK_TRACKED_REFS
(); \

31 
	`CHECK_JIT
(); \

32 *
hªdËrTabË
[
	`INST_INST
(
š¡
)]; \

33 }

	)

35 
	#HANDLE_OPCODE
(
_İ
è_İ:

	)

36 
	#FINISH
(
_off£t
è{ 
	`ADJUST_PC
(_off£t); ; }

	)

39 
	#OP_END


	)

41 #ià
defšed
(
WITH_TRACKREF_CHECKS
)

42 
	#CHECK_TRACKED_REFS
() \

43 
	`dvmIÁ”pCheckT¿ckedRefs
(
£lf
, 
curM‘hod
, 
debugT¿ckedRefS¹
)

	)

45 
	#CHECK_TRACKED_REFS
(è(()0)

	)

54 
	#GOTO_exû±iÚThrown
(è
exû±iÚThrown
;

	)

56 
	#GOTO_»tuºFromM‘hod
(è
»tuºFromM‘hod
;

	)

58 
	#GOTO_švoke
(
_rg‘
, 
_m‘hodC®lRªge
) \

60 
m‘hodC®lRªge
 = 
_m‘hodC®lRªge
; \

61 
_rg‘
; \

62 } 
çl£
)

	)

65 
	#GOTO_švokeM‘hod
(
_m‘hodC®lRªge
, 
_m‘hodToC®l
, 
_v¤c1
, 
_vd¡
è
švokeM‘hod
;

	)

67 
	#GOTO_ba
(è
ba
;

	)

68 
	#GOTO_ba_sw™ch
(è
ba_sw™ch
;

	)

76 
	#PERIODIC_CHECKS
(
_’ŒyPošt
, 
_pÿdj
) { \

77 ià(
	`dvmCheckSu¥’dQuick
(
£lf
)) { \

78 
	`EXPORT_PC
(); \

79 
	`dvmCheckSu¥’dP’dšg
(
£lf
); \

81 ià(
	`NEED_INTERP_SWITCH
(
INTERP_TYPE
)) { \

82 
	`ADJUST_PC
(
_pÿdj
); \

83 
š‹½S‹
->
’ŒyPošt
 = 
_’ŒyPošt
; \

84 
	`LOGVV
("threadid=%d: switcho %sƒp=%d‡dj=%d\n", \

85 
£lf
->
th»adId
, \

86 (
š‹½S‹
->
ÃxtMode
 =ğ
INTERP_STD
) ? "STD" : "DBG", \

87 (
_’ŒyPošt
), (
_pÿdj
)); \

88 
	`GOTO_ba_sw™ch
(); \

90 }

	)

	@native/InternalNative.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

28 
D®vikN©iveCÏss
 
	ggDvmN©iveM‘hodS‘
[] = {

29 { "Ljava/Ïng/Objeù;", 
dvm_java_Ïng_Objeù
, 0 },

30 { "Ljava/Ïng/CÏss;", 
dvm_java_Ïng_CÏss
, 0 },

31 { "Ljava/Ïng/RuÁime;", 
dvm_java_Ïng_RuÁime
, 0 },

32 { "Ljava/Ïng/SŒšg;", 
dvm_java_Ïng_SŒšg
, 0 },

33 { "Ljava/Ïng/Sy¡em;", 
dvm_java_Ïng_Sy¡em
, 0 },

34 { "Ljava/Ïng/Sy¡emPrİ”t›s;", 
dvm_java_Ïng_Sy¡emPrİ”t›s
, 0 },

35 { "Ljava/Ïng/ThrowabË;", 
dvm_java_Ïng_ThrowabË
, 0 },

36 { "Ljava/Ïng/VMCÏssLßd”;", 
dvm_java_Ïng_VMCÏssLßd”
, 0 },

37 { "Ljava/Ïng/VMTh»ad;", 
dvm_java_Ïng_VMTh»ad
, 0 },

39 
dvm_java_Ïng_»æeù_AcûssibËObjeù
, 0 },

40 { "Ljava/Ïng/»æeù/A¼ay;", 
dvm_java_Ïng_»æeù_A¼ay
, 0 },

42 
dvm_java_Ïng_»æeù_CÚ¡ruùÜ
, 0 },

43 { "Ljava/Ïng/»æeù/F›ld;", 
dvm_java_Ïng_»æeù_F›ld
, 0 },

44 { "Ljava/Ïng/»æeù/M‘hod;", 
dvm_java_Ïng_»æeù_M‘hod
, 0 },

45 { "Ljava/Ïng/»æeù/Proxy;", 
dvm_java_Ïng_»æeù_Proxy
, 0 },

47 
dvm_java_£cur™y_AcûssCÚŒŞËr
, 0 },

49 
dvm_java_ut_cÚcu¼’t_©omic_AtomicLÚg
, 0 },

51 
dvm_d®vik_sy¡em_Sam¶šgProf”
, 0 },

52 { "Ld®vik/sy¡em/VMDebug;", 
dvm_d®vik_sy¡em_VMDebug
, 0 },

53 { "Ld®vik/sy¡em/DexFe;", 
dvm_d®vik_sy¡em_DexFe
, 0 },

54 { "Ld®vik/sy¡em/VMRuÁime;", 
dvm_d®vik_sy¡em_VMRuÁime
, 0 },

55 { "Ld®vik/sy¡em/ZygÙe;", 
dvm_d®vik_sy¡em_ZygÙe
, 0 },

56 { "Ld®vik/sy¡em/VMSck;", 
dvm_d®vik_sy¡em_VMSck
, 0 },

57 #ifdeà
WITH_TAINT_TRACKING


58 { "Ld®vik/sy¡em/Tašt;", 
dvm_d®vik_sy¡em_Tašt
, 0 },

61 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”
, 0 },

63 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl
, 0 },

65 
dvm_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘
, 0 },

66 { "Lsun/misc/Un§ã;", 
dvm_sun_misc_Un§ã
, 0 },

67 { 
NULL
, NULL, 0 },

74 
boŞ
 
	$dvmIÁ”ÇlN©iveS¹up
()

76 
D®vikN©iveCÏss
* 
şassPŒ
 = 
gDvmN©iveM‘hodS‘
;

78 
şassPŒ
->
şassDesütÜ
 !ğ
NULL
) {

79 
şassPŒ
->
şassDesütÜHash
 =

80 
	`dvmCompu‹Utf8Hash
(
şassPŒ
->
şassDesütÜ
);

81 
şassPŒ
++;

84 
gDvm
.
u£rDexFes
 = 
	`dvmHashTabËC»©e
(2, 
dvmF»eDexOrJ¬
);

85 ià(
gDvm
.
u£rDexFes
 =ğ
NULL
)

86  
çl£
;

88  
Œue
;

89 
	}
}

94 
	$dvmIÁ”ÇlN©iveShutdown
()

96 
	`dvmHashTabËF»e
(
gDvm
.
u£rDexFes
);

97 
	}
}

102 
D®vikN©iveFunc
 
	$dvmLookupIÁ”ÇlN©iveM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

104 cÚ¡ * 
şassDesütÜ
 = 
m‘hod
->
şazz
->
desütÜ
;

105 cÚ¡ 
D®vikN©iveCÏss
* 
pCÏss
;

106 
u4
 
hash
;

108 
hash
 = 
	`dvmCompu‹Utf8Hash
(
şassDesütÜ
);

109 
pCÏss
 = 
gDvmN©iveM‘hodS‘
;

110 
Œue
) {

111 ià(
pCÏss
->
şassDesütÜ
 =ğ
NULL
)

113 ià(
pCÏss
->
şassDesütÜHash
 =ğ
hash
 &&

114 
	`¡rcmp
(
pCÏss
->
şassDesütÜ
, classDescriptor) == 0)

116 cÚ¡ 
D®vikN©iveM‘hod
* 
pM‘h
 = 
pCÏss
->
m‘hodInfo
;

117 
Œue
) {

118 ià(
pM‘h
->
Çme
 =ğ
NULL
)

121 ià(
	`dvmCom·»NameDesütÜAndM‘hod
(
pM‘h
->
Çme
,

122 
pM‘h
->
sigÇtu»
, 
m‘hod
) == 0)

127  
pM‘h
->
âPŒ
;

130 
pM‘h
++;

134 
pCÏss
++;

137  
NULL
;

138 
	}
}

146 
	$dvmAb¡¿ùM‘hodStub
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

148 
	`LOGD
("--- called into dvmAbstractMethodStub\n");

149 
	`dvmThrowExû±iÚ
("Ljava/lang/AbstractMethodError;",

151 
	}
}

159 
boŞ
 
	$dvmV”ifyObjeùInCÏss
(
Objeù
* 
obj
, 
CÏssObjeù
* 
şazz
)

161 ià(
obj
 =ğ
NULL
) {

162 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

163  
çl£
;

165 ià(!
	`dvmIn¡ªûof
(
obj
->
şazz
, clazz)) {

166 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

168  
çl£
;

171  
Œue
;

172 
	}
}

177 
boŞ
 
	$v®id©eCÏssName
(cÚ¡ * 
Çme
)

179 
Ën
 = 
	`¡¾’
(
Çme
);

180 
i
 = 0;

183 ià(
Çme
[0] == '[') {

184 
Çme
[
i
] == '[')

185 
i
++;

187 ià(
Çme
[
i
] == 'L') {

189 ià(
Çme
[
Ën
-1] != ';')

190  
çl£
;

191 } ià(
	`¡rchr
(
PRIM_TYPE_TO_LETTER
, 
Çme
[
i
]è!ğ
NULL
) {

192 ià(
i
 !ğ
Ën
-1)

193  
çl£
;

195  
çl£
;

200  ; 
i
 < 
Ën
; i++) {

201 ià(
Çme
[
i
] == '/')

202  
çl£
;

205  
Œue
;

206 
	}
}

211 
CÏssObjeù
* 
	$dvmFšdCÏssByName
(
SŒšgObjeù
* 
ÇmeObj
, 
Objeù
* 
lßd”
,

212 
boŞ
 
doIn™
)

214 
CÏssObjeù
* 
şazz
 = 
NULL
;

215 * 
Çme
 = 
NULL
;

216 * 
desütÜ
 = 
NULL
;

218 ià(
ÇmeObj
 =ğ
NULL
) {

219 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

220 
ba
;

222 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

229 ià(!
	`v®id©eCÏssName
(
Çme
)) {

230 
	`LOGW
("dvmFšdCÏssByNam»jeùšg '%s'\n", 
Çme
);

231 
	`dvmThrowExû±iÚ
("Ljava/Ïng/CÏssNÙFoundExû±iÚ;", 
Çme
);

232 
ba
;

235 
desütÜ
 = 
	`dvmDÙToDesütÜ
(
Çme
);

236 ià(
desütÜ
 =ğ
NULL
) {

237 
ba
;

240 ià(
doIn™
)

241 
şazz
 = 
	`dvmFšdCÏss
(
desütÜ
, 
lßd”
);

243 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
lßd”
);

245 ià(
şazz
 =ğ
NULL
) {

246 
	`LOGVV
("FAIL:†ßd % (%d)\n", 
desütÜ
, 
doIn™
);

247 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

248 
Objeù
* 
ŞdExûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

249 
	`dvmAddT¿ckedAÎoc
(
ŞdExûp
, 
£lf
);

250 
	`dvmCË¬Exû±iÚ
(
£lf
);

251 
	`dvmThrowChašedExû±iÚ
("Ljava/lang/ClassNotFoundException;",

252 
Çme
, 
ŞdExûp
);

253 
	`dvmR–—£T¿ckedAÎoc
(
ŞdExûp
, 
£lf
);

255 
	`LOGVV
("GOOD:†oad %s (%d) --> %p†dr=%p\n",

256 
desütÜ
, 
doIn™
, 
şazz
, cÏzz->
şassLßd”
);

259 
ba
:

260 
	`ä“
(
Çme
);

261 
	`ä“
(
desütÜ
);

262  
şazz
;

263 
	}
}

275 
u4
 
	$dvmFixM‘hodFÏgs
(
u4
 
æags
)

277 ià((
æags
 & 
ACC_ABSTRACT
) != 0) {

278 
æags
 &ğ~
ACC_NATIVE
;

281 
æags
 &ğ~
ACC_SYNCHRONIZED
;

283 ià((
æags
 & 
ACC_DECLARED_SYNCHRONIZED
) != 0) {

284 
æags
 |ğ
ACC_SYNCHRONIZED
;

287  
æags
 & 
JAVA_FLAGS_MASK
;

288 
	}
}

294 
u4
 
	$dvmG‘ObjeùHashCode
(
Objeù
* 
obj
)

296  (
u4
è
obj
;

297 
	}
}

300 
	#NUM_DOPRIV_FUNCS
 4

	)

310 
boŞ
 
	$dvmIsPrivegedM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

312 
i
;

314 
	`as£¹
(
m‘hod
 !ğ
NULL
);

316 ià(!
gDvm
.
javaSecur™yAcûssCÚŒŞËrR—dy
) {

321 cÚ¡ * 
kSigÇtu»s
[
NUM_DOPRIV_FUNCS
] = {

327 
CÏssObjeù
* 
şazz
;

329 
şazz
 = 
	`dvmFšdCÏssNoIn™
("Ljava/£cur™y/AcûssCÚŒŞËr;", 
NULL
);

330 ià(
şazz
 =ğ
NULL
) {

331 
	`LOGW
("Couldn't find java/security/AccessController\n");

332  
çl£
;

335 
	`as£¹
(
	`NELEM
(
gDvm
.
m‘hJavaSecur™yAcûssCÚŒŞËr_doPriveged
) ==

336 
	`NELEM
(
kSigÇtu»s
));

339 
i
 = 0; i < 
NUM_DOPRIV_FUNCS
; i++) {

340 
gDvm
.
m‘hJavaSecur™yAcûssCÚŒŞËr_doPriveged
[
i
] =

341 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "doPriveged", 
kSigÇtu»s
[
i
]);

342 ià(
gDvm
.
m‘hJavaSecur™yAcûssCÚŒŞËr_doPriveged
[
i
] =ğ
NULL
) {

343 
	`LOGW
("Warning: couldn't find java/security/AccessController"

344 ".doPriveged %s\n", 
kSigÇtu»s
[
i
]);

345  
çl£
;

350 
gDvm
.
javaSecur™yAcûssCÚŒŞËrR—dy
 = 
Œue
;

353 
i
 = 0; i < 
NUM_DOPRIV_FUNCS
; i++) {

354 ià(
gDvm
.
m‘hJavaSecur™yAcûssCÚŒŞËr_doPriveged
[
i
] =ğ
m‘hod
) {

356  
Œue
;

359  
çl£
;

360 
	}
}

	@native/InternalNative.h

17 #iâdeà
_DALVIK_NATIVE_INTERNALNATIVE


18 
	#_DALVIK_NATIVE_INTERNALNATIVE


	)

23 
boŞ
 
dvmIÁ”ÇlN©iveS¹up
();

24 
dvmIÁ”ÇlN©iveShutdown
();

27 
D®vikN©iveFunc
 
dvmLookupIÁ”ÇlN©iveM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
);

30 
dvmAb¡¿ùM‘hodStub
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
);

	@native/InternalNativePriv.h

20 #iâdeà
_DALVIK_NATIVE_INTERNALNATIVEPRIV


21 
	#_DALVIK_NATIVE_INTERNALNATIVEPRIV


	)

27 #ifdeà
NDEBUG


28 
	#RETURN_VOID
(èdØ{ ()(
pResuÉ
); ; } 0)

	)

30 
	#RETURN_VOID
(èdØ{ 
pResuÉ
->
i
 = 0xããabab; ; }0)

	)

32 
	#RETURN_BOOLEAN
(
_v®
èdØ{ 
pResuÉ
->
i
 = (_v®); ; } 0)

	)

33 
	#RETURN_INT
(
_v®
èdØ{ 
pResuÉ
->
i
 = (_v®); ; } 0)

	)

34 
	#RETURN_LONG
(
_v®
èdØ{ 
pResuÉ
->
j
 = (_v®); ; } 0)

	)

35 
	#RETURN_FLOAT
(
_v®
èdØ{ 
pResuÉ
->
f
 = (_v®); ; } 0)

	)

36 
	#RETURN_DOUBLE
(
_v®
èdØ{ 
pResuÉ
->
d
 = (_v®); ; } 0)

	)

37 
	#RETURN_PTR
(
_v®
èdØ{ 
pResuÉ
->
l
 = (_v®); ; } 0)

	)

38 #ifdeà
WITH_TAINT_TRACKING


41 
	#RETURN_CHAR
(
_v®
èdØ{ 
pResuÉ
->
i
 = (_v®); ; } 0)

	)

42 
	#RETURN_BYTE
(
_v®
èdØ{ 
pResuÉ
->
i
 = (_v®); ; } 0)

	)

51 
boŞ
 
dvmV”ifyObjeùInCÏss
(
Objeù
* 
obj
, 
CÏssObjeù
* 
şazz
);

56 
CÏssObjeù
* 
dvmFšdCÏssByName
(
SŒšgObjeù
* 
ÇmeObj
, 
Objeù
* 
lßd”
,

57 
boŞ
 
doIn™
);

69 
u4
 
dvmFixM‘hodFÏgs
(u4 
æags
);

74 
dvmF»eDexOrJ¬
(* 
v±r
);

84 
boŞ
 
dvmIsPrivegedM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
);

89 
u4
 
dvmG‘ObjeùHashCode
(
Objeù
* 
obj
);

95 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_Objeù
[];

96 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_CÏss
[];

97 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_RuÁime
[];

98 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_SŒšg
[];

99 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_Sy¡em
[];

100 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_Sy¡emPrİ”t›s
[];

101 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_ThrowabË
[];

102 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_VMCÏssLßd”
[];

103 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_VMTh»ad
[];

104 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_AcûssibËObjeù
[];

105 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_A¼ay
[];

106 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_CÚ¡ruùÜ
[];

107 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_F›ld
[];

108 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_M‘hod
[];

109 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_Ïng_»æeù_Proxy
[];

110 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_£cur™y_AcûssCÚŒŞËr
[];

111 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_java_ut_cÚcu¼’t_©omic_AtomicLÚg
[];

112 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_Sam¶šgProf”
[];

113 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_VMDebug
[];

114 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_DexFe
[];

115 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_VMRuÁime
[];

116 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_ZygÙe
[];

117 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_VMSck
[];

118 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”
[];

119 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl
[];

120 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘
[];

121 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_sun_misc_Un§ã
[];

122 #ifdeà
WITH_TAINT_TRACKING


123 cÚ¡ 
D®vikN©iveM‘hod
 
dvm_d®vik_sy¡em_Tašt
[];

	@native/SystemThread.c

17 
	#LOG_TAG
 "Sy¡emTh»ad"

	)

22 
	~"D®vik.h
"

23 
	~"Çtive/Sy¡emTh»ad.h
"

25 
	~<uni¡d.h
>

26 
	~<sys/ty³s.h
>

27 
	~<sys/¡©.h
>

28 
	~<fú.h
>

29 
	~<”ºo.h
>

31 
	sSy¡emTh»ad
 {

36 
	m¡©Fe
;

39 
	m¡©eOff£t
;

42 
	$dvmD‘achSy¡emTh»ad
(
Th»ad
* 
th»ad
) {

43 ià(
th»ad
->
sy¡emTh»ad
 !ğ
NULL
) {

44 ià(
th»ad
->
sy¡emTh»ad
->
¡©Fe
 > -1) {

45 
	`şo£
(
th»ad
->
sy¡emTh»ad
->
¡©Fe
);

47 
	`ä“
(
th»ad
->
sy¡emTh»ad
);

48 
th»ad
->
sy¡emTh»ad
 = 
NULL
;

50 
	}
}

53 
Th»adStus
 
	$¡©eToStus
(
¡©e
) {

54 
¡©e
) {

55 'R':  
THREAD_RUNNING
;

56 'S':  
THREAD_WAIT
;

57 'D':  
THREAD_WAIT
;

58 'Z':  
THREAD_ZOMBIE
;

59 'T':  
THREAD_WAIT
;

60 'W':  
THREAD_WAIT
;

62 
	`LOGE
("UÃx³ùed s‹: %c", 
¡©e
);

63  
THREAD_NATIVE
;

65 
	}
}

68 
	$»adS‹FromBegšnšg
(
Sy¡emTh»ad
* 
th»ad
) {

69 
bufãr
[256];

70 
size
 = 
	`»ad
(
th»ad
->
¡©Fe
, 
bufãr
, (buffer) - 1);

71 ià(
size
 <= 0) {

72 
	`LOGE
("»ad(è»tuºed %d: %s", 
size
, 
	`¡»¼Ü
(
”ºo
));

75 * 
’dOfName
 = (*è
	`memchr
(
bufãr
, ')', 
size
);

76 ià(
’dOfName
 =ğ
NULL
) {

77 
	`LOGE
("End ofƒxecutable‚ame‚ot found.");

80 * 
¡©e
 = 
’dOfName
 + 2;

81 ià((
¡©e
 - 
bufãr
è+ 1 > 
size
) {

82 
	`LOGE
("Unexpected EOF whileryingo„ead stat file.");

85 
th»ad
->
¡©eOff£t
 = 
¡©e
 - 
bufãr
;

86  *
¡©e
;

87 
	}
}

93 
	$»adS‹R–©iv–y
(
Sy¡emTh»ad
* 
th»ad
) {

94 
bufãr
[3];

96 
»suÉ
 = 
	`l£ek
(
th»ad
->
¡©Fe
,h»ad->
¡©eOff£t
 - 2, 
SEEK_SET
);

97 ià(
»suÉ
 < 0) {

98 
	`LOGE
("lseek()ƒrror.");

101 
size
 = 
	`»ad
(
th»ad
->
¡©Fe
, 
bufãr
, (buffer));

102 ià(
size
 < (è(
bufãr
)) {

103 
	`LOGE
("Unexpected EOF whileryingo„ead stat file.");

106 ià(
bufãr
[0] != ')') {

108 
»suÉ
 = 
	`l£ek
(
th»ad
->
¡©Fe
, 0, 
SEEK_SET
);

109 ià(
»suÉ
 < 0) {

110 
	`LOGE
("lseek()ƒrror.");

113  
	`»adS‹FromBegšnšg
(
th»ad
);

115  
bufãr
[2];

116 
	}
}

118 
Th»adStus
 
	$dvmG‘Sy¡emTh»adStus
(
Th»ad
* 
th»ad
) {

119 
Th»adStus
 
¡©us
 = 
th»ad
->status;

120 ià(
¡©us
 !ğ
THREAD_NATIVE
) {

122  
¡©us
;

125 ià(
th»ad
->
sy¡emTh»ad
 =ğ
NULL
) {

126 
th»ad
->
sy¡emTh»ad
 = (
Sy¡emTh»ad
*è
	`m®loc
((SystemThread));

127 ià(
th»ad
->
sy¡emTh»ad
 =ğ
NULL
) {

128 
	`LOGE
("Couldn't‡llocate‡ SystemThread.");

129  
THREAD_NATIVE
;

131 
th»ad
->
sy¡emTh»ad
->
¡©Fe
 = -1;

134 
Sy¡emTh»ad
* 
sy¡emTh»ad
 = 
th»ad
->systemThread;

135 ià(
sy¡emTh»ad
->
¡©Fe
 == -2) {

137  
th»ad
->
¡©us
;

143 
¡©e
;

144 ià(
sy¡emTh»ad
->
¡©Fe
 == -1) {

146 
feName
[256];

147 
	`¥rštf
(
feName
, "/´oc/£lf/sk/%d/¡©", 
th»ad
->
sy¡emTid
);

148 
sy¡emTh»ad
->
¡©Fe
 = 
	`İ’
(
feName
, 
O_RDONLY
);

149 ià(
sy¡emTh»ad
->
¡©Fe
 == -1) {

150 
	`LOGE
("E¼Ü o³nšg %s: %s", 
feName
, 
	`¡»¼Ü
(
”ºo
));

151 
sy¡emTh»ad
->
¡©Fe
 = -2;

152  
th»ad
->
¡©us
;

154 
¡©e
 = 
	`»adS‹FromBegšnšg
(
sy¡emTh»ad
);

156 
¡©e
 = 
	`»adS‹R–©iv–y
(
sy¡emTh»ad
);

159 ià(
¡©e
 == 0) {

160 
	`şo£
(
sy¡emTh»ad
->
¡©Fe
);

161 
sy¡emTh»ad
->
¡©Fe
 = -2;

162  
th»ad
->
¡©us
;

164 
Th»adStus
 
ÇtiveStus
 = 
	`¡©eToStus
(
¡©e
);

167 
¡©us
 = 
th»ad
->status;

168  
¡©us
 =ğ
THREAD_NATIVE
 ? 
ÇtiveStus
 : status;

169 
	}
}

	@native/SystemThread.h

20 #iâdeà
_DALVIK_SYSTEM_THREAD


21 
	#_DALVIK_SYSTEM_THREAD


	)

23 
	~"Th»ad.h
"

33 
Th»adStus
 
dvmG‘Sy¡emTh»adStus
(
Th»ad
* 
th»ad
);

39 
dvmD‘achSy¡emTh»ad
(
Th»ad
* 
th»ad
);

	@native/dalvik_system_DexFile.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	sDexOrJ¬
 {

28 * 
	mfeName
;

29 
boŞ
 
	misDex
;

30 
boŞ
 
	mokayToF»e
;

31 
RawDexFe
* 
	mpRawDexFe
;

32 
J¬Fe
* 
	mpJ¬Fe
;

33 } 
	tDexOrJ¬
;

38 
	$dvmF»eDexOrJ¬
(* 
v±r
)

40 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
v±r
;

42 
	`LOGV
("F»ešg DexOrJ¬ '%s'\n", 
pDexOrJ¬
->
feName
);

44 ià(
pDexOrJ¬
->
isDex
)

45 
	`dvmRawDexFeF»e
(
pDexOrJ¬
->
pRawDexFe
);

47 
	`dvmJ¬FeF»e
(
pDexOrJ¬
->
pJ¬Fe
);

48 
	`ä“
(
pDexOrJ¬
->
feName
);

49 
	`ä“
(
pDexOrJ¬
);

50 
	}
}

57 
	$hashcmpDexOrJ¬
(cÚ¡ * 
bËV®
, cÚ¡ * 
ÃwV®
)

59  (è
ÃwV®
 - (è
bËV®
;

60 
	}
}

69 
boŞ
 
	$v®id©eCook›
(
cook›
)

71 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

73 
	`LOGVV
("+++ dex v”ifyšg cook› %p\n", 
pDexOrJ¬
);

75 ià(
pDexOrJ¬
 =ğ
NULL
)

76  
çl£
;

78 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
pDexOrJ¬
->
feName
);

79 
	`dvmHashTabËLock
(
gDvm
.
u£rDexFes
);

80 * 
»suÉ
 = 
	`dvmHashTabËLookup
(
gDvm
.
u£rDexFes
, 
hash
, 
pDexOrJ¬
,

81 
hashcmpDexOrJ¬
, 
çl£
);

82 
	`dvmHashTabËUÆock
(
gDvm
.
u£rDexFes
);

83 ià(
»suÉ
 =ğ
NULL
) {

84 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

86  
çl£
;

89  
Œue
;

90 
	}
}

109 
	$D®vik_d®vik_sy¡em_DexFe_İ’DexFe
(cÚ¡ 
u4
* 
¬gs
,

110 
JV®ue
* 
pResuÉ
)

112 
SŒšgObjeù
* 
sourûNameObj
 = (SŒšgObjeù*è
¬gs
[0];

113 
SŒšgObjeù
* 
ouutNameObj
 = (SŒšgObjeù*è
¬gs
[1];

114 
æags
 = 
¬gs
[2];

115 
DexOrJ¬
* 
pDexOrJ¬
 = 
NULL
;

116 
J¬Fe
* 
pJ¬Fe
;

117 
RawDexFe
* 
pRawDexFe
;

118 * 
sourûName
;

119 * 
ouutName
;

121 ià(
sourûNameObj
 =ğ
NULL
) {

122 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

123 
	`RETURN_VOID
();

126 
sourûName
 = 
	`dvmC»©eC¡rFromSŒšg
(
sourûNameObj
);

127 ià(
ouutNameObj
 !ğ
NULL
)

128 
ouutName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ouutNameObj
);

130 
ouutName
 = 
NULL
;

153 ià(
	`dvmCÏssP©hCÚšs
(
gDvm
.
boÙCÏssP©h
, 
sourûName
)) {

154 
	`LOGW
("RefusšgØ»İ’ boÙ DEX '%s'\n", 
sourûName
);

155 
	`dvmThrowExû±iÚ
("Ljava/io/IOException;",

157 
	`ä“
(
sourûName
);

158 
	`RETURN_VOID
();

165 ià(
	`dvmRawDexFeO³n
(
sourûName
, 
ouutName
, &
pRawDexFe
, 
çl£
) == 0) {

166 
	`LOGV
("O³nšg DEX f'%s' (DEX)\n", 
sourûName
);

168 
pDexOrJ¬
 = (
DexOrJ¬
*è
	`m®loc
((DexOrJar));

169 
pDexOrJ¬
->
isDex
 = 
Œue
;

170 
pDexOrJ¬
->
pRawDexFe
 =…RawDexFile;

171 } ià(
	`dvmJ¬FeO³n
(
sourûName
, 
ouutName
, &
pJ¬Fe
, 
çl£
) == 0) {

172 
	`LOGV
("O³nšg DEX f'%s' (J¬)\n", 
sourûName
);

174 
pDexOrJ¬
 = (
DexOrJ¬
*è
	`m®loc
((DexOrJar));

175 
pDexOrJ¬
->
isDex
 = 
çl£
;

176 
pDexOrJ¬
->
pJ¬Fe
 =…JarFile;

178 
	`LOGV
("UÇbËØİ’ DEX f'%s'\n", 
sourûName
);

179 
	`dvmThrowExû±iÚ
("Ljava/io/IOException;", "unableo open DEX file");

182 ià(
pDexOrJ¬
 !ğ
NULL
) {

183 
pDexOrJ¬
->
feName
 = 
sourûName
;

186 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
sourûName
);

187 * 
»suÉ
;

188 
	`dvmHashTabËLock
(
gDvm
.
u£rDexFes
);

189 
»suÉ
 = 
	`dvmHashTabËLookup
(
gDvm
.
u£rDexFes
, 
hash
, 
pDexOrJ¬
,

190 
hashcmpDexOrJ¬
, 
Œue
);

191 
	`dvmHashTabËUÆock
(
gDvm
.
u£rDexFes
);

192 ià(
»suÉ
 !ğ
pDexOrJ¬
) {

193 
	`LOGE
("Pointer has‡lready been‡dded?\n");

194 
	`dvmAbÜt
();

197 
pDexOrJ¬
->
okayToF»e
 = 
Œue
;

199 
	`ä“
(
sourûName
);

201 
	`RETURN_PTR
(
pDexOrJ¬
);

202 
	}
}

209 
	$D®vik_d®vik_sy¡em_DexFe_şo£DexFe
(cÚ¡ 
u4
* 
¬gs
,

210 
JV®ue
* 
pResuÉ
)

212 
cook›
 = 
¬gs
[0];

213 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

215 ià(
pDexOrJ¬
 =ğ
NULL
)

216 
	`RETURN_VOID
();

218 
	`LOGV
("Closšg DEX f%°(%s)\n", 
pDexOrJ¬
,…DexOrJ¬->
feName
);

220 ià(!
	`v®id©eCook›
(
cook›
))

221 
	`RETURN_VOID
();

231 ià(
pDexOrJ¬
->
okayToF»e
) {

232 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
pDexOrJ¬
->
feName
);

233 
	`dvmHashTabËLock
(
gDvm
.
u£rDexFes
);

234 ià(!
	`dvmHashTabËRemove
(
gDvm
.
u£rDexFes
, 
hash
, 
pDexOrJ¬
)) {

235 
	`LOGW
("WARNING: could‚ot„emove '%s' from DEX hashable\n",

236 
pDexOrJ¬
->
feName
);

238 
	`dvmHashTabËUÆock
(
gDvm
.
u£rDexFes
);

239 
	`LOGV
("+++ f»ešg DexF'%s'„esourûs\n", 
pDexOrJ¬
->
feName
);

240 
	`dvmF»eDexOrJ¬
(
pDexOrJ¬
);

242 
	`LOGV
("+++ NOT f»ešg DexF'%s'„esourûs\n", 
pDexOrJ¬
->
feName
);

245 
	`RETURN_VOID
();

246 
	}
}

262 
	$D®vik_d®vik_sy¡em_DexFe_defšeCÏss
(cÚ¡ 
u4
* 
¬gs
,

263 
JV®ue
* 
pResuÉ
)

265 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

266 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[1];

267 
cook›
 = 
¬gs
[2];

268 
Objeù
* 
pd
 = (Objeù*è
¬gs
[3];

269 
CÏssObjeù
* 
şazz
 = 
NULL
;

270 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

271 
DvmDex
* 
pDvmDex
;

272 * 
Çme
;

273 * 
desütÜ
;

275 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

276 
desütÜ
 = 
	`dvmDÙToDesütÜ
(
Çme
);

277 
	`LOGV
("--- Ex¶ic™ cÏs lßd '%s' 0x%08x\n", 
desütÜ
, 
cook›
);

278 
	`ä“
(
Çme
);

280 ià(!
	`v®id©eCook›
(
cook›
))

281 
	`RETURN_VOID
();

283 ià(
pDexOrJ¬
->
isDex
)

284 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
(
pDexOrJ¬
->
pRawDexFe
);

286 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pDexOrJ¬
->
pJ¬Fe
);

289 
pDexOrJ¬
->
okayToF»e
 = 
çl£
;

291 
şazz
 = 
	`dvmDefšeCÏss
(
pDvmDex
, 
desütÜ
, 
lßd”
);

292 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

293 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

299 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

300 ià(
	`¡rcmp
(
exûp
->
şazz
->
desütÜ
,

302 
	`¡rcmp
(
exûp
->
şazz
->
desütÜ
,

305 
	`dvmCË¬Exû±iÚ
(
£lf
);

307 
şazz
 = 
NULL
;

316 ià(
şazz
 !ğ
NULL
) {

318 
	`dvmS‘F›ldObjeù
((
Objeù
*è
şazz
, 
gDvm
.
offJavaLªgCÏss_pd
, 
pd
);

321 
	`ä“
(
desütÜ
);

322 
	`RETURN_PTR
(
şazz
);

323 
	}
}

331 
	$D®vik_d®vik_sy¡em_DexFe_g‘CÏssNameLi¡
(cÚ¡ 
u4
* 
¬gs
,

332 
JV®ue
* 
pResuÉ
)

334 
cook›
 = 
¬gs
[0];

335 
DexOrJ¬
* 
pDexOrJ¬
 = (DexOrJ¬*è
cook›
;

336 
DvmDex
* 
pDvmDex
;

337 
DexFe
* 
pDexFe
;

338 
A¼ayObjeù
* 
¡ršgA¼ay
;

340 ià(!
	`v®id©eCook›
(
cook›
))

341 
	`RETURN_VOID
();

343 ià(
pDexOrJ¬
->
isDex
)

344 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
(
pDexOrJ¬
->
pRawDexFe
);

346 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pDexOrJ¬
->
pJ¬Fe
);

347 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

348 
pDexFe
 = 
pDvmDex
->pDexFile;

350 
couÁ
 = 
pDexFe
->
pH—d”
->
şassDefsSize
;

351 
¡ršgA¼ay
 = 
	`dvmAÎocObjeùA¼ay
(
gDvm
.
şassJavaLªgSŒšg
, 
couÁ
,

352 
ALLOC_DEFAULT
);

353 ià(
¡ršgA¼ay
 =ğ
NULL
)

354 
	`RETURN_VOID
();

356 
SŒšgObjeù
** 
cÚ‹Ás
 = (SŒšgObjeù**è
¡ršgA¼ay
->contents;

357 
i
;

358 
i
 = 0; i < 
couÁ
; i++) {

359 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
 = 
	`dexG‘CÏssDef
(
pDexFe
, 
i
);

360 cÚ¡ * 
desütÜ
 =

361 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

363 * 
şassName
 = 
	`dvmDesütÜToDÙ
(
desütÜ
);

364 
cÚ‹Ás
[
i
] = 
	`dvmC»©eSŒšgFromC¡r
(
şassName
, 
ALLOC_DEFAULT
);

365 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
cÚ‹Ás
[
i
], 
NULL
);

366 
	`ä“
(
şassName
);

369 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
¡ršgA¼ay
, 
NULL
);

370 
	`RETURN_PTR
(
¡ršgA¼ay
);

371 
	}
}

390 
	$D®vik_d®vik_sy¡em_DexFe_isDexO±N“ded
(cÚ¡ 
u4
* 
¬gs
,

391 
JV®ue
* 
pResuÉ
)

393 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

394 * 
Çme
;

395 
DexCacheStus
 
¡©us
;

396 
»suÉ
;

398 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

399 ià(
Çme
 =ğ
NULL
) {

400 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

401 
	`RETURN_VOID
();

403 ià(
	`acûss
(
Çme
, 
R_OK
) != 0) {

404 
	`dvmThrowExû±iÚ
("Ljava/io/FeNÙFoundExû±iÚ;", 
Çme
);

405 
	`ä“
(
Çme
);

406 
	`RETURN_VOID
();

408 
¡©us
 = 
	`dvmDexCacheStus
(
Çme
);

409 
	`LOGV
("dvmDexCacheStus(%sè»tuºed %d\n", 
Çme
, 
¡©us
);

411 
»suÉ
 = 
Œue
;

412 
¡©us
) {

414 
DEX_CACHE_BAD_ARCHIVE
:

415 
	`dvmThrowExû±iÚ
("Ljava/io/IOExû±iÚ;", 
Çme
);

416 
»suÉ
 = -1;

418 
DEX_CACHE_OK
:

419 
»suÉ
 = 
çl£
;

421 
DEX_CACHE_STALE
:

422 
»suÉ
 = 
Œue
;

424 
DEX_CACHE_STALE_ODEX
:

425 
	`dvmThrowExû±iÚ
("Ld®vik/sy¡em/SËDexCacheE¼Ü;", 
Çme
);

426 
»suÉ
 = -1;

429 
	`ä“
(
Çme
);

431 ià(
»suÉ
 >= 0) {

432 
	`RETURN_BOOLEAN
(
»suÉ
);

434 
	`RETURN_VOID
();

436 
	}
}

438 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_DexFe
[] = {

440 
D®vik_d®vik_sy¡em_DexFe_İ’DexFe
 },

442 
D®vik_d®vik_sy¡em_DexFe_şo£DexFe
 },

444 
D®vik_d®vik_sy¡em_DexFe_defšeCÏss
 },

446 
D®vik_d®vik_sy¡em_DexFe_g‘CÏssNameLi¡
 },

448 
D®vik_d®vik_sy¡em_DexFe_isDexO±N“ded
 },

449 { 
NULL
, NULL, NULL },

	@native/dalvik_system_SamplingProfiler.c

21 
	#LOG_TAG
 "Sam¶šgProf”"

	)

23 
	~<cuts/log.h
>

25 
	~"D®vik.h
"

26 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	~"Çtive/Sy¡emTh»ad.h
"

30 
	#INITIAL_CAPACITY
 1024

	)

33 
	#MAX_CAPACITY
 4096

	)

37 
	mEVENT_THREAD
,

39 
	mOTHER_THREAD


40 } 
	tTh»adTy³
;

42 
	#THREAD_TYPE_SIZE
 (
OTHER_THREAD
 + 1)

	)

46 
	mRUNNING_THREAD
,

48 
	mSUSPENDED_THREAD


49 } 
	tTh»adS‹
;

51 
	#THREAD_STATE_SIZE
 (
SUSPENDED_THREAD
 + 1)

	)

55 
	mCALLING_METHOD
,

57 
	mLEAF_METHOD


58 } 
	tM‘hodS‹
;

60 
	#METHOD_STATE_SIZE
 (
LEAF_METHOD
 + 1)

	)

65 cÚ¡ 
M‘hod
* 
	mm‘hod
;

67 
u2
 
	mcouÁs
[
THREAD_TYPE_SIZE
][
THREAD_STATE_SIZE
][
METHOD_STATE_SIZE
];

68 } 
	tM‘hodCouÁ
;

78 
	mcŞlisiÚs
;

80 
	msize
;

82 
	mÿ·c™y
;

84 
	mmaxSize
;

86 
	mmask
;

88 
M‘hodCouÁ
* 
	m’Œ›s
;

90 
Th»ad
* 
	mev’tTh»ad
;

91 } 
	tSam¶eS‘
;

97 
Sam¶eS‘
 
	$ÃwSam¶eS‘
(
ÿ·c™y
) {

98 
Sam¶eS‘
 
£t
;

99 
£t
.
cŞlisiÚs
 = 0;

100 
£t
.
size
 = 0;

101 
£t
.
ÿ·c™y
 = capacity;

102 
£t
.
maxSize
 = (
ÿ·c™y
 >> 2) * 3;

103 
£t
.
mask
 = 
ÿ·c™y
 - 1;

104 
£t
.
’Œ›s
 = (
M‘hodCouÁ
*è
	`ÿÎoc
((M‘hodCouÁ), 
ÿ·c™y
);

105 
£t
.
ev’tTh»ad
 = 
NULL
;

106  
£t
;

107 
	}
}

110 
u4
 
	$hash
(cÚ¡ * 
p
) {

111 
u4
 
h
 = (u4è
p
;

119 
h
 ^= h >> 11;

120 
h
 ^= h << 7;

121  
h
 ^ (h >> 16);

122 
	}
}

125 
	$ex·nd
(
Sam¶eS‘
* 
ŞdS‘
) {

127 
Sam¶eS‘
 
ÃwS‘
 = 
	`ÃwSam¶eS‘
(
ŞdS‘
->
ÿ·c™y
 << 1);

128 
	`LOGI
("Ex·ndšg sam¶£ˆÿ·c™yØ%d.", 
ÃwS‘
.
ÿ·c™y
);

129 
ŞdIndex
;

130 
M‘hodCouÁ
* 
ŞdEÁr›s
 = 
ŞdS‘
->
’Œ›s
;

131 
ŞdIndex
 = 0; oldIndex < 
ŞdS‘
->
size
; oldIndex++) {

132 
M‘hodCouÁ
 
ŞdEÁry
 = 
ŞdEÁr›s
[
ŞdIndex
];

133 ià(
ŞdEÁry
.
m‘hod
 !ğ
NULL
) {

135 
¡¬t
 = 
	`hash
(
ŞdEÁry
.
m‘hod
è& 
ÃwS‘
.
mask
;

136 
i
 = 
¡¬t
;

137 
ÃwS‘
.
’Œ›s
[
i
].
m‘hod
 !ğ
NULL
) {

138 
i
 = (˜+ 1è& 
ÃwS‘
.
mask
;

142 
ÃwS‘
.
’Œ›s
[
i
] = 
ŞdEÁry
;

143 
ÃwS‘
.
cŞlisiÚs
 +ğ(
i
 !ğ
¡¬t
);

146 
	`ä“
(
ŞdEÁr›s
);

147 
ÃwS‘
.
size
 = 
ŞdS‘
->size;

148 
ÃwS‘
.
ev’tTh»ad
 = 
ŞdS‘
->eventThread;

149 *
ŞdS‘
 = 
ÃwS‘
;

150 
	}
}

153 
	$couÁM‘hod
(
Sam¶eS‘
* 
£t
, cÚ¡ 
M‘hod
* 
m‘hod
,

154 
Th»adTy³
 
th»adTy³
, 
Th»adS‹
 
th»adS‹
,

155 
M‘hodS‹
 
m‘hodS‹
) {

156 
M‘hodCouÁ
* 
’Œ›s
 = 
£t
->entries;

157 
¡¬t
 = 
	`hash
(
m‘hod
è& 
£t
->
mask
;

158 
i
;

159 
i
 = 
¡¬t
;; i = (˜+ 1è& 
£t
->
mask
) {

160 
M‘hodCouÁ
* 
’Œy
 = &
’Œ›s
[
i
];

162 ià(
’Œy
->
m‘hod
 == method) {

164 
’Œy
->
couÁs
[
th»adTy³
][
th»adS‹
][
m‘hodS‹
]++;

168 ià(
’Œy
->
m‘hod
 =ğ
NULL
) {

170 ià(
£t
->
size
 < s‘->
maxSize
) {

171 
’Œy
->
m‘hod
 = method;

172 
’Œy
->
couÁs
[
th»adTy³
][
th»adS‹
][
m‘hodS‹
] = 1;

173 
£t
->
cŞlisiÚs
 +ğ(
i
 !ğ
¡¬t
);

174 
£t
->
size
++;

176 ià(
£t
->
ÿ·c™y
 < 
MAX_CAPACITY
) {

178 
	`ex·nd
(
£t
);

179 
	`couÁM‘hod
(
£t
, 
m‘hod
, 
th»adTy³
, 
th»adS‹
,

180 
m‘hodS‹
);

189 
	}
}

192 
	$ş—rSam¶eS‘
(
Sam¶eS‘
* 
£t
) {

193 
£t
->
cŞlisiÚs
 = 0;

194 
£t
->
size
 = 0;

195 
	`mem£t
(
£t
->
’Œ›s
, 0, s‘->
ÿ·c™y
 * (
M‘hodCouÁ
));

196 
	}
}

201 
	$§m¶e
(
Sam¶eS‘
* 
£t
, 
Th»ad
* 
th»ad
) {

202 
Th»adTy³
 
th»adTy³
 = 
th»ad
 =ğ
£t
->
ev’tTh»ad


203 ? 
EVENT_THREAD
 : 
OTHER_THREAD
;

205 
Th»adS‹
 
th»adS‹
;

206 
	`dvmG‘Sy¡emTh»adStus
(
th»ad
)) {

207 
THREAD_RUNNING
: 
th»adS‹
 = 
RUNNING_THREAD
; ;

208 
THREAD_NATIVE
: ;

209 : 
th»adS‹
 = 
SUSPENDED_THREAD
;

219 * 
¡ackTİ
 = 
th»ad
->
š‹½SckS¹
;

221 * 
cu¼’tF¿me
 = 
th»ad
->
curF¿me
;

222 ià(
cu¼’tF¿me
 =ğ
NULL
) {

226 
M‘hodS‹
 
m‘hodS‹
 = 
LEAF_METHOD
;

227 
Œue
) {

228 
SckSaveA»a
* 
§veA»a
 = 
	`SAVEAREA_FROM_FP
(
cu¼’tF¿me
);

230 cÚ¡ 
M‘hod
* 
m‘hod
 = 
§veA»a
->method;

232 ià(
m‘hod
 !ğ
NULL
) {

233 
	`couÁM‘hod
(
£t
, 
m‘hod
, 
th»adTy³
, 
th»adS‹
, 
m‘hodS‹
);

234 
m‘hodS‹
 = 
CALLING_METHOD
;

237 * 
ÿÎ”F¿me
 = 
§veA»a
->
´evF¿me
;

238 ià(
ÿÎ”F¿me
 =ğ
NULL


239 || 
ÿÎ”F¿me
 > 
¡ackTİ


240 || 
ÿÎ”F¿me
 < 
cu¼’tF¿me


245 
cu¼’tF¿me
 = 
ÿÎ”F¿me
;

247 
	}
}

252 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_§m¶e
(cÚ¡ 
u4
* 
¬gs
,

253 
JV®ue
* 
pResuÉ
) {

254 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
¬gs
[0];

255 
	`dvmLockTh»adLi¡
(
	`dvmTh»adS–f
());

256 
Th»ad
* 
th»ad
 = 
gDvm
.
th»adLi¡
;

257 
§m¶edTh»ads
 = 0;

258 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

259 
th»ad
 !ğ
NULL
) {

260 ià(
th»ad
 !ğ
£lf
) {

261 
	`§m¶e
(
£t
, 
th»ad
);

262 
§m¶edTh»ads
++;

264 
th»ad
 =h»ad->
Ãxt
;

266 
	`dvmUÆockTh»adLi¡
();

267 
	`RETURN_INT
(
§m¶edTh»ads
);

268 
	}
}

273 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_size
(cÚ¡ 
u4
* 
¬gs
,

274 
JV®ue
* 
pResuÉ
) {

275 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
¬gs
[0];

276 
	`RETURN_INT
(
£t
->
size
);

277 
	}
}

282 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_cŞlisiÚs
(cÚ¡ 
u4
* 
¬gs
,

283 
JV®ue
* 
pResuÉ
) {

284 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
¬gs
[0];

285 
	`RETURN_INT
(
£t
->
cŞlisiÚs
);

286 
	}
}

291 
boŞ
 
	$šTabË
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ M‘hod* 
bË
,

292 
bËL’gth
) {

293 ià(
bËL’gth
 < 1) {

294  
çl£
;

297 cÚ¡ 
M‘hod
* 
Ï¡
 = 
bË
 + (
bËL’gth
 - 1);

300  (*è
m‘hod
 >ğ(*è
bË


301 && (*è
m‘hod
 <ğ(*è
Ï¡
;

302 
	}
}

305 
	smcw
 {

307 
M‘hodCouÁ
* 
	mm‘hodCouÁ
;

310 
CÏssObjeù
* 
	mşazz
;

312 cÚ¡ * 
	mşassName
;

314 
u2
 
	mşassNameL’gth
;

315 
u2
 
	mm‘hodNameL’gth
;

318 
mcw
* 
	mÃxt
;

319 } 
	tM‘hodCouÁW¿µ”
;

322 
boŞ
 
	$isNÜm®CÏssName
(cÚ¡ * 
şazzName
, 
Ëngth
) {

323  (
Ëngth
 >ğ2è&& (
şazzName
[0] == 'L')

324 && (
şazzName
[
Ëngth
 - 1] == ';');

325 
	}
}

331 
boŞ
 
	$isV®idM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

332 ià(!
	`dvmLš—rAÎocCÚšs
(
m‘hod
, (
M‘hod
))) {

333 
	`LOGW
("Method* is‚ot in†inear‡llocationable.");

334  
çl£
;

336 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

337 ià(!
	`dvmIsV®idObjeù
((
Objeù
*è
şazz
)) {

338 
	`LOGW
("method->clazz doesn't…ointo‡n object‡t‡ll.");

339  
çl£
;

341 ià(
şazz
->
obj
.şazz !ğ
gDvm
.
şassJavaLªgCÏss
) {

342 
	`LOGW
("method->clazz doesn't…ointo‡ ClassObject.");

343  
çl£
;

347 ià(!
	`šTabË
(
m‘hod
, 
şazz
->
dœeùM‘hods
, cÏzz->
dœeùM‘hodCouÁ
)

348 && !
	`šTabË
(
m‘hod
, 
şazz
->
vœtu®M‘hods
,

349 
şazz
->
vœtu®M‘hodCouÁ
)) {

350 
	`LOGW
("Method‚ot found in‡ssociated ClassObject.");

351  
çl£
;

360  
Œue
;

361 
	}
}

364 
	$¦ashesToDÙs
(* 
s
, 
Ëngth
) {

365 
i
;

366 
i
 = 0; i < 
Ëngth
; i++) {

367 ià(
s
[
i
] == '/') {

368 
s
[
i
] = '.';

371 
	}
}

377 
	$com·»M‘hodCouÁCÏs£s
(cÚ¡ * 
bËI‹m
,

378 cÚ¡ * 
loo£I‹m
) {

379 cÚ¡ 
M‘hodCouÁW¿µ”
* 
a
 = (M‘hodCouÁW¿µ”*è
bËI‹m
;

380 cÚ¡ 
M‘hodCouÁW¿µ”
* 
b
 = (M‘hodCouÁW¿µ”*è
loo£I‹m
;

381 
u4
 
£rŸlA
 = 
a
->
şazz
->
£rŸlNumb”
;

382 
u4
 
£rŸlB
 = 
b
->
şazz
->
£rŸlNumb”
;

383  
£rŸlA
 =ğ
£rŸlB
 ? 0 : (serialA < serialB ? -1 : 1);

384 
	}
}

390 
	$ÿlcuÏ‹SÇpshÙEÁrySize
(* 
d©a
, * 
¬g
) {

391 
M‘hodCouÁW¿µ”
* 
w¿µ”
 = (M‘hodCouÁW¿µ”*è
d©a
;

393 cÚ¡ * 
şassName
 = 
w¿µ”
->
şazz
->
desütÜ
;

394 
w¿µ”
->
şassNameL’gth
 = 
	`¡¾’
(
şassName
);

395 ià(
	`isNÜm®CÏssName
(
şassName
, 
w¿µ”
->
şassNameL’gth
)) {

397 
w¿µ”
->
şassName
 = className + 1;

398 
w¿µ”
->
şassNameL’gth
 -= 2;

400 
w¿µ”
->
şassName
 = className;

404 
size
 = 2;

405 
size
 +ğ
w¿µ”
->
şassNameL’gth
;

406 
size
 += 2;

408 
w¿µ”
->
m‘hodNameL’gth


409 ğ
	`¡¾’
(
w¿µ”
->
m‘hodCouÁ
->
m‘hod
->
Çme
);

411 
size
 += 2;

412 
size
 +ğ
w¿µ”
->
m‘hodNameL’gth
;

414 
size
 +ğ
THREAD_TYPE_SIZE
 * 
THREAD_STATE_SIZE
 * 
METHOD_STATE_SIZE
 * 2;

415 
w¿µ”
 = w¿µ”->
Ãxt
;

416 } 
w¿µ”
 !ğ
NULL
);

418 * 
tÙ®
 = (*è
¬g
;

419 *
tÙ®
 +ğ
size
;

422 
	}
}

425 
	#wr™eShÜt
(
de¡
, 
v®ue
) \

427 
u2
 
_v®ue
 = (
v®ue
); \

428 *
de¡
++ = (è(
_v®ue
 >> 8); \

429 *
de¡
++ = (è
_v®ue
; \

430 } 0);

	)

433 
	#wr™eSŒšg
(
de¡
, 
s
, 
Ëngth
) \

435 
u2
 
_Ëngth
 = (
Ëngth
); \

436 
	`wr™eShÜt
(
de¡
, 
_Ëngth
); \

437 
	`memıy
(
de¡
, 
s
, 
_Ëngth
); \

438 
de¡
 +ğ
_Ëngth
; \

439 } 0);

	)

444 
	$wr™eSÇpshÙEÁry
(* 
d©a
, * 
¬g
) {

445 
M‘hodCouÁW¿µ”
* 
w¿µ”
 = (M‘hodCouÁW¿µ”*è
d©a
;

448 ** 
off£tPoš‹r
 = (**è
¬g
;

449 * 
off£t
 = *
off£tPoš‹r
;

452 
	`wr™eSŒšg
(
off£t
, 
w¿µ”
->
şassName
, w¿µ”->
şassNameL’gth
);

453 
	`¦ashesToDÙs
(
off£t
 - 
w¿µ”
->
şassNameL’gth
, wrapper->classNameLength);

456 * 
m‘hodCouÁPoš‹r
 = 
off£t
;

457 
u2
 
m‘hodCouÁ
 = 0;

458 
off£t
 += 2;

463 
	`wr™eSŒšg
(
off£t
, 
w¿µ”
->
m‘hodCouÁ
->
m‘hod
->
Çme
,

464 
w¿µ”
->
m‘hodNameL’gth
);

467 
	`u2
 (*
couÁs
)[
THREAD_STATE_SIZE
][
METHOD_STATE_SIZE
]

468 ğ
w¿µ”
->
m‘hodCouÁ
->
couÁs
;

469 
ty³
, 
th»adS‹
, 
m‘hodS‹
;

470 
ty³
 = 0;y³ < 
THREAD_TYPE_SIZE
;ype++)

471 
th»adS‹
 = 0;h»adS‹ < 
THREAD_STATE_SIZE
;

472 
th»adS‹
++)

473 
m‘hodS‹
 = 0; m‘hodS‹ < 
METHOD_STATE_SIZE
;

474 
m‘hodS‹
++)

475 
	`wr™eShÜt
(
off£t
, 
couÁs
[
ty³
][
th»adS‹
][
m‘hodS‹
]);

477 
m‘hodCouÁ
++;

478 
w¿µ”
 = w¿µ”->
Ãxt
;

479 } 
w¿µ”
 !ğ
NULL
);

482 
	`wr™eShÜt
(
m‘hodCouÁPoš‹r
, 
m‘hodCouÁ
);

485 *
off£tPoš‹r
 = 
off£t
;

487 
	}
}

492 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_¢­shÙ
(cÚ¡ 
u4
* 
¬gs
,

493 
JV®ue
* 
pResuÉ
) {

521 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
¬gs
[0];

522 ià(
£t
->
size
 == 0) {

524 
	`RETURN_PTR
(
NULL
);

527 
M‘hodCouÁW¿µ”
* 
w¿µ”s
 = (M‘hodCouÁW¿µ”*è
	`ÿÎoc
(
£t
->
size
,

528 (
M‘hodCouÁW¿µ”
));

529 ià(
w¿µ”s
 =ğ
NULL
) {

530 
	`LOGW
("Out of memory.");

531 
	`RETURN_PTR
(
NULL
);

535 
HashTabË
* 
byCÏss
 = 
	`dvmHashTabËC»©e
(
£t
->
size
, 
NULL
);

536 ià(
byCÏss
 =ğ
NULL
) {

537 
	`ä“
(
w¿µ”s
);

538 
	`LOGW
("Out of memory.");

539 
	`RETURN_PTR
(
NULL
);

543 
£tIndex
;

544 
w¿µ”Index
;

545 
£tIndex
 = 
£t
->
ÿ·c™y
 - 1, 
w¿µ”Index
 = 0;

546 
£tIndex
 >ğ0 && 
w¿µ”Index
 < 
£t
->
size
;

547 
£tIndex
--) {

548 
M‘hodCouÁ
* 
mc
 = &
£t
->
’Œ›s
[
£tIndex
];

549 cÚ¡ 
M‘hod
* 
m‘hod
 = 
mc
->method;

550 ià(
m‘hod
 !ğ
NULL
 && 
	`isV®idM‘hod
(method)) {

551 
M‘hodCouÁW¿µ”
* 
w¿µ”
 = &
w¿µ”s
[
w¿µ”Index
];

552 
w¿µ”
->
m‘hodCouÁ
 = 
mc
;

553 
w¿µ”
->
şazz
 = 
mc
->
m‘hod
->clazz;

554 
u4
 
h
 = 
	`hash
(
w¿µ”
->
şazz
);

555 
M‘hodCouÁW¿µ”
* 
äomTabË
 = 
	`dvmHashTabËLookup
(
byCÏss
, 
h
,

556 
w¿µ”
, 
com·»M‘hodCouÁCÏs£s
, 
Œue
);

557 ià(
äomTabË
 !ğ
w¿µ”
) {

559 
w¿µ”
->
Ãxt
 = 
äomTabË
->next;

560 
äomTabË
->
Ãxt
 = 
w¿µ”
;

562 
w¿µ”Index
++;

567 
tÙ®Size
 = 4;

568 
	`dvmHashFÜ—ch
(
byCÏss
, 
ÿlcuÏ‹SÇpshÙEÁrySize
, &
tÙ®Size
);

571 
A¼ayObjeù
* 
¢­shÙ


572 ğ
	`dvmAÎocPrim™iveA¼ay
('B', 
tÙ®Size
, 
ALLOC_DEFAULT
);

573 ià(
¢­shÙ
 =ğ
NULL
) {

576 
	`LOGW
("Out of memory.");

577 
	`ä“
(
w¿µ”s
);

578 
	`dvmHashTabËF»e
(
byCÏss
);

579 
	`RETURN_PTR
(
NULL
);

582 * 
off£t
 = (*è
¢­shÙ
->
cÚ‹Ás
;

583 
	`wr™eShÜt
(
off£t
, 1);

584 
	`wr™eShÜt
(
off£t
, 
	`dvmHashTabËNumEÁr›s
(
byCÏss
));

585 
	`dvmHashFÜ—ch
(
byCÏss
, 
wr™eSÇpshÙEÁry
, &
off£t
);

588 
aùu®Size
 = 
off£t
 - (*è
¢­shÙ
->
cÚ‹Ás
;

589 ià(
aùu®Size
 !ğ
tÙ®Size
) {

590 
	`LOGE
("ex³ùed: %d,‡ùu®: %d", 
tÙ®Size
, 
aùu®Size
);

591 
	`abÜt
();

594 
	`dvmHashTabËF»e
(
byCÏss
);

595 
	`ä“
(
w¿µ”s
);

597 
	`ş—rSam¶eS‘
(
£t
);

599 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¢­shÙ
, 
NULL
);

600 
	`RETURN_PTR
(
¢­shÙ
);

601 
	}
}

606 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_®loÿ‹
(cÚ¡ 
u4
* 
¬gs
,

607 
JV®ue
* 
pResuÉ
) {

608 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
	`m®loc
((SampleSet));

609 *
£t
 = 
	`ÃwSam¶eS‘
(
INITIAL_CAPACITY
);

610 
	`RETURN_INT
((
jšt
è
£t
);

611 
	}
}

616 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_ä“
(cÚ¡ 
u4
* 
¬gs
,

617 
JV®ue
* 
pResuÉ
) {

618 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
¬gs
[0];

619 
	`ä“
(
£t
->
’Œ›s
);

620 
	`ä“
(
£t
);

621 
	`RETURN_VOID
();

622 
	}
}

627 
	$D®vik_d®vik_sy¡em_Sam¶šgProf”_£tEv’tTh»ad
(cÚ¡ 
u4
* 
¬gs
,

628 
JV®ue
* 
pResuÉ
) {

629 
Sam¶eS‘
* 
£t
 = (Sam¶eS‘*è
¬gs
[0];

630 
Objeù
* 
ev’tTh»ad
 = (Objeù*è
¬gs
[1];

631 
Objeù
* 
vmTh»ad
 = 
	`dvmG‘F›ldObjeù
(
ev’tTh»ad
,

632 
gDvm
.
offJavaLªgTh»ad_vmTh»ad
);

633 
£t
->
ev’tTh»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
vmTh»ad
);

634 
	`RETURN_VOID
();

635 
	}
}

637 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_Sam¶šgProf”
[] = {

638 { "cŞlisiÚs", "(I)I", 
D®vik_d®vik_sy¡em_Sam¶šgProf”_cŞlisiÚs
 },

639 { "size", "(I)I", 
D®vik_d®vik_sy¡em_Sam¶šgProf”_size
 },

640 { "§m¶e", "(I)I", 
D®vik_d®vik_sy¡em_Sam¶šgProf”_§m¶e
 },

641 { "¢­shÙ", "(I)[B", 
D®vik_d®vik_sy¡em_Sam¶šgProf”_¢­shÙ
 },

642 { "ä“", "(I)V", 
D®vik_d®vik_sy¡em_Sam¶šgProf”_ä“
 },

643 { "®loÿ‹", "()I", 
D®vik_d®vik_sy¡em_Sam¶šgProf”_®loÿ‹
 },

645 
D®vik_d®vik_sy¡em_Sam¶šgProf”_£tEv’tTh»ad
 },

646 { 
NULL
, NULL, NULL },

	@native/dalvik_system_Taint.c

22 
	~"D®vik.h
"

23 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

24 
	~"©Œ/x©Œ.h
"

26 
	~<”ºo.h
>

28 
	#TAINT_XATTR_NAME
 "u£r.št"

	)

33 
	$D®vik_d®vik_sy¡em_Tašt_addTaštSŒšg
(cÚ¡ 
u4
* 
¬gs
,

34 
JV®ue
* 
pResuÉ
)

36 
SŒšgObjeù
 *
¡rObj
 = (SŒšgObjeù*è
¬gs
[0];

37 
u4
 
g
 = 
¬gs
[1];

38 
A¼ayObjeù
 *
v®ue
 = 
NULL
;

40 ià(
¡rObj
) {

41 
v®ue
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*)
¡rObj
,

42 
gDvm
.
offJavaLªgSŒšg_v®ue
);

43 
v®ue
->
št
.
g
 |=ag;

45 
	`RETURN_VOID
();

46 
	}
}

51 
	$D®vik_d®vik_sy¡em_Tašt_addTaštObjeùA¼ay
(cÚ¡ 
u4
* 
¬gs
,

52 
JV®ue
* 
pResuÉ
)

54 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

55 
u4
 
g
 = 
¬gs
[1];

56 ià(
¬r
) {

57 
¬r
->
št
.
g
 |=ag;

59 
	`RETURN_VOID
();

60 
	}
}

65 
	$D®vik_d®vik_sy¡em_Tašt_addTaštBoŞ—nA¼ay
(cÚ¡ 
u4
* 
¬gs
,

66 
JV®ue
* 
pResuÉ
)

68 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

69 
u4
 
g
 = 
¬gs
[1];

70 ià(
¬r
) {

71 
¬r
->
št
.
g
 |=ag;

73 
	`RETURN_VOID
();

74 
	}
}

79 
	$D®vik_d®vik_sy¡em_Tašt_addTaštCh¬A¼ay
(cÚ¡ 
u4
* 
¬gs
,

80 
JV®ue
* 
pResuÉ
)

82 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

83 
u4
 
g
 = 
¬gs
[1];

84 ià(
¬r
) {

85 
¬r
->
št
.
g
 |=ag;

87 
	`RETURN_VOID
();

88 
	}
}

93 
	$D®vik_d®vik_sy¡em_Tašt_addTaštBy‹A¼ay
(cÚ¡ 
u4
* 
¬gs
,

94 
JV®ue
* 
pResuÉ
)

96 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

97 
u4
 
g
 = 
¬gs
[1];

98 ià(
¬r
) {

99 
¬r
->
št
.
g
 |=ag;

101 
	`RETURN_VOID
();

102 
	}
}

107 
	$D®vik_d®vik_sy¡em_Tašt_addTaštIÁA¼ay
(cÚ¡ 
u4
* 
¬gs
,

108 
JV®ue
* 
pResuÉ
)

110 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

111 
u4
 
g
 = 
¬gs
[1];

112 ià(
¬r
) {

113 
¬r
->
št
.
g
 |=ag;

115 
	`RETURN_VOID
();

116 
	}
}

121 
	$D®vik_d®vik_sy¡em_Tašt_addTaštShÜtA¼ay
(cÚ¡ 
u4
* 
¬gs
,

122 
JV®ue
* 
pResuÉ
)

124 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

125 
u4
 
g
 = 
¬gs
[1];

126 ià(
¬r
) {

127 
¬r
->
št
.
g
 |=ag;

129 
	`RETURN_VOID
();

130 
	}
}

135 
	$D®vik_d®vik_sy¡em_Tašt_addTaštLÚgA¼ay
(cÚ¡ 
u4
* 
¬gs
,

136 
JV®ue
* 
pResuÉ
)

138 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

139 
u4
 
g
 = 
¬gs
[1];

140 ià(
¬r
) {

141 
¬r
->
št
.
g
 |=ag;

143 
	`RETURN_VOID
();

144 
	}
}

149 
	$D®vik_d®vik_sy¡em_Tašt_addTaštFlßtA¼ay
(cÚ¡ 
u4
* 
¬gs
,

150 
JV®ue
* 
pResuÉ
)

152 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

153 
u4
 
g
 = 
¬gs
[1];

154 ià(
¬r
) {

155 
¬r
->
št
.
g
 |=ag;

157 
	`RETURN_VOID
();

158 
	}
}

163 
	$D®vik_d®vik_sy¡em_Tašt_addTaštDoubËA¼ay
(cÚ¡ 
u4
* 
¬gs
,

164 
JV®ue
* 
pResuÉ
)

166 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

167 
u4
 
g
 = 
¬gs
[1];

168 ià(
¬r
) {

169 
¬r
->
št
.
g
 |=ag;

171 
	`RETURN_VOID
();

172 
	}
}

177 
	$D®vik_d®vik_sy¡em_Tašt_addTaštBoŞ—n
(cÚ¡ 
u4
* 
¬gs
,

178 
JV®ue
* 
pResuÉ
)

180 
u4
 
v®
 = 
¬gs
[0];

181 
u4
 
g
 = 
¬gs
[1];

182 
u4
* 
¹ašt
 = (u4*è&
¬gs
[2];

183 
u4
 
všt
 = 
¬gs
[3];

184 *
¹ašt
 = (
všt
 | 
g
);

185 
	`RETURN_BOOLEAN
(
v®
);

186 
	}
}

191 
	$D®vik_d®vik_sy¡em_Tašt_addTaštCh¬
(cÚ¡ 
u4
* 
¬gs
,

192 
JV®ue
* 
pResuÉ
)

194 
u4
 
v®
 = 
¬gs
[0];

195 
u4
 
g
 = 
¬gs
[1];

196 
u4
* 
¹ašt
 = (u4*è&
¬gs
[2];

197 
u4
 
všt
 = 
¬gs
[3];

198 *
¹ašt
 = (
všt
 | 
g
);

199 
	`RETURN_CHAR
(
v®
);

200 
	}
}

205 
	$D®vik_d®vik_sy¡em_Tašt_addTaštBy‹
(cÚ¡ 
u4
* 
¬gs
,

206 
JV®ue
* 
pResuÉ
)

208 
u4
 
v®
 = 
¬gs
[0];

209 
u4
 
g
 = 
¬gs
[1];

210 
u4
* 
¹ašt
 = (u4*è&
¬gs
[2];

211 
u4
 
všt
 = 
¬gs
[3];

212 *
¹ašt
 = (
všt
 | 
g
);

213 
	`RETURN_BYTE
(
v®
);

214 
	}
}

219 
	$D®vik_d®vik_sy¡em_Tašt_addTaštIÁ
(cÚ¡ 
u4
* 
¬gs
,

220 
JV®ue
* 
pResuÉ
)

222 
u4
 
v®
 = 
¬gs
[0];

223 
u4
 
g
 = 
¬gs
[1];

224 
u4
* 
¹ašt
 = (u4*è&
¬gs
[2];

225 
u4
 
všt
 = 
¬gs
[3];

226 *
¹ašt
 = (
všt
 | 
g
);

227 
	`RETURN_INT
(
v®
);

228 
	}
}

233 
	$D®vik_d®vik_sy¡em_Tašt_addTaštLÚg
(cÚ¡ 
u4
* 
¬gs
,

234 
JV®ue
* 
pResuÉ
)

236 
u8
 
v®
;

237 
u4
 
g
 = 
¬gs
[2];

238 
u4
* 
¹ašt
 = (u4*è&
¬gs
[3];

239 
u4
 
všt
 = 
¬gs
[4];

240 
	`memıy
(&
v®
, &
¬gs
[0], 8);

241 *
¹ašt
 = (
všt
 | 
g
);

242 
	`RETURN_LONG
(
v®
);

243 
	}
}

248 
	$D®vik_d®vik_sy¡em_Tašt_addTaštFlßt
(cÚ¡ 
u4
* 
¬gs
,

249 
JV®ue
* 
pResuÉ
)

251 
u4
 
v®
 = 
¬gs
[0];

252 
u4
 
g
 = 
¬gs
[1];

253 
u4
* 
¹ašt
 = (u4*è&
¬gs
[2];

254 
u4
 
všt
 = 
¬gs
[3];

255 *
¹ašt
 = (
všt
 | 
g
);

256 
	`RETURN_INT
(
v®
);

257 
	}
}

262 
	$D®vik_d®vik_sy¡em_Tašt_addTaštDoubË
(cÚ¡ 
u4
* 
¬gs
,

263 
JV®ue
* 
pResuÉ
)

265 
u8
 
v®
;

266 
u4
 
g
 = 
¬gs
[2];

267 
u4
* 
¹ašt
 = (u4*è&
¬gs
[3];

268 
u4
 
všt
 = 
¬gs
[4];

269 
	`memıy
(&
v®
, &
¬gs
[0], 8);

270 *
¹ašt
 = (
všt
 | 
g
);

271 
	`RETURN_LONG
(
v®
);

272 
	}
}

277 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštSŒšg
(cÚ¡ 
u4
* 
¬gs
,

278 
JV®ue
* 
pResuÉ
)

280 
SŒšgObjeù
 *
¡rObj
 = (SŒšgObjeù*è
¬gs
[0];

281 
A¼ayObjeù
 *
v®ue
 = 
NULL
;

283 ià(
¡rObj
) {

284 
v®ue
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
((
Objeù
*)
¡rObj
,

285 
gDvm
.
offJavaLªgSŒšg_v®ue
);

286 
	`RETURN_INT
(
v®ue
->
št
.
g
);

288 
	`RETURN_INT
(
TAINT_CLEAR
);

290 
	}
}

295 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštObjeùA¼ay
(cÚ¡ 
u4
* 
¬gs
,

296 
JV®ue
* 
pResuÉ
)

298 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

299 ià(
¬r
) {

300 
	`RETURN_INT
(
¬r
->
št
.
g
);

302 
	`RETURN_INT
(
TAINT_CLEAR
);

304 
	}
}

309 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštBoŞ—nA¼ay
(cÚ¡ 
u4
* 
¬gs
,

310 
JV®ue
* 
pResuÉ
)

312 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

313 ià(
¬r
) {

314 
	`RETURN_INT
(
¬r
->
št
.
g
);

316 
	`RETURN_INT
(
TAINT_CLEAR
);

318 
	}
}

323 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštCh¬A¼ay
(cÚ¡ 
u4
* 
¬gs
,

324 
JV®ue
* 
pResuÉ
)

326 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

327 ià(
¬r
) {

328 
	`RETURN_INT
(
¬r
->
št
.
g
);

330 
	`RETURN_INT
(
TAINT_CLEAR
);

332 
	}
}

337 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštBy‹A¼ay
(cÚ¡ 
u4
* 
¬gs
,

338 
JV®ue
* 
pResuÉ
)

340 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

341 ià(
¬r
) {

342 
	`RETURN_INT
(
¬r
->
št
.
g
);

344 
	`RETURN_INT
(
TAINT_CLEAR
);

346 
	}
}

351 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštIÁA¼ay
(cÚ¡ 
u4
* 
¬gs
,

352 
JV®ue
* 
pResuÉ
)

354 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

355 ià(
¬r
) {

356 
	`RETURN_INT
(
¬r
->
št
.
g
);

358 
	`RETURN_INT
(
TAINT_CLEAR
);

360 
	}
}

365 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštShÜtA¼ay
(cÚ¡ 
u4
* 
¬gs
,

366 
JV®ue
* 
pResuÉ
)

368 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

369 ià(
¬r
) {

370 
	`RETURN_INT
(
¬r
->
št
.
g
);

372 
	`RETURN_INT
(
TAINT_CLEAR
);

374 
	}
}

379 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštLÚgA¼ay
(cÚ¡ 
u4
* 
¬gs
,

380 
JV®ue
* 
pResuÉ
)

382 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

383 ià(
¬r
) {

384 
	`RETURN_INT
(
¬r
->
št
.
g
);

386 
	`RETURN_INT
(
TAINT_CLEAR
);

388 
	}
}

393 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštFlßtA¼ay
(cÚ¡ 
u4
* 
¬gs
,

394 
JV®ue
* 
pResuÉ
)

396 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

397 ià(
¬r
) {

398 
	`RETURN_INT
(
¬r
->
št
.
g
);

400 
	`RETURN_INT
(
TAINT_CLEAR
);

402 
	}
}

407 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštDoubËA¼ay
(cÚ¡ 
u4
* 
¬gs
,

408 
JV®ue
* 
pResuÉ
)

410 
A¼ayObjeù
 *
¬r
 = (A¼ayObjeù *è
¬gs
[0];

411 ià(
¬r
) {

412 
	`RETURN_INT
(
¬r
->
št
.
g
);

414 
	`RETURN_INT
(
TAINT_CLEAR
);

416 
	}
}

421 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštBoŞ—n
(cÚ¡ 
u4
* 
¬gs
,

422 
JV®ue
* 
pResuÉ
)

426 
u4
 
g
 = 
¬gs
[2];

427 
	`RETURN_INT
(
g
);

428 
	}
}

433 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštCh¬
(cÚ¡ 
u4
* 
¬gs
,

434 
JV®ue
* 
pResuÉ
)

438 
u4
 
g
 = 
¬gs
[2];

439 
	`RETURN_INT
(
g
);

440 
	}
}

445 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštBy‹
(cÚ¡ 
u4
* 
¬gs
,

446 
JV®ue
* 
pResuÉ
)

450 
u4
 
g
 = 
¬gs
[2];

451 
	`RETURN_INT
(
g
);

452 
	}
}

457 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštIÁ
(cÚ¡ 
u4
* 
¬gs
,

458 
JV®ue
* 
pResuÉ
)

462 
u4
 
g
 = 
¬gs
[2];

463 
	`RETURN_INT
(
g
);

464 
	}
}

469 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštLÚg
(cÚ¡ 
u4
* 
¬gs
,

470 
JV®ue
* 
pResuÉ
)

474 
u4
 
g
 = 
¬gs
[3];

475 
	`RETURN_INT
(
g
);

476 
	}
}

481 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštFlßt
(cÚ¡ 
u4
* 
¬gs
,

482 
JV®ue
* 
pResuÉ
)

486 
u4
 
g
 = 
¬gs
[2];

487 
	`RETURN_INT
(
g
);

488 
	}
}

493 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštDoubË
(cÚ¡ 
u4
* 
¬gs
,

494 
JV®ue
* 
pResuÉ
)

498 
u4
 
g
 = 
¬gs
[3];

499 
	`RETURN_INT
(
g
);

500 
	}
}

505 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštRef
(cÚ¡ 
u4
* 
¬gs
,

506 
JV®ue
* 
pResuÉ
)

510 
u4
 
g
 = 
¬gs
[2];

511 
	`RETURN_INT
(
g
);

512 
	}
}

514 
u4
 
	$g‘TaštX©Œ
(
fd
)

516 
»t
;

517 
u4
 
buf
;

518 
u4
 
g
 = 
TAINT_CLEAR
;

520 
»t
 = 
	`fg‘x©Œ
(
fd
, 
TAINT_XATTR_NAME
, &
buf
, (buf));

521 ià(
»t
 > 0) {

522 
g
 = 
buf
;

524 ià(
”ºo
 =ğ
ENOATTR
) {

526 } ià(
”ºo
 =ğ
ERANGE
) {

527 
	`LOGW
("TaštLog: fg‘x©Œ(%dècÚ‹Á tØÏrge", 
fd
);

528 } ià(
”ºo
 =ğ
ENOTSUP
) {

531 
	`LOGW
("TaštLog: fg‘x©Œ(%d): unknowÀ”rÜ cod%d", 
fd
, 
”ºo
);

535  
g
;

536 
	}
}

538 
	$£tTaštX©Œ
(
fd
, 
u4
 
g
)

540 
»t
;

542 
»t
 = 
	`f£tx©Œ
(
fd
, 
TAINT_XATTR_NAME
, &
g
, (tag), 0);

544 ià(
»t
 < 0) {

545 ià(
”ºo
 =ğ
ENOSPC
 ||ƒ¼nØ=ğ
EDQUOT
) {

546 
	`LOGW
("TaštLog: f£tx©Œ(%d):‚Ùƒnough„oomØ£ˆx©Œ", 
fd
);

547 } ià(
”ºo
 =ğ
ENOTSUP
) {

550 
	`LOGW
("TaštLog: f£tx©Œ(%d): unknowÀ”rÜ cod%d", 
fd
, 
”ºo
);

554 
	}
}

559 
	$D®vik_d®vik_sy¡em_Tašt_g‘TaštFe
(cÚ¡ 
u4
* 
¬gs
,

560 
JV®ue
* 
pResuÉ
)

562 
u4
 
g
;

563 
fd
 = ()
¬gs
[0];

567 
g
 = 
	`g‘TaštX©Œ
(
fd
);

569 ià(
g
) {

570 
	`LOGI
("TaštLog: g‘TaštFe(%dèğ0x%08x", 
fd
, 
g
);

573 
	`RETURN_INT
(
g
);

574 
	}
}

579 
	$D®vik_d®vik_sy¡em_Tašt_addTaštFe
(cÚ¡ 
u4
* 
¬gs
,

580 
JV®ue
* 
pResuÉ
)

582 
u4
 
Ùag
;

583 
fd
 = ()
¬gs
[0];

584 
u4
 
g
 = 
¬gs
[1];

589 
Ùag
 = 
	`g‘TaštX©Œ
(
fd
);

591 ià(
g
) {

592 
	`LOGI
("TaintLog:‡ddTaintFile(%d):‡dding 0x%08xo 0x%08x = 0x%08x",

593 
fd
, 
g
, 
Ùag
,ag | otag);

596 
	`£tTaštX©Œ
(
fd
, 
g
 | 
Ùag
);

598 
	`RETURN_VOID
();

599 
	}
}

604 
	$D®vik_d®vik_sy¡em_Tašt_log
(cÚ¡ 
u4
* 
¬gs
,

605 
JV®ue
* 
pResuÉ
)

607 
SŒšgObjeù
* 
msgObj
 = (SŒšgObjeù*è
¬gs
[0];

608 *
msg
;

610 ià(
msgObj
 =ğ
NULL
) {

611 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

612 
	`RETURN_VOID
();

615 
msg
 = 
	`dvmC»©eC¡rFromSŒšg
(
msgObj
);

616 
	`LOGW
("TaštLog: %s", 
msg
);

617 
	`ä“
(
msg
);

619 
	`RETURN_VOID
();

620 
	}
}

625 
	$D®vik_d®vik_sy¡em_Tašt_logP©hFromFd
(cÚ¡ 
u4
* 
¬gs
,

626 
JV®ue
* 
pResuÉ
)

628 
fd
 = (è
¬gs
[0];

629 
pid_t
 
pid
;

630 
µ©h
[20];

631 
½©h
[80];

632 
”r
;

635 
pid
 = 
	`g‘pid
();

636 
	`¢´štf
(
µ©h
, 20, "/´oc/%d/fd/%d", 
pid
, 
fd
);

637 
”r
 = 
	`»adlšk
(
µ©h
, 
½©h
, 80);

638 ià(
”r
 >= 0) {

639 
	`LOGW
("TaštLog: fd %d -> %s", 
fd
, 
½©h
);

641 
	`LOGW
("TaštLog:ƒ¼Ü fšdšg…©h fÜ fd %d", 
fd
);

644 
	`RETURN_VOID
();

645 
	}
}

650 
	$D®vik_d®vik_sy¡em_Tašt_logP“rFromFd
(cÚ¡ 
u4
* 
¬gs
,

651 
JV®ue
* 
pResuÉ
)

653 
fd
 = (è
¬gs
[0];

655 
	`LOGW
("TaintLog:†ogPeerFromFd‚ot yet implemented");

657 
	`RETURN_VOID
();

658 
	}
}

660 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_Tašt
[] = {

662 
D®vik_d®vik_sy¡em_Tašt_addTaštSŒšg
},

664 
D®vik_d®vik_sy¡em_Tašt_addTaštObjeùA¼ay
},

666 
D®vik_d®vik_sy¡em_Tašt_addTaštBoŞ—nA¼ay
},

668 
D®vik_d®vik_sy¡em_Tašt_addTaštCh¬A¼ay
},

670 
D®vik_d®vik_sy¡em_Tašt_addTaštBy‹A¼ay
},

672 
D®vik_d®vik_sy¡em_Tašt_addTaštIÁA¼ay
},

674 
D®vik_d®vik_sy¡em_Tašt_addTaštShÜtA¼ay
},

676 
D®vik_d®vik_sy¡em_Tašt_addTaštLÚgA¼ay
},

678 
D®vik_d®vik_sy¡em_Tašt_addTaštFlßtA¼ay
},

680 
D®vik_d®vik_sy¡em_Tašt_addTaštDoubËA¼ay
},

682 
D®vik_d®vik_sy¡em_Tašt_addTaštBoŞ—n
},

684 
D®vik_d®vik_sy¡em_Tašt_addTaštCh¬
},

686 
D®vik_d®vik_sy¡em_Tašt_addTaštBy‹
},

688 
D®vik_d®vik_sy¡em_Tašt_addTaštIÁ
},

690 
D®vik_d®vik_sy¡em_Tašt_addTaštLÚg
},

692 
D®vik_d®vik_sy¡em_Tašt_addTaštFlßt
},

694 
D®vik_d®vik_sy¡em_Tašt_addTaštDoubË
},

696 
D®vik_d®vik_sy¡em_Tašt_g‘TaštSŒšg
},

698 
D®vik_d®vik_sy¡em_Tašt_g‘TaštObjeùA¼ay
},

700 
D®vik_d®vik_sy¡em_Tašt_g‘TaštBoŞ—nA¼ay
},

702 
D®vik_d®vik_sy¡em_Tašt_g‘TaštCh¬A¼ay
},

704 
D®vik_d®vik_sy¡em_Tašt_g‘TaštBy‹A¼ay
},

706 
D®vik_d®vik_sy¡em_Tašt_g‘TaštIÁA¼ay
},

708 
D®vik_d®vik_sy¡em_Tašt_g‘TaštShÜtA¼ay
},

710 
D®vik_d®vik_sy¡em_Tašt_g‘TaštLÚgA¼ay
},

712 
D®vik_d®vik_sy¡em_Tašt_g‘TaštFlßtA¼ay
},

714 
D®vik_d®vik_sy¡em_Tašt_g‘TaštDoubËA¼ay
},

716 
D®vik_d®vik_sy¡em_Tašt_g‘TaštBoŞ—n
},

718 
D®vik_d®vik_sy¡em_Tašt_g‘TaštCh¬
},

720 
D®vik_d®vik_sy¡em_Tašt_g‘TaštBy‹
},

722 
D®vik_d®vik_sy¡em_Tašt_g‘TaštIÁ
},

724 
D®vik_d®vik_sy¡em_Tašt_g‘TaštLÚg
},

726 
D®vik_d®vik_sy¡em_Tašt_g‘TaštFlßt
},

728 
D®vik_d®vik_sy¡em_Tašt_g‘TaštDoubË
},

730 
D®vik_d®vik_sy¡em_Tašt_g‘TaštRef
},

732 
D®vik_d®vik_sy¡em_Tašt_g‘TaštFe
},

734 
D®vik_d®vik_sy¡em_Tašt_addTaštFe
},

736 
D®vik_d®vik_sy¡em_Tašt_log
},

738 
D®vik_d®vik_sy¡em_Tašt_logP©hFromFd
},

740 
D®vik_d®vik_sy¡em_Tašt_logP“rFromFd
},

741 { 
NULL
, NULL, NULL },

	@native/dalvik_system_VMDebug.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

24 #ifdeà
WITH_PROFILER


28 
	mKIND_ALLOCATED_OBJECTS
 = 1<<0,

29 
	mKIND_ALLOCATED_BYTES
 = 1<<1,

30 
	mKIND_FREED_OBJECTS
 = 1<<2,

31 
	mKIND_FREED_BYTES
 = 1<<3,

32 
	mKIND_GC_INVOCATIONS
 = 1<<4,

33 #ià
PROFILE_EXTERNAL_ALLOCATIONS


34 
	mKIND_EXT_ALLOCATED_OBJECTS
 = 1<<12,

35 
	mKIND_EXT_ALLOCATED_BYTES
 = 1<<13,

36 
	mKIND_EXT_FREED_OBJECTS
 = 1<<14,

37 
	mKIND_EXT_FREED_BYTES
 = 1<<15,

40 
	mKIND_GLOBAL_ALLOCATED_OBJECTS
 = 
KIND_ALLOCATED_OBJECTS
,

41 
	mKIND_GLOBAL_ALLOCATED_BYTES
 = 
KIND_ALLOCATED_BYTES
,

42 
	mKIND_GLOBAL_FREED_OBJECTS
 = 
KIND_FREED_OBJECTS
,

43 
	mKIND_GLOBAL_FREED_BYTES
 = 
KIND_FREED_BYTES
,

44 
	mKIND_GLOBAL_GC_INVOCATIONS
 = 
KIND_GC_INVOCATIONS
,

45 #ià
PROFILE_EXTERNAL_ALLOCATIONS


46 
	mKIND_GLOBAL_EXT_ALLOCATED_OBJECTS
 = 
KIND_EXT_ALLOCATED_OBJECTS
,

47 
	mKIND_GLOBAL_EXT_ALLOCATED_BYTES
 = 
KIND_EXT_ALLOCATED_BYTES
,

48 
	mKIND_GLOBAL_EXT_FREED_OBJECTS
 = 
KIND_EXT_FREED_OBJECTS
,

49 
	mKIND_GLOBAL_EXT_FREED_BYTES
 = 
KIND_EXT_FREED_BYTES
,

52 
	mKIND_THREAD_ALLOCATED_OBJECTS
 = 
KIND_ALLOCATED_OBJECTS
 << 16,

53 
	mKIND_THREAD_ALLOCATED_BYTES
 = 
KIND_ALLOCATED_BYTES
 << 16,

54 
	mKIND_THREAD_FREED_OBJECTS
 = 
KIND_FREED_OBJECTS
 << 16,

55 
	mKIND_THREAD_FREED_BYTES
 = 
KIND_FREED_BYTES
 << 16,

56 #ià
PROFILE_EXTERNAL_ALLOCATIONS


57 
	mKIND_THREAD_EXT_ALLOCATED_OBJECTS
 = 
KIND_EXT_ALLOCATED_OBJECTS
 << 16,

58 
	mKIND_THREAD_EXT_ALLOCATED_BYTES
 = 
KIND_EXT_ALLOCATED_BYTES
 << 16,

59 
	mKIND_THREAD_EXT_FREED_OBJECTS
 = 
KIND_EXT_FREED_OBJECTS
 << 16,

60 
	mKIND_THREAD_EXT_FREED_BYTES
 = 
KIND_EXT_FREED_BYTES
 << 16,

62 
	mKIND_THREAD_GC_INVOCATIONS
 = 
KIND_GC_INVOCATIONS
 << 16,

67 
	#KIND_ALL_COUNTS
 0xffffffff

	)

72 
	$ş—rAÎocProfS‹F›lds
(
AÎocProfS‹
 *
®locProf
,

73 
kšds
)

75 ià(
kšds
 & 
KIND_ALLOCATED_OBJECTS
) {

76 
®locProf
->
®locCouÁ
 = 0;

78 ià(
kšds
 & 
KIND_ALLOCATED_BYTES
) {

79 
®locProf
->
®locSize
 = 0;

81 ià(
kšds
 & 
KIND_FREED_OBJECTS
) {

82 
®locProf
->
ä“CouÁ
 = 0;

84 ià(
kšds
 & 
KIND_FREED_BYTES
) {

85 
®locProf
->
ä“Size
 = 0;

87 ià(
kšds
 & 
KIND_GC_INVOCATIONS
) {

88 
®locProf
->
gcCouÁ
 = 0;

90 #ià
PROFILE_EXTERNAL_ALLOCATIONS


91 ià(
kšds
 & 
KIND_EXT_ALLOCATED_OBJECTS
) {

92 
®locProf
->
ex‹º®AÎocCouÁ
 = 0;

94 ià(
kšds
 & 
KIND_EXT_ALLOCATED_BYTES
) {

95 
®locProf
->
ex‹º®AÎocSize
 = 0;

97 ià(
kšds
 & 
KIND_EXT_FREED_OBJECTS
) {

98 
®locProf
->
ex‹º®F»eCouÁ
 = 0;

100 ià(
kšds
 & 
KIND_EXT_FREED_BYTES
) {

101 
®locProf
->
ex‹º®F»eSize
 = 0;

104 
	}
}

116 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tAÎocCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

117 
JV®ue
* 
pResuÉ
)

119 
	`UNUSED_PARAMETER
(
¬gs
);

121 #ifdeà
WITH_PROFILER


122 
	`ş—rAÎocProfS‹F›lds
(&
gDvm
.
®locProf
, 
KIND_ALL_COUNTS
);

123 
	`ş—rAÎocProfS‹F›lds
(&
	`dvmTh»adS–f
()->
®locProf
, 
KIND_ALL_COUNTS
);

124 
	`dvmS¹AÎocCouÁšg
();

126 
	`RETURN_VOID
();

127 
	}
}

132 
	$D®vik_d®vik_sy¡em_VMDebug_¡İAÎocCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

133 
JV®ue
* 
pResuÉ
)

135 
	`UNUSED_PARAMETER
(
¬gs
);

137 #ifdeà
WITH_PROFILER


138 
	`dvmStİAÎocCouÁšg
();

140 
	`RETURN_VOID
();

141 
	}
}

146 
	$D®vik_d®vik_sy¡em_VMDebug_g‘AÎocCouÁ
(cÚ¡ 
u4
* 
¬gs
,

147 
JV®ue
* 
pResuÉ
)

149 #ifdeà
WITH_PROFILER


150 
AÎocProfS‹
 *
®locProf
;

151 
kšd
 = 
¬gs
[0];

152 ià(
kšd
 < (1<<16)) {

153 
®locProf
 = &
gDvm
.allocProf;

155 
®locProf
 = &
	`dvmTh»adS–f
()->allocProf;

156 
kšd
 >>= 16;

158 
kšd
) {

159 
KIND_ALLOCATED_OBJECTS
:

160 
pResuÉ
->
i
 = 
®locProf
->
®locCouÁ
;

162 
KIND_ALLOCATED_BYTES
:

163 
pResuÉ
->
i
 = 
®locProf
->
®locSize
;

165 
KIND_FREED_OBJECTS
:

166 
pResuÉ
->
i
 = 
®locProf
->
ä“CouÁ
;

168 
KIND_FREED_BYTES
:

169 
pResuÉ
->
i
 = 
®locProf
->
ä“Size
;

171 
KIND_GC_INVOCATIONS
:

172 
pResuÉ
->
i
 = 
®locProf
->
gcCouÁ
;

174 #ià
PROFILE_EXTERNAL_ALLOCATIONS


175 
KIND_EXT_ALLOCATED_OBJECTS
:

176 
pResuÉ
->
i
 = 
®locProf
->
ex‹º®AÎocCouÁ
;

178 
KIND_EXT_ALLOCATED_BYTES
:

179 
pResuÉ
->
i
 = 
®locProf
->
ex‹º®AÎocSize
;

181 
KIND_EXT_FREED_OBJECTS
:

182 
pResuÉ
->
i
 = 
®locProf
->
ex‹º®F»eCouÁ
;

184 
KIND_EXT_FREED_BYTES
:

185 
pResuÉ
->
i
 = 
®locProf
->
ex‹º®F»eSize
;

189 
	`as£¹
(
çl£
);

190 
pResuÉ
->
i
 = -1;

193 
	`RETURN_INT
(-1);

195 
	}
}

200 
	$D®vik_d®vik_sy¡em_VMDebug_»£tAÎocCouÁ
(cÚ¡ 
u4
* 
¬gs
,

201 
JV®ue
* 
pResuÉ
)

203 #ifdeà
WITH_PROFILER


204 
kšds
 = 
¬gs
[0];

205 
	`ş—rAÎocProfS‹F›lds
(&
gDvm
.
®locProf
, 
kšds
 & 0xffff);

206 
	`ş—rAÎocProfS‹F›lds
(&
	`dvmTh»adS–f
()->
®locProf
, 
kšds
 >> 16);

208 
	`RETURN_VOID
();

209 
	}
}

217 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tM‘hodT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

218 
JV®ue
* 
pResuÉ
)

220 #ifdeà
WITH_PROFILER


221 
SŒšgObjeù
* 
ŒaûFeSŒ
 = (SŒšgObjeù*è
¬gs
[0];

222 
D©aObjeù
* 
ŒaûFd
 = (D©aObjeù*è
¬gs
[1];

223 
bufãrSize
 = 
¬gs
[2];

224 
æags
 = 
¬gs
[3];

225 * 
ŒaûFeName
;

227 ià(
bufãrSize
 == 0) {

229 
bufãrSize
 = 8 * 1024 * 1024;

232 ià(
ŒaûFeSŒ
 =ğ
NULL
 || 
bufãrSize
 < 1024) {

233 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÎeg®Argum’tExû±iÚ;", 
NULL
);

234 
	`RETURN_VOID
();

237 
ŒaûFeName
 = 
	`dvmC»©eC¡rFromSŒšg
(
ŒaûFeSŒ
);

239 
fd
 = -1;

240 ià(
ŒaûFd
 !ğ
NULL
) {

241 
In¡F›ld
* 
f›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
ŒaûFd
->
obj
.
şazz
, "descriptor", "I");

242 ià(
f›ld
 =ğ
NULL
) {

243 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchFieldException;",

245 
	`RETURN_VOID
();

247 
fd
 = 
	`dup
(
	`dvmG‘F›ldIÁ
(&
ŒaûFd
->
obj
, 
f›ld
->
by‹Off£t
));

250 
	`dvmM‘hodT¿ûS¹
(
ŒaûFeName
, 
fd
, 
bufãrSize
, 
æags
);

251 
	`ä“
(
ŒaûFeName
);

255 
	`RETURN_VOID
();

256 
	}
}

263 
	$D®vik_d®vik_sy¡em_VMDebug_isM‘hodT¿cšgAùive
(cÚ¡ 
u4
* 
¬gs
,

264 
JV®ue
* 
pResuÉ
)

266 
	`UNUSED_PARAMETER
(
¬gs
);

268 #ifdeà
WITH_PROFILER


269 
	`RETURN_BOOLEAN
(
	`dvmIsM‘hodT¿ûAùive
());

271 
	`RETURN_BOOLEAN
(
çl£
);

273 
	}
}

280 
	$D®vik_d®vik_sy¡em_VMDebug_¡İM‘hodT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

281 
JV®ue
* 
pResuÉ
)

283 
	`UNUSED_PARAMETER
(
¬gs
);

285 #ifdeà
WITH_PROFILER


286 
	`dvmM‘hodT¿ûStİ
();

290 
	`RETURN_VOID
();

291 
	}
}

298 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tEmuÏtÜT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

299 
JV®ue
* 
pResuÉ
)

301 
	`UNUSED_PARAMETER
(
¬gs
);

303 #ifdeà
WITH_PROFILER


304 
	`dvmEmuÏtÜT¿ûS¹
();

308 
	`RETURN_VOID
();

309 
	}
}

316 
	$D®vik_d®vik_sy¡em_VMDebug_¡İEmuÏtÜT¿cšg
(cÚ¡ 
u4
* 
¬gs
,

317 
JV®ue
* 
pResuÉ
)

319 
	`UNUSED_PARAMETER
(
¬gs
);

321 #ifdeà
WITH_PROFILER


322 
	`dvmEmuÏtÜT¿ûStİ
();

326 
	`RETURN_VOID
();

327 
	}
}

335 
	$D®vik_d®vik_sy¡em_VMDebug_£tAÎoÿtiÚLim™
(cÚ¡ 
u4
* 
¬gs
,

336 
JV®ue
* 
pResuÉ
)

338 #ià
	`defšed
(
WITH_ALLOC_LIMITS
)

339 
gDvm
.
checkAÎocLim™s
 = 
Œue
;

341 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

342 
ÃwLim™
 = 
¬gs
[0];

343 
ŞdLim™
 = 
£lf
->
®locLim™
;

345 ià(
ÃwLim™
 < -1) {

346 
	`LOGE
("WARNING: bad†im™„eque¡ (%d)\n", 
ÃwLim™
);

347 
ÃwLim™
 = -1;

349 
£lf
->
®locLim™
 = 
ÃwLim™
;

350 
	`RETURN_INT
(
ŞdLim™
);

352 
	`UNUSED_PARAMETER
(
¬gs
);

353 
	`RETURN_INT
(-1);

355 
	}
}

362 
	$D®vik_d®vik_sy¡em_VMDebug_£tGlob®AÎoÿtiÚLim™
(cÚ¡ 
u4
* 
¬gs
,

363 
JV®ue
* 
pResuÉ
)

365 #ià
	`defšed
(
WITH_ALLOC_LIMITS
)

366 
gDvm
.
checkAÎocLim™s
 = 
Œue
;

368 
ÃwLim™
 = 
¬gs
[0];

369 
ŞdLim™
 = 
gDvm
.
®loÿtiÚLim™
;

371 ià(
ÃwLim™
 < -1 ||‚ewLimit > 0) {

372 
	`LOGE
("WARNING: bad†im™„eque¡ (%d)\n", 
ÃwLim™
);

373 
ÃwLim™
 = -1;

376 
gDvm
.
®loÿtiÚLim™
 = 
ÃwLim™
;

377 
	`RETURN_INT
(
ŞdLim™
);

379 
	`UNUSED_PARAMETER
(
¬gs
);

380 
	`RETURN_INT
(-1);

382 
	}
}

389 
	$D®vik_d®vik_sy¡em_VMDebug_isDebugg”CÚÃùed
(cÚ¡ 
u4
* 
¬gs
,

390 
JV®ue
* 
pResuÉ
)

392 
	`UNUSED_PARAMETER
(
¬gs
);

394 
	`RETURN_BOOLEAN
(
	`dvmDbgIsDebugg”CÚÃùed
());

395 
	}
}

402 
	$D®vik_d®vik_sy¡em_VMDebug_isDebuggšgEÇbËd
(cÚ¡ 
u4
* 
¬gs
,

403 
JV®ue
* 
pResuÉ
)

405 
	`UNUSED_PARAMETER
(
¬gs
);

407 
	`RETURN_BOOLEAN
(
gDvm
.
jdwpCÚfigu»d
);

408 
	}
}

416 
	$D®vik_d®vik_sy¡em_VMDebug_Ï¡Debugg”Aùiv™y
(cÚ¡ 
u4
* 
¬gs
,

417 
JV®ue
* 
pResuÉ
)

419 
	`UNUSED_PARAMETER
(
¬gs
);

421 
	`RETURN_LONG
(
	`dvmDbgLa¡Debugg”Aùiv™y
());

422 
	}
}

427 
	$D®vik_d®vik_sy¡em_VMDebug_¡¬tIn¡ruùiÚCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

428 
JV®ue
* 
pResuÉ
)

430 #ià
	`defšed
(
WITH_PROFILER
)

431 
	`dvmS¹In¡ruùiÚCouÁšg
();

433 
	`dvmThrowExû±iÚ
("Ljava/Ïng/UnsuµÜ‹dO³¿tiÚExû±iÚ;", 
NULL
);

435 
	`RETURN_VOID
();

436 
	}
}

441 
	$D®vik_d®vik_sy¡em_VMDebug_¡İIn¡ruùiÚCouÁšg
(cÚ¡ 
u4
* 
¬gs
,

442 
JV®ue
* 
pResuÉ
)

444 #ià
	`defšed
(
WITH_PROFILER
)

445 
	`dvmStİIn¡ruùiÚCouÁšg
();

447 
	`dvmThrowExû±iÚ
("Ljava/Ïng/UnsuµÜ‹dO³¿tiÚExû±iÚ;", 
NULL
);

449 
	`RETURN_VOID
();

450 
	}
}

461 
	$D®vik_d®vik_sy¡em_VMDebug_g‘In¡ruùiÚCouÁ
(cÚ¡ 
u4
* 
¬gs
,

462 
JV®ue
* 
pResuÉ
)

464 #ià
	`defšed
(
WITH_PROFILER
)

465 
A¼ayObjeù
* 
couÁA¼ay
 = (A¼ayObjeù*è
¬gs
[0];

466 * 
¡Üage
;

468 
¡Üage
 = (*è
couÁA¼ay
->
cÚ‹Ás
;

469 
	`sched_y›ld
();

470 
	`memıy
(
¡Üage
, 
gDvm
.
execu‹dIn¡rCouÁs
,

471 
kNumD®vikIn¡ruùiÚs
 * ());

473 
	`dvmThrowExû±iÚ
("Ljava/Ïng/UnsuµÜ‹dO³¿tiÚExû±iÚ;", 
NULL
);

475 
	`RETURN_VOID
();

476 
	}
}

483 
	$D®vik_d®vik_sy¡em_VMDebug_»£tIn¡ruùiÚCouÁ
(cÚ¡ 
u4
* 
¬gs
,

484 
JV®ue
* 
pResuÉ
)

486 #ià
	`defšed
(
WITH_PROFILER
)

487 
	`sched_y›ld
();

488 
	`mem£t
(
gDvm
.
execu‹dIn¡rCouÁs
, 0, 
kNumD®vikIn¡ruùiÚs
 * ());

490 
	`dvmThrowExû±iÚ
("Ljava/Ïng/UnsuµÜ‹dO³¿tiÚExû±iÚ;", 
NULL
);

492 
	`RETURN_VOID
();

493 
	}
}

500 
	$D®vik_d®vik_sy¡em_VMDebug_´štLßdedCÏs£s
(cÚ¡ 
u4
* 
¬gs
,

501 
JV®ue
* 
pResuÉ
)

503 
æags
 = 
¬gs
[0];

505 
	`dvmDumpAÎCÏs£s
(
æags
);

507 
	`RETURN_VOID
();

508 
	}
}

515 
	$D®vik_d®vik_sy¡em_VMDebug_g‘LßdedCÏssCouÁ
(cÚ¡ 
u4
* 
¬gs
,

516 
JV®ue
* 
pResuÉ
)

518 
couÁ
;

520 
	`UNUSED_PARAMETER
(
¬gs
);

522 
couÁ
 = 
	`dvmG‘NumLßdedCÏs£s
();

524 
	`RETURN_INT
(
couÁ
);

525 
	}
}

531 
	$D®vik_d®vik_sy¡em_VMDebug_th»adCpuTimeNªos
(cÚ¡ 
u4
* 
¬gs
,

532 
JV®ue
* 
pResuÉ
)

534 
jlÚg
 
»suÉ
;

536 #ifdeà
HAVE_POSIX_CLOCKS


537 
time¥ec
 
now
;

538 
	`şock_g‘time
(
CLOCK_THREAD_CPUTIME_ID
, &
now
);

539 
»suÉ
 = (
jlÚg
è(
now
.
tv_£c
*1000000000LL +‚ow.
tv_n£c
);

541 
»suÉ
 = (
jlÚg
) -1;

544 
	`RETURN_LONG
(
»suÉ
);

545 
	}
}

553 
	$D®vik_d®vik_sy¡em_VMDebug_dumpH´ofD©a
(cÚ¡ 
u4
* 
¬gs
,

554 
JV®ue
* 
pResuÉ
)

556 #ifdeà
WITH_HPROF


557 
SŒšgObjeù
* 
feNameSŒ
 = (SŒšgObjeù*è
¬gs
[0];

558 * 
feName
;

559 
»suÉ
;

561 ià(
feNameSŒ
 =ğ
NULL
) {

562 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

563 
	`RETURN_VOID
();

566 
feName
 = 
	`dvmC»©eC¡rFromSŒšg
(
feNameSŒ
);

567 ià(
feName
 =ğ
NULL
) {

569 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;", "malloc failure?");

570 
	`RETURN_VOID
();

573 
»suÉ
 = 
	`h´ofDumpH—p
(
feName
);

574 
	`ä“
(
feName
);

576 ià(
»suÉ
 != 0) {

578 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

580 
	`RETURN_VOID
();

583 
	`dvmThrowExû±iÚ
("Ljava/Ïng/UnsuµÜ‹dO³¿tiÚExû±iÚ;", 
NULL
);

586 
	`RETURN_VOID
();

587 
	}
}

605 
	$D®vik_d®vik_sy¡em_VMDebug_ÿcheRegi¡”M­
(cÚ¡ 
u4
* 
¬gs
,

606 
JV®ue
* 
pResuÉ
)

608 
SŒšgObjeù
* 
şassAndM‘hodDescSŒ
 = (SŒšgObjeù*è
¬gs
[0];

609 
CÏssObjeù
* 
şazz
;

610 
boŞ
 
»suÉ
 = 
çl£
;

612 ià(
şassAndM‘hodDescSŒ
 =ğ
NULL
) {

613 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

614 
	`RETURN_VOID
();

617 * 
şassAndM‘hodDesc
 = 
NULL
;

623 
şassAndM‘hodDesc
 = 
	`dvmC»©eC¡rFromSŒšg
(
şassAndM‘hodDescSŒ
);

625 * 
m‘hodName
 = 
	`¡rchr
(
şassAndM‘hodDesc
, '.');

626 ià(
m‘hodName
 =ğ
NULL
) {

627 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

629 
	`RETURN_VOID
();

631 *
m‘hodName
++ = '\0';

633 * 
m‘hodDesü
 = 
	`¡rchr
(
m‘hodName
, ':');

634 ià(
m‘hodDesü
 =ğ
NULL
) {

635 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

637 
	`RETURN_VOID
();

639 *
m‘hodDesü
++ = '\0';

646 
şazz
 = 
	`dvmLookupCÏss
(
şassAndM‘hodDesc
, 
NULL
, 
çl£
);

647 ià(
şazz
 =ğ
NULL
) {

648 
	`LOGD
("CÏs % nÙ found iÀboÙ¡¿°lßd”\n", 
şassAndM‘hodDesc
);

649 
ba
;

652 
M‘hod
* 
m‘hod
;

658 ià(
m‘hodName
[0] == '<') {

663 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, 
m‘hodName
,

664 
m‘hodDesü
);

669 
m‘hod
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
şazz
, 
m‘hodName
,

670 
m‘hodDesü
);

671 ià(
m‘hod
 =ğ
NULL
) {

672 
m‘hod
 = 
	`dvmFšdDœeùM‘hodH›rByDesütÜ
(
şazz
, 
m‘hodName
,

673 
m‘hodDesü
);

677 ià(
m‘hod
 !ğ
NULL
) {

681 cÚ¡ 
Regi¡”M­
* 
pM­
;

682 
pM­
 = 
	`dvmG‘Ex·ndedRegi¡”M­
(
m‘hod
);

683 ià(
pM­
 =ğ
NULL
) {

684 
	`LOGV
("No map for %s.%s %s\n",

685 
şassAndM‘hodDesc
, 
m‘hodName
, 
m‘hodDesü
);

687 
	`LOGV
("Found map %s.%s %s\n",

688 
şassAndM‘hodDesc
, 
m‘hodName
, 
m‘hodDesü
);

689 
»suÉ
 = 
Œue
;

692 
	`LOGV
("Unableo find %s.%s %s\n",

693 
şassAndM‘hodDesc
, 
m‘hodName
, 
m‘hodDesü
);

696 
ba
:

697 
	`ä“
(
şassAndM‘hodDesc
);

698 
	`RETURN_BOOLEAN
(
»suÉ
);

699 
	}
}

710 
	$D®vik_d®vik_sy¡em_VMDebug_üash
(cÚ¡ 
u4
* 
¬gs
,

711 
JV®ue
* 
pResuÉ
)

713 
	`UNUSED_PARAMETER
(
¬gs
);

714 
	`UNUSED_PARAMETER
(
pResuÉ
);

716 
	`LOGW
("Crashing VM on„equest\n");

717 
	`dvmDumpTh»ad
(
	`dvmTh»adS–f
(), 
çl£
);

718 
	`dvmAbÜt
();

719 
	}
}

721 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_VMDebug
[] = {

723 
D®vik_d®vik_sy¡em_VMDebug_g‘AÎocCouÁ
 },

725 
D®vik_d®vik_sy¡em_VMDebug_»£tAÎocCouÁ
 },

727 
D®vik_d®vik_sy¡em_VMDebug_¡¬tAÎocCouÁšg
 },

729 
D®vik_d®vik_sy¡em_VMDebug_¡İAÎocCouÁšg
 },

731 
D®vik_d®vik_sy¡em_VMDebug_¡¬tM‘hodT¿cšg
 },

733 
D®vik_d®vik_sy¡em_VMDebug_isM‘hodT¿cšgAùive
 },

735 
D®vik_d®vik_sy¡em_VMDebug_¡İM‘hodT¿cšg
 },

737 
D®vik_d®vik_sy¡em_VMDebug_¡¬tEmuÏtÜT¿cšg
 },

739 
D®vik_d®vik_sy¡em_VMDebug_¡İEmuÏtÜT¿cšg
 },

741 
D®vik_d®vik_sy¡em_VMDebug_£tAÎoÿtiÚLim™
 },

743 
D®vik_d®vik_sy¡em_VMDebug_£tGlob®AÎoÿtiÚLim™
 },

745 
D®vik_d®vik_sy¡em_VMDebug_¡¬tIn¡ruùiÚCouÁšg
 },

747 
D®vik_d®vik_sy¡em_VMDebug_¡İIn¡ruùiÚCouÁšg
 },

749 
D®vik_d®vik_sy¡em_VMDebug_»£tIn¡ruùiÚCouÁ
 },

751 
D®vik_d®vik_sy¡em_VMDebug_g‘In¡ruùiÚCouÁ
 },

753 
D®vik_d®vik_sy¡em_VMDebug_isDebugg”CÚÃùed
 },

755 
D®vik_d®vik_sy¡em_VMDebug_isDebuggšgEÇbËd
 },

757 
D®vik_d®vik_sy¡em_VMDebug_Ï¡Debugg”Aùiv™y
 },

759 
D®vik_d®vik_sy¡em_VMDebug_´štLßdedCÏs£s
 },

761 
D®vik_d®vik_sy¡em_VMDebug_g‘LßdedCÏssCouÁ
 },

763 
D®vik_d®vik_sy¡em_VMDebug_th»adCpuTimeNªos
 },

765 
D®vik_d®vik_sy¡em_VMDebug_dumpH´ofD©a
 },

767 
D®vik_d®vik_sy¡em_VMDebug_ÿcheRegi¡”M­
 },

769 
D®vik_d®vik_sy¡em_VMDebug_üash
 },

770 { 
NULL
, NULL, NULL },

	@native/dalvik_system_VMRuntime.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

23 
	~<lim™s.h
>

32 
	$D®vik_d®vik_sy¡em_VMRuÁime_g‘T¬g‘H—pUtiz©iÚ
(

33 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

35 
	`UNUSED_PARAMETER
(
¬gs
);

37 
	`RETURN_FLOAT
(
	`dvmG‘T¬g‘H—pUtiz©iÚ
());

38 
	}
}

48 
	$D®vik_d®vik_sy¡em_VMRuÁime_ÇtiveS‘T¬g‘H—pUtiz©iÚ
(

49 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

51 
	`dvmS‘T¬g‘H—pUtiz©iÚ
(
	`dvmU4ToFlßt
(
¬gs
[1]));

53 
	`RETURN_VOID
();

54 
	}
}

63 
	$D®vik_d®vik_sy¡em_VMRuÁime_ÇtiveMšimumH—pSize
(

64 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

66 
s8
 
lÚgSize
 = 
	`GET_ARG_LONG
(
¬gs
, 1);

67 
size_t
 
size
;

68 
boŞ
 
£t
 = (
¬gs
[3] != 0);

71 ià(
lÚgSize
 < 0) {

72 
size
 = 0;

73 } ià(
lÚgSize
 > 
INT_MAX
) {

74 
size
 = 
INT_MAX
;

76 
size
 = (
size_t
)
lÚgSize
;

79 
size
 = 
	`dvmMšimumH—pSize
(size, 
£t
);

81 
	`RETURN_LONG
(
size
);

82 
	}
}

90 
	$D®vik_d®vik_sy¡em_VMRuÁime_gcSoáReã»nûs
(cÚ¡ 
u4
* 
¬gs
,

91 
JV®ue
* 
pResuÉ
)

93 
	`dvmCŞËùG¬bage
(
Œue
);

95 
	`RETURN_VOID
();

96 
	}
}

107 
	$D®vik_d®vik_sy¡em_VMRuÁime_runFš®iz©iÚSync
(cÚ¡ 
u4
* 
¬gs
,

108 
JV®ue
* 
pResuÉ
)

110 
	`dvmRunFš®iz©iÚSync
();

112 
	`RETURN_VOID
();

113 
	}
}

124 
	$D®vik_d®vik_sy¡em_VMRuÁime_ŒackEx‹º®AÎoÿtiÚ
(

125 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

127 
s8
 
lÚgSize
 = 
	`GET_ARG_LONG
(
¬gs
, 1);

130 ià(
lÚgSize
 < 0) {

131 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

133 
	`RETURN_VOID
();

134 } ià(
lÚgSize
 > 
INT_MAX
) {

135 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

137 
	`RETURN_VOID
();

139 
	`RETURN_BOOLEAN
(
	`dvmT¿ckEx‹º®AÎoÿtiÚ
((
size_t
)
lÚgSize
));

140 
	}
}

149 
	$D®vik_d®vik_sy¡em_VMRuÁime_ŒackEx‹º®F»e
(

150 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

152 
s8
 
lÚgSize
 = 
	`GET_ARG_LONG
(
¬gs
, 1);

155 ià(
lÚgSize
 < 0) {

156 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

158 
	`RETURN_VOID
();

159 } ià(
lÚgSize
 > 
INT_MAX
) {

160 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

162 
	`RETURN_VOID
();

164 
	`dvmT¿ckEx‹º®F»e
((
size_t
)
lÚgSize
);

166 
	`RETURN_VOID
();

167 
	}
}

175 
	$D®vik_d®vik_sy¡em_VMRuÁime_g‘Ex‹º®By‹sAÎoÿ‹d
(

176 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

178 
	`RETURN_LONG
((
s8
)
	`dvmG‘Ex‹º®By‹sAÎoÿ‹d
());

179 
	}
}

181 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_VMRuÁime
[] = {

183 
D®vik_d®vik_sy¡em_VMRuÁime_g‘T¬g‘H—pUtiz©iÚ
 },

185 
D®vik_d®vik_sy¡em_VMRuÁime_ÇtiveS‘T¬g‘H—pUtiz©iÚ
 },

187 
D®vik_d®vik_sy¡em_VMRuÁime_ÇtiveMšimumH—pSize
 },

189 
D®vik_d®vik_sy¡em_VMRuÁime_gcSoáReã»nûs
 },

191 
D®vik_d®vik_sy¡em_VMRuÁime_runFš®iz©iÚSync
 },

193 
D®vik_d®vik_sy¡em_VMRuÁime_ŒackEx‹º®AÎoÿtiÚ
 },

195 
D®vik_d®vik_sy¡em_VMRuÁime_ŒackEx‹º®F»e
 },

197 
D®vik_d®vik_sy¡em_VMRuÁime_g‘Ex‹º®By‹sAÎoÿ‹d
 },

198 { 
NULL
, NULL, NULL },

	@native/dalvik_system_VMStack.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_d®vik_sy¡em_VMSck_g‘C®lšgCÏssLßd”
(cÚ¡ 
u4
* 
¬gs
,

30 
JV®ue
* 
pResuÉ
)

32 
CÏssObjeù
* 
şazz
 = 
	`dvmG‘C®Ër2CÏss
(
	`dvmTh»adS–f
()->
curF¿me
);

34 
	`UNUSED_PARAMETER
(
¬gs
);

36 ià(
şazz
 =ğ
NULL
)

37 
	`RETURN_PTR
(
NULL
);

38 
	`RETURN_PTR
(
şazz
->
şassLßd”
);

39 
	}
}

46 
	$D®vik_d®vik_sy¡em_VMSck_g‘C®lšgCÏssLßd”2
(cÚ¡ 
u4
* 
¬gs
,

47 
JV®ue
* 
pResuÉ
)

49 
CÏssObjeù
* 
şazz
 = 
	`dvmG‘C®Ër3CÏss
(
	`dvmTh»adS–f
()->
curF¿me
);

51 
	`UNUSED_PARAMETER
(
¬gs
);

53 ià(
şazz
 =ğ
NULL
)

54 
	`RETURN_PTR
(
NULL
);

55 
	`RETURN_PTR
(
şazz
->
şassLßd”
);

56 
	}
}

63 
	$D®vik_d®vik_sy¡em_VMSck_g‘SckCÏss2
(cÚ¡ 
u4
* 
¬gs
,

64 
JV®ue
* 
pResuÉ
)

66 
CÏssObjeù
* 
şazz
 = 
	`dvmG‘C®Ër3CÏss
(
	`dvmTh»adS–f
()->
curF¿me
);

68 
	`UNUSED_PARAMETER
(
¬gs
);

70 
	`RETURN_PTR
(
şazz
);

71 
	}
}

80 
	$D®vik_d®vik_sy¡em_VMSck_g‘CÏs£s
(cÚ¡ 
u4
* 
¬gs
,

81 
JV®ue
* 
pResuÉ
)

84 
maxSize
 = 
¬gs
[0];

85 
boŞ
 
¡İAtPriveged
 = 
¬gs
[1];

86 
size
 = 0;

87 cÚ¡ 
kSk
 = 2;

88 cÚ¡ 
M‘hod
** 
m‘hods
 = 
NULL
;

89 
m‘hodCouÁ
;

94 ià(!
	`dvmC»©eSckT¿ûA¼ay
(
	`dvmTh»adS–f
()->
curF¿me
, &
m‘hods
,

95 &
m‘hodCouÁ
))

97 
	`LOGE
("Failedo create stackrace‡rray\n");

98 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ÇlE¼Ü;", 
NULL
);

99 
	`RETURN_VOID
();

112 
idx
;

113 
idx
 = 
kSk
; (èidx < 
m‘hodCouÁ
 && 
size
 < 
maxSize
; idx++) {

114 cÚ¡ 
M‘hod
* 
m‘h
 = 
m‘hods
[
idx
];

116 ià(
	`dvmIsReæeùiÚM‘hod
(
m‘h
))

119 ià(
¡İAtPriveged
 && 
	`dvmIsPrivegedM‘hod
(
m‘h
)) {

125 ià(
maxSize
 > 
size
 + 2)

126 
maxSize
 = 
size
 + 2;

129 
size
++;

136 
CÏssObjeù
* 
şassA¼ayCÏss
 = 
NULL
;

137 
A¼ayObjeù
* 
şas£s
 = 
NULL
;

138 
şassA¼ayCÏss
 = 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/CÏss;", 
NULL
);

139 ià(
şassA¼ayCÏss
 =ğ
NULL
) {

140 
	`LOGW
("Unableo find java.lang.Class‡rray class\n");

141 
ba
;

143 
şas£s
 = 
	`dvmAÎocA¼ay
(
şassA¼ayCÏss
, 
size
, 
kObjeùA¼ayRefWidth
,

144 
ALLOC_DEFAULT
);

145 ià(
şas£s
 =ğ
NULL
) {

146 
	`LOGW
("UÇbËØ®loÿ‹ cÏs ¬¿y (%dƒËms)\n", 
size
);

147 
ba
;

153 
CÏssObjeù
** 
objeùs
 = (CÏssObjeù**è
şas£s
->
cÚ‹Ás
;

155 
sidx
 = 0;

156 
idx
 = 
kSk
; (èidx < 
m‘hodCouÁ
 && 
sidx
 < 
size
; idx++) {

157 cÚ¡ 
M‘hod
* 
m‘h
 = 
m‘hods
[
idx
];

159 ià(
	`dvmIsReæeùiÚM‘hod
(
m‘h
))

162 *
objeùs
++ = 
m‘h
->
şazz
;

163 
sidx
++;

166 
ba
:

167 
	`ä“
(
m‘hods
);

168 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şas£s
, 
NULL
);

169 
	`RETURN_PTR
(
şas£s
);

170 
	}
}

178 
	$D®vik_d®vik_sy¡em_VMSck_g‘Th»adSckT¿û
(cÚ¡ 
u4
* 
¬gs
,

179 
JV®ue
* 
pResuÉ
)

181 
Objeù
* 
rg‘Th»adObj
 = (Objeù*è
¬gs
[0];

182 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

183 
Th»ad
* 
th»ad
;

184 * 
ŒaûBuf
;

186 
	`as£¹
(
rg‘Th»adObj
 !ğ
NULL
);

188 
	`dvmLockTh»adLi¡
(
£lf
);

193 
th»ad
 = 
gDvm
.
th»adLi¡
;h»ad !ğ
NULL
;h»ad =h»ad->
Ãxt
) {

194 ià(
th»ad
->
th»adObj
 =ğ
rg‘Th»adObj
)

197 ià(
th»ad
 =ğ
NULL
) {

198 
	`LOGI
("VMStack.getThreadStackTrace:hreadObj %p‚ot‡ctive\n",

199 
rg‘Th»adObj
);

200 
	`dvmUÆockTh»adLi¡
();

201 
	`RETURN_PTR
(
NULL
);

209 
¡ackD•th
 = -1;

210 ià(
th»ad
 !ğ
£lf
)

211 
	`dvmSu¥’dTh»ad
(
th»ad
);

212 
ŒaûBuf
 = 
	`dvmFlInSckT¿ûRaw
(
th»ad
, &
¡ackD•th
);

213 ià(
th»ad
 !ğ
£lf
)

214 
	`dvmResumeTh»ad
(
th»ad
);

215 
	`dvmUÆockTh»adLi¡
();

220 
A¼ayObjeù
* 
Œaû
 = 
	`dvmG‘SckT¿ûRaw
(
ŒaûBuf
, 
¡ackD•th
);

221 
	`ä“
(
ŒaûBuf
);

222 
	`RETURN_PTR
(
Œaû
);

223 
	}
}

225 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_VMSck
[] = {

227 
D®vik_d®vik_sy¡em_VMSck_g‘C®lšgCÏssLßd”
 },

229 
D®vik_d®vik_sy¡em_VMSck_g‘C®lšgCÏssLßd”2
 },

231 
D®vik_d®vik_sy¡em_VMSck_g‘SckCÏss2
 },

233 
D®vik_d®vik_sy¡em_VMSck_g‘CÏs£s
 },

235 
D®vik_d®vik_sy¡em_VMSck_g‘Th»adSckT¿û
 },

236 { 
NULL
, NULL, NULL },

	@native/dalvik_system_Zygote.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

23 
	~<sigÇl.h
>

24 
	~<sys/ty³s.h
>

25 
	~<sys/wa™.h
>

26 
	~<g½.h
>

27 
	~<”ºo.h
>

29 #ià
defšed
(
HAVE_PRCTL
)

30 
	~<sys/´ùl.h
>

33 
	#ZYGOTE_LOG_TAG
 "ZygÙe"

	)

37 
	mDEBUG_ENABLE_DEBUGGER
 = 1,

38 
	mDEBUG_ENABLE_CHECKJNI
 = 1 << 1,

39 
	mDEBUG_ENABLE_ASSERT
 = 1 << 2,

46 
	$sigchldHªdËr
(
s
)

48 
pid_t
 
pid
;

49 
¡©us
;

51 (
pid
 = 
	`wa™pid
(-1, &
¡©us
, 
WNOHANG
)) > 0) {

59 ià(
	`WIFEXITED
(
¡©us
)) {

60 ià(
	`WEXITSTATUS
(
¡©us
)) {

61 
	`LOG
(
LOG_DEBUG
, 
ZYGOTE_LOG_TAG
, "Process %dƒxited cleanly (%d)\n",

62 (è
pid
, 
	`WEXITSTATUS
(
¡©us
));

64 
	`IF_LOGV
( ) {

65 
	`LOG
(
LOG_VERBOSE
, 
ZYGOTE_LOG_TAG
,

67 (è
pid
, 
	`WEXITSTATUS
(
¡©us
));

70 } ià(
	`WIFSIGNALED
(
¡©us
)) {

71 ià(
	`WTERMSIG
(
¡©us
è!ğ
SIGKILL
) {

72 
	`LOG
(
LOG_DEBUG
, 
ZYGOTE_LOG_TAG
,

74 (è
pid
, 
	`WTERMSIG
(
¡©us
));

76 
	`IF_LOGV
( ) {

77 
	`LOG
(
LOG_VERBOSE
, 
ZYGOTE_LOG_TAG
,

79 (è
pid
, 
	`WTERMSIG
(
¡©us
));

82 #ifdeà
WCOREDUMP


83 ià(
	`WCOREDUMP
(
¡©us
)) {

84 
	`LOG
(
LOG_INFO
, 
ZYGOTE_LOG_TAG
, "Process %d dumped core\n",

85 (è
pid
);

95 ià(
pid
 =ğ
gDvm
.
sy¡emS”v”Pid
) {

96 
	`LOG
(
LOG_INFO
, 
ZYGOTE_LOG_TAG
,

98 (è
pid
);

99 
	`kl
(
	`g‘pid
(), 
SIGKILL
);

103 ià(
pid
 < 0) {

104 
	`LOG
(
LOG_WARN
, 
ZYGOTE_LOG_TAG
,

105 "ZygÙSIGCHLDƒ¼Ü (%dèš wa™pid\n",
”ºo
);

107 
	}
}

118 
	$£tSigÇlHªdËr
()

120 
”r
;

121 
sigaùiÚ
 
§
;

123 
	`mem£t
(&
§
, 0, (sa));

125 
§
.
§_hªdËr
 = 
sigchldHªdËr
;

127 
”r
 = 
	`sigaùiÚ
 (
SIGCHLD
, &
§
, 
NULL
);

129 ià(
”r
 < 0) {

130 
	`LOGW
("E¼Ü s‘tšg SIGCHLD hªdË¸”ºo: %d", 
”ºo
);

132 
	}
}

137 
	$un£tSigÇlHªdËr
()

139 
”r
;

140 
sigaùiÚ
 
§
;

142 
	`mem£t
(&
§
, 0, (sa));

144 
§
.
§_hªdËr
 = 
SIG_DFL
;

146 
”r
 = 
	`sigaùiÚ
 (
SIGCHLD
, &
§
, 
NULL
);

148 ià(
”r
 < 0) {

149 
	`LOGW
("E¼Ü un£‰šg SIGCHLD hªdË¸”ºo: %d", 
”ºo
);

151 
	}
}

158 
	$£tgroupsIÁ¬¿y
(
A¼ayObjeù
* 
gidA¼ay
)

160 
gid_t
 *
gids
;

161 
u4
 
i
;

162 
s4
 *
cÚ‹Ás
;

164 ià(
gidA¼ay
 =ğ
NULL
) {

169 
gids
 = 
	`®loÿ
((
gid_t
è* 
gidA¼ay
->
Ëngth
);

170 
cÚ‹Ás
 = (
s4
 *)
gidA¼ay
->contents;

172 
i
 = 0 ; i < 
gidA¼ay
->
Ëngth
 ; i++) {

173 
gids
[
i
] = (
gid_t
è
cÚ‹Ás
[i];

176  
	`£tgroups
((
size_t
è
gidA¼ay
->
Ëngth
, 
gids
);

177 
	}
}

187 
	$£Œlim™sFromA¼ay
(
A¼ayObjeù
* 
¾im™s
)

189 
u4
 
i
;

190 
¾im™
 
¾im
;

192 ià(
¾im™s
 =ğ
NULL
) {

196 
	`mem£t
 (&
¾im
, 0, (rlim));

198 
A¼ayObjeù
** 
tu¶es
 = (A¼ayObjeù **)(
¾im™s
->
cÚ‹Ás
);

200 
i
 = 0; i < 
¾im™s
->
Ëngth
; i++) {

201 
A¼ayObjeù
 * 
¾im™_tu¶e
 = 
tu¶es
[
i
];

202 
s4
* 
cÚ‹Ás
 = (s4 *)
¾im™_tu¶e
->contents;

203 
”r
;

205 ià(
¾im™_tu¶e
->
Ëngth
 != 3) {

206 
	`LOGE
("rlimits‡rray must have‡ second dimension of size 3");

210 
¾im
.
¾im_cur
 = 
cÚ‹Ás
[1];

211 
¾im
.
¾im_max
 = 
cÚ‹Ás
[2];

213 
”r
 = 
	`£Œlim™
(
cÚ‹Ás
[0], &
¾im
);

215 ià(
”r
 < 0) {

221 
	}
}

224 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜk
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

226 
pid_t
 
pid
;

227 
”r
;

229 ià(!
gDvm
.
zygÙe
) {

230 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalStateException;",

233 
	`RETURN_VOID
();

236 ià(!
	`dvmGcP»ZygÙeFÜk
()) {

237 
	`LOGE
("pre-fork heap failed\n");

238 
	`dvmAbÜt
();

241 
	`£tSigÇlHªdËr
();

243 
	`dvmDumpLßd”Sts
("zygote");

244 
pid
 = 
	`fÜk
();

246 #ifdeà
HAVE_ANDROID_OS


247 ià(
pid
 == 0) {

249 
gM®locL—kZygÙeChd
;

250 
gM®locL—kZygÙeChd
 = 1;

254 
	`RETURN_INT
(
pid
);

255 
	}
}

273 
	$’abËDebugF—tu»s
(
u4
 
debugFÏgs
)

275 
	`LOGV
("debugFÏg i 0x%02x\n", 
debugFÏgs
);

277 
gDvm
.
jdwpAÎowed
 = ((
debugFÏgs
 & 
DEBUG_ENABLE_DEBUGGER
) != 0);

279 ià((
debugFÏgs
 & 
DEBUG_ENABLE_CHECKJNI
) != 0) {

281 
	`dvmL©eEÇbËCheckedJni
();

284 ià((
debugFÏgs
 & 
DEBUG_ENABLE_ASSERT
) != 0) {

286 
	`dvmL©eEÇbËAs£¹iÚs
();

288 
	}
}

293 
pid_t
 
	$fÜkAndS³cŸlizeCommÚ
(cÚ¡ 
u4
* 
¬gs
)

295 
pid_t
 
pid
;

297 
uid_t
 
uid
 = (uid_tè
¬gs
[0];

298 
gid_t
 
gid
 = (gid_tè
¬gs
[1];

299 
A¼ayObjeù
* 
gids
 = (A¼ayObjeù *)
¬gs
[2];

300 
u4
 
debugFÏgs
 = 
¬gs
[3];

301 
A¼ayObjeù
 *
¾im™s
 = (A¼ayObjeù *)
¬gs
[4];

303 ià(!
gDvm
.
zygÙe
) {

304 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalStateException;",

310 ià(!
	`dvmGcP»ZygÙeFÜk
()) {

311 
	`LOGE
("pre-fork heap failed\n");

312 
	`dvmAbÜt
();

315 
	`£tSigÇlHªdËr
();

317 
	`dvmDumpLßd”Sts
("zygote");

318 
pid
 = 
	`fÜk
();

320 ià(
pid
 == 0) {

321 
”r
;

324 #ifdeà
HAVE_ANDROID_OS


325 
gM®locL—kZygÙeChd
;

326 
gM®locL—kZygÙeChd
 = 1;

329 ià(
uid
 != 0) {

330 
”r
 = 
	`´ùl
(
PR_SET_KEEPCAPS
, 1, 0, 0, 0);

332 ià(
”r
 < 0) {

333 
	`LOGW
("ÿÂÙ PR_SET_KEEPCAPSƒ¼no: %d", 
”ºo
);

339 
”r
 = 
	`£tgroupsIÁ¬¿y
(
gids
);

341 ià(
”r
 < 0) {

342 
	`LOGW
("ÿÂÙ s‘groups(è”ºo: %d", 
”ºo
);

345 
”r
 = 
	`£Œlim™sFromA¼ay
(
¾im™s
);

347 ià(
”r
 < 0) {

348 
	`LOGW
("ÿÂÙ s‘¾im™(è”ºo: %d", 
”ºo
);

351 
”r
 = 
	`£tgid
(
gid
);

352 ià(
”r
 < 0) {

353 
	`LOGW
("ÿÂÙ s‘gid(%dè”ºo: %d", 
gid
, 
”ºo
);

356 
”r
 = 
	`£tuid
(
uid
);

357 ià(
”r
 < 0) {

358 
	`LOGW
("ÿÂÙ s‘uid(%dè”ºo: %d", 
uid
, 
”ºo
);

364 
Th»ad
* 
th»ad
 = 
	`dvmTh»adS–f
();

365 
th»ad
->
sy¡emTid
 = 
	`dvmG‘SysTh»adId
();

368 
	`’abËDebugF—tu»s
(
debugFÏgs
);

370 
	`un£tSigÇlHªdËr
();

371 
gDvm
.
zygÙe
 = 
çl£
;

372 ià(!
	`dvmIn™Aá”ZygÙe
()) {

373 
	`LOGE
("error in…ost-zygote initialization\n");

374 
	`dvmAbÜt
();

376 } ià(
pid
 > 0) {

380  
pid
;

381 
	}
}

386 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜkAndS³cŸlize
(cÚ¡ 
u4
* 
¬gs
,

387 
JV®ue
* 
pResuÉ
)

389 
pid_t
 
pid
;

391 
pid
 = 
	`fÜkAndS³cŸlizeCommÚ
(
¬gs
);

393 
	`RETURN_INT
(
pid
);

394 
	}
}

399 
	$D®vik_d®vik_sy¡em_ZygÙe_fÜkSy¡emS”v”
(

400 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

402 
pid_t
 
pid
;

403 
pid
 = 
	`fÜkAndS³cŸlizeCommÚ
(
¬gs
);

406 ià(
pid
 > 0) {

407 
¡©us
;

409 
	`LOGI
("Sy¡em s”v”…roûs %d ha b“Àü—‹d", 
pid
);

410 
gDvm
.
sy¡emS”v”Pid
 = 
pid
;

415 ià(
	`wa™pid
(
pid
, &
¡©us
, 
WNOHANG
) ==…id) {

416 
	`LOGE
("Sy¡em s”v”…roûs %d ha d›d. Re¡¬tšg ZygÙe!", 
pid
);

417 
	`kl
(
	`g‘pid
(), 
SIGKILL
);

420 
	`RETURN_INT
(
pid
);

421 
	}
}

423 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_d®vik_sy¡em_ZygÙe
[] = {

425 
D®vik_d®vik_sy¡em_ZygÙe_fÜk
 },

427 
D®vik_d®vik_sy¡em_ZygÙe_fÜkAndS³cŸlize
 },

429 
D®vik_d®vik_sy¡em_ZygÙe_fÜkSy¡emS”v”
 },

430 { 
NULL
, NULL, NULL },

	@native/java_lang_Class.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_CÏss_desœedAs£¹iÚStus
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

35 * 
şassName
 = 
	`dvmDesütÜToName
(
thisPŒ
->
desütÜ
);

36 
i
;

37 
boŞ
 
’abË
 = 
çl£
;

43 
i
 = 0; i < 
gDvm
.
as£¹iÚCŒlCouÁ
; i++) {

44 cÚ¡ 
As£¹iÚCÚŒŞ
* 
pCŒl
 = &
gDvm
.
as£¹iÚCŒl
[
i
];

46 ià(
pCŒl
->
isPackage
) {

59 cÚ¡ * 
Ï¡SÏsh
;

60 
pkgL’
;

62 
Ï¡SÏsh
 = 
	`¡¼chr
(
şassName
, '/');

63 ià(
Ï¡SÏsh
 =ğ
NULL
) {

64 
pkgL’
 = 0;

66 
pkgL’
 = 
Ï¡SÏsh
 - 
şassName
 +1;

69 ià(
pCŒl
->
pkgOrCÏssL’
 > 
pkgL’
 ||

70 
	`memcmp
(
pCŒl
->
pkgOrCÏss
, 
şassName
,…CŒl->
pkgOrCÏssL’
) != 0)

72 
	`LOGV
("ASRT:…kg‚o match: '%s'(%d) vs '%s'\n",

73 
şassName
, 
pkgL’
, 
pCŒl
->
pkgOrCÏss
);

75 
	`LOGV
("ASRT:…kg match: '%s'(%d) vs '%s' --> %d\n",

76 
şassName
, 
pkgL’
, 
pCŒl
->
pkgOrCÏss
,…CŒl->
’abË
);

77 
’abË
 = 
pCŒl
->enable;

84 ià(
pCŒl
->
pkgOrCÏss
 =ğ
NULL
) {

86 ià(
	`¡ºcmp
(
şassName
, "java/", 5) != 0) {

87 
	`LOGV
("ASRT: sy nØm©ch: '%s'\n", 
şassName
);

89 
	`LOGV
("ASRT: sys match: '%s' --> %d\n",

90 
şassName
, 
pCŒl
->
’abË
);

91 
’abË
 = 
pCŒl
->enable;

93 } ià(*
pCŒl
->
pkgOrCÏss
 == '\0') {

94 
	`LOGV
("ASRT: class‡ll: '%s' --> %d\n",

95 
şassName
, 
pCŒl
->
’abË
);

96 
’abË
 = 
pCŒl
->enable;

98 ià(
	`¡rcmp
(
pCŒl
->
pkgOrCÏss
, 
şassName
) != 0) {

99 
	`LOGV
("ASRT: cls‚o match: '%s' vs '%s'\n",

100 
şassName
, 
pCŒl
->
pkgOrCÏss
);

102 
	`LOGV
("ASRT: cls match: '%s' vs '%s' --> %d\n",

103 
şassName
, 
pCŒl
->
pkgOrCÏss
,…CŒl->
’abË
);

104 
’abË
 = 
pCŒl
->enable;

110 
	`ä“
(
şassName
);

111 
	`RETURN_INT
(
’abË
);

112 
	}
}

123 
	$D®vik_java_Ïng_CÏss_şassFÜName
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

125 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

126 
boŞ
 
š™Ÿlize
 = (
¬gs
[1] != 0);

127 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[2];

129 
	`RETURN_PTR
(
	`dvmFšdCÏssByName
(
ÇmeObj
, 
lßd”
, 
š™Ÿlize
));

130 
	}
}

137 
	$D®vik_java_Ïng_CÏss_g‘CÏssLßd”
(cÚ¡ 
u4
* 
¬gs
,

138 
JV®ue
* 
pResuÉ
)

140 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

142 
	`RETURN_PTR
(
şazz
->
şassLßd”
);

143 
	}
}

151 
	$D®vik_java_Ïng_CÏss_g‘CompÚ’tTy³
(cÚ¡ 
u4
* 
¬gs
,

152 
JV®ue
* 
pResuÉ
)

154 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

156 ià(!
	`dvmIsA¼ayCÏss
(
thisPŒ
))

157 
	`RETURN_PTR
(
NULL
);

164 ià(
thisPŒ
->
desütÜ
[1] == '[')

165 
	`RETURN_PTR
(
	`dvmFšdA¼ayCÏss
(&
thisPŒ
->
desütÜ
[1],

166 
thisPŒ
->
şassLßd”
));

168 
	`RETURN_PTR
(
thisPŒ
->
–em’tCÏss
);

169 
	}
}

179 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edCÏs£s
(cÚ¡ 
u4
* 
¬gs
,

180 
JV®ue
* 
pResuÉ
)

182 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

183 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

184 
A¼ayObjeù
* 
şas£s
;

186 
şas£s
 = 
	`dvmG‘Deş¬edCÏs£s
(
şazz
);

187 ià(
şas£s
 =ğ
NULL
) {

188 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

190 
şas£s
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgCÏssA¼ay
,

191 0, 
ALLOC_DEFAULT
);

193 } ià(
publicOÆy
) {

194 
i
, 
ÃwIdx
, 
publicCouÁ
 = 0;

195 
CÏssObjeù
** 
pSourû
 = (CÏssObjeù**è
şas£s
->
cÚ‹Ás
;

198 
i
 = 0; i < ()
şas£s
->
Ëngth
; i++) {

199 ià(
	`dvmIsPublicCÏss
(
pSourû
[
i
]))

200 
publicCouÁ
++;

204 
A¼ayObjeù
* 
ÃwCÏs£s
;

205 
ÃwCÏs£s
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgCÏssA¼ay
,

206 
publicCouÁ
, 
ALLOC_DEFAULT
);

209 
CÏssObjeù
** 
pDe¡
 = (CÏssObjeù**è
ÃwCÏs£s
->
cÚ‹Ás
;

210 
i
 = 
ÃwIdx
 = 0; i < ()
şas£s
->
Ëngth
; i++) {

211 ià(
	`dvmIsPublicCÏss
(
pSourû
[
i
]))

212 
pDe¡
[
ÃwIdx
++] = 
pSourû
[
i
];

215 
	`as£¹
(
ÃwIdx
 =ğ
publicCouÁ
);

216 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şas£s
, 
NULL
);

217 
şas£s
 = 
ÃwCÏs£s
;

220 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şas£s
, 
NULL
);

221 
	`RETURN_PTR
(
şas£s
);

222 
	}
}

228 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edCÚ¡ruùÜs
(cÚ¡ 
u4
* 
¬gs
,

229 
JV®ue
* 
pResuÉ
)

231 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

232 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

233 
A¼ayObjeù
* 
cÚ¡ruùÜs
;

235 
cÚ¡ruùÜs
 = 
	`dvmG‘Deş¬edCÚ¡ruùÜs
(
şazz
, 
publicOÆy
);

236 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
cÚ¡ruùÜs
, 
NULL
);

238 
	`RETURN_PTR
(
cÚ¡ruùÜs
);

239 
	}
}

245 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edF›lds
(cÚ¡ 
u4
* 
¬gs
,

246 
JV®ue
* 
pResuÉ
)

248 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

249 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

250 
A¼ayObjeù
* 
f›lds
;

252 
f›lds
 = 
	`dvmG‘Deş¬edF›lds
(
şazz
, 
publicOÆy
);

253 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›lds
, 
NULL
);

255 
	`RETURN_PTR
(
f›lds
);

256 
	}
}

262 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edM‘hods
(cÚ¡ 
u4
* 
¬gs
,

263 
JV®ue
* 
pResuÉ
)

265 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

266 
boŞ
 
publicOÆy
 = (
¬gs
[1] != 0);

267 
A¼ayObjeù
* 
m‘hods
;

269 
m‘hods
 = 
	`dvmG‘Deş¬edM‘hods
(
şazz
, 
publicOÆy
);

270 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
m‘hods
, 
NULL
);

272 
	`RETURN_PTR
(
m‘hods
);

273 
	}
}

278 
	$D®vik_java_Ïng_CÏss_g‘IÁ”çûs
(cÚ¡ 
u4
* 
¬gs
,

279 
JV®ue
* 
pResuÉ
)

281 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

282 
A¼ayObjeù
* 
š‹rçûs
;

284 
š‹rçûs
 = 
	`dvmG‘IÁ”çûs
(
şazz
);

285 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
š‹rçûs
, 
NULL
);

287 
	`RETURN_PTR
(
š‹rçûs
);

288 
	}
}

298 
	$D®vik_java_Ïng_CÏss_g‘Modif›rs
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

300 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

301 
boŞ
 
ignÜeIÂ”
 = 
¬gs
[1];

302 
u4
 
acûssFÏgs
;

304 
acûssFÏgs
 = 
şazz
->acûssFÏg & 
JAVA_FLAGS_MASK
;

306 ià(!
ignÜeIÂ”
) {

308 
SŒšgObjeù
* 
şassName
 = 
NULL
;

309 
šÃrFÏgs
;

311 ià(
	`dvmG‘IÂ”CÏss
(
şazz
, &
şassName
, &
šÃrFÏgs
))

312 
acûssFÏgs
 = 
šÃrFÏgs
 & 
JAVA_FLAGS_MASK
;

314 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şassName
, 
NULL
);

317 
	`RETURN_INT
(
acûssFÏgs
);

318 
	}
}

325 
	$D®vik_java_Ïng_CÏss_g‘Name
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

327 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

328 cÚ¡ * 
desütÜ
 = 
şazz
->descriptor;

329 
SŒšgObjeù
* 
ÇmeObj
;

331 ià((
desütÜ
[0] != 'L') && (descriptor[0] != '[')) {

336 cÚ¡ * 
Çme
;

337 
desütÜ
[0]) {

338 'Z': 
Çme
 = "boolean"; ;

339 'B': 
Çme
 = "byte"; ;

340 'C': 
Çme
 = "char"; ;

341 'S': 
Çme
 = "short"; ;

342 'I': 
Çme
 = "int"; ;

343 'J': 
Çme
 = "long"; ;

344 'F': 
Çme
 = "float"; ;

345 'D': 
Çme
 = "double"; ;

346 'V': 
Çme
 = "void"; ;

348 
	`LOGE
("UnknowÀ´im™ivty³ '%c'\n", 
desütÜ
[0]);

349 
	`as£¹
(
çl£
);

350 
	`RETURN_PTR
(
NULL
);

354 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
Çme
, 
ALLOC_DEFAULT
);

365 * 
dÙName
 = 
	`dvmDesütÜToDÙ
(
şazz
->
desütÜ
);

366 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
dÙName
, 
ALLOC_DEFAULT
);

367 
	`ä“
(
dÙName
);

370 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

385 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->pDexFile;

386 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

387 cÚ¡ 
DexCÏssId
* 
pCÏssId
;

389 
pDexFe
 = 
şazz
->pDexFile;

390 
pCÏssDef
 = 
	`dvmDexFšdCÏss
(
pDexFe
, 
şazz
->
desütÜ
);

391 
pCÏssId
 = 
	`dvmDexG‘CÏssId
(
pDexFe
, 
pCÏssDef
->
şassIdx
);

392 
ÇmeObj
 = 
	`dvmDexG‘ResŞvedSŒšg
(
pDexFe
, 
pCÏssId
->
ÇmeIdx
);

393 ià(
ÇmeObj
 =ğ
NULL
) {

394 
ÇmeObj
 = 
	`dvmResŞveSŒšg
(
şazz
, 
pCÏssId
->
ÇmeIdx
);

395 ià(
ÇmeObj
 =ğ
NULL
)

396 
	`LOGW
("WARNING: couldn't find string %u for '%s'\n",

397 
pCÏssId
->
ÇmeIdx
, 
şazz
->
Çme
);

402 
	`RETURN_PTR
(
ÇmeObj
);

403 
	}
}

413 
	$D®vik_java_Ïng_CÏss_g‘Su³rşass
(cÚ¡ 
u4
* 
¬gs
,

414 
JV®ue
* 
pResuÉ
)

416 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

418 ià(
	`dvmIsPrim™iveCÏss
(
şazz
è|| 
	`dvmIsIÁ”çûCÏss
(clazz))

419 
	`RETURN_PTR
(
NULL
);

421 
	`RETURN_PTR
(
şazz
->
su³r
);

422 
	}
}

430 
	$D®vik_java_Ïng_CÏss_isAssigÇbËFrom
(cÚ¡ 
u4
* 
¬gs
,

431 
JV®ue
* 
pResuÉ
)

433 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

434 
CÏssObjeù
* 
‹¡CÏss
 = (CÏssObjeù*è
¬gs
[1];

436 ià(
‹¡CÏss
 =ğ
NULL
) {

437 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

438 
	`RETURN_INT
(
çl£
);

440 
	`RETURN_INT
(
	`dvmIn¡ªûof
(
‹¡CÏss
, 
thisPŒ
));

441 
	}
}

448 
	$D®vik_java_Ïng_CÏss_isIn¡ªû
(cÚ¡ 
u4
* 
¬gs
,

449 
JV®ue
* 
pResuÉ
)

451 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

452 
Objeù
* 
‹¡Obj
 = (Objeù*è
¬gs
[1];

454 ià(
‹¡Obj
 =ğ
NULL
)

455 
	`RETURN_INT
(
çl£
);

456 
	`RETURN_INT
(
	`dvmIn¡ªûof
(
‹¡Obj
->
şazz
, 
thisPŒ
));

457 
	}
}

462 
	$D®vik_java_Ïng_CÏss_isIÁ”çû
(cÚ¡ 
u4
* 
¬gs
,

463 
JV®ue
* 
pResuÉ
)

465 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

467 
	`RETURN_INT
(
	`dvmIsIÁ”çûCÏss
(
thisPŒ
));

468 
	}
}

473 
	$D®vik_java_Ïng_CÏss_isPrim™ive
(cÚ¡ 
u4
* 
¬gs
,

474 
JV®ue
* 
pResuÉ
)

476 
CÏssObjeù
* 
thisPŒ
 = (CÏssObjeù*è
¬gs
[0];

478 
	`RETURN_INT
(
	`dvmIsPrim™iveCÏss
(
thisPŒ
));

479 
	}
}

486 
	$D®vik_java_Ïng_CÏss_ÃwIn¡ªû
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

488 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

489 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

490 
M‘hod
* 
š™
;

491 
Objeù
* 
ÃwObj
;

494 ià(
	`dvmIsPrim™iveCÏss
(
şazz
è|| 
	`dvmIsIÁ”çûCÏss
(clazz)

495 || 
	`dvmIsA¼ayCÏss
(
şazz
è|| 
	`dvmIsAb¡¿ùCÏss
(clazz))

497 
	`LOGD
("newInstance failed:…%d i%d [%d‡%d\n",

498 
	`dvmIsPrim™iveCÏss
(
şazz
), 
	`dvmIsIÁ”çûCÏss
(clazz),

499 
	`dvmIsA¼ayCÏss
(
şazz
), 
	`dvmIsAb¡¿ùCÏss
(clazz));

500 
	`dvmThrowExû±iÚW™hCÏssMes§ge
("Ljava/lang/InstantiationException;",

501 
şazz
->
desütÜ
);

502 
	`RETURN_VOID
();

506 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
)) {

507 ià(!
	`dvmIn™CÏss
(
şazz
)) {

508 
	`LOGW
("Class init failed in‚ewInstance call (%s)\n",

509 
şazz
->
desütÜ
);

510 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

511 
	`RETURN_VOID
();

516 
š™
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "<init>", "()V");

517 ià(
š™
 =ğ
NULL
) {

519 
	`LOGD
("newInstance failed:‚o <init>()\n");

520 
	`dvmThrowExû±iÚW™hCÏssMes§ge
("Ljava/lang/InstantiationException;",

521 
şazz
->
desütÜ
);

522 
	`RETURN_VOID
();

535 
CÏssObjeù
* 
ÿÎ”CÏss
 = 
	`dvmG‘C®Ër2CÏss
(
£lf
->
curF¿me
);

537 ià(!
	`dvmCheckCÏssAcûss
(
ÿÎ”CÏss
, 
şazz
)) {

538 
	`LOGD
("newInstance failed: %s‚ot‡ccessibleo %s\n",

539 
şazz
->
desütÜ
, 
ÿÎ”CÏss
->descriptor);

540 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessException;",

542 
	`RETURN_VOID
();

544 ià(!
	`dvmCheckM‘hodAcûss
(
ÿÎ”CÏss
, 
š™
)) {

545 
	`LOGD
("newInstance failed: %s.<init>()‚ot‡ccessibleo %s\n",

546 
şazz
->
desütÜ
, 
ÿÎ”CÏss
->descriptor);

547 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessException;",

549 
	`RETURN_VOID
();

552 
ÃwObj
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DEFAULT
);

553 
JV®ue
 
unu£d
;

556 
	`dvmC®lM‘hod
(
£lf
, 
š™
, 
ÃwObj
, &
unu£d
);

557 
	`dvmR–—£T¿ckedAÎoc
(
ÃwObj
, 
NULL
);

559 
	`RETURN_PTR
(
ÃwObj
);

560 
	}
}

567 
	$D®vik_java_Ïng_CÏss_g‘SigÇtu»AÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

568 
JV®ue
* 
pResuÉ
)

570 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

571 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(
şazz
);

573 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

574 
	`RETURN_PTR
(
¬r
);

575 
	}
}

582 
	$D®vik_java_Ïng_CÏss_g‘Deş¬šgCÏss
(cÚ¡ 
u4
* 
¬gs
,

583 
JV®ue
* 
pResuÉ
)

585 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

587 
CÏssObjeù
* 
’şosšg
 = 
	`dvmG‘Deş¬šgCÏss
(
şazz
);

588 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
’şosšg
, 
NULL
);

589 
	`RETURN_PTR
(
’şosšg
);

590 
	}
}

597 
	$D®vik_java_Ïng_CÏss_g‘EnşosšgCÏss
(cÚ¡ 
u4
* 
¬gs
,

598 
JV®ue
* 
pResuÉ
)

600 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

602 
CÏssObjeù
* 
’şosšg
 = 
	`dvmG‘EnşosšgCÏss
(
şazz
);

603 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
’şosšg
, 
NULL
);

604 
	`RETURN_PTR
(
’şosšg
);

605 
	}
}

612 
	$D®vik_java_Ïng_CÏss_g‘EnşosšgCÚ¡ruùÜ
(cÚ¡ 
u4
* 
¬gs
,

613 
JV®ue
* 
pResuÉ
)

615 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

617 
Objeù
* 
’şosšg
 = 
	`dvmG‘EnşosšgM‘hod
(
şazz
);

618 ià(
’şosšg
 !ğ
NULL
) {

619 
	`dvmR–—£T¿ckedAÎoc
(
’şosšg
, 
NULL
);

620 ià(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
) {

621 
	`RETURN_PTR
(
’şosšg
);

623 
	`as£¹
(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
);

625 
	`RETURN_PTR
(
NULL
);

626 
	}
}

633 
	$D®vik_java_Ïng_CÏss_g‘EnşosšgM‘hod
(cÚ¡ 
u4
* 
¬gs
,

634 
JV®ue
* 
pResuÉ
)

636 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

638 
Objeù
* 
’şosšg
 = 
	`dvmG‘EnşosšgM‘hod
(
şazz
);

639 ià(
’şosšg
 !ğ
NULL
) {

640 
	`dvmR–—£T¿ckedAÎoc
(
’şosšg
, 
NULL
);

641 ià(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
) {

642 
	`RETURN_PTR
(
’şosšg
);

644 
	`as£¹
(
’şosšg
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
);

646 
	`RETURN_PTR
(
NULL
);

647 
	}
}

650 
	$D®vik_java_Ïng_CÏss_g‘G’”icIÁ”çûs
(cÚ¡ 
u4
* 
¬gs
,

651 
JV®ue
* 
pResuÉ
)

653 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

656 
	`RETURN_PTR
(
NULL
);

657 
	}
}

659 
	$D®vik_java_Ïng_CÏss_g‘G’”icSu³rşass
(cÚ¡ 
u4
* 
¬gs
,

660 
JV®ue
* 
pResuÉ
)

662 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

665 
	`RETURN_PTR
(
NULL
);

666 
	}
}

668 
	$D®vik_java_Ïng_CÏss_g‘Ty³P¬am‘”s
(cÚ¡ 
u4
* 
¬gs
,

669 
JV®ue
* 
pResuÉ
)

671 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

674 
	`RETURN_PTR
(
NULL
);

675 
	}
}

683 
	$D®vik_java_Ïng_CÏss_isAnÚymousCÏss
(cÚ¡ 
u4
* 
¬gs
,

684 
JV®ue
* 
pResuÉ
)

686 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

687 
SŒšgObjeù
* 
şassName
 = 
NULL
;

688 
acûssFÏgs
;

695 ià(!
	`dvmG‘IÂ”CÏss
(
şazz
, &
şassName
, &
acûssFÏgs
))

696 
	`RETURN_BOOLEAN
(
çl£
);

698 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şassName
, 
NULL
);

699 
	`RETURN_BOOLEAN
(
şassName
 =ğ
NULL
);

700 
	}
}

707 
	$D®vik_java_Ïng_CÏss_g‘Deş¬edAÂÙ©iÚs
(cÚ¡ 
u4
* 
¬gs
,

708 
JV®ue
* 
pResuÉ
)

710 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

712 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘CÏssAÂÙ©iÚs
(
şazz
);

713 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnos
, 
NULL
);

714 
	`RETURN_PTR
(
ªnos
);

715 
	}
}

722 
	$D®vik_java_Ïng_CÏss_g‘IÂ”CÏssName
(cÚ¡ 
u4
* 
¬gs
,

723 
JV®ue
* 
pResuÉ
)

725 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

726 
SŒšgObjeù
* 
ÇmeObj
;

727 
æags
;

729 ià(
	`dvmG‘IÂ”CÏss
(
şazz
, &
ÇmeObj
, &
æags
)) {

730 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

731 
	`RETURN_PTR
(
ÇmeObj
);

733 
	`RETURN_PTR
(
NULL
);

735 
	}
}

740 
	$D®vik_java_Ïng_CÏss_£tAcûssibËNoCheck
(cÚ¡ 
u4
* 
¬gs
,

741 
JV®ue
* 
pResuÉ
)

743 
Objeù
* 
rg‘
 = (Objeù*è
¬gs
[0];

744 
u4
 
æag
 = (u4è
¬gs
[1];

746 
	`dvmS‘F›ldBoŞ—n
(
rg‘
, 
gDvm
.
offJavaLªgReæeùAcûssibËObjeù_æag
,

747 
æag
);

748 
	}
}

750 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_CÏss
[] = {

752 
D®vik_java_Ïng_CÏss_desœedAs£¹iÚStus
 },

754 
D®vik_java_Ïng_CÏss_şassFÜName
 },

756 
D®vik_java_Ïng_CÏss_g‘CÏssLßd”
 },

758 
D®vik_java_Ïng_CÏss_g‘CompÚ’tTy³
 },

760 
D®vik_java_Ïng_CÏss_g‘SigÇtu»AÂÙ©iÚ
 },

762 
D®vik_java_Ïng_CÏss_g‘Deş¬edCÏs£s
 },

764 
D®vik_java_Ïng_CÏss_g‘Deş¬edCÚ¡ruùÜs
 },

766 
D®vik_java_Ïng_CÏss_g‘Deş¬edF›lds
 },

768 
D®vik_java_Ïng_CÏss_g‘Deş¬edM‘hods
 },

770 
D®vik_java_Ïng_CÏss_g‘IÁ”çûs
 },

772 
D®vik_java_Ïng_CÏss_g‘Modif›rs
 },

774 
D®vik_java_Ïng_CÏss_g‘Name
 },

776 
D®vik_java_Ïng_CÏss_g‘Su³rşass
 },

778 
D®vik_java_Ïng_CÏss_isAssigÇbËFrom
 },

780 
D®vik_java_Ïng_CÏss_isIn¡ªû
 },

782 
D®vik_java_Ïng_CÏss_isIÁ”çû
 },

784 
D®vik_java_Ïng_CÏss_isPrim™ive
 },

786 
D®vik_java_Ïng_CÏss_ÃwIn¡ªû
 },

788 
D®vik_java_Ïng_CÏss_g‘Deş¬šgCÏss
 },

790 
D®vik_java_Ïng_CÏss_g‘EnşosšgCÏss
 },

792 
D®vik_java_Ïng_CÏss_g‘EnşosšgCÚ¡ruùÜ
 },

794 
D®vik_java_Ïng_CÏss_g‘EnşosšgM‘hod
 },

797 
D®vik_java_Ïng_CÏss_g‘G’”icIÁ”çûs
 },

799 
D®vik_java_Ïng_CÏss_g‘G’”icSu³rşass
 },

801 
D®vik_java_Ïng_CÏss_g‘Ty³P¬am‘”s
 },

804 
D®vik_java_Ïng_CÏss_isAnÚymousCÏss
 },

806 
D®vik_java_Ïng_CÏss_g‘Deş¬edAÂÙ©iÚs
 },

808 
D®vik_java_Ïng_CÏss_g‘IÂ”CÏssName
 },

810 
D®vik_java_Ïng_CÏss_£tAcûssibËNoCheck
 },

811 { 
NULL
, NULL, NULL },

	@native/java_lang_Object.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_java_Ïng_Objeù_š‹º®ClÚe
(cÚ¡ 
u4
* 
¬gs
,

30 
JV®ue
* 
pResuÉ
)

32 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

33 
Objeù
* 
şÚe
 = 
	`dvmClÚeObjeù
(
thisPŒ
);

35 
	`dvmR–—£T¿ckedAÎoc
(
şÚe
, 
NULL
);

36 
	`RETURN_PTR
(
şÚe
);

37 
	}
}

42 
	$D®vik_java_Ïng_Objeù_hashCode
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

44 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

45 
	`RETURN_INT
(
	`dvmG‘ObjeùHashCode
(
thisPŒ
));

46 
	}
}

51 
	$D®vik_java_Ïng_Objeù_g‘CÏss
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

53 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

55 
	`RETURN_PTR
(
thisPŒ
->
şazz
);

56 
	}
}

64 
	$D®vik_java_Ïng_Objeù_nÙify
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

65 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

67 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

69 
	`dvmObjeùNÙify
(
£lf
, 
thisPŒ
);

70 
	`RETURN_VOID
();

71 
	}
}

76 
	$D®vik_java_Ïng_Objeù_nÙifyAÎ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

77 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

79 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

81 
	`dvmObjeùNÙifyAÎ
(
£lf
, 
thisPŒ
);

82 
	`RETURN_VOID
();

83 
	}
}

88 
	$D®vik_java_Ïng_Objeù_wa™
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

89 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

91 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

93 
	`dvmObjeùWa™
(
£lf
, 
thisPŒ
, 
	`GET_ARG_LONG
(
¬gs
,1), (
s4
ïrgs[3], 
Œue
);

94 
	`RETURN_VOID
();

95 
	}
}

97 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_Objeù
[] = {

99 
D®vik_java_Ïng_Objeù_š‹º®ClÚe
 },

101 
D®vik_java_Ïng_Objeù_hashCode
 },

103 (
D®vikN©iveFunc
è
D®vik_java_Ïng_Objeù_nÙify
 },

105 (
D®vikN©iveFunc
è
D®vik_java_Ïng_Objeù_nÙifyAÎ
 },

107 (
D®vikN©iveFunc
è
D®vik_java_Ïng_Objeù_wa™
 },

109 
D®vik_java_Ïng_Objeù_g‘CÏss
 },

110 { 
NULL
, NULL, NULL },

	@native/java_lang_Runtime.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_java_Ïng_RuÁime_gc
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

31 
	`UNUSED_PARAMETER
(
¬gs
);

33 
	`dvmCŞËùG¬bage
(
çl£
);

34 
	`RETURN_VOID
();

35 
	}
}

43 
	$D®vik_java_Ïng_RuÁime_ÇtiveEx™
(cÚ¡ 
u4
* 
¬gs
,

44 
JV®ue
* 
pResuÉ
)

46 
¡©us
 = 
¬gs
[0];

47 
boŞ
 
isEx™
 = (
¬gs
[1] != 0);

49 ià(
isEx™
 && 
gDvm
.
ex™Hook
 !ğ
NULL
) {

50 
	`dvmChªgeStus
(
NULL
, 
THREAD_NATIVE
);

51 (*
gDvm
.
ex™Hook
)(
¡©us
);

52 
	`dvmChªgeStus
(
NULL
, 
THREAD_RUNNING
);

53 
	`LOGW
("JNIƒxit hook„eturned\n");

55 
	`LOGD
("C®lšgƒx™(%d)\n", 
¡©us
);

56 
	`ex™
(
¡©us
);

57 
	}
}

65 
	$D®vik_java_Ïng_RuÁime_ÇtiveLßd
(cÚ¡ 
u4
* 
¬gs
,

66 
JV®ue
* 
pResuÉ
)

68 
SŒšgObjeù
* 
feNameObj
 = (SŒšgObjeù*è
¬gs
[0];

69 
Objeù
* 
şassLßd”
 = (Objeù*è
¬gs
[1];

70 * 
feName
;

71 
»suÉ
;

73 ià(
feNameObj
 =ğ
NULL
)

74 
	`RETURN_INT
(
çl£
);

75 
feName
 = 
	`dvmC»©eC¡rFromSŒšg
(
feNameObj
);

77 
»suÉ
 = 
	`dvmLßdN©iveCode
(
feName
, 
şassLßd”
);

79 
	`ä“
(
feName
);

80 
	`RETURN_INT
(
»suÉ
);

81 
	}
}

92 
	$D®vik_java_Ïng_RuÁime_runFš®iz©iÚ
(cÚ¡ 
u4
* 
¬gs
,

93 
JV®ue
* 
pResuÉ
)

95 
boŞ
 
fÜûd
 = (
¬gs
[0] != 0);

97 
	`dvmWa™FÜH—pWÜk”IdË
();

98 ià(
fÜûd
) {

105 
	`RETURN_VOID
();

106 
	}
}

113 
	$D®vik_java_Ïng_RuÁime_maxMemÜy
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

115 
»suÉ
 = 
gDvm
.
h—pSizeMax
;

116 
	`RETURN_LONG
(
»suÉ
);

117 
	}
}

124 
	$D®vik_java_Ïng_RuÁime_tÙ®MemÜy
(cÚ¡ 
u4
* 
¬gs
,

125 
JV®ue
* 
pResuÉ
)

127 
»suÉ
 = 
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pSize
);

128 
	`RETURN_LONG
(
»suÉ
);

129 
	}
}

136 
	$D®vik_java_Ïng_RuÁime_ä“MemÜy
(cÚ¡ 
u4
* 
¬gs
,

137 
JV®ue
* 
pResuÉ
)

139 
»suÉ
 = 
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pSize
)

140 - 
	`dvmG‘H—pDebugInfo
(
kVœtu®H—pAÎoÿ‹d
);

141 ià(
»suÉ
 < 0) {

142 
»suÉ
 = 0;

144 
	`RETURN_LONG
(
»suÉ
);

145 
	}
}

147 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_RuÁime
[] = {

149 
D®vik_java_Ïng_RuÁime_ä“MemÜy
 },

151 
D®vik_java_Ïng_RuÁime_gc
 },

153 
D®vik_java_Ïng_RuÁime_maxMemÜy
 },

155 
D®vik_java_Ïng_RuÁime_ÇtiveEx™
 },

157 
D®vik_java_Ïng_RuÁime_ÇtiveLßd
 },

159 
D®vik_java_Ïng_RuÁime_runFš®iz©iÚ
 },

161 
D®vik_java_Ïng_RuÁime_tÙ®MemÜy
 },

162 { 
NULL
, NULL, NULL },

	@native/java_lang_String.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_java_Ïng_SŒšg_š‹º
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

31 
SŒšgObjeù
* 
¡r
 = (SŒšgObjeù*è
¬gs
[0];

32 
SŒšgObjeù
* 
š‹ºed
;

34 
š‹ºed
 = 
	`dvmLookupIÁ”ÃdSŒšg
(
¡r
);

35 
	`RETURN_PTR
(
š‹ºed
);

36 
	}
}

38 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_SŒšg
[] = {

40 
D®vik_java_Ïng_SŒšg_š‹º
 },

41 { 
NULL
, NULL, NULL },

	@native/java_lang_System.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_Sy¡em_¬¿ycİy
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 * (*
cİyFunc
)(*
de¡
, cÚ¡ *
¤c
, 
size_t
 
n
);

34 
A¼ayObjeù
* 
¤cA¼ay
;

35 
A¼ayObjeù
* 
d¡A¼ay
;

36 
CÏssObjeù
* 
¤cCÏss
;

37 
CÏssObjeù
* 
d¡CÏss
;

38 
¤cPos
, 
d¡Pos
, 
Ëngth
;

39 
¤cTy³
, 
d¡Ty³
;

40 
boŞ
 
¤cPrim
, 
d¡Prim
;

42 
¤cA¼ay
 = (
A¼ayObjeù
*è
¬gs
[0];

43 
¤cPos
 = 
¬gs
[1];

44 
d¡A¼ay
 = (
A¼ayObjeù
*è
¬gs
[2];

45 
d¡Pos
 = 
¬gs
[3];

46 
Ëngth
 = 
¬gs
[4];

48 ià(
¤cA¼ay
 =ğ
d¡A¼ay
)

49 
cİyFunc
 = 
memmove
;

51 
cİyFunc
 = 
memıy
;

54 ià(!
	`dvmV®id©eObjeù
((
Objeù
*)
¤cA¼ay
) ||

55 !
	`dvmV®id©eObjeù
((
Objeù
*)
d¡A¼ay
))

57 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

58 
	`RETURN_VOID
();

61 ià(!
	`dvmIsA¼ay
(
¤cA¼ay
è|| !dvmIsA¼ay(
d¡A¼ay
)) {

62 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

63 
	`RETURN_VOID
();

67 ià(
¤cPos
 < 0 || 
d¡Pos
 < 0 || 
Ëngth
 < 0 ||

68 
¤cPos
 > (è
¤cA¼ay
->
Ëngth
 -†ength ||

69 
d¡Pos
 > (è
d¡A¼ay
->
Ëngth
 -†ength)

71 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayIndexOutOfBoundsExû±iÚ;", 
NULL
);

72 
	`RETURN_VOID
();

75 
¤cCÏss
 = 
¤cA¼ay
->
obj
.
şazz
;

76 
d¡CÏss
 = 
d¡A¼ay
->
obj
.
şazz
;

77 
¤cTy³
 = 
¤cCÏss
->
desütÜ
[1];

78 
d¡Ty³
 = 
d¡CÏss
->
desütÜ
[1];

84 
¤cPrim
 = (
¤cTy³
 != '[' && srcType != 'L');

85 
d¡Prim
 = (
d¡Ty³
 != '[' && dstType != 'L');

86 ià(
¤cPrim
 || 
d¡Prim
) {

87 
width
;

89 ià(
¤cPrim
 !ğ
d¡Prim
 || 
¤cTy³
 !ğ
d¡Ty³
) {

90 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

91 
	`RETURN_VOID
();

94 
¤cCÏss
->
desütÜ
[1]) {

97 
width
 = 1;

101 
width
 = 2;

105 
width
 = 4;

109 
width
 = 8;

112 
	`LOGE
("Weœd‡¼ayy³ '%s'\n", 
¤cCÏss
->
desütÜ
);

113 
	`as£¹
(
çl£
);

114 
width
 = 0;

118 ià(
çl£
è
	`LOGVV
("arraycopy…rim dst=%p %d src=%p %d†en=%d\n",

119 
d¡A¼ay
->
cÚ‹Ás
, 
d¡Pos
 * 
width
,

120 
¤cA¼ay
->
cÚ‹Ás
, 
¤cPos
 * 
width
,

121 
Ëngth
 * 
width
);

122 (*
cİyFunc
)((
u1
*)
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 
width
,

123 (cÚ¡ 
u1
*)
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 
width
,

124 
Ëngth
 * 
width
);

125 #ifdeà
WITH_TAINT_TRACKING


126 ià(
d¡Pos
 =ğ0 && 
d¡A¼ay
->
Ëngth
 ==†ength) {

128 
d¡A¼ay
->
št
.
g
 = 
¤cA¼ay
->taint.tag;

130 
d¡A¼ay
->
št
.
g
 |ğ
¤cA¼ay
->taint.tag;

139 
width
 = (
Objeù
*);

141 ià(
¤cCÏss
->
¬¿yDim
 =ğ
d¡CÏss
->arrayDim &&

142 
	`dvmIn¡ªûof
(
¤cCÏss
, 
d¡CÏss
))

147 ià(
çl£
è
	`LOGVV
("arraycopy„ef dst=%p %d src=%p %d†en=%d\n",

148 
d¡A¼ay
->
cÚ‹Ás
, 
d¡Pos
 * 
width
,

149 
¤cA¼ay
->
cÚ‹Ás
, 
¤cPos
 * 
width
,

150 
Ëngth
 * 
width
);

151 (*
cİyFunc
)((
u1
*)
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 
width
,

152 (cÚ¡ 
u1
*)
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 
width
,

153 
Ëngth
 * 
width
);

154 #ifdeà
WITH_TAINT_TRACKING


155 ià(
d¡Pos
 =ğ0 && 
d¡A¼ay
->
Ëngth
 ==†ength) {

157 
d¡A¼ay
->
št
.
g
 = 
¤cA¼ay
->taint.tag;

159 
d¡A¼ay
->
št
.
g
 |ğ
¤cA¼ay
->taint.tag;

175 
Objeù
** 
¤cObj
;

176 
Objeù
** 
d¡Obj
;

177 
cİyCouÁ
;

178 
CÏssObjeù
* 
şazz
 = 
NULL
;

180 
¤cObj
 = ((
Objeù
**è
¤cA¼ay
->
cÚ‹Ás
è+ 
¤cPos
;

181 
d¡Obj
 = ((
Objeù
**è
d¡A¼ay
->
cÚ‹Ás
è+ 
d¡Pos
;

183 ià(
Ëngth
 > 0 && 
¤cObj
[0] !ğ
NULL
)

185 
şazz
 = 
¤cObj
[0]->clazz;

186 ià(!
	`dvmCªPutA¼ayEËm’t
(
şazz
, 
d¡CÏss
))

187 
şazz
 = 
NULL
;

190 
cİyCouÁ
 = 0; cİyCouÁ < 
Ëngth
; copyCount++)

192 ià(
¤cObj
[
cİyCouÁ
] !ğ
NULL
 &&

193 
¤cObj
[
cİyCouÁ
]->
şazz
 != clazz &&

194 !
	`dvmCªPutA¼ayEËm’t
(
¤cObj
[
cİyCouÁ
]->
şazz
, 
d¡CÏss
))

201 ià(
çl£
è
	`LOGVV
("arraycopy iref dst=%p %d src=%p %d count=%d of %d\n",

202 
d¡A¼ay
->
cÚ‹Ás
, 
d¡Pos
 * 
width
,

203 
¤cA¼ay
->
cÚ‹Ás
, 
¤cPos
 * 
width
,

204 
cİyCouÁ
, 
Ëngth
);

205 (*
cİyFunc
)((
u1
*)
d¡A¼ay
->
cÚ‹Ás
 + 
d¡Pos
 * 
width
,

206 (cÚ¡ 
u1
*)
¤cA¼ay
->
cÚ‹Ás
 + 
¤cPos
 * 
width
,

207 
cİyCouÁ
 * 
width
);

208 #ifdeà
WITH_TAINT_TRACKING


209 ià(
d¡Pos
 =ğ0 && 
d¡A¼ay
->
Ëngth
 ==†ength) {

211 
d¡A¼ay
->
št
.
g
 = 
¤cA¼ay
->taint.tag;

213 
d¡A¼ay
->
št
.
g
 |ğ
¤cA¼ay
->taint.tag;

217 ià(
cİyCouÁ
 !ğ
Ëngth
) {

218 
	`dvmThrowExû±iÚ
("Ljava/Ïng/A¼ayStÜeExû±iÚ;", 
NULL
);

219 
	`RETURN_VOID
();

224 
	`RETURN_VOID
();

225 
	}
}

233 
	$D®vik_java_Ïng_Sy¡em_cu¼’tTimeMlis
(cÚ¡ 
u4
* 
¬gs
,

234 
JV®ue
* 
pResuÉ
)

236 
timev®
 
tv
;

238 
	`UNUSED_PARAMETER
(
¬gs
);

240 
	`g‘timeofday
(&
tv
, (
timezÚe
 *è
NULL
);

241 
wh’
 = 
tv
.
tv_£c
 * 1000LL +v.
tv_u£c
 / 1000;

243 
	`RETURN_LONG
(
wh’
);

244 
	}
}

253 
	$D®vik_java_Ïng_Sy¡em_ÇnoTime
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

255 
	`UNUSED_PARAMETER
(
¬gs
);

257 
u8
 
wh’
 = 
	`dvmG‘R–©iveTimeN£c
();

258 
	`RETURN_LONG
(
wh’
);

259 
	}
}

268 
	$D®vik_java_Ïng_Sy¡em_id’t™yHashCode
(cÚ¡ 
u4
* 
¬gs
,

269 
JV®ue
* 
pResuÉ
)

271 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

272 
	`RETURN_INT
(
	`dvmG‘ObjeùHashCode
(
thisPŒ
));

273 
	}
}

278 
	$D®vik_java_Ïng_Sy¡em_m­Lib¿ryName
(cÚ¡ 
u4
* 
¬gs
,

279 
JV®ue
* 
pResuÉ
)

281 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

282 
SŒšgObjeù
* 
»suÉ
 = 
NULL
;

283 * 
Çme
;

284 * 
m­³dName
;

286 ià(
ÇmeObj
 =ğ
NULL
) {

287 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

288 
	`RETURN_VOID
();

291 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

292 
m­³dName
 = 
	`dvmC»©eSy¡emLib¿ryName
(
Çme
);

293 ià(
m­³dName
 !ğ
NULL
) {

294 
»suÉ
 = 
	`dvmC»©eSŒšgFromC¡r
(
m­³dName
, 
ALLOC_DEFAULT
);

295 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

298 
	`ä“
(
Çme
);

299 
	`ä“
(
m­³dName
);

300 
	`RETURN_PTR
(
»suÉ
);

301 
	}
}

303 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_Sy¡em
[] = {

305 
D®vik_java_Ïng_Sy¡em_¬¿ycİy
 },

307 
D®vik_java_Ïng_Sy¡em_cu¼’tTimeMlis
 },

309 
D®vik_java_Ïng_Sy¡em_ÇnoTime
 },

311 
D®vik_java_Ïng_Sy¡em_id’t™yHashCode
 },

313 
D®vik_java_Ïng_Sy¡em_m­Lib¿ryName
 },

314 { 
NULL
, NULL, NULL },

	@native/java_lang_SystemProperties.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

39 
	$D®vik_java_Ïng_Sy¡emPrİ”t›s_´eIn™
(cÚ¡ 
u4
* 
¬gs
,

40 
JV®ue
* 
pResuÉ
)

42 
	`dvmC»©eDeçuÉPrİ”t›s
((
Objeù
*è
¬gs
[0]);

43 
	`RETURN_VOID
();

44 
	}
}

51 
	$D®vik_java_Ïng_Sy¡emPrİ”t›s_po¡In™
(cÚ¡ 
u4
* 
¬gs
,

52 
JV®ue
* 
pResuÉ
)

54 
	`dvmS‘CommªdLšePrİ”t›s
((
Objeù
*è
¬gs
[0]);

55 
	`RETURN_VOID
();

56 
	}
}

58 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_Sy¡emPrİ”t›s
[] = {

60 
D®vik_java_Ïng_Sy¡emPrİ”t›s_´eIn™
 },

62 
D®vik_java_Ïng_Sy¡emPrİ”t›s_po¡In™
 },

63 { 
NULL
, NULL, NULL },

	@native/java_lang_Throwable.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_java_Ïng_ThrowabË_ÇtiveFlInSckT¿û
(cÚ¡ 
u4
* 
¬gs
,

28 
JV®ue
* 
pResuÉ
)

30 
Objeù
* 
¡ackS‹
 = 
NULL
;

32 
	`UNUSED_PARAMETER
(
¬gs
);

34 
¡ackS‹
 = 
	`dvmFlInSckT¿û
(
	`dvmTh»adS–f
());

35 
	`RETURN_PTR
(
¡ackS‹
);

36 
	}
}

44 
	$D®vik_java_Ïng_ThrowabË_ÇtiveG‘SckT¿û
(cÚ¡ 
u4
* 
¬gs
,

45 
JV®ue
* 
pResuÉ
)

47 
Objeù
* 
¡ackS‹
 = (Objeù*è
¬gs
[0];

48 
A¼ayObjeù
* 
–em’ts
 = 
NULL
;

50 
–em’ts
 = 
	`dvmG‘SckT¿û
(
¡ackS‹
);

51 
	`RETURN_PTR
(
–em’ts
);

52 
	}
}

54 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_ThrowabË
[] = {

56 
D®vik_java_Ïng_ThrowabË_ÇtiveFlInSckT¿û
 },

58 
D®vik_java_Ïng_ThrowabË_ÇtiveG‘SckT¿û
 },

59 { 
NULL
, NULL, NULL },

	@native/java_lang_VMClassLoader.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[0];

35 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[1];

36 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
¬gs
[2];

37 
off£t
 = 
¬gs
[3];

38 
Ën
 = 
¬gs
[4];

39 
Objeù
* 
pd
 = (Objeù*è
¬gs
[5];

40 * 
Çme
 = 
NULL
;

42 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

43 
	`LOGE
("ERROR: defineClass(%p, %s, %p, %d, %d, %p)\n",

44 
lßd”
, 
Çme
, 
d©a
, 
off£t
, 
Ën
, 
pd
);

45 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

48 
	`ä“
(
Çme
);

49 
	`RETURN_VOID
();

50 
	}
}

60 
	$D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss2
(cÚ¡ 
u4
* 
¬gs
,

61 
JV®ue
* 
pResuÉ
)

63 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[0];

64 cÚ¡ 
u1
* 
d©a
 = (cÚ¡ u1*è
¬gs
[1];

65 
off£t
 = 
¬gs
[2];

66 
Ën
 = 
¬gs
[3];

67 
Objeù
* 
pd
 = (Objeù*è
¬gs
[4];

69 
	`LOGE
("ERROR: defineClass(%p, %p, %d, %d, %p)\n",

70 
lßd”
, 
d©a
, 
off£t
, 
Ën
, 
pd
);

71 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsupportedOperationException;",

74 
	`RETURN_VOID
();

75 
	}
}

80 
	$D®vik_java_Ïng_VMCÏssLßd”_fšdLßdedCÏss
(cÚ¡ 
u4
* 
¬gs
,

81 
JV®ue
* 
pResuÉ
)

83 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[0];

84 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[1];

85 
CÏssObjeù
* 
şazz
 = 
NULL
;

86 * 
Çme
 = 
NULL
;

87 * 
desütÜ
 = 
NULL
;

88 * 
ı
;

90 ià(
ÇmeObj
 =ğ
NULL
) {

91 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

92 
ba
;

98 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

99 ià(
Çme
 =ğ
NULL
)

100 
ba
;

102 
desütÜ
 = 
	`dvmDÙToDesütÜ
(
Çme
);

103 ià(
desütÜ
 =ğ
NULL
)

104 
ba
;

106 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
çl£
);

107 
	`LOGVV
("look: % ldr=%°--> %p\n", 
desütÜ
, 
lßd”
, 
şazz
);

109 
ba
:

110 
	`ä“
(
Çme
);

111 
	`ä“
(
desütÜ
);

112 
	`RETURN_PTR
(
şazz
);

113 
	}
}

120 
	$D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hSize
(cÚ¡ 
u4
* 
¬gs
,

121 
JV®ue
* 
pResuÉ
)

123 
couÁ
 = 
	`dvmG‘BoÙP©hSize
();

124 
	`RETURN_INT
(
couÁ
);

125 
	}
}

134 
	$D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hResourû
(

135 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

137 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

138 
SŒšgObjeù
* 
»suÉ
;

139 
idx
 = 
¬gs
[1];

140 * 
Çme
;

142 
Çme
 = 
	`dvmC»©eC¡rFromSŒšg
(
ÇmeObj
);

143 ià(
Çme
 =ğ
NULL
)

144 
	`RETURN_PTR
(
NULL
);

146 
»suÉ
 = 
	`dvmG‘BoÙP©hResourû
(
Çme
, 
idx
);

147 
	`ä“
(
Çme
);

148 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
»suÉ
, 
NULL
);

149 
	`RETURN_PTR
(
»suÉ
);

150 
	}
}

155 
	$D®vik_java_Ïng_VMCÏssLßd”_g‘Prim™iveCÏss
(cÚ¡ 
u4
* 
¬gs
,

156 
JV®ue
* 
pResuÉ
)

158 
´imTy³
 = 
¬gs
[0];

160 
pResuÉ
->
l
 = 
	`dvmFšdPrim™iveCÏss
(
´imTy³
);

161 
	}
}

174 
	$D®vik_java_Ïng_VMCÏssLßd”_lßdCÏss
(cÚ¡ 
u4
* 
¬gs
,

175 
JV®ue
* 
pResuÉ
)

177 
SŒšgObjeù
* 
ÇmeObj
 = (SŒšgObjeù*è
¬gs
[0];

178 
boŞ
 
»sŞve
 = (
¬gs
[1] != 0);

179 
CÏssObjeù
* 
şazz
;

181 
şazz
 = 
	`dvmFšdCÏssByName
(
ÇmeObj
, 
NULL
, 
»sŞve
);

182 
	`as£¹
(
şazz
 =ğ
NULL
 || 
	`dvmIsCÏssLšked
(clazz));

183 
	`RETURN_PTR
(
şazz
);

184 
	}
}

186 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_VMCÏssLßd”
[] = {

188 
D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss
 },

190 
D®vik_java_Ïng_VMCÏssLßd”_defšeCÏss2
 },

192 
D®vik_java_Ïng_VMCÏssLßd”_fšdLßdedCÏss
 },

194 
D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hSize
 },

196 
D®vik_java_Ïng_VMCÏssLßd”_g‘BoÙCÏssP©hResourû
 },

198 
D®vik_java_Ïng_VMCÏssLßd”_g‘Prim™iveCÏss
 },

200 
D®vik_java_Ïng_VMCÏssLßd”_lßdCÏss
 },

201 { 
NULL
, NULL, NULL },

	@native/java_lang_VMThread.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_VMTh»ad_ü—‹
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 
Objeù
* 
th»adObj
 = (Objeù*è
¬gs
[0];

34 
s8
 
¡ackSize
 = 
	`GET_ARG_LONG
(
¬gs
, 1);

36 
	`dvmC»©eIÁ”pTh»ad
(
th»adObj
, (è
¡ackSize
);

37 
	`RETURN_VOID
();

38 
	}
}

43 
	$D®vik_java_Ïng_VMTh»ad_cu¼’tTh»ad
(cÚ¡ 
u4
* 
¬gs
,

44 
JV®ue
* 
pResuÉ
)

46 
	`UNUSED_PARAMETER
(
¬gs
);

48 
	`RETURN_PTR
(
	`dvmTh»adS–f
()->
th»adObj
);

49 
	}
}

57 
	$D®vik_java_Ïng_VMTh»ad_g‘Stus
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

59 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

60 
Th»ad
* 
th»ad
;

61 
»suÉ
;

63 
	`dvmLockTh»adLi¡
(
NULL
);

64 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

65 ià(
th»ad
 !ğ
NULL
)

66 
»suÉ
 = 
th»ad
->
¡©us
;

68 
»suÉ
 = 
THREAD_ZOMBIE
;

69 
	`dvmUÆockTh»adLi¡
();

71 
	`RETURN_INT
(
»suÉ
);

72 
	}
}

80 
	$D®vik_java_Ïng_VMTh»ad_hŞdsLock
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

82 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

83 
Objeù
* 
objeù
 = (Objeù*è
¬gs
[1];

84 
Th»ad
* 
th»ad
;

86 ià(
objeù
 =ğ
NULL
) {

87 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NuÎPoš‹rExû±iÚ;", 
NULL
);

88 
	`RETURN_VOID
();

91 
	`dvmLockTh»adLi¡
(
NULL
);

92 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

93 
»suÉ
 = 
	`dvmHŞdsLock
(
th»ad
, 
objeù
);

94 
	`dvmUÆockTh»adLi¡
();

96 
	`RETURN_BOOLEAN
(
»suÉ
);

97 
	}
}

104 
	$D®vik_java_Ïng_VMTh»ad_š‹¼u±
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

106 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

107 
Th»ad
* 
th»ad
;

109 
	`dvmLockTh»adLi¡
(
NULL
);

110 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

111 ià(
th»ad
 !ğ
NULL
)

112 
	`dvmTh»adIÁ”ru±
(
th»ad
);

113 
	`dvmUÆockTh»adLi¡
();

114 
	`RETURN_VOID
();

115 
	}
}

122 
	$D®vik_java_Ïng_VMTh»ad_š‹¼u±ed
(cÚ¡ 
u4
* 
¬gs
,

123 
JV®ue
* 
pResuÉ
)

125 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

126 
boŞ
 
š‹¼u±ed
;

128 
	`UNUSED_PARAMETER
(
¬gs
);

130 
š‹¼u±ed
 = 
£lf
->interrupted;

131 
£lf
->
š‹¼u±ed
 = 
çl£
;

132 
	`RETURN_BOOLEAN
(
š‹¼u±ed
);

133 
	}
}

141 
	$D®vik_java_Ïng_VMTh»ad_isIÁ”ru±ed
(cÚ¡ 
u4
* 
¬gs
,

142 
JV®ue
* 
pResuÉ
)

144 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

145 
Th»ad
* 
th»ad
;

146 
boŞ
 
š‹¼u±ed
;

148 
	`dvmLockTh»adLi¡
(
NULL
);

149 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

150 ià(
th»ad
 !ğ
NULL
)

151 
š‹¼u±ed
 = 
th»ad
->interrupted;

153 
š‹¼u±ed
 = 
çl£
;

154 
	`dvmUÆockTh»adLi¡
();

156 
	`RETURN_BOOLEAN
(
š‹¼u±ed
);

157 
	}
}

164 
	$D®vik_java_Ïng_VMTh»ad_ÇmeChªged
(cÚ¡ 
u4
* 
¬gs
,

165 
JV®ue
* 
pResuÉ
)

167 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

168 
SŒšgObjeù
* 
ÇmeSŒ
 = (SŒšgObjeù*è
¬gs
[1];

169 
Th»ad
* 
th»ad
;

170 
th»adId
 = -1;

173 
	`dvmLockTh»adLi¡
(
NULL
);

174 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

175 ià(
th»ad
 !ğ
NULL
)

176 
th»adId
 = 
th»ad
->threadId;

177 
	`dvmUÆockTh»adLi¡
();

179 
	`dvmDdmS’dTh»adNameChªge
(
th»adId
, 
ÇmeSŒ
);

184 
	`RETURN_VOID
();

185 
	}
}

194 
	$D®vik_java_Ïng_VMTh»ad_£tPriÜ™y
(cÚ¡ 
u4
* 
¬gs
,

195 
JV®ue
* 
pResuÉ
)

197 
Objeù
* 
thisPŒ
 = (Objeù*è
¬gs
[0];

198 
ÃwPriÜ™y
 = 
¬gs
[1];

199 
Th»ad
* 
th»ad
;

201 
	`dvmLockTh»adLi¡
(
NULL
);

202 
th»ad
 = 
	`dvmG‘Th»adFromTh»adObjeù
(
thisPŒ
);

203 ià(
th»ad
 !ğ
NULL
)

204 
	`dvmChªgeTh»adPriÜ™y
(
th»ad
, 
ÃwPriÜ™y
);

206 
	`dvmUÆockTh»adLi¡
();

208 
	`RETURN_VOID
();

209 
	}
}

214 
	$D®vik_java_Ïng_VMTh»ad_¦“p
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

216 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

217 
	`dvmTh»adSË•
(
	`GET_ARG_LONG
(
¬gs
,0),‡rgs[2]);

218 
	`RETURN_VOID
();

219 
	}
}

229 
	$D®vik_java_Ïng_VMTh»ad_y›ld
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

231 
	`UNUSED_PARAMETER
(
¬gs
);

233 
	`sched_y›ld
();

235 
	`RETURN_VOID
();

236 
	}
}

238 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_VMTh»ad
[] = {

240 
D®vik_java_Ïng_VMTh»ad_ü—‹
 },

242 
D®vik_java_Ïng_VMTh»ad_cu¼’tTh»ad
 },

244 
D®vik_java_Ïng_VMTh»ad_g‘Stus
 },

246 
D®vik_java_Ïng_VMTh»ad_hŞdsLock
 },

248 
D®vik_java_Ïng_VMTh»ad_š‹¼u±
 },

250 
D®vik_java_Ïng_VMTh»ad_š‹¼u±ed
 },

252 
D®vik_java_Ïng_VMTh»ad_isIÁ”ru±ed
 },

254 
D®vik_java_Ïng_VMTh»ad_ÇmeChªged
 },

256 
D®vik_java_Ïng_VMTh»ad_£tPriÜ™y
 },

258 
D®vik_java_Ïng_VMTh»ad_¦“p
 },

260 
D®vik_java_Ïng_VMTh»ad_y›ld
 },

261 { 
NULL
, NULL, NULL },

	@native/java_lang_reflect_AccessibleObject.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_java_Ïng_»æeù_AcûssibËObjeù_g‘CÏssSigÇtu»AÂÙ©iÚ
(

31 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

34 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(
şazz
);

36 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

37 
	`RETURN_PTR
(
¬r
);

38 
	}
}

40 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_AcûssibËObjeù
[] = {

42 
D®vik_java_Ïng_»æeù_AcûssibËObjeù_g‘CÏssSigÇtu»AÂÙ©iÚ
 },

43 { 
NULL
, NULL, NULL },

	@native/java_lang_reflect_Array.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_java_Ïng_»æeù_A¼ay_ü—‹ObjeùA¼ay
(cÚ¡ 
u4
* 
¬gs
,

31 
JV®ue
* 
pResuÉ
)

33 
CÏssObjeù
* 
–em’tCÏss
 = (CÏssObjeù*è
¬gs
[0];

34 
Ëngth
 = 
¬gs
[1];

35 
A¼ayObjeù
* 
ÃwA¼ay
;

37 
	`as£¹
(
–em’tCÏss
 !ğ
NULL
);

38 ià(
Ëngth
 < 0) {

39 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Neg©iveA¼aySizeExû±iÚ;", 
NULL
);

40 
	`RETURN_VOID
();

43 
ÃwA¼ay
 = 
	`dvmAÎocObjeùA¼ay
(
–em’tCÏss
, 
Ëngth
, 
ALLOC_DEFAULT
);

44 ià(
ÃwA¼ay
 =ğ
NULL
) {

45 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

46 
	`RETURN_VOID
();

48 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

50 
	`RETURN_PTR
(
ÃwA¼ay
);

51 
	}
}

64 
	$D®vik_java_Ïng_»æeù_A¼ay_ü—‹MuÉiA¼ay
(cÚ¡ 
u4
* 
¬gs
,

65 
JV®ue
* 
pResuÉ
)

67 cÚ¡ 
kPrimL‘‹r
[] = 
PRIM_TYPE_TO_LETTER
;

68 
CÏssObjeù
* 
–em’tCÏss
 = (CÏssObjeù*è
¬gs
[0];

69 
A¼ayObjeù
* 
dimA¼ay
 = (A¼ayObjeù*è
¬gs
[1];

70 
CÏssObjeù
* 
¬¿yCÏss
;

71 
A¼ayObjeù
* 
ÃwA¼ay
;

72 * 
acDesütÜ
;

73 
numDim
, 
i
;

74 * 
dim’siÚs
;

76 
	`LOGV
("createMultiArray: '%s' [%d]\n",

77 
–em’tCÏss
->
desütÜ
, 
dimA¼ay
->
Ëngth
);

79 
	`as£¹
(
–em’tCÏss
 !ğ
NULL
);

87 
	`as£¹
(
dimA¼ay
 !ğ
NULL
);

88 
numDim
 = 
dimA¼ay
->
Ëngth
;

89 
	`as£¹
(
numDim
 > 0 &&‚umDim <= 255);

91 
dim’siÚs
 = (*è
dimA¼ay
->
cÚ‹Ás
;

92 
i
 = 0; i < 
numDim
; i++) {

93 ià(
dim’siÚs
[
i
] < 0) {

94 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Neg©iveA¼aySizeExû±iÚ;", 
NULL
);

95 
	`RETURN_VOID
();

97 
	`LOGVV
("DIM %d: %d\n", 
i
, 
dim’siÚs
[i]);

103 
acDesütÜ
 =

104 (*è
	`m®loc
(
	`¡¾’
(
–em’tCÏss
->
desütÜ
è+ 
numDim
 + 1);

105 
	`mem£t
(
acDesütÜ
, '[', 
numDim
);

107 
	`LOGVV
("####ƒËm’ˆÇmğ'%s'\n", 
–em’tCÏss
->
desütÜ
);

108 ià(
	`dvmIsPrim™iveCÏss
(
–em’tCÏss
)) {

109 
	`as£¹
(
–em’tCÏss
->
´im™iveTy³
 >= 0);

110 
acDesütÜ
[
numDim
] = 
kPrimL‘‹r
[
–em’tCÏss
->
´im™iveTy³
];

111 
acDesütÜ
[
numDim
+1] = '\0';

113 
	`¡rıy
(
acDesütÜ
+
numDim
, 
–em’tCÏss
->
desütÜ
);

115 
	`LOGVV
("####‡¼ay‚amğ'%s'\n", 
acDesütÜ
);

120 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏss
(
acDesütÜ
, 
–em’tCÏss
->
şassLßd”
);

121 ià(
¬¿yCÏss
 =ğ
NULL
) {

122 
	`LOGW
("UÇbËØfšd o¸g’”©¬¿y cÏs '%s'\n", 
acDesütÜ
);

123 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

124 
	`ä“
(
acDesütÜ
);

125 
	`RETURN_VOID
();

127 
	`ä“
(
acDesütÜ
);

130 
ÃwA¼ay
 = 
	`dvmAÎocMuÉiA¼ay
(
¬¿yCÏss
, 
numDim
-1, 
dim’siÚs
);

131 ià(
ÃwA¼ay
 =ğ
NULL
) {

132 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

133 
	`RETURN_VOID
();

136 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

137 
	`RETURN_PTR
(
ÃwA¼ay
);

138 
	}
}

140 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_A¼ay
[] = {

142 
D®vik_java_Ïng_»æeù_A¼ay_ü—‹ObjeùA¼ay
 },

144 
D®vik_java_Ïng_»æeù_A¼ay_ü—‹MuÉiA¼ay
 },

145 { 
NULL
, NULL, NULL },

	@native/java_lang_reflect_Constructor.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘CÚ¡ruùÜModif›rs
(

28 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

31 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

32 
¦Ù
 = 
¬gs
[2];

33 
M‘hod
* 
m‘h
;

35 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

36 
	`RETURN_INT
(
	`dvmFixM‘hodFÏgs
(
m‘h
->
acûssFÏgs
));

37 
	}
}

49 
	$D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_cÚ¡ruùN©ive
(

50 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

53 
A¼ayObjeù
* 
¬gLi¡
 = (A¼ayObjeù*è
¬gs
[1];

54 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

55 
A¼ayObjeù
* 
·¿ms
 = (A¼ayObjeù*è
¬gs
[3];

56 
¦Ù
 = 
¬gs
[4];

57 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

58 
Objeù
* 
ÃwObj
;

59 
M‘hod
* 
m‘h
;

61 ià(
	`dvmIsAb¡¿ùCÏss
(
deş¬šgCÏss
)) {

62 
	`dvmThrowExû±iÚW™hCÏssMes§ge
("Ljava/lang/InstantiationException;",

63 
deş¬šgCÏss
->
desütÜ
);

64 
	`RETURN_VOID
();

68 ià(!
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
)) {

69 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
)) {

70 
	`LOGW
("Class init failed in Constructor.constructNative (%s)\n",

71 
deş¬šgCÏss
->
desütÜ
);

72 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

73 
	`RETURN_VOID
();

77 
ÃwObj
 = 
	`dvmAÎocObjeù
(
deş¬šgCÏss
, 
ALLOC_DEFAULT
);

78 ià(
ÃwObj
 =ğ
NULL
)

79 
	`RETURN_PTR
(
NULL
);

81 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

82 
	`as£¹
(
m‘h
 !ğ
NULL
);

84 (è
	`dvmInvokeM‘hod
(
ÃwObj
, 
m‘h
, 
¬gLi¡
, 
·¿ms
, 
NULL
, 
noAcûssCheck
);

85 
	`dvmR–—£T¿ckedAÎoc
(
ÃwObj
, 
NULL
);

86 
	`RETURN_PTR
(
ÃwObj
);

87 
	}
}

94 
	$D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘Deş¬edAÂÙ©iÚs
(

95 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

98 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

99 
¦Ù
 = 
¬gs
[2];

100 
M‘hod
* 
m‘h
;

102 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

103 
	`as£¹
(
m‘h
 !ğ
NULL
);

105 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘M‘hodAÂÙ©iÚs
(
m‘h
);

106 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ªnos
, 
NULL
);

107 
	`RETURN_PTR
(
ªnos
);

108 
	}
}

115 
	$D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘P¬am‘”AÂÙ©iÚs
(

116 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

119 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

120 
¦Ù
 = 
¬gs
[2];

121 
M‘hod
* 
m‘h
;

123 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

124 
	`as£¹
(
m‘h
 !ğ
NULL
);

126 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘P¬am‘”AÂÙ©iÚs
(
m‘h
);

127 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ªnos
, 
NULL
);

128 
	`RETURN_PTR
(
ªnos
);

129 
	}
}

136 
	$D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘SigÇtu»AÂÙ©iÚ
(

137 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

140 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

141 
¦Ù
 = 
¬gs
[2];

142 
M‘hod
* 
m‘h
;

144 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

145 
	`as£¹
(
m‘h
 !ğ
NULL
);

147 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(
m‘h
);

148 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

149 
	`RETURN_PTR
(
¬r
);

150 
	}
}

152 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_CÚ¡ruùÜ
[] = {

154 
D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_cÚ¡ruùN©ive
 },

156 
D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘CÚ¡ruùÜModif›rs
 },

158 
D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘Deş¬edAÂÙ©iÚs
 },

160 
D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘P¬am‘”AÂÙ©iÚs
 },

162 
D®vik_java_Ïng_»æeù_CÚ¡ruùÜ_g‘SigÇtu»AÂÙ©iÚ
 },

163 { 
NULL
, NULL, NULL },

	@native/java_lang_reflect_Field.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

59 
JV®ue
* 
	$g‘F›ldD©aAddr
(
Objeù
* 
obj
, 
CÏssObjeù
* 
deş¬šgCÏss
,

60 
¦Ù
, 
boŞ
 
isS‘O³¿tiÚ
, boŞ 
noAcûssCheck
)

62 
F›ld
* 
f›ld
;

63 
JV®ue
* 
»suÉ
;

65 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

66 
	`as£¹
(
f›ld
 !ğ
NULL
);

69 ià(!
noAcûssCheck
) {

70 ià(
isS‘O³¿tiÚ
 && 
	`dvmIsFš®F›ld
(
f›ld
)) {

71 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessException;",

73  
NULL
;

76 
CÏssObjeù
* 
ÿÎ”CÏss
 =

77 
	`dvmG‘C®Ër2CÏss
(
	`dvmTh»adS–f
()->
curF¿me
);

90 ià(!
	`dvmCheckF›ldAcûss
(
ÿÎ”CÏss
, 
f›ld
)) {

91 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessException;",

93  
NULL
;

95 ià(
	`dvmIsPrÙeùedF›ld
(
f›ld
)) {

96 
boŞ
 
isIn¡ªû
, 
§mePackage
;

98 ià(
obj
 !ğ
NULL
)

99 
isIn¡ªû
 = 
	`dvmIn¡ªûof
(
obj
->
şazz
, 
ÿÎ”CÏss
);

101 
isIn¡ªû
 = 
çl£
;

102 
§mePackage
 = 
	`dvmInSamePackage
(
deş¬šgCÏss
, 
ÿÎ”CÏss
);

104 ià(!
isIn¡ªû
 && !
§mePackage
) {

105 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessException;",

107  
NULL
;

112 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

114 ià(!
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
)) {

115 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
)) {

116 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

117  
NULL
;

121 
»suÉ
 = 
	`dvmSticF›ldPŒ
((
SticF›ld
*è
f›ld
);

128 ià(!
	`dvmV”ifyObjeùInCÏss
(
obj
, 
deş¬šgCÏss
)) {

129 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

130 ià(
obj
 !ğ
NULL
) {

131 
	`LOGD
("Wrongype of object for field†ookup: %s %s\n",

132 
obj
->
şazz
->
desütÜ
, 
deş¬šgCÏss
->descriptor);

134  
NULL
;

136 
»suÉ
 = 
	`dvmF›ldPŒ
(
obj
, ((
In¡F›ld
*è
f›ld
)->
by‹Off£t
);

139  
»suÉ
;

140 
	}
}

145 
	$D®vik_java_Ïng_»æeù_F›ld_g‘F›ldModif›rs
(

146 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

149 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

150 
¦Ù
 = 
¬gs
[2];

151 
F›ld
* 
f›ld
;

153 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

154 
	`RETURN_INT
(
f›ld
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
);

155 
	}
}

163 
	$D®vik_java_Ïng_»æeù_F›ld_g‘F›ld
(cÚ¡ 
u4
* 
¬gs
,

164 
JV®ue
* 
pResuÉ
)

167 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

168 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

169 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

170 
¦Ù
 = 
¬gs
[4];

171 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

172 #ifdeà
WITH_TAINT_TRACKING


173 
u4
* 
¹ašt
 = (u4*è&
¬gs
[6];

175 
JV®ue
 
v®ue
;

176 cÚ¡ 
JV®ue
* 
f›ldPŒ
;

177 
D©aObjeù
* 
»suÉ
;

182 
f›ldPŒ
 = 
	`g‘F›ldD©aAddr
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
çl£
,
noAcûssCheck
);

183 ià(
f›ldPŒ
 =ğ
NULL
)

184 
	`RETURN_VOID
();

187 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

188 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
)

190 
v®ue
.
j
 = 
f›ldPŒ
->j;

192 
v®ue
.
i
 = 
f›ldPŒ
->i;

195 
»suÉ
 = 
	`dvmW¿pPrim™ive
(
v®ue
, 
f›ldTy³
);

196 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

198 #ifdeà
WITH_TAINT_TRACKING


202 
F›ld
* 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

203 
	`as£¹
(
f›ld
 !ğ
NULL
);

204 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

205 
SticF›ld
* 
sf›ld
 = (SticF›ld*)
f›ld
;

206 *
¹ašt
 = 
	`dvmG‘SticF›ldTašt
(
sf›ld
);

211 
In¡F›ld
* 
if›ld
 = (In¡F›ld*)
f›ld
;

212 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

213 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
) {

214 *
¹ašt
 = 
	`dvmG‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
);

216 *
¹ašt
 = 
	`dvmG‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
);

222 
	`RETURN_PTR
(
»suÉ
);

223 
	}
}

232 
	$D®vik_java_Ïng_»æeù_F›ld_£tF›ld
(cÚ¡ 
u4
* 
¬gs
,

233 
JV®ue
* 
pResuÉ
)

236 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

237 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

238 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

239 
¦Ù
 = 
¬gs
[4];

240 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

241 
Objeù
* 
v®ueObj
 = (Objeù*è
¬gs
[6];

242 #ifdeà
WITH_TAINT_TRACKING


251 
u4
 
v®ueTašt
 = 
¬gs
[14];

253 
JV®ue
* 
f›ldPŒ
;

254 
JV®ue
 
v®ue
;

257 ià(!
	`dvmUnw¿pPrim™ive
(
v®ueObj
, 
f›ldTy³
, &
v®ue
)) {

258 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

260 
	`RETURN_VOID
();

264 
f›ldPŒ
 = 
	`g‘F›ldD©aAddr
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
Œue
, 
noAcûssCheck
);

265 ià(
f›ldPŒ
 =ğ
NULL
)

266 
	`RETURN_VOID
();

269 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

270 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
)

272 
f›ldPŒ
->
j
 = 
v®ue
.j;

274 
f›ldPŒ
->
i
 = 
v®ue
.i;

277 #ifdeà
WITH_TAINT_TRACKING


281 
F›ld
* 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

282 
	`as£¹
(
f›ld
 !ğ
NULL
);

283 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

284 
SticF›ld
* 
sf›ld
 = (SticF›ld*)
f›ld
;

285 
	`dvmS‘SticF›ldTašt
(
sf›ld
, 
v®ueTašt
);

290 
In¡F›ld
* 
if›ld
 = (In¡F›ld*)
f›ld
;

291 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

292 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
) {

293 
	`dvmS‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ueTašt
);

295 
	`dvmS‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ueTašt
);

301 
	`RETURN_VOID
();

302 
	}
}

308 
Prim™iveTy³
 
	$cÚvPrimTy³
(
ty³Num
)

310 cÚ¡ 
Prim™iveTy³
 
cÚv
[
PRIM_MAX
] = {

311 
PRIM_NOT
, 
PRIM_BOOLEAN
, 
PRIM_BYTE
, 
PRIM_CHAR
, 
PRIM_SHORT
,

312 
PRIM_INT
, 
PRIM_FLOAT
, 
PRIM_LONG
, 
PRIM_DOUBLE


314 ià(
ty³Num
 <= 0 ||ypeNum > 8)

315  
PRIM_NOT
;

316  
cÚv
[
ty³Num
];

317 
	}
}

326 
	$D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
(cÚ¡ 
u4
* 
¬gs
,

327 
JV®ue
* 
pResuÉ
)

330 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

331 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

332 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

333 
¦Ù
 = 
¬gs
[4];

334 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

335 
ty³Num
 = 
¬gs
[6];

336 #ifdeà
WITH_TAINT_TRACKING


337 
u4
* 
¹ašt
 = (u4*è&
¬gs
[7];

339 
Prim™iveTy³
 
rg‘Ty³
 = 
	`cÚvPrimTy³
(
ty³Num
);

340 cÚ¡ 
JV®ue
* 
f›ldPŒ
;

341 
JV®ue
 
v®ue
;

343 ià(!
	`dvmIsPrim™iveCÏss
(
f›ldTy³
)) {

344 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

346 
	`RETURN_VOID
();

350 
f›ldPŒ
 = 
	`g‘F›ldD©aAddr
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
çl£
,
noAcûssCheck
);

351 ià(
f›ldPŒ
 =ğ
NULL
)

352 
	`RETURN_VOID
();

355 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

356 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
)

358 
v®ue
.
j
 = 
f›ldPŒ
->j;

360 
v®ue
.
i
 = 
f›ldPŒ
->i;

364 ià(
	`dvmCÚv”tPrim™iveV®ue
(
f›ldTy³
->
´im™iveTy³
, 
rg‘Ty³
,

365 &(
v®ue
.
i
), &(
pResuÉ
->i)) < 0)

367 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

369 
	`RETURN_VOID
();

372 #ifdeà
WITH_TAINT_TRACKING


376 
F›ld
* 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

377 
	`as£¹
(
f›ld
 !ğ
NULL
);

378 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

379 
SticF›ld
* 
sf›ld
 = (SticF›ld*)
f›ld
;

380 *
¹ašt
 = 
	`dvmG‘SticF›ldTašt
(
sf›ld
);

385 
In¡F›ld
* 
if›ld
 = (In¡F›ld*)
f›ld
;

386 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

387 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
) {

388 *
¹ašt
 = 
	`dvmG‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
);

390 *
¹ašt
 = 
	`dvmG‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
);

395 
	}
}

404 
	$D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
(cÚ¡ 
u4
* 
¬gs
,

405 
JV®ue
* 
pResuÉ
)

408 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

409 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[2];

410 
CÏssObjeù
* 
f›ldTy³
 = (CÏssObjeù*è
¬gs
[3];

411 
¦Ù
 = 
¬gs
[4];

412 
boŞ
 
noAcûssCheck
 = (
¬gs
[5] != 0);

413 
ty³Num
 = 
¬gs
[6];

414 cÚ¡ 
s4
* 
v®uePŒ
 = (s4*è&
¬gs
[7];

415 #ifdeà
WITH_TAINT_TRACKING


425 
u4
 
v®ueTašt
 = 
¬gs
[16];

427 
Prim™iveTy³
 
¤cTy³
 = 
	`cÚvPrimTy³
(
ty³Num
);

428 
JV®ue
* 
f›ldPŒ
;

429 
JV®ue
 
v®ue
;

431 ià(!
	`dvmIsPrim™iveCÏss
(
f›ldTy³
)) {

432 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

434 
	`RETURN_VOID
();

438 ià(
	`dvmCÚv”tPrim™iveV®ue
(
¤cTy³
, 
f›ldTy³
->
´im™iveTy³
,

439 
v®uePŒ
, &(
v®ue
.
i
)) < 0)

441 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

443 
	`RETURN_VOID
();

447 
f›ldPŒ
 = 
	`g‘F›ldD©aAddr
(
obj
, 
deş¬šgCÏss
, 
¦Ù
, 
Œue
, 
noAcûssCheck
);

448 ià(
f›ldPŒ
 =ğ
NULL
)

449 
	`RETURN_VOID
();

452 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

453 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
)

455 
f›ldPŒ
->
j
 = 
v®ue
.j;

457 
f›ldPŒ
->
i
 = 
v®ue
.i;

460 #ifdeà
WITH_TAINT_TRACKING


464 
F›ld
* 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

465 
	`as£¹
(
f›ld
 !ğ
NULL
);

466 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

467 
SticF›ld
* 
sf›ld
 = (SticF›ld*)
f›ld
;

468 
	`dvmS‘SticF›ldTašt
(
sf›ld
, 
v®ueTašt
);

473 
In¡F›ld
* 
if›ld
 = (In¡F›ld*)
f›ld
;

474 ià(
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_LONG
 ||

475 
f›ldTy³
->
´im™iveTy³
 =ğ
PRIM_DOUBLE
) {

476 
	`dvmS‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ueTašt
);

478 
	`dvmS‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
, 
v®ueTašt
);

484 
	`RETURN_VOID
();

485 
	}
}

492 
	$D®vik_java_Ïng_»æeù_F›ld_g‘Deş¬edAÂÙ©iÚs
(

493 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

496 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

497 
¦Ù
 = 
¬gs
[2];

498 
F›ld
* 
f›ld
;

500 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

501 
	`as£¹
(
f›ld
 !ğ
NULL
);

503 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘F›ldAÂÙ©iÚs
(
f›ld
);

504 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnos
, 
NULL
);

505 
	`RETURN_PTR
(
ªnos
);

506 
	}
}

513 
	$D®vik_java_Ïng_»æeù_F›ld_g‘SigÇtu»AÂÙ©iÚ
(cÚ¡ 
u4
* 
¬gs
,

514 
JV®ue
* 
pResuÉ
)

517 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

518 
¦Ù
 = 
¬gs
[2];

519 
F›ld
* 
f›ld
;

521 
f›ld
 = 
	`dvmSlÙToF›ld
(
deş¬šgCÏss
, 
¦Ù
);

522 
	`as£¹
(
f›ld
 !ğ
NULL
);

524 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘F›ldSigÇtu»AÂÙ©iÚ
(
f›ld
);

525 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

526 
	`RETURN_PTR
(
¬r
);

527 
	}
}

529 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_F›ld
[] = {

531 
D®vik_java_Ïng_»æeù_F›ld_g‘F›ldModif›rs
 },

533 
D®vik_java_Ïng_»æeù_F›ld_g‘F›ld
 },

535 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

537 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

539 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

541 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

543 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

545 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

547 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

549 
D®vik_java_Ïng_»æeù_F›ld_g‘Prim™iveF›ld
 },

551 
D®vik_java_Ïng_»æeù_F›ld_£tF›ld
 },

553 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

555 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

557 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

559 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

561 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

563 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

565 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

567 
D®vik_java_Ïng_»æeù_F›ld_£tPrim™iveF›ld
 },

569 
D®vik_java_Ïng_»æeù_F›ld_g‘Deş¬edAÂÙ©iÚs
 },

571 
D®vik_java_Ïng_»æeù_F›ld_g‘SigÇtu»AÂÙ©iÚ
 },

572 { 
NULL
, NULL, NULL },

	@native/java_lang_reflect_Method.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘M‘hodModif›rs
(cÚ¡ 
u4
* 
¬gs
,

31 
JV®ue
* 
pResuÉ
)

34 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

35 
¦Ù
 = 
¬gs
[2];

36 
M‘hod
* 
m‘h
;

38 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

39 
	`RETURN_INT
(
	`dvmFixM‘hodFÏgs
(
m‘h
->
acûssFÏgs
));

40 
	}
}

48 
	$D®vik_java_Ïng_»æeù_M‘hod_švokeN©ive
(cÚ¡ 
u4
* 
¬gs
,

49 
JV®ue
* 
pResuÉ
)

52 
Objeù
* 
m‘hObj
 = (Objeù*è
¬gs
[1];

53 
A¼ayObjeù
* 
¬gLi¡
 = (A¼ayObjeù*è
¬gs
[2];

54 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[3];

55 
A¼ayObjeù
* 
·¿ms
 = (A¼ayObjeù*è
¬gs
[4];

56 
CÏssObjeù
* 
»tuºTy³
 = (CÏssObjeù*è
¬gs
[5];

57 
¦Ù
 = 
¬gs
[6];

58 
boŞ
 
noAcûssCheck
 = (
¬gs
[7] != 0);

59 cÚ¡ 
M‘hod
* 
m‘h
;

60 
Objeù
* 
»suÉ
;

66 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

67 
	`as£¹
(
m‘h
 !ğ
NULL
);

69 ià(
	`dvmIsSticM‘hod
(
m‘h
)) {

70 ià(!
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
)) {

71 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
))

72 
š™_çed
;

76 ià(
	`dvmIsIÁ”çûCÏss
(
deş¬šgCÏss
) &&

77 !
	`dvmIsCÏssIn™Ÿlized
(
deş¬šgCÏss
))

79 ià(!
	`dvmIn™CÏss
(
deş¬šgCÏss
))

80 
š™_çed
;

84 ià(!
	`dvmV”ifyObjeùInCÏss
(
m‘hObj
, 
deş¬šgCÏss
)) {

85 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

86 
	`RETURN_VOID
();

90 
m‘h
 = 
	`dvmG‘Vœtu®izedM‘hod
(
m‘hObj
->
şazz
, meth);

91 ià(
m‘h
 =ğ
NULL
) {

92 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

93 
	`RETURN_VOID
();

101 
»suÉ
 = 
	`dvmInvokeM‘hod
(
m‘hObj
, 
m‘h
, 
¬gLi¡
, 
·¿ms
, 
»tuºTy³
,

102 
noAcûssCheck
);

104 
	`RETURN_PTR
(
»suÉ
);

106 
š™_çed
:

110 
	`LOGD
("Method.invoke() on bad class %s failed\n",

111 
deş¬šgCÏss
->
desütÜ
);

112 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

113 
	`RETURN_VOID
();

114 
	}
}

121 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘Deş¬edAÂÙ©iÚs
(

122 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

125 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

126 
¦Ù
 = 
¬gs
[2];

127 
M‘hod
* 
m‘h
;

129 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

130 
	`as£¹
(
m‘h
 !ğ
NULL
);

132 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘M‘hodAÂÙ©iÚs
(
m‘h
);

133 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ªnos
, 
NULL
);

134 
	`RETURN_PTR
(
ªnos
);

135 
	}
}

142 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘P¬am‘”AÂÙ©iÚs
(

143 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

146 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

147 
¦Ù
 = 
¬gs
[2];

148 
M‘hod
* 
m‘h
;

150 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

151 
	`as£¹
(
m‘h
 !ğ
NULL
);

153 
A¼ayObjeù
* 
ªnos
 = 
	`dvmG‘P¬am‘”AÂÙ©iÚs
(
m‘h
);

154 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ªnos
, 
NULL
);

155 
	`RETURN_PTR
(
ªnos
);

156 
	}
}

164 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘DeçuÉV®ue
(cÚ¡ 
u4
* 
¬gs
,

165 
JV®ue
* 
pResuÉ
)

168 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

169 
¦Ù
 = 
¬gs
[2];

170 
M‘hod
* 
m‘h
;

173 ià(!
	`dvmIsAÂÙ©iÚCÏss
(
deş¬šgCÏss
))

174 
	`RETURN_PTR
(
NULL
);

176 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

177 
	`as£¹
(
m‘h
 !ğ
NULL
);

179 
Objeù
* 
def
 = 
	`dvmG‘AÂÙ©iÚDeçuÉV®ue
(
m‘h
);

180 
	`dvmR–—£T¿ckedAÎoc
(
def
, 
NULL
);

181 
	`RETURN_PTR
(
def
);

182 
	}
}

189 
	$D®vik_java_Ïng_»æeù_M‘hod_g‘SigÇtu»AÂÙ©iÚ
(

190 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

193 
CÏssObjeù
* 
deş¬šgCÏss
 = (CÏssObjeù*è
¬gs
[1];

194 
¦Ù
 = 
¬gs
[2];

195 
M‘hod
* 
m‘h
;

197 
m‘h
 = 
	`dvmSlÙToM‘hod
(
deş¬šgCÏss
, 
¦Ù
);

198 
	`as£¹
(
m‘h
 !ğ
NULL
);

200 
A¼ayObjeù
* 
¬r
 = 
	`dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(
m‘h
);

201 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¬r
, 
NULL
);

202 
	`RETURN_PTR
(
¬r
);

203 
	}
}

205 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_M‘hod
[] = {

207 
D®vik_java_Ïng_»æeù_M‘hod_g‘M‘hodModif›rs
 },

209 
D®vik_java_Ïng_»æeù_M‘hod_švokeN©ive
 },

211 
D®vik_java_Ïng_»æeù_M‘hod_g‘Deş¬edAÂÙ©iÚs
 },

213 
D®vik_java_Ïng_»æeù_M‘hod_g‘P¬am‘”AÂÙ©iÚs
 },

215 
D®vik_java_Ïng_»æeù_M‘hod_g‘DeçuÉV®ue
 },

217 
D®vik_java_Ïng_»æeù_M‘hod_g‘SigÇtu»AÂÙ©iÚ
 },

218 { 
NULL
, NULL, NULL },

	@native/java_lang_reflect_Proxy.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_Ïng_»æeù_Proxy_g’”©eProxy
(cÚ¡ 
u4
* 
¬gs
,

32 
JV®ue
* 
pResuÉ
)

34 
SŒšgObjeù
* 
¡r
 = (SŒšgObjeù*è
¬gs
[0];

35 
A¼ayObjeù
* 
š‹rçûs
 = (A¼ayObjeù*è
¬gs
[1];

36 
Objeù
* 
lßd”
 = (Objeù*è
¬gs
[2];

37 
CÏssObjeù
* 
»suÉ
;

39 
»suÉ
 = 
	`dvmG’”©eProxyCÏss
(
¡r
, 
š‹rçûs
, 
lßd”
);

40 
	`RETURN_PTR
(
»suÉ
);

41 
	}
}

43 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_Ïng_»æeù_Proxy
[] = {

45 
D®vik_java_Ïng_»æeù_Proxy_g’”©eProxy
 },

46 { 
NULL
, NULL, NULL },

	@native/java_security_AccessController.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

31 
	$D®vik_java_£cur™y_AcûssCÚŒŞËr_g‘SckDomašs
(

32 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

34 
	`UNUSED_PARAMETER
(
¬gs
);

36 cÚ¡ 
M‘hod
** 
m‘hods
 = 
NULL
;

37 
Ëngth
;

42 ià(!
	`dvmC»©eSckT¿ûA¼ay
(
	`dvmTh»adS–f
()->
curF¿me
, &
m‘hods
, &
Ëngth
))

44 
	`LOGE
("Failedo create stackrace‡rray\n");

45 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ÇlE¼Ü;", 
NULL
);

46 
	`RETURN_VOID
();

69 
Objeù
** 
subS‘
 = (Objeù**è
	`m®loc
((
Ëngth
-2) * (Object*));

70 ià(
subS‘
 =ğ
NULL
) {

71 
	`LOGE
("FaedØ®loÿ‹ subS‘ (Ëngth=%d)\n", 
Ëngth
);

72 
	`ä“
(
m‘hods
);

73 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ÇlE¼Ü;", 
NULL
);

74 
	`RETURN_VOID
();

76 
idx
, 
subIdx
 = 0;

77 
idx
 = 2; idx < 
Ëngth
; idx++) {

78 cÚ¡ 
M‘hod
* 
m‘h
 = 
m‘hods
[
idx
];

79 
Objeù
* 
pd
;

81 ià(
	`dvmIsReæeùiÚM‘hod
(
m‘h
))

84 ià(
	`dvmIsPrivegedM‘hod
(
m‘h
)) {

87 ++
idx
 < 
Ëngth
 && 
	`dvmIsReæeùiÚM‘hod
(
m‘hods
[idx]))

89 
Ëngth
 = 
idx
;

90 
m‘h
 = 
m‘hods
[
idx
];

94 
	`as£¹
(
gDvm
.
offJavaLªgCÏss_pd
 != 0);

95 
pd
 = 
	`dvmG‘F›ldObjeù
((
Objeù
*è
m‘h
->
şazz
,

96 
gDvm
.
offJavaLªgCÏss_pd
);

98 ià(
pd
 !ğ
NULL
)

99 
subS‘
[
subIdx
++] = 
pd
;

109 
CÏssObjeù
* 
pdA¼ayCÏss
 = 
NULL
;

110 
A¼ayObjeù
* 
domašs
 = 
NULL
;

111 
pdA¼ayCÏss
 = 
	`dvmFšdA¼ayCÏss
("[Ljava/£cur™y/PrÙeùiÚDomaš;", 
NULL
);

112 ià(
pdA¼ayCÏss
 =ğ
NULL
) {

113 
	`LOGW
("Unableo find ProtectionDomain class for‡rray\n");

114 
ba
;

116 
domašs
 = 
	`dvmAÎocA¼ay
(
pdA¼ayCÏss
, 
subIdx
, 
kObjeùA¼ayRefWidth
,

117 
ALLOC_DEFAULT
);

118 ià(
domašs
 =ğ
NULL
) {

119 
	`LOGW
("UÇbËØ®loÿ‹…d‡¼ay (%dƒËms)\n", 
subIdx
);

120 
ba
;

124 
Objeù
** 
objeùs
 = (Objeù**è
domašs
->
cÚ‹Ás
;

125 
idx
 = 0; idx < 
subIdx
; idx++)

126 *
objeùs
++ = 
subS‘
[
idx
];

128 
ba
:

129 
	`ä“
(
subS‘
);

130 
	`ä“
(
m‘hods
);

131 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
domašs
, 
NULL
);

132 
	`RETURN_PTR
(
domašs
);

133 
	}
}

135 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_£cur™y_AcûssCÚŒŞËr
[] = {

137 
D®vik_java_£cur™y_AcûssCÚŒŞËr_g‘SckDomašs
 },

138 { 
NULL
, NULL, NULL },

	@native/java_util_concurrent_atomic_AtomicLong.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_java_ut_cÚcu¼’t_©omic_AtomicLÚg_VMSuµÜtsCS8
(

28 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

30 
	`UNUSED_PARAMETER
(
¬gs
);

31 
	`RETURN_BOOLEAN
(1);

32 
	}
}

34 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_java_ut_cÚcu¼’t_©omic_AtomicLÚg
[] = {

36 
D®vik_java_ut_cÚcu¼’t_©omic_AtomicLÚg_VMSuµÜtsCS8
 },

37 { 
NULL
, NULL, NULL },

	@native/org_apache_harmony_dalvik_NativeTestTarget.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÁ”ÇlM‘hod
(

30 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
	`UNUSED_PARAMETER
(
¬gs
);

34 
	`RETURN_VOID
();

35 
	}
}

37 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘
[] =

40 
D®vik_Üg_­ache_h¬mÚy_d®vik_N©iveTe¡T¬g‘_em±yIÁ”ÇlM‘hod
 },

41 { 
NULL
, NULL, NULL },

	@native/org_apache_harmony_dalvik_ddmc_DdmServer.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

30 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”_ÇtiveS’dChunk
(

31 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

33 
ty³
 = 
¬gs
[0];

34 
A¼ayObjeù
* 
d©a
 = (A¼ayObjeù*è
¬gs
[1];

35 
off£t
 = 
¬gs
[2];

36 
Ëngth
 = 
¬gs
[3];

38 
	`as£¹
(
off£t
+
Ëngth
 <ğ()
d©a
->length);

40 
	`dvmDbgDdmS’dChunk
(
ty³
, 
Ëngth
, (cÚ¡ 
u1
*)
d©a
->
cÚ‹Ás
 + 
off£t
);

41 
	`RETURN_VOID
();

42 
	}
}

44 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”
[] = {

46 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmS”v”_ÇtiveS’dChunk
 },

47 { 
NULL
, NULL, NULL },

	@native/org_apache_harmony_dalvik_ddmc_DdmVmInternal.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

29 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_th»adNÙify
(

30 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

32 
boŞ
 
’abË
 = (
¬gs
[0] != 0);

35 
	`dvmDdmS‘Th»adNÙifiÿtiÚ
(
’abË
);

36 
	`RETURN_VOID
();

37 
	}
}

44 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘Th»adSts
(

45 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

47 
	`UNUSED_PARAMETER
(
¬gs
);

49 
A¼ayObjeù
* 
»suÉ
 = 
	`dvmDdmG’”©eTh»adSts
();

50 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
»suÉ
, 
NULL
);

51 
	`RETURN_PTR
(
»suÉ
);

52 
	}
}

59 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pInfoNÙify
(

60 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

62 
wh’
 = 
¬gs
[0];

63 
boŞ
 
»t
;

65 
»t
 = 
	`dvmDdmHªdËHpifChunk
(
wh’
);

66 
	`RETURN_BOOLEAN
(
»t
);

67 
	}
}

75 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pSegm’tNÙify
(

76 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

78 
wh’
 = 
¬gs
[0];

79 
wh©
 = 
¬gs
[1];

80 
boŞ
 
Çtive
 = (
¬gs
[2] != 0);

81 
boŞ
 
»t
;

83 
»t
 = 
	`dvmDdmHªdËHpsgNhsgChunk
(
wh’
, 
wh©
, 
Çtive
);

84 
	`RETURN_BOOLEAN
(
»t
);

85 
	}
}

94 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘SckT¿ûById
(

95 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

97 
u4
 
th»adId
 = 
¬gs
[0];

98 
A¼ayObjeù
* 
Œaû
;

100 
Œaû
 = 
	`dvmDdmG‘SckT¿ûById
(
th»adId
);

101 
	`RETURN_PTR
(
Œaû
);

102 
	}
}

110 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_’abËReûÁAÎoÿtiÚs
(

111 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

113 
boŞ
 
’abË
 = (
¬gs
[0] != 0);

115 ià(
’abË
)

116 (è
	`dvmEÇbËAÎocT¿ck”
();

118 (è
	`dvmDi§bËAÎocT¿ck”
();

119 
	`RETURN_VOID
();

120 
	}
}

128 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚStus
(

129 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

131 
	`UNUSED_PARAMETER
(
¬gs
);

132 
	`RETURN_BOOLEAN
(
gDvm
.
®locRecÜds
 !ğ
NULL
);

133 
	}
}

141 
	$D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚs
(

142 cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

144 
A¼ayObjeù
* 
d©a
;

146 
d©a
 = 
	`dvmDdmG‘ReûÁAÎoÿtiÚs
();

147 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
d©a
, 
NULL
);

148 
	`RETURN_PTR
(
d©a
);

149 
	}
}

151 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl
[] = {

153 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_th»adNÙify
 },

155 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘Th»adSts
 },

157 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pInfoNÙify
 },

159 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_h—pSegm’tNÙify
 },

161 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘SckT¿ûById
 },

163 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_’abËReûÁAÎoÿtiÚs
 },

165 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚStus
 },

167 
D®vik_Üg_­ache_h¬mÚy_d®vik_ddmc_DdmVmIÁ”Çl_g‘ReûÁAÎoÿtiÚs
 },

168 { 
NULL
, NULL, NULL },

	@native/sun_misc_Unsafe.c

20 
	~"D®vik.h
"

21 
	~"Çtive/IÁ”ÇlN©ivePriv.h
"

27 
	$D®vik_sun_misc_Un§ã_objeùF›ldOff£t0
(cÚ¡ 
u4
* 
¬gs
,

28 
JV®ue
* 
pResuÉ
)

30 
Objeù
* 
f›ldObjeù
 = (Objeù*è
¬gs
[0];

31 
In¡F›ld
* 
f›ld
 = (In¡F›ld*è
	`dvmG‘F›ldFromReæeùObj
(
f›ldObjeù
);

32 
s8
 
»suÉ
 = ((s8è
f›ld
->
by‹Off£t
);

34 
	`RETURN_LONG
(
»suÉ
);

35 
	}
}

40 
	$D®vik_sun_misc_Un§ã_¬¿yBa£Off£t0
(cÚ¡ 
u4
* 
¬gs
,

41 
JV®ue
* 
pResuÉ
)

44 
	`UNUSED_PARAMETER
(
¬gs
);

45 
	`RETURN_INT
(
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
));

46 
	}
}

51 
	$D®vik_sun_misc_Un§ã_¬¿yIndexSÿË0
(cÚ¡ 
u4
* 
¬gs
,

52 
JV®ue
* 
pResuÉ
)

54 
CÏssObjeù
* 
şazz
 = (CÏssObjeù*è
¬gs
[0];

55 
»suÉ
;

57 ià((
şazz
 =ğ
gDvm
.
şassA¼ayBoŞ—n
) ||

58 (
şazz
 =ğ
gDvm
.
şassA¼ayBy‹
)) {

59 
»suÉ
 = (
u1
);

60 } ià((
şazz
 =ğ
gDvm
.
şassA¼ayCh¬
) ||

61 (
şazz
 =ğ
gDvm
.
şassA¼ayShÜt
)) {

62 
»suÉ
 = (
u2
);

63 } ià((
şazz
 =ğ
gDvm
.
şassA¼ayLÚg
) ||

64 (
şazz
 =ğ
gDvm
.
şassA¼ayDoubË
)) {

65 
»suÉ
 = (
u8
);

67 
»suÉ
 = (
u4
);

70 
	`RETURN_INT
(
»suÉ
);

71 
	}
}

77 
	$D®vik_sun_misc_Un§ã_com·»AndSw­IÁ
(cÚ¡ 
u4
* 
¬gs
,

78 
JV®ue
* 
pResuÉ
)

81 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

82 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

83 
s4
 
ex³ùedV®ue
 = 
¬gs
[4];

84 
s4
 
ÃwV®ue
 = 
¬gs
[5];

85 vŞ©
št32_t
* 
add»ss
 = (vŞ©št32_t*è(((
u1
*è
obj
è+ 
off£t
);

88 
»suÉ
 = 
	`ªdroid_©omic_cmpxchg
(
ex³ùedV®ue
, 
ÃwV®ue
, 
add»ss
);

90 
	`RETURN_BOOLEAN
(
»suÉ
 == 0);

91 
	}
}

97 
	$D®vik_sun_misc_Un§ã_com·»AndSw­LÚg
(cÚ¡ 
u4
* 
¬gs
,

98 
JV®ue
* 
pResuÉ
)

101 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

102 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

103 
s8
 
ex³ùedV®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

104 
s8
 
ÃwV®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 6);

105 vŞ©
št64_t
* 
add»ss
 = (vŞ©št64_t*è(((
u1
*è
obj
è+ 
off£t
);

108 
»suÉ
 =

109 
	`ªdroid_quasŸtomic_cmpxchg_64
(
ex³ùedV®ue
, 
ÃwV®ue
, 
add»ss
);

111 
	`RETURN_BOOLEAN
(
»suÉ
 == 0);

112 
	}
}

118 
	$D®vik_sun_misc_Un§ã_com·»AndSw­Objeù
(cÚ¡ 
u4
* 
¬gs
,

119 
JV®ue
* 
pResuÉ
)

122 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

123 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

124 
Objeù
* 
ex³ùedV®ue
 = (Objeù*è
¬gs
[4];

125 
Objeù
* 
ÃwV®ue
 = (Objeù*è
¬gs
[5];

126 
št32_t
* 
add»ss
 = (št32_t*è(((
u1
*è
obj
è+ 
off£t
);

129 
»suÉ
 = 
	`ªdroid_©omic_cmpxchg
((
št32_t
è
ex³ùedV®ue
,

130 (
št32_t
è
ÃwV®ue
, 
add»ss
);

132 
	`RETURN_BOOLEAN
(
»suÉ
 == 0);

133 
	}
}

138 
	$D®vik_sun_misc_Un§ã_g‘IÁVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

139 
JV®ue
* 
pResuÉ
)

142 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

143 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

144 vŞ©
s4
* 
add»ss
 = (vŞ©s4*è(((
u1
*è
obj
è+ 
off£t
);

146 
	`RETURN_INT
(*
add»ss
);

147 
	}
}

152 
	$D®vik_sun_misc_Un§ã_putIÁVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

153 
JV®ue
* 
pResuÉ
)

156 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

157 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

158 
s4
 
v®ue
 = (s4è
¬gs
[4];

159 vŞ©
s4
* 
add»ss
 = (vŞ©s4*è(((
u1
*è
obj
è+ 
off£t
);

161 *
add»ss
 = 
v®ue
;

162 
	`RETURN_VOID
();

163 
	}
}

168 
	$D®vik_sun_misc_Un§ã_g‘LÚgVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

169 
JV®ue
* 
pResuÉ
)

172 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

173 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

174 vŞ©
s8
* 
add»ss
 = (vŞ©s8*è(((
u1
*è
obj
è+ 
off£t
);

176 
	`RETURN_LONG
(
	`ªdroid_quasŸtomic_»ad_64
(
add»ss
));

177 
	}
}

182 
	$D®vik_sun_misc_Un§ã_putLÚgVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

183 
JV®ue
* 
pResuÉ
)

186 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

187 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

188 
s8
 
v®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

189 vŞ©
s8
* 
add»ss
 = (vŞ©s8*è(((
u1
*è
obj
è+ 
off£t
);

191 
	`ªdroid_quasŸtomic_sw­_64
(
v®ue
, 
add»ss
);

192 
	`RETURN_VOID
();

193 
	}
}

198 
	$D®vik_sun_misc_Un§ã_g‘ObjeùVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

199 
JV®ue
* 
pResuÉ
)

202 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

203 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

204 vŞ©
Objeù
** 
add»ss
 = (vŞ©Objeù**è(((
u1
*è
obj
è+ 
off£t
);

206 
	`RETURN_PTR
((*è*
add»ss
);

207 
	}
}

213 
	$D®vik_sun_misc_Un§ã_putObjeùVŞ©e
(cÚ¡ 
u4
* 
¬gs
,

214 
JV®ue
* 
pResuÉ
)

217 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

218 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

219 
Objeù
* 
v®ue
 = (Objeù*è
¬gs
[4];

220 vŞ©
Objeù
** 
add»ss
 = (vŞ©Objeù**è(((
u1
*è
obj
è+ 
off£t
);

222 *
add»ss
 = 
v®ue
;

223 
	`RETURN_VOID
();

224 
	}
}

229 
	$D®vik_sun_misc_Un§ã_g‘IÁ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

232 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

233 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

234 
s4
* 
add»ss
 = (s4*è(((
u1
*è
obj
è+ 
off£t
);

236 
	`RETURN_INT
(*
add»ss
);

237 
	}
}

242 
	$D®vik_sun_misc_Un§ã_putIÁ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

245 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

246 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

247 
s4
 
v®ue
 = (s4è
¬gs
[4];

248 
s4
* 
add»ss
 = (s4*è(((
u1
*è
obj
è+ 
off£t
);

250 *
add»ss
 = 
v®ue
;

251 
	`RETURN_VOID
();

252 
	}
}

257 
	$D®vik_sun_misc_Un§ã_g‘LÚg
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

260 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

261 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

262 
s8
* 
add»ss
 = (s8*è(((
u1
*è
obj
è+ 
off£t
);

264 
	`RETURN_LONG
(*
add»ss
);

265 
	}
}

270 
	$D®vik_sun_misc_Un§ã_putLÚg
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

273 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

274 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

275 
s8
 
v®ue
 = 
	`GET_ARG_LONG
(
¬gs
, 4);

276 
s8
* 
add»ss
 = (s8*è(((
u1
*è
obj
è+ 
off£t
);

278 *
add»ss
 = 
v®ue
;

279 
	`RETURN_VOID
();

280 
	}
}

285 
	$D®vik_sun_misc_Un§ã_g‘Objeù
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

288 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

289 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

290 
Objeù
** 
add»ss
 = (Objeù**è(((
u1
*è
obj
è+ 
off£t
);

292 
	`RETURN_PTR
(*
add»ss
);

293 
	}
}

298 
	$D®vik_sun_misc_Un§ã_putObjeù
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
)

301 
Objeù
* 
obj
 = (Objeù*è
¬gs
[1];

302 
s8
 
off£t
 = 
	`GET_ARG_LONG
(
¬gs
, 2);

303 
Objeù
* 
v®ue
 = (Objeù*è
¬gs
[4];

304 
Objeù
** 
add»ss
 = (Objeù**è(((
u1
*è
obj
è+ 
off£t
);

306 *
add»ss
 = 
v®ue
;

307 
	`RETURN_VOID
();

308 
	}
}

310 cÚ¡ 
D®vikN©iveM‘hod
 
	gdvm_sun_misc_Un§ã
[] = {

312 
D®vik_sun_misc_Un§ã_objeùF›ldOff£t0
 },

314 
D®vik_sun_misc_Un§ã_¬¿yBa£Off£t0
 },

316 
D®vik_sun_misc_Un§ã_¬¿yIndexSÿË0
 },

318 
D®vik_sun_misc_Un§ã_com·»AndSw­IÁ
 },

320 
D®vik_sun_misc_Un§ã_com·»AndSw­LÚg
 },

323 
D®vik_sun_misc_Un§ã_com·»AndSw­Objeù
 },

325 
D®vik_sun_misc_Un§ã_g‘IÁVŞ©e
 },

327 
D®vik_sun_misc_Un§ã_putIÁVŞ©e
 },

329 
D®vik_sun_misc_Un§ã_g‘LÚgVŞ©e
 },

331 
D®vik_sun_misc_Un§ã_putLÚgVŞ©e
 },

333 
D®vik_sun_misc_Un§ã_g‘ObjeùVŞ©e
 },

335 
D®vik_sun_misc_Un§ã_putObjeùVŞ©e
 },

337 
D®vik_sun_misc_Un§ã_g‘IÁ
 },

339 
D®vik_sun_misc_Un§ã_putIÁ
 },

341 
D®vik_sun_misc_Un§ã_g‘LÚg
 },

343 
D®vik_sun_misc_Un§ã_putLÚg
 },

345 
D®vik_sun_misc_Un§ã_g‘Objeù
 },

347 
D®vik_sun_misc_Un§ã_putObjeù
 },

348 { 
NULL
, NULL, NULL },

	@oo/AccessCheck.c

19 
	~"D®vik.h
"

24 
	$¡rcmpCouÁ
(cÚ¡ * 
¡r1
, cÚ¡ * 
¡r2
)

26 
couÁ
 = 0;

28 
Œue
) {

29 
ch
 = 
¡r1
[
couÁ
];

30 ià(
ch
 =ğ'\0' || ch !ğ
¡r2
[
couÁ
])

31  
couÁ
;

32 
couÁ
++;

34 
	}
}

39 
boŞ
 
	$dvmInSamePackage
(cÚ¡ 
CÏssObjeù
* 
şass1
, cÚ¡ CÏssObjeù* 
şass2
)

42 ià(
şass1
 =ğ
şass2
)

43  
Œue
;

46 ià(
şass1
->
şassLßd”
 !ğ
şass2
->classLoader)

47  
çl£
;

55 ià(
	`dvmIsA¼ayCÏss
(
şass1
))

56 
şass1
 = cÏss1->
–em’tCÏss
;

57 ià(
	`dvmIsA¼ayCÏss
(
şass2
))

58 
şass2
 = cÏss2->
–em’tCÏss
;

61 ià(
şass1
 =ğ
şass2
)

62  
Œue
;

73 
commÚL’
;

75 
commÚL’
 = 
	`¡rcmpCouÁ
(
şass1
->
desütÜ
, 
şass2
->descriptor);

76 ià(
	`¡rchr
(
şass1
->
desütÜ
 + 
commÚL’
, '/'è!ğ
NULL
 ||

77 
	`¡rchr
(
şass2
->
desütÜ
 + 
commÚL’
, '/'è!ğ
NULL
)

79  
çl£
;

82  
Œue
;

83 
	}
}

88 
boŞ
 
	$checkAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
,

89 cÚ¡ 
CÏssObjeù
* 
acûssTo
, 
u4
 
acûssFÏgs
)

92 ià(
acûssFÏgs
 & 
ACC_PUBLIC
)

93  
Œue
;

96 ià(
acûssFrom
 =ğ
acûssTo
)

97  
Œue
;

100 ià(
acûssFÏgs
 & 
ACC_PRIVATE
)

101  
çl£
;

107 ià(
acûssFÏgs
 & 
ACC_PROTECTED
)

108 ià(
	`dvmIsSubCÏss
(
acûssFrom
, 
acûssTo
))

109  
Œue
;

115  
	`dvmInSamePackage
(
acûssFrom
, 
acûssTo
);

116 
	}
}

125 
boŞ
 
	$dvmCheckCÏssAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
,

126 cÚ¡ 
CÏssObjeù
* 
şazz
)

128 ià(
	`dvmIsPublicCÏss
(
şazz
))

129  
Œue
;

130  
	`dvmInSamePackage
(
acûssFrom
, 
şazz
);

131 
	}
}

136 
boŞ
 
	$dvmCheckM‘hodAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
M‘hod
* 
m‘hod
)

138  
	`checkAcûss
(
acûssFrom
, 
m‘hod
->
şazz
, m‘hod->
acûssFÏgs
);

139 
	}
}

144 
boŞ
 
	$dvmCheckF›ldAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
F›ld
* 
f›ld
)

149  
	`checkAcûss
(
acûssFrom
, 
f›ld
->
şazz
, f›ld->
acûssFÏgs
);

150 
	}
}

	@oo/AccessCheck.h

19 #iâdeà
_DALVIK_OO_ACCESSCHECK


20 
	#_DALVIK_OO_ACCESSCHECK


	)

25 
boŞ
 
dvmCheckCÏssAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
,

26 cÚ¡ 
CÏssObjeù
* 
şazz
);

31 
boŞ
 
dvmCheckM‘hodAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
M‘hod
* 
m‘hod
);

36 
boŞ
 
dvmCheckF›ldAcûss
(cÚ¡ 
CÏssObjeù
* 
acûssFrom
, cÚ¡ 
F›ld
* 
f›ld
);

41 
boŞ
 
dvmInSamePackage
(cÚ¡ 
CÏssObjeù
* 
şass1
, cÚ¡ CÏssObjeù* 
şass2
);

	@oo/Array.c

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

22 
	~<¡ddef.h
>

24 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


25 
	~"h´of/H´of.h
"

28 
CÏssObjeù
* 
ü—‹A¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

29 
CÏssObjeù
* 
ü—‹Prim™iveCÏss
(
idx
);

31 cÚ¡ 
	ggPrimL‘‹r
[] = 
PRIM_TYPE_TO_LETTER
;

41 
A¼ayObjeù
* 
	$dvmAÎocA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
size_t
 
Ëngth
,

42 
size_t
 
–emWidth
, 
®locFÏgs
)

44 
A¼ayObjeù
* 
ÃwA¼ay
;

45 
size_t
 
size
;

47 
	`as£¹
(
¬¿yCÏss
->
desütÜ
[0] == '[');

49 ià(
Ëngth
 > 0x0fffffff) {

51 
	`LOGE
("Rejeùšg‡ÎoÿtiÚ oà%u-–em’ˆ¬¿y\n", 
Ëngth
);

52 
	`dvmThrowBadAÎocExû±iÚ
("array sizeoo†arge");

53  
NULL
;

56 
size
 = 
	`off£tof
(
A¼ayObjeù
, 
cÚ‹Ás
);

57 
size
 +ğ
Ëngth
 * 
–emWidth
;

62 
ÃwA¼ay
 = 
	`dvmM®loc
(
size
, 
®locFÏgs
);

63 ià(
ÃwA¼ay
 !ğ
NULL
) {

64 
	`DVM_OBJECT_INIT
(&
ÃwA¼ay
->
obj
, 
¬¿yCÏss
);

65 
ÃwA¼ay
->
Ëngth
 =†ength;

66 #ifdeà
WITH_TAINT_TRACKING


67 
ÃwA¼ay
->
št
.
g
 = 
TAINT_CLEAR
;

69 
	`LOGVV
("AllocArray: %s [%d] (%d)\n",

70 
¬¿yCÏss
->
desütÜ
, (è
Ëngth
, (è
size
);

71 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


72 
	`h´ofFlInSckT¿û
(&
ÃwA¼ay
->
obj
);

74 
	`dvmT¿ckAÎoÿtiÚ
(
¬¿yCÏss
, 
size
);

77  
ÃwA¼ay
;

78 
	}
}

84 
A¼ayObjeù
* 
	$dvmAÎocA¼ayByCÏss
(
CÏssObjeù
* 
¬¿yCÏss
,

85 
size_t
 
Ëngth
, 
®locFÏgs
)

87 cÚ¡ * 
desütÜ
 = 
¬¿yCÏss
->descriptor;

89 
	`as£¹
(
desütÜ
[0] == '[');

90 ià(
desütÜ
[1] != '[' && descriptor[1] != 'L') {

92 
	`as£¹
(
desütÜ
[2] == '\0');

93  
	`dvmAÎocPrim™iveA¼ay
(
desütÜ
[1], 
Ëngth
, 
®locFÏgs
);

95  
	`dvmAÎocA¼ay
(
¬¿yCÏss
, 
Ëngth
, 
kObjeùA¼ayRefWidth
,

96 
®locFÏgs
);

98 
	}
}

104 
CÏssObjeù
* 
	$dvmFšdA¼ayCÏssFÜEËm’t
(
CÏssObjeù
* 
–emCÏssObj
)

106 
CÏssObjeù
* 
¬¿yCÏss
;

108 
	`as£¹
(
–emCÏssObj
 !ğ
NULL
);

110 ià(
–emCÏssObj
->
¬¿yCÏss
 !ğ
NULL
) {

111 
¬¿yCÏss
 = 
–emCÏssObj
->arrayClass;

112 
	`LOGVV
("using cached '%s' class for '%s'\n",

113 
¬¿yCÏss
->
desütÜ
, 
–emCÏssObj
->descriptor);

116 
ÇmeL’
 = 
	`¡¾’
(
–emCÏssObj
->
desütÜ
);

117 
şassName
[
ÇmeL’
 + 2];

119 
şassName
[0] = '[';

120 
	`memıy
(
şassName
+1, 
–emCÏssObj
->
desütÜ
, 
ÇmeL’
+1);

121 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏss
(
şassName
, 
–emCÏssObj
->
şassLßd”
);

122 ià(
¬¿yCÏss
 !ğ
NULL
)

123 
–emCÏssObj
->
¬¿yCÏss
 =‡rrayClass;

126  
¬¿yCÏss
;

127 
	}
}

140 
A¼ayObjeù
* 
	$dvmAÎocObjeùA¼ay
(
CÏssObjeù
* 
–emCÏssObj
, 
size_t
 
Ëngth
,

141 
®locFÏgs
)

143 
CÏssObjeù
* 
¬¿yCÏss
;

144 
A¼ayObjeù
* 
ÃwA¼ay
 = 
NULL
;

146 
	`LOGVV
("dvmAllocObjectArray: '%s'†en=%d\n",

147 
–emCÏssObj
->
desütÜ
, ()
Ëngth
);

149 
¬¿yCÏss
 = 
	`dvmFšdA¼ayCÏssFÜEËm’t
(
–emCÏssObj
);

150 ià(
¬¿yCÏss
 !ğ
NULL
) {

151 
ÃwA¼ay
 = 
	`dvmAÎocA¼ay
(
¬¿yCÏss
, 
Ëngth
, 
kObjeùA¼ayRefWidth
,

152 
®locFÏgs
);

156  
ÃwA¼ay
;

157 
	}
}

165 
A¼ayObjeù
* 
	$dvmAÎocPrim™iveA¼ay
(
ty³
, 
size_t
 
Ëngth
, 
®locFÏgs
)

167 
A¼ayObjeù
* 
ÃwA¼ay
;

168 
CÏssObjeù
** 
pTy³CÏss
;

169 
width
;

171 
ty³
) {

173 
pTy³CÏss
 = &
gDvm
.
şassA¼ayIÁ
;

174 
width
 = 4;

177 
pTy³CÏss
 = &
gDvm
.
şassA¼ayCh¬
;

178 
width
 = 2;

181 
pTy³CÏss
 = &
gDvm
.
şassA¼ayBy‹
;

182 
width
 = 1;

185 
pTy³CÏss
 = &
gDvm
.
şassA¼ayBoŞ—n
;

186 
width
 = 1;

189 
pTy³CÏss
 = &
gDvm
.
şassA¼ayFlßt
;

190 
width
 = 4;

193 
pTy³CÏss
 = &
gDvm
.
şassA¼ayDoubË
;

194 
width
 = 8;

197 
pTy³CÏss
 = &
gDvm
.
şassA¼ayShÜt
;

198 
width
 = 2;

201 
pTy³CÏss
 = &
gDvm
.
şassA¼ayLÚg
;

202 
width
 = 8;

205 
	`LOGE
("UnknowÀty³ '%c'\n", 
ty³
);

206 
	`as£¹
(
çl£
);

207  
NULL
;

210 ià(*
pTy³CÏss
 =ğ
NULL
) {

211 
ty³CÏssName
[3] = "[x";

213 
ty³CÏssName
[1] = 
ty³
;

215 *
pTy³CÏss
 = 
	`dvmFšdA¼ayCÏss
(
ty³CÏssName
, 
NULL
);

216 ià(*
pTy³CÏss
 =ğ
NULL
) {

217 
	`LOGE
("ERROR: failedo generate‡rray class for '%s'\n",

218 
ty³CÏssName
);

219  
NULL
;

223 
ÃwA¼ay
 = 
	`dvmAÎocA¼ay
(*
pTy³CÏss
, 
Ëngth
, 
width
, 
®locFÏgs
);

226  
ÃwA¼ay
;

227 
	}
}

236 
A¼ayObjeù
* 
	$dvmAÎocMuÉiA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
curDim
,

237 cÚ¡ * 
dim’siÚs
)

239 
A¼ayObjeù
* 
ÃwA¼ay
;

240 cÚ¡ * 
–emName
 = 
¬¿yCÏss
->
desütÜ
 + 1;

242 
	`LOGVV
("dvmAllocMultiArray: class='%s' curDim=%d *dimensions=%d\n",

243 
¬¿yCÏss
->
desütÜ
, 
curDim
, *
dim’siÚs
);

245 ià(
curDim
 == 0) {

246 ià(*
–emName
 == 'L' || *elemName == '[') {

247 
	`LOGVV
("ƒnd:‡rray class (obj) is '%s'\n",

248 
¬¿yCÏss
->
desütÜ
);

249 
ÃwA¼ay
 = 
	`dvmAÎocA¼ay
(
¬¿yCÏss
, *
dim’siÚs
,

250 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

252 
	`LOGVV
("ƒnd:‡rray class (prim) is '%s'\n",

253 
¬¿yCÏss
->
desütÜ
);

254 
ÃwA¼ay
 = 
	`dvmAÎocPrim™iveA¼ay
(

255 
gPrimL‘‹r
[
¬¿yCÏss
->
–em’tCÏss
->
´im™iveTy³
],

256 *
dim’siÚs
, 
ALLOC_DEFAULT
);

259 
CÏssObjeù
* 
subA¼ayCÏss
;

260 
Objeù
** 
cÚ‹Ás
;

261 
i
;

264 
subA¼ayCÏss
 = 
	`dvmFšdA¼ayCÏss
(
–emName
, 
¬¿yCÏss
->
şassLßd”
);

265 ià(
subA¼ayCÏss
 =ğ
NULL
) {

267 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

268  
NULL
;

270 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
subA¼ayCÏss
));

273 
ÃwA¼ay
 = 
	`dvmAÎocA¼ay
(
¬¿yCÏss
, *
dim’siÚs
, 
kObjeùA¼ayRefWidth
,

274 
ALLOC_DEFAULT
);

275 ià(
ÃwA¼ay
 =ğ
NULL
) {

276 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

277  
NULL
;

283 
cÚ‹Ás
 = (
Objeù
**è
ÃwA¼ay
->contents;

284 
i
 = 0; i < *
dim’siÚs
; i++) {

285 
A¼ayObjeù
* 
ÃwSubA¼ay
;

287 
ÃwSubA¼ay
 = 
	`dvmAÎocMuÉiA¼ay
(
subA¼ayCÏss
, 
curDim
-1,

288 
dim’siÚs
+1);

289 ià(
ÃwSubA¼ay
 =ğ
NULL
) {

290 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwA¼ay
, 
NULL
);

291 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

292  
NULL
;

295 *
cÚ‹Ás
++ = (
Objeù
*è
ÃwSubA¼ay
;

296 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwSubA¼ay
, 
NULL
);

301  
ÃwA¼ay
;

302 
	}
}

312 
CÏssObjeù
* 
	$dvmFšdA¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
)

314 
CÏssObjeù
* 
şazz
;

316 
	`as£¹
(
desütÜ
[0] == '[');

319 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
çl£
);

320 ià(
şazz
 =ğ
NULL
) {

321 
	`LOGV
("A¼ay cÏs '%s' %°nÙ found; c»©šg\n", 
desütÜ
, 
lßd”
);

322 
şazz
 = 
	`ü—‹A¼ayCÏss
(
desütÜ
, 
lßd”
);

323 ià(
şazz
 !ğ
NULL
)

324 
	`dvmAddIn™ŸtšgLßd”
(
şazz
, 
lßd”
);

327  
şazz
;

328 
	}
}

344 
CÏssObjeù
* 
	$ü—‹A¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
)

346 
CÏssObjeù
* 
ÃwCÏss
 = 
NULL
;

347 
CÏssObjeù
* 
–em’tCÏss
 = 
NULL
;

348 
¬¿yDim
;

349 
u4
 
exŒaFÏgs
;

351 
	`as£¹
(
desütÜ
[0] == '[');

352 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

353 
	`as£¹
(
gDvm
.
şassJavaLªgObjeù
 !ğ
NULL
);

358 
exŒaFÏgs
 = 
CLASS_ISARRAY
;

359 ià(
desütÜ
[1] == '[') {

361 
CÏssObjeù
* 
ou‹r
;

363 
ou‹r
 = 
	`dvmFšdCÏssNoIn™
(&
desütÜ
[1], 
lßd”
);

364 ià(
ou‹r
 !ğ
NULL
) {

366 
–em’tCÏss
 = 
ou‹r
->elementClass;

367 
¬¿yDim
 = 
ou‹r
->arrayDim + 1;

368 
exŒaFÏgs
 |ğ
CLASS_ISOBJECTARRAY
;

370 
	`as£¹
(
–em’tCÏss
 =ğ
NULL
);

373 
¬¿yDim
 = 1;

374 ià(
desütÜ
[1] == 'L') {

376 cÚ¡ * 
subDesütÜ
 = &
desütÜ
[1];

377 
	`LOGVV
("£¬chšg fÜƒËm’ˆşas '%s'\n", 
subDesütÜ
);

378 
–em’tCÏss
 = 
	`dvmFšdCÏssNoIn™
(
subDesütÜ
, 
lßd”
);

379 
exŒaFÏgs
 |ğ
CLASS_ISOBJECTARRAY
;

382 
–em’tCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
desütÜ
[1]);

386 ià(
–em’tCÏss
 =ğ
NULL
) {

388 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

389 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

390 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

391  
NULL
;

412 ià(
lßd”
 !ğ
–em’tCÏss
->
şassLßd”
) {

413 
	`LOGVV
("--- checking for '%s' in %p vs.ƒlem %p\n",

414 
desütÜ
, 
lßd”
, 
–em’tCÏss
->
şassLßd”
);

415 
ÃwCÏss
 = 
	`dvmLookupCÏss
(
desütÜ
, 
–em’tCÏss
->
şassLßd”
, 
çl£
);

416 ià(
ÃwCÏss
 !ğ
NULL
) {

417 
	`LOGV
("--- we‡lready have %s in %p, don't‚eed in %p\n",

418 
desütÜ
, 
–em’tCÏss
->
şassLßd”
, 
lßd”
);

419  
ÃwCÏss
;

434 
ÃwCÏss
 = (
CÏssObjeù
*è
	`dvmM®loc
((*ÃwCÏss), 
ALLOC_DEFAULT
);

435 ià(
ÃwCÏss
 =ğ
NULL
)

436  
NULL
;

437 
	`DVM_OBJECT_INIT
(&
ÃwCÏss
->
obj
, 
gDvm
.
uÆškedJavaLªgCÏss
);

438 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

439 
ÃwCÏss
->
desütÜAÎoc
 = 
	`¡rdup
(
desütÜ
);

440 
ÃwCÏss
->
desütÜ
 =‚ewCÏss->
desütÜAÎoc
;

441 
ÃwCÏss
->
su³r
 = 
gDvm
.
şassJavaLªgObjeù
;

442 
ÃwCÏss
->
vbËCouÁ
 = 
gDvm
.
şassJavaLªgObjeù
->vtableCount;

443 
ÃwCÏss
->
vbË
 = 
gDvm
.
şassJavaLªgObjeù
->vtable;

444 
ÃwCÏss
->
´im™iveTy³
 = 
PRIM_NOT
;

445 
ÃwCÏss
->
–em’tCÏss
 =ƒlementClass;

446 
ÃwCÏss
->
şassLßd”
 = 
–em’tCÏss
->classLoader;

447 
ÃwCÏss
->
¬¿yDim
 =‡rrayDim;

448 
ÃwCÏss
->
¡©us
 = 
CLASS_INITIALIZED
;

449 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


450 
	`h´ofFlInSckT¿û
(
ÃwCÏss
);

472 
ÃwCÏss
->
š‹rçûCouÁ
 = 2;

473 
ÃwCÏss
->
š‹rçûs
 = (
CÏssObjeù
**)
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

474 (
CÏssObjeù
*) * 2);

475 
	`mem£t
(
ÃwCÏss
->
š‹rçûs
, 0, (
CÏssObjeù
*) * 2);

476 
ÃwCÏss
->
š‹rçûs
[0] =

477 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Cloneable;");

478 
ÃwCÏss
->
š‹rçûs
[1] =

479 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/io/Serializable;");

480 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
š‹rçûs
);

481 ià(
ÃwCÏss
->
š‹rçûs
[0] =ğ
NULL
 ||‚ewClass->interfaces[1] == NULL) {

482 
	`LOGE
("Unableo create‡rray class '%s': missing interfaces\n",

483 
desütÜ
);

484 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

485 
	`dvmThrowExû±iÚ
("Ljava/lang/InternalError;", "missing‡rray ifaces");

486 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

487  
NULL
;

495 
ÃwCÏss
->
iáabËCouÁ
 = 2;

496 
ÃwCÏss
->
iáabË
 = (
IÁ”çûEÁry
*è
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

497 (
IÁ”çûEÁry
) * 2);

498 
	`mem£t
(
ÃwCÏss
->
iáabË
, 0, (
IÁ”çûEÁry
) * 2);

499 
ÃwCÏss
->
iáabË
[0].
şazz
 =‚ewCÏss->
š‹rçûs
[0];

500 
ÃwCÏss
->
iáabË
[1].
şazz
 =‚ewCÏss->
š‹rçûs
[1];

501 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
iáabË
);

512 
ÃwCÏss
->
acûssFÏgs
 = (ÒewCÏss->
–em’tCÏss
->accessFlags &

513 ~
ACC_INTERFACE
è| 
ACC_FINAL
è& 
JAVA_FLAGS_MASK
;

518 
	`SET_CLASS_FLAG
(
ÃwCÏss
, 
exŒaFÏgs
);

520 ià(!
	`dvmAddCÏssToHash
(
ÃwCÏss
)) {

526 
	`LOGI
("WOW: somebody generated %s simultaneously\n",

527 
ÃwCÏss
->
desütÜ
);

532 
	`as£¹
(
ÃwCÏss
->
obj
.
şazz
 =ğ
gDvm
.
uÆškedJavaLªgCÏss
);

533 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

537 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

541 
ÃwCÏss
 = 
	`dvmLookupCÏss
(
desütÜ
, 
–em’tCÏss
->
şassLßd”
, 
çl£
);

542 
	`as£¹
(
ÃwCÏss
 !ğ
NULL
);

543  
ÃwCÏss
;

547 
ÃwCÏss
->
obj
.
şazz
 = 
gDvm
.
şassJavaLªgCÏss
;

548 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

550 
	`LOGV
("Created‡rray class '%s' %p (access=0x%04x.%04x)\n",

551 
desütÜ
, 
ÃwCÏss
->
şassLßd”
,

552 
ÃwCÏss
->
acûssFÏgs
 >> 16,

553 
ÃwCÏss
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
);

555  
ÃwCÏss
;

556 
	}
}

568 
CÏssObjeù
* 
	$dvmFšdPrim™iveCÏss
(
ty³
)

570 
idx
;

572 
ty³
) {

574 
idx
 = 
PRIM_BOOLEAN
;

577 
idx
 = 
PRIM_CHAR
;

580 
idx
 = 
PRIM_FLOAT
;

583 
idx
 = 
PRIM_DOUBLE
;

586 
idx
 = 
PRIM_BYTE
;

589 
idx
 = 
PRIM_SHORT
;

592 
idx
 = 
PRIM_INT
;

595 
idx
 = 
PRIM_LONG
;

598 
idx
 = 
PRIM_VOID
;

601 
	`LOGW
("UnknowÀ´im™ivty³ '%c'\n", 
ty³
);

602  
NULL
;

609 ià(
gDvm
.
´im™iveCÏss
[
idx
] =ğ
NULL
) {

610 
CÏssObjeù
* 
´imCÏss
 = 
	`ü—‹Prim™iveCÏss
(
idx
);

611 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
´imCÏss
, 
NULL
);

613 ià(!
	`ATOMIC_CMP_SWAP
((*è&
gDvm
.
´im™iveCÏss
[
idx
],

614 0, (è
´imCÏss
))

620 
	`dvmF»eCÏssIÂ¬ds
(
´imCÏss
);

624  
gDvm
.
´im™iveCÏss
[
idx
];

625 
	}
}

635 
CÏssObjeù
* 
	$ü—‹Prim™iveCÏss
(
idx
)

637 
CÏssObjeù
* 
ÃwCÏss
;

638 cÚ¡ * 
kCÏssDesütÜs
[
PRIM_MAX
] = {

642 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

643 
	`as£¹
(
idx
 >ğ0 && idx < 
PRIM_MAX
);

652 
ÃwCÏss
 = (
CÏssObjeù
*è
	`dvmM®loc
((*ÃwCÏss), 
ALLOC_DEFAULT
);

653 ià(
ÃwCÏss
 =ğ
NULL
)

654  
NULL
;

655 
	`DVM_OBJECT_INIT
(&
ÃwCÏss
->
obj
, 
gDvm
.
şassJavaLªgCÏss
);

656 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

657 
ÃwCÏss
->
acûssFÏgs
 = 
ACC_PUBLIC
 | 
ACC_FINAL
 | 
ACC_ABSTRACT
;

658 
ÃwCÏss
->
´im™iveTy³
 = 
idx
;

659 
ÃwCÏss
->
desütÜAÎoc
 = 
NULL
;

660 
ÃwCÏss
->
desütÜ
 = 
kCÏssDesütÜs
[
idx
];

662 
ÃwCÏss
->
¡©us
 = 
CLASS_INITIALIZED
;

663 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


664 
	`h´ofFlInSckT¿û
(
ÃwCÏss
);

669 
	`LOGVV
("C»©ed…rim™ivşas '%s'\n", 
kCÏssDesütÜs
[
idx
]);

671  
ÃwCÏss
;

672 
	}
}

678 
boŞ
 
	$dvmCİyObjeùA¼ay
(
A¼ayObjeù
* 
d¡A¼ay
, cÚ¡ A¼ayObjeù* 
¤cA¼ay
,

679 
CÏssObjeù
* 
d¡EËmCÏss
)

681 
Objeù
** 
¤c
 = (Objeù**)
¤cA¼ay
->
cÚ‹Ás
;

682 
Objeù
** 
d¡
 = (Objeù**)
d¡A¼ay
->
cÚ‹Ás
;

683 
u4
 
couÁ
 = 
d¡A¼ay
->
Ëngth
;

685 
	`as£¹
(
¤cA¼ay
->
Ëngth
 =ğ
d¡A¼ay
->length);

686 
	`as£¹
(
d¡A¼ay
->
obj
.
şazz
->
–em’tCÏss
 =ğ
d¡EËmCÏss
 ||

687 (
d¡A¼ay
->
obj
.
şazz
->
–em’tCÏss
 =ğ
d¡EËmCÏss
->elementClass &&

688 
d¡A¼ay
->
obj
.
şazz
->
¬¿yDim
 =ğ
d¡EËmCÏss
->arrayDim+1));

690 
couÁ
--) {

691 ià(!
	`dvmIn¡ªûof
((*
¤c
)->
şazz
, 
d¡EËmCÏss
)) {

692 
	`LOGW
("dvmCopyObjectArray: can't store %s in %s\n",

693 (*
¤c
)->
şazz
->
desütÜ
, 
d¡EËmCÏss
->descriptor);

694  
çl£
;

696 *
d¡
++ = *
¤c
++;

699  
Œue
;

700 
	}
}

706 
	$dvmGcSÿnPrim™iveCÏs£s
()

708 
i
;

710 
i
 = 0; i < 
PRIM_MAX
; i++) {

711 
	`dvmM¬kObjeù
((
Objeù
 *)
gDvm
.
´im™iveCÏss
[
i
]);

713 
	}
}

	@oo/Array.h

19 #iâdeà
_DALVIK_OO_ARRAY


20 
	#_DALVIK_OO_ARRAY


	)

23 
	#kObjeùA¼ayRefWidth
 (
Objeù
*)

	)

33 
CÏssObjeù
* 
dvmFšdA¼ayCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

39 
CÏssObjeù
* 
dvmFšdA¼ayCÏssFÜEËm’t
(CÏssObjeù* 
–emCÏssObj
);

49 
A¼ayObjeù
* 
dvmAÎocA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
size_t
 
Ëngth
,

50 
size_t
 
–emWidth
, 
®locFÏgs
);

58 
A¼ayObjeù
* 
dvmAÎocA¼ayByCÏss
(
CÏssObjeù
* 
¬¿yCÏss
,

59 
size_t
 
Ëngth
, 
®locFÏgs
);

74 
A¼ayObjeù
* 
dvmAÎocObjeùA¼ay
(
CÏssObjeù
* 
–emCÏssObj
, 
size_t
 
Ëngth
,

75 
®locFÏgs
);

86 
A¼ayObjeù
* 
dvmAÎocPrim™iveA¼ay
(
ty³
, 
size_t
 
Ëngth
, 
®locFÏgs
);

96 
A¼ayObjeù
* 
dvmAÎocMuÉiA¼ay
(
CÏssObjeù
* 
¬¿yCÏss
, 
curDim
,

97 cÚ¡ * 
dim’siÚs
);

103 
CÏssObjeù
* 
dvmFšdPrim™iveCÏss
(
ty³
);

110 
INLINE
 
boŞ
 
	$dvmIsA¼ay
(cÚ¡ 
A¼ayObjeù
* 
¬¿yObj
)

112  ( ((
Objeù
*)
¬¿yObj
)->
şazz
->
desütÜ
[0] == '[' );

113 
	}
}

121 
INLINE
 
boŞ
 
	$dvmIsA¼ayCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

123  (
şazz
->
desütÜ
[0] == '[');

124 
	}
}

132 
boŞ
 
dvmCİyObjeùA¼ay
(
A¼ayObjeù
* 
d¡A¼ay
, cÚ¡ A¼ayObjeù* 
¤cA¼ay
,

133 
CÏssObjeù
* 
d¡EËmCÏss
);

	@oo/Class.c

22 
	#LOG_CLASS_LOADING
 0

	)

24 
	~"D®vik.h
"

25 
	~"libdex/DexCÏss.h
"

27 
	~<¡dlib.h
>

28 
	~<¡ddef.h
>

29 
	~<sys/¡©.h
>

31 #ià
LOG_CLASS_LOADING


32 
	~<uni¡d.h
>

33 
	~<±h»ad.h
>

34 
	~<cuts/´oûss_Çme.h
>

35 
	~<sys/ty³s.h
>

158 
	#INITIAL_CLASS_SERIAL_NUMBER
 0x50000000

	)

165 
	#ZYGOTE_CLASS_CUTOFF
 2304

	)

167 
CÏssP©hEÁry
* 
´oûssCÏssP©h
(cÚ¡ * 
·thSŒ
, 
boŞ
 
isBoÙ¡¿p
);

168 
ä“C³A¼ay
(
CÏssP©hEÁry
* 
ıe
);

170 
CÏssObjeù
* 
fšdCÏssFromLßd”NoIn™
(

171 cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

172 
CÏssObjeù
* 
fšdCÏssNoIn™
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,\

173 
DvmDex
* 
pDvmDex
);

174 
CÏssObjeù
* 
lßdCÏssFromDex
(
DvmDex
* 
pDvmDex
,

175 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, 
Objeù
* 
lßd”
);

176 
lßdM‘hodFromDex
(
CÏssObjeù
* 
şazz
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
,\

177 
M‘hod
* 
m‘h
);

178 
compu‹JniArgInfo
(cÚ¡ 
DexPrÙo
* 
´Ùo
);

179 
lßdSF›ldFromDex
(
CÏssObjeù
* 
şazz
,

180 cÚ¡ 
DexF›ld
* 
pDexSF›ld
, 
SticF›ld
* 
sf›ld
);

181 
lßdIF›ldFromDex
(
CÏssObjeù
* 
şazz
,

182 cÚ¡ 
DexF›ld
* 
pDexIF›ld
, 
In¡F›ld
* 
f›ld
);

183 
ä“M‘hodIÂ¬ds
(
M‘hod
* 
m‘h
);

184 
boŞ
 
ü—‹VbË
(
CÏssObjeù
* 
şazz
);

185 
boŞ
 
ü—‹IáabË
(
CÏssObjeù
* 
şazz
);

186 
boŞ
 
š£¹M‘hodStubs
(
CÏssObjeù
* 
şazz
);

187 
boŞ
 
compu‹F›ldOff£ts
(
CÏssObjeù
* 
şazz
);

188 
throwE¬l›rCÏssFau»
(
CÏssObjeù
* 
şazz
);

190 #ià
LOG_CLASS_LOADING


198 
	$logCÏssLßdW™hTime
(
ty³
, 
CÏssObjeù
* 
şazz
, 
u8
 
time
) {

199 
pid_t
 
µid
 = 
	`g‘µid
();

200 
pid_t
 
pid
 = 
	`g‘pid
();

201 
tid
 = (è
	`±h»ad_£lf
();

203 
	`LOG
(
LOG_INFO
, "PRELOAD", "%c%d:%d:%d:%s:%d:%s:%Îd\n", 
ty³
, 
µid
, 
pid
, 
tid
,

204 
	`g‘_´oûss_Çme
(), (è
şazz
->
şassLßd”
, cÏzz->
desütÜ
,

205 
time
);

206 
	}
}

211 
	$logCÏssLßd
(
ty³
, 
CÏssObjeù
* 
şazz
) {

212 
	`logCÏssLßdW™hTime
(
ty³
, 
şazz
, 
	`dvmG‘Th»adCpuTimeN£c
());

213 
	}
}

219 
	$lš—rAÎocTe¡s
()

221 * 
fiddË
;

222 
Œy
 = 1;

224 
Œy
) {

226 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 3200-28);

227 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

230 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 3200-24);

231 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

234 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 3200-20);

235 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

238 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 3200-16);

239 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

242 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 3200-12);

243 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

246 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 896);

247 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

248 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 20);

249 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

251 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 1);

252 
fiddË
[0] = 'q';

253 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

254 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 4096);

255 
fiddË
[0] = 'x';

256 
fiddË
[4095] = 'y';

257 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

258 
	`dvmLš—rF»e
(
NULL
, 
fiddË
);

259 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 0);

260 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

261 
fiddË
 = 
	`dvmLš—rR—Îoc
(
NULL
, fiddle, 12);

262 
fiddË
[11] = 'z';

263 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

264 
fiddË
 = 
	`dvmLš—rR—Îoc
(
NULL
, fiddle, 5);

265 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

266 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 17001);

267 
fiddË
[0] = 'x';

268 
fiddË
[17000] = 'y';

269 
	`dvmLš—rR—dOÆy
(
NULL
, 
fiddË
);

271 * 
¡r
 = 
	`dvmLš—rSŒdup
(
NULL
, "This is‡est!");

272 
	`LOGI
("GOT: '%s'\n", 
¡r
);

275 
fiddË
 = 
	`dvmLš—rAÎoc
(
NULL
, 12);

276 
	`LOGI
("Should b1: %d\n", 
	`dvmLš—rAÎocCÚšs
(
fiddË
, 12));

277 
	`LOGI
("Should b0: %d\n", 
	`dvmLš—rAÎocCÚšs
(
fiddË
, 13));

278 
	`LOGI
("Should b0: %d\n", 
	`dvmLš—rAÎocCÚšs
(
fiddË
 - 128*1024, 1));

280 
	`dvmLš—rAÎocDump
(
NULL
);

281 
	`dvmLš—rF»e
(
NULL
, 
¡r
);

282 
	}
}

289 
boŞ
 
	$dvmCÏssS¹up
()

291 
CÏssObjeù
* 
uÆškedCÏss
;

294 ià(
	`¡rcmp
(
gDvm
.
boÙCÏssP©hSŒ
, ".") == 0) {

295 
	`LOGE
("ERROR: must specify‚on-'.' bootclasspath\n");

296  
çl£
;

299 
gDvm
.
lßdedCÏs£s
 =

300 
	`dvmHashTabËC»©e
(256, (
HashF»eFunc
è
dvmF»eCÏssIÂ¬ds
);

302 
gDvm
.
pBoÙLßd”AÎoc
 = 
	`dvmLš—rAÎocC»©e
(
NULL
);

303 ià(
gDvm
.
pBoÙLßd”AÎoc
 =ğ
NULL
)

304  
çl£
;

306 ià(
çl£
) {

307 
	`lš—rAÎocTe¡s
();

308 
	`ex™
(0);

315 
gDvm
.
şassS”ŸlNumb”
 = 
INITIAL_CLASS_SERIAL_NUMBER
;

322 
gDvm
.
š™ŸtšgLßd”Li¡
 =

323 
	`ÿÎoc
(
ZYGOTE_CLASS_CUTOFF
, (
In™ŸtšgLßd”Li¡
));

329 
uÆškedCÏss
 = &
gDvm
.
uÆškedJavaLªgCÏssObjeù
;

331 
	`mem£t
(
uÆškedCÏss
, 0, (*unlinkedClass));

336 
	`DVM_OBJECT_INIT
(&
uÆškedCÏss
->
obj
, 
NULL
);

337 
uÆškedCÏss
->
desütÜ
 = "!unlinkedClass";

338 
	`dvmS‘CÏssS”ŸlNumb”
(
uÆškedCÏss
);

340 
gDvm
.
uÆškedJavaLªgCÏss
 = 
uÆškedCÏss
;

346 
	`as£¹
(
gDvm
.
boÙCÏssP©h
 =ğ
NULL
);

347 
	`´oûssCÏssP©h
(
gDvm
.
boÙCÏssP©hSŒ
, 
Œue
);

349 ià(
gDvm
.
boÙCÏssP©h
 =ğ
NULL
)

350  
çl£
;

352  
Œue
;

353 
	}
}

358 
	$dvmCÏssShutdown
()

360 
i
;

363 
	`dvmHashTabËF»e
(
gDvm
.
lßdedCÏs£s
);

364 
gDvm
.
lßdedCÏs£s
 = 
NULL
;

367 
i
 = 0; i < 
PRIM_MAX
; i++)

368 
	`dvmF»eCÏssIÂ¬ds
(
gDvm
.
´im™iveCÏss
[
i
]);

371 
	`ä“C³A¼ay
(
gDvm
.
boÙCÏssP©h
);

372 
gDvm
.
boÙCÏssP©h
 = 
NULL
;

374 
	`dvmLš—rAÎocDe¡roy
(
NULL
);

376 
	`ä“
(
gDvm
.
š™ŸtšgLßd”Li¡
);

377 
	}
}

389 
	$dumpCÏssP©h
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
)

391 
idx
 = 0;

393 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

394 cÚ¡ * 
kšdSŒ
;

396 
ıe
->
kšd
) {

397 
kC³Dœ
: 
kšdSŒ
 = "dir"; ;

398 
kC³J¬
: 
kšdSŒ
 = "jar"; ;

399 
kC³Dex
: 
kšdSŒ
 = "dex"; ;

400 : 
kšdSŒ
 = "???"; ;

403 
	`LOGI
(" %2d:y³=% % %p\n", 
idx
, 
kšdSŒ
, 
ıe
->
feName
, c³->
±r
);

404 ià(
CALC_CACHE_STATS
 && 
ıe
->
kšd
 =ğ
kC³J¬
) {

405 
J¬Fe
* 
pJ¬Fe
 = (J¬Fe*è
ıe
->
±r
;

406 
DvmDex
* 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pJ¬Fe
);

407 
	`dvmDumpAtomicCacheSts
(
pDvmDex
->
pIÁ”çûCache
);

410 
ıe
++;

411 
idx
++;

413 
	}
}

418 
	$dvmDumpBoÙCÏssP©h
()

420 
	`dumpCÏssP©h
(
gDvm
.
boÙCÏssP©h
);

421 
	}
}

426 
boŞ
 
	$dvmCÏssP©hCÚšs
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
, cÚ¡ * 
·th
)

428 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

429 ià(
	`¡rcmp
(
ıe
->
feName
, 
·th
) == 0)

430  
Œue
;

432 
ıe
++;

434  
çl£
;

435 
	}
}

442 
	$ä“C³A¼ay
(
CÏssP©hEÁry
* 
ıe
)

444 
CÏssP©hEÁry
* 
ıeS¹
 = 
ıe
;

446 ià(
ıe
 =ğ
NULL
)

449 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

450 
ıe
->
kšd
) {

451 
kC³J¬
:

453 
	`dvmJ¬FeF»e
((
J¬Fe
*è
ıe
->
±r
);

455 
kC³Dex
:

457 
	`dvmRawDexFeF»e
((
RawDexFe
*è
ıe
->
±r
);

461 
	`as£¹
(
ıe
->
±r
 =ğ
NULL
);

465 
	`ä“
(
ıe
->
feName
);

466 
ıe
++;

469 
	`ä“
(
ıeS¹
);

470 
	}
}

478 
boŞ
 
	$´•¬eC³
(
CÏssP©hEÁry
* 
ıe
, 
boŞ
 
isBoÙ¡¿p
)

480 
J¬Fe
* 
pJ¬Fe
 = 
NULL
;

481 
RawDexFe
* 
pRawDexFe
 = 
NULL
;

482 
¡©
 
sb
;

483 
cc
;

485 
cc
 = 
	`¡©
(
ıe
->
feName
, &
sb
);

486 ià(
cc
 < 0) {

487 
	`LOGD
("UÇbËØ¡© cÏs¥©hƒËm’ˆ'%s'\n", 
ıe
->
feName
);

488  
çl£
;

490 ià(
	`S_ISDIR
(
sb
.
¡_mode
)) {

500 
ıe
->
kšd
 = 
kC³Dœ
;

501 
	`as£¹
(
ıe
->
±r
 =ğ
NULL
);

502  
Œue
;

505 ià(
	`dvmJ¬FeO³n
(
ıe
->
feName
, 
NULL
, &
pJ¬Fe
, 
isBoÙ¡¿p
) == 0) {

506 
ıe
->
kšd
 = 
kC³J¬
;

507 
ıe
->
±r
 = 
pJ¬Fe
;

508  
Œue
;

512 ià(
	`dvmRawDexFeO³n
(
ıe
->
feName
, 
NULL
, &
pRawDexFe
, 
isBoÙ¡¿p
) == 0)

514 
ıe
->
kšd
 = 
kC³Dex
;

515 
ıe
->
±r
 = 
pRawDexFe
;

516  
Œue
;

519 
	`LOGD
("UÇbËØ´oûs şas¥©hƒËm’ˆ'%s'\n", 
ıe
->
feName
);

520  
çl£
;

521 
	}
}

535 
CÏssP©hEÁry
* 
	$´oûssCÏssP©h
(cÚ¡ * 
·thSŒ
, 
boŞ
 
isBoÙ¡¿p
)

537 
CÏssP©hEÁry
* 
ıe
 = 
NULL
;

538 * 
mªgË
;

539 * 
ı
;

540 cÚ¡ * 
’d
;

541 
idx
, 
couÁ
;

543 
	`as£¹
(
·thSŒ
 !ğ
NULL
);

545 
mªgË
 = 
	`¡rdup
(
·thSŒ
);

554 
couÁ
 = 1;

555 
ı
 = 
mªgË
; *cp != '\0'; cp++) {

556 ià(*
ı
 == ':') {

557 
couÁ
++;

558 *
ı
 = '\0';

561 
’d
 = 
ı
;

566 
ıe
 = (
CÏssP©hEÁry
*è
	`ÿÎoc
(
couÁ
+1, (ClassPathEntry));

571 
gDvm
.
boÙCÏssP©h
 = 
ıe
;

576 
ı
 = 
mªgË
;

577 
idx
 = 0;

578 
ı
 < 
’d
) {

579 ià(*
ı
 == '\0') {

582 
CÏssP©hEÁry
 
tmp
;

583 
tmp
.
kšd
 = 
kC³Unknown
;

584 
tmp
.
feName
 = 
	`¡rdup
(
ı
);

585 
tmp
.
±r
 = 
NULL
;

588 
ıe
[
idx
].
kšd
 = 
kC³La¡EÁry
;

589 
ıe
[
idx
].
feName
 = 
NULL
;

590 
ıe
[
idx
].
±r
 = 
NULL
;

592 ià(!
	`´•¬eC³
(&
tmp
, 
isBoÙ¡¿p
)) {

594 
	`ä“
(
tmp
.
feName
);

597 ià(
tmp
.
feName
[0] != '/')

598 
	`LOGW
("Non-absolute bootclasspathƒntry '%s'\n",

599 
tmp
.
feName
);

600 
ıe
[
idx
] = 
tmp
;

601 
idx
++;

605 
ı
 +ğ
	`¡¾’
(cp) +1;

607 
	`as£¹
(
idx
 <ğ
couÁ
);

608 ià(
idx
 =ğ0 && !
gDvm
.
İtimizšg
) {

609 
	`LOGE
("ERROR:‚Øv®idƒÁr› found iÀboÙşas¥©h '%s'\n", 
·thSŒ
);

610 
	`ä“
(
ıe
);

611 
ıe
 = 
NULL
;

612 
ba
;

615 
	`LOGVV
(" (fËd %d oà%d slÙs)\n", 
idx
, 
couÁ
);

618 
ıe
[
idx
].
kšd
 = 
kC³La¡EÁry
;

619 
ıe
[
idx
].
feName
 = 
NULL
;

620 
ıe
[
idx
].
±r
 = 
NULL
;

624 
ba
:

625 
	`ä“
(
mªgË
);

626 
gDvm
.
boÙCÏssP©h
 = 
ıe
;

627  
ıe
;

628 
	}
}

637 
DvmDex
* 
	$£¬chBoÙP©hFÜCÏss
(cÚ¡ * 
desütÜ
,

638 cÚ¡ 
DexCÏssDef
** 
µCÏssDef
)

640 cÚ¡ 
CÏssP©hEÁry
* 
ıe
 = 
gDvm
.
boÙCÏssP©h
;

641 cÚ¡ 
DexCÏssDef
* 
pFoundDef
 = 
NULL
;

642 
DvmDex
* 
pFoundFe
 = 
NULL
;

644 
	`LOGVV
("+++ class '%s'‚ot yet†oaded, scanning bootclasspath...\n",

645 
desütÜ
);

647 
ıe
->
kšd
 !ğ
kC³La¡EÁry
) {

650 
ıe
->
kšd
) {

651 
kC³Dœ
:

652 
	`LOGW
("Directoryƒntries ('%s')‚ot supported in bootclasspath\n",

653 
ıe
->
feName
);

655 
kC³J¬
:

657 
J¬Fe
* 
pJ¬Fe
 = (J¬Fe*è
ıe
->
±r
;

658 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

659 
DvmDex
* 
pDvmDex
;

661 
pDvmDex
 = 
	`dvmG‘J¬FeDex
(
pJ¬Fe
);

662 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDvmDex
->
pDexFe
, 
desütÜ
);

663 ià(
pCÏssDef
 !ğ
NULL
) {

665 
pFoundDef
 = 
pCÏssDef
;

666 
pFoundFe
 = 
pDvmDex
;

667 
found
;

671 
kC³Dex
:

673 
RawDexFe
* 
pRawDexFe
 = (RawDexFe*è
ıe
->
±r
;

674 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

675 
DvmDex
* 
pDvmDex
;

677 
pDvmDex
 = 
	`dvmG‘RawDexFeDex
(
pRawDexFe
);

678 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDvmDex
->
pDexFe
, 
desütÜ
);

679 ià(
pCÏssDef
 !ğ
NULL
) {

681 
pFoundDef
 = 
pCÏssDef
;

682 
pFoundFe
 = 
pDvmDex
;

683 
found
;

688 
	`LOGE
("UnknowÀkšd %d\n", 
ıe
->
kšd
);

689 
	`as£¹
(
çl£
);

693 
ıe
++;

705 ià(
gDvm
.
boÙCÏssP©hO±ExŒa
 !ğ
NULL
) {

706 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

708 
pCÏssDef
 =

709 
	`dexFšdCÏss
(
gDvm
.
boÙCÏssP©hO±ExŒa
->
pDexFe
, 
desütÜ
);

710 ià(
pCÏssDef
 !ğ
NULL
) {

712 
pFoundDef
 = 
pCÏssDef
;

713 
pFoundFe
 = 
gDvm
.
boÙCÏssP©hO±ExŒa
;

717 
found
:

718 *
µCÏssDef
 = 
pFoundDef
;

719  
pFoundFe
;

720 
	}
}

726 
	$dvmS‘BoÙP©hExŒaDex
(
DvmDex
* 
pDvmDex
)

728 
gDvm
.
boÙCÏssP©hO±ExŒa
 = 
pDvmDex
;

729 
	}
}

737 
	$dvmG‘BoÙP©hSize
()

739 cÚ¡ 
CÏssP©hEÁry
* 
ıe
 = 
gDvm
.
boÙCÏssP©h
;

741 
ıe
->
kšd
 !ğ
kC³La¡EÁry
)

742 
ıe
++;

744  
ıe
 - 
gDvm
.
boÙCÏssP©h
;

745 
	}
}

758 
SŒšgObjeù
* 
	$dvmG‘BoÙP©hResourû
(cÚ¡ * 
Çme
, 
idx
)

760 cÚ¡ 
kU¾Ov”h—d
 = 13;

761 cÚ¡ 
CÏssP©hEÁry
* 
ıe
 = 
gDvm
.
boÙCÏssP©h
;

762 
SŒšgObjeù
* 
u¾Obj
 = 
NULL
;

764 
	`LOGV
("+++ searching for„esource '%s' in %d(%s)\n",

765 
Çme
, 
idx
, 
ıe
[idx].
feName
);

768 
idx
-- && 
ıe
->
kšd
 !ğ
kC³La¡EÁry
)

769 
ıe
++;

770 ià(
ıe
->
kšd
 =ğ
kC³La¡EÁry
) {

771 
	`as£¹
(
çl£
);

772  
NULL
;

775 
u¾Buf
[
	`¡¾’
(
Çme
è+ sŒËn(
ıe
->
feName
è+ 
kU¾Ov”h—d
 +1];

777 
ıe
->
kšd
) {

778 
kC³Dœ
:

779 
	`¥rštf
(
u¾Buf
, "fe://%s/%s", 
ıe
->
feName
, 
Çme
);

780 ià(
	`acûss
(
u¾Buf
+7, 
F_OK
) != 0)

781 
ba
;

783 
kC³J¬
:

785 
J¬Fe
* 
pJ¬Fe
 = (J¬Fe*è
ıe
->
±r
;

786 ià(
	`dexZFšdEÁry
(&
pJ¬Fe
->
¬chive
, 
Çme
è=ğ
NULL
)

787 
ba
;

788 
	`¥rštf
(
u¾Buf
, "j¬:fe://%s!/%s", 
ıe
->
feName
, 
Çme
);

791 
kC³Dex
:

792 
	`LOGV
("No„esources in DEX files\n");

793 
ba
;

795 
	`as£¹
(
çl£
);

796 
ba
;

799 
	`LOGV
("+++ usšg URL='%s'\n", 
u¾Buf
);

800 
u¾Obj
 = 
	`dvmC»©eSŒšgFromC¡r
(
u¾Buf
, 
ALLOC_DEFAULT
);

802 
ba
:

803  
u¾Obj
;

804 
	}
}

814 
	sCÏssM©chCr™”Ÿ
 {

815 cÚ¡ * 
	mdesütÜ
;

816 
Objeù
* 
	mlßd”
;

817 } 
	tCÏssM©chCr™”Ÿ
;

819 
	#kIn™Lßd”Inc
 4

	)

821 
In™ŸtšgLßd”Li¡
 *
	$dvmG‘In™ŸtšgLßd”Li¡
(
CÏssObjeù
* 
şazz
)

823 
	`as£¹
(
şazz
->
£rŸlNumb”
 > 
INITIAL_CLASS_SERIAL_NUMBER
);

824 
şassIndex
 = 
şazz
->
£rŸlNumb”
-
INITIAL_CLASS_SERIAL_NUMBER
;

825 ià(
gDvm
.
š™ŸtšgLßd”Li¡
 !ğ
NULL
 &&

826 
şassIndex
 < 
ZYGOTE_CLASS_CUTOFF
) {

827  &(
gDvm
.
š™ŸtšgLßd”Li¡
[
şassIndex
]);

829  &(
şazz
->
š™ŸtšgLßd”Li¡
);

831 
	}
}

843 
boŞ
 
	$dvmLßd”InIn™ŸtšgLi¡
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
Objeù
* 
lßd”
)

850 ià(
lßd”
 =ğ
NULL
)

851  
çl£
;

857 
CÏssObjeù
* 
nÚCÚ¡CÏzz
 = (CÏssObjeù*è
şazz
;

858 cÚ¡ 
In™ŸtšgLßd”Li¡
 *
lßd”Li¡
 =

859 
	`dvmG‘In™ŸtšgLßd”Li¡
(
nÚCÚ¡CÏzz
);

860 
i
;

861 
i
 = 
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
-1; i >= 0; --i) {

862 ià(
lßd”Li¡
->
š™ŸtšgLßd”s
[
i
] =ğ
lßd”
) {

865  
Œue
;

868  
çl£
;

869 
	}
}

881 
	$dvmAddIn™ŸtšgLßd”
(
CÏssObjeù
* 
şazz
, 
Objeù
* 
lßd”
)

883 ià(
lßd”
 !ğ
şazz
->
şassLßd”
) {

884 
	`as£¹
(
lßd”
 !ğ
NULL
);

886 
	`LOGVV
("Addšg %°tØ'%s' in™†i¡\n", 
lßd”
, 
şazz
->
desütÜ
);

887 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

907 
In™ŸtšgLßd”Li¡
 *
lßd”Li¡
 = 
	`dvmG‘In™ŸtšgLßd”Li¡
(
şazz
);

908 ià((
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
 & (
kIn™Lßd”Inc
-1)) == 0) {

909 
Objeù
** 
ÃwLi¡
;

911 
ÃwLi¡
 = (
Objeù
**è
	`»®loc
(
lßd”Li¡
->
š™ŸtšgLßd”s
,

912 (
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
 + 
kIn™Lßd”Inc
)

913 * (
Objeù
*));

914 ià(
ÃwLi¡
 =ğ
NULL
) {

916 
	`as£¹
(
çl£
);

917 
ba_uÆock
;

919 
lßd”Li¡
->
š™ŸtšgLßd”s
 = 
ÃwLi¡
;

925 
lßd”Li¡
->
š™ŸtšgLßd”s
[lßd”Li¡->
š™ŸtšgLßd”CouÁ
++] =

926 
lßd”
;

928 
ba_uÆock
:

929 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

931 
	}
}

947 
	$hashcmpCÏssByCr™
(cÚ¡ * 
vşazz
, cÚ¡ * 
vü™
)

949 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

950 cÚ¡ 
CÏssM©chCr™”Ÿ
* 
pCr™
 = (cÚ¡ CÏssM©chCr™”Ÿ*è
vü™
;

951 
boŞ
 
m©ch
;

953 
m©ch
 = (
	`¡rcmp
(
şazz
->
desütÜ
, 
pCr™
->descriptor) == 0 &&

954 (
şazz
->
şassLßd”
 =ğ
pCr™
->
lßd”
 ||

955 (
pCr™
->
lßd”
 !ğ
NULL
 &&

956 
	`dvmLßd”InIn™ŸtšgLi¡
(
şazz
, 
pCr™
->
lßd”
)) ));

961  !
m©ch
;

962 
	}
}

968 
	$hashcmpCÏssByCÏss
(cÚ¡ * 
vşazz
, cÚ¡ * 
vaddşazz
)

970 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

971 cÚ¡ 
CÏssObjeù
* 
addCÏzz
 = (cÚ¡ CÏssObjeù*è
vaddşazz
;

972 
boŞ
 
m©ch
;

974 
m©ch
 = (
	`¡rcmp
(
şazz
->
desütÜ
, 
addCÏzz
->descriptor) == 0 &&

975 (
şazz
->
şassLßd”
 =ğ
addCÏzz
->classLoader ||

976 (
addCÏzz
->
şassLßd”
 !ğ
NULL
 &&

977 
	`dvmLßd”InIn™ŸtšgLi¡
(
şazz
, 
addCÏzz
->
şassLßd”
)) ));

978  !
m©ch
;

979 
	}
}

1000 
CÏssObjeù
* 
	$dvmLookupCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,

1001 
boŞ
 
uÅ»pOkay
)

1003 
CÏssM©chCr™”Ÿ
 
ü™
;

1004 * 
found
;

1005 
u4
 
hash
;

1007 
ü™
.
desütÜ
 = descriptor;

1008 
ü™
.
lßd”
 =†oader;

1009 
hash
 = 
	`dvmCompu‹Utf8Hash
(
desütÜ
);

1011 
	`LOGVV
("threadid=%d: dvmLookupClass searching for '%s' %p\n",

1012 
	`dvmTh»adS–f
()->
th»adId
, 
desütÜ
, 
lßd”
);

1014 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1015 
found
 = 
	`dvmHashTabËLookup
(
gDvm
.
lßdedCÏs£s
, 
hash
, &
ü™
,

1016 
hashcmpCÏssByCr™
, 
çl£
);

1017 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1027 ià(
found
 !ğ
NULL
 && !
uÅ»pOkay
 && !
	`dvmIsCÏssLšked
(found)) {

1028 
	`LOGV
("Ignoring‚ot-yet-ready %s, using slow…ath\n",

1029 ((
CÏssObjeù
*)
found
)->
desütÜ
);

1030 
found
 = 
NULL
;

1033  (
CÏssObjeù
*è
found
;

1034 
	}
}

1048 
boŞ
 
	$dvmAddCÏssToHash
(
CÏssObjeù
* 
şazz
)

1050 * 
found
;

1051 
u4
 
hash
;

1053 
hash
 = 
	`dvmCompu‹Utf8Hash
(
şazz
->
desütÜ
);

1055 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1056 
found
 = 
	`dvmHashTabËLookup
(
gDvm
.
lßdedCÏs£s
, 
hash
, 
şazz
,

1057 
hashcmpCÏssByCÏss
, 
Œue
);

1058 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1060 
	`LOGV
("+++ dvmAddClassToHash '%s' %p (isnew=%d) --> %p\n",

1061 
şazz
->
desütÜ
, cÏzz->
şassLßd”
,

1062 (
found
 =ğ(*è
şazz
), clazz);

1067  (
found
 =ğ(*è
şazz
);

1068 
	}
}

1074 
u4
 
	$hashÿlcCÏss
(cÚ¡ * 
™em
)

1076  
	`dvmCompu‹Utf8Hash
(((cÚ¡ 
CÏssObjeù
*è
™em
)->
desütÜ
);

1077 
	}
}

1082 
	$dvmCheckCÏssTabËP”f
()

1084 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1085 
	`dvmHashTabËProbeCouÁ
(
gDvm
.
lßdedCÏs£s
, 
hashÿlcCÏss
,

1086 
hashcmpCÏssByCÏss
);

1087 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1088 
	}
}

1094 
	$»moveCÏssFromHash
(
CÏssObjeù
* 
şazz
)

1096 
	`LOGV
("+++„emoveCÏssFromHash '%s'\n", 
şazz
->
desütÜ
);

1098 
u4
 
hash
 = 
	`dvmCompu‹Utf8Hash
(
şazz
->
desütÜ
);

1100 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

1101 ià(!
	`dvmHashTabËRemove
(
gDvm
.
lßdedCÏs£s
, 
hash
, 
şazz
))

1102 
	`LOGW
("HashabË„emovçed oÀşas '%s'\n", 
şazz
->
desütÜ
);

1103 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

1104 
	}
}

1119 
	$dvmS‘CÏssS”ŸlNumb”
(
CÏssObjeù
* 
şazz
)

1121 
u4
 
ŞdV®ue
, 
ÃwV®ue
;

1123 
	`as£¹
(
şazz
->
£rŸlNumb”
 == 0);

1126 
ŞdV®ue
 = 
gDvm
.
şassS”ŸlNumb”
;

1127 
ÃwV®ue
 = 
ŞdV®ue
 + 1;

1128 } !
	`ATOMIC_CMP_SWAP
(&
gDvm
.
şassS”ŸlNumb”
, 
ŞdV®ue
, 
ÃwV®ue
));

1130 
şazz
->
£rŸlNumb”
 = (
u4
è
ŞdV®ue
;

1131 
	}
}

1144 
CÏssObjeù
* 
	$dvmFšdCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
)

1146 
CÏssObjeù
* 
şazz
;

1148 
şazz
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
lßd”
);

1149 ià(
şazz
 !ğ
NULL
 && cÏzz->
¡©us
 < 
CLASS_INITIALIZED
) {

1151 ià(!
	`dvmIn™CÏss
(
şazz
)) {

1153 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1154 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_ERROR
);

1155  
NULL
;

1159  
şazz
;

1160 
	}
}

1172 
CÏssObjeù
* 
	$dvmFšdCÏssNoIn™
(cÚ¡ * 
desütÜ
,

1173 
Objeù
* 
lßd”
)

1175 
	`as£¹
(
desütÜ
 !ğ
NULL
);

1178 
	`LOGVV
("FšdCÏssNoIn™ '%s' %p\n", 
desütÜ
, 
lßd”
);

1180 ià(*
desütÜ
 == '[') {

1184  
	`dvmFšdA¼ayCÏss
(
desütÜ
, 
lßd”
);

1189 ià(
lßd”
 !ğ
NULL
) {

1190  
	`fšdCÏssFromLßd”NoIn™
(
desütÜ
, 
lßd”
);

1192  
	`dvmFšdSy¡emCÏssNoIn™
(
desütÜ
);

1195 
	}
}

1203 
CÏssObjeù
* 
	$fšdCÏssFromLßd”NoIn™
(cÚ¡ * 
desütÜ
,

1204 
Objeù
* 
lßd”
)

1209 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1210 
CÏssObjeù
* 
şazz
;

1212 
	`as£¹
(
lßd”
 !ğ
NULL
);

1224 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
çl£
);

1225 ià(
şazz
 !ğ
NULL
) {

1226 
	`LOGVV
("AÌ—dy†ßded: % %p\n", 
desütÜ
, 
lßd”
);

1227  
şazz
;

1229 
	`LOGVV
("NÙ‡Ì—dy†ßded: % %p\n", 
desütÜ
, 
lßd”
);

1232 * 
dÙName
 = 
NULL
;

1233 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

1234 
Objeù
* 
exûp
;

1235 
M‘hod
* 
lßdCÏss
;

1238 
dÙName
 = 
	`dvmDesütÜToDÙ
(
desütÜ
);

1239 ià(
dÙName
 =ğ
NULL
) {

1240 
	`dvmThrowExû±iÚ
("Ljava/Ïng/OutOfMemÜyE¼Ü;", 
NULL
);

1241 
ba
;

1243 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
dÙName
, 
ALLOC_DEFAULT
);

1244 ià(
ÇmeObj
 =ğ
NULL
) {

1245 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1246 
ba
;

1250 
lßdCÏss
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
lßd”
->
şazz
, "loadClass",

1252 ià(
lßdCÏss
 =ğ
NULL
) {

1253 
	`LOGW
("Couldn't find†oadClass in ClassLoader\n");

1254 
ba
;

1257 #ifdeà
WITH_PROFILER


1258 
	`dvmM‘hodT¿ûCÏssP»pBegš
();

1267 
	`LOGVV
("--- Invokšg†ßdCÏss(%s, %p)\n", 
dÙName
, 
lßd”
);

1268 
JV®ue
 
»suÉ
;

1269 
	`dvmC®lM‘hod
(
£lf
, 
lßdCÏss
, 
lßd”
, &
»suÉ
, 
ÇmeObj
);

1270 
şazz
 = (
CÏssObjeù
*è
»suÉ
.
l
;

1272 #ifdeà
WITH_PROFILER


1273 
	`dvmM‘hodT¿ûCÏssP»pEnd
();

1276 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1277 ià(
exûp
 !ğ
NULL
) {

1278 #ià
DVM_SHOW_EXCEPTION
 >= 2

1279 
	`LOGD
("NOTE:†oadClass '%s' %phrewƒxception %s\n",

1280 
dÙName
, 
lßd”
, 
exûp
->
şazz
->
desütÜ
);

1282 
	`dvmAddT¿ckedAÎoc
(
exûp
, 
£lf
);

1283 
	`dvmCË¬Exû±iÚ
(
£lf
);

1284 
	`dvmThrowChašedExû±iÚW™hCÏssMes§ge
(

1285 "Ljava/Ïng/NoCÏssDefFoundE¼Ü;", 
desütÜ
, 
exûp
);

1286 
	`dvmR–—£T¿ckedAÎoc
(
exûp
, 
£lf
);

1287 
şazz
 = 
NULL
;

1288 
ba
;

1290 
	`as£¹
(
şazz
 !ğ
NULL
);

1293 
	`dvmAddIn™ŸtšgLßd”
(
şazz
, 
lßd”
);

1295 
	`LOGVV
("--- Successfully†oaded %s %p (thisldr=%p clazz=%p)\n",

1296 
desütÜ
, 
şazz
->
şassLßd”
, 
lßd”
, clazz);

1298 
ba
:

1299 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÇmeObj
, 
NULL
);

1300 
	`ä“
(
dÙName
);

1301  
şazz
;

1302 
	}
}

1309 
CÏssObjeù
* 
	$dvmDefšeCÏss
(
DvmDex
* 
pDvmDex
, cÚ¡ * 
desütÜ
,

1310 
Objeù
* 
şassLßd”
)

1312 
	`as£¹
(
pDvmDex
 !ğ
NULL
);

1314  
	`fšdCÏssNoIn™
(
desütÜ
, 
şassLßd”
, 
pDvmDex
);

1315 
	}
}

1326 
CÏssObjeù
* 
	$dvmFšdSy¡emCÏss
(cÚ¡ * 
desütÜ
)

1328 
CÏssObjeù
* 
şazz
;

1330 
şazz
 = 
	`dvmFšdSy¡emCÏssNoIn™
(
desütÜ
);

1331 ià(
şazz
 !ğ
NULL
 && cÏzz->
¡©us
 < 
CLASS_INITIALIZED
) {

1333 ià(!
	`dvmIn™CÏss
(
şazz
)) {

1335 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1336 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_ERROR
);

1337  
NULL
;

1341  
şazz
;

1342 
	}
}

1350 
CÏssObjeù
* 
	$dvmFšdSy¡emCÏssNoIn™
(cÚ¡ * 
desütÜ
)

1352  
	`fšdCÏssNoIn™
(
desütÜ
, 
NULL
, NULL);

1353 
	}
}

1369 
CÏssObjeù
* 
	$fšdCÏssNoIn™
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,

1370 
DvmDex
* 
pDvmDex
)

1372 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

1373 
CÏssObjeù
* 
şazz
;

1374 #ifdeà
WITH_PROFILER


1375 
boŞ
 
´of”NÙif›d
 = 
çl£
;

1378 ià(
lßd”
 !ğ
NULL
) {

1379 
	`LOGVV
("#### fšdCÏssNoIn™(%s,%p,%p)\n", 
desütÜ
, 
lßd”
,

1380 
pDvmDex
->
pDexFe
);

1395 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1396 
	`LOGE
("Class†ookup %s‡ttemped whileƒxception %s…ending\n",

1397 
desütÜ
, 
	`dvmG‘Exû±iÚ
(
£lf
)->
şazz
->descriptor);

1398 
	`dvmDumpAÎTh»ads
(
çl£
);

1399 
	`dvmAbÜt
();

1402 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
Œue
);

1403 ià(
şazz
 =ğ
NULL
) {

1404 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

1406 #ifdeà
WITH_PROFILER


1407 
	`dvmM‘hodT¿ûCÏssP»pBegš
();

1408 
´of”NÙif›d
 = 
Œue
;

1411 #ià
LOG_CLASS_LOADING


1412 
u8
 
¡¬tTime
 = 
	`dvmG‘Th»adCpuTimeN£c
();

1415 ià(
pDvmDex
 =ğ
NULL
) {

1416 
	`as£¹
(
lßd”
 =ğ
NULL
);

1417 
pDvmDex
 = 
	`£¬chBoÙP©hFÜCÏss
(
desütÜ
, &
pCÏssDef
);

1419 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDvmDex
->
pDexFe
, 
desütÜ
);

1422 ià(
pDvmDex
 =ğ
NULL
 || 
pCÏssDef
 == NULL) {

1423 ià(
gDvm
.
noCÏssDefFoundE¼ÜObj
 !ğ
NULL
) {

1425 
	`dvmS‘Exû±iÚ
(
£lf
, 
gDvm
.
noCÏssDefFoundE¼ÜObj
);

1428 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

1429 "Ljava/Ïng/NoCÏssDefFoundE¼Ü;", 
desütÜ
);

1431 
ba
;

1435 
şazz
 = 
	`lßdCÏssFromDex
(
pDvmDex
, 
pCÏssDef
, 
lßd”
);

1436 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1438 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şazz
, 
NULL
);

1439 
ba
;

1447 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1448 
şazz
->
š™Th»adId
 = 
£lf
->
th»adId
;

1455 
	`as£¹
(
şazz
->
şassLßd”
 =ğ
lßd”
);

1456 ià(!
	`dvmAddCÏssToHash
(
şazz
)) {

1465 
şazz
->
š™Th»adId
 = 0;

1466 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1470 
	`as£¹
(
şazz
->
obj
.şazz =ğ
gDvm
.
uÆškedJavaLªgCÏss
);

1471 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şazz
, 
NULL
);

1475 
şazz
 = 
	`dvmLookupCÏss
(
desütÜ
, 
lßd”
, 
Œue
);

1476 
	`as£¹
(
şazz
 !ğ
NULL
);

1477 
gÙ_şass
;

1479 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
şazz
, 
NULL
);

1481 #ià
LOG_CLASS_LOADING


1482 
	`logCÏssLßdW™hTime
('>', 
şazz
, 
¡¬tTime
);

1487 ià(!
	`dvmLškCÏss
(
şazz
, 
çl£
)) {

1488 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

1492 
	`»moveCÏssFromHash
(
şazz
);

1493 
şazz
->
¡©us
 = 
CLASS_ERROR
;

1494 
	`dvmF»eCÏssIÂ¬ds
(
şazz
);

1498 
şazz
->
š™Th»adId
 = 0;

1499 
	`dvmObjeùNÙifyAÎ
(
£lf
, (
Objeù
*è
şazz
);

1500 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1502 #ià
LOG_CLASS_LOADING


1503 
	`LOG
(
LOG_INFO
, "DVMLINK FAILED FOR CLASS ", "%s in %s\n",

1504 
şazz
->
desütÜ
, 
	`g‘_´oûss_Çme
());

1511 
	`logCÏssLßd
('<', 
şazz
);

1513 
şazz
 = 
NULL
;

1514 ià(
gDvm
.
İtimizšg
) {

1516 
	`LOGV
("Lšk oàşas '%s' faed\n", 
desütÜ
);

1518 
	`LOGW
("Lšk oàşas '%s' faed\n", 
desütÜ
);

1520 
ba
;

1522 
	`dvmObjeùNÙifyAÎ
(
£lf
, (
Objeù
*è
şazz
);

1523 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1530 
gDvm
.
numLßdedCÏs£s
++;

1531 
gDvm
.
numDeş¬edM‘hods
 +=

1532 
şazz
->
vœtu®M‘hodCouÁ
 + cÏzz->
dœeùM‘hodCouÁ
;

1533 
gDvm
.
numDeş¬edIn¡F›lds
 +ğ
şazz
->
if›ldCouÁ
;

1534 
gDvm
.
numDeş¬edSticF›lds
 +ğ
şazz
->
sf›ldCouÁ
;

1542 ià(
gDvm
.
şassJavaLªgObjeù
 =ğ
NULL
 &&

1543 
	`¡rcmp
(
desütÜ
, "Ljava/lang/Object;") == 0)

1548 
	`as£¹
(
lßd”
 =ğ
NULL
);

1549 
gDvm
.
şassJavaLªgObjeù
 = 
şazz
;

1552 #ià
LOG_CLASS_LOADING


1553 
	`logCÏssLßd
('<', 
şazz
);

1557 
gÙ_şass
:

1558 ià(!
	`dvmIsCÏssLšked
(
şazz
è&& cÏzz->
¡©us
 !ğ
CLASS_ERROR
) {

1571 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1572 ià(!
	`dvmIsCÏssLšked
(
şazz
) &&

1573 
şazz
->
š™Th»adId
 =ğ
£lf
->
th»adId
)

1575 
	`LOGW
("Recursivlšk oÀşas %s\n", 
şazz
->
desütÜ
);

1576 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1577 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

1578 "Ljava/Ïng/CÏssCœcuÏr™yE¼Ü;", 
şazz
->
desütÜ
);

1579 
şazz
 = 
NULL
;

1580 
ba
;

1584 !
	`dvmIsCÏssLšked
(
şazz
è&& cÏzz->
¡©us
 !ğ
CLASS_ERROR
) {

1585 
	`dvmObjeùWa™
(
£lf
, (
Objeù
*è
şazz
, 0, 0, 
çl£
);

1587 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

1589 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

1594 
	`throwE¬l›rCÏssFau»
(
şazz
);

1595 
şazz
 = 
NULL
;

1596 
ba
;

1601 
	`as£¹
(
	`dvmIsCÏssLšked
(
şazz
));

1602 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

1603 
	`as£¹
(
şazz
->
obj
.şazz =ğ
gDvm
.
şassJavaLªgCÏss
);

1604 ià(
şazz
 !ğ
gDvm
.
şassJavaLªgObjeù
) {

1605 ià(
şazz
->
su³r
 =ğ
NULL
) {

1606 
	`LOGE
("Non-Object has‚o superclass (gDvm.classJavaLangObject=%p)\n",

1607 
gDvm
.
şassJavaLªgObjeù
);

1608 
	`dvmAbÜt
();

1611 ià(!
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

1615 
	`as£¹
(
şazz
->
vbËCouÁ
 >ğşazz->
vœtu®M‘hodCouÁ
);

1626 ià(
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
 && !
	`dvmIsCÏssIn™Ÿlized
(clazz) &&

1627 !(
şazz
->
¡©us
 =ğ
CLASS_VERIFYING
))

1629 
	`LOGV
("+++ƒx¶ic™ly in™Ÿlizšg %s\n", 
şazz
->
desütÜ
);

1630 
	`dvmIn™CÏss
(
şazz
);

1633 
ba
:

1634 #ifdeà
WITH_PROFILER


1635 ià(
´of”NÙif›d
)

1636 
	`dvmM‘hodT¿ûCÏssP»pEnd
();

1638 
	`as£¹
(
şazz
 !ğ
NULL
 || 
	`dvmCheckExû±iÚ
(
£lf
));

1639  
şazz
;

1640 
	}
}

1646 
CÏssObjeù
* 
	$lßdCÏssFromDex0
(
DvmDex
* 
pDvmDex
,

1647 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, cÚ¡ 
DexCÏssD©aH—d”
* 
pH—d”
,

1648 cÚ¡ 
u1
* 
pEncodedD©a
, 
Objeù
* 
şassLßd”
)

1650 
CÏssObjeù
* 
ÃwCÏss
 = 
NULL
;

1651 cÚ¡ 
DexFe
* 
pDexFe
;

1652 cÚ¡ * 
desütÜ
;

1653 
i
;

1655 
pDexFe
 = 
pDvmDex
->pDexFile;

1656 
desütÜ
 = 
	`dexG‘CÏssDesütÜ
(
pDexFe
, 
pCÏssDef
);

1662 ià((
pCÏssDef
->
acûssFÏgs
 & ~
EXPECTED_FILE_FLAGS
) != 0) {

1663 
	`LOGW
("Invalid file flags in class %s: %04x\n",

1664 
desütÜ
, 
pCÏssDef
->
acûssFÏgs
);

1665  
NULL
;

1676 
ÃwCÏss
 = (
CÏssObjeù
*è
	`dvmM®loc
((*ÃwCÏss), 
ALLOC_DEFAULT
);

1677 ià(
ÃwCÏss
 =ğ
NULL
)

1678  
NULL
;

1686 
	`DVM_OBJECT_INIT
(&
ÃwCÏss
->
obj
, 
gDvm
.
uÆškedJavaLªgCÏss
);

1688 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

1689 
ÃwCÏss
->
desütÜ
 = descriptor;

1690 
	`as£¹
(
ÃwCÏss
->
desütÜAÎoc
 =ğ
NULL
);

1691 
ÃwCÏss
->
acûssFÏgs
 = 
pCÏssDef
->accessFlags;

1692 
ÃwCÏss
->
şassLßd”
 = classLoader;

1693 
ÃwCÏss
->
pDvmDex
 =…DvmDex;

1694 
ÃwCÏss
->
´im™iveTy³
 = 
PRIM_NOT
;

1705 
	`as£¹
((
u4
è=ğ(
CÏssObjeù
*));

1706 
ÃwCÏss
->
su³r
 = (
CÏssObjeù
*è
pCÏssDef
->
su³rşassIdx
;

1714 cÚ¡ 
DexTy³Li¡
* 
pIÁ”çûsLi¡
;

1715 
pIÁ”çûsLi¡
 = 
	`dexG‘IÁ”çûsLi¡
(
pDexFe
, 
pCÏssDef
);

1716 ià(
pIÁ”çûsLi¡
 !ğ
NULL
) {

1717 
ÃwCÏss
->
š‹rçûCouÁ
 = 
pIÁ”çûsLi¡
->
size
;

1718 
ÃwCÏss
->
š‹rçûs
 = (
CÏssObjeù
**è
	`dvmLš—rAÎoc
(
şassLßd”
,

1719 
ÃwCÏss
->
š‹rçûCouÁ
 * (
CÏssObjeù
*));

1721 
i
 = 0; i < 
ÃwCÏss
->
š‹rçûCouÁ
; i++) {

1722 cÚ¡ 
DexTy³I‹m
* 
pTy³
 = 
	`dexG‘Ty³I‹m
(
pIÁ”çûsLi¡
, 
i
);

1723 
ÃwCÏss
->
š‹rçûs
[
i
] = (
CÏssObjeù
*)(
u4
è
pTy³
->
ty³Idx
;

1725 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
š‹rçûs
);

1738 ià(
pH—d”
->
¡©icF›ldsSize
 != 0) {

1740 
couÁ
 = (è
pH—d”
->
¡©icF›ldsSize
;

1741 
u4
 
Ï¡Index
 = 0;

1742 
DexF›ld
 
f›ld
;

1744 
ÃwCÏss
->
sf›ldCouÁ
 = 
couÁ
;

1745 
ÃwCÏss
->
sf›lds
 =

1746 (
SticF›ld
*è
	`ÿÎoc
(
couÁ
, (StaticField));

1747 
i
 = 0; i < 
couÁ
; i++) {

1748 
	`dexR—dCÏssD©aF›ld
(&
pEncodedD©a
, &
f›ld
, &
Ï¡Index
);

1749 
	`lßdSF›ldFromDex
(
ÃwCÏss
, &
f›ld
, &ÃwCÏss->
sf›lds
[
i
]);

1753 ià(
pH—d”
->
š¡ªûF›ldsSize
 != 0) {

1754 
couÁ
 = (è
pH—d”
->
š¡ªûF›ldsSize
;

1755 
u4
 
Ï¡Index
 = 0;

1756 
DexF›ld
 
f›ld
;

1758 
ÃwCÏss
->
if›ldCouÁ
 = 
couÁ
;

1759 
ÃwCÏss
->
if›lds
 = (
In¡F›ld
*è
	`dvmLš—rAÎoc
(
şassLßd”
,

1760 
couÁ
 * (
In¡F›ld
));

1761 
i
 = 0; i < 
couÁ
; i++) {

1762 
	`dexR—dCÏssD©aF›ld
(&
pEncodedD©a
, &
f›ld
, &
Ï¡Index
);

1763 
	`lßdIF›ldFromDex
(
ÃwCÏss
, &
f›ld
, &ÃwCÏss->
if›lds
[
i
]);

1765 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
if›lds
);

1780 
u4
 
şassDefIdx
 = 
	`dexG‘IndexFÜCÏssDef
(
pDexFe
, 
pCÏssDef
);

1781 cÚ¡ * 
şassM­D©a
;

1782 
u4
 
numM‘hods
;

1784 ià(
gDvm
.
´eci£Gc
) {

1785 
şassM­D©a
 =

1786 
	`dvmRegi¡”M­G‘CÏssD©a
(
pDexFe
, 
şassDefIdx
, &
numM‘hods
);

1789 ià(
şassM­D©a
 !ğ
NULL
 &&

1790 
pH—d”
->
dœeùM‘hodsSize
 +…H—d”->
vœtu®M‘hodsSize
 !ğ
numM‘hods
)

1792 
	`LOGE
("ERROR: in %s, direct=%d virtual=%d, maps have %d\n",

1793 
ÃwCÏss
->
desütÜ
, 
pH—d”
->
dœeùM‘hodsSize
,

1794 
pH—d”
->
vœtu®M‘hodsSize
, 
numM‘hods
);

1795 
	`as£¹
(
çl£
);

1796 
şassM­D©a
 = 
NULL
;

1799 
şassM­D©a
 = 
NULL
;

1802 ià(
pH—d”
->
dœeùM‘hodsSize
 != 0) {

1803 
couÁ
 = (è
pH—d”
->
dœeùM‘hodsSize
;

1804 
u4
 
Ï¡Index
 = 0;

1805 
DexM‘hod
 
m‘hod
;

1807 
ÃwCÏss
->
dœeùM‘hodCouÁ
 = 
couÁ
;

1808 
ÃwCÏss
->
dœeùM‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
(
şassLßd”
,

1809 
couÁ
 * (
M‘hod
));

1810 
i
 = 0; i < 
couÁ
; i++) {

1811 
	`dexR—dCÏssD©aM‘hod
(&
pEncodedD©a
, &
m‘hod
, &
Ï¡Index
);

1812 
	`lßdM‘hodFromDex
(
ÃwCÏss
, &
m‘hod
, &ÃwCÏss->
dœeùM‘hods
[
i
]);

1813 ià(
şassM­D©a
 !ğ
NULL
) {

1814 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
	`dvmRegi¡”M­G‘Next
(&
şassM­D©a
);

1815 ià(
	`dvmRegi¡”M­G‘FÜm©
(
pM­
è!ğ
kRegM­FÜm©NÚe
) {

1816 
ÃwCÏss
->
dœeùM‘hods
[
i
].
»gi¡”M­
 = 
pM­
;

1818 
	`as£¹
((
ÃwCÏss
->
dœeùM‘hods
[
i
].
»gi¡”sSize
+7) / 8 ==

1819 
ÃwCÏss
->
dœeùM‘hods
[
i
].
»gi¡”M­
->
»gWidth
);

1823 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
dœeùM‘hods
);

1826 ià(
pH—d”
->
vœtu®M‘hodsSize
 != 0) {

1827 
couÁ
 = (è
pH—d”
->
vœtu®M‘hodsSize
;

1828 
u4
 
Ï¡Index
 = 0;

1829 
DexM‘hod
 
m‘hod
;

1831 
ÃwCÏss
->
vœtu®M‘hodCouÁ
 = 
couÁ
;

1832 
ÃwCÏss
->
vœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
(
şassLßd”
,

1833 
couÁ
 * (
M‘hod
));

1834 
i
 = 0; i < 
couÁ
; i++) {

1835 
	`dexR—dCÏssD©aM‘hod
(&
pEncodedD©a
, &
m‘hod
, &
Ï¡Index
);

1836 
	`lßdM‘hodFromDex
(
ÃwCÏss
, &
m‘hod
, &ÃwCÏss->
vœtu®M‘hods
[
i
]);

1837 ià(
şassM­D©a
 !ğ
NULL
) {

1838 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
	`dvmRegi¡”M­G‘Next
(&
şassM­D©a
);

1839 ià(
	`dvmRegi¡”M­G‘FÜm©
(
pM­
è!ğ
kRegM­FÜm©NÚe
) {

1840 
ÃwCÏss
->
vœtu®M‘hods
[
i
].
»gi¡”M­
 = 
pM­
;

1842 
	`as£¹
((
ÃwCÏss
->
vœtu®M‘hods
[
i
].
»gi¡”sSize
+7) / 8 ==

1843 
ÃwCÏss
->
vœtu®M‘hods
[
i
].
»gi¡”M­
->
»gWidth
);

1847 
	`dvmLš—rR—dOÆy
(
şassLßd”
, 
ÃwCÏss
->
vœtu®M‘hods
);

1850 
ÃwCÏss
->
sourûFe
 = 
	`dexG‘SourûFe
(
pDexFe
, 
pCÏssDef
);

1851 
ÃwCÏss
->
¡©us
 = 
CLASS_LOADED
;

1854  
ÃwCÏss
;

1855 
	}
}

1866 
CÏssObjeù
* 
	$lßdCÏssFromDex
(
DvmDex
* 
pDvmDex
,

1867 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
, 
Objeù
* 
şassLßd”
)

1869 
CÏssObjeù
* 
»suÉ
;

1870 
DexCÏssD©aH—d”
 
h—d”
;

1871 cÚ¡ 
u1
* 
pEncodedD©a
;

1872 cÚ¡ 
DexFe
* 
pDexFe
;

1874 
	`as£¹
((
pDvmDex
 !ğ
NULL
è&& (
pCÏssDef
 != NULL));

1875 
pDexFe
 = 
pDvmDex
->pDexFile;

1877 ià(
gDvm
.
v”bo£CÏss
) {

1878 
	`LOGV
("CLASS:†oading '%s'...\n",

1879 
	`dexG‘CÏssDesütÜ
(
pDexFe
, 
pCÏssDef
));

1882 
pEncodedD©a
 = 
	`dexG‘CÏssD©a
(
pDexFe
, 
pCÏssDef
);

1884 ià(
pEncodedD©a
 !ğ
NULL
) {

1885 
	`dexR—dCÏssD©aH—d”
(&
pEncodedD©a
, &
h—d”
);

1888 
	`mem£t
(&
h—d”
, 0, (header));

1891 
»suÉ
 = 
	`lßdCÏssFromDex0
(
pDvmDex
, 
pCÏssDef
, &
h—d”
, 
pEncodedD©a
,

1892 
şassLßd”
);

1894 ià(
gDvm
.
v”bo£CÏss
 && (
»suÉ
 !ğ
NULL
)) {

1895 
	`LOGI
("[Loaded %s from DEX %p (cl=%p)]\n",

1896 
»suÉ
->
desütÜ
, 
pDvmDex
, 
şassLßd”
);

1899  
»suÉ
;

1900 
	}
}

1912 
	$dvmF»eCÏssIÂ¬ds
(
CÏssObjeù
* 
şazz
)

1914 *

;

1915 
i
;

1917 ià(
şazz
 =ğ
NULL
)

1920 
	`as£¹
(
şazz
->
obj
.şazz =ğ
gDvm
.
şassJavaLªgCÏss
 ||

1921 
şazz
->
obj
.şazz =ğ
gDvm
.
uÆškedJavaLªgCÏss
);

1934 
	#NULL_AND_FREE
(
p
) \

1936 ià((
p
è!ğ
NULL
) { \

1937 

 = (
p
); \

1938 (
p
èğ
NULL
; \

1939 
	`ä“
(

); \

1941 } 0)

	)

1942 
	#NULL_AND_LINEAR_FREE
(
p
) \

1944 ià((
p
è!ğ
NULL
) { \

1945 

 = (
p
); \

1946 (
p
èğ
NULL
; \

1947 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 

); \

1949 } 0)

	)

1955 
şazz
->
vbËCouÁ
 = -1;

1956 ià(
	`dvmIsA¼ayCÏss
(
şazz
)) {

1957 
şazz
->
vbË
 = 
NULL
;

1959 
	`NULL_AND_LINEAR_FREE
(
şazz
->
vbË
);

1962 
şazz
->
desütÜ
 = 
NULL
;

1963 
	`NULL_AND_FREE
(
şazz
->
desütÜAÎoc
);

1965 ià(
şazz
->
dœeùM‘hods
 !ğ
NULL
) {

1966 
M‘hod
 *
dœeùM‘hods
 = 
şazz
->directMethods;

1967 
dœeùM‘hodCouÁ
 = 
şazz
->directMethodCount;

1968 
şazz
->
dœeùM‘hods
 = 
NULL
;

1969 
şazz
->
dœeùM‘hodCouÁ
 = -1;

1970 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, 
dœeùM‘hods
);

1971 
i
 = 0; i < 
dœeùM‘hodCouÁ
; i++) {

1972 
	`ä“M‘hodIÂ¬ds
(&
dœeùM‘hods
[
i
]);

1974 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
dœeùM‘hods
);

1975 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
dœeùM‘hods
);

1977 ià(
şazz
->
vœtu®M‘hods
 !ğ
NULL
) {

1978 
M‘hod
 *
vœtu®M‘hods
 = 
şazz
->virtualMethods;

1979 
vœtu®M‘hodCouÁ
 = 
şazz
->virtualMethodCount;

1980 
şazz
->
vœtu®M‘hodCouÁ
 = -1;

1981 
şazz
->
vœtu®M‘hods
 = 
NULL
;

1982 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, 
vœtu®M‘hods
);

1983 
i
 = 0; i < 
vœtu®M‘hodCouÁ
; i++) {

1984 
	`ä“M‘hodIÂ¬ds
(&
vœtu®M‘hods
[
i
]);

1986 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
vœtu®M‘hods
);

1987 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
vœtu®M‘hods
);

1990 
In™ŸtšgLßd”Li¡
 *
lßd”Li¡
 = 
	`dvmG‘In™ŸtšgLßd”Li¡
(
şazz
);

1991 
lßd”Li¡
->
š™ŸtšgLßd”CouÁ
 = -1;

1992 
	`NULL_AND_FREE
(
lßd”Li¡
->
š™ŸtšgLßd”s
);

1994 
şazz
->
š‹rçûCouÁ
 = -1;

1995 
	`NULL_AND_LINEAR_FREE
(
şazz
->
š‹rçûs
);

1997 
şazz
->
iáabËCouÁ
 = -1;

1998 
	`NULL_AND_LINEAR_FREE
(
şazz
->
iáabË
);

2000 
şazz
->
ifviPoŞCouÁ
 = -1;

2001 
	`NULL_AND_LINEAR_FREE
(
şazz
->
ifviPoŞ
);

2003 
şazz
->
sf›ldCouÁ
 = -1;

2004 
	`NULL_AND_FREE
(
şazz
->
sf›lds
);

2006 
şazz
->
if›ldCouÁ
 = -1;

2007 
	`NULL_AND_LINEAR_FREE
(
şazz
->
if›lds
);

2009 #undeà
NULL_AND_FREE


2010 #undeà
NULL_AND_LINEAR_FREE


2011 
	}
}

2018 
	$ä“M‘hodIÂ¬ds
(
M‘hod
* 
m‘h
)

2021 
	`ä“
(
m‘h
->
exû±iÚs
);

2022 
	`ä“
(
m‘h
->
lšes
);

2023 
	`ä“
(
m‘h
->
loÿls
);

2030 cÚ¡ 
Regi¡”M­
* 
pM­
 = 
m‘h
->
»gi¡”M­
;

2031 ià(
pM­
 !ğ
NULL
 && 
	`dvmRegi¡”M­G‘OnH—p
(pMap)) {

2032 
	`dvmF»eRegi¡”M­
((
Regi¡”M­
*è
pM­
);

2033 
m‘h
->
»gi¡”M­
 = 
NULL
;

2039 ià(
	`IS_METHOD_FLAG_SET
(
m‘h
, 
METHOD_ISWRITABLE
)) {

2040 
DexCode
* 
m‘hodDexCode
 = (DexCode*è
	`dvmG‘M‘hodCode
(
m‘h
);

2041 
	`dvmLš—rF»e
(
m‘h
->
şazz
->
şassLßd”
, 
m‘hodDexCode
);

2043 
	}
}

2049 
	$şÚeM‘hod
(
M‘hod
* 
d¡
, cÚ¡ M‘hod* 
¤c
)

2051 ià(
¤c
->
»gi¡”M­
 !ğ
NULL
) {

2052 
	`LOGE
("GLITCH: onlyƒxpected‡bstract methods here\n");

2053 
	`LOGE
(" clÚšg %s.%s\n", 
¤c
->
şazz
->
desütÜ
, src->
Çme
);

2054 
	`dvmAbÜt
();

2056 
	`memıy
(
d¡
, 
¤c
, (
M‘hod
));

2057 
	}
}

2065 
	$lßdM‘hodFromDex
(
CÏssObjeù
* 
şazz
, cÚ¡ 
DexM‘hod
* 
pDexM‘hod
,

2066 
M‘hod
* 
m‘h
)

2068 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2069 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

2070 cÚ¡ 
DexCode
* 
pDexCode
;

2072 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
pDexM‘hod
->
m‘hodIdx
);

2074 
m‘h
->
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

2075 
	`dexPrÙoS‘FromM‘hodId
(&
m‘h
->
´ÙÙy³
, 
pDexFe
, 
pM‘hodId
);

2076 
m‘h
->
shÜty
 = 
	`dexPrÙoG‘ShÜty
(&m‘h->
´ÙÙy³
);

2077 
m‘h
->
acûssFÏgs
 = 
pDexM‘hod
->accessFlags;

2078 
m‘h
->
şazz
 = clazz;

2079 
m‘h
->
jniArgInfo
 = 0;

2081 ià(
	`dvmCom·»NameDesütÜAndM‘hod
("fš®ize", "()V", 
m‘h
) == 0) {

2082 
	`SET_CLASS_FLAG
(
şazz
, 
CLASS_ISFINALIZABLE
);

2085 
pDexCode
 = 
	`dexG‘Code
(
pDexFe
, 
pDexM‘hod
);

2086 ià(
pDexCode
 !ğ
NULL
) {

2088 
m‘h
->
»gi¡”sSize
 = 
pDexCode
->registersSize;

2089 
m‘h
->
šsSize
 = 
pDexCode
->insSize;

2090 
m‘h
->
outsSize
 = 
pDexCode
->outsSize;

2093 
m‘h
->
š¢s
 = 
pDexCode
->insns;

2104 
¬gsSize
 = 
	`dvmCompu‹M‘hodArgsSize
(
m‘h
);

2105 ià(!
	`dvmIsSticM‘hod
(
m‘h
))

2106 
¬gsSize
++;

2107 
m‘h
->
»gi¡”sSize
 = m‘h->
šsSize
 = 
¬gsSize
;

2108 
	`as£¹
(
m‘h
->
outsSize
 == 0);

2109 
	`as£¹
(
m‘h
->
š¢s
 =ğ
NULL
);

2111 ià(
	`dvmIsN©iveM‘hod
(
m‘h
)) {

2112 
m‘h
->
ÇtiveFunc
 = 
dvmResŞveN©iveM‘hod
;

2113 
m‘h
->
jniArgInfo
 = 
	`compu‹JniArgInfo
(&m‘h->
´ÙÙy³
);

2116 
	}
}

2130 
	$dvmMakeCodeR—dWr™e
(
M‘hod
* 
m‘h
)

2132 
DexCode
* 
m‘hodDexCode
 = (DexCode*è
	`dvmG‘M‘hodCode
(
m‘h
);

2134 ià(
	`IS_METHOD_FLAG_SET
(
m‘h
, 
METHOD_ISWRITABLE
)) {

2135 
	`dvmLš—rR—dWr™e
(
m‘h
->
şazz
->
şassLßd”
, 
m‘hodDexCode
);

2139 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘h
è&& !
	`dvmIsAb¡¿ùM‘hod
(meth));

2141 
size_t
 
dexCodeSize
 = 
	`dexG‘DexCodeSize
(
m‘hodDexCode
);

2142 
	`LOGD
("Making‡ copy of %s.%s code (%d bytes)\n",

2143 
m‘h
->
şazz
->
desütÜ
, m‘h->
Çme
, 
dexCodeSize
);

2145 
DexCode
* 
ÃwCode
 =

2146 (
DexCode
*è
	`dvmLš—rAÎoc
(
m‘h
->
şazz
->
şassLßd”
, 
dexCodeSize
);

2147 
	`memıy
(
ÃwCode
, 
m‘hodDexCode
, 
dexCodeSize
);

2149 
m‘h
->
š¢s
 = 
ÃwCode
->insns;

2150 
	`SET_METHOD_FLAG
(
m‘h
, 
METHOD_ISWRITABLE
);

2151 
	}
}

2159 
	$dvmMakeCodeR—dOÆy
(
M‘hod
* 
m‘h
)

2161 
DexCode
* 
m‘hodDexCode
 = (DexCode*è
	`dvmG‘M‘hodCode
(
m‘h
);

2162 
	`LOGV
("+++ m¬kšg %°»ad-Úly\n", 
m‘hodDexCode
);

2163 
	`dvmLš—rR—dOÆy
(
m‘h
->
şazz
->
şassLßd”
, 
m‘hodDexCode
);

2164 
	}
}

2182 
	$compu‹JniArgInfo
(cÚ¡ 
DexPrÙo
* 
´Ùo
)

2184 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘ShÜty
(
´Ùo
);

2185 
»tuºTy³
, 
·dFÏgs
, 
jniArgInfo
;

2186 
sigBy‹
;

2187 
¡ackOff£t
, 
·dMask
;

2188 
u4
 
hšts
;

2191 *(
sig
++)) {

2193 
»tuºTy³
 = 
DALVIK_JNI_RETURN_VOID
;

2196 
»tuºTy³
 = 
DALVIK_JNI_RETURN_FLOAT
;

2199 
»tuºTy³
 = 
DALVIK_JNI_RETURN_DOUBLE
;

2202 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S8
;

2206 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S1
;

2209 
»tuºTy³
 = 
DALVIK_JNI_RETURN_U2
;

2212 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S2
;

2215 
»tuºTy³
 = 
DALVIK_JNI_RETURN_S4
;

2219 
jniArgInfo
 = 
»tuºTy³
 << 
DALVIK_JNI_RETURN_SHIFT
;

2221 
hšts
 = 
	`dvmPÏtfÜmInvokeHšts
(
´Ùo
);

2223 ià(
hšts
 & 
DALVIK_JNI_NO_ARG_INFO
) {

2224 
jniArgInfo
 |ğ
DALVIK_JNI_NO_ARG_INFO
;

2226 
	`as£¹
((
hšts
 & 
DALVIK_JNI_RETURN_MASK
) == 0);

2227 
jniArgInfo
 |ğ
hšts
;

2230  
jniArgInfo
;

2231 
	}
}

2239 
	$lßdSF›ldFromDex
(
CÏssObjeù
* 
şazz
,

2240 cÚ¡ 
DexF›ld
* 
pDexSF›ld
, 
SticF›ld
* 
sf›ld
)

2242 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2243 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

2245 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
pDexSF›ld
->
f›ldIdx
);

2247 
sf›ld
->
f›ld
.
şazz
 = clazz;

2248 
sf›ld
->
f›ld
.
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

2249 
sf›ld
->
f›ld
.
sigÇtu»
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

2250 
sf›ld
->
f›ld
.
acûssFÏgs
 = 
pDexSF›ld
->accessFlags;

2257 
	`as£¹
(
sf›ld
->
v®ue
.
j
 == 0LL);

2259 #ifdeà
PROFILE_FIELD_ACCESS


2260 
sf›ld
->
f›ld
.
g‘s
 = sf›ld->f›ld.
puts
 = 0;

2262 #ifdeà
WITH_TAINT_TRACKING


2263 
sf›ld
->
št
.
g
 = 
TAINT_CLEAR
;

2265 
	}
}

2270 
	$lßdIF›ldFromDex
(
CÏssObjeù
* 
şazz
,

2271 cÚ¡ 
DexF›ld
* 
pDexIF›ld
, 
In¡F›ld
* 
if›ld
)

2273 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2274 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

2276 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
pDexIF›ld
->
f›ldIdx
);

2278 
if›ld
->
f›ld
.
şazz
 = clazz;

2279 
if›ld
->
f›ld
.
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

2280 
if›ld
->
f›ld
.
sigÇtu»
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

2281 
if›ld
->
f›ld
.
acûssFÏgs
 = 
pDexIF›ld
->accessFlags;

2282 #iâdeà
NDEBUG


2283 
	`as£¹
(
if›ld
->
by‹Off£t
 == 0);

2284 
if›ld
->
by‹Off£t
 = -1;

2287 #ifdeà
PROFILE_FIELD_ACCESS


2288 
if›ld
->
f›ld
.
g‘s
 = if›ld->f›ld.
puts
 = 0;

2290 
	}
}

2295 
boŞ
 
	$´eÿcheReã»nûOff£ts
(
CÏssObjeù
 *
şazz
)

2297 
M‘hod
 *
m‘h
;

2298 
i
;

2308 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

2309 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; i++) {

2310 
In¡F›ld
 *
pF›ld
 = &
şazz
->
if›lds
[
i
];

2311 ià(
	`¡rcmp
(
pF›ld
->
f›ld
.
Çme
, "referent") == 0) {

2312 
rg‘Index
;

2316 
rg‘Index
 = 
şazz
->
if›ldRefCouÁ
 - 1;

2317 ià(
i
 !ğ
rg‘Index
) {

2318 
In¡F›ld
 *
sw­F›ld
 = &
şazz
->
if›lds
[
rg‘Index
];

2319 
In¡F›ld
 
tmpF›ld
;

2320 
tmpBy‹Off£t
;

2326 
tmpBy‹Off£t
 = 
sw­F›ld
->
by‹Off£t
;

2327 
sw­F›ld
->
by‹Off£t
 = 
pF›ld
->byteOffset;

2328 
pF›ld
->
by‹Off£t
 = 
tmpBy‹Off£t
;

2330 
tmpF›ld
 = *
sw­F›ld
;

2331 *
sw­F›ld
 = *
pF›ld
;

2332 *
pF›ld
 = 
tmpF›ld
;

2337 
şazz
->
if›ldRefCouÁ
--;

2338 
i
--;

2342 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

2343 ià(
i
 =ğ
şazz
->
if›ldRefCouÁ
) {

2344 
	`LOGE
("UÇbËØ»Üd” '»ã»Á' iÀ%s\n", 
şazz
->
desütÜ
);

2345  
çl£
;

2352 
gDvm
.
şassJavaLªgRefReã»nû
 = 
şazz
;

2354 
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
 =

2355 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgRefReã»nû
,

2357 
	`as£¹
(
gDvm
.
offJavaLªgRefReã»nû_»ã»Á
 >= 0);

2359 
gDvm
.
offJavaLªgRefReã»nû_queue
 =

2360 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgRefReã»nû
,

2362 
	`as£¹
(
gDvm
.
offJavaLªgRefReã»nû_queue
 >= 0);

2364 
gDvm
.
offJavaLªgRefReã»nû_queueNext
 =

2365 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgRefReã»nû
,

2367 
	`as£¹
(
gDvm
.
offJavaLªgRefReã»nû_queueNext
 >= 0);

2369 
gDvm
.
offJavaLªgRefReã»nû_vmD©a
 =

2370 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgRefReã»nû
,

2372 
	`as£¹
(
gDvm
.
offJavaLªgRefReã»nû_vmD©a
 >= 0);

2374 #ià
FANCY_REFERENCE_SUBCLASS


2375 
m‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, "clear", "()V");

2376 
	`as£¹
(
m‘h
 !ğ
NULL
);

2377 
gDvm
.
voffJavaLªgRefReã»nû_ş—r
 = 
m‘h
->
m‘hodIndex
;

2379 
m‘h
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
şazz
, "enqueue", "()Z");

2380 
	`as£¹
(
m‘h
 !ğ
NULL
);

2381 
gDvm
.
voffJavaLªgRefReã»nû_’queue
 = 
m‘h
->
m‘hodIndex
;

2384 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "enqueueInternal", "()Z");

2385 
	`as£¹
(
m‘h
 !ğ
NULL
);

2386 
gDvm
.
m‘hJavaLªgRefReã»nû_’queueIÁ”Çl
 = 
m‘h
;

2389  
Œue
;

2390 
	}
}

2407 
boŞ
 
	$dvmLškCÏss
(
CÏssObjeù
* 
şazz
, 
boŞ
 
şas£sResŞved
)

2409 
u4
 
su³rşassIdx
 = 0;

2410 
boŞ
 
okay
 = 
çl£
;

2411 
boŞ
 
»sŞve_okay
;

2412 
numIÁ”çûsResŞved
 = 0;

2413 
i
;

2415 ià(
gDvm
.
v”bo£CÏss
)

2416 
	`LOGV
("CLASS:†škšg '%s'...\n", 
şazz
->
desütÜ
);

2432 
	`as£¹
(
şazz
->
obj
.şazz =ğ
gDvm
.
uÆškedJavaLªgCÏss
);

2441 ià(
gDvm
.
şassJavaLªgCÏss
 =ğ
NULL
) {

2442 ià(
şazz
->
şassLßd”
 =ğ
NULL
 &&

2443 
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Class;") == 0)

2445 
gDvm
.
şassJavaLªgCÏss
 = 
şazz
;

2447 
gDvm
.
şassJavaLªgCÏss
 =

2448 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/Class;");

2449 ià(
gDvm
.
şassJavaLªgCÏss
 =ğ
NULL
) {

2451 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

2452 
ba
;

2456 
	`as£¹
(
gDvm
.
şassJavaLªgCÏss
 !ğ
NULL
);

2467 ià(!
şas£sResŞved
) {

2468 
su³rşassIdx
 = (
u4
è
şazz
->
su³r
;

2469 
şazz
->
su³r
 = 
NULL
;

2471 ià(
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Object;") == 0) {

2472 
	`as£¹
(!
şas£sResŞved
);

2473 ià(
su³rşassIdx
 !ğ
kDexNoIndex
) {

2477 
	`dvmThrowExû±iÚ
("Ljava/lang/ClassFormatError;",

2479 
ba
;

2485 
	`CLEAR_CLASS_FLAG
(
şazz
, 
CLASS_ISFINALIZABLE
);

2487 ià(!
şas£sResŞved
) {

2488 ià(
su³rşassIdx
 =ğ
kDexNoIndex
) {

2489 
	`dvmThrowExû±iÚ
("Ljava/lang/LinkageError;",

2491 
ba
;

2493 
şazz
->
su³r
 = 
	`dvmResŞveCÏss
(şazz, 
su³rşassIdx
, 
çl£
);

2494 ià(
şazz
->
su³r
 =ğ
NULL
) {

2495 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

2496 ià(
gDvm
.
İtimizšg
) {

2498 
	`LOGV
("Unableo„esolve superclass of %s (%d)\n",

2499 
şazz
->
desütÜ
, 
su³rşassIdx
);

2501 
	`LOGW
("Unableo„esolve superclass of %s (%d)\n",

2502 
şazz
->
desütÜ
, 
su³rşassIdx
);

2504 
ba
;

2508 ià(
	`dvmIsFš®CÏss
(
şazz
->
su³r
)) {

2509 
	`LOGW
("Superclass of '%s' is final '%s'\n",

2510 
şazz
->
desütÜ
, cÏzz->
su³r
->descriptor);

2511 
	`dvmThrowExû±iÚ
("Ljava/lang/IncompatibleClassChangeError;",

2513 
ba
;

2514 } ià(
	`dvmIsIÁ”çûCÏss
(
şazz
->
su³r
)) {

2515 
	`LOGW
("Superclass of '%s' is interface '%s'\n",

2516 
şazz
->
desütÜ
, cÏzz->
su³r
->descriptor);

2517 
	`dvmThrowExû±iÚ
("Ljava/lang/IncompatibleClassChangeError;",

2519 
ba
;

2520 } ià(!
	`dvmCheckCÏssAcûss
(
şazz
, cÏzz->
su³r
)) {

2521 
	`LOGW
("Superclass of '%s' (%s) is‚ot‡ccessible\n",

2522 
şazz
->
desütÜ
, cÏzz->
su³r
->descriptor);

2523 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessError;",

2525 
ba
;

2531 
	`dvmAddT¿ckedAÎoc
((
Objeù
 *)
şazz
->
su³r
, 
NULL
);

2537 ià(
	`IS_CLASS_FLAG_SET
(
şazz
->
su³r
, 
CLASS_ISFINALIZABLE
)) {

2538 
	`SET_CLASS_FLAG
(
şazz
, 
CLASS_ISFINALIZABLE
);

2544 ià(
	`IS_CLASS_FLAG_SET
(
şazz
->
su³r
, 
CLASS_ISREFERENCE
)) {

2545 
u4
 
su³rRefFÏgs
;

2550 
su³rRefFÏgs
 = 
	`GET_CLASS_FLAG_GROUP
(
şazz
->
su³r
,

2551 
CLASS_ISREFERENCE
 |

2552 
CLASS_ISWEAKREFERENCE
 |

2553 
CLASS_ISPHANTOMREFERENCE
);

2554 
	`SET_CLASS_FLAG
(
şazz
, 
su³rRefFÏgs
);

2555 } ià(
şazz
->
şassLßd”
 =ğ
NULL
 &&

2556 
şazz
->
su³r
->
şassLßd”
 =ğ
NULL
 &&

2557 
	`¡rcmp
(
şazz
->
su³r
->
desütÜ
,

2560 
u4
 
»fFÏgs
;

2565 
»fFÏgs
 = 
CLASS_ISREFERENCE
;

2566 ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2571 } ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2574 
»fFÏgs
 |ğ
CLASS_ISWEAKREFERENCE
;

2575 } ià(
	`¡rcmp
(
şazz
->
desütÜ
,

2578 
»fFÏgs
 |ğ
CLASS_ISPHANTOMREFERENCE
;

2584 
	`dvmThrowExû±iÚ
("Ljava/lang/LinkageError;",

2586 
ba
;

2591 
	`as£¹
(
	`GET_CLASS_FLAG_GROUP
(
şazz
,

2592 
CLASS_ISREFERENCE
 |

2593 
CLASS_ISWEAKREFERENCE
 |

2594 
CLASS_ISPHANTOMREFERENCE
) == 0);

2596 
	`SET_CLASS_FLAG
(
şazz
, 
»fFÏgs
);

2600 ià(!
şas£sResŞved
 && 
şazz
->
š‹rçûCouÁ
 > 0) {

2605 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2606 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; i++) {

2607 
u4
 
š‹rçûIdx
;

2609 
š‹rçûIdx
 = (
u4
è
şazz
->
š‹rçûs
[
i
];

2610 
	`as£¹
(
š‹rçûIdx
 !ğ
kDexNoIndex
);

2612 
şazz
->
š‹rçûs
[
i
] = 
	`dvmResŞveCÏss
(şazz, 
š‹rçûIdx
, 
çl£
);

2613 ià(
şazz
->
š‹rçûs
[
i
] =ğ
NULL
) {

2614 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2616 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

2617 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2619 cÚ¡ * 
şassDesütÜ
;

2620 
şassDesütÜ
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
š‹rçûIdx
);

2621 ià(
gDvm
.
İtimizšg
) {

2623 
	`LOGV
("Failed„esolving %s interface %d '%s'\n",

2624 
şazz
->
desütÜ
, 
š‹rçûIdx
, 
şassDesütÜ
);

2626 
	`LOGI
("Failed„esolving %s interface %d '%s'\n",

2627 
şazz
->
desütÜ
, 
š‹rçûIdx
, 
şassDesütÜ
);

2629 
ba_duršg_»sŞve
;

2633 ià(!
	`dvmCheckCÏssAcûss
(
şazz
, cÏzz->
š‹rçûs
[
i
])) {

2634 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2635 
	`LOGW
("Interface '%s' is‚ot‡ccessibleo '%s'\n",

2636 
şazz
->
š‹rçûs
[
i
]->
desütÜ
, clazz->descriptor);

2637 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessError;",

2639 
ba_duršg_»sŞve
;

2645 
	`dvmAddT¿ckedAÎoc
((
Objeù
 *)
şazz
->
š‹rçûs
[
i
], 
NULL
);

2646 
numIÁ”çûsResŞved
++;

2648 
	`LOGVV
("+++ found interface '%s'\n",

2649 
şazz
->
š‹rçûs
[
i
]->
desütÜ
);

2651 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
š‹rçûs
);

2666 
şazz
->
obj
.şazz = 
gDvm
.
şassJavaLªgCÏss
;

2668 ià(
çl£
) {

2669 
ba_duršg_»sŞve
:

2670 
»sŞve_okay
 = 
çl£
;

2672 
»sŞve_okay
 = 
Œue
;

2682 ià(
şazz
->
su³r
 !ğ
NULL
) {

2683 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
 *)
şazz
->
su³r
, 
NULL
);

2685 
i
 = 0; i < 
numIÁ”çûsResŞved
; i++) {

2686 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
 *)
şazz
->
š‹rçûs
[
i
], 
NULL
);

2689 ià(!
»sŞve_okay
) {

2691 
ba
;

2697 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

2699 
couÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

2701 ià(
couÁ
 !ğ(
u2
) count) {

2702 
	`LOGE
("ToØmªy m‘hod (%dèš iÁ”çû '%s'\n", 
couÁ
,

2703 
şazz
->
desütÜ
);

2704 
ba
;

2707 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2709 
i
 = 0; i < 
couÁ
; i++)

2710 
şazz
->
vœtu®M‘hods
[
i
].
m‘hodIndex
 = (
u2
) i;

2712 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2714 ià(!
	`ü—‹VbË
(
şazz
)) {

2715 
	`LOGW
("failed creating vtable\n");

2716 
ba
;

2723 ià(!
	`ü—‹IáabË
(
şazz
))

2724 
ba
;

2729 ià(!
	`š£¹M‘hodStubs
(
şazz
))

2730 
ba
;

2735 ià(!
	`compu‹F›ldOff£ts
(
şazz
))

2736 
ba
;

2742 ià(
şazz
->
şassLßd”
 =ğ
NULL
) {

2743 ià(
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/ref/Reference;") == 0) {

2744 ià(!
	`´eÿcheReã»nûOff£ts
(
şazz
)) {

2745 
	`LOGE
("failed…re-caching Reference offsets\n");

2746 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ÇlE¼Ü;", 
NULL
);

2747 
ba
;

2749 } ià(
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
) {

2750 
gDvm
.
offJavaLªgCÏss_pd
 = 
	`dvmFšdF›ldOff£t
(
şazz
, "pd",

2752 ià(
gDvm
.
offJavaLªgCÏss_pd
 <= 0) {

2753 
	`LOGE
("ERROR: unableo find 'pd' field in Class\n");

2754 
	`dvmAbÜt
();

2763 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISPREVERIFIED
))

2764 
şazz
->
¡©us
 = 
CLASS_VERIFIED
;

2766 
şazz
->
¡©us
 = 
CLASS_RESOLVED
;

2767 
okay
 = 
Œue
;

2768 ià(
gDvm
.
v”bo£CÏss
)

2769 
	`LOGV
("CLASS:†šked '%s'\n", 
şazz
->
desütÜ
);

2782 ià(
gDvm
.
debugg”Aùive
) {

2783 
	`dvmDbgPo¡CÏssP»·»
(
şazz
);

2786 
ba
:

2787 ià(!
okay
) {

2788 
şazz
->
¡©us
 = 
CLASS_ERROR
;

2789 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

2790 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Vœtu®MachšeE¼Ü;", 
NULL
);

2793  
okay
;

2794 
	}
}

2803 
boŞ
 
	$ü—‹VbË
(
CÏssObjeù
* 
şazz
)

2805 
boŞ
 
»suÉ
 = 
çl£
;

2806 
maxCouÁ
;

2807 
i
;

2809 ià(
şazz
->
su³r
 !ğ
NULL
) {

2815 
maxCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

2816 ià(
şazz
->
su³r
 !ğ
NULL
) {

2817 
maxCouÁ
 +ğ
şazz
->
su³r
->
vbËCouÁ
;

2822 
	`as£¹
(
	`¡rcmp
(
şazz
->
desütÜ
, "Ljava/lang/Object;") == 0);

2832 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2833 
şazz
->
vbË
 = (
M‘hod
**è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

2834 (
M‘hod
*è* 
maxCouÁ
);

2835 ià(
şazz
->
vbË
 =ğ
NULL
)

2836 
ba
;

2838 ià(
şazz
->
su³r
 !ğ
NULL
) {

2839 
aùu®CouÁ
;

2841 
	`memıy
(
şazz
->
vbË
, cÏzz->
su³r
->vtable,

2842 (*(
şazz
->
vbË
)è* cÏzz->
su³r
->
vbËCouÁ
);

2843 
aùu®CouÁ
 = 
şazz
->
su³r
->
vbËCouÁ
;

2848 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

2849 
M‘hod
* 
loÿlM‘h
 = &
şazz
->
vœtu®M‘hods
[
i
];

2850 
si
;

2852 
si
 = 0; s˜< 
şazz
->
su³r
->
vbËCouÁ
; si++) {

2853 
M‘hod
* 
su³rM‘h
 = 
şazz
->
vbË
[
si
];

2855 ià(
	`dvmCom·»M‘hodNamesAndPrÙos
(
loÿlM‘h
, 
su³rM‘h
) == 0)

2858 ià(
	`dvmIsFš®M‘hod
(
su³rM‘h
)) {

2859 
	`LOGW
("Method %s.%s overrides final %s.%s\n",

2860 
loÿlM‘h
->
şazz
->
desütÜ
,†oÿlM‘h->
Çme
,

2861 
su³rM‘h
->
şazz
->
desütÜ
, su³rM‘h->
Çme
);

2862 
ba
;

2864 
şazz
->
vbË
[
si
] = 
loÿlM‘h
;

2865 
loÿlM‘h
->
m‘hodIndex
 = (
u2
è
si
;

2872 ià(
si
 =ğ
şazz
->
su³r
->
vbËCouÁ
) {

2874 
şazz
->
vbË
[
aùu®CouÁ
] = 
loÿlM‘h
;

2875 
loÿlM‘h
->
m‘hodIndex
 = (
u2
è
aùu®CouÁ
;

2876 
aùu®CouÁ
++;

2883 ià(
aùu®CouÁ
 !ğ(
u2
)‡ctualCount) {

2884 
	`LOGE
("ToØmªy m‘hod (%dèš cÏs '%s'\n", 
aùu®CouÁ
,

2885 
şazz
->
desütÜ
);

2886 
ba
;

2889 
	`as£¹
(
aùu®CouÁ
 <ğ
maxCouÁ
);

2891 ià(
aùu®CouÁ
 < 
maxCouÁ
) {

2892 
	`as£¹
(
şazz
->
vbË
 !ğ
NULL
);

2893 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

2894 
şazz
->
vbË
 = 
	`dvmLš—rR—Îoc
(şazz->
şassLßd”
, clazz->vtable,

2895 (*(
şazz
->
vbË
)è* 
aùu®CouÁ
);

2896 ià(
şazz
->
vbË
 =ğ
NULL
) {

2897 
	`LOGE
("vtable„ealloc failed\n");

2898 
ba
;

2900 
	`LOGVV
("+++„educed vtable from %do %d\n",

2901 
maxCouÁ
, 
aùu®CouÁ
);

2905 
şazz
->
vbËCouÁ
 = 
aùu®CouÁ
;

2908 
couÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

2909 ià(
couÁ
 !ğ(
u2
) count) {

2910 
	`LOGE
("ToØmªy m‘hod (%dèš ba£ cÏs '%s'\n", 
couÁ
,

2911 
şazz
->
desütÜ
);

2912 
ba
;

2915 
i
 = 0; i < 
couÁ
; i++) {

2916 
şazz
->
vbË
[
i
] = &şazz->
vœtu®M‘hods
[i];

2917 
şazz
->
vœtu®M‘hods
[
i
].
m‘hodIndex
 = (
u2
) i;

2919 
şazz
->
vbËCouÁ
 = cÏzz->
vœtu®M‘hodCouÁ
;

2922 
»suÉ
 = 
Œue
;

2924 
ba
:

2925 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

2926 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

2927  
»suÉ
;

2928 
	}
}

2947 
boŞ
 
	$ü—‹IáabË
(
CÏssObjeù
* 
şazz
)

2949 
boŞ
 
»suÉ
 = 
çl£
;

2950 
boŞ
 
z­IáabË
 = 
çl£
;

2951 
boŞ
 
z­VbË
 = 
çl£
;

2952 
boŞ
 
z­IfvoŞ
 = 
çl£
;

2953 
ifCouÁ
, 
su³rIfCouÁ
, 
idx
;

2954 
i
;

2956 ià(
şazz
->
su³r
 !ğ
NULL
)

2957 
su³rIfCouÁ
 = 
şazz
->
su³r
->
iáabËCouÁ
;

2959 
su³rIfCouÁ
 = 0;

2961 
ifCouÁ
 = 
su³rIfCouÁ
;

2962 
ifCouÁ
 +ğ
şazz
->
š‹rçûCouÁ
;

2963 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; i++)

2964 
ifCouÁ
 +ğ
şazz
->
š‹rçûs
[
i
]->
iáabËCouÁ
;

2966 
	`LOGVV
("INTF: class '%s' direct w/supra=%d super=%dotal=%d\n",

2967 
şazz
->
desütÜ
, 
ifCouÁ
 - 
su³rIfCouÁ
, superIfCount, ifCount);

2969 ià(
ifCouÁ
 == 0) {

2970 
	`as£¹
(
şazz
->
iáabËCouÁ
 == 0);

2971 
	`as£¹
(
şazz
->
iáabË
 =ğ
NULL
);

2972 
»suÉ
 = 
Œue
;

2973 
ba
;

2980 
şazz
->
iáabË
 = (
IÁ”çûEÁry
*è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

2981 (
IÁ”çûEÁry
è* 
ifCouÁ
);

2982 
z­IáabË
 = 
Œue
;

2983 
	`mem£t
(
şazz
->
iáabË
, 0x00, (
IÁ”çûEÁry
è* 
ifCouÁ
);

2984 ià(
su³rIfCouÁ
 != 0) {

2985 
	`memıy
(
şazz
->
iáabË
, cÏzz->
su³r
->iftable,

2986 (
IÁ”çûEÁry
è* 
su³rIfCouÁ
);

2992 
idx
 = 
su³rIfCouÁ
;

2994 
i
 = 0; i < 
şazz
->
š‹rçûCouÁ
; i++) {

2995 
CÏssObjeù
* 
š‹rf
;

2996 
j
;

2998 
š‹rf
 = 
şazz
->
š‹rçûs
[
i
];

2999 
	`as£¹
(
š‹rf
 !ğ
NULL
);

3002 ià(!
	`dvmIsIÁ”çûCÏss
(
š‹rf
)) {

3003 
	`LOGW
("Class '%s' implements‚on-interface '%s'\n",

3004 
şazz
->
desütÜ
, 
š‹rf
->descriptor);

3005 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

3007 
şazz
->
desütÜ
);

3008 
ba
;

3012 
şazz
->
iáabË
[
idx
++].şazz = 
š‹rf
;

3015 
j
 = 0; j < 
š‹rf
->
iáabËCouÁ
; j++) {

3016 
şazz
->
iáabË
[
idx
++].şazz = 
š‹rf
->iáabË[
j
].clazz;

3020 
	`as£¹
(
idx
 =ğ
ifCouÁ
);

3022 ià(
çl£
) {

3042 
i
 = 
su³rIfCouÁ
; i < 
ifCouÁ
; i++) {

3043 
j
;

3045 
j
 = 0; j < 
ifCouÁ
; j++) {

3046 ià(
i
 =ğ
j
)

3048 ià(
şazz
->
iáabË
[
i
].şazz =ğşazz->iáabË[
j
].clazz) {

3049 
	`LOGVV
("INTF:„edundant interface %s in %s\n",

3050 
şazz
->
iáabË
[
i
].şazz->
desütÜ
,

3051 
şazz
->
desütÜ
);

3053 ià(
i
 !ğ
ifCouÁ
-1)

3054 
	`memmove
(&
şazz
->
iáabË
[
i
], &clazz->iftable[i+1],

3055 (
ifCouÁ
 - 
i
 -1è* (
IÁ”çûEÁry
));

3056 
ifCouÁ
--;

3057 
i
--;

3062 
	`LOGVV
("INTF: cÏs '%s'‚odu³s=%d\n", 
şazz
->
desütÜ
, 
ifCouÁ
);

3065 
şazz
->
iáabËCouÁ
 = 
ifCouÁ
;

3072 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
è|| 
su³rIfCouÁ
 =ğ
ifCouÁ
) {

3074 
»suÉ
 = 
Œue
;

3075 
ba
;

3095 
poŞSize
 = 0;

3096 
i
 = 
su³rIfCouÁ
; i < 
ifCouÁ
; i++) {

3101 
	`LOGVV
("INTF:…ool: %d from %s\n",

3102 
şazz
->
iáabË
[
i
].şazz->
vœtu®M‘hodCouÁ
,

3103 
şazz
->
iáabË
[
i
].şazz->
desütÜ
);

3104 
poŞSize
 +ğ
şazz
->
iáabË
[
i
].şazz->
vœtu®M‘hodCouÁ
;

3107 ià(
poŞSize
 == 0) {

3108 
	`LOGVV
("INTF: didn't find‡ny‚ew interfaces with methods\n");

3109 
»suÉ
 = 
Œue
;

3110 
ba
;

3113 
şazz
->
ifviPoŞCouÁ
 = 
poŞSize
;

3114 
şazz
->
ifviPoŞ
 = (*è
	`dvmLš—rAÎoc
(şazz->
şassLßd”
,

3115 
poŞSize
 * (*));

3116 
z­IfvoŞ
 = 
Œue
;

3122 
poŞOff£t
 = 0;

3123 
M‘hod
** 
mœªdaLi¡
 = 
NULL
;

3124 
mœªdaCouÁ
 = 0, 
mœªdaAÎoc
 = 0;

3126 
i
 = 
su³rIfCouÁ
; i < 
ifCouÁ
; i++) {

3127 
CÏssObjeù
* 
š‹rçû
;

3128 
m‘hIdx
;

3130 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
 = cÏzz->
ifviPoŞ
 + 
poŞOff£t
;

3131 
š‹rçû
 = 
şazz
->
iáabË
[
i
].clazz;

3132 
poŞOff£t
 +ğ
š‹rçû
->
vœtu®M‘hodCouÁ
;

3164 
m‘hIdx
 = 0; m‘hIdx < 
š‹rçû
->
vœtu®M‘hodCouÁ
; methIdx++) {

3165 
M‘hod
* 
im‘h
 = &
š‹rçû
->
vœtu®M‘hods
[
m‘hIdx
];

3166 
j
;

3168 
	`IF_LOGVV
() {

3169 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
im‘h
->
´ÙÙy³
);

3170 
	`LOGVV
("INTF: m©chšg '%s' '%s'\n", 
im‘h
->
Çme
, 
desc
);

3171 
	`ä“
(
desc
);

3174 
j
 = 
şazz
->
vbËCouÁ
-1; j >= 0; j--) {

3175 ià(
	`dvmCom·»M‘hodNamesAndPrÙos
(
im‘h
, 
şazz
->
vbË
[
j
])

3178 
	`LOGVV
("INTF: m©ched‡ˆ%d\n", 
j
);

3179 ià(!
	`dvmIsPublicM‘hod
(
şazz
->
vbË
[
j
])) {

3180 
	`LOGW
("Implementation of %s.%s is‚ot…ublic\n",

3181 
şazz
->
desütÜ
, cÏzz->
vbË
[
j
]->
Çme
);

3182 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessError;",

3184 
ba
;

3186 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
m‘hIdx
] = 
j
;

3190 ià(
j
 < 0) {

3191 
	`IF_LOGV
() {

3192 * 
desc
 =

3193 
	`dexPrÙoCİyM‘hodDesütÜ
(&
im‘h
->
´ÙÙy³
);

3194 
	`LOGV
("No match for '%s' '%s' in '%s' (creating miranda)\n",

3195 
im‘h
->
Çme
, 
desc
, 
şazz
->
desütÜ
);

3196 
	`ä“
(
desc
);

3201 ià(
mœªdaCouÁ
 =ğ
mœªdaAÎoc
) {

3202 
mœªdaAÎoc
 += 8;

3203 ià(
mœªdaLi¡
 =ğ
NULL
) {

3204 
mœªdaLi¡
 = 
	`dvmLš—rAÎoc
(
şazz
->
şassLßd”
,

3205 
mœªdaAÎoc
 * (
M‘hod
*));

3207 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
mœªdaLi¡
);

3208 
mœªdaLi¡
 = 
	`dvmLš—rR—Îoc
(
şazz
->
şassLßd”
,

3209 
mœªdaLi¡
, 
mœªdaAÎoc
 * (
M‘hod
*));

3211 
	`as£¹
(
mœªdaLi¡
 !ğ
NULL
);

3220 
mœ
;

3221 
mœ
 = 0; mœ < 
mœªdaCouÁ
; mir++) {

3222 ià(
	`dvmCom·»M‘hodNamesAndPrÙos
(

3223 
mœªdaLi¡
[
mœ
], 
im‘h
) == 0)

3225 
	`IF_LOGVV
() {

3226 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

3227 &
im‘h
->
´ÙÙy³
);

3228 
	`LOGVV
("MIRANDA dupe: %s‡nd %s %s%s\n",

3229 
mœªdaLi¡
[
mœ
]->
şazz
->
desütÜ
,

3230 
im‘h
->
şazz
->
desütÜ
,

3231 
im‘h
->
Çme
, 
desc
);

3232 
	`ä“
(
desc
);

3239 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
m‘hIdx
] =

3240 
şazz
->
vbËCouÁ
 + 
mœ
;

3241 
	`LOGVV
("MIRANDA: %s…oints‡t slot %d\n",

3242 
im‘h
->
Çme
, 
şazz
->
vbËCouÁ
 + 
mœ
);

3245 ià(
mœ
 =ğ
mœªdaCouÁ
) {

3248 
mœªdaLi¡
[
mœªdaCouÁ
++] = 
im‘h
;

3254 ià(
mœªdaCouÁ
 != 0) {

3255 cÚ¡ 
kMªyMœªdas
 = 150;

3256 
M‘hod
* 
ÃwVœtu®M‘hods
;

3257 
M‘hod
* 
m‘h
;

3258 
ŞdM‘hodCouÁ
, 
ŞdVbËCouÁ
;

3260 
i
 = 0; i < 
mœªdaCouÁ
; i++) {

3261 
	`LOGVV
("MIRANDA %d: %s.%s\n", 
i
,

3262 
mœªdaLi¡
[
i
]->
şazz
->
desütÜ
, mœªdaLi¡[i]->
Çme
);

3264 ià(
mœªdaCouÁ
 > 
kMªyMœªdas
) {

3272 
	`LOGD
("Note: class %s has %d unimplemented (abstract) methods\n",

3273 
şazz
->
desütÜ
, 
mœªdaCouÁ
);

3281 ià(
şazz
->
vœtu®M‘hods
 =ğ
NULL
) {

3282 
ÃwVœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
(
şazz
->
şassLßd”
,

3283 (
M‘hod
è* (
şazz
->
vœtu®M‘hodCouÁ
 + 
mœªdaCouÁ
));

3286 
ÃwVœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rR—Îoc
(
şazz
->
şassLßd”
,

3287 
şazz
->
vœtu®M‘hods
,

3288 (
M‘hod
è* (
şazz
->
vœtu®M‘hodCouÁ
 + 
mœªdaCouÁ
));

3290 ià(
ÃwVœtu®M‘hods
 !ğ
şazz
->
vœtu®M‘hods
) {

3307 
	`LOGVV
("MIRANDA fixing vtable…ointers\n");

3308 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3309 
M‘hod
* 
m‘h
 = 
ÃwVœtu®M‘hods
;

3310 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++)

3311 
şazz
->
vbË
[
m‘h
->
m‘hodIndex
] = meth;

3312 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3315 
ŞdM‘hodCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

3316 
şazz
->
vœtu®M‘hods
 = 
ÃwVœtu®M‘hods
;

3317 
şazz
->
vœtu®M‘hodCouÁ
 +ğ
mœªdaCouÁ
;

3319 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3324 
	`as£¹
(
şazz
->
vbË
 !ğ
NULL
);

3325 
şazz
->
vbË
 = (
M‘hod
**è
	`dvmLš—rR—Îoc
(şazz->
şassLßd”
,

3326 
şazz
->
vbË
,

3327 (
M‘hod
*è* (
şazz
->
vbËCouÁ
 + 
mœªdaCouÁ
));

3328 ià(
şazz
->
vbË
 =ğ
NULL
) {

3329 
	`as£¹
(
çl£
);

3330 
ba
;

3332 
z­VbË
 = 
Œue
;

3334 
ŞdVbËCouÁ
 = 
şazz
->
vbËCouÁ
;

3335 
şazz
->
vbËCouÁ
 +ğ
mœªdaCouÁ
;

3345 
m‘h
 = 
şazz
->
vœtu®M‘hods
 + 
ŞdM‘hodCouÁ
;

3346 
i
 = 0; i < 
mœªdaCouÁ
; i++, 
m‘h
++) {

3347 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3348 
	`şÚeM‘hod
(
m‘h
, 
mœªdaLi¡
[
i
]);

3349 
m‘h
->
şazz
 = clazz;

3350 
m‘h
->
acûssFÏgs
 |ğ
ACC_MIRANDA
;

3351 
m‘h
->
m‘hodIndex
 = (
u2
è(
ŞdVbËCouÁ
 + 
i
);

3352 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3355 
şazz
->
vbË
[
ŞdVbËCouÁ
 + 
i
] = 
m‘h
;

3358 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, 
mœªdaLi¡
);

3359 
	`dvmLš—rF»e
(
şazz
->
şassLßd”
, 
mœªdaLi¡
);

3392 
»suÉ
 = 
Œue
;

3394 
ba
:

3395 ià(
z­IáabË
)

3396 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
iáabË
);

3397 ià(
z­VbË
)

3398 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vbË
);

3399 ià(
z­IfvoŞ
)

3400 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
ifviPoŞ
);

3401  
»suÉ
;

3402 
	}
}

3421 
boŞ
 
	$š£¹M‘hodStubs
(
CÏssObjeù
* 
şazz
)

3423 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3425 
M‘hod
* 
m‘h
;

3426 
i
;

3428 
m‘h
 = 
şazz
->
vœtu®M‘hods
;

3429 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++) {

3430 ià(
	`dvmIsAb¡¿ùM‘hod
(
m‘h
)) {

3431 
	`as£¹
(
m‘h
->
š¢s
 =ğ
NULL
);

3432 
	`as£¹
(
m‘h
->
ÇtiveFunc
 =ğ
NULL
 ||

3433 
m‘h
->
ÇtiveFunc
 =ğ(
D®vikBridgeFunc
)
dvmAb¡¿ùM‘hodStub
);

3435 
m‘h
->
acûssFÏgs
 |ğ
ACC_NATIVE
;

3436 
m‘h
->
ÇtiveFunc
 = (
D®vikBridgeFunc
è
dvmAb¡¿ùM‘hodStub
;

3440 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

3441  
Œue
;

3442 
	}
}

3448 
šlše
 
	$sw­F›ld
(
In¡F›ld
* 
pOÃ
, In¡F›ld* 
pTwo
)

3450 
In¡F›ld
 
sw­
;

3452 
	`LOGVV
(" --- sw­ '%s'‡nd '%s'\n", 
pOÃ
->
f›ld
.
Çme
, 
pTwo
->field.name);

3453 
sw­
 = *
pOÃ
;

3454 *
pOÃ
 = *
pTwo
;

3455 *
pTwo
 = 
sw­
;

3456 
	}
}

3489 
boŞ
 
	$compu‹F›ldOff£ts
(
CÏssObjeù
* 
şazz
)

3491 
f›ldOff£t
;

3492 
i
, 
j
;

3494 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

3496 ià(
şazz
->
su³r
 !ğ
NULL
)

3497 
f›ldOff£t
 = 
şazz
->
su³r
->
objeùSize
;

3499 
f›ldOff£t
 = 
	`off£tof
(
D©aObjeù
, 
š¡ªûD©a
);

3501 
	`LOGVV
("--- compu‹F›ldOff£t '%s'\n", 
şazz
->
desütÜ
);

3511 
şazz
->
if›ldRefCouÁ
 = 0;

3512 
j
 = 
şazz
->
if›ldCouÁ
 - 1;

3513 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

3514 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

3515 
c
 = 
pF›ld
->
f›ld
.
sigÇtu»
[0];

3517 ià(
c
 != '[' && c != 'L') {

3522 
j
 > 
i
) {

3523 
In¡F›ld
* 
»fF›ld
 = &
şazz
->
if›lds
[
j
--];

3524 
rc
 = 
»fF›ld
->
f›ld
.
sigÇtu»
[0];

3526 ià(
rc
 == '[' ||„c == 'L') {

3532 
	`sw­F›ld
(
pF›ld
, 
»fF›ld
);

3536 
c
 = 
rc
;

3538 
şazz
->
if›ldRefCouÁ
++;

3547 
şazz
->
if›ldRefCouÁ
++;

3553 ià(
c
 != '[' && c != 'L')

3556 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3557 #ifdeà
WITH_TAINT_TRACKING


3558 
f›ldOff£t
 +ğ(
u4
) + (u4);

3560 
f›ldOff£t
 +ğ(
u4
);

3562 
	`LOGVV
(" --- off£t1 '%s'=%d\n", 
pF›ld
->
f›ld
.
Çme
,pF›ld->
by‹Off£t
);

3570 ià(
i
 !ğ
şazz
->
if›ldCouÁ
 && (
f›ldOff£t
 & 0x04) != 0) {

3571 
	`LOGVV
(" +++‚ot‡ligned\n");

3573 #ifdeà
WITH_TAINT_TRACKING


3575 
	`LOGV
(" +++ in£¹šg…ad f›ld iÀ'%s'\n", 
şazz
->
desütÜ
);

3576 
f›ldOff£t
 +ğ(
u4
);

3578 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

3579 
c
 = 
pF›ld
->
f›ld
.
sigÇtu»
[0];

3581 ià(
c
 != 'J' && c != 'D') {

3585 
	`as£¹
(
c
 != '[' && c != 'L');

3586 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3587 
f›ldOff£t
 +ğ(
u4
);

3588 
i
++;

3589 
	`LOGVV
(" --- offset2 '%s'=%d\n",

3590 
pF›ld
->
f›ld
.
Çme
,…F›ld->
by‹Off£t
);

3596 
boŞ
 
found
 = 
çl£
;

3597 
j
 = 
şazz
->
if›ldCouÁ
 - 1;

3598 
j
 > 
i
) {

3599 
In¡F›ld
* 
sšgËF›ld
 = &
şazz
->
if›lds
[
j
--];

3600 
rc
 = 
sšgËF›ld
->
f›ld
.
sigÇtu»
[0];

3602 ià(
rc
 != 'J' &&„c != 'D') {

3603 
	`sw­F›ld
(
pF›ld
, 
sšgËF›ld
);

3605 
	`LOGVV
(" +++ swapped '%s' for‡lignment\n",

3606 
pF›ld
->
f›ld
.
Çme
);

3607 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3608 
f›ldOff£t
 +ğ(
u4
);

3609 
	`LOGVV
(" --- offset3 '%s'=%d\n",

3610 
pF›ld
->
f›ld
.
Çme
,…F›ld->
by‹Off£t
);

3611 
found
 = 
Œue
;

3612 
i
++;

3616 ià(!
found
) {

3617 
	`LOGV
(" +++ in£¹šg…ad f›ld iÀ'%s'\n", 
şazz
->
desütÜ
);

3618 
f›ldOff£t
 +ğ(
u4
);

3628 
	`as£¹
(
i
 =ğ
şazz
->
if›ldCouÁ
 || (
f›ldOff£t
 & 0x04) == 0);

3629 
j
 = 
şazz
->
if›ldCouÁ
 - 1;

3630  ; 
i
 < 
şazz
->
if›ldCouÁ
; i++) {

3631 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

3632 
c
 = 
pF›ld
->
f›ld
.
sigÇtu»
[0];

3634 ià(
c
 != 'D' && c != 'J') {

3639 
j
 > 
i
) {

3640 
In¡F›ld
* 
doubËF›ld
 = &
şazz
->
if›lds
[
j
--];

3641 
rc
 = 
doubËF›ld
->
f›ld
.
sigÇtu»
[0];

3643 ià(
rc
 == 'D' ||„c == 'J') {

3649 
	`sw­F›ld
(
pF›ld
, 
doubËF›ld
);

3650 
c
 = 
rc
;

3662 
pF›ld
->
by‹Off£t
 = 
f›ldOff£t
;

3663 
	`LOGVV
(" --- off£t4 '%s'=%d\n", 
pF›ld
->
f›ld
.
Çme
,pF›ld->
by‹Off£t
);

3664 #ifdeà
WITH_TAINT_TRACKING


3665 
f›ldOff£t
 +ğ(
u4
) + (u4);

3666 ià(
c
 == 'J' || c == 'D')

3667 
f›ldOff£t
 +ğ(
u4
) + (u4);

3669 
f›ldOff£t
 +ğ(
u4
);

3670 ià(
c
 == 'J' || c == 'D')

3671 
f›ldOff£t
 +ğ(
u4
);

3675 #iâdeà
NDEBUG


3679 
j
 = 0;

3680 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

3681 
In¡F›ld
 *
pF›ld
 = &
şazz
->
if›lds
[
i
];

3682 
c
 = 
pF›ld
->
f›ld
.
sigÇtu»
[0];

3684 ià(
c
 == 'D' || c == 'J') {

3685 
	`as£¹
((
pF›ld
->
by‹Off£t
 & 0x07) == 0);

3688 ià(
c
 != '[' && c != 'L') {

3689 ià(!
j
) {

3690 
	`as£¹
(
i
 =ğ
şazz
->
if›ldRefCouÁ
);

3691 
j
 = 1;

3693 } ià(
j
) {

3694 
	`as£¹
(
çl£
);

3697 ià(!
j
) {

3698 
	`as£¹
(
şazz
->
if›ldRefCouÁ
 =ğşazz->
if›ldCouÁ
);

3706 
	`as£¹
(
şazz
 !ğ
gDvm
.
şassJavaLªgCÏss
 || (
size_t
)
f›ldOff£t
 <

3707 
	`off£tof
(
CÏssObjeù
, 
š¡ªûD©a
è+ (
şazz
->instanceData));

3709 
şazz
->
objeùSize
 = 
f›ldOff£t
;

3711 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
if›lds
);

3712  
Œue
;

3713 
	}
}

3725 
	$throwClš™E¼Ü
()

3727 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

3728 
Objeù
* 
exû±iÚ
;

3729 
Objeù
* 
ei›
;

3731 
exû±iÚ
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

3732 
	`dvmAddT¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3733 
	`dvmCË¬Exû±iÚ
(
£lf
);

3735 ià(
gDvm
.
şassJavaLªgExû±iÚInIn™Ÿliz”E¼Ü
 =ğ
NULL
) {

3739 
gDvm
.
şassJavaLªgExû±iÚInIn™Ÿliz”E¼Ü
 =

3740 
	`dvmFšdSy¡emCÏss
(

3742 ià(
gDvm
.
şassJavaLªgExû±iÚInIn™Ÿliz”E¼Ü
 =ğ
NULL
) {

3743 
	`LOGE
("Unableo…rep java/lang/ExceptionInInitializerError\n");

3744 
ç
;

3747 
gDvm
.
m‘hJavaLªgExû±iÚInIn™Ÿliz”E¼Ü_š™
 =

3748 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgExû±iÚInIn™Ÿliz”E¼Ü
,

3750 ià(
gDvm
.
m‘hJavaLªgExû±iÚInIn™Ÿliz”E¼Ü_š™
 =ğ
NULL
) {

3751 
	`LOGE
("Unableo…rep java/lang/ExceptionInInitializerError\n");

3752 
ç
;

3756 
ei›
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgExû±iÚInIn™Ÿliz”E¼Ü
,

3757 
ALLOC_DEFAULT
);

3758 ià(
ei›
 =ğ
NULL
)

3759 
ç
;

3764 
JV®ue
 
unu£d
;

3765 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hJavaLªgExû±iÚInIn™Ÿliz”E¼Ü_š™
,

3766 
ei›
, &
unu£d
, 
exû±iÚ
);

3767 
	`dvmS‘Exû±iÚ
(
£lf
, 
ei›
);

3768 
	`dvmR–—£T¿ckedAÎoc
(
ei›
, 
NULL
);

3769 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3772 
ç
:

3773 
	`dvmS‘Exû±iÚ
(
£lf
, 
exû±iÚ
);

3774 
	`dvmR–—£T¿ckedAÎoc
(
exû±iÚ
, 
£lf
);

3776 
	}
}

3784 
	$throwE¬l›rCÏssFau»
(
CÏssObjeù
* 
şazz
)

3786 
	`LOGI
("Rejecting„e-init on…reviously-failed class %s v=%p\n",

3787 
şazz
->
desütÜ
, cÏzz->
v”ifyE¼ÜCÏss
);

3789 ià(
şazz
->
v”ifyE¼ÜCÏss
 =ğ
NULL
) {

3790 
	`dvmThrowExû±iÚW™hCÏssMes§ge
("Ljava/lang/NoClassDefFoundError;",

3791 
şazz
->
desütÜ
);

3793 
	`dvmThrowExû±iÚByCÏssW™hCÏssMes§ge
(
şazz
->
v”ifyE¼ÜCÏss
,

3794 
şazz
->
desütÜ
);

3796 
	}
}

3802 
	$š™SF›lds
(
CÏssObjeù
* 
şazz
)

3804 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

3805 
DexFe
* 
pDexFe
;

3806 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

3807 cÚ¡ 
DexEncodedA¼ay
* 
pV®ueLi¡
;

3808 
EncodedA¼ayI‹¿tÜ
 
™”©Ü
;

3809 
i
;

3811 ià(
şazz
->
sf›ldCouÁ
 == 0) {

3814 ià(
şazz
->
pDvmDex
 =ğ
NULL
) {

3816 
	`LOGV
("NÙ in™Ÿlizšg stiøf›ld š %s\n", 
şazz
->
desütÜ
);

3819 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

3821 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDexFe
, 
şazz
->
desütÜ
);

3822 
	`as£¹
(
pCÏssDef
 !ğ
NULL
);

3824 
pV®ueLi¡
 = 
	`dexG‘SticV®uesLi¡
(
pDexFe
, 
pCÏssDef
);

3825 ià(
pV®ueLi¡
 =ğ
NULL
) {

3829 
	`dvmEncodedA¼ayI‹¿tÜIn™Ÿlize
(&
™”©Ü
, 
pV®ueLi¡
, 
şazz
);

3836 
i
 = 0; 
	`dvmEncodedA¼ayI‹¿tÜHasNext
(&
™”©Ü
); i++) {

3837 
AÂÙ©iÚV®ue
 
v®ue
;

3838 
boŞ
 
·r£d
 = 
	`dvmEncodedA¼ayI‹¿tÜG‘Next
(&
™”©Ü
, &
v®ue
);

3839 
SticF›ld
* 
sf›ld
 = &
şazz
->
sf›lds
[
i
];

3840 cÚ¡ * 
desütÜ
 = 
sf›ld
->
f›ld
.
sigÇtu»
;

3841 
boŞ
 
ÃedR–—£
 = 
çl£
;

3843 ià(! 
·r£d
) {

3849 
	`LOGE
("Static initializer…arse failed for %s‡t index %d",

3850 
şazz
->
desütÜ
, 
i
);

3851 
	`dvmAbÜt
();

3856 
desütÜ
[0]) {

3857 'Z': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚBoŞ—n
); ;

3858 'B': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚBy‹
); ;

3859 'C': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚCh¬
); ;

3860 'S': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚShÜt
); ;

3861 'I': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚIÁ
); ;

3862 'J': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚLÚg
); ;

3863 'F': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚFlßt
); ;

3864 'D': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚDoubË
); ;

3865 '[': 
·r£d
 = (
v®ue
.
ty³
 =ğ
kDexAÂÙ©iÚNuÎ
); ;

3867 
v®ue
.
ty³
) {

3868 
kDexAÂÙ©iÚNuÎ
: {

3872 
kDexAÂÙ©iÚSŒšg
: {

3873 
·r£d
 =

3874 (
	`¡rcmp
(
desütÜ
, "Ljava/lang/String;") == 0);

3875 
ÃedR–—£
 = 
Œue
;

3878 
kDexAÂÙ©iÚTy³
: {

3879 
·r£d
 =

3880 (
	`¡rcmp
(
desütÜ
, "Ljava/lang/Class;") == 0);

3881 
ÃedR–—£
 = 
Œue
;

3885 
·r£d
 = 
çl£
;

3892 
·r£d
 = 
çl£
;

3897 ià(
·r£d
) {

3903 
sf›ld
->
v®ue
 = value.value;

3904 ià(
ÃedR–—£
) {

3905 
	`dvmR–—£T¿ckedAÎoc
(
v®ue
.v®ue.
l
, 
£lf
);

3912 
	`LOGE
("Bogus static initialization: valueype %d in fieldype "

3914 
v®ue
.
ty³
, 
desütÜ
, 
şazz
->desütÜ, 
i
);

3915 
	`dvmAbÜt
();

3918 
	}
}

3929 
boŞ
 
	$com·»DesütÜCÏs£s
(cÚ¡ * 
desütÜ
,

3930 cÚ¡ 
CÏssObjeù
* 
şazz1
, cÚ¡ CÏssObjeù* 
şazz2
)

3932 
CÏssObjeù
* 
»suÉ1
;

3933 
CÏssObjeù
* 
»suÉ2
;

3938 
»suÉ1
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
şazz1
->
şassLßd”
);

3958 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

3959 
boŞ
 
isIn™
 = 
	`dvmLßd”InIn™ŸtšgLi¡
(
»suÉ1
, 
şazz2
->
şassLßd”
);

3960 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

3962 ià(
isIn™
) {

3966  
Œue
;

3971 
»suÉ2
 = 
	`dvmFšdCÏssNoIn™
(
desütÜ
, 
şazz2
->
şassLßd”
);

3974 ià(
»suÉ1
 =ğ
NULL
 || 
»suÉ2
 == NULL) {

3975 
	`dvmCË¬Exû±iÚ
(
	`dvmTh»adS–f
());

3976 ià(
»suÉ1
 =ğ
»suÉ2
) {

3992  
Œue
;

3995  
çl£
;

3999  
»suÉ1
 =ğ
»suÉ2
;

4000 
	}
}

4010 
boŞ
 
	$checkM‘hodDesütÜCÏs£s
(cÚ¡ 
M‘hod
* 
m‘h
,

4011 cÚ¡ 
CÏssObjeù
* 
şazz1
, cÚ¡ CÏssObjeù* 
şazz2
)

4013 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

4014 cÚ¡ * 
desütÜ
;

4017 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, &
m‘h
->
´ÙÙy³
);

4018 
Œue
) {

4019 
desütÜ
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

4021 ià(
desütÜ
 =ğ
NULL
)

4024 ià(
desütÜ
[0] == 'L' || descriptor[0] == '[') {

4026 ià(!
	`com·»DesütÜCÏs£s
(
desütÜ
, 
şazz1
, 
şazz2
))

4027  
çl£
;

4032 
desütÜ
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

4033 ià(
desütÜ
[0] == 'L' || descriptor[0] == '[') {

4034 ià(!
	`com·»DesütÜCÏs£s
(
desütÜ
, 
şazz1
, 
şazz2
))

4035  
çl£
;

4037  
Œue
;

4038 
	}
}

4074 
boŞ
 
	$v®id©eSu³rDesütÜs
(cÚ¡ 
CÏssObjeù
* 
şazz
)

4076 
i
;

4078 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
))

4079  
Œue
;

4084 ià(
şazz
->
su³r
 !ğ
NULL
 &&

4085 
şazz
->
şassLßd”
 !ğşazz->
su³r
->classLoader)

4101 cÚ¡ 
M‘hod
* 
m‘h
;

4106 
i
 = 
şazz
->
su³r
->
vbËCouÁ
 - 1; i >= 0; i--) {

4107 
m‘h
 = 
şazz
->
vbË
[
i
];

4108 ià(
m‘h
 !ğ
şazz
->
su³r
->
vbË
[
i
] &&

4109 !
	`checkM‘hodDesütÜCÏs£s
(
m‘h
, 
şazz
->
su³r
, clazz))

4111 
	`LOGW
("Method mismatch: %s in %s (cl=%p)‡nd super %s (cl=%p)\n",

4112 
m‘h
->
Çme
, 
şazz
->
desütÜ
, cÏzz->
şassLßd”
,

4113 
şazz
->
su³r
->
desütÜ
, cÏzz->su³r->
şassLßd”
);

4114 
	`dvmThrowExû±iÚ
("Ljava/lang/LinkageError;",

4116  
çl£
;

4129 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

4130 cÚ¡ 
IÁ”çûEÁry
* 
iáabË
 = &
şazz
->iáabË[
i
];

4132 ià(
şazz
->
şassLßd”
 !ğ
iáabË
->clazz->classLoader) {

4133 cÚ¡ 
CÏssObjeù
* 
içû
 = 
iáabË
->
şazz
;

4134 
j
;

4136 
j
 = 0; j < 
içû
->
vœtu®M‘hodCouÁ
; j++) {

4137 cÚ¡ 
M‘hod
* 
m‘h
;

4138 
vbËIndex
;

4140 
vbËIndex
 = 
iáabË
->
m‘hodIndexA¼ay
[
j
];

4141 
m‘h
 = 
şazz
->
vbË
[
vbËIndex
];

4143 ià(!
	`checkM‘hodDesütÜCÏs£s
(
m‘h
, 
içû
, m‘h->
şazz
)) {

4144 
	`LOGW
("Method mismatch: %s in %s (cl=%p)‡nd "

4146 
m‘h
->
Çme
, 
şazz
->
desütÜ
, cÏzz->
şassLßd”
,

4147 
içû
->
desütÜ
, içû->
şassLßd”
);

4148 
	`dvmThrowExû±iÚ
("Ljava/lang/LinkageError;",

4150  
çl£
;

4156  
Œue
;

4157 
	}
}

4166 
boŞ
 
	$dvmIsCÏssIn™Ÿlizšg
(cÚ¡ 
CÏssObjeù
* 
şazz
)

4168  (
şazz
->
¡©us
 =ğ
CLASS_INITIALIZING
 &&

4169 
şazz
->
š™Th»adId
 =ğ
	`dvmTh»adS–f
()->
th»adId
);

4170 
	}
}

4231 
boŞ
 
	$dvmIn™CÏss
(
CÏssObjeù
* 
şazz
)

4233 #ià
LOG_CLASS_LOADING


4234 
boŞ
 
š™ŸlizedByUs
 = 
çl£
;

4237 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

4238 cÚ¡ 
M‘hod
* 
m‘hod
;

4240 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4241 
	`as£¹
(
	`dvmIsCÏssLšked
(
şazz
è|| cÏzz->
¡©us
 =ğ
CLASS_ERROR
);

4246 ià(
şazz
->
¡©us
 < 
CLASS_VERIFIED
) {

4250 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

4251 
	`throwE¬l›rCÏssFau»
(
şazz
);

4252 
ba_uÆock
;

4255 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_RESOLVED
);

4256 
	`as£¹
(!
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISPREVERIFIED
));

4258 ià(
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_NONE
 ||

4259 (
gDvm
.
şassV”ifyMode
 =ğ
VERIFY_MODE_REMOTE
 &&

4260 
şazz
->
şassLßd”
 =ğ
NULL
))

4262 
	`LOGV
("+++‚ot verifying class %s (cl=%p)\n",

4263 
şazz
->
desütÜ
, cÏzz->
şassLßd”
);

4264 
nov”ify
;

4267 ià(!
gDvm
.
İtimizšg
)

4268 
	`LOGV
("+++†©v”ify oÀ%s\n", 
şazz
->
desütÜ
);

4275 ià(
	`IS_CLASS_FLAG_SET
(
şazz
, 
CLASS_ISOPTIMIZED
)) {

4276 
	`LOGW
("Class '%s' was optimized without verification; "

4278 
şazz
->
desütÜ
);

4279 
	`LOGW
(" ('rm /data/dalvik-cache/*'‡nd„estarto fixhis)");

4280 
v”ify_çed
;

4283 
şazz
->
¡©us
 = 
CLASS_VERIFYING
;

4284 ià(!
	`dvmV”ifyCÏss
(
şazz
, 
VERIFY_DEFAULT
)) {

4285 
v”ify_çed
:

4286 
	`dvmThrowExû±iÚW™hCÏssMes§ge
("Ljava/lang/VerifyError;",

4287 
şazz
->
desütÜ
);

4288 
şazz
->
v”ifyE¼ÜCÏss
 = 
	`dvmG‘Exû±iÚ
(
£lf
)->clazz;

4289 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4290 
ba_uÆock
;

4293 
şazz
->
¡©us
 = 
CLASS_VERIFIED
;

4295 
nov”ify
:

4297 ià(
şazz
->
¡©us
 =ğ
CLASS_INITIALIZED
)

4298 
ba_uÆock
;

4300 
şazz
->
¡©us
 =ğ
CLASS_INITIALIZING
) {

4302 ià(
şazz
->
š™Th»adId
 =ğ
£lf
->
th»adId
) {

4304 
ba_uÆock
;

4307 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4308 
	`LOGW
("GLITCH:ƒxception…ending‡t start of class init\n");

4309 
	`dvmAbÜt
();

4317 
	`dvmObjeùWa™
(
£lf
, (
Objeù
*è
şazz
, 0, 0, 
çl£
);

4324 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4325 
	`LOGI
("Class init of '%s' failing with wait()ƒxception\n",

4326 
şazz
->
desütÜ
);

4339 
	`as£¹
(
çl£
);

4340 
	`throwClš™E¼Ü
();

4341 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4342 
ba_uÆock
;

4344 ià(
şazz
->
¡©us
 =ğ
CLASS_INITIALIZING
) {

4345 
	`LOGI
("Waiting‡gain for class init\n");

4348 
	`as£¹
(
şazz
->
¡©us
 =ğ
CLASS_INITIALIZED
 ||

4349 
şazz
->
¡©us
 =ğ
CLASS_ERROR
);

4350 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

4355 
	`dvmThrowExû±iÚ
("Ljava/lang/UnsatisfiedLinkError;",

4358 
ba_uÆock
;

4362 ià(
şazz
->
¡©us
 =ğ
CLASS_ERROR
) {

4365 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4366 
	`throwE¬l›rCÏssFau»
(
şazz
);

4367  
çl£
;

4385 ià(!
	`v®id©eSu³rDesütÜs
(
şazz
)) {

4386 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4387 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4388 
ba_uÆock
;

4398 
	`as£¹
(
şazz
->
¡©us
 < 
CLASS_INITIALIZING
);

4400 #ià
LOG_CLASS_LOADING


4402 
	`logCÏssLßd
('+', 
şazz
);

4403 
š™ŸlizedByUs
 = 
Œue
;

4406 
şazz
->
¡©us
 = 
CLASS_INITIALIZING
;

4407 
şazz
->
š™Th»adId
 = 
£lf
->
th»adId
;

4408 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4411 ià(
şazz
->
su³r
 !ğ
NULL
 && cÏzz->su³r->
¡©us
 !ğ
CLASS_INITIALIZED
) {

4412 
	`as£¹
(!
	`dvmIsIÁ”çûCÏss
(
şazz
));

4413 ià(!
	`dvmIn™CÏss
(
şazz
->
su³r
)) {

4414 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

4415 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4417 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4418 
ba_nÙify
;

4430 
	`š™SF›lds
(
şazz
);

4434 
m‘hod
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "<clinit>", "()V");

4435 ià(
m‘hod
 =ğ
NULL
) {

4436 
	`LOGVV
("NØ<şš™> found fÜ %s\n", 
şazz
->
desütÜ
);

4438 
	`LOGVV
("Invokšg %s.<şš™>\n", 
şazz
->
desütÜ
);

4439 
JV®ue
 
unu£d
;

4440 
	`dvmC®lM‘hod
(
£lf
, 
m‘hod
, 
NULL
, &
unu£d
);

4446 ià(
şazz
->
su³r
 !ğ
NULL
) {

4447 
şazz
->
»fOff£ts
 = cÏzz->
su³r
->refOffsets;

4449 
şazz
->
»fOff£ts
 = 0;

4454 ià(
şazz
->
»fOff£ts
 !ğ
CLASS_WALK_SUPER
) {

4455 
In¡F›ld
 *
f
;

4456 
i
;

4461 
f
 = 
şazz
->
if›lds
;

4462 
i
 = 0; i < 
şazz
->
if›ldRefCouÁ
; i++) {

4468 
	`as£¹
(
f
->
by‹Off£t
 >ğ(è
CLASS_SMALLEST_OFFSET
);

4469 
	`as£¹
((
f
->
by‹Off£t
 & (
CLASS_OFFSET_ALIGNMENT
 - 1)) == 0);

4470 
u4
 
ÃwB™
 = 
	`CLASS_BIT_FROM_OFFSET
(
f
->
by‹Off£t
);

4471 ià(
ÃwB™
 != 0) {

4472 
şazz
->
»fOff£ts
 |ğ
ÃwB™
;

4474 
şazz
->
»fOff£ts
 = 
CLASS_WALK_SUPER
;

4477 
f
++;

4481 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

4487 
	`LOGW
("Exception %shrown during %s.<clinit>\n",

4488 (
	`dvmG‘Exû±iÚ
(
£lf
)->
şazz
)->
desütÜ
, clazz->descriptor);

4489 
	`throwClš™E¼Ü
();

4492 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4493 
şazz
->
¡©us
 = 
CLASS_ERROR
;

4496 
	`dvmLockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4497 
şazz
->
¡©us
 = 
CLASS_INITIALIZED
;

4498 
	`LOGVV
("In™Ÿlized cÏss: %s\n", 
şazz
->
desütÜ
);

4501 
ba_nÙify
:

4505 
	`dvmObjeùNÙifyAÎ
(
£lf
, (
Objeù
*è
şazz
);

4507 
ba_uÆock
:

4509 #ià
LOG_CLASS_LOADING


4510 ià(
š™ŸlizedByUs
) {

4512 
	`logCÏssLßd
('-', 
şazz
);

4516 
	`dvmUÆockObjeù
(
£lf
, (
Objeù
*è
şazz
);

4518  (
şazz
->
¡©us
 !ğ
CLASS_ERROR
);

4519 
	}
}

4525 
	$dvmS‘N©iveFunc
(cÚ¡ 
M‘hod
* 
m‘hod
, 
D®vikBridgeFunc
 
func
,

4526 cÚ¡ 
u2
* 
š¢s
)

4528 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

4531 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4532 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4534 ((
M‘hod
*)
m‘hod
)->
ÇtiveFunc
 = 
func
;

4535 ((
M‘hod
*)
m‘hod
)->
š¢s
 = insns;

4537 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4538 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4539 
	}
}

4547 
	$dvmS‘Regi¡”M­
(
M‘hod
* 
m‘hod
, cÚ¡ 
Regi¡”M­
* 
pM­
)

4549 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

4551 ià(
m‘hod
->
»gi¡”M­
 !ğ
NULL
) {

4553 
	`LOGV
("NOTE:„egisterMap‡lready set for %s.%s\n",

4554 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
);

4557 
	`as£¹
(!
	`dvmIsN©iveM‘hod
(
m‘hod
è&& !
	`dvmIsAb¡¿ùM‘hod
(method));

4560 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4561 
	`dvmLš—rR—dWr™e
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4563 
m‘hod
->
»gi¡”M­
 = 
pM­
;

4565 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
vœtu®M‘hods
);

4566 
	`dvmLš—rR—dOÆy
(
şazz
->
şassLßd”
, cÏzz->
dœeùM‘hods
);

4567 
	}
}

4573 
	$fšdCÏssC®lback
(* 
vşazz
, * 
¬g
)

4575 
CÏssObjeù
* 
şazz
 = 
vşazz
;

4576 cÚ¡ * 
desütÜ
 = (cÚ¡ *è
¬g
;

4578 ià(
	`¡rcmp
(
şazz
->
desütÜ
, descriptor) == 0)

4579  (è
şazz
;

4581 
	}
}

4593 
CÏssObjeù
* 
	$dvmFšdLßdedCÏss
(cÚ¡ * 
desütÜ
)

4595 
»suÉ
;

4597 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4598 
»suÉ
 = 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
fšdCÏssC®lback
,

4599 (*è
desütÜ
);

4600 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4602  (
CÏssObjeù
*è
»suÉ
;

4603 
	}
}

4608 
Objeù
* 
	$dvmG‘Sy¡emCÏssLßd”
()

4610 
CÏssObjeù
* 
şazz
;

4611 
M‘hod
* 
g‘SysM‘h
;

4612 
Objeù
* 
lßd”
;

4614 
şazz
 = 
	`dvmFšdSy¡emCÏss
("Ljava/lang/ClassLoader;");

4615 ià(
şazz
 =ğ
NULL
)

4616  
NULL
;

4618 
g‘SysM‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
şazz
, "getSystemClassLoader",

4620 ià(
g‘SysM‘h
 =ğ
NULL
)

4621  
NULL
;

4623 
JV®ue
 
»suÉ
;

4624 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
g‘SysM‘h
, 
NULL
, &
»suÉ
);

4625 
lßd”
 = (
Objeù
*)
»suÉ
.
l
;

4626  
lßd”
;

4627 
	}
}

4633 
	$dumpCÏss
(* 
vşazz
, * 
v¬g
)

4635 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

4636 cÚ¡ 
CÏssObjeù
* 
su³r
;

4637 
æags
 = (è
v¬g
;

4638 * 
desc
;

4639 
i
;

4641 ià(
şazz
 =ğ
NULL
) {

4642 
	`LOGI
("dumpClass: ignoring„equesto dump‚ull class\n");

4646 ià((
æags
 & 
kDumpCÏssFuÎD‘a
) == 0) {

4647 
boŞ
 
showIn™
 = (
æags
 & 
kDumpCÏssIn™Ÿlized
) != 0;

4648 
boŞ
 
showLßd”
 = (
æags
 & 
kDumpCÏssCÏssLßd”
) != 0;

4649 cÚ¡ * 
š™SŒ
;

4651 
š™SŒ
 = 
	`dvmIsCÏssIn™Ÿlized
(
şazz
) ? "true" : "false";

4653 ià(
showIn™
 && 
showLßd”
)

4654 
	`LOGI
("% %°%s\n", 
şazz
->
desütÜ
, cÏzz->
şassLßd”
, 
š™SŒ
);

4655 ià(
showIn™
)

4656 
	`LOGI
("% %s\n", 
şazz
->
desütÜ
, 
š™SŒ
);

4657 ià(
showLßd”
)

4658 
	`LOGI
("% %p\n", 
şazz
->
desütÜ
, cÏzz->
şassLßd”
);

4660 
	`LOGI
("%s\n", 
şazz
->
desütÜ
);

4666 ià((
u4
)
şazz
->
su³r
 > 0x10000 && (u4) clazz->super != (u4)-1)

4667 
su³r
 = 
şazz
->super;

4669 
su³r
 = 
NULL
;

4671 
	`LOGI
("----- %s '%s' cl=%p ser=0x%08x -----\n",

4672 
	`dvmIsIÁ”çûCÏss
(
şazz
) ? "interface" : "class",

4673 
şazz
->
desütÜ
, cÏzz->
şassLßd”
, cÏzz->
£rŸlNumb”
);

4674 
	`LOGI
(" objeùSize=%d (%d from su³r)\n", (è
şazz
->
objeùSize
,

4675 
su³r
 !ğ
NULL
 ? (èsu³r->
objeùSize
 : -1);

4676 
	`LOGI
("‡cûss=0x%04x.%04x\n", 
şazz
->
acûssFÏgs
 >> 16,

4677 
şazz
->
acûssFÏgs
 & 
JAVA_FLAGS_MASK
);

4678 ià(
su³r
 !ğ
NULL
)

4679 
	`LOGI
(" su³r='%s' (ş=%p)\n", 
su³r
->
desütÜ
, su³r->
şassLßd”
);

4680 ià(
	`dvmIsA¼ayCÏss
(
şazz
)) {

4681 
	`LOGI
(" dimensions=%dƒlementClass=%s\n",

4682 
şazz
->
¬¿yDim
, cÏzz->
–em’tCÏss
->
desütÜ
);

4684 ià(
şazz
->
iáabËCouÁ
 > 0) {

4685 
	`LOGI
(" iÁ”çû (%d):\n", 
şazz
->
iáabËCouÁ
);

4686 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

4687 
IÁ”çûEÁry
* 
’t
 = &
şazz
->
iáabË
[
i
];

4688 
j
;

4690 
	`LOGI
(" %2d: %s (cl=%p)\n",

4691 
i
, 
’t
->
şazz
->
desütÜ
,ƒÁ->şazz->
şassLßd”
);

4694 ià(
çl£
 && 
’t
->
m‘hodIndexA¼ay
 !ğ
NULL
) {

4695 
j
 = 0; j < 
’t
->
şazz
->
vœtu®M‘hodCouÁ
; j++)

4696 
	`LOGI
(" %2d: %d %s %s\n",

4697 
j
, 
’t
->
m‘hodIndexA¼ay
[j],

4698 
’t
->
şazz
->
vœtu®M‘hods
[
j
].
Çme
,

4699 
şazz
->
vbË
[
’t
->
m‘hodIndexA¼ay
[
j
]]->
Çme
);

4703 ià(!
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

4704 
	`LOGI
(" vbË (%dƒÁr›s, %d iÀsu³r):\n", 
şazz
->
vbËCouÁ
,

4705 
su³r
 !ğ
NULL
 ? su³r->
vbËCouÁ
 : 0);

4706 
i
 = 0; i < 
şazz
->
vbËCouÁ
; i++) {

4707 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
şazz
->
vbË
[
i
]->
´ÙÙy³
);

4708 
	`LOGI
(" %s%2d: %p %20s %s\n",

4709 (
i
 !ğ
şazz
->
vbË
[i]->
m‘hodIndex
) ? "*** " : "",

4710 (
u4
è
şazz
->
vbË
[
i
]->
m‘hodIndex
, clazz->vtable[i],

4711 
şazz
->
vbË
[
i
]->
Çme
, 
desc
);

4712 
	`ä“
(
desc
);

4714 
	`LOGI
(" dœeù m‘hod (%dƒÁr›s):\n", 
şazz
->
dœeùM‘hodCouÁ
);

4715 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

4716 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

4717 &
şazz
->
dœeùM‘hods
[
i
].
´ÙÙy³
);

4718 
	`LOGI
(" %2d: %20 %s\n", 
i
, 
şazz
->
dœeùM‘hods
[i].
Çme
,

4719 
desc
);

4720 
	`ä“
(
desc
);

4723 
	`LOGI
(" iÁ”çû m‘hod (%d):\n", 
şazz
->
vœtu®M‘hodCouÁ
);

4724 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

4725 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(

4726 &
şazz
->
vœtu®M‘hods
[
i
].
´ÙÙy³
);

4727 
	`LOGI
(" %2d: %2d %20 %s\n", 
i
,

4728 (
u4
è
şazz
->
vœtu®M‘hods
[
i
].
m‘hodIndex
,

4729 
şazz
->
vœtu®M‘hods
[
i
].
Çme
,

4730 
desc
);

4731 
	`ä“
(
desc
);

4734 ià(
şazz
->
sf›ldCouÁ
 > 0) {

4735 
	`LOGI
(" stiøf›ld (%dƒÁr›s):\n", 
şazz
->
sf›ldCouÁ
);

4736 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

4737 
	`LOGI
(" %2d: %20 %s\n", 
i
, 
şazz
->
sf›lds
[i].
f›ld
.
Çme
,

4738 
şazz
->
sf›lds
[
i
].
f›ld
.
sigÇtu»
);

4741 ià(
şazz
->
if›ldCouÁ
 > 0) {

4742 
	`LOGI
(" in¡ªû f›ld (%dƒÁr›s):\n", 
şazz
->
if›ldCouÁ
);

4743 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

4744 
	`LOGI
(" %2d: %20 %s\n", 
i
, 
şazz
->
if›lds
[i].
f›ld
.
Çme
,

4745 
şazz
->
if›lds
[
i
].
f›ld
.
sigÇtu»
);

4749 
	}
}

4756 
	$dvmDumpCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
æags
)

4758 
	`dumpCÏss
((*è
şazz
, (*è
æags
);

4759 
	}
}

4764 
	$dvmDumpAÎCÏs£s
(
æags
)

4766 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4767 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
dumpCÏss
, (*è
æags
);

4768 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4769 
	}
}

4774 
	$dvmG‘NumLßdedCÏs£s
()

4776 
couÁ
;

4777 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4778 
couÁ
 = 
	`dvmHashTabËNumEÁr›s
(
gDvm
.
lßdedCÏs£s
);

4779 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4780  
couÁ
;

4781 
	}
}

4786 
	$dvmDumpLßd”Sts
(cÚ¡ * 
msg
)

4788 
	`LOGV
("VM stats (%s): cls=%d/%d meth=%d ifld=%d sfld=%d†inear=%d\n",

4789 
msg
, 
gDvm
.
numLßdedCÏs£s
, 
	`dvmHashTabËNumEÁr›s
(gDvm.
lßdedCÏs£s
),

4790 
gDvm
.
numDeş¬edM‘hods
, gDvm.
numDeş¬edIn¡F›lds
,

4791 
gDvm
.
numDeş¬edSticF›lds
, gDvm.
pBoÙLßd”AÎoc
->
curOff£t
);

4792 #ifdeà
COUNT_PRECISE_METHODS


4793 
	`LOGI
("GC…recise methods: %d\n",

4794 
	`dvmPoš‹rS‘G‘CouÁ
(
gDvm
.
´eci£M‘hods
));

4796 
	}
}

4798 #ifdeà
PROFILE_FIELD_ACCESS


4802 
	$dumpAcûssCouÁs
(* 
vşazz
, * 
v¬g
)

4804 cÚ¡ 
CÏssObjeù
* 
şazz
 = (cÚ¡ CÏssObjeù*è
vşazz
;

4805 
i
;

4807 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

4808 
F›ld
* 
f›ld
 = &
şazz
->
if›lds
[
i
].field;

4810 ià(
f›ld
->
g‘s
 != 0)

4811 
	`´štf
("GI %d %s.%s\n", 
f›ld
->
g‘s
,

4812 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
);

4813 ià(
f›ld
->
puts
 != 0)

4814 
	`´štf
("PI %d %s.%s\n", 
f›ld
->
puts
,

4815 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
);

4817 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

4818 
F›ld
* 
f›ld
 = &
şazz
->
sf›lds
[
i
].field;

4820 ià(
f›ld
->
g‘s
 != 0)

4821 
	`´štf
("GS %d %s.%s\n", 
f›ld
->
g‘s
,

4822 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
);

4823 ià(
f›ld
->
puts
 != 0)

4824 
	`´štf
("PS %d %s.%s\n", 
f›ld
->
puts
,

4825 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
);

4829 
	}
}

4834 
	$dvmDumpF›ldAcûssCouÁs
()

4836 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4837 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
dumpAcûssCouÁs
, 
NULL
);

4838 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4839 
	}
}

4846 
	$m¬kCÏssObjeù
(*
şazz
, *
¬g
)

4848 
	`UNUSED_PARAMETER
(
¬g
);

4850 
	`dvmM¬kObjeùNÚNuÎ
((
Objeù
 *)
şazz
);

4852 
	}
}

4858 
	$dvmGcSÿnRoÙCÏssLßd”
()

4862 ià(
gDvm
.
lßdedCÏs£s
 !ğ
NULL
) {

4863 
	`dvmHashTabËLock
(
gDvm
.
lßdedCÏs£s
);

4864 
	`dvmHashFÜ—ch
(
gDvm
.
lßdedCÏs£s
, 
m¬kCÏssObjeù
, 
NULL
);

4865 
	`dvmHashTabËUÆock
(
gDvm
.
lßdedCÏs£s
);

4867 
	}
}

4881 
	$dvmCom·»M‘hodNamesAndPrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

4882 cÚ¡ 
M‘hod
* 
m‘hod2
)

4884 
»suÉ
 = 
	`¡rcmp
(
m‘hod1
->
Çme
, 
m‘hod2
->name);

4886 ià(
»suÉ
 != 0) {

4887  
»suÉ
;

4890  
	`dvmCom·»M‘hodPrÙos
(
m‘hod1
, 
m‘hod2
);

4891 
	}
}

4899 
	$dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

4900 cÚ¡ 
M‘hod
* 
m‘hod2
)

4902 
»suÉ
 = 
	`¡rcmp
(
m‘hod1
->
Çme
, 
m‘hod2
->name);

4904 ià(
»suÉ
 != 0) {

4905  
»suÉ
;

4908  
	`dvmCom·»M‘hodP¬am‘”PrÙos
(
m‘hod1
, 
m‘hod2
);

4909 
	}
}

4917 
	$dvmCom·»NamePrÙoAndM‘hod
(cÚ¡ * 
Çme
,

4918 cÚ¡ 
DexPrÙo
* 
´Ùo
, cÚ¡ 
M‘hod
* 
m‘hod
)

4920 
»suÉ
 = 
	`¡rcmp
(
Çme
, 
m‘hod
->name);

4922 ià(
»suÉ
 != 0) {

4923  
»suÉ
;

4926  
	`dexPrÙoCom·»
(
´Ùo
, &
m‘hod
->
´ÙÙy³
);

4927 
	}
}

4935 
	$dvmCom·»NameDesütÜAndM‘hod
(cÚ¡ * 
Çme
,

4936 cÚ¡ * 
desütÜ
, cÚ¡ 
M‘hod
* 
m‘hod
)

4938 
»suÉ
 = 
	`¡rcmp
(
Çme
, 
m‘hod
->name);

4940 ià(
»suÉ
 != 0) {

4941  
»suÉ
;

4944  
	`dvmCom·»DesütÜAndM‘hodPrÙo
(
desütÜ
, 
m‘hod
);

4945 
	}
}

	@oo/Class.h

19 #iâdeà
_DALVIK_OO_CLASS


20 
	#_DALVIK_OO_CLASS


	)

38 
	sCÏssP©hEÁry
 {

40 
	mkC³Unknown
 = 0,

41 
	mkC³Dœ
,

42 
	mkC³J¬
,

43 
	mkC³Dex
,

44 
	mkC³La¡EÁry


45 } 
	mkšd
;

46 * 
	mfeName
;

47 * 
	m±r
;

48 } 
	tCÏssP©hEÁry
;

50 
boŞ
 
dvmCÏssS¹up
();

51 
dvmCÏssShutdown
();

52 
boŞ
 
dvmP»pBoÙCÏssP©h
(boŞ 
isNÜm®S¹
);

57 
dvmG‘BoÙP©hSize
();

58 
SŒšgObjeù
* 
dvmG‘BoÙP©hResourû
(cÚ¡ * 
Çme
, 
idx
);

59 
dvmDumpBoÙCÏssP©h
();

64 
boŞ
 
dvmCÏssP©hCÚšs
(cÚ¡ 
CÏssP©hEÁry
* 
ıe
, cÚ¡ * 
·th
);

69 
dvmS‘CÏssS”ŸlNumb”
(
CÏssObjeù
* 
şazz
);

77 
CÏssObjeù
* 
dvmFšdCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

78 
CÏssObjeù
* 
dvmFšdCÏssNoIn™
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
);

83 
CÏssObjeù
* 
dvmFšdSy¡emCÏss
(cÚ¡ * 
desütÜ
);

84 
CÏssObjeù
* 
dvmFšdSy¡emCÏssNoIn™
(cÚ¡ * 
desütÜ
);

96 
CÏssObjeù
* 
dvmFšdLßdedCÏss
(cÚ¡ * 
desütÜ
);

103 
CÏssObjeù
* 
dvmDefšeCÏss
(
DvmDex
* 
pDvmDex
, cÚ¡ * 
desütÜ
,

104 
Objeù
* 
şassLßd”
);

111 
boŞ
 
dvmLškCÏss
(
CÏssObjeù
* 
şazz
, boŞ 
şas£sResŞved
);

116 
INLINE
 
boŞ
 
	$dvmIsCÏssIn™Ÿlized
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

117  (
şazz
->
¡©us
 =ğ
CLASS_INITIALIZED
);

118 
	}
}

119 
boŞ
 
dvmIsCÏssIn™Ÿlizšg
(cÚ¡ 
CÏssObjeù
* 
şazz
);

124 
boŞ
 
dvmIn™CÏss
(
CÏssObjeù
* 
şazz
);

129 
Objeù
* 
dvmG‘Sy¡emCÏssLßd”
();

134 
CÏssObjeù
* 
dvmLookupCÏss
(cÚ¡ * 
desütÜ
, 
Objeù
* 
lßd”
,

135 
boŞ
 
uÅ»pOkay
);

136 
dvmF»eCÏssIÂ¬ds
(
CÏssObjeù
* 
şazz
);

137 
boŞ
 
dvmAddCÏssToHash
(
CÏssObjeù
* 
şazz
);

138 
dvmAddIn™ŸtšgLßd”
(
CÏssObjeù
* 
şazz
, 
Objeù
* 
lßd”
);

139 
boŞ
 
dvmLßd”InIn™ŸtšgLi¡
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
Objeù
* 
lßd”
);

144 
dvmS‘N©iveFunc
(cÚ¡ 
M‘hod
* 
m‘hod
, 
D®vikBridgeFunc
 
func
,

145 cÚ¡ 
u2
* 
š¢s
);

150 
dvmS‘Regi¡”M­
(
M‘hod
* 
m‘hod
, cÚ¡ 
Regi¡”M­
* 
pM­
);

158 
dvmMakeCodeR—dWr™e
(
M‘hod
* 
m‘h
);

159 
dvmMakeCodeR—dOÆy
(
M‘hod
* 
m‘h
);

164 
dvmS‘BoÙP©hExŒaDex
(
DvmDex
* 
pDvmDex
);

169 
dvmDumpCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
æags
);

170 
dvmDumpAÎCÏs£s
(
æags
);

171 
dvmDumpLßd”Sts
(cÚ¡ * 
msg
);

172 
dvmG‘NumLßdedCÏs£s
();

174 #ifdeà
PROFILE_FIELD_ACCESS


175 
dvmDumpF›ldAcûssCouÁs
();

179 
	#kDumpCÏssFuÎD‘a
 1

	)

180 
	#kDumpCÏssCÏssLßd”
 (1 << 1)

	)

181 
	#kDumpCÏssIn™Ÿlized
 (1 << 2)

	)

189 
INLINE
 * 
	$dvmCİyDesütÜSŒšgFromM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
,

190 
DexSŒšgCache
 *
pCache
)

192 cÚ¡ * 
»suÉ
 =

193 
	`dexPrÙoG‘M‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
, 
pCache
);

194  
	`dexSŒšgCacheEnsu»Cİy
(
pCache
, 
»suÉ
);

195 
	}
}

203 
INLINE
 
	$dvmCompu‹M‘hodArgsSize
(cÚ¡ 
M‘hod
* 
m‘hod
)

205  
	`dexPrÙoCompu‹ArgsSize
(&
m‘hod
->
´ÙÙy³
);

206 
	}
}

212 
INLINE
 
	$dvmCom·»M‘hodPrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

213 cÚ¡ 
M‘hod
* 
m‘hod2
)

215  
	`dexPrÙoCom·»
(&
m‘hod1
->
´ÙÙy³
, &
m‘hod2
->prototype);

216 
	}
}

223 
INLINE
 
	$dvmCom·»M‘hodP¬am‘”PrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

224 cÚ¡ 
M‘hod
* 
m‘hod2
)

226  
	`dexPrÙoCom·»P¬am‘”s
(&
m‘hod1
->
´ÙÙy³
, &
m‘hod2
->prototype);

227 
	}
}

234 
dvmCom·»M‘hodNamesAndPrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

235 cÚ¡ 
M‘hod
* 
m‘hod2
);

243 
dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(cÚ¡ 
M‘hod
* 
m‘hod1
,

244 cÚ¡ 
M‘hod
* 
m‘hod2
);

251 
INLINE
 
	$dvmCom·»DesütÜAndM‘hodPrÙo
(cÚ¡ * 
desütÜ
,

252 cÚ¡ 
M‘hod
* 
m‘hod
)

255  -
	`dexPrÙoCom·»ToDesütÜ
(&
m‘hod
->
´ÙÙy³
, 
desütÜ
);

256 
	}
}

264 
dvmCom·»NamePrÙoAndM‘hod
(cÚ¡ * 
Çme
,

265 cÚ¡ 
DexPrÙo
* 
´Ùo
, cÚ¡ 
M‘hod
* 
m‘hod
);

273 
dvmCom·»NameDesütÜAndM‘hod
(cÚ¡ * 
Çme
,

274 cÚ¡ * 
desütÜ
, cÚ¡ 
M‘hod
* 
m‘hod
);

	@oo/Object.c

20 
	~"D®vik.h
"

27 
In¡F›ld
* 
	$dvmFšdIn¡ªûF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

28 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

30 
In¡F›ld
* 
pF›ld
;

31 
i
;

33 
	`as£¹
(
şazz
 !ğ
NULL
);

41 
pF›ld
 = 
şazz
->
if›lds
;

42 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++, 
pF›ld
++) {

43 ià(
	`¡rcmp
(
f›ldName
, 
pF›ld
->
f›ld
.
Çme
) == 0 &&

44 
	`¡rcmp
(
sigÇtu»
, 
pF›ld
->
f›ld
.signature) == 0)

46  
pF›ld
;

50  
NULL
;

51 
	}
}

61 
In¡F›ld
* 
	$dvmFšdIn¡ªûF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

62 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

64 
In¡F›ld
* 
pF›ld
;

69 
pF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

70 ià(
pF›ld
 !ğ
NULL
)

71  
pF›ld
;

73 ià(
şazz
->
su³r
 !ğ
NULL
)

74  
	`dvmFšdIn¡ªûF›ldH›r
(
şazz
->
su³r
, 
f›ldName
, 
sigÇtu»
);

76  
NULL
;

77 
	}
}

85 
SticF›ld
* 
	$dvmFšdSticF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

86 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

88 
SticF›ld
* 
pF›ld
;

89 
i
;

91 
	`as£¹
(
şazz
 !ğ
NULL
);

98 
pF›ld
 = 
şazz
->
sf›lds
;

99 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++, 
pF›ld
++) {

100 ià(
	`¡rcmp
(
f›ldName
, 
pF›ld
->
f›ld
.
Çme
) == 0 &&

101 
	`¡rcmp
(
sigÇtu»
, 
pF›ld
->
f›ld
.signature) == 0)

103  
pF›ld
;

107  
NULL
;

108 
	}
}

115 
SticF›ld
* 
	$dvmFšdSticF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

116 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

118 
SticF›ld
* 
pF›ld
;

123 
pF›ld
 = 
	`dvmFšdSticF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

124 ià(
pF›ld
 !ğ
NULL
)

125  
pF›ld
;

134 
i
 = 0;

135 ià(
şazz
->
su³r
 !ğ
NULL
) {

136 
	`as£¹
(
şazz
->
iáabËCouÁ
 >ğşazz->
su³r
->iftableCount);

137 
i
 = 
şazz
->
su³r
->
iáabËCouÁ
;

139  ; 
i
 < 
şazz
->
iáabËCouÁ
; i++) {

140 
CÏssObjeù
* 
içû
 = 
şazz
->
iáabË
[
i
].clazz;

141 
pF›ld
 = 
	`dvmFšdSticF›ld
(
içû
, 
f›ldName
, 
sigÇtu»
);

142 ià(
pF›ld
 !ğ
NULL
)

143  
pF›ld
;

146 ià(
şazz
->
su³r
 !ğ
NULL
)

147  
	`dvmFšdSticF›ldH›r
(
şazz
->
su³r
, 
f›ldName
, 
sigÇtu»
);

149  
NULL
;

150 
	}
}

165 
F›ld
* 
	$dvmFšdF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
f›ldName
,

166 cÚ¡ * 
sigÇtu»
)

168 
F›ld
* 
pF›ld
;

174 
pF›ld
 = (
F›ld
*è
	`dvmFšdSticF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

175 ià(
pF›ld
 !ğ
NULL
)

176  
pF›ld
;

177 
pF›ld
 = (
F›ld
*è
	`dvmFšdIn¡ªûF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

178 ià(
pF›ld
 !ğ
NULL
)

179  
pF›ld
;

185 
i
 = 0;

186 ià(
şazz
->
su³r
 !ğ
NULL
) {

187 
	`as£¹
(
şazz
->
iáabËCouÁ
 >ğşazz->
su³r
->iftableCount);

188 
i
 = 
şazz
->
su³r
->
iáabËCouÁ
;

190  ; 
i
 < 
şazz
->
iáabËCouÁ
; i++) {

191 
CÏssObjeù
* 
içû
 = 
şazz
->
iáabË
[
i
].clazz;

192 
pF›ld
 = (
F›ld
*è
	`dvmFšdSticF›ld
(
içû
, 
f›ldName
, 
sigÇtu»
);

193 ià(
pF›ld
 !ğ
NULL
)

194  
pF›ld
;

197 ià(
şazz
->
su³r
 !ğ
NULL
)

198  
	`dvmFšdF›ldH›r
(
şazz
->
su³r
, 
f›ldName
, 
sigÇtu»
);

200  
NULL
;

201 
	}
}

208 
šlše
 
	$com·»M‘hodH–³r
(
M‘hod
* 
m‘hod
, cÚ¡ * 
m‘hodName
,

209 cÚ¡ * 
»tuºTy³
, 
size_t
 
¬gCouÁ
, cÚ¡ ** 
¬gTy³s
)

211 
DexP¬am‘”I‹¿tÜ
 
™”©Ü
;

212 cÚ¡ 
DexPrÙo
* 
´Ùo
;

214 ià(
	`¡rcmp
(
m‘hodName
, 
m‘hod
->
Çme
) != 0) {

218 
´Ùo
 = &
m‘hod
->
´ÙÙy³
;

220 ià(
	`¡rcmp
(
»tuºTy³
, 
	`dexPrÙoG‘R‘uºTy³
(
´Ùo
)) != 0) {

224 ià(
	`dexPrÙoG‘P¬am‘”CouÁ
(
´Ùo
è!ğ
¬gCouÁ
) {

228 
	`dexP¬am‘”I‹¿tÜIn™
(&
™”©Ü
, 
´Ùo
);

230  ; 
¬gCouÁ
 !ğ0;‡rgCouÁ--, 
¬gTy³s
++) {

231 cÚ¡ * 
¬gTy³
 = *
¬gTy³s
;

232 cÚ¡ * 
·¿mTy³
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
);

234 ià(
·¿mTy³
 =ğ
NULL
) {

237 } ià(
	`¡rcmp
(
¬gTy³
, 
·¿mTy³
) != 0) {

243 ià(
¬gCouÁ
 == 0) {

245 ià(
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
™”©Ü
è=ğ
NULL
) {

252 
	}
}

258 
šlše
 
size_t
 
	$couÁArgsAndFšdR‘uºTy³
(cÚ¡ * 
desütÜ
,

259 cÚ¡ ** 
pR‘uºTy³
)

261 
size_t
 
couÁ
 = 0;

262 
boŞ
 
bogus
 = 
çl£
;

263 
boŞ
 
dÚe
 = 
çl£
;

265 
	`as£¹
(*
desütÜ
 == '(');

266 
desütÜ
++;

268 !
dÚe
) {

269 *
desütÜ
) {

272 
couÁ
++;

277 
desütÜ
++;

278 } *
desütÜ
 == '[');

284 
desütÜ
--;

289 
desütÜ
++;

290 } (*
desütÜ
 != ';') && (*descriptor != '\0'));

291 
couÁ
++;

292 ià(*
desütÜ
 == '\0') {

294 
dÚe
 = 
Œue
;

295 
bogus
 = 
Œue
;

304 
dÚe
 = 
Œue
;

309 
dÚe
 = 
Œue
;

310 
bogus
 = 
Œue
;

315 
desütÜ
++;

318 ià(
bogus
) {

319 *
pR‘uºTy³
 = 
NULL
;

323 *
pR‘uºTy³
 = 
desütÜ
;

324  
couÁ
;

325 
	}
}

331 
šlše
 
	$cİyTy³s
(* 
bufãr
, cÚ¡ ** 
¬gTy³s
,

332 
size_t
 
¬gCouÁ
, cÚ¡ * 
desütÜ
)

334 
size_t
 
i
;

335 
c
;

338 
desütÜ
++;

340 
i
 = 0; i < 
¬gCouÁ
; i++) {

341 
¬gTy³s
[
i
] = 
bufãr
;

345 
c
 = *(
desütÜ
++);

346 *(
bufãr
++èğ
c
;

347 } 
c
 == '[');

349 ià(
c
 == 'L') {

352 
c
 = *(
desütÜ
++);

353 *(
bufãr
++èğ
c
;

354 } 
c
 != ';');

357 *(
bufãr
++) = '\0';

359 
	}
}

365 
M‘hod
* 
	$fšdM‘hodInLi¡ByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

366 
boŞ
 
fšdVœtu®
, boŞ 
isH›r
, cÚ¡ * 
Çme
, cÚ¡ * 
desütÜ
)

368 cÚ¡ * 
»tuºTy³
;

369 
size_t
 
¬gCouÁ
 = 
	`couÁArgsAndFšdR‘uºTy³
(
desütÜ
, &
»tuºTy³
);

371 ià(
»tuºTy³
 =ğ
NULL
) {

372 
	`LOGW
("Bogu m‘hod desütÜ: %s\n", 
desütÜ
);

373  
NULL
;

381 
bufãr
[
¬gCouÁ
 + (
»tuºTy³
 - 
desütÜ
) - 2];

382 cÚ¡ * 
¬gTy³s
[
¬gCouÁ
];

384 
	`cİyTy³s
(
bufãr
, 
¬gTy³s
, 
¬gCouÁ
, 
desütÜ
);

386 
şazz
 !ğ
NULL
) {

387 
M‘hod
* 
m‘hods
;

388 
size_t
 
m‘hodCouÁ
;

389 
size_t
 
i
;

391 ià(
fšdVœtu®
) {

392 
m‘hods
 = 
şazz
->
vœtu®M‘hods
;

393 
m‘hodCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

395 
m‘hods
 = 
şazz
->
dœeùM‘hods
;

396 
m‘hodCouÁ
 = 
şazz
->
dœeùM‘hodCouÁ
;

399 
i
 = 0; i < 
m‘hodCouÁ
; i++) {

400 
M‘hod
* 
m‘hod
 = &
m‘hods
[
i
];

401 ià(
	`com·»M‘hodH–³r
(
m‘hod
, 
Çme
, 
»tuºTy³
, 
¬gCouÁ
,

402 
¬gTy³s
) == 0) {

403  
m‘hod
;

407 ià(! 
isH›r
) {

411 
şazz
 = cÏzz->
su³r
;

414  
NULL
;

415 
	}
}

425 
M‘hod
* 
	$fšdM‘hodInLi¡ByPrÙo
(cÚ¡ 
CÏssObjeù
* 
şazz
,

426 
M‘hodTy³
 
wª‹dTy³
, 
boŞ
 
isH›r
, cÚ¡ * 
Çme
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

428 
şazz
 !ğ
NULL
) {

429 
i
;

434 ià(
wª‹dTy³
 =ğ
METHOD_VIRTUAL
 || wª‹dTy³ =ğ
METHOD_UNKNOWN
) {

435 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++) {

436 
M‘hod
* 
m‘hod
 = &
şazz
->
vœtu®M‘hods
[
i
];

437 ià(
	`dvmCom·»NamePrÙoAndM‘hod
(
Çme
, 
´Ùo
, 
m‘hod
) == 0) {

438  
m‘hod
;

442 ià(
wª‹dTy³
 =ğ
METHOD_DIRECT
 || wª‹dTy³ =ğ
METHOD_UNKNOWN
) {

443 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++) {

444 
M‘hod
* 
m‘hod
 = &
şazz
->
dœeùM‘hods
[
i
];

445 ià(
	`dvmCom·»NamePrÙoAndM‘hod
(
Çme
, 
´Ùo
, 
m‘hod
) == 0) {

446  
m‘hod
;

451 ià(! 
isH›r
) {

455 
şazz
 = cÏzz->
su³r
;

458  
NULL
;

459 
	}
}

468 
M‘hod
* 
	$dvmFšdVœtu®M‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

469 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

471  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
Œue
, 
çl£
,

472 
m‘hodName
, 
desütÜ
);

477 
	}
}

489 
M‘hod
* 
	$dvmFšdVœtu®M‘hodByName
(cÚ¡ 
CÏssObjeù
* 
şazz
,

490 cÚ¡ * 
m‘hodName
)

492 
M‘hod
* 
m‘hods
 = 
şazz
->
vœtu®M‘hods
;

493 
m‘hodCouÁ
 = 
şazz
->
vœtu®M‘hodCouÁ
;

494 
i
;

496 
i
 = 0; i < 
m‘hodCouÁ
; i++) {

497 ià(
	`¡rcmp
(
m‘hods
[
i
].
Çme
, 
m‘hodName
) == 0)

498  &
m‘hods
[
i
];

501  
NULL
;

502 
	}
}

511 
M‘hod
* 
	$dvmFšdVœtu®M‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

512 cÚ¡ 
DexPrÙo
* 
´Ùo
)

514  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_VIRTUAL
, 
çl£
, 
m‘hodName
,

515 
´Ùo
);

516 
	}
}

524 
M‘hod
* 
	$dvmFšdVœtu®M‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

525 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

527  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
Œue
,rue,

528 
m‘hodName
, 
desütÜ
);

529 
	}
}

537 
M‘hod
* 
	$dvmFšdVœtu®M‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

538 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

540  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_VIRTUAL
, 
Œue
, 
m‘hodName
,

541 
´Ùo
);

542 
	}
}

549 
M‘hod
* 
	$dvmFšdDœeùM‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

550 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

552  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
çl£
, false,

553 
m‘hodName
, 
desütÜ
);

554 
	}
}

563 
M‘hod
* 
	$dvmFšdDœeùM‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

564 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
)

566  
	`fšdM‘hodInLi¡ByDesütÜ
(
şazz
, 
çl£
, 
Œue
,

567 
m‘hodName
, 
desütÜ
);

568 
	}
}

575 
M‘hod
* 
	$dvmFšdDœeùM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

576 cÚ¡ 
DexPrÙo
* 
´Ùo
)

578  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_DIRECT
, 
çl£
, 
m‘hodName
,

579 
´Ùo
);

580 
	}
}

588 
M‘hod
* 
	$dvmFšdDœeùM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

589 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
)

591  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_DIRECT
, 
Œue
, 
m‘hodName
,

592 
´Ùo
);

593 
	}
}

608 
M‘hod
* 
	$dvmFšdM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

609 cÚ¡ 
DexPrÙo
* 
´Ùo
)

611  
	`fšdM‘hodInLi¡ByPrÙo
(
şazz
, 
METHOD_UNKNOWN
, 
Œue
, 
m‘hodName
,

612 
´Ùo
);

613 
	}
}

624 cÚ¡ 
M‘hod
* 
	$dvmG‘Vœtu®izedM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
,

625 cÚ¡ 
M‘hod
* 
m‘h
)

627 
M‘hod
* 
aùu®M‘h
;

628 
m‘hodIndex
;

630 
	`as£¹
(!
	`dvmIsSticM‘hod
(
m‘h
));

632 ià(
	`dvmIsPriv©eM‘hod
(
m‘h
))

633  
m‘h
;

642 ià(
	`dvmIsIÁ”çûCÏss
(
m‘h
->
şazz
)) {

643 
i
;

645 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

646 ià(
şazz
->
iáabË
[
i
].şazz =ğ
m‘h
->clazz)

649 ià(
i
 =ğ
şazz
->
iáabËCouÁ
) {

650 
	`dvmThrowExû±iÚ
("Ljava/lang/IncompatibleClassChangeError;",

652  
NULL
;

655 
m‘hodIndex
 = 
şazz
->
iáabË
[
i
].
m‘hodIndexA¼ay
[
m‘h
->methodIndex];

657 
m‘hodIndex
 = 
m‘h
->methodIndex;

660 
	`as£¹
(
m‘hodIndex
 >ğ0 && m‘hodIndex < 
şazz
->
vbËCouÁ
);

661 
aùu®M‘h
 = 
şazz
->
vbË
[
m‘hodIndex
];

666 ià(
	`dvmIsAb¡¿ùM‘hod
(
aùu®M‘h
)) {

667 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Ab¡¿ùM‘hodE¼Ü;", 
NULL
);

668  
NULL
;

670 
	`as£¹
(!
	`dvmIsMœªdaM‘hod
(
aùu®M‘h
));

672  
aùu®M‘h
;

673 
	}
}

678 cÚ¡ * 
	$dvmG‘M‘hodSourûFe
(cÚ¡ 
M‘hod
* 
m‘h
)

685  
m‘h
->
şazz
->
sourûFe
;

686 
	}
}

691 
	$dvmDumpObjeù
(cÚ¡ 
Objeù
* 
obj
)

693 
CÏssObjeù
* 
şazz
;

694 
i
;

696 ià(
obj
 =ğ
NULL
 || obj->
şazz
 == NULL) {

697 
	`LOGW
("Null or malformed object‚ot dumped\n");

701 
şazz
 = 
obj
->clazz;

702 
	`LOGD
("----- Object dump: %p (%s, %d bytes) -----\n",

703 
obj
, 
şazz
->
desütÜ
, (èşazz->
objeùSize
);

705 
	`LOGD
(" Fields:\n");

706 
şazz
 !ğ
NULL
) {

707 
	`LOGD
(" -- %s\n", 
şazz
->
desütÜ
);

708 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

709 cÚ¡ 
In¡F›ld
* 
pF›ld
 = &
şazz
->
if›lds
[
i
];

710 
ty³
 = 
pF›ld
->
f›ld
.
sigÇtu»
[0];

712 ià(
ty³
 == 'F' ||ype == 'D') {

713 
dv®
;

715 ià(
ty³
 == 'F')

716 
dv®
 = 
	`dvmG‘F›ldFlßt
(
obj
, 
pF›ld
->
by‹Off£t
);

718 
dv®
 = 
	`dvmG‘F›ldDoubË
(
obj
, 
pF›ld
->
by‹Off£t
);

720 
	`LOGD
(" %2d: '%s' '%s'‡f=%04x off=%d %.3f\n", 
i
,

721 
pF›ld
->
f›ld
.
Çme
,…F›ld->f›ld.
sigÇtu»
,

722 
pF›ld
->
f›ld
.
acûssFÏgs
,…F›ld->
by‹Off£t
, 
dv®
);

724 
u8
 
lv®
;

726 ià(
ty³
 == 'J')

727 
lv®
 = 
	`dvmG‘F›ldLÚg
(
obj
, 
pF›ld
->
by‹Off£t
);

728 ià(
ty³
 == 'Z')

729 
lv®
 = 
	`dvmG‘F›ldBoŞ—n
(
obj
, 
pF›ld
->
by‹Off£t
);

731 
lv®
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
pF›ld
->
by‹Off£t
);

733 
	`LOGD
(" %2d: '%s' '%s'‡f=%04x off=%d 0x%08Îx\n", 
i
,

734 
pF›ld
->
f›ld
.
Çme
,…F›ld->f›ld.
sigÇtu»
,

735 
pF›ld
->
f›ld
.
acûssFÏgs
,…F›ld->
by‹Off£t
, 
lv®
);

739 
şazz
 = cÏzz->
su³r
;

741 
	}
}

	@oo/Object.h

21 #iâdeà
_DALVIK_OO_OBJECT


22 
	#_DALVIK_OO_OBJECT


	)

24 
	~<¡ddef.h
>

26 #ifdeà
WITH_TAINT_TRACKING


27 
	~"š‹½/Tašt.h
"

31 
	gD©aObjeù
;

32 
	gIn™ŸtšgLßd”Li¡
;

33 
	gCÏssObjeù
;

34 
	gSŒšgObjeù
;

35 
	gA¼ayObjeù
;

36 
	gM‘hod
;

37 
	gExû±iÚEÁry
;

38 
	gLšeNumEÁry
;

39 
	gSticF›ld
;

40 
	gIn¡F›ld
;

41 
	gF›ld
;

42 
	gRegi¡”M­
;

43 
D©aObjeù
 
	tD©aObjeù
;

44 
In™ŸtšgLßd”Li¡
 
	tIn™ŸtšgLßd”Li¡
;

45 
CÏssObjeù
 
	tCÏssObjeù
;

46 
SŒšgObjeù
 
	tSŒšgObjeù
;

47 
A¼ayObjeù
 
	tA¼ayObjeù
;

48 
M‘hod
 
	tM‘hod
;

49 
Exû±iÚEÁry
 
	tExû±iÚEÁry
;

50 
LšeNumEÁry
 
	tLšeNumEÁry
;

51 
SticF›ld
 
	tSticF›ld
;

52 
In¡F›ld
 
	tIn¡F›ld
;

53 
F›ld
 
	tF›ld
;

54 
Regi¡”M­
 
	tRegi¡”M­
;

66 (*
	tD®vikBridgeFunc
)(cÚ¡ 
	tu4
* 
	t¬gs
, 
	tJV®ue
* 
	tpResuÉ
,

67 cÚ¡ 
	tM‘hod
* 
	tm‘hod
, 
	tTh»ad
* 
	t£lf
);

68 (*
	tD®vikN©iveFunc
)(cÚ¡ 
	tu4
* 
	t¬gs
, 
	tJV®ue
* 
	tpResuÉ
);

72 
	eAcûssFÏgs
 {

73 
ACC_MIRANDA
 = 0x8000,

74 
JAVA_FLAGS_MASK
 = 0xffff,

75 } 
	tAcûssFÏgs
;

81 
	eCÏssFÏgs
 {

82 
CLASS_ISFINALIZABLE
 = (1<<31),

83 
CLASS_ISARRAY
 = (1<<30),

84 
CLASS_ISOBJECTARRAY
 = (1<<29),

85 
CLASS_ISREFERENCE
 = (1<<28),

87 
CLASS_ISWEAKREFERENCE
 = (1<<27),

88 
CLASS_ISPHANTOMREFERENCE
 = (1<<26),

90 
CLASS_MULTIPLE_DEFS
 = (1<<25),

93 
CLASS_ISOPTIMIZED
 = (1<<17),

94 
CLASS_ISPREVERIFIED
 = (1<<16),

95 } 
	tCÏssFÏgs
;

98 
	#EXPECTED_FILE_FLAGS
 \

99 (
ACC_CLASS_MASK
 | 
CLASS_ISPREVERIFIED
 | 
CLASS_ISOPTIMIZED
)

	)

104 
	#SET_CLASS_FLAG
(
şazz
, 
æag
) \

105 dØ{ (
şazz
)->
acûssFÏgs
 |ğ(
æag
); 
	}
} 0)

	)

107 
	#CLEAR_CLASS_FLAG
(
şazz
, 
æag
) \

108 dØ{ (
şazz
)->
acûssFÏgs
 &ğ~(
æag
); } 0)

	)

110 
	#IS_CLASS_FLAG_SET
(
şazz
, 
æag
) \

111 (((
şazz
)->
acûssFÏgs
 & (
æag
)è!ğ0)

	)

113 
	#GET_CLASS_FLAG_GROUP
(
şazz
, 
æags
) \

114 ((
u4
)((
şazz
)->
acûssFÏgs
 & (
æags
)))

	)

120 
	eM‘hodFÏgs
 {

121 
	mMETHOD_ISWRITABLE
 = (1<<31),

122 } 
	tM‘hodFÏgs
;

127 
	#SET_METHOD_FLAG
(
m‘hod
, 
æag
) \

128 dØ{ (
m‘hod
)->
acûssFÏgs
 |ğ(
æag
); } 0)

	)

130 
	#CLEAR_METHOD_FLAG
(
m‘hod
, 
æag
) \

131 dØ{ (
m‘hod
)->
acûssFÏgs
 &ğ~(
æag
); } 0)

	)

133 
	#IS_METHOD_FLAG_SET
(
m‘hod
, 
æag
) \

134 (((
m‘hod
)->
acûssFÏgs
 & (
æag
)è!ğ0)

	)

136 
	#GET_METHOD_FLAG_GROUP
(
m‘hod
, 
æags
) \

137 ((
u4
)((
m‘hod
)->
acûssFÏgs
 & (
æags
)))

	)

140 
	eCÏssStus
 {

141 
	mCLASS_ERROR
 = -1,

143 
	mCLASS_NOTREADY
 = 0,

144 
	mCLASS_LOADED
 = 1,

145 
	mCLASS_PREPARED
 = 2,

146 
	mCLASS_RESOLVED
 = 3,

147 
	mCLASS_VERIFYING
 = 4,

148 
	mCLASS_VERIFIED
 = 5,

149 
	mCLASS_INITIALIZING
 = 6,

150 
	mCLASS_INITIALIZED
 = 7,

151 } 
	tCÏssStus
;

163 
	ePrim™iveTy³
 {

164 
	mPRIM_NOT
 = -1,

165 
	mPRIM_BOOLEAN
 = 0,

166 
	mPRIM_CHAR
 = 1,

167 
	mPRIM_FLOAT
 = 2,

168 
	mPRIM_DOUBLE
 = 3,

169 
	mPRIM_BYTE
 = 4,

170 
	mPRIM_SHORT
 = 5,

171 
	mPRIM_INT
 = 6,

172 
	mPRIM_LONG
 = 7,

173 
	mPRIM_VOID
 = 8,

175 
	mPRIM_MAX


176 } 
	tPrim™iveTy³
;

177 
	#PRIM_TYPE_TO_LETTER
 "ZCFDBSIJV"

	)

188 
	#CLASS_WALK_SUPER
 (()(3))

	)

189 
	#CLASS_SMALLEST_OFFSET
 ((
Objeù
))

	)

190 
	#CLASS_BITS_PER_WORD
 ((è* 8)

	)

191 
	#CLASS_OFFSET_ALIGNMENT
 4

	)

192 
	#CLASS_HIGH_BIT
 (()1 << (
CLASS_BITS_PER_WORD
 - 1))

	)

196 
	#CLASS_BIT_FROM_OFFSET
(
by‹Off£t
) \

197 (
CLASS_HIGH_BIT
 >> \

198 ((()(
by‹Off£t
è- 
CLASS_SMALLEST_OFFSET
) / \

199 
CLASS_OFFSET_ALIGNMENT
))

	)

203 
	#CLASS_OFFSET_FROM_CLZ
(
rshiá
) \

204 ((()(
rshiá
è* 
CLASS_OFFSET_ALIGNMENT
è+ 
CLASS_SMALLEST_OFFSET
)

	)

210 
	sIÁ”çûEÁry
 {

212 
CÏssObjeù
* 
	mşazz
;

218 * 
	mm‘hodIndexA¼ay
;

219 } 
	tIÁ”çûEÁry
;

235 
	sObjeù
 {

237 
CÏssObjeù
* 
	mşazz
;

240 
Lock
 
	mlock
;

241 } 
	tObjeù
;

247 
	#DVM_OBJECT_INIT
(
obj
, 
şazz_
) \

248 dØ{ (
obj
)->
şazz
 = (
şazz_
); 
	`DVM_LOCK_INIT
(&(obj)->
lock
); } 0)

	)

253 
	sD©aObjeù
 {

254 
Objeù
 
	mobj
;

257 
u4
 
	mš¡ªûD©a
[1];

271 
	sSŒšgObjeù
 {

272 
Objeù
 
	mobj
;

275 
u4
 
	mš¡ªûD©a
[1];

286 
	sA¼ayObjeù
 {

287 
Objeù
 
	mobj
;

290 
u4
 
	mËngth
;

292 #ifdeà
WITH_TAINT_TRACKING


293 
Tašt
 
	mšt
;

301 
u8
 
	mcÚ‹Ás
[1];

309 
	sIn™ŸtšgLßd”Li¡
 {

311 
Objeù
** 
	mš™ŸtšgLßd”s
;

313 
	mš™ŸtšgLßd”CouÁ
;

321 
	#CLASS_FIELD_SLOTS
 4

	)

337 
	sCÏssObjeù
 {

338 
Objeù
 
	mobj
;

342 
u4
 
	mš¡ªûD©a
[
CLASS_FIELD_SLOTS
];

346 cÚ¡ * 
	mdesütÜ
;

347 * 
	mdesütÜAÎoc
;

350 
u4
 
	macûssFÏgs
;

353 
u4
 
	m£rŸlNumb”
;

357 
DvmDex
* 
	mpDvmDex
;

360 
CÏssStus
 
	m¡©us
;

363 
CÏssObjeù
* 
	mv”ifyE¼ÜCÏss
;

366 
u4
 
	mš™Th»adId
;

372 
size_t
 
	mobjeùSize
;

376 
CÏssObjeù
* 
	m–em’tCÏss
;

379 
CÏssObjeù
* 
	m¬¿yCÏss
;

382 
	m¬¿yDim
;

385 
Prim™iveTy³
 
	m´im™iveTy³
;

388 
CÏssObjeù
* 
	msu³r
;

391 
Objeù
* 
	mşassLßd”
;

396 
In™ŸtšgLßd”Li¡
 
	mš™ŸtšgLßd”Li¡
;

399 
	mš‹rçûCouÁ
;

400 
CÏssObjeù
** 
	mš‹rçûs
;

403 
	mdœeùM‘hodCouÁ
;

404 
M‘hod
* 
	mdœeùM‘hods
;

407 
	mvœtu®M‘hodCouÁ
;

408 
M‘hod
* 
	mvœtu®M‘hods
;

415 
	mvbËCouÁ
;

416 
M‘hod
** 
	mvbË
;

432 
	miáabËCouÁ
;

433 
IÁ”çûEÁry
* 
	miáabË
;

440 
	mifviPoŞCouÁ
;

441 * 
	mifviPoŞ
;

444 
	msf›ldCouÁ
;

445 
SticF›ld
* 
	msf›lds
;

458 
	mif›ldCouÁ
;

459 
	mif›ldRefCouÁ
;

460 
In¡F›ld
* 
	mif›lds
;

463 
u4
 
	m»fOff£ts
;

466 cÚ¡ * 
	msourûFe
;

480 
	sM‘hod
 {

482 
CÏssObjeù
* 
	mşazz
;

485 
u4
 
	macûssFÏgs
;

494 
u2
 
	mm‘hodIndex
;

502 
u2
 
	m»gi¡”sSize
;

503 
u2
 
	moutsSize
;

504 
u2
 
	mšsSize
;

507 cÚ¡ * 
	mÇme
;

517 
DexPrÙo
 
	m´ÙÙy³
;

520 cÚ¡ * 
	mshÜty
;

529 cÚ¡ 
u2
* 
	mš¢s
;

532 
	mjniArgInfo
;

541 
D®vikBridgeFunc
 
	mÇtiveFunc
;

548 cÚ¡ 
Regi¡”M­
* 
	m»gi¡”M­
;

550 #ifdeà
WITH_PROFILER


551 
boŞ
 
	mšProfe
;

553 #ifdeà
WITH_DEBUGGER


554 
	mdebugB»akpoštCouÁ
;

563 
	sF›ld
 {

564 
CÏssObjeù
* 
	mşazz
;

565 cÚ¡ * 
	mÇme
;

566 cÚ¡ * 
	msigÇtu»
;

567 
u4
 
	macûssFÏgs
;

568 #ifdeà
PROFILE_FIELD_ACCESS


569 
u4
 
	mg‘s
;

570 
u4
 
	mputs
;

577 
	sSticF›ld
 {

578 
F›ld
 
	mf›ld
;

579 
JV®ue
 
	mv®ue
;

580 #ifdeà
WITH_TAINT_TRACKING


581 
Tašt
 
	mšt
;

588 
	sIn¡F›ld
 {

589 
F›ld
 
	mf›ld
;

597 
	mby‹Off£t
;

604 
M‘hod
* 
dvmFšdDœeùM‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

605 cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
);

606 
M‘hod
* 
dvmFšdVœtu®M‘hodByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

607 cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
);

608 
M‘hod
* 
dvmFšdVœtu®M‘hodByName
(cÚ¡ 
CÏssObjeù
* 
şazz
,

609 cÚ¡ * 
m‘hodName
);

610 
M‘hod
* 
dvmFšdDœeùM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

611 cÚ¡ 
DexPrÙo
* 
´Ùo
);

612 
M‘hod
* 
dvmFšdVœtu®M‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

613 cÚ¡ 
DexPrÙo
* 
´Ùo
);

619 
M‘hod
* 
dvmFšdDœeùM‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

620 cÚ¡ * 
m‘hodName
, cÚ¡ * 
desütÜ
);

621 
M‘hod
* 
dvmFšdVœtu®M‘hodH›rByDesütÜ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

622 cÚ¡ * 
m‘hodName
, cÚ¡ * 
sigÇtu»
);

623 
M‘hod
* 
dvmFšdDœeùM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

624 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
);

625 
M‘hod
* 
dvmFšdVœtu®M‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

626 cÚ¡ * 
m‘hodName
, cÚ¡ 
DexPrÙo
* 
´Ùo
);

627 
M‘hod
* 
dvmFšdM‘hodH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
m‘hodName
,

628 cÚ¡ 
DexPrÙo
* 
´Ùo
);

635 cÚ¡ 
M‘hod
* 
dvmG‘Vœtu®izedM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
,

636 cÚ¡ 
M‘hod
* 
m‘h
);

641 cÚ¡ * 
dvmG‘M‘hodSourûFe
(cÚ¡ 
M‘hod
* 
m‘h
);

646 
In¡F›ld
* 
dvmFšdIn¡ªûF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

647 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

648 
SticF›ld
* 
dvmFšdSticF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
,

649 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

654 
In¡F›ld
* 
dvmFšdIn¡ªûF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

655 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

656 
SticF›ld
* 
dvmFšdSticF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
,

657 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
);

658 
F›ld
* 
dvmFšdF›ldH›r
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ * 
f›ldName
,

659 cÚ¡ * 
sigÇtu»
);

667 
INLINE
 
	$dvmFšdF›ldOff£t
(cÚ¡ 
CÏssObjeù
* 
şazz
,

668 cÚ¡ * 
f›ldName
, cÚ¡ * 
sigÇtu»
)

670 
In¡F›ld
* 
pF›ld
 = 
	`dvmFšdIn¡ªûF›ld
(
şazz
, 
f›ldName
, 
sigÇtu»
);

671 ià(
pF›ld
 =ğ
NULL
)

674  
pF›ld
->
by‹Off£t
;

675 
	}
}

686 
	#BYTE_OFFSET
(
_±r
, 
_off£t
è((*è(((
u1
*)(_±r)è+ (_off£t)))

	)

688 
INLINE
 
JV®ue
* 
	$dvmF›ldPŒ
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

689  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
));

690 
	}
}

692 
INLINE
 
boŞ
 
	$dvmG‘F›ldBoŞ—n
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

693  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
z
;

694 
	}
}

695 
INLINE
 
s1
 
	$dvmG‘F›ldBy‹
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

696  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
b
;

697 
	}
}

698 
INLINE
 
s2
 
	$dvmG‘F›ldShÜt
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

699  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
s
;

700 
	}
}

701 
INLINE
 
u2
 
	$dvmG‘F›ldCh¬
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

702  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
c
;

703 
	}
}

704 
INLINE
 
s4
 
	$dvmG‘F›ldIÁ
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

705  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
;

706 
	}
}

707 
INLINE
 
s8
 
	$dvmG‘F›ldLÚg
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

708  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
j
;

709 
	}
}

710 
INLINE
 
	$dvmG‘F›ldFlßt
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

711  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
f
;

712 
	}
}

713 
INLINE
 
	$dvmG‘F›ldDoubË
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

714  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
d
;

715 
	}
}

716 
INLINE
 
Objeù
* 
	$dvmG‘F›ldObjeù
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

717  ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
l
;

718 
	}
}

720 #ifdeà
WITH_TAINT_TRACKING


721 
INLINE
 
u4
 
	$dvmG‘F›ldTašt
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

722  (*(
u4
*)
	`BYTE_OFFSET
(
obj
, 
off£t
+(u4)));

723 
	}
}

724 
INLINE
 
u4
 
	$dvmG‘F›ldTaštWide
(cÚ¡ 
Objeù
* 
obj
, 
off£t
) {

725  (*(
u4
*)
	`BYTE_OFFSET
(
obj
, 
off£t
+(u4)+(u4)));

726 
	}
}

727 
	#dvmG‘F›ldTaštBoŞ—n
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

728 
	#dvmG‘F›ldTaštBy‹
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

729 
	#dvmG‘F›ldTaštShÜt
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

730 
	#dvmG‘F›ldTaštCh¬
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

731 
	#dvmG‘F›ldTaštIÁ
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

732 
	#dvmG‘F›ldTaštLÚg
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTaštWide
(_obj, _off£t)

	)

733 
	#dvmG‘F›ldTaštFlßt
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

734 
	#dvmG‘F›ldTaštDoubË
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTaštWide
(_obj, _off£t)

	)

735 
	#dvmG‘F›ldTaštObjeù
(
_obj
, 
_off£t
è
	`dvmG‘F›ldTašt
(_obj, _off£t)

	)

737 
	#dvmG‘F›ldTašt
(
_obj
, 
_off£t
è(()0)

	)

738 
	#dvmG‘F›ldTaštWide
(
_obj
, 
_off£t
è(()0)

	)

739 
	#dvmG‘F›ldTaštBoŞ—n
(
_obj
, 
_off£t
è(()0)

	)

740 
	#dvmG‘F›ldTaštBy‹
(
_obj
, 
_off£t
è(()0)

	)

741 
	#dvmG‘F›ldTaštShÜt
(
_obj
, 
_off£t
è(()0)

	)

742 
	#dvmG‘F›ldTaštCh¬
(
_obj
, 
_off£t
è(()0)

	)

743 
	#dvmG‘F›ldTaštIÁ
(
_obj
, 
_off£t
è(()0)

	)

744 
	#dvmG‘F›ldTaštLÚg
(
_obj
, 
_off£t
è(()0)

	)

745 
	#dvmG‘F›ldTaštFlßt
(
_obj
, 
_off£t
è(()0)

	)

746 
	#dvmG‘F›ldTaštDoubË
(
_obj
, 
_off£t
è(()0)

	)

747 
	#dvmG‘F›ldTaštObjeù
(
_obj
, 
_off£t
è(()0)

	)

750 
INLINE
 
	$dvmS‘F›ldBoŞ—n
(
Objeù
* 
obj
, 
off£t
, 
boŞ
 
v®
) {

751 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

752 
	}
}

753 
INLINE
 
	$dvmS‘F›ldBy‹
(
Objeù
* 
obj
, 
off£t
, 
s1
 
v®
) {

754 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

755 
	}
}

756 
INLINE
 
	$dvmS‘F›ldShÜt
(
Objeù
* 
obj
, 
off£t
, 
s2
 
v®
) {

757 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

758 
	}
}

759 
INLINE
 
	$dvmS‘F›ldCh¬
(
Objeù
* 
obj
, 
off£t
, 
u2
 
v®
) {

760 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

761 
	}
}

762 
INLINE
 
	$dvmS‘F›ldIÁ
(
Objeù
* 
obj
, 
off£t
, 
s4
 
v®
) {

763 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
i
 = 
v®
;

764 
	}
}

765 
INLINE
 
	$dvmS‘F›ldLÚg
(
Objeù
* 
obj
, 
off£t
, 
s8
 
v®
) {

766 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
j
 = 
v®
;

767 
	}
}

768 
INLINE
 
	$dvmS‘F›ldFlßt
(
Objeù
* 
obj
, 
off£t
, 
v®
) {

769 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
f
 = 
v®
;

770 
	}
}

771 
INLINE
 
	$dvmS‘F›ldDoubË
(
Objeù
* 
obj
, 
off£t
, 
v®
) {

772 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
d
 = 
v®
;

773 
	}
}

774 
INLINE
 
	$dvmS‘F›ldObjeù
(
Objeù
* 
obj
, 
off£t
, Objeù* 
v®
) {

775 ((
JV®ue
*)
	`BYTE_OFFSET
(
obj
, 
off£t
))->
l
 = 
v®
;

776 
	}
}

778 #ifdeà
WITH_TAINT_TRACKING


779 
INLINE
 
	$dvmS‘F›ldTašt
(
Objeù
* 
obj
, 
off£t
, 
u4
 
g
) {

780 (*(
u4
*)
	`BYTE_OFFSET
(
obj
, 
off£t
+(u4))èğ
g
;

781 
	}
}

782 
INLINE
 
	$dvmS‘F›ldTaštWide
(
Objeù
* 
obj
, 
off£t
, 
u4
 
g
) {

783 (*(
u4
*)
	`BYTE_OFFSET
(
obj
, 
off£t
+(u4)+(u4))èğ
g
;

784 
	}
}

785 
	#dvmS‘F›ldTaštBoŞ—n
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

786 
	#dvmS‘F›ldTaštBy‹
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

787 
	#dvmS‘F›ldTaštShÜt
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

788 
	#dvmS‘F›ldTaštCh¬
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

789 
	#dvmS‘F›ldTaštIÁ
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

790 
	#dvmS‘F›ldTaštLÚg
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTaštWide
(_obj, _off£t, _g)

	)

791 
	#dvmS‘F›ldTaštFlßt
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

792 
	#dvmS‘F›ldTaštDoubË
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTaštWide
(_obj, _off£t, _g)

	)

793 
	#dvmS‘F›ldTaštObjeù
(
_obj
, 
_off£t
, 
_g
è
	`dvmS‘F›ldTašt
(_obj, _off£t, _g)

	)

795 
	#dvmS‘F›ldTašt
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

796 
	#dvmS‘F›ldTaštWide
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

797 
	#dvmS‘F›ldTaštBoŞ—n
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

798 
	#dvmS‘F›ldTaštBy‹
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

799 
	#dvmS‘F›ldTaštShÜt
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

800 
	#dvmS‘F›ldTaštCh¬
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

801 
	#dvmS‘F›ldTaštIÁ
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

802 
	#dvmS‘F›ldTaštLÚg
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

803 
	#dvmS‘F›ldTaštFlßt
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

804 
	#dvmS‘F›ldTaštDoubË
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

805 
	#dvmS‘F›ldTaštObjeù
(
_obj
, 
_off£t
, 
_g
è(()0)

	)

811 
INLINE
 
JV®ue
* 
	$dvmSticF›ldPŒ
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

812  (
JV®ue
*)&
sf›ld
->
v®ue
;

813 
	}
}

815 
INLINE
 
boŞ
 
	$dvmG‘SticF›ldBoŞ—n
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

816  
sf›ld
->
v®ue
.
z
;

817 
	}
}

818 
INLINE
 
s1
 
	$dvmG‘SticF›ldBy‹
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

819  
sf›ld
->
v®ue
.
b
;

820 
	}
}

821 
INLINE
 
s2
 
	$dvmG‘SticF›ldShÜt
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

822  
sf›ld
->
v®ue
.
s
;

823 
	}
}

824 
INLINE
 
u2
 
	$dvmG‘SticF›ldCh¬
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

825  
sf›ld
->
v®ue
.
c
;

826 
	}
}

827 
INLINE
 
s4
 
	$dvmG‘SticF›ldIÁ
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

828  
sf›ld
->
v®ue
.
i
;

829 
	}
}

830 
INLINE
 
s8
 
	$dvmG‘SticF›ldLÚg
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

831  
sf›ld
->
v®ue
.
j
;

832 
	}
}

833 
INLINE
 
	$dvmG‘SticF›ldFlßt
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

834  
sf›ld
->
v®ue
.
f
;

835 
	}
}

836 
INLINE
 
	$dvmG‘SticF›ldDoubË
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

837  
sf›ld
->
v®ue
.
d
;

838 
	}
}

839 
INLINE
 
Objeù
* 
	$dvmG‘SticF›ldObjeù
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

840  
sf›ld
->
v®ue
.
l
;

841 
	}
}

843 #ifdeà
WITH_TAINT_TRACKING


844 
INLINE
 
u4
 
	$dvmG‘SticF›ldTašt
(cÚ¡ 
SticF›ld
* 
sf›ld
) {

845  
sf›ld
->
št
.
g
;

846 
	}
}

847 
	#dvmG‘SticF›ldTaštBoŞ—n
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

848 
	#dvmG‘SticF›ldTaštBy‹
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

849 
	#dvmG‘SticF›ldTaštShÜt
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

850 
	#dvmG‘SticF›ldTaštCh¬
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

851 
	#dvmG‘SticF›ldTaštIÁ
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

852 
	#dvmG‘SticF›ldTaštLÚg
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

853 
	#dvmG‘SticF›ldTaštFlßt
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

854 
	#dvmG‘SticF›ldTaštDoubË
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

855 
	#dvmG‘SticF›ldTaštObjeù
(
_sf›ld
è
	`dvmG‘SticF›ldTašt
(_sf›ld)

	)

857 
	#dvmG‘SticF›ldTašt
(
_sf›ld
è(()0)

	)

858 
	#dvmG‘SticF›ldTaštBoŞ—n
(
_sf›ld
è(()0)

	)

859 
	#dvmG‘SticF›ldTaštBy‹
(
_sf›ld
è(()0)

	)

860 
	#dvmG‘SticF›ldTaštShÜt
(
_sf›ld
è(()0)

	)

861 
	#dvmG‘SticF›ldTaštCh¬
(
_sf›ld
è(()0)

	)

862 
	#dvmG‘SticF›ldTaštIÁ
(
_sf›ld
è(()0)

	)

863 
	#dvmG‘SticF›ldTaštLÚg
(
_sf›ld
è(()0)

	)

864 
	#dvmG‘SticF›ldTaštFlßt
(
_sf›ld
è(()0)

	)

865 
	#dvmG‘SticF›ldTaštDoubË
(
_sf›ld
è(()0)

	)

866 
	#dvmG‘SticF›ldTaštObjeù
(
_sf›ld
è(()0)

	)

869 
INLINE
 
	$dvmS‘SticF›ldBoŞ—n
(
SticF›ld
* 
sf›ld
, 
boŞ
 
v®
) {

870 
sf›ld
->
v®ue
.
i
 = 
v®
;

871 
	}
}

872 
INLINE
 
	$dvmS‘SticF›ldBy‹
(
SticF›ld
* 
sf›ld
, 
s1
 
v®
) {

873 
sf›ld
->
v®ue
.
i
 = 
v®
;

874 
	}
}

875 
INLINE
 
	$dvmS‘SticF›ldShÜt
(
SticF›ld
* 
sf›ld
, 
s2
 
v®
) {

876 
sf›ld
->
v®ue
.
i
 = 
v®
;

877 
	}
}

878 
INLINE
 
	$dvmS‘SticF›ldCh¬
(
SticF›ld
* 
sf›ld
, 
u2
 
v®
) {

879 
sf›ld
->
v®ue
.
i
 = 
v®
;

880 
	}
}

881 
INLINE
 
	$dvmS‘SticF›ldIÁ
(
SticF›ld
* 
sf›ld
, 
s4
 
v®
) {

882 
sf›ld
->
v®ue
.
i
 = 
v®
;

883 
	}
}

884 
INLINE
 
	$dvmS‘SticF›ldLÚg
(
SticF›ld
* 
sf›ld
, 
s8
 
v®
) {

885 
sf›ld
->
v®ue
.
j
 = 
v®
;

886 
	}
}

887 
INLINE
 
	$dvmS‘SticF›ldFlßt
(
SticF›ld
* 
sf›ld
, 
v®
) {

888 
sf›ld
->
v®ue
.
f
 = 
v®
;

889 
	}
}

890 
INLINE
 
	$dvmS‘SticF›ldDoubË
(
SticF›ld
* 
sf›ld
, 
v®
) {

891 
sf›ld
->
v®ue
.
d
 = 
v®
;

892 
	}
}

893 
INLINE
 
	$dvmS‘SticF›ldObjeù
(
SticF›ld
* 
sf›ld
, 
Objeù
* 
v®
) {

894 
sf›ld
->
v®ue
.
l
 = 
v®
;

895 
	}
}

897 #ifdeà
WITH_TAINT_TRACKING


898 
INLINE
 
	$dvmS‘SticF›ldTašt
(
SticF›ld
* 
sf›ld
, 
u4
 
g
) {

899 
sf›ld
->
št
.
g
 =ag;

900 
	}
}

901 
	#dvmS‘SticF›ldTaštBoŞ—n
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

902 
	#dvmS‘SticF›ldTaštBy‹
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

903 
	#dvmS‘SticF›ldTaštShÜt
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

904 
	#dvmS‘SticF›ldTaštCh¬
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

905 
	#dvmS‘SticF›ldTaštIÁ
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

906 
	#dvmS‘SticF›ldTaštLÚg
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

907 
	#dvmS‘SticF›ldTaštFlßt
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

908 
	#dvmS‘SticF›ldTaštDoubË
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

909 
	#dvmS‘SticF›ldTaštObjeù
(
_sf›ld
, 
_g
è
	`dvmS‘SticF›ldTašt
(_sf›ld, _g)

	)

911 
	#dvmS‘SticF›ldTašt
(
_sf›ld
, 
_g
è(()0)

	)

912 
	#dvmS‘SticF›ldTaštBoŞ—n
(
_sf›ld
, 
_g
è(()0)

	)

913 
	#dvmS‘SticF›ldTaštBy‹
(
_sf›ld
, 
_g
è(()0)

	)

914 
	#dvmS‘SticF›ldTaštShÜt
(
_sf›ld
, 
_g
è(()0)

	)

915 
	#dvmS‘SticF›ldTaštCh¬
(
_sf›ld
, 
_g
è(()0)

	)

916 
	#dvmS‘SticF›ldTaštIÁ
(
_sf›ld
, 
_g
è(()0)

	)

917 
	#dvmS‘SticF›ldTaštLÚg
(
_sf›ld
, 
_g
è(()0)

	)

918 
	#dvmS‘SticF›ldTaštFlßt
(
_sf›ld
, 
_g
è(()0)

	)

919 
	#dvmS‘SticF›ldTaštDoubË
(
_sf›ld
, 
_g
è(()0)

	)

920 
	#dvmS‘SticF›ldTaštObjeù
(
_sf›ld
, 
_g
è(()0)

	)

926 
INLINE
 
boŞ
 
	$dvmIsPublicM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

927  (
m‘hod
->
acûssFÏgs
 & 
ACC_PUBLIC
) != 0;

928 
	}
}

929 
INLINE
 
boŞ
 
	$dvmIsPriv©eM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

930  (
m‘hod
->
acûssFÏgs
 & 
ACC_PRIVATE
) != 0;

931 
	}
}

932 
INLINE
 
boŞ
 
	$dvmIsSticM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

933  (
m‘hod
->
acûssFÏgs
 & 
ACC_STATIC
) != 0;

934 
	}
}

935 
INLINE
 
boŞ
 
	$dvmIsSynchrÚizedM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

936  (
m‘hod
->
acûssFÏgs
 & 
ACC_SYNCHRONIZED
) != 0;

937 
	}
}

938 
INLINE
 
boŞ
 
	$dvmIsDeş¬edSynchrÚizedM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

939  (
m‘hod
->
acûssFÏgs
 & 
ACC_DECLARED_SYNCHRONIZED
) != 0;

940 
	}
}

941 
INLINE
 
boŞ
 
	$dvmIsFš®M‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

942  (
m‘hod
->
acûssFÏgs
 & 
ACC_FINAL
) != 0;

943 
	}
}

944 
INLINE
 
boŞ
 
	$dvmIsN©iveM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

945  (
m‘hod
->
acûssFÏgs
 & 
ACC_NATIVE
) != 0;

946 
	}
}

947 
INLINE
 
boŞ
 
	$dvmIsAb¡¿ùM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

948  (
m‘hod
->
acûssFÏgs
 & 
ACC_ABSTRACT
) != 0;

949 
	}
}

950 
INLINE
 
boŞ
 
	$dvmIsMœªdaM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

951  (
m‘hod
->
acûssFÏgs
 & 
ACC_MIRANDA
) != 0;

952 
	}
}

953 
INLINE
 
boŞ
 
	$dvmIsCÚ¡ruùÜM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

954  *
m‘hod
->
Çme
 == '<';

955 
	}
}

957 
INLINE
 
boŞ
 
	$dvmIsDœeùM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

958  
	`dvmIsPriv©eM‘hod
(
m‘hod
) ||

959 
	`dvmIsSticM‘hod
(
m‘hod
) ||

960 
	`dvmIsCÚ¡ruùÜM‘hod
(
m‘hod
);

961 
	}
}

964 
INLINE
 
boŞ
 
	$dvmIsBy‹codeM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
) {

965  (
m‘hod
->
acûssFÏgs
 & (
ACC_NATIVE
 | 
ACC_ABSTRACT
)) == 0;

966 
	}
}

968 
INLINE
 
boŞ
 
	$dvmIsPrÙeùedF›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

969  (
f›ld
->
acûssFÏgs
 & 
ACC_PROTECTED
) != 0;

970 
	}
}

971 
INLINE
 
boŞ
 
	$dvmIsSticF›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

972  (
f›ld
->
acûssFÏgs
 & 
ACC_STATIC
) != 0;

973 
	}
}

974 
INLINE
 
boŞ
 
	$dvmIsFš®F›ld
(cÚ¡ 
F›ld
* 
f›ld
) {

975  (
f›ld
->
acûssFÏgs
 & 
ACC_FINAL
) != 0;

976 
	}
}

978 
INLINE
 
boŞ
 
	$dvmIsIÁ”çûCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

979  (
şazz
->
acûssFÏgs
 & 
ACC_INTERFACE
) != 0;

980 
	}
}

981 
INLINE
 
boŞ
 
	$dvmIsPublicCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

982  (
şazz
->
acûssFÏgs
 & 
ACC_PUBLIC
) != 0;

983 
	}
}

984 
INLINE
 
boŞ
 
	$dvmIsFš®CÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

985  (
şazz
->
acûssFÏgs
 & 
ACC_FINAL
) != 0;

986 
	}
}

987 
INLINE
 
boŞ
 
	$dvmIsAb¡¿ùCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

988  (
şazz
->
acûssFÏgs
 & 
ACC_ABSTRACT
) != 0;

989 
	}
}

990 
INLINE
 
boŞ
 
	$dvmIsAÂÙ©iÚCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

991  (
şazz
->
acûssFÏgs
 & 
ACC_ANNOTATION
) != 0;

992 
	}
}

993 
INLINE
 
boŞ
 
	$dvmIsPrim™iveCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

994  
şazz
->
´im™iveTy³
 !ğ
PRIM_NOT
;

995 
	}
}

998 
INLINE
 
boŞ
 
	$dvmIsCÏssLšked
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

999  
şazz
->
¡©us
 >ğ
CLASS_RESOLVED
;

1000 
	}
}

1002 
INLINE
 
boŞ
 
	$dvmIsCÏssV”if›d
(cÚ¡ 
CÏssObjeù
* 
şazz
) {

1003  
şazz
->
¡©us
 >ğ
CLASS_VERIFIED
;

1004 
	}
}

1010 
INLINE
 cÚ¡ 
DexCode
* 
	$dvmG‘M‘hodCode
(cÚ¡ 
M‘hod
* 
m‘h
) {

1011 ià(
	`dvmIsBy‹codeM‘hod
(
m‘h
)) {

1017  (cÚ¡ 
DexCode
*)

1018 (((cÚ¡ 
u1
*è
m‘h
->
š¢s
è- 
	`off£tof
(
DexCode
, insns));

1020  
NULL
;

1022 
	}
}

1028 
INLINE
 
u4
 
	$dvmG‘M‘hodIn¢sSize
(cÚ¡ 
M‘hod
* 
m‘h
) {

1029 cÚ¡ 
DexCode
* 
pCode
 = 
	`dvmG‘M‘hodCode
(
m‘h
);

1030  (
pCode
 =ğ
NULL
è? 0 :…Code->
š¢sSize
;

1031 
	}
}

1034 
dvmDumpObjeù
(cÚ¡ 
Objeù
* 
obj
);

	@oo/Resolve.c

29 
	~"D®vik.h
"

31 
	~<¡dlib.h
>

62 
CÏssObjeù
* 
	$dvmResŞveCÏss
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
şassIdx
,

63 
boŞ
 
äomUnv”if›dCÚ¡ªt
)

65 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

66 
CÏssObjeù
* 
»sCÏss
;

67 cÚ¡ * 
şassName
;

73 
»sCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
);

74 ià(
»sCÏss
 !ğ
NULL
)

75  
»sCÏss
;

77 
	`LOGVV
("---„esolving class %u (referrer=%s cl=%p)\n",

78 
şassIdx
, 
»ã¼”
->
desütÜ
,„eã¼”->
şassLßd”
);

89 
şassName
 = 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
);

90 ià(
şassName
[0] != '\0' && className[1] == '\0') {

92 
»sCÏss
 = 
	`dvmFšdPrim™iveCÏss
(
şassName
[0]);

94 
»sCÏss
 = 
	`dvmFšdCÏssNoIn™
(
şassName
, 
»ã¼”
->
şassLßd”
);

97 ià(
»sCÏss
 !ğ
NULL
) {

117 ià(!
äomUnv”if›dCÚ¡ªt
 &&

118 
	`IS_CLASS_FLAG_SET
(
»ã¼”
, 
CLASS_ISPREVERIFIED
))

120 
CÏssObjeù
* 
»sCÏssCheck
 = 
»sCÏss
;

121 ià(
	`dvmIsA¼ayCÏss
(
»sCÏssCheck
))

122 
»sCÏssCheck
 =„esCÏssCheck->
–em’tCÏss
;

124 ià(
»ã¼”
->
pDvmDex
 !ğ
»sCÏssCheck
->pDvmDex &&

125 
»sCÏssCheck
->
şassLßd”
 !ğ
NULL
)

127 
	`LOGW
("Class„esolved by unexpected DEX:"

129 
»ã¼”
->
desütÜ
,„eã¼”->
şassLßd”
,

130 
»ã¼”
->
pDvmDex
,

131 
»sCÏss
->
desütÜ
, 
»sCÏssCheck
->descriptor,

132 
»sCÏssCheck
->
şassLßd”
,„esCÏssCheck->
pDvmDex
);

133 
	`LOGW
("(%s had used‡ different %s during…re-verification)\n",

134 
»ã¼”
->
desütÜ
, 
»sCÏss
->descriptor);

135 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalAccessError;",

138  
NULL
;

142 
	`LOGVV
("##### +ResolveClass(%s):„eferrer=%s dex=%p†dr=%p„ef=%d\n",

143 
»sCÏss
->
desütÜ
, 
»ã¼”
->desütÜ,„eã¼”->
pDvmDex
,

144 
»ã¼”
->
şassLßd”
, 
şassIdx
);

153 
	`dvmDexS‘ResŞvedCÏss
(
pDvmDex
, 
şassIdx
, 
»sCÏss
);

156 
	`LOGVV
("Class‚ot found: %s\n",

157 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
şassIdx
));

158 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

161  
»sCÏss
;

162 
	}
}

175 
M‘hod
* 
	$dvmResŞveM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

176 
M‘hodTy³
 
m‘hodTy³
)

178 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

179 
CÏssObjeù
* 
»sCÏss
;

180 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

181 
M‘hod
* 
»sM‘hod
;

183 
	`as£¹
(
m‘hodTy³
 !ğ
METHOD_INTERFACE
);

185 
	`LOGVV
("---„esŞvšg m‘hod %u (»ã¼”=%s)\n", 
m‘hodIdx
,

186 
»ã¼”
->
desütÜ
);

187 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

189 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
çl£
);

190 ià(
»sCÏss
 =ğ
NULL
) {

192 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

193  
NULL
;

195 ià(
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

197 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

199 
»sCÏss
->
desütÜ
);

200  
NULL
;

203 cÚ¡ * 
Çme
 = 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

204 
DexPrÙo
 
´Ùo
;

205 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

213 ià(
m‘hodTy³
 =ğ
METHOD_DIRECT
) {

214 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hod
(
»sCÏss
, 
Çme
, &
´Ùo
);

215 } ià(
m‘hodTy³
 =ğ
METHOD_STATIC
) {

216 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hodH›r
(
»sCÏss
, 
Çme
, &
´Ùo
);

218 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hodH›r
(
»sCÏss
, 
Çme
, &
´Ùo
);

221 ià(
»sM‘hod
 =ğ
NULL
) {

222 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
Çme
);

223  
NULL
;

226 
	`LOGVV
("--- found method %d (%s.%s)\n",

227 
m‘hodIdx
, 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

230 ià(
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
è&& !
	`dvmIsAb¡¿ùCÏss
(
»sCÏss
)) {

231 
	`dvmThrowExû±iÚ
("Ljava/Ïng/Ab¡¿ùM‘hodE¼Ü;", 
Çme
);

232  
NULL
;

239 ià(
m‘hodTy³
 =ğ
METHOD_STATIC
) {

240 ià(!
	`dvmIsCÏssIn™Ÿlized
(
»sM‘hod
->
şazz
) &&

241 !
	`dvmIn™CÏss
(
»sM‘hod
->
şazz
))

243 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

244  
NULL
;

246 
	`as£¹
(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

254 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
»sM‘hod
->
şazz
) ||

255 
	`dvmIsCÏssIn™Ÿlizšg
(
»sM‘hod
->
şazz
));

262 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

264  
»sM‘hod
;

265 
	}
}

272 
M‘hod
* 
	$dvmResŞveIÁ”çûM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
)

274 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

275 
CÏssObjeù
* 
»sCÏss
;

276 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

277 
M‘hod
* 
»sM‘hod
;

278 
i
;

280 
	`LOGVV
("---„esolving interface method %d (referrer=%s)\n",

281 
m‘hodIdx
, 
»ã¼”
->
desütÜ
);

282 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDvmDex
->
pDexFe
, 
m‘hodIdx
);

284 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
çl£
);

285 ià(
»sCÏss
 =ğ
NULL
) {

287 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

288  
NULL
;

290 ià(!
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

292 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

294 
»sCÏss
->
desütÜ
);

295  
NULL
;

321 cÚ¡ * 
m‘hodName
 =

322 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

324 
DexPrÙo
 
´Ùo
;

325 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDvmDex
->
pDexFe
, 
pM‘hodId
);

327 
	`LOGVV
("+++†ooking for '%s' '%s' in„esClass='%s'\n",

328 
m‘hodName
, 
m‘hodSig
, 
»sCÏss
->
desütÜ
);

329 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hod
(
»sCÏss
, 
m‘hodName
, &
´Ùo
);

330 ià(
»sM‘hod
 =ğ
NULL
) {

331 
	`LOGVV
("+++ did‚ot„esolve immediately\n");

332 
i
 = 0; i < 
»sCÏss
->
iáabËCouÁ
; i++) {

333 
»sM‘hod
 = 
	`dvmFšdVœtu®M‘hod
(
»sCÏss
->
iáabË
[
i
].
şazz
,

334 
m‘hodName
, &
´Ùo
);

335 ià(
»sM‘hod
 !ğ
NULL
)

339 ià(
»sM‘hod
 =ğ
NULL
) {

340 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodE¼Ü;", 
m‘hodName
);

341  
NULL
;

344 
	`LOGVV
("+++„esŞved immedŸ‹ly: % (% %d)\n", 
»sM‘hod
->
Çme
,

345 
»sM‘hod
->
şazz
->
desütÜ
, (
u4
è»sM‘hod->
m‘hodIndex
);

348 
	`LOGVV
("--- found interface method %d (%s.%s)\n",

349 
m‘hodIdx
, 
»sCÏss
->
desütÜ
, 
»sM‘hod
->
Çme
);

352 
	`as£¹
(
	`dvmIsAb¡¿ùM‘hod
(
»sM‘hod
));

372 
	`dvmDexS‘ResŞvedM‘hod
(
pDvmDex
, 
m‘hodIdx
, 
»sM‘hod
);

374  
»sM‘hod
;

375 
	}
}

383 
In¡F›ld
* 
	$dvmResŞveIn¡F›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
)

385 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

386 
CÏssObjeù
* 
»sCÏss
;

387 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

388 
In¡F›ld
* 
»sF›ld
;

390 
	`LOGVV
("---„esolving field %u (referrer=%s cl=%p)\n",

391 
if›ldIdx
, 
»ã¼”
->
desütÜ
,„eã¼”->
şassLßd”
);

393 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
if›ldIdx
);

398 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
çl£
);

399 ià(
»sCÏss
 =ğ
NULL
) {

400 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

401  
NULL
;

404 
»sF›ld
 = 
	`dvmFšdIn¡ªûF›ldH›r
(
»sCÏss
,

405 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

406 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

407 ià(
»sF›ld
 =ğ
NULL
) {

408 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchFieldError;",

409 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

410  
NULL
;

418 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
»sF›ld
->
f›ld
.
şazz
) ||

419 
	`dvmIsCÏssIn™Ÿlizšg
(
»sF›ld
->
f›ld
.
şazz
));

425 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
if›ldIdx
, (
F›ld
*)
»sF›ld
);

426 
	`LOGVV
(" field %u is %s.%s\n",

427 
if›ldIdx
, 
»sF›ld
->
f›ld
.
şazz
->
desütÜ
,„esF›ld->f›ld.
Çme
);

429  
»sF›ld
;

430 
	}
}

439 
SticF›ld
* 
	$dvmResŞveSticF›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
)

441 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

442 
CÏssObjeù
* 
»sCÏss
;

443 cÚ¡ 
DexF›ldId
* 
pF›ldId
;

444 
SticF›ld
* 
»sF›ld
;

446 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDvmDex
->
pDexFe
, 
sf›ldIdx
);

451 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pF›ldId
->
şassIdx
, 
çl£
);

452 ià(
»sCÏss
 =ğ
NULL
) {

453 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

454  
NULL
;

457 
»sF›ld
 = 
	`dvmFšdSticF›ldH›r
(
»sCÏss
,

458 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
),

459 
	`dexSŒšgByTy³Idx
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ty³Idx
));

460 ià(
»sF›ld
 =ğ
NULL
) {

461 
	`dvmThrowExû±iÚ
("Ljava/lang/NoSuchFieldError;",

462 
	`dexSŒšgById
(
pDvmDex
->
pDexFe
, 
pF›ldId
->
ÇmeIdx
));

463  
NULL
;

471 ià(!
	`dvmIsCÏssIn™Ÿlized
(
»sF›ld
->
f›ld
.
şazz
) &&

472 !
	`dvmIn™CÏss
(
»sF›ld
->
f›ld
.
şazz
))

474 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

475  
NULL
;

482 
	`dvmDexS‘ResŞvedF›ld
(
pDvmDex
, 
sf›ldIdx
, (
F›ld
*è
»sF›ld
);

484  
»sF›ld
;

485 
	}
}

495 
SŒšgObjeù
* 
	$dvmResŞveSŒšg
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
¡ršgIdx
)

497 
DvmDex
* 
pDvmDex
 = 
»ã¼”
->pDvmDex;

498 
SŒšgObjeù
* 
¡rObj
;

499 
SŒšgObjeù
* 
š‹ºSŒObj
;

500 cÚ¡ * 
utf8
;

501 
u4
 
utf16Size
;

503 
	`LOGVV
("+++„esŞvšg sŒšg,„eã¼” i %s\n", 
»ã¼”
->
desütÜ
);

509 
utf8
 = 
	`dexSŒšgAndSizeById
(
pDvmDex
->
pDexFe
, 
¡ršgIdx
, &
utf16Size
);

510 
¡rObj
 = 
	`dvmC»©eSŒšgFromC¡rAndL’gth
(
utf8
, 
utf16Size
,

511 
ALLOC_DEFAULT
);

512 ià(
¡rObj
 =ğ
NULL
) {

514 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

515 
ba
;

529 
š‹ºSŒObj
 = 
	`dvmLookupImmÜlIÁ”ÃdSŒšg
(
¡rObj
);

530 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
¡rObj
, 
NULL
);

531 
¡rObj
 = 
š‹ºSŒObj
;

532 ià(
¡rObj
 =ğ
NULL
) {

533 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

534 
ba
;

538 
	`dvmDexS‘ResŞvedSŒšg
(
pDvmDex
, 
¡ršgIdx
, 
¡rObj
);

540 
ba
:

541  
¡rObj
;

542 
	}
}

547 cÚ¡ * 
	$dvmM‘hodTy³SŒ
(
M‘hodTy³
 
m‘hodTy³
)

549 
m‘hodTy³
) {

550 
METHOD_DIRECT
:  "direct";

551 
METHOD_STATIC
:  "static";

552 
METHOD_VIRTUAL
:  "virtual";

553 
METHOD_INTERFACE
:  "interface";

554 
METHOD_UNKNOWN
:  "UNKNOWN";

556 
	`as£¹
(
çl£
);

558 
	}
}

	@oo/Resolve.h

19 #iâdeà
_DALVIK_OO_RESOLVE


20 
	#_DALVIK_OO_RESOLVE


	)

30 
	eM‘hodTy³
 {

31 
	mMETHOD_UNKNOWN
 = 0,

32 
	mMETHOD_DIRECT
,

33 
	mMETHOD_STATIC
,

34 
	mMETHOD_VIRTUAL
,

35 
	mMETHOD_INTERFACE


36 } 
	tM‘hodTy³
;

46 
CÏssObjeù
* 
dvmResŞveCÏss
(cÚ¡ CÏssObjeù* 
»ã¼”
, 
u4
 
şassIdx
,

47 
boŞ
 
äomUnv”if›dCÚ¡ªt
);

57 
M‘hod
* 
dvmResŞveM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
,

58 
M‘hodTy³
 
m‘hodTy³
);

65 
M‘hod
* 
dvmResŞveIÁ”çûM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
);

72 
In¡F›ld
* 
dvmResŞveIn¡F›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
if›ldIdx
);

81 
SticF›ld
* 
dvmResŞveSticF›ld
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
sf›ldIdx
);

88 
SŒšgObjeù
* 
dvmResŞveSŒšg
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
¡ršgIdx
);

93 cÚ¡ * 
dvmM‘hodTy³SŒ
(
M‘hodTy³
 
m‘hodTy³
);

	@oo/TypeCheck.c

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

27 
	#BOOL_TO_INT
(
x
è(x)

	)

33 
	#INSTANCEOF_CACHE_SIZE
 1024

	)

39 
boŞ
 
	$dvmIn¡ªûofS¹up
()

41 
gDvm
.
š¡ªûofCache
 = 
	`dvmAÎocAtomicCache
(
INSTANCEOF_CACHE_SIZE
);

42 ià(
gDvm
.
š¡ªûofCache
 =ğ
NULL
)

43  
çl£
;

44  
Œue
;

45 
	}
}

50 
	$dvmIn¡ªûofShutdown
()

52 
	`dvmF»eAtomicCache
(
gDvm
.
š¡ªûofCache
);

53 
	}
}

81 
	$isA¼ayIn¡ªûOfA¼ay
(cÚ¡ 
CÏssObjeù
* 
subEËmCÏss
, 
subDim
,

82 cÚ¡ 
CÏssObjeù
* 
şazz
)

85 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
şazz
));

94 
	`as£¹
(
subDim
 > 0 && 
şazz
->
¬¿yDim
 > 0);

95 ià(
subDim
 =ğ
şazz
->
¬¿yDim
) {

100  
	`dvmIn¡ªûof
(
subEËmCÏss
, 
şazz
->
–em’tCÏss
);

101 } ià(
subDim
 > 
şazz
->
¬¿yDim
) {

108 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
->
–em’tCÏss
)) {

114  
	`dvmIm¶em’ts
(
şazz
, cÏzz->
–em’tCÏss
);

121  (
şazz
->
–em’tCÏss
 =ğşazz->
su³r
);

127  
çl£
;

129 
	}
}

137 
	$isA¼ayIn¡ªûOf
(cÚ¡ 
CÏssObjeù
* 
sub
, cÚ¡ CÏssObjeù* 
şazz
)

139 
	`as£¹
(
	`dvmIsA¼ayCÏss
(
sub
));

148 
	`as£¹
(!
	`dvmIsIÁ”çûCÏss
(
şazz
));

155 ià(!
	`dvmIsA¼ayCÏss
(
şazz
))

156  
	`BOOL_TO_INT
(
şazz
 =ğ
sub
->
su³r
);

161  
	`isA¼ayIn¡ªûOfA¼ay
(
sub
->
–em’tCÏss
, sub->
¬¿yDim
, 
şazz
);

162 
	}
}

170 
	$dvmIm¶em’ts
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ CÏssObjeù* 
š‹rçû
)

172 
i
;

174 
	`as£¹
(
	`dvmIsIÁ”çûCÏss
(
š‹rçû
));

181 
i
 = 0; i < 
şazz
->
iáabËCouÁ
; i++) {

182 ià(
şazz
->
iáabË
[
i
].şazz =ğ
š‹rçû
)

187 
	}
}

197 
boŞ
 
	$dvmCªPutA¼ayEËm’t
(cÚ¡ 
CÏssObjeù
* 
objeùCÏss
,

198 cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
)

200 ià(
	`dvmIsA¼ayCÏss
(
objeùCÏss
)) {

207  
	`isA¼ayIn¡ªûOfA¼ay
(
objeùCÏss
->
–em’tCÏss
,

208 
objeùCÏss
->
¬¿yDim
 + 1, 
¬¿yCÏss
);

216  
	`isA¼ayIn¡ªûOfA¼ay
(
objeùCÏss
, 1, 
¬¿yCÏss
);

218 
	}
}

224 
šlše
 
	$isIn¡ªûof
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

225 cÚ¡ 
CÏssObjeù
* 
şazz
)

227 ià(
	`dvmIsIÁ”çûCÏss
(
şazz
)) {

228  
	`dvmIm¶em’ts
(
š¡ªû
, 
şazz
);

229 } ià(
	`dvmIsA¼ayCÏss
(
š¡ªû
)) {

230  
	`isA¼ayIn¡ªûOf
(
š¡ªû
, 
şazz
);

232  
	`dvmIsSubCÏss
(
š¡ªû
, 
şazz
);

234 
	}
}

241 
	$dvmIn¡ªûofNÚTrivŸl
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

242 cÚ¡ 
CÏssObjeù
* 
şazz
)

244 
	#ATOMIC_CACHE_CALC
 
	`isIn¡ªûof
(
š¡ªû
, 
şazz
)

	)

245  
	`ATOMIC_CACHE_LOOKUP
(
gDvm
.
š¡ªûofCache
,

246 
INSTANCEOF_CACHE_SIZE
, 
š¡ªû
, 
şazz
);

247 #undeà
ATOMIC_CACHE_CALC


248 
	}
}

	@oo/TypeCheck.h

19 #iâdeà
_DALVIK_OO_TYPECHECK


20 
	#_DALVIK_OO_TYPECHECK


	)

23 
boŞ
 
dvmIn¡ªûofS¹up
();

24 
dvmIn¡ªûofShutdown
();

28 
dvmIn¡ªûofNÚTrivŸl
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
,

29 cÚ¡ 
CÏssObjeù
* 
şazz
);

36 
INLINE
 
	$dvmIn¡ªûof
(cÚ¡ 
CÏssObjeù
* 
š¡ªû
, cÚ¡ CÏssObjeù* 
şazz
)

38 ià(
š¡ªû
 =ğ
şazz
) {

39 ià(
CALC_CACHE_STATS
)

40 
gDvm
.
š¡ªûofCache
->
ŒivŸl
++;

43  
	`dvmIn¡ªûofNÚTrivŸl
(
š¡ªû
, 
şazz
);

44 
	}
}

51 
dvmIm¶em’ts
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ CÏssObjeù* 
š‹rçû
);

58 
INLINE
 
	$dvmIsSubCÏss
(cÚ¡ 
CÏssObjeù
* 
sub
, cÚ¡ CÏssObjeù* 
şazz
) {

61 ià(
sub
 =ğ
şazz
)

63 
sub
 = sub->
su³r
;

64 } 
sub
 !ğ
NULL
);

67 
	}
}

75 
boŞ
 
dvmCªPutA¼ayEËm’t
(cÚ¡ 
CÏssObjeù
* 
–emCÏss
,

76 cÚ¡ 
CÏssObjeù
* 
¬¿yCÏss
);

	@reflect/Annotation.c

35 
	~"D®vik.h
"

38 
Objeù
* 
´oûssEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,\

39 cÚ¡ 
u1
** 
pPŒ
);

40 
boŞ
 
skEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
u1
** 
pPŒ
);

45 cÚ¡ * 
	gkDesüAÂÙ©iÚDeçuÉ


47 cÚ¡ * 
	gkDesüEnşosšgCÏss


49 cÚ¡ * 
	gkDesüEnşosšgM‘hod


51 cÚ¡ * 
	gkDesüIÂ”CÏss
 = "Ldalvik/annotation/InnerClass;";

52 cÚ¡ * 
	gkDesüMemb”CÏs£s


54 cÚ¡ * 
	gkDesüSigÇtu»
 = "Ldalvik/annotation/Signature;";

55 cÚ¡ * 
	gkDesüThrows
 = "Ldalvik/annotation/Throws;";

61 
boŞ
 
	$dvmReæeùAÂÙ©iÚS¹up
()

63 
M‘hod
* 
m‘h
;

68 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
 =

69 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/ªnÙ©iÚ/AÂÙ©iÚ;", 
NULL
);

70 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
 =

71 
	`dvmFšdA¼ayCÏss
("[[Ljava/Ïng/ªnÙ©iÚ/AÂÙ©iÚ;", 
NULL
);

72 ià(
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
 =ğ
NULL
 ||

73 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
 =ğ
NULL
)

75 
	`LOGE
("Could‚ot find Annotation-array classes\n");

76  
çl£
;

82 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
 =

83 
	`dvmFšdSy¡emCÏssNoIn™
("Lorg/apache/harmony/lang/annotation/AnnotationFactory;");

84 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
 =

85 
	`dvmFšdSy¡emCÏssNoIn™
("Lorg/apache/harmony/lang/annotation/AnnotationMember;");

86 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
 =

87 
	`dvmFšdA¼ayCÏss
("[LÜg/­ache/h¬mÚy/Ïng/ªnÙ©iÚ/AÂÙ©iÚMemb”;", 
NULL
);

88 ià(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
 =ğ
NULL
 ||

89 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
 =ğ
NULL
 ||

90 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
 =ğ
NULL
)

92 
	`LOGE
("Could‚ot find‡ndroid.lang‡nnotation classes\n");

93  
çl£
;

96 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
,

99 ià(
m‘h
 =ğ
NULL
) {

100 
	`LOGE
("Unableo find createAnnotation() in‡ndroid AnnotationFactory\n");

101  
çl£
;

103 
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy_ü—‹AÂÙ©iÚ
 = 
m‘h
;

105 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
,

108 ià(
m‘h
 =ğ
NULL
) {

109 
	`LOGE
("Unableo find 4-arg constructor in‡ndroid AnnotationMember\n");

110  
çl£
;

113 
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”_š™
 = 
m‘h
;

115  
Œue
;

116 
	}
}

121 
u4
 
	$»adUËb128
(cÚ¡ 
u1
** 
pBuf
)

123 
u4
 
»suÉ
 = 0;

124 
shiá
 = 0;

125 cÚ¡ 
u1
* 
buf
 = *
pBuf
;

126 
u1
 
v®
;

134 
	`as£¹
(
shiá
 < 32);

136 
v®
 = *
buf
++;

137 
»suÉ
 |ğ(
v®
 & 0x7fè<< 
shiá
;

138 
shiá
 += 7;

139 } (
v®
 & 0x80) != 0);

141 *
pBuf
 = 
buf
;

142  
»suÉ
;

143 
	}
}

148 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
	$g‘AÂoDœeùÜy
(
DexFe
* 
pDexFe
,

149 cÚ¡ 
CÏssObjeù
* 
şazz
)

151 cÚ¡ 
DexCÏssDef
* 
pCÏssDef
;

157 
pCÏssDef
 = 
	`dexFšdCÏss
(
pDexFe
, 
şazz
->
desütÜ
);

158 
	`as£¹
(
pCÏssDef
 !ğ
NULL
);

159  
	`dexG‘AÂÙ©iÚsDœeùÜyI‹m
(
pDexFe
, 
pCÏssDef
);

160 
	}
}

170 
A¼ayObjeù
* 
	$em±yAÂoA¼ay
()

172  
	`dvmAÎocA¼ayByCÏss
(

173 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
, 0, 
ALLOC_DEFAULT
);

174 
	}
}

181 
A¼ayObjeù
* 
	$em±yAÂoA¼ayA¼ay
(
numEËm’ts
)

183 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

184 
A¼ayObjeù
* 
¬r
;

185 
i
;

187 
¬r
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
,

188 
numEËm’ts
, 
ALLOC_DEFAULT
);

189 ià(
¬r
 !ğ
NULL
) {

190 
A¼ayObjeù
** 
–ems
 = (A¼ayObjeù**è
¬r
->
cÚ‹Ás
;

191 
i
 = 0; i < 
numEËm’ts
; i++) {

192 
–ems
[
i
] = 
	`em±yAÂoA¼ay
();

193 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
–ems
[
i
], 
£lf
);

197  
¬r
;

198 
	}
}

203 
s4
 
	$»adSigÃdIÁ
(cÚ¡ 
u1
* 
±r
, 
zwidth
)

205 
s4
 
v®
 = 0;

206 
i
;

208 
i
 = 
zwidth
; i >= 0; --i)

209 
v®
 = ((
u4
)v® >> 8è| (((
s4
)*
±r
++) << 24);

210 
v®
 >>ğ(3 - 
zwidth
) * 8;

212  
v®
;

213 
	}
}

219 
u4
 
	$»adUnsigÃdIÁ
(cÚ¡ 
u1
* 
±r
, 
zwidth
, 
boŞ
 
flOnRight
)

221 
u4
 
v®
 = 0;

222 
i
;

224 ià(!
flOnRight
) {

225 
i
 = 
zwidth
; i >= 0; --i)

226 
v®
 = (v® >> 8è| (((
u4
)*
±r
++) << 24);

227 
v®
 >>ğ(3 - 
zwidth
) * 8;

229 
i
 = 
zwidth
; i >= 0; --i)

230 
v®
 = (v® >> 8è| (((
u4
)*
±r
++) << 24);

232  
v®
;

233 
	}
}

238 
s8
 
	$»adSigÃdLÚg
(cÚ¡ 
u1
* 
±r
, 
zwidth
)

240 
s8
 
v®
 = 0;

241 
i
;

243 
i
 = 
zwidth
; i >= 0; --i)

244 
v®
 = ((
u8
)v® >> 8è| (((
s8
)*
±r
++) << 56);

245 
v®
 >>ğ(7 - 
zwidth
) * 8;

247  
v®
;

248 
	}
}

254 
u8
 
	$»adUnsigÃdLÚg
(cÚ¡ 
u1
* 
±r
, 
zwidth
, 
boŞ
 
flOnRight
)

256 
u8
 
v®
 = 0;

257 
i
;

259 ià(!
flOnRight
) {

260 
i
 = 
zwidth
; i >= 0; --i)

261 
v®
 = (v® >> 8è| (((
u8
)*
±r
++) << 56);

262 
v®
 >>ğ(7 - 
zwidth
) * 8;

264 
i
 = 
zwidth
; i >= 0; --i)

265 
v®
 = (v® >> 8è| (((
u8
)*
±r
++) << 56);

267  
v®
;

268 
	}
}

291 
M‘hod
* 
	$»sŞveAmbiguousM‘hod
(cÚ¡ 
CÏssObjeù
* 
»ã¼”
, 
u4
 
m‘hodIdx
)

293 
DexFe
* 
pDexFe
;

294 
CÏssObjeù
* 
»sCÏss
;

295 
M‘hod
* 
»sM‘hod
;

296 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
;

297 cÚ¡ * 
Çme
;

298 cÚ¡ * 
sigÇtu»
;

301 
»sM‘hod
 = 
	`dvmDexG‘ResŞvedM‘hod
(
»ã¼”
->
pDvmDex
, 
m‘hodIdx
);

302 ià(
»sM‘hod
 !ğ
NULL
)

303  
»sM‘hod
;

305 
pDexFe
 = 
»ã¼”
->
pDvmDex
->pDexFile;

306 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
m‘hodIdx
);

307 
»sCÏss
 = 
	`dvmResŞveCÏss
(
»ã¼”
, 
pM‘hodId
->
şassIdx
, 
Œue
);

308 ià(
»sCÏss
 =ğ
NULL
) {

310 
	`LOGD
("»sŞveAmbiguousM‘hod: uÇbËØfšd cÏs %d\n", 
m‘hodIdx
);

311  
NULL
;

313 ià(
	`dvmIsIÁ”çûCÏss
(
»sCÏss
)) {

315 
	`LOGD
("resolveAmbiguousMethod: method in interface?\n");

316  
NULL
;

320 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

322 
DexPrÙo
 
´Ùo
;

323 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDexFe
, 
pM‘hodId
);

325 ià(
Çme
[0] == '<') {

330 
»sM‘hod
 = 
	`dvmFšdDœeùM‘hod
(
»sCÏss
, 
Çme
, &
´Ùo
);

338 
»sM‘hod
 = 
	`dvmFšdM‘hodH›r
(
»sCÏss
, 
Çme
, &
´Ùo
);

341  
»sM‘hod
;

342 
	}
}

349 
	mkAÎObjeùs
,

350 
	mkAÎRaw
,

351 
	mkPrim™ivesOrObjeùs


352 } 
	tAÂÙ©iÚResuÉStyË
;

379 
boŞ
 
	$´oûssAÂÙ©iÚV®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
,

380 cÚ¡ 
u1
** 
pPŒ
, 
AÂÙ©iÚV®ue
* 
pV®ue
,

381 
AÂÙ©iÚResuÉStyË
 
»suÉStyË
)

383 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

384 
Objeù
* 
–emObj
 = 
NULL
;

385 
boŞ
 
£tObjeù
 = 
çl£
;

386 cÚ¡ 
u1
* 
±r
 = *
pPŒ
;

387 
u1
 
v®ueTy³
, 
v®ueArg
;

388 
width
;

389 
u4
 
idx
;

391 
v®ueTy³
 = *
±r
++;

392 
v®ueArg
 = 
v®ueTy³
 >> 
kDexAÂÙ©iÚV®ueArgShiá
;

393 
width
 = 
v®ueArg
 + 1;

395 
	`LOGV
("-----ype is 0x%02x %d,…tr=%p [0x%06x]\n",

396 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
, 
v®ueArg
, 
±r
-1,

397 (
±r
-1è- (
u1
*)
şazz
->
pDvmDex
->
pDexFe
->
ba£Addr
);

399 
pV®ue
->
ty³
 = 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
;

401 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
) {

402 
kDexAÂÙ©iÚBy‹
:

403 
pV®ue
->
v®ue
.
i
 = (
s1
è
	`»adSigÃdIÁ
(
±r
, 
v®ueArg
);

404 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

405 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

406 
	`dvmFšdPrim™iveCÏss
('B'));

407 
£tObjeù
 = 
Œue
;

410 
kDexAÂÙ©iÚShÜt
:

411 
pV®ue
->
v®ue
.
i
 = (
s2
è
	`»adSigÃdIÁ
(
±r
, 
v®ueArg
);

412 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

413 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

414 
	`dvmFšdPrim™iveCÏss
('S'));

415 
£tObjeù
 = 
Œue
;

418 
kDexAÂÙ©iÚCh¬
:

419 
pV®ue
->
v®ue
.
i
 = (
u2
è
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

420 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

421 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

422 
	`dvmFšdPrim™iveCÏss
('C'));

423 
£tObjeù
 = 
Œue
;

426 
kDexAÂÙ©iÚIÁ
:

427 
pV®ue
->
v®ue
.
i
 = 
	`»adSigÃdIÁ
(
±r
, 
v®ueArg
);

428 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

429 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

430 
	`dvmFšdPrim™iveCÏss
('I'));

431 
£tObjeù
 = 
Œue
;

434 
kDexAÂÙ©iÚLÚg
:

435 
pV®ue
->
v®ue
.
j
 = 
	`»adSigÃdLÚg
(
±r
, 
v®ueArg
);

436 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

437 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

438 
	`dvmFšdPrim™iveCÏss
('J'));

439 
£tObjeù
 = 
Œue
;

442 
kDexAÂÙ©iÚFlßt
:

443 
pV®ue
->
v®ue
.
i
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
Œue
);

444 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

445 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

446 
	`dvmFšdPrim™iveCÏss
('F'));

447 
£tObjeù
 = 
Œue
;

450 
kDexAÂÙ©iÚDoubË
:

451 
pV®ue
->
v®ue
.
j
 = 
	`»adUnsigÃdLÚg
(
±r
, 
v®ueArg
, 
Œue
);

452 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

453 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

454 
	`dvmFšdPrim™iveCÏss
('D'));

455 
£tObjeù
 = 
Œue
;

458 
kDexAÂÙ©iÚBoŞ—n
:

459 
pV®ue
->
v®ue
.
i
 = (
v®ueArg
 != 0);

460 ià(
»suÉStyË
 =ğ
kAÎObjeùs
) {

461 
–emObj
 = (
Objeù
*è
	`dvmW¿pPrim™ive
(
pV®ue
->
v®ue
,

462 
	`dvmFšdPrim™iveCÏss
('Z'));

463 
£tObjeù
 = 
Œue
;

465 
width
 = 0;

468 
kDexAÂÙ©iÚSŒšg
:

469 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

470 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

471 
pV®ue
->
v®ue
.
i
 = 
idx
;

473 
–emObj
 = (
Objeù
*è
	`dvmResŞveSŒšg
(
şazz
, 
idx
);

474 
£tObjeù
 = 
Œue
;

475 ià(
–emObj
 =ğ
NULL
)

476  
çl£
;

477 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

480 
kDexAÂÙ©iÚTy³
:

481 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

482 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

483 
pV®ue
->
v®ue
.
i
 = 
idx
;

485 
–emObj
 = (
Objeù
*è
	`dvmResŞveCÏss
(
şazz
, 
idx
, 
Œue
);

486 
£tObjeù
 = 
Œue
;

487 ià(
–emObj
 =ğ
NULL
) {

489 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

490 cÚ¡ * 
desc
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
idx
);

491 
	`dvmCË¬Exû±iÚ
(
£lf
);

492 
	`dvmThrowExû±iÚW™hCÏssMes§ge
(

493 "Ljava/Ïng/Ty³NÙP»£ÁExû±iÚ;", 
desc
);

494  
çl£
;

496 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

500 
kDexAÂÙ©iÚM‘hod
:

501 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

502 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

503 
pV®ue
->
v®ue
.
i
 = 
idx
;

505 
M‘hod
* 
m‘h
 = 
	`»sŞveAmbiguousM‘hod
(
şazz
, 
idx
);

506 ià(
m‘h
 =ğ
NULL
)

507  
çl£
;

508 
–emObj
 = 
	`dvmC»©eReæeùObjFÜM‘hod
(
şazz
, 
m‘h
);

509 
£tObjeù
 = 
Œue
;

510 ià(
–emObj
 =ğ
NULL
)

511  
çl£
;

514 
kDexAÂÙ©iÚF›ld
:

515 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

516 
	`as£¹
(
çl£
);

518 
kDexAÂÙ©iÚEnum
:

520 
idx
 = 
	`»adUnsigÃdIÁ
(
±r
, 
v®ueArg
, 
çl£
);

521 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

522 
pV®ue
->
v®ue
.
i
 = 
idx
;

524 
SticF›ld
* 
sf›ld
;

526 
sf›ld
 = 
	`dvmResŞveSticF›ld
(
şazz
, 
idx
);

527 ià(
sf›ld
 =ğ
NULL
) {

528  
çl£
;

530 
	`as£¹
(
sf›ld
->
f›ld
.
şazz
->
desütÜ
[0] == 'L');

531 
–emObj
 = 
sf›ld
->
v®ue
.
l
;

532 
£tObjeù
 = 
Œue
;

533 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

537 
kDexAÂÙ©iÚA¼ay
:

544 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

545  
çl£
;

547 
A¼ayObjeù
* 
ÃwA¼ay
;

548 
Objeù
** 
pObj
;

549 
u4
 
size
;

551 
size
 = 
	`»adUËb128
(&
±r
);

552 
	`LOGVV
("---‡ÂÙ©iÚ‡¼ay, sizi %u‡ˆ%p\n", 
size
, 
±r
);

553 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgObjeùA¼ay
,

554 
size
, 
ALLOC_DEFAULT
);

555 ià(
ÃwA¼ay
 =ğ
NULL
) {

556 
	`LOGE
("ªnÙ©iÚƒËm’ˆ¬¿y‡Îoøçed (%d)\n", 
size
);

557  
çl£
;

559 
pObj
 = (
Objeù
**)
ÃwA¼ay
->
cÚ‹Ás
;

561 
AÂÙ©iÚV®ue
 
av®ue
;

562 
size
--) {

563 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
,

564 
kAÎObjeùs
)) {

565 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÃwA¼ay
, 
£lf
);

566  
çl£
;

568 
Objeù
* 
obj
 = 
av®ue
.
v®ue
.
l
;

569 
	`dvmR–—£T¿ckedAÎoc
(
obj
, 
£lf
);

570 *
pObj
++ = 
obj
;

573 
–emObj
 = (
Objeù
*è
ÃwA¼ay
;

574 
£tObjeù
 = 
Œue
;

576 
width
 = 0;

578 
kDexAÂÙ©iÚAÂÙ©iÚ
:

580 ià(
»suÉStyË
 =ğ
kAÎRaw
)

581  
çl£
;

582 
–emObj
 = 
	`´oûssEncodedAÂÙ©iÚ
(
şazz
, &
±r
);

583 
£tObjeù
 = 
Œue
;

584 ià(
–emObj
 =ğ
NULL
)

585  
çl£
;

586 
	`dvmAddT¿ckedAÎoc
(
–emObj
, 
£lf
);

587 
width
 = 0;

589 
kDexAÂÙ©iÚNuÎ
:

590 ià(
»suÉStyË
 =ğ
kAÎRaw
) {

591 
pV®ue
->
v®ue
.
i
 = 0;

593 
	`as£¹
(
–emObj
 =ğ
NULL
);

594 
£tObjeù
 = 
Œue
;

596 
width
 = 0;

599 
	`LOGE
("Bad‡nnotationƒlement value byte 0x%02x (0x%02x)\n",

600 
v®ueTy³
, v®ueTy³ & 
kDexAÂÙ©iÚV®ueTy³Mask
);

601 
	`as£¹
(
çl£
);

602  
çl£
;

605 
±r
 +ğ
width
;

607 *
pPŒ
 = 
±r
;

608 ià(
£tObjeù
)

609 
pV®ue
->
v®ue
.
l
 = 
–emObj
;

610  
Œue
;

611 
	}
}

632 
Objeù
* 
	$cÚv”tR‘uºTy³
(
Objeù
* 
v®ueObj
, 
CÏssObjeù
* 
m‘hodR‘uº
)

634 ià(
v®ueObj
 =ğ
NULL
 ||

635 !
	`dvmIsA¼ay
((
A¼ayObjeù
*)
v®ueObj
è|| !
	`dvmIsA¼ayCÏss
(
m‘hodR‘uº
))

637  
v®ueObj
;

640 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

641 
CÏssObjeù
* 
¤cEËmCÏss
;

642 
CÏssObjeù
* 
d¡EËmCÏss
;

648 
¤cEËmCÏss
 = 
	`dvmFšdCÏss
(
v®ueObj
->
şazz
->
desütÜ
+1,

649 
v®ueObj
->
şazz
->
şassLßd”
);

650 
d¡EËmCÏss
 = 
	`dvmFšdCÏss
(
m‘hodR‘uº
->
desütÜ
+1,

651 
m‘hodR‘uº
->
şassLßd”
);

652 ià(
¤cEËmCÏss
->
´im™iveTy³
 !ğ
PRIM_NOT
 ||

653 
d¡EËmCÏss
->
´im™iveTy³
 !ğ
PRIM_NOT
)

655 
	`LOGE
("ERROR:‡rray of…rimitives‚otƒxpected here\n");

656 
	`dvmAbÜt
();

658 
	`LOGV
("HEY: converting valueObj from [%so [%s\n",

659 
¤cEËmCÏss
->
desütÜ
, 
d¡EËmCÏss
->descriptor);

661 
A¼ayObjeù
* 
¤cA¼ay
 = (A¼ayObjeù*è
v®ueObj
;

662 
u4
 
Ëngth
 = 
¤cA¼ay
->length;

663 
A¼ayObjeù
* 
ÃwA¼ay
;

665 
ÃwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(
m‘hodR‘uº
, 
Ëngth
, 
ALLOC_DEFAULT
);

666 ià(
ÃwA¼ay
 =ğ
NULL
) {

667 
	`LOGE
("Failed creating duplicate‡nnotation class (%s %d)\n",

668 
m‘hodR‘uº
->
desütÜ
, 
Ëngth
);

669 
ba
;

672 ià(!
	`dvmCİyObjeùA¼ay
(
ÃwA¼ay
, 
¤cA¼ay
, 
d¡EËmCÏss
)) {

673 
	`LOGE
("Annotation‡rray copy failed\n");

674 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÃwA¼ay
, 
£lf
);

675 
ÃwA¼ay
 = 
NULL
;

676 
ba
;

679 
ba
:

681 
	`dvmR–—£T¿ckedAÎoc
(
v®ueObj
, 
£lf
);

682  (
Objeù
*è
ÃwA¼ay
;

683 
	}
}

697 
Objeù
* 
	$ü—‹AÂÙ©iÚMemb”
(cÚ¡ 
CÏssObjeù
* 
şazz
,

698 cÚ¡ 
CÏssObjeù
* 
ªnoCÏss
, cÚ¡ 
u1
** 
pPŒ
)

700 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

701 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

702 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

703 
Objeù
* 
v®ueObj
 = 
NULL
;

704 
Objeù
* 
ÃwMemb”
 = 
NULL
;

705 
Objeù
* 
m‘hodObj
 = 
NULL
;

706 
CÏssObjeù
* 
m‘hodR‘uº
 = 
NULL
;

707 
u4
 
–em’tNameIdx
;

708 cÚ¡ * 
Çme
;

709 
AÂÙ©iÚV®ue
 
av®ue
;

710 
JV®ue
 
»suÉ
;

711 
boŞ
 
çed
 = 
Œue
;

713 
–em’tNameIdx
 = 
	`»adUËb128
(
pPŒ
);

715 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, 
pPŒ
, &
av®ue
, 
kAÎObjeùs
)) {

716 
	`LOGW
("Failed…rocessing‡nnotation value\n");

717 
ba
;

719 
v®ueObj
 = 
av®ue
.
v®ue
.
l
;

722 
ÃwMemb”
 =

723 
	`dvmAÎocObjeù
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
,

724 
ALLOC_DEFAULT
);

725 
Çme
 = 
	`dexSŒšgById
(
pDexFe
, 
–em’tNameIdx
);

726 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
Çme
, 
ALLOC_DEFAULT
);

729 ià(
Çme
 !ğ
NULL
) {

730 
M‘hod
* 
ªnoM‘h
 = 
	`dvmFšdVœtu®M‘hodByName
(
ªnoCÏss
, 
Çme
);

731 ià(
ªnoM‘h
 =ğ
NULL
) {

732 
	`LOGW
("WARNING: could‚ot find‡nnotation member %s in %s\n",

733 
Çme
, 
ªnoCÏss
->
desütÜ
);

735 
m‘hodObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
(
ªnoM‘h
);

736 
m‘hodR‘uº
 = 
	`dvmG‘BoxedR‘uºTy³
(
ªnoM‘h
);

739 ià(
ÃwMemb”
 =ğ
NULL
 || 
ÇmeObj
 =ğNULL || 
m‘hodObj
 == NULL ||

740 
m‘hodR‘uº
 =ğ
NULL
)

742 
	`LOGE
("Failed creating‡nnotationƒlement (m=%p‚=%p‡=%p„=%p)\n",

743 
ÃwMemb”
, 
ÇmeObj
, 
m‘hodObj
, 
m‘hodR‘uº
);

744 
ba
;

748 
v®ueObj
 = 
	`cÚv”tR‘uºTy³
(v®ueObj, 
m‘hodR‘uº
);

749 ià(
v®ueObj
 =ğ
NULL
)

750 
ba
;

753 
	`dvmC®lM‘hod
(
£lf
, 
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”_š™
,

754 
ÃwMemb”
, &
»suÉ
, 
ÇmeObj
, 
v®ueObj
, 
m‘hodR‘uº
, 
m‘hodObj
);

755 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

756 
	`LOGD
("Failed constructing‡nnotationƒlement\n");

757 
ba
;

760 
çed
 = 
çl£
;

762 
ba
:

764 
	`dvmR–—£T¿ckedAÎoc
(
ÃwMemb”
, 
£lf
);

765 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
ÇmeObj
, 
£lf
);

766 
	`dvmR–—£T¿ckedAÎoc
(
v®ueObj
, 
£lf
);

767 
	`dvmR–—£T¿ckedAÎoc
(
m‘hodObj
, 
£lf
);

768 ià(
çed
)

769  
NULL
;

771  
ÃwMemb”
;

772 
	}
}

791 
Objeù
* 
	$´oûssEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

792 cÚ¡ 
u1
** 
pPŒ
)

794 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

795 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

796 
Objeù
* 
ÃwAÂo
 = 
NULL
;

797 
A¼ayObjeù
* 
–em’tA¼ay
 = 
NULL
;

798 cÚ¡ 
CÏssObjeù
* 
ªnoCÏss
;

799 cÚ¡ 
u1
* 
±r
;

800 
u4
 
ty³Idx
, 
size
;

802 
±r
 = *
pPŒ
;

803 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

804 
size
 = 
	`»adUËb128
(&
±r
);

806 
	`LOGVV
("-----…roûssEnø±r=%°ty³=%d size=%d\n", 
±r
, 
ty³Idx
, 
size
);

808 
ªnoCÏss
 = 
	`dvmDexG‘ResŞvedCÏss
(
şazz
->
pDvmDex
, 
ty³Idx
);

809 ià(
ªnoCÏss
 =ğ
NULL
) {

810 
ªnoCÏss
 = 
	`dvmResŞveCÏss
(
şazz
, 
ty³Idx
, 
Œue
);

811 ià(
ªnoCÏss
 =ğ
NULL
) {

812 
	`LOGE
("Unableo„esolve %s‡nnotation class %d\n",

813 
şazz
->
desütÜ
, 
ty³Idx
);

814 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

815  
NULL
;

819 
	`LOGV
("-----…rocessEnc…tr=%p [0x%06x]ypeIdx=%d size=%d class=%s\n",

820 *
pPŒ
, *pPŒ - (
u1
*è
şazz
->
pDvmDex
->
pDexFe
->
ba£Addr
,

821 
ty³Idx
, 
size
, 
ªnoCÏss
->
desütÜ
);

828 
JV®ue
 
»suÉ
;

829 
Objeù
** 
pEËm’t
 = 
NULL
;

831 ià(
size
 > 0) {

832 
–em’tA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(

833 
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”A¼ay
,

834 
size
, 
ALLOC_DEFAULT
);

835 ià(
–em’tA¼ay
 =ğ
NULL
) {

836 
	`LOGE
("failedo‡llocate‡nnotation member‡rray (%dƒlements)\n",

837 
size
);

838 
ba
;

840 
pEËm’t
 = (
Objeù
**è
–em’tA¼ay
->
cÚ‹Ás
;

847 
size
--) {

848 
Objeù
* 
ÃwMemb”
 = 
	`ü—‹AÂÙ©iÚMemb”
(
şazz
, 
ªnoCÏss
, &
±r
);

849 ià(
ÃwMemb”
 =ğ
NULL
)

850 
ba
;

853 *
pEËm’t
++ = 
ÃwMemb”
;

856 
	`dvmC®lM‘hod
(
£lf
,

857 
gDvm
.
m‘hOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy_ü—‹AÂÙ©iÚ
,

858 
NULL
, &
»suÉ
, 
ªnoCÏss
, 
–em’tA¼ay
);

859 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

860 
	`LOGD
("Failed creating‡n‡nnotation\n");

862 
ba
;

865 
ÃwAÂo
 = 
»suÉ
.
l
;

867 
ba
:

868 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
–em’tA¼ay
, 
NULL
);

869 *
pPŒ
 = 
±r
;

870 ià(
ÃwAÂo
 =ğ
NULL
 && !
	`dvmCheckExû±iÚ
(
£lf
)) {

872 
	`dvmThrowExû±iÚ
("Ljava/lang/RuntimeException;",

875  
ÃwAÂo
;

876 
	}
}

885 
A¼ayObjeù
* 
	$´oûssAÂÙ©iÚS‘
(cÚ¡ 
CÏssObjeù
* 
şazz
,

886 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, 
visib™y
)

888 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

889 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

890 
A¼ayObjeù
* 
ªnoA¼ay
;

891 
Objeù
** 
pCÚ‹Ás
;

892 
i
, 
couÁ
;

895 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
))

896 
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚFaùÜy
);

897 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
))

898 
	`dvmIn™CÏss
(
gDvm
.
şassOrgA·cheH¬mÚyLªgAÂÙ©iÚAÂÙ©iÚMemb”
);

901 
i
 = 
couÁ
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

902 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

903 ià(
pAÂoI‹m
->
visib™y
 == visibility)

904 
couÁ
++;

907 
ªnoA¼ay
 =
	`dvmAÎocA¼ayByCÏss
(
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ay
,

908 
couÁ
, 
ALLOC_DEFAULT
);

909 ià(
ªnoA¼ay
 =ğ
NULL
)

910  
NULL
;

911 
pCÚ‹Ás
 = (
Objeù
**è
ªnoA¼ay
->
cÚ‹Ás
;

917 
i
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

918 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

919 ià(
pAÂoI‹m
->
visib™y
 != visibility)

921 cÚ¡ 
u1
* 
±r
 = 
pAÂoI‹m
->
ªnÙ©iÚ
;

922 *
pCÚ‹Ás
 = 
	`´oûssEncodedAÂÙ©iÚ
(
şazz
, &
±r
);

923 ià(*
pCÚ‹Ás
 =ğ
NULL
) {

924 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ªnoA¼ay
, 
NULL
);

925  
NULL
;

927 
pCÚ‹Ás
++;

930  
ªnoA¼ay
;

931 
	}
}

947 
boŞ
 
	$skAÂÙ©iÚV®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
u1
** 
pPŒ
)

949 cÚ¡ 
u1
* 
±r
 = *
pPŒ
;

950 
u1
 
v®ueTy³
, 
v®ueArg
;

951 
width
;

953 
v®ueTy³
 = *
±r
++;

954 
v®ueArg
 = 
v®ueTy³
 >> 
kDexAÂÙ©iÚV®ueArgShiá
;

955 
width
 = 
v®ueArg
 + 1;

957 
	`LOGV
("-----ype is 0x%02x %d,…tr=%p [0x%06x]\n",

958 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
, 
v®ueArg
, 
±r
-1,

959 (
±r
-1è- (
u1
*)
şazz
->
pDvmDex
->
pDexFe
->
ba£Addr
);

961 
v®ueTy³
 & 
kDexAÂÙ©iÚV®ueTy³Mask
) {

962 
kDexAÂÙ©iÚBy‹
: ;

963 
kDexAÂÙ©iÚShÜt
: ;

964 
kDexAÂÙ©iÚCh¬
: ;

965 
kDexAÂÙ©iÚIÁ
: ;

966 
kDexAÂÙ©iÚLÚg
: ;

967 
kDexAÂÙ©iÚFlßt
: ;

968 
kDexAÂÙ©iÚDoubË
: ;

969 
kDexAÂÙ©iÚSŒšg
: ;

970 
kDexAÂÙ©iÚTy³
: ;

971 
kDexAÂÙ©iÚM‘hod
: ;

972 
kDexAÂÙ©iÚF›ld
: ;

973 
kDexAÂÙ©iÚEnum
: ;

975 
kDexAÂÙ©iÚA¼ay
:

978 
u4
 
size
 = 
	`»adUËb128
(&
±r
);

979 
size
--) {

980 ià(!
	`skAÂÙ©iÚV®ue
(
şazz
, &
±r
))

981  
çl£
;

984 
width
 = 0;

986 
kDexAÂÙ©iÚAÂÙ©iÚ
:

988 ià(!
	`skEncodedAÂÙ©iÚ
(
şazz
, &
±r
))

989  
çl£
;

990 
width
 = 0;

992 
kDexAÂÙ©iÚBoŞ—n
:

993 
kDexAÂÙ©iÚNuÎ
:

994 
width
 = 0;

997 
	`LOGE
("Bad‡ÂÙ©iÚƒËm’ˆv®uby‹ 0x%02x\n", 
v®ueTy³
);

998 
	`as£¹
(
çl£
);

999  
çl£
;

1002 
±r
 +ğ
width
;

1004 *
pPŒ
 = 
±r
;

1005  
Œue
;

1006 
	}
}

1012 
boŞ
 
	$skEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
, cÚ¡ 
u1
** 
pPŒ
)

1014 cÚ¡ 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1015 cÚ¡ 
u1
* 
±r
;

1016 
u4
 
size
;

1018 
±r
 = *
pPŒ
;

1019 (è
	`»adUËb128
(&
±r
);

1020 
size
 = 
	`»adUËb128
(&
±r
);

1026 
size
--) {

1027 (è
	`»adUËb128
(&
±r
);

1029 ià(!
	`skAÂÙ©iÚV®ue
(
şazz
, &
±r
))

1030  
çl£
;

1033 *
pPŒ
 = 
±r
;

1034  
Œue
;

1035 
	}
}

1042 
	$com·»CÏssDesütÜ
(
DexFe
* 
pDexFe
, 
u4
 
ty³Idx
,

1043 cÚ¡ * 
desütÜ
)

1045 cÚ¡ * 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
ty³Idx
);

1047  
	`¡rcmp
(
¡r
, 
desütÜ
);

1048 
	}
}

1061 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
	$£¬chAÂÙ©iÚS‘
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1062 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
, cÚ¡ * 
desütÜ
,

1063 
visib™y
)

1065 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1066 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
»suÉ
 = 
NULL
;

1067 
u4
 
ty³Idx
;

1068 
i
;

1072 
i
 = 0; i < (è
pAÂoS‘
->
size
; i++) {

1073 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1075 
pAÂoI‹m
 = 
	`dexG‘AÂÙ©iÚI‹m
(
pDexFe
, 
pAÂoS‘
, 
i
);

1076 ià(
pAÂoI‹m
->
visib™y
 != visibility)

1078 cÚ¡ 
u1
* 
±r
 = 
pAÂoI‹m
->
ªnÙ©iÚ
;

1079 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

1081 ià(
	`com·»CÏssDesütÜ
(
pDexFe
, 
ty³Idx
, 
desütÜ
) == 0) {

1083 
»suÉ
 = 
pAÂoI‹m
;

1088  
»suÉ
;

1089 
	}
}

1095 cÚ¡ 
u1
* 
	$£¬chEncodedAÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1096 cÚ¡ 
u1
* 
±r
, cÚ¡ * 
Çme
)

1098 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1099 
u4
 
ty³Idx
, 
size
;

1101 
ty³Idx
 = 
	`»adUËb128
(&
±r
);

1102 
size
 = 
	`»adUËb128
(&
±r
);

1105 
size
--) {

1106 
u4
 
–em’tNameIdx
;

1107 cÚ¡ * 
–emName
;

1109 
–em’tNameIdx
 = 
	`»adUËb128
(&
±r
);

1110 
–emName
 = 
	`dexSŒšgById
(
pDexFe
, 
–em’tNameIdx
);

1111 ià(
	`¡rcmp
(
Çme
, 
–emName
) == 0) {

1113  
±r
;

1116 
	`skAÂÙ©iÚV®ue
(
şazz
, &
±r
);

1120  
NULL
;

1121 
	}
}

1123 
	#GAV_FAILED
 ((
Objeù
*è0x10000001)

	)

1134 
Objeù
* 
	$g‘AÂÙ©iÚV®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1135 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
, cÚ¡ * 
ªnoName
,

1136 
ex³ùedTy³
, cÚ¡ * 
debugAÂoName
)

1138 cÚ¡ 
u1
* 
±r
;

1139 
Objeù
* 
obj
;

1140 
AÂÙ©iÚV®ue
 
av®ue
;

1143 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, 
ªnoName
);

1144 ià(
±r
 =ğ
NULL
) {

1145 
	`LOGW
("% ªnÙ©iÚ†ack '%s' memb”\n", 
debugAÂoName
, 
ªnoName
);

1146  
GAV_FAILED
;

1149 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎObjeùs
))

1150  
GAV_FAILED
;

1153 ià(
av®ue
.
ty³
 !ğ
ex³ùedTy³
) {

1154 
	`LOGW
("%s %s has wrongype (0x%02x,ƒxpected 0x%02x)\n",

1155 
debugAÂoName
, 
ªnoName
, 
av®ue
.
ty³
, 
ex³ùedTy³
);

1156  
GAV_FAILED
;

1159  
av®ue
.
v®ue
.
l
;

1160 
	}
}

1172 
A¼ayObjeù
* 
	$g‘SigÇtu»V®ue
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1173 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
)

1175 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1176 
Objeù
* 
obj
;

1178 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüSigÇtu»
,

1179 
kDexVisib™ySy¡em
);

1180 ià(
pAÂoI‹m
 =ğ
NULL
)

1181  
NULL
;

1186 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚA¼ay
,

1188 ià(
obj
 =ğ
GAV_FAILED
)

1189  
NULL
;

1190 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgObjeùA¼ay
);

1192  (
A¼ayObjeù
*)
obj
;

1193 
	}
}

1205 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$fšdAÂÙ©iÚS‘FÜCÏss
(

1206 cÚ¡ 
CÏssObjeù
* 
şazz
)

1208 
DexFe
* 
pDexFe
;

1209 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1211 ià(
şazz
->
pDvmDex
 =ğ
NULL
)

1212  
NULL
;

1214 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1215 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1216 ià(
pAÂoDœ
 !ğ
NULL
)

1217  
	`dexG‘CÏssAÂÙ©iÚS‘
(
pDexFe
, 
pAÂoDœ
);

1219  
NULL
;

1220 
	}
}

1230 
A¼ayObjeù
* 
	$dvmG‘CÏssAÂÙ©iÚs
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1232 
A¼ayObjeù
* 
ªnoA¼ay
;

1233 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1235 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1236 ià(
pAÂoS‘
 =ğ
NULL
) {

1238 
ªnoA¼ay
 = 
	`em±yAÂoA¼ay
();

1240 
ªnoA¼ay
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

1241 
kDexVisib™yRuÁime
);

1244  
ªnoA¼ay
;

1245 
	}
}

1253 
A¼ayObjeù
* 
	$dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1255 
A¼ayObjeù
* 
sigÇtu»
 = 
NULL
;

1256 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1258 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1259 ià(
pAÂoS‘
 !ğ
NULL
)

1260 
sigÇtu»
 = 
	`g‘SigÇtu»V®ue
(
şazz
, 
pAÂoS‘
);

1262  
sigÇtu»
;

1263 
	}
}

1271 
Objeù
* 
	$dvmG‘EnşosšgM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1273 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1274 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1275 
Objeù
* 
obj
;

1277 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1278 ià(
pAÂoS‘
 =ğ
NULL
)

1279  
NULL
;

1281 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgM‘hod
,

1282 
kDexVisib™ySy¡em
);

1283 ià(
pAÂoI‹m
 =ğ
NULL
)

1284  
NULL
;

1289 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚM‘hod
,

1291 ià(
obj
 =ğ
GAV_FAILED
)

1292  
NULL
;

1293 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
 ||

1294 
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
);

1296  
obj
;

1297 
	}
}

1307 
CÏssObjeù
* 
	$dvmG‘Deş¬šgCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1309 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1310 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1311 
Objeù
* 
obj
;

1313 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1314 ià(
pAÂoS‘
 =ğ
NULL
)

1315  
NULL
;

1317 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgCÏss
,

1318 
kDexVisib™ySy¡em
);

1319 ià(
pAÂoI‹m
 =ğ
NULL
)

1320  
NULL
;

1325 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚTy³
,

1327 ià(
obj
 =ğ
GAV_FAILED
)

1328  
NULL
;

1330 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
);

1331  (
CÏssObjeù
*)
obj
;

1332 
	}
}

1342 
CÏssObjeù
* 
	$dvmG‘EnşosšgCÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1344 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1345 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1346 
Objeù
* 
obj
;

1348 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1349 ià(
pAÂoS‘
 =ğ
NULL
)

1350  
NULL
;

1352 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgCÏss
,

1353 
kDexVisib™ySy¡em
);

1354 ià(
pAÂoI‹m
 !ğ
NULL
) {

1358 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "v®ue", 
kDexAÂÙ©iÚTy³
,

1360 ià(
obj
 !ğ
GAV_FAILED
) {

1361 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgCÏss
);

1362  (
CÏssObjeù
*)
obj
;

1373 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüEnşosšgM‘hod
,

1374 
kDexVisib™ySy¡em
);

1375 ià(
pAÂoI‹m
 =ğ
NULL
)

1376  
NULL
;

1379 cÚ¡ 
u1
* 
±r
;

1380 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "value");

1381 ià(
±r
 =ğ
NULL
) {

1382 
	`LOGW
("EnclosingMethod‡nnotation†acks 'value' member\n");

1383  
NULL
;

1387 
AÂÙ©iÚV®ue
 
av®ue
;

1388 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎRaw
)) {

1389 
	`LOGW
("EnclosingMethod…arse failed\n");

1390  
NULL
;

1392 ià(
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚM‘hod
) {

1393 
	`LOGW
("EnclosingMethod value has wrongype (0x%02x,ƒxpected 0x%02x)\n",

1394 
av®ue
.
ty³
, 
kDexAÂÙ©iÚM‘hod
);

1395  
NULL
;

1399 
M‘hod
* 
m‘h
 = 
	`»sŞveAmbiguousM‘hod
(
şazz
, 
av®ue
.
v®ue
.
i
);

1400 ià(
m‘h
 =ğ
NULL
)

1401  
NULL
;

1403 
CÏssObjeù
* 
m‘hCÏzz
 = 
m‘h
->
şazz
;

1404 
	`dvmAddT¿ckedAÎoc
((
Objeù
*è
m‘hCÏzz
, 
NULL
);

1405  
m‘hCÏzz
;

1406 
	}
}

1416 
boŞ
 
	$dvmG‘IÂ”CÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
SŒšgObjeù
** 
pName
,

1417 * 
pAcûssFÏgs
)

1419 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1420 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1422 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1423 ià(
pAÂoS‘
 =ğ
NULL
)

1424  
çl£
;

1426 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüIÂ”CÏss
,

1427 
kDexVisib™ySy¡em
);

1428 ià(
pAÂoI‹m
 =ğ
NULL
)

1429  
çl£
;

1436 cÚ¡ 
u1
* 
±r
;

1437 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "name");

1438 ià(
±r
 =ğ
NULL
) {

1439 
	`LOGW
("InnerClass‡nnotation†acks 'name' member\n");

1440  
çl£
;

1444 
AÂÙ©iÚV®ue
 
av®ue
;

1445 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎObjeùs
)) {

1446 
	`LOGD
("processAnnotationValue failed on InnerClass member 'name'\n");

1447  
çl£
;

1451 ià(
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚNuÎ
 &&

1452 
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚSŒšg
)

1454 
	`LOGW
("InnerClass‚ame has badype (0x%02x,ƒxpected STRING or NULL)\n",

1455 
av®ue
.
ty³
);

1456  
çl£
;

1459 *
pName
 = (
SŒšgObjeù
*è
av®ue
.
v®ue
.
l
;

1460 
	`as£¹
(*
pName
 =ğ
NULL
 || (*pName)->
obj
.
şazz
 =ğ
gDvm
.
şassJavaLªgSŒšg
);

1462 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "accessFlags");

1463 ià(
±r
 =ğ
NULL
) {

1464 
	`LOGW
("InnerClass‡nnotation†acks 'accessFlags' member\n");

1465  
çl£
;

1469 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎRaw
)) {

1470 
	`LOGW
("InnerClass‡ccessFlags…arse failed\n");

1471  
çl£
;

1473 ià(
av®ue
.
ty³
 !ğ
kDexAÂÙ©iÚIÁ
) {

1474 
	`LOGW
("InnerClass value has wrongype (0x%02x,ƒxpected 0x%02x)\n",

1475 
av®ue
.
ty³
, 
kDexAÂÙ©iÚIÁ
);

1476  
çl£
;

1479 *
pAcûssFÏgs
 = 
av®ue
.
v®ue
.
i
;

1481  
Œue
;

1482 
	}
}

1492 
A¼ayObjeù
* 
	$dvmG‘Deş¬edCÏs£s
(cÚ¡ 
CÏssObjeù
* 
şazz
)

1494 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1495 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1496 
Objeù
* 
obj
;

1498 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜCÏss
(
şazz
);

1499 ià(
pAÂoS‘
 =ğ
NULL
)

1500  
NULL
;

1502 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüMemb”CÏs£s
,

1503 
kDexVisib™ySy¡em
);

1504 ià(
pAÂoI‹m
 =ğ
NULL
)

1505  
NULL
;

1510 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "value",

1511 
kDexAÂÙ©iÚA¼ay
, "MemberClasses");

1512 ià(
obj
 =ğ
GAV_FAILED
)

1513  
NULL
;

1514 
	`as£¹
(
	`dvmIsA¼ay
((
A¼ayObjeù
*)
obj
));

1515 
obj
 = 
	`cÚv”tR‘uºTy³
(obj, 
gDvm
.
şassJavaLªgCÏssA¼ay
);

1516  (
A¼ayObjeù
*)
obj
;

1517 
	}
}

1530 
	$com·»M‘hodSŒ
(
DexFe
* 
pDexFe
, 
u4
 
m‘hodIdx
,

1531 cÚ¡ 
M‘hod
* 
m‘hod
)

1533 cÚ¡ 
DexM‘hodId
* 
pM‘hodId
 = 
	`dexG‘M‘hodId
(
pDexFe
, 
m‘hodIdx
);

1534 cÚ¡ * 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pM‘hodId
->
şassIdx
);

1535 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
m‘hod
->
şazz
->
desütÜ
);

1537 ià(
»suÉ
 == 0) {

1538 
¡r
 = 
	`dexSŒšgById
(
pDexFe
, 
pM‘hodId
->
ÇmeIdx
);

1539 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
m‘hod
->
Çme
);

1540 ià(
»suÉ
 == 0) {

1541 
DexPrÙo
 
´Ùo
;

1542 
	`dexPrÙoS‘FromM‘hodId
(&
´Ùo
, 
pDexFe
, 
pM‘hodId
);

1543 
»suÉ
 = 
	`dexPrÙoCom·»
(&
´Ùo
, &
m‘hod
->
´ÙÙy³
);

1547  
»suÉ
;

1548 
	}
}

1562 
u4
 
	$g‘M‘hodIdx
(cÚ¡ 
M‘hod
* 
m‘hod
)

1564 
DexFe
* 
pDexFe
 = 
m‘hod
->
şazz
->
pDvmDex
->pDexFile;

1565 
u4
 
hi
 = 
pDexFe
->
pH—d”
->
m‘hodIdsSize
 -1;

1566 
u4
 
lo
 = 0;

1567 
u4
 
cur
;

1569 
hi
 >ğ
lo
) {

1570 
cmp
;

1571 
cur
 = (
lo
 + 
hi
) / 2;

1573 
cmp
 = 
	`com·»M‘hodSŒ
(
pDexFe
, 
cur
, 
m‘hod
);

1574 ià(
cmp
 < 0) {

1575 
lo
 = 
cur
 + 1;

1576 } ià(
cmp
 > 0) {

1577 
hi
 = 
cur
 - 1;

1583 ià(
hi
 < 
lo
) {

1585 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

1586 
	`LOGE
("Unableo find method %s.%s %s in DEX file!\n",

1587 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
, 
desc
);

1588 
	`ä“
(
desc
);

1589 
	`dvmAbÜt
();

1592  
cur
;

1593 
	}
}

1600 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$fšdAÂÙ©iÚS‘FÜM‘hod
(

1601 cÚ¡ 
M‘hod
* 
m‘hod
)

1603 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1604 
DexFe
* 
pDexFe
;

1605 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1606 cÚ¡ 
DexM‘hodAÂÙ©iÚsI‹m
* 
pM‘hodLi¡
;

1607 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1609 ià(
şazz
->
pDvmDex
 =ğ
NULL
)

1610  
NULL
;

1611 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1613 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1614 ià(
pAÂoDœ
 !ğ
NULL
) {

1615 
pM‘hodLi¡
 = 
	`dexG‘M‘hodAÂÙ©iÚs
(
pDexFe
, 
pAÂoDœ
);

1616 ià(
pM‘hodLi¡
 !ğ
NULL
) {

1628 
u4
 
m‘hodIdx
 = 
	`g‘M‘hodIdx
(
m‘hod
);

1629 
u4
 
couÁ
 = 
	`dexG‘M‘hodAÂÙ©iÚsSize
(
pDexFe
, 
pAÂoDœ
);

1630 
u4
 
idx
;

1632 
idx
 = 0; idx < 
couÁ
; idx++) {

1633 ià(
pM‘hodLi¡
[
idx
].
m‘hodIdx
 == methodIdx) {

1635 
pAÂoS‘
 = 
	`dexG‘M‘hodAÂÙ©iÚS‘I‹m
(
pDexFe
,

1636 &
pM‘hodLi¡
[
idx
]);

1643  
pAÂoS‘
;

1644 
	}
}

1654 
A¼ayObjeù
* 
	$dvmG‘M‘hodAÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
)

1656 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1657 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1658 
A¼ayObjeù
* 
ªnoA¼ay
 = 
NULL
;

1660 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1661 ià(
pAÂoS‘
 =ğ
NULL
) {

1663 
ªnoA¼ay
 = 
	`em±yAÂoA¼ay
();

1665 
ªnoA¼ay
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,
kDexVisib™yRuÁime
);

1668  
ªnoA¼ay
;

1669 
	}
}

1677 
A¼ayObjeù
* 
	$dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
)

1679 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1680 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1681 
A¼ayObjeù
* 
sigÇtu»
 = 
NULL
;

1683 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1684 ià(
pAÂoS‘
 !ğ
NULL
)

1685 
sigÇtu»
 = 
	`g‘SigÇtu»V®ue
(
şazz
, 
pAÂoS‘
);

1687  
sigÇtu»
;

1688 
	}
}

1698 
A¼ayObjeù
* 
	$dvmG‘M‘hodThrows
(cÚ¡ 
M‘hod
* 
m‘hod
)

1700 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1701 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1702 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1705 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜM‘hod
(
m‘hod
);

1706 ià(
pAÂoS‘
 =ğ
NULL
)

1707  
NULL
;

1710 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüThrows
,

1711 
kDexVisib™ySy¡em
);

1712 ià(
pAÂoI‹m
 =ğ
NULL
)

1713  
NULL
;

1718 
Objeù
* 
obj
 = 
	`g‘AÂÙ©iÚV®ue
(
şazz
, 
pAÂoI‹m
, "value",

1719 
kDexAÂÙ©iÚA¼ay
, "Throws");

1720 ià(
obj
 =ğ
GAV_FAILED
)

1721  
NULL
;

1722 
	`as£¹
(
	`dvmIsA¼ay
((
A¼ayObjeù
*)
obj
));

1723 
obj
 = 
	`cÚv”tR‘uºTy³
(obj, 
gDvm
.
şassJavaLªgCÏssA¼ay
);

1724  (
A¼ayObjeù
*)
obj
;

1725 
	}
}

1735 
Objeù
* 
	$dvmG‘AÂÙ©iÚDeçuÉV®ue
(cÚ¡ 
M‘hod
* 
m‘hod
)

1737 cÚ¡ 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

1738 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1739 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1740 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1748 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1749 ià(
pAÂoDœ
 !ğ
NULL
)

1750 
pAÂoS‘
 = 
	`dexG‘CÏssAÂÙ©iÚS‘
(
pDexFe
, 
pAÂoDœ
);

1751 ià(
pAÂoS‘
 =ğ
NULL
) {

1753  
NULL
;

1757 cÚ¡ 
DexAÂÙ©iÚI‹m
* 
pAÂoI‹m
;

1758 
pAÂoI‹m
 = 
	`£¬chAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
, 
kDesüAÂÙ©iÚDeçuÉ
,

1759 
kDexVisib™ySy¡em
);

1760 ià(
pAÂoI‹m
 =ğ
NULL
) {

1764  
NULL
;

1771 cÚ¡ 
u1
* 
±r
;

1772 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
, 
pAÂoI‹m
->
ªnÙ©iÚ
, "value");

1773 ià(
±r
 =ğ
NULL
) {

1774 
	`LOGW
("AnnotationDefault‡nnotation†acks 'value'\n");

1775  
NULL
;

1777 ià((*
±r
 & 
kDexAÂÙ©iÚV®ueTy³Mask
è!ğ
kDexAÂÙ©iÚAÂÙ©iÚ
) {

1778 
	`LOGW
("AnnotationDefault value has wrongype (0x%02x)\n",

1779 *
±r
 & 
kDexAÂÙ©iÚV®ueTy³Mask
);

1780  
NULL
;

1788 
±r
++;

1789 
±r
 = 
	`£¬chEncodedAÂÙ©iÚ
(
şazz
,…Œ, 
m‘hod
->
Çme
);

1790 ià(
±r
 =ğ
NULL
)

1791  
NULL
;

1794 
AÂÙ©iÚV®ue
 
av®ue
;

1795 ià(!
	`´oûssAÂÙ©iÚV®ue
(
şazz
, &
±r
, &
av®ue
, 
kAÎObjeùs
)) {

1796 
	`LOGD
("processAnnotationValue failed on default for '%s'\n",

1797 
m‘hod
->
Çme
);

1798  
NULL
;

1802 
CÏssObjeù
* 
m‘hodR‘uº
 = 
	`dvmG‘BoxedR‘uºTy³
(
m‘hod
);

1803 
Objeù
* 
obj
 = 
av®ue
.
v®ue
.
l
;

1804 
obj
 = 
	`cÚv”tR‘uºTy³
(obj, 
m‘hodR‘uº
);

1806  
obj
;

1807 
	}
}

1820 
	$com·»F›ldSŒ
(
DexFe
* 
pDexFe
, 
u4
 
idx
, cÚ¡ 
F›ld
* 
f›ld
)

1822 cÚ¡ 
DexF›ldId
* 
pF›ldId
 = 
	`dexG‘F›ldId
(
pDexFe
, 
idx
);

1823 cÚ¡ * 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
şassIdx
);

1824 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
f›ld
->
şazz
->
desütÜ
);

1826 ià(
»suÉ
 == 0) {

1827 
¡r
 = 
	`dexSŒšgById
(
pDexFe
, 
pF›ldId
->
ÇmeIdx
);

1828 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
f›ld
->
Çme
);

1829 ià(
»suÉ
 == 0) {

1830 
¡r
 = 
	`dexSŒšgByTy³Idx
(
pDexFe
, 
pF›ldId
->
ty³Idx
);

1831 
»suÉ
 = 
	`¡rcmp
(
¡r
, 
f›ld
->
sigÇtu»
);

1835  
»suÉ
;

1836 
	}
}

1843 
u4
 
	$g‘F›ldIdx
(cÚ¡ 
F›ld
* 
f›ld
)

1845 
DexFe
* 
pDexFe
 = 
f›ld
->
şazz
->
pDvmDex
->pDexFile;

1846 
u4
 
hi
 = 
pDexFe
->
pH—d”
->
f›ldIdsSize
 -1;

1847 
u4
 
lo
 = 0;

1848 
u4
 
cur
;

1850 
hi
 >ğ
lo
) {

1851 
cmp
;

1852 
cur
 = (
lo
 + 
hi
) / 2;

1854 
cmp
 = 
	`com·»F›ldSŒ
(
pDexFe
, 
cur
, 
f›ld
);

1855 ià(
cmp
 < 0) {

1856 
lo
 = 
cur
 + 1;

1857 } ià(
cmp
 > 0) {

1858 
hi
 = 
cur
 - 1;

1864 ià(
hi
 < 
lo
) {

1866 
	`LOGE
("Unableo find field %s.%s %s in DEX file!\n",

1867 
f›ld
->
şazz
->
desütÜ
, f›ld->
Çme
, f›ld->
sigÇtu»
);

1868 
	`dvmAbÜt
();

1871  
cur
;

1872 
	}
}

1879 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
	$fšdAÂÙ©iÚS‘FÜF›ld
(cÚ¡ 
F›ld
* 
f›ld
)

1881 
CÏssObjeù
* 
şazz
 = 
f›ld
->clazz;

1882 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1883 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1884 cÚ¡ 
DexF›ldAÂÙ©iÚsI‹m
* 
pF›ldLi¡
;

1885 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1887 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

1888 ià(
pAÂoDœ
 =ğ
NULL
)

1889  
NULL
;

1891 
pF›ldLi¡
 = 
	`dexG‘F›ldAÂÙ©iÚs
(
pDexFe
, 
pAÂoDœ
);

1892 ià(
pF›ldLi¡
 =ğ
NULL
)

1893  
NULL
;

1906 
u4
 
f›ldIdx
 = 
	`g‘F›ldIdx
(
f›ld
);

1907 
u4
 
couÁ
 = 
	`dexG‘F›ldAÂÙ©iÚsSize
(
pDexFe
, 
pAÂoDœ
);

1908 
u4
 
idx
;

1910 
idx
 = 0; idx < 
couÁ
; idx++) {

1911 ià(
pF›ldLi¡
[
idx
].
f›ldIdx
 == fieldIdx) {

1913  
	`dexG‘F›ldAÂÙ©iÚS‘I‹m
(
pDexFe
, &
pF›ldLi¡
[
idx
]);

1917  
NULL
;

1918 
	}
}

1928 
A¼ayObjeù
* 
	$dvmG‘F›ldAÂÙ©iÚs
(cÚ¡ 
F›ld
* 
f›ld
)

1930 
CÏssObjeù
* 
şazz
 = 
f›ld
->clazz;

1931 
A¼ayObjeù
* 
ªnoA¼ay
 = 
NULL
;

1932 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1933 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

1934 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
 = 
NULL
;

1936 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜF›ld
(
f›ld
);

1937 ià(
pAÂoS‘
 =ğ
NULL
) {

1939 
ªnoA¼ay
 = 
	`em±yAÂoA¼ay
();

1941 
ªnoA¼ay
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

1942 
kDexVisib™yRuÁime
);

1945  
ªnoA¼ay
;

1946 
	}
}

1954 
A¼ayObjeù
* 
	$dvmG‘F›ldSigÇtu»AÂÙ©iÚ
(cÚ¡ 
F›ld
* 
f›ld
)

1956 
CÏssObjeù
* 
şazz
 = 
f›ld
->clazz;

1957 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

1958 
A¼ayObjeù
* 
sigÇtu»
 = 
NULL
;

1960 
pAÂoS‘
 = 
	`fšdAÂÙ©iÚS‘FÜF›ld
(
f›ld
);

1961 ià(
pAÂoS‘
 !ğ
NULL
)

1962 
sigÇtu»
 = 
	`g‘SigÇtu»V®ue
(
şazz
, 
pAÂoS‘
);

1964  
sigÇtu»
;

1965 
	}
}

1980 
A¼ayObjeù
* 
	$´oûssAÂÙ©iÚS‘RefLi¡
(cÚ¡ 
CÏssObjeù
* 
şazz
,

1981 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
pAÂoS‘Li¡
, 
u4
 
couÁ
)

1983 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

1984 
A¼ayObjeù
* 
ªnoA¼ayA¼ay
 = 
NULL
;

1985 
A¼ayObjeù
** 
pCÚ‹Ás
;

1986 
u4
 
idx
;

1989 
ªnoA¼ayA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(

1990 
gDvm
.
şassJavaLªgAÂÙ©iÚAÂÙ©iÚA¼ayA¼ay
, 
couÁ
, 
ALLOC_DEFAULT
);

1991 ià(
ªnoA¼ayA¼ay
 =ğ
NULL
) {

1992 
	`LOGW
("annotation set„ef‡rray‡lloc failed\n");

1993 
ba
;

1996 
pCÚ‹Ás
 = (
A¼ayObjeù
**è
ªnoA¼ayA¼ay
->
cÚ‹Ás
;

1998 
idx
 = 0; idx < 
couÁ
; idx++) {

1999 
Th»ad
* 
£lf
 = 
	`dvmTh»adS–f
();

2000 cÚ¡ 
DexAÂÙ©iÚS‘RefI‹m
* 
pI‹m
;

2001 cÚ¡ 
DexAÂÙ©iÚS‘I‹m
* 
pAÂoS‘
;

2003 
pI‹m
 = 
	`dexG‘P¬am‘”AÂÙ©iÚS‘Ref
(
pAÂoS‘Li¡
, 
idx
);

2004 
pAÂoS‘
 = 
	`dexG‘S‘RefI‹mI‹m
(
pDexFe
, 
pI‹m
);

2005 *
pCÚ‹Ás
 = 
	`´oûssAÂÙ©iÚS‘
(
şazz
, 
pAÂoS‘
,

2006 
kDexVisib™yRuÁime
);

2007 ià(*
pCÚ‹Ás
 =ğ
NULL
) {

2008 
	`LOGW
("processAnnotationSet failed\n");

2009 
ªnoA¼ayA¼ay
 = 
NULL
;

2010 
ba
;

2012 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è*
pCÚ‹Ás
, 
£lf
);

2013 
pCÚ‹Ás
++;

2016 
ba
:

2017  
ªnoA¼ayA¼ay
;

2018 
	}
}

2025 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
	$fšdAÂÙ©iÚsI‹mFÜM‘hod
(

2026 cÚ¡ 
M‘hod
* 
m‘hod
)

2028 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2029 
DexFe
* 
pDexFe
;

2030 cÚ¡ 
DexAÂÙ©iÚsDœeùÜyI‹m
* 
pAÂoDœ
;

2031 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
pP¬am‘”Li¡
;

2033 ià(
şazz
->
pDvmDex
 =ğ
NULL
)

2034  
NULL
;

2036 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2037 
pAÂoDœ
 = 
	`g‘AÂoDœeùÜy
(
pDexFe
, 
şazz
);

2038 ià(
pAÂoDœ
 =ğ
NULL
)

2039  
NULL
;

2041 
pP¬am‘”Li¡
 = 
	`dexG‘P¬am‘”AÂÙ©iÚs
(
pDexFe
, 
pAÂoDœ
);

2042 ià(
pP¬am‘”Li¡
 =ğ
NULL
)

2043  
NULL
;

2056 
u4
 
m‘hodIdx
 = 
	`g‘M‘hodIdx
(
m‘hod
);

2057 
u4
 
couÁ
 = 
	`dexG‘P¬am‘”AÂÙ©iÚsSize
(
pDexFe
, 
pAÂoDœ
);

2058 
u4
 
idx
;

2060 
idx
 = 0; idx < 
couÁ
; idx++) {

2061 ià(
pP¬am‘”Li¡
[
idx
].
m‘hodIdx
 == methodIdx) {

2063  &
pP¬am‘”Li¡
[
idx
];

2067  
NULL
;

2068 
	}
}

2075 
	$couÁM‘hodArgum’ts
(cÚ¡ 
M‘hod
* 
m‘hod
)

2078  
	`¡¾’
(
m‘hod
->
shÜty
 + 1);

2079 
	}
}

2093 
A¼ayObjeù
* 
	$dvmG‘P¬am‘”AÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
)

2095 
CÏssObjeù
* 
şazz
 = 
m‘hod
->clazz;

2096 cÚ¡ 
DexP¬am‘”AÂÙ©iÚsI‹m
* 
pI‹m
;

2097 
A¼ayObjeù
* 
ªnoA¼ayA¼ay
 = 
NULL
;

2099 
pI‹m
 = 
	`fšdAÂÙ©iÚsI‹mFÜM‘hod
(
m‘hod
);

2100 ià(
pI‹m
 !ğ
NULL
) {

2101 
DexFe
* 
pDexFe
 = 
şazz
->
pDvmDex
->pDexFile;

2102 cÚ¡ 
DexAÂÙ©iÚS‘RefLi¡
* 
pAÂoS‘Li¡
;

2103 
u4
 
size
;

2105 
size
 = 
	`dexG‘P¬am‘”AÂÙ©iÚS‘RefSize
(
pDexFe
, 
pI‹m
);

2106 
pAÂoS‘Li¡
 = 
	`dexG‘P¬am‘”AÂÙ©iÚS‘RefLi¡
(
pDexFe
, 
pI‹m
);

2107 
ªnoA¼ayA¼ay
 = 
	`´oûssAÂÙ©iÚS‘RefLi¡
(
şazz
, 
pAÂoS‘Li¡
, 
size
);

2110 
ªnoA¼ayA¼ay
 = 
	`em±yAÂoA¼ayA¼ay
(
	`couÁM‘hodArgum’ts
(
m‘hod
));

2113  
ªnoA¼ayA¼ay
;

2114 
	}
}

2130 
	$dvmEncodedA¼ayI‹¿tÜIn™Ÿlize
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

2131 cÚ¡ 
DexEncodedA¼ay
* 
’codedA¼ay
, cÚ¡ 
CÏssObjeù
* 
şazz
) {

2132 
™”©Ü
->
’codedA¼ay
 =ƒncodedArray;

2133 
™”©Ü
->
cursÜ
 = 
’codedA¼ay
->
¬¿y
;

2134 
™”©Ü
->
size
 = 
	`»adUËb128
(&™”©Ü->
cursÜ
);

2135 
™”©Ü
->
–em’tsLeá
 = i‹¿tÜ->
size
;

2136 
™”©Ü
->
şazz
 = clazz;

2137 
	}
}

2142 
boŞ
 
	$dvmEncodedA¼ayI‹¿tÜHasNext
(cÚ¡ 
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
) {

2143  (
™”©Ü
->
–em’tsLeá
 != 0);

2144 
	}
}

2158 
boŞ
 
	$dvmEncodedA¼ayI‹¿tÜG‘Next
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

2159 
AÂÙ©iÚV®ue
* 
v®ue
) {

2160 
boŞ
 
´oûs£d
;

2162 ià(
™”©Ü
->
–em’tsLeá
 == 0) {

2163  
çl£
;

2166 
´oûs£d
 = 
	`´oûssAÂÙ©iÚV®ue
(
™”©Ü
->
şazz
, &™”©Ü->
cursÜ
,

2167 
v®ue
, 
kPrim™ivesOrObjeùs
);

2169 ià(! 
´oûs£d
) {

2170 
	`LOGE
("Failedo…rocess‡rrayƒlement %d from %p",

2171 
™”©Ü
->
size
 - i‹¿tÜ->
–em’tsLeá
,

2172 
™”©Ü
->
’codedA¼ay
);

2173 
™”©Ü
->
–em’tsLeá
 = 0;

2174  
çl£
;

2177 
™”©Ü
->
–em’tsLeá
--;

2178  
Œue
;

2179 
	}
}

	@reflect/Proxy.c

26 
	~"D®vik.h
"

28 
	~<¡dlib.h
>

31 
boŞ
 
»tuºTy³sA»Com·tibË
(
M‘hod
* 
ba£M‘hod
, M‘hod* 
subM‘hod
);

32 
boŞ
 
g©h”M‘hods
(
A¼ayObjeù
* 
š‹rçûs
, 
M‘hod
*** 
pM‘hods
,\

33 
A¼ayObjeù
** 
pThrows
, * 
pM‘hodCouÁ
);

34 
cİyW™houtDu¶iÿ‹s
(
M‘hod
** 
®lM‘hods
, 
®lCouÁ
,

35 
M‘hod
** 
outM‘hods
, 
A¼ayObjeù
* 
throws
);

36 
boŞ
 
ü—‹Exû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
,

37 
Poš‹rS‘
** 
pThrows
);

38 
upd©eExû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Poš‹rS‘
* 
throws
);

39 
ü—‹CÚ¡ruùÜ
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘h
);

40 
ü—‹HªdËrM‘hod
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
d¡M‘h
,

41 cÚ¡ 
M‘hod
* 
¤cM‘h
);

42 
´oxyCÚ¡ruùÜ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

43 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

44 
´oxyInvok”
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

45 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
);

46 
boŞ
 
mu¡W¿pExû±iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
Objeù
* 
throwabË
);

49 
	#kThrowsF›ld
 0

	)

55 
boŞ
 
	$dvmReæeùProxyS¹up
()

60 
M‘hod
* 
m‘hE
;

61 
M‘hod
* 
m‘hH
;

62 
M‘hod
* 
m‘hT
;

63 
M‘hod
* 
m‘hF
;

64 
m‘hE
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
gDvm
.
şassJavaLªgObjeù
,

66 
m‘hH
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
gDvm
.
şassJavaLªgObjeù
,

68 
m‘hT
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
gDvm
.
şassJavaLªgObjeù
,

70 
m‘hF
 = 
	`dvmFšdVœtu®M‘hodByDesütÜ
(
gDvm
.
şassJavaLªgObjeù
,

72 ià(
m‘hE
 =ğ
NULL
 || 
m‘hH
 =ğNULL || 
m‘hT
 =ğNULL || 
m‘hF
 == NULL) {

73 
	`LOGE
("Could‚ot findƒquals/hashCode/toString/finalize in Object\n");

74  
çl£
;

76 
gDvm
.
voffJavaLªgObjeù_equ®s
 = 
m‘hE
->
m‘hodIndex
;

77 
gDvm
.
voffJavaLªgObjeù_hashCode
 = 
m‘hH
->
m‘hodIndex
;

78 
gDvm
.
voffJavaLªgObjeù_toSŒšg
 = 
m‘hT
->
m‘hodIndex
;

79 
gDvm
.
voffJavaLªgObjeù_fš®ize
 = 
m‘hF
->
m‘hodIndex
;

86 
CÏssObjeù
* 
´oxyCÏss
;

87 
M‘hod
* 
m‘h
;

88 
´oxyCÏss
 = 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/reflect/Proxy;");

89 ià(
´oxyCÏss
 =ğ
NULL
) {

90 
	`LOGE
("No java.lang.reflect.Proxy\n");

91  
çl£
;

93 
m‘h
 = 
	`dvmFšdDœeùM‘hodByDesütÜ
(
´oxyCÏss
, "constructorPrototype",

95 ià(
m‘h
 =ğ
NULL
) {

96 
	`LOGE
("Could‚ot find java.lang.Proxy.constructorPrototype()\n");

97  
çl£
;

99 
gDvm
.
m‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
 = 
m‘h
;

104 
gDvm
.
offJavaLªgReæeùProxy_h
 = 
	`dvmFšdF›ldOff£t
(
´oxyCÏss
, "h",

106 ià(
gDvm
.
offJavaLªgReæeùProxy_h
 < 0) {

107 
	`LOGE
("Unableo find 'h' field in java.lang.Proxy\n");

108  
çl£
;

111  
Œue
;

112 
	}
}

129 
CÏssObjeù
* 
	$dvmG’”©eProxyCÏss
(
SŒšgObjeù
* 
¡r
, 
A¼ayObjeù
* 
š‹rçûs
,

130 
Objeù
* 
lßd”
)

132 
»suÉ
 = -1;

133 * 
ÇmeSŒ
 = 
NULL
;

134 
M‘hod
** 
m‘hods
 = 
NULL
;

135 
A¼ayObjeù
* 
throws
 = 
NULL
;

136 
CÏssObjeù
* 
ÃwCÏss
 = 
NULL
;

137 
i
;

139 
ÇmeSŒ
 = 
	`dvmC»©eC¡rFromSŒšg
(
¡r
);

140 ià(
ÇmeSŒ
 =ğ
NULL
) {

141 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

143 
ba
;

146 
	`LOGV
("+++ Generate…roxy class '%s' %p from %d interface classes\n",

147 
ÇmeSŒ
, 
lßd”
, 
š‹rçûs
->
Ëngth
);

173 
m‘hodCouÁ
 = -1;

174 ià(!
	`g©h”M‘hods
(
š‹rçûs
, &
m‘hods
, &
throws
, &
m‘hodCouÁ
))

175 
ba
;

180 
ÃwCÏss
 = (
CÏssObjeù
*è
	`dvmM®loc
((*ÃwCÏss), 
ALLOC_DEFAULT
);

181 ià(
ÃwCÏss
 =ğ
NULL
)

182 
ba
;

183 
	`DVM_OBJECT_INIT
(&
ÃwCÏss
->
obj
, 
gDvm
.
uÆškedJavaLªgCÏss
);

184 
	`dvmS‘CÏssS”ŸlNumb”
(
ÃwCÏss
);

185 
ÃwCÏss
->
desütÜAÎoc
 = 
	`dvmNameToDesütÜ
(
ÇmeSŒ
);

186 
ÃwCÏss
->
desütÜ
 =‚ewCÏss->
desütÜAÎoc
;

187 
ÃwCÏss
->
acûssFÏgs
 = 
ACC_PUBLIC
 | 
ACC_FINAL
;

188 
ÃwCÏss
->
su³r
 = 
gDvm
.
şassJavaLªgReæeùProxy
;

189 
ÃwCÏss
->
´im™iveTy³
 = 
PRIM_NOT
;

190 
ÃwCÏss
->
şassLßd”
 = 
lßd”
;

191 #ià
WITH_HPROF
 && 
WITH_HPROF_STACK


192 
	`h´ofFlInSckT¿û
(
ÃwCÏss
);

198 
ÃwCÏss
->
dœeùM‘hodCouÁ
 = 1;

199 
ÃwCÏss
->
dœeùM‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

200 1 * (
M‘hod
));

201 
	`ü—‹CÚ¡ruùÜ
(
ÃwCÏss
, &ÃwCÏss->
dœeùM‘hods
[0]);

202 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
dœeùM‘hods
);

207 
ÃwCÏss
->
vœtu®M‘hodCouÁ
 = 
m‘hodCouÁ
;

208 
ÃwCÏss
->
vœtu®M‘hods
 = (
M‘hod
*è
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

209 
ÃwCÏss
->
vœtu®M‘hodCouÁ
 * (
M‘hod
));

210 
i
 = 0; i < 
ÃwCÏss
->
vœtu®M‘hodCouÁ
; i++) {

211 
	`ü—‹HªdËrM‘hod
(
ÃwCÏss
, &ÃwCÏss->
vœtu®M‘hods
[
i
],
m‘hods
[i]);

213 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
vœtu®M‘hods
);

218 
š‹rçûCouÁ
 = 
š‹rçûs
->
Ëngth
;

219 
CÏssObjeù
** 
ifA¼ay
 = (CÏssObjeù**è
š‹rçûs
->
cÚ‹Ás
;

220 
ÃwCÏss
->
š‹rçûCouÁ
 = interfaceCount;

221 
ÃwCÏss
->
š‹rçûs
 = (
CÏssObjeù
**)
	`dvmLš—rAÎoc
ÒewCÏss->
şassLßd”
,

222 (
CÏssObjeù
*è* 
š‹rçûCouÁ
);

223 
i
 = 0; i < 
š‹rçûCouÁ
; i++)

224 
ÃwCÏss
->
š‹rçûs
[
i
] = 
ifA¼ay
[i];

225 
	`dvmLš—rR—dOÆy
(
ÃwCÏss
->
şassLßd”
,‚ewCÏss->
š‹rçûs
);

231 
ÃwCÏss
->
sf›ldCouÁ
 = 1;

232 
ÃwCÏss
->
sf›lds
 = (
SticF›ld
*è
	`ÿÎoc
(1, (StaticField));

233 
SticF›ld
* 
sf›ld
 = &
ÃwCÏss
->
sf›lds
[
kThrowsF›ld
];

234 
sf›ld
->
f›ld
.
şazz
 = 
ÃwCÏss
;

235 
sf›ld
->
f›ld
.
Çme
 = "throws";

236 
sf›ld
->
f›ld
.
sigÇtu»
 = "[[Ljava/lang/Throwable;";

237 
sf›ld
->
f›ld
.
acûssFÏgs
 = 
ACC_STATIC
 | 
ACC_PRIVATE
;

238 
	`dvmS‘SticF›ldObjeù
(
sf›ld
, (
Objeù
*)
throws
);

243 
ÃwCÏss
->
¡©us
 = 
CLASS_LOADED
;

244 ià(!
	`dvmLškCÏss
(
ÃwCÏss
, 
Œue
)) {

245 
	`LOGD
("Proxy class†ink failed\n");

246 
ba
;

254 ià(!
	`dvmAddCÏssToHash
(
ÃwCÏss
)) {

255 
	`LOGE
("ERROR:‡ttemptedo generate %s morehan once\n",

256 
ÃwCÏss
->
desütÜ
);

257 
ba
;

260 
»suÉ
 = 0;

262 
ba
:

263 
	`ä“
(
ÇmeSŒ
);

264 
	`ä“
(
m‘hods
);

265 ià(
»suÉ
 != 0) {

267 
	`dvmF»eCÏssIÂ¬ds
(
ÃwCÏss
);

268 
ÃwCÏss
 = 
NULL
;

269 ià(!
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

271 
	`dvmThrowExû±iÚ
("Ljava/Ïng/RuÁimeExû±iÚ;", 
NULL
);

276 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
throws
, 
NULL
);

277 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÃwCÏss
, 
NULL
);

279  
ÃwCÏss
;

280 
	}
}

292 
boŞ
 
	$g©h”M‘hods
(
A¼ayObjeù
* 
š‹rçûs
, 
M‘hod
*** 
pM‘hods
,

293 
A¼ayObjeù
** 
pThrows
, * 
pM‘hodCouÁ
)

295 
CÏssObjeù
** 
şas£s
;

296 
A¼ayObjeù
* 
throws
 = 
NULL
;

297 
M‘hod
** 
m‘hods
 = 
NULL
;

298 
M‘hod
** 
®lM‘hods
 = 
NULL
;

299 
numIÁ”çûs
, 
maxCouÁ
, 
aùu®CouÁ
, 
®lCouÁ
;

300 
boŞ
 
»suÉ
 = 
çl£
;

301 
i
;

307 
maxCouÁ
 = 3;

308 
numIÁ”çûs
 = 
š‹rçûs
->
Ëngth
;

309 
şas£s
 = (
CÏssObjeù
**è
š‹rçûs
->
cÚ‹Ás
;

311 
i
 = 0; i < 
numIÁ”çûs
; i++, 
şas£s
++) {

312 
CÏssObjeù
* 
şazz
 = *
şas£s
;

314 
	`LOGVV
("--- %s virtualMethodCount=%d\n",

315 
şazz
->
desütÜ
, cÏzz->
vœtu®M‘hodCouÁ
);

316 
maxCouÁ
 +ğ
şazz
->
vœtu®M‘hodCouÁ
;

318 
j
;

319 
j
 = 0; j < 
şazz
->
iáabËCouÁ
; j++) {

320 
CÏssObjeù
* 
işass
 = 
şazz
->
iáabË
[
j
].clazz;

322 
	`LOGVV
("--- +%s %d\n",

323 
işass
->
desütÜ
, işass->
vœtu®M‘hodCouÁ
);

324 
maxCouÁ
 +ğ
işass
->
vœtu®M‘hodCouÁ
;

328 
m‘hods
 = (
M‘hod
**è
	`m®loc
(
maxCouÁ
 * (*methods));

329 
®lM‘hods
 = (
M‘hod
**è
	`m®loc
(
maxCouÁ
 * (*
m‘hods
));

330 ià(
m‘hods
 =ğ
NULL
 || 
®lM‘hods
 == NULL)

331 
ba
;

336 
CÏssObjeù
* 
obj
 = 
gDvm
.
şassJavaLªgObjeù
;

337 
®lM‘hods
[0] = 
obj
->
vbË
[
gDvm
.
voffJavaLªgObjeù_equ®s
];

338 
®lM‘hods
[1] = 
obj
->
vbË
[
gDvm
.
voffJavaLªgObjeù_hashCode
];

339 
®lM‘hods
[2] = 
obj
->
vbË
[
gDvm
.
voffJavaLªgObjeù_toSŒšg
];

340 
®lCouÁ
 = 3;

345 
şas£s
 = (
CÏssObjeù
**è
š‹rçûs
->
cÚ‹Ás
;

346 
i
 = 0; i < 
numIÁ”çûs
; i++, 
şas£s
++) {

347 
CÏssObjeù
* 
şazz
 = *
şas£s
;

348 
j
;

350 
j
 = 0; j < 
şazz
->
vœtu®M‘hodCouÁ
; j++) {

351 
®lM‘hods
[
®lCouÁ
++] = &
şazz
->
vœtu®M‘hods
[
j
];

354 
j
 = 0; j < 
şazz
->
iáabËCouÁ
; j++) {

355 
CÏssObjeù
* 
işass
 = 
şazz
->
iáabË
[
j
].clazz;

356 
k
;

358 
k
 = 0; k < 
işass
->
vœtu®M‘hodCouÁ
; k++) {

359 
®lM‘hods
[
®lCouÁ
++] = &
işass
->
vœtu®M‘hods
[
k
];

363 
	`as£¹
(
®lCouÁ
 =ğ
maxCouÁ
);

370 
CÏssObjeù
* 
¬rA¼CÏss
;

371 
¬rA¼CÏss
 = 
	`dvmFšdA¼ayCÏss
("[[Ljava/Ïng/ThrowabË;", 
NULL
);

372 ià(
¬rA¼CÏss
 =ğ
NULL
)

373 
ba
;

374 
throws
 = 
	`dvmAÎocA¼ayByCÏss
(
¬rA¼CÏss
, 
®lCouÁ
, 
ALLOC_DEFAULT
);

379 
aùu®CouÁ
 = 
	`cİyW™houtDu¶iÿ‹s
(
®lM‘hods
, 
®lCouÁ
, 
m‘hods
, 
throws
);

380 ià(
aùu®CouÁ
 < 0)

381 
ba
;

389 *
pM‘hods
 = 
m‘hods
;

390 *
pM‘hodCouÁ
 = 
aùu®CouÁ
;

391 *
pThrows
 = 
throws
;

392 
»suÉ
 = 
Œue
;

394 
ba
:

395 
	`ä“
(
®lM‘hods
);

396 ià(!
»suÉ
) {

397 
	`ä“
(
m‘hods
);

398 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
throws
, 
NULL
);

400  
»suÉ
;

401 
	}
}

425 
	$cİyW™houtDu¶iÿ‹s
(
M‘hod
** 
®lM‘hods
, 
®lCouÁ
,

426 
M‘hod
** 
outM‘hods
, 
A¼ayObjeù
* 
throwLi¡s
)

428 
M‘hod
* 
be¡
;

429 
outCouÁ
 = 0;

430 
i
, 
j
;

445 
i
 = 0; i < 
®lCouÁ
; i++) {

446 
boŞ
 
be¡
, 
du³
;

448 ià(
®lM‘hods
[
i
] =ğ
NULL
)

458 
du³
 = 
çl£
;

459 
be¡
 = 
Œue
;

460 
j
 = 0; j < 
®lCouÁ
; j++) {

461 ià(
i
 =ğ
j
)

463 ià(
®lM‘hods
[
j
] =ğ
NULL
)

466 ià(
	`dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(
®lM‘hods
[
i
],

467 
®lM‘hods
[
j
]) == 0)

474 
	`LOGV
("MATCH on %s.%s‡nd %s.%s\n",

475 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
,

476 
®lM‘hods
[
j
]->
şazz
->
desütÜ
,‡ÎM‘hods[j]->
Çme
);

477 
du³
 = 
Œue
;

478 ià(!
	`»tuºTy³sA»Com·tibË
(
®lM‘hods
[
i
],‡ÎM‘hods[
j
]))

479 
be¡
 = 
çl£
;

490 ià(
du³
) {

491 ià(
be¡
) {

492 
	`LOGV
("BEST %d %s.% -> %d\n", 
i
,

493 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
,

494 
outCouÁ
);

497 
Poš‹rS‘
* 
commÚThrows
 = 
NULL
;

498 ià(!
	`ü—‹Exû±iÚCÏssLi¡
(
®lM‘hods
[
i
], &
commÚThrows
))

505 
j
 = 0; j < 
®lCouÁ
; j++) {

506 ià(
i
 =ğ
j
)

508 ià(
®lM‘hods
[
j
] =ğ
NULL
)

510 ià(
	`dvmCom·»M‘hodNamesAndP¬am‘”PrÙos
(
®lM‘hods
[
i
],

511 
®lM‘hods
[
j
]) == 0)

513 
	`LOGV
("DEL %d %s.%s\n", 
j
,

514 
®lM‘hods
[
j
]->
şazz
->
desütÜ
,

515 
®lM‘hods
[
j
]->
Çme
);

521 ià(
commÚThrows
 !ğ
NULL
) {

522 
	`upd©eExû±iÚCÏssLi¡
(
®lM‘hods
[
j
],

523 
commÚThrows
);

526 
®lM‘hods
[
j
] = 
NULL
;

535 ià(
commÚThrows
 !ğ
NULL
 &&

536 
	`dvmPoš‹rS‘G‘CouÁ
(
commÚThrows
) > 0)

538 
commÚCouÁ
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
commÚThrows
);

539 
A¼ayObjeù
* 
throwA¼ay
;

540 
Objeù
** 
cÚ‹Ás
;

541 
’t
;

543 
throwA¼ay
 = 
	`dvmAÎocA¼ayByCÏss
(

544 
gDvm
.
şassJavaLªgCÏssA¼ay
, 
commÚCouÁ
,

545 
ALLOC_DEFAULT
);

546 ià(
throwA¼ay
 =ğ
NULL
) {

547 
	`LOGE
("common-throw‡rray‡lloc failed\n");

551 
cÚ‹Ás
 = (
Objeù
**è
throwA¼ay
->contents;

552 
’t
 = 0;ƒÁ < 
commÚCouÁ
;ƒnt++) {

553 
cÚ‹Ás
[
’t
] = (
Objeù
*)

554 
	`dvmPoš‹rS‘G‘EÁry
(
commÚThrows
, 
’t
);

558 
cÚ‹Ás
 = (
Objeù
**è
throwLi¡s
->contents;

559 
cÚ‹Ás
[
outCouÁ
] = (
Objeù
*è
throwA¼ay
;

560 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
throwA¼ay
, 
NULL
);

564 
outM‘hods
[
outCouÁ
++] = 
®lM‘hods
[
i
];

565 
®lM‘hods
[
i
] = 
NULL
;

567 
	`dvmPoš‹rS‘F»e
(
commÚThrows
);

569 
	`LOGV
("BEST‚Ù %d\n", 
i
);

575 
	`LOGV
("COPY sšgËtÚ %d %s.% -> %d\n", 
i
,

576 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
,

577 
outCouÁ
);

580 
A¼ayObjeù
* 
exû±iÚA¼ay
 = 
	`dvmG‘M‘hodThrows
(
®lM‘hods
[
i
]);

581 ià(
exû±iÚA¼ay
 !ğ
NULL
) {

582 
Objeù
** 
cÚ‹Ás
;

584 
cÚ‹Ás
 = (
Objeù
**è
throwLi¡s
->contents;

585 
cÚ‹Ás
[
outCouÁ
] = (
Objeù
*è
exû±iÚA¼ay
;

586 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚA¼ay
, 
NULL
);

589 
outM‘hods
[
outCouÁ
++] = 
®lM‘hods
[
i
];

590 
®lM‘hods
[
i
] = 
NULL
;

597 
i
 = 0; i < 
®lCouÁ
; i++) {

598 ià(
®lM‘hods
[
i
] !ğ
NULL
) {

599 
	`LOGV
("BAD DUPE: %d %s.%s\n", 
i
,

600 
®lM‘hods
[
i
]->
şazz
->
desütÜ
,‡ÎM‘hods[i]->
Çme
);

601 
	`dvmThrowExû±iÚ
("Ljava/lang/IllegalArgumentException;",

607  
outCouÁ
;

608 
	}
}

620 
	$»duûExû±iÚCÏssLi¡
(
A¼ayObjeù
* 
exû±iÚA¼ay
)

622 cÚ¡ 
CÏssObjeù
** 
şas£s
 = (cÚ¡ CÏssObjeù**)
exû±iÚA¼ay
->
cÚ‹Ás
;

623 
Ën
 = 
exû±iÚA¼ay
->
Ëngth
;

624 
i
, 
j
;

630 
i
 = 0; i < 
Ën
-1; i++) {

631 ià(
şas£s
[
i
] =ğ
NULL
)

633 
j
 = 
i
 + 1; j < 
Ën
; j++) {

634 ià(
şas£s
[
j
] =ğ
NULL
)

637 ià(
	`dvmIn¡ªûof
(
şas£s
[
i
], cÏs£s[
j
])) {

638 
şas£s
[
i
] = 
NULL
;

640 } ià(
	`dvmIn¡ªûof
(
şas£s
[
j
], cÏs£s[
i
])) {

641 
şas£s
[
j
] = 
NULL
;

645 
	}
}

653 
boŞ
 
	$ü—‹Exû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Poš‹rS‘
** 
pThrows
)

655 
A¼ayObjeù
* 
exû±iÚA¼ay
 = 
NULL
;

656 
boŞ
 
»suÉ
 = 
çl£
;

658 
exû±iÚA¼ay
 = 
	`dvmG‘M‘hodThrows
(
m‘hod
);

659 ià(
exû±iÚA¼ay
 !ğ
NULL
 &&ƒxû±iÚA¼ay->
Ëngth
 > 0) {

661 
	`»duûExû±iÚCÏssLi¡
(
exû±iÚA¼ay
);

663 *
pThrows
 = 
	`dvmPoš‹rS‘AÎoc
(
exû±iÚA¼ay
->
Ëngth
);

664 ià(*
pThrows
 =ğ
NULL
)

665 
ba
;

667 cÚ¡ 
CÏssObjeù
** 
cÚ‹Ás
;

668 
i
;

670 
cÚ‹Ás
 = (cÚ¡ 
CÏssObjeù
**è
exû±iÚA¼ay
->contents;

671 
i
 = 0; i < (è
exû±iÚA¼ay
->
Ëngth
; i++) {

672 ià(
cÚ‹Ás
[
i
] !ğ
NULL
)

673 
	`dvmPoš‹rS‘AddEÁry
(*
pThrows
, 
cÚ‹Ás
[
i
]);

676 *
pThrows
 = 
NULL
;

679 
»suÉ
 = 
Œue
;

681 
ba
:

682 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚA¼ay
, 
NULL
);

683  
»suÉ
;

684 
	}
}

695 
	$upd©eExû±iÚCÏssLi¡
(cÚ¡ 
M‘hod
* 
m‘hod
, 
Poš‹rS‘
* 
throws
)

697 
£tSize
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
throws
);

698 ià(
£tSize
 == 0)

701 
A¼ayObjeù
* 
exû±iÚA¼ay
 = 
	`dvmG‘M‘hodThrows
(
m‘hod
);

702 ià(
exû±iÚA¼ay
 =ğ
NULL
) {

704 
	`dvmPoš‹rS‘CË¬
(
throws
);

709 
	`»duûExû±iÚCÏssLi¡
(
exû±iÚA¼ay
);

711 
mixL’
 = 
	`dvmPoš‹rS‘G‘CouÁ
(
throws
);

712 cÚ¡ 
CÏssObjeù
* 
mixS‘
[
mixL’
];

714 
deşL’
 = 
exû±iÚA¼ay
->
Ëngth
;

715 cÚ¡ 
CÏssObjeù
** 
deşS‘
 = (cÚ¡ CÏssObjeù**)
exû±iÚA¼ay
->
cÚ‹Ás
;

717 
i
, 
j
;

720 
i
 = 0; i < 
mixL’
; i++) {

721 
mixS‘
[
i
] = 
	`dvmPoš‹rS‘G‘EÁry
(
throws
, i);

724 
i
 = 0; i < 
mixL’
; i++) {

725 
j
 = 0; j < 
deşL’
; j++) {

726 ià(
deşS‘
[
j
] =ğ
NULL
)

729 ià(
mixS‘
[
i
] =ğ
deşS‘
[
j
]) {

732 } ià(
	`dvmIn¡ªûof
(
mixS‘
[
i
], 
deşS‘
[
j
])) {

735 } ià(
	`dvmIn¡ªûof
(
deşS‘
[
j
], 
mixS‘
[
i
])) {

737 
mixS‘
[
i
] = 
deşS‘
[
j
];

742 ià(
j
 =ğ
deşL’
) {

744 
mixS‘
[
i
] = 
NULL
;

749 
	`dvmPoš‹rS‘CË¬
(
throws
);

750 
i
 = 0; i < 
mixL’
; i++) {

751 ià(
mixS‘
[
i
] !ğ
NULL
)

752 
	`dvmPoš‹rS‘AddEÁry
(
throws
, 
mixS‘
[
i
]);

755 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚA¼ay
, 
NULL
);

756 
	}
}

767 
boŞ
 
	$»tuºTy³sA»Com·tibË
(
M‘hod
* 
subM‘hod
, M‘hod* 
ba£M‘hod
)

769 cÚ¡ * 
ba£Sig
 = 
	`dexPrÙoG‘R‘uºTy³
(&
ba£M‘hod
->
´ÙÙy³
);

770 cÚ¡ * 
subSig
 = 
	`dexPrÙoG‘R‘uºTy³
(&
subM‘hod
->
´ÙÙy³
);

771 
CÏssObjeù
* 
ba£CÏss
;

772 
CÏssObjeù
* 
subCÏss
;

774 ià(
ba£Sig
[1] =ğ'\0' || 
subSig
[1] == '\0') {

776  (
ba£Sig
[0] =ğ
subSig
[0] && baseSig[1] == subSig[1]);

779 
ba£CÏss
 = 
	`dvmFšdCÏss
(
ba£Sig
, 
ba£M‘hod
->
şazz
->
şassLßd”
);

780 
subCÏss
 = 
	`dvmFšdCÏss
(
subSig
, 
subM‘hod
->
şazz
->
şassLßd”
);

781 
boŞ
 
»suÉ
 = 
	`dvmIn¡ªûof
(
subCÏss
, 
ba£CÏss
);

782  
»suÉ
;

783 
	}
}

789 
	$ü—‹CÚ¡ruùÜ
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘h
)

791 
m‘h
->
şazz
 = clazz;

792 
m‘h
->
acûssFÏgs
 = 
ACC_PUBLIC
 | 
ACC_NATIVE
;

793 
m‘h
->
Çme
 = "<init>";

794 
m‘h
->
´ÙÙy³
 =

795 
gDvm
.
m‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
->
´ÙÙy³
;

796 
m‘h
->
shÜty
 =

797 
gDvm
.
m‘hJavaLªgReæeùProxy_cÚ¡ruùÜPrÙÙy³
->
shÜty
;

800 
¬gsSize
 = 
	`dvmCompu‹M‘hodArgsSize
(
m‘h
) + 1;

801 
m‘h
->
»gi¡”sSize
 = m‘h->
šsSize
 = 
¬gsSize
;

803 
m‘h
->
ÇtiveFunc
 = 
´oxyCÚ¡ruùÜ
;

804 
	}
}

810 
	$ü—‹HªdËrM‘hod
(
CÏssObjeù
* 
şazz
, 
M‘hod
* 
d¡M‘h
,

811 cÚ¡ 
M‘hod
* 
¤cM‘h
)

813 
d¡M‘h
->
şazz
 = clazz;

814 
d¡M‘h
->
š¢s
 = (
u2
*è
¤cM‘h
;

815 
d¡M‘h
->
acûssFÏgs
 = 
ACC_PUBLIC
 | 
ACC_NATIVE
;

816 
d¡M‘h
->
Çme
 = 
¤cM‘h
->name;

817 
d¡M‘h
->
´ÙÙy³
 = 
¤cM‘h
->prototype;

818 
d¡M‘h
->
shÜty
 = 
¤cM‘h
->shorty;

821 
¬gsSize
 = 
	`dvmCompu‹M‘hodArgsSize
(
d¡M‘h
) + 1;

822 
d¡M‘h
->
»gi¡”sSize
 = d¡M‘h->
šsSize
 = 
¬gsSize
;

824 
d¡M‘h
->
ÇtiveFunc
 = 
´oxyInvok”
;

825 
	}
}

838 
A¼ayObjeù
* 
	$boxM‘hodArgs
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
u4
* 
¬gs
)

840 cÚ¡ * 
desc
 = &
m‘hod
->
shÜty
[1];

841 
A¼ayObjeù
* 
¬gA¼ay
 = 
NULL
;

842 
¬gCouÁ
;

843 
Objeù
** 
¬gObjeùs
;

844 
boŞ
 
çed
 = 
Œue
;

847 
¬gCouÁ
 = 
	`dexPrÙoG‘P¬am‘”CouÁ
(&
m‘hod
->
´ÙÙy³
);

850 
¬gA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgObjeùA¼ay
, 
¬gCouÁ
,

851 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

852 ià(
¬gA¼ay
 =ğ
NULL
)

853 
ba
;

854 
¬gObjeùs
 = (
Objeù
**è
¬gA¼ay
->
cÚ‹Ás
;

860 
¤cIndex
 = 0;

862 
¬gCouÁ
 = 0;

863 *
desc
 != '\0') {

864 
descCh¬
 = *(
desc
++);

865 
JV®ue
 
v®ue
;

867 
descCh¬
) {

874 
v®ue
.
i
 = 
¬gs
[
¤cIndex
++];

875 
¬gObjeùs
[
¬gCouÁ
] = (
Objeù
*è
	`dvmW¿pPrim™ive
(
v®ue
,

876 
	`dvmFšdPrim™iveCÏss
(
descCh¬
));

878 
	`dvmR–—£T¿ckedAÎoc
(
¬gObjeùs
[
¬gCouÁ
], 
NULL
);

879 
¬gCouÁ
++;

883 
v®ue
.
j
 = 
	`dvmG‘ArgLÚg
(
¬gs
, 
¤cIndex
);

884 
¤cIndex
 += 2;

885 
¬gObjeùs
[
¬gCouÁ
] = (
Objeù
*è
	`dvmW¿pPrim™ive
(
v®ue
,

886 
	`dvmFšdPrim™iveCÏss
(
descCh¬
));

887 
	`dvmR–—£T¿ckedAÎoc
(
¬gObjeùs
[
¬gCouÁ
], 
NULL
);

888 
¬gCouÁ
++;

892 
¬gObjeùs
[
¬gCouÁ
++] = (
Objeù
*è
¬gs
[
¤cIndex
++];

897 
çed
 = 
çl£
;

899 
ba
:

900 ià(
çed
) {

901 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
¬gA¼ay
, 
NULL
);

902 
¬gA¼ay
 = 
NULL
;

904  
¬gA¼ay
;

905 
	}
}

911 
	$´oxyCÚ¡ruùÜ
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

912 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

914 
Objeù
* 
obj
 = (Objeù*è
¬gs
[0];

915 
Objeù
* 
hªdËr
 = (Objeù*è
¬gs
[1];

917 
	`dvmS‘F›ldObjeù
(
obj
, 
gDvm
.
offJavaLªgReæeùProxy_h
, 
hªdËr
);

918 
	}
}

930 
	$´oxyInvok”
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
,

931 cÚ¡ 
M‘hod
* 
m‘hod
, 
Th»ad
* 
£lf
)

933 
Objeù
* 
thisObj
 = (Objeù*è
¬gs
[0];

934 
Objeù
* 
m‘hodObj
 = 
NULL
;

935 
A¼ayObjeù
* 
¬gA¼ay
 = 
NULL
;

936 
Objeù
* 
hªdËr
;

937 
M‘hod
* 
švoke
;

938 
CÏssObjeù
* 
»tuºTy³
;

939 
hOff£t
;

940 
JV®ue
 
švokeResuÉ
;

946 
hªdËr
 = 
	`dvmG‘F›ldObjeù
(
thisObj
, 
gDvm
.
offJavaLªgReæeùProxy_h
);

953 
švoke
 = 
	`dvmFšdVœtu®M‘hodH›rByDesütÜ
(
hªdËr
->
şazz
, "invoke",

955 ià(
švoke
 =ğ
NULL
) {

956 
	`LOGE
("Unableo find invoke()\n");

957 
	`dvmAbÜt
();

960 
	`LOGV
("invoke: %s.%s,his=%p, handler=%s\n",

961 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

962 
thisObj
, 
hªdËr
->
şazz
->
desütÜ
);

974 
m‘hodObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
((
M‘hod
*è
m‘hod
->
š¢s
);

975 ià(
m‘hodObj
 =ğ
NULL
) {

976 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

977 
ba
;

985 
»tuºTy³
 = 
	`dvmG‘BoxedR‘uºTy³
(
m‘hod
);

986 ià(
»tuºTy³
 =ğ
NULL
) {

987 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘hod
->
´ÙÙy³
);

988 
	`LOGE
("Could‚Ù d‘”mš»tuºy³ fÜ '%s'\n", 
desc
);

989 
	`ä“
(
desc
);

990 
	`as£¹
(
	`dvmCheckExû±iÚ
(
£lf
));

991 
ba
;

993 
	`LOGV
("„‘uºy³ wÈb%s\n", 
»tuºTy³
->
desütÜ
);

1000 
¬gA¼ay
 = 
	`boxM‘hodArgs
(
m‘hod
, 
¬gs
+1);

1001 ià(
	`dvmCheckExû±iÚ
(
£lf
))

1002 
ba
;

1010 
	`dvmC®lM‘hod
(
£lf
, 
švoke
, 
hªdËr
, &
švokeResuÉ
,

1011 
thisObj
, 
m‘hodObj
, 
¬gA¼ay
);

1012 ià(
	`dvmCheckExû±iÚ
(
£lf
)) {

1013 
Objeù
* 
exûp
 = 
	`dvmG‘Exû±iÚ
(
£lf
);

1014 ià(
	`mu¡W¿pExû±iÚ
(
m‘hod
, 
exûp
)) {

1016 
	`dvmW¿pExû±iÚ
("Ljava/lang/reflect/UndeclaredThrowableException;");

1018 
ba
;

1026 ià(
»tuºTy³
->
´im™iveTy³
 =ğ
PRIM_VOID
) {

1027 
	`LOGVV
("+++ ignoring„eturno void\n");

1028 } ià(
švokeResuÉ
.
l
 =ğ
NULL
) {

1029 ià(
	`dvmIsPrim™iveCÏss
(
»tuºTy³
)) {

1030 
	`dvmThrowExû±iÚ
("Ljava/lang/NullPointerException;",

1032 
ba
;

1034 
pResuÉ
->
l
 = 
NULL
;

1036 ià(!
	`dvmUnw¿pPrim™ive
(
švokeResuÉ
.
l
, 
»tuºTy³
, 
pResuÉ
)) {

1037 
	`dvmThrowExû±iÚW™hCÏssMes§ge
("Ljava/lang/ClassCastException;",

1038 ((
Objeù
*)
švokeResuÉ
.
l
)->
şazz
->
desütÜ
);

1039 
ba
;

1043 
ba
:

1044 
	`dvmR–—£T¿ckedAÎoc
(
m‘hodObj
, 
£lf
);

1045 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*)
¬gA¼ay
, 
£lf
);

1046 
	}
}

1054 
boŞ
 
	$mu¡W¿pExû±iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
, cÚ¡ 
Objeù
* 
throwabË
)

1056 cÚ¡ 
A¼ayObjeù
* 
throws
;

1057 cÚ¡ 
A¼ayObjeù
* 
m‘hodThrows
;

1058 cÚ¡ 
Objeù
** 
cÚ‹Ás
;

1059 cÚ¡ 
CÏssObjeù
** 
şas£s
;

1061 ià(!
	`dvmIsCheckedExû±iÚ
(
throwabË
))

1062  
çl£
;

1064 cÚ¡ 
SticF›ld
* 
sf›ld
 = &
m‘hod
->
şazz
->
sf›lds
[
kThrowsF›ld
];

1065 
throws
 = (
A¼ayObjeù
*è
	`dvmG‘SticF›ldObjeù
(
sf›ld
);

1067 
m‘hodIndex
 = 
m‘hod
 - m‘hod->
şazz
->
vœtu®M‘hods
;

1068 
	`as£¹
(
m‘hodIndex
 >ğ0 && m‘hodIndex < 
m‘hod
->
şazz
->
vœtu®M‘hodCouÁ
);

1070 
cÚ‹Ás
 = (cÚ¡ 
Objeù
**è
throws
->contents;

1071 
m‘hodThrows
 = (
A¼ayObjeù
*è
cÚ‹Ás
[
m‘hodIndex
];

1073 ià(
m‘hodThrows
 =ğ
NULL
) {

1076  
Œue
;

1079 
throwCouÁ
 = 
m‘hodThrows
->
Ëngth
;

1080 
şas£s
 = (cÚ¡ 
CÏssObjeù
**è
m‘hodThrows
->
cÚ‹Ás
;

1081 
i
;

1087 
i
 = 0; i < 
throwCouÁ
; i++) {

1088 ià(
	`dvmIn¡ªûof
(
throwabË
->
şazz
, 
şas£s
[
i
])) {

1090  
çl£
;

1095  
Œue
;

1096 
	}
}

	@reflect/Reflect.c

19 
	~"D®vik.h
"

21 
	~<¡dlib.h
>

26 
boŞ
 
	$dvmReæeùS¹up
()

28 
gDvm
.
şassJavaLªgReæeùAcûssibËObjeù
 =

29 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/reflect/AccessibleObject;");

30 
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
 =

31 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/reflect/Constructor;");

32 
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜA¼ay
 =

33 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/»æeù/CÚ¡ruùÜ;", 
NULL
);

34 
gDvm
.
şassJavaLªgReæeùF›ld
 =

35 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/reflect/Field;");

36 
gDvm
.
şassJavaLªgReæeùF›ldA¼ay
 =

37 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/»æeù/F›ld;", 
NULL
);

38 
gDvm
.
şassJavaLªgReæeùM‘hod
 =

39 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/reflect/Method;");

40 
gDvm
.
şassJavaLªgReæeùM‘hodA¼ay
 =

41 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/»æeù/M‘hod;", 
NULL
);

42 
gDvm
.
şassJavaLªgReæeùProxy
 =

43 
	`dvmFšdSy¡emCÏssNoIn™
("Ljava/lang/reflect/Proxy;");

44 ià(
gDvm
.
şassJavaLªgReæeùAcûssibËObjeù
 =ğ
NULL
 ||

45 
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
 =ğ
NULL
 ||

46 
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜA¼ay
 =ğ
NULL
 ||

47 
gDvm
.
şassJavaLªgReæeùF›ld
 =ğ
NULL
 ||

48 
gDvm
.
şassJavaLªgReæeùF›ldA¼ay
 =ğ
NULL
 ||

49 
gDvm
.
şassJavaLªgReæeùM‘hod
 =ğ
NULL
 ||

50 
gDvm
.
şassJavaLªgReæeùM‘hodA¼ay
 =ğ
NULL
 ||

51 
gDvm
.
şassJavaLªgReæeùProxy
 =ğ
NULL
)

53 
	`LOGE
("Could‚ot find one or more„eflection classes\n");

54  
çl£
;

57 
gDvm
.
m‘hJavaLªgReæeùCÚ¡ruùÜ_š™
 =

58 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
, "<init>",

60 
gDvm
.
m‘hJavaLªgReæeùF›ld_š™
 =

61 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgReæeùF›ld
, "<init>",

63 
gDvm
.
m‘hJavaLªgReæeùM‘hod_š™
 =

64 
	`dvmFšdDœeùM‘hodByDesütÜ
(
gDvm
.
şassJavaLªgReæeùM‘hod
, "<init>",

66 ià(
gDvm
.
m‘hJavaLªgReæeùCÚ¡ruùÜ_š™
 =ğ
NULL
 ||

67 
gDvm
.
m‘hJavaLªgReæeùF›ld_š™
 =ğ
NULL
 ||

68 
gDvm
.
m‘hJavaLªgReæeùM‘hod_š™
 =ğ
NULL
)

70 
	`LOGE
("Could‚ot find„eflection constructors\n");

71  
çl£
;

74 
gDvm
.
şassJavaLªgCÏssA¼ay
 =

75 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/CÏss;", 
NULL
);

76 
gDvm
.
şassJavaLªgObjeùA¼ay
 =

77 
	`dvmFšdA¼ayCÏss
("[Ljava/Ïng/Objeù;", 
NULL
);

78 ià(
gDvm
.
şassJavaLªgCÏssA¼ay
 =ğ
NULL
 ||

79 
gDvm
.
şassJavaLªgObjeùA¼ay
 =ğ
NULL
)

81 
	`LOGE
("Could‚ot find class-array or object-array class\n");

82  
çl£
;

85 
gDvm
.
offJavaLªgReæeùAcûssibËObjeù_æag
 =

86 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùAcûssibËObjeù
, "flag",

89 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_¦Ù
 =

90 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
, "slot", "I");

91 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
 =

92 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
,

95 
gDvm
.
offJavaLªgReæeùF›ld_¦Ù
 =

96 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùF›ld
, "slot", "I");

97 
gDvm
.
offJavaLªgReæeùF›ld_deşCÏss
 =

98 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùF›ld
,

101 
gDvm
.
offJavaLªgReæeùM‘hod_¦Ù
 =

102 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùM‘hod
, "slot", "I");

103 
gDvm
.
offJavaLªgReæeùM‘hod_deşCÏss
 =

104 
	`dvmFšdF›ldOff£t
(
gDvm
.
şassJavaLªgReæeùM‘hod
,

107 ià(
gDvm
.
offJavaLªgReæeùAcûssibËObjeù_æag
 < 0 ||

108 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_¦Ù
 < 0 ||

109 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
 < 0 ||

110 
gDvm
.
offJavaLªgReæeùF›ld_¦Ù
 < 0 ||

111 
gDvm
.
offJavaLªgReæeùF›ld_deşCÏss
 < 0 ||

112 
gDvm
.
offJavaLªgReæeùM‘hod_¦Ù
 < 0 ||

113 
gDvm
.
offJavaLªgReæeùM‘hod_deşCÏss
 < 0)

115 
	`LOGE
("Could‚ot find„eflection fields\n");

116  
çl£
;

119 ià(!
	`dvmReæeùProxyS¹up
())

120  
çl£
;

121 ià(!
	`dvmReæeùAÂÙ©iÚS¹up
())

122  
çl£
;

124  
Œue
;

125 
	}
}

130 
	$dvmReæeùShutdown
()

133 
	}
}

144 
boŞ
 
	$dvmV®id©eBoxCÏs£s
()

146 cÚ¡ * 
şas£s
[] = {

155 
NULL


157 cÚ¡ ** 
cı
;

159 
cı
 = 
şas£s
; *cı !ğ
NULL
; ccp++) {

160 
CÏssObjeù
* 
şazz
;

162 
şazz
 = 
	`dvmFšdCÏssNoIn™
(*
cı
, 
NULL
);

163 ià(
şazz
 =ğ
NULL
) {

164 
	`LOGE
("Couldn'ˆfšd '%s'\n", *
cı
);

165  
çl£
;

168 ià(
şazz
->
if›ldCouÁ
 != 1) {

169 
	`LOGE
("Found %d instance fields in '%s'\n",

170 
şazz
->
if›ldCouÁ
, *
cı
);

171  
çl£
;

175  
Œue
;

176 
	}
}

186 
CÏssObjeù
* 
	$cÚv”tSigÇtu»P¬tToCÏss
(** 
pSigÇtu»
,

187 cÚ¡ 
CÏssObjeù
* 
defCÏss
)

189 
CÏssObjeù
* 
şazz
 = 
NULL
;

190 * 
sigÇtu»
 = *
pSigÇtu»
;

192 ià(*
sigÇtu»
 == '[') {

194 
§vedCh¬
;

196 *++
sigÇtu»
 == '[')

198 ià(*
sigÇtu»
 == 'L') {

199 *++
sigÇtu»
 != ';')

204 
§vedCh¬
 = *++
sigÇtu»
;

205 *
sigÇtu»
 = '\0';

206 
şazz
 = 
	`dvmFšdA¼ayCÏss
(*
pSigÇtu»
, 
defCÏss
->
şassLßd”
);

207 *
sigÇtu»
 = 
§vedCh¬
;

208 } ià(*
sigÇtu»
 == 'L') {

210 
§vedCh¬
;

211 *++
sigÇtu»
 != ';')

213 
§vedCh¬
 = *++
sigÇtu»
;

214 *
sigÇtu»
 = '\0';

215 
şazz
 = 
	`dvmFšdCÏssNoIn™
(*
pSigÇtu»
, 
defCÏss
->
şassLßd”
);

216 *
sigÇtu»
 = 
§vedCh¬
;

218 
şazz
 = 
	`dvmFšdPrim™iveCÏss
(*
sigÇtu»
++);

221 ià(
şazz
 =ğ
NULL
) {

222 
	`LOGW
("UÇbËØm©ch cÏs fÜ…¬t: '%s'\n", *
pSigÇtu»
);

223 
	`dvmCË¬Exû±iÚ
(
	`dvmTh»adS–f
());

224 
	`dvmThrowExû±iÚ
("Ljava/Ïng/NoSuchM‘hodExû±iÚ;", 
NULL
);

226 *
pSigÇtu»
 = 
sigÇtu»
;

227  
şazz
;

228 
	}
}

239 
A¼ayObjeù
* 
	$cÚv”tSigÇtu»ToCÏssA¼ay
(** 
pSigÇtu»
,

240 
CÏssObjeù
* 
defCÏss
)

242 
A¼ayObjeù
* 
şassA¼ay
;

243 
CÏssObjeù
** 
şas£s
;

244 * 
sigÇtu»
 = *
pSigÇtu»
;

245 * 
ı
;

246 
i
, 
couÁ
;

248 
	`as£¹
(*
sigÇtu»
 == '(');

249 
sigÇtu»
++;

252 
couÁ
 = 0;

253 
ı
 = 
sigÇtu»
;

254 *
ı
 != ')') {

255 
couÁ
++;

257 ià(*
ı
 == '[') {

258 *++
ı
 == '[')

261 ià(*
ı
 == 'L') {

262 *++
ı
 != ';')

265 
ı
++;

267 
	`LOGVV
("REFLECT found %d…¬am‘” š '%s'\n", 
couÁ
, *
pSigÇtu»
);

270 
şassA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgCÏssA¼ay
, 
couÁ
,

271 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

272 ià(
şassA¼ay
 =ğ
NULL
)

273  
NULL
;

276 
şas£s
 = (
CÏssObjeù
**è
şassA¼ay
->
cÚ‹Ás
;

277 
ı
 = 
sigÇtu»
;

278 
i
 = 0; i < 
couÁ
; i++) {

279 
CÏssObjeù
* 
şazz
;

281 
şazz
 = 
	`cÚv”tSigÇtu»P¬tToCÏss
(&
ı
, 
defCÏss
);

282 ià(
şazz
 =ğ
NULL
) {

283 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

284  
NULL
;

286 
	`LOGVV
("REFLECT %d: '%s'\n", 
i
, 
şazz
->
desütÜ
);

288 *
şas£s
++ = 
şazz
;

291 *
pSigÇtu»
 = 
ı
;

294  
şassA¼ay
;

295 
	}
}

304 
	$f›ldToSlÙ
(cÚ¡ 
F›ld
* 
f›ld
, cÚ¡ 
CÏssObjeù
* 
şazz
)

306 
¦Ù
;

308 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

309 
¦Ù
 = (
SticF›ld
*)
f›ld
 - 
şazz
->
sf›lds
;

310 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
sf›ldCouÁ
);

311 
¦Ù
 = -(slot+1);

313 
¦Ù
 = (
In¡F›ld
*)
f›ld
 - 
şazz
->
if›lds
;

314 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
if›ldCouÁ
);

317  
¦Ù
;

318 
	}
}

323 
F›ld
* 
	$dvmSlÙToF›ld
(
CÏssObjeù
* 
şazz
, 
¦Ù
)

325 ià(
¦Ù
 < 0) {

326 
¦Ù
 = -(slot+1);

327 
	`as£¹
(
¦Ù
 < 
şazz
->
sf›ldCouÁ
);

328  (
F›ld
*è&
şazz
->
sf›lds
[
¦Ù
];

330 
	`as£¹
(
¦Ù
 < 
şazz
->
if›ldCouÁ
);

331  (
F›ld
*è&
şazz
->
if›lds
[
¦Ù
];

333 
	}
}

343 
Objeù
* 
	$ü—‹F›ldObjeù
(
F›ld
* 
f›ld
, cÚ¡ 
CÏssObjeù
* 
şazz
)

345 
Objeù
* 
»suÉ
 = 
NULL
;

346 
Objeù
* 
f›ldObj
 = 
NULL
;

347 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

348 
CÏssObjeù
* 
ty³
;

349 * 
mªgË
;

350 * 
ı
;

351 
¦Ù
;

353 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
));

355 
f›ldObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgReæeùF›ld
, 
ALLOC_DEFAULT
);

356 ià(
f›ldObj
 =ğ
NULL
)

357 
ba
;

359 
ı
 = 
mªgË
 = 
	`¡rdup
(
f›ld
->
sigÇtu»
);

360 
ty³
 = 
	`cÚv”tSigÇtu»P¬tToCÏss
(&
ı
, 
şazz
);

361 
	`ä“
(
mªgË
);

362 ià(
ty³
 =ğ
NULL
)

363 
ba
;

365 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
f›ld
->
Çme
, 
ALLOC_DEFAULT
);

366 ià(
ÇmeObj
 =ğ
NULL
)

367 
ba
;

369 
¦Ù
 = 
	`f›ldToSlÙ
(
f›ld
, 
şazz
);

371 
JV®ue
 
unu£d
;

372 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgReæeùF›ld_š™
,

373 
f›ldObj
, &
unu£d
, 
şazz
, 
ty³
, 
ÇmeObj
, 
¦Ù
);

374 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

375 
	`LOGD
("Field class inithrewƒxception\n");

376 
ba
;

379 
»suÉ
 = 
f›ldObj
;

381 
ba
:

382 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

383 ià(
»suÉ
 =ğ
NULL
)

384 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›ldObj
, 
NULL
);

386  
»suÉ
;

387 
	}
}

395 
A¼ayObjeù
* 
	$dvmG‘Deş¬edF›lds
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
)

397 
A¼ayObjeù
* 
f›ldA¼ay
 = 
NULL
;

398 
Objeù
** 
f›lds
;

399 
i
, 
couÁ
;

401 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
))

402 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùF›ld
);

405 ià(!
publicOÆy
)

406 
couÁ
 = 
şazz
->
sf›ldCouÁ
 + cÏzz->
if›ldCouÁ
;

408 
couÁ
 = 0;

409 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

410 ià((
şazz
->
sf›lds
[
i
].
f›ld
.
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

411 
couÁ
++;

413 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

414 ià((
şazz
->
if›lds
[
i
].
f›ld
.
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

415 
couÁ
++;

420 
f›ldA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgReæeùF›ldA¼ay
, 
couÁ
,

421 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

422 ià(
f›ldA¼ay
 =ğ
NULL
)

423  
NULL
;

424 
f›lds
 = (
Objeù
**è
f›ldA¼ay
->
cÚ‹Ás
;

427 
i
 = 0; i < 
şazz
->
sf›ldCouÁ
; i++) {

428 ià(!
publicOÆy
 ||

429 (
şazz
->
sf›lds
[
i
].
f›ld
.
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

431 *
f›lds
 = 
	`ü—‹F›ldObjeù
(&
şazz
->
sf›lds
[
i
].
f›ld
, clazz);

432 ià(*
f›lds
 =ğ
NULL
)

433 
ç
;

434 
	`dvmR–—£T¿ckedAÎoc
(*
f›lds
, 
NULL
);

435 
f›lds
++;

436 
couÁ
--;

439 
i
 = 0; i < 
şazz
->
if›ldCouÁ
; i++) {

440 ià(!
publicOÆy
 ||

441 (
şazz
->
if›lds
[
i
].
f›ld
.
acûssFÏgs
 & 
ACC_PUBLIC
) != 0)

443 *
f›lds
 = 
	`ü—‹F›ldObjeù
(&
şazz
->
if›lds
[
i
].
f›ld
, clazz);

444 ià(*
f›lds
 =ğ
NULL
)

445 
ç
;

446 
	`dvmR–—£T¿ckedAÎoc
(*
f›lds
, 
NULL
);

447 
f›lds
++;

448 
couÁ
--;

453  
f›ldA¼ay
;

455 
ç
:

456 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
f›ldA¼ay
, 
NULL
);

457  
NULL
;

458 
	}
}

467 
	$m‘hodToSlÙ
(cÚ¡ 
M‘hod
* 
m‘h
)

469 
CÏssObjeù
* 
şazz
 = 
m‘h
->clazz;

470 
¦Ù
;

472 ià(
	`dvmIsDœeùM‘hod
(
m‘h
)) {

473 
¦Ù
 = 
m‘h
 - 
şazz
->
dœeùM‘hods
;

474 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
dœeùM‘hodCouÁ
);

475 
¦Ù
 = -(slot+1);

477 
¦Ù
 = 
m‘h
 - 
şazz
->
vœtu®M‘hods
;

478 
	`as£¹
(
¦Ù
 >ğ0 && slÙ < 
şazz
->
vœtu®M‘hodCouÁ
);

481  
¦Ù
;

482 
	}
}

487 
M‘hod
* 
	$dvmSlÙToM‘hod
(
CÏssObjeù
* 
şazz
, 
¦Ù
)

489 ià(
¦Ù
 < 0) {

490 
¦Ù
 = -(slot+1);

491 
	`as£¹
(
¦Ù
 < 
şazz
->
dœeùM‘hodCouÁ
);

492  &
şazz
->
dœeùM‘hods
[
¦Ù
];

494 
	`as£¹
(
¦Ù
 < 
şazz
->
vœtu®M‘hodCouÁ
);

495  &
şazz
->
vœtu®M‘hods
[
¦Ù
];

497 
	}
}

509 
Objeù
* 
	$ü—‹CÚ¡ruùÜObjeù
(
M‘hod
* 
m‘h
)

511 
Objeù
* 
»suÉ
 = 
NULL
;

512 
A¼ayObjeù
* 
·¿ms
 = 
NULL
;

513 
A¼ayObjeù
* 
exû±iÚs
 = 
NULL
;

514 
Objeù
* 
cÚsObj
;

515 
DexSŒšgCache
 
mªgË
;

516 * 
ı
;

517 
¦Ù
;

519 
	`dexSŒšgCacheIn™
(&
mªgË
);

522 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
));

524 
cÚsObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
,

525 
ALLOC_DEFAULT
);

526 ià(
cÚsObj
 =ğ
NULL
)

527 
ba
;

533 
ı
 = 
	`dvmCİyDesütÜSŒšgFromM‘hod
(
m‘h
, &
mªgË
);

534 
·¿ms
 = 
	`cÚv”tSigÇtu»ToCÏssA¼ay
(&
ı
, 
m‘h
->
şazz
);

535 ià(
·¿ms
 =ğ
NULL
)

536 
ba
;

537 
	`as£¹
(*
ı
 == ')');

538 
	`as£¹
(*(
ı
+1) == 'V');

544 
exû±iÚs
 = 
	`dvmG‘M‘hodThrows
(
m‘h
);

545 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()))

546 
ba
;

548 
¦Ù
 = 
	`m‘hodToSlÙ
(
m‘h
);

550 
JV®ue
 
unu£d
;

551 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgReæeùCÚ¡ruùÜ_š™
,

552 
cÚsObj
, &
unu£d
, 
m‘h
->
şazz
, 
·¿ms
, 
exû±iÚs
, 
¦Ù
);

553 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

554 
	`LOGD
("Constructor class inithrewƒxception\n");

555 
ba
;

558 
»suÉ
 = 
cÚsObj
;

560 
ba
:

561 
	`dexSŒšgCacheR–—£
(&
mªgË
);

562 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
·¿ms
, 
NULL
);

563 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚs
, 
NULL
);

564 ià(
»suÉ
 =ğ
NULL
) {

565 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

566 
	`dvmR–—£T¿ckedAÎoc
(
cÚsObj
, 
NULL
);

569  
»suÉ
;

570 
	}
}

575 
A¼ayObjeù
* 
	$dvmG‘Deş¬edCÚ¡ruùÜs
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
)

577 
A¼ayObjeù
* 
cÚsA¼ay
;

578 
Objeù
** 
cÚsObjPŒ
;

579 
M‘hod
* 
m‘h
;

580 
i
, 
couÁ
;

582 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
))

583 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
);

589 ià(!
	`dvmIsCÏssIn™Ÿlized
(
şazz
))

590 
	`dvmIn™CÏss
(
şazz
);

595 
couÁ
 = 0;

596 
m‘h
 = 
şazz
->
dœeùM‘hods
;

597 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++, 
m‘h
++) {

598 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

599 
	`dvmIsCÚ¡ruùÜM‘hod
(
m‘h
è&& !
	`dvmIsSticM‘hod
(meth))

601 
couÁ
++;

608 
cÚsA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜA¼ay
, 
couÁ
,

609 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

610 ià(
cÚsA¼ay
 =ğ
NULL
)

611  
NULL
;

613 
cÚsObjPŒ
 = (
Objeù
**è
cÚsA¼ay
->
cÚ‹Ás
;

618 
m‘h
 = 
şazz
->
dœeùM‘hods
;

619 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++, 
m‘h
++) {

620 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

621 
	`dvmIsCÚ¡ruùÜM‘hod
(
m‘h
è&& !
	`dvmIsSticM‘hod
(meth))

623 
Objeù
* 
cÚsObj
 = 
	`ü—‹CÚ¡ruùÜObjeù
(
m‘h
);

624 ià(
cÚsObj
 =ğ
NULL
)

625 
ç
;

626 *
cÚsObjPŒ
++ = 
cÚsObj
;

627 
	`dvmR–—£T¿ckedAÎoc
(
cÚsObj
, 
NULL
);

631 
	`as£¹
(
cÚsObjPŒ
 - (
Objeù
**è
cÚsA¼ay
->
cÚ‹Ás
 =ğ
couÁ
);

634  
cÚsA¼ay
;

636 
ç
:

637 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
cÚsA¼ay
, 
NULL
);

638  
NULL
;

639 
	}
}

653 
Objeù
* 
	$dvmC»©eReæeùM‘hodObjeù
(cÚ¡ 
M‘hod
* 
m‘h
)

655 
Objeù
* 
»suÉ
 = 
NULL
;

656 
A¼ayObjeù
* 
·¿ms
 = 
NULL
;

657 
A¼ayObjeù
* 
exû±iÚs
 = 
NULL
;

658 
SŒšgObjeù
* 
ÇmeObj
 = 
NULL
;

659 
Objeù
* 
m‘hObj
;

660 
CÏssObjeù
* 
»tuºTy³
;

661 
DexSŒšgCache
 
mªgË
;

662 * 
ı
;

663 
¦Ù
;

665 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

666 
	`LOGW
("WARNING: dvmCreateReflectMethodObject called with "

668  
NULL
;

671 
	`dexSŒšgCacheIn™
(&
mªgË
);

674 
	`as£¹
(
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
));

676 
m‘hObj
 = 
	`dvmAÎocObjeù
(
gDvm
.
şassJavaLªgReæeùM‘hod
, 
ALLOC_DEFAULT
);

677 ià(
m‘hObj
 =ğ
NULL
)

678 
ba
;

684 
ı
 = 
	`dvmCİyDesütÜSŒšgFromM‘hod
(
m‘h
, &
mªgË
);

685 
·¿ms
 = 
	`cÚv”tSigÇtu»ToCÏssA¼ay
(&
ı
, 
m‘h
->
şazz
);

686 ià(
·¿ms
 =ğ
NULL
)

687 
ba
;

688 
	`as£¹
(*
ı
 == ')');

689 
ı
++;

690 
»tuºTy³
 = 
	`cÚv”tSigÇtu»P¬tToCÏss
(&
ı
, 
m‘h
->
şazz
);

691 ià(
»tuºTy³
 =ğ
NULL
)

692 
ba
;

698 
exû±iÚs
 = 
	`dvmG‘M‘hodThrows
(
m‘h
);

699 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()))

700 
ba
;

703 
ÇmeObj
 = 
	`dvmC»©eSŒšgFromC¡r
(
m‘h
->
Çme
, 
ALLOC_DEFAULT
);

704 ià(
ÇmeObj
 =ğ
NULL
)

705 
ba
;

707 
¦Ù
 = 
	`m‘hodToSlÙ
(
m‘h
);

709 
JV®ue
 
unu£d
;

710 
	`dvmC®lM‘hod
(
	`dvmTh»adS–f
(), 
gDvm
.
m‘hJavaLªgReæeùM‘hod_š™
,

711 
m‘hObj
, &
unu£d
, 
m‘h
->
şazz
, 
·¿ms
, 
exû±iÚs
, 
»tuºTy³
,

712 
ÇmeObj
, 
¦Ù
);

713 ià(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
())) {

714 
	`LOGD
("Method class inithrewƒxception\n");

715 
ba
;

718 
»suÉ
 = 
m‘hObj
;

720 
ba
:

721 
	`dexSŒšgCacheR–—£
(&
mªgË
);

722 ià(
»suÉ
 =ğ
NULL
) {

723 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

725 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
ÇmeObj
, 
NULL
);

726 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
·¿ms
, 
NULL
);

727 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
exû±iÚs
, 
NULL
);

728 ià(
»suÉ
 =ğ
NULL
)

729 
	`dvmR–—£T¿ckedAÎoc
(
m‘hObj
, 
NULL
);

730  
»suÉ
;

731 
	}
}

740 
A¼ayObjeù
* 
	$dvmG‘Deş¬edM‘hods
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
)

742 
A¼ayObjeù
* 
m‘hodA¼ay
;

743 
Objeù
** 
m‘hObjPŒ
;

744 
M‘hod
* 
m‘h
;

745 
i
, 
couÁ
;

747 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
))

748 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùM‘hod
);

755 
couÁ
 = 0;

756 
m‘h
 = 
şazz
->
vœtu®M‘hods
;

757 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++) {

758 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

759 !
	`dvmIsMœªdaM‘hod
(
m‘h
))

761 
couÁ
++;

764 
m‘h
 = 
şazz
->
dœeùM‘hods
;

765 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++, 
m‘h
++) {

766 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

767 
m‘h
->
Çme
[0] != '<')

769 
couÁ
++;

776 
m‘hodA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgReæeùM‘hodA¼ay
, 
couÁ
,

777 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

778 ià(
m‘hodA¼ay
 =ğ
NULL
)

779  
NULL
;

781 
m‘hObjPŒ
 = (
Objeù
**è
m‘hodA¼ay
->
cÚ‹Ás
;

786 
m‘h
 = 
şazz
->
vœtu®M‘hods
;

787 
i
 = 0; i < 
şazz
->
vœtu®M‘hodCouÁ
; i++, 
m‘h
++) {

788 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

789 !
	`dvmIsMœªdaM‘hod
(
m‘h
))

791 
Objeù
* 
m‘hObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
(
m‘h
);

792 ià(
m‘hObj
 =ğ
NULL
)

793 
ç
;

794 *
m‘hObjPŒ
++ = 
m‘hObj
;

795 
	`dvmR–—£T¿ckedAÎoc
(
m‘hObj
, 
NULL
);

798 
m‘h
 = 
şazz
->
dœeùM‘hods
;

799 
i
 = 0; i < 
şazz
->
dœeùM‘hodCouÁ
; i++, 
m‘h
++) {

800 ià((!
publicOÆy
 || 
	`dvmIsPublicM‘hod
(
m‘h
)) &&

801 
m‘h
->
Çme
[0] != '<')

803 
Objeù
* 
m‘hObj
 = 
	`dvmC»©eReæeùM‘hodObjeù
(
m‘h
);

804 ià(
m‘hObj
 =ğ
NULL
)

805 
ç
;

806 *
m‘hObjPŒ
++ = 
m‘hObj
;

807 
	`dvmR–—£T¿ckedAÎoc
(
m‘hObj
, 
NULL
);

811 
	`as£¹
(
m‘hObjPŒ
 - (
Objeù
**è
m‘hodA¼ay
->
cÚ‹Ás
 =ğ
couÁ
);

814  
m‘hodA¼ay
;

816 
ç
:

817 
	`dvmR–—£T¿ckedAÎoc
((
Objeù
*è
m‘hodA¼ay
, 
NULL
);

818  
NULL
;

819 
	}
}

825 
A¼ayObjeù
* 
	$dvmG‘IÁ”çûs
(
CÏssObjeù
* 
şazz
)

827 
A¼ayObjeù
* 
š‹rçûA¼ay
;

829 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
))

830 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùM‘hod
);

835 
couÁ
 = 
şazz
->
š‹rçûCouÁ
;

836 
š‹rçûA¼ay
 = 
	`dvmAÎocA¼ay
(
gDvm
.
şassJavaLªgCÏssA¼ay
, 
couÁ
,

837 
kObjeùA¼ayRefWidth
, 
ALLOC_DEFAULT
);

838 ià(
š‹rçûA¼ay
 =ğ
NULL
)

839  
NULL
;

844 
Objeù
** 
š‹rçûObjPŒ
 = (Objeù**è
š‹rçûA¼ay
->
cÚ‹Ás
;

845 
i
;

846 
i
 = 0; i < 
couÁ
; i++) {

847 *
š‹rçûObjPŒ
++ = (
Objeù
*è
şazz
->
š‹rçûs
[
i
];

851  
š‹rçûA¼ay
;

852 
	}
}

860 
Prim™iveTy³
 
	$g‘BoxedTy³
(
D©aObjeù
* 
¬g
)

862 cÚ¡ 
kJavaLªgL’
 = 11;

863 cÚ¡ * 
Çme
;

865 ià(
¬g
 =ğ
NULL
)

866  
PRIM_NOT
;

868 
Çme
 = 
¬g
->
obj
.
şazz
->
desütÜ
;

870 ià(
	`¡ºcmp
(
Çme
, "Ljava/Ïng/", 
kJavaLªgL’
) != 0)

871  
PRIM_NOT
;

873 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Boolean;") == 0)

874  
PRIM_BOOLEAN
;

875 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Character;") == 0)

876  
PRIM_CHAR
;

877 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Float;") == 0)

878  
PRIM_FLOAT
;

879 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Double;") == 0)

880  
PRIM_DOUBLE
;

881 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Byte;") == 0)

882  
PRIM_BYTE
;

883 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Short;") == 0)

884  
PRIM_SHORT
;

885 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Integer;") == 0)

886  
PRIM_INT
;

887 ià(
	`¡rcmp
(
Çme
 + 
kJavaLªgL’
, "Long;") == 0)

888  
PRIM_LONG
;

889  
PRIM_NOT
;

890 
	}
}

913 
	$dvmCÚv”tPrim™iveV®ue
(
Prim™iveTy³
 
¤cTy³
,

914 
Prim™iveTy³
 
d¡Ty³
, cÚ¡ 
s4
* 
¤cPŒ
, s4* 
d¡PŒ
)

917 
OK4
, 
OK8
, 
ItoJ
,

918 
ItoD
, 
JtoD
, 
FtoD
,

919 
ItoF
, 
JtoF
,

920 
bad
, 
kMax


923 cÚ¡ 
kCÚvMode
[
kMax
][kMax] = {

925  { 
OK4
, 
bad
, bad, bad, bad, bad, bad, bad },

926  { 
bad
, 
OK4
, 
ItoF
, 
ItoD
, bad, bad, OK4, 
ItoJ
 },

927  { 
bad
, bad, 
OK4
, 
FtoD
, bad, bad, bad, bad },

928  { 
bad
, bad, bad, 
OK8
, bad, bad, bad, bad },

929  { 
bad
, bad, 
ItoF
, 
ItoD
, 
OK4
, OK4, OK4, 
ItoJ
 },

930  { 
bad
, bad, 
ItoF
, 
ItoD
, bad, 
OK4
, OK4, 
ItoJ
 },

931  { 
bad
, bad, 
ItoF
, 
ItoD
, bad, bad, 
OK4
, 
ItoJ
 },

932  { 
bad
, bad, 
JtoF
, 
JtoD
, bad, bad, bad, 
OK8
 },

934 
»suÉ
;

936 
	`as£¹
(
¤cTy³
 !ğ
PRIM_NOT
 && 
d¡Ty³
 != PRIM_NOT &&

937 
¤cTy³
 !ğ
PRIM_VOID
 && 
d¡Ty³
 != PRIM_VOID);

938 
»suÉ
 = 
kCÚvMode
[
¤cTy³
][
d¡Ty³
];

942 
»suÉ
) {

943 
OK4
:

944 *
d¡PŒ
 = *
¤cPŒ
;

946 
OK8
:

947 *(
s8
*)
d¡PŒ
 = *(s8*)
¤cPŒ
;

949 
ItoJ
:

950 *(
s8
*)
d¡PŒ
 = (s8è(*(
s4
*è
¤cPŒ
);

952 
ItoD
:

953 *(*)
d¡PŒ
 = (è(*(
s4
*è
¤cPŒ
);

955 
JtoD
:

956 *(*)
d¡PŒ
 = (è(*(*è
¤cPŒ
);

958 
FtoD
:

959 *(*)
d¡PŒ
 = (è(*(*è
¤cPŒ
);

961 
ItoF
:

962 *(*)
d¡PŒ
 = (è(*(*è
¤cPŒ
);

964 
JtoF
:

965 *(*)
d¡PŒ
 = (è(*(*è
¤cPŒ
);

967 
bad
:

968 
	`LOGV
("convert…rimitive:…rim %do %d‚ot‡llowed\n",

969 
¤cTy³
, 
d¡Ty³
);

972 
	`as£¹
(
çl£
);

975 
	}
}

983 
	$dvmCÚv”tArgum’t
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
, 
s4
* 
de¡PŒ
)

985 
»tV®
;

987 ià(
	`dvmIsPrim™iveCÏss
(
ty³
)) {

989 
Prim™iveTy³
 
¤cTy³
;

990 
s4
* 
v®uePŒ
;

992 
¤cTy³
 = 
	`g‘BoxedTy³
(
¬g
);

993 ià(
¤cTy³
 < 0) {

994 
	`LOGVV
("conv‡rg:ype '%s'‚ot boxed…rimitive\n",

995 
¬g
->
obj
.
şazz
->
desütÜ
);

1000 
v®uePŒ
 = (
s4
*è
¬g
->
š¡ªûD©a
;

1002 
»tV®
 = 
	`dvmCÚv”tPrim™iveV®ue
(
¤cTy³
, 
ty³
->
´im™iveTy³
,

1003 
v®uePŒ
, 
de¡PŒ
);

1006 ià((
¬g
 =ğ
NULL
è|| 
	`dvmIn¡ªûof
×rg->
obj
.
şazz
, 
ty³
)) {

1007 *
de¡PŒ
 = (
s4
è
¬g
;

1008 
»tV®
 = 1;

1010 
	`LOGVV
("Arg %p (%s)‚ot compatible with %s\n",

1011 
¬g
,‡rg->
obj
.
şazz
->
desütÜ
, 
ty³
->descriptor);

1012 
»tV®
 = -1;

1016  
»tV®
;

1017 
	}
}

1019 #ifdeà
WITH_TAINT_TRACKING


1023 
	$g‘Ty³Width
(
Prim™iveTy³
 
ty³
)

1025 
width
 = -1;

1027 
ty³
) {

1028 
PRIM_BOOLEAN
:

1029 
PRIM_CHAR
:

1030 
PRIM_FLOAT
:

1031 
PRIM_BYTE
:

1032 
PRIM_SHORT
:

1033 
PRIM_INT
:

1034 
width
 = 1;

1036 
PRIM_DOUBLE
:

1037 
PRIM_LONG
:

1038 
width
 = 2;

1044  
width
;

1045 
	}
}

1051 
u4
 
	$dvmG‘Prim™iveTašt
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
)

1053 
u4
 
g
 = 
TAINT_CLEAR
;

1054 
width
 = 
	`g‘Ty³Width
(
ty³
->
´im™iveTy³
);

1056 ià(
width
 > 0) {

1059 
g
 = *(
u4
*)(
¬g
->
š¡ªûD©a
+
width
);

1063  
g
;

1064 
	}
}

1069 
	$dvmS‘Prim™iveTašt
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
, 
u4
 
g
)

1071 
width
 = 
	`g‘Ty³Width
(
ty³
->
´im™iveTy³
);

1073 ià(
width
 > 0) {

1076 *(
u4
*)(
¬g
->
š¡ªûD©a
+
width
èğ
g
;

1079 
	}
}

1092 
D©aObjeù
* 
	$dvmW¿pPrim™ive
(
JV®ue
 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
)

1094 cÚ¡ * 
boxTy³s
[] = {

1104 
CÏssObjeù
* 
w¿µ”CÏss
;

1105 
D©aObjeù
* 
w¿µ”Obj
;

1106 
s4
* 
d©aPŒ
;

1107 
Prim™iveTy³
 
ty³Index
 = 
»tuºTy³
->
´im™iveTy³
;

1108 cÚ¡ * 
şassDesütÜ
;

1110 ià(
ty³Index
 =ğ
PRIM_NOT
) {

1112 ià(
v®ue
.
l
 !ğ
NULL
)

1113 
	`dvmAddT¿ckedAÎoc
(
v®ue
.
l
, 
NULL
);

1114  (
D©aObjeù
*è
v®ue
.
l
;

1117 
	`as£¹
(
ty³Index
 >ğ0 &&y³Index < 
PRIM_MAX
);

1118 ià(
ty³Index
 =ğ
PRIM_VOID
)

1119  
NULL
;

1121 
şassDesütÜ
 = 
boxTy³s
[
ty³Index
];

1123 
w¿µ”CÏss
 = 
	`dvmFšdSy¡emCÏss
(
şassDesütÜ
);

1124 ià(
w¿µ”CÏss
 =ğ
NULL
) {

1125 
	`LOGW
("UÇbËØfšd '%s'\n", 
şassDesütÜ
);

1126 
	`as£¹
(
	`dvmCheckExû±iÚ
(
	`dvmTh»adS–f
()));

1127  
NULL
;

1130 
w¿µ”Obj
 = (
D©aObjeù
*è
	`dvmAÎocObjeù
(
w¿µ”CÏss
, 
ALLOC_DEFAULT
);

1131 ià(
w¿µ”Obj
 =ğ
NULL
)

1132  
NULL
;

1133 
d©aPŒ
 = (
s4
*è
w¿µ”Obj
->
š¡ªûD©a
;

1137 ià(
ty³Index
 =ğ
PRIM_LONG
 ||y³Index =ğ
PRIM_DOUBLE
)

1138 *(
s8
*)
d©aPŒ
 = 
v®ue
.
j
;

1140 *
d©aPŒ
 = 
v®ue
.
i
;

1142  
w¿µ”Obj
;

1143 
	}
}

1156 
boŞ
 
	$dvmUnw¿pPrim™ive
(
Objeù
* 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
,

1157 
JV®ue
* 
pResuÉ
)

1159 
JV®ue
 
»suÉ
;

1160 
Prim™iveTy³
 
ty³Index
 = 
»tuºTy³
->
´im™iveTy³
;

1161 
Prim™iveTy³
 
v®ueIndex
;

1164 ià(
ty³Index
 =ğ
PRIM_NOT
) {

1165 ià(
v®ue
 !ğ
NULL
 && !
	`dvmIn¡ªûof
(v®ue->
şazz
, 
»tuºTy³
)) {

1166 
	`LOGD
("wrong objectype: %s %s\n",

1167 
v®ue
->
şazz
->
desütÜ
, 
»tuºTy³
->descriptor);

1168  
çl£
;

1170 
pResuÉ
->
l
 = 
v®ue
;

1171  
Œue
;

1172 } ià(
ty³Index
 =ğ
PRIM_VOID
) {

1174  
çl£
;

1177 
v®ueIndex
 = 
	`g‘BoxedTy³
((
D©aObjeù
*)
v®ue
);

1178 ià(
v®ueIndex
 =ğ
PRIM_NOT
)

1179  
çl£
;

1183 ià(
	`dvmCÚv”tPrim™iveV®ue
(
v®ueIndex
, 
ty³Index
,

1184 (
s4
*è((
D©aObjeù
*)
v®ue
)->
š¡ªûD©a
, (s4*)
pResuÉ
) < 0)

1186 
	`LOGV
("Prim conversion failed\n");

1187  
çl£
;

1190  
Œue
;

1191 
	}
}

1201 
CÏssObjeù
* 
	$dvmG‘BoxedR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
)

1203 cÚ¡ * 
sig
 = 
	`dexPrÙoG‘R‘uºTy³
(&
m‘h
->
´ÙÙy³
);

1205 *
sig
) {

1215  
	`dvmFšdPrim™iveCÏss
(*
sig
);

1218  
	`dvmFšdCÏss
(
sig
, 
m‘h
->
şazz
->
şassLßd”
);

1221 * 
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(&
m‘h
->
´ÙÙy³
);

1222 
	`LOGE
("Bad„‘uºy³ iÀsigÇtu» '%s'\n", 
desc
);

1223 
	`ä“
(
desc
);

1224 
	`dvmThrowExû±iÚ
("Ljava/Ïng/IÁ”ÇlE¼Ü;", 
NULL
);

1225  
NULL
;

1228 
	}
}

1234 
F›ld
* 
	$dvmG‘F›ldFromReæeùObj
(
Objeù
* 
obj
)

1236 
CÏssObjeù
* 
şazz
;

1237 
¦Ù
;

1239 
	`as£¹
(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùF›ld
);

1240 
şazz
 = (
CÏssObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

1241 
gDvm
.
offJavaLªgReæeùF›ld_deşCÏss
);

1242 
¦Ù
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaLªgReæeùF›ld_¦Ù
);

1245 ià(!
	`dvmIn™CÏss
(
şazz
))

1246  
NULL
;

1248  
	`dvmSlÙToF›ld
(
şazz
, 
¦Ù
);

1249 
	}
}

1254 
M‘hod
* 
	$dvmG‘M‘hodFromReæeùObj
(
Objeù
* 
obj
)

1256 
CÏssObjeù
* 
şazz
;

1257 
¦Ù
;

1259 ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
) {

1260 
şazz
 = (
CÏssObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

1261 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_deşCÏss
);

1262 
¦Ù
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaLªgReæeùCÚ¡ruùÜ_¦Ù
);

1263 } ià(
obj
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
) {

1264 
şazz
 = (
CÏssObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

1265 
gDvm
.
offJavaLªgReæeùM‘hod_deşCÏss
);

1266 
¦Ù
 = 
	`dvmG‘F›ldIÁ
(
obj
, 
gDvm
.
offJavaLªgReæeùM‘hod_¦Ù
);

1268 
	`as£¹
(
çl£
);

1269  
NULL
;

1273 ià(!
	`dvmIn™CÏss
(
şazz
))

1274  
NULL
;

1276  
	`dvmSlÙToM‘hod
(
şazz
, 
¦Ù
);

1277 
	}
}

1286 
Objeù
* 
	$dvmC»©eReæeùObjFÜF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
F›ld
* 
f›ld
)

1288 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùF›ld
))

1289 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùF›ld
);

1292  
	`ü—‹F›ldObjeù
(
f›ld
, 
şazz
);

1293 
	}
}

1305 
Objeù
* 
	$dvmC»©eReæeùObjFÜM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘hod
)

1307 
	`UNUSED_PARAMETER
(
şazz
);

1309 ià(
	`¡rcmp
(
m‘hod
->
Çme
, "<init>") == 0) {

1310 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
))

1311 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùCÚ¡ruùÜ
);

1313  
	`ü—‹CÚ¡ruùÜObjeù
(
m‘hod
);

1315 ià(!
	`dvmIsCÏssIn™Ÿlized
(
gDvm
.
şassJavaLªgReæeùM‘hod
))

1316 
	`dvmIn™CÏss
(
gDvm
.
şassJavaLªgReæeùM‘hod
);

1318  
	`dvmC»©eReæeùM‘hodObjeù
(
m‘hod
);

1320 
	}
}

	@reflect/Reflect.h

19 #iâdeà
_DALVIK_REFLECT_REFLECT


20 
	#_DALVIK_REFLECT_REFLECT


	)

22 
boŞ
 
dvmReæeùS¹up
();

23 
boŞ
 
dvmReæeùProxyS¹up
();

24 
boŞ
 
dvmReæeùAÂÙ©iÚS¹up
();

25 
dvmReæeùShutdown
();

30 
boŞ
 
dvmV®id©eBoxCÏs£s
();

37 
A¼ayObjeù
* 
dvmG‘Deş¬edF›lds
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
);

42 
A¼ayObjeù
* 
dvmG‘Deş¬edCÚ¡ruùÜs
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
);

51 
A¼ayObjeù
* 
dvmG‘Deş¬edM‘hods
(
CÏssObjeù
* 
şazz
, 
boŞ
 
publicOÆy
);

57 
A¼ayObjeù
* 
dvmG‘IÁ”çûs
(
CÏssObjeù
* 
şazz
);

62 
F›ld
* 
dvmSlÙToF›ld
(
CÏssObjeù
* 
şazz
, 
¦Ù
);

63 
M‘hod
* 
dvmSlÙToM‘hod
(
CÏssObjeù
* 
şazz
, 
¦Ù
);

68 
dvmCÚv”tPrim™iveV®ue
(
Prim™iveTy³
 
¤cTy³
,

69 
Prim™iveTy³
 
d¡Ty³
, cÚ¡ 
s4
* 
¤cPŒ
, s4* 
d¡PŒ
);

77 
dvmCÚv”tArgum’t
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
, 
s4
* 
šs
);

79 #ifdeà
WITH_TAINT_TRACKING


84 
u4
 
dvmG‘Prim™iveTašt
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
);

89 
dvmS‘Prim™iveTašt
(
D©aObjeù
* 
¬g
, 
CÏssObjeù
* 
ty³
, 
u4
 
g
);

97 
D©aObjeù
* 
dvmW¿pPrim™ive
(
JV®ue
 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
);

103 
boŞ
 
dvmUnw¿pPrim™ive
(
Objeù
* 
v®ue
, 
CÏssObjeù
* 
»tuºTy³
,

104 
JV®ue
* 
pResuÉ
);

110 
CÏssObjeù
* 
dvmG‘BoxedR‘uºTy³
(cÚ¡ 
M‘hod
* 
m‘h
);

115 
F›ld
* 
dvmG‘F›ldFromReæeùObj
(
Objeù
* 
obj
);

116 
M‘hod
* 
dvmG‘M‘hodFromReæeùObj
(
Objeù
* 
obj
);

117 
Objeù
* 
dvmC»©eReæeùObjFÜF›ld
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
F›ld
* 
f›ld
);

118 
Objeù
* 
dvmC»©eReæeùObjFÜM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
M‘hod
* 
m‘hod
);

125 
INLINE
 
boŞ
 
	$dvmIsReæeùiÚM‘hod
(cÚ¡ 
M‘hod
* 
m‘hod
)

127  (
m‘hod
->
şazz
 =ğ
gDvm
.
şassJavaLªgReæeùM‘hod
);

128 
	}
}

133 
CÏssObjeù
* 
dvmG’”©eProxyCÏss
(
SŒšgObjeù
* 
¡r
, 
A¼ayObjeù
* 
š‹rçûs
,

134 
Objeù
* 
lßd”
);

139 
Objeù
* 
dvmC»©eReæeùM‘hodObjeù
(cÚ¡ 
M‘hod
* 
m‘h
);

147 
A¼ayObjeù
* 
dvmG‘CÏssAÂÙ©iÚs
(cÚ¡ 
CÏssObjeù
* 
şazz
);

148 
A¼ayObjeù
* 
dvmG‘M‘hodAÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
);

149 
A¼ayObjeù
* 
dvmG‘F›ldAÂÙ©iÚs
(cÚ¡ 
F›ld
* 
f›ld
);

150 
A¼ayObjeù
* 
dvmG‘P¬am‘”AÂÙ©iÚs
(cÚ¡ 
M‘hod
* 
m‘hod
);

155 
Objeù
* 
dvmG‘AÂÙ©iÚDeçuÉV®ue
(cÚ¡ 
M‘hod
* 
m‘hod
);

161 
A¼ayObjeù
* 
dvmG‘M‘hodThrows
(cÚ¡ 
M‘hod
* 
m‘hod
);

166 
A¼ayObjeù
* 
dvmG‘CÏssSigÇtu»AÂÙ©iÚ
(cÚ¡ 
CÏssObjeù
* 
şazz
);

167 
A¼ayObjeù
* 
dvmG‘M‘hodSigÇtu»AÂÙ©iÚ
(cÚ¡ 
M‘hod
* 
m‘hod
);

168 
A¼ayObjeù
* 
dvmG‘F›ldSigÇtu»AÂÙ©iÚ
(cÚ¡ 
F›ld
* 
f›ld
);

174 
Objeù
* 
dvmG‘EnşosšgM‘hod
(cÚ¡ 
CÏssObjeù
* 
şazz
);

179 
CÏssObjeù
* 
dvmG‘Deş¬šgCÏss
(cÚ¡ CÏssObjeù* 
şazz
);

184 
CÏssObjeù
* 
dvmG‘EnşosšgCÏss
(cÚ¡ CÏssObjeù* 
şazz
);

192 
boŞ
 
dvmG‘IÂ”CÏss
(cÚ¡ 
CÏssObjeù
* 
şazz
, 
SŒšgObjeù
** 
pName
,

193 * 
pAcûssFÏgs
);

199 
A¼ayObjeù
* 
dvmG‘Deş¬edCÏs£s
(cÚ¡ 
CÏssObjeù
* 
şazz
);

205 
	sAÂÙ©iÚV®ue
 {

206 
JV®ue
 
	mv®ue
;

207 
u1
 
	mty³
;

208 } 
	tAÂÙ©iÚV®ue
;

216 cÚ¡ 
u1
* 
	mcursÜ
;

217 
u4
 
	m–em’tsLeá
;

218 cÚ¡ 
DexEncodedA¼ay
* 
	m’codedA¼ay
;

219 
u4
 
	msize
;

220 cÚ¡ 
CÏssObjeù
* 
	mşazz
;

221 } 
	tEncodedA¼ayI‹¿tÜ
;

230 
dvmEncodedA¼ayI‹¿tÜIn™Ÿlize
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

231 cÚ¡ 
DexEncodedA¼ay
* 
’codedA¼ay
, cÚ¡ 
CÏssObjeù
* 
şazz
);

236 
boŞ
 
dvmEncodedA¼ayI‹¿tÜHasNext
(cÚ¡ 
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
);

250 
boŞ
 
dvmEncodedA¼ayI‹¿tÜG‘Next
(
EncodedA¼ayI‹¿tÜ
* 
™”©Ü
,

251 
AÂÙ©iÚV®ue
* 
v®ue
);

	@test/AtomicSpeed.c

20 
	~"D®vik.h
"

27 
u8
 
	$dvmTe¡AtomicS³edSub
(
»³©CouÁ
)

29 
v®ue
 = 7;

30 * 
v®uePŒ
 = &
v®ue
;

31 
u8
 
¡¬t
, 
’d
;

32 
i
;

34 #ifdeà
TRIVIAL_COMPARE


36 
j
 = 
»³©CouÁ
;

39 
	`as£¹
((
»³©CouÁ
 % 10) == 0);

41 
¡¬t
 = 
	`dvmG‘R–©iveTimeN£c
();

43 
i
 = 
»³©CouÁ
 / 10; i != 0; i--) {

44 #ifdeà
TRIVIAL_COMPARE


46 
j
 +ğ
i
; j += i; j += i; j += i; j += i;

47 
j
 +ğ
i
; j += i; j += i; j += i; j += i;

50 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

51 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

52 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

53 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

54 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

55 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

56 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

57 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

58 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

59 
	`ATOMIC_CMP_SWAP
(
v®uePŒ
, 7, 7);

77 
’d
 = 
	`dvmG‘R–©iveTimeN£c
();

79 #ifdeà
TRIVIAL_COMPARE


81 
	`dvmF´štf
(
¡dout
, "%d\n", 
j
);

83 
	`dvmF´štf
(
¡dout
, ".");

84 
	`fæush
(
¡dout
);

86  
’d
 - 
¡¬t
;

87 
	}
}

92 
boŞ
 
	$dvmTe¡AtomicS³ed
()

94 cÚ¡ 
kI‹¿tiÚs
 = 10;

95 cÚ¡ 
kR•—tCouÁ
 = 5 * 1000 * 1000;

96 cÚ¡ 
kD–ay
 = 500 * 1000;

97 
u8
 
»suÉs
[
kI‹¿tiÚs
];

98 
i
;

100 
i
 = 0; i < 
kI‹¿tiÚs
; i++) {

101 
»suÉs
[
i
] = 
	`dvmTe¡AtomicS³edSub
(
kR•—tCouÁ
);

102 
	`u¦“p
(
kD–ay
);

105 
	`dvmF´štf
(
¡dout
, "\n");

106 
	`dvmF´štf
(
¡dout
, "Atomic speedest„esults (%d…er iteration):\n",

107 
kR•—tCouÁ
);

108 
i
 = 0; i < 
kI‹¿tiÚs
; i++) {

109 
	`dvmF´štf
(
¡dout
,

110 " %2d: %.3âs\n", 
i
, (è
»suÉs
[i] / 
kR•—tCouÁ
);

113  
Œue
;

114 
	}
}

	@test/Test.h

20 #iâdeà
_DALVIK_TEST_TEST


21 
	#_DALVIK_TEST_TEST


	)

23 
boŞ
 
dvmTe¡Hash
();

24 
boŞ
 
dvmTe¡AtomicS³ed
();

25 
boŞ
 
dvmTe¡IndœeùRefTabË
();

	@test/TestHash.c

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

24 #iâdeà
NDEBUG


26 
	#kNumTe¡EÁr›s
 14

	)

31 
	$´štFunc
(* 
d©a
, * 
¬g
)

36 * 
couÁ
 = (*è
¬g
;

37 (*
couÁ
)++;

39 
	}
}

40 
	$dumpFÜ—ch
(
HashTabË
* 
pTab
)

42 
couÁ
 = 0;

45 
	`dvmHashFÜ—ch
(
pTab
, 
´štFunc
, &
couÁ
);

46 ià(
couÁ
 !ğ
kNumTe¡EÁr›s
) {

47 
	`LOGE
("TestHash foreachest failed\n");

48 
	`as£¹
(
çl£
);

50 
	}
}

55 
	$dumpI‹¿tÜ
(
HashTabË
* 
pTab
)

57 
couÁ
 = 0;

60 
HashI‹r
 
™”
;

61 
	`dvmHashI‹rBegš
(
pTab
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

62 
	`dvmHashI‹rNext
(&
™”
))

64 cÚ¡ * 
¡r
 = (cÚ¡ *è
	`dvmHashI‹rD©a
(&
™”
);

67 
couÁ
++;

69 ià(
couÁ
 !ğ
kNumTe¡EÁr›s
) {

70 
	`LOGE
("TestHash iteratorest failed\n");

71 
	`as£¹
(
çl£
);

73 
	}
}

78 
boŞ
 
	$dvmTe¡Hash
()

80 
HashTabË
* 
pTab
;

81 
tmpSŒ
[64];

82 cÚ¡ * 
¡r
;

83 
u4
 
hash
;

84 
i
;

86 
	`LOGV
("TestHash BEGIN\n");

88 
pTab
 = 
	`dvmHashTabËC»©e
(
	`dvmHashSize
(12), 
ä“
);

89 ià(
pTab
 =ğ
NULL
)

90  
çl£
;

92 
	`dvmHashTabËLock
(
pTab
);

95 
i
 = 0; i < 
kNumTe¡EÁr›s
; i++) {

96 
	`¥rštf
(
tmpSŒ
, "’Œy %d", 
i
);

97 
hash
 = 
	`dvmCompu‹Utf8Hash
(
tmpSŒ
);

98 
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
(
tmpSŒ
),

99 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

102 
	`dvmHashTabËUÆock
(
pTab
);

105 
i
 = 0; i < 
kNumTe¡EÁr›s
; i++) {

106 
	`¥rštf
(
tmpSŒ
, "’Œy %d", 
i
);

107 
hash
 = 
	`dvmCompu‹Utf8Hash
(
tmpSŒ
);

108 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
tmpSŒ
,

109 (
HashCom·»Func
è
¡rcmp
, 
çl£
);

110 ià(
¡r
 =ğ
NULL
) {

111 
	`LOGE
("Te¡Hash: fau»: could‚Ù fšd '%s'\n", 
tmpSŒ
);

117 
	`¥rštf
(
tmpSŒ
, "entry %d", 17);

118 
hash
 = 
	`dvmCompu‹Utf8Hash
(
tmpSŒ
);

119 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
tmpSŒ
,

120 (
HashCom·»Func
è
¡rcmp
, 
çl£
);

121 ià(
¡r
 =ğ
NULL
) {

124 
	`LOGE
("TestHash found‚onexistent string (improper‡dd?)\n");

127 
	`dumpFÜ—ch
(
pTab
);

128 
	`dumpI‹¿tÜ
(
pTab
);

131 
	`dvmHashTabËF»e
(
pTab
);

137 
pTab
 = 
	`dvmHashTabËC»©e
(
	`dvmHashSize
(2), 
ä“
);

138 ià(
pTab
 =ğ
NULL
)

139  
çl£
;

141 
hash
 = 0;

144 * 
¡r1
;

145 
¡r1
 = 
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
("one"),

146 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

147 
	`as£¹
(
¡r1
 !ğ
NULL
);

148 
¡r
 = 
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
("two"),

149 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

152 ià(!
	`dvmHashTabËRemove
(
pTab
, 
hash
, 
¡r1
))

153 
	`LOGE
("TestHash failedo delete item\n");

155 
	`ä“
(
¡r1
);

158 
couÁ
 = 0;

159 
HashI‹r
 
™”
;

160 
	`dvmHashI‹rBegš
(
pTab
, &
™”
); !
	`dvmHashI‹rDÚe
(&iter);

161 
	`dvmHashI‹rNext
(&
™”
))

163 
couÁ
++;

165 ià(
couÁ
 != 1) {

166 
	`LOGE
("Te¡Hash wrÚg‚umb” oà’Œ› (%d)\n", 
couÁ
);

170 
¡r
 = 
	`dvmHashTabËLookup
(
pTab
, 
hash
, "Úe", (
HashCom·»Func
è
¡rcmp
,
çl£
);

171 ià(
¡r
 !ğ
NULL
)

172 
	`LOGE
("TestHash deletedƒntry has„eturned!");

173 
¡r
 = 
	`dvmHashTabËLookup
(
pTab
, 
hash
, "two", (
HashCom·»Func
è
¡rcmp
,
çl£
);

174 ià(
¡r
 =ğ
NULL
)

175 
	`LOGE
("TestHashƒntry vanished\n");

178 
i
 = 0; i < 20; i++) {

179 
	`¥rštf
(
tmpSŒ
, "’Œy %d", 
i
);

180 
¡r
 = (cÚ¡ *è
	`dvmHashTabËLookup
(
pTab
, 
hash
, 
	`¡rdup
(
tmpSŒ
),

181 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

182 
	`as£¹
(
¡r
 !ğ
NULL
);

185 
	`dvmHashTabËF»e
(
pTab
);

186 
	`LOGV
("TestHash END\n");

188  
Œue
;

189 
	}
}

	@test/TestIndirectRefTable.c

20 
	~"D®vik.h
"

22 
	~<¡dlib.h
>

24 #iâdeà
NDEBUG


26 
	#DBUG_MSG
 
LOGV


	)

31 
boŞ
 
	$basicTe¡
()

33 cÚ¡ 
kTabËMax
 = 20;

34 
IndœeùRefTabË
 
œt
;

35 
IndœeùRef
 
œef0
, 
œef1
, 
œef2
, 
œef3
;

36 
IndœeùRef
 
mªyRefs
[
kTabËMax
];

37 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdCÏss
("Ljava/Ïng/Objeù;", 
NULL
);

38 
Objeù
* 
obj0
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

39 
Objeù
* 
obj1
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

40 
Objeù
* 
obj2
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

41 
Objeù
* 
obj3
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

42 cÚ¡ 
u4
 
cook›
 = 
IRT_FIRST_SEGMENT
;

43 
boŞ
 
»suÉ
 = 
çl£
;

45 ià(!
	`dvmIn™IndœeùRefTabË
(&
œt
, 
kTabËMax
/2, kTableMax,

46 
kIndœeùKšdGlob®
))

48  
çl£
;

51 
œef0
 = (
IndœeùRef
) 0x11110;

52 ià(
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
)) {

53 
	`LOGE
("unexpectedly successful„emoval\n");

54 
ba
;

60 
	`DBUG_MSG
("+++ START fifo\n");

61 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

62 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

63 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

64 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 == NULL) {

65 
	`LOGE
("trivial‡dd1 failed\n");

66 
ba
;

69 ià(
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef0
è!ğ
obj0
 ||

70 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef1
è!ğ
obj1
 ||

71 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef2
è!ğ
obj2
)

73 
	`LOGE
("objects don't matchƒxpected values %p %p %p vs. %p %p %p\n",

74 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef0
),

75 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef1
),

76 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef2
),

77 
obj0
, 
obj1
, 
obj2
);

78 
ba
;

80 
	`DBUG_MSG
("+++ obj1=%°--> i»f1=%p\n", 
obj1
, 
œef1
);

83 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
) ||

84 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
) ||

85 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
))

87 
	`LOGE
("fifo deletion failed\n");

88 
ba
;

92 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

93 
	`LOGE
("fifo del‚otƒmpty\n");

94 
ba
;

98 ià(
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef0
è!ğ
NULL
) {

99 
	`LOGE
("staleƒntry get succeeded unexpectedly\n");

100 
ba
;

106 
	`DBUG_MSG
("+++ START†ifo\n");

107 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

108 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

109 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

110 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 == NULL) {

111 
	`LOGE
("trivial‡dd2 failed\n");

112 
ba
;

115 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
) ||

116 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
) ||

117 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
))

119 
	`LOGE
("lifo deletion failed\n");

120 
ba
;

124 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

125 
	`LOGE
("lifo del‚otƒmpty\n");

126 
ba
;

133 
	`DBUG_MSG
("+++ START unorder\n");

134 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

135 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

136 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

137 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 == NULL) {

138 
	`LOGE
("trivial‡dd3 failed\n");

139 
ba
;

142 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 3) {

143 
	`LOGE
("expected 3ƒntries, found %d\n",

144 
	`dvmIndœeùRefTabËEÁr›s
(&
œt
));

145 
ba
;

148 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
) ||

149 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
))

151 
	`LOGE
("unorder deletion1 failed\n");

152 
ba
;

156 ià(
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef1
è!ğ
NULL
) {

157 
	`LOGE
("hole get succeeded unexpectedly\n");

158 
ba
;

161 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
) ||

162 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
))

164 
	`LOGE
("unorder deletion2 failed\n");

165 
ba
;

169 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

170 
	`LOGE
("unorder del‚otƒmpty\n");

171 
ba
;

179 
	`DBUG_MSG
("+++ START hole fill\n");

180 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

181 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

182 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

183 
œef3
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj3
);

184 ià(
œef0
 =ğ
NULL
 || 
œef1
 =ğNULL || 
œef2
 =ğNULL || 
œef3
 == NULL) {

185 
	`LOGE
("trivial‡dd4 failed\n");

186 
ba
;

188 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
)) {

189 
	`LOGE
("remove 1 of 4 failed\n");

190 
ba
;

192 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

193 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 4) {

194 
	`LOGE
("hole‚ot filled\n");

195 
ba
;

197 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
) ||

198 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef3
))

200 
	`LOGE
("remove 1/3 failed\n");

201 
ba
;

203 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 3) {

204 
	`LOGE
("should be 3‡fterwo deletions\n");

205 
ba
;

207 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
) ||

208 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
))

210 
	`LOGE
("remove 2/0 failed\n");

211 
ba
;

213 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

214 
	`LOGE
("notƒmpty‡fter split„emove\n");

215 
ba
;

223 
	`DBUG_MSG
("+++ START switched\n");

224 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

225 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
);

226 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

227 ià(
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
)) {

228 
	`LOGE
("mism©ched d– sucûeded (%°v %p)\n", 
œef0
, 
œef1
);

229 
ba
;

231 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
)) {

232 
	`LOGE
("switched del failed\n");

233 
ba
;

235 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

236 
	`LOGE
("switching del‚otƒmpty\n");

237 
ba
;

244 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

245 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
);

246 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

247 ià(
œef0
 !ğ
œef1
) {

248 ià(
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
)) {

249 
	`LOGE
("‹mpÜ® d– sucûeded (%°v %p)\n", 
œef0
, 
œef1
);

250 
ba
;

253 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
);

255 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

256 
	`LOGE
("temporal del‚otƒmpty\n");

257 
ba
;

263 
	`DBUG_MSG
("+++ START overflow\n");

264 
i
;

265 
i
 = 0; i < 
kTabËMax
; i++) {

266 
mªyRefs
[
i
] = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

267 ià(
mªyRefs
[
i
] =ğ
NULL
) {

268 
	`LOGE
("Faed‡ddšg %d oà%d\n", 
i
, 
kTabËMax
);

269 
ba
;

272 ià(
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
è!ğ
NULL
) {

273 
	`LOGE
("Table overflow succeeded\n");

274 
ba
;

276 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
è!ğ(
size_t
)
kTabËMax
) {

277 
	`LOGE
("Expected %dƒntries, found %d\n",

278 
kTabËMax
, 
	`dvmIndœeùRefTabËEÁr›s
(&
œt
));

279 
ba
;

281 
i
 = 0; i < 
kTabËMax
-1; i++) {

282 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
mªyRefs
[
i
])) {

283 
	`LOGE
("muÉi-»movçed‡ˆ%d\n", 
i
);

284 
ba
;

288 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
è!ğ(
size_t
)
kTabËMax
) {

289 
	`LOGE
("Expected %dƒntries (with holes), found %d\n",

290 
kTabËMax
, 
	`dvmIndœeùRefTabËEÁr›s
(&
œt
));

291 
ba
;

293 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
mªyRefs
[
kTabËMax
-1])) {

294 
	`LOGE
("multi-remove final failed\n");

295 
ba
;

297 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

298 
	`LOGE
("multi-del‚otƒmpty\n");

299 
ba
;

302 
	`DBUG_MSG
("+++ basicest complete\n");

303 
»suÉ
 = 
Œue
;

305 
ba
:

306 
	`dvmCË¬IndœeùRefTabË
(&
œt
);

307  
»suÉ
;

308 
	}
}

313 
boŞ
 
	$£gm’tTe¡
()

315 cÚ¡ 
kTabËMax
 = 20;

316 
IndœeùRefTabË
 
œt
;

317 
IndœeùRef
 
œef0
, 
œef1
, 
œef2
, 
œef3
;

318 
CÏssObjeù
* 
şazz
 = 
	`dvmFšdCÏss
("Ljava/Ïng/Objeù;", 
NULL
);

319 
Objeù
* 
obj0
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

320 
Objeù
* 
obj1
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

321 
Objeù
* 
obj2
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

322 
Objeù
* 
obj3
 = 
	`dvmAÎocObjeù
(
şazz
, 
ALLOC_DONT_TRACK
);

323 
u4
 
cook›
;

324 
u4
 
£gm’tS‹
[4];

325 
boŞ
 
»suÉ
 = 
çl£
;

327 ià(!
	`dvmIn™IndœeùRefTabË
(&
œt
, 
kTabËMax
, kTableMax,

328 
kIndœeùKšdLoÿl
))

330  
çl£
;

332 
cook›
 = 
£gm’tS‹
[0] = 
IRT_FIRST_SEGMENT
;

333 
	`DBUG_MSG
("+++ obj %°%°%°%p\n", 
obj0
, 
obj1
, 
obj2
, 
obj3
);

340 
	`DBUG_MSG
("+++ START basic segment\n");

341 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

342 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

343 
cook›
 = 
£gm’tS‹
[1] = 
	`dvmPushIndœeùRefTabËSegm’t
(&
œt
);

344 
	`DBUG_MSG
("+++…ushed, cook› i 0x%08x\n", 
cook›
);

345 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

346 
œef3
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj3
);

348 ià(
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
) ||

349 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
))

351 
	`LOGE
("removed values fromƒarlier segment\n");

352 
ba
;

354 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
) ||

355 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef3
))

357 
	`LOGE
("unableo„emove values from current segment\n");

358 
ba
;

360 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 2) {

361 
	`LOGE
("wrongotalƒntries\n");

362 
ba
;

364 
	`dvmPİIndœeùRefTabËSegm’t
(&
œt
, 
£gm’tS‹
[1]);

365 
cook›
 = 
£gm’tS‹
[0];

366 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
) ||

367 !
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
))

369 
	`LOGE
("unableo„emove values from first segment\n");

370 
ba
;

372 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

373 
	`LOGE
("basic…ush/pop‚otƒmpty\n");

374 
ba
;

382 
	`DBUG_MSG
("+++ START segment…op\n");

383 
œef0
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

384 
œef1
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

385 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
);

386 
cook›
 = 
£gm’tS‹
[1] = 
	`dvmPushIndœeùRefTabËSegm’t
(&
œt
);

387 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

388 
œef3
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj3
);

389 
	`dvmPİIndœeùRefTabËSegm’t
(&
œt
, 
£gm’tS‹
[1]);

390 
cook›
 = 
£gm’tS‹
[0];

391 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 2) {

392 
	`LOGE
("wrongotalƒntries‡fter…op\n");

393 
ba
;

395 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
);

396 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

397 
	`LOGE
("not backo zero‡fter…op + del\n");

398 
ba
;

404 
	`DBUG_MSG
("+++ START multiseg\n");

405 
œef0
 = 
	`dvmAµ’dToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj0
);

406 
œef1
 = 
	`dvmAµ’dToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj1
);

407 
cook›
 = 
£gm’tS‹
[1] = 
	`dvmPushIndœeùRefTabËSegm’t
(&
œt
);

408 
cook›
 = 
£gm’tS‹
[2] = 
	`dvmPushIndœeùRefTabËSegm’t
(&
œt
);

409 
œef3
 = 
	`dvmAµ’dToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj3
);

410 
œef2
 = 
	`dvmAµ’dToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

411 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef3
);

412 
cook›
 = 
£gm’tS‹
[3] = 
	`dvmPushIndœeùRefTabËSegm’t
(&
œt
);

413 
œef3
 = 
	`dvmAµ’dToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj3
);

415 ià(
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef0
è!ğ
obj0
 ||

416 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef1
è!ğ
obj1
 ||

417 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef2
è!ğ
obj2
 ||

418 
	`dvmG‘FromIndœeùRefTabË
(&
œt
, 
œef3
è!ğ
obj3
)

420 
	`LOGE
("Unableo„etrieve‡ll multiseg objects\n");

421 
ba
;

424 
	`dvmDumpIndœeùRefTabË
(&
œt
, "test");

431 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef3
);

432 ià(
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
)) {

433 
	`LOGE
("multiseg del2 worked\n");

434 
ba
;

436 
	`dvmPİIndœeùRefTabËSegm’t
(&
œt
, 
£gm’tS‹
[3]);

437 
cook›
 = 
£gm’tS‹
[2];

438 ià(!
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef2
)) {

439 
	`LOGE
("muÉi£g d–2b faed (cook›=0x%08x„ef=%p)\n", 
cook›
, 
œef2
);

440 
ba
;

442 
œef2
 = 
	`dvmAddToIndœeùRefTabË
(&
œt
, 
cook›
, 
obj2
);

445 
	`dvmPİIndœeùRefTabËSegm’t
(&
œt
, 
£gm’tS‹
[1]);

446 
cook›
 = 
£gm’tS‹
[0];

448 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 2) {

449 
	`LOGE
("Unexpectedƒntry count in multiseg\n");

450 
ba
;

452 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef0
);

453 
	`dvmRemoveFromIndœeùRefTabË
(&
œt
, 
cook›
, 
œef1
);

454 ià(
	`dvmIndœeùRefTabËEÁr›s
(&
œt
) != 0) {

455 
	`LOGE
("Unexpectedƒntry count‡t multisegƒnd\n");

456 
ba
;

459 
	`DBUG_MSG
("+++ segmentest complete\n");

460 
»suÉ
 = 
Œue
;

462 
ba
:

463 
	`dvmCË¬IndœeùRefTabË
(&
œt
);

464  
»suÉ
;

465 
	}
}

471 
boŞ
 
	$dvmTe¡IndœeùRefTabË
()

473 ià(!
	`basicTe¡
()) {

474 
	`LOGE
("IRT basicest failed\n");

475  
çl£
;

477 ià(!
	`£gm’tTe¡
()) {

478 
	`LOGE
("IRT segmentest failed\n");

479  
çl£
;

482  
Œue
;

483 
	}
}

	@tprop/TaintPolicy.c

2 
	~"rİ/TaštPŞicyPriv.h
"

20 
TaštProfeEÁry
 
	gcom_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_cÚv”tBy‹ToCh¬_´ofe
[] = {

22 {
NULL
, NULL}

25 
TaštProfeEÁry
 
	gcom_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_decode_´ofe
[] = {

27 {
NULL
, NULL}

30 
TaštProfeEÁry
 
	gcom_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_cÚv”tCh¬ToBy‹_´ofe
[] = {

32 {
NULL
, NULL}

35 
TaštProfeEÁry
 
	gcom_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_’code_´ofe
[] = {

37 {
NULL
, NULL}

40 
TaštProfe
 
	gcom_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_m‘hods
[] = {

41 {"cÚv”tBy‹ToCh¬", 
com_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_cÚv”tBy‹ToCh¬_´ofe
},

42 {"decode", 
com_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_decode_´ofe
},

43 {"cÚv”tCh¬ToBy‹", 
com_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_cÚv”tCh¬ToBy‹_´ofe
},

44 {"’code", 
com_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_’code_´ofe
},

45 {
NULL
, NULL}

50 
TaštProfeEÁry
 
	gfoo_b¬_Çme2_m‘hod1_´ofe
[] = {

53 {
NULL
, NULL}

56 
TaštProfeEÁry
 
	gfoo_b¬_Çme2_m‘hod2_´ofe
[] = {

59 {
NULL
, NULL}

62 
TaštProfe
 
	gfoo_b¬_Çme2_m‘hods
[] = {

63 {"m‘hod1", 
foo_b¬_Çme2_m‘hod1_´ofe
},

64 {"m‘hod2", 
foo_b¬_Çme2_m‘hod2_´ofe
},

65 {
NULL
, NULL}

70 
TaštPŞicy
 
	ggDvmJniTaštPŞicy
[] = {

71 {"Lcom/ibm/icu4jni/ch¬£t/N©iveCÚv”‹r;", 
com_ibm_icu4jni_ch¬£t_N©iveCÚv”‹r_m‘hods
, 
NULL
},

72 {"Lfoo/b¬/Çme2;", 
foo_b¬_Çme2_m‘hods
, 
NULL
},

73 {
NULL
, NULL, NULL}

	@tprop/TaintPolicyPriv.h

2 #iâdeà
_DALVIK_TPROP_TAINT_PROP_PRIV


3 
	#_DALVIK_TPROP_TAINT_PROP_PRIV


	)

5 
	~"D®vik.h
"

8 
	mkTaštProfeUnknown
 = 0,

9 
	mkTaštProfeCÏss
,

10 
	mkTaštProfeP¬am
,

11 
	mkTaštProfeR‘uº


12 } 
	tTaštProfeEÁryTy³
;

15 cÚ¡ * 
	mäom
;

16 cÚ¡ * 
	mto
;

17 } 
	tTaštProfeEÁry
;

19 
	#TAINT_PROFILE_TABLE_SIZE
 8

	)

20 
	#TAINT_POLICY_TABLE_SIZE
 32

	)

23 cÚ¡ * 
	mm‘hodName
;

24 cÚ¡ 
TaštProfeEÁry
* 
	m’Œ›s
;

25 } 
	tTaštProfe
;

28 cÚ¡ * 
	mşassDesütÜ
;

29 cÚ¡ 
TaštProfe
* 
	m´ofes
;

30 
HashTabË
* 
	mm‘hodTabË
;

31 } 
	tTaštPŞicy
;

33 
TaštPŞicy
 
gDvmJniTaštPŞicy
[];

36 
	$hashcmpTaštPŞicy
(cÚ¡ * 
±r1
, cÚ¡ * 
±r2
)

38 
TaštPŞicy
* 
p1
 = (TaštPŞicy*è
±r1
;

39 
TaštPŞicy
* 
p2
 = (TaštPŞicy*è
±r2
;

41  
	`¡rcmp
(
p1
->
şassDesütÜ
, 
p2
->classDescriptor);

42 
	}
}

45 
	$hashcmpTaštProfe
(cÚ¡ * 
±r1
, cÚ¡ * 
±r2
)

47 
TaštProfe
* 
m1
 = (TaštProfe*è
±r1
;

48 
TaštProfe
* 
m2
 = (TaštProfe*è
±r2
;

50  
	`¡rcmp
(
m1
->
m‘hodName
, 
m2
->methodName);

51 
	}
}

54 
	$ä“TaštPŞicy
(* 
p
)

56 
TaštPŞicy
* 
pŞ
 = (TaštPŞicy*è
p
;

57 ià(
pŞ
 !ğ
NULL
) {

58 
	`dvmHashTabËF»e
(
pŞ
->
m‘hodTabË
);

60 
	}
}

63 
	$ä“TaštProfe
(* 
p
)

67 
	}
}

	@tprop/TaintProp.c

2 
	~"D®vik.h
"

3 
	~"rİ/TaštPŞicyPriv.h
"

9 
F›ld
 *
	mf›ld
;

10 
Objeù
 *
	mobj
;

11 } 
	tF›ldRef
;

13 
HashTabË
 *
	ggPŞicyTabË
 = 
NULL
;

15 #ifdeà
TAINT_JNI_LOG


19 
HashTabË
 *
	ggJniLogS“n
 = 
NULL
;

20 
boŞ
 
	ggJniLog
 = 
Œue
;

27 
	$dvmTaštPrİJniS¹up
()

29 
TaštPŞicy
* 
pŞicy
;

30 
u4
 
hash
;

33 
gPŞicyTabË
 = 
	`dvmHashTabËC»©e
(

34 
	`dvmHashSize
(
TAINT_POLICY_TABLE_SIZE
),

35 
ä“TaštPŞicy
);

37 
pŞicy
 = 
gDvmJniTaštPŞicy
;…Şicy->
şassDesütÜ
 !ğ
NULL
;…olicy++) {

38 
TaštProfe
 *
´ofe
;

41 
pŞicy
->
m‘hodTabË
 = 
	`dvmHashTabËC»©e
(

42 
TAINT_PROFILE_TABLE_SIZE
, 
ä“TaštProfe
);

45 
´ofe
 = &
pŞicy
->
´ofes
[0];…rofe->
m‘hodName
 !ğ
NULL
;…rofile++) {

46 
hash
 = 
	`dvmCompu‹Utf8Hash
(
´ofe
->
m‘hodName
);

47 
	`dvmHashTabËLookup
(
pŞicy
->
m‘hodTabË
, 
hash
, 
´ofe
,

48 
hashcmpTaštProfe
, 
Œue
);

52 
hash
 = 
	`dvmCompu‹Utf8Hash
(
pŞicy
->
şassDesütÜ
);

53 
	`dvmHashTabËLookup
(
gPŞicyTabË
, 
hash
, 
pŞicy
,

54 
hashcmpTaštPŞicy
, 
Œue
);

57 #ifdeà
TAINT_JNI_LOG


59 
gJniLogS“n
 = 
	`dvmHashTabËC»©e
(
	`dvmHashSize
(50), 
ä“
);

61 
	}
}

66 
	$dvmTaštPrİJniShutdown
()

68 
	`dvmHashTabËF»e
(
gPŞicyTabË
);

69 #ifdeà
TAINT_JNI_LOG


71 
	`dvmHashTabËF»e
(
gJniLogS“n
);

73 
	}
}

78 
u4
 
	$g‘ObjeùTašt
(
Objeù
* 
obj
, cÚ¡ * 
desütÜ
)

80 
A¼ayObjeù
 *
¬rObj
 = 
NULL
;

82 ià(
obj
 =ğ
NULL
) {

83  
TAINT_CLEAR
;

86 ià(
desütÜ
[0] == '[') {

88 
¬rObj
 = (
A¼ayObjeù
*è
obj
;

89 ià(
¬rObj
 !ğ
NULL
) {

90  
¬rObj
->
št
.
g
;

94 ià(
	`¡rcmp
(
desütÜ
, "Ljava/lang/String;") == 0) {

95 
¬rObj
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
obj
,

96 
gDvm
.
offJavaLªgSŒšg_v®ue
);

97 ià(
¬rObj
 !ğ
NULL
) {

98  
¬rObj
->
št
.
g
;

105  
TAINT_CLEAR
;

106 
	}
}

111 
	$addObjeùTašt
(
Objeù
* 
obj
, cÚ¡ * 
desütÜ
, 
u4
 
g
)

113 
A¼ayObjeù
 *
¬rObj
 = 
NULL
;

115 ià(
obj
 =ğ
NULL
) {

119 ià(
desütÜ
[0] == '[') {

121 
¬rObj
 = (
A¼ayObjeù
*è
obj
;

122 ià(
¬rObj
 !ğ
NULL
) {

123 
¬rObj
->
št
.
g
 |=ag;

127 ià(
	`¡rcmp
(
desütÜ
, "Ljava/lang/String;") == 0) {

128 
¬rObj
 = (
A¼ayObjeù
*è
	`dvmG‘F›ldObjeù
(
obj
,

129 
gDvm
.
offJavaLªgSŒšg_v®ue
);

130 ià(
¬rObj
 !ğ
NULL
) {

131 
¬rObj
->
št
.
g
 |=ag;

139 
	}
}

147 
	$£tR‘uºTašt
(
u4
 
g
, u4* 
¹ašt
, 
JV®ue
* 
pResuÉ
,

148 cÚ¡ * 
desütÜ
)

150 
Objeù
* 
obj
 = 
NULL
;

151 
A¼ayObjeù
* 
¬rObj
 = 
NULL
;

153 
desütÜ
[0]) {

166 *
¹ašt
 |ğ
g
;

171 
¬rObj
 = (
A¼ayObjeù
*è
pResuÉ
->
l
;

172 ià(
¬rObj
 !ğ
NULL
) {

173 
¬rObj
->
št
.
g
 |=ag;

177 
obj
 = (
Objeù
*è
pResuÉ
->
l
;

179 ià(
obj
 !ğ
NULL
) {

180 ià(
	`¡rcmp
(
desütÜ
, "Ljava/lang/String;") == 0) {

181 
¬rObj
 = (
A¼ayObjeù
*)
	`dvmG‘F›ldObjeù
(
obj
,

182 
gDvm
.
offJavaLªgSŒšg_v®ue
);

183 ià(
¬rObj
 !ğ
NULL
) {

184 
¬rObj
->
št
.
g
 |=ag;

189 *
¹ašt
 |ğ
g
;

194 
	}
}

199 
TaštProfe
* 
	$g‘PŞicyProfe
(cÚ¡ 
M‘hod
* 
m‘hod
)

201 
TaštPŞicy
* 
pŞicy
 = 
NULL
;

202 
TaštProfe
* 
´ofe
 = 
NULL
;

203 
u4
 
hash
;

206 
TaštPŞicy
 
tPŞ
 = {
NULL
, NULL, NULL};

207 
TaštProfe
 
tProf
 = {
NULL
, NULL};

209 
	`dvmHashTabËLock
(
gPŞicyTabË
);

212 
hash
 = 
	`dvmCompu‹Utf8Hash
(
m‘hod
->
şazz
->
desütÜ
);

213 
tPŞ
.
şassDesütÜ
 = 
m‘hod
->
şazz
->
desütÜ
;

214 
pŞicy
 = (
TaštPŞicy
*è
	`dvmHashTabËLookup
(
gPŞicyTabË
,

215 
hash
, &
tPŞ
, 
hashcmpTaštPŞicy
, 
çl£
);

217 ià(
pŞicy
 !ğ
NULL
) {

218 
	`dvmHashTabËLock
(
pŞicy
->
m‘hodTabË
);

221 
hash
 = 
	`dvmCompu‹Utf8Hash
(
m‘hod
->
Çme
);

222 
tProf
.
m‘hodName
 = 
m‘hod
->
Çme
;

223 
´ofe
 = (
TaštProfe
*è
	`dvmHashTabËLookup
(
pŞicy
->
m‘hodTabË
,

224 
hash
, &
tProf
, 
hashcmpTaštProfe
, 
çl£
);

226 
	`dvmHashTabËUÆock
(
pŞicy
->
m‘hodTabË
);

229 
	`dvmHashTabËUÆock
(
gPŞicyTabË
);

231  
´ofe
;

232 
	}
}

237 
TaštProfeEÁryTy³
 
	$g‘EÁryTy³
(cÚ¡ * 
’Œy
)

239 
TaštProfeEÁryTy³
 
ty³
 = 
kTaštProfeUnknown
;

241 ià(
	`¡ºcmp
(
’Œy
, "class", 5) == 0) {

242 
ty³
 = 
kTaštProfeCÏss
;

243 } ià(
	`¡ºcmp
(
’Œy
, "param", 5) == 0) {

244 
ty³
 = 
kTaštProfeP¬am
;

245 } ià(
	`¡ºcmp
(
’Œy
, "return", 6) == 0) {

246 
ty³
 = 
kTaštProfeR‘uº
;

249  
ty³
;

250 
	}
}

255 
F›ld
* 
	$g‘F›ldFromProfeV¬
(cÚ¡ * 
v¬
, cÚ¡ 
CÏssObjeù
* 
şazz
)

257 * 
pos
;

258 * 
sig
;

259 * 
Çme
;

260 
In¡F›ld
* 
if›ld
;

261 
SticF›ld
* 
sf›ld
;

262 
F›ld
* 
f›ld
 = 
NULL
;

267 
pos
 = 
	`šdex
(
v¬
, '%');

268 
sig
 = 
	`¡ºdup
(
v¬
, 
pos
-var);

269 
Çme
 = 
	`¡rdup
(
pos
+1);

272 
if›ld
 = 
	`dvmFšdIn¡ªûF›ldH›r
(
şazz
, 
Çme
, 
sig
);

273 ià(
if›ld
 !ğ
NULL
) {

274 
f›ld
 = (
F›ld
*è
if›ld
;

276 
sf›ld
 = 
	`dvmFšdSticF›ldH›r
(
şazz
, 
Çme
, 
sig
);

277 ià(
sf›ld
 !ğ
NULL
) {

278 
f›ld
 = (
F›ld
*è
sf›ld
;

282 
	`ä“
(
sig
);

283 
	`ä“
(
Çme
);

285  
f›ld
;

286 
	}
}

291 
u4
 
	$g‘TaštFromF›ld
(
F›ld
* 
f›ld
, 
Objeù
* 
obj
)

293 
u4
 
g
 = 
TAINT_CLEAR
;

295 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

296 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ld
;

297 
g
 = 
	`dvmG‘SticF›ldTašt
(
sf›ld
);

299 
In¡F›ld
* 
if›ld
 = (In¡F›ld*è
f›ld
;

300 ià(
f›ld
->
sigÇtu»
[0] == 'J' || field->signature[0] == 'D') {

301 
g
 = 
	`dvmG‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
);

303 
g
 = 
	`dvmG‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
);

307  
g
;

308 
	}
}

313 
	$addTaštToF›ld
(
F›ld
* 
f›ld
, 
Objeù
* 
obj
, 
u4
 
g
)

315 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

316 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ld
;

317 
g
 |ğ
	`dvmG‘SticF›ldTašt
(
sf›ld
);

318 
	`dvmS‘SticF›ldTašt
(
sf›ld
, 
g
);

320 
In¡F›ld
* 
if›ld
 = (In¡F›ld*è
f›ld
;

321 ià(
f›ld
->
sigÇtu»
[0] == 'J' || field->signature[0] == 'D') {

322 
g
 |ğ
	`dvmG‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
);

323 
	`dvmS‘F›ldTaštWide
(
obj
, 
if›ld
->
by‹Off£t
, 
g
);

325 
g
 |ğ
	`dvmG‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
);

326 
	`dvmS‘F›ldTašt
(
obj
, 
if›ld
->
by‹Off£t
, 
g
);

329 
	}
}

335 
Objeù
* 
	$g‘ObjeùFromF›ld
(
F›ld
* 
f›ld
, 
Objeù
* 
obj
)

337 ià(
f›ld
->
sigÇtu»
[0] != 'L') {

338  
NULL
;

341 ià(
	`dvmIsSticF›ld
(
f›ld
)) {

342 
SticF›ld
* 
sf›ld
 = (SticF›ld*è
f›ld
;

343  
	`dvmG‘SticF›ldObjeù
(
sf›ld
);

345 
In¡F›ld
* 
if›ld
 = (In¡F›ld*è
f›ld
;

346  
	`dvmG‘F›ldObjeù
(
obj
, 
if›ld
->
by‹Off£t
);

348 
	}
}

355 
F›ldRef
 
	$g‘F›ldFromEÁry
(cÚ¡ * 
’Œy
, 
CÏssObjeù
* 
şazz
, 
Objeù
* 
obj
)

357 
F›ldRef
 
fRef
;

358 * 
¥l™
;

360 
	`mem£t
(&
fRef
, 0, (fRef));

362 
¥l™
 = 
	`šdex
(
’Œy
, '.');

363 ià(
¥l™
 =ğ
NULL
) {

364 
fRef
.
f›ld
 = 
	`g‘F›ldFromProfeV¬
(
’Œy
, 
şazz
);

365 
fRef
.
obj
 = obj;

366 ià(
fRef
.
f›ld
 =ğ
NULL
) {

367 
	`LOGW
("TaštPŞicy: v¬ŸbË dÛ¢'ˆexi¡: %s", 
’Œy
);

370 } ià(
’Œy
[0] != 'L') {

372 
	`LOGW
("TaštPŞicy:ƒx³ùed objeù v¬ŸbË: %s", 
’Œy
);

375 * 
v¬
 = 
	`¡ºdup
(
’Œy
, 
¥l™
-entry);

376 
fRef
.
f›ld
 = 
	`g‘F›ldFromProfeV¬
(
v¬
, 
şazz
);

377 
fRef
.
obj
 = obj;

378 
	`ä“
(
v¬
);

380 ià(
fRef
.
f›ld
 =ğ
NULL
) {

381 
	`LOGW
("TaštPŞicy: v¬ŸbË dÛ¢'ˆexi¡: %s", 
’Œy
);

383 
Objeù
* 
obj2
 = 
	`g‘ObjeùFromF›ld
(
fRef
.
f›ld
, fRef.
obj
);

384 ià(
obj2
 !ğ
NULL
) {

386 
fRef
 = 
	`g‘F›ldFromEÁry
(
¥l™
+1, fRef.
f›ld
->
şazz
, 
obj2
);

388 
	`LOGW
("TaštPŞicy:ƒ¼Ü g‘tšg objeù fÜ %s", 
’Œy
);

393  
fRef
;

394 
	}
}

401 
u4
 
	$g‘F›ldEÁryTašt
(cÚ¡ * 
’Œy
, 
CÏssObjeù
* 
şazz
, 
Objeù
* 
obj
)

403 
u4
 
g
 = 
TAINT_CLEAR
;

404 
F›ldRef
 
fRef
;

406 
fRef
 = 
	`g‘F›ldFromEÁry
(
’Œy
, 
şazz
, 
obj
);

407 ià(
fRef
.
f›ld
 !ğ
NULL
) {

408 
g
 = 
	`g‘TaštFromF›ld
(
fRef
.
f›ld
, fRef.
obj
);

411  
g
;

412 
	}
}

424 
	$·¿mToArgIndex
(cÚ¡ * 
’Œy
, cÚ¡ 
M‘hod
* 
m‘hod
, ** 
desütÜ
) {

425 
pIdx
, 
aIdx
, 
i
;

426 * 
’d±r
;

427 cÚ¡ * 
num
 = 
’Œy
 + 5;

428 cÚ¡ 
DexPrÙo
* 
´Ùo
 = &
m‘hod
->
´ÙÙy³
;

429 
DexP¬am‘”I‹¿tÜ
 
pI‹¿tÜ
;

432 
pIdx
 = 
	`¡¹Ş
(
num
, &
’d±r
, 10);

433 ià(
num
 =ğ
’d±r
) {

439 
	`dexP¬am‘”I‹¿tÜIn™
(&
pI‹¿tÜ
, 
´Ùo
);

440 
aIdx
 = (
	`dvmIsSticM‘hod
(
m‘hod
)?0:1);

441 
i
=0; i<=
pIdx
 ; i++) {

442 cÚ¡ * 
desc
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
pI‹¿tÜ
);

444 ià(
desc
 =ğ
NULL
) {

449 ià(
i
 =ğ
pIdx
) {

451 ià(
desütÜ
 !ğ
NULL
) {

452 *
desütÜ
 = 
	`¡rdup
(
desc
);

458 
aIdx
++;

460 ià(
desc
[0] == 'J' || desc[0] == 'D') {

462 
aIdx
++;

466  
aIdx
;

467 
	}
}

469 
u4
 
	$g‘P¬amEÁryTašt
(cÚ¡ * 
’Œy
, cÚ¡ 
u4
* 
¬gs
, cÚ¡ 
M‘hod
* 
m‘hod
)

471 
u4
 
g
 = 
TAINT_CLEAR
;

472 
aIdx
;

473 * 
pos
;

474 * 
pDesc
 = 
NULL
;

477 
aIdx
 = 
	`·¿mToArgIndex
(
’Œy
, 
m‘hod
, &
pDesc
);

478 ià(
aIdx
 == -1) {

479 
	`LOGW
("TaštPŞicy:ƒ¼Ü…¬sšg %s", 
’Œy
);

480  
g
;

484 
pos
 = 
	`šdex
(
’Œy
, '.');

485 ià(
pos
 =ğ
NULL
 ) {

486 
pDesc
[0]) {

500 
g
 = 
¬gs
[
aIdx
+
m‘hod
->
šsSize
+1];

505 
g
 = 
¬gs
[
aIdx
+
m‘hod
->
šsSize
+1];

506 
g
 |ğ
	`g‘ObjeùTašt
((
Objeù
*)
¬gs
[
aIdx
], 
pDesc
);

509 
	`LOGW
("TaštPŞicy: unknowÀ·¿m‘”y³ fÜ %s", 
’Œy
);

513 ià(
pDesc
[0] != 'L') {

514 
	`LOGW
("TaštPŞicy:…¬am‚Ù objeù iÀ%s", 
’Œy
);

516 
Objeù
* 
obj
 = (Objeù*)
¬gs
[
aIdx
];

517 
g
 = 
	`g‘F›ldEÁryTašt
(
pos
+1, 
obj
->
şazz
, obj);

521 ià(
pDesc
) {

522 
	`ä“
(
pDesc
);

525  
g
;

526 
	}
}

528 
u4
 
	$g‘EÁryTašt
(cÚ¡ * 
’Œy
, cÚ¡ 
u4
* 
¬gs
, cÚ¡ 
M‘hod
* 
m‘hod
)

530 
u4
 
g
 = 
TAINT_CLEAR
;

531 *
pos
;

534 
pos
 = 
	`šdex
(
’Œy
, '.');

536 
	`g‘EÁryTy³
(
’Œy
)) {

537 
kTaštProfeCÏss
:

538 ià(
	`dvmIsSticM‘hod
(
m‘hod
)) {

539 
g
 = 
	`g‘F›ldEÁryTašt
(
pos
+1, 
m‘hod
->
şazz
, 
NULL
);

541 
g
 = 
	`g‘F›ldEÁryTašt
(
pos
+1, 
m‘hod
->
şazz
, (
Objeù
*)
¬gs
[0]);

545 
kTaštProfeP¬am
:

546 
g
 = 
	`g‘P¬amEÁryTašt
(
’Œy
, 
¬gs
, 
m‘hod
);

550 
	`LOGW
("TaštPŞicy: Inv®id fromy³: [%s]", 
’Œy
);

553  
g
;

554 
	}
}

561 
	$addF›ldEÁryTašt
(
u4
 
g
, cÚ¡ * 
’Œy
, 
CÏssObjeù
* 
şazz
, 
Objeù
* 
obj
)

563 
F›ldRef
 
f›ld
;

565 
f›ld
 = 
	`g‘F›ldFromEÁry
(
’Œy
, 
şazz
, 
obj
);

566 ià(
f›ld
.f›ld !ğ
NULL
) {

567 
	`addTaštToF›ld
(
f›ld
.f›ld, f›ld.
obj
, 
g
);

569 
	}
}

571 
	$addP¬amEÁryTašt
(
u4
 
g
, cÚ¡ * 
’Œy
, cÚ¡ u4* 
¬gs
, cÚ¡ 
M‘hod
* 
m‘hod
)

573 
aIdx
;

574 * 
pos
;

575 * 
pDesc
 = 
NULL
;

577 
pos
 = 
	`šdex
(
’Œy
, '.');

580 
aIdx
 = 
	`·¿mToArgIndex
(
’Œy
, 
m‘hod
, &
pDesc
);

581 ià(
aIdx
 == -1) {

582 
	`LOGW
("TaštPŞicy:ƒ¼Ü…¬sšg %s", 
’Œy
);

586 ià(
pos
 =ğ
NULL
 && (
pDesc
[0] == '[' ||…Desc[0] == 'L')) {

588 
Objeù
* 
obj
 = (Objeù*)
¬gs
[
aIdx
];

589 
	`addObjeùTašt
(
obj
, 
pDesc
, 
g
);

590 } ià(
pDesc
[0] == 'L') {

591 
Objeù
* 
obj
 = (Objeù*)
¬gs
[
aIdx
];

592 
	`addF›ldEÁryTašt
(
g
, 
pos
+1, 
obj
->
şazz
, obj);

594 
	`LOGW
("TaintPolicy:…aram‚ot object or‡rray in %s (%s)",

595 
’Œy
, 
pDesc
);

598 ià(
pDesc
) {

599 
	`ä“
(
pDesc
);

601 
	}
}

603 
u4
 
	$addEÁryTašt
(
u4
 
g
, cÚ¡ * 
’Œy
, cÚ¡ u4* 
¬gs
, cÚ¡ 
M‘hod
* 
m‘hod
)

605 
u4
 
¹ašt
 = 
TAINT_CLEAR
;

607 
	`g‘EÁryTy³
(
’Œy
)) {

608 
kTaštProfeCÏss
:

609 ià(
	`dvmIsSticM‘hod
(
m‘hod
)) {

610 
	`addF›ldEÁryTašt
(
g
, 
’Œy
, 
m‘hod
->
şazz
, 
NULL
);

612 
	`addF›ldEÁryTašt
(
g
, 
’Œy
, 
m‘hod
->
şazz
, (
Objeù
*)
¬gs
[0]);

616 
kTaštProfeP¬am
:

617 
	`addP¬amEÁryTašt
(
g
, 
’Œy
, 
¬gs
, 
m‘hod
);

620 
kTaštProfeR‘uº
:

621 ià(
’Œy
[7] == '\0') {

622 
¹ašt
 = 
g
;

625 
	`LOGW
("TaintPolicy:ainting„eturn fields‚ot supported");

630 
	`LOGW
("TaštPŞicy: Inv®id fromy³: [%s]", 
’Œy
);

633  
¹ašt
;

634 
	}
}

639 
u4
 
	$´İM‘hodProfe
(cÚ¡ 
u4
* 
¬gs
, cÚ¡ 
M‘hod
* 
m‘hod
)

641 
u4
 
¹ašt
 = 
TAINT_CLEAR
;

642 
TaštProfe
* 
´ofe
 = 
NULL
;

643 
TaštProfeEÁry
* 
’Œy
 = 
NULL
;

645 
´ofe
 = 
	`g‘PŞicyProfe
(
m‘hod
);

646 ià(
´ofe
 =ğ
NULL
) {

647  
¹ašt
;

654 
’Œy
 = &
´ofe
->
’Œ›s
[0];ƒÁry->
äom
 !ğ
NULL
;ƒntry++) {

655 
u4
 
g
 = 
TAINT_CLEAR
;

657 
g
 = 
	`g‘EÁryTašt
(
’Œy
->
äom
, 
¬gs
, 
m‘hod
);

658 ià(
g
) {

661 
¹ašt
 |ğ
	`addEÁryTašt
(
g
, 
’Œy
->
to
, 
¬gs
, 
m‘hod
);

666  
¹ašt
;

667 
	}
}

674 
	$dvmTaštPrİJniM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
M‘hod
* 
m‘hod
)

676 cÚ¡ 
DexPrÙo
* 
´Ùo
 = &
m‘hod
->
´ÙÙy³
;

677 
DexP¬am‘”I‹¿tÜ
 
pI‹¿tÜ
;

678 
nP¬ams
 = 
	`dexPrÙoG‘P¬am‘”CouÁ
(
´Ùo
);

679 
pS¹
 = (
	`dvmIsSticM‘hod
(
m‘hod
)?0:1);

684 
nArgs
 = 
m‘hod
->
šsSize
;

685 
u4
* 
¹ašt
 = (u4*è&
¬gs
[
nArgs
];

686 
tS¹
 = 
nArgs
+1;

687 
tEnd
 = 
nArgs
*2;

688 
u4
 
g
 = 
TAINT_CLEAR
;

689 
i
;

693 *
desc
 = 
	`dexPrÙoCİyM‘hodDesütÜ
(
´Ùo
);

694 
	`LOGW
("Jni: %s.%s%s, descriptor: %s",

695 
m‘hod
->
şazz
->
desütÜ
, m‘hod->
Çme
,

696 (
	`dvmIsSticM‘hod
(
m‘hod
)?"[¡©ic]":"", 
desc
)

698 
	`ä“
(
desc
);

702 #ifdeà
TAINT_JNI_LOG


704 ià(
gJniLog
) {

705 
u4
 
hash
;

706 
Ën
;

707 *
šSŒ
, *
outSŒ
;

709 
Ën
 = 
	`¡¾’
(
m‘hod
->
şazz
->
desütÜ
è+ 1 + sŒËn(m‘hod->
Çme
);

710 
šSŒ
 = 
	`m®loc
(
Ën
+1);

711 
	`¡rıy
(
šSŒ
, 
m‘hod
->
şazz
->
desütÜ
);

712 
	`¡rÿt
(
šSŒ
, ".");

713 
	`¡rÿt
(
šSŒ
, 
m‘hod
->
Çme
);

714 
hash
 = 
	`dvmCompu‹Utf8Hash
(
šSŒ
);

716 
	`dvmHashTabËLock
(
gJniLogS“n
);

718 
outSŒ
 = 
	`dvmHashTabËLookup
(
gJniLogS“n
, 
hash
, 
šSŒ
,

719 (
HashCom·»Func
è
¡rcmp
, 
çl£
);

721 ià(
outSŒ
 =ğ
NULL
) {

723 
	`LOGD
("JNI METHOD INVOCATION: %s\n", 
šSŒ
);

725 
	`dvmHashTabËLookup
(
gJniLogS“n
, 
hash
, 
šSŒ
,

726 (
HashCom·»Func
è
¡rcmp
, 
Œue
);

728 
	`ä“
(
šSŒ
);

731 
	`dvmHashTabËUÆock
(
gJniLogS“n
);

741 
i
 = 
tS¹
; i <ğ
tEnd
; i++) {

742 
g
 |ğ
¬gs
[
i
];

746 ià(!
	`dvmIsSticM‘hod
(
m‘hod
)) {

747 
g
 |ğ
	`g‘ObjeùTašt
((
Objeù
*)
¬gs
[0], 
m‘hod
->
şazz
->
desütÜ
);

751 
	`dexP¬am‘”I‹¿tÜIn™
(&
pI‹¿tÜ
, 
´Ùo
);

752 
i
=
pS¹
; ; i++) {

753 cÚ¡ * 
desc
 = 
	`dexP¬am‘”I‹¿tÜNextDesütÜ
(&
pI‹¿tÜ
);

755 ià(
desc
 =ğ
NULL
) {

759 ià(
desc
[0] == '[' || desc[0] == 'L') {

760 
g
 |ğ
	`g‘ObjeùTašt
((
Objeù
*è
¬gs
[
i
], 
desc
);

763 ià(
desc
[0] == 'J' || desc[0] == 'D') {

765 
i
++;

770 
g
 |ğ
	`´İM‘hodProfe
(
¬gs
, 
m‘hod
);

773 ià(
g
) {

774 cÚ¡ * 
desc
 = 
	`dexPrÙoG‘R‘uºTy³
(
´Ùo
);

775 
	`£tR‘uºTašt
(
g
, 
¹ašt
, 
pResuÉ
, 
desc
);

777 
	}
}

	@tprop/TaintProp.h

3 #iâdeà
_DALVIK_TPROP_TAINT_PROP


4 
	#_DALVIK_TPROP_TAINT_PROP


	)

7 
dvmTaštPrİJniS¹up
();

10 
dvmTaštPrİJniShutdown
();

13 
dvmTaštPrİJniM‘hod
(cÚ¡ 
u4
* 
¬gs
, 
JV®ue
* 
pResuÉ
, cÚ¡ 
M‘hod
* 
m‘hod
);

	@/usr/include/arpa/inet.h

19 #iâdeà
_ARPA_INET_H


20 
	#_ARPA_INET_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<Ãtš‘/š.h
>

26 #iâdeà
__sockËn_t_defšed


27 
__sockËn_t
 
	tsockËn_t
;

28 
	#__sockËn_t_defšed


	)

31 
__BEGIN_DECLS


35 
š_addr_t
 
	$š‘_addr
 (
__cÚ¡
 *
__ı
è
__THROW
;

38 
š_addr_t
 
	$š‘_Êaof
 (
š_addr
 
__š
è
__THROW
;

42 
š_addr
 
	$š‘_mak—ddr
 (
š_addr_t
 
__Ãt
, in_addr_ˆ
__ho¡
)

43 
__THROW
;

46 
š_addr_t
 
	$š‘_Ãtof
 (
š_addr
 
__š
è
__THROW
;

50 
š_addr_t
 
	$š‘_ÃtwÜk
 (
__cÚ¡
 *
__ı
è
__THROW
;

54 *
	$š‘_Áß
 (
š_addr
 
__š
è
__THROW
;

59 
	$š‘_±Ú
 (
__af
, 
__cÚ¡
 *
__»¡riù
 
__ı
,

60 *
__»¡riù
 
__buf
è
__THROW
;

65 
__cÚ¡
 *
	$š‘_Áİ
 (
__af
, 
__cÚ¡
 *
__»¡riù
 
__ı
,

66 *
__»¡riù
 
__buf
, 
sockËn_t
 
__Ën
)

67 
__THROW
;

71 #ifdeà
__USE_MISC


74 
	$š‘_©Ú
 (
__cÚ¡
 *
__ı
, 
š_addr
 *
__šp
è
__THROW
;

78 *
	$š‘_Ã
 (
š_addr_t
 
__Ãt
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

83 *
	$š‘_Ãt_Áİ
 (
__af
, 
__cÚ¡
 *
__ı
, 
__b™s
,

84 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

89 
	$š‘_Ãt_±Ú
 (
__af
, 
__cÚ¡
 *
__ı
,

90 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

95 
	$š‘_n§p_addr
 (
__cÚ¡
 *
__ı
,

96 *
__buf
, 
__Ën
è
__THROW
;

100 *
	$š‘_n§p_Áß
 (
__Ën
, 
__cÚ¡
 *
__ı
,

101 *
__buf
è
__THROW
;

104 
__END_DECLS


	@/usr/include/assert.h

24 #ifdef 
_ASSERT_H


26 #undeà
_ASSERT_H


27 #undeà
as£¹


28 #undeà
__ASSERT_VOID_CAST


30 #ifdef 
__USE_GNU


31 #undeà
as£¹_³¼Ü


36 
	#_ASSERT_H
 1

	)

37 
	~<ã©u»s.h
>

39 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

40 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

42 
	#__ASSERT_VOID_CAST
 ()

	)

50 #ifdef 
NDEBUG


52 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

60 #ifdef 
__USE_GNU


61 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

66 #iâdeà
_ASSERT_H_DECLS


67 
	#_ASSERT_H_DECLS


	)

68 
__BEGIN_DECLS


71 
	$__as£¹_ç
 (
__cÚ¡
 *
__as£¹iÚ
, __cÚ¡ *
__fe
,

72 
__lše
, 
__cÚ¡
 *
__funùiÚ
)

73 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

76 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, 
__cÚ¡
 *
__fe
,

77 
__lše
,

78 
__cÚ¡
 *
__funùiÚ
)

79 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

84 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

85 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

88 
__END_DECLS


91 
	#as£¹
(
ex´
) \

92 ((
ex´
) \

93 ? 
	`__ASSERT_VOID_CAST
 (0) \

94 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

96 #ifdef 
__USE_GNU


97 
	#as£¹_³¼Ü
(
”ºum
) \

98 (!(
”ºum
) \

99 ? 
	`__ASSERT_VOID_CAST
 (0) \

100 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

108 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

109 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

111 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

112 
	#__ASSERT_FUNCTION
 
__func__


	)

114 
	#__ASSERT_FUNCTION
 ((
__cÚ¡
 *è0)

	)

	@/usr/include/ctype.h

24 #iâdef 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 
	g__BEGIN_DECLS


32 #iâdeà
_ISb™


41 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#_ISb™
(
b™
è(1 << (b™))

	)

45 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

50 
	m_ISuµ”
 = 
_ISb™
 (0),

51 
	m_ISlow”
 = 
_ISb™
 (1),

52 
	m_IS®pha
 = 
_ISb™
 (2),

53 
	m_ISdig™
 = 
_ISb™
 (3),

54 
	m_ISxdig™
 = 
_ISb™
 (4),

55 
	m_IS¥aû
 = 
_ISb™
 (5),

56 
	m_IS´št
 = 
_ISb™
 (6),

57 
	m_ISg¿ph
 = 
_ISb™
 (7),

58 
	m_ISbÏnk
 = 
_ISb™
 (8),

59 
	m_ISúŒl
 = 
_ISb™
 (9),

60 
	m_ISpunù
 = 
_ISb™
 (10),

61 
	m_IS®num
 = 
_ISb™
 (11)

81 
__cÚ¡
 **
	$__ùy³_b_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

83 
__cÚ¡
 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

85 
__cÚ¡
 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

86 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

92 
	#__tßscii
(
c
è((cè& 0x7fè

	)

94 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

96 
__BEGIN_NAMESPACE_STD


102 
	`__exùy³
 (
i§Êum
);

103 
	`__exùy³
 (
i§Íha
);

104 
	`__exùy³
 (
isúŒl
);

105 
	`__exùy³
 (
isdig™
);

106 
	`__exùy³
 (
i¦ow”
);

107 
	`__exùy³
 (
isg¿ph
);

108 
	`__exùy³
 (
i¥ršt
);

109 
	`__exùy³
 (
i¥unù
);

110 
	`__exùy³
 (
is¥aû
);

111 
	`__exùy³
 (
isuµ”
);

112 
	`__exùy³
 (
isxdig™
);

116 
	$tŞow”
 (
__c
è
__THROW
;

119 
	$touµ”
 (
__c
è
__THROW
;

121 
__END_NAMESPACE_STD


125 #ifdef 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
	`__exùy³
 (
isbÏnk
);

130 
__END_NAMESPACE_C99


133 #ifdeà
__USE_GNU


135 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

138 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


142 
	$i§scii
 (
__c
è
__THROW
;

146 
	$tßscii
 (
__c
è
__THROW
;

150 
	`__exùy³
 (
_touµ”
);

151 
	`__exùy³
 (
_tŞow”
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

156 (
__ex‹nsiÚ__
 \

157 ({ 
__»s
; \

158 ià( (
c
) > 1) \

160 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

166 
__»s
 = 
f
 
¬gs
; \

169 
__»s
 = (
a
)[(è(
c
)]; \

170 
__»s
; 
	}
}))

	)

172 #ià!
defšed
 
__NO_CTYPE
 && !defšed 
__ılu¥lus


173 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

174 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

175 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

176 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

177 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

178 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

179 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

180 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

181 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

182 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

183 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

185 #ifdeà
__USE_ISOC99


186 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

189 #ifdeà
__USE_EXTERN_INLINES


190 
__ex‹º_šlše
 

191 
__NTH
 (
	$tŞow”
 (
__c
))

193  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

194 
	}
}

196 
__ex‹º_šlše
 

197 
__NTH
 (
	$touµ”
 (
__c
))

199  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

200 
	}
}

203 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


204 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

205 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

208 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


209 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

210 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

212 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

213 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

219 #ifdeà
__USE_XOPEN2K8


233 
	~<xloÿË.h
>

237 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

238 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

240 
	#__exùy³_l
(
Çme
) \

241 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

247 
__exùy³_l
 (
i§Êum_l
);

248 
__exùy³_l
 (
i§Íha_l
);

249 
__exùy³_l
 (
isúŒl_l
);

250 
__exùy³_l
 (
isdig™_l
);

251 
__exùy³_l
 (
i¦ow”_l
);

252 
__exùy³_l
 (
isg¿ph_l
);

253 
__exùy³_l
 (
i¥ršt_l
);

254 
__exùy³_l
 (
i¥unù_l
);

255 
__exùy³_l
 (
is¥aû_l
);

256 
__exùy³_l
 (
isuµ”_l
);

257 
__exùy³_l
 (
isxdig™_l
);

259 
__exùy³_l
 (
isbÏnk_l
);

263 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

264 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

267 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

268 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

270 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


271 
	#__tŞow”_l
(
c
, 
loÿË
) \

272 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

273 
	#__touµ”_l
(
c
, 
loÿË
) \

274 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

275 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

276 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

280 #iâdeà
__NO_CTYPE


281 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

282 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

283 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

284 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

285 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

286 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

287 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

288 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

289 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

290 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

291 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

293 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

295 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


296 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

297 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

300 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

301 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

302 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

303 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

304 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

305 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

306 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

307 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

308 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

309 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

310 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

312 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

314 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


315 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

316 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

323 
__END_DECLS


	@/usr/include/dlfcn.h

20 #iâdef 
_DLFCN_H


21 
	#_DLFCN_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

28 
	~<b™s/dlfú.h
>

31 #ifdeà
__USE_GNU


36 
	#RTLD_NEXT
 ((*è-1l)

	)

41 
	#RTLD_DEFAULT
 ((*è0)

	)

45 
	tLmid_t
;

48 
	#LM_ID_BASE
 0

	)

49 
	#LM_ID_NEWLM
 -1

	)

53 
__BEGIN_DECLS


57 *
	$dlİ’
 (
__cÚ¡
 *
__fe
, 
__mode
è
__THROW
;

61 
	$dlşo£
 (*
__hªdË
è
__THROW
 
	`__nÚnuÎ
 ((1));

65 *
	$dlsym
 (*
__»¡riù
 
__hªdË
,

66 
__cÚ¡
 *
__»¡riù
 
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((2));

68 #ifdeà
__USE_GNU


70 *
	$dlmİ’
 (
Lmid_t
 
__nsid
, 
__cÚ¡
 *
__fe
, 
__mode
è
__THROW
;

74 *
	$dlvsym
 (*
__»¡riù
 
__hªdË
,

75 
__cÚ¡
 *
__»¡riù
 
__Çme
,

76 
__cÚ¡
 *
__»¡riù
 
__v”siÚ
)

77 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

83 *
	$dË¼Ü
 (è
__THROW
;

86 #ifdeà
__USE_GNU


91 
__cÚ¡
 *
dli_âame
;

92 *
dli_fba£
;

93 
__cÚ¡
 *
dli_¢ame
;

94 *
dli_§ddr
;

95 } 
	tDl_šfo
;

99 
	$dÏddr
 (
__cÚ¡
 *
__add»ss
, 
Dl_šfo
 *
__šfo
)

100 
__THROW
 
	`__nÚnuÎ
 ((2));

103 
	$dÏddr1
 (
__cÚ¡
 *
__add»ss
, 
Dl_šfo
 *
__šfo
,

104 **
__exŒa_šfo
, 
__æags
è
__THROW
 
	`__nÚnuÎ
 ((2));

112 
RTLD_DL_SYMENT
 = 1,

115 
RTLD_DL_LINKMAP
 = 2

124 
	$dlšfo
 (*
__»¡riù
 
__hªdË
,

125 
__»que¡
, *
__»¡riù
 
__¬g
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

132 
RTLD_DI_LMID
 = 1,

136 
RTLD_DI_LINKMAP
 = 2,

138 
RTLD_DI_CONFIGADDR
 = 3,

145 
RTLD_DI_SERINFO
 = 4,

146 
RTLD_DI_SERINFOSIZE
 = 5,

150 
RTLD_DI_ORIGIN
 = 6,

152 
RTLD_DI_PROFILENAME
 = 7,

153 
RTLD_DI_PROFILEOUT
 = 8,

158 
RTLD_DI_TLS_MODID
 = 9,

164 
RTLD_DI_TLS_DATA
 = 10,

166 
RTLD_DI_MAX
 = 10

174 *
dls_Çme
;

175 
dls_æags
;

176 } 
	tDl_£½©h
;

182 
size_t
 
dls_size
;

183 
dls_út
;

184 
Dl_£½©h
 
dls_£½©h
[1];

185 } 
	tDl_£ršfo
;

189 
__END_DECLS


	@/usr/include/endian.h

19 #iâdef 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<ã©u»s.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<b™s/’dŸn.h
>

41 #iâdeà
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

54 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

59 #ifdeà
__USE_BSD


61 
	~<b™s/by‹sw­.h
>

63 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


64 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

65 
	#htŞe16
(
x
è(x)

	)

66 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

67 
	#Ë16toh
(
x
è(x)

	)

69 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

70 
	#htŞe32
(
x
è(x)

	)

71 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

72 
	#Ë32toh
(
x
è(x)

	)

74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/errno.h

23 #iâdef 
_ERRNO_H


27 #iâdef 
__Ãed_Em©h


28 
	#_ERRNO_H
 1

	)

29 
	~<ã©u»s.h
>

32 
	g__BEGIN_DECLS


36 
	~<b™s/”ºo.h
>

37 #undeà
__Ãed_Em©h


39 #ifdef 
_ERRNO_H


46 #iâdef 
”ºo


47 
”ºo
;

50 #ifdeà
__USE_GNU


55 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

59 
	g__END_DECLS


67 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


68 #iâdeà
__”rÜ_t_defšed


69 
	t”rÜ_t
;

70 
	#__”rÜ_t_defšed
 1

	)

72 #undeà
__Ãed_”rÜ_t


	@/usr/include/execinfo.h

19 #iâdeà
_EXECINFO_H


20 
	#_EXECINFO_H
 1

	)

22 
	~<ã©u»s.h
>

24 
__BEGIN_DECLS


28 
	$backŒaû
 (**
__¬¿y
, 
__size
è
	`__nÚnuÎ
 ((1));

33 **
	$backŒaû_symbŞs
 (*
__cÚ¡
 *
__¬¿y
, 
__size
)

34 
__THROW
 
	`__nÚnuÎ
 ((1));

39 
	$backŒaû_symbŞs_fd
 (*
__cÚ¡
 *
__¬¿y
, 
__size
, 
__fd
)

40 
__THROW
 
	`__nÚnuÎ
 ((1));

42 
__END_DECLS


	@/usr/include/fcntl.h

24 #iâdef 
_FCNTL_H


25 
	#_FCNTL_H
 1

	)

27 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/fú.h
>

37 #ifdeà
__USE_XOPEN


38 
	~<sys/¡©.h
>

41 #ifdef 
__USE_MISC


42 #iâdeà
R_OK


45 
	#R_OK
 4

	)

46 
	#W_OK
 2

	)

47 
	#X_OK
 1

	)

48 
	#F_OK
 0

	)

53 #ifdeà
__USE_XOPEN


54 
	#SEEK_SET
 0

	)

55 
	#SEEK_CUR
 1

	)

56 
	#SEEK_END
 2

	)

64 
fú
 (
__fd
, 
__cmd
, ...);

72 #iâdeà
__USE_FILE_OFFSET64


73 
	$İ’
 (
__cÚ¡
 *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

75 #ifdeà
__REDIRECT


76 
	`__REDIRECT
 (
İ’
, (
__cÚ¡
 *
__fe
, 
__oæag
, ...), 
İ’64
)

77 
	`__nÚnuÎ
 ((1));

79 
	#İ’
 
İ’64


	)

82 #ifdeà
__USE_LARGEFILE64


83 
	$İ’64
 (
__cÚ¡
 *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

86 #ifdeà
__USE_ATFILE


96 #iâdeà
__USE_FILE_OFFSET64


97 
	$İ’©
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__oæag
, ...)

98 
	`__nÚnuÎ
 ((2));

100 #ifdeà
__REDIRECT


101 
	`__REDIRECT
 (
İ’©
, (
__fd
, 
__cÚ¡
 *
__fe
, 
__oæag
,

102 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

104 
	#İ’©
 
İ’©64


	)

108 
	$İ’©64
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__oæag
, ...)

109 
	`__nÚnuÎ
 ((2));

117 #iâdeà
__USE_FILE_OFFSET64


118 
	$ü—t
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

120 #ifdeà
__REDIRECT


121 
	`__REDIRECT
 (
ü—t
, (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
),

122 
ü—t64
è
	`__nÚnuÎ
 ((1));

124 
	#ü—t
 
ü—t64


	)

127 #ifdeà
__USE_LARGEFILE64


128 
	$ü—t64
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

131 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

132 && !
defšed
 
__USE_POSIX
))

141 
	#F_ULOCK
 0

	)

142 
	#F_LOCK
 1

	)

143 
	#F_TLOCK
 2

	)

144 
	#F_TEST
 3

	)

146 #iâdeà
__USE_FILE_OFFSET64


147 
	`lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
);

149 #ifdeà
__REDIRECT


150 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

152 
	#lockf
 
lockf64


	)

155 #ifdeà
__USE_LARGEFILE64


156 
	`lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
);

160 #ifdeà
__USE_XOPEN2K


163 #iâdeà
__USE_FILE_OFFSET64


164 
	$posix_çdvi£
 (
__fd
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
,

165 
__advi£
è
__THROW
;

167 #ifdeà
__REDIRECT_NTH


168 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

169 
__off64_t
 
__Ën
, 
__advi£
),

170 
posix_çdvi£64
);

172 
	#posix_çdvi£
 
posix_çdvi£64


	)

175 #ifdeà
__USE_LARGEFILE64


176 
	$posix_çdvi£64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__Ën
,

177 
__advi£
è
__THROW
;

185 #iâdeà
__USE_FILE_OFFSET64


186 
	`posix_çÎoÿ‹
 (
__fd
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

188 #ifdeà
__REDIRECT


189 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

190 
__off64_t
 
__Ën
),

191 
posix_çÎoÿ‹64
);

193 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

196 #ifdeà
__USE_LARGEFILE64


197 
	`posix_çÎoÿ‹64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__Ën
);

203 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše
 \

204 && 
defšed
 
__va_¬g_·ck_Ën


205 
	~<b™s/fú2.h
>

208 
__END_DECLS


	@/usr/include/grp.h

23 #iâdef 
_GRP_H


24 
	#_GRP_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/ty³s.h
>

32 
	#__Ãed_size_t


	)

33 
	~<¡ddef.h
>

37 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
è&& !defšed 
__gid_t_defšed


38 
__gid_t
 
	tgid_t
;

39 
	#__gid_t_defšed


	)

43 
	sgroup


45 *
	mgr_Çme
;

46 *
	mgr_·sswd
;

47 
__gid_t
 
	mgr_gid
;

48 **
	mgr_mem
;

52 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_GNU


53 
	#__Ãed_FILE


	)

54 
	~<¡dio.h
>

58 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


63 
£tg»Á
 ();

69 
’dg»Á
 ();

75 
group
 *
g‘g»Á
 ();

78 #ifdef 
__USE_SVID


85 
group
 *
fg‘g»Á
 (
FILE
 *
__¡»am
);

88 #ifdeà
__USE_GNU


95 
putg»Á
 (
__cÚ¡
 
group
 *
__»¡riù
 
__p
,

96 
FILE
 *
__»¡riù
 
__f
);

103 
group
 *
g‘grgid
 (
__gid_t
 
__gid
);

109 
group
 *
g‘gºam
 (
__cÚ¡
 *
__Çme
);

111 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


113 #ifdeà
__USE_MISC


116 
	#NSS_BUFLEN_GROUP
 1024

	)

132 #ifdeà
__USE_GNU


133 
g‘g»Á_r
 (
group
 *
__»¡riù
 
__»suÉbuf
,

134 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

135 
group
 **
__»¡riù
 
__»suÉ
);

142 
g‘grgid_r
 (
__gid_t
 
__gid
, 
group
 *
__»¡riù
 
__»suÉbuf
,

143 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

144 
group
 **
__»¡riù
 
__»suÉ
);

150 
g‘gºam_r
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

151 
group
 *
__»¡riù
 
__»suÉbuf
,

152 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

153 
group
 **
__»¡riù
 
__»suÉ
);

155 #ifdef 
__USE_SVID


163 
fg‘g»Á_r
 (
FILE
 *
__»¡riù
 
__¡»am
,

164 
group
 *
__»¡riù
 
__»suÉbuf
,

165 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

166 
group
 **
__»¡riù
 
__»suÉ
);

172 #ifdef 
__USE_BSD


174 
	#__Ãed_size_t


	)

175 
	~<¡ddef.h
>

178 
	$£tgroups
 (
size_t
 
__n
, 
__cÚ¡
 
__gid_t
 *
__groups
è
__THROW
;

188 
	`g‘grou¶i¡
 (
__cÚ¡
 *
__u£r
, 
__gid_t
 
__group
,

189 
__gid_t
 *
__groups
, *
__ngroups
);

199 
	`š™groups
 (
__cÚ¡
 *
__u£r
, 
__gid_t
 
__group
);

203 
__END_DECLS


	@/usr/include/inttypes.h

23 #iâdeà
_INTTYPES_H


24 
	#_INTTYPES_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	~<¡dšt.h
>

31 #iâdeà
____gwch¬_t_defšed


32 #ifdeà
__ılu¥lus


33 
	#__gwch¬_t
 
wch¬_t


	)

34 #–ià
defšed
 
__WCHAR_TYPE__


35 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

37 
	#__Ãed_wch¬_t


	)

38 
	~<¡ddef.h
>

39 
wch¬_t
 
	t__gwch¬_t
;

41 
	#____gwch¬_t_defšed
 1

	)

47 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_FORMAT_MACROS


49 #ià
__WORDSIZE
 == 64

50 
	#__PRI64_PREFIX
 "l"

	)

51 
	#__PRIPTR_PREFIX
 "l"

	)

53 
	#__PRI64_PREFIX
 "Î"

	)

54 
	#__PRIPTR_PREFIX


	)

60 
	#PRId8
 "d"

	)

61 
	#PRId16
 "d"

	)

62 
	#PRId32
 "d"

	)

63 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

65 
	#PRIdLEAST8
 "d"

	)

66 
	#PRIdLEAST16
 "d"

	)

67 
	#PRIdLEAST32
 "d"

	)

68 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIdFAST8
 "d"

	)

71 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

72 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

73 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

76 
	#PRIi8
 "i"

	)

77 
	#PRIi16
 "i"

	)

78 
	#PRIi32
 "i"

	)

79 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

81 
	#PRIiLEAST8
 "i"

	)

82 
	#PRIiLEAST16
 "i"

	)

83 
	#PRIiLEAST32
 "i"

	)

84 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIiFAST8
 "i"

	)

87 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

88 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

89 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

92 
	#PRIo8
 "o"

	)

93 
	#PRIo16
 "o"

	)

94 
	#PRIo32
 "o"

	)

95 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

97 
	#PRIoLEAST8
 "o"

	)

98 
	#PRIoLEAST16
 "o"

	)

99 
	#PRIoLEAST32
 "o"

	)

100 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIoFAST8
 "o"

	)

103 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

104 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

105 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

108 
	#PRIu8
 "u"

	)

109 
	#PRIu16
 "u"

	)

110 
	#PRIu32
 "u"

	)

111 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

113 
	#PRIuLEAST8
 "u"

	)

114 
	#PRIuLEAST16
 "u"

	)

115 
	#PRIuLEAST32
 "u"

	)

116 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIuFAST8
 "u"

	)

119 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

120 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

121 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

124 
	#PRIx8
 "x"

	)

125 
	#PRIx16
 "x"

	)

126 
	#PRIx32
 "x"

	)

127 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

129 
	#PRIxLEAST8
 "x"

	)

130 
	#PRIxLEAST16
 "x"

	)

131 
	#PRIxLEAST32
 "x"

	)

132 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIxFAST8
 "x"

	)

135 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

136 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

137 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

140 
	#PRIX8
 "X"

	)

141 
	#PRIX16
 "X"

	)

142 
	#PRIX32
 "X"

	)

143 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

145 
	#PRIXLEAST8
 "X"

	)

146 
	#PRIXLEAST16
 "X"

	)

147 
	#PRIXLEAST32
 "X"

	)

148 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

150 
	#PRIXFAST8
 "X"

	)

151 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

152 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

153 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

157 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

158 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

159 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

160 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

161 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

162 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

166 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

167 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

168 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

169 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

170 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

171 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

177 
	#SCNd8
 "hhd"

	)

178 
	#SCNd16
 "hd"

	)

179 
	#SCNd32
 "d"

	)

180 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

182 
	#SCNdLEAST8
 "hhd"

	)

183 
	#SCNdLEAST16
 "hd"

	)

184 
	#SCNdLEAST32
 "d"

	)

185 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNdFAST8
 "hhd"

	)

188 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

189 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

190 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

193 
	#SCNi8
 "hhi"

	)

194 
	#SCNi16
 "hi"

	)

195 
	#SCNi32
 "i"

	)

196 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

198 
	#SCNiLEAST8
 "hhi"

	)

199 
	#SCNiLEAST16
 "hi"

	)

200 
	#SCNiLEAST32
 "i"

	)

201 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNiFAST8
 "hhi"

	)

204 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

205 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

206 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

209 
	#SCNu8
 "hhu"

	)

210 
	#SCNu16
 "hu"

	)

211 
	#SCNu32
 "u"

	)

212 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

214 
	#SCNuLEAST8
 "hhu"

	)

215 
	#SCNuLEAST16
 "hu"

	)

216 
	#SCNuLEAST32
 "u"

	)

217 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNuFAST8
 "hhu"

	)

220 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

221 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

222 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

225 
	#SCNo8
 "hho"

	)

226 
	#SCNo16
 "ho"

	)

227 
	#SCNo32
 "o"

	)

228 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

230 
	#SCNoLEAST8
 "hho"

	)

231 
	#SCNoLEAST16
 "ho"

	)

232 
	#SCNoLEAST32
 "o"

	)

233 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNoFAST8
 "hho"

	)

236 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

237 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

238 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

241 
	#SCNx8
 "hhx"

	)

242 
	#SCNx16
 "hx"

	)

243 
	#SCNx32
 "x"

	)

244 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

246 
	#SCNxLEAST8
 "hhx"

	)

247 
	#SCNxLEAST16
 "hx"

	)

248 
	#SCNxLEAST32
 "x"

	)

249 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

251 
	#SCNxFAST8
 "hhx"

	)

252 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

253 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

254 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

258 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

259 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

260 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

261 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

262 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

265 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

266 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

267 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

268 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

269 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

274 
	g__BEGIN_DECLS


276 #ià
__WORDSIZE
 == 64

281 
	mquÙ
;

282 
	m»m
;

283 } 
	timaxdiv_t
;

290 
	mquÙ
;

291 
	m»m
;

292 } 
	timaxdiv_t
;

298 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

301 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

302 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

305 
štmax_t
 
	$¡¹oimax
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

306 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

309 
uštmax_t
 
	$¡¹oumax
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

310 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

313 
štmax_t
 
	$wc¡oimax
 (
__cÚ¡
 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

314 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

315 
__THROW
;

318 
uštmax_t
 
	$wc¡oumax
 (
__cÚ¡
 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

319 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

320 
__THROW
;

322 #ifdeà
__USE_EXTERN_INLINES


324 #ià
__WORDSIZE
 == 64

326 
	$__¡¹Ş_š‹º®
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

327 **
__»¡riù
 
__’d±r
,

328 
__ba£
, 
__group
)

329 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

331 
__ex‹º_šlše
 
štmax_t


332 
	`__NTH
 (
	$¡¹oimax
 (
__cÚ¡
 *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

333 
ba£
))

335  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

336 
	}
}

338 
	$__¡¹oul_š‹º®
 (
__cÚ¡
 *

339 
__»¡riù
 
__ÅŒ
,

340 ** 
__»¡riù
 
__’d±r
,

341 
__ba£
, 
__group
)

342 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

344 
__ex‹º_šlše
 
uštmax_t


345 
	`__NTH
 (
	$¡¹oumax
 (
__cÚ¡
 *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

346 
ba£
))

348  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

349 
	}
}

351 
	$__wc¡Ş_š‹º®
 (
__cÚ¡
 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

352 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

353 
__ba£
, 
__group
)

354 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

356 
__ex‹º_šlše
 
štmax_t


357 
	`__NTH
 (
	$wc¡oimax
 (
__cÚ¡
 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

358 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

360  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

361 
	}
}

363 
	$__wc¡oul_š‹º®
 (
__cÚ¡
 
__gwch¬_t
 *

364 
__»¡riù
 
__ÅŒ
,

365 
__gwch¬_t
 **

366 
__»¡riù
 
__’d±r
,

367 
__ba£
, 
__group
)

368 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

370 
__ex‹º_šlše
 
uštmax_t


371 
	`__NTH
 (
	$wc¡oumax
 (
__cÚ¡
 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

372 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

374  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

375 
	}
}

379 
__ex‹nsiÚ__


380 
	$__¡¹Şl_š‹º®
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

381 **
__»¡riù
 
__’d±r
,

382 
__ba£
, 
__group
)

383 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

385 
__ex‹º_šlše
 
štmax_t


386 
	`__NTH
 (
	$¡¹oimax
 (
__cÚ¡
 *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

387 
ba£
))

389  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

390 
	}
}

392 
__ex‹nsiÚ__


393 
	$__¡¹ouÎ_š‹º®
 (
__cÚ¡
 *

394 
__»¡riù
 
__ÅŒ
,

396 
__»¡riù
 
__’d±r
,

397 
__ba£
,

398 
__group
)

399 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

401 
__ex‹º_šlše
 
uštmax_t


402 
	`__NTH
 (
	$¡¹oumax
 (
__cÚ¡
 *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

403 
ba£
))

405  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

406 
	}
}

408 
__ex‹nsiÚ__


409 
	$__wc¡Şl_š‹º®
 (
__cÚ¡
 
__gwch¬_t
 *

410 
__»¡riù
 
__ÅŒ
,

411 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

412 
__ba£
, 
__group
)

413 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

415 
__ex‹º_šlše
 
štmax_t


416 
	`__NTH
 (
	$wc¡oimax
 (
__cÚ¡
 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

417 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

419  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

420 
	}
}

423 
__ex‹nsiÚ__


424 
	$__wc¡ouÎ_š‹º®
 (
__cÚ¡
 
__gwch¬_t
 *

425 
__»¡riù
 
__ÅŒ
,

426 
__gwch¬_t
 **

427 
__»¡riù
 
__’d±r
,

428 
__ba£
,

429 
__group
)

430 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

432 
__ex‹º_šlše
 
uštmax_t


433 
	`__NTH
 (
	$wc¡oumax
 (
__cÚ¡
 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

434 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

436  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

437 
	}
}

442 
	g__END_DECLS


	@/usr/include/limits.h

24 #iâdeà
_LIBC_LIMITS_H_


25 
	#_LIBC_LIMITS_H_
 1

	)

27 
	~<ã©u»s.h
>

33 
	#MB_LEN_MAX
 16

	)

38 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

43 #iâdeà
_LIMITS_H


44 
	#_LIMITS_H
 1

	)

46 
	~<b™s/wÜdsize.h
>

55 
	#CHAR_BIT
 8

	)

58 
	#SCHAR_MIN
 (-128)

	)

59 
	#SCHAR_MAX
 127

	)

62 
	#UCHAR_MAX
 255

	)

65 #ifdeà
__CHAR_UNSIGNED__


66 
	#CHAR_MIN
 0

	)

67 
	#CHAR_MAX
 
UCHAR_MAX


	)

69 
	#CHAR_MIN
 
SCHAR_MIN


	)

70 
	#CHAR_MAX
 
SCHAR_MAX


	)

74 
	#SHRT_MIN
 (-32768)

	)

75 
	#SHRT_MAX
 32767

	)

78 
	#USHRT_MAX
 65535

	)

81 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

82 
	#INT_MAX
 2147483647

	)

85 
	#UINT_MAX
 4294967295U

	)

88 #ià
__WORDSIZE
 == 64

89 
	#LONG_MAX
 9223372036854775807L

	)

91 
	#LONG_MAX
 2147483647L

	)

93 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

96 #ià
__WORDSIZE
 == 64

97 
	#ULONG_MAX
 18446744073709551615UL

	)

99 
	#ULONG_MAX
 4294967295UL

	)

102 #ifdeà
__USE_ISOC99


105 
	#LLONG_MAX
 9223372036854775807LL

	)

106 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

109 
	#ULLONG_MAX
 18446744073709551615ULL

	)

123 #ià
defšed
 
__GNUC__
 && !defšed 
_GCC_LIMITS_H_


125 #šşude_Ãxˆ<
lim™s
.
h
>

131 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__


132 #iâdeà
LLONG_MIN


133 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

135 #iâdeà
LLONG_MAX


136 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

138 #iâdeà
ULLONG_MAX


139 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

143 #ifdef 
__USE_POSIX


145 
	~<b™s/posix1_lim.h
>

148 #ifdef 
__USE_POSIX2


149 
	~<b™s/posix2_lim.h
>

152 #ifdef 
__USE_XOPEN


153 
	~<b™s/xİ’_lim.h
>

	@/usr/include/linux/unistd.h

1 #iâdeà
_LINUX_UNISTD_H_


2 
	#_LINUX_UNISTD_H_


	)

7 
	~<asm/uni¡d.h
>

	@/usr/include/math.h

25 #iâdef 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/huge_v®.h
>

35 #ifdeà
__USE_ISOC99


36 
	~<b™s/huge_v®f.h
>

37 
	~<b™s/huge_v®l.h
>

40 
	~<b™s/šf.h
>

43 
	~<b™s/Çn.h
>

47 
	~<b™s/m©hdef.h
>

54 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

56 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

57 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

58 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

59 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

61 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

62 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

63 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

64 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

65 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

67 
	#_MdoubË_
 

	)

68 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

69 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<b™s/m©hÿÎs.h
>

72 #undeà
_MdoubË_


73 #undeà
_MdoubË_BEGIN_NAMESPACE


74 #undeà
_MdoubË_END_NAMESPACE


75 #undeà
__MATH_PRECNAME


77 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


83 #iâdeà
_Mæßt_


84 
	#_Mæßt_
 

	)

86 
	#_MdoubË_
 
_Mæßt_


	)

87 #ifdeà
__STDC__


88 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
f
 
	)
r

92 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<b™s/m©hÿÎs.h
>

95 #undeà
_MdoubË_


96 #undeà
_MdoubË_BEGIN_NAMESPACE


97 #undeà
_MdoubË_END_NAMESPACE


98 #undeà
__MATH_PRECNAME


100 #ià(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!
defšed
 
__NO_LONG_DOUBLE_MATH
 \

102 || 
defšed
 
__LDBL_COMPAT
 \

103 || !
defšed
 
_LIBC
)

104 #ifdeà
__LDBL_COMPAT


106 #ifdeà
__USE_ISOC99


107 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

108 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

109 #ifdeà
__REDIRECT_NTH


110 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

111 
__Ædbl_Ãx‰ow¬df
)

112 
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

114 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

115 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

116 (
__x
, 
__y
),

117 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

122 #ià
defšed
 
__LDBL_COMPAT
 || defšed 
__NO_LONG_DOUBLE_MATH


124 #undeà
__MATHDECL_1


125 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

126 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

127 
¬gs
, 
®Ÿs
)

	)

128 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

129 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

134 #iâdeà
_MlÚg_doubË_


135 
	#_MlÚg_doubË_
 

	)

137 
	#_MdoubË_
 
_MlÚg_doubË_


	)

138 #ifdeà
__STDC__


139 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

141 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
l
 
	)
r

143 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

144 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

145 
	~<b™s/m©hÿÎs.h
>

146 #undeà
_MdoubË_


147 #undeà
_MdoubË_BEGIN_NAMESPACE


148 #undeà
_MdoubË_END_NAMESPACE


149 #undeà
__MATH_PRECNAME


154 #undeà
__MATHDECL_1


155 #undeà
__MATHDECL


156 #undeà
__MATHCALL


159 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


161 
signgam
;

166 #ifdeà
__USE_ISOC99


204 
FP_NAN
,

205 
	#FP_NAN
 
FP_NAN


	)

206 
FP_INFINITE
,

207 
	#FP_INFINITE
 
FP_INFINITE


	)

208 
FP_ZERO
,

209 
	#FP_ZERO
 
FP_ZERO


	)

210 
FP_SUBNORMAL
,

211 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

212 
FP_NORMAL


213 
	#FP_NORMAL
 
FP_NORMAL


	)

217 #ifdeà
__NO_LONG_DOUBLE_MATH


218 
	#åşassify
(
x
) \

219 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

221 
	#åşassify
(
x
) \

222 ( (
x
) ==  () \

223 ? 
	`__åşassifyf
 (
x
) \

224 :  (
x
) ==  () \

225 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

229 #ifdeà
__NO_LONG_DOUBLE_MATH


230 
	#signb™
(
x
) \

231 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

233 
	#signb™
(
x
) \

234 ( (
x
) ==  () \

235 ? 
	`__signb™f
 (
x
) \

236 :  (
x
) ==  () \

237 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

241 #ifdeà
__NO_LONG_DOUBLE_MATH


242 
	#isfš™e
(
x
) \

243 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

245 
	#isfš™e
(
x
) \

246 ( (
x
) ==  () \

247 ? 
	`__fš™ef
 (
x
) \

248 :  (
x
) ==  () \

249 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

253 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

257 #ifdeà
__NO_LONG_DOUBLE_MATH


258 
	#i¢ª
(
x
) \

259 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

261 
	#i¢ª
(
x
) \

262 ( (
x
) ==  () \

263 ? 
	`__i¢ªf
 (
x
) \

264 :  (
x
) ==  () \

265 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

269 #ifdeà
__NO_LONG_DOUBLE_MATH


270 
	#isšf
(
x
) \

271 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

273 
	#isšf
(
x
) \

274 ( (
x
) ==  () \

275 ? 
	`__isšff
 (
x
) \

276 :  (
x
) ==  () \

277 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

281 
	#MATH_ERRNO
 1

	)

282 
	#MATH_ERREXCEPT
 2

	)

287 #iâdeà
__FAST_MATH__


288 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

293 #ifdef 
__USE_MISC


297 
_IEEE_
 = -1,

298 
_SVID_
,

299 
_XOPEN_
,

300 
_POSIX_
,

301 
_ISOC_


302 } 
	t_LIB_VERSION_TYPE
;

307 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

311 #ifdeà
__USE_SVID


317 #ifdeà
__ılu¥lus


318 
__exû±iÚ


320 
exû±iÚ


323 
ty³
;

324 *
Çme
;

325 
¬g1
;

326 
¬g2
;

327 
»tv®
;

328 
	}
};

330 #ifdeà
__ılu¥lus


331 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

333 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

336 
	#X_TLOSS
 1.41484755040568800000e+16

	)

339 
	#DOMAIN
 1

	)

340 
	#SING
 2

	)

341 
	#OVERFLOW
 3

	)

342 
	#UNDERFLOW
 4

	)

343 
	#TLOSS
 5

	)

344 
	#PLOSS
 6

	)

347 
	#HUGE
 3.40282347e+38F

	)

351 #ifdeà
__USE_XOPEN


353 
	#MAXFLOAT
 3.40282347e+38F

	)

360 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


361 
	#M_E
 2.7182818284590452354

	)

362 
	#M_LOG2E
 1.4426950408889634074

	)

363 
	#M_LOG10E
 0.43429448190325182765

	)

364 
	#M_LN2
 0.69314718055994530942

	)

365 
	#M_LN10
 2.30258509299404568402

	)

366 
	#M_PI
 3.14159265358979323846

	)

367 
	#M_PI_2
 1.57079632679489661923

	)

368 
	#M_PI_4
 0.78539816339744830962

	)

369 
	#M_1_PI
 0.31830988618379067154

	)

370 
	#M_2_PI
 0.63661977236758134308

	)

371 
	#M_2_SQRTPI
 1.12837916709551257390

	)

372 
	#M_SQRT2
 1.41421356237309504880

	)

373 
	#M_SQRT1_2
 0.70710678118654752440

	)

379 #ifdeà
__USE_GNU


380 
	#M_El
 2.7182818284590452353602874713526625L

	)

381 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

382 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

383 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

384 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

385 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

386 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

387 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

388 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

389 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

390 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

391 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

392 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

399 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


400 
	#__NO_MATH_INLINES
 1

	)

403 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

410 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

411 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

412 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

413 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

414 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

415 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

419 #ifdeà
__USE_EXTERN_INLINES


420 
	~<b™s/m©hšlše.h
>

423 #ifdeà
__USE_ISOC99


427 #iâdeà
isg»©”


428 
	#isg»©”
(
x
, 
y
) \

429 (
__ex‹nsiÚ__
 \

430 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

431 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

435 #iâdeà
isg»©”equ®


436 
	#isg»©”equ®
(
x
, 
y
) \

437 (
__ex‹nsiÚ__
 \

438 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

439 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

443 #iâdeà
i¦ess


444 
	#i¦ess
(
x
, 
y
) \

445 (
__ex‹nsiÚ__
 \

446 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

447 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

451 #iâdeà
i¦es£qu®


452 
	#i¦es£qu®
(
x
, 
y
) \

453 (
__ex‹nsiÚ__
 \

454 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

455 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

459 #iâdeà
i¦essg»©”


460 
	#i¦essg»©”
(
x
, 
y
) \

461 (
__ex‹nsiÚ__
 \

462 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

463 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

467 #iâdeà
isunÜd”ed


468 
	#isunÜd”ed
(
u
, 
v
) \

469 (
__ex‹nsiÚ__
 \

470 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

471 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

476 
	g__END_DECLS


	@/usr/include/netdb.h

23 #iâdef 
_NETDB_H


24 
	#_NETDB_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	~<Ãtš‘/š.h
>

29 
	~<¡dšt.h
>

30 #ifdeà
__USE_MISC


33 
	~<½c/Ãtdb.h
>

36 #ifdeà
__USE_GNU


37 
	#__Ãed_sigev’t_t


	)

38 
	~<b™s/sigšfo.h
>

39 
	#__Ãed_time¥ec


	)

40 
	~<time.h
>

43 
	~<b™s/Ãtdb.h
>

46 
	#_PATH_HEQUIV
 "/‘c/ho¡s.equiv"

	)

47 
	#_PATH_HOSTS
 "/‘c/ho¡s"

	)

48 
	#_PATH_NETWORKS
 "/‘c/ÃtwÜks"

	)

49 
	#_PATH_NSSWITCH_CONF
 "/‘c/nssw™ch.cÚf"

	)

50 
	#_PATH_PROTOCOLS
 "/‘c/´ÙocŞs"

	)

51 
	#_PATH_SERVICES
 "/‘c/£rviûs"

	)

54 
	g__BEGIN_DECLS


58 
	#h_”ºo
 (*
	`__h_”ºo_loÿtiÚ
 ())

	)

61 *
	$__h_”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

65 
	#HOST_NOT_FOUND
 1

	)

66 
	#TRY_AGAIN
 2

	)

68 
	#NO_RECOVERY
 3

	)

70 
	#NO_DATA
 4

	)

72 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


73 
	#NETDB_INTERNAL
 -1

	)

74 
	#NETDB_SUCCESS
 0

	)

75 
	#NO_ADDRESS
 
NO_DATA


	)

78 #ifdeà
__USE_XOPEN2K


80 
	#IPPORT_RESERVED
 1024

	)

83 #ifdeà
__USE_GNU


85 
	#SCOPE_DELIMITER
 '%'

	)

88 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


91 
	$h”rÜ
 (
__cÚ¡
 *
__¡r
è
__THROW
;

94 
__cÚ¡
 *
	$h¡»¼Ü
 (
__”r_num
è
__THROW
;

99 
	sho¡’t


101 *
h_Çme
;

102 **
h_®Ÿ£s
;

103 
h_add¹y³
;

104 
h_Ëngth
;

105 **
h_addr_li¡
;

106 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


107 
	#h_addr
 
h_addr_li¡
[0]

	)

116 
	`£tho¡’t
 (
__¡ay_İ’
);

122 
	`’dho¡’t
 ();

129 
ho¡’t
 *
	`g‘ho¡’t
 ();

136 
ho¡’t
 *
	`g‘ho¡byaddr
 (
__cÚ¡
 *
__addr
, 
__sockËn_t
 
__Ën
,

137 
__ty³
);

143 
ho¡’t
 *
	`g‘ho¡byÇme
 (
__cÚ¡
 *
__Çme
);

145 #ifdeà
__USE_MISC


154 
ho¡’t
 *
	`g‘ho¡byÇme2
 (
__cÚ¡
 *
__Çme
, 
__af
);

166 
	`g‘ho¡’t_r
 (
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

167 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

168 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

169 *
__»¡riù
 
__h_”ºİ
);

171 
	`g‘ho¡byaddr_r
 (
__cÚ¡
 *
__»¡riù
 
__addr
, 
__sockËn_t
 
__Ën
,

172 
__ty³
,

173 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

174 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

175 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

176 *
__»¡riù
 
__h_”ºİ
);

178 
	`g‘ho¡byÇme_r
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

179 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

180 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

181 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

182 *
__»¡riù
 
__h_”ºİ
);

184 
	`g‘ho¡byÇme2_r
 (
__cÚ¡
 *
__»¡riù
 
__Çme
, 
__af
,

185 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

186 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

187 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

188 *
__»¡riù
 
__h_”ºİ
);

197 
	`£Š‘’t
 (
__¡ay_İ’
);

203 
	`’dÃ‹Á
 ();

210 
Ã‹Á
 *
	`g‘Ã‹Á
 ();

217 
Ã‹Á
 *
	`g‘Ãtbyaddr
 (
ušt32_t
 
__Ãt
, 
__ty³
);

223 
Ã‹Á
 *
	`g‘ÃtbyÇme
 (
__cÚ¡
 *
__Çme
);

225 #ifdef 
__USE_MISC


236 
	`g‘Ã‹Á_r
 (
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

237 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

238 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

239 *
__»¡riù
 
__h_”ºİ
);

241 
	`g‘Ãtbyaddr_r
 (
ušt32_t
 
__Ãt
, 
__ty³
,

242 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

243 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

244 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

245 *
__»¡riù
 
__h_”ºİ
);

247 
	`g‘ÃtbyÇme_r
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

248 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

249 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

250 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

251 *
__»¡riù
 
__h_”ºİ
);

256 
	s£rv’t


258 *
s_Çme
;

259 **
s_®Ÿ£s
;

260 
s_pÜt
;

261 *
s_´Ùo
;

269 
	`£t£rv’t
 (
__¡ay_İ’
);

275 
	`’d£rv’t
 ();

282 
£rv’t
 *
	`g‘£rv’t
 ();

289 
£rv’t
 *
	`g‘£rvbyÇme
 (
__cÚ¡
 *
__Çme
,

290 
__cÚ¡
 *
__´Ùo
);

297 
£rv’t
 *
	`g‘£rvbypÜt
 (
__pÜt
, 
__cÚ¡
 *
__´Ùo
);

300 #ifdef 
__USE_MISC


308 
	`g‘£rv’t_r
 (
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

309 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

310 
£rv’t
 **
__»¡riù
 
__»suÉ
);

312 
	`g‘£rvbyÇme_r
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

313 
__cÚ¡
 *
__»¡riù
 
__´Ùo
,

314 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

315 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

316 
£rv’t
 **
__»¡riù
 
__»suÉ
);

318 
	`g‘£rvbypÜt_r
 (
__pÜt
, 
__cÚ¡
 *
__»¡riù
 
__´Ùo
,

319 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

320 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

321 
£rv’t
 **
__»¡riù
 
__»suÉ
);

326 
	s´ÙÛÁ


328 *
p_Çme
;

329 **
p_®Ÿ£s
;

330 
p_´Ùo
;

338 
	`£rÙÛÁ
 (
__¡ay_İ’
);

344 
	`’d´ÙÛÁ
 ();

351 
´ÙÛÁ
 *
	`g‘´ÙÛÁ
 ();

357 
´ÙÛÁ
 *
	`g‘´ÙobyÇme
 (
__cÚ¡
 *
__Çme
);

363 
´ÙÛÁ
 *
	`g‘´Ùobynumb”
 (
__´Ùo
);

366 #ifdef 
__USE_MISC


374 
	`g‘´ÙÛÁ_r
 (
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

375 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

376 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

378 
	`g‘´ÙobyÇme_r
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

379 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

380 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

381 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

383 
	`g‘´Ùobynumb”_r
 (
__´Ùo
,

384 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

385 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

386 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

395 
	`£Š‘g»Á
 (
__cÚ¡
 *
__Ãtgroup
);

403 
	`’dÃtg»Á
 ();

412 
	`g‘Ãtg»Á
 (**
__»¡riù
 
__ho¡p
,

413 **
__»¡riù
 
__u£½
,

414 **
__»¡riù
 
__domašp
);

423 
	`šÃtgr
 (
__cÚ¡
 *
__Ãtgroup
, __cÚ¡ *
__ho¡
,

424 
__cÚ¡
 *
__u£r
, __cÚ¡ *
__domaš
);

432 
	`g‘Ãtg»Á_r
 (**
__»¡riù
 
__ho¡p
,

433 **
__»¡riù
 
__u£½
,

434 **
__»¡riù
 
__domašp
,

435 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
);

439 #ifdeà
__USE_BSD


451 
	`rcmd
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

452 
__cÚ¡
 *
__»¡riù
 
__locu£r
,

453 
__cÚ¡
 *
__»¡riù
 
__»mu£r
,

454 
__cÚ¡
 *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

463 
	`rcmd_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

464 
__cÚ¡
 *
__»¡riù
 
__locu£r
,

465 
__cÚ¡
 *
__»¡riù
 
__»mu£r
,

466 
__cÚ¡
 *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

467 
§_çmy_t
 
__af
);

479 
	`»xec
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

480 
__cÚ¡
 *
__»¡riù
 
__Çme
,

481 
__cÚ¡
 *
__»¡riù
 
__·ss
,

482 
__cÚ¡
 *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

491 
	`»xec_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

492 
__cÚ¡
 *
__»¡riù
 
__Çme
,

493 
__cÚ¡
 *
__»¡riù
 
__·ss
,

494 
__cÚ¡
 *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

495 
§_çmy_t
 
__af
);

505 
	`ru£rok
 (
__cÚ¡
 *
__rho¡
, 
__su£r
,

506 
__cÚ¡
 *
__»mu£r
, __cÚ¡ *
__locu£r
);

515 
	`ru£rok_af
 (
__cÚ¡
 *
__rho¡
, 
__su£r
,

516 
__cÚ¡
 *
__»mu£r
, __cÚ¡ *
__locu£r
,

517 
§_çmy_t
 
__af
);

527 
	`¼esvpÜt
 (*
__®pÜt
);

536 
	`¼esvpÜt_af
 (*
__®pÜt
, 
§_çmy_t
 
__af
);

541 #ifdef 
__USE_POSIX


543 
	saddršfo


545 
ai_æags
;

546 
ai_çmy
;

547 
ai_sockty³
;

548 
ai_´ÙocŞ
;

549 
sockËn_t
 
ai_add¾’
;

550 
sockaddr
 *
ai_addr
;

551 *
ai_ÿnÚÇme
;

552 
addršfo
 *
ai_Ãxt
;

555 #ifdeà
__USE_GNU


557 
	sgaicb


559 cÚ¡ *
¬_Çme
;

560 cÚ¡ *
¬_£rviû
;

561 cÚ¡ 
addršfo
 *
¬_»que¡
;

562 
addršfo
 *
¬_»suÉ
;

564 
__»tuº
;

565 
__unu£d
[5];

569 
	#GAI_WAIT
 0

	)

570 
	#GAI_NOWAIT
 1

	)

574 
	#AI_PASSIVE
 0x0001

	)

575 
	#AI_CANONNAME
 0x0002

	)

576 
	#AI_NUMERICHOST
 0x0004

	)

577 
	#AI_V4MAPPED
 0x0008

	)

578 
	#AI_ALL
 0x0010

	)

579 
	#AI_ADDRCONFIG
 0x0020

	)

581 #ifdeà
__USE_GNU


582 
	#AI_IDN
 0x0040

	)

585 
	#AI_CANONIDN
 0x0080

	)

586 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

588 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

591 
	#AI_NUMERICSERV
 0x0400

	)

594 
	#EAI_BADFLAGS
 -1

	)

595 
	#EAI_NONAME
 -2

	)

596 
	#EAI_AGAIN
 -3

	)

597 
	#EAI_FAIL
 -4

	)

598 
	#EAI_FAMILY
 -6

	)

599 
	#EAI_SOCKTYPE
 -7

	)

600 
	#EAI_SERVICE
 -8

	)

601 
	#EAI_MEMORY
 -10

	)

602 
	#EAI_SYSTEM
 -11

	)

603 
	#EAI_OVERFLOW
 -12

	)

604 #ifdeà
__USE_GNU


605 
	#EAI_NODATA
 -5

	)

606 
	#EAI_ADDRFAMILY
 -9

	)

607 
	#EAI_INPROGRESS
 -100

	)

608 
	#EAI_CANCELED
 -101

	)

609 
	#EAI_NOTCANCELED
 -102

	)

610 
	#EAI_ALLDONE
 -103

	)

611 
	#EAI_INTR
 -104

	)

612 
	#EAI_IDN_ENCODE
 -105

	)

615 #ifdeà
__USE_MISC


616 
	#NI_MAXHOST
 1025

	)

617 
	#NI_MAXSERV
 32

	)

620 
	#NI_NUMERICHOST
 1

	)

621 
	#NI_NUMERICSERV
 2

	)

622 
	#NI_NOFQDN
 4

	)

623 
	#NI_NAMEREQD
 8

	)

624 
	#NI_DGRAM
 16

	)

625 #ifdeà
__USE_GNU


626 
	#NI_IDN
 32

	)

627 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

629 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

638 
	`g‘addršfo
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

639 
__cÚ¡
 *
__»¡riù
 
__£rviû
,

640 
__cÚ¡
 
addršfo
 *
__»¡riù
 
__»q
,

641 
addršfo
 **
__»¡riù
 
__·i
);

644 
	$ä“addršfo
 (
addršfo
 *
__ai
è
__THROW
;

647 
__cÚ¡
 *
	$gai_¡»¼Ü
 (
__ecode
è
__THROW
;

653 
	`g‘Çmešfo
 (
__cÚ¡
 
sockaddr
 *
__»¡riù
 
__§
,

654 
sockËn_t
 
__§Ën
, *
__»¡riù
 
__ho¡
,

655 
sockËn_t
 
__ho¡Ën
, *
__»¡riù
 
__£rv
,

656 
sockËn_t
 
__£rvËn
, 
__æags
);

659 #ifdeà
__USE_GNU


668 
	`g‘addršfo_a
 (
__mode
, 
gaicb
 *
__li¡
[
__»¡riù_¬r
],

669 
__’t
, 
sigev’t
 *
__»¡riù
 
__sig
);

679 
	`gai_su¥’d
 (
__cÚ¡
 
gaicb
 *__cÚ¡ 
__li¡
[], 
__’t
,

680 
__cÚ¡
 
time¥ec
 *
__timeout
);

683 
	$gai_”rÜ
 (
gaicb
 *
__»q
è
__THROW
;

686 
	$gai_ÿnûl
 (
gaicb
 *
__gaicbp
è
__THROW
;

689 
__END_DECLS


	@/usr/include/netinet/in.h

20 #iâdef 
_NETINET_IN_H


21 
	#_NETINET_IN_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<¡dšt.h
>

25 
	~<sys/sock‘.h
>

26 
	~<b™s/ty³s.h
>

29 
__BEGIN_DECLS


34 
	mIPPROTO_IP
 = 0,

35 
	#IPPROTO_IP
 
IPPROTO_IP


	)

36 
	mIPPROTO_HOPOPTS
 = 0,

37 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

38 
	mIPPROTO_ICMP
 = 1,

39 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

40 
	mIPPROTO_IGMP
 = 2,

41 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

42 
	mIPPROTO_IPIP
 = 4,

43 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

44 
	mIPPROTO_TCP
 = 6,

45 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

46 
	mIPPROTO_EGP
 = 8,

47 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

48 
	mIPPROTO_PUP
 = 12,

49 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

50 
	mIPPROTO_UDP
 = 17,

51 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

52 
	mIPPROTO_IDP
 = 22,

53 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

54 
	mIPPROTO_TP
 = 29,

55 
	#IPPROTO_TP
 
IPPROTO_TP


	)

56 
	mIPPROTO_DCCP
 = 33,

57 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

58 
	mIPPROTO_IPV6
 = 41,

59 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

60 
	mIPPROTO_ROUTING
 = 43,

61 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

62 
	mIPPROTO_FRAGMENT
 = 44,

63 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

64 
	mIPPROTO_RSVP
 = 46,

65 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

66 
	mIPPROTO_GRE
 = 47,

67 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

68 
	mIPPROTO_ESP
 = 50,

69 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

70 
	mIPPROTO_AH
 = 51,

71 
	#IPPROTO_AH
 
IPPROTO_AH


	)

72 
	mIPPROTO_ICMPV6
 = 58,

73 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

74 
	mIPPROTO_NONE
 = 59,

75 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

76 
	mIPPROTO_DSTOPTS
 = 60,

77 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

78 
	mIPPROTO_MTP
 = 92,

79 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

80 
	mIPPROTO_ENCAP
 = 98,

81 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

82 
	mIPPROTO_PIM
 = 103,

83 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

84 
	mIPPROTO_COMP
 = 108,

85 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

86 
	mIPPROTO_SCTP
 = 132,

87 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

88 
	mIPPROTO_UDPLITE
 = 136,

89 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

90 
	mIPPROTO_RAW
 = 255,

91 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

92 
	mIPPROTO_MAX


97 
ušt16_t
 
	tš_pÜt_t
;

102 
	mIPPORT_ECHO
 = 7,

103 
	mIPPORT_DISCARD
 = 9,

104 
	mIPPORT_SYSTAT
 = 11,

105 
	mIPPORT_DAYTIME
 = 13,

106 
	mIPPORT_NETSTAT
 = 15,

107 
	mIPPORT_FTP
 = 21,

108 
	mIPPORT_TELNET
 = 23,

109 
	mIPPORT_SMTP
 = 25,

110 
	mIPPORT_TIMESERVER
 = 37,

111 
	mIPPORT_NAMESERVER
 = 42,

112 
	mIPPORT_WHOIS
 = 43,

113 
	mIPPORT_MTP
 = 57,

115 
	mIPPORT_TFTP
 = 69,

116 
	mIPPORT_RJE
 = 77,

117 
	mIPPORT_FINGER
 = 79,

118 
	mIPPORT_TTYLINK
 = 87,

119 
	mIPPORT_SUPDUP
 = 95,

122 
	mIPPORT_EXECSERVER
 = 512,

123 
	mIPPORT_LOGINSERVER
 = 513,

124 
	mIPPORT_CMDSERVER
 = 514,

125 
	mIPPORT_EFSSERVER
 = 520,

128 
	mIPPORT_BIFFUDP
 = 512,

129 
	mIPPORT_WHOSERVER
 = 513,

130 
	mIPPORT_ROUTESERVER
 = 520,

133 
	mIPPORT_RESERVED
 = 1024,

136 
	mIPPORT_USERRESERVED
 = 5000

141 
ušt32_t
 
	tš_addr_t
;

142 
	sš_addr


144 
š_addr_t
 
	ms_addr
;

153 
	#IN_CLASSA
(
a
è((((
š_addr_t
)×)è& 0x80000000è=ğ0)

	)

154 
	#IN_CLASSA_NET
 0xff000000

	)

155 
	#IN_CLASSA_NSHIFT
 24

	)

156 
	#IN_CLASSA_HOST
 (0xfffffffà& ~
IN_CLASSA_NET
)

	)

157 
	#IN_CLASSA_MAX
 128

	)

159 
	#IN_CLASSB
(
a
è((((
š_addr_t
)×)è& 0xc0000000è=ğ0x80000000)

	)

160 
	#IN_CLASSB_NET
 0xffff0000

	)

161 
	#IN_CLASSB_NSHIFT
 16

	)

162 
	#IN_CLASSB_HOST
 (0xfffffffà& ~
IN_CLASSB_NET
)

	)

163 
	#IN_CLASSB_MAX
 65536

	)

165 
	#IN_CLASSC
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xc0000000)

	)

166 
	#IN_CLASSC_NET
 0xffffff00

	)

167 
	#IN_CLASSC_NSHIFT
 8

	)

168 
	#IN_CLASSC_HOST
 (0xfffffffà& ~
IN_CLASSC_NET
)

	)

170 
	#IN_CLASSD
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xe0000000)

	)

171 
	#IN_MULTICAST
(
a
è
	`IN_CLASSD
×)

	)

173 
	#IN_EXPERIMENTAL
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xe0000000)

	)

174 
	#IN_BADCLASS
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xf0000000)

	)

177 
	#INADDR_ANY
 ((
š_addr_t
è0x00000000)

	)

179 
	#INADDR_BROADCAST
 ((
š_addr_t
è0xffffffff)

	)

181 
	#INADDR_NONE
 ((
š_addr_t
è0xffffffff)

	)

184 
	#IN_LOOPBACKNET
 127

	)

186 #iâdeà
INADDR_LOOPBACK


187 
	#INADDR_LOOPBACK
 ((
š_addr_t
è0x7f000001è

	)

191 
	#INADDR_UNSPEC_GROUP
 ((
š_addr_t
è0xe0000000è

	)

192 
	#INADDR_ALLHOSTS_GROUP
 ((
š_addr_t
è0xe0000001è

	)

193 
	#INADDR_ALLRTRS_GROUP
 ((
š_addr_t
è0xe0000002è

	)

194 
	#INADDR_MAX_LOCAL_GROUP
 ((
š_addr_t
è0xe00000ffè

	)

198 
	sš6_addr


202 
ušt8_t
 
	m__u6_addr8
[16];

203 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


204 
ušt16_t
 
	m__u6_addr16
[8];

205 
ušt32_t
 
	m__u6_addr32
[4];

207 } 
	m__š6_u
;

208 
	#s6_addr
 
__š6_u
.
__u6_addr8


	)

209 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


210 
	#s6_addr16
 
__š6_u
.
__u6_addr16


	)

211 
	#s6_addr32
 
__š6_u
.
__u6_addr32


	)

215 cÚ¡ 
š6_addr
 
š6addr_ªy
;

216 cÚ¡ 
š6_addr
 
š6addr_loİback
;

217 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

218 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

220 
	#INET_ADDRSTRLEN
 16

	)

221 
	#INET6_ADDRSTRLEN
 46

	)

225 
	ssockaddr_š


227 
__SOCKADDR_COMMON
 (
sš_
);

228 
š_pÜt_t
 
	msš_pÜt
;

229 
š_addr
 
	msš_addr
;

232 
	msš_z”o
[ (
sockaddr
) -

233 
__SOCKADDR_COMMON_SIZE
 -

234  (
š_pÜt_t
) -

235  (
š_addr
)];

239 
	ssockaddr_š6


241 
__SOCKADDR_COMMON
 (
sš6_
);

242 
š_pÜt_t
 
	msš6_pÜt
;

243 
ušt32_t
 
	msš6_æowšfo
;

244 
š6_addr
 
	msš6_addr
;

245 
ušt32_t
 
	msš6_scİe_id
;

249 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


251 
	s_m»q


254 
š_addr
 
	mimr_muÉŸddr
;

257 
š_addr
 
	mimr_š‹rçû
;

260 
	s_m»q_sourû


263 
š_addr
 
	mimr_muÉŸddr
;

266 
š_addr
 
	mimr_š‹rçû
;

269 
š_addr
 
	mimr_sourûaddr
;

275 
	sv6_m»q


278 
š6_addr
 
	mv6mr_muÉŸddr
;

281 
	mv6mr_š‹rçû
;

285 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


287 
	sgroup_»q


290 
ušt32_t
 
	mgr_š‹rçû
;

293 
sockaddr_¡Üage
 
	mgr_group
;

296 
	sgroup_sourû_»q


299 
ušt32_t
 
	mg¤_š‹rçû
;

302 
sockaddr_¡Üage
 
	mg¤_group
;

305 
sockaddr_¡Üage
 
	mg¤_sourû
;

310 
	s_msf‹r


313 
š_addr
 
	mimsf_muÉŸddr
;

316 
š_addr
 
	mimsf_š‹rçû
;

319 
ušt32_t
 
	mimsf_fmode
;

322 
ušt32_t
 
	mimsf_num¤c
;

324 
š_addr
 
	mimsf_¦i¡
[1];

327 
	#IP_MSFILTER_SIZE
(
num¤c
è( (
_msf‹r
) \

328 -  (
š_addr
) \

329 + (
num¤c
è*  (
š_addr
))

	)

331 
	sgroup_f‹r


334 
ušt32_t
 
	mgf_š‹rçû
;

337 
sockaddr_¡Üage
 
	mgf_group
;

340 
ušt32_t
 
	mgf_fmode
;

343 
ušt32_t
 
	mgf_num¤c
;

345 
sockaddr_¡Üage
 
	mgf_¦i¡
[1];

348 
	#GROUP_FILTER_SIZE
(
num¤c
è( (
group_f‹r
) \

349 -  (
sockaddr_¡Üage
) \

350 + ((
num¤c
) \

351 *  (
sockaddr_¡Üage
)))

	)

356 
	~<b™s/š.h
>

365 
ušt32_t
 
	$Áohl
 (
ušt32_t
 
__ÃÚg
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

366 
ušt16_t
 
	$Áohs
 (
ušt16_t
 
__ÃtshÜt
)

367 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

368 
ušt32_t
 
	$htÚl
 (
ušt32_t
 
__ho¡lÚg
)

369 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

370 
ušt16_t
 
	$htÚs
 (
ušt16_t
 
__ho¡shÜt
)

371 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

373 
	~<’dŸn.h
>

376 
	~<b™s/by‹sw­.h
>

378 #ifdeà
__OPTIMIZE__


382 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


385 
	#Áohl
(
x
è(x)

	)

386 
	#Áohs
(
x
è(x)

	)

387 
	#htÚl
(
x
è(x)

	)

388 
	#htÚs
(
x
è(x)

	)

390 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


391 
	#Áohl
(
x
è
	`__bsw­_32
 (x)

	)

392 
	#Áohs
(
x
è
	`__bsw­_16
 (x)

	)

393 
	#htÚl
(
x
è
	`__bsw­_32
 (x)

	)

394 
	#htÚs
(
x
è
	`__bsw­_16
 (x)

	)

399 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

400 (((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] == 0 \

401 && ((
__cÚ¡
 
ušt32_t
 *è(
a
))[1] == 0 \

402 && ((
__cÚ¡
 
ušt32_t
 *è(
a
))[2] == 0 \

403 && ((
__cÚ¡
 
ušt32_t
 *è(
a
))[3] =ğ0)

	)

405 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

406 (((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] == 0 \

407 && ((
__cÚ¡
 
ušt32_t
 *è(
a
))[1] == 0 \

408 && ((
__cÚ¡
 
ušt32_t
 *è(
a
))[2] == 0 \

409 && ((
__cÚ¡
 
ušt32_t
 *è(
a
))[3] =ğ
	`htÚl
 (1))

	)

411 
	#IN6_IS_ADDR_MULTICAST
(
a
è(((
__cÚ¡
 
ušt8_t
 *è×))[0] =ğ0xff)

	)

413 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

414 ((((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

415 =ğ
	`htÚl
 (0xã800000))

	)

417 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

418 ((((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

419 =ğ
	`htÚl
 (0xãc00000))

	)

421 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

422 ((((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] == 0) \

423 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[1] == 0) \

424 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[2] =ğ
	`htÚl
 (0xffff)))

	)

426 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

427 ((((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] == 0) \

428 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[1] == 0) \

429 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[2] == 0) \

430 && (
	`Áohl
 (((
__cÚ¡
 
ušt32_t
 *è(
a
))[3]è> 1))

	)

432 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

433 ((((
__cÚ¡
 
ušt32_t
 *è(
a
))[0] =ğ((__cÚ¡ ušt32_ˆ*è(
b
))[0]) \

434 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[1] =ğ((__cÚ¡ ušt32_ˆ*è(
b
))[1]) \

435 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[2] =ğ((__cÚ¡ ušt32_ˆ*è(
b
))[2]) \

436 && (((
__cÚ¡
 
ušt32_t
 *è(
a
))[3] =ğ((__cÚ¡ ušt32_ˆ*è(
b
))[3]))

	)

438 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


440 
	$bšd»svpÜt
 (
__sockfd
, 
sockaddr_š
 *
__sock_š
è
__THROW
;

443 
	$bšd»svpÜt6
 (
__sockfd
, 
sockaddr_š6
 *
__sock_š
)

444 
__THROW
;

448 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

449 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

450 && ((((
__cÚ¡
 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x1))

	)

452 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

453 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

454 && ((((
__cÚ¡
 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x2))

	)

456 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

457 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

458 && ((((
__cÚ¡
 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x5))

	)

460 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

461 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

462 && ((((
__cÚ¡
 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x8))

	)

464 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

465 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

466 && ((((
__cÚ¡
 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0xe))

	)

469 #ifdeà
__USE_GNU


471 
	sš6_pktšfo


473 
š6_addr
 
i6_addr
;

474 
i6_ifšdex
;

478 
	s6_mtušfo


480 
sockaddr_š6
 
6m_addr
;

481 
ušt32_t
 
6m_mtu
;

486 
	$š‘6_İtiÚ_¥aû
 (
__nby‹s
)

487 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

488 
	$š‘6_İtiÚ_š™
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

489 
__ty³
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

490 
	$š‘6_İtiÚ_­³nd
 (
cmsghdr
 *
__cmsg
,

491 
__cÚ¡
 
ušt8_t
 *
__ty³p
, 
__muÉx
,

492 
__¶usy
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

493 
ušt8_t
 *
	$š‘6_İtiÚ_®loc
 (
cmsghdr
 *
__cmsg
, 
__d©®’
,

494 
__muÉx
, 
__¶usy
)

495 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

496 
	$š‘6_İtiÚ_Ãxt
 (
__cÚ¡
 
cmsghdr
 *
__cmsg
,

497 
ušt8_t
 **
__Œp
)

498 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

499 
	$š‘6_İtiÚ_fšd
 (
__cÚ¡
 
cmsghdr
 *
__cmsg
,

500 
ušt8_t
 **
__Œp
, 
__ty³
)

501 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

505 
	$š‘6_İt_š™
 (*
__extbuf
, 
sockËn_t
 
__ex’
è
__THROW
;

506 
	$š‘6_İt_­³nd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

507 
ušt8_t
 
__ty³
, 
sockËn_t
 
__Ën
, ušt8_ˆ
__®ign
,

508 **
__d©abuå
è
__THROW
;

509 
	$š‘6_İt_fšish
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
)

510 
__THROW
;

511 
	$š‘6_İt_£t_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

512 
sockËn_t
 
__v®Ën
è
__THROW
;

513 
	$š‘6_İt_Ãxt
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

514 
ušt8_t
 *
__ty³p
, 
sockËn_t
 *
__ËÅ
,

515 **
__d©abuå
è
__THROW
;

516 
	$š‘6_İt_fšd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

517 
ušt8_t
 
__ty³
, 
sockËn_t
 *
__ËÅ
,

518 **
__d©abuå
è
__THROW
;

519 
	$š‘6_İt_g‘_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

520 
sockËn_t
 
__v®Ën
è
__THROW
;

524 
sockËn_t
 
	$š‘6_¹h_¥aû
 (
__ty³
, 
__£gm’ts
è
__THROW
;

525 *
	$š‘6_¹h_š™
 (*
__bp
, 
sockËn_t
 
__bp_Ën
, 
__ty³
,

526 
__£gm’ts
è
__THROW
;

527 
	$š‘6_¹h_add
 (*
__bp
, 
__cÚ¡
 
š6_addr
 *
__addr
è
__THROW
;

528 
	$š‘6_¹h_»v”£
 (
__cÚ¡
 *
__š
, *
__out
è
__THROW
;

529 
	$š‘6_¹h_£gm’ts
 (
__cÚ¡
 *
__bp
è
__THROW
;

530 
š6_addr
 *
	$š‘6_¹h_g‘addr
 (
__cÚ¡
 *
__bp
, 
__šdex
)

531 
__THROW
;

537 
	$g‘v4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

538 
š_addr
 
__group
, 
ušt32_t
 *
__fmode
,

539 
ušt32_t
 *
__num¤c
, 
š_addr
 *
__¦i¡
)

540 
__THROW
;

543 
	$£tv4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

544 
š_addr
 
__group
, 
ušt32_t
 
__fmode
,

545 
ušt32_t
 
__num¤c
,

546 
__cÚ¡
 
š_addr
 *
__¦i¡
)

547 
__THROW
;

551 
	$g‘sourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

552 
__cÚ¡
 
sockaddr
 *
__group
,

553 
sockËn_t
 
__grou¶’
, 
ušt32_t
 *
__fmode
,

554 
ušt32_t
 *
__num¤c
,

555 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

558 
	$£tsourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

559 
__cÚ¡
 
sockaddr
 *
__group
,

560 
sockËn_t
 
__grou¶’
, 
ušt32_t
 
__fmode
,

561 
ušt32_t
 
__num¤c
,

562 
__cÚ¡
 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

565 
__END_DECLS


	@/usr/include/netinet/tcp.h

32 #iâdeà
_NETINET_TCP_H


33 
	#_NETINET_TCP_H
 1

	)

35 
	~<ã©u»s.h
>

40 
	#TCP_NODELAY
 1

	)

41 
	#TCP_MAXSEG
 2

	)

42 
	#TCP_CORK
 3

	)

43 
	#TCP_KEEPIDLE
 4

	)

44 
	#TCP_KEEPINTVL
 5

	)

45 
	#TCP_KEEPCNT
 6

	)

46 
	#TCP_SYNCNT
 7

	)

47 
	#TCP_LINGER2
 8

	)

48 
	#TCP_DEFER_ACCEPT
 9

	)

49 
	#TCP_WINDOW_CLAMP
 10

	)

50 
	#TCP_INFO
 11

	)

51 
	#TCP_QUICKACK
 12

	)

52 
	#TCP_CONGESTION
 13

	)

53 
	#TCP_MD5SIG
 14

	)

55 #ifdeà
__USE_MISC


56 
	~<sys/ty³s.h
>

57 
	~<sys/sock‘.h
>

59 #ifdeà
__FAVOR_BSD


60 
u_št32_t
 
	ttı_£q
;

65 
	stıhdr


67 
u_št16_t
 
	mth_¥Üt
;

68 
u_št16_t
 
	mth_dpÜt
;

69 
tı_£q
 
	mth_£q
;

70 
tı_£q
 
	mth_ack
;

71 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


72 
u_št8_t
 
	mth_x2
:4;

73 
u_št8_t
 
	mth_off
:4;

75 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


76 
u_št8_t
 
	mth_off
:4;

77 
u_št8_t
 
	mth_x2
:4;

79 
u_št8_t
 
	mth_æags
;

80 
	#TH_FIN
 0x01

	)

81 
	#TH_SYN
 0x02

	)

82 
	#TH_RST
 0x04

	)

83 
	#TH_PUSH
 0x08

	)

84 
	#TH_ACK
 0x10

	)

85 
	#TH_URG
 0x20

	)

86 
u_št16_t
 
	mth_wš
;

87 
u_št16_t
 
	mth_sum
;

88 
u_št16_t
 
	mth_u½
;

92 
	stıhdr


94 
u_št16_t
 
	msourû
;

95 
u_št16_t
 
	mde¡
;

96 
u_št32_t
 
	m£q
;

97 
u_št32_t
 
	mack_£q
;

98 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


99 
u_št16_t
 
	m»s1
:4;

100 
u_št16_t
 
	mdoff
:4;

101 
u_št16_t
 
	mfš
:1;

102 
u_št16_t
 
	msyn
:1;

103 
u_št16_t
 
	mr¡
:1;

104 
u_št16_t
 
	mpsh
:1;

105 
u_št16_t
 
	mack
:1;

106 
u_št16_t
 
	murg
:1;

107 
u_št16_t
 
	m»s2
:2;

108 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


109 
u_št16_t
 
	mdoff
:4;

110 
u_št16_t
 
	m»s1
:4;

111 
u_št16_t
 
	m»s2
:2;

112 
u_št16_t
 
	murg
:1;

113 
u_št16_t
 
	mack
:1;

114 
u_št16_t
 
	mpsh
:1;

115 
u_št16_t
 
	mr¡
:1;

116 
u_št16_t
 
	msyn
:1;

117 
u_št16_t
 
	mfš
:1;

121 
u_št16_t
 
	mwšdow
;

122 
u_št16_t
 
	mcheck
;

123 
u_št16_t
 
	murg_±r
;

129 
	mTCP_ESTABLISHED
 = 1,

130 
	mTCP_SYN_SENT
,

131 
	mTCP_SYN_RECV
,

132 
	mTCP_FIN_WAIT1
,

133 
	mTCP_FIN_WAIT2
,

134 
	mTCP_TIME_WAIT
,

135 
	mTCP_CLOSE
,

136 
	mTCP_CLOSE_WAIT
,

137 
	mTCP_LAST_ACK
,

138 
	mTCP_LISTEN
,

139 
	mTCP_CLOSING


142 
	#TCPOPT_EOL
 0

	)

143 
	#TCPOPT_NOP
 1

	)

144 
	#TCPOPT_MAXSEG
 2

	)

145 
	#TCPOLEN_MAXSEG
 4

	)

146 
	#TCPOPT_WINDOW
 3

	)

147 
	#TCPOLEN_WINDOW
 3

	)

148 
	#TCPOPT_SACK_PERMITTED
 4

	)

149 
	#TCPOLEN_SACK_PERMITTED
 2

	)

150 
	#TCPOPT_SACK
 5

	)

151 
	#TCPOPT_TIMESTAMP
 8

	)

152 
	#TCPOLEN_TIMESTAMP
 10

	)

153 
	#TCPOLEN_TSTAMP_APPA
 (
TCPOLEN_TIMESTAMP
+2è

	)

155 
	#TCPOPT_TSTAMP_HDR
 \

156 (
TCPOPT_NOP
<<24|TCPOPT_NOP<<16|
TCPOPT_TIMESTAMP
<<8|
TCPOLEN_TIMESTAMP
)

	)

164 
	#TCP_MSS
 512

	)

166 
	#TCP_MAXWIN
 65535

	)

168 
	#TCP_MAX_WINSHIFT
 14

	)

170 
	#SOL_TCP
 6

	)

173 
	#TCPI_OPT_TIMESTAMPS
 1

	)

174 
	#TCPI_OPT_SACK
 2

	)

175 
	#TCPI_OPT_WSCALE
 4

	)

176 
	#TCPI_OPT_ECN
 8

	)

179 
	etı_ÿ_¡©e


181 
	mTCP_CA_O³n
 = 0,

182 
	mTCP_CA_DisÜd”
 = 1,

183 
	mTCP_CA_CWR
 = 2,

184 
	mTCP_CA_Recov”y
 = 3,

185 
	mTCP_CA_Loss
 = 4

188 
	stı_šfo


190 
u_št8_t
 
	mtıi_¡©e
;

191 
u_št8_t
 
	mtıi_ÿ_¡©e
;

192 
u_št8_t
 
	mtıi_»Œªsm™s
;

193 
u_št8_t
 
	mtıi_´obes
;

194 
u_št8_t
 
	mtıi_backoff
;

195 
u_št8_t
 
	mtıi_İtiÚs
;

196 
u_št8_t
 
	mtıi_¢d_wsÿË
 : 4, 
	mtıi_rcv_wsÿË
 : 4;

198 
u_št32_t
 
	mtıi_¹o
;

199 
u_št32_t
 
	mtıi_©o
;

200 
u_št32_t
 
	mtıi_¢d_mss
;

201 
u_št32_t
 
	mtıi_rcv_mss
;

203 
u_št32_t
 
	mtıi_uÇcked
;

204 
u_št32_t
 
	mtıi_§cked
;

205 
u_št32_t
 
	mtıi_lo¡
;

206 
u_št32_t
 
	mtıi_»Œªs
;

207 
u_št32_t
 
	mtıi_çck‘s
;

210 
u_št32_t
 
	mtıi_Ï¡_d©a_£Á
;

211 
u_št32_t
 
	mtıi_Ï¡_ack_£Á
;

212 
u_št32_t
 
	mtıi_Ï¡_d©a_»cv
;

213 
u_št32_t
 
	mtıi_Ï¡_ack_»cv
;

216 
u_št32_t
 
	mtıi_pmtu
;

217 
u_št32_t
 
	mtıi_rcv_s¡h»sh
;

218 
u_št32_t
 
	mtıi_¹t
;

219 
u_št32_t
 
	mtıi_¹tv¬
;

220 
u_št32_t
 
	mtıi_¢d_s¡h»sh
;

221 
u_št32_t
 
	mtıi_¢d_cwnd
;

222 
u_št32_t
 
	mtıi_advmss
;

223 
u_št32_t
 
	mtıi_»Üd”šg
;

225 
u_št32_t
 
	mtıi_rcv_¹t
;

226 
u_št32_t
 
	mtıi_rcv_¥aû
;

228 
u_št32_t
 
	mtıi_tÙ®_»Œªs
;

233 
	#TCP_MD5SIG_MAXKEYLEN
 80

	)

235 
	stı_md5sig


237 
sockaddr_¡Üage
 
	mtım_addr
;

238 
u_št16_t
 
	m__tım_·d1
;

239 
u_št16_t
 
	mtım_keyËn
;

240 
u_št32_t
 
	m__tım_·d2
;

241 
u_št8_t
 
	mtım_key
[
TCP_MD5SIG_MAXKEYLEN
];

	@/usr/include/pthread.h

20 #iâdeà
_PTHREAD_H


21 
	#_PTHREAD_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<’dŸn.h
>

25 
	~<sched.h
>

26 
	~<time.h
>

28 
	#__Ãed_sig£t_t


	)

29 
	~<sigÇl.h
>

30 
	~<b™s/±h»adty³s.h
>

31 
	~<b™s/£tjmp.h
>

32 
	~<b™s/wÜdsize.h
>

38 
	mPTHREAD_CREATE_JOINABLE
,

39 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

40 
	mPTHREAD_CREATE_DETACHED


41 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

48 
	mPTHREAD_MUTEX_TIMED_NP
,

49 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

50 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

51 
	mPTHREAD_MUTEX_ADAPTIVE_NP


52 #ifdeà
__USE_UNIX98


54 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

55 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

56 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

57 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


59 #ifdeà
__USE_GNU


61 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


66 #ifdeà
__USE_XOPEN2K


70 
	mPTHREAD_MUTEX_STALLED
,

71 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

72 
	mPTHREAD_MUTEX_ROBUST
,

73 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


78 #ifdeà
__USE_UNIX98


82 
	mPTHREAD_PRIO_NONE
,

83 
	mPTHREAD_PRIO_INHERIT
,

84 
	mPTHREAD_PRIO_PROTECT


90 #ià
__WORDSIZE
 == 64

91 
	#PTHREAD_MUTEX_INITIALIZER
 \

92 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

93 #ifdeà
__USE_GNU


94 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

95 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

96 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

97 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

98 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

102 
	#PTHREAD_MUTEX_INITIALIZER
 \

103 { { 0, 0, 0, 0, 0, { 0 } } }

	)

104 #ifdeà
__USE_GNU


105 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

107 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

108 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

109 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

110 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

116 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


119 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

120 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

121 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

122 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


126 
	#PTHREAD_RWLOCK_INITIALIZER
 \

127 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

128 #ifdeà
__USE_GNU


129 #ià
__WORDSIZE
 == 64

130 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

132 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

134 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


135 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

136 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

137 0, 0, 0, 0 } }

	)

139 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

140 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

141 0 } }

	)

151 
	mPTHREAD_INHERIT_SCHED
,

152 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

153 
	mPTHREAD_EXPLICIT_SCHED


154 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

161 
	mPTHREAD_SCOPE_SYSTEM
,

162 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

163 
	mPTHREAD_SCOPE_PROCESS


164 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

171 
	mPTHREAD_PROCESS_PRIVATE
,

172 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

173 
	mPTHREAD_PROCESS_SHARED


174 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

180 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

184 
	s_±h»ad_ş—nup_bufãr


186 (*
	m__routše
) (*);

187 *
	m__¬g
;

188 
	m__ÿnûÉy³
;

189 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

195 
	mPTHREAD_CANCEL_ENABLE
,

196 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

197 
	mPTHREAD_CANCEL_DISABLE


198 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

202 
	mPTHREAD_CANCEL_DEFERRED
,

203 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

204 
	mPTHREAD_CANCEL_ASYNCHRONOUS


205 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

207 
	#PTHREAD_CANCELED
 ((*è-1)

	)

211 
	#PTHREAD_ONCE_INIT
 0

	)

214 #ifdeà
__USE_XOPEN2K


218 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

222 
__BEGIN_DECLS


227 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

228 
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

229 *(*
__¡¬t_routše
) (*),

230 *
__»¡riù
 
__¬g
è
__THROW
 
__nÚnuÎ
 ((1, 3));

236 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

244 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

246 #ifdeà
__USE_GNU


249 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

257 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

258 
__cÚ¡
 
time¥ec
 *
__ab¡ime
);

265 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

269 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

272 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
è
__THROW
;

280 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

283 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

284 
__THROW
 
	`__nÚnuÎ
 ((1));

287 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

288 *
__d‘ach¡©e
)

289 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

292 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

293 
__d‘ach¡©e
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

298 
	$±h»ad_©Œ_g‘gu¬dsize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

299 
size_t
 *
__gu¬dsize
)

300 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

303 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

304 
size_t
 
__gu¬dsize
)

305 
__THROW
 
	`__nÚnuÎ
 ((1));

309 
	$±h»ad_©Œ_g‘sched·¿m
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


310 
__©Œ
,

311 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

312 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

315 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

316 
__cÚ¡
 
sched_·¿m
 *
__»¡riù


317 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

320 
	$±h»ad_©Œ_g‘schedpŞicy
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


321 
__©Œ
, *
__»¡riù
 
__pŞicy
)

322 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

325 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

326 
__THROW
 
	`__nÚnuÎ
 ((1));

329 
	$±h»ad_©Œ_g‘šh”™sched
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


330 
__©Œ
, *
__»¡riù
 
__šh”™
)

331 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

334 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

335 
__šh”™
)

336 
__THROW
 
	`__nÚnuÎ
 ((1));

340 
	$±h»ad_©Œ_g‘scİe
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

341 *
__»¡riù
 
__scİe
)

342 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

345 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

346 
__THROW
 
	`__nÚnuÎ
 ((1));

349 
	$±h»ad_©Œ_g‘¡ackaddr
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


350 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

351 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

357 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

358 *
__¡ackaddr
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

362 
	$±h»ad_©Œ_g‘¡acksize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


363 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

364 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

369 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

370 
size_t
 
__¡acksize
)

371 
__THROW
 
	`__nÚnuÎ
 ((1));

373 #ifdeà
__USE_XOPEN2K


375 
	$±h»ad_©Œ_g‘¡ack
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

376 **
__»¡riù
 
__¡ackaddr
,

377 
size_t
 *
__»¡riù
 
__¡acksize
)

378 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

383 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

384 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

387 #ifdeà
__USE_GNU


390 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

391 
size_t
 
__ıu£tsize
,

392 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

397 
	$±h»ad_©Œ_g‘affš™y_Å
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

398 
size_t
 
__ıu£tsize
,

399 
ıu_£t_t
 *
__ıu£t
)

400 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

406 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

407 
__THROW
 
	`__nÚnuÎ
 ((2));

415 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

416 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

417 
__THROW
 
	`__nÚnuÎ
 ((3));

420 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

421 *
__»¡riù
 
__pŞicy
,

422 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

423 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

426 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

427 
__THROW
;

430 #ifdeà
__USE_UNIX98


432 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

435 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

438 #ifdeà
__USE_GNU


443 
	$±h»ad_y›ld
 (è
__THROW
;

448 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

449 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

450 
__THROW
 
	`__nÚnuÎ
 ((3));

453 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

454 
ıu_£t_t
 *
__ıu£t
)

455 
__THROW
 
	`__nÚnuÎ
 ((3));

468 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

469 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

480 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

484 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

487 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

492 
	`±h»ad_‹¡ÿnûl
 ();

501 
__jmp_buf
 
__ÿnûl_jmp_buf
;

502 
__mask_was_§ved
;

503 } 
__ÿnûl_jmp_buf
[1];

504 *
__·d
[4];

505 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

508 #iâdeà
__ş—nup_fù_©Œibu‹


509 
	#__ş—nup_fù_©Œibu‹


	)

514 
	s__±h»ad_ş—nup_äame


516 (*
__ÿnûl_routše
) (*);

517 *
__ÿnûl_¬g
;

518 
__do_™
;

519 
__ÿnûl_ty³
;

522 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


523 #ifdeà
__ılu¥lus


525 şas 
	c__±h»ad_ş—nup_şass


527 (*
__ÿnûl_routše
) (*);

528 *
__ÿnûl_¬g
;

529 
__do_™
;

530 
__ÿnûl_ty³
;

532 
public
:

533 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

534 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

535 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

536 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

537 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

538 &
__ÿnûl_ty³
); 
	}
}

539 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

549 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

551 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

555 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

556 
__şäame
.
	`__£tdo™
 (
execu‹
); \

557 } 0)

	)

559 #ifdeà
__USE_GNU


563 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

565 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

566 
__şäame
.
	`__deãr
 ()

	)

571 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

572 
__şäame
.
	`__»¡Üe
 (); \

573 
__şäame
.
	`__£tdo™
 (
execu‹
); \

574 } 0)

	)

581 
__ex‹º_šlše
 

582 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

584 ià(
__äame
->
__do_™
)

585 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

586 
	}
}

595 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

597 
__±h»ad_ş—nup_äame
 
__şäame
 \

598 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

599 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

600 .
__do_™
 = 1 };

	)

604 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

605 
__şäame
.
__do_™
 = (
execu‹
); \

606 } 0)

	)

608 #ifdeà
__USE_GNU


612 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

614 
__±h»ad_ş—nup_äame
 
__şäame
 \

615 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

616 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

617 .
__do_™
 = 1 }; \

618 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

619 &
__şäame
.
__ÿnûl_ty³
)

	)

624 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

625 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

626 
__şäame
.
__do_™
 = (
execu‹
); \

627 } 0)

	)

638 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

640 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

641 (*
__ÿnûl_routše
è(*èğ(
routše
); \

642 *
__ÿnûl_¬g
 = (
¬g
); \

643 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

644 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

645 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

647 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

648 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

652 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

653 dØ{

	)

654 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

655 
__ş—nup_fù_©Œibu‹
;

659 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

662 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

663 ià(
execu‹
) \

664 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

665 } 0)

	)

666 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

667 
__ş—nup_fù_©Œibu‹
;

669 #ifdeà
__USE_GNU


673 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

675 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

676 (*
__ÿnûl_routše
è(*èğ(
routše
); \

677 *
__ÿnûl_¬g
 = (
¬g
); \

678 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

679 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

680 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

682 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

683 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

687 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

688 dØ{

	)

689 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

690 
__ş—nup_fù_©Œibu‹
;

695 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

698 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

699 ià(
execu‹
) \

700 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

701 
	}
} 0)

	)

702 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

703 
__ş—nup_fù_©Œibu‹
;

707 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

708 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

709 #iâdeà
SHARED


710 
	`__©Œibu‹__
 ((
__w—k__
))

716 
__jmp_buf_g
;

717 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROW
;

723 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

724 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

725 
__THROW
 
	`__nÚnuÎ
 ((1));

728 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

729 
__THROW
 
	`__nÚnuÎ
 ((1));

732 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

733 
__THROW
 
	`__nÚnuÎ
 ((1));

736 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

737 
__THROW
 
	`__nÚnuÎ
 ((1));

739 #ifdeà
__USE_XOPEN2K


741 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

742 
__cÚ¡
 
time¥ec
 *
__»¡riù


743 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

747 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

748 
__THROW
 
	`__nÚnuÎ
 ((1));

751 #ifdeà
__USE_UNIX98


753 
	$±h»ad_mu‹x_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x_t
 *

754 
__»¡riù
 
__mu‹x
,

755 *
__»¡riù
 
__´ioûšg
)

756 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

760 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

761 
__´ioûšg
,

762 *
__»¡riù
 
__Şd_ûšg
)

763 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

767 #ifdeà
__USE_XOPEN2K8


769 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

770 
__THROW
 
	`__nÚnuÎ
 ((1));

771 #ifdeà
__USE_GNU


772 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

773 
__THROW
 
	`__nÚnuÎ
 ((1));

782 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

783 
__THROW
 
	`__nÚnuÎ
 ((1));

786 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

787 
__THROW
 
	`__nÚnuÎ
 ((1));

790 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

791 
__»¡riù
 
__©Œ
,

792 *
__»¡riù
 
__psh¬ed
)

793 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

796 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

797 
__psh¬ed
)

798 
__THROW
 
	`__nÚnuÎ
 ((1));

800 #ifdeà
__USE_UNIX98


802 
	$±h»ad_mu‹x©Œ_g‘ty³
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


803 
__©Œ
, *
__»¡riù
 
__kšd
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

809 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

810 
__THROW
 
	`__nÚnuÎ
 ((1));

813 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

814 
__»¡riù
 
__©Œ
,

815 *
__»¡riù
 
__´ÙocŞ
)

816 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

820 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

821 
__´ÙocŞ
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

825 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

826 
__»¡riù
 
__©Œ
,

827 *
__»¡riù
 
__´ioûšg
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

831 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

832 
__´ioûšg
)

833 
__THROW
 
	`__nÚnuÎ
 ((1));

836 #ifdeà
__USE_XOPEN2K


838 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

839 *
__robu¡Ãss
)

840 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

841 #ifdeà
__USE_GNU


842 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

843 *
__robu¡Ãss
)

844 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

848 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

849 
__robu¡Ãss
)

850 
__THROW
 
	`__nÚnuÎ
 ((1));

851 #ifdeà
__USE_GNU


852 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

853 
__robu¡Ãss
)

854 
__THROW
 
	`__nÚnuÎ
 ((1));

859 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


864 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

865 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__»¡riù


866 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

869 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

870 
__THROW
 
	`__nÚnuÎ
 ((1));

873 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

874 
__THROW
 
	`__nÚnuÎ
 ((1));

877 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

878 
__THROW
 
	`__nÚnuÎ
 ((1));

880 #ifdeà
__USE_XOPEN2K


882 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

883 
__cÚ¡
 
time¥ec
 *
__»¡riù


884 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

888 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

889 
__THROW
 
	`__nÚnuÎ
 ((1));

892 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

893 
__THROW
 
	`__nÚnuÎ
 ((1));

895 #ifdeà
__USE_XOPEN2K


897 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

898 
__cÚ¡
 
time¥ec
 *
__»¡riù


899 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

903 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

904 
__THROW
 
	`__nÚnuÎ
 ((1));

910 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

911 
__THROW
 
	`__nÚnuÎ
 ((1));

914 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

915 
__THROW
 
	`__nÚnuÎ
 ((1));

918 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

919 
__»¡riù
 
__©Œ
,

920 *
__»¡riù
 
__psh¬ed
)

921 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

924 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

925 
__psh¬ed
)

926 
__THROW
 
	`__nÚnuÎ
 ((1));

929 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

930 
__»¡riù
 
__©Œ
,

931 *
__»¡riù
 
__´ef
)

932 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

935 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

936 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

944 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

945 
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *
__»¡riù


946 
__cÚd_©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

949 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

954 
__THROW
 
	`__nÚnuÎ
 ((1));

957 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

958 
__THROW
 
	`__nÚnuÎ
 ((1));

965 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

966 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

967 
	`__nÚnuÎ
 ((1, 2));

976 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

977 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

978 
__cÚ¡
 
time¥ec
 *
__»¡riù


979 
__ab¡ime
è
	`__nÚnuÎ
 ((1, 2, 3));

984 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

985 
__THROW
 
	`__nÚnuÎ
 ((1));

988 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

989 
__THROW
 
	`__nÚnuÎ
 ((1));

992 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

993 
__»¡riù
 
__©Œ
,

994 *
__»¡riù
 
__psh¬ed
)

995 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

998 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

999 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1001 #ifdeà
__USE_XOPEN2K


1003 
	$±h»ad_cÚd©Œ_g‘şock
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

1004 
__»¡riù
 
__©Œ
,

1005 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1009 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1010 
__şockid_t
 
__şock_id
)

1011 
__THROW
 
	`__nÚnuÎ
 ((1));

1015 #ifdeà
__USE_XOPEN2K


1020 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1021 
__THROW
 
	`__nÚnuÎ
 ((1));

1024 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1025 
__THROW
 
	`__nÚnuÎ
 ((1));

1028 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1029 
__THROW
 
	`__nÚnuÎ
 ((1));

1032 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1033 
__THROW
 
	`__nÚnuÎ
 ((1));

1036 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1037 
__THROW
 
	`__nÚnuÎ
 ((1));

1044 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1045 
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1046 
__©Œ
, 
__couÁ
)

1047 
__THROW
 
	`__nÚnuÎ
 ((1));

1050 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1051 
__THROW
 
	`__nÚnuÎ
 ((1));

1054 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1055 
__THROW
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1060 
__THROW
 
	`__nÚnuÎ
 ((1));

1063 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1064 
__THROW
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *

1068 
__»¡riù
 
__©Œ
,

1069 *
__»¡riù
 
__psh¬ed
)

1070 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1073 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1074 
__psh¬ed
)

1075 
__THROW
 
	`__nÚnuÎ
 ((1));

1087 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1088 (*
__de¡r_funùiÚ
) (*))

1089 
__THROW
 
	`__nÚnuÎ
 ((1));

1092 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1095 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1098 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1099 
__cÚ¡
 *
__poš‹r
è
__THROW
 ;

1102 #ifdeà
__USE_XOPEN2K


1104 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1105 
__şockid_t
 *
__şock_id
)

1106 
__THROW
 
	`__nÚnuÎ
 ((2));

1121 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1122 (*
__·»Á
) (),

1123 (*
__chd
è()è
__THROW
;

1126 #ifdeà
__USE_EXTERN_INLINES


1128 
__ex‹º_šlše
 

1129 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1131  
__th»ad1
 =ğ
__th»ad2
;

1132 
	}
}

1135 
	g__END_DECLS


	@/usr/include/sched.h

20 #iâdef 
_SCHED_H


21 
	#_SCHED_H
 1

	)

23 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

31 
	#__Ãed_time¥ec


	)

32 
	~<time.h
>

35 
	~<b™s/sched.h
>

37 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

40 
__BEGIN_DECLS


43 
	$sched_£¬am
 (
__pid_t
 
__pid
, 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

44 
__THROW
;

47 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

50 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

51 
__cÚ¡
 
sched_·¿m
 *
__·¿m
è
__THROW
;

54 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

57 
	$sched_y›ld
 (è
__THROW
;

60 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

63 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

66 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

69 #ifdeà
__USE_GNU


71 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

72 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

73 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

74 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

75 
ıu£
)

	)

76 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

77 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

79 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

80 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

81 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

82 
ıu£
)

	)

83 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

84 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

86 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

87 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

88 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

89 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

91 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

92 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

93 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

94 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

95 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

96 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

97 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

98 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

99 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

101 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

104 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

105 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

106 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

110 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

111 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

114 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

115 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

118 
__END_DECLS


	@/usr/include/setjmp.h

23 #iâdef 
_SETJMP_H


24 
	#_SETJMP_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/£tjmp.h
>

31 
	~<b™s/sig£t.h
>

35 
	s__jmp_buf_g


41 
__jmp_buf
 
	m__jmpbuf
;

42 
	m__mask_was_§ved
;

43 
__sig£t_t
 
	m__§ved_mask
;

47 
__BEGIN_NAMESPACE_STD


49 
__jmp_buf_g
 
	tjmp_buf
[1];

53 
	$£tjmp
 (
jmp_buf
 
__’v
è
__THROW
;

55 
__END_NAMESPACE_STD


60 
	$__sig£tjmp
 (
__jmp_buf_g
 
__’v
[1], 
__§vemask
è
__THROW
;

62 #iâdef 
__FAVOR_BSD


65 
	$_£tjmp
 (
__jmp_buf_g
 
__’v
[1]è
__THROW
;

69 
	#£tjmp
(
’v
è
	`_£tjmp
 (’v)

	)

74 
	#£tjmp
(
’v
è
	`£tjmp
 (’v)

	)

78 
__BEGIN_NAMESPACE_STD


82 
	$lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

83 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_NAMESPACE_STD


87 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


91 
	$_lÚgjmp
 (
__jmp_buf_g
 
__’v
[1], 
__v®
)

92 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

96 #ifdef 
__USE_POSIX


100 
__jmp_buf_g
 
	tsigjmp_buf
[1];

104 
	#sig£tjmp
(
’v
, 
§vemask
è
	`__sig£tjmp
 (’v, savemask)

	)

110 
	$siglÚgjmp
 (
sigjmp_buf
 
__’v
, 
__v®
)

111 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

116 #ià
__USE_FORTIFY_LEVEL
 > 0

117 
	~<b™s/£tjmp2.h
>

120 
__END_DECLS


	@/usr/include/signal.h

23 #iâdef 
_SIGNAL_H


25 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


26 
	#_SIGNAL_H


	)

29 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


33 
	~<b™s/sig£t.h
>

37 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


38 #iâdeà
__sig_©omic_t_defšed


39 
	#__sig_©omic_t_defšed


	)

40 
__BEGIN_NAMESPACE_STD


41 
__sig_©omic_t
 
	tsig_©omic_t
;

42 
	g__END_NAMESPACE_STD


44 #undeà
__Ãed_sig_©omic_t


47 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

48 #iâdeà
__sig£t_t_defšed


49 
	#__sig£t_t_defšed


	)

50 
__sig£t_t
 
	tsig£t_t
;

52 #undeà
__Ãed_sig£t_t


55 #ifdeà
_SIGNAL_H


57 
	~<b™s/ty³s.h
>

58 
	~<b™s/signum.h
>

60 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


61 #iâdeà
__pid_t_defšed


62 
__pid_t
 
	tpid_t
;

63 
	#__pid_t_defšed


	)

65 #ifdeà
__USE_XOPEN


67 #iâdeà
__uid_t_defšed


68 
__uid_t
 
	tuid_t
;

69 
	#__uid_t_defšed


	)

73 #ifdeà
__USE_POSIX199309


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

79 
	~<b™s/sigšfo.h
>

84 (*
	t__sighªdËr_t
) ();

89 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

90 
__THROW
;

91 #ifdeà
__USE_GNU


92 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

93 
__THROW
;

99 
__BEGIN_NAMESPACE_STD


100 #ifdeà
__USE_BSD


101 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

102 
__THROW
;

105 #ifdeà
__REDIRECT_NTH


106 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

107 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

108 
__sysv_sigÇl
);

110 
	#sigÇl
 
__sysv_sigÇl


	)

113 
__END_NAMESPACE_STD


115 #ifdeà
__USE_XOPEN


118 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

119 
__THROW
;

125 #ifdeà
__USE_POSIX


126 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

129 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


133 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

136 
__BEGIN_NAMESPACE_STD


138 
	$¿i£
 (
__sig
è
__THROW
;

139 
__END_NAMESPACE_STD


141 #ifdeà
__USE_SVID


143 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

144 
__THROW
;

145 
	$gsigÇl
 (
__sig
è
__THROW
;

148 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


150 
	`psigÇl
 (
__sig
, 
__cÚ¡
 *
__s
);

153 #ifdeà
__USE_XOPEN2K


155 
	`psigšfo
 (
__cÚ¡
 
sigšfo_t
 *
__pšfo
, __cÚ¡ *
__s
);

168 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

170 #ifdeà
__FAVOR_BSD


173 
	$sig·u£
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

175 #ifdeà
__USE_XOPEN


176 #ifdeà
__GNUC__


177 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

180 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

186 #ifdeà
__USE_BSD


193 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

196 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

202 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

206 #ifdeà
__USE_MISC


207 
	#NSIG
 
_NSIG


	)

210 #ifdeà
__USE_GNU


211 
__sighªdËr_t
 
	tsighªdËr_t
;

215 #ifdeà
__USE_BSD


216 
__sighªdËr_t
 
	tsig_t
;

219 #ifdeà
__USE_POSIX


222 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

225 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

228 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

231 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

234 
	$sigismemb”
 (
__cÚ¡
 
sig£t_t
 *
__£t
, 
__signo
)

235 
__THROW
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__USE_GNU


239 
	$sigi£m±y£t
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

242 
	$sigªd£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

243 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

246 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

247 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

252 
	~<b™s/sigaùiÚ.h
>

255 
	$sig´ocmask
 (
__how
, 
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

256 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

263 
	$sigsu¥’d
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

266 
	$sigaùiÚ
 (
__sig
, 
__cÚ¡
 
sigaùiÚ
 *
__»¡riù
 
__aù
,

267 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

270 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

277 
	$sigwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

278 
	`__nÚnuÎ
 ((1, 2));

280 #ifdeà
__USE_POSIX199309


285 
	$sigwa™šfo
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

286 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

293 
	$sigtimedwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

294 
sigšfo_t
 *
__»¡riù
 
__šfo
,

295 
__cÚ¡
 
time¥ec
 *
__»¡riù
 
__timeout
)

296 
	`__nÚnuÎ
 ((1));

300 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, 
__cÚ¡
 
sigv®
 
__v®
)

301 
__THROW
;

306 #ifdeà
__USE_BSD


310 
__cÚ¡
 *__cÚ¡ 
_sys_sigli¡
[
_NSIG
];

311 
__cÚ¡
 *__cÚ¡ 
sys_sigli¡
[
_NSIG
];

314 
	ssigvec


316 
__sighªdËr_t
 
sv_hªdËr
;

317 
sv_mask
;

319 
sv_æags
;

320 
	#sv_Ú¡ack
 
sv_æags


	)

324 
	#SV_ONSTACK
 (1 << 0)

	)

325 
	#SV_INTERRUPT
 (1 << 1)

	)

326 
	#SV_RESETHAND
 (1 << 2)

	)

334 
	$sigvec
 (
__sig
, 
__cÚ¡
 
sigvec
 *
__vec
,

335 
sigvec
 *
__ovec
è
__THROW
;

339 
	~<b™s/sigcÚ‹xt.h
>

342 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

347 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


348 
	#__Ãed_size_t


	)

349 
	~<¡ddef.h
>

354 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

356 
	~<b™s/sig¡ack.h
>

357 #ifdeà
__USE_XOPEN


359 
	~<sys/ucÚ‹xt.h
>

365 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

366 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

370 
	$sig®t¡ack
 (
__cÚ¡
 
sig®t¡ack
 *
__»¡riù
 
__ss
,

371 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

375 #ifdeà
__USE_XOPEN_EXTENDED


379 
	$sighŞd
 (
__sig
è
__THROW
;

382 
	$sig»l£
 (
__sig
è
__THROW
;

385 
	$sigignÜe
 (
__sig
è
__THROW
;

388 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

391 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


394 
	~<b™s/±h»adty³s.h
>

395 
	~<b™s/sigth»ad.h
>

402 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

404 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

408 
__END_DECLS


	@/usr/include/stdint.h

23 #iâdeà
_STDINT_H


24 
	#_STDINT_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wch¬.h
>

28 
	~<b™s/wÜdsize.h
>

35 #iâdeà
__št8_t_defšed


36 
	#__št8_t_defšed


	)

37 sigÃd 
	tšt8_t
;

38 
	tšt16_t
;

39 
	tšt32_t
;

40 #ià
__WORDSIZE
 == 64

41 
	tšt64_t
;

43 
__ex‹nsiÚ__


44 
	tšt64_t
;

49 
	tušt8_t
;

50 
	tušt16_t
;

51 #iâdeà
__ušt32_t_defšed


52 
	tušt32_t
;

53 
	#__ušt32_t_defšed


	)

55 #ià
__WORDSIZE
 == 64

56 
	tušt64_t
;

58 
__ex‹nsiÚ__


59 
	tušt64_t
;

66 sigÃd 
	tšt_Ëa¡8_t
;

67 
	tšt_Ëa¡16_t
;

68 
	tšt_Ëa¡32_t
;

69 #ià
__WORDSIZE
 == 64

70 
	tšt_Ëa¡64_t
;

72 
__ex‹nsiÚ__


73 
	tšt_Ëa¡64_t
;

77 
	tušt_Ëa¡8_t
;

78 
	tušt_Ëa¡16_t
;

79 
	tušt_Ëa¡32_t
;

80 #ià
__WORDSIZE
 == 64

81 
	tušt_Ëa¡64_t
;

83 
__ex‹nsiÚ__


84 
	tušt_Ëa¡64_t
;

91 sigÃd 
	tšt_ç¡8_t
;

92 #ià
__WORDSIZE
 == 64

93 
	tšt_ç¡16_t
;

94 
	tšt_ç¡32_t
;

95 
	tšt_ç¡64_t
;

97 
	tšt_ç¡16_t
;

98 
	tšt_ç¡32_t
;

99 
__ex‹nsiÚ__


100 
	tšt_ç¡64_t
;

104 
	tušt_ç¡8_t
;

105 #ià
__WORDSIZE
 == 64

106 
	tušt_ç¡16_t
;

107 
	tušt_ç¡32_t
;

108 
	tušt_ç¡64_t
;

110 
	tušt_ç¡16_t
;

111 
	tušt_ç¡32_t
;

112 
__ex‹nsiÚ__


113 
	tušt_ç¡64_t
;

118 #ià
__WORDSIZE
 == 64

119 #iâdeà
__šŒ_t_defšed


120 
	tšŒ_t
;

121 
	#__šŒ_t_defšed


	)

123 
	tušŒ_t
;

125 #iâdeà
__šŒ_t_defšed


126 
	tšŒ_t
;

127 
	#__šŒ_t_defšed


	)

129 
	tušŒ_t
;

134 #ià
__WORDSIZE
 == 64

135 
	tštmax_t
;

136 
	tuštmax_t
;

138 
__ex‹nsiÚ__


139 
	tštmax_t
;

140 
__ex‹nsiÚ__


141 
	tuštmax_t
;

147 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_LIMIT_MACROS


149 #ià
__WORDSIZE
 == 64

150 
	#__INT64_C
(
c
èø## 
L


	)

151 
	#__UINT64_C
(
c
èø## 
UL


	)

153 
	#__INT64_C
(
c
èø## 
LL


	)

154 
	#__UINT64_C
(
c
èø## 
ULL


	)

160 
	#INT8_MIN
 (-128)

	)

161 
	#INT16_MIN
 (-32767-1)

	)

162 
	#INT32_MIN
 (-2147483647-1)

	)

163 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

165 
	#INT8_MAX
 (127)

	)

166 
	#INT16_MAX
 (32767)

	)

167 
	#INT32_MAX
 (2147483647)

	)

168 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

171 
	#UINT8_MAX
 (255)

	)

172 
	#UINT16_MAX
 (65535)

	)

173 
	#UINT32_MAX
 (4294967295U)

	)

174 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

178 
	#INT_LEAST8_MIN
 (-128)

	)

179 
	#INT_LEAST16_MIN
 (-32767-1)

	)

180 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

181 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

183 
	#INT_LEAST8_MAX
 (127)

	)

184 
	#INT_LEAST16_MAX
 (32767)

	)

185 
	#INT_LEAST32_MAX
 (2147483647)

	)

186 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

189 
	#UINT_LEAST8_MAX
 (255)

	)

190 
	#UINT_LEAST16_MAX
 (65535)

	)

191 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

192 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

196 
	#INT_FAST8_MIN
 (-128)

	)

197 #ià
__WORDSIZE
 == 64

198 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

199 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

201 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

202 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

204 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

206 
	#INT_FAST8_MAX
 (127)

	)

207 #ià
__WORDSIZE
 == 64

208 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

209 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

211 
	#INT_FAST16_MAX
 (2147483647)

	)

212 
	#INT_FAST32_MAX
 (2147483647)

	)

214 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

217 
	#UINT_FAST8_MAX
 (255)

	)

218 #ià
__WORDSIZE
 == 64

219 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

220 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

222 
	#UINT_FAST16_MAX
 (4294967295U)

	)

223 
	#UINT_FAST32_MAX
 (4294967295U)

	)

225 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

229 #ià
__WORDSIZE
 == 64

230 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

231 
	#INTPTR_MAX
 (9223372036854775807L)

	)

232 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

234 
	#INTPTR_MIN
 (-2147483647-1)

	)

235 
	#INTPTR_MAX
 (2147483647)

	)

236 
	#UINTPTR_MAX
 (4294967295U)

	)

241 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

243 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

246 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

252 #ià
__WORDSIZE
 == 64

253 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

254 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

256 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

257 
	#PTRDIFF_MAX
 (2147483647)

	)

261 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

262 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

265 #ià
__WORDSIZE
 == 64

266 
	#SIZE_MAX
 (18446744073709551615UL)

	)

268 
	#SIZE_MAX
 (4294967295U)

	)

272 #iâdeà
WCHAR_MIN


274 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

275 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

279 
	#WINT_MIN
 (0u)

	)

280 
	#WINT_MAX
 (4294967295u)

	)

287 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_CONSTANT_MACROS


290 
	#INT8_C
(
c
è
	)
c

291 
	#INT16_C
(
c
è
	)
c

292 
	#INT32_C
(
c
è
	)
c

293 #ià
__WORDSIZE
 == 64

294 
	#INT64_C
(
c
èø## 
L


	)

296 
	#INT64_C
(
c
èø## 
LL


	)

300 
	#UINT8_C
(
c
è
	)
c

301 
	#UINT16_C
(
c
è
	)
c

302 
	#UINT32_C
(
c
èø## 
U


	)

303 #ià
__WORDSIZE
 == 64

304 
	#UINT64_C
(
c
èø## 
UL


	)

306 
	#UINT64_C
(
c
èø## 
ULL


	)

310 #ià
__WORDSIZE
 == 64

311 
	#INTMAX_C
(
c
èø## 
L


	)

312 
	#UINTMAX_C
(
c
èø## 
UL


	)

314 
	#INTMAX_C
(
c
èø## 
LL


	)

315 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

24 #iâdeà
_STDIO_H


26 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

36 
	~<b™s/ty³s.h
>

37 
	#__Ãed_FILE


	)

38 
	#__Ãed___FILE


	)

42 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

52 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

53 || 
defšed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_defšed
 1

	)

59 #undeà
__Ãed_FILE


62 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_defšed
 1

	)

69 #undeà
__Ãed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #ifdeà
__USE_XOPEN


78 #ifdeà
__GNUC__


79 #iâdeà
_VA_LIST_DEFINED


80 
_G_va_li¡
 
	tva_li¡
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<¡d¬g.h
>

89 
__BEGIN_NAMESPACE_STD


90 #iâdeà
__USE_FILE_OFFSET64


91 
_G_åos_t
 
	tåos_t
;

93 
_G_åos64_t
 
	tåos_t
;

95 
__END_NAMESPACE_STD


96 #ifdeà
__USE_LARGEFILE64


97 
_G_åos64_t
 
	tåos64_t
;

101 
	#_IOFBF
 0

	)

102 
	#_IOLBF
 1

	)

103 
	#_IONBF
 2

	)

107 #iâdeà
BUFSIZ


108 
	#BUFSIZ
 
_IO_BUFSIZ


	)

114 #iâdeà
EOF


115 
	#EOF
 (-1)

	)

121 
	#SEEK_SET
 0

	)

122 
	#SEEK_CUR
 1

	)

123 
	#SEEK_END
 2

	)

126 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


128 
	#P_tmpdœ
 "/tmp"

	)

141 
	~<b™s/¡dio_lim.h
>

145 
_IO_FILE
 *
¡dš
;

146 
_IO_FILE
 *
¡dout
;

147 
_IO_FILE
 *
¡d”r
;

149 
	#¡dš
 
¡dš


	)

150 
	#¡dout
 
¡dout


	)

151 
	#¡d”r
 
¡d”r


	)

153 
__BEGIN_NAMESPACE_STD


155 
	$»move
 (
__cÚ¡
 *
__f’ame
è
__THROW
;

157 
	$»Çme
 (
__cÚ¡
 *
__Şd
, __cÚ¡ *
__Ãw
è
__THROW
;

158 
__END_NAMESPACE_STD


160 #ifdeà
__USE_ATFILE


162 
	$»Çm—t
 (
__Şdfd
, 
__cÚ¡
 *
__Şd
, 
__Ãwfd
,

163 
__cÚ¡
 *
__Ãw
è
__THROW
;

166 
__BEGIN_NAMESPACE_STD


171 #iâdeà
__USE_FILE_OFFSET64


172 
FILE
 *
	$tmpfe
 (è
__wur
;

174 #ifdeà
__REDIRECT


175 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

177 
	#tmpfe
 
tmpfe64


	)

181 #ifdeà
__USE_LARGEFILE64


182 
FILE
 *
	$tmpfe64
 (è
__wur
;

186 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

187 
__END_NAMESPACE_STD


189 #ifdeà
__USE_MISC


192 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

196 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


204 *
	$‹m²am
 (
__cÚ¡
 *
__dœ
, __cÚ¡ *
__pfx
)

205 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

209 
__BEGIN_NAMESPACE_STD


214 
	`fşo£
 (
FILE
 *
__¡»am
);

219 
	`fæush
 (
FILE
 *
__¡»am
);

220 
__END_NAMESPACE_STD


222 #ifdeà
__USE_MISC


229 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

232 #ifdeà
__USE_GNU


239 
	`fşo£®l
 ();

243 
__BEGIN_NAMESPACE_STD


244 #iâdeà
__USE_FILE_OFFSET64


249 
FILE
 *
	$fİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

250 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

255 
FILE
 *
	$äeİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

256 
__cÚ¡
 *
__»¡riù
 
__modes
,

257 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

259 #ifdeà
__REDIRECT


260 
FILE
 *
	`__REDIRECT
 (
fİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

261 
__cÚ¡
 *
__»¡riù
 
__modes
), 
fİ’64
)

262 
__wur
;

263 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

264 
__cÚ¡
 *
__»¡riù
 
__modes
,

265 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

266 
__wur
;

268 
	#fİ’
 
fİ’64


	)

269 
	#äeİ’
 
äeİ’64


	)

272 
__END_NAMESPACE_STD


273 #ifdeà
__USE_LARGEFILE64


274 
FILE
 *
	$fİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

275 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

276 
FILE
 *
	$äeİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

277 
__cÚ¡
 *
__»¡riù
 
__modes
,

278 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

281 #ifdef 
__USE_POSIX


283 
FILE
 *
	$fdİ’
 (
__fd
, 
__cÚ¡
 *
__modes
è
__THROW
 
__wur
;

286 #ifdef 
__USE_GNU


289 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

290 
__cÚ¡
 *
__»¡riù
 
__modes
,

291 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

294 #ifdeà
__USE_XOPEN2K8


296 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, 
__cÚ¡
 *
__modes
)

297 
__THROW
 
__wur
;

302 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

306 
__BEGIN_NAMESPACE_STD


309 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

313 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

314 
__modes
, 
size_t
 
__n
è
__THROW
;

315 
__END_NAMESPACE_STD


317 #ifdef 
__USE_BSD


320 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

321 
size_t
 
__size
è
__THROW
;

324 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

328 
__BEGIN_NAMESPACE_STD


333 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

334 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

339 
	`´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

341 
	$¥rštf
 (*
__»¡riù
 
__s
,

342 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

348 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

349 
_G_va_li¡
 
__¬g
);

354 
	`v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

356 
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

357 
_G_va_li¡
 
__¬g
è
__THROW
;

358 
__END_NAMESPACE_STD


360 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


361 
__BEGIN_NAMESPACE_C99


363 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

364 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

365 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

367 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

368 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

369 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

370 
__END_NAMESPACE_C99


373 #ifdeà
__USE_GNU


376 
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__f
,

377 
_G_va_li¡
 
__¬g
)

378 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

379 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

380 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

381 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

382 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

383 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

384 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

387 #ifdeà
__USE_XOPEN2K8


394 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

395 
_G_va_li¡
 
__¬g
)

396 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

397 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

398 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

402 
__BEGIN_NAMESPACE_STD


407 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

408 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

413 
	$sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

415 
	$ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

416 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

418 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

419 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

420 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

421 #ifdeà
__REDIRECT


425 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

426 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

427 
__isoc99_fsÿnf
è
__wur
;

428 
	`__REDIRECT
 (
sÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

429 
__isoc99_sÿnf
è
__wur
;

430 
	`__REDIRECT
 (
ssÿnf
, (
__cÚ¡
 *
__»¡riù
 
__s
,

431 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

432 
__isoc99_ssÿnf
è
__THROW
;

434 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

435 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

436 
	$__isoc99_sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

437 
	$__isoc99_ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

438 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

439 
	#fsÿnf
 
__isoc99_fsÿnf


	)

440 
	#sÿnf
 
__isoc99_sÿnf


	)

441 
	#ssÿnf
 
__isoc99_ssÿnf


	)

445 
__END_NAMESPACE_STD


447 #ifdef 
__USE_ISOC99


448 
__BEGIN_NAMESPACE_C99


453 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

454 
_G_va_li¡
 
__¬g
)

455 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

461 
	$vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

462 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

465 
	$vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

466 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

467 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

469 #ià!
defšed
 
__USE_GNU
 \

470 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

471 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

472 #ifdeà
__REDIRECT


476 
	`__REDIRECT
 (
vfsÿnf
,

477 (
FILE
 *
__»¡riù
 
__s
,

478 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

479 
__isoc99_vfsÿnf
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

481 
	`__REDIRECT
 (
vsÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

482 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

483 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

484 
	`__REDIRECT
 (
vssÿnf
,

485 (
__cÚ¡
 *
__»¡riù
 
__s
,

486 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

487 
__isoc99_vssÿnf
)

488 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

490 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

491 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

492 
_G_va_li¡
 
__¬g
è
__wur
;

493 
	$__isoc99_vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

494 
_G_va_li¡
 
__¬g
è
__wur
;

495 
	$__isoc99_vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

496 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

497 
_G_va_li¡
 
__¬g
è
__THROW
;

498 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

499 
	#vsÿnf
 
__isoc99_vsÿnf


	)

500 
	#vssÿnf
 
__isoc99_vssÿnf


	)

504 
__END_NAMESPACE_C99


508 
__BEGIN_NAMESPACE_STD


513 
	`fg‘c
 (
FILE
 *
__¡»am
);

514 
	`g‘c
 (
FILE
 *
__¡»am
);

520 
	`g‘ch¬
 ();

521 
__END_NAMESPACE_STD


525 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

527 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


532 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

533 
	`g‘ch¬_uÆocked
 ();

536 #ifdeà
__USE_MISC


543 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

547 
__BEGIN_NAMESPACE_STD


555 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

556 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

562 
	`putch¬
 (
__c
);

563 
__END_NAMESPACE_STD


567 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

569 #ifdeà
__USE_MISC


576 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

579 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


584 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

585 
	`putch¬_uÆocked
 (
__c
);

589 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

590 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

592 
	`g‘w
 (
FILE
 *
__¡»am
);

595 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

599 
__BEGIN_NAMESPACE_STD


604 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

605 
__wur
;

612 *
	$g‘s
 (*
__s
è
__wur
;

613 
__END_NAMESPACE_STD


615 #ifdeà
__USE_GNU


622 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

623 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

627 #ifdef 
__USE_XOPEN2K8


638 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

639 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

640 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

641 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

642 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

643 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

651 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

652 
size_t
 *
__»¡riù
 
__n
,

653 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

657 
__BEGIN_NAMESPACE_STD


662 
	`åuts
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

668 
	`puts
 (
__cÚ¡
 *
__s
);

675 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

682 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

683 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

688 
size_t
 
	`fwr™e
 (
__cÚ¡
 *
__»¡riù
 
__±r
, size_ˆ
__size
,

689 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

690 
__END_NAMESPACE_STD


692 #ifdeà
__USE_GNU


699 
	`åuts_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__s
,

700 
FILE
 *
__»¡riù
 
__¡»am
);

703 #ifdeà
__USE_MISC


710 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

711 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

712 
size_t
 
	`fwr™e_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__±r
, size_ˆ
__size
,

713 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

717 
__BEGIN_NAMESPACE_STD


722 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

727 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

732 
	`»wšd
 (
FILE
 *
__¡»am
);

733 
__END_NAMESPACE_STD


740 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


741 #iâdeà
__USE_FILE_OFFSET64


746 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

751 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

753 #ifdeà
__REDIRECT


754 
	`__REDIRECT
 (
f£eko
,

755 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

756 
f£eko64
);

757 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

759 
	#f£eko
 
f£eko64


	)

760 
	#á–lo
 
á–lo64


	)

765 
__BEGIN_NAMESPACE_STD


766 #iâdeà
__USE_FILE_OFFSET64


771 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

776 
	`f£os
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
);

778 #ifdeà
__REDIRECT


779 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

780 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

781 
	`__REDIRECT
 (
f£os
,

782 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
), 
f£os64
);

784 
	#fg‘pos
 
fg‘pos64


	)

785 
	#f£os
 
f£os64


	)

788 
__END_NAMESPACE_STD


790 #ifdeà
__USE_LARGEFILE64


791 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

792 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

793 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

794 
	`f£os64
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos64_t
 *
__pos
);

797 
__BEGIN_NAMESPACE_STD


799 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

801 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

803 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

804 
__END_NAMESPACE_STD


806 #ifdeà
__USE_MISC


808 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

809 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

810 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

814 
__BEGIN_NAMESPACE_STD


819 
	`³¼Ü
 (
__cÚ¡
 *
__s
);

820 
__END_NAMESPACE_STD


826 
	~<b™s/sys_”¾i¡.h
>

829 #ifdef 
__USE_POSIX


831 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

834 #ifdeà
__USE_MISC


836 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

840 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

841 
defšed
 
__USE_MISC
)

846 
FILE
 *
	$pİ’
 (
__cÚ¡
 *
__commªd
, __cÚ¡ *
__modes
è
__wur
;

852 
	`pşo£
 (
FILE
 *
__¡»am
);

856 #ifdef 
__USE_POSIX


858 *
	$ù”mid
 (*
__s
è
__THROW
;

862 #ifdeà
__USE_XOPEN


864 *
	`cu£rid
 (*
__s
);

868 #ifdef 
__USE_GNU


869 
ob¡ack
;

872 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

873 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

874 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

875 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

876 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

877 
_G_va_li¡
 
__¬gs
)

878 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

882 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


886 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

890 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

893 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

896 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


900 
	#__Ãed_g‘İt


	)

901 
	~<g‘İt.h
>

906 #ifdeà
__USE_EXTERN_INLINES


907 
	~<b™s/¡dio.h
>

909 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


910 
	~<b™s/¡dio2.h
>

912 #ifdeà
__LDBL_COMPAT


913 
	~<b™s/¡dio-ldbl.h
>

916 
__END_DECLS


	@/usr/include/stdlib.h

23 #iâdef 
_STDLIB_H


25 
	~<ã©u»s.h
>

28 
	#__Ãed_size_t


	)

29 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


30 
	#__Ãed_wch¬_t


	)

31 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	g__BEGIN_DECLS


37 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


38 
	#_STDLIB_H
 1

	)

40 #ià
defšed
 
__USE_XOPEN
 && !defšed 
_SYS_WAIT_H


42 
	~<b™s/wa™æags.h
>

43 
	~<b™s/wa™¡©us.h
>

45 #ifdeà
__USE_BSD


50 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


51 
	#__WAIT_INT
(
¡©us
) \

52 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

53 { .
__š
 = (
¡©us
è}).
__i
))

	)

55 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

63 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
wa™
 *
	m__u±r
;

71 *
	m__Œ
;

72 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

90 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

91 #ifdeà
__WIFCONTINUED


92 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquÙ
;

101 
	m»m
;

102 } 
	tdiv_t
;

105 #iâdeà
__ldiv_t_defšed


108 
	mquÙ
;

109 
	m»m
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_defšed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


116 
__BEGIN_NAMESPACE_C99


118 
__ex‹nsiÚ__
 struct

120 
	mquÙ
;

121 
	m»m
;

122 } 
	tÎdiv_t
;

123 
	#__Îdiv_t_defšed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

140 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__cÚ¡
 *
__ÅŒ
)

146 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

148 
	$©oi
 (
__cÚ¡
 *
__ÅŒ
)

149 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

151 
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

153 
__END_NAMESPACE_STD


155 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__ex‹nsiÚ__
 
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
)

159 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$¡¹od
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

166 **
__»¡riù
 
__’d±r
)

167 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$¡¹of
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

174 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

176 
	$¡¹Şd
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

177 **
__»¡riù
 
__’d±r
)

178 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$¡¹Ş
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

185 **
__»¡riù
 
__’d±r
, 
__ba£
)

186 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

188 
	$¡¹oul
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

189 **
__»¡riù
 
__’d±r
, 
__ba£
)

190 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

191 
__END_NAMESPACE_STD


193 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


195 
__ex‹nsiÚ__


196 
	$¡¹oq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

197 **
__»¡riù
 
__’d±r
, 
__ba£
)

198 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

200 
__ex‹nsiÚ__


201 
	$¡¹ouq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

202 **
__»¡riù
 
__’d±r
, 
__ba£
)

203 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

206 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__ex‹nsiÚ__


210 
	$¡¹Şl
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

211 **
__»¡riù
 
__’d±r
, 
__ba£
)

212 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

214 
__ex‹nsiÚ__


215 
	$¡¹ouÎ
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

216 **
__»¡riù
 
__’d±r
, 
__ba£
)

217 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

218 
__END_NAMESPACE_C99


222 #ifdeà
__USE_GNU


236 
	~<xloÿË.h
>

240 
	$¡¹Ş_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

241 **
__»¡riù
 
__’d±r
, 
__ba£
,

242 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

244 
	$¡¹oul_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

245 **
__»¡riù
 
__’d±r
,

246 
__ba£
, 
__loÿË_t
 
__loc
)

247 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

249 
__ex‹nsiÚ__


250 
	$¡¹Şl_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

251 **
__»¡riù
 
__’d±r
, 
__ba£
,

252 
__loÿË_t
 
__loc
)

253 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

255 
__ex‹nsiÚ__


256 
	$¡¹ouÎ_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

257 **
__»¡riù
 
__’d±r
,

258 
__ba£
, 
__loÿË_t
 
__loc
)

259 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

261 
	$¡¹od_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

262 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

263 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

265 
	$¡¹of_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

266 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

267 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

269 
	$¡¹Şd_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

270 **
__»¡riù
 
__’d±r
,

271 
__loÿË_t
 
__loc
)

272 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

276 #ifdeà
__USE_EXTERN_INLINES


277 
__BEGIN_NAMESPACE_STD


278 
__ex‹º_šlše
 

279 
	`__NTH
 (
	$©of
 (
__cÚ¡
 *
__ÅŒ
))

281  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

282 
	}
}

283 
__ex‹º_šlše
 

284 
__NTH
 (
	$©oi
 (
__cÚ¡
 *
__ÅŒ
))

286  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

287 
	}
}

288 
__ex‹º_šlše
 

289 
__NTH
 (
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
))

291  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

292 
	}
}

293 
	g__END_NAMESPACE_STD


295 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


296 
__BEGIN_NAMESPACE_C99


297 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

298 
__NTH
 (
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
))

300  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

301 
	}
}

302 
	g__END_NAMESPACE_C99


307 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


311 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

314 
	$a64l
 (
__cÚ¡
 *
__s
)

315 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


320 
	~<sys/ty³s.h
>

327 
	$¿ndom
 (è
__THROW
;

330 
	$¤ªdom
 (
__£ed
è
__THROW
;

336 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

337 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

341 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

344 #ifdeà
__USE_MISC


349 
	s¿ndom_d©a


351 
št32_t
 *
åŒ
;

352 
št32_t
 *
½Œ
;

353 
št32_t
 *
¡©e
;

354 
¿nd_ty³
;

355 
¿nd_deg
;

356 
¿nd_£p
;

357 
št32_t
 *
’d_±r
;

360 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

361 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

363 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

364 
__THROW
 
	`__nÚnuÎ
 ((2));

366 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

367 
size_t
 
__¡©–’
,

368 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

369 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

371 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

372 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

373 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

378 
__BEGIN_NAMESPACE_STD


380 
	$¿nd
 (è
__THROW
;

382 
	$¤ªd
 (
__£ed
è
__THROW
;

383 
__END_NAMESPACE_STD


385 #ifdeà
__USE_POSIX


387 
	$¿nd_r
 (*
__£ed
è
__THROW
;

391 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


395 
	$d¿nd48
 (è
__THROW
;

396 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

399 
	$Ìªd48
 (è
__THROW
;

400 
	$Äªd48
 (
__xsubi
[3])

401 
__THROW
 
	`__nÚnuÎ
 ((1));

404 
	$m¿nd48
 (è
__THROW
;

405 
	$j¿nd48
 (
__xsubi
[3])

406 
__THROW
 
	`__nÚnuÎ
 ((1));

409 
	$¤ªd48
 (
__£edv®
è
__THROW
;

410 *
	$£ed48
 (
__£ed16v
[3])

411 
__THROW
 
	`__nÚnuÎ
 ((1));

412 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

414 #ifdeà
__USE_MISC


418 
	sd¿nd48_d©a


420 
__x
[3];

421 
__Şd_x
[3];

422 
__c
;

423 
__š™
;

424 
__a
;

428 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

429 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$”ªd48_r
 (
__xsubi
[3],

431 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

432 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

435 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

436 *
__»¡riù
 
__»suÉ
)

437 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$Äªd48_r
 (
__xsubi
[3],

439 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

444 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

445 *
__»¡riù
 
__»suÉ
)

446 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$j¿nd48_r
 (
__xsubi
[3],

448 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

449 *
__»¡riù
 
__»suÉ
)

450 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

454 
__THROW
 
	`__nÚnuÎ
 ((2));

456 
	$£ed48_r
 (
__£ed16v
[3],

457 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$lcÚg48_r
 (
__·¿m
[7],

460 
d¿nd48_d©a
 *
__bufãr
)

461 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

467 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


468 
	#__m®loc_ªd_ÿÎoc_defšed


	)

469 
__BEGIN_NAMESPACE_STD


471 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

473 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

474 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

475 
__END_NAMESPACE_STD


478 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


479 
__BEGIN_NAMESPACE_STD


485 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

486 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

488 
	$ä“
 (*
__±r
è
__THROW
;

489 
__END_NAMESPACE_STD


491 #ifdef 
__USE_MISC


493 
	$cä“
 (*
__±r
è
__THROW
;

496 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


497 
	~<®loÿ.h
>

500 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


502 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

505 #ifdeà
__USE_XOPEN2K


507 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

508 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

511 
__BEGIN_NAMESPACE_STD


513 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

517 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

519 #ifdeà
__USE_GNU


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ifdeà
__USE_GNU


551 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

553 
__END_NAMESPACE_STD


555 #ifdeà
__USE_ISOC99


556 
__BEGIN_NAMESPACE_C99


559 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

560 
__END_NAMESPACE_C99


564 
__BEGIN_NAMESPACE_STD


566 *
	$g‘’v
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

567 
__END_NAMESPACE_STD


571 *
	$__£cu»_g‘’v
 (
__cÚ¡
 *
__Çme
)

572 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (
__cÚ¡
 *
__Çme
, __cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (
__cÚ¡
 *
__Çme
è
__THROW
;

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


604 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

614 #iâdeà
__USE_FILE_OFFSET64


615 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

617 #ifdeà
__REDIRECT


618 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

619 
	`__nÚnuÎ
 ((1)è
__wur
;

621 
	#mk¡emp
 
mk¡emp64


	)

624 #ifdeà
__USE_LARGEFILE64


625 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

629 #ifdeà
__USE_MISC


636 #iâdeà
__USE_FILE_OFFSET64


637 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

639 #ifdeà
__REDIRECT


640 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

641 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 
	#mk¡emps
 
mk¡emps64


	)

646 #ifdeà
__USE_LARGEFILE64


647 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

648 
	`__nÚnuÎ
 ((1)è
__wur
;

652 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


658 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

661 #ifdeà
__USE_GNU


668 #iâdeà
__USE_FILE_OFFSET64


669 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

671 #ifdeà
__REDIRECT


672 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

673 
	`__nÚnuÎ
 ((1)è
__wur
;

675 
	#mko¡emp
 
mko¡emp64


	)

678 #ifdeà
__USE_LARGEFILE64


679 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

688 #iâdeà
__USE_FILE_OFFSET64


689 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

690 
	`__nÚnuÎ
 ((1)è
__wur
;

692 #ifdeà
__REDIRECT


693 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

694 
__æags
), 
mko¡emps64
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 
	#mko¡emps
 
mko¡emps64


	)

700 #ifdeà
__USE_LARGEFILE64


701 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

702 
	`__nÚnuÎ
 ((1)è
__wur
;

707 
__BEGIN_NAMESPACE_STD


712 
	$sy¡em
 (
__cÚ¡
 *
__commªd
è
__wur
;

713 
__END_NAMESPACE_STD


716 #ifdef 
__USE_GNU


719 *
	$ÿnÚiÿlize_fe_Çme
 (
__cÚ¡
 *
__Çme
)

720 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

723 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


729 *
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

730 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

735 #iâdeà
__COMPAR_FN_T


736 
	#__COMPAR_FN_T


	)

737 (*
	t__com·r_â_t
è(
	t__cÚ¡
 *, __const *);

739 #ifdef 
__USE_GNU


740 
__com·r_â_t
 
	tcom·risÚ_â_t
;

743 #ifdeà
__USE_GNU


744 (*
	t__com·r_d_â_t
è(
	t__cÚ¡
 *, __const *, *);

747 
__BEGIN_NAMESPACE_STD


750 *
	$b£¬ch
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__ba£
,

751 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

752 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

756 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

757 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

758 #ifdeà
__USE_GNU


759 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

760 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

761 
	`__nÚnuÎ
 ((1, 4));

766 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

767 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

768 
__END_NAMESPACE_STD


770 #ifdeà
__USE_ISOC99


771 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

772 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
__BEGIN_NAMESPACE_STD


780 
div_t
 
	$div
 (
__num”
, 
__d’om
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

782 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

783 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

784 
__END_NAMESPACE_STD


786 #ifdeà
__USE_ISOC99


787 
__BEGIN_NAMESPACE_C99


788 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

789 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
__END_NAMESPACE_C99


795 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


802 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

803 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

808 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

809 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

814 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

815 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

818 #ifdeà
__USE_MISC


820 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

821 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

822 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

823 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

824 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

825 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

826 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

827 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

832 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

833 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

834 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

835 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

836 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

837 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

839 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

840 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

841 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

842 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

843 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

844 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

845 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

846 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

851 
__BEGIN_NAMESPACE_STD


854 
	$mbËn
 (
__cÚ¡
 *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

857 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

858 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

861 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

865 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

866 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

868 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

869 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

870 
__THROW
;

871 
__END_NAMESPACE_STD


874 #ifdeà
__USE_SVID


879 
	$½m©ch
 (
__cÚ¡
 *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

883 #ifdeà
__USE_XOPEN_EXTENDED


890 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

891 *
__cÚ¡
 *
__»¡riù
 
__tok’s
,

892 **
__»¡riù
 
__v®u•
)

893 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

897 #ifdeà
__USE_XOPEN


899 
	$£tkey
 (
__cÚ¡
 *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

905 #ifdeà
__USE_XOPEN2K


907 
	$posix_İ’±
 (
__oæag
è
__wur
;

910 #ifdeà
__USE_XOPEN


915 
	$g¿Á±
 (
__fd
è
__THROW
;

919 
	$uÆock±
 (
__fd
è
__THROW
;

924 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

927 #ifdeà
__USE_GNU


931 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

932 
__THROW
 
	`__nÚnuÎ
 ((2));

935 
	`g‘±
 ();

938 #ifdeà
__USE_BSD


942 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

943 
__THROW
 
	`__nÚnuÎ
 ((1));

948 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


949 
	~<b™s/¡dlib.h
>

951 #ifdeà
__LDBL_COMPAT


952 
	~<b™s/¡dlib-ldbl.h
>

956 #undeà
__Ãed_m®loc_ªd_ÿÎoc


958 
__END_DECLS


	@/usr/include/string.h

23 #iâdef 
_STRING_H


24 
	#_STRING_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

36 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

37 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

41 
__BEGIN_NAMESPACE_STD


43 *
	$memıy
 (*
__»¡riù
 
__de¡
,

44 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

45 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

48 *
	$memmove
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
)

49 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 
__END_NAMESPACE_STD


55 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


56 *
	$memcıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

57 
__c
, 
size_t
 
__n
)

58 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

62 
__BEGIN_NAMESPACE_STD


64 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

67 
	$memcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

68 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

71 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


74 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

75 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

76 
__cÚ¡
 *
	`memchr
 (__cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

79 #ifdeà
__OPTIMIZE__


80 
__ex‹º_®ways_šlše
 *

81 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


83  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

86 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

87 
	`memchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


89  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

92 
	}
}

94 *
	$memchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

95 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

97 
__END_NAMESPACE_STD


99 #ifdeà
__USE_GNU


102 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


103 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

104 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

105 "C++" 
__cÚ¡
 *
	$¿wmemchr
 (
__cÚ¡
 *
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

108 *
	$¿wmemchr
 (
__cÚ¡
 *
__s
, 
__c
)

109 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

113 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


114 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

116 "C++" 
__cÚ¡
 *
	$memrchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

119 *
	$memrchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

120 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

125 
__BEGIN_NAMESPACE_STD


127 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

128 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

130 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

131 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

132 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

135 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

136 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

138 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

139 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

142 
	$¡rcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

143 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

145 
	$¡ºcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

146 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

149 
	$¡rcŞl
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

150 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

152 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

153 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

154 
__THROW
 
	`__nÚnuÎ
 ((2));

155 
__END_NAMESPACE_STD


157 #ifdeà
__USE_XOPEN2K8


161 
	~<xloÿË.h
>

164 
	$¡rcŞl_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

165 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

167 
size_t
 
	$¡rxäm_l
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
,

168 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

171 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


173 *
	$¡rdup
 (
__cÚ¡
 *
__s
)

174 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

180 #ià
defšed
 
__USE_XOPEN2K8


181 *
	$¡ºdup
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__n
)

182 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

185 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


187 
	#¡rdu·
(
s
) \

188 (
__ex‹nsiÚ__
 \

190 
__cÚ¡
 *
__Şd
 = (
s
); \

191 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

192 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

193 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

194 
	}
}))

	)

197 
	#¡ºdu·
(
s
, 
n
) \

198 (
__ex‹nsiÚ__
 \

200 
__cÚ¡
 *
__Şd
 = (
s
); \

201 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

202 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

203 
__Ãw
[
__Ën
] = '\0'; \

204 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

205 }))

	)

208 
	g__BEGIN_NAMESPACE_STD


210 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


213 *
¡rchr
 (*
__s
, 
__c
)

214 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

215 
__cÚ¡
 *
¡rchr
 (__cÚ¡ *
__s
, 
__c
)

216 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 #ifdeà
__OPTIMIZE__


219 
__ex‹º_®ways_šlše
 *

220 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


222  
__butš_¡rchr
 (
__s
, 
__c
);

225 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

226 
¡rchr
 (
__cÚ¡
 *
__s
, 
__c
è
	g__THROW


228  
__butš_¡rchr
 (
__s
, 
__c
);

233 *
	$¡rchr
 (
__cÚ¡
 *
__s
, 
__c
)

234 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


240 *
	`¡¼chr
 (*
__s
, 
__c
)

241 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

242 
__cÚ¡
 *
	`¡¼chr
 (__cÚ¡ *
__s
, 
__c
)

243 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 #ifdeà
__OPTIMIZE__


246 
__ex‹º_®ways_šlše
 *

247 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


249  
	`__butš_¡¼chr
 (
__s
, 
__c
);

252 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

253 
	`¡¼chr
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


255  
	`__butš_¡¼chr
 (
__s
, 
__c
);

258 
	}
}

260 *
	$¡¼chr
 (
__cÚ¡
 *
__s
, 
__c
)

261 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

263 
__END_NAMESPACE_STD


265 #ifdeà
__USE_GNU


268 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


269 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

270 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

271 "C++" 
__cÚ¡
 *
	$¡rchºul
 (
__cÚ¡
 *
__s
, 
__c
)

272 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 *
	$¡rchºul
 (
__cÚ¡
 *
__s
, 
__c
)

275 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

279 
__BEGIN_NAMESPACE_STD


282 
size_t
 
	$¡rc¥n
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__»jeù
)

283 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

286 
size_t
 
	$¡r¥n
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
)

287 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


292 *
	`¡½brk
 (*
__s
, 
__cÚ¡
 *
__acû±
)

293 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

294 
__cÚ¡
 *
	`¡½brk
 (__cÚ¡ *
__s
, __cÚ¡ *
__acû±
)

295 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 #ifdeà
__OPTIMIZE__


298 
__ex‹º_®ways_šlše
 *

299 
	`¡½brk
 (*
__s
, 
__cÚ¡
 *
__acû±
è
__THROW


301  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

304 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

305 
	`¡½brk
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
è
__THROW


307  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

310 
	}
}

312 *
	$¡½brk
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
)

313 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

316 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


319 *
	`¡r¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
)

320 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

321 
__cÚ¡
 *
	`¡r¡r
 (__cÚ¡ *
__hay¡ack
,

322 
__cÚ¡
 *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

325 #ifdeà
__OPTIMIZE__


326 
__ex‹º_®ways_šlše
 *

327 
	`¡r¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
è
__THROW


329  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

332 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

333 
	`¡r¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
è
__THROW


335  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

338 
	}
}

340 *
	$¡r¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
)

341 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

346 *
	$¡¹ok
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__d–im
)

347 
__THROW
 
	`__nÚnuÎ
 ((2));

348 
__END_NAMESPACE_STD


352 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

353 
__cÚ¡
 *
__»¡riù
 
__d–im
,

354 **
__»¡riù
 
__§ve_±r
)

355 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

356 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


357 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__d–im
,

358 **
__»¡riù
 
__§ve_±r
)

359 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

362 #ifdeà
__USE_GNU


364 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


365 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
)

366 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

367 "C++" 
__cÚ¡
 *
	$¡rÿ£¡r
 (
__cÚ¡
 *
__hay¡ack
,

368 
__cÚ¡
 *
__ÃedË
)

369 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

371 *
	$¡rÿ£¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
)

372 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

376 #ifdeà
__USE_GNU


380 *
	$memmem
 (
__cÚ¡
 *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

381 
__cÚ¡
 *
__ÃedË
, 
size_t
 
__ÃedËËn
)

382 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

386 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

387 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

388 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

389 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

390 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

391 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

395 
__BEGIN_NAMESPACE_STD


397 
size_t
 
	$¡¾’
 (
__cÚ¡
 *
__s
)

398 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

399 
__END_NAMESPACE_STD


401 #ifdef 
__USE_XOPEN2K8


404 
size_t
 
	$¡ºËn
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__maxËn
)

405 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

409 
__BEGIN_NAMESPACE_STD


411 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

412 
__END_NAMESPACE_STD


413 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


421 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


424 #ifdeà
__REDIRECT_NTH


425 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

426 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

427 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

429 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

430 
__THROW
 
	`__nÚnuÎ
 ((2));

431 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

436 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

437 
__THROW
 
	`__nÚnuÎ
 ((2));

441 #ifdeà
__USE_XOPEN2K8


443 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

449 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

451 #ifdeà
__USE_BSD


453 
	$bcİy
 (
__cÚ¡
 *
__¤c
, *
__de¡
, 
size_t
 
__n
)

454 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

457 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

460 
	$bcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

461 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

464 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


467 *
	`šdex
 (*
__s
, 
__c
)

468 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

469 
__cÚ¡
 *
	`šdex
 (__cÚ¡ *
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

472 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


473 
__ex‹º_®ways_šlše
 *

474 
	`šdex
 (*
__s
, 
__c
è
__THROW


476  
	`__butš_šdex
 (
__s
, 
__c
);

479 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

480 
	`šdex
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


482  
	`__butš_šdex
 (
__s
, 
__c
);

485 
	}
}

487 *
	$šdex
 (
__cÚ¡
 *
__s
, 
__c
)

488 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

492 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


495 *
	`ršdex
 (*
__s
, 
__c
)

496 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

497 
__cÚ¡
 *
	`ršdex
 (__cÚ¡ *
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

500 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


501 
__ex‹º_®ways_šlše
 *

502 
	`ršdex
 (*
__s
, 
__c
è
__THROW


504  
	`__butš_ršdex
 (
__s
, 
__c
);

507 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

508 
	`ršdex
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


510  
	`__butš_ršdex
 (
__s
, 
__c
);

513 
	}
}

515 *
	$ršdex
 (
__cÚ¡
 *
__s
, 
__c
)

516 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

521 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

525 #ifdef 
__USE_GNU


526 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdeà
__GNUC__


528 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

529 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 
__cÚ¡
 *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" 
__cÚ¡
 *
	$ba£Çme
 (
__cÚ¡
 *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (
__cÚ¡
 *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/sys/file.h

19 #iâdef 
_SYS_FILE_H


20 
	#_SYS_FILE_H
 1

	)

22 
	~<ã©u»s.h
>

24 #iâdef 
_FCNTL_H


25 
	~<fú.h
>

28 
	g__BEGIN_DECLS


33 #iâdeà
L_SET


34 
	#L_SET
 0

	)

35 
	#L_INCR
 1

	)

36 
	#L_XTND
 2

	)

41 
	#LOCK_SH
 1

	)

42 
	#LOCK_EX
 2

	)

43 
	#LOCK_UN
 8

	)

46 
	#LOCK_NB
 4

	)

51 
	$æock
 (
__fd
, 
__İ”©iÚ
è
__THROW
;

54 
__END_DECLS


	@/usr/include/sys/mman.h

20 #iâdef 
_SYS_MMAN_H


21 
	#_SYS_MMAN_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<b™s/ty³s.h
>

25 
	#__Ãed_size_t


	)

26 
	~<¡ddef.h
>

28 #iâdeà
__off_t_defšed


29 #iâdeà
__USE_FILE_OFFSET64


30 
__off_t
 
	toff_t
;

32 
__off64_t
 
	toff_t
;

34 
	#__off_t_defšed


	)

37 #iâdeà
__mode_t_defšed


38 
__mode_t
 
	tmode_t
;

39 
	#__mode_t_defšed


	)

42 
	~<b™s/mmª.h
>

45 
	#MAP_FAILED
 ((*è-1)

	)

47 
	g__BEGIN_DECLS


57 #iâdeà
__USE_FILE_OFFSET64


58 *
	$mm­
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

59 
__æags
, 
__fd
, 
__off_t
 
__off£t
è
__THROW
;

61 #ifdeà
__REDIRECT_NTH


62 * 
	`__REDIRECT_NTH
 (
mm­
,

63 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

64 
__æags
, 
__fd
, 
__off64_t
 
__off£t
),

65 
mm­64
);

67 
	#mm­
 
mm­64


	)

70 #ifdeà
__USE_LARGEFILE64


71 *
	$mm­64
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

72 
__æags
, 
__fd
, 
__off64_t
 
__off£t
è
__THROW
;

77 
	$munm­
 (*
__addr
, 
size_t
 
__Ën
è
__THROW
;

82 
	$m´Ùeù
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
è
__THROW
;

90 
	`msync
 (*
__addr
, 
size_t
 
__Ën
, 
__æags
);

92 #ifdeà
__USE_BSD


95 
	$madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

97 #ifdeà
__USE_XOPEN2K


99 
	$posix_madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

104 
	$mlock
 (
__cÚ¡
 *
__addr
, 
size_t
 
__Ën
è
__THROW
;

107 
	$muÆock
 (
__cÚ¡
 *
__addr
, 
size_t
 
__Ën
è
__THROW
;

112 
	$mlock®l
 (
__æags
è
__THROW
;

116 
	$muÆock®l
 (è
__THROW
;

118 #ifdeà
__USE_MISC


124 
	$mšcÜe
 (*
__¡¬t
, 
size_t
 
__Ën
, *
__vec
)

125 
__THROW
;

128 #ifdeà
__USE_GNU


134 *
	$m»m­
 (*
__addr
, 
size_t
 
__Şd_Ën
, size_ˆ
__Ãw_Ën
,

135 
__æags
, ...è
__THROW
;

139 
	$»m­_fe_·ges
 (*
__¡¬t
, 
size_t
 
__size
, 
__´Ù
,

140 
size_t
 
__pgoff
, 
__æags
è
__THROW
;

145 
	`shm_İ’
 (
__cÚ¡
 *
__Çme
, 
__oæag
, 
mode_t
 
__mode
);

148 
	`shm_uÆšk
 (
__cÚ¡
 *
__Çme
);

150 
__END_DECLS


	@/usr/include/sys/prctl.h

19 #iâdeà
_SYS_PRCTL_H


20 
	#_SYS_PRCTL_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<lšux/´ùl.h
>

25 
__BEGIN_DECLS


28 
	$´ùl
 (
__İtiÚ
, ...è
__THROW
;

30 
__END_DECLS


	@/usr/include/sys/resource.h

19 #iâdef 
_SYS_RESOURCE_H


20 
	#_SYS_RESOURCE_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/»sourû.h
>

27 #iâdeà
__id_t_defšed


28 
__id_t
 
	tid_t
;

29 
	#__id_t_defšed


	)

32 
	g__BEGIN_DECLS


38 #ià
defšed
 
__USE_GNU
 && !defšed 
__ılu¥lus


39 
__¾im™_»sourû
 
	t__¾im™_»sourû_t
;

40 
__ru§ge_who
 
	t__ru§ge_who_t
;

41 
__´iÜ™y_which
 
	t__´iÜ™y_which_t
;

43 
	t__¾im™_»sourû_t
;

44 
	t__ru§ge_who_t
;

45 
	t__´iÜ™y_which_t
;

50 #iâdeà
__USE_FILE_OFFSET64


51 
	$g‘¾im™
 (
__¾im™_»sourû_t
 
__»sourû
,

52 
¾im™
 *
__¾im™s
è
__THROW
;

54 #ifdeà
__REDIRECT_NTH


55 
	`__REDIRECT_NTH
 (
g‘¾im™
, (
__¾im™_»sourû_t
 
__»sourû
,

56 
¾im™
 *
__¾im™s
), 
g‘¾im™64
);

58 
	#g‘¾im™
 
g‘¾im™64


	)

61 #ifdeà
__USE_LARGEFILE64


62 
	$g‘¾im™64
 (
__¾im™_»sourû_t
 
__»sourû
,

63 
¾im™64
 *
__¾im™s
è
__THROW
;

69 #iâdeà
__USE_FILE_OFFSET64


70 
	$£Œlim™
 (
__¾im™_»sourû_t
 
__»sourû
,

71 
__cÚ¡
 
¾im™
 *
__¾im™s
è
__THROW
;

73 #ifdeà
__REDIRECT_NTH


74 
	`__REDIRECT_NTH
 (
£Œlim™
, (
__¾im™_»sourû_t
 
__»sourû
,

75 
__cÚ¡
 
¾im™
 *
__¾im™s
),

76 
£Œlim™64
);

78 
	#£Œlim™
 
£Œlim™64


	)

81 #ifdeà
__USE_LARGEFILE64


82 
	$£Œlim™64
 (
__¾im™_»sourû_t
 
__»sourû
,

83 
__cÚ¡
 
¾im™64
 *
__¾im™s
è
__THROW
;

88 
	$g‘ru§ge
 (
__ru§ge_who_t
 
__who
, 
ru§ge
 *
__u§ge
è
__THROW
;

94 
	$g‘´iÜ™y
 (
__´iÜ™y_which_t
 
__which
, 
id_t
 
__who
è
__THROW
;

98 
	$£riÜ™y
 (
__´iÜ™y_which_t
 
__which
, 
id_t
 
__who
, 
__´io
)

99 
__THROW
;

101 
__END_DECLS


	@/usr/include/sys/socket.h

21 #iâdef 
_SYS_SOCKET_H


22 
	#_SYS_SOCKET_H
 1

	)

24 
	~<ã©u»s.h
>

26 
	g__BEGIN_DECLS


28 
	~<sys/uio.h
>

29 
	#__Ãed_size_t


	)

30 
	~<¡ddef.h
>

31 #ifdeà
__USE_GNU


33 
	~<b™s/sig£t.h
>

40 
	~<b™s/sock‘.h
>

42 #ifdeà
__USE_BSD


45 
	sosockaddr


47 
	m§_çmy
;

48 
	m§_d©a
[14];

56 
	mSHUT_RD
 = 0,

57 
	#SHUT_RD
 
SHUT_RD


	)

58 
	mSHUT_WR
,

59 
	#SHUT_WR
 
SHUT_WR


	)

60 
	mSHUT_RDWR


61 
	#SHUT_RDWR
 
SHUT_RDWR


	)

70 #ià
defšed
 
__ılu¥lus
 || !
__GNUC_PREREQ
 (2, 7è|| !defšed 
__USE_GNU


71 
	#__SOCKADDR_ARG
 
sockaddr
 *
__»¡riù


	)

72 
	#__CONST_SOCKADDR_ARG
 
__cÚ¡
 
sockaddr
 *

	)

76 
	#__SOCKADDR_ALLTYPES
 \

77 
	`__SOCKADDR_ONETYPE
 (
sockaddr
) \

78 
	`__SOCKADDR_ONETYPE
 (
sockaddr_©
) \

79 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ax25
) \

80 
	`__SOCKADDR_ONETYPE
 (
sockaddr_dl
) \

81 
	`__SOCKADDR_ONETYPE
 (
sockaddr_eÚ
) \

82 
	`__SOCKADDR_ONETYPE
 (
sockaddr_š
) \

83 
	`__SOCKADDR_ONETYPE
 (
sockaddr_š6
) \

84 
	`__SOCKADDR_ONETYPE
 (
sockaddr_š¬p
) \

85 
	`__SOCKADDR_ONETYPE
 (
sockaddr_x
) \

86 
	`__SOCKADDR_ONETYPE
 (
sockaddr_iso
) \

87 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ns
) \

88 
	`__SOCKADDR_ONETYPE
 (
sockaddr_un
) \

89 
	`__SOCKADDR_ONETYPE
 (
sockaddr_x25
)

	)

91 
	#__SOCKADDR_ONETYPE
(
ty³
èty³ *
__»¡riù
 
__
##ty³##__;

	)

92 uniÚ { 
	m__SOCKADDR_ALLTYPES


93 } 
	t__SOCKADDR_ARG
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

94 #undeà
__SOCKADDR_ONETYPE


95 
	#__SOCKADDR_ONETYPE
(
ty³
è
__cÚ¡
 ty³ *
__»¡riù
 
__
##ty³##__;

	)

96 uniÚ { 
	m__SOCKADDR_ALLTYPES


97 } 
	t__CONST_SOCKADDR_ARG
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

98 #undeà
__SOCKADDR_ONETYPE


105 
	$sock‘
 (
__domaš
, 
__ty³
, 
__´ÙocŞ
è
__THROW
;

111 
	$sock‘·œ
 (
__domaš
, 
__ty³
, 
__´ÙocŞ
,

112 
__fds
[2]è
__THROW
;

115 
	$bšd
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockËn_t
 
__Ën
)

116 
__THROW
;

119 
	$g‘sockÇme
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

120 
sockËn_t
 *
__»¡riù
 
__Ën
è
__THROW
;

129 
	`cÚÃù
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockËn_t
 
__Ën
);

133 
	$g‘³”Çme
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

134 
sockËn_t
 *
__»¡riù
 
__Ën
è
__THROW
;

141 
ssize_t
 
	`£nd
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
, 
__æags
);

148 
ssize_t
 
	`»cv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__æags
);

155 
ssize_t
 
	`£ndto
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

156 
__æags
, 
__CONST_SOCKADDR_ARG
 
__addr
,

157 
sockËn_t
 
__addr_Ën
);

166 
ssize_t
 
	`»cväom
 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

167 
__æags
, 
__SOCKADDR_ARG
 
__addr
,

168 
sockËn_t
 *
__»¡riù
 
__addr_Ën
);

176 
ssize_t
 
	`£ndmsg
 (
__fd
, 
__cÚ¡
 
msghdr
 *
__mes§ge
,

177 
__æags
);

184 
ssize_t
 
	`»cvmsg
 (
__fd
, 
msghdr
 *
__mes§ge
, 
__æags
);

190 
	$g‘sockİt
 (
__fd
, 
__Ëv–
, 
__İŠame
,

191 *
__»¡riù
 
__İtv®
,

192 
sockËn_t
 *
__»¡riù
 
__İ’
è
__THROW
;

197 
	$£tsockİt
 (
__fd
, 
__Ëv–
, 
__İŠame
,

198 
__cÚ¡
 *
__İtv®
, 
sockËn_t
 
__İ’
è
__THROW
;

204 
	$li¡’
 (
__fd
, 
__n
è
__THROW
;

214 
	`acû±
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

215 
sockËn_t
 *
__»¡riù
 
__addr_Ën
);

217 #ifdeà
__USE_GNU


222 
	`acû±4
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

223 
sockËn_t
 *
__»¡riù
 
__addr_Ën
, 
__æags
);

232 
	$shutdown
 (
__fd
, 
__how
è
__THROW
;

235 #ifdeà
__USE_XOPEN2K


237 
	$sock©m¬k
 (
__fd
è
__THROW
;

241 #ifdeà
__USE_MISC


245 
	$isfdty³
 (
__fd
, 
__fdty³
è
__THROW
;

250 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


251 
	~<b™s/sock‘2.h
>

254 
__END_DECLS


	@/usr/include/sys/stat.h

24 #iâdef 
_SYS_STAT_H


25 
	#_SYS_STAT_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	~<b™s/ty³s.h
>

31 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
 || defšed 
__USE_MISC
 \

32 || 
defšed
 
	g__USE_ATFILE


33 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_time_t


	)

36 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ATFILE


37 
	#__Ãed_time¥ec


	)

39 
	~<time.h
>

42 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


45 #iâdeà
__dev_t_defšed


46 
__dev_t
 
	tdev_t
;

47 
	#__dev_t_defšed


	)

50 #iâdeà
__gid_t_defšed


51 
__gid_t
 
	tgid_t
;

52 
	#__gid_t_defšed


	)

55 #iâdeà
__šo_t_defšed


56 #iâdeà
__USE_FILE_OFFSET64


57 
__šo_t
 
	tšo_t
;

59 
__šo64_t
 
	tšo_t
;

61 
	#__šo_t_defšed


	)

64 #iâdeà
__mode_t_defšed


65 
__mode_t
 
	tmode_t
;

66 
	#__mode_t_defšed


	)

69 #iâdeà
__Æšk_t_defšed


70 
__Æšk_t
 
	tÆšk_t
;

71 
	#__Æšk_t_defšed


	)

74 #iâdeà
__off_t_defšed


75 #iâdeà
__USE_FILE_OFFSET64


76 
__off_t
 
	toff_t
;

78 
__off64_t
 
	toff_t
;

80 
	#__off_t_defšed


	)

83 #iâdeà
__uid_t_defšed


84 
__uid_t
 
	tuid_t
;

85 
	#__uid_t_defšed


	)

89 #ifdeà
__USE_UNIX98


90 #iâdeà
__blkút_t_defšed


91 #iâdeà
__USE_FILE_OFFSET64


92 
__blkút_t
 
	tblkút_t
;

94 
__blkút64_t
 
	tblkút_t
;

96 
	#__blkút_t_defšed


	)

99 #iâdeà
__blksize_t_defšed


100 
__blksize_t
 
	tblksize_t
;

101 
	#__blksize_t_defšed


	)

105 
	g__BEGIN_DECLS


107 
	~<b™s/¡©.h
>

109 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


110 
	#S_IFMT
 
__S_IFMT


	)

111 
	#S_IFDIR
 
__S_IFDIR


	)

112 
	#S_IFCHR
 
__S_IFCHR


	)

113 
	#S_IFBLK
 
__S_IFBLK


	)

114 
	#S_IFREG
 
__S_IFREG


	)

115 #ifdeà
__S_IFIFO


116 
	#S_IFIFO
 
__S_IFIFO


	)

118 #ifdeà
__S_IFLNK


119 
	#S_IFLNK
 
__S_IFLNK


	)

121 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_UNIX98
) \

122 && 
defšed
 
	g__S_IFSOCK


123 
	#S_IFSOCK
 
__S_IFSOCK


	)

129 
	#__S_ISTYPE
(
mode
, 
mask
è(((modeè& 
__S_IFMT
è=ğ(mask))

	)

131 
	#S_ISDIR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

132 
	#S_ISCHR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

133 
	#S_ISBLK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

134 
	#S_ISREG
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

135 #ifdeà
__S_IFIFO


136 
	#S_ISFIFO
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

138 #ifdeà
__S_IFLNK


139 
	#S_ISLNK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

142 #ià
defšed
 
__USE_BSD
 && !defšed 
__S_IFLNK


143 
	#S_ISLNK
(
mode
è0

	)

146 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K
) \

147 && 
defšed
 
	g__S_IFSOCK


148 
	#S_ISSOCK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

155 #ifdef 
__USE_POSIX199309


156 
	#S_TYPEISMQ
(
buf
è
	`__S_TYPEISMQ
(buf)

	)

157 
	#S_TYPEISSEM
(
buf
è
	`__S_TYPEISSEM
(buf)

	)

158 
	#S_TYPEISSHM
(
buf
è
	`__S_TYPEISSHM
(buf)

	)

164 
	#S_ISUID
 
__S_ISUID


	)

165 
	#S_ISGID
 
__S_ISGID


	)

167 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


169 
	#S_ISVTX
 
__S_ISVTX


	)

172 
	#S_IRUSR
 
__S_IREAD


	)

173 
	#S_IWUSR
 
__S_IWRITE


	)

174 
	#S_IXUSR
 
__S_IEXEC


	)

176 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

178 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_BSD


179 
	#S_IREAD
 
S_IRUSR


	)

180 
	#S_IWRITE
 
S_IWUSR


	)

181 
	#S_IEXEC
 
S_IXUSR


	)

184 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

185 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

186 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

188 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

190 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

191 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

192 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

194 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

197 #ifdef 
__USE_BSD


199 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
è

	)

200 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

201 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

203 
	#S_BLKSIZE
 512

	)

207 #iâdeà
__USE_FILE_OFFSET64


209 
	$¡©
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

210 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

214 
	$f¡©
 (
__fd
, 
¡©
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

216 #ifdeà
__REDIRECT_NTH


217 
	`__REDIRECT_NTH
 (
¡©
, (
__cÚ¡
 *
__»¡riù
 
__fe
,

218 
¡©
 *
__»¡riù
 
__buf
), 
¡©64
)

219 
	`__nÚnuÎ
 ((1, 2));

220 
	`__REDIRECT_NTH
 (
f¡©
, (
__fd
, 
¡©
 *
__buf
), 
f¡©64
)

221 
	`__nÚnuÎ
 ((2));

223 
	#¡©
 
¡©64


	)

224 
	#f¡©
 
f¡©64


	)

227 #ifdeà
__USE_LARGEFILE64


228 
	$¡©64
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

229 
¡©64
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

230 
	$f¡©64
 (
__fd
, 
¡©64
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

233 #ifdeà
__USE_ATFILE


237 #iâdeà
__USE_FILE_OFFSET64


238 
	$f¡©©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fe
,

239 
¡©
 *
__»¡riù
 
__buf
, 
__æag
)

240 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

242 #ifdeà
__REDIRECT_NTH


243 
	`__REDIRECT_NTH
 (
f¡©©
, (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fe
,

244 
¡©
 *
__»¡riù
 
__buf
,

245 
__æag
),

246 
f¡©©64
è
	`__nÚnuÎ
 ((2, 3));

248 
	#f¡©©
 
f¡©©64


	)

252 #ifdeà
__USE_LARGEFILE64


253 
	$f¡©©64
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fe
,

254 
¡©64
 *
__»¡riù
 
__buf
, 
__æag
)

255 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

259 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


260 #iâdeà
__USE_FILE_OFFSET64


263 
	$l¡©
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

264 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

266 #ifdeà
__REDIRECT_NTH


267 
	`__REDIRECT_NTH
 (
l¡©
,

268 (
__cÚ¡
 *
__»¡riù
 
__fe
,

269 
¡©
 *
__»¡riù
 
__buf
), 
l¡©64
)

270 
	`__nÚnuÎ
 ((1, 2));

272 
	#l¡©
 
l¡©64


	)

275 #ifdeà
__USE_LARGEFILE64


276 
	$l¡©64
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

277 
¡©64
 *
__»¡riù
 
__buf
)

278 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

284 
	$chmod
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
)

285 
__THROW
 
	`__nÚnuÎ
 ((1));

287 #ifdeà
__USE_BSD


291 
	$lchmod
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
)

292 
__THROW
 
	`__nÚnuÎ
 ((1));

296 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


297 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
è
__THROW
;

300 #ifdeà
__USE_ATFILE


303 
	$fchmod©
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
,

304 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

312 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
è
__THROW
;

314 #ifdef 
__USE_GNU


317 
__mode_t
 
	$g‘umask
 (è
__THROW
;

321 
	$mkdœ
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

322 
__THROW
 
	`__nÚnuÎ
 ((1));

324 #ifdeà
__USE_ATFILE


328 
	$mkdœ©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

329 
__THROW
 
	`__nÚnuÎ
 ((2));

335 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


336 
	$mknod
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

337 
__THROW
 
	`__nÚnuÎ
 ((1));

339 #ifdeà
__USE_ATFILE


343 
	$mknod©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
,

344 
__dev_t
 
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2));

350 
	$mkfifo
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

351 
__THROW
 
	`__nÚnuÎ
 ((1));

353 #ifdeà
__USE_ATFILE


357 
	$mkfifßt
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

361 #ifdeà
__USE_ATFILE


364 
	$utim’§t
 (
__fd
, 
__cÚ¡
 *
__·th
,

365 
__cÚ¡
 
time¥ec
 
__times
[2],

366 
__æags
)

367 
__THROW
 
	`__nÚnuÎ
 ((2));

370 #ifdeà
__USE_XOPEN2K8


372 
	$futim’s
 (
__fd
, 
__cÚ¡
 
time¥ec
 
__times
[2]è
__THROW
;

390 #iâdeà
_STAT_VER


391 
	#_STAT_VER
 0

	)

393 #iâdeà
_MKNOD_VER


394 
	#_MKNOD_VER
 0

	)

398 #iâdeà
__USE_FILE_OFFSET64


399 
	$__fx¡©
 (
__v”
, 
__fdes
, 
¡©
 *
__¡©_buf
)

400 
__THROW
 
	`__nÚnuÎ
 ((3));

401 
	$__x¡©
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

402 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

403 
	$__lx¡©
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

404 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

405 
	$__fx¡©©
 (
__v”
, 
__fdes
, 
__cÚ¡
 *
__f’ame
,

406 
¡©
 *
__¡©_buf
, 
__æag
)

407 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

409 #ifdeà
__REDIRECT_NTH


410 
	`__REDIRECT_NTH
 (
__fx¡©
, (
__v”
, 
__fdes
,

411 
¡©
 *
__¡©_buf
), 
__fx¡©64
)

412 
	`__nÚnuÎ
 ((3));

413 
	`__REDIRECT_NTH
 (
__x¡©
, (
__v”
, 
__cÚ¡
 *
__f’ame
,

414 
¡©
 *
__¡©_buf
), 
__x¡©64
)

415 
	`__nÚnuÎ
 ((2, 3));

416 
	`__REDIRECT_NTH
 (
__lx¡©
, (
__v”
, 
__cÚ¡
 *
__f’ame
,

417 
¡©
 *
__¡©_buf
), 
__lx¡©64
)

418 
	`__nÚnuÎ
 ((2, 3));

419 
	`__REDIRECT_NTH
 (
__fx¡©©
, (
__v”
, 
__fdes
,

420 
__cÚ¡
 *
__f’ame
,

421 
¡©
 *
__¡©_buf
, 
__æag
),

422 
__fx¡©©64
è
	`__nÚnuÎ
 ((3, 4));

425 
	#__fx¡©
 
__fx¡©64


	)

426 
	#__x¡©
 
__x¡©64


	)

427 
	#__lx¡©
 
__lx¡©64


	)

431 #ifdeà
__USE_LARGEFILE64


432 
	$__fx¡©64
 (
__v”
, 
__fdes
, 
¡©64
 *
__¡©_buf
)

433 
__THROW
 
	`__nÚnuÎ
 ((3));

434 
	$__x¡©64
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

435 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

436 
	$__lx¡©64
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

437 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

438 
	$__fx¡©©64
 (
__v”
, 
__fdes
, 
__cÚ¡
 *
__f’ame
,

439 
¡©64
 *
__¡©_buf
, 
__æag
)

440 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

442 
	$__xmknod
 (
__v”
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
,

443 
__dev_t
 *
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

445 
	$__xmknod©
 (
__v”
, 
__fd
, 
__cÚ¡
 *
__·th
,

446 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

447 
__THROW
 
	`__nÚnuÎ
 ((3, 5));

449 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES_IN_LIBC


452 
__ex‹º_šlše
 

453 
	`__NTH
 (
	$¡©
 (
__cÚ¡
 *
__·th
, 
¡©
 *
__¡©buf
))

455  
	`__x¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

456 
	}
}

458 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


459 
__ex‹º_šlše
 

460 
__NTH
 (
	$l¡©
 (
__cÚ¡
 *
__·th
, 
¡©
 *
__¡©buf
))

462  
	`__lx¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

463 
	}
}

466 
__ex‹º_šlše
 

467 
__NTH
 (
	$f¡©
 (
__fd
, 
¡©
 *
__¡©buf
))

469  
	`__fx¡©
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

470 
	}
}

472 #ifdeà
__USE_ATFILE


473 
__ex‹º_šlše
 

474 
__NTH
 (
	$f¡©©
 (
__fd
, 
__cÚ¡
 *
__f’ame
, 
¡©
 *
__¡©buf
,

475 
__æag
))

477  
	`__fx¡©©
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

478 
	}
}

481 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD


482 
__ex‹º_šlše
 

483 
__NTH
 (
	$mknod
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

485  
	`__xmknod
 (
_MKNOD_VER
, 
__·th
, 
__mode
, &
__dev
);

486 
	}
}

489 #ifdeà
__USE_ATFILE


490 
__ex‹º_šlše
 

491 
__NTH
 (
	$mknod©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
,

492 
__dev_t
 
__dev
))

494  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__·th
, 
__mode
, &
__dev
);

495 
	}
}

498 #ià
defšed
 
__USE_LARGEFILE64
 \

499 && (! 
defšed
 
	g__USE_FILE_OFFSET64
 \

500 || (
defšed
 
	g__REDIRECT_NTH
 && defšed 
	g__OPTIMIZE__
))

501 
__ex‹º_šlše
 

502 
__NTH
 (
	$¡©64
 (
__cÚ¡
 *
__·th
, 
¡©64
 *
__¡©buf
))

504  
	`__x¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

505 
	}
}

507 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


508 
__ex‹º_šlše
 

509 
__NTH
 (
	$l¡©64
 (
__cÚ¡
 *
__·th
, 
¡©64
 *
__¡©buf
))

511  
	`__lx¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

512 
	}
}

515 
__ex‹º_šlše
 

516 
__NTH
 (
	$f¡©64
 (
__fd
, 
¡©64
 *
__¡©buf
))

518  
	`__fx¡©64
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

519 
	}
}

521 #ifdeà
__USE_ATFILE


522 
__ex‹º_šlše
 

523 
__NTH
 (
	$f¡©©64
 (
__fd
, 
__cÚ¡
 *
__f’ame
, 
¡©64
 *
__¡©buf
,

524 
__æag
))

526  
	`__fx¡©©64
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

527 
	}
}

534 
	g__END_DECLS


	@/usr/include/sys/time.h

20 #iâdeà
_SYS_TIME_H


21 
	#_SYS_TIME_H
 1

	)

23 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

26 
	#__Ãed_time_t


	)

27 
	~<time.h
>

28 
	#__Ãed_timev®


	)

29 
	~<b™s/time.h
>

31 
	~<sys/£Ëù.h
>

33 #iâdeà
__su£cÚds_t_defšed


34 
__su£cÚds_t
 
	tsu£cÚds_t
;

35 
	#__su£cÚds_t_defšed


	)

39 
	g__BEGIN_DECLS


41 #ifdeà
__USE_GNU


43 
	#TIMEVAL_TO_TIMESPEC
(
tv
, 
ts
) { \

44 (
ts
)->
tv_£c
 = (
tv
)->tv_sec; \

45 (
ts
)->
tv_n£c
 = (
tv
)->
tv_u£c
 * 1000; \

46 }

	)

47 
	#TIMESPEC_TO_TIMEVAL
(
tv
, 
ts
) { \

48 (
tv
)->
tv_£c
 = (
ts
)->tv_sec; \

49 (
tv
)->
tv_u£c
 = (
ts
)->
tv_n£c
 / 1000; \

50 }

	)

54 #ifdeà
__USE_BSD


57 
	stimezÚe


59 
	mtz_mšu‹swe¡
;

60 
	mtz_d¡time
;

63 
timezÚe
 *
	t__»¡riù
 
	t__timezÚe_±r_t
;

65 *
	t__»¡riù
 
	t__timezÚe_±r_t
;

73 
	$g‘timeofday
 (
timev®
 *
__»¡riù
 
__tv
,

74 
__timezÚe_±r_t
 
__tz
è
__THROW
 
	`__nÚnuÎ
 ((1));

76 #ifdeà
__USE_BSD


79 
	$£‰imeofday
 (
__cÚ¡
 
timev®
 *
__tv
,

80 
__cÚ¡
 
timezÚe
 *
__tz
)

81 
__THROW
 
	`__nÚnuÎ
 ((1));

87 
	$adjtime
 (
__cÚ¡
 
timev®
 *
__d–
,

88 
timev®
 *
__Şdd–
è
__THROW
;

93 
	e__™im”_which


96 
ITIMER_REAL
 = 0,

97 
	#ITIMER_REAL
 
ITIMER_REAL


	)

99 
ITIMER_VIRTUAL
 = 1,

100 
	#ITIMER_VIRTUAL
 
ITIMER_VIRTUAL


	)

103 
ITIMER_PROF
 = 2

104 
	#ITIMER_PROF
 
ITIMER_PROF


	)

109 
	s™im”v®


112 
timev®
 
™_š‹rv®
;

114 
timev®
 
™_v®ue
;

117 #ià
defšed
 
__USE_GNU
 && !defšed 
__ılu¥lus


120 
__™im”_which
 
	t__™im”_which_t
;

122 
	t__™im”_which_t
;

127 
	$g‘™im”
 (
__™im”_which_t
 
__which
,

128 
™im”v®
 *
__v®ue
è
__THROW
;

133 
	$£t™im”
 (
__™im”_which_t
 
__which
,

134 
__cÚ¡
 
™im”v®
 *
__»¡riù
 
__Ãw
,

135 
™im”v®
 *
__»¡riù
 
__Şd
è
__THROW
;

140 
	$utimes
 (
__cÚ¡
 *
__fe
, __cÚ¡ 
timev®
 
__tvp
[2])

141 
__THROW
 
	`__nÚnuÎ
 ((1));

143 #ifdeà
__USE_BSD


145 
	$lutimes
 (
__cÚ¡
 *
__fe
, __cÚ¡ 
timev®
 
__tvp
[2])

146 
__THROW
 
	`__nÚnuÎ
 ((1));

149 
	$futimes
 (
__fd
, 
__cÚ¡
 
timev®
 
__tvp
[2]è
__THROW
;

152 #ifdeà
__USE_GNU


156 
	$futime§t
 (
__fd
, 
__cÚ¡
 *
__fe
,

157 
__cÚ¡
 
timev®
 
__tvp
[2]è
__THROW
;

161 #ifdeà
__USE_BSD


164 
	#tim”is£t
(
tvp
è(Ñvp)->
tv_£c
 || (tvp)->
tv_u£c
)

	)

165 
	#tim”ş—r
(
tvp
è(Ñvp)->
tv_£c
 = (tvp)->
tv_u£c
 = 0)

	)

166 
	#tim”cmp
(
a
, 
b
, 
CMP
) \

167 (((
a
)->
tv_£c
 =ğ(
b
)->tv_sec) ? \

168 ((
a
)->
tv_u£c
 
	`CMP
 (
b
)->tv_usec) : \

169 ((
a
)->
tv_£c
 
	`CMP
 (
b
)->tv_£c))

	)

170 
	#tim”add
(
a
, 
b
, 
»suÉ
) \

172 (
»suÉ
)->
tv_£c
 = (
a
)->tv_£ø+ (
b
)->tv_sec; \

173 (
»suÉ
)->
tv_u£c
 = (
a
)->tv_u£ø+ (
b
)->tv_usec; \

174 ià((
»suÉ
)->
tv_u£c
 >= 1000000) \

176 ++(
»suÉ
)->
tv_£c
; \

177 (
»suÉ
)->
tv_u£c
 -= 1000000; \

179 
	}
} 0)

	)

180 
	#tim”sub
(
a
, 
b
, 
»suÉ
) \

182 (
»suÉ
)->
tv_£c
 = (
a
)->tv_£ø- (
b
)->tv_sec; \

183 (
»suÉ
)->
tv_u£c
 = (
a
)->tv_u£ø- (
b
)->tv_usec; \

184 ià((
»suÉ
)->
tv_u£c
 < 0) { \

185 --(
»suÉ
)->
tv_£c
; \

186 (
»suÉ
)->
tv_u£c
 += 1000000; \

188 } 0)

	)

191 
	g__END_DECLS


	@/usr/include/sys/types.h

24 #iâdef 
_SYS_TYPES_H


25 
	#_SYS_TYPES_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

33 #ifdef 
__USE_BSD


34 #iâdeà
__u_ch¬_defšed


35 
__u_ch¬
 
	tu_ch¬
;

36 
__u_shÜt
 
	tu_shÜt
;

37 
__u_št
 
	tu_št
;

38 
__u_lÚg
 
	tu_lÚg
;

39 
__quad_t
 
	tquad_t
;

40 
__u_quad_t
 
	tu_quad_t
;

41 
__fsid_t
 
	tfsid_t
;

42 
	#__u_ch¬_defšed


	)

46 
__loff_t
 
	tloff_t
;

48 #iâdeà
__šo_t_defšed


49 #iâdeà
__USE_FILE_OFFSET64


50 
__šo_t
 
	tšo_t
;

52 
__šo64_t
 
	tšo_t
;

54 
	#__šo_t_defšed


	)

56 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


57 
__šo64_t
 
	tšo64_t
;

58 
	#__šo64_t_defšed


	)

61 #iâdeà
__dev_t_defšed


62 
__dev_t
 
	tdev_t
;

63 
	#__dev_t_defšed


	)

66 #iâdeà
__gid_t_defšed


67 
__gid_t
 
	tgid_t
;

68 
	#__gid_t_defšed


	)

71 #iâdeà
__mode_t_defšed


72 
__mode_t
 
	tmode_t
;

73 
	#__mode_t_defšed


	)

76 #iâdeà
__Æšk_t_defšed


77 
__Æšk_t
 
	tÆšk_t
;

78 
	#__Æšk_t_defšed


	)

81 #iâdeà
__uid_t_defšed


82 
__uid_t
 
	tuid_t
;

83 
	#__uid_t_defšed


	)

86 #iâdeà
__off_t_defšed


87 #iâdeà
__USE_FILE_OFFSET64


88 
__off_t
 
	toff_t
;

90 
__off64_t
 
	toff_t
;

92 
	#__off_t_defšed


	)

94 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


95 
__off64_t
 
	toff64_t
;

96 
	#__off64_t_defšed


	)

99 #iâdeà
__pid_t_defšed


100 
__pid_t
 
	tpid_t
;

101 
	#__pid_t_defšed


	)

104 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__id_t_defšed


105 
__id_t
 
	tid_t
;

106 
	#__id_t_defšed


	)

109 #iâdeà
__ssize_t_defšed


110 
__ssize_t
 
	tssize_t
;

111 
	#__ssize_t_defšed


	)

114 #ifdef 
__USE_BSD


115 #iâdeà
__daddr_t_defšed


116 
__daddr_t
 
	tdaddr_t
;

117 
__ÿddr_t
 
	tÿddr_t
;

118 
	#__daddr_t_defšed


	)

122 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


123 
__key_t
 
	tkey_t
;

124 
	#__key_t_defšed


	)

127 #ifdeà
__USE_XOPEN


128 
	#__Ãed_şock_t


	)

130 
	#__Ãed_time_t


	)

131 
	#__Ãed_tim”_t


	)

132 
	#__Ãed_şockid_t


	)

133 
	~<time.h
>

135 #ifdeà
__USE_XOPEN


136 #iâdeà
__u£cÚds_t_defšed


137 
__u£cÚds_t
 
	tu£cÚds_t
;

138 
	#__u£cÚds_t_defšed


	)

140 #iâdeà
__su£cÚds_t_defšed


141 
__su£cÚds_t
 
	tsu£cÚds_t
;

142 
	#__su£cÚds_t_defšed


	)

146 
	#__Ãed_size_t


	)

147 
	~<¡ddef.h
>

149 #ifdeà
__USE_MISC


151 
	tulÚg
;

152 
	tushÜt
;

153 
	tušt
;

158 #ià!
__GNUC_PREREQ
 (2, 7)

161 #iâdeà
__št8_t_defšed


162 
	#__št8_t_defšed


	)

163 
	tšt8_t
;

164 
	tšt16_t
;

165 
	tšt32_t
;

166 #ià
__WORDSIZE
 == 64

167 
	tšt64_t
;

168 #–ià
__GLIBC_HAVE_LONG_LONG


169 
__ex‹nsiÚ__
 
	tšt64_t
;

174 
	tu_št8_t
;

175 
	tu_št16_t
;

176 
	tu_št32_t
;

177 #ià
__WORDSIZE
 == 64

178 
	tu_št64_t
;

179 #–ià
__GLIBC_HAVE_LONG_LONG


180 
__ex‹nsiÚ__
 
	tu_št64_t
;

183 
	t»gi¡”_t
;

188 
	#__štN_t
(
N
, 
MODE
) \

189 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

190 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

191 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

193 #iâdeà
	t__št8_t_defšed


194 
	t__št8_t_defšed


	)

195 
	t__štN_t
 (8, 
	t__QI__
);

196 
__štN_t
 (16, 
__HI__
);

197 
__štN_t
 (32, 
__SI__
);

198 
__štN_t
 (64, 
__DI__
);

201 
__u_štN_t
 (8, 
__QI__
);

202 
__u_štN_t
 (16, 
__HI__
);

203 
__u_štN_t
 (32, 
__SI__
);

204 
__u_štN_t
 (64, 
__DI__
);

206 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

212 
	#__BIT_TYPES_DEFINED__
 1

	)

215 #ifdef 
__USE_BSD


217 
	~<’dŸn.h
>

220 
	~<sys/£Ëù.h
>

223 
	~<sys/sysmaüos.h
>

227 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/sys/un.h

19 #iâdef 
_SYS_UN_H


20 
	#_SYS_UN_H
 1

	)

22 
	~<sys/cdefs.h
>

25 
	~<b™s/sockaddr.h
>

27 
__BEGIN_DECLS


30 
	ssockaddr_un


32 
__SOCKADDR_COMMON
 (
sun_
);

33 
	msun_·th
[108];

37 #ifdeà
__USE_MISC


38 
	~<¡ršg.h
>

41 
	#SUN_LEN
(
±r
è((
size_t
è(((
sockaddr_un
 *è0)->
sun_·th
) \

42 + 
	`¡¾’
 ((
±r
)->
sun_·th
))

	)

45 
	g__END_DECLS


	@/usr/include/sys/utsname.h

23 #iâdef 
_SYS_UTSNAME_H


24 
	#_SYS_UTSNAME_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/ut¢ame.h
>

32 #iâdeà
_UTSNAME_SYSNAME_LENGTH


33 
	#_UTSNAME_SYSNAME_LENGTH
 
_UTSNAME_LENGTH


	)

35 #iâdeà
_UTSNAME_NODENAME_LENGTH


36 
	#_UTSNAME_NODENAME_LENGTH
 
_UTSNAME_LENGTH


	)

38 #iâdeà
_UTSNAME_RELEASE_LENGTH


39 
	#_UTSNAME_RELEASE_LENGTH
 
_UTSNAME_LENGTH


	)

41 #iâdeà
_UTSNAME_VERSION_LENGTH


42 
	#_UTSNAME_VERSION_LENGTH
 
_UTSNAME_LENGTH


	)

44 #iâdeà
_UTSNAME_MACHINE_LENGTH


45 
	#_UTSNAME_MACHINE_LENGTH
 
_UTSNAME_LENGTH


	)

49 
	sut¢ame


52 
	msy¢ame
[
_UTSNAME_SYSNAME_LENGTH
];

55 
	mnod’ame
[
_UTSNAME_NODENAME_LENGTH
];

58 
	m»Ëa£
[
_UTSNAME_RELEASE_LENGTH
];

60 
	mv”siÚ
[
_UTSNAME_VERSION_LENGTH
];

63 
	mmachše
[
_UTSNAME_MACHINE_LENGTH
];

65 #ià
_UTSNAME_DOMAIN_LENGTH
 - 0

67 #ifdeà
__USE_GNU


68 
	mdomašÇme
[
_UTSNAME_DOMAIN_LENGTH
];

70 
	m__domašÇme
[
_UTSNAME_DOMAIN_LENGTH
];

75 #ifdeà
__USE_SVID


77 
	#SYS_NMLN
 
_UTSNAME_LENGTH


	)

82 
	$uÇme
 (
ut¢ame
 *
__Çme
è
__THROW
;

85 
__END_DECLS


	@/usr/include/sys/wait.h

24 #iâdef 
_SYS_WAIT_H


25 
	#_SYS_WAIT_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	~<sigÇl.h
>

32 
	~<sys/»sourû.h
>

35 #ià!
defšed
 
_STDLIB_H
 || !defšed 
__USE_XOPEN


38 
	~<b™s/wa™æags.h
>

40 #ifdef 
__USE_BSD


45 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


46 
	#__WAIT_INT
(
¡©us
) \

47 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

48 { .
__š
 = (
¡©us
è}).
__i
))

	)

50 
	#__WAIT_INT
(
¡©us
è(*(
__cÚ¡
 *è&(¡©us))

	)

58 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


59 
	#__WAIT_STATUS
 *

	)

60 
	#__WAIT_STATUS_DEFN
 *

	)

65 
wa™
 *
	m__u±r
;

66 *
	m__Œ
;

67 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

68 
	#__WAIT_STATUS_DEFN
 *

	)

73 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

74 
	#__WAIT_STATUS
 *

	)

75 
	#__WAIT_STATUS_DEFN
 *

	)

80 
	~<b™s/wa™¡©us.h
>

82 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

83 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

84 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

88 #ifdeà
__WIFCONTINUED


89 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

93 #ifdef 
__USE_BSD


94 
	#WCOREFLAG
 
__WCOREFLAG


	)

95 
	#WCOREDUMP
(
¡©us
è
	`__WCOREDUMP
 (
	`__WAIT_INT
 (¡©us))

	)

96 
	#W_EXITCODE
(
»t
, 
sig
è
	`__W_EXITCODE
 (»t, sig)

	)

97 
	#W_STOPCODE
(
sig
è
	`__W_STOPCODE
 (sig)

	)

101 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


104 
	mP_ALL
,

105 
	mP_PID
,

106 
	mP_PGID


107 } 
	tidty³_t
;

116 
__pid_t
 
wa™
 (
__WAIT_STATUS
 
__¡©_loc
);

118 #ifdef 
__USE_BSD


120 
	#WAIT_ANY
 (-1è

	)

121 
	#WAIT_MYPGRP
 0

	)

139 
__pid_t
 
wa™pid
 (__pid_ˆ
__pid
, *
__¡©_loc
, 
__İtiÚs
);

141 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


142 
	#__Ãed_sigšfo_t


	)

143 
	~<b™s/sigšfo.h
>

155 
wa™id
 (
idty³_t
 
__idty³
, 
__id_t
 
__id
, 
sigšfo_t
 *
__šfİ
,

156 
__İtiÚs
);

159 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


162 
	gru§ge
;

169 
__pid_t
 
	$wa™3
 (
__WAIT_STATUS
 
__¡©_loc
, 
__İtiÚs
,

170 
ru§ge
 * 
__u§ge
è
__THROW
;

173 #ifdeà
__USE_BSD


175 
__pid_t
 
	$wa™4
 (
__pid_t
 
__pid
, 
__WAIT_STATUS
 
__¡©_loc
, 
__İtiÚs
,

176 
ru§ge
 *
__u§ge
è
__THROW
;

180 
__END_DECLS


	@/usr/include/time.h

23 #iâdef 
_TIME_H


25 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

26 ! 
defšed
 
	g__Ãed_time¥ec
)

27 
	#_TIME_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 #ifdef 
_TIME_H


36 
	#__Ãed_size_t


	)

37 
	#__Ãed_NULL


	)

38 
	~<¡ddef.h
>

42 
	~<b™s/time.h
>

45 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


46 #iâdeà
CLK_TCK


47 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

53 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

54 
	#__şock_t_defšed
 1

	)

56 
	~<b™s/ty³s.h
>

58 
__BEGIN_NAMESPACE_STD


60 
__şock_t
 
	tşock_t
;

61 
	g__END_NAMESPACE_STD


62 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


63 
	$__USING_NAMESPACE_STD
(
şock_t
)

67 #undeà
__Ãed_şock_t


69 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

70 
	#__time_t_defšed
 1

	)

72 
	~<b™s/ty³s.h
>

74 
__BEGIN_NAMESPACE_STD


76 
__time_t
 
	ttime_t
;

77 
__END_NAMESPACE_STD


78 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


79 
	$__USING_NAMESPACE_STD
(
time_t
)

83 #undeà
__Ãed_time_t


85 #ià!
defšed
 
__şockid_t_defšed
 && \

86 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

87 
	#__şockid_t_defšed
 1

	)

89 
	~<b™s/ty³s.h
>

92 
__şockid_t
 
	tşockid_t
;

95 #undeà
__şockid_time_t


97 #ià!
defšed
 
__tim”_t_defšed
 && \

98 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

99 
	#__tim”_t_defšed
 1

	)

101 
	~<b™s/ty³s.h
>

104 
__tim”_t
 
	ttim”_t
;

107 #undeà
__Ãed_tim”_t


110 #ià!
defšed
 
__time¥ec_defšed
 && \

111 ((
defšed
 
_TIME_H
 && \

112 (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
)) || \

113 
defšed
 
__Ãed_time¥ec
)

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 
__cÚ¡
 *
tm_zÚe
;

149 
__tm_gmtoff
;

150 
__cÚ¡
 *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 
__BEGIN_NAMESPACE_STD


183 
şock_t
 
	$şock
 (è
__THROW
;

186 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

189 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

190 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

193 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

199 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

200 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

201 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

202 
__END_NAMESPACE_STD


204 #ifdeà
__USE_XOPEN


207 *
	$¡½time
 (
__cÚ¡
 *
__»¡riù
 
__s
,

208 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
)

209 
__THROW
;

212 #ifdeà
__USE_XOPEN2K8


215 
	~<xloÿË.h
>

217 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

218 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

219 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

220 
__loÿË_t
 
__loc
è
__THROW
;

223 #ifdeà
__USE_GNU


224 *
	$¡½time_l
 (
__cÚ¡
 *
__»¡riù
 
__s
,

225 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

230 
__BEGIN_NAMESPACE_STD


233 
tm
 *
	$gmtime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

237 
tm
 *
	$loÿÉime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

238 
__END_NAMESPACE_STD


240 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


243 
tm
 *
	$gmtime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

244 
tm
 *
__»¡riù
 
__
è
__THROW
;

248 
tm
 *
	$loÿÉime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

249 
tm
 *
__»¡riù
 
__
è
__THROW
;

252 
__BEGIN_NAMESPACE_STD


255 *
	$asùime
 (
__cÚ¡
 
tm
 *
__
è
__THROW
;

258 *
	$ùime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

259 
__END_NAMESPACE_STD


261 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


266 *
	$asùime_r
 (
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

267 *
__»¡riù
 
__buf
è
__THROW
;

270 *
	$ùime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

271 *
__»¡riù
 
__buf
è
__THROW
;

276 *
__tzÇme
[2];

277 
__daylight
;

278 
__timezÚe
;

281 #ifdef 
__USE_POSIX


283 *
tzÇme
[2];

287 
	$tz£t
 (è
__THROW
;

290 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


291 
daylight
;

292 
timezÚe
;

295 #ifdeà
__USE_SVID


298 
	$¡ime
 (
__cÚ¡
 
time_t
 *
__wh’
è
__THROW
;

304 
	#__i¦—p
(
y—r
) \

305 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

308 #ifdeà
__USE_MISC


313 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

316 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

319 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

323 #ifdeà
__USE_POSIX199309


328 
	`Çno¦“p
 (
__cÚ¡
 
time¥ec
 *
__»que¡ed_time
,

329 
time¥ec
 *
__»maššg
);

333 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

336 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

339 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, 
__cÚ¡
 
time¥ec
 *
__
)

340 
__THROW
;

342 #ifdeà
__USE_XOPEN2K


347 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

348 
__cÚ¡
 
time¥ec
 *
__»q
,

349 
time¥ec
 *
__»m
);

352 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

357 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

358 
sigev’t
 *
__»¡riù
 
__evp
,

359 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

362 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

365 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

366 
__cÚ¡
 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

367 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

370 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

371 
__THROW
;

374 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

378 #ifdeà
__USE_XOPEN_EXTENDED


390 
g‘d©e_”r
;

399 
tm
 *
	`g‘d©e
 (
__cÚ¡
 *
__¡ršg
);

402 #ifdeà
__USE_GNU


413 
	`g‘d©e_r
 (
__cÚ¡
 *
__»¡riù
 
__¡ršg
,

414 
tm
 *
__»¡riù
 
__»sbuå
);

417 
__END_DECLS


	@/usr/include/unistd.h

23 #iâdef 
_UNISTD_H


24 
	#_UNISTD_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


33 #ifdeà
__USE_XOPEN2K8


35 
	#_POSIX_VERSION
 200809L

	)

36 #–ià
defšed
 
__USE_XOPEN2K


38 
	#_POSIX_VERSION
 200112L

	)

39 #–ià
defšed
 
__USE_POSIX199506


41 
	#_POSIX_VERSION
 199506L

	)

42 #–ià
defšed
 
__USE_POSIX199309


44 
	#_POSIX_VERSION
 199309L

	)

47 
	#_POSIX_VERSION
 199009L

	)

53 #ifdeà
__USE_XOPEN2K8


54 
	#__POSIX2_THIS_VERSION
 200809L

	)

56 #–ià
defšed
 
__USE_XOPEN2K


58 
	#__POSIX2_THIS_VERSION
 200112L

	)

59 #–ià
defšed
 
__USE_POSIX199506


61 
	#__POSIX2_THIS_VERSION
 199506L

	)

64 
	#__POSIX2_THIS_VERSION
 199209L

	)

68 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

72 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

76 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

80 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

84 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

87 #ifdeà
__USE_XOPEN2K8


88 
	#_XOPEN_VERSION
 700

	)

89 #–ià
defšed
 
__USE_XOPEN2K


90 
	#_XOPEN_VERSION
 600

	)

91 #–ià
defšed
 
__USE_UNIX98


92 
	#_XOPEN_VERSION
 500

	)

94 
	#_XOPEN_VERSION
 4

	)

98 
	#_XOPEN_XCU_VERSION
 4

	)

101 
	#_XOPEN_XPG2
 1

	)

102 
	#_XOPEN_XPG3
 1

	)

103 
	#_XOPEN_XPG4
 1

	)

106 
	#_XOPEN_UNIX
 1

	)

109 
	#_XOPEN_CRYPT
 1

	)

113 
	#_XOPEN_ENH_I18N
 1

	)

116 
	#_XOPEN_LEGACY
 1

	)

203 
	~<b™s/posix_İt.h
>

206 #ifdeà
__USE_UNIX98


207 
	~<b™s/’vœÚm’ts.h
>

211 
	#STDIN_FILENO
 0

	)

212 
	#STDOUT_FILENO
 1

	)

213 
	#STDERR_FILENO
 2

	)

218 
	~<b™s/ty³s.h
>

220 #iâdef 
__ssize_t_defšed


221 
__ssize_t
 
	tssize_t
;

222 
	#__ssize_t_defšed


	)

225 
	#__Ãed_size_t


	)

226 
	#__Ãed_NULL


	)

227 
	~<¡ddef.h
>

229 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


232 #iâdeà
__gid_t_defšed


233 
__gid_t
 
	tgid_t
;

234 
	#__gid_t_defšed


	)

237 #iâdeà
__uid_t_defšed


238 
__uid_t
 
	tuid_t
;

239 
	#__uid_t_defšed


	)

242 #iâdeà
__off_t_defšed


243 #iâdeà
__USE_FILE_OFFSET64


244 
__off_t
 
	toff_t
;

246 
__off64_t
 
	toff_t
;

248 
	#__off_t_defšed


	)

250 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


251 
__off64_t
 
	toff64_t
;

252 
	#__off64_t_defšed


	)

255 #iâdeà
__u£cÚds_t_defšed


256 
__u£cÚds_t
 
	tu£cÚds_t
;

257 
	#__u£cÚds_t_defšed


	)

260 #iâdeà
__pid_t_defšed


261 
__pid_t
 
	tpid_t
;

262 
	#__pid_t_defšed


	)

266 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


267 #iâdeà
__šŒ_t_defšed


268 
__šŒ_t
 
	tšŒ_t
;

269 
	#__šŒ_t_defšed


	)

273 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


274 #iâdeà
__sockËn_t_defšed


275 
__sockËn_t
 
	tsockËn_t
;

276 
	#__sockËn_t_defšed


	)

282 
	#R_OK
 4

	)

283 
	#W_OK
 2

	)

284 
	#X_OK
 1

	)

285 
	#F_OK
 0

	)

288 
	$acûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

290 #ifdeà
__USE_GNU


293 
	$euidacûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

297 
	$—cûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
)

298 
__THROW
 
	`__nÚnuÎ
 ((1));

301 #ifdeà
__USE_ATFILE


305 
	$çcûs§t
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__ty³
, 
__æag
)

306 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

311 #iâdef 
_STDIO_H


312 
	#SEEK_SET
 0

	)

313 
	#SEEK_CUR
 1

	)

314 
	#SEEK_END
 2

	)

317 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


319 
	#L_SET
 
SEEK_SET


	)

320 
	#L_INCR
 
SEEK_CUR


	)

321 
	#L_XTND
 
SEEK_END


	)

330 #iâdeà
__USE_FILE_OFFSET64


331 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

333 #ifdeà
__REDIRECT_NTH


334 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

335 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

336 
l£ek64
);

338 
	#l£ek
 
l£ek64


	)

341 #ifdeà
__USE_LARGEFILE64


342 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

343 
__THROW
;

350 
	`şo£
 (
__fd
);

357 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

363 
ssize_t
 
	$wr™e
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
è
__wur
;

365 #ifdeà
__USE_UNIX98


366 #iâdeà
__USE_FILE_OFFSET64


373 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

374 
__off_t
 
__off£t
è
__wur
;

381 
ssize_t
 
	$pwr™e
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

382 
__off_t
 
__off£t
è
__wur
;

384 #ifdeà
__REDIRECT


385 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

386 
__off64_t
 
__off£t
),

387 
´—d64
è
__wur
;

388 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, 
__cÚ¡
 *
__buf
,

389 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

390 
pwr™e64
è
__wur
;

392 
	#´—d
 
´—d64


	)

393 
	#pwr™e
 
pwr™e64


	)

397 #ifdeà
__USE_LARGEFILE64


401 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

402 
__off64_t
 
__off£t
è
__wur
;

405 
ssize_t
 
	$pwr™e64
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

406 
__off64_t
 
__off£t
è
__wur
;

414 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

416 #ifdeà
__USE_GNU


419 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

429 
	$®¬m
 (
__£cÚds
è
__THROW
;

441 
	`¦“p
 (
__£cÚds
);

443 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


448 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

449 
__THROW
;

456 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

465 
	`·u£
 ();

469 
	$chown
 (
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

470 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

472 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


474 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

479 
	$lchown
 (
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

480 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

484 #ifdeà
__USE_ATFILE


487 
	$fchowÇt
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
,

488 
__gid_t
 
__group
, 
__æag
)

489 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

493 
	$chdœ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

495 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


497 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

507 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

509 #ifdef 
__USE_GNU


513 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

516 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


520 *
	$g‘wd
 (*
__buf
)

521 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

526 
	$dup
 (
__fd
è
__THROW
 
__wur
;

529 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

531 #ifdeà
__USE_GNU


534 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

538 **
__’vœÚ
;

539 #ifdeà
__USE_GNU


540 **
’vœÚ
;

546 
	$execve
 (
__cÚ¡
 *
__·th
, *__cÚ¡ 
__¬gv
[],

547 *
__cÚ¡
 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1));

549 #ifdeà
__USE_XOPEN2K8


552 
	$ãxecve
 (
__fd
, *
__cÚ¡
 
__¬gv
[], *__cÚ¡ 
__’vp
[])

553 
__THROW
;

558 
	$execv
 (
__cÚ¡
 *
__·th
, *__cÚ¡ 
__¬gv
[])

559 
__THROW
 
	`__nÚnuÎ
 ((1));

563 
	$exeşe
 (
__cÚ¡
 *
__·th
, __cÚ¡ *
__¬g
, ...)

564 
__THROW
 
	`__nÚnuÎ
 ((1));

568 
	$exeş
 (
__cÚ¡
 *
__·th
, __cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1));

573 
	$execvp
 (
__cÚ¡
 *
__fe
, *__cÚ¡ 
__¬gv
[])

574 
__THROW
 
	`__nÚnuÎ
 ((1));

579 
	$exeşp
 (
__cÚ¡
 *
__fe
, __cÚ¡ *
__¬g
, ...)

580 
__THROW
 
	`__nÚnuÎ
 ((1));

582 #ifdeà
__USE_GNU


585 
	$execv³
 (
__cÚ¡
 *
__fe
, *__cÚ¡ 
__¬gv
[],

586 *
__cÚ¡
 
__’vp
[])

587 
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


593 
	$niû
 (
__šc
è
__THROW
 
__wur
;

598 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

604 
	~<b™s/cÚâame.h
>

607 
	$·thcÚf
 (
__cÚ¡
 *
__·th
, 
__Çme
)

608 
__THROW
 
	`__nÚnuÎ
 ((1));

611 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

614 
	$syscÚf
 (
__Çme
è
__THROW
;

616 #ifdef 
__USE_POSIX2


618 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

623 
__pid_t
 
	$g‘pid
 (è
__THROW
;

626 
__pid_t
 
	$g‘µid
 (è
__THROW
;

630 #iâdeà
__FAVOR_BSD


631 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

633 #ifdeà
__REDIRECT_NTH


634 
__pid_t
 
	`__REDIRECT_NTH
 (
g‘pg½
, (__pid_ˆ
__pid
), 
__g‘pgid
);

636 
	#g‘pg½
 
__g‘pgid


	)

641 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

642 #ifdeà
__USE_XOPEN_EXTENDED


643 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

650 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

652 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


663 #iâdeà
__FAVOR_BSD


667 
	$£g½
 (è
__THROW
;

672 #ifdeà
__REDIRECT_NTH


673 
	`__REDIRECT_NTH
 (
£g½
, (
__pid_t
 
__pid
, __pid_ˆ
__pg½
), 
£gid
);

675 
	#£g½
 
£gid


	)

684 
__pid_t
 
	$£tsid
 (è
__THROW
;

686 #ifdeà
__USE_XOPEN_EXTENDED


688 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

692 
__uid_t
 
	$g‘uid
 (è
__THROW
;

695 
__uid_t
 
	$g‘euid
 (è
__THROW
;

698 
__gid_t
 
	$g‘gid
 (è
__THROW
;

701 
__gid_t
 
	$g‘egid
 (è
__THROW
;

706 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

708 #ifdef 
__USE_GNU


710 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

717 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
;

734 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
;

736 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


739 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
;

742 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


744 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
;

747 #ifdeà
__USE_GNU


750 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

751 
__THROW
;

755 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

756 
__THROW
;

760 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

761 
__THROW
;

765 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

766 
__THROW
;

773 
__pid_t
 
	$fÜk
 (è
__THROW
;

775 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


780 
__pid_t
 
	$vfÜk
 (è
__THROW
;

786 *
	$‰yÇme
 (
__fd
è
__THROW
;

790 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

791 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

795 
	$i§‰y
 (
__fd
è
__THROW
;

797 #ià
defšed
 
__USE_BSD
 \

798 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

801 
	$‰y¦Ù
 (è
__THROW
;

806 
	$lšk
 (
__cÚ¡
 *
__äom
, __cÚ¡ *
__to
)

807 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 #ifdeà
__USE_ATFILE


812 
	$lšk©
 (
__äomfd
, 
__cÚ¡
 *
__äom
, 
__tofd
,

813 
__cÚ¡
 *
__to
, 
__æags
)

814 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

817 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


819 
	$symlšk
 (
__cÚ¡
 *
__äom
, __cÚ¡ *
__to
)

820 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

825 
ssize_t
 
	$»adlšk
 (
__cÚ¡
 *
__»¡riù
 
__·th
,

826 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

827 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

830 #ifdeà
__USE_ATFILE


832 
	$symlšk©
 (
__cÚ¡
 *
__äom
, 
__tofd
,

833 
__cÚ¡
 *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

836 
ssize_t
 
	$»adlšk©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

837 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

838 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

842 
	$uÆšk
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

844 #ifdeà
__USE_ATFILE


846 
	$uÆšk©
 (
__fd
, 
__cÚ¡
 *
__Çme
, 
__æag
)

847 
__THROW
 
	`__nÚnuÎ
 ((2));

851 
	$rmdœ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

855 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

858 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

865 *
	`g‘logš
 ();

866 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


873 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

876 #ifdef 
__USE_BSD


878 
	$£ogš
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

882 #ifdef 
__USE_POSIX2


886 
	#__Ãed_g‘İt


	)

887 
	~<g‘İt.h
>

891 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


895 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

899 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

902 
	$£tho¡Çme
 (
__cÚ¡
 *
__Çme
, 
size_t
 
__Ën
)

903 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

907 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

913 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

914 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

915 
	$£tdomašÇme
 (
__cÚ¡
 *
__Çme
, 
size_t
 
__Ën
)

916 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

922 
	$vhªgup
 (è
__THROW
;

925 
	$»voke
 (
__cÚ¡
 *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

933 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

934 
size_t
 
__off£t
, 
__sÿË
)

935 
__THROW
 
	`__nÚnuÎ
 ((1));

941 
	$acù
 (
__cÚ¡
 *
__Çme
è
__THROW
;

945 *
	$g‘u£rsh–l
 (è
__THROW
;

946 
	$’du£rsh–l
 (è
__THROW
;

947 
	$£tu£rsh–l
 (è
__THROW
;

953 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

957 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

960 
	$chroÙ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

964 *
	$g‘·ss
 (
__cÚ¡
 *
__´om±
è
	`__nÚnuÎ
 ((1));

968 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


973 
	`fsync
 (
__fd
);

977 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


980 
	`g‘ho¡id
 ();

983 
	$sync
 (è
__THROW
;

988 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

993 
	$g‘dbËsize
 (è
__THROW
;

997 #iâdeà
__USE_FILE_OFFSET64


998 
	$Œunÿ‹
 (
__cÚ¡
 *
__fe
, 
__off_t
 
__Ëngth
)

999 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1001 #ifdeà
__REDIRECT_NTH


1002 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1003 (
__cÚ¡
 *
__fe
, 
__off64_t
 
__Ëngth
),

1004 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1006 
	#Œunÿ‹
 
Œunÿ‹64


	)

1009 #ifdeà
__USE_LARGEFILE64


1010 
	$Œunÿ‹64
 (
__cÚ¡
 *
__fe
, 
__off64_t
 
__Ëngth
)

1011 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1016 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1019 #iâdeà
__USE_FILE_OFFSET64


1020 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1022 #ifdeà
__REDIRECT_NTH


1023 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1024 
árunÿ‹64
è
__wur
;

1026 
	#árunÿ‹
 
árunÿ‹64


	)

1029 #ifdeà
__USE_LARGEFILE64


1030 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1036 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


1040 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1046 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1050 #ifdeà
__USE_MISC


1061 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1066 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #iâdeà
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1086 #ifdeà
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1088 
lockf64
è
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifdeà
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1099 #ifdeà
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1105 (
__ex‹nsiÚ__
 \

1106 ({ 
__»suÉ
; \

1107 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1108 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1109 
__»suÉ
; 
	}
}))

	)

1112 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1115 
fd©async
 (
__fdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$üy±
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__§É
)

1124 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1128 
	$’üy±
 (*
__block
, 
__edæag
è
__THROW
 
	`__nÚnuÎ
 ((1));

1135 
	$swab
 (
__cÚ¡
 *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1136 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1142 #ifdeà
__USE_XOPEN


1144 *
	$ù”mid
 (*
__s
è
__THROW
;

1149 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


1150 
	~<b™s/uni¡d.h
>

1153 
__END_DECLS


	@/usr/include/zlib.h

31 #iâdeà
ZLIB_H


32 
	#ZLIB_H


	)

34 
	~"zcÚf.h
"

36 #ifdeà
__ılu¥lus


40 
	#ZLIB_VERSION
 "1.2.3.3"

	)

41 
	#ZLIB_VERNUM
 0x1233

	)

42 
	#ZLIB_VER_MAJOR
 1

	)

43 
	#ZLIB_VER_MINOR
 2

	)

44 
	#ZLIB_VER_REVISION
 3

	)

80 
voidpf
 (*
	t®loc_func
è
	tOF
((
	tvoidpf
 
	tİaque
, 
	tuIÁ
 
	t™ems
, uIÁ 
	tsize
));

81 (*
ä“_func
è
	tOF
((
	tvoidpf
 
	tİaque
, voidpà
	tadd»ss
));

83 
š‹º®_¡©e
;

85 
	sz_¡»am_s
 {

86 
By‹f
 *
Ãxt_š
;

87 
uIÁ
 
ava_š
;

88 
uLÚg
 
tÙ®_š
;

90 
By‹f
 *
Ãxt_out
;

91 
uIÁ
 
ava_out
;

92 
uLÚg
 
tÙ®_out
;

94 *
msg
;

95 
š‹º®_¡©e
 
FAR
 *
¡©e
;

97 
®loc_func
 
z®loc
;

98 
ä“_func
 
zä“
;

99 
voidpf
 
İaque
;

101 
d©a_ty³
;

102 
uLÚg
 
adËr
;

103 
uLÚg
 
»£rved
;

104 } 
	tz_¡»am
;

106 
z_¡»am
 
	tFAR
 *
	tz_¡»amp
;

112 
	sgz_h—d”_s
 {

113 
‹xt
;

114 
uLÚg
 
time
;

115 
xæags
;

116 
os
;

117 
By‹f
 *
exŒa
;

118 
uIÁ
 
exŒa_Ën
;

119 
uIÁ
 
exŒa_max
;

120 
By‹f
 *
Çme
;

121 
uIÁ
 
Çme_max
;

122 
By‹f
 *
comm’t
;

123 
uIÁ
 
comm_max
;

124 
hüc
;

125 
dÚe
;

127 } 
	tgz_h—d”
;

129 
gz_h—d”
 
	tFAR
 *
	tgz_h—d”p
;

165 
	#Z_NO_FLUSH
 0

	)

166 
	#Z_PARTIAL_FLUSH
 1

	)

167 
	#Z_SYNC_FLUSH
 2

	)

168 
	#Z_FULL_FLUSH
 3

	)

169 
	#Z_FINISH
 4

	)

170 
	#Z_BLOCK
 5

	)

173 
	#Z_OK
 0

	)

174 
	#Z_STREAM_END
 1

	)

175 
	#Z_NEED_DICT
 2

	)

176 
	#Z_ERRNO
 (-1)

	)

177 
	#Z_STREAM_ERROR
 (-2)

	)

178 
	#Z_DATA_ERROR
 (-3)

	)

179 
	#Z_MEM_ERROR
 (-4)

	)

180 
	#Z_BUF_ERROR
 (-5)

	)

181 
	#Z_VERSION_ERROR
 (-6)

	)

186 
	#Z_NO_COMPRESSION
 0

	)

187 
	#Z_BEST_SPEED
 1

	)

188 
	#Z_BEST_COMPRESSION
 9

	)

189 
	#Z_DEFAULT_COMPRESSION
 (-1)

	)

192 
	#Z_FILTERED
 1

	)

193 
	#Z_HUFFMAN_ONLY
 2

	)

194 
	#Z_RLE
 3

	)

195 
	#Z_FIXED
 4

	)

196 
	#Z_DEFAULT_STRATEGY
 0

	)

199 
	#Z_BINARY
 0

	)

200 
	#Z_TEXT
 1

	)

201 
	#Z_ASCII
 
Z_TEXT


	)

202 
	#Z_UNKNOWN
 2

	)

205 
	#Z_DEFLATED
 8

	)

208 
	#Z_NULL
 0

	)

210 
	#zlib_v”siÚ
 
	`zlibV”siÚ
()

	)

215 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zlibV”siÚ
 
OF
(());

245 
ZEXTERN
 
ZEXPORT
 
deæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

331 
ZEXTERN
 
ZEXPORT
 
deæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

370 
ZEXTERN
 
ZEXPORT
 
šæ©e
 
OF
((
z_¡»amp
 
¡rm
, 
æush
));

469 
ZEXTERN
 
ZEXPORT
 
šæ©eEnd
 
OF
((
z_¡»amp
 
¡rm
));

545 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

546 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

547 
uIÁ
 
diùL’gth
));

584 
ZEXTERN
 
ZEXPORT
 
deæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

585 
z_¡»amp
 
sourû
));

602 
ZEXTERN
 
ZEXPORT
 
deæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

613 
ZEXTERN
 
ZEXPORT
 
deæ©eP¬ams
 
OF
((
z_¡»amp
 
¡rm
,

614 
Ëv–
,

615 
¡¿‹gy
));

634 
ZEXTERN
 
ZEXPORT
 
deæ©eTuÃ
 
OF
((
z_¡»amp
 
¡rm
,

635 
good_Ëngth
,

636 
max_Ïzy
,

637 
niû_Ëngth
,

638 
max_chaš
));

651 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
deæ©eBound
 
OF
((
z_¡»amp
 
¡rm
,

652 
uLÚg
 
sourûL’
));

661 
ZEXTERN
 
ZEXPORT
 
deæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

662 
b™s
,

663 
v®ue
));

677 
ZEXTERN
 
ZEXPORT
 
deæ©eS‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

678 
gz_h—d”p
 
h—d
));

748 
ZEXTERN
 
ZEXPORT
 
šæ©eS‘DiùiÚ¬y
 
OF
((
z_¡»amp
 
¡rm
,

749 cÚ¡ 
By‹f
 *
diùiÚ¬y
,

750 
uIÁ
 
diùL’gth
));

770 
ZEXTERN
 
ZEXPORT
 
šæ©eSync
 
OF
((
z_¡»amp
 
¡rm
));

785 
ZEXTERN
 
ZEXPORT
 
šæ©eCİy
 
OF
((
z_¡»amp
 
de¡
,

786 
z_¡»amp
 
sourû
));

801 
ZEXTERN
 
ZEXPORT
 
šæ©eRe£t
 
OF
((
z_¡»amp
 
¡rm
));

811 
ZEXTERN
 
ZEXPORT
 
šæ©ePrime
 
OF
((
z_¡»amp
 
¡rm
,

812 
b™s
,

813 
v®ue
));

827 
ZEXTERN
 
ZEXPORT
 
šæ©eG‘H—d”
 
OF
((
z_¡»amp
 
¡rm
,

828 
gz_h—d”p
 
h—d
));

889 (*
š_func
è
	tOF
((
	tFAR
 *, FAR * FAR *));

890 (*
out_func
è
	tOF
((
	tFAR
 *, FAR *, ));

892 
ZEXTERN
 
ZEXPORT
 
šæ©eBack
 
OF
((
z_¡»amp
 
¡rm
,

893 
š_func
 
š
, 
FAR
 *
š_desc
,

894 
out_func
 
out
, 
FAR
 *
out_desc
));

961 
ZEXTERN
 
ZEXPORT
 
šæ©eBackEnd
 
OF
((
z_¡»amp
 
¡rm
));

969 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
zlibCompeFÏgs
 
OF
(());

1021 
ZEXTERN
 
ZEXPORT
 
com´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1022 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1036 
ZEXTERN
 
ZEXPORT
 
com´ess2
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1037 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
,

1038 
Ëv–
));

1052 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
com´essBound
 
OF
((uLÚg 
sourûL’
));

1059 
ZEXTERN
 
ZEXPORT
 
uncom´ess
 
OF
((
By‹f
 *
de¡
, 
uLÚgf
 *
de¡L’
,

1060 cÚ¡ 
By‹f
 *
sourû
, 
uLÚg
 
sourûL’
));

1078 
voidp
 
	tgzFe
;

1098 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzdİ’
 
OF
((
fd
, cÚ¡ *
mode
));

1111 
ZEXTERN
 
ZEXPORT
 
gz£¬ams
 
OF
((
gzFe
 
fe
, 
Ëv–
, 
¡¿‹gy
));

1119 
ZEXTERN
 
ZEXPORT
 
gz»ad
 
OF
((
gzFe
 
fe
, 
voidp
 
buf
, 
Ën
));

1127 
ZEXTERN
 
ZEXPORT
 
gzwr™e
 
OF
((
gzFe
 
fe
,

1128 
voidpc
 
buf
, 
Ën
));

1135 
ZEXTERN
 
ZEXPORTVA
 
gz´štf
 
OF
((
gzFe
 
fe
, cÚ¡ *
fÜm©
, ...));

1148 
ZEXTERN
 
ZEXPORT
 
gzputs
 
OF
((
gzFe
 
fe
, cÚ¡ *
s
));

1155 
ZEXTERN
 * 
ZEXPORT
 
gzg‘s
 
OF
((
gzFe
 
fe
, *
buf
, 
Ën
));

1164 
ZEXTERN
 
ZEXPORT
 
gzputc
 
OF
((
gzFe
 
fe
, 
c
));

1170 
ZEXTERN
 
ZEXPORT
 
gzg‘c
 
OF
((
gzFe
 
fe
));

1176 
ZEXTERN
 
ZEXPORT
 
gzung‘c
 
OF
((
c
, 
gzFe
 
fe
));

1186 
ZEXTERN
 
ZEXPORT
 
gzæush
 
OF
((
gzFe
 
fe
, 
æush
));

1215 
ZEXTERN
 
ZEXPORT
 
gz»wšd
 
OF
((
gzFe
 
fe
));

1232 
ZEXTERN
 
ZEXPORT
 
gzeof
 
OF
((
gzFe
 
fe
));

1238 
ZEXTERN
 
ZEXPORT
 
gzdœeù
 
OF
((
gzFe
 
fe
));

1244 
ZEXTERN
 
ZEXPORT
 
gzşo£
 
OF
((
gzFe
 
fe
));

1252 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
gz”rÜ
 
OF
((
gzFe
 
fe
, *
”ºum
));

1264 
ZEXTERN
 
ZEXPORT
 
gzş—»¼
 
OF
((
gzFe
 
fe
));

1279 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32
 
OF
((uLÚg 
adËr
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1305 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32
 
OF
((uLÚg 
üc
, cÚ¡ 
By‹f
 *
buf
, 
uIÁ
 
Ën
));

1337 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
,

1338 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1339 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™_
 
OF
((
z_¡»amp
 
¡rm
,

1340 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1341 
ZEXTERN
 
ZEXPORT
 
deæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
Ëv–
, 
m‘hod
,

1342 
wšdowB™s
, 
memLev–
,

1343 
¡¿‹gy
, cÚ¡ *
v”siÚ
,

1344 
¡»am_size
));

1345 
ZEXTERN
 
ZEXPORT
 
šæ©eIn™2_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1346 cÚ¡ *
v”siÚ
, 
¡»am_size
));

1347 
ZEXTERN
 
ZEXPORT
 
šæ©eBackIn™_
 
OF
((
z_¡»amp
 
¡rm
, 
wšdowB™s
,

1348 
FAR
 *
wšdow
,

1349 cÚ¡ *
v”siÚ
,

1350 
¡»am_size
));

1351 
	#deæ©eIn™
(
¡rm
, 
Ëv–
) \

1352 
	`deæ©eIn™_
((
¡rm
), (
Ëv–
), 
ZLIB_VERSION
, (
z_¡»am
))

	)

1353 
	#šæ©eIn™
(
¡rm
) \

1354 
	`šæ©eIn™_
((
¡rm
), 
ZLIB_VERSION
, (
z_¡»am
))

	)

1355 
	#deæ©eIn™2
(
¡rm
, 
Ëv–
, 
m‘hod
, 
wšdowB™s
, 
memLev–
, 
¡¿‹gy
) \

1356 
	`deæ©eIn™2_
((
¡rm
),(
Ëv–
),(
m‘hod
),(
wšdowB™s
),(
memLev–
),\

1357 (
¡¿‹gy
), 
ZLIB_VERSION
, (
z_¡»am
))

	)

1358 
	#šæ©eIn™2
(
¡rm
, 
wšdowB™s
) \

1359 
	`šæ©eIn™2_
((
¡rm
), (
wšdowB™s
), 
ZLIB_VERSION
, (
z_¡»am
))

	)

1360 
	#šæ©eBackIn™
(
¡rm
, 
wšdowB™s
, 
wšdow
) \

1361 
	`šæ©eBackIn™_
((
¡rm
), (
wšdowB™s
), (
wšdow
), \

1362 
ZLIB_VERSION
, (
z_¡»am
))

	)

1364 #ià
defšed
(
_LARGEFILE64_SOURCE
)

1365 
	#z_off64_t
 
off64_t


	)

1367 #ià
_FILE_OFFSET_BITS
 == 64

1368 
	#z_off64_t
 
off_t


	)

1372 #ià
defšed
(
_LARGEFILE64_SOURCE
è|| 
_FILE_OFFSET_BITS
 == 64

1373 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’64
 
OF
((const *, const *));

1374 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFe
, z_off64_t, ));

1375 
ZEXTERN
 
z_off64_t
 
ZEXPORT
 
gz‹Î64
 
OF
((
gzFe
));

1376 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1377 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše64
 
OF
((uLÚg, uLÚg, 
z_off64_t
));

1380 #ià
_FILE_OFFSET_BITS
 == 64

1381 
	#gzİ’
 
gzİ’64


	)

1382 
	#gz£ek
 
gz£ek64


	)

1383 
	#gz‹Î
 
gz‹Î64


	)

1384 
	#adËr32_combše
 
adËr32_combše64


	)

1385 
	#üc32_combše
 
üc32_combše64


	)

1387 
ZEXTERN
 
gzFe
 
ZEXPORT
 
gzİ’
 
OF
((const *, const *));

1388 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek
 
OF
((
gzFe
, z_off_t, ));

1389 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz‹Î
 
OF
((
gzFe
));

1390 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
adËr32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1391 
ZEXTERN
 
uLÚg
 
ZEXPORT
 
üc32_combše
 
OF
((uLÚg, uLÚg, 
z_off_t
));

1394 #ià!
defšed
(
ZUTIL_H
è&& !defšed(
NO_DUMMY_DECL
)

1395 
	sš‹º®_¡©e
 {
dummy
;};

1398 
ZEXTERN
 cÚ¡ * 
ZEXPORT
 
zE¼Ü
 
OF
(());

1399 
ZEXTERN
 
ZEXPORT
 
šæ©eSyncPošt
 
OF
((
z_¡»amp
));

1400 
ZEXTERN
 cÚ¡ 
uLÚgf
 * 
ZEXPORT
 
g‘_üc_bË
 
OF
(());

1401 
ZEXTERN
 
ZEXPORT
 
šæ©eUnd”mše
 
OF
((
z_¡»amp
, ));

1403 #ifdeà
__ılu¥lus


	@/usr/include/alloca.h

19 #iâdef 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

27 
	g__BEGIN_DECLS


30 #undeà
®loÿ


33 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

35 #ifdef 
__GNUC__


36 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

39 
__END_DECLS


	@/usr/include/asm/unistd.h

1 #ifdeà
__i386__


2 
	~"uni¡d_32.h
"

4 
	~"uni¡d_64.h
"

	@/usr/include/bits/byteswap.h

21 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


25 #iâdeà
_BITS_BYTESWAP_H


26 
	#_BITS_BYTESWAP_H
 1

	)

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8))

	)

34 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

35 
	#__bsw­_16
(
x
) \

36 (
__ex‹nsiÚ__
 \

37 ({ 
__v
, 
__x
 = (
x
); \

38 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

39 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

41 
	`__asm__
 ("rorw $8, %w0" \

42 : "ô" (
__v
) \

43 : "0" (
__x
) \

45 
__v
; }))

	)

48 
	#__bsw­_16
(
x
) \

49 (
__ex‹nsiÚ__
 \

50 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_16
 (__x); }))

	)

55 
	#__bsw­_cÚ¡ªt_32
(
x
) \

56 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

57 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

59 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

60 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

61 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

62 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

63 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

64 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

65 || 
defšed
 
	g__amdçm10__
)

68 
	#__bsw­_32
(
x
) \

69 (
__ex‹nsiÚ__
 \

70 ({ 
__v
, 
__x
 = (
x
); \

71 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

72 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

74 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

75 
__v
; }))

	)

77 
	#__bsw­_32
(
x
) \

78 (
__ex‹nsiÚ__
 \

79 ({ 
__v
, 
__x
 = (
x
); \

80 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

81 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

83 
	`__asm__
 ("rorw $8, %w0;" \

86 : "ô" (
__v
) \

87 : "0" (
__x
) \

89 
__v
; }))

	)

92 
	#__bsw­_32
(
x
) \

93 (
__ex‹nsiÚ__
 \

94 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

98 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

100 
	#__bsw­_cÚ¡ªt_64
(
x
) \

101 ((((
x
) & 0xff00000000000000ull) >> 56) \

102 | (((
x
) & 0x00ff000000000000ull) >> 40) \

103 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

104 | (((
x
) & 0x000000ff00000000ull) >> 8) \

105 | (((
x
) & 0x00000000ff000000ull) << 8) \

106 | (((
x
) & 0x0000000000ff0000ull) << 24) \

107 | (((
x
) & 0x000000000000ff00ull) << 40) \

108 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

110 #ià
__WORDSIZE
 == 64

111 
	#__bsw­_64
(
x
) \

112 (
__ex‹nsiÚ__
 \

113 ({ 
__v
, 
__x
 = (
x
); \

114 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

115 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

117 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

118 
__v
; }))

	)

120 
	#__bsw­_64
(
x
) \

121 (
__ex‹nsiÚ__
 \

122 ({ uniÚ { 
__ex‹nsiÚ__
 
__Î
; \

123 
__l
[2]; } 
__w
, 
__r
; \

124 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

125 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

128 
__w
.
__Î
 = (
x
); \

129 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

130 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

132 
__r
.
__Î
; }))

	)

	@/usr/include/bits/confname.h

21 #iâdeà
_UNISTD_H


28 
	m_PC_LINK_MAX
,

29 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

30 
	m_PC_MAX_CANON
,

31 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

32 
	m_PC_MAX_INPUT
,

33 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

34 
	m_PC_NAME_MAX
,

35 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

36 
	m_PC_PATH_MAX
,

37 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

38 
	m_PC_PIPE_BUF
,

39 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

40 
	m_PC_CHOWN_RESTRICTED
,

41 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

42 
	m_PC_NO_TRUNC
,

43 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

44 
	m_PC_VDISABLE
,

45 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

46 
	m_PC_SYNC_IO
,

47 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

48 
	m_PC_ASYNC_IO
,

49 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

50 
	m_PC_PRIO_IO
,

51 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

52 
	m_PC_SOCK_MAXBUF
,

53 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

54 
	m_PC_FILESIZEBITS
,

55 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

56 
	m_PC_REC_INCR_XFER_SIZE
,

57 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

58 
	m_PC_REC_MAX_XFER_SIZE
,

59 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

60 
	m_PC_REC_MIN_XFER_SIZE
,

61 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

62 
	m_PC_REC_XFER_ALIGN
,

63 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

64 
	m_PC_ALLOC_SIZE_MIN
,

65 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

66 
	m_PC_SYMLINK_MAX
,

67 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

68 
	m_PC_2_SYMLINKS


69 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

75 
	m_SC_ARG_MAX
,

76 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

77 
	m_SC_CHILD_MAX
,

78 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

79 
	m_SC_CLK_TCK
,

80 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

81 
	m_SC_NGROUPS_MAX
,

82 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

83 
	m_SC_OPEN_MAX
,

84 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

85 
	m_SC_STREAM_MAX
,

86 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

87 
	m_SC_TZNAME_MAX
,

88 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

89 
	m_SC_JOB_CONTROL
,

90 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

91 
	m_SC_SAVED_IDS
,

92 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

93 
	m_SC_REALTIME_SIGNALS
,

94 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

95 
	m_SC_PRIORITY_SCHEDULING
,

96 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

97 
	m_SC_TIMERS
,

98 
	#_SC_TIMERS
 
_SC_TIMERS


	)

99 
	m_SC_ASYNCHRONOUS_IO
,

100 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

101 
	m_SC_PRIORITIZED_IO
,

102 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

103 
	m_SC_SYNCHRONIZED_IO
,

104 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

105 
	m_SC_FSYNC
,

106 
	#_SC_FSYNC
 
_SC_FSYNC


	)

107 
	m_SC_MAPPED_FILES
,

108 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

109 
	m_SC_MEMLOCK
,

110 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

111 
	m_SC_MEMLOCK_RANGE
,

112 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

113 
	m_SC_MEMORY_PROTECTION
,

114 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

115 
	m_SC_MESSAGE_PASSING
,

116 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

117 
	m_SC_SEMAPHORES
,

118 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

119 
	m_SC_SHARED_MEMORY_OBJECTS
,

120 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

121 
	m_SC_AIO_LISTIO_MAX
,

122 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

123 
	m_SC_AIO_MAX
,

124 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

125 
	m_SC_AIO_PRIO_DELTA_MAX
,

126 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

127 
	m_SC_DELAYTIMER_MAX
,

128 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

129 
	m_SC_MQ_OPEN_MAX
,

130 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

131 
	m_SC_MQ_PRIO_MAX
,

132 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

133 
	m_SC_VERSION
,

134 
	#_SC_VERSION
 
_SC_VERSION


	)

135 
	m_SC_PAGESIZE
,

136 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

137 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

138 
	m_SC_RTSIG_MAX
,

139 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

140 
	m_SC_SEM_NSEMS_MAX
,

141 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

142 
	m_SC_SEM_VALUE_MAX
,

143 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

144 
	m_SC_SIGQUEUE_MAX
,

145 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

146 
	m_SC_TIMER_MAX
,

147 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

151 
	m_SC_BC_BASE_MAX
,

152 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

153 
	m_SC_BC_DIM_MAX
,

154 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

155 
	m_SC_BC_SCALE_MAX
,

156 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

157 
	m_SC_BC_STRING_MAX
,

158 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

159 
	m_SC_COLL_WEIGHTS_MAX
,

160 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

161 
	m_SC_EQUIV_CLASS_MAX
,

162 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

163 
	m_SC_EXPR_NEST_MAX
,

164 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

165 
	m_SC_LINE_MAX
,

166 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

167 
	m_SC_RE_DUP_MAX
,

168 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

169 
	m_SC_CHARCLASS_NAME_MAX
,

170 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

172 
	m_SC_2_VERSION
,

173 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

174 
	m_SC_2_C_BIND
,

175 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

176 
	m_SC_2_C_DEV
,

177 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

178 
	m_SC_2_FORT_DEV
,

179 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

180 
	m_SC_2_FORT_RUN
,

181 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

182 
	m_SC_2_SW_DEV
,

183 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

184 
	m_SC_2_LOCALEDEF
,

185 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

187 
	m_SC_PII
,

188 
	#_SC_PII
 
_SC_PII


	)

189 
	m_SC_PII_XTI
,

190 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

191 
	m_SC_PII_SOCKET
,

192 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

193 
	m_SC_PII_INTERNET
,

194 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

195 
	m_SC_PII_OSI
,

196 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

197 
	m_SC_POLL
,

198 
	#_SC_POLL
 
_SC_POLL


	)

199 
	m_SC_SELECT
,

200 
	#_SC_SELECT
 
_SC_SELECT


	)

201 
	m_SC_UIO_MAXIOV
,

202 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

203 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

204 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

205 
	m_SC_PII_INTERNET_STREAM
,

206 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

207 
	m_SC_PII_INTERNET_DGRAM
,

208 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

209 
	m_SC_PII_OSI_COTS
,

210 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

211 
	m_SC_PII_OSI_CLTS
,

212 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

213 
	m_SC_PII_OSI_M
,

214 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

215 
	m_SC_T_IOV_MAX
,

216 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

219 
	m_SC_THREADS
,

220 
	#_SC_THREADS
 
_SC_THREADS


	)

221 
	m_SC_THREAD_SAFE_FUNCTIONS
,

222 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

223 
	m_SC_GETGR_R_SIZE_MAX
,

224 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

225 
	m_SC_GETPW_R_SIZE_MAX
,

226 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

227 
	m_SC_LOGIN_NAME_MAX
,

228 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

229 
	m_SC_TTY_NAME_MAX
,

230 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

231 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

232 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

233 
	m_SC_THREAD_KEYS_MAX
,

234 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

235 
	m_SC_THREAD_STACK_MIN
,

236 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

237 
	m_SC_THREAD_THREADS_MAX
,

238 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

239 
	m_SC_THREAD_ATTR_STACKADDR
,

240 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

241 
	m_SC_THREAD_ATTR_STACKSIZE
,

242 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

243 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

244 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

245 
	m_SC_THREAD_PRIO_INHERIT
,

246 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

247 
	m_SC_THREAD_PRIO_PROTECT
,

248 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

249 
	m_SC_THREAD_PROCESS_SHARED
,

250 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

252 
	m_SC_NPROCESSORS_CONF
,

253 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

254 
	m_SC_NPROCESSORS_ONLN
,

255 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

256 
	m_SC_PHYS_PAGES
,

257 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

258 
	m_SC_AVPHYS_PAGES
,

259 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

260 
	m_SC_ATEXIT_MAX
,

261 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

262 
	m_SC_PASS_MAX
,

263 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

265 
	m_SC_XOPEN_VERSION
,

266 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

267 
	m_SC_XOPEN_XCU_VERSION
,

268 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

269 
	m_SC_XOPEN_UNIX
,

270 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

271 
	m_SC_XOPEN_CRYPT
,

272 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

273 
	m_SC_XOPEN_ENH_I18N
,

274 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

275 
	m_SC_XOPEN_SHM
,

276 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

278 
	m_SC_2_CHAR_TERM
,

279 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

280 
	m_SC_2_C_VERSION
,

281 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

282 
	m_SC_2_UPE
,

283 
	#_SC_2_UPE
 
_SC_2_UPE


	)

285 
	m_SC_XOPEN_XPG2
,

286 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

287 
	m_SC_XOPEN_XPG3
,

288 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

289 
	m_SC_XOPEN_XPG4
,

290 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

292 
	m_SC_CHAR_BIT
,

293 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

294 
	m_SC_CHAR_MAX
,

295 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

296 
	m_SC_CHAR_MIN
,

297 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

298 
	m_SC_INT_MAX
,

299 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

300 
	m_SC_INT_MIN
,

301 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

302 
	m_SC_LONG_BIT
,

303 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

304 
	m_SC_WORD_BIT
,

305 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

306 
	m_SC_MB_LEN_MAX
,

307 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

308 
	m_SC_NZERO
,

309 
	#_SC_NZERO
 
_SC_NZERO


	)

310 
	m_SC_SSIZE_MAX
,

311 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

312 
	m_SC_SCHAR_MAX
,

313 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

314 
	m_SC_SCHAR_MIN
,

315 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

316 
	m_SC_SHRT_MAX
,

317 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

318 
	m_SC_SHRT_MIN
,

319 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

320 
	m_SC_UCHAR_MAX
,

321 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

322 
	m_SC_UINT_MAX
,

323 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

324 
	m_SC_ULONG_MAX
,

325 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

326 
	m_SC_USHRT_MAX
,

327 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

329 
	m_SC_NL_ARGMAX
,

330 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

331 
	m_SC_NL_LANGMAX
,

332 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

333 
	m_SC_NL_MSGMAX
,

334 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

335 
	m_SC_NL_NMAX
,

336 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

337 
	m_SC_NL_SETMAX
,

338 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

339 
	m_SC_NL_TEXTMAX
,

340 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

342 
	m_SC_XBS5_ILP32_OFF32
,

343 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

344 
	m_SC_XBS5_ILP32_OFFBIG
,

345 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

346 
	m_SC_XBS5_LP64_OFF64
,

347 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

348 
	m_SC_XBS5_LPBIG_OFFBIG
,

349 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

351 
	m_SC_XOPEN_LEGACY
,

352 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

353 
	m_SC_XOPEN_REALTIME
,

354 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

355 
	m_SC_XOPEN_REALTIME_THREADS
,

356 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

358 
	m_SC_ADVISORY_INFO
,

359 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

360 
	m_SC_BARRIERS
,

361 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

362 
	m_SC_BASE
,

363 
	#_SC_BASE
 
_SC_BASE


	)

364 
	m_SC_C_LANG_SUPPORT
,

365 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

366 
	m_SC_C_LANG_SUPPORT_R
,

367 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

368 
	m_SC_CLOCK_SELECTION
,

369 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

370 
	m_SC_CPUTIME
,

371 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

372 
	m_SC_THREAD_CPUTIME
,

373 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

374 
	m_SC_DEVICE_IO
,

375 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

376 
	m_SC_DEVICE_SPECIFIC
,

377 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

378 
	m_SC_DEVICE_SPECIFIC_R
,

379 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

380 
	m_SC_FD_MGMT
,

381 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

382 
	m_SC_FIFO
,

383 
	#_SC_FIFO
 
_SC_FIFO


	)

384 
	m_SC_PIPE
,

385 
	#_SC_PIPE
 
_SC_PIPE


	)

386 
	m_SC_FILE_ATTRIBUTES
,

387 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

388 
	m_SC_FILE_LOCKING
,

389 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

390 
	m_SC_FILE_SYSTEM
,

391 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

392 
	m_SC_MONOTONIC_CLOCK
,

393 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

394 
	m_SC_MULTI_PROCESS
,

395 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

396 
	m_SC_SINGLE_PROCESS
,

397 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

398 
	m_SC_NETWORKING
,

399 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

400 
	m_SC_READER_WRITER_LOCKS
,

401 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

402 
	m_SC_SPIN_LOCKS
,

403 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

404 
	m_SC_REGEXP
,

405 
	#_SC_REGEXP
 
_SC_REGEXP


	)

406 
	m_SC_REGEX_VERSION
,

407 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

408 
	m_SC_SHELL
,

409 
	#_SC_SHELL
 
_SC_SHELL


	)

410 
	m_SC_SIGNALS
,

411 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

412 
	m_SC_SPAWN
,

413 
	#_SC_SPAWN
 
_SC_SPAWN


	)

414 
	m_SC_SPORADIC_SERVER
,

415 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

416 
	m_SC_THREAD_SPORADIC_SERVER
,

417 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

418 
	m_SC_SYSTEM_DATABASE
,

419 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

420 
	m_SC_SYSTEM_DATABASE_R
,

421 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

422 
	m_SC_TIMEOUTS
,

423 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

424 
	m_SC_TYPED_MEMORY_OBJECTS
,

425 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

426 
	m_SC_USER_GROUPS
,

427 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

428 
	m_SC_USER_GROUPS_R
,

429 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

430 
	m_SC_2_PBS
,

431 
	#_SC_2_PBS
 
_SC_2_PBS


	)

432 
	m_SC_2_PBS_ACCOUNTING
,

433 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

434 
	m_SC_2_PBS_LOCATE
,

435 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

436 
	m_SC_2_PBS_MESSAGE
,

437 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

438 
	m_SC_2_PBS_TRACK
,

439 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

440 
	m_SC_SYMLOOP_MAX
,

441 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

442 
	m_SC_STREAMS
,

443 
	#_SC_STREAMS
 
_SC_STREAMS


	)

444 
	m_SC_2_PBS_CHECKPOINT
,

445 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

447 
	m_SC_V6_ILP32_OFF32
,

448 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

449 
	m_SC_V6_ILP32_OFFBIG
,

450 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

451 
	m_SC_V6_LP64_OFF64
,

452 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

453 
	m_SC_V6_LPBIG_OFFBIG
,

454 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

456 
	m_SC_HOST_NAME_MAX
,

457 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

458 
	m_SC_TRACE
,

459 
	#_SC_TRACE
 
_SC_TRACE


	)

460 
	m_SC_TRACE_EVENT_FILTER
,

461 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

462 
	m_SC_TRACE_INHERIT
,

463 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

464 
	m_SC_TRACE_LOG
,

465 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

467 
	m_SC_LEVEL1_ICACHE_SIZE
,

468 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

469 
	m_SC_LEVEL1_ICACHE_ASSOC
,

470 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

471 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

472 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

473 
	m_SC_LEVEL1_DCACHE_SIZE
,

474 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

475 
	m_SC_LEVEL1_DCACHE_ASSOC
,

476 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

477 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

478 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

479 
	m_SC_LEVEL2_CACHE_SIZE
,

480 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

481 
	m_SC_LEVEL2_CACHE_ASSOC
,

482 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

483 
	m_SC_LEVEL2_CACHE_LINESIZE
,

484 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

485 
	m_SC_LEVEL3_CACHE_SIZE
,

486 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

487 
	m_SC_LEVEL3_CACHE_ASSOC
,

488 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

489 
	m_SC_LEVEL3_CACHE_LINESIZE
,

490 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

491 
	m_SC_LEVEL4_CACHE_SIZE
,

492 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

493 
	m_SC_LEVEL4_CACHE_ASSOC
,

494 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

495 
	m_SC_LEVEL4_CACHE_LINESIZE
,

496 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

499 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

500 
	#_SC_IPV6
 
_SC_IPV6


	)

501 
	m_SC_RAW_SOCKETS
,

502 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

504 
	m_SC_V7_ILP32_OFF32
,

505 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

506 
	m_SC_V7_ILP32_OFFBIG
,

507 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

508 
	m_SC_V7_LP64_OFF64
,

509 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

510 
	m_SC_V7_LPBIG_OFFBIG
,

511 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

513 
	m_SC_SS_REPL_MAX
,

514 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

516 
	m_SC_TRACE_EVENT_NAME_MAX
,

517 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

518 
	m_SC_TRACE_NAME_MAX
,

519 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

520 
	m_SC_TRACE_SYS_MAX
,

521 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

522 
	m_SC_TRACE_USER_EVENT_MAX
,

523 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

525 
	m_SC_XOPEN_STREAMS
,

526 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

528 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

529 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

530 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


531 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

537 
	m_CS_PATH
,

538 
	#_CS_PATH
 
_CS_PATH


	)

540 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

541 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

544 
	m_CS_GNU_LIBC_VERSION
,

545 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

546 
	m_CS_GNU_LIBPTHREAD_VERSION
,

547 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

549 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

550 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

553 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

554 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

557 
	m_CS_LFS_CFLAGS
 = 1000,

558 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

559 
	m_CS_LFS_LDFLAGS
,

560 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

561 
	m_CS_LFS_LIBS
,

562 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

563 
	m_CS_LFS_LINTFLAGS
,

564 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

565 
	m_CS_LFS64_CFLAGS
,

566 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

567 
	m_CS_LFS64_LDFLAGS
,

568 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

569 
	m_CS_LFS64_LIBS
,

570 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

571 
	m_CS_LFS64_LINTFLAGS
,

572 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

575 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

577 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

579 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

580 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

581 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

588 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

589 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

593 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

594 
	m_CS_XBS5_LP64_OFF64_LIBS
,

595 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

596 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

597 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

604 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

605 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

613 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

621 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

622 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

629 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

630 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

637 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

638 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

646 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

654 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

655 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

662 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

663 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

670 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


671 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

	@/usr/include/bits/dlfcn.h

20 #iâdeà
_DLFCN_H


25 
	#RTLD_LAZY
 0x00001

	)

26 
	#RTLD_NOW
 0x00002

	)

27 
	#RTLD_BINDING_MASK
 0x3

	)

28 
	#RTLD_NOLOAD
 0x00004

	)

29 
	#RTLD_DEEPBIND
 0x00008

	)

34 
	#RTLD_GLOBAL
 0x00100

	)

39 
	#RTLD_LOCAL
 0

	)

42 
	#RTLD_NODELETE
 0x01000

	)

44 #ifdeà
__USE_GNU


55 
	#DL_CALL_FCT
(
fùp
, 
¬gs
) \

56 (
	`_dl_mcouÁ_w¿µ”_check
 ((*è(
fùp
)), (*(fùp)è
¬gs
)

	)

58 
__BEGIN_DECLS


61 
	$_dl_mcouÁ_w¿µ”_check
 (*
__£låc
è
__THROW
;

63 
__END_DECLS


	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/environments.h

19 #iâdeà
_UNISTD_H


23 
	~<b™s/wÜdsize.h
>

43 #ià
__WORDSIZE
 == 64

57 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

58 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

59 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

62 
	#_POSIX_V7_LP64_OFF64
 1

	)

63 
	#_POSIX_V6_LP64_OFF64
 1

	)

64 
	#_XBS5_LP64_OFF64
 1

	)

70 
	#_POSIX_V7_ILP32_OFF32
 1

	)

71 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

72 
	#_POSIX_V6_ILP32_OFF32
 1

	)

73 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

74 
	#_XBS5_ILP32_OFF32
 1

	)

75 
	#_XBS5_ILP32_OFFBIG
 1

	)

92 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

93 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

94 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

95 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

96 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

97 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

20 #ifdeà
_ERRNO_H


22 #undeà
EDOM


23 #undeà
EILSEQ


24 #undeà
ERANGE


25 
	~<lšux/”ºo.h
>

28 
	#ENOTSUP
 
EOPNOTSUPP


	)

31 #iâdeà
ECANCELED


32 
	#ECANCELED
 125

	)

36 #iâdeà
EOWNERDEAD


37 
	#EOWNERDEAD
 130

	)

38 
	#ENOTRECOVERABLE
 131

	)

41 #iâdeà
__ASSEMBLER__


43 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

45 #ià!
defšed
 
_LIBC
 || defšed 
_LIBC_REENTRANT


47 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

52 #ià!
defšed
 
_ERRNO_H
 && defšed 
__Ãed_Em©h


56 
	#EDOM
 33

	)

57 
	#EILSEQ
 84

	)

58 
	#ERANGE
 34

	)

	@/usr/include/bits/fcntl.h

20 #iâdef 
_FCNTL_H


24 
	~<sys/ty³s.h
>

25 
	~<b™s/wÜdsize.h
>

26 #ifdeà
__USE_GNU


27 
	~<b™s/uio.h
>

33 
	#O_ACCMODE
 0003

	)

34 
	#O_RDONLY
 00

	)

35 
	#O_WRONLY
 01

	)

36 
	#O_RDWR
 02

	)

37 
	#O_CREAT
 0100

	)

38 
	#O_EXCL
 0200

	)

39 
	#O_NOCTTY
 0400

	)

40 
	#O_TRUNC
 01000

	)

41 
	#O_APPEND
 02000

	)

42 
	#O_NONBLOCK
 04000

	)

43 
	#O_NDELAY
 
O_NONBLOCK


	)

44 
	#O_SYNC
 010000

	)

45 
	#O_FSYNC
 
O_SYNC


	)

46 
	#O_ASYNC
 020000

	)

48 #ifdeà
__USE_GNU


49 
	#O_DIRECT
 040000

	)

50 
	#O_DIRECTORY
 0200000

	)

51 
	#O_NOFOLLOW
 0400000

	)

52 
	#O_NOATIME
 01000000

	)

53 
	#O_CLOEXEC
 02000000

	)

59 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


60 
	#O_DSYNC
 
O_SYNC


	)

61 
	#O_RSYNC
 
O_SYNC


	)

64 #ifdeà
__USE_LARGEFILE64


65 #ià
__WORDSIZE
 == 64

66 
	#O_LARGEFILE
 0

	)

68 
	#O_LARGEFILE
 0100000

	)

73 
	#F_DUPFD
 0

	)

74 
	#F_GETFD
 1

	)

75 
	#F_SETFD
 2

	)

76 
	#F_GETFL
 3

	)

77 
	#F_SETFL
 4

	)

78 #ià
__WORDSIZE
 == 64

79 
	#F_GETLK
 5

	)

80 
	#F_SETLK
 6

	)

81 
	#F_SETLKW
 7

	)

83 
	#F_GETLK64
 5

	)

84 
	#F_SETLK64
 6

	)

85 
	#F_SETLKW64
 7

	)

87 #iâdeà
__USE_FILE_OFFSET64


88 
	#F_GETLK
 5

	)

89 
	#F_SETLK
 6

	)

90 
	#F_SETLKW
 7

	)

92 
	#F_GETLK
 
F_GETLK64


	)

93 
	#F_SETLK
 
F_SETLK64


	)

94 
	#F_SETLKW
 
F_SETLKW64


	)

96 
	#F_GETLK64
 12

	)

97 
	#F_SETLK64
 13

	)

98 
	#F_SETLKW64
 14

	)

101 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


102 
	#F_SETOWN
 8

	)

103 
	#F_GETOWN
 9

	)

106 #ifdeà
__USE_GNU


107 
	#F_SETSIG
 10

	)

108 
	#F_GETSIG
 11

	)

109 
	#F_SETOWN_EX
 15

	)

110 
	#F_GETOWN_EX
 16

	)

113 #ifdeà
__USE_GNU


114 
	#F_SETLEASE
 1024

	)

115 
	#F_GETLEASE
 1025

	)

116 
	#F_NOTIFY
 1026

	)

117 
	#F_DUPFD_CLOEXEC
 1030

	)

122 
	#FD_CLOEXEC
 1

	)

125 
	#F_RDLCK
 0

	)

126 
	#F_WRLCK
 1

	)

127 
	#F_UNLCK
 2

	)

130 
	#F_EXLCK
 4

	)

131 
	#F_SHLCK
 8

	)

133 #ifdeà
__USE_BSD


135 
	#LOCK_SH
 1

	)

136 
	#LOCK_EX
 2

	)

137 
	#LOCK_NB
 4

	)

139 
	#LOCK_UN
 8

	)

142 #ifdeà
__USE_GNU


143 
	#LOCK_MAND
 32

	)

144 
	#LOCK_READ
 64

	)

145 
	#LOCK_WRITE
 128

	)

146 
	#LOCK_RW
 192

	)

149 #ifdeà
__USE_GNU


151 
	#DN_ACCESS
 0x00000001

	)

152 
	#DN_MODIFY
 0x00000002

	)

153 
	#DN_CREATE
 0x00000004

	)

154 
	#DN_DELETE
 0x00000008

	)

155 
	#DN_RENAME
 0x00000010

	)

156 
	#DN_ATTRIB
 0x00000020

	)

157 
	#DN_MULTISHOT
 0x80000000

	)

160 
	sæock


162 
	ml_ty³
;

163 
	ml_wh’û
;

164 #iâdeà
__USE_FILE_OFFSET64


165 
__off_t
 
	ml_¡¬t
;

166 
__off_t
 
	ml_Ën
;

168 
__off64_t
 
	ml_¡¬t
;

169 
__off64_t
 
	ml_Ën
;

171 
__pid_t
 
	ml_pid
;

174 #ifdeà
__USE_LARGEFILE64


175 
	sæock64


177 
	ml_ty³
;

178 
	ml_wh’û
;

179 
__off64_t
 
	ml_¡¬t
;

180 
__off64_t
 
	ml_Ën
;

181 
__pid_t
 
	ml_pid
;

185 #ifdeà
__USE_GNU


187 
	e__pid_ty³


189 
	mF_OWNER_TID
 = 0,

190 
	mF_OWNER_PID
,

191 
	mF_OWNER_GID


195 
	sf_owÃr_ex


197 
__pid_ty³
 
	mty³
;

198 
__pid_t
 
	mpid
;

204 #ifdef 
__USE_BSD


205 
	#FAPPEND
 
O_APPEND


	)

206 
	#FFSYNC
 
O_FSYNC


	)

207 
	#FASYNC
 
O_ASYNC


	)

208 
	#FNONBLOCK
 
O_NONBLOCK


	)

209 
	#FNDELAY
 
O_NDELAY


	)

213 #ifdeà
__USE_XOPEN2K


214 
	#POSIX_FADV_NORMAL
 0

	)

215 
	#POSIX_FADV_RANDOM
 1

	)

216 
	#POSIX_FADV_SEQUENTIAL
 2

	)

217 
	#POSIX_FADV_WILLNEED
 3

	)

218 
	#POSIX_FADV_DONTNEED
 4

	)

219 
	#POSIX_FADV_NOREUSE
 5

	)

223 #ifdeà
__USE_GNU


225 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

228 
	#SYNC_FILE_RANGE_WRITE
 2

	)

231 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

236 
	#SPLICE_F_MOVE
 1

	)

237 
	#SPLICE_F_NONBLOCK
 2

	)

240 
	#SPLICE_F_MORE
 4

	)

241 
	#SPLICE_F_GIFT
 8

	)

245 #ifdeà
__USE_ATFILE


246 
	#AT_FDCWD
 -100

	)

249 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

250 
	#AT_REMOVEDIR
 0x200

	)

252 
	#AT_SYMLINK_FOLLOW
 0x400

	)

253 
	#AT_EACCESS
 0x200

	)

257 
	g__BEGIN_DECLS


259 #ifdeà
__USE_GNU


262 
ssize_t
 
	$»adah—d
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__couÁ
)

263 
__THROW
;

267 
	`sync_fe_¿nge
 (
__fd
, 
__off64_t
 
__äom
, __off64_ˆ
__to
,

268 
__æags
);

272 
ssize_t
 
	`vm¥liû
 (
__fdout
, cÚ¡ 
iovec
 *
__iov
,

273 
size_t
 
__couÁ
, 
__æags
);

276 
ssize_t
 
	`¥liû
 (
__fdš
, 
__off64_t
 *
__offš
, 
__fdout
,

277 
__off64_t
 *
__offout
, 
size_t
 
__Ën
,

278 
__æags
);

281 
ssize_t
 
	`‹e
 (
__fdš
, 
__fdout
, 
size_t
 
__Ën
,

282 
__æags
);

285 #iâdeà
__USE_FILE_OFFSET64


286 
	`çÎoÿ‹
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

288 #ifdeà
__REDIRECT


289 
	`__REDIRECT
 (
çÎoÿ‹
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

290 
__off64_t
 
__Ën
),

291 
çÎoÿ‹64
);

293 
	#çÎoÿ‹
 
çÎoÿ‹64


	)

296 #ifdeà
__USE_LARGEFILE64


297 
	`çÎoÿ‹64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

298 
__off64_t
 
__Ën
);

302 
__END_DECLS


	@/usr/include/bits/fcntl2.h

20 #iâdef 
_FCNTL_H


26 #iâdeà
__USE_FILE_OFFSET64


27 
	$__İ’_2
 (
__cÚ¡
 *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

28 
	`__REDIRECT
 (
__İ’_®Ÿs
, (
__cÚ¡
 *
__·th
, 
__oæag
, ...),

29 
İ’
è
	`__nÚnuÎ
 ((1));

31 
	`__REDIRECT
 (
__İ’_2
, (
__cÚ¡
 *
__·th
, 
__oæag
),

32 
__İ’64_2
è
	`__nÚnuÎ
 ((1));

33 
	`__REDIRECT
 (
__İ’_®Ÿs
, (
__cÚ¡
 *
__·th
, 
__oæag
, ...),

34 
İ’64
è
	`__nÚnuÎ
 ((1));

36 
	`__”rÜdeş
 (
__İ’_too_mªy_¬gs
,

38 
	`__”rÜdeş
 (
__İ’_missšg_mode
,

41 
__ex‹º_®ways_šlše
 

42 
	$İ’
 (
__cÚ¡
 *
__·th
, 
__oæag
, ...)

44 ià(
	`__va_¬g_·ck_Ën
 () > 1)

45 
	`__İ’_too_mªy_¬gs
 ();

47 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

49 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

51 
	`__İ’_missšg_mode
 ();

52  
	`__İ’_2
 (
__·th
, 
__oæag
);

54  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

57 ià(
	`__va_¬g_·ck_Ën
 () < 1)

58  
	`__İ’_2
 (
__·th
, 
__oæag
);

60  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

61 
	}
}

64 #ifdeà
__USE_LARGEFILE64


65 
	$__İ’64_2
 (
__cÚ¡
 *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

66 
	`__REDIRECT
 (
__İ’64_®Ÿs
, (
__cÚ¡
 *
__·th
, 
__oæag
,

67 ...), 
İ’64
è
	`__nÚnuÎ
 ((1));

68 
	`__”rÜdeş
 (
__İ’64_too_mªy_¬gs
,

70 
	`__”rÜdeş
 (
__İ’64_missšg_mode
,

73 
__ex‹º_®ways_šlše
 

74 
	$İ’64
 (
__cÚ¡
 *
__·th
, 
__oæag
, ...)

76 ià(
	`__va_¬g_·ck_Ën
 () > 1)

77 
	`__İ’64_too_mªy_¬gs
 ();

79 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

81 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

83 
	`__İ’64_missšg_mode
 ();

84  
	`__İ’64_2
 (
__·th
, 
__oæag
);

86  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

89 ià(
	`__va_¬g_·ck_Ën
 () < 1)

90  
	`__İ’64_2
 (
__·th
, 
__oæag
);

92  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

93 
	}
}

97 #ifdeà
__USE_ATFILE


98 #iâdeà
__USE_FILE_OFFSET64


99 
	$__İ’©_2
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
)

100 
	`__nÚnuÎ
 ((2));

101 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, 
__cÚ¡
 *
__·th
,

102 
__oæag
, ...), 
İ’©
)

103 
	`__nÚnuÎ
 ((2));

105 
	`__REDIRECT
 (
__İ’©_2
, (
__fd
, 
__cÚ¡
 *
__·th
,

106 
__oæag
), 
__İ’©64_2
)

107 
	`__nÚnuÎ
 ((2));

108 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, 
__cÚ¡
 *
__·th
,

109 
__oæag
, ...), 
İ’©64
)

110 
	`__nÚnuÎ
 ((2));

112 
	`__”rÜdeş
 (
__İ’©_too_mªy_¬gs
,

114 
	`__”rÜdeş
 (
__İ’©_missšg_mode
,

117 
__ex‹º_®ways_šlše
 

118 
	$İ’©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
, ...)

120 ià(
	`__va_¬g_·ck_Ën
 () > 1)

121 
	`__İ’©_too_mªy_¬gs
 ();

123 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

125 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

127 
	`__İ’©_missšg_mode
 ();

128  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

130  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

133 ià(
	`__va_¬g_·ck_Ën
 () < 1)

134  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

136  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

137 
	}
}

140 #ifdeà
__USE_LARGEFILE64


141 
	$__İ’©64_2
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
)

142 
	`__nÚnuÎ
 ((2));

143 
	`__REDIRECT
 (
__İ’©64_®Ÿs
, (
__fd
, 
__cÚ¡
 *
__·th
,

144 
__oæag
, ...), 
İ’©64
)

145 
	`__nÚnuÎ
 ((2));

146 
	`__”rÜdeş
 (
__İ’©64_too_mªy_¬gs
,

148 
	`__”rÜdeş
 (
__İ’©64_missšg_mode
,

151 
__ex‹º_®ways_šlše
 

152 
	$İ’©64
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
, ...)

154 ià(
	`__va_¬g_·ck_Ën
 () > 1)

155 
	`__İ’©64_too_mªy_¬gs
 ();

157 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

159 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

161 
	`__İ’©64_missšg_mode
 ();

162  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

164  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

167 ià(
	`__va_¬g_·ck_Ën
 () < 1)

168  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

170  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

171 
	}
}

	@/usr/include/bits/huge_val.h

22 #iâdeà
_MATH_H


28 #ià
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VAL
 (
	`__butš_huge_v®
())

	)

30 #–ià
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

32 #–ià
defšed
 
__GNUC__


34 
	#HUGE_VAL
 \

35 (
__ex‹nsiÚ__
 \

36 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

37 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

41 
	~<’dŸn.h
>

43 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

45 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


46 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

48 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


49 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

52 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

53 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

22 #iâdeà
_MATH_H


28 #ià
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VALF
 (
	`__butš_huge_v®f
())

	)

30 #–ià
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

32 #–ià
defšed
 
__GNUC__


34 
	#HUGE_VALF
 \

35 (
__ex‹nsiÚ__
 \

36 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

37 { 
__l
: 0x7f800000UL }).
__d
)

	)

41 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

43 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


44 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

46 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


47 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

50 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

51 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__butš_huge_v®l
())

	)

28 
	#HUGE_VALL
 ((è
HUGE_VAL
)

	)

	@/usr/include/bits/in.h

21 #iâdeà
_NETINET_IN_H


28 
	#IP_OPTIONS
 4

	)

29 
	#IP_HDRINCL
 3

	)

30 
	#IP_TOS
 1

	)

31 
	#IP_TTL
 2

	)

32 
	#IP_RECVOPTS
 6

	)

34 
	#IP_RECVRETOPTS
 
IP_RETOPTS


	)

35 
	#IP_RETOPTS
 7

	)

36 
	#IP_MULTICAST_IF
 32

	)

37 
	#IP_MULTICAST_TTL
 33

	)

38 
	#IP_MULTICAST_LOOP
 34

	)

39 
	#IP_ADD_MEMBERSHIP
 35

	)

40 
	#IP_DROP_MEMBERSHIP
 36

	)

41 
	#IP_UNBLOCK_SOURCE
 37

	)

42 
	#IP_BLOCK_SOURCE
 38

	)

43 
	#IP_ADD_SOURCE_MEMBERSHIP
 39

	)

44 
	#IP_DROP_SOURCE_MEMBERSHIP
 40

	)

45 
	#IP_MSFILTER
 41

	)

46 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


47 
	#MCAST_JOIN_GROUP
 42

	)

48 
	#MCAST_BLOCK_SOURCE
 43

	)

49 
	#MCAST_UNBLOCK_SOURCE
 44

	)

50 
	#MCAST_LEAVE_GROUP
 45

	)

51 
	#MCAST_JOIN_SOURCE_GROUP
 46

	)

52 
	#MCAST_LEAVE_SOURCE_GROUP
 47

	)

53 
	#MCAST_MSFILTER
 48

	)

55 
	#MCAST_EXCLUDE
 0

	)

56 
	#MCAST_INCLUDE
 1

	)

59 
	#IP_ROUTER_ALERT
 5

	)

60 
	#IP_PKTINFO
 8

	)

61 
	#IP_PKTOPTIONS
 9

	)

62 
	#IP_PMTUDISC
 10

	)

63 
	#IP_MTU_DISCOVER
 10

	)

64 
	#IP_RECVERR
 11

	)

65 
	#IP_RECVTTL
 12

	)

66 
	#IP_RECVTOS
 13

	)

70 
	#IP_PMTUDISC_DONT
 0

	)

71 
	#IP_PMTUDISC_WANT
 1

	)

72 
	#IP_PMTUDISC_DO
 2

	)

73 
	#IP_PMTUDISC_PROBE
 3

	)

76 
	#SOL_IP
 0

	)

78 
	#IP_DEFAULT_MULTICAST_TTL
 1

	)

79 
	#IP_DEFAULT_MULTICAST_LOOP
 1

	)

80 
	#IP_MAX_MEMBERSHIPS
 20

	)

82 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


86 
	s_İts


88 
š_addr
 
	m_d¡
;

89 
	m_İts
[40];

93 
	s_m»qn


95 
š_addr
 
	mimr_muÉŸddr
;

96 
š_addr
 
	mimr_add»ss
;

97 
	mimr_ifšdex
;

101 
	sš_pktšfo


103 
	mi_ifšdex
;

104 
š_addr
 
	mi_¥ec_d¡
;

105 
š_addr
 
	mi_addr
;

112 
	#IPV6_ADDRFORM
 1

	)

113 
	#IPV6_2292PKTINFO
 2

	)

114 
	#IPV6_2292HOPOPTS
 3

	)

115 
	#IPV6_2292DSTOPTS
 4

	)

116 
	#IPV6_2292RTHDR
 5

	)

117 
	#IPV6_2292PKTOPTIONS
 6

	)

118 
	#IPV6_CHECKSUM
 7

	)

119 
	#IPV6_2292HOPLIMIT
 8

	)

121 
	#SCM_SRCRT
 
IPV6_RXSRCRT


	)

123 
	#IPV6_NEXTHOP
 9

	)

124 
	#IPV6_AUTHHDR
 10

	)

125 
	#IPV6_UNICAST_HOPS
 16

	)

126 
	#IPV6_MULTICAST_IF
 17

	)

127 
	#IPV6_MULTICAST_HOPS
 18

	)

128 
	#IPV6_MULTICAST_LOOP
 19

	)

129 
	#IPV6_JOIN_GROUP
 20

	)

130 
	#IPV6_LEAVE_GROUP
 21

	)

131 
	#IPV6_ROUTER_ALERT
 22

	)

132 
	#IPV6_MTU_DISCOVER
 23

	)

133 
	#IPV6_MTU
 24

	)

134 
	#IPV6_RECVERR
 25

	)

135 
	#IPV6_V6ONLY
 26

	)

136 
	#IPV6_JOIN_ANYCAST
 27

	)

137 
	#IPV6_LEAVE_ANYCAST
 28

	)

138 
	#IPV6_IPSEC_POLICY
 34

	)

139 
	#IPV6_XFRM_POLICY
 35

	)

141 
	#IPV6_RECVPKTINFO
 49

	)

142 
	#IPV6_PKTINFO
 50

	)

143 
	#IPV6_RECVHOPLIMIT
 51

	)

144 
	#IPV6_HOPLIMIT
 52

	)

145 
	#IPV6_RECVHOPOPTS
 53

	)

146 
	#IPV6_HOPOPTS
 54

	)

147 
	#IPV6_RTHDRDSTOPTS
 55

	)

148 
	#IPV6_RECVRTHDR
 56

	)

149 
	#IPV6_RTHDR
 57

	)

150 
	#IPV6_RECVDSTOPTS
 58

	)

151 
	#IPV6_DSTOPTS
 59

	)

153 
	#IPV6_RECVTCLASS
 66

	)

154 
	#IPV6_TCLASS
 67

	)

157 
	#IPV6_ADD_MEMBERSHIP
 
IPV6_JOIN_GROUP


	)

158 
	#IPV6_DROP_MEMBERSHIP
 
IPV6_LEAVE_GROUP


	)

159 
	#IPV6_RXHOPOPTS
 
IPV6_HOPOPTS


	)

160 
	#IPV6_RXDSTOPTS
 
IPV6_DSTOPTS


	)

163 
	#IPV6_PMTUDISC_DONT
 0

	)

164 
	#IPV6_PMTUDISC_WANT
 1

	)

165 
	#IPV6_PMTUDISC_DO
 2

	)

166 
	#IPV6_PMTUDISC_PROBE
 3

	)

169 
	#SOL_IPV6
 41

	)

170 
	#SOL_ICMPV6
 58

	)

173 
	#IPV6_RTHDR_LOOSE
 0

	)

174 
	#IPV6_RTHDR_STRICT
 1

	)

176 
	#IPV6_RTHDR_TYPE_0
 0

	)

	@/usr/include/bits/inf.h

20 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

27 
	#INFINITY
 (
	`__butš_šff
())

	)

29 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/mathcalls.h

46 #iâdeà
_MATH_H


53 
_MdoubË_BEGIN_NAMESPACE


55 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

57 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

59 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

61 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

64 
__MATHCALL
 (
cos
,, (
_MdoubË_
 
__x
));

66 
__MATHCALL
 (
sš
,, (
_MdoubË_
 
__x
));

68 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

73 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

75 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

77 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

78 
	g_MdoubË_END_NAMESPACE


80 #ifdeà
__USE_GNU


82 
__MATHDECL
 (,
sšcos
,,

83 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

86 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


87 
__BEGIN_NAMESPACE_C99


89 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

91 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

93 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

94 
	g__END_NAMESPACE_C99


99 
_MdoubË_BEGIN_NAMESPACE


101 
__MATHCALL
 (
exp
,, (
_MdoubË_
 
__x
));

104 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

107 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

110 
__MATHCALL
 (
log
,, (
_MdoubË_
 
__x
));

113 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

116 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
));

117 
	g_MdoubË_END_NAMESPACE


119 #ifdeà
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

126 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifdeà
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubË_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

157 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

158 
	g_MdoubË_END_NAMESPACE


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubË_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
û
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

182 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

185 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

193 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

197 
	g_MdoubË_END_NAMESPACE


199 #ifdeà
__USE_MISC


202 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

205 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

212 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

215 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
cİysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

219 
	g__END_NAMESPACE_C99


222 #ifdeà
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
Çn
,, (
__cÚ¡
 *
__gb
), (
__cÚ¡__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

233 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

247 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

251 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

253 
	g__END_NAMESPACE_C99


256 #ifdeà
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

260 
	g__END_NAMESPACE_C99


263 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

268 #ifdeà
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

276 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

283 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

284 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

289 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

291 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


293 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ogb
,, (
_MdoubË_
 
__x
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

314 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

319 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

327 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

331 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

332 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

339 
__MATHCALL
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

342 
__MATHCALL
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

346 
__MATHDECL_1
 (, 
__åşassify
,, (
_MdoubË_
 
__v®ue
))

347 
__©Œibu‹__
 ((
__cÚ¡__
));

350 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

351 
__©Œibu‹__
 ((
__cÚ¡__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

358 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

19 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


23 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


24 
	#_MATH_H_MATHDEF
 1

	)

26 
	~<b™s/wÜdsize.h
>

28 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

31 
	tæßt_t
;

32 
	tdoubË_t
;

38 
	tæßt_t
;

40 
	tdoubË_t
;

45 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

46 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

	@/usr/include/bits/mathinline.h

21 #iâdeà
_MATH_H


25 
	~<b™s/wÜdsize.h
>

27 #iâdeà
__ex‹º_šlše


28 
	#__MATH_INLINE
 
__šlše


	)

30 
	#__MATH_INLINE
 
__ex‹º_šlše


	)

34 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

37 
__MATH_INLINE
 

38 
__NTH
 (
	$__signb™f
 (
__x
))

40 #ià
__WORDSIZE
 == 32

41 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

42  
__u
.
__i
 < 0;

44 
__m
;

45 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

46  
__m
 & 0x8;

48 
	}
}

49 
__MATH_INLINE
 

50 
__NTH
 (
	$__signb™
 (
__x
))

52 #ià
__WORDSIZE
 == 32

53 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

54  
__u
.
__i
[1] < 0;

56 
__m
;

57 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

58  
__m
 & 0x80;

60 
	}
}

61 
__MATH_INLINE
 

62 
__NTH
 (
	$__signb™l
 (
__x
))

64 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

65  (
__u
.
__i
[2] & 0x8000) != 0;

66 
	}
}

	@/usr/include/bits/mman.h

20 #iâdeà
_SYS_MMAN_H


33 
	#PROT_READ
 0x1

	)

34 
	#PROT_WRITE
 0x2

	)

35 
	#PROT_EXEC
 0x4

	)

36 
	#PROT_NONE
 0x0

	)

37 
	#PROT_GROWSDOWN
 0x01000000

	)

39 
	#PROT_GROWSUP
 0x02000000

	)

43 
	#MAP_SHARED
 0x01

	)

44 
	#MAP_PRIVATE
 0x02

	)

45 #ifdeà
__USE_MISC


46 
	#MAP_TYPE
 0x0à

	)

50 
	#MAP_FIXED
 0x10

	)

51 #ifdeà
__USE_MISC


52 
	#MAP_FILE
 0

	)

53 
	#MAP_ANONYMOUS
 0x20

	)

54 
	#MAP_ANON
 
MAP_ANONYMOUS


	)

55 
	#MAP_32BIT
 0x40

	)

59 #ifdeà
__USE_MISC


60 
	#MAP_GROWSDOWN
 0x00100

	)

61 
	#MAP_DENYWRITE
 0x00800

	)

62 
	#MAP_EXECUTABLE
 0x01000

	)

63 
	#MAP_LOCKED
 0x02000

	)

64 
	#MAP_NORESERVE
 0x04000

	)

65 
	#MAP_POPULATE
 0x08000

	)

66 
	#MAP_NONBLOCK
 0x10000

	)

67 
	#MAP_STACK
 0x20000

	)

71 
	#MS_ASYNC
 1

	)

72 
	#MS_SYNC
 4

	)

73 
	#MS_INVALIDATE
 2

	)

76 
	#MCL_CURRENT
 1

	)

77 
	#MCL_FUTURE
 2

	)

81 #ifdeà
__USE_GNU


82 
	#MREMAP_MAYMOVE
 1

	)

83 
	#MREMAP_FIXED
 2

	)

87 #ifdeà
__USE_BSD


88 
	#MADV_NORMAL
 0

	)

89 
	#MADV_RANDOM
 1

	)

90 
	#MADV_SEQUENTIAL
 2

	)

91 
	#MADV_WILLNEED
 3

	)

92 
	#MADV_DONTNEED
 4

	)

93 
	#MADV_REMOVE
 9

	)

94 
	#MADV_DONTFORK
 10

	)

95 
	#MADV_DOFORK
 11

	)

96 
	#MADV_MERGEABLE
 12

	)

97 
	#MADV_UNMERGEABLE
 13

	)

98 
	#MADV_HWPOISON
 100

	)

102 #ifdeà
__USE_XOPEN2K


103 
	#POSIX_MADV_NORMAL
 0

	)

104 
	#POSIX_MADV_RANDOM
 1

	)

105 
	#POSIX_MADV_SEQUENTIAL
 2

	)

106 
	#POSIX_MADV_WILLNEED
 3

	)

107 
	#POSIX_MADV_DONTNEED
 4

	)

	@/usr/include/bits/nan.h

20 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

29 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

31 #–ià
defšed
 
__GNUC__


33 
	#NAN
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7fc00000UL }).
__d
)

	)

40 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#__Çn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

45 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


46 
	#__Çn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

49 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__Çn_uniÚ


50 
	g__©Œibu‹_u£d__
 = { 
__Çn_by‹s
 };

51 
	#NAN
 (
__Çn_uniÚ
.
__d
)

	)

	@/usr/include/bits/netdb.h

19 #iâdeà
_NETDB_H


27 
	sÃ‹Á


29 *
	mn_Çme
;

30 **
	mn_®Ÿ£s
;

31 
	mn_add¹y³
;

32 
ušt32_t
 
	mn_Ãt
;

	@/usr/include/bits/posix1_lim.h

25 #iâdef 
_BITS_POSIX1_LIM_H


26 
	#_BITS_POSIX1_LIM_H
 1

	)

32 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

35 
	#_POSIX_AIO_MAX
 1

	)

38 
	#_POSIX_ARG_MAX
 4096

	)

41 #ifdeà
__USE_XOPEN2K


42 
	#_POSIX_CHILD_MAX
 25

	)

44 
	#_POSIX_CHILD_MAX
 6

	)

48 
	#_POSIX_DELAYTIMER_MAX
 32

	)

52 
	#_POSIX_HOST_NAME_MAX
 255

	)

55 
	#_POSIX_LINK_MAX
 8

	)

58 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

61 
	#_POSIX_MAX_CANON
 255

	)

65 
	#_POSIX_MAX_INPUT
 255

	)

68 
	#_POSIX_MQ_OPEN_MAX
 8

	)

71 
	#_POSIX_MQ_PRIO_MAX
 32

	)

74 
	#_POSIX_NAME_MAX
 14

	)

77 #ifdeà
__USE_XOPEN2K


78 
	#_POSIX_NGROUPS_MAX
 8

	)

80 
	#_POSIX_NGROUPS_MAX
 0

	)

84 #ifdeà
__USE_XOPEN2K


85 
	#_POSIX_OPEN_MAX
 20

	)

87 
	#_POSIX_OPEN_MAX
 16

	)

90 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


93 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

97 
	#_POSIX_PATH_MAX
 256

	)

100 
	#_POSIX_PIPE_BUF
 512

	)

104 
	#_POSIX_RE_DUP_MAX
 255

	)

107 
	#_POSIX_RTSIG_MAX
 8

	)

110 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

113 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

116 
	#_POSIX_SIGQUEUE_MAX
 32

	)

119 
	#_POSIX_SSIZE_MAX
 32767

	)

122 
	#_POSIX_STREAM_MAX
 8

	)

125 
	#_POSIX_SYMLINK_MAX
 255

	)

129 
	#_POSIX_SYMLOOP_MAX
 8

	)

132 
	#_POSIX_TIMER_MAX
 32

	)

135 
	#_POSIX_TTY_NAME_MAX
 9

	)

138 
	#_POSIX_TZNAME_MAX
 6

	)

140 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


142 
	#_POSIX_QLIMIT
 1

	)

146 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

149 
	#_POSIX_UIO_MAXIOV
 16

	)

153 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

157 
	~<b™s/loÿl_lim.h
>

160 #iâdef 
SSIZE_MAX


161 
	#SSIZE_MAX
 
LONG_MAX


	)

168 #iâdef 
NGROUPS_MAX


169 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix2_lim.h

23 #iâdef 
_BITS_POSIX2_LIM_H


24 
	#_BITS_POSIX2_LIM_H
 1

	)

28 
	#_POSIX2_BC_BASE_MAX
 99

	)

31 
	#_POSIX2_BC_DIM_MAX
 2048

	)

34 
	#_POSIX2_BC_SCALE_MAX
 99

	)

37 
	#_POSIX2_BC_STRING_MAX
 1000

	)

41 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

45 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

48 
	#_POSIX2_LINE_MAX
 2048

	)

52 
	#_POSIX2_RE_DUP_MAX
 255

	)

56 
	#_POSIX2_CHARCLASS_NAME_MAX
 14

	)

63 #iâdef 
BC_BASE_MAX


64 
	#BC_BASE_MAX
 
_POSIX2_BC_BASE_MAX


	)

66 #iâdef 
BC_DIM_MAX


67 
	#BC_DIM_MAX
 
_POSIX2_BC_DIM_MAX


	)

69 #iâdef 
BC_SCALE_MAX


70 
	#BC_SCALE_MAX
 
_POSIX2_BC_SCALE_MAX


	)

72 #iâdef 
BC_STRING_MAX


73 
	#BC_STRING_MAX
 
_POSIX2_BC_STRING_MAX


	)

75 #iâdef 
COLL_WEIGHTS_MAX


76 
	#COLL_WEIGHTS_MAX
 255

	)

78 #iâdef 
EXPR_NEST_MAX


79 
	#EXPR_NEST_MAX
 
_POSIX2_EXPR_NEST_MAX


	)

81 #iâdef 
LINE_MAX


82 
	#LINE_MAX
 
_POSIX2_LINE_MAX


	)

84 #iâdef 
CHARCLASS_NAME_MAX


85 
	#CHARCLASS_NAME_MAX
 2048

	)

89 
	#RE_DUP_MAX
 (0x7fff)

	)

	@/usr/include/bits/posix_opt.h

20 #iâdef 
_BITS_POSIX_OPT_H


21 
	#_BITS_POSIX_OPT_H
 1

	)

24 
	#_POSIX_JOB_CONTROL
 1

	)

27 
	#_POSIX_SAVED_IDS
 1

	)

30 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

33 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

36 
	#_POSIX_FSYNC
 200809L

	)

39 
	#_POSIX_MAPPED_FILES
 200809L

	)

42 
	#_POSIX_MEMLOCK
 200809L

	)

45 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

48 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

51 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

55 
	#_POSIX_VDISABLE
 '\0'

	)

58 
	#_POSIX_NO_TRUNC
 1

	)

61 
	#_XOPEN_REALTIME
 1

	)

64 
	#_XOPEN_REALTIME_THREADS
 1

	)

67 
	#_XOPEN_SHM
 1

	)

70 
	#_POSIX_THREADS
 200809L

	)

73 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

74 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

77 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

80 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

83 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

86 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

90 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

92 #ifdeà
__USE_XOPEN2K8


94 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

97 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

101 
	#_POSIX_SEMAPHORES
 200809L

	)

104 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

107 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

108 
	#_POSIX_ASYNC_IO
 1

	)

110 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

112 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

115 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

118 
	#_LFS_LARGEFILE
 1

	)

119 
	#_LFS64_LARGEFILE
 1

	)

120 
	#_LFS64_STDIO
 1

	)

123 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

126 
	#_POSIX_CPUTIME
 0

	)

129 
	#_POSIX_THREAD_CPUTIME
 0

	)

132 
	#_POSIX_REGEXP
 1

	)

135 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

138 
	#_POSIX_SHELL
 1

	)

141 
	#_POSIX_TIMEOUTS
 200809L

	)

144 
	#_POSIX_SPIN_LOCKS
 200809L

	)

147 
	#_POSIX_SPAWN
 200809L

	)

150 
	#_POSIX_TIMERS
 200809L

	)

153 
	#_POSIX_BARRIERS
 200809L

	)

156 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

159 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

162 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

165 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

168 
	#_POSIX_ADVISORY_INFO
 200809L

	)

171 
	#_POSIX_IPV6
 200809L

	)

174 
	#_POSIX_RAW_SOCKETS
 200809L

	)

177 
	#_POSIX2_CHAR_TERM
 200809L

	)

180 
	#_POSIX_SPORADIC_SERVER
 -1

	)

181 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

184 
	#_POSIX_TRACE
 -1

	)

185 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

186 
	#_POSIX_TRACE_INHERIT
 -1

	)

187 
	#_POSIX_TRACE_LOG
 -1

	)

190 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

20 #iâdeà
_BITS_PTHREADTYPES_H


21 
	#_BITS_PTHREADTYPES_H
 1

	)

23 
	~<b™s/wÜdsize.h
>

25 #ià
__WORDSIZE
 == 64

26 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

27 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

28 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

29 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

30 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

31 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

32 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

33 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

34 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

36 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

37 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

38 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

39 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

40 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

41 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

42 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

43 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

44 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

50 
	t±h»ad_t
;

55 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

56 
	m__®ign
;

57 } 
	t±h»ad_©Œ_t
;

60 #ià
__WORDSIZE
 == 64

61 
	s__±h»ad_š‹º®_li¡


63 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

64 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

65 } 
	t__±h»ad_li¡_t
;

67 
	s__±h»ad_š‹º®_¦i¡


69 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

70 } 
	t__±h»ad_¦i¡_t
;

78 
	s__±h»ad_mu‹x_s


80 
	m__lock
;

81 
	m__couÁ
;

82 
	m__owÃr
;

83 #ià
__WORDSIZE
 == 64

84 
	m__nu£rs
;

88 
	m__kšd
;

89 #ià
__WORDSIZE
 == 64

90 
	m__¥šs
;

91 
__±h»ad_li¡_t
 
	m__li¡
;

92 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

94 
	m__nu£rs
;

95 
__ex‹nsiÚ__
 union

97 
	m__¥šs
;

98 
__±h»ad_¦i¡_t
 
	m__li¡
;

101 } 
	m__d©a
;

102 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

103 
	m__®ign
;

104 } 
	t±h»ad_mu‹x_t
;

108 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

109 
	m__®ign
;

110 } 
	t±h»ad_mu‹x©Œ_t
;

119 
	m__lock
;

120 
	m__fu‹x
;

121 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

122 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

123 
__ex‹nsiÚ__
 
	m__wok’_£q
;

124 *
	m__mu‹x
;

125 
	m__nwa™”s
;

126 
	m__brßdÿ¡_£q
;

127 } 
	m__d©a
;

128 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

129 
__ex‹nsiÚ__
 
	m__®ign
;

130 } 
	t±h»ad_cÚd_t
;

134 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

135 
	m__®ign
;

136 } 
	t±h»ad_cÚd©Œ_t
;

140 
	t±h»ad_key_t
;

144 
	t±h»ad_Úû_t
;

147 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


152 #ià
__WORDSIZE
 == 64

155 
	m__lock
;

156 
	m__Ä_»ad”s
;

157 
	m__»ad”s_wakeup
;

158 
	m__wr™”_wakeup
;

159 
	m__Ä_»ad”s_queued
;

160 
	m__Ä_wr™”s_queued
;

161 
	m__wr™”
;

162 
	m__sh¬ed
;

163 
	m__·d1
;

164 
	m__·d2
;

167 
	m__æags
;

168 } 
	m__d©a
;

172 
	m__lock
;

173 
	m__Ä_»ad”s
;

174 
	m__»ad”s_wakeup
;

175 
	m__wr™”_wakeup
;

176 
	m__Ä_»ad”s_queued
;

177 
	m__Ä_wr™”s_queued
;

180 
	m__æags
;

181 
	m__sh¬ed
;

182 
	m__·d1
;

183 
	m__·d2
;

184 
	m__wr™”
;

185 } 
	m__d©a
;

187 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

188 
	m__®ign
;

189 } 
	t±h»ad_rwlock_t
;

193 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

194 
	m__®ign
;

195 } 
	t±h»ad_rwlock©Œ_t
;

199 #ifdeà
__USE_XOPEN2K


201 vŞ©
	t±h»ad_¥šlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

209 
	m__®ign
;

210 } 
	t±h»ad_b¬r›r_t
;

214 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

215 
	m__®ign
;

216 } 
	t±h»ad_b¬r›¿‰r_t
;

220 #ià
__WORDSIZE
 == 32

222 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/resource.h

21 #iâdeà
_SYS_RESOURCE_H


25 
	~<b™s/ty³s.h
>

33 
	e__¾im™_»sourû


36 
	mRLIMIT_CPU
 = 0,

37 
	#RLIMIT_CPU
 
RLIMIT_CPU


	)

40 
	mRLIMIT_FSIZE
 = 1,

41 
	#RLIMIT_FSIZE
 
RLIMIT_FSIZE


	)

44 
	mRLIMIT_DATA
 = 2,

45 
	#RLIMIT_DATA
 
RLIMIT_DATA


	)

48 
	mRLIMIT_STACK
 = 3,

49 
	#RLIMIT_STACK
 
RLIMIT_STACK


	)

52 
	mRLIMIT_CORE
 = 4,

53 
	#RLIMIT_CORE
 
RLIMIT_CORE


	)

59 
	m__RLIMIT_RSS
 = 5,

60 
	#RLIMIT_RSS
 
__RLIMIT_RSS


	)

63 
	mRLIMIT_NOFILE
 = 7,

64 
	m__RLIMIT_OFILE
 = 
RLIMIT_NOFILE
,

65 
	#RLIMIT_NOFILE
 
RLIMIT_NOFILE


	)

66 
	#RLIMIT_OFILE
 
__RLIMIT_OFILE


	)

69 
	mRLIMIT_AS
 = 9,

70 
	#RLIMIT_AS
 
RLIMIT_AS


	)

73 
	m__RLIMIT_NPROC
 = 6,

74 
	#RLIMIT_NPROC
 
__RLIMIT_NPROC


	)

77 
	m__RLIMIT_MEMLOCK
 = 8,

78 
	#RLIMIT_MEMLOCK
 
__RLIMIT_MEMLOCK


	)

81 
	m__RLIMIT_LOCKS
 = 10,

82 
	#RLIMIT_LOCKS
 
__RLIMIT_LOCKS


	)

85 
	m__RLIMIT_SIGPENDING
 = 11,

86 
	#RLIMIT_SIGPENDING
 
__RLIMIT_SIGPENDING


	)

89 
	m__RLIMIT_MSGQUEUE
 = 12,

90 
	#RLIMIT_MSGQUEUE
 
__RLIMIT_MSGQUEUE


	)

95 
	m__RLIMIT_NICE
 = 13,

96 
	#RLIMIT_NICE
 
__RLIMIT_NICE


	)

100 
	m__RLIMIT_RTPRIO
 = 14,

101 
	#RLIMIT_RTPRIO
 
__RLIMIT_RTPRIO


	)

103 
	m__RLIMIT_NLIMITS
 = 15,

104 
	m__RLIM_NLIMITS
 = 
__RLIMIT_NLIMITS


105 
	#RLIMIT_NLIMITS
 
__RLIMIT_NLIMITS


	)

106 
	#RLIM_NLIMITS
 
__RLIM_NLIMITS


	)

110 #iâdeà
__USE_FILE_OFFSET64


111 
	#RLIM_INFINITY
 (()(~0UL))

	)

113 
	#RLIM_INFINITY
 0xffffffffffffffffuLL

	)

116 #ifdeà
__USE_LARGEFILE64


117 
	#RLIM64_INFINITY
 0xffffffffffffffffuLL

	)

121 
	#RLIM_SAVED_MAX
 
RLIM_INFINITY


	)

122 
	#RLIM_SAVED_CUR
 
RLIM_INFINITY


	)

126 #iâdeà
__USE_FILE_OFFSET64


127 
__¾im_t
 
	t¾im_t
;

129 
__¾im64_t
 
	t¾im_t
;

131 #ifdeà
__USE_LARGEFILE64


132 
__¾im64_t
 
	t¾im64_t
;

135 
	s¾im™


138 
¾im_t
 
	m¾im_cur
;

140 
¾im_t
 
	m¾im_max
;

143 #ifdeà
__USE_LARGEFILE64


144 
	s¾im™64


147 
¾im64_t
 
	m¾im_cur
;

149 
¾im64_t
 
	m¾im_max
;

154 
	e__ru§ge_who


157 
	mRUSAGE_SELF
 = 0,

158 
	#RUSAGE_SELF
 
RUSAGE_SELF


	)

161 
	mRUSAGE_CHILDREN
 = -1

162 
	#RUSAGE_CHILDREN
 
RUSAGE_CHILDREN


	)

164 #ifdeà
__USE_GNU


167 
	mRUSAGE_THREAD
 = 1

168 
	#RUSAGE_THREAD
 
RUSAGE_THREAD


	)

170 
	#RUSAGE_LWP
 
RUSAGE_THREAD


	)

174 
	#__Ãed_timev®


	)

175 
	~<b™s/time.h
>

178 
	sru§ge


181 
timev®
 
	mru_utime
;

183 
timev®
 
	mru_¡ime
;

185 
	mru_maxrss
;

188 
	mru_ixrss
;

190 
	mru_idrss
;

192 
	mru_i¤ss
;

195 
	mru_mšæt
;

197 
	mru_majæt
;

199 
	mru_nsw­
;

202 
	mru_šblock
;

204 
	mru_oublock
;

206 
	mru_msg¢d
;

208 
	mru_msgrcv
;

210 
	mru_nsigÇls
;

214 
	mru_nvcsw
;

217 
	mru_nivcsw
;

221 
	#PRIO_MIN
 -20

	)

222 
	#PRIO_MAX
 20

	)

226 
	e__´iÜ™y_which


228 
	mPRIO_PROCESS
 = 0,

229 
	#PRIO_PROCESS
 
PRIO_PROCESS


	)

230 
	mPRIO_PGRP
 = 1,

231 
	#PRIO_PGRP
 
PRIO_PGRP


	)

232 
	mPRIO_USER
 = 2

233 
	#PRIO_USER
 
PRIO_USER


	)

	@/usr/include/bits/sched.h

22 #iâdeà
__Ãed_sched·¿m


24 #iâdeà
_SCHED_H


30 
	#SCHED_OTHER
 0

	)

31 
	#SCHED_FIFO
 1

	)

32 
	#SCHED_RR
 2

	)

33 #ifdeà
__USE_GNU


34 
	#SCHED_BATCH
 3

	)

37 #ifdeà
__USE_MISC


39 
	#CSIGNAL
 0x000000fà

	)

40 
	#CLONE_VM
 0x00000100

	)

41 
	#CLONE_FS
 0x00000200

	)

42 
	#CLONE_FILES
 0x00000400

	)

43 
	#CLONE_SIGHAND
 0x00000800

	)

44 
	#CLONE_PTRACE
 0x00002000

	)

45 
	#CLONE_VFORK
 0x00004000

	)

47 
	#CLONE_PARENT
 0x00008000

	)

49 
	#CLONE_THREAD
 0x00010000

	)

50 
	#CLONE_NEWNS
 0x00020000

	)

51 
	#CLONE_SYSVSEM
 0x00040000

	)

52 
	#CLONE_SETTLS
 0x00080000

	)

53 
	#CLONE_PARENT_SETTID
 0x00100000

	)

55 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

57 
	#CLONE_DETACHED
 0x00400000

	)

58 
	#CLONE_UNTRACED
 0x00800000

	)

60 
	#CLONE_CHILD_SETTID
 0x01000000

	)

62 
	#CLONE_NEWUTS
 0x04000000

	)

63 
	#CLONE_NEWIPC
 0x08000000

	)

64 
	#CLONE_NEWUSER
 0x10000000

	)

65 
	#CLONE_NEWPID
 0x20000000

	)

66 
	#CLONE_NEWNET
 0x40000000

	)

67 
	#CLONE_IO
 0x80000000

	)

71 
	ssched_·¿m


73 
	m__sched_´iÜ™y
;

76 
	g__BEGIN_DECLS


78 #ifdeà
__USE_MISC


80 
şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

81 
__æags
, *
__¬g
, ...è
__THROW
;

84 
	$unsh¬e
 (
__æags
è
__THROW
;

87 
	$sched_g‘ıu
 (è
__THROW
;

90 
__END_DECLS


94 #ià!
defšed
 
__defšed_sched·¿m
 \

95 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

96 
	#__defšed_sched·¿m
 1

	)

98 
	s__sched_·¿m


100 
__sched_´iÜ™y
;

102 #undeà
__Ãed_sched·¿m


106 #ià
defšed
 
_SCHED_H
 && !defšed 
__ıu_£t_t_defšed


107 
	#__ıu_£t_t_defšed


	)

109 
	#__CPU_SETSIZE
 1024

	)

110 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

113 
	t__ıu_mask
;

116 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

117 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

122 
__ıu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

123 } 
	tıu_£t_t
;

126 #ià
	`__GNUC_PREREQ
 (2, 91)

127 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

128 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

130 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

132 
size_t
 
__i
; \

133 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

134 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

135 
__i
 = 0; __˜< 
__imax
; ++__i) \

136 
__b™s
[
__i
] = 0; \

137 
	}
} 0)

	)

139 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

140 (
__ex‹nsiÚ__
 \

141 ({ 
size_t
 
__ıu
 = (
ıu
); \

142 
__ıu
 < 8 * (
£tsize
) \

143 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

144 |ğ
	`__CPUMASK
 (
__ıu
)) \

145 : 0; }))

	)

146 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

147 (
__ex‹nsiÚ__
 \

148 ({ 
size_t
 
__ıu
 = (
ıu
); \

149 
__ıu
 < 8 * (
£tsize
) \

150 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

151 &ğ~
	`__CPUMASK
 (
__ıu
)) \

152 : 0; }))

	)

153 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

154 (
__ex‹nsiÚ__
 \

155 ({ 
size_t
 
__ıu
 = (
ıu
); \

156 
__ıu
 < 8 * (
£tsize
) \

157 ? ((((
__cÚ¡
 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

158 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

159 : 0; }))

	)

161 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

162 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

164 #ià
__GNUC_PREREQ
 (2, 91)

165 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

166 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

168 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

169 (
__ex‹nsiÚ__
 \

170 ({ 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

171 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

172 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

173 
size_t
 
__i
; \

174 
__i
 = 0; __˜< 
__imax
; ++__i) \

175 ià(
__b™s
[
__i
] != __bits[__i]) \

177 
__i
 =ğ
__imax
; }))

	)

180 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

181 (
__ex‹nsiÚ__
 \

182 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

183 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

184 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

185 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

186 
size_t
 
__i
; \

187 
__i
 = 0; __˜< 
__imax
; ++__i) \

188 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

189 
__de¡
; }))

	)

191 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

192 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

193 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

194 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

196 
__BEGIN_DECLS


198 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

199 
__THROW
;

200 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

201 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

203 
__END_DECLS


	@/usr/include/bits/setjmp.h

20 #iâdeà
_BITS_SETJMP_H


21 
	#_BITS_SETJMP_H
 1

	)

23 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


27 
	~<b™s/wÜdsize.h
>

29 #iâdeà
_ASM


31 #ià
__WORDSIZE
 == 64

32 
	t__jmp_buf
[8];

34 
	t__jmp_buf
[6];

	@/usr/include/bits/setjmp2.h

20 #iâdeà
_SETJMP_H


25 #ifdeà
__REDIRECT_NTH


26 
__REDIRECT_NTH
 (
lÚgjmp
,

27 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

28 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

29 
__REDIRECT_NTH
 (
_lÚgjmp
,

30 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

31 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

32 
__REDIRECT_NTH
 (
siglÚgjmp
,

33 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

34 
__lÚgjmp_chk
è
__©Œibu‹__
 ((
__nÜ‘uº__
));

36 
__lÚgjmp_chk
 (
__jmp_buf_g
 
__’v
[1], 
__v®
),

37 
__THROW
 
__©Œibu‹__
 ((
__nÜ‘uº__
));

38 
	#lÚgjmp
 
__lÚgjmp_chk


	)

39 
	#_lÚgjmp
 
__lÚgjmp_chk


	)

40 
	#siglÚgjmp
 
__lÚgjmp_chk


	)

	@/usr/include/bits/sigaction.h

20 #iâdeà
_SIGNAL_H


25 
	ssigaùiÚ


28 #ifdeà
__USE_POSIX199309


32 
__sighªdËr_t
 
	m§_hªdËr
;

34 (*
	m§_sigaùiÚ
è(, 
	msigšfo_t
 *, *);

36 
	m__sigaùiÚ_hªdËr
;

37 
	#§_hªdËr
 
__sigaùiÚ_hªdËr
.
§_hªdËr


	)

38 
	#§_sigaùiÚ
 
__sigaùiÚ_hªdËr
.
§_sigaùiÚ


	)

40 
__sighªdËr_t
 
	m§_hªdËr
;

44 
__sig£t_t
 
	m§_mask
;

47 
	m§_æags
;

50 (*
	m§_»¡Ü”
) ();

54 
	#SA_NOCLDSTOP
 1

	)

55 
	#SA_NOCLDWAIT
 2

	)

56 
	#SA_SIGINFO
 4

	)

58 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC


59 
	#SA_ONSTACK
 0x08000000

	)

60 
	#SA_RESTART
 0x10000000

	)

61 
	#SA_NODEFER
 0x40000000

	)

63 
	#SA_RESETHAND
 0x80000000

	)

65 #ifdeà
__USE_MISC


66 
	#SA_INTERRUPT
 0x20000000

	)

69 
	#SA_NOMASK
 
SA_NODEFER


	)

70 
	#SA_ONESHOT
 
SA_RESETHAND


	)

71 
	#SA_STACK
 
SA_ONSTACK


	)

75 
	#SIG_BLOCK
 0

	)

76 
	#SIG_UNBLOCK
 1

	)

77 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

19 #iâdeà
_BITS_SIGCONTEXT_H


20 
	#_BITS_SIGCONTEXT_H
 1

	)

22 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_SYS_UCONTEXT_H


26 
	~<b™s/wÜdsize.h
>

28 
	s_å»g


30 
	msignifiÿnd
[4];

31 
	mexpÚ’t
;

34 
	s_åx»g


36 
	msignifiÿnd
[4];

37 
	mexpÚ’t
;

38 
	m·ddšg
[3];

41 
	s_xmm»g


43 
__ušt32_t
 
	m–em’t
[4];

48 #ià
__WORDSIZE
 == 32

50 
	s_å¡©e


53 
__ušt32_t
 
	mcw
;

54 
__ušt32_t
 
	msw
;

55 
__ušt32_t
 
	mg
;

56 
__ušt32_t
 
	moff
;

57 
__ušt32_t
 
	mcs£l
;

58 
__ušt32_t
 
	md©aoff
;

59 
__ušt32_t
 
	md©a£l
;

60 
_å»g
 
	m_¡
[8];

61 
	m¡©us
;

62 
	mmagic
;

65 
__ušt32_t
 
	m_fx¤_’v
[6];

66 
__ušt32_t
 
	mmxc¤
;

67 
__ušt32_t
 
	m»£rved
;

68 
_åx»g
 
	m_fx¤_¡
[8];

69 
_xmm»g
 
	m_xmm
[8];

70 
__ušt32_t
 
	m·ddšg
[56];

73 #iâdeà
sigcÚ‹xt_¡ruù


78 
	#sigcÚ‹xt_¡ruù
 
sigcÚ‹xt


	)

81 
	ssigcÚ‹xt


83 
	mgs
, 
	m__gsh
;

84 
	mfs
, 
	m__fsh
;

85 
	mes
, 
	m__esh
;

86 
	mds
, 
	m__dsh
;

87 
	medi
;

88 
	mesi
;

89 
	mebp
;

90 
	me¥
;

91 
	mebx
;

92 
	medx
;

93 
	mecx
;

94 
	m—x
;

95 
	mŒ­no
;

96 
	m”r
;

97 
	me
;

98 
	mcs
, 
	m__csh
;

99 
	meæags
;

100 
	me¥_©_sigÇl
;

101 
	mss
, 
	m__ssh
;

102 
_å¡©e
 * 
	må¡©e
;

103 
	mŞdmask
;

104 
	mü2
;

109 
	s_å¡©e


112 
__ušt16_t
 
	mcwd
;

113 
__ušt16_t
 
	mswd
;

114 
__ušt16_t
 
	máw
;

115 
__ušt16_t
 
	mfİ
;

116 
__ušt64_t
 
	mr
;

117 
__ušt64_t
 
	mrdp
;

118 
__ušt32_t
 
	mmxc¤
;

119 
__ušt32_t
 
	mmxü_mask
;

120 
_åx»g
 
	m_¡
[8];

121 
_xmm»g
 
	m_xmm
[16];

122 
__ušt32_t
 
	m·ddšg
[24];

125 
	ssigcÚ‹xt


127 
	mr8
;

128 
	mr9
;

129 
	mr10
;

130 
	mr11
;

131 
	mr12
;

132 
	mr13
;

133 
	mr14
;

134 
	mr15
;

135 
	mrdi
;

136 
	mrsi
;

137 
	mrbp
;

138 
	mrbx
;

139 
	mrdx
;

140 
	m¿x
;

141 
	mrcx
;

142 
	mr¥
;

143 
	mr
;

144 
	meæags
;

145 
	mcs
;

146 
	mgs
;

147 
	mfs
;

148 
	m__·d0
;

149 
	m”r
;

150 
	mŒ­no
;

151 
	mŞdmask
;

152 
	mü2
;

153 
_å¡©e
 * 
	må¡©e
;

154 
	m__»£rved1
 [8];

	@/usr/include/bits/siginfo.h

20 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
__Ãed_sigšfo_t
 \

21 && !
defšed
 
	g__Ãed_sigev’t_t


25 
	~<b™s/wÜdsize.h
>

27 #ià(!
defšed
 
__have_sigv®_t
 \

28 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
 \

29 || 
defšed
 
	g__Ãed_sigev’t_t
))

30 
	#__have_sigv®_t
 1

	)

33 
	usigv®


35 
	msiv®_št
;

36 *
	msiv®_±r
;

37 } 
	tsigv®_t
;

40 #ià(!
defšed
 
__have_sigšfo_t
 \

41 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
))

42 
	#__have_sigšfo_t
 1

	)

44 
	#__SI_MAX_SIZE
 128

	)

45 #ià
__WORDSIZE
 == 64

46 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 4)

	)

48 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 3)

	)

51 
	ssigšfo


53 
	msi_signo
;

54 
	msi_”ºo
;

56 
	msi_code
;

60 
	m_·d
[
__SI_PAD_SIZE
];

65 
__pid_t
 
	msi_pid
;

66 
__uid_t
 
	msi_uid
;

67 } 
	m_kl
;

72 
	msi_tid
;

73 
	msi_ov”run
;

74 
sigv®_t
 
	msi_sigv®
;

75 } 
	m_tim”
;

80 
__pid_t
 
	msi_pid
;

81 
__uid_t
 
	msi_uid
;

82 
sigv®_t
 
	msi_sigv®
;

83 } 
	m_¹
;

88 
__pid_t
 
	msi_pid
;

89 
__uid_t
 
	msi_uid
;

90 
	msi_¡©us
;

91 
__şock_t
 
	msi_utime
;

92 
__şock_t
 
	msi_¡ime
;

93 } 
	m_sigchld
;

98 *
	msi_addr
;

99 } 
	m_sigçuÉ
;

104 
	msi_bªd
;

105 
	msi_fd
;

106 } 
	m_sigpŞl
;

107 } 
	m_sif›lds
;

108 } 
	tsigšfo_t
;

112 
	#si_pid
 
_sif›lds
.
_kl
.
si_pid


	)

113 
	#si_uid
 
_sif›lds
.
_kl
.
si_uid


	)

114 
	#si_tim”id
 
_sif›lds
.
_tim”
.
si_tid


	)

115 
	#si_ov”run
 
_sif›lds
.
_tim”
.
si_ov”run


	)

116 
	#si_¡©us
 
_sif›lds
.
_sigchld
.
si_¡©us


	)

117 
	#si_utime
 
_sif›lds
.
_sigchld
.
si_utime


	)

118 
	#si_¡ime
 
_sif›lds
.
_sigchld
.
si_¡ime


	)

119 
	#si_v®ue
 
_sif›lds
.
_¹
.
si_sigv®


	)

120 
	#si_št
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_št


	)

121 
	#si_±r
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_±r


	)

122 
	#si_addr
 
_sif›lds
.
_sigçuÉ
.
si_addr


	)

123 
	#si_bªd
 
_sif›lds
.
_sigpŞl
.
si_bªd


	)

124 
	#si_fd
 
_sif›lds
.
_sigpŞl
.
si_fd


	)

131 
	mSI_ASYNCNL
 = -60,

132 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

133 
	mSI_TKILL
 = -6,

134 
	#SI_TKILL
 
SI_TKILL


	)

135 
	mSI_SIGIO
,

136 
	#SI_SIGIO
 
SI_SIGIO


	)

137 
	mSI_ASYNCIO
,

138 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

139 
	mSI_MESGQ
,

140 
	#SI_MESGQ
 
SI_MESGQ


	)

141 
	mSI_TIMER
,

142 
	#SI_TIMER
 
SI_TIMER


	)

143 
	mSI_QUEUE
,

144 
	#SI_QUEUE
 
SI_QUEUE


	)

145 
	mSI_USER
,

146 
	#SI_USER
 
SI_USER


	)

147 
	mSI_KERNEL
 = 0x80

148 
	#SI_KERNEL
 
SI_KERNEL


	)

155 
	mILL_ILLOPC
 = 1,

156 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

157 
	mILL_ILLOPN
,

158 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

159 
	mILL_ILLADR
,

160 
	#ILL_ILLADR
 
ILL_ILLADR


	)

161 
	mILL_ILLTRP
,

162 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

163 
	mILL_PRVOPC
,

164 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

165 
	mILL_PRVREG
,

166 
	#ILL_PRVREG
 
ILL_PRVREG


	)

167 
	mILL_COPROC
,

168 
	#ILL_COPROC
 
ILL_COPROC


	)

169 
	mILL_BADSTK


170 
	#ILL_BADSTK
 
ILL_BADSTK


	)

176 
	mFPE_INTDIV
 = 1,

177 
	#FPE_INTDIV
 
FPE_INTDIV


	)

178 
	mFPE_INTOVF
,

179 
	#FPE_INTOVF
 
FPE_INTOVF


	)

180 
	mFPE_FLTDIV
,

181 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

182 
	mFPE_FLTOVF
,

183 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

184 
	mFPE_FLTUND
,

185 
	#FPE_FLTUND
 
FPE_FLTUND


	)

186 
	mFPE_FLTRES
,

187 
	#FPE_FLTRES
 
FPE_FLTRES


	)

188 
	mFPE_FLTINV
,

189 
	#FPE_FLTINV
 
FPE_FLTINV


	)

190 
	mFPE_FLTSUB


191 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

197 
	mSEGV_MAPERR
 = 1,

198 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

199 
	mSEGV_ACCERR


200 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

206 
	mBUS_ADRALN
 = 1,

207 
	#BUS_ADRALN
 
BUS_ADRALN


	)

208 
	mBUS_ADRERR
,

209 
	#BUS_ADRERR
 
BUS_ADRERR


	)

210 
	mBUS_OBJERR


211 
	#BUS_OBJERR
 
BUS_OBJERR


	)

217 
	mTRAP_BRKPT
 = 1,

218 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

219 
	mTRAP_TRACE


220 
	#TRAP_TRACE
 
TRAP_TRACE


	)

226 
	mCLD_EXITED
 = 1,

227 
	#CLD_EXITED
 
CLD_EXITED


	)

228 
	mCLD_KILLED
,

229 
	#CLD_KILLED
 
CLD_KILLED


	)

230 
	mCLD_DUMPED
,

231 
	#CLD_DUMPED
 
CLD_DUMPED


	)

232 
	mCLD_TRAPPED
,

233 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

234 
	mCLD_STOPPED
,

235 
	#CLD_STOPPED
 
CLD_STOPPED


	)

236 
	mCLD_CONTINUED


237 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

243 
	mPOLL_IN
 = 1,

244 
	#POLL_IN
 
POLL_IN


	)

245 
	mPOLL_OUT
,

246 
	#POLL_OUT
 
POLL_OUT


	)

247 
	mPOLL_MSG
,

248 
	#POLL_MSG
 
POLL_MSG


	)

249 
	mPOLL_ERR
,

250 
	#POLL_ERR
 
POLL_ERR


	)

251 
	mPOLL_PRI
,

252 
	#POLL_PRI
 
POLL_PRI


	)

253 
	mPOLL_HUP


254 
	#POLL_HUP
 
POLL_HUP


	)

257 #undeà
__Ãed_sigšfo_t


261 #ià(
defšed
 
_SIGNAL_H
 || defšed 
__Ãed_sigev’t_t
) \

262 && !
defšed
 
	g__have_sigev’t_t


263 
	#__have_sigev’t_t
 1

	)

266 
	#__SIGEV_MAX_SIZE
 64

	)

267 #ià
__WORDSIZE
 == 64

268 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 4)

	)

270 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 3)

	)

273 
	ssigev’t


275 
sigv®_t
 
	msigev_v®ue
;

276 
	msigev_signo
;

277 
	msigev_nÙify
;

281 
	m_·d
[
__SIGEV_PAD_SIZE
];

285 
__pid_t
 
	m_tid
;

289 (*
	m_funùiÚ
è(
	msigv®_t
);

290 *
	m_©Œibu‹
;

291 } 
	m_sigev_th»ad
;

292 } 
	m_sigev_un
;

293 } 
	tsigev’t_t
;

296 
	#sigev_nÙify_funùiÚ
 
_sigev_un
.
_sigev_th»ad
.
_funùiÚ


	)

297 
	#sigev_nÙify_©Œibu‹s
 
_sigev_un
.
_sigev_th»ad
.
_©Œibu‹


	)

302 
	mSIGEV_SIGNAL
 = 0,

303 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

304 
	mSIGEV_NONE
,

305 
	#SIGEV_NONE
 
SIGEV_NONE


	)

306 
	mSIGEV_THREAD
,

307 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

309 
	mSIGEV_THREAD_ID
 = 4

310 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

20 #ifdef 
_SIGNAL_H


23 
	#SIG_ERR
 ((
__sighªdËr_t
è-1è

	)

24 
	#SIG_DFL
 ((
__sighªdËr_t
è0è

	)

25 
	#SIG_IGN
 ((
__sighªdËr_t
è1è

	)

27 #ifdeà
__USE_UNIX98


28 
	#SIG_HOLD
 ((
__sighªdËr_t
è2è

	)

33 
	#SIGHUP
 1

	)

34 
	#SIGINT
 2

	)

35 
	#SIGQUIT
 3

	)

36 
	#SIGILL
 4

	)

37 
	#SIGTRAP
 5

	)

38 
	#SIGABRT
 6

	)

39 
	#SIGIOT
 6

	)

40 
	#SIGBUS
 7

	)

41 
	#SIGFPE
 8

	)

42 
	#SIGKILL
 9

	)

43 
	#SIGUSR1
 10

	)

44 
	#SIGSEGV
 11

	)

45 
	#SIGUSR2
 12

	)

46 
	#SIGPIPE
 13

	)

47 
	#SIGALRM
 14

	)

48 
	#SIGTERM
 15

	)

49 
	#SIGSTKFLT
 16

	)

50 
	#SIGCLD
 
SIGCHLD


	)

51 
	#SIGCHLD
 17

	)

52 
	#SIGCONT
 18

	)

53 
	#SIGSTOP
 19

	)

54 
	#SIGTSTP
 20

	)

55 
	#SIGTTIN
 21

	)

56 
	#SIGTTOU
 22

	)

57 
	#SIGURG
 23

	)

58 
	#SIGXCPU
 24

	)

59 
	#SIGXFSZ
 25

	)

60 
	#SIGVTALRM
 26

	)

61 
	#SIGPROF
 27

	)

62 
	#SIGWINCH
 28

	)

63 
	#SIGPOLL
 
SIGIO


	)

64 
	#SIGIO
 29

	)

65 
	#SIGPWR
 30

	)

66 
	#SIGSYS
 31

	)

67 
	#SIGUNUSED
 31

	)

69 
	#_NSIG
 65

	)

72 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

73 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

77 
	#__SIGRTMIN
 32

	)

78 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

21 #iâdef 
_SIGSET_H_ty³s


22 
	#_SIGSET_H_ty³s
 1

	)

24 
	t__sig_©omic_t
;

28 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

31 
	m__v®
[
_SIGSET_NWORDS
];

32 } 
	t__sig£t_t
;

43 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


44 
	#_SIGSET_H_âs
 1

	)

46 #iâdeà
_EXTERN_INLINE


47 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

51 
	#__sigmask
(
sig
) \

52 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

55 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

57 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

58 
	#__sigem±y£t
(
£t
) \

59 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

60 
sig£t_t
 *
__£t
 = (
£t
); \

61 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

62 0; }))

	)

63 
	#__sigfl£t
(
£t
) \

64 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

65 
sig£t_t
 *
__£t
 = (
£t
); \

66 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

67 0; }))

	)

69 #ifdeà
__USE_GNU


73 
	#__sigi£m±y£t
(
£t
) \

74 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

75 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

76 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

77 !
__»t
 && --
__út
 >= 0) \

78 
__»t
 = 
__£t
->
__v®
[
__út
]; \

79 
__»t
 =ğ0; }))

	)

80 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

81 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

82 
sig£t_t
 *
__de¡
 = (
de¡
); \

83 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

84 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

85 --
__út
 >= 0) \

86 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

87 & 
__right
->
__v®
[
__út
]); \

88 0; }))

	)

89 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

90 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

91 
sig£t_t
 *
__de¡
 = (
de¡
); \

92 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

93 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

94 --
__út
 >= 0) \

95 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

96 | 
__right
->
__v®
[
__út
]); \

97 0; }))

	)

104 
__sigismemb”
 (
__cÚ¡
 
__sig£t_t
 *, );

105 
__sigadd£t
 (
__sig£t_t
 *, );

106 
__sigd–£t
 (
__sig£t_t
 *, );

108 #ifdeà
__USE_EXTERN_INLINES


109 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

110 
_EXTERN_INLINE
 \

111 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

113 
__mask
 = 
	`__sigmask
 (
__sig
); \

114 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

115  
BODY
; \

116 }

	)

118 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
è? 1 : 0, 
__cÚ¡
)

119 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

120 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

122 #undeà
__SIGSETFN


	@/usr/include/bits/sigstack.h

20 #iâdeà
_SIGNAL_H


26 
	ssig¡ack


28 *
	mss_¥
;

29 
	mss_Ú¡ack
;

36 
	mSS_ONSTACK
 = 1,

37 
	#SS_ONSTACK
 
SS_ONSTACK


	)

38 
	mSS_DISABLE


39 
	#SS_DISABLE
 
SS_DISABLE


	)

43 
	#MINSIGSTKSZ
 2048

	)

46 
	#SIGSTKSZ
 8192

	)

50 
	ssig®t¡ack


52 *
	mss_¥
;

53 
	mss_æags
;

54 
size_t
 
	mss_size
;

55 } 
	t¡ack_t
;

	@/usr/include/bits/sigthread.h

20 #iâdeà
_BITS_SIGTHREAD_H


21 
	#_BITS_SIGTHREAD_H
 1

	)

23 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_PTHREAD_H


31 
	$±h»ad_sigmask
 (
__how
,

32 
__cÚ¡
 
__sig£t_t
 *
__»¡riù
 
__Ãwmask
,

33 
__sig£t_t
 *
__»¡riù
 
__Şdmask
)
__THROW
;

36 
	$±h»ad_kl
 (
±h»ad_t
 
__th»adid
, 
__signo
è
__THROW
;

38 #ifdeà
__USE_GNU


40 
	$±h»ad_sigqueue
 (
±h»ad_t
 
__th»adid
, 
__signo
,

41 cÚ¡ 
sigv®
 
__v®ue
è
__THROW
;

	@/usr/include/bits/sockaddr.h

24 #iâdeà
_BITS_SOCKADDR_H


25 
	#_BITS_SOCKADDR_H
 1

	)

29 
	t§_çmy_t
;

35 
	#__SOCKADDR_COMMON
(
§_´efix
) \

36 
§_çmy_t
 
§_´efix
##
çmy


	)

38 
	#__SOCKADDR_COMMON_SIZE
 ( ())

	)

	@/usr/include/bits/socket.h

21 #iâdeà
__BITS_SOCKET_H


22 
	#__BITS_SOCKET_H


	)

24 #iâdeà
_SYS_SOCKET_H


28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

31 
	~<sys/ty³s.h
>

34 #iâdeà
__sockËn_t_defšed


35 
__sockËn_t
 
	tsockËn_t
;

36 
	#__sockËn_t_defšed


	)

40 
	e__sock‘_ty³


42 
	mSOCK_STREAM
 = 1,

44 
	#SOCK_STREAM
 
SOCK_STREAM


	)

45 
	mSOCK_DGRAM
 = 2,

47 
	#SOCK_DGRAM
 
SOCK_DGRAM


	)

48 
	mSOCK_RAW
 = 3,

49 
	#SOCK_RAW
 
SOCK_RAW


	)

50 
	mSOCK_RDM
 = 4,

51 
	#SOCK_RDM
 
SOCK_RDM


	)

52 
	mSOCK_SEQPACKET
 = 5,

54 
	#SOCK_SEQPACKET
 
SOCK_SEQPACKET


	)

55 
	mSOCK_DCCP
 = 6,

56 
	#SOCK_DCCP
 
SOCK_DCCP


	)

57 
	mSOCK_PACKET
 = 10,

60 
	#SOCK_PACKET
 
SOCK_PACKET


	)

65 
	mSOCK_CLOEXEC
 = 02000000,

67 
	#SOCK_CLOEXEC
 
SOCK_CLOEXEC


	)

68 
	mSOCK_NONBLOCK
 = 04000

70 
	#SOCK_NONBLOCK
 
SOCK_NONBLOCK


	)

74 
	#PF_UNSPEC
 0

	)

75 
	#PF_LOCAL
 1

	)

76 
	#PF_UNIX
 
PF_LOCAL


	)

77 
	#PF_FILE
 
PF_LOCAL


	)

78 
	#PF_INET
 2

	)

79 
	#PF_AX25
 3

	)

80 
	#PF_IPX
 4

	)

81 
	#PF_APPLETALK
 5

	)

82 
	#PF_NETROM
 6

	)

83 
	#PF_BRIDGE
 7

	)

84 
	#PF_ATMPVC
 8

	)

85 
	#PF_X25
 9

	)

86 
	#PF_INET6
 10

	)

87 
	#PF_ROSE
 11

	)

88 
	#PF_DECÃt
 12

	)

89 
	#PF_NETBEUI
 13

	)

90 
	#PF_SECURITY
 14

	)

91 
	#PF_KEY
 15

	)

92 
	#PF_NETLINK
 16

	)

93 
	#PF_ROUTE
 
PF_NETLINK


	)

94 
	#PF_PACKET
 17

	)

95 
	#PF_ASH
 18

	)

96 
	#PF_ECONET
 19

	)

97 
	#PF_ATMSVC
 20

	)

98 
	#PF_RDS
 21

	)

99 
	#PF_SNA
 22

	)

100 
	#PF_IRDA
 23

	)

101 
	#PF_PPPOX
 24

	)

102 
	#PF_WANPIPE
 25

	)

103 
	#PF_LLC
 26

	)

104 
	#PF_CAN
 29

	)

105 
	#PF_TIPC
 30

	)

106 
	#PF_BLUETOOTH
 31

	)

107 
	#PF_IUCV
 32

	)

108 
	#PF_RXRPC
 33

	)

109 
	#PF_ISDN
 34

	)

110 
	#PF_PHONET
 35

	)

111 
	#PF_IEEE802154
 36

	)

112 
	#PF_MAX
 37

	)

115 
	#AF_UNSPEC
 
PF_UNSPEC


	)

116 
	#AF_LOCAL
 
PF_LOCAL


	)

117 
	#AF_UNIX
 
PF_UNIX


	)

118 
	#AF_FILE
 
PF_FILE


	)

119 
	#AF_INET
 
PF_INET


	)

120 
	#AF_AX25
 
PF_AX25


	)

121 
	#AF_IPX
 
PF_IPX


	)

122 
	#AF_APPLETALK
 
PF_APPLETALK


	)

123 
	#AF_NETROM
 
PF_NETROM


	)

124 
	#AF_BRIDGE
 
PF_BRIDGE


	)

125 
	#AF_ATMPVC
 
PF_ATMPVC


	)

126 
	#AF_X25
 
PF_X25


	)

127 
	#AF_INET6
 
PF_INET6


	)

128 
	#AF_ROSE
 
PF_ROSE


	)

129 
	#AF_DECÃt
 
PF_DECÃt


	)

130 
	#AF_NETBEUI
 
PF_NETBEUI


	)

131 
	#AF_SECURITY
 
PF_SECURITY


	)

132 
	#AF_KEY
 
PF_KEY


	)

133 
	#AF_NETLINK
 
PF_NETLINK


	)

134 
	#AF_ROUTE
 
PF_ROUTE


	)

135 
	#AF_PACKET
 
PF_PACKET


	)

136 
	#AF_ASH
 
PF_ASH


	)

137 
	#AF_ECONET
 
PF_ECONET


	)

138 
	#AF_ATMSVC
 
PF_ATMSVC


	)

139 
	#AF_RDS
 
PF_RDS


	)

140 
	#AF_SNA
 
PF_SNA


	)

141 
	#AF_IRDA
 
PF_IRDA


	)

142 
	#AF_PPPOX
 
PF_PPPOX


	)

143 
	#AF_WANPIPE
 
PF_WANPIPE


	)

144 
	#AF_LLC
 
PF_LLC


	)

145 
	#AF_CAN
 
PF_CAN


	)

146 
	#AF_TIPC
 
PF_TIPC


	)

147 
	#AF_BLUETOOTH
 
PF_BLUETOOTH


	)

148 
	#AF_IUCV
 
PF_IUCV


	)

149 
	#AF_RXRPC
 
PF_RXRPC


	)

150 
	#AF_ISDN
 
PF_ISDN


	)

151 
	#AF_PHONET
 
PF_PHONET


	)

152 
	#AF_IEEE802154
 
PF_IEEE802154


	)

153 
	#AF_MAX
 
PF_MAX


	)

159 
	#SOL_RAW
 255

	)

160 
	#SOL_DECNET
 261

	)

161 
	#SOL_X25
 262

	)

162 
	#SOL_PACKET
 263

	)

163 
	#SOL_ATM
 264

	)

164 
	#SOL_AAL
 265

	)

165 
	#SOL_IRDA
 266

	)

168 
	#SOMAXCONN
 128

	)

171 
	~<b™s/sockaddr.h
>

174 
	ssockaddr


176 
__SOCKADDR_COMMON
 (
§_
);

177 
	m§_d©a
[14];

183 
	#__ss_®igÁy³
 

	)

184 
	#_SS_SIZE
 128

	)

185 
	#_SS_PADSIZE
 (
_SS_SIZE
 - (2 *  (
__ss_®igÁy³
)))

	)

187 
	ssockaddr_¡Üage


189 
__SOCKADDR_COMMON
 (
ss_
);

190 
__ss_®igÁy³
 
	m__ss_®ign
;

191 
	m__ss_·ddšg
[
_SS_PADSIZE
];

198 
	mMSG_OOB
 = 0x01,

199 
	#MSG_OOB
 
MSG_OOB


	)

200 
	mMSG_PEEK
 = 0x02,

201 
	#MSG_PEEK
 
MSG_PEEK


	)

202 
	mMSG_DONTROUTE
 = 0x04,

203 
	#MSG_DONTROUTE
 
MSG_DONTROUTE


	)

204 #ifdeà
__USE_GNU


206 
	mMSG_TRYHARD
 = 
MSG_DONTROUTE
,

207 
	#MSG_TRYHARD
 
MSG_DONTROUTE


	)

209 
	mMSG_CTRUNC
 = 0x08,

210 
	#MSG_CTRUNC
 
MSG_CTRUNC


	)

211 
	mMSG_PROXY
 = 0x10,

212 
	#MSG_PROXY
 
MSG_PROXY


	)

213 
	mMSG_TRUNC
 = 0x20,

214 
	#MSG_TRUNC
 
MSG_TRUNC


	)

215 
	mMSG_DONTWAIT
 = 0x40,

216 
	#MSG_DONTWAIT
 
MSG_DONTWAIT


	)

217 
	mMSG_EOR
 = 0x80,

218 
	#MSG_EOR
 
MSG_EOR


	)

219 
	mMSG_WAITALL
 = 0x100,

220 
	#MSG_WAITALL
 
MSG_WAITALL


	)

221 
	mMSG_FIN
 = 0x200,

222 
	#MSG_FIN
 
MSG_FIN


	)

223 
	mMSG_SYN
 = 0x400,

224 
	#MSG_SYN
 
MSG_SYN


	)

225 
	mMSG_CONFIRM
 = 0x800,

226 
	#MSG_CONFIRM
 
MSG_CONFIRM


	)

227 
	mMSG_RST
 = 0x1000,

228 
	#MSG_RST
 
MSG_RST


	)

229 
	mMSG_ERRQUEUE
 = 0x2000,

230 
	#MSG_ERRQUEUE
 
MSG_ERRQUEUE


	)

231 
	mMSG_NOSIGNAL
 = 0x4000,

232 
	#MSG_NOSIGNAL
 
MSG_NOSIGNAL


	)

233 
	mMSG_MORE
 = 0x8000,

234 
	#MSG_MORE
 
MSG_MORE


	)

236 
	mMSG_CMSG_CLOEXEC
 = 0x40000000

239 
	#MSG_CMSG_CLOEXEC
 
MSG_CMSG_CLOEXEC


	)

245 
	smsghdr


247 *
	mmsg_Çme
;

248 
sockËn_t
 
	mmsg_Çm–’
;

250 
iovec
 *
	mmsg_iov
;

251 
size_t
 
	mmsg_iovËn
;

253 *
	mmsg_cÚŒŞ
;

254 
size_t
 
	mmsg_cÚŒŞËn
;

259 
	mmsg_æags
;

263 
	scmsghdr


265 
size_t
 
	mcmsg_Ën
;

270 
	mcmsg_Ëv–
;

271 
	mcmsg_ty³
;

272 #ià(!
defšed
 
__STRICT_ANSI__
 && 
__GNUC__
 >ğ2è|| 
__STDC_VERSION__
 >= 199901L

273 
__ex‹nsiÚ__
 
__cmsg_d©a
 
	m__æex¬r
;

278 #ià(!
defšed
 
__STRICT_ANSI__
 && 
__GNUC__
 >ğ2è|| 
__STDC_VERSION__
 >= 199901L

279 
	#CMSG_DATA
(
cmsg
è((cmsg)->
__cmsg_d©a
)

	)

281 
	#CMSG_DATA
(
cmsg
è((*è((
cmsghdr
 *è(cmsgè+ 1))

	)

283 
	#CMSG_NXTHDR
(
mhdr
, 
cmsg
è
	`__cmsg_nxthdr
 (mhdr, cmsg)

	)

284 
	#CMSG_FIRSTHDR
(
mhdr
) \

285 ((
size_t
è(
mhdr
)->
msg_cÚŒŞËn
 >ğ (
cmsghdr
) \

286 ? (
cmsghdr
 *è(
mhdr
)->
msg_cÚŒŞ
 : (cmsghd¸*è0)

	)

287 
	#CMSG_ALIGN
(
Ën
è((Ö’è+  (
size_t
) - 1) \

288 & (
size_t
è~( (size_tè- 1))

	)

289 
	#CMSG_SPACE
(
Ën
è(
	`CMSG_ALIGN
 (len) \

290 + 
	`CMSG_ALIGN
 ( (
cmsghdr
)))

	)

291 
	#CMSG_LEN
(
Ën
è(
	`CMSG_ALIGN
 ( (
cmsghdr
)è+ (Ën))

	)

293 
cmsghdr
 *
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
,

294 
cmsghdr
 *
__cmsg
è
__THROW
;

295 #ifdeà
__USE_EXTERN_INLINES


296 #iâdeà
_EXTERN_INLINE


297 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

299 
_EXTERN_INLINE
 
cmsghdr
 *

300 
	`__NTH
 (
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
, 
cmsghdr
 *
__cmsg
))

302 ià((
size_t
è
__cmsg
->
cmsg_Ën
 <  (
cmsghdr
))

306 
__cmsg
 = (
cmsghdr
 *) ((*) __cmsg

307 + 
	`CMSG_ALIGN
 (
__cmsg
->
cmsg_Ën
));

308 ià((*è(
__cmsg
 + 1è> ((*è
__mhdr
->
msg_cÚŒŞ


309 + 
__mhdr
->
msg_cÚŒŞËn
)

310 || ((*è
__cmsg
 + 
	`CMSG_ALIGN
 (__cmsg->
cmsg_Ën
)

311 > ((*è
__mhdr
->
msg_cÚŒŞ
 + __mhdr->
msg_cÚŒŞËn
)))

314  
__cmsg
;

315 
	}
}

322 
	mSCM_RIGHTS
 = 0x01

323 
	#SCM_RIGHTS
 
SCM_RIGHTS


	)

324 #ifdeà
__USE_GNU


325 , 
	mSCM_CREDENTIALS
 = 0x02

326 
	#SCM_CREDENTIALS
 
SCM_CREDENTIALS


	)

330 #ifdeà
__USE_GNU


332 
	suüed


334 
pid_t
 
	mpid
;

335 
uid_t
 
	muid
;

336 
gid_t
 
	mgid
;

341 #ià!
defšed
 
__USE_MISC
 && !defšed 
__USE_GNU


342 #iâdeà
FIOGETOWN


343 
	#__SYS_SOCKET_H_undef_FIOGETOWN


	)

345 #iâdeà
FIOSETOWN


346 
	#__SYS_SOCKET_H_undef_FIOSETOWN


	)

348 #iâdeà
SIOCATMARK


349 
	#__SYS_SOCKET_H_undef_SIOCATMARK


	)

351 #iâdeà
SIOCGPGRP


352 
	#__SYS_SOCKET_H_undef_SIOCGPGRP


	)

354 #iâdeà
SIOCGSTAMP


355 
	#__SYS_SOCKET_H_undef_SIOCGSTAMP


	)

357 #iâdeà
SIOCGSTAMPNS


358 
	#__SYS_SOCKET_H_undef_SIOCGSTAMPNS


	)

360 #iâdeà
SIOCSPGRP


361 
	#__SYS_SOCKET_H_undef_SIOCSPGRP


	)

366 
	~<asm/sock‘.h
>

368 #ià!
defšed
 
__USE_MISC
 && !defšed 
__USE_GNU


369 #ifdeà
__SYS_SOCKET_H_undef_FIOGETOWN


370 #undeà
__SYS_SOCKET_H_undef_FIOGETOWN


371 #undeà
FIOGETOWN


373 #ifdeà
__SYS_SOCKET_H_undef_FIOSETOWN


374 #undeà
__SYS_SOCKET_H_undef_FIOSETOWN


375 #undeà
FIOSETOWN


377 #ifdeà
__SYS_SOCKET_H_undef_SIOCATMARK


378 #undeà
__SYS_SOCKET_H_undef_SIOCATMARK


379 #undeà
SIOCATMARK


381 #ifdeà
__SYS_SOCKET_H_undef_SIOCGPGRP


382 #undeà
__SYS_SOCKET_H_undef_SIOCGPGRP


383 #undeà
SIOCGPGRP


385 #ifdeà
__SYS_SOCKET_H_undef_SIOCGSTAMP


386 #undeà
__SYS_SOCKET_H_undef_SIOCGSTAMP


387 #undeà
SIOCGSTAMP


389 #ifdeà
__SYS_SOCKET_H_undef_SIOCGSTAMPNS


390 #undeà
__SYS_SOCKET_H_undef_SIOCGSTAMPNS


391 #undeà
SIOCGSTAMPNS


393 #ifdeà
__SYS_SOCKET_H_undef_SIOCSPGRP


394 #undeà
__SYS_SOCKET_H_undef_SIOCSPGRP


395 #undeà
SIOCSPGRP


400 
	slšg”


402 
	ml_Úoff
;

403 
	ml_lšg”
;

	@/usr/include/bits/socket2.h

20 #iâdeà
_SYS_SOCKET_H


24 
ssize_t
 
__»cv_chk
 (
__fd
, *
__buf
, 
size_t
 
__n
, size_ˆ
__buæ’
,

25 
__æags
);

26 
ssize_t
 
__REDIRECT
 (
__»cv_®Ÿs
, (
__fd
, *
__buf
, 
size_t
 
__n
,

27 
__æags
), 
»cv
);

28 
ssize_t
 
__REDIRECT
 (
__»cv_chk_w¬n
,

29 (
__fd
, *
__buf
, 
size_t
 
__n
, size_ˆ
__buæ’
,

30 
__æags
), 
__»cv_chk
)

31 
__w¬Ç‰r
 ("recv called with bigger†engthhan size of destination "

34 
__ex‹º_®ways_šlše
 
ssize_t


35 
	$»cv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__æags
)

37 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

39 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

40  
	`__»cv_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
);

42 ià(
__n
 > 
	`__bos0
 (
__buf
))

43  
	`__»cv_chk_w¬n
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
);

45  
	`__»cv_®Ÿs
 (
__fd
, 
__buf
, 
__n
, 
__æags
);

46 
	}
}

48 
ssize_t
 
__»cväom_chk
 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

49 
size_t
 
__buæ’
, 
__æags
,

50 
__SOCKADDR_ARG
 
__addr
,

51 
sockËn_t
 *
__»¡riù
 
__addr_Ën
);

52 
ssize_t
 
__REDIRECT
 (
__»cväom_®Ÿs
,

53 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

54 
__æags
, 
__SOCKADDR_ARG
 
__addr
,

55 
sockËn_t
 *
__»¡riù
 
__addr_Ën
), 
»cväom
);

56 
ssize_t
 
__REDIRECT
 (
__»cväom_chk_w¬n
,

57 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
,

58 
size_t
 
__buæ’
, 
__æags
,

59 
__SOCKADDR_ARG
 
__addr
,

60 
sockËn_t
 *
__»¡riù
 
__addr_Ën
), 
__»cväom_chk
)

61 
__w¬Ç‰r
 ("recvfrom called with bigger†engthhan size of "

64 
__ex‹º_®ways_šlše
 
ssize_t


65 
	$»cväom
 (
__fd
, *
__»¡riù
 
__buf
, 
size_t
 
__n
, 
__æags
,

66 
__SOCKADDR_ARG
 
__addr
, 
sockËn_t
 *
__»¡riù
 
__addr_Ën
)

68 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

70 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

71  
	`__»cväom_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
,

72 
__addr
, 
__addr_Ën
);

73 ià(
__n
 > 
	`__bos0
 (
__buf
))

74  
	`__»cväom_chk_w¬n
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__æags
,

75 
__addr
, 
__addr_Ën
);

77  
	`__»cväom_®Ÿs
 (
__fd
, 
__buf
, 
__n
, 
__æags
, 
__addr
, 
__addr_Ën
);

78 
	}
}

	@/usr/include/bits/stat.h

19 #iâdeà
_SYS_STAT_H


24 
	#_STAT_VER_KERNEL
 0

	)

26 #ià
__WORDSIZE
 == 32

27 
	#_STAT_VER_SVR4
 2

	)

28 
	#_STAT_VER_LINUX
 3

	)

31 
	#_MKNOD_VER_LINUX
 1

	)

32 
	#_MKNOD_VER_SVR4
 2

	)

33 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

35 
	#_STAT_VER_LINUX
 1

	)

38 
	#_MKNOD_VER_LINUX
 0

	)

41 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

43 
	s¡©


45 
__dev_t
 
	m¡_dev
;

46 #ià
__WORDSIZE
 == 32

47 
	m__·d1
;

49 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


50 
__šo_t
 
	m¡_šo
;

52 
__šo_t
 
	m__¡_šo
;

54 #ià
__WORDSIZE
 == 32

55 
__mode_t
 
	m¡_mode
;

56 
__Æšk_t
 
	m¡_Æšk
;

58 
__Æšk_t
 
	m¡_Æšk
;

59 
__mode_t
 
	m¡_mode
;

61 
__uid_t
 
	m¡_uid
;

62 
__gid_t
 
	m¡_gid
;

63 #ià
__WORDSIZE
 == 64

64 
	m__·d0
;

66 
__dev_t
 
	m¡_rdev
;

67 #ià
__WORDSIZE
 == 32

68 
	m__·d2
;

70 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


71 
__off_t
 
	m¡_size
;

73 
__off64_t
 
	m¡_size
;

75 
__blksize_t
 
	m¡_blksize
;

76 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


77 
__blkút_t
 
	m¡_blocks
;

79 
__blkút64_t
 
	m¡_blocks
;

81 #ifdeà
__USE_MISC


88 
time¥ec
 
	m¡_©im
;

89 
time¥ec
 
	m¡_mtim
;

90 
time¥ec
 
	m¡_ùim
;

91 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

92 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

93 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

95 
__time_t
 
	m¡_©ime
;

96 
	m¡_©im’£c
;

97 
__time_t
 
	m¡_mtime
;

98 
	m¡_mtim’£c
;

99 
__time_t
 
	m¡_ùime
;

100 
	m¡_ùim’£c
;

102 #ià
__WORDSIZE
 == 64

103 
	m__unu£d
[3];

105 #iâdeà
__USE_FILE_OFFSET64


106 
	m__unu£d4
;

107 
	m__unu£d5
;

109 
__šo64_t
 
	m¡_šo
;

114 #ifdeà
__USE_LARGEFILE64


116 
	s¡©64


118 
__dev_t
 
	m¡_dev
;

119 #ià
__WORDSIZE
 == 64

120 
__šo64_t
 
	m¡_šo
;

121 
__Æšk_t
 
	m¡_Æšk
;

122 
__mode_t
 
	m¡_mode
;

124 
	m__·d1
;

125 
__šo_t
 
	m__¡_šo
;

126 
__mode_t
 
	m¡_mode
;

127 
__Æšk_t
 
	m¡_Æšk
;

129 
__uid_t
 
	m¡_uid
;

130 
__gid_t
 
	m¡_gid
;

131 #ià
__WORDSIZE
 == 64

132 
	m__·d0
;

133 
__dev_t
 
	m¡_rdev
;

134 
__off_t
 
	m¡_size
;

136 
__dev_t
 
	m¡_rdev
;

137 
	m__·d2
;

138 
__off64_t
 
	m¡_size
;

140 
__blksize_t
 
	m¡_blksize
;

141 
__blkút64_t
 
	m¡_blocks
;

142 #ifdeà
__USE_MISC


149 
time¥ec
 
	m¡_©im
;

150 
time¥ec
 
	m¡_mtim
;

151 
time¥ec
 
	m¡_ùim
;

152 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

153 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

154 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

156 
__time_t
 
	m¡_©ime
;

157 
	m¡_©im’£c
;

158 
__time_t
 
	m¡_mtime
;

159 
	m¡_mtim’£c
;

160 
__time_t
 
	m¡_ùime
;

161 
	m¡_ùim’£c
;

163 #ià
__WORDSIZE
 == 64

164 
	m__unu£d
[3];

166 
__šo64_t
 
	m¡_šo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifdeà
__USE_ATFILE


206 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

207 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

20 #iâdeà
_STDIO_H


24 
__BEGIN_NAMESPACE_STD


25 
	$__LDBL_REDIR_DECL
 (
årštf
)

26 
	$__LDBL_REDIR_DECL
 (
´štf
)

27 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

28 
	$__LDBL_REDIR_DECL
 (
vårštf
)

29 
	$__LDBL_REDIR_DECL
 (
v´štf
)

30 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
__REDIRECT
 \

33 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

40 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

42 
__END_NAMESPACE_STD


44 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


45 
__BEGIN_NAMESPACE_C99


46 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

47 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

48 
__END_NAMESPACE_C99


51 #ifdef 
__USE_ISOC99


52 
__BEGIN_NAMESPACE_C99


53 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

54 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

55 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

57 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

61 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

63 
__END_NAMESPACE_C99


66 #ifdeà
__USE_GNU


67 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

68 
	$__LDBL_REDIR_DECL
 (
d´štf
)

69 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

70 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

71 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

73 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

76 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


77 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

78 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

79 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


80 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

81 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

83 #ià
__USE_FORTIFY_LEVEL
 > 1

84 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

85 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

86 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

88 #ifdeà
__USE_GNU


89 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

90 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

93 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

94 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

20 #iâdeà
_STDIO_H


24 #iâdeà
__ex‹º_šlše


25 
	#__STDIO_INLINE
 
šlše


	)

27 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

31 #ifdeà
__USE_EXTERN_INLINES


34 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše
)

36 
__STDIO_INLINE
 

37 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

39  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

40 
	}
}

44 
__STDIO_INLINE
 

45 
	$g‘ch¬
 ()

47  
	`_IO_g‘c
 (
¡dš
);

48 
	}
}

51 #ifdeà
__USE_MISC


53 
__STDIO_INLINE
 

54 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

56  
	`_IO_g‘c_uÆocked
 (
__å
);

57 
	}
}

61 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


63 
__STDIO_INLINE
 

64 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

66  
	`_IO_g‘c_uÆocked
 (
__å
);

67 
	}
}

70 
__STDIO_INLINE
 

71 
	$g‘ch¬_uÆocked
 ()

73  
	`_IO_g‘c_uÆocked
 (
¡dš
);

74 
	}
}

79 
__STDIO_INLINE
 

80 
	$putch¬
 (
__c
)

82  
	`_IO_putc
 (
__c
, 
¡dout
);

83 
	}
}

86 #ifdeà
__USE_MISC


88 
__STDIO_INLINE
 

89 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

91  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

92 
	}
}

96 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


98 
__STDIO_INLINE
 

99 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

101  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

102 
	}
}

105 
__STDIO_INLINE
 

106 
	$putch¬_uÆocked
 (
__c
)

108  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

109 
	}
}

113 #ifdef 
__USE_GNU


115 
__STDIO_INLINE
 
_IO_ssize_t


116 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

118  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

119 
	}
}

123 #ifdeà
__USE_MISC


125 
__STDIO_INLINE
 

126 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

128  
	`_IO_ãof_uÆocked
 (
__¡»am
);

129 
	}
}

132 
__STDIO_INLINE
 

133 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

135  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

136 
	}
}

142 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

143 && !
defšed
 
	g__ılu¥lus


145 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

146 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

147 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

148 && (
size_t
è(
size
) != 0) \

149 ? ({ *
__±r
 = (*è(
±r
); \

150 
FILE
 *
__¡»am
 = (
¡»am
); \

151 
size_t
 
__út
; \

152 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

153 
__út
 > 0; --__cnt) \

155 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

156 ià(
__c
 =ğ
EOF
) \

158 *
__±r
++ = 
__c
; \

160 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

161 / (
size_t
è(
size
); }) \

162 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

163 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

165 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

166 (è(
n
), (
size_t
) 0) \

167 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

169 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

170 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

171 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

172 && (
size_t
è(
size
) != 0) \

173 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

174 
FILE
 *
__¡»am
 = (
¡»am
); \

175 
size_t
 
__út
; \

176 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

177 
__út
 > 0; --__cnt) \

178 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

180 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

181 / (
size_t
è(
size
); }) \

182 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

183 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

185 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

186 (è(
n
), (
size_t
) 0) \

187 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

191 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

20 #iâdeà
_STDIO_H


24 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

25 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

26 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

27 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

28 
_G_va_li¡
 
__­
è
__THROW
;

30 #ifdeà
__va_¬g_·ck


31 
__ex‹º_®ways_šlše
 

32 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

34  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

35 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

36 
	}
}

37 #–ià!
defšed
 
__ılu¥lus


38 
	#¥rštf
(
¡r
, ...) \

39 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

40 
__VA_ARGS__
)

	)

43 
__ex‹º_®ways_šlše
 

44 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
,

45 
_G_va_li¡
 
__­
))

47  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

48 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

49 
	}
}

51 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


53 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

54 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

55 ...è
__THROW
;

56 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

57 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

58 
_G_va_li¡
 
__­
è
__THROW
;

60 #ifdeà
__va_¬g_·ck


61 
__ex‹º_®ways_šlše
 

62 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

63 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

65  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

66 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

67 
	}
}

68 #–ià!
defšed
 
__ılu¥lus


69 
	#¢´štf
(
¡r
, 
Ën
, ...) \

70 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

71 
__VA_ARGS__
)

	)

74 
__ex‹º_®ways_šlše
 

75 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

76 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

78  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

79 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

80 
	}
}

84 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

87 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

88 
__´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

89 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

90 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

91 
__v´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

92 
_G_va_li¡
 
__­
);

94 #ifdeà
__va_¬g_·ck


95 
__ex‹º_®ways_šlše
 

96 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...)

98  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

99 
	`__va_¬g_·ck
 ());

100 
	}
}

102 
__ex‹º_®ways_šlše
 

103 
	$´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

105  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

106 
	}
}

107 #–ià!
defšed
 
__ılu¥lus


108 
	#´štf
(...) \

109 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

110 
	#årštf
(
¡»am
, ...) \

111 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

114 
__ex‹º_®ways_šlše
 

115 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

117 #ifdeà
__USE_EXTERN_INLINES


118  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

120  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

122 
	}
}

124 
__ex‹º_®ways_šlše
 

125 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

126 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

128  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

129 
	}
}

131 #ifdeà
__USE_GNU


133 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

134 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

135 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

136 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

137 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

138 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

139 
	$__d´štf_chk
 (
__fd
, 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

140 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

141 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

142 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

143 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

144 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

145 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

147 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

148 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

149 
__æag
,

150 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

151 
_G_va_li¡
 
__¬gs
)

152 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

154 #ifdeà
__va_¬g_·ck


155 
__ex‹º_®ways_šlše
 

156 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

158  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

159 
	`__va_¬g_·ck
 ());

160 
	}
}

162 
__ex‹º_®ways_šlše
 

163 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

166  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

167 
	`__va_¬g_·ck
 ());

168 
	}
}

170 
__ex‹º_®ways_šlše
 

171 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

173  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

174 
	`__va_¬g_·ck
 ());

175 
	}
}

177 
__ex‹º_®ways_šlše
 

178 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

179 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

181  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

182 
	`__va_¬g_·ck
 ());

183 
	}
}

184 #–ià!
defšed
 
__ılu¥lus


185 
	#a¥rštf
(
±r
, ...) \

186 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

187 
	#__a¥rštf
(
±r
, ...) \

188 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

189 
	#d´štf
(
fd
, ...) \

190 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

191 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

192 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

195 
__ex‹º_®ways_šlše
 

196 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

197 
_G_va_li¡
 
__­
))

199  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

200 
	}
}

202 
__ex‹º_®ways_šlše
 

203 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

205  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

206 
	}
}

208 
__ex‹º_®ways_šlše
 

209 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

210 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

212  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

213 
__­
);

214 
	}
}

220 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

221 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

222 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

225 
__ex‹º_®ways_šlše
 
__wur
 *

226 
	$g‘s
 (*
__¡r
)

228 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

229  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

230  
	`__g‘s_w¬n
 (
__¡r
);

231 
	}
}

233 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

234 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

235 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

236 (*
__»¡riù
 
__s
, 
__n
,

237 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

238 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

239 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

240 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

241 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

244 
__ex‹º_®ways_šlše
 
__wur
 *

245 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

247 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

249 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

250  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

252 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

253  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

255  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

256 
	}
}

258 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

259 
size_t
 
__size
, size_ˆ
__n
,

260 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

261 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

262 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

263 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

264 
ä—d
è
__wur
;

265 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

266 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
),

269 
__ä—d_chk
)

270 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

273 
__ex‹º_®ways_šlše
 
__wur
 
size_t


274 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

275 
FILE
 *
__»¡riù
 
__¡»am
)

277 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

279 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

280 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

281 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

282  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

284 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

285  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

287  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

288 
	}
}

290 #ifdeà
__USE_GNU


291 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

292 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

293 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

294 (*
__»¡riù
 
__s
, 
__n
,

295 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

296 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

297 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

298 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

299 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

302 
__ex‹º_®ways_šlše
 
__wur
 *

303 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

305 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

307 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

308  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

310 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

311  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

313  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

314 
	}
}

317 #ifdeà
__USE_MISC


318 #undeà
ä—d_uÆocked


319 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

320 
size_t
 
__size
, size_ˆ
__n
,

321 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

322 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

323 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

324 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

325 
ä—d_uÆocked
è
__wur
;

326 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

327 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
),

330 
__ä—d_uÆocked_chk
)

331 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

334 
__ex‹º_®ways_šlše
 
__wur
 
size_t


335 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

336 
FILE
 *
__»¡riù
 
__¡»am
)

338 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

340 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

341 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

342 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

343  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

344 
__¡»am
);

346 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

347  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

348 
__¡»am
);

351 #ifdeà
__USE_EXTERN_INLINES


352 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

353 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

354 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

355 && 
__size
 * 
__n
 <= 8)

357 
size_t
 
__út
 = 
__size
 * 
__n
;

358 *
__ıŒ
 = (*è
__±r
;

359 ià(
__út
 == 0)

362 ; 
__út
 > 0; --__cnt)

364 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

365 ià(
__c
 =ğ
EOF
)

367 *
__ıŒ
++ = 
__c
;

369  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

372  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

373 
	}
}

	@/usr/include/bits/stdio_lim.h

19 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


23 #ifdeà
_STDIO_H


24 
	#L_tm²am
 20

	)

25 
	#TMP_MAX
 238328

	)

26 
	#FILENAME_MAX
 4096

	)

28 #ifdeà
__USE_POSIX


29 
	#L_ù”mid
 9

	)

30 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


31 
	#L_cu£rid
 9

	)

36 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


37 #undeà
FOPEN_MAX


38 
	#FOPEN_MAX
 16

	)

41 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


42 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-ldbl.h

20 #iâdeà
_STDLIB_H


24 #ifdef 
__USE_ISOC99


25 
__BEGIN_NAMESPACE_C99


26 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

27 
__END_NAMESPACE_C99


30 #ifdeà
__USE_GNU


31 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

34 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


35 #ifdeà
__USE_MISC


36 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

39 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

40 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

20 #iâdeà
_STDLIB_H


24 *
	$__»®·th_chk
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

25 *
__»¡riù
 
__»sŞved
,

26 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

27 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

28 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

29 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

30 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

31 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

32 *
__»¡riù
 
__»sŞved
,

33 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


34 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

37 
__ex‹º_®ways_šlše
 
__wur
 *

38 
	`__NTH
 (
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

40 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

42 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


43 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

44  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

46  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

49  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

50 
	}
}

53 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

54 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

55 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

56 
size_t
 
__buæ’
), 
±¢ame_r
)

57 
	`__nÚnuÎ
 ((2));

58 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

60 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

61 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

64 
__ex‹º_®ways_šlše
 

65 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

67 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

69 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

70  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

71 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

72  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

74  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

75 
	}
}

78 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

79 
__THROW
 
__wur
;

80 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

81 
wùomb
è
__wur
;

83 
__ex‹º_®ways_šlše
 
__wur
 

84 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

89 
	#__STDLIB_MB_LEN_MAX
 16

	)

90 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


93 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

94  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

95  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

96 
	}
}

99 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

100 
__cÚ¡
 *
__»¡riù
 
__¤c
,

101 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

102 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

103 (
wch¬_t
 *
__»¡riù
 
__d¡
,

104 
__cÚ¡
 *
__»¡riù
 
__¤c
,

105 
size_t
 
__Ën
), 
mb¡owcs
);

106 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

107 (
wch¬_t
 *
__»¡riù
 
__d¡
,

108 
__cÚ¡
 *
__»¡riù
 
__¤c
,

109 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

110 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

113 
__ex‹º_®ways_šlše
 
size_t


114 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

115 
size_t
 
__Ën
))

117 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

119 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

120  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

121 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

123 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

124  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

125 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

127  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

128 
	}
}

131 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

132 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

133 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

134 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

135 (*
__»¡riù
 
__d¡
,

136 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

137 
size_t
 
__Ën
), 
wc¡ombs
);

138 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

139 (*
__»¡riù
 
__d¡
,

140 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

141 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

142 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

144 
__ex‹º_®ways_šlše
 
size_t


145 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__¤c
,

146 
size_t
 
__Ën
))

148 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

150 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

151  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

152 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

153  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

155  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

156 
	}
}

	@/usr/include/bits/string.h

20 #iâdeà
_STRING_H


26 
	#_STRING_ARCH_uÇligÃd
 1

	)

	@/usr/include/bits/string2.h

21 #iâdeà
_STRING_H


25 #ià!
defšed
 
__NO_STRING_INLINES
 && !defšed 
__BOUNDED_POINTERS__


42 #iâdeà
__STRING_INLINE


43 #ifdeà
__ılu¥lus


44 
	#__STRING_INLINE
 
šlše


	)

46 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

50 #ià
_STRING_ARCH_uÇligÃd


52 
	~<’dŸn.h
>

53 
	~<b™s/ty³s.h
>

55 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


56 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

57 (((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1] << 8 \

58 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
])

	)

59 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

60 (((((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

61 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

62 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

63 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
])

	)

65 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

66 (((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
] << 8 \

67 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1])

	)

68 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

69 (((((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
] << 8 \

70 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

71 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

72 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 3])

	)

77 
	#__STRING2_COPY_TYPE
(
N
) \

78 ¡ruù { 
__¬r
[
N
]; } \

79 
	t__©Œibu‹__
 ((
	t__·cked__
)è
	t__STRING2_COPY_ARR
##
	tN


	)

80 
	t__STRING2_COPY_TYPE
 (2);

81 
__STRING2_COPY_TYPE
 (3);

82 
__STRING2_COPY_TYPE
 (4);

83 
__STRING2_COPY_TYPE
 (5);

84 
__STRING2_COPY_TYPE
 (6);

85 
__STRING2_COPY_TYPE
 (7);

86 
__STRING2_COPY_TYPE
 (8);

87 #undeà
__STRING2_COPY_TYPE


93 
	#__¡ršg2_1b±r_p
(
__x
) \

94 ((
size_t
)(cÚ¡ *)((
__x
è+ 1è- (size_t)(cÚ¡ *)(__xè=ğ1)

	)

97 #ià!
defšed
 
_HAVE_STRING_ARCH_mem£t


98 #ià!
__GNUC_PREREQ
 (3, 0)

99 #ià
_STRING_ARCH_uÇligÃd


100 
	#mem£t
(
s
, 
c
, 
n
) \

101 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

102 ? ((
n
) == 1 \

103 ? 
	`__mem£t_1
 (
s
, 
c
) \

104 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

105 : (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

106 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

107 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

109 
	#__mem£t_1
(
s
, 
c
è({ *
__s
 = (s); \

110 *((
__ušt8_t
 *è
__s
èğ(__ušt8_tè
c
; __s; })

	)

112 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

113 ({ *
__s
 = (
s
); \

115 
__ui
; \

116 
__usi
; \

117 
__uc
; \

118 } *
__u
 = 
__s
; \

119 
__ušt8_t
 
__c
 = (__ušt8_tè(
c
); \

122 (è(
n
)) \

125 
__u
->
__ui
 = 
__c
 * 0x01010101; \

126 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

128 
__u
->
__ui
 = 
__c
 * 0x01010101; \

129 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

131 
__u
->
__ui
 = 
__c
 * 0x01010101; \

132 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

134 
__u
->
__usi
 = (è
__c
 * 0x0101; \

135 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

136 
__u
->
__uc
 = (è
__c
; \

140 
__u
->
__ui
 = 
__c
 * 0x01010101; \

141 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

143 
__u
->
__ui
 = 
__c
 * 0x01010101; \

144 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

146 
__u
->
__ui
 = 
__c
 * 0x01010101; \

147 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

149 
__u
->
__usi
 = (è
__c
 * 0x0101; \

153 
__u
->
__ui
 = 
__c
 * 0x01010101; \

154 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

156 
__u
->
__ui
 = 
__c
 * 0x01010101; \

157 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

159 
__u
->
__ui
 = 
__c
 * 0x01010101; \

160 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

162 
__u
->
__uc
 = (è
__c
; \

166 
__u
->
__ui
 = 
__c
 * 0x01010101; \

167 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

169 
__u
->
__ui
 = 
__c
 * 0x01010101; \

170 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

172 
__u
->
__ui
 = 
__c
 * 0x01010101; \

173 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

175 
__u
->
__ui
 = 
__c
 * 0x01010101; \

180 
__s
; })

	)

182 
	#mem£t
(
s
, 
c
, 
n
) \

183 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

184 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

185 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

194 #ià
__GNUC_PREREQ
 (2, 91)

195 
	#__bz”o
(
s
, 
n
è
	`__butš_mem£t
 (s, '\0',‚)

	)

203 #ifdeà
__USE_GNU


204 #ià!
defšed
 
_HAVE_STRING_ARCH_mempıy
 || defšed 
_FORCE_INLINES


205 #iâdeà
_HAVE_STRING_ARCH_mempıy


206 #ià
__GNUC_PREREQ
 (3, 4)

207 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__butš_mempıy
 (de¡, src,‚)

	)

208 #–ià
__GNUC_PREREQ
 (3, 0)

209 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

210 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

211 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

212 ? 
	`__butš_memıy
 (
de¡
, 
¤c
, 
n
) + (n) \

213 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

215 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

216 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

217 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

218 ? 
	`__mempıy_sm®l
 (
de¡
, 
	`__mempıy_¬gs
 (
¤c
), 
n
) \

219 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

223 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy
 (de¡, src,‚)

	)

226 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


227 #ià
_STRING_ARCH_uÇligÃd


228 #iâdeà
_FORCE_INLINES


229 
	#__mempıy_¬gs
(
¤c
) \

230 ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[2], \

231 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[6], \

232 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

233 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

234 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

235 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

237 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , , , ,

238 
__ušt16_t
, __ušt16_t, 
__ušt32_t
,

239 
__ušt32_t
, 
size_t
);

240 
__STRING_INLINE
 *

241 
	$__mempıy_sm®l
 (*
__de¡1
,

242 
__¤c0_1
, 
__¤c2_1
, 
__¤c4_1
, 
__¤c6_1
,

243 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

244 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

245 
size_t
 
__¤ş’
)

248 
__ušt32_t
 
__ui
;

249 
__ušt16_t
 
__usi
;

250 
__uc
;

251 
__c
;

252 } *
__u
 = 
__de¡1
;

253 (è
__¤ş’
)

256 
__u
->
__c
 = 
__¤c0_1
;

257 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

260 
__u
->
__usi
 = 
__¤c0_2
;

261 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

264 
__u
->
__usi
 = 
__¤c0_2
;

265 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

266 
__u
->
__c
 = 
__¤c2_1
;

267 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

270 
__u
->
__ui
 = 
__¤c0_4
;

271 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

274 
__u
->
__ui
 = 
__¤c0_4
;

275 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

276 
__u
->
__c
 = 
__¤c4_1
;

277 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

280 
__u
->
__ui
 = 
__¤c0_4
;

281 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

282 
__u
->
__usi
 = 
__¤c4_2
;

283 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

286 
__u
->
__ui
 = 
__¤c0_4
;

287 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

288 
__u
->
__usi
 = 
__¤c4_2
;

289 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

290 
__u
->
__c
 = 
__¤c6_1
;

291 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

294 
__u
->
__ui
 = 
__¤c0_4
;

295 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

296 
__u
->
__ui
 = 
__¤c4_4
;

297 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

300  (*è
__u
;

301 
	}
}

303 #iâdeà
_FORCE_INLINES


304 
	#__mempıy_¬gs
(
¤c
) \

305 ((
__cÚ¡
 *è(
¤c
))[0], \

306 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

307 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1] } }), \

308 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

309 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

310 ((
__cÚ¡
 *è(
¤c
))[2] } }), \

311 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

312 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

313 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3] } }), \

314 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

315 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

316 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

317 ((
__cÚ¡
 *è(
¤c
))[4] } }), \

318 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

319 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

320 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

321 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5] } }), \

322 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

323 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

324 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

325 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

326 ((
__cÚ¡
 *è(
¤c
))[6] } }), \

327 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

328 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

329 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

330 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

331 ((
__cÚ¡
 *è(
¤c
))[6], ((__cÚ¡ *è(¤c))[7] } })

	)

333 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , 
__STRING2_COPY_ARR2
,

334 
__STRING2_COPY_ARR3
,

335 
__STRING2_COPY_ARR4
,

336 
__STRING2_COPY_ARR5
,

337 
__STRING2_COPY_ARR6
,

338 
__STRING2_COPY_ARR7
,

339 
__STRING2_COPY_ARR8
, 
size_t
);

340 
__STRING_INLINE
 *

341 
	$__mempıy_sm®l
 (*
__de¡
, 
__¤c1
,

342 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

343 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

344 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

345 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

348 
__c
;

349 
__STRING2_COPY_ARR2
 
__sÿ2
;

350 
__STRING2_COPY_ARR3
 
__sÿ3
;

351 
__STRING2_COPY_ARR4
 
__sÿ4
;

352 
__STRING2_COPY_ARR5
 
__sÿ5
;

353 
__STRING2_COPY_ARR6
 
__sÿ6
;

354 
__STRING2_COPY_ARR7
 
__sÿ7
;

355 
__STRING2_COPY_ARR8
 
__sÿ8
;

356 } *
__u
 = 
__de¡
;

357 (è
__¤ş’
)

360 
__u
->
__c
 = 
__¤c1
;

363 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

366 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

369 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

372 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

375 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

378 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

381 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

384  
	`__ex‹nsiÚ__
 ((*è
__u
 + 
__¤ş’
);

385 
	}
}

393 #iâdeà
_HAVE_STRING_ARCH_¡rchr


394 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

395 #ià
__GNUC_PREREQ
 (3, 2)

396 
	#¡rchr
(
s
, 
c
) \

397 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
è&& !__butš_cÚ¡ªt_°(
s
) \

398 && (
c
) == '\0' \

399 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

400 : 
	`__butš_¡rchr
 (
s
, 
c
)))

	)

402 
	#¡rchr
(
s
, 
c
) \

403 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

404 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

405 : 
	`¡rchr
 (
s
, 
c
)))

	)

411 #ià(!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)) \

412 || 
defšed
 
	g_FORCE_INLINES


413 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)

414 
	#¡rıy
(
de¡
, 
¤c
) \

415 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

416 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

417 ? 
	`__¡rıy_sm®l
 (
de¡
, 
	`__¡rıy_¬gs
 (
¤c
), \

418 
	`¡¾’
 (
¤c
) + 1) \

419 : (*è
	`memıy
 (
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1)) \

420 : 
	`¡rıy
 (
de¡
, 
¤c
)))

	)

423 #ià
_STRING_ARCH_uÇligÃd


424 #iâdeà
_FORCE_INLINES


425 
	#__¡rıy_¬gs
(
¤c
) \

426 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

427 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

428 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

429 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

431 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

432 
__ušt32_t
, __ušt32_t, 
size_t
);

433 
__STRING_INLINE
 *

434 
	$__¡rıy_sm®l
 (*
__de¡
,

435 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

436 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

437 
size_t
 
__¤ş’
)

440 
__ušt32_t
 
__ui
;

441 
__ušt16_t
 
__usi
;

442 
__uc
;

443 } *
__u
 = (*è
__de¡
;

444 (è
__¤ş’
)

447 
__u
->
__uc
 = '\0';

450 
__u
->
__usi
 = 
__¤c0_2
;

453 
__u
->
__usi
 = 
__¤c0_2
;

454 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

455 
__u
->
__uc
 = '\0';

458 
__u
->
__ui
 = 
__¤c0_4
;

461 
__u
->
__ui
 = 
__¤c0_4
;

462 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

463 
__u
->
__uc
 = '\0';

466 
__u
->
__ui
 = 
__¤c0_4
;

467 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

468 
__u
->
__usi
 = 
__¤c4_2
;

471 
__u
->
__ui
 = 
__¤c0_4
;

472 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

473 
__u
->
__usi
 = 
__¤c4_2
;

474 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

475 
__u
->
__uc
 = '\0';

478 
__u
->
__ui
 = 
__¤c0_4
;

479 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

480 
__u
->
__ui
 = 
__¤c4_4
;

483  
__de¡
;

484 
	}
}

486 #iâdeà
_FORCE_INLINES


487 
	#__¡rıy_¬gs
(
¤c
) \

488 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

489 { { ((
__cÚ¡
 *è(
¤c
))[0], '\0' } }), \

490 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

491 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

493 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

494 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

495 ((
__cÚ¡
 *è(
¤c
))[2], '\0' } }), \

496 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

497 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

498 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

500 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

501 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

502 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

503 ((
__cÚ¡
 *è(
¤c
))[4], '\0' } }), \

504 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

505 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

506 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

507 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

509 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

510 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

511 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

512 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

513 ((
__cÚ¡
 *è(
¤c
))[6], '\0' } })

	)

515 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

516 
__STRING2_COPY_ARR3
,

517 
__STRING2_COPY_ARR4
,

518 
__STRING2_COPY_ARR5
,

519 
__STRING2_COPY_ARR6
,

520 
__STRING2_COPY_ARR7
,

521 
__STRING2_COPY_ARR8
, 
size_t
);

522 
__STRING_INLINE
 *

523 
	$__¡rıy_sm®l
 (*
__de¡
,

524 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

525 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

526 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

527 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

530 
__c
;

531 
__STRING2_COPY_ARR2
 
__sÿ2
;

532 
__STRING2_COPY_ARR3
 
__sÿ3
;

533 
__STRING2_COPY_ARR4
 
__sÿ4
;

534 
__STRING2_COPY_ARR5
 
__sÿ5
;

535 
__STRING2_COPY_ARR6
 
__sÿ6
;

536 
__STRING2_COPY_ARR7
 
__sÿ7
;

537 
__STRING2_COPY_ARR8
 
__sÿ8
;

538 } *
__u
 = (*è
__de¡
;

539 (è
__¤ş’
)

542 
__u
->
__c
 = '\0';

545 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

548 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

551 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

554 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

557 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

560 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

563 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

566  
__de¡
;

567 
	}
}

573 #ifdeà
__USE_GNU


574 #ià!
defšed
 
_HAVE_STRING_ARCH_¡pıy
 || defšed 
_FORCE_INLINES


575 #iâdeà
_HAVE_STRING_ARCH_¡pıy


576 #ià
__GNUC_PREREQ
 (3, 4)

577 
	#__¡pıy
(
de¡
, 
¤c
è
	`__butš_¡pıy
 (de¡, src)

	)

578 #–ià
__GNUC_PREREQ
 (3, 0)

579 
	#__¡pıy
(
de¡
, 
¤c
) \

580 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

581 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

582 ? 
	`__butš_¡rıy
 (
de¡
, 
¤c
è+ 
	`¡¾’
 (src) \

583 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

585 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

587 
	#__¡pıy
(
de¡
, 
¤c
) \

588 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

589 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

590 ? 
	`__¡pıy_sm®l
 (
de¡
, 
	`__¡pıy_¬gs
 (
¤c
), \

591 
	`¡¾’
 (
¤c
) + 1) \

592 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

594 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

598 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 (de¡, src)

	)

601 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


602 #ià
_STRING_ARCH_uÇligÃd


603 #iâdeà
_FORCE_INLINES


604 
	#__¡pıy_¬gs
(
¤c
) \

605 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

606 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

607 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

608 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

610 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

611 
__ušt32_t
, __ušt32_t, 
size_t
);

612 
__STRING_INLINE
 *

613 
	$__¡pıy_sm®l
 (*
__de¡
,

614 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

615 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

616 
size_t
 
__¤ş’
)

619 
__ui
;

620 
__usi
;

621 
__uc
;

622 
__c
;

623 } *
__u
 = (*è
__de¡
;

624 (è
__¤ş’
)

627 
__u
->
__uc
 = '\0';

630 
__u
->
__usi
 = 
__¤c0_2
;

631 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

634 
__u
->
__usi
 = 
__¤c0_2
;

635 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

636 
__u
->
__uc
 = '\0';

639 
__u
->
__ui
 = 
__¤c0_4
;

640 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

643 
__u
->
__ui
 = 
__¤c0_4
;

644 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

645 
__u
->
__uc
 = '\0';

648 
__u
->
__ui
 = 
__¤c0_4
;

649 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

650 
__u
->
__usi
 = 
__¤c4_2
;

651 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

654 
__u
->
__ui
 = 
__¤c0_4
;

655 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

656 
__u
->
__usi
 = 
__¤c4_2
;

657 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

658 
__u
->
__uc
 = '\0';

661 
__u
->
__ui
 = 
__¤c0_4
;

662 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

663 
__u
->
__ui
 = 
__¤c4_4
;

664 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

667  &
__u
->
__c
;

668 
	}
}

670 #iâdeà
_FORCE_INLINES


671 
	#__¡pıy_¬gs
(
¤c
) \

672 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

673 { { ((
__cÚ¡
 *è(
¤c
))[0], '\0' } }), \

674 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

675 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

677 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

678 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

679 ((
__cÚ¡
 *è(
¤c
))[2], '\0' } }), \

680 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

681 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

682 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

684 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

685 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

686 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

687 ((
__cÚ¡
 *è(
¤c
))[4], '\0' } }), \

688 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

689 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

690 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

691 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

693 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

694 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

695 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

696 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

697 ((
__cÚ¡
 *è(
¤c
))[6], '\0' } })

	)

699 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

700 
__STRING2_COPY_ARR3
,

701 
__STRING2_COPY_ARR4
,

702 
__STRING2_COPY_ARR5
,

703 
__STRING2_COPY_ARR6
,

704 
__STRING2_COPY_ARR7
,

705 
__STRING2_COPY_ARR8
, 
size_t
);

706 
__STRING_INLINE
 *

707 
	$__¡pıy_sm®l
 (*
__de¡
,

708 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

709 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

710 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

711 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

714 
__c
;

715 
__STRING2_COPY_ARR2
 
__sÿ2
;

716 
__STRING2_COPY_ARR3
 
__sÿ3
;

717 
__STRING2_COPY_ARR4
 
__sÿ4
;

718 
__STRING2_COPY_ARR5
 
__sÿ5
;

719 
__STRING2_COPY_ARR6
 
__sÿ6
;

720 
__STRING2_COPY_ARR7
 
__sÿ7
;

721 
__STRING2_COPY_ARR8
 
__sÿ8
;

722 } *
__u
 = (*è
__de¡
;

723 (è
__¤ş’
)

726 
__u
->
__c
 = '\0';

729 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

732 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

735 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

738 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

741 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

744 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

747 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

750  
__de¡
 + 
__¤ş’
 - 1;

751 
	}
}

759 #iâdeà
_HAVE_STRING_ARCH_¡ºıy


760 #ià
__GNUC_PREREQ
 (3, 2)

761 
	#¡ºıy
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºıy
 (de¡, src,‚)

	)

763 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

764 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

765 ? (
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

766 ? (*è
	`memıy
 (
de¡
, 
¤c
, 
n
) \

767 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)) \

768 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)))

	)

774 #iâdeà
_HAVE_STRING_ARCH_¡ºÿt


775 #ifdeà
_USE_STRING_ARCH_¡rchr


776 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

777 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

778 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

779 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

780 ? 
	`¡rÿt
 (
__de¡
, 
¤c
) \

781 : (*((*è
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

782 
¤c
, 
n
)èğ'\0', 
__de¡
)) \

783 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
); }))

	)

784 #–ià
__GNUC_PREREQ
 (3, 2)

785 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºÿt
 (de¡, src,‚)

	)

787 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

788 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

789 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

790 ? 
	`¡rÿt
 (
de¡
, 
¤c
) \

791 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)) \

792 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)))

	)

798 #iâdeà
_HAVE_STRING_ARCH_¡rcmp


799 #ià
__GNUC_PREREQ
 (3, 2)

800 
	#¡rcmp
(
s1
, 
s2
) \

801 
__ex‹nsiÚ__
 \

802 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

803 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

804 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

805 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

806 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

807 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

808 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

809 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

810 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

811 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

812 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

813 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

814 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

815 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

816 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

817 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

818 : 
	`__butš_¡rcmp
 (
s1
, 
s2
)))); })

	)

820 
	#¡rcmp
(
s1
, 
s2
) \

821 
__ex‹nsiÚ__
 \

822 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

823 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

824 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

825 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

826 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

827 ? 
	`memcmp
 ((
__cÚ¡
 *è(
s1
), (__cÚ¡ *è(
s2
), \

828 (
__s1_Ën
 < 
__s2_Ën
 ? __s1_len : __s2_len) + 1) \

829 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

830 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

831 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

832 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s1_Ën
) \

833 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

834 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

835 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

836 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

837 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s2_Ën
) \

838 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

839 : 
	`¡rcmp
 (
s1
, 
s2
)))); })

	)

842 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

843 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = \

844 (((
__cÚ¡
 *è(__cÚ¡ *è(
s1
))[0] \

845 - ((
__cÚ¡
 *è(__cÚ¡ *)(
s2
))[0]);\

846 ià(
l
 > 0 && 
__»suÉ
 == 0) \

848 
__»suÉ
 = (((
__cÚ¡
 *) \

849 (
__cÚ¡
 *è(
s1
))[1] \

850 - ((
__cÚ¡
 *) \

851 (
__cÚ¡
 *è(
s2
))[1]); \

852 ià(
l
 > 1 && 
__»suÉ
 == 0) \

854 
__»suÉ
 = \

855 (((
__cÚ¡
 *) \

856 (
__cÚ¡
 *è(
s1
))[2] \

857 - ((
__cÚ¡
 *) \

858 (
__cÚ¡
 *è(
s2
))[2]); \

859 ià(
l
 > 2 && 
__»suÉ
 == 0) \

860 
__»suÉ
 = \

861 (((
__cÚ¡
 *) \

862 (
__cÚ¡
 *è(
s1
))[3] \

863 - ((
__cÚ¡
 *) \

864 (
__cÚ¡
 *è(
s2
))[3]); \

867 
__»suÉ
; }))

	)

869 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

870 (
	`__ex‹nsiÚ__
 ({ 
__cÚ¡
 *
__s2
 = \

871 (
__cÚ¡
 *è(__cÚ¡ *è(
s2
); \

872 
__»suÉ
 = \

873 (((
__cÚ¡
 *è(__cÚ¡ *è(
s1
))[0] \

874 - 
__s2
[0]); \

875 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

877 
__»suÉ
 = (((
__cÚ¡
 *) \

878 (
__cÚ¡
 *è(
s1
))[1] - 
__s2
[1]); \

879 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

881 
__»suÉ
 = (((
__cÚ¡
 *) \

882 (
__cÚ¡
 *è(
s1
))[2] - 
__s2
[2]);\

883 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

884 
__»suÉ
 = (((
__cÚ¡
 *) \

885 (
__cÚ¡
 *è(
s1
))[3] \

886 - 
__s2
[3]); \

889 
__»suÉ
; }))

	)

891 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

892 (
	`__ex‹nsiÚ__
 ({ 
__cÚ¡
 *
__s1
 = \

893 (
__cÚ¡
 *è(__cÚ¡ *è(
s1
); \

894 
__»suÉ
 = \

895 
__s1
[0] - ((
__cÚ¡
 *) \

896 (
__cÚ¡
 *è(
s2
))[0]; \

897 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

899 
__»suÉ
 = (
__s1
[1] \

900 - ((
__cÚ¡
 *) \

901 (
__cÚ¡
 *è(
s2
))[1]); \

902 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

904 
__»suÉ
 = \

905 (
__s1
[2] - ((
__cÚ¡
 *) \

906 (
__cÚ¡
 *è(
s2
))[2]); \

907 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

908 
__»suÉ
 = \

909 (
__s1
[3] \

910 - ((
__cÚ¡
 *) \

911 (
__cÚ¡
 *è(
s2
))[3]); \

914 
__»suÉ
; }))

	)

919 #iâdeà
_HAVE_STRING_ARCH_¡ºcmp


920 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

921 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

922 && ((
	`__butš_cÚ¡ªt_p
 (
s1
) \

923 && 
	`¡¾’
 (
s1
è< ((
size_t
è(
n
))) \

924 || (
	`__butš_cÚ¡ªt_p
 (
s2
) \

925 && 
	`¡¾’
 (
s2
è< ((
size_t
è(
n
)))) \

926 ? 
	`¡rcmp
 (
s1
, 
s2
è: 
	`¡ºcmp
 (s1, s2, 
n
)))

	)

932 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rc¥n
 || defšed 
_FORCE_INLINES


933 #iâdeà
_HAVE_STRING_ARCH_¡rc¥n


934 #ià
__GNUC_PREREQ
 (3, 2)

935 
	#¡rc¥n
(
s
, 
»jeù
) \

936 
__ex‹nsiÚ__
 \

937 ({ 
__r0
, 
__r1
, 
__r2
; \

938 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

939 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

940 ? 
	`__butš_¡rc¥n
 (
s
, 
»jeù
) \

941 : ((
__r0
 = ((
__cÚ¡
 *è(
»jeù
))[0], __r0 == '\0') \

942 ? 
	`¡¾’
 (
s
) \

943 : ((
__r1
 = ((
__cÚ¡
 *è(
»jeù
))[1], __r1 == '\0') \

944 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

945 : ((
__r2
 = ((
__cÚ¡
 *è(
»jeù
))[2], __r2 == '\0') \

946 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

947 : (((
__cÚ¡
 *è(
»jeù
))[3] == '\0' \

948 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

949 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)))))) \

950 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)); })

	)

952 
	#¡rc¥n
(
s
, 
»jeù
) \

953 
__ex‹nsiÚ__
 \

954 ({ 
__r0
, 
__r1
, 
__r2
; \

955 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

956 ? ((
__r0
 = ((
__cÚ¡
 *è(
»jeù
))[0], __r0 == '\0') \

957 ? 
	`¡¾’
 (
s
) \

958 : ((
__r1
 = ((
__cÚ¡
 *è(
»jeù
))[1], __r1 == '\0') \

959 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

960 : ((
__r2
 = ((
__cÚ¡
 *è(
»jeù
))[2], __r2 == '\0') \

961 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

962 : (((
__cÚ¡
 *è(
»jeù
))[3] == '\0' \

963 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

964 : 
	`¡rc¥n
 (
s
, 
»jeù
))))) \

965 : 
	`¡rc¥n
 (
s
, 
»jeù
)); })

	)

969 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (
__cÚ¡
 *
__s
, 
__»jeù
);

970 
__STRING_INLINE
 
size_t


971 
	$__¡rc¥n_c1
 (
__cÚ¡
 *
__s
, 
__»jeù
)

973 
size_t
 
__»suÉ
 = 0;

974 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù
)

975 ++
__»suÉ
;

976  
__»suÉ
;

977 
	}
}

979 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c2
 (
__cÚ¡
 *
__s
, 
__»jeù1
,

980 
__»jeù2
);

981 
__STRING_INLINE
 
size_t


982 
	$__¡rc¥n_c2
 (
__cÚ¡
 *
__s
, 
__»jeù1
, 
__»jeù2
)

984 
size_t
 
__»suÉ
 = 0;

985 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


986 && 
__s
[
__»suÉ
] !ğ
__»jeù2
)

987 ++
__»suÉ
;

988  
__»suÉ
;

989 
	}
}

991 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c3
 (
__cÚ¡
 *
__s
, 
__»jeù1
,

992 
__»jeù2
, 
__»jeù3
);

993 
__STRING_INLINE
 
size_t


994 
	$__¡rc¥n_c3
 (
__cÚ¡
 *
__s
, 
__»jeù1
, 
__»jeù2
,

995 
__»jeù3
)

997 
size_t
 
__»suÉ
 = 0;

998 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


999 && 
__s
[
__»suÉ
] !ğ
__»jeù2
 && __s[__»suÉ] !ğ
__»jeù3
)

1000 ++
__»suÉ
;

1001  
__»suÉ
;

1002 
	}
}

1008 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¥n
 || defšed 
_FORCE_INLINES


1009 #iâdeà
_HAVE_STRING_ARCH_¡r¥n


1010 #ià
__GNUC_PREREQ
 (3, 2)

1011 
	#¡r¥n
(
s
, 
acû±
) \

1012 
__ex‹nsiÚ__
 \

1013 ({ 
__a0
, 
__a1
, 
__a2
; \

1014 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1015 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1016 ? 
	`__butš_¡r¥n
 (
s
, 
acû±
) \

1017 : ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1018 ? ((è(
s
), 0) \

1019 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1020 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1021 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1022 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1023 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1024 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1025 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)))))) \

1026 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)); })

	)

1028 
	#¡r¥n
(
s
, 
acû±
) \

1029 
__ex‹nsiÚ__
 \

1030 ({ 
__a0
, 
__a1
, 
__a2
; \

1031 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1032 ? ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1033 ? ((è(
s
), 0) \

1034 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1035 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1036 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1037 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1038 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1039 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1040 : 
	`¡r¥n
 (
s
, 
acû±
))))) \

1041 : 
	`¡r¥n
 (
s
, 
acû±
)); })

	)

1045 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (
__cÚ¡
 *
__s
, 
__acû±
);

1046 
__STRING_INLINE
 
size_t


1047 
	$__¡r¥n_c1
 (
__cÚ¡
 *
__s
, 
__acû±
)

1049 
size_t
 
__»suÉ
 = 0;

1051 
__s
[
__»suÉ
] =ğ
__acû±
)

1052 ++
__»suÉ
;

1053  
__»suÉ
;

1054 
	}
}

1056 
__STRING_INLINE
 
size_t
 
__¡r¥n_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1057 
__acû±2
);

1058 
__STRING_INLINE
 
size_t


1059 
	$__¡r¥n_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
)

1061 
size_t
 
__»suÉ
 = 0;

1063 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2
)

1064 ++
__»suÉ
;

1065  
__»suÉ
;

1066 
	}
}

1068 
__STRING_INLINE
 
size_t
 
__¡r¥n_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1069 
__acû±2
, 
__acû±3
);

1070 
__STRING_INLINE
 
size_t


1071 
	$__¡r¥n_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1073 
size_t
 
__»suÉ
 = 0;

1075 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2


1076 || 
__s
[
__»suÉ
] =ğ
__acû±3
)

1077 ++
__»suÉ
;

1078  
__»suÉ
;

1079 
	}
}

1084 #ià!
defšed
 
_HAVE_STRING_ARCH_¡½brk
 || defšed 
_FORCE_INLINES


1085 #iâdeà
_HAVE_STRING_ARCH_¡½brk


1086 #ià
__GNUC_PREREQ
 (3, 2)

1087 
	#¡½brk
(
s
, 
acû±
) \

1088 
__ex‹nsiÚ__
 \

1089 ({ 
__a0
, 
__a1
, 
__a2
; \

1090 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1091 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1092 ? 
	`__butš_¡½brk
 (
s
, 
acû±
) \

1093 : ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1094 ? ((è(
s
), (*è
NULL
) \

1095 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1096 ? 
	`__butš_¡rchr
 (
s
, 
__a0
) \

1097 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1098 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1099 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1100 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1101 : 
	`__butš_¡½brk
 (
s
, 
acû±
)))))) \

1102 : 
	`__butš_¡½brk
 (
s
, 
acû±
)); })

	)

1104 
	#¡½brk
(
s
, 
acû±
) \

1105 
__ex‹nsiÚ__
 \

1106 ({ 
__a0
, 
__a1
, 
__a2
; \

1107 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1108 ? ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1109 ? ((è(
s
), (*è
NULL
) \

1110 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1111 ? 
	`¡rchr
 (
s
, 
__a0
) \

1112 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1113 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1114 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1115 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1116 : 
	`¡½brk
 (
s
, 
acû±
))))) \

1117 : 
	`¡½brk
 (
s
, 
acû±
)); })

	)

1121 
__STRING_INLINE
 *
__¡½brk_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1122 
__acû±2
);

1123 
__STRING_INLINE
 *

1124 
	$__¡½brk_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
)

1127 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2
)

1128 ++
__s
;

1129  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1130 
	}
}

1132 
__STRING_INLINE
 *
__¡½brk_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1133 
__acû±2
, 
__acû±3
);

1134 
__STRING_INLINE
 *

1135 
	$__¡½brk_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
,

1136 
__acû±3
)

1139 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2


1140 && *
__s
 !ğ
__acû±3
)

1141 ++
__s
;

1142  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1143 
	}
}

1149 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¡r
 && !
__GNUC_PREREQ
 (2, 97)

1150 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1151 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
è&& 
	`__¡ršg2_1b±r_p
 (needle) \

1152 ? (((
__cÚ¡
 *è(
ÃedË
))[0] == '\0' \

1153 ? (*è(
size_t
è(
hay¡ack
) \

1154 : (((
__cÚ¡
 *è(
ÃedË
))[1] == '\0' \

1155 ? 
	`¡rchr
 (
hay¡ack
, \

1156 ((
__cÚ¡
 *è(
ÃedË
))[0]) \

1157 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
))) \

1158 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
)))

	)

1162 #ià!
defšed
 
_HAVE_STRING_ARCH_¡¹ok_r
 || defšed 
_FORCE_INLINES


1163 #iâdeà
_HAVE_STRING_ARCH_¡¹ok_r


1164 
	#__¡¹ok_r
(
s
, 
£p
, 
Ãx
) \

1165 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
£p
è&& 
	`__¡ršg2_1b±r_p
 (sep) \

1166 && ((
__cÚ¡
 *è(
£p
))[0] != '\0' \

1167 && ((
__cÚ¡
 *è(
£p
))[1] == '\0' \

1168 ? 
	`__¡¹ok_r_1c
 (
s
, ((
__cÚ¡
 *è(
£p
))[0], 
Ãx
) \

1169 : 
	`__¡¹ok_r
 (
s
, 
£p
, 
Ãx
)))

	)

1172 
__STRING_INLINE
 *
__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
);

1173 
__STRING_INLINE
 *

1174 
	$__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
)

1176 *
__»suÉ
;

1177 ià(
__s
 =ğ
NULL
)

1178 
__s
 = *
__Ãx
;

1179 *
__s
 =ğ
__£p
)

1180 ++
__s
;

1181 
__»suÉ
 = 
NULL
;

1182 ià(*
__s
 != '\0')

1184 
__»suÉ
 = 
__s
++;

1185 *
__s
 != '\0')

1186 ià(*
__s
++ =ğ
__£p
)

1188 
__s
[-1] = '\0';

1192 *
__Ãx
 = 
__s
;

1193  
__»suÉ
;

1194 
	}
}

1195 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


1196 
	#¡¹ok_r
(
s
, 
£p
, 
Ãx
è
	`__¡¹ok_r
 (s, s•,‚ex)

	)

1201 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r£p
 || defšed 
_FORCE_INLINES


1202 #iâdeà
_HAVE_STRING_ARCH_¡r£p


1204 *
__¡r£p_g
 (**
__¡ršgp
, 
__cÚ¡
 *
__d–im
);

1205 
	#__¡r£p
(
s
, 
»jeù
) \

1206 
__ex‹nsiÚ__
 \

1207 ({ 
__r0
, 
__r1
, 
__r2
; \

1208 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

1209 && (
__r0
 = ((
__cÚ¡
 *è(
»jeù
))[0], \

1210 ((
__cÚ¡
 *è(
»jeù
))[0] != '\0') \

1211 ? ((
__r1
 = ((
__cÚ¡
 *è(
»jeù
))[1], \

1212 ((
__cÚ¡
 *è(
»jeù
))[1] == '\0') \

1213 ? 
	`__¡r£p_1c
 (
s
, 
__r0
) \

1214 : ((
__r2
 = ((
__cÚ¡
 *è(
»jeù
))[2], __r2 == '\0') \

1215 ? 
	`__¡r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1216 : (((
__cÚ¡
 *è(
»jeù
))[3] == '\0' \

1217 ? 
	`__¡r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1218 : 
	`__¡r£p_g
 (
s
, 
»jeù
)))) \

1219 : 
	`__¡r£p_g
 (
s
, 
»jeù
)); })

	)

1222 
__STRING_INLINE
 *
__¡r£p_1c
 (**
__s
, 
__»jeù
);

1223 
__STRING_INLINE
 *

1224 
	$__¡r£p_1c
 (**
__s
, 
__»jeù
)

1226 *
__»tv®
 = *
__s
;

1227 ià(
__»tv®
 !ğ
NULL
 && (*
__s
 = 
	`¡rchr
 (__»tv®, 
__»jeù
)) != NULL)

1228 *(*
__s
)++ = '\0';

1229  
__»tv®
;

1230 
	}
}

1232 
__STRING_INLINE
 *
__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
);

1233 
__STRING_INLINE
 *

1234 
	$__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
)

1236 *
__»tv®
 = *
__s
;

1237 ià(
__»tv®
 !ğ
NULL
)

1239 *
__ı
 = 
__»tv®
;

1242 ià(*
__ı
 == '\0')

1244 
__ı
 = 
NULL
;

1247 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
)

1249 *
__ı
++ = '\0';

1252 ++
__ı
;

1254 *
__s
 = 
__ı
;

1256  
__»tv®
;

1257 
	}
}

1259 
__STRING_INLINE
 *
__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
,

1260 
__»jeù3
);

1261 
__STRING_INLINE
 *

1262 
	$__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
, 
__»jeù3
)

1264 *
__»tv®
 = *
__s
;

1265 ià(
__»tv®
 !ğ
NULL
)

1267 *
__ı
 = 
__»tv®
;

1270 ià(*
__ı
 == '\0')

1272 
__ı
 = 
NULL
;

1275 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
 || *__ı =ğ
__»jeù3
)

1277 *
__ı
++ = '\0';

1280 ++
__ı
;

1282 *
__s
 = 
__ı
;

1284  
__»tv®
;

1285 
	}
}

1286 #ifdeà
__USE_BSD


1287 
	#¡r£p
(
s
, 
»jeù
è
	`__¡r£p
 (s,„ejeù)

	)

1294 #ifdeà
__USE_MISC


1296 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rdup
 || !defšed 
_HAVE_STRING_ARCH_¡ºdup


1297 
	#__Ãed_m®loc_ªd_ÿÎoc


	)

1298 
	~<¡dlib.h
>

1301 #iâdeà
_HAVE_STRING_ARCH_¡rdup


1303 *
	$__¡rdup
 (
__cÚ¡
 *
__¡ršg
è
__THROW
 
__©Œibu‹_m®loc__
;

1304 
	#__¡rdup
(
s
) \

1305 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1306 ? (((
__cÚ¡
 *è(
s
))[0] == '\0' \

1307 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1308 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1309 *
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1310 ià(
__»tv®
 !ğ
NULL
) \

1311 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, 
__Ën
); \

1312 
__»tv®
; 
	}
})) \

1313 : 
	`__¡rdup
 (
s
)))

	)

1315 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1316 
	#¡rdup
(
s
è
	`__¡rdup
 (s)

	)

1320 #iâdeà
_HAVE_STRING_ARCH_¡ºdup


1322 *
	$__¡ºdup
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__n
)

1323 
__THROW
 
__©Œibu‹_m®loc__
;

1324 
	#__¡ºdup
(
s
, 
n
) \

1325 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1326 ? (((
__cÚ¡
 *è(
s
))[0] == '\0' \

1327 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1328 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1329 
size_t
 
__n
 = (
n
); \

1330 *
__»tv®
; \

1331 ià(
__n
 < 
__Ën
) \

1332 
__Ën
 = 
__n
 + 1; \

1333 
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1334 ià(
__»tv®
 !ğ
NULL
) \

1336 
__»tv®
[
__Ën
 - 1] = '\0'; \

1337 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, \

1338 
__Ën
 - 1); \

1340 
__»tv®
; 
	}
})) \

1341 : 
	`__¡ºdup
 (
s
, 
n
)))

	)

1343 #ifdeà
__USE_GNU


1344 
	#¡ºdup
(
s
, 
n
è
	`__¡ºdup
 (s,‚)

	)

1350 #iâdeà
_FORCE_INLINES


1351 #undeà
__STRING_INLINE


	@/usr/include/bits/string3.h

19 #iâdeà
_STRING_H


23 
__w¬ndeş
 (
__w¬n_mem£t_z”o_Ën
,

26 #iâdeà
__ılu¥lus


30 #undeà
memıy


31 #undeà
memmove


32 #undeà
mem£t


33 #undeà
¡rÿt


34 #undeà
¡rıy


35 #undeà
¡ºÿt


36 #undeà
¡ºıy


37 #ifdeà
__USE_GNU


38 #undeà
mempıy


39 #undeà
¡pıy


41 #ifdeà
__USE_BSD


42 #undeà
bcİy


43 #undeà
bz”o


48 
__ex‹º_®ways_šlše
 *

49 
__NTH
 (
	$memıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

50 
size_t
 
__Ën
))

52  
	`__butš___memıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

53 
	}
}

55 
__ex‹º_®ways_šlše
 *

56 
__NTH
 (
	$memmove
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

57 
size_t
 
__Ën
))

59  
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

60 
	}
}

62 #ifdeà
__USE_GNU


63 
__ex‹º_®ways_šlše
 *

64 
__NTH
 (
	$mempıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

65 
size_t
 
__Ën
))

67  
	`__butš___mempıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

68 
	}
}

77 
__ex‹º_®ways_šlše
 *

78 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

80 ià(
	`__butš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

81 && (!
	`__butš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

83 
	`__w¬n_mem£t_z”o_Ën
 ();

84  
__de¡
;

86  
	`__butš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

87 
	}
}

89 #ifdeà
__USE_BSD


90 
__ex‹º_®ways_šlše
 

91 
__NTH
 (
	$bcİy
 (
__cÚ¡
 *
__»¡riù
 
__¤c
, *__»¡riù 
__de¡
,

92 
size_t
 
__Ën
))

94 (è
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

95 
	}
}

97 
__ex‹º_®ways_šlše
 

98 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

100 (è
	`__butš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

101 
	}
}

104 
__ex‹º_®ways_šlše
 *

105 
__NTH
 (
	$¡rıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
))

107  
	`__butš___¡rıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

108 
	}
}

110 #ifdeà
__USE_GNU


111 
__ex‹º_®ways_šlše
 *

112 
__NTH
 (
	$¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
))

114  
	`__butš___¡pıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

115 
	}
}

119 
__ex‹º_®ways_šlše
 *

120 
__NTH
 (
	$¡ºıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

121 
size_t
 
__Ën
))

123  
	`__butš___¡ºıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

124 
	}
}

127 *
	$__¡²ıy_chk
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
,

128 
size_t
 
__de¡Ën
è
__THROW
;

129 *
	`__REDIRECT_NTH
 (
__¡²ıy_®Ÿs
, (*
__de¡
,

130 
__cÚ¡
 *
__¤c
,

131 
size_t
 
__n
), 
¡²ıy
);

133 
__ex‹º_®ways_šlše
 *

134 
	`__NTH
 (
	$¡²ıy
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
))

136 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1

137 && (!
	`__butš_cÚ¡ªt_p
 (
__n
è|| __À<ğ
	`__bos
 (
__de¡
)))

138  
	`__¡²ıy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

139  
	`__¡²ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

140 
	}
}

143 
__ex‹º_®ways_šlše
 *

144 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
))

146  
	`__butš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

147 
	}
}

150 
__ex‹º_®ways_šlše
 *

151 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

152 
size_t
 
__Ën
))

154  
	`__butš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

155 
	}
}

	@/usr/include/bits/sys_errlist.h

20 #iâdeà
_STDIO_H


26 #ifdeà 
__USE_BSD


27 
sys_Ã¼
;

28 
__cÚ¡
 *__cÚ¡ 
sys_”¾i¡
[];

30 #ifdeà 
__USE_GNU


31 
_sys_Ã¼
;

32 
__cÚ¡
 *__cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/time.h

24 #iâdeà
__Ãed_timev®


25 #iâdeà
_BITS_TIME_H


26 
	#_BITS_TIME_H
 1

	)

34 
	#CLOCKS_PER_SEC
 1000000l

	)

36 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


39 
	~<b™s/ty³s.h
>

40 
__syscÚf
 ();

41 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

44 #ifdeà
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

55 
	#TIMER_ABSTIME
 1

	)

61 #ifdeà
__Ãed_timev®


62 #undeà
__Ãed_timev®


63 #iâdeà
_STRUCT_TIMEVAL


64 
	#_STRUCT_TIMEVAL
 1

	)

65 
	~<b™s/ty³s.h
>

69 
	stimev®


71 
__time_t
 
	mtv_£c
;

72 
__su£cÚds_t
 
	mtv_u£c
;

	@/usr/include/bits/types.h

24 #iâdef 
_BITS_TYPES_H


25 
	#_BITS_TYPES_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	t__u_ch¬
;

32 
	t__u_shÜt
;

33 
	t__u_št
;

34 
	t__u_lÚg
;

37 sigÃd 
	t__št8_t
;

38 
	t__ušt8_t
;

39 sigÃd 
	t__št16_t
;

40 
	t__ušt16_t
;

41 sigÃd 
	t__št32_t
;

42 
	t__ušt32_t
;

43 #ià
__WORDSIZE
 == 64

44 sigÃd 
	t__št64_t
;

45 
	t__ušt64_t
;

46 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


47 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

48 
__ex‹nsiÚ__
 
	t__ušt64_t
;

52 #ià
__WORDSIZE
 == 64

53 
	t__quad_t
;

54 
	t__u_quad_t
;

55 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


56 
__ex‹nsiÚ__
 
	t__quad_t
;

57 
__ex‹nsiÚ__
 
	t__u_quad_t
;

61 
	m__v®
[2];

62 } 
	t__quad_t
;

65 
__u_lÚg
 
	m__v®
[2];

66 } 
	t__u_quad_t
;

99 
	#__S16_TYPE
 

	)

100 
	#__U16_TYPE
 

	)

101 
	#__S32_TYPE
 

	)

102 
	#__U32_TYPE
 

	)

103 
	#__SLONGWORD_TYPE
 

	)

104 
	#__ULONGWORD_TYPE
 

	)

105 #ià
__WORDSIZE
 == 32

106 
	#__SQUAD_TYPE
 
__quad_t


	)

107 
	#__UQUAD_TYPE
 
__u_quad_t


	)

108 
	#__SWORD_TYPE
 

	)

109 
	#__UWORD_TYPE
 

	)

110 
	#__SLONG32_TYPE
 

	)

111 
	#__ULONG32_TYPE
 

	)

112 
	#__S64_TYPE
 
__quad_t


	)

113 
	#__U64_TYPE
 
__u_quad_t


	)

116 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

117 #–ià
__WORDSIZE
 == 64

118 
	t__SQUAD_TYPE
 

	)

119 
	t__UQUAD_TYPE
 

	)

120 
	t__SWORD_TYPE
 

	)

121 
	t__UWORD_TYPE
 

	)

122 
	t__SLONG32_TYPE
 

	)

123 
	t__ULONG32_TYPE
 

	)

124 
	t__S64_TYPE
 

	)

125 
	t__U64_TYPE
 

	)

127 
	t__STD_TYPE
 

	)

131 
	~<b™s/ty³sizes.h
>

134 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

135 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

136 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

137 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

138 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

139 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

140 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

141 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

142 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

143 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

144 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

145 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

146 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

147 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

148 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

149 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

150 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

151 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

153 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

154 
__STD_TYPE
 
__SWBLK_T_TYPE
 
	g__swblk_t
;

155 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

158 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

161 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

164 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

169 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

170 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

173 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

174 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

177 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

178 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

180 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__off64_t
 
	t__loff_t
;

185 
__quad_t
 *
	t__qaddr_t
;

186 *
	t__ÿddr_t
;

189 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

192 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

195 #undeà
__STD_TYPE


	@/usr/include/bits/unistd.h

20 #iâdeà
_UNISTD_H


24 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

25 
size_t
 
__buæ’
è
__wur
;

26 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

27 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

28 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

29 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

30 
size_t
 
__buæ’
), 
__»ad_chk
)

31 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

34 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


35 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

37 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

39 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

40  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

42 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

43  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

45  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

46 
	}
}

48 #ifdeà
__USE_UNIX98


49 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

50 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

51 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

52 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

53 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

54 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

55 
__off_t
 
__off£t
), 
´—d
è
__wur
;

56 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

57 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

58 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

59 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

60 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

61 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

62 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

64 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

65 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

66 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

67 
__´—d64_chk
)

68 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

71 #iâdeà
__USE_FILE_OFFSET64


72 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


73 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

75 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

77 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

78  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

80 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

81  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

82 
	`__bos0
 (
__buf
));

84  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

85 
	}
}

87 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


88 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

90 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

92 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

93  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

95 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

96  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

97 
	`__bos0
 (
__buf
));

100  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

101 
	}
}

104 #ifdeà
__USE_LARGEFILE64


105 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


106 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

108 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

110 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

111  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

113 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

114  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

115 
	`__bos0
 (
__buf
));

118  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

119 
	}
}

123 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


124 
ssize_t
 
	$__»adlšk_chk
 (
__cÚ¡
 *
__»¡riù
 
__·th
,

125 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

126 
size_t
 
__buæ’
)

127 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

128 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

129 (
__cÚ¡
 *
__»¡riù
 
__·th
,

130 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

131 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

132 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

133 (
__cÚ¡
 *
__»¡riù
 
__·th
,

134 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

135 
size_t
 
__buæ’
), 
__»adlšk_chk
)

136 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

139 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


140 
	`__NTH
 (
	$»adlšk
 (
__cÚ¡
 *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

141 
size_t
 
__Ën
))

143 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

145 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

146  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

148 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

149  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

151  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

152 
	}
}

155 #ifdeà
__USE_ATFILE


156 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

157 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

158 
size_t
 
__buæ’
)

159 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

160 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

161 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

162 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

163 
»adlšk©
)

164 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

165 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

166 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

167 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

168 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

169 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

173 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


174 
	`__NTH
 (
	$»adlšk©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

175 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

177 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

179 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

180  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

182 ià(
__Ën
 > 
	`__bos
 (
__buf
))

183  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

184 
	`__bos
 (
__buf
));

186  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

187 
	}
}

190 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

191 
__THROW
 
__wur
;

192 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

193 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

194 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

195 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

196 
__g‘cwd_chk
)

197 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

200 
__ex‹º_®ways_šlše
 
__wur
 *

201 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

203 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

205 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

206  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

208 ià(
__size
 > 
	`__bos
 (
__buf
))

209  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

211  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

212 
	}
}

214 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


215 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

216 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

217 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

218 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

221 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

222 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

224 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

225  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

226  
	`__g‘wd_w¬n
 (
__buf
);

227 
	}
}

230 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

231 
size_t
 
__buæ’
è
__THROW
;

232 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

233 
size_t
 
__Ën
), 
cÚf¡r
);

234 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

235 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

236 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

237 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

240 
__ex‹º_®ways_šlše
 
size_t


241 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

243 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

245 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

246  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

248 ià(
	`__bos
 (
__buf
è< 
__Ën
)

249  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

251  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

252 
	}
}

255 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

256 
__THROW
 
__wur
;

257 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

258 
g‘groups
è
__wur
;

259 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

260 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

261 
__g‘groups_chk
)

262 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

265 
__ex‹º_®ways_šlše
 

266 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

268 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

270 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

271  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

273 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

274  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

276  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

277 
	}
}

280 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

281 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

282 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

283 
size_t
 
__buæ’
), 
‰yÇme_r
)

284 
	`__nÚnuÎ
 ((2));

285 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

286 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

287 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

288 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

291 
__ex‹º_®ways_šlše
 

292 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

294 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

296 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

297  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

299 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

300  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

302  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

303 
	}
}

306 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


307 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

308 
	`__nÚnuÎ
 ((1));

309 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

310 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

311 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

312 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

313 
__g‘logš_r_chk
)

314 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

317 
__ex‹º_®ways_šlše
 

318 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

320 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

322 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

323  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

325 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

326  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

328  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

329 
	}
}

333 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


334 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

335 
__THROW
 
	`__nÚnuÎ
 ((1));

336 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

337 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

338 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

339 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

340 
__g‘ho¡Çme_chk
)

341 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

344 
__ex‹º_®ways_šlše
 

345 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

347 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

349 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

350  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

352 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

353  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

355  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

356 
	}
}

360 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

361 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

362 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

363 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

364 
size_t
 
__buæ’
),

365 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

366 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

367 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

368 
__g‘domašÇme_chk
)

369 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

373 
__ex‹º_®ways_šlše
 

374 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

376 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

378 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

379  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

381 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

382  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

384  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

385 
	}
}

	@/usr/include/bits/utsname.h

19 #iâdeà
_SYS_UTSNAME_H


24 
	#_UTSNAME_LENGTH
 65

	)

29 
	#_UTSNAME_DOMAIN_LENGTH
 
_UTSNAME_LENGTH


	)

	@/usr/include/bits/waitflags.h

20 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


26 
	#WNOHANG
 1

	)

27 
	#WUNTRACED
 2

	)

30 
	#WSTOPPED
 2

	)

31 
	#WEXITED
 4

	)

32 
	#WCONTINUED
 8

	)

33 
	#WNOWAIT
 0x01000000

	)

35 
	#__WNOTHREAD
 0x20000000

	)

37 
	#__WALL
 0x40000000

	)

38 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

20 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


29 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

32 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

35 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

38 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

41 
	#__WIFSIGNALED
(
¡©us
) \

42 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

45 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

49 #ifdeà
WCONTINUED


50 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

54 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

57 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

58 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

59 
	#__W_CONTINUED
 0xffff

	)

60 
	#__WCOREFLAG
 0x80

	)

63 #ifdef 
__USE_BSD


65 
	~<’dŸn.h
>

67 
	uwa™


69 
	mw_¡©us
;

72 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


73 
	m__w_‹rmsig
:7;

74 
	m__w_cÜedump
:1;

75 
	m__w_»tcode
:8;

78 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


80 
	m__w_»tcode
:8;

81 
	m__w_cÜedump
:1;

82 
	m__w_‹rmsig
:7;

84 } 
	m__wa™_‹rmš©ed
;

87 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


88 
	m__w_¡İv®
:8;

89 
	m__w_¡İsig
:8;

92 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


94 
	m__w_¡İsig
:8;

95 
	m__w_¡İv®
:8;

97 } 
	m__wa™_¡İ³d
;

100 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

101 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

102 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

103 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

104 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/bits/wchar.h

20 #iâdeà
_BITS_WCHAR_H


21 
	#_BITS_WCHAR_H
 1

	)

24 #ifdeà
__WCHAR_MAX__


25 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

27 
	#__WCHAR_MAX
 (2147483647)

	)

32 #ifdeà
__WCHAR_UNSIGNED__


33 
	#__WCHAR_MIN
 
L
'\0'

	)

37 #–ià
L
'\0' - 1 > 0

38 
	#__WCHAR_MIN
 
L
'\0'

	)

40 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__


4 
	#__WORDSIZE
 64

	)

5 
	#__WORDSIZE_COMPAT32
 1

	)

7 
	#__WORDSIZE
 32

	)

	@/usr/include/bits/xopen_lim.h

30 #iâdeà
_XOPEN_LIM_H


31 
	#_XOPEN_LIM_H
 1

	)

33 
	#__Ãed_IOV_MAX


	)

34 
	~<b™s/¡dio_lim.h
>

66 
	#_XOPEN_IOV_MAX
 
_POSIX_UIO_MAXIOV


	)

71 
	#NL_ARGMAX
 
_POSIX_ARG_MAX


	)

74 
	#NL_LANGMAX
 
_POSIX2_LINE_MAX


	)

77 
	#NL_MSGMAX
 
INT_MAX


	)

81 
	#NL_NMAX
 
INT_MAX


	)

84 
	#NL_SETMAX
 
INT_MAX


	)

87 
	#NL_TEXTMAX
 
INT_MAX


	)

90 
	#NZERO
 20

	)

94 #ifdeà
INT_MAX


95 #ià
INT_MAX
 == 32767

96 
	#WORD_BIT
 16

	)

98 #ià
INT_MAX
 == 2147483647

99 
	#WORD_BIT
 32

	)

102 
	#WORD_BIT
 64

	)

105 #–ià
defšed
 
__INT_MAX__


106 #ià
__INT_MAX__
 == 32767

107 
	#WORD_BIT
 16

	)

109 #ià
__INT_MAX__
 == 2147483647

110 
	#WORD_BIT
 32

	)

113 
	#WORD_BIT
 64

	)

117 
	#WORD_BIT
 32

	)

121 #ifdeà
LONG_MAX


122 #ià
LONG_MAX
 == 2147483647

123 
	#LONG_BIT
 32

	)

126 
	#LONG_BIT
 64

	)

128 #–ià
defšed
 
__LONG_MAX__


129 #ià
__LONG_MAX__
 == 2147483647

130 
	#LONG_BIT
 32

	)

133 
	#LONG_BIT
 64

	)

136 
	~<b™s/wÜdsize.h
>

137 #ià
__WORDSIZE
 == 64

138 
	#LONG_BIT
 64

	)

140 
	#LONG_BIT
 32

	)

	@/usr/include/features.h

19 #iâdef 
_FEATURES_H


20 
	#_FEATURES_H
 1

	)

95 #undeà
__USE_ISOC99


96 #undeà
__USE_ISOC95


97 #undeà
__USE_POSIX


98 #undeà
__USE_POSIX2


99 #undeà
__USE_POSIX199309


100 #undeà
__USE_POSIX199506


101 #undeà
__USE_XOPEN


102 #undeà
__USE_XOPEN_EXTENDED


103 #undeà
__USE_UNIX98


104 #undeà
__USE_XOPEN2K


105 #undeà
__USE_XOPEN2K8


106 #undeà
__USE_LARGEFILE


107 #undeà
__USE_LARGEFILE64


108 #undeà
__USE_FILE_OFFSET64


109 #undeà
__USE_BSD


110 #undeà
__USE_SVID


111 #undeà
__USE_MISC


112 #undeà
__USE_ATFILE


113 #undeà
__USE_GNU


114 #undeà
__USE_REENTRANT


115 #undeà
__USE_FORTIFY_LEVEL


116 #undeà
__FAVOR_BSD


117 #undeà
__KERNEL_STRICT_NAMES


121 #iâdeà
_LOOSE_KERNEL_NAMES


122 
	#__KERNEL_STRICT_NAMES


	)

126 
	#__USE_ANSI
 1

	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

144 #ià
defšed
 
_BSD_SOURCE
 && \

145 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

146 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_XOPEN_SOURCE_EXTENDED
 || \

147 
defšed
 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

148 
	#__FAVOR_BSD
 1

	)

152 #ifdeà
_GNU_SOURCE


153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_POSIX_SOURCE


156 
	#_POSIX_SOURCE
 1

	)

157 #undeà
_POSIX_C_SOURCE


158 
	#_POSIX_C_SOURCE
 200809L

	)

159 #undeà
_XOPEN_SOURCE


160 
	#_XOPEN_SOURCE
 700

	)

161 #undeà
_XOPEN_SOURCE_EXTENDED


162 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

163 #undeà
_LARGEFILE64_SOURCE


164 
	#_LARGEFILE64_SOURCE
 1

	)

165 #undeà
_BSD_SOURCE


166 
	#_BSD_SOURCE
 1

	)

167 #undeà
_SVID_SOURCE


168 
	#_SVID_SOURCE
 1

	)

169 #undeà
_ATFILE_SOURCE


170 
	#_ATFILE_SOURCE
 1

	)

175 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

176 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

177 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_XOPEN_SOURCE_EXTENDED
 && \

178 !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

179 
	#_BSD_SOURCE
 1

	)

180 
	#_SVID_SOURCE
 1

	)

187 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

188 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

189 
	#__USE_ISOC99
 1

	)

193 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

194 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

195 
	#__USE_ISOC95
 1

	)

200 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

201 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

202 
	#_POSIX_SOURCE
 1

	)

203 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

204 
	#_POSIX_C_SOURCE
 2

	)

205 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

206 
	#_POSIX_C_SOURCE
 199506L

	)

207 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

208 
	#_POSIX_C_SOURCE
 200112L

	)

210 
	#_POSIX_C_SOURCE
 200809L

	)

212 
	#__USE_POSIX_IMPLICITLY
 1

	)

215 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


216 
	#__USE_POSIX
 1

	)

219 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


220 
	#__USE_POSIX2
 1

	)

223 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

224 
	#__USE_POSIX199309
 1

	)

227 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

228 
	#__USE_POSIX199506
 1

	)

231 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

232 
	#__USE_XOPEN2K
 1

	)

233 #undeà
__USE_ISOC99


234 
	#__USE_ISOC99
 1

	)

237 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

238 
	#__USE_XOPEN2K8
 1

	)

239 #undeà
_ATFILE_SOURCE


240 
	#_ATFILE_SOURCE
 1

	)

243 #ifdef 
_XOPEN_SOURCE


244 
	#__USE_XOPEN
 1

	)

245 #ià(
_XOPEN_SOURCE
 - 0) >= 500

246 
	#__USE_XOPEN_EXTENDED
 1

	)

247 
	#__USE_UNIX98
 1

	)

248 #undeà
_LARGEFILE_SOURCE


249 
	#_LARGEFILE_SOURCE
 1

	)

250 #ià(
_XOPEN_SOURCE
 - 0) >= 600

251 #ià(
_XOPEN_SOURCE
 - 0) >= 700

252 
	#__USE_XOPEN2K8
 1

	)

254 
	#__USE_XOPEN2K
 1

	)

255 #undeà
__USE_ISOC99


256 
	#__USE_ISOC99
 1

	)

259 #ifdeà
_XOPEN_SOURCE_EXTENDED


260 
	#__USE_XOPEN_EXTENDED
 1

	)

265 #ifdeà
_LARGEFILE_SOURCE


266 
	#__USE_LARGEFILE
 1

	)

269 #ifdeà
_LARGEFILE64_SOURCE


270 
	#__USE_LARGEFILE64
 1

	)

273 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

274 
	#__USE_FILE_OFFSET64
 1

	)

277 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


278 
	#__USE_MISC
 1

	)

281 #ifdef 
_BSD_SOURCE


282 
	#__USE_BSD
 1

	)

285 #ifdef 
_SVID_SOURCE


286 
	#__USE_SVID
 1

	)

289 #ifdef 
_ATFILE_SOURCE


290 
	#__USE_ATFILE
 1

	)

293 #ifdef 
_GNU_SOURCE


294 
	#__USE_GNU
 1

	)

297 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


298 
	#__USE_REENTRANT
 1

	)

301 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

302 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

303 #ià
_FORTIFY_SOURCE
 > 1

304 
	#__USE_FORTIFY_LEVEL
 2

	)

306 
	#__USE_FORTIFY_LEVEL
 1

	)

309 
	#__USE_FORTIFY_LEVEL
 0

	)

313 
	~<b™s/´edefs.h
>

316 
	#__STDC_ISO_10646__
 200009L

	)

324 #undeà
__GNU_LIBRARY__


325 
	#__GNU_LIBRARY__
 6

	)

329 
	#__GLIBC__
 2

	)

330 
	#__GLIBC_MINOR__
 11

	)

332 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

333 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

336 #ià
defšed
 
__GNUC__
 \

337 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

338 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

339 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

340 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

344 #iâdeà
__ASSEMBLER__


345 #iâdeà
_SYS_CDEFS_H


346 
	~<sys/cdefs.h
>

351 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


352 
	#__USE_LARGEFILE
 1

	)

353 
	#__USE_LARGEFILE64
 1

	)

359 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

360 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

361 && 
defšed
 
	g__ex‹º_šlše


362 
	#__USE_EXTERN_INLINES
 1

	)

367 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

368 && (
defšed
 
	g_LIBC
 || !defšed 
	g__OPTIMIZE_SIZE__
è&& !defšed 
	g__NO_INLINE__
 \

369 && 
defšed
 
	g__ex‹º_šlše


370 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

378 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

21 #iâdeà
_GETOPT_H


23 #iâdeà
__Ãed_g‘İt


24 
	#_GETOPT_H
 1

	)

34 #ià!
defšed
 
__GNU_LIBRARY__


35 
	~<ùy³.h
>

38 #iâdeà
__THROW


39 #iâdeà
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

42 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__ılu¥lus


59 *
İrg
;

73 
İtšd
;

78 
İ‹¼
;

82 
İtİt
;

84 #iâdeà
__Ãed_g‘İt


106 
	sİtiÚ


108 cÚ¡ *
	gÇme
;

111 
	ghas_¬g
;

112 *
	gæag
;

113 
	gv®
;

118 
	#no_¬gum’t
 0

	)

119 
	#»quœed_¬gum’t
 1

	)

120 
	#İtiÚ®_¬gum’t
 2

	)

148 #ifdeà
__GNU_LIBRARY__


152 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

153 
__THROW
;

155 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

156 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


160 #ifdeà
__REDIRECT


161 
__REDIRECT
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

162 cÚ¡ *
__shÜtİts
),

163 
__posix_g‘İt
è
__THROW
;

165 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

166 cÚ¡ *
__shÜtİts
è
__THROW
;

167 
	#g‘İt
 
__posix_g‘İt


	)

171 
g‘İt
 ();

174 #iâdeà
__Ãed_g‘İt


175 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

176 cÚ¡ *
__shÜtİts
,

177 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

178 
__THROW
;

179 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

180 cÚ¡ *
__shÜtİts
,

181 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

182 
__THROW
;

186 #ifdef 
__ılu¥lus


191 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_pos_t
 
_G_åos_t


	)

35 
	#_IO_åos_t
 
_G_åos_t


	)

36 
	#_IO_åos64_t
 
_G_åos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li¡
 
_G_va_li¡


	)

48 
	#_IO_wšt_t
 
_G_wšt_t


	)

50 #ifdeà
_G_NEED_STDARG_H


52 
	#__Ãed___va_li¡


	)

53 
	~<¡d¬g.h
>

54 #ifdeà
__GNUC_VA_LIST


55 #undeà
_IO_va_li¡


56 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

60 #iâdeà
__P


61 #ià
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifdeà
__STDC__


65 
	#__P
(
p
è
	)
p

66 
	#__PMT
(
p
è
	)
p

68 
	#__P
(
p
è()

	)

69 
	#__PMT
(
p
è()

	)

75 #iâdeà
_PARAMS


76 
	#_PARAMS
(
´Ùos
è
	`__P
ÕrÙos)

	)

79 #iâdeà
__STDC__


81 cÚ¡

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #iâdeà
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #iâdeà
EOF


90 
	#EOF
 (-1)

	)

92 #iâdeà
NULL


93 #ià
defšed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuÎ
)

	)

97 #ià!
defšed
(
__ılu¥lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifdeà
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifdeà
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

151 
	#_IO_SKIPWS
 01

	)

152 
	#_IO_LEFT
 02

	)

153 
	#_IO_RIGHT
 04

	)

154 
	#_IO_INTERNAL
 010

	)

155 
	#_IO_DEC
 020

	)

156 
	#_IO_OCT
 040

	)

157 
	#_IO_HEX
 0100

	)

158 
	#_IO_SHOWBASE
 0200

	)

159 
	#_IO_SHOWPOINT
 0400

	)

160 
	#_IO_UPPERCASE
 01000

	)

161 
	#_IO_SHOWPOS
 02000

	)

162 
	#_IO_SCIENTIFIC
 04000

	)

163 
	#_IO_FIXED
 010000

	)

164 
	#_IO_UNITBUF
 020000

	)

165 
	#_IO_STDIO
 040000

	)

166 
	#_IO_DONT_CLOSE
 0100000

	)

167 
	#_IO_BOOLALPHA
 0200000

	)

170 
_IO_jump_t
; 
	g_IO_FILE
;

173 #ifdeà
_IO_MTSAFE_IO


174 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

175 
	~<b™s/¡dio-lock.h
>

180 
	t_IO_lock_t
;

186 
	s_IO_m¬k”
 {

187 
_IO_m¬k”
 *
	m_Ãxt
;

188 
_IO_FILE
 *
	m_sbuf
;

192 
	m_pos
;

194 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

195 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

196 
	mpublic
:

197 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

198 ~
¡»amm¬k”
();

199 
§všg
(è{  
	m_¥os
 == -2; }

200 
d–
(
¡»amm¬k”
&);

201 
d–
();

206 
	e__codecvt_»suÉ


208 
	m__codecvt_ok
,

209 
	m__codecvt_·¹Ÿl
,

210 
	m__codecvt_”rÜ
,

211 
	m__codecvt_nocÚv


214 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


217 
	s_IO_codecvt


219 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

220 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

221 
	m__mb¡©e_t
 *,

222 cÚ¡ 
	mwch¬_t
 *,

223 cÚ¡ 
	mwch¬_t
 *,

224 cÚ¡ 
	mwch¬_t
 **, *,

226 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

227 
	m__mb¡©e_t
 *, *,

229 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

230 
	m__mb¡©e_t
 *,

232 cÚ¡ **, 
	mwch¬_t
 *,

233 
	mwch¬_t
 *, wchar_t **);

234 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

235 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

236 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

237 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

238 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

240 
_IO_icÚv_t
 
	m__cd_š
;

241 
_IO_icÚv_t
 
	m__cd_out
;

245 
	s_IO_wide_d©a


247 
wch¬_t
 *
	m_IO_»ad_±r
;

248 
wch¬_t
 *
	m_IO_»ad_’d
;

249 
wch¬_t
 *
	m_IO_»ad_ba£
;

250 
wch¬_t
 *
	m_IO_wr™e_ba£
;

251 
wch¬_t
 *
	m_IO_wr™e_±r
;

252 
wch¬_t
 *
	m_IO_wr™e_’d
;

253 
wch¬_t
 *
	m_IO_buf_ba£
;

254 
wch¬_t
 *
	m_IO_buf_’d
;

256 
wch¬_t
 *
	m_IO_§ve_ba£
;

257 
wch¬_t
 *
	m_IO_backup_ba£
;

259 
wch¬_t
 *
	m_IO_§ve_’d
;

261 
__mb¡©e_t
 
	m_IO_¡©e
;

262 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

263 
_IO_codecvt
 
	m_codecvt
;

265 
wch¬_t
 
	m_shÜtbuf
[1];

267 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

271 
	s_IO_FILE
 {

272 
	m_æags
;

273 
	#_IO_fe_æags
 
_æags


	)

277 * 
	m_IO_»ad_±r
;

278 * 
	m_IO_»ad_’d
;

279 * 
	m_IO_»ad_ba£
;

280 * 
	m_IO_wr™e_ba£
;

281 * 
	m_IO_wr™e_±r
;

282 * 
	m_IO_wr™e_’d
;

283 * 
	m_IO_buf_ba£
;

284 * 
	m_IO_buf_’d
;

286 *
	m_IO_§ve_ba£
;

287 *
	m_IO_backup_ba£
;

288 *
	m_IO_§ve_’d
;

290 
_IO_m¬k”
 *
	m_m¬k”s
;

292 
_IO_FILE
 *
	m_chaš
;

294 
	m_f’o
;

296 
	m_blksize
;

298 
	m_æags2
;

300 
_IO_off_t
 
	m_Şd_off£t
;

302 
	#__HAVE_COLUMN


	)

304 
	m_cur_cŞumn
;

305 sigÃd 
	m_vbË_off£t
;

306 
	m_shÜtbuf
[1];

310 
_IO_lock_t
 *
	m_lock
;

311 #ifdeà
_IO_USE_OLD_IO_FILE


314 
	s_IO_FILE_com¶‘e


316 
_IO_FILE
 
	m_fe
;

318 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

319 
_IO_off64_t
 
	m_off£t
;

320 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


322 
_IO_codecvt
 *
	m_codecvt
;

323 
_IO_wide_d©a
 *
	m_wide_d©a
;

324 
_IO_FILE
 *
	m_ä“»s_li¡
;

325 *
	m_ä“»s_buf
;

326 
size_t
 
	m_ä“»s_size
;

328 *
	m__·d1
;

329 *
	m__·d2
;

330 *
	m__·d3
;

331 *
	m__·d4
;

332 
size_t
 
	m__·d5
;

334 
	m_mode
;

336 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

340 #iâdeà
__ılu¥lus


341 
_IO_FILE
 
	t_IO_FILE
;

344 
	g_IO_FILE_¶us
;

346 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

347 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

348 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

349 #iâdeà
_LIBC


350 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

351 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

352 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

354 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

355 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

356 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

364 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

372 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, 
	t__cÚ¡
 *
	t__buf
,

373 
	tsize_t
 
	t__n
);

381 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

384 
	t__io_şo£_â
 (*
	t__cook›
);

387 #ifdeà
_GNU_SOURCE


389 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

390 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

391 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

392 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

397 
__io_»ad_â
 *
	m»ad
;

398 
__io_wr™e_â
 *
	mwr™e
;

399 
__io_£ek_â
 *
	m£ek
;

400 
__io_şo£_â
 *
	mşo£
;

401 } 
	t_IO_cook›_io_funùiÚs_t
;

402 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

404 
	g_IO_cook›_fe
;

407 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

408 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

412 #ifdeà
__ılu¥lus


416 
__und”æow
 (
_IO_FILE
 *);

417 
__uæow
 (
_IO_FILE
 *);

418 
__ov”æow
 (
_IO_FILE
 *, );

419 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


420 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

421 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

422 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

425 #ià 
__GNUC__
 >= 3

426 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

428 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

431 
	#_IO_g‘c_uÆocked
(
_å
) \

432 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

433 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

434 
	#_IO_³ekc_uÆocked
(
_å
) \

435 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

436 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

437 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

438 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

439 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

440 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

441 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

443 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


444 
	#_IO_g‘wc_uÆocked
(
_å
) \

445 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

446 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

447 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

448 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

449 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

450 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

451 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

452 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

453 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

454 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

457 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

458 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

460 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

461 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

462 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

463 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

465 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

468 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

469 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

471 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

472 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

473 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

475 #ifdeà
_IO_MTSAFE_IO


476 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

477 
	#_IO_æockfe
(
_å
) \

478 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

479 
	#_IO_fuÆockfe
(
_å
) \

480 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

482 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

483 
	#_IO_æockfe
(
_å
è

	)

484 
	#_IO_fuÆockfe
(
_å
è

	)

485 
	#_IO_árylockfe
(
_å
è

	)

486 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

487 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

490 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

491 
_IO_va_li¡
, *
__»¡riù
);

492 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

493 
_IO_va_li¡
);

494 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

495 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

497 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

498 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

500 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

502 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


503 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

504 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

505 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

506 #ià
__GNUC__
 >= 2

509 #ià
defšed
 
_LIBC
 && defšed 
SHARED


510 
	~<shlib-com·t.h
>

511 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

512 
	#_IO_fwide_maybe_šcom·tibË
 \

513 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

514 cÚ¡ 
_IO_¡dš_u£d
;

515 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

518 #iâdeà
_IO_fwide_maybe_šcom·tibË


519 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

523 
	#_IO_fwide
(
__å
, 
__mode
) \

524 ({ 
__»suÉ
 = (
__mode
); \

525 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

527 ià((
__å
)->
_mode
 == 0) \

529 (
__å
)->
_mode
 = -1; \

530 
__»suÉ
 = (
__å
)->
_mode
; \

532 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

533 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

535 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

536 
__»suÉ
; })

	)

539 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

540 
_IO_va_li¡
, *
__»¡riù
);

541 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

542 
_IO_va_li¡
);

543 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

544 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

547 #ifdeà
__LDBL_COMPAT


548 
	~<b™s/libio-ldbl.h
>

551 #ifdeà
__ılu¥lus


	@/usr/include/linux/prctl.h

1 #iâdeà
_LINUX_PRCTL_H


2 
	#_LINUX_PRCTL_H


	)

6 
	#PR_SET_PDEATHSIG
 1

	)

7 
	#PR_GET_PDEATHSIG
 2

	)

10 
	#PR_GET_DUMPABLE
 3

	)

11 
	#PR_SET_DUMPABLE
 4

	)

14 
	#PR_GET_UNALIGN
 5

	)

15 
	#PR_SET_UNALIGN
 6

	)

16 
	#PR_UNALIGN_NOPRINT
 1

	)

17 
	#PR_UNALIGN_SIGBUS
 2

	)

21 
	#PR_GET_KEEPCAPS
 7

	)

22 
	#PR_SET_KEEPCAPS
 8

	)

25 
	#PR_GET_FPEMU
 9

	)

26 
	#PR_SET_FPEMU
 10

	)

27 
	#PR_FPEMU_NOPRINT
 1

	)

28 
	#PR_FPEMU_SIGFPE
 2

	)

31 
	#PR_GET_FPEXC
 11

	)

32 
	#PR_SET_FPEXC
 12

	)

33 
	#PR_FP_EXC_SW_ENABLE
 0x80

	)

34 
	#PR_FP_EXC_DIV
 0x010000

	)

35 
	#PR_FP_EXC_OVF
 0x020000

	)

36 
	#PR_FP_EXC_UND
 0x040000

	)

37 
	#PR_FP_EXC_RES
 0x080000

	)

38 
	#PR_FP_EXC_INV
 0x100000

	)

39 
	#PR_FP_EXC_DISABLED
 0

	)

40 
	#PR_FP_EXC_NONRECOV
 1

	)

41 
	#PR_FP_EXC_ASYNC
 2

	)

42 
	#PR_FP_EXC_PRECISE
 3

	)

46 
	#PR_GET_TIMING
 13

	)

47 
	#PR_SET_TIMING
 14

	)

48 
	#PR_TIMING_STATISTICAL
 0

	)

50 
	#PR_TIMING_TIMESTAMP
 1

	)

53 
	#PR_SET_NAME
 15

	)

54 
	#PR_GET_NAME
 16

	)

57 
	#PR_GET_ENDIAN
 19

	)

58 
	#PR_SET_ENDIAN
 20

	)

59 
	#PR_ENDIAN_BIG
 0

	)

60 
	#PR_ENDIAN_LITTLE
 1

	)

61 
	#PR_ENDIAN_PPC_LITTLE
 2

	)

64 
	#PR_GET_SECCOMP
 21

	)

65 
	#PR_SET_SECCOMP
 22

	)

68 
	#PR_CAPBSET_READ
 23

	)

69 
	#PR_CAPBSET_DROP
 24

	)

72 
	#PR_GET_TSC
 25

	)

73 
	#PR_SET_TSC
 26

	)

74 
	#PR_TSC_ENABLE
 1

	)

75 
	#PR_TSC_SIGSEGV
 2

	)

78 
	#PR_GET_SECUREBITS
 27

	)

79 
	#PR_SET_SECUREBITS
 28

	)

85 
	#PR_SET_TIMERSLACK
 29

	)

86 
	#PR_GET_TIMERSLACK
 30

	)

88 
	#PR_TASK_PERF_EVENTS_DISABLE
 31

	)

89 
	#PR_TASK_PERF_EVENTS_ENABLE
 32

	)

95 
	#PR_MCE_KILL
 33

	)

96 
	#PR_MCE_KILL_CLEAR
 0

	)

97 
	#PR_MCE_KILL_SET
 1

	)

99 
	#PR_MCE_KILL_LATE
 0

	)

100 
	#PR_MCE_KILL_EARLY
 1

	)

101 
	#PR_MCE_KILL_DEFAULT
 2

	)

103 
	#PR_MCE_KILL_GET
 34

	)

	@/usr/include/rpc/netdb.h

36 #iâdeà
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<ã©u»s.h
>

41 
	#__Ãed_size_t


	)

42 
	~<¡ddef.h
>

44 
__BEGIN_DECLS


46 
	s½ûÁ


48 *
	mr_Çme
;

49 **
	mr_®Ÿ£s
;

50 
	mr_numb”
;

53 
	$£ŒpûÁ
 (
__¡ayİ’
è
__THROW
;

54 
	$’d½ûÁ
 (è
__THROW
;

55 
½ûÁ
 *
	$g‘½cbyÇme
 (
__cÚ¡
 *
__Çme
è
__THROW
;

56 
½ûÁ
 *
	$g‘½cbynumb”
 (
__numb”
è
__THROW
;

57 
½ûÁ
 *
	$g‘½ûÁ
 (è
__THROW
;

59 #ifdeà
__USE_MISC


60 
	$g‘½cbyÇme_r
 (
__cÚ¡
 *
__Çme
, 
½ûÁ
 *
__»suÉ_buf
,

61 *
__bufãr
, 
size_t
 
__buæ’
,

62 
½ûÁ
 **
__»suÉ
è
__THROW
;

64 
	$g‘½cbynumb”_r
 (
__numb”
, 
½ûÁ
 *
__»suÉ_buf
,

65 *
__bufãr
, 
size_t
 
__buæ’
,

66 
½ûÁ
 **
__»suÉ
è
__THROW
;

68 
	$g‘½ûÁ_r
 (
½ûÁ
 *
__»suÉ_buf
, *
__bufãr
,

69 
size_t
 
__buæ’
, 
½ûÁ
 **
__»suÉ
è
__THROW
;

72 
__END_DECLS


	@/usr/include/sys/cdefs.h

20 #iâdef 
_SYS_CDEFS_H


21 
	#_SYS_CDEFS_H
 1

	)

24 #iâdeà
_FEATURES_H


25 
	~<ã©u»s.h
>

31 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


36 #undeà
__P


37 #undeà
__PMT


39 #ifdeà
__GNUC__


46 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

47 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

48 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

50 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

51 
	#__THROW
 
	`throw
 ()

	)

52 
	#__NTH
(
fù
èfù 
	`throw
 ()

	)

54 
	#__THROW


	)

55 
	#__NTH
(
fù
è
	)
fct

61 
	#__šlše


	)

63 
	#__THROW


	)

64 
	#__NTH
(
fù
è
	)
fct

66 
	#__cÚ¡
 cÚ¡

	)

67 
	#__sigÃd
 sigÃd

	)

68 
	#__vŞ©e
 vŞ©e

	)

74 
	#__P
(
¬gs
è
	)
args

75 
	#__PMT
(
¬gs
è
	)
args

80 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

81 
	#__STRING
(
x
è#x

	)

84 
	#__±r_t
 *

	)

85 
	#__lÚg_doubË_t
 

	)

89 #ifdef 
__ılu¥lus


90 
	#__BEGIN_DECLS
 "C" {

	)

91 
	#__END_DECLS
 }

	)

93 
	#__BEGIN_DECLS


	)

94 
	#__END_DECLS


	)

103 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


104 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

105 
	#__END_NAMESPACE_STD
 }

	)

106 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

107 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

108 
	#__END_NAMESPACE_C99
 }

	)

109 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

114 
	#__BEGIN_NAMESPACE_STD


	)

115 
	#__END_NAMESPACE_STD


	)

116 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

117 
	#__BEGIN_NAMESPACE_C99


	)

118 
	#__END_NAMESPACE_C99


	)

119 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

124 #iâdeà
__BOUNDED_POINTERS__


125 
	#__bounded


	)

126 
	#__unbounded


	)

127 
	#__±rv®ue


	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

135 #ià
__GNUC_PREREQ
 (4,3)

136 
	#__w¬ndeş
(
Çme
, 
msg
) \

137 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

138 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

139 
	#__”rÜdeş
(
Çme
, 
msg
) \

140 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

142 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

143 
	#__w¬Ç‰r
(
msg
)

	)

144 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

148 #ià
__GNUC_PREREQ
 (2,97)

150 
	#__æex¬r
 []

	)

152 #ifdeà
__GNUC__


153 
	#__æex¬r
 [0]

	)

155 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__æex¬r
 []

	)

159 
	#__æex¬r
 [1]

	)

175 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 #ifdeà
__ılu¥lus


179 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

180 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

182 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

183 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

185 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

186 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

199 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

200 
	#__©Œibu‹__
(
xyz
è

	)

206 #ià
__GNUC_PREREQ
 (2,96)

207 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

209 
	#__©Œibu‹_m®loc__


	)

215 #ià
__GNUC_PREREQ
 (2,96)

216 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

218 
	#__©Œibu‹_pu»__


	)

224 #ià
__GNUC_PREREQ
 (3,1)

225 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

226 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

228 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

229 
	#__©Œibu‹_nošlše__


	)

233 #ià
__GNUC_PREREQ
 (3,2)

234 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

236 
	#__©Œibu‹_d•»ÿ‹d__


	)

245 #ià
__GNUC_PREREQ
 (2,8)

246 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

248 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

255 #ià
__GNUC_PREREQ
 (2,97)

256 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

257 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

259 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

264 #ià
__GNUC_PREREQ
 (3,3)

265 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

267 
	#__nÚnuÎ
(
·¿ms
)

	)

272 #ià
__GNUC_PREREQ
 (3,4)

273 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

274 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

275 #ià
__USE_FORTIFY_LEVEL
 > 0

276 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

279 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

281 #iâdeà
__wur


282 
	#__wur


	)

286 #ià
__GNUC_PREREQ
 (3,2)

287 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

289 
	#__®ways_šlše
 
__šlše


	)

294 #ià!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3)

295 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


296 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

297 #ià
__GNUC_PREREQ
 (4,3)

298 
	#__ex‹º_®ways_šlše
 \

299 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
, 
__¬tificŸl__
))

	)

301 
	#__ex‹º_®ways_šlše
 \

302 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

305 
	#__ex‹º_šlše
 
__šlše


	)

306 #ià
__GNUC_PREREQ
 (4,3)

307 
	#__ex‹º_®ways_šlše
 \

308 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

310 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

317 #ià
__GNUC_PREREQ
 (4,3)

318 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

319 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

326 #ià!
__GNUC_PREREQ
 (2,8)

327 
	#__ex‹nsiÚ__


	)

331 #ià!
__GNUC_PREREQ
 (2,92)

332 
	#__»¡riù


	)

338 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


339 
	#__»¡riù_¬r
 
__»¡riù


	)

341 #ifdeà
__GNUC__


342 
	#__»¡riù_¬r


	)

344 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

345 
	#__»¡riù_¬r
 
»¡riù


	)

348 
	#__»¡riù_¬r


	)

353 
	~<b™s/wÜdsize.h
>

355 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


356 
	#__LDBL_COMPAT
 1

	)

357 #ifdeà
__REDIRECT


358 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

359 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

360 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

361 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

362 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

363 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

364 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

365 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

366 
	#__LDBL_REDIR_DECL
(
Çme
) \

367 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

368 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

369 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

370 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

371 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

374 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


375 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

376 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

377 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

378 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

379 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

380 #ifdeà
__REDIRECT


381 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

382 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

383 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/select.h

22 #iâdeà
_SYS_SELECT_H


23 
	#_SYS_SELECT_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

31 
	~<b™s/£Ëù.h
>

34 
	~<b™s/sig£t.h
>

36 #iâdeà
__sig£t_t_defšed


37 
	#__sig£t_t_defšed


	)

38 
__sig£t_t
 
	tsig£t_t
;

42 
	#__Ãed_time_t


	)

43 
	#__Ãed_time¥ec


	)

44 
	~<time.h
>

45 
	#__Ãed_timev®


	)

46 
	~<b™s/time.h
>

48 #iâdeà
__su£cÚds_t_defšed


49 
__su£cÚds_t
 
	tsu£cÚds_t
;

50 
	#__su£cÚds_t_defšed


	)

55 
	t__fd_mask
;

58 #undeà
__NFDBITS


59 #undeà
__FDELT


60 #undeà
__FDMASK


62 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

63 
	#__FDELT
(
d
è((dè/ 
__NFDBITS
)

	)

64 
	#__FDMASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

71 #ifdeà
__USE_XOPEN


72 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

75 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

76 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

78 } 
	tfd_£t
;

81 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

83 #ifdeà
__USE_MISC


85 
__fd_mask
 
	tfd_mask
;

88 
	#NFDBITS
 
__NFDBITS


	)

93 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

94 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

95 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

96 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

99 
__BEGIN_DECLS


109 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

110 
fd_£t
 *
__»¡riù
 
__wr™efds
,

111 
fd_£t
 *
__»¡riù
 
__exû±fds
,

112 
timev®
 *
__»¡riù
 
__timeout
);

114 #ifdeà
__USE_XOPEN2K


121 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

122 
fd_£t
 *
__»¡riù
 
__wr™efds
,

123 
fd_£t
 *
__»¡riù
 
__exû±fds
,

124 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

125 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

128 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

21 #iâdeà
_SYS_SYSMACROS_H


22 
	#_SYS_SYSMACROS_H
 1

	)

24 
	~<ã©u»s.h
>

29 #ifdeà
__GLIBC_HAVE_LONG_LONG


30 
__ex‹nsiÚ__


31 
	$gnu_dev_majÜ
 (
__dev
)

32 
__THROW
;

33 
__ex‹nsiÚ__


34 
	$gnu_dev_mšÜ
 (
__dev
)

35 
__THROW
;

36 
__ex‹nsiÚ__


37 
	$gnu_dev_makedev
 (
__majÜ
,

38 
__mšÜ
)

39 
__THROW
;

41 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES


42 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

43 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

45  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

46 
	}
}

48 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

49 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

51  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

52 
	}
}

54 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

55 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

57  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

58 | (((è(
__mšÜ
 & ~0xff)) << 12)

59 | (((è(
__majÜ
 & ~0xfff)) << 32));

60 
	}
}

65 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

66 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

67 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/sys/ucontext.h

19 #iâdeà
_SYS_UCONTEXT_H


20 
	#_SYS_UCONTEXT_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<sigÇl.h
>

24 
	~<b™s/wÜdsize.h
>

28 
	~<b™s/sigcÚ‹xt.h
>

30 #ià
__WORDSIZE
 == 64

33 
	tg»g_t
;

36 
	#NGREG
 23

	)

39 
g»g_t
 
	tg»g£t_t
[
NGREG
];

41 #ifdeà
__USE_GNU


45 
	mREG_R8
 = 0,

46 
	#REG_R8
 
REG_R8


	)

47 
	mREG_R9
,

48 
	#REG_R9
 
REG_R9


	)

49 
	mREG_R10
,

50 
	#REG_R10
 
REG_R10


	)

51 
	mREG_R11
,

52 
	#REG_R11
 
REG_R11


	)

53 
	mREG_R12
,

54 
	#REG_R12
 
REG_R12


	)

55 
	mREG_R13
,

56 
	#REG_R13
 
REG_R13


	)

57 
	mREG_R14
,

58 
	#REG_R14
 
REG_R14


	)

59 
	mREG_R15
,

60 
	#REG_R15
 
REG_R15


	)

61 
	mREG_RDI
,

62 
	#REG_RDI
 
REG_RDI


	)

63 
	mREG_RSI
,

64 
	#REG_RSI
 
REG_RSI


	)

65 
	mREG_RBP
,

66 
	#REG_RBP
 
REG_RBP


	)

67 
	mREG_RBX
,

68 
	#REG_RBX
 
REG_RBX


	)

69 
	mREG_RDX
,

70 
	#REG_RDX
 
REG_RDX


	)

71 
	mREG_RAX
,

72 
	#REG_RAX
 
REG_RAX


	)

73 
	mREG_RCX
,

74 
	#REG_RCX
 
REG_RCX


	)

75 
	mREG_RSP
,

76 
	#REG_RSP
 
REG_RSP


	)

77 
	mREG_RIP
,

78 
	#REG_RIP
 
REG_RIP


	)

79 
	mREG_EFL
,

80 
	#REG_EFL
 
REG_EFL


	)

81 
	mREG_CSGSFS
,

82 
	#REG_CSGSFS
 
REG_CSGSFS


	)

83 
	mREG_ERR
,

84 
	#REG_ERR
 
REG_ERR


	)

85 
	mREG_TRAPNO
,

86 
	#REG_TRAPNO
 
REG_TRAPNO


	)

87 
	mREG_OLDMASK
,

88 
	#REG_OLDMASK
 
REG_OLDMASK


	)

89 
	mREG_CR2


90 
	#REG_CR2
 
REG_CR2


	)

94 
	s_libc_åx»g


96 
	msignifiÿnd
[4];

97 
	mexpÚ’t
;

98 
	m·ddšg
[3];

101 
	s_libc_xmm»g


103 
__ušt32_t
 
	m–em’t
[4];

106 
	s_libc_å¡©e


109 
__ušt16_t
 
	mcwd
;

110 
__ušt16_t
 
	mswd
;

111 
__ušt16_t
 
	máw
;

112 
__ušt16_t
 
	mfİ
;

113 
__ušt64_t
 
	mr
;

114 
__ušt64_t
 
	mrdp
;

115 
__ušt32_t
 
	mmxc¤
;

116 
__ušt32_t
 
	mmxü_mask
;

117 
_libc_åx»g
 
	m_¡
[8];

118 
_libc_xmm»g
 
	m_xmm
[16];

119 
__ušt32_t
 
	m·ddšg
[24];

123 
_libc_å¡©e
 *
	tå»g£t_t
;

128 
g»g£t_t
 
	mg»gs
;

130 
å»g£t_t
 
	må»gs
;

131 
	m__»£rved1
 [8];

132 } 
	tmcÚ‹xt_t
;

135 
	sucÚ‹xt


137 
	muc_æags
;

138 
ucÚ‹xt
 *
	muc_lšk
;

139 
¡ack_t
 
	muc_¡ack
;

140 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

141 
__sig£t_t
 
	muc_sigmask
;

142 
_libc_å¡©e
 
	m__å»gs_mem
;

143 } 
	tucÚ‹xt_t
;

148 
	tg»g_t
;

151 
	#NGREG
 19

	)

154 
g»g_t
 
	tg»g£t_t
[
NGREG
];

156 #ifdeà
__USE_GNU


160 
	mREG_GS
 = 0,

161 
	#REG_GS
 
REG_GS


	)

162 
	mREG_FS
,

163 
	#REG_FS
 
REG_FS


	)

164 
	mREG_ES
,

165 
	#REG_ES
 
REG_ES


	)

166 
	mREG_DS
,

167 
	#REG_DS
 
REG_DS


	)

168 
	mREG_EDI
,

169 
	#REG_EDI
 
REG_EDI


	)

170 
	mREG_ESI
,

171 
	#REG_ESI
 
REG_ESI


	)

172 
	mREG_EBP
,

173 
	#REG_EBP
 
REG_EBP


	)

174 
	mREG_ESP
,

175 
	#REG_ESP
 
REG_ESP


	)

176 
	mREG_EBX
,

177 
	#REG_EBX
 
REG_EBX


	)

178 
	mREG_EDX
,

179 
	#REG_EDX
 
REG_EDX


	)

180 
	mREG_ECX
,

181 
	#REG_ECX
 
REG_ECX


	)

182 
	mREG_EAX
,

183 
	#REG_EAX
 
REG_EAX


	)

184 
	mREG_TRAPNO
,

185 
	#REG_TRAPNO
 
REG_TRAPNO


	)

186 
	mREG_ERR
,

187 
	#REG_ERR
 
REG_ERR


	)

188 
	mREG_EIP
,

189 
	#REG_EIP
 
REG_EIP


	)

190 
	mREG_CS
,

191 
	#REG_CS
 
REG_CS


	)

192 
	mREG_EFL
,

193 
	#REG_EFL
 
REG_EFL


	)

194 
	mREG_UESP
,

195 
	#REG_UESP
 
REG_UESP


	)

196 
	mREG_SS


197 
	#REG_SS
 
REG_SS


	)

202 
	s_libc_å»g


204 
	msignifiÿnd
[4];

205 
	mexpÚ’t
;

208 
	s_libc_å¡©e


210 
	mcw
;

211 
	msw
;

212 
	mg
;

213 
	moff
;

214 
	mcs£l
;

215 
	md©aoff
;

216 
	md©a£l
;

217 
_libc_å»g
 
	m_¡
[8];

218 
	m¡©us
;

222 
_libc_å¡©e
 *
	tå»g£t_t
;

227 
g»g£t_t
 
	mg»gs
;

230 
å»g£t_t
 
	må»gs
;

231 
	mŞdmask
;

232 
	mü2
;

233 } 
	tmcÚ‹xt_t
;

236 
	sucÚ‹xt


238 
	muc_æags
;

239 
ucÚ‹xt
 *
	muc_lšk
;

240 
¡ack_t
 
	muc_¡ack
;

241 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

242 
__sig£t_t
 
	muc_sigmask
;

243 
_libc_å¡©e
 
	m__å»gs_mem
;

244 } 
	tucÚ‹xt_t
;

	@/usr/include/sys/uio.h

19 #iâdeà
_SYS_UIO_H


20 
	#_SYS_UIO_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	~<sys/ty³s.h
>

26 
	g__BEGIN_DECLS


29 
	~<b™s/uio.h
>

40 
ssize_t
 
	$»adv
 (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
, 
__couÁ
)

41 
__wur
;

51 
ssize_t
 
	$wr™ev
 (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
, 
__couÁ
)

52 
__wur
;

55 #ifdeà
__USE_BSD


56 #iâdeà
__USE_FILE_OFFSET64


66 
ssize_t
 
	$´—dv
 (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
, 
__couÁ
,

67 
__off_t
 
__off£t
è
__wur
;

78 
ssize_t
 
	$pwr™ev
 (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
, 
__couÁ
,

79 
__off_t
 
__off£t
è
__wur
;

81 #ifdeà
__REDIRECT


82 
ssize_t
 
	`__REDIRECT
 (
´—dv
, (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
,

83 
__couÁ
, 
__off64_t
 
__off£t
),

84 
´—dv64
è
__wur
;

85 
ssize_t
 
	`__REDIRECT
 (
pwr™ev
, (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
,

86 
__couÁ
, 
__off64_t
 
__off£t
),

87 
pwr™ev64
è
__wur
;

89 
	#´—dv
 
´—dv64


	)

90 
	#pwr™ev
 
pwr™ev64


	)

94 #ifdeà
__USE_LARGEFILE64


104 
ssize_t
 
	$´—dv64
 (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
, 
__couÁ
,

105 
__off64_t
 
__off£t
è
__wur
;

116 
ssize_t
 
	$pwr™ev64
 (
__fd
, 
__cÚ¡
 
iovec
 *
__iovec
, 
__couÁ
,

117 
__off64_t
 
__off£t
è
__wur
;

121 
__END_DECLS


	@/usr/include/xlocale.h

21 #iâdeà
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loÿË_¡ruù


31 
loÿË_d©a
 *
	m__loÿËs
[13];

34 cÚ¡ *
	m__ùy³_b
;

35 cÚ¡ *
	m__ùy³_tŞow”
;

36 cÚ¡ *
	m__ùy³_touµ”
;

39 cÚ¡ *
	m__Çmes
[13];

40 } *
	t__loÿË_t
;

43 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/zconf.h

8 #iâdeà
ZCONF_H


9 
	#ZCONF_H


	)

17 #ifdeà
Z_PREFIX


20 
	#_di¡_code
 
z__di¡_code


	)

21 
	#_Ëngth_code
 
z__Ëngth_code


	)

22 
	#_Œ_®ign
 
z__Œ_®ign


	)

23 
	#_Œ_æush_block
 
z__Œ_æush_block


	)

24 
	#_Œ_š™
 
z__Œ_š™


	)

25 
	#_Œ_¡Üed_block
 
z__Œ_¡Üed_block


	)

26 
	#_Œ_Îy
 
z__Œ_Îy


	)

27 
	#adËr32
 
z_adËr32


	)

28 
	#adËr32_combše
 
z_adËr32_combše


	)

29 
	#com´ess
 
z_com´ess


	)

30 
	#com´ess2
 
z_com´ess2


	)

31 
	#com´essBound
 
z_com´essBound


	)

32 
	#üc32
 
z_üc32


	)

33 
	#üc32_combše
 
z_üc32_combše


	)

34 
	#deæ©e
 
z_deæ©e


	)

35 
	#deæ©eBound
 
z_deæ©eBound


	)

36 
	#deæ©eCİy
 
z_deæ©eCİy


	)

37 
	#deæ©eEnd
 
z_deæ©eEnd


	)

38 
	#deæ©eIn™2_
 
z_deæ©eIn™2_


	)

39 
	#deæ©eIn™_
 
z_deæ©eIn™_


	)

40 
	#deæ©eP¬ams
 
z_deæ©eP¬ams


	)

41 
	#deæ©ePrime
 
z_deæ©ePrime


	)

42 
	#deæ©eRe£t
 
z_deæ©eRe£t


	)

43 
	#deæ©eS‘DiùiÚ¬y
 
z_deæ©eS‘DiùiÚ¬y


	)

44 
	#deæ©eS‘H—d”
 
z_deæ©eS‘H—d”


	)

45 
	#deæ©eTuÃ
 
z_deæ©eTuÃ


	)

46 
	#deæ©e_cİyright
 
z_deæ©e_cİyright


	)

47 
	#g‘_üc_bË
 
z_g‘_üc_bË


	)

48 
	#gzş—»¼
 
z_gzş—»¼


	)

49 
	#gzşo£
 
z_gzşo£


	)

50 
	#gzdœeù
 
z_gzdœeù


	)

51 
	#gzdİ’
 
z_gzdİ’


	)

52 
	#gzeof
 
z_gzeof


	)

53 
	#gz”rÜ
 
z_gz”rÜ


	)

54 
	#gzæush
 
z_gzæush


	)

55 
	#gzg‘c
 
z_gzg‘c


	)

56 
	#gzg‘s
 
z_gzg‘s


	)

57 
	#gzİ’
 
z_gzİ’


	)

58 
	#gz´štf
 
z_gz´štf


	)

59 
	#gzputc
 
z_gzputc


	)

60 
	#gzputs
 
z_gzputs


	)

61 
	#gz»ad
 
z_gz»ad


	)

62 
	#gz»wšd
 
z_gz»wšd


	)

63 
	#gz£ek
 
z_gz£ek


	)

64 
	#gz£¬ams
 
z_gz£¬ams


	)

65 
	#gz‹Î
 
z_gz‹Î


	)

66 
	#gzung‘c
 
z_gzung‘c


	)

67 
	#gzwr™e
 
z_gzwr™e


	)

68 
	#šæ©e
 
z_šæ©e


	)

69 
	#šæ©eBack
 
z_šæ©eBack


	)

70 
	#šæ©eBackEnd
 
z_šæ©eBackEnd


	)

71 
	#šæ©eBackIn™_
 
z_šæ©eBackIn™_


	)

72 
	#šæ©eCİy
 
z_šæ©eCİy


	)

73 
	#šæ©eEnd
 
z_šæ©eEnd


	)

74 
	#šæ©eG‘H—d”
 
z_šæ©eG‘H—d”


	)

75 
	#šæ©eIn™2_
 
z_šæ©eIn™2_


	)

76 
	#šæ©eIn™_
 
z_šæ©eIn™_


	)

77 
	#šæ©ePrime
 
z_šæ©ePrime


	)

78 
	#šæ©eRe£t
 
z_šæ©eRe£t


	)

79 
	#šæ©eS‘DiùiÚ¬y
 
z_šæ©eS‘DiùiÚ¬y


	)

80 
	#šæ©eSync
 
z_šæ©eSync


	)

81 
	#šæ©eSyncPošt
 
z_šæ©eSyncPošt


	)

82 
	#šæ©e_cİyright
 
z_šæ©e_cİyright


	)

83 
	#šæ©e_ç¡
 
z_šæ©e_ç¡


	)

84 
	#šæ©e_bË
 
z_šæ©e_bË


	)

85 
	#uncom´ess
 
z_uncom´ess


	)

86 
	#zE¼Ü
 
z_zE¼Ü


	)

87 
	#z_”rmsg
 
z_z_”rmsg


	)

88 
	#zÿÎoc
 
z_zÿÎoc


	)

89 
	#zcä“
 
z_zcä“


	)

90 
	#zlibCompeFÏgs
 
z_zlibCompeFÏgs


	)

91 
	#zlibV”siÚ
 
z_zlibV”siÚ


	)

94 
	#By‹
 
z_By‹


	)

95 
	#By‹f
 
z_By‹f


	)

96 
	#®loc_func
 
z_®loc_func


	)

97 
	#ch¬f
 
z_ch¬f


	)

98 
	#ä“_func
 
z_ä“_func


	)

99 
	#gzFe
 
z_gzFe


	)

100 
	#gz_h—d”
 
z_gz_h—d”


	)

101 
	#gz_h—d”p
 
z_gz_h—d”p


	)

102 
	#š_func
 
z_š_func


	)

103 
	#štf
 
z_štf


	)

104 
	#out_func
 
z_out_func


	)

105 
	#uIÁ
 
z_uIÁ


	)

106 
	#uIÁf
 
z_uIÁf


	)

107 
	#uLÚg
 
z_uLÚg


	)

108 
	#uLÚgf
 
z_uLÚgf


	)

109 
	#voidp
 
z_voidp


	)

110 
	#voidp
 
z_voidp


	)

111 
	#voidpc
 
z_voidpc


	)

112 
	#voidpc
 
z_voidpc


	)

113 
	#voidpf
 
z_voidpf


	)

114 
	#voidpf
 
z_voidpf


	)

115 
	#z_¡»am
 
z_z_¡»am


	)

116 
	#z_¡»amp
 
z_z_¡»amp


	)

119 
	#gz_h—d”_s
 
z_gz_h—d”_s


	)

120 
	#š‹º®_¡©e
 
z_š‹º®_¡©e


	)

121 
	#z_¡»am_s
 
z_z_¡»am_s


	)

125 #ià
defšed
(
__MSDOS__
è&& !defšed(
MSDOS
)

126 
	#MSDOS


	)

128 #ià(
defšed
(
OS_2
è|| defšed(
__OS2__
)è&& !defšed(
OS2
)

129 
	#OS2


	)

131 #ià
defšed
(
_WINDOWS
è&& !defšed(
WINDOWS
)

132 
	#WINDOWS


	)

134 #ià
defšed
(
_WIN32
è|| defšed(
_WIN32_WCE
è|| defšed(
__WIN32__
)

135 #iâdeà
WIN32


136 
	#WIN32


	)

139 #ià(
defšed
(
MSDOS
è|| defšed(
OS2
è|| defšed(
WINDOWS
)è&& !defšed(
WIN32
)

140 #ià!
defšed
(
__GNUC__
è&& !defšed(
__FLAT__
è&& !defšed(
__386__
)

141 #iâdeà
SYS16BIT


142 
	#SYS16BIT


	)

151 #ifdeà
SYS16BIT


152 
	#MAXSEG_64K


	)

154 #ifdeà
MSDOS


155 
	#UNALIGNED_OK


	)

158 #ifdeà
__STDC_VERSION__


159 #iâdeà
STDC


160 
	#STDC


	)

162 #ià
__STDC_VERSION__
 >= 199901L

163 #iâdeà
STDC99


164 
	#STDC99


	)

168 #ià!
defšed
(
STDC
è&& (defšed(
__STDC__
è|| defšed(
__ılu¥lus
))

169 
	#STDC


	)

171 #ià!
defšed
(
STDC
è&& (defšed(
__GNUC__
è|| defšed(
__BORLANDC__
))

172 
	#STDC


	)

174 #ià!
defšed
(
STDC
è&& (defšed(
MSDOS
è|| defšed(
WINDOWS
è|| defšed(
WIN32
))

175 
	#STDC


	)

177 #ià!
defšed
(
STDC
è&& (defšed(
OS2
è|| defšed(
__HOS_AIX__
))

178 
	#STDC


	)

181 #ià
defšed
(
__OS400__
è&& !defšed(
STDC
)

182 
	#STDC


	)

185 #iâdeà
STDC


187 cÚ¡

	)

192 #ià
defšed
(
__MWERKS__
)||defšed(
­¶ec
)||defšed(
THINK_C
)||defšed(
__SC__
)

193 
	#NO_DUMMY_DECL


	)

197 #iâdeà
MAX_MEM_LEVEL


198 #ifdeà
MAXSEG_64K


199 
	#MAX_MEM_LEVEL
 8

	)

201 
	#MAX_MEM_LEVEL
 9

	)

210 #iâdeà
MAX_WBITS


211 
	#MAX_WBITS
 15

	)

229 #iâdeà
OF


230 #ifdeà
STDC


231 
	#OF
(
¬gs
è
	)
args

233 
	#OF
(
¬gs
è()

	)

243 #ifdeà
SYS16BIT


244 #ià
defšed
(
M_I86SM
è|| defšed(
M_I86MM
)

246 
	#SMALL_MEDIUM


	)

247 #ifdeà
_MSC_VER


248 
	#FAR
 
_çr


	)

250 
	#FAR
 
çr


	)

253 #ià(
defšed
(
__SMALL__
è|| defšed(
__MEDIUM__
))

255 
	#SMALL_MEDIUM


	)

256 #ifdeà
__BORLANDC__


257 
	#FAR
 
_çr


	)

259 
	#FAR
 
çr


	)

264 #ià
defšed
(
WINDOWS
è|| defšed(
WIN32
)

268 #ifdeà
ZLIB_DLL


269 #ià
defšed
(
WIN32
è&& (!defšed(
__BORLANDC__
) || (__BORLANDC__ >= 0x500))

270 #ifdeà
ZLIB_INTERNAL


271 
	#ZEXTERN
 
	`__deş¥ec
(
dÎexpÜt
)

	)

273 
	#ZEXTERN
 
	`__deş¥ec
(
dÎimpÜt
)

	)

281 #ifdeà
ZLIB_WINAPI


282 #ifdeà
FAR


283 #undeà
FAR


285 
	~<wšdows.h
>

288 
	#ZEXPORT
 
WINAPI


	)

289 #ifdeà
WIN32


290 
	#ZEXPORTVA
 
WINAPIV


	)

292 
	#ZEXPORTVA
 
FAR
 
CDECL


	)

297 #ià
defšed
 (
__BEOS__
)

298 #ifdeà
ZLIB_DLL


299 #ifdeà
ZLIB_INTERNAL


300 
	#ZEXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

301 
	#ZEXPORTVA
 
	`__deş¥ec
(
dÎexpÜt
)

	)

303 
	#ZEXPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

304 
	#ZEXPORTVA
 
	`__deş¥ec
(
dÎimpÜt
)

	)

309 #ifdeà
HAVE_VISIBILITY_PRAGMA


310 
	#ZEXTERN
 
	`__©Œibu‹__
((
	`visib™y
 ("deçuÉ"))è

	)

313 #iâdeà
ZEXTERN


314 
	#ZEXTERN
 

	)

316 #iâdeà
ZEXPORT


317 
	#ZEXPORT


	)

319 #iâdeà
ZEXPORTVA


320 
	#ZEXPORTVA


	)

323 #iâdeà
FAR


324 
	#FAR


	)

327 #ià!
defšed
(
__MACTYPES__
)

328 
	tBy‹
;

330 
	tuIÁ
;

331 
	tuLÚg
;

333 #ifdeà
SMALL_MEDIUM


335 
	#By‹f
 
By‹
 
FAR


	)

337 
By‹
 
	tFAR
 
	tBy‹f
;

339 
	tFAR
 
	tch¬f
;

340 
	tFAR
 
	tštf
;

341 
uIÁ
 
	tFAR
 
	tuIÁf
;

342 
uLÚg
 
	tFAR
 
	tuLÚgf
;

344 #ifdeà
STDC


345 cÚ¡ *
	tvoidpc
;

346 
	tFAR
 *
	tvoidpf
;

347 *
	tvoidp
;

349 
By‹
 cÚ¡ *
	tvoidpc
;

350 
By‹
 
	tFAR
 *
	tvoidpf
;

351 
By‹
 *
	tvoidp
;

354 
	~"zlibdefs.h
"

356 #ifdeà
_LARGEFILE64_SOURCE


357 
	~<sys/ty³s.h
>

360 #iâdeà
SEEK_SET


361 
	#SEEK_SET
 0

	)

362 
	#SEEK_CUR
 1

	)

363 
	#SEEK_END
 2

	)

365 #iâdeà
z_off_t


366 
	#z_off_t
 

	)

369 #ià
defšed
(
__OS400__
)

370 
	#NO_v¢´štf


	)

373 #ià
defšed
(
__MVS__
)

374 
	#NO_v¢´štf


	)

378 #ià
defšed
(
__MVS__
)

379 #´agm¨
m­
(
deæ©eIn™_
,"DEIN")

380 #´agm¨
m­
(
deæ©eIn™2_
,"DEIN2")

381 #´agm¨
m­
(
deæ©eEnd
,"DEEND")

382 #´agm¨
m­
(
deæ©eBound
,"DEBND")

383 #´agm¨
m­
(
šæ©eIn™_
,"ININ")

384 #´agm¨
m­
(
šæ©eIn™2_
,"ININ2")

385 #´agm¨
m­
(
šæ©eEnd
,"INEND")

386 #´agm¨
m­
(
šæ©eSync
,"INSY")

387 #´agm¨
m­
(
šæ©eS‘DiùiÚ¬y
,"INSEDI")

388 #´agm¨
m­
(
com´essBound
,"CMBND")

389 #´agm¨
m­
(
šæ©e_bË
,"INTABL")

390 #´agm¨
m­
(
šæ©e_ç¡
,"INFA")

391 #´agm¨
m­
(
šæ©e_cİyright
,"INCOPY")

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb¡©e_t
 
	m__¡©e
;

26 } 
	t_G_åos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb¡©e_t
 
	m__¡©e
;

31 } 
	t_G_åos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¬_t
 
wch¬_t


	)

38 
	#_G_wšt_t
 
wšt_t


	)

39 
	#_G_¡©64
 
¡©64


	)

40 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gcÚv.h
>

44 
__gcÚv_šfo
 
	m__cd
;

47 
__gcÚv_šfo
 
	m__cd
;

48 
__gcÚv_¡•_d©a
 
	m__d©a
;

49 } 
	m__combšed
;

50 } 
	t_G_icÚv_t
;

53 
	t_G_št16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_št32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_ušt16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_ušt32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__İ’64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm­64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
è
	`__fx¡©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #ià
defšed
 
__ılu¥lus
 || defšed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
è
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
è()

	)

	@/usr/include/asm/socket.h

1 
	~<asm-g’”ic/sock‘.h
>

	@/usr/include/bits/libio-ldbl.h

20 #iâdeà
_IO_STDIO_H


24 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

25 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/local_lim.h

25 #iâdeà
NR_OPEN


26 
	#__undef_NR_OPEN


	)

28 #iâdeà
LINK_MAX


29 
	#__undef_LINK_MAX


	)

31 #iâdeà
OPEN_MAX


32 
	#__undef_OPEN_MAX


	)

34 #iâdeà
ARG_MAX


35 
	#__undef_ARG_MAX


	)

39 
	~<lšux/lim™s.h
>

42 #ifdeà
__undef_NR_OPEN


43 #undeà
NR_OPEN


44 #undeà
__undef_NR_OPEN


47 #ifdeà
__undef_LINK_MAX


48 #undeà
LINK_MAX


49 #undeà
__undef_LINK_MAX


52 #ifdeà
__undef_OPEN_MAX


53 #undeà
OPEN_MAX


54 #undeà
__undef_OPEN_MAX


57 #ifdeà
__undef_ARG_MAX


58 #undeà
ARG_MAX


59 #undeà
__undef_ARG_MAX


63 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

65 
	#PTHREAD_KEYS_MAX
 1024

	)

68 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

70 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

73 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

75 #undeà
PTHREAD_THREADS_MAX


79 
	#AIO_PRIO_DELTA_MAX
 20

	)

82 
	#PTHREAD_STACK_MIN
 16384

	)

85 
	#DELAYTIMER_MAX
 2147483647

	)

88 
	#TTY_NAME_MAX
 32

	)

91 
	#LOGIN_NAME_MAX
 256

	)

94 
	#HOST_NAME_MAX
 64

	)

97 
	#MQ_PRIO_MAX
 32768

	)

100 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/predefs.h

19 #iâdeà
_FEATURES_H


23 #iâdeà
_PREDEFS_H


24 
	#_PREDEFS_H


	)

27 
	#__STDC_IEC_559__
 1

	)

28 
	#__STDC_IEC_559_COMPLEX__
 1

	)

	@/usr/include/bits/select.h

19 #iâdeà
_SYS_SELECT_H


23 
	~<b™s/wÜdsize.h
>

26 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

28 #ià
__WORDSIZE
 == 64

29 
	#__FD_ZERO_STOS
 "¡osq"

	)

31 
	#__FD_ZERO_STOS
 "¡o¦"

	)

34 
	#__FD_ZERO
(
fd¥
) \

36 
__d0
, 
__d1
; \

37 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

38 : "=c" (
__d0
), "=D" (
__d1
) \

39 : "a" (0), "0" ( (
fd_£t
) \

40 /  (
__fd_mask
)), \

41 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

43 } 0)

	)

49 
	#__FD_ZERO
(
£t
) \

51 
__i
; \

52 
fd_£t
 *
__¬r
 = (
£t
); \

53 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

54 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

55 } 0)

	)

59 
	#__FD_SET
(
d
, 
£t
è(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] |ğ
	`__FDMASK
 (d))

	)

60 
	#__FD_CLR
(
d
, 
£t
è(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] &ğ~
	`__FDMASK
 (d))

	)

61 
	#__FD_ISSET
(
d
, 
£t
) \

62 ((
	`__FDS_BITS
 (
£t
)[
	`__FDELT
 (
d
)] & 
	`__FDMASK
 (d)è!ğ0)

	)

	@/usr/include/bits/stdio-lock.h

20 #iâdeà
_BITS_STDIO_LOCK_H


21 
	#_BITS_STDIO_LOCK_H
 1

	)

23 
	~<b™s/libc-lock.h
>

24 
	~<lowËv–lock.h
>

28 
	#_IO_lock_šex³nsive
 1

	)

30 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t_IO_lock_t
;

32 
	#_IO_lock_š™Ÿliz”
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

34 
	#_IO_lock_š™
(
_Çme
) \

35 ((
_Çme
èğ(
_IO_lock_t
è
_IO_lock_š™Ÿliz”
 , 0)

	)

37 
	#_IO_lock_fši
(
_Çme
) \

38 ((è0)

	)

40 
	#_IO_lock_lock
(
_Çme
) \

42 *
__£lf
 = 
THREAD_SELF
; \

43 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

45 
	`Îl_lock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

46 (
_Çme
).
owÃr
 = 
__£lf
; \

48 ++(
_Çme
).
út
; \

49 } 0)

	)

51 
	#_IO_lock_Œylock
(
_Çme
) \

53 
__»suÉ
 = 0; \

54 *
__£lf
 = 
THREAD_SELF
; \

55 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

57 ià(
	`Îl_Œylock
 ((
_Çme
).
lock
) == 0) \

59 (
_Çme
).
owÃr
 = 
__£lf
; \

60 (
_Çme
).
út
 = 1; \

63 
__»suÉ
 = 
EBUSY
; \

66 ++(
_Çme
).
út
; \

67 
__»suÉ
; \

68 })

	)

70 
	#_IO_lock_uÆock
(
_Çme
) \

72 ià(--(
_Çme
).
út
 == 0) \

74 (
_Çme
).
owÃr
 = 
NULL
; \

75 
	`Îl_uÆock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

77 } 0)

	)

81 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
) \

82 
	`__libc_ş—nup_»giÚ_¡¬t
 (((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0, 
_fù
, _å)

	)

83 
	#_IO_ş—nup_»giÚ_¡¬t_nßrg
(
_fù
) \

84 
	`__libc_ş—nup_»giÚ_¡¬t
 (1, 
_fù
, 
NULL
)

	)

85 
	#_IO_ş—nup_»giÚ_’d
(
_do™
) \

86 
	`__libc_ş—nup_»giÚ_’d
 (
_do™
)

	)

88 #ià
defšed
 
_LIBC
 && !defšed 
NOT_IN_libc


90 #ifdeà
__EXCEPTIONS


91 
	#_IO_acquœe_lock
(
_å
) \

93 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

94 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_fù
))) \

95 ğ(
_å
); \

96 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

97 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
) \

99 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

100 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_ş—r_æags2_fù
))) \

101 ğ(
_å
); \

102 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

104 
	#_IO_acquœe_lock
(
_å
è
_IO_acquœe_lock_Ãeds_exû±iÚs_’abËd


	)

105 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
è
	`_IO_acquœe_lock
 (_å)

	)

107 
	#_IO_»Ëa£_lock
(
_å
è; } 0)

	)

	@/usr/include/bits/typesizes.h

20 #iâdeà
_BITS_TYPES_H


24 #iâdef 
_BITS_TYPESIZES_H


25 
	#_BITS_TYPESIZES_H
 1

	)

30 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

31 
	#__UID_T_TYPE
 
__U32_TYPE


	)

32 
	#__GID_T_TYPE
 
__U32_TYPE


	)

33 
	#__INO_T_TYPE
 
__ULONGWORD_TYPE


	)

34 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

35 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

36 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

37 
	#__OFF_T_TYPE
 
__SLONGWORD_TYPE


	)

38 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

39 
	#__PID_T_TYPE
 
__S32_TYPE


	)

40 
	#__RLIM_T_TYPE
 
__ULONGWORD_TYPE


	)

41 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

42 
	#__BLKCNT_T_TYPE
 
__SLONGWORD_TYPE


	)

43 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

44 
	#__FSBLKCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

45 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

46 
	#__FSFILCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

47 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

48 
	#__ID_T_TYPE
 
__U32_TYPE


	)

49 
	#__CLOCK_T_TYPE
 
__SLONGWORD_TYPE


	)

50 
	#__TIME_T_TYPE
 
__SLONGWORD_TYPE


	)

51 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

52 
	#__SUSECONDS_T_TYPE
 
__SLONGWORD_TYPE


	)

53 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

54 
	#__SWBLK_T_TYPE
 
__SLONGWORD_TYPE


	)

55 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

56 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

57 
	#__TIMER_T_TYPE
 *

	)

58 
	#__BLKSIZE_T_TYPE
 
__SLONGWORD_TYPE


	)

59 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

60 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

63 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/uio.h

19 #ià!
defšed
 
_SYS_UIO_H
 && !defšed 
_FCNTL_H


23 #iâdeà
_BITS_UIO_H


24 
	#_BITS_UIO_H
 1

	)

26 
	~<sys/ty³s.h
>

40 
	#UIO_MAXIOV
 1024

	)

44 
	siovec


46 *
	miov_ba£
;

47 
size_t
 
	miov_Ën
;

	@/usr/include/gnu/stubs.h

4 
	~<b™s/wÜdsize.h
>

6 #ià
__WORDSIZE
 == 32

7 
	~<gnu/¡ubs-32.h
>

8 #–ià
__WORDSIZE
 == 64

9 
	~<gnu/¡ubs-64.h
>

	@/usr/include/linux/errno.h

1 #iâdeà
_LINUX_ERRNO_H


2 
	#_LINUX_ERRNO_H


	)

4 
	~<asm/”ºo.h
>

	@/usr/include/zlibdefs.h

6 
	~<sys/ty³s.h
>

7 
	~<uni¡d.h
>

8 #ifdeà
VMS


9 
	~<unixio.h
>

11 #iâdeà
z_off_t


12 
	#z_off_t
 
off_t


	)

	@/usr/include/asm-generic/socket.h

1 #iâdeà
__ASM_GENERIC_SOCKET_H


2 
	#__ASM_GENERIC_SOCKET_H


	)

4 
	~<asm/sockios.h
>

7 
	#SOL_SOCKET
 1

	)

9 
	#SO_DEBUG
 1

	)

10 
	#SO_REUSEADDR
 2

	)

11 
	#SO_TYPE
 3

	)

12 
	#SO_ERROR
 4

	)

13 
	#SO_DONTROUTE
 5

	)

14 
	#SO_BROADCAST
 6

	)

15 
	#SO_SNDBUF
 7

	)

16 
	#SO_RCVBUF
 8

	)

17 
	#SO_SNDBUFFORCE
 32

	)

18 
	#SO_RCVBUFFORCE
 33

	)

19 
	#SO_KEEPALIVE
 9

	)

20 
	#SO_OOBINLINE
 10

	)

21 
	#SO_NO_CHECK
 11

	)

22 
	#SO_PRIORITY
 12

	)

23 
	#SO_LINGER
 13

	)

24 
	#SO_BSDCOMPAT
 14

	)

27 #iâdeà
SO_PASSCRED


28 
	#SO_PASSCRED
 16

	)

29 
	#SO_PEERCRED
 17

	)

30 
	#SO_RCVLOWAT
 18

	)

31 
	#SO_SNDLOWAT
 19

	)

32 
	#SO_RCVTIMEO
 20

	)

33 
	#SO_SNDTIMEO
 21

	)

37 
	#SO_SECURITY_AUTHENTICATION
 22

	)

38 
	#SO_SECURITY_ENCRYPTION_TRANSPORT
 23

	)

39 
	#SO_SECURITY_ENCRYPTION_NETWORK
 24

	)

41 
	#SO_BINDTODEVICE
 25

	)

44 
	#SO_ATTACH_FILTER
 26

	)

45 
	#SO_DETACH_FILTER
 27

	)

47 
	#SO_PEERNAME
 28

	)

48 
	#SO_TIMESTAMP
 29

	)

49 
	#SCM_TIMESTAMP
 
SO_TIMESTAMP


	)

51 
	#SO_ACCEPTCONN
 30

	)

53 
	#SO_PEERSEC
 31

	)

54 
	#SO_PASSSEC
 34

	)

55 
	#SO_TIMESTAMPNS
 35

	)

56 
	#SCM_TIMESTAMPNS
 
SO_TIMESTAMPNS


	)

58 
	#SO_MARK
 36

	)

60 
	#SO_TIMESTAMPING
 37

	)

61 
	#SCM_TIMESTAMPING
 
SO_TIMESTAMPING


	)

63 
	#SO_PROTOCOL
 38

	)

64 
	#SO_DOMAIN
 39

	)

	@/usr/include/asm/errno.h

1 
	~<asm-g’”ic/”ºo.h
>

	@/usr/include/bits/libc-lock.h

20 #iâdeà
_BITS_LIBC_LOCK_H


21 
	#_BITS_LIBC_LOCK_H
 1

	)

23 
	~<±h»ad.h
>

24 
	#__Ãed_NULL


	)

25 
	~<¡ddef.h
>

34 #ifdeà
_LIBC


35 
	~<lowËv–lock.h
>

36 
	~<s.h
>

37 
	~<±h»ad-funùiÚs.h
>

38 
	~<”ºo.h
>

39 
	~<gnu/İtiÚ-groups.h
>

43 #ià
defšed
 
_LIBC
 || defšed 
_IO_MTSAFE_IO


44 #ià(
defšed
 
NOT_IN_libc
 && !defšed 
IS_IN_lib±h»ad
è|| !defšed 
_LIBC


45 
±h»ad_mu‹x_t
 
	t__libc_lock_t
;

46 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

48 
	t__libc_lock_t
;

49 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t__libc_lock_»cursive_t
;

51 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__¹ld_lock_»cursive_t
;

52 #ifdeà
__USE_UNIX98


53 
±h»ad_rwlock_t
 
	t__libc_rwlock_t
;

55 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

58 
__libc_lock_İaque__
 
	t__libc_lock_t
;

59 
__libc_lock_»cursive_İaque__
 
	t__libc_lock_»cursive_t
;

60 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

64 
±h»ad_key_t
 
	t__libc_key_t
;

73 
	#__libc_lock_defše
(
CLASS
,
NAME
) \

74 
CLASS
 
__libc_lock_t
 
NAME
;

	)

75 
	#__libc_rwlock_defše
(
CLASS
,
NAME
) \

76 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

77 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

78 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

79 
	#__¹ld_lock_defše_»cursive
(
CLASS
,
NAME
) \

80 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
;

	)

91 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

92 #ià
LLL_LOCK_INITIALIZER
 == 0

93 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

94 
CLASS
 
__libc_lock_t
 
NAME
;

	)

96 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

97 
CLASS
 
__libc_lock_t
 
NAME
 = 
LLL_LOCK_INITIALIZER
;

	)

100 #ià
__LT_SPINLOCK_INIT
 == 0

101 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

102 
CLASS
 
__libc_lock_t
 
NAME
;

	)

104 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

105 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

109 
	#__libc_rwlock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

110 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

114 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

115 #ià
LLL_LOCK_INITIALIZER
 == 0

116 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

117 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

119 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

120 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

122 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

123 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

125 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

126 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

127 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

128 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

131 
	#__¹ld_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

132 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

133 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

134 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

136 
	#__¹ld_lock_š™Ÿlize
(
NAME
) \

137 (è((
NAME
èğ(
__¹ld_lock_»cursive_t
è
_RTLD_LOCK_RECURSIVE_INITIALIZER
)

	)

144 #ifdeà
__PIC__


145 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

146 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
FUNC
è*
_â
 = (FUNC); \

147 
_â
 !ğ
NULL
 ? (*_âè
ARGS
 : 
ELSE
; }))

	)

149 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

150 (
FUNC
 !ğ
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

154 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


155 
	#PTFAVAIL
(
NAME
è
__libc_±h»ad_funùiÚs_š™


	)

156 
	#__libc_±f_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

157 (
__libc_±h»ad_funùiÚs_š™
 ? 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
è: 
ELSE
)

	)

158 
	#__libc_±f_ÿÎ_®ways
(
FUNC
, 
ARGS
) \

159 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
)

	)

161 
	#PTFAVAIL
(
NAME
è(NAME !ğ
NULL
)

	)

162 
	#__libc_±f_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

163 
	`__libc_maybe_ÿÎ
 (
FUNC
, 
ARGS
, 
ELSE
)

	)

164 
	#__libc_±f_ÿÎ_®ways
(
FUNC
, 
ARGS
) \

165 
FUNC
 
ARGS


	)

171 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

172 
	#__libc_lock_š™
(
NAME
è((NAMEèğ
LLL_LOCK_INITIALIZER
, 0)

	)

174 
	#__libc_lock_š™
(
NAME
) \

175 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_š™
, (&(
NAME
), 
NULL
), 0)

	)

177 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


180 
	#__libc_rwlock_š™
(
NAME
) \

181 (
	`__butš_mem£t
 (&(
NAME
), '\0',  (NAME)), 0)

	)

183 
	#__libc_rwlock_š™
(
NAME
) \

184 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_š™
, (&(
NAME
), 
NULL
), 0)

	)

188 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

189 
	#__libc_lock_š™_»cursive
(
NAME
) \

190 ((
NAME
èğ(
__libc_lock_»cursive_t
è
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

192 
	#__libc_lock_š™_»cursive
(
NAME
) \

194 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

196 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

197 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

198 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

199 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

200 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

202 } 0)

	)

205 
	#__¹ld_lock_š™_»cursive
(
NAME
) \

207 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

209 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

210 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

211 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

212 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

213 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

215 } 0)

	)

220 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

221 
	#__libc_lock_fši
(
NAME
è((è0)

	)

223 
	#__libc_lock_fši
(
NAME
) \

224 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

226 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


227 
	#__libc_rwlock_fši
(
NAME
è((è0)

	)

229 
	#__libc_rwlock_fši
(
NAME
) \

230 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_de¡roy
, (&(
NAME
)), 0)

	)

234 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

235 
	#__libc_lock_fši_»cursive
(
NAME
è((è0)

	)

237 
	#__libc_lock_fši_»cursive
(
NAME
) \

238 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

242 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

243 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

247 
__libc_lock_lock_â
 (
__libc_lock_t
 *);

248 
libc_hidd’_´Ùo
 (
__libc_lock_lock_â
);

250 #ià
__OPTION_EGLIBC_BIG_MACROS


251 
	#__libc_lock_lock
(
NAME
) \

252 ({ 
	`Îl_lock
 (
NAME
, 
LLL_PRIVATE
); 0; })

	)

254 
	#__libc_lock_lock
(
NAME
) \

255 
	`__libc_lock_lock_â
 (&(
NAME
))

	)

258 
	#__libc_lock_lock
(
NAME
) \

259 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
)), 0)

	)

261 
	#__libc_rwlock_rdlock
(
NAME
) \

262 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_rdlock
, (&(
NAME
)), 0)

	)

263 
	#__libc_rwlock_w¾ock
(
NAME
) \

264 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_w¾ock
, (&(
NAME
)), 0)

	)

267 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

268 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

272 
__libc_lock_lock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

273 
libc_hidd’_´Ùo
 (
__libc_lock_lock_»cursive_â
);

275 #ià
__OPTION_EGLIBC_BIG_MACROS


276 
	#__libc_lock_lock_»cursive
(
NAME
) \

278 *
£lf
 = 
THREAD_SELF
; \

279 ià((
NAME
).
owÃr
 !ğ
£lf
) \

281 
	`Îl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

282 (
NAME
).
owÃr
 = 
£lf
; \

284 ++(
NAME
).
út
; \

285 } 0)

	)

287 
	#__libc_lock_lock_»cursive
(
NAME
) \

288 
	`__libc_lock_lock_»cursive_â
 (&(
NAME
))

	)

291 
	#__libc_lock_lock_»cursive
(
NAME
) \

292 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

296 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

297 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

301 
__libc_lock_Œylock_â
 (
__libc_lock_t
 *);

302 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_â
);

304 #ià
__OPTION_EGLIBC_BIG_MACROS


305 
	#__libc_lock_Œylock
(
NAME
) \

306 
	`Îl_Œylock
 (
NAME
)

	)

308 
	#__libc_lock_Œylock
(
NAME
) \

309 
	`__libc_lock_Œylock_â
 (&(
NAME
))

	)

312 
	#__libc_lock_Œylock
(
NAME
) \

313 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

315 
	#__libc_rwlock_Œyrdlock
(
NAME
) \

316 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyrdlock
, (&(
NAME
)), 0)

	)

317 
	#__libc_rwlock_Œyw¾ock
(
NAME
) \

318 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyw¾ock
, (&(
NAME
)), 0)

	)

321 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

322 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

326 
__libc_lock_Œylock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

327 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_»cursive_â
);

329 #ià
__OPTION_EGLIBC_BIG_MACROS


330 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

332 
»suÉ
 = 0; \

333 *
£lf
 = 
THREAD_SELF
; \

334 ià((
NAME
).
owÃr
 !ğ
£lf
) \

336 ià(
	`Îl_Œylock
 ((
NAME
).
lock
) == 0) \

338 (
NAME
).
owÃr
 = 
£lf
; \

339 (
NAME
).
út
 = 1; \

342 
»suÉ
 = 
EBUSY
; \

345 ++(
NAME
).
út
; \

346 
»suÉ
; \

347 })

	)

349 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

350 
	`__libc_lock_Œylock_»cursive_â
 (&(
NAME
))

	)

353 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

354 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

357 
	#__¹ld_lock_Œylock_»cursive
(
NAME
) \

358 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
).
mu‹x
), 0)

	)

361 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

362 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

366 
__libc_lock_uÆock_â
 (
__libc_lock_t
 *);

367 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_â
);

369 #ià
__OPTION_EGLIBC_BIG_MACROS


370 
	#__libc_lock_uÆock
(
NAME
) \

371 
	`Îl_uÆock
 (
NAME
, 
LLL_PRIVATE
)

	)

373 
	#__libc_lock_uÆock
(
NAME
) \

374 
	`__libc_lock_uÆock_â
 (&(
NAME
))

	)

377 
	#__libc_lock_uÆock
(
NAME
) \

378 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

380 
	#__libc_rwlock_uÆock
(
NAME
) \

381 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_uÆock
, (&(
NAME
)), 0)

	)

384 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

385 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

389 
__libc_lock_uÆock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

390 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_»cursive_â
);

392 #ià
__OPTION_EGLIBC_BIG_MACROS


394 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

396 ià(--(
NAME
).
út
 == 0) \

398 (
NAME
).
owÃr
 = 
NULL
; \

399 
	`Îl_uÆock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

401 } 0)

	)

403 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

404 
	`__libc_lock_uÆock_»cursive_â
 (&(
NAME
))

	)

407 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

408 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

411 #ià
defšed
 
_LIBC
 && defšed 
SHARED


412 
	#__¹ld_lock_deçuÉ_lock_»cursive
(
lock
) \

413 ++((
±h»ad_mu‹x_t
 *)(
lock
))->
__d©a
.
__couÁ
;

	)

415 
	#__¹ld_lock_deçuÉ_uÆock_»cursive
(
lock
) \

416 --((
±h»ad_mu‹x_t
 *)(
lock
))->
__d©a
.
__couÁ
;

	)

418 
	#__¹ld_lock_lock_»cursive
(
NAME
) \

419 
	`GL
(
dl_¹ld_lock_»cursive
è(&(
NAME
).
mu‹x
)

	)

421 
	#__¹ld_lock_uÆock_»cursive
(
NAME
) \

422 
	`GL
(
dl_¹ld_uÆock_»cursive
è(&(
NAME
).
mu‹x
)

	)

424 
	#__¹ld_lock_lock_»cursive
(
NAME
) \

425 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

427 
	#__¹ld_lock_uÆock_»cursive
(
NAME
) \

428 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
).
mu‹x
), 0)

	)

432 #ià
PTHREAD_ONCE_INIT
 == 0

435 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

436 
CLASS
 
±h»ad_Úû_t
 
NAME


	)

438 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

439 
CLASS
 
±h»ad_Úû_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

443 
	#__libc_Úû
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

445 ià(
	`PTFAVAIL
 (
__±h»ad_Úû
)) \

446 
	`__libc_±f_ÿÎ_®ways
 (
__±h»ad_Úû
, (&(
ONCE_CONTROL
), \

447 
INIT_FUNCTION
)); \

448 ià((
ONCE_CONTROL
è=ğ
PTHREAD_ONCE_INIT
) { \

449 
	`INIT_FUNCTION
 (); \

450 (
ONCE_CONTROL
) |= 2; \

452 } 0)

	)

459 
_±h»ad_ş—nup_push
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

460 (*
routše
è(*), *
¬g
);

461 
	`_±h»ad_ş—nup_pİ
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

462 
execu‹
);

463 
	`_±h»ad_ş—nup_push_deãr
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

464 (*
routše
è(*), *
¬g
);

465 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

466 
execu‹
);

469 
	#__libc_ş—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

470 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

471 
_ava
; \

472 ià(
DOIT
) { \

473 
_ava
 = 
	`PTFAVAIL
 (
_±h»ad_ş—nup_push_deãr
); \

474 ià(
_ava
) { \

475 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_push_deãr
, (&
_bufãr
, 
FCT
, \

476 
ARG
)); \

478 
_bufãr
.
__routše
 = (
FCT
); \

479 
_bufãr
.
__¬g
 = (
ARG
); \

482 
_ava
 = 0; \

483 }

	)

486 
	#__libc_ş—nup_»giÚ_’d
(
DOIT
) \

487 ià(
_ava
) { \

488 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

489 } ià(
DOIT
) \

490 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
); \

491 
	}

	)
}

494 
	#__libc_ş—nup_’d
(
DOIT
) \

495 ià(
_ava
) { \

496 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

497 } ià(
DOIT
) \

498 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
)

	)

502 
__ex‹º_šlše
 

503 
	$__libc_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
f
)

505 ià(
f
->
__do_™
)

506 
f
->
	`__ÿnûl_routše
 (f->
__ÿnûl_¬g
);

507 
	}
}

509 
	#__libc_ş—nup_push
(
fù
, 
¬g
) \

511 
__±h»ad_ş—nup_äame
 
__şäame
 \

512 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__libc_ş—nup_routše
))) \

513 ğ{ .
__ÿnûl_routše
 = (
fù
), .
__ÿnûl_¬g
 = (
¬g
), \

514 .
__do_™
 = 1 };

	)

516 
	#__libc_ş—nup_pİ
(
execu‹
) \

517 
__şäame
.
__do_™
 = (
execu‹
); \

518 } 0)

	)

522 
	#__libc_key_ü—‹
(
KEY
, 
DESTRUCTOR
) \

523 
	`__libc_±f_ÿÎ
 (
__±h»ad_key_ü—‹
, (
KEY
, 
DESTRUCTOR
), 1)

	)

526 
	#__libc_g‘¥ecific
(
KEY
) \

527 
	`__libc_±f_ÿÎ
 (
__±h»ad_g‘¥ecific
, (
KEY
), 
NULL
)

	)

530 
	#__libc_£t¥ecific
(
KEY
, 
VALUE
) \

531 
	`__libc_±f_ÿÎ
 (
__±h»ad_£t¥ecific
, (
KEY
, 
VALUE
), 0)

	)

537 
	#__libc_©fÜk
(
PREPARE
, 
PARENT
, 
CHILD
) \

538 
	`__»gi¡”_©fÜk
 (
PREPARE
, 
PARENT
, 
CHILD
, 
NULL
)

	)

539 
__»gi¡”_©fÜk
 ((*
__´•¬e
) (),

540 (*
__·»Á
) (),

541 (*
__chd
) (),

542 *
__dso_hªdË
);

547 
	`__±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

548 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x_©Œ
);

550 
	`__±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

552 
	`__±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

554 
	`__±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

556 
	`__±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

558 
	`__±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

560 
	`__±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

562 
	`__±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

563 
__kšd
);

565 #ifdeà
__USE_UNIX98


566 
	`__±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__rwlock
,

567 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__©Œ
);

569 
	`__±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
);

571 
	`__±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

573 
	`__±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

575 
	`__±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

577 
	`__±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

579 
	`__±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
);

582 
	`__±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

583 (*
__de¡r_funùiÚ
) (*));

585 
	`__±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

586 
__cÚ¡
 *
__poš‹r
);

588 *
	`__±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
);

590 
	`__±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

591 (*
__š™_routše
) ());

593 
	`__±h»ad_©fÜk
 ((*
__´•¬e
) (),

594 (*
__·»Á
) (),

595 (*
__chd
) ());

601 #iâdeà
__NO_WEAK_PTHREAD_ALIASES


602 #ifdeà
w—k_ex‹º


603 #ià
_LIBC


604 
	~<bp-sym.h
>

606 
	#BP_SYM
(
sym
è
	)
sym

608 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_š™
))

609 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_de¡roy
))

610 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_lock
))

611 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_Œylock
))

612 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_uÆock
))

613 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_š™
))

614 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_de¡roy
))

615 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_£‰y³
))

616 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_š™
))

617 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_de¡roy
))

618 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_rdlock
))

619 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_Œyrdlock
))

620 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_w¾ock
))

621 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_Œyw¾ock
))

622 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_uÆock
))

623 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_key_ü—‹
))

624 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_£t¥ecific
))

625 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_g‘¥ecific
))

626 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_Úû
))

627 
	$w—k_ex‹º
 (
__±h»ad_š™Ÿlize
)

628 
	$w—k_ex‹º
 (
__±h»ad_©fÜk
)

629 
	`w—k_ex‹º
 (
	$BP_SYM
 (
_±h»ad_ş—nup_push_deãr
))

630 
	`w—k_ex‹º
 (
	$BP_SYM
 (
_±h»ad_ş—nup_pİ_»¡Üe
))

631 
	`w—k_ex‹º
 (
	$BP_SYM
 (
±h»ad_£tÿnûl¡©e
))

633 #´agm¨
w—k
 
__±h»ad_mu‹x_š™


634 #´agm¨
w—k
 
__±h»ad_mu‹x_de¡roy


635 #´agm¨
w—k
 
__±h»ad_mu‹x_lock


636 #´agm¨
w—k
 
__±h»ad_mu‹x_Œylock


637 #´agm¨
w—k
 
__±h»ad_mu‹x_uÆock


638 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_š™


639 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_de¡roy


640 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_£‰y³


641 #´agm¨
w—k
 
__±h»ad_rwlock_de¡roy


642 #´agm¨
w—k
 
__±h»ad_rwlock_rdlock


643 #´agm¨
w—k
 
__±h»ad_rwlock_Œyrdlock


644 #´agm¨
w—k
 
__±h»ad_rwlock_w¾ock


645 #´agm¨
w—k
 
__±h»ad_rwlock_Œyw¾ock


646 #´agm¨
w—k
 
__±h»ad_rwlock_uÆock


647 #´agm¨
w—k
 
__±h»ad_key_ü—‹


648 #´agm¨
w—k
 
__±h»ad_£t¥ecific


649 #´agm¨
w—k
 
__±h»ad_g‘¥ecific


650 #´agm¨
w—k
 
__±h»ad_Úû


651 #´agm¨
w—k
 
__±h»ad_š™Ÿlize


652 #´agm¨
w—k
 
__±h»ad_©fÜk


653 #´agm¨
w—k
 
_±h»ad_ş—nup_push_deãr


654 #´agm¨
w—k
 
_±h»ad_ş—nup_pİ_»¡Üe


655 #´agm¨
w—k
 
±h»ad_£tÿnûl¡©e


	@/usr/include/gconv.h

23 #iâdeà
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	#__Ãed_mb¡©e_t


	)

28 
	#__Ãed_wšt_t


	)

29 
	~<wch¬.h
>

30 
	#__Ãed_size_t


	)

31 
	#__Ãed_wch¬_t


	)

32 
	~<¡ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

72 
	t__cÚ¡
 **, __const *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

86 
	t__cÚ¡
 *,

87 
	t__cÚ¡
 **,

88 
	t__cÚ¡
 *, **,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
è(*, 
	t__cÚ¡
 *,

93 
	t__cÚ¡
 *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
è(
	t__cÚ¡
 *, __const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 
__cÚ¡
 *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___k”Ãl_co¦


	)

11 
	#__¡ub___k”Ãl_sšl


	)

12 
	#__¡ub___k”Ãl_Æ


	)

13 
	#__¡ub_chæags


	)

14 
	#__¡ub_ç‰ach


	)

15 
	#__¡ub_fchæags


	)

16 
	#__¡ub_fd‘ach


	)

17 
	#__¡ub_g‰y


	)

18 
	#__¡ub_lchmod


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/linux/limits.h

1 #iâdeà
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#LINK_MAX
 127

	)

9 
	#MAX_CANON
 255

	)

10 
	#MAX_INPUT
 255

	)

11 
	#NAME_MAX
 255

	)

12 
	#PATH_MAX
 4096

	)

13 
	#PIPE_BUF
 4096

	)

14 
	#XATTR_NAME_MAX
 255

	)

15 
	#XATTR_SIZE_MAX
 65536

	)

16 
	#XATTR_LIST_MAX
 65536

	)

18 
	#RTSIG_MAX
 32

	)

	@/usr/include/wchar.h

24 #iâdeà
_WCHAR_H


26 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<ã©u»s.h
>

31 #ifdeà
_WCHAR_H


33 
	#__Ãed___FILE


	)

34 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


35 
	#__Ãed_FILE


	)

37 
	~<¡dio.h
>

39 
	#__Ãed___va_li¡


	)

40 
	~<¡d¬g.h
>

42 
	~<b™s/wch¬.h
>

45 
	#__Ãed_size_t


	)

46 
	#__Ãed_wch¬_t


	)

47 
	#__Ãed_NULL


	)

49 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


50 #undeà
__Ãed_wšt_t


51 
	#__Ãed_wšt_t


	)

52 
	~<¡ddef.h
>

55 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

56 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

61 #iâdeà
_WINT_T


66 
	#_WINT_T


	)

67 
	twšt_t
;

71 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

72 && 
defšed
 
__WINT_TYPE__


73 
__BEGIN_NAMESPACE_STD


74 
__WINT_TYPE__
 
	twšt_t
;

75 
	g__END_NAMESPACE_STD


80 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
__mb¡©e_t_defšed


81 
	#__mb¡©e_t_defšed
 1

	)

85 
	m__couÁ
;

88 #ifdeà
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wšt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__v®ue
;

95 } 
	t__mb¡©e_t
;

97 #undeà
__Ãed_mb¡©e_t


102 #ifdeà
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifdeà
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

112 #iâdeà
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #iâdeà
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


125 
	~<wùy³.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

147 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

155 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
)

161 
__THROW
 
__©Œibu‹_pu»__
;

163 
	$wc¢cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©Œibu‹_pu»__
;

165 
__END_NAMESPACE_STD


167 #ifdeà
__USE_XOPEN2K8


169 
	$wcsÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

172 
	$wc¢ÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

173 
size_t
 
__n
è
__THROW
;

177 
	~<xloÿË.h
>

179 
	$wcsÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

180 
__loÿË_t
 
__loc
è
__THROW
;

182 
	$wc¢ÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

183 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscŞl
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

193 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

194 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifdeà
__USE_XOPEN2K8


203 
	$wcscŞl_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

204 
__loÿË_t
 
__loc
è
__THROW
;

209 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

210 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

213 
wch¬_t
 *
	$wcsdup
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

221 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
__©Œibu‹_pu»__
;

228 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

230 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

231 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

232 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
__©Œibu‹_pu»__
;

237 
__END_NAMESPACE_STD


239 #ifdeà
__USE_GNU


242 
wch¬_t
 *
	$wcschºul
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

243 
__THROW
 
__©Œibu‹_pu»__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__»jeù
)

250 
__THROW
 
__©Œibu‹_pu»__
;

253 
size_t
 
	$wcs¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

254 
__THROW
 
__©Œibu‹_pu»__
;

256 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, 
__cÚ¡
 wch¬_ˆ*
__acû±
)

258 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

259 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
,

260 
__cÚ¡
 
wch¬_t
 *
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

263 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
__©Œibu‹_pu»__
;

267 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

269 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

270 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

271 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

274 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
__©Œibu‹_pu»__
;

279 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

280 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__d–im
,

281 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

284 
size_t
 
	$wc¦’
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

285 
__END_NAMESPACE_STD


287 #ifdeà
__USE_XOPEN


289 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

291 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

292 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

293 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

296 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
__©Œibu‹_pu»__
;

301 #ifdeà
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Ën
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

304 
__THROW
 
__©Œibu‹_pu»__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

313 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

317 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©Œibu‹_pu»__
;

322 
	$wmemcmp
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s1
,

323 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

324 
__THROW
 
__©Œibu‹_pu»__
;

327 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

328 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

332 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
)

333 
__THROW
;

336 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

337 
__END_NAMESPACE_STD


339 #ifdeà
__USE_GNU


342 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

343 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

344 
__THROW
;

348 
__BEGIN_NAMESPACE_STD


351 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

355 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

359 
	$mbsš™
 (
__cÚ¡
 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

363 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

364 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

365 
mb¡©e_t
 *
__p
è
__THROW
;

368 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

369 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

372 
size_t
 
	$__mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

373 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
__END_NAMESPACE_STD


378 #ifdeà
__USE_EXTERN_INLINES


384 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

385 
__ex‹º_šlše
 
wšt_t


386 
	`__NTH
 (
	$btowc
 (
__c
))

387 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

388 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

390 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

391 
__ex‹º_šlše
 

392 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

393 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

394 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

396 
__ex‹º_šlše
 
size_t


397 
__NTH
 (
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

398 
mb¡©e_t
 *
__»¡riù
 
__ps
))

399 {  (
__ps
 !ğ
NULL


400 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

403 
__BEGIN_NAMESPACE_STD


406 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

407 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

408 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

412 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

413 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

414 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

415 
__END_NAMESPACE_STD


418 #ifdef 
__USE_XOPEN2K8


421 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

422 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

423 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

427 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

428 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

429 
size_t
 
__nwc
, size_ˆ
__Ën
,

430 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

435 #ifdeà
__USE_XOPEN


437 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

441 
	$wcswidth
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

445 
__BEGIN_NAMESPACE_STD


448 
	$wc¡od
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

449 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

450 
__END_NAMESPACE_STD


452 #ifdeà
__USE_ISOC99


453 
__BEGIN_NAMESPACE_C99


455 
	$wc¡of
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

456 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

457 
	$wc¡Şd
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
__END_NAMESPACE_C99


463 
__BEGIN_NAMESPACE_STD


466 
	$wc¡Ş
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

467 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

471 
	$wc¡oul
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

472 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

473 
__THROW
;

474 
__END_NAMESPACE_STD


476 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

477 
__BEGIN_NAMESPACE_C99


480 
__ex‹nsiÚ__


481 
	$wc¡Şl
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

482 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

483 
__THROW
;

487 
__ex‹nsiÚ__


488 
	$wc¡ouÎ
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

489 
wch¬_t
 **
__»¡riù
 
__’d±r
,

490 
__ba£
è
__THROW
;

491 
__END_NAMESPACE_C99


494 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


497 
__ex‹nsiÚ__


498 
	$wc¡oq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

499 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

500 
__THROW
;

504 
__ex‹nsiÚ__


505 
	$wc¡ouq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

506 
wch¬_t
 **
__»¡riù
 
__’d±r
,

507 
__ba£
è
__THROW
;

510 #ifdeà
__USE_GNU


524 
	~<xloÿË.h
>

528 
	$wc¡Ş_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

529 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

530 
__loÿË_t
 
__loc
è
__THROW
;

532 
	$wc¡oul_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

533 
wch¬_t
 **
__»¡riù
 
__’d±r
,

534 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

536 
__ex‹nsiÚ__


537 
	$wc¡Şl_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

538 
wch¬_t
 **
__»¡riù
 
__’d±r
,

539 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

541 
__ex‹nsiÚ__


542 
	$wc¡ouÎ_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

543 
wch¬_t
 **
__»¡riù
 
__’d±r
,

544 
__ba£
, 
__loÿË_t
 
__loc
)

545 
__THROW
;

547 
	$wc¡od_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

548 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

549 
__THROW
;

551 
	$wc¡of_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

552 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

553 
__THROW
;

555 
	$wc¡Şd_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

556 
wch¬_t
 **
__»¡riù
 
__’d±r
,

557 
__loÿË_t
 
__loc
è
__THROW
;

561 #ifdef 
__USE_XOPEN2K8


564 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
è
__THROW
;

568 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
)

569 
__THROW
;

575 #ifdef 
__USE_XOPEN2K8


578 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

581 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


582 
__BEGIN_NAMESPACE_STD


585 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

592 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

593 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

599 
	`w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

602 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

603 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
__THROW
 ;

610 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

611 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

612 
__gnuc_va_li¡
 
__¬g
)

618 
	`vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

619 
__gnuc_va_li¡
 
__¬g
)

623 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

624 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

625 
__gnuc_va_li¡
 
__¬g
)

626 
__THROW
 ;

633 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

634 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

640 
	`wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

643 
	$swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

644 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
__THROW
 ;

647 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

648 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

649 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

650 #ifdeà
__REDIRECT


654 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

655 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

656 
__isoc99_fwsÿnf
)

658 
	`__REDIRECT
 (
wsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

659 
__isoc99_wsÿnf
)

661 
	`__REDIRECT
 (
swsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

662 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

663 
__isoc99_swsÿnf
)

664 
__THROW
 ;

666 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

667 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

668 
	`__isoc99_wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

669 
	$__isoc99_swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

670 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

671 
__THROW
;

672 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

673 
	#wsÿnf
 
__isoc99_wsÿnf


	)

674 
	#swsÿnf
 
__isoc99_swsÿnf


	)

678 
__END_NAMESPACE_STD


681 #ifdeà
__USE_ISOC99


682 
__BEGIN_NAMESPACE_C99


687 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

688 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

689 
__gnuc_va_li¡
 
__¬g
)

695 
	`vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

696 
__gnuc_va_li¡
 
__¬g
)

699 
	$vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

700 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

701 
__gnuc_va_li¡
 
__¬g
)

702 
__THROW
 ;

704 #ià!
defšed
 
__USE_GNU
 \

705 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

706 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

707 #ifdeà
__REDIRECT


708 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

709 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

710 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

712 
	`__REDIRECT
 (
vwsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

713 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

715 
	`__REDIRECT
 (
vswsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

716 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

717 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

718 
__THROW
 ;

720 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

721 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

722 
__gnuc_va_li¡
 
__¬g
);

723 
	`__isoc99_vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	$__isoc99_vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

726 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

727 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

728 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

729 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

730 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

734 
__END_NAMESPACE_C99


738 
__BEGIN_NAMESPACE_STD


743 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

744 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

750 
wšt_t
 
	`g‘wch¬
 ();

757 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

758 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

764 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

772 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

773 
__FILE
 *
__»¡riù
 
__¡»am
);

779 
	`åutws
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

780 
__FILE
 *
__»¡riù
 
__¡»am
);

787 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

788 
__END_NAMESPACE_STD


791 #ifdeà
__USE_GNU


799 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

800 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

808 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

816 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

825 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

826 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

835 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

836 
__FILE
 *
__»¡riù
 
__¡»am
);

844 
	`åutws_uÆocked
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

845 
__FILE
 *
__»¡riù
 
__¡»am
);

849 
__BEGIN_NAMESPACE_C99


853 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

854 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

855 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

856 
__END_NAMESPACE_C99


858 #ifdeà
__USE_GNU


859 
	~<xloÿË.h
>

863 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

864 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

865 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

866 
__loÿË_t
 
__loc
è
__THROW
;

875 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


876 
	#__Ãed_iswxxx


	)

877 
	~<wùy³.h
>

881 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


882 
	~<b™s/wch¬2.h
>

885 #ifdeà
__LDBL_COMPAT


886 
	~<b™s/wch¬-ldbl.h
>

889 
__END_DECLS


897 #undeà
__Ãed_mb¡©e_t


898 #undeà
__Ãed_wšt_t


	@/usr/include/asm-generic/errno.h

1 #iâdeà
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-g’”ic/”ºo-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

	@/usr/include/asm/sockios.h

1 
	~<asm-g’”ic/sockios.h
>

	@/usr/include/bits/wchar-ldbl.h

20 #iâdeà
_WCHAR_H


24 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


25 
__BEGIN_NAMESPACE_C99


26 
__LDBL_REDIR_DECL
 (
fw´štf
);

27 
__LDBL_REDIR_DECL
 (
w´štf
);

28 
__LDBL_REDIR_DECL
 (
sw´štf
);

29 
__LDBL_REDIR_DECL
 (
vfw´štf
);

30 
__LDBL_REDIR_DECL
 (
vw´štf
);

31 
__LDBL_REDIR_DECL
 (
vsw´štf
);

32 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

33 && !
defšed
 
	g__REDIRECT
 \

34 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

35 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

37 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

39 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

41 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

43 
__END_NAMESPACE_C99


46 #ifdeà
__USE_ISOC99


47 
__BEGIN_NAMESPACE_C99


48 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd
, 
wc¡od
);

49 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

50 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

51 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

53 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

55 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

57 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

59 
__END_NAMESPACE_C99


62 #ifdeà
__USE_GNU


63 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd_l
, 
wc¡od_l
);

66 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


67 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

68 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

69 #ià
__USE_FORTIFY_LEVEL
 > 1

70 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

73 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar2.h

20 #iâdeà
_WCHAR_H


25 
wch¬_t
 *
	$__wmemıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

26 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

27 
size_t
 
__ns1
è
__THROW
;

28 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_®Ÿs
,

29 (
wch¬_t
 *
__»¡riù
 
__s1
,

30 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

31 
wmemıy
);

32 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_chk_w¬n
,

33 (
wch¬_t
 *
__»¡riù
 
__s1
,

34 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

35 
size_t
 
__ns1
), 
__wmemıy_chk
)

36 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

39 
__ex‹º_®ways_šlše
 
wch¬_t
 *

40 
	`__NTH
 (
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

41 
size_t
 
__n
))

43 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

45 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

46  
	`__wmemıy_chk
 (
__s1
, 
__s2
, 
__n
,

47 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

49 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

50  
	`__wmemıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

51 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

53  
	`__wmemıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

54 
	}
}

57 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

58 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

59 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

60 
__cÚ¡
 
wch¬_t
 *
__s2
,

61 
size_t
 
__n
), 
wmemmove
);

62 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

63 (
wch¬_t
 *
__»¡riù
 
__s1
,

64 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

65 
size_t
 
__ns1
), 
__wmemmove_chk
)

66 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

69 
__ex‹º_®ways_šlše
 
wch¬_t
 *

70 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

71 
size_t
 
__n
))

73 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

75 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

76  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

77 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

79 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

80  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

81 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

83  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

84 
	}
}

87 #ifdeà
__USE_GNU


88 
wch¬_t
 *
	$__wmempıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

89 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

90 
size_t
 
__ns1
è
__THROW
;

91 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_®Ÿs
,

92 (
wch¬_t
 *
__»¡riù
 
__s1
,

93 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
,

94 
size_t
 
__n
), 
wmempıy
);

95 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_chk_w¬n
,

96 (
wch¬_t
 *
__»¡riù
 
__s1
,

97 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

98 
size_t
 
__ns1
), 
__wmempıy_chk
)

99 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

102 
__ex‹º_®ways_šlše
 
wch¬_t
 *

103 
	`__NTH
 (
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

104 
size_t
 
__n
))

106 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

108 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

109  
	`__wmempıy_chk
 (
__s1
, 
__s2
, 
__n
,

110 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

112 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

113  
	`__wmempıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

114 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

116  
	`__wmempıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

117 
	}
}

121 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

122 
size_t
 
__ns
è
__THROW
;

123 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

124 
size_t
 
__n
), 
wmem£t
);

125 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

126 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

127 
size_t
 
__ns
), 
__wmem£t_chk
)

128 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

131 
__ex‹º_®ways_šlše
 
wch¬_t
 *

132 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__»¡riù
 
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

134 ià(
	`__bos0
 (
__s
è!ğ(
size_t
) -1)

136 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

137  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

139 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

140  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

141 
	`__bos0
 (
__s
è/  (
wch¬_t
));

143  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

144 
	}
}

147 
wch¬_t
 *
	$__wcsıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

149 
size_t
 
__n
è
__THROW
;

150 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsıy_®Ÿs
,

151 (
wch¬_t
 *
__»¡riù
 
__de¡
,

152 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsıy
);

154 
__ex‹º_®ways_šlše
 
wch¬_t
 *

155 
	`__NTH
 (
	$wcsıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
))

157 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

158  
	`__wcsıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

159  
	`__wcsıy_®Ÿs
 (
__de¡
, 
__¤c
);

160 
	}
}

163 
wch¬_t
 *
	$__wııy_chk
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
,

164 
size_t
 
__de¡Ën
è
__THROW
;

165 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wııy_®Ÿs
, (wch¬_ˆ*
__de¡
,

166 
__cÚ¡
 
wch¬_t
 *
__¤c
),

167 
wııy
);

169 
__ex‹º_®ways_šlše
 
wch¬_t
 *

170 
	`__NTH
 (
	$wııy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
))

172 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

173  
	`__wııy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

174  
	`__wııy_®Ÿs
 (
__de¡
, 
__¤c
);

175 
	}
}

178 
wch¬_t
 *
	$__wc¢ıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

179 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

180 
size_t
 
__de¡Ën
è
__THROW
;

181 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_®Ÿs
,

182 (
wch¬_t
 *
__»¡riù
 
__de¡
,

183 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

184 
size_t
 
__n
), 
wc¢ıy
);

185 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_chk_w¬n
,

186 (
wch¬_t
 *
__»¡riù
 
__de¡
,

187 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

188 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ıy_chk
)

189 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

192 
__ex‹º_®ways_šlše
 
wch¬_t
 *

193 
	`__NTH
 (
	$wc¢ıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
))

195 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

197 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

198  
	`__wc¢ıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

199 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

200 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

201  
	`__wc¢ıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

202 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

204  
	`__wc¢ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

205 
	}
}

208 
wch¬_t
 *
	$__wınıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

209 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

210 
size_t
 
__de¡Ën
è
__THROW
;

211 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_®Ÿs
,

212 (
wch¬_t
 *
__»¡riù
 
__de¡
,

213 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

214 
size_t
 
__n
), 
wınıy
);

215 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_chk_w¬n
,

216 (
wch¬_t
 *
__»¡riù
 
__de¡
,

217 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

218 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wınıy_chk
)

219 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

222 
__ex‹º_®ways_šlše
 
wch¬_t
 *

223 
	`__NTH
 (
	$wınıy
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
))

225 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

227 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

228  
	`__wınıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

229 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

230 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

231  
	`__wınıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

232 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

234  
	`__wınıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

235 
	}
}

238 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

239 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

240 
size_t
 
__de¡Ën
è
__THROW
;

241 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

242 (
wch¬_t
 *
__»¡riù
 
__de¡
,

243 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

245 
__ex‹º_®ways_šlše
 
wch¬_t
 *

246 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
))

248 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

249  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

250  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

251 
	}
}

254 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

255 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

256 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

257 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

258 (
wch¬_t
 *
__»¡riù
 
__de¡
,

259 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

260 
size_t
 
__n
), 
wc¢ÿt
);

262 
__ex‹º_®ways_šlše
 
wch¬_t
 *

263 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__de¡
, 
__cÚ¡
 wch¬_ˆ*
__¤c
, 
size_t
 
__n
))

265 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

266  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

267 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

268  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

269 
	}
}

272 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

273 
__æag
, 
size_t
 
__s_Ën
,

274 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

275 
__THROW
 ;

277 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

278 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

279 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

280 
sw´štf
);

282 #ifdeà
__va_¬g_·ck


283 
__ex‹º_®ways_šlše
 

284 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

285 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

287 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

288  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

289 
	`__bos
 (
__s
è/  (
wch¬_t
),

290 
__fmt
, 
	`__va_¬g_·ck
 ());

291  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

292 
	}
}

293 #–ià!
defšed
 
__ılu¥lus


295 
	#sw´štf
(
s
, 
n
, ...) \

296 (
	`__bos
 (
s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

297 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

298 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

299 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

302 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

303 
__æag
, 
size_t
 
__s_Ën
,

304 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

305 
__gnuc_va_li¡
 
__¬g
)

306 
__THROW
 ;

308 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

309 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

310 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
,

311 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

313 
__ex‹º_®ways_šlše
 

314 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

315 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

317 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

318  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

319 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

320  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

321 
	}
}

324 #ià
__USE_FORTIFY_LEVEL
 > 1

326 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

327 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

328 
__w´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

330 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

331 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

332 
__gnuc_va_li¡
 
__­
);

333 
__vw´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

334 
__gnuc_va_li¡
 
__­
);

336 #ifdeà
__va_¬g_·ck


337 
__ex‹º_®ways_šlše
 

338 
	$w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

340  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

341 
	}
}

343 
__ex‹º_®ways_šlše
 

344 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__fmt
, ...)

346  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

347 
	`__va_¬g_·ck
 ());

348 
	}
}

349 #–ià!
defšed
 
__ılu¥lus


350 
	#w´štf
(...) \

351 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

352 
	#fw´štf
(
¡»am
, ...) \

353 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

356 
__ex‹º_®ways_šlše
 

357 
	$vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

359  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

360 
	}
}

362 
__ex‹º_®ways_šlše
 

363 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

364 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

366  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

367 
	}
}

371 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

372 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

373 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

374 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

375 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

376 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

377 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

378 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

379 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

382 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

383 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

385 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

387 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

388  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

389 
__n
, 
__¡»am
);

391 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

392  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

393 
__n
, 
__¡»am
);

395  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

396 
	}
}

398 #ifdeà
__USE_GNU


399 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

400 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

401 
__wur
;

402 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

403 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

404 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

405 
__wur
;

406 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

407 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

408 
__FILE
 *
__»¡riù
 
__¡»am
),

409 
__fg‘ws_uÆocked_chk
)

410 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

413 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

414 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

416 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

418 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

419  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

420 
__n
, 
__¡»am
);

422 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

423  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

424 
__n
, 
__¡»am
);

426  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

427 
	}
}

431 
size_t
 
	$__wütomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
mb¡©e_t
 *
__p
,

432 
size_t
 
__buæ’
è
__THROW
 
__wur
;

433 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

434 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

435 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

437 
__ex‹º_®ways_šlše
 
__wur
 
size_t


438 
	`__NTH
 (
	$wütomb
 (*
__s
, 
wch¬_t
 
__wch¬
, 
mb¡©e_t
 *
__ps
))

443 
	#__WCHAR_MB_LEN_MAX
 16

	)

444 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__WCHAR_MB_LEN_MAX


447 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

448  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

449  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

450 
	}
}

453 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

454 
__cÚ¡
 **
__»¡riù
 
__¤c
,

455 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

456 
size_t
 
__d¡Ën
è
__THROW
;

457 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

458 (
wch¬_t
 *
__»¡riù
 
__d¡
,

459 
__cÚ¡
 **
__»¡riù
 
__¤c
,

460 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

461 
mb¤towcs
);

462 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

463 (
wch¬_t
 *
__»¡riù
 
__d¡
,

464 
__cÚ¡
 **
__»¡riù
 
__¤c
,

465 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

466 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

467 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

470 
__ex‹º_®ways_šlše
 
size_t


471 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

472 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

474 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

476 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

477  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

478 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

480 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

481  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

482 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

484  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

485 
	}
}

488 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

489 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

490 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

491 
size_t
 
__d¡Ën
è
__THROW
;

492 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

493 (*
__»¡riù
 
__d¡
,

494 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

495 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

496 
wc¤tombs
);

497 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

498 (*
__»¡riù
 
__d¡
,

499 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

500 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

501 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

502 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

504 
__ex‹º_®ways_šlše
 
size_t


505 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

506 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

508 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

510 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

511  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

513 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

514  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

516  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

517 
	}
}

520 #ifdeà
__USE_GNU


521 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

522 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

523 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

524 
size_t
 
__d¡Ën
è
__THROW
;

525 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

526 (
wch¬_t
 *
__»¡riù
 
__d¡
,

527 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

528 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

529 
mb¢¹owcs
);

530 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

531 (
wch¬_t
 *
__»¡riù
 
__d¡
,

532 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

533 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

534 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

535 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

538 
__ex‹º_®ways_šlše
 
size_t


539 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

540 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

542 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

544 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

545  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

546 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

548 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

549  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

550 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

552  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

553 
	}
}

556 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

557 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

558 
size_t
 
__nwc
, size_ˆ
__Ën
,

559 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

560 
__THROW
;

561 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

562 (*
__»¡riù
 
__d¡
,

563 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

564 
size_t
 
__nwc
, size_ˆ
__Ën
,

565 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

566 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

567 (*
__»¡riù
 
__d¡
,

568 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

569 
size_t
 
__nwc
, size_ˆ
__Ën
,

570 
mb¡©e_t
 *
__»¡riù
 
__ps
,

571 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

572 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

574 
__ex‹º_®ways_šlše
 
size_t


575 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

576 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

578 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

580 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

581  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

582 
	`__bos
 (
__d¡
));

584 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

585  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

586 
	`__bos
 (
__d¡
));

588  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

589 
	}
}

	@/usr/include/gnu/option-groups.h

10 #iâdeà
__GNU_OPTION_GROUPS_H


11 
	#__GNU_OPTION_GROUPS_H


	)

13 
	#__OPTION_EGLIBC_ADVANCED_INET6
 1

	)

14 
	#__OPTION_EGLIBC_BACKTRACE
 1

	)

15 
	#__OPTION_EGLIBC_BIG_MACROS
 1

	)

16 
	#__OPTION_EGLIBC_BSD
 1

	)

17 
	#__OPTION_EGLIBC_CATGETS
 1

	)

18 
	#__OPTION_EGLIBC_CHARSETS
 1

	)

19 
	#__OPTION_EGLIBC_CXX_TESTS
 1

	)

20 
	#__OPTION_EGLIBC_DB_ALIASES
 1

	)

21 
	#__OPTION_EGLIBC_ENVZ
 1

	)

22 
	#__OPTION_EGLIBC_FCVT
 1

	)

23 
	#__OPTION_EGLIBC_FMTMSG
 1

	)

24 
	#__OPTION_EGLIBC_FSTAB
 1

	)

25 
	#__OPTION_EGLIBC_FTRAVERSE
 1

	)

26 
	#__OPTION_EGLIBC_GETLOGIN
 1

	)

27 
	#__OPTION_EGLIBC_INET
 1

	)

28 
	#__OPTION_EGLIBC_LIBM
 1

	)

29 
	#__OPTION_EGLIBC_LOCALES
 1

	)

30 
	#__OPTION_EGLIBC_LOCALE_CODE
 1

	)

31 
	#__OPTION_EGLIBC_MEMUSAGE
 1

	)

32 
	#__OPTION_EGLIBC_NIS
 1

	)

33 
	#__OPTION_EGLIBC_NSSWITCH
 1

	)

34 
	#__OPTION_EGLIBC_RCMD
 1

	)

35 
	#__OPTION_EGLIBC_SPAWN
 1

	)

36 
	#__OPTION_EGLIBC_STREAMS
 1

	)

37 
	#__OPTION_EGLIBC_SUNRPC
 1

	)

38 
	#__OPTION_EGLIBC_UTMP
 1

	)

39 
	#__OPTION_EGLIBC_UTMPX
 1

	)

40 
	#__OPTION_EGLIBC_WORDEXP
 1

	)

41 
	#__OPTION_POSIX_C_LANG_WIDE_CHAR
 1

	)

42 
	#__OPTION_POSIX_REGEXP
 1

	)

43 
	#__OPTION_POSIX_REGEXP_GLIBC
 1

	)

44 
	#__OPTION_POSIX_WIDE_CHAR_DEVICE_IO
 1

	)

	@/usr/include/wctype.h

24 #iâdeà
_WCTYPE_H


26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 #iâdeà
__Ãed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__Ãed_wšt_t


	)

34 
	~<¡ddef.h
>

38 #iâdeà
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #undeà
__Ãed_iswxxx


47 #iâdeà
__iswxxx_defšed


48 
	#__iswxxx_defšed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	twùy³_t
;

54 
	g__END_NAMESPACE_C99


56 #iâdeà
_ISwb™


61 
	~<’dŸn.h
>

62 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


63 
	#_ISwb™
(
b™
è(1 << (b™))

	)

65 
	#_ISwb™
(
b™
) \

66 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (è((1UL << (
b™
)è>> 24))))

	)

74 
	m__ISwuµ”
 = 0,

75 
	m__ISwlow”
 = 1,

76 
	m__ISw®pha
 = 2,

77 
	m__ISwdig™
 = 3,

78 
	m__ISwxdig™
 = 4,

79 
	m__ISw¥aû
 = 5,

80 
	m__ISw´št
 = 6,

81 
	m__ISwg¿ph
 = 7,

82 
	m__ISwbÏnk
 = 8,

83 
	m__ISwúŒl
 = 9,

84 
	m__ISwpunù
 = 10,

85 
	m__ISw®num
 = 11,

87 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

88 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

89 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

90 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

91 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

92 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

93 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

94 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

95 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

96 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

97 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

98 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

118 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

121 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

125 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

129 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

134 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

137 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

142 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

147 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

152 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

157 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

162 #ifdeà
__USE_ISOC99


163 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

172 
wùy³_t
 
	$wùy³
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

176 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__cÚ¡
 
	t__št32_t
 *
	twù¿ns_t
;

188 
__END_NAMESPACE_C99


189 #ifdeà
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

198 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifdeà
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
wù¿ns_t
 
	$wù¿ns
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

222 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifdeà
__USE_XOPEN2K8


227 
	~<xloÿË.h
>

231 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

237 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

240 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

244 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

248 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

253 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

256 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

261 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

266 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

271 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

276 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

281 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

285 
wùy³_t
 
	$wùy³_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

286 
__THROW
;

290 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

291 
__THROW
;

299 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

302 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

306 
wù¿ns_t
 
	$wù¿ns_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

307 
__THROW
;

310 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

311 
__loÿË_t
 
__loÿË
è
__THROW
;

315 
__END_DECLS


	@/usr/include/asm-generic/errno-base.h

1 #iâdeà
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@/usr/include/asm-generic/sockios.h

1 #iâdeà
__ASM_GENERIC_SOCKIOS_H


2 
	#__ASM_GENERIC_SOCKIOS_H


	)

5 
	#FIOSETOWN
 0x8901

	)

6 
	#SIOCSPGRP
 0x8902

	)

7 
	#FIOGETOWN
 0x8903

	)

8 
	#SIOCGPGRP
 0x8904

	)

9 
	#SIOCATMARK
 0x8905

	)

10 
	#SIOCGSTAMP
 0x8906

	)

11 
	#SIOCGSTAMPNS
 0x8907

	)

	@
1
.
1
/usr/include
639
15243
AllocTracker.c
AllocTracker.h
Atomic.h
AtomicCache.c
AtomicCache.h
Bits.h
CheckJni.c
Common.h
Dalvik.h
DalvikVersion.h
Ddm.c
Ddm.h
Debugger.c
Debugger.h
DvmDex.c
DvmDex.h
Exception.c
Exception.h
Globals.h
Hash.c
Hash.h
IndirectRefTable.c
IndirectRefTable.h
Init.c
Init.h
InlineNative.c
InlineNative.h
Inlines.c
Inlines.h
Intern.c
Intern.h
JarFile.c
JarFile.h
Jni.c
JniInternal.h
LinearAlloc.c
LinearAlloc.h
Misc.c
Misc.h
Native.c
Native.h
PointerSet.c
PointerSet.h
Profile.c
Profile.h
Properties.c
Properties.h
RawDexFile.c
RawDexFile.h
ReferenceTable.c
ReferenceTable.h
SignalCatcher.c
SignalCatcher.h
StdioConverter.c
StdioConverter.h
Sync.c
Sync.h
Thread.c
Thread.h
UtfString.c
UtfString.h
alloc/Alloc.c
alloc/Alloc.h
alloc/DdmHeap.c
alloc/DdmHeap.h
alloc/Float12.h
alloc/GC.h
alloc/Heap.c
alloc/Heap.h
alloc/HeapBitmap.c
alloc/HeapBitmap.h
alloc/HeapDebug.c
alloc/HeapDebug.h
alloc/HeapInternal.h
alloc/HeapSource.c
alloc/HeapSource.h
alloc/HeapTable.c
alloc/HeapTable.h
alloc/HeapWorker.c
alloc/HeapWorker.h
alloc/MarkSweep.c
alloc/MarkSweep.h
alloc/TEST/HeapBitmapTest/include/Dalvik.h
alloc/TEST/HeapBitmapTest/include/cutils/ashmem.h
alloc/TEST/HeapBitmapTest/main.c
alloc/clz.c
alloc/clz.h
analysis/CodeVerify.c
analysis/CodeVerify.h
analysis/DexOptimize.c
analysis/DexOptimize.h
analysis/DexVerify.c
analysis/DexVerify.h
analysis/ReduceConstants.c
analysis/ReduceConstants.h
analysis/RegisterMap.c
analysis/RegisterMap.h
analysis/VerifySubs.c
analysis/VerifySubs.h
arch/arm/HintsEABI.c
arch/generic/Call.c
arch/generic/Hints.c
arch/x86/Hints386ABI.c
compiler/Compiler.c
compiler/Compiler.h
compiler/CompilerIR.h
compiler/CompilerInternals.h
compiler/CompilerUtility.h
compiler/Frontend.c
compiler/IntermediateRep.c
compiler/Utility.c
compiler/codegen/CompilerCodegen.h
compiler/codegen/Optimizer.h
compiler/codegen/arm/ArchUtility.c
compiler/codegen/arm/ArmLIR.h
compiler/codegen/arm/Assemble.c
compiler/codegen/arm/Codegen-armv5te-vfp.c
compiler/codegen/arm/Codegen-armv5te.c
compiler/codegen/arm/Codegen-armv7-a.c
compiler/codegen/arm/Codegen.c
compiler/codegen/arm/Codegen.h
compiler/codegen/arm/GlobalOptimizations.c
compiler/codegen/arm/LocalOptimizations.c
compiler/codegen/arm/Thumb2Util.c
compiler/codegen/arm/ThumbUtil.c
compiler/codegen/arm/armv5te-vfp/ArchVariant.c
compiler/codegen/arm/armv5te-vfp/ArchVariant.h
compiler/codegen/arm/armv5te/ArchVariant.c
compiler/codegen/arm/armv5te/ArchVariant.h
compiler/codegen/arm/armv7-a/ArchVariant.c
compiler/codegen/arm/armv7-a/ArchVariant.h
compiler/template/armv5te-vfp/TemplateOpList.h
compiler/template/armv5te/TemplateOpList.h
compiler/template/armv7-a/TemplateOpList.h
hprof/Hprof.c
hprof/Hprof.h
hprof/HprofClass.c
hprof/HprofHeap.c
hprof/HprofOutput.c
hprof/HprofStack.c
hprof/HprofStack.h
hprof/HprofStackFrame.c
hprof/HprofString.c
interp/Interp.c
interp/Interp.h
interp/InterpDefs.h
interp/Jit.c
interp/Jit.h
interp/Stack.c
interp/Stack.h
interp/Taint.h
jdwp/ExpandBuf.c
jdwp/ExpandBuf.h
jdwp/Jdwp.h
jdwp/JdwpAdb.c
jdwp/JdwpConstants.c
jdwp/JdwpConstants.h
jdwp/JdwpEvent.c
jdwp/JdwpEvent.h
jdwp/JdwpHandler.c
jdwp/JdwpHandler.h
jdwp/JdwpMain.c
jdwp/JdwpPriv.h
jdwp/JdwpSocket.c
mterp/Mterp.c
mterp/Mterp.h
mterp/armv5te/debug.c
mterp/c/OP_ADD_DOUBLE.c
mterp/c/OP_ADD_DOUBLE_2ADDR.c
mterp/c/OP_ADD_FLOAT.c
mterp/c/OP_ADD_FLOAT_2ADDR.c
mterp/c/OP_ADD_INT.c
mterp/c/OP_ADD_INT_2ADDR.c
mterp/c/OP_ADD_INT_LIT16.c
mterp/c/OP_ADD_INT_LIT8.c
mterp/c/OP_ADD_LONG.c
mterp/c/OP_ADD_LONG_2ADDR.c
mterp/c/OP_AGET.c
mterp/c/OP_AGET_BOOLEAN.c
mterp/c/OP_AGET_BYTE.c
mterp/c/OP_AGET_CHAR.c
mterp/c/OP_AGET_OBJECT.c
mterp/c/OP_AGET_SHORT.c
mterp/c/OP_AGET_WIDE.c
mterp/c/OP_AND_INT.c
mterp/c/OP_AND_INT_2ADDR.c
mterp/c/OP_AND_INT_LIT16.c
mterp/c/OP_AND_INT_LIT8.c
mterp/c/OP_AND_LONG.c
mterp/c/OP_AND_LONG_2ADDR.c
mterp/c/OP_APUT.c
mterp/c/OP_APUT_BOOLEAN.c
mterp/c/OP_APUT_BYTE.c
mterp/c/OP_APUT_CHAR.c
mterp/c/OP_APUT_OBJECT.c
mterp/c/OP_APUT_SHORT.c
mterp/c/OP_APUT_WIDE.c
mterp/c/OP_ARRAY_LENGTH.c
mterp/c/OP_CHECK_CAST.c
mterp/c/OP_CMPG_DOUBLE.c
mterp/c/OP_CMPG_FLOAT.c
mterp/c/OP_CMPL_DOUBLE.c
mterp/c/OP_CMPL_FLOAT.c
mterp/c/OP_CMP_LONG.c
mterp/c/OP_CONST.c
mterp/c/OP_CONST_16.c
mterp/c/OP_CONST_4.c
mterp/c/OP_CONST_CLASS.c
mterp/c/OP_CONST_HIGH16.c
mterp/c/OP_CONST_STRING.c
mterp/c/OP_CONST_STRING_JUMBO.c
mterp/c/OP_CONST_WIDE.c
mterp/c/OP_CONST_WIDE_16.c
mterp/c/OP_CONST_WIDE_32.c
mterp/c/OP_CONST_WIDE_HIGH16.c
mterp/c/OP_DIV_DOUBLE.c
mterp/c/OP_DIV_DOUBLE_2ADDR.c
mterp/c/OP_DIV_FLOAT.c
mterp/c/OP_DIV_FLOAT_2ADDR.c
mterp/c/OP_DIV_INT.c
mterp/c/OP_DIV_INT_2ADDR.c
mterp/c/OP_DIV_INT_LIT16.c
mterp/c/OP_DIV_INT_LIT8.c
mterp/c/OP_DIV_LONG.c
mterp/c/OP_DIV_LONG_2ADDR.c
mterp/c/OP_DOUBLE_TO_FLOAT.c
mterp/c/OP_DOUBLE_TO_INT.c
mterp/c/OP_DOUBLE_TO_LONG.c
mterp/c/OP_EXECUTE_INLINE.c
mterp/c/OP_FILLED_NEW_ARRAY.c
mterp/c/OP_FILLED_NEW_ARRAY_RANGE.c
mterp/c/OP_FILL_ARRAY_DATA.c
mterp/c/OP_FLOAT_TO_DOUBLE.c
mterp/c/OP_FLOAT_TO_INT.c
mterp/c/OP_FLOAT_TO_LONG.c
mterp/c/OP_GOTO.c
mterp/c/OP_GOTO_16.c
mterp/c/OP_GOTO_32.c
mterp/c/OP_IF_EQ.c
mterp/c/OP_IF_EQZ.c
mterp/c/OP_IF_GE.c
mterp/c/OP_IF_GEZ.c
mterp/c/OP_IF_GT.c
mterp/c/OP_IF_GTZ.c
mterp/c/OP_IF_LE.c
mterp/c/OP_IF_LEZ.c
mterp/c/OP_IF_LT.c
mterp/c/OP_IF_LTZ.c
mterp/c/OP_IF_NE.c
mterp/c/OP_IF_NEZ.c
mterp/c/OP_IGET.c
mterp/c/OP_IGET_BOOLEAN.c
mterp/c/OP_IGET_BYTE.c
mterp/c/OP_IGET_CHAR.c
mterp/c/OP_IGET_OBJECT.c
mterp/c/OP_IGET_OBJECT_QUICK.c
mterp/c/OP_IGET_QUICK.c
mterp/c/OP_IGET_SHORT.c
mterp/c/OP_IGET_WIDE.c
mterp/c/OP_IGET_WIDE_QUICK.c
mterp/c/OP_INSTANCE_OF.c
mterp/c/OP_INT_TO_BYTE.c
mterp/c/OP_INT_TO_CHAR.c
mterp/c/OP_INT_TO_DOUBLE.c
mterp/c/OP_INT_TO_FLOAT.c
mterp/c/OP_INT_TO_LONG.c
mterp/c/OP_INT_TO_SHORT.c
mterp/c/OP_INVOKE_DIRECT.c
mterp/c/OP_INVOKE_DIRECT_EMPTY.c
mterp/c/OP_INVOKE_DIRECT_RANGE.c
mterp/c/OP_INVOKE_INTERFACE.c
mterp/c/OP_INVOKE_INTERFACE_RANGE.c
mterp/c/OP_INVOKE_STATIC.c
mterp/c/OP_INVOKE_STATIC_RANGE.c
mterp/c/OP_INVOKE_SUPER.c
mterp/c/OP_INVOKE_SUPER_QUICK.c
mterp/c/OP_INVOKE_SUPER_QUICK_RANGE.c
mterp/c/OP_INVOKE_SUPER_RANGE.c
mterp/c/OP_INVOKE_VIRTUAL.c
mterp/c/OP_INVOKE_VIRTUAL_QUICK.c
mterp/c/OP_INVOKE_VIRTUAL_QUICK_RANGE.c
mterp/c/OP_INVOKE_VIRTUAL_RANGE.c
mterp/c/OP_IPUT.c
mterp/c/OP_IPUT_BOOLEAN.c
mterp/c/OP_IPUT_BYTE.c
mterp/c/OP_IPUT_CHAR.c
mterp/c/OP_IPUT_OBJECT.c
mterp/c/OP_IPUT_OBJECT_QUICK.c
mterp/c/OP_IPUT_QUICK.c
mterp/c/OP_IPUT_SHORT.c
mterp/c/OP_IPUT_WIDE.c
mterp/c/OP_IPUT_WIDE_QUICK.c
mterp/c/OP_LONG_TO_DOUBLE.c
mterp/c/OP_LONG_TO_FLOAT.c
mterp/c/OP_LONG_TO_INT.c
mterp/c/OP_MONITOR_ENTER.c
mterp/c/OP_MONITOR_EXIT.c
mterp/c/OP_MOVE.c
mterp/c/OP_MOVE_16.c
mterp/c/OP_MOVE_EXCEPTION.c
mterp/c/OP_MOVE_FROM16.c
mterp/c/OP_MOVE_OBJECT.c
mterp/c/OP_MOVE_OBJECT_16.c
mterp/c/OP_MOVE_OBJECT_FROM16.c
mterp/c/OP_MOVE_RESULT.c
mterp/c/OP_MOVE_RESULT_OBJECT.c
mterp/c/OP_MOVE_RESULT_WIDE.c
mterp/c/OP_MOVE_WIDE.c
mterp/c/OP_MOVE_WIDE_16.c
mterp/c/OP_MOVE_WIDE_FROM16.c
mterp/c/OP_MUL_DOUBLE.c
mterp/c/OP_MUL_DOUBLE_2ADDR.c
mterp/c/OP_MUL_FLOAT.c
mterp/c/OP_MUL_FLOAT_2ADDR.c
mterp/c/OP_MUL_INT.c
mterp/c/OP_MUL_INT_2ADDR.c
mterp/c/OP_MUL_INT_LIT16.c
mterp/c/OP_MUL_INT_LIT8.c
mterp/c/OP_MUL_LONG.c
mterp/c/OP_MUL_LONG_2ADDR.c
mterp/c/OP_NEG_DOUBLE.c
mterp/c/OP_NEG_FLOAT.c
mterp/c/OP_NEG_INT.c
mterp/c/OP_NEG_LONG.c
mterp/c/OP_NEW_ARRAY.c
mterp/c/OP_NEW_INSTANCE.c
mterp/c/OP_NOP.c
mterp/c/OP_NOT_INT.c
mterp/c/OP_NOT_LONG.c
mterp/c/OP_OR_INT.c
mterp/c/OP_OR_INT_2ADDR.c
mterp/c/OP_OR_INT_LIT16.c
mterp/c/OP_OR_INT_LIT8.c
mterp/c/OP_OR_LONG.c
mterp/c/OP_OR_LONG_2ADDR.c
mterp/c/OP_PACKED_SWITCH.c
mterp/c/OP_REM_DOUBLE.c
mterp/c/OP_REM_DOUBLE_2ADDR.c
mterp/c/OP_REM_FLOAT.c
mterp/c/OP_REM_FLOAT_2ADDR.c
mterp/c/OP_REM_INT.c
mterp/c/OP_REM_INT_2ADDR.c
mterp/c/OP_REM_INT_LIT16.c
mterp/c/OP_REM_INT_LIT8.c
mterp/c/OP_REM_LONG.c
mterp/c/OP_REM_LONG_2ADDR.c
mterp/c/OP_RETURN.c
mterp/c/OP_RETURN_OBJECT.c
mterp/c/OP_RETURN_VOID.c
mterp/c/OP_RETURN_WIDE.c
mterp/c/OP_RSUB_INT.c
mterp/c/OP_RSUB_INT_LIT8.c
mterp/c/OP_SGET.c
mterp/c/OP_SGET_BOOLEAN.c
mterp/c/OP_SGET_BYTE.c
mterp/c/OP_SGET_CHAR.c
mterp/c/OP_SGET_OBJECT.c
mterp/c/OP_SGET_SHORT.c
mterp/c/OP_SGET_WIDE.c
mterp/c/OP_SHL_INT.c
mterp/c/OP_SHL_INT_2ADDR.c
mterp/c/OP_SHL_INT_LIT8.c
mterp/c/OP_SHL_LONG.c
mterp/c/OP_SHL_LONG_2ADDR.c
mterp/c/OP_SHR_INT.c
mterp/c/OP_SHR_INT_2ADDR.c
mterp/c/OP_SHR_INT_LIT8.c
mterp/c/OP_SHR_LONG.c
mterp/c/OP_SHR_LONG_2ADDR.c
mterp/c/OP_SPARSE_SWITCH.c
mterp/c/OP_SPUT.c
mterp/c/OP_SPUT_BOOLEAN.c
mterp/c/OP_SPUT_BYTE.c
mterp/c/OP_SPUT_CHAR.c
mterp/c/OP_SPUT_OBJECT.c
mterp/c/OP_SPUT_SHORT.c
mterp/c/OP_SPUT_WIDE.c
mterp/c/OP_SUB_DOUBLE.c
mterp/c/OP_SUB_DOUBLE_2ADDR.c
mterp/c/OP_SUB_FLOAT.c
mterp/c/OP_SUB_FLOAT_2ADDR.c
mterp/c/OP_SUB_INT.c
mterp/c/OP_SUB_INT_2ADDR.c
mterp/c/OP_SUB_LONG.c
mterp/c/OP_SUB_LONG_2ADDR.c
mterp/c/OP_THROW.c
mterp/c/OP_THROW_VERIFICATION_ERROR.c
mterp/c/OP_UNUSED_3E.c
mterp/c/OP_UNUSED_3F.c
mterp/c/OP_UNUSED_40.c
mterp/c/OP_UNUSED_41.c
mterp/c/OP_UNUSED_42.c
mterp/c/OP_UNUSED_43.c
mterp/c/OP_UNUSED_73.c
mterp/c/OP_UNUSED_79.c
mterp/c/OP_UNUSED_7A.c
mterp/c/OP_UNUSED_E3.c
mterp/c/OP_UNUSED_E4.c
mterp/c/OP_UNUSED_E5.c
mterp/c/OP_UNUSED_E6.c
mterp/c/OP_UNUSED_E7.c
mterp/c/OP_UNUSED_E8.c
mterp/c/OP_UNUSED_E9.c
mterp/c/OP_UNUSED_EA.c
mterp/c/OP_UNUSED_EB.c
mterp/c/OP_UNUSED_EC.c
mterp/c/OP_UNUSED_EF.c
mterp/c/OP_UNUSED_F1.c
mterp/c/OP_UNUSED_FC.c
mterp/c/OP_UNUSED_FD.c
mterp/c/OP_UNUSED_FE.c
mterp/c/OP_UNUSED_FF.c
mterp/c/OP_USHR_INT.c
mterp/c/OP_USHR_INT_2ADDR.c
mterp/c/OP_USHR_INT_LIT8.c
mterp/c/OP_USHR_LONG.c
mterp/c/OP_USHR_LONG_2ADDR.c
mterp/c/OP_XOR_INT.c
mterp/c/OP_XOR_INT_2ADDR.c
mterp/c/OP_XOR_INT_LIT16.c
mterp/c/OP_XOR_INT_LIT8.c
mterp/c/OP_XOR_LONG.c
mterp/c/OP_XOR_LONG_2ADDR.c
mterp/c/gotoTargets.c
mterp/c/header.c
mterp/c/opcommon.c
mterp/common/FindInterface.h
mterp/common/asm-constants.h
mterp/cstubs/enddefs.c
mterp/cstubs/entry.c
mterp/cstubs/stubdefs.c
mterp/out/InterpC-allstubs.c
mterp/out/InterpC-armv4t.c
mterp/out/InterpC-armv5te-vfp.c
mterp/out/InterpC-armv5te.c
mterp/out/InterpC-armv7-a.c
mterp/out/InterpC-portdbg.c
mterp/out/InterpC-portstd.c
mterp/out/InterpC-x86.c
mterp/portable/debug.c
mterp/portable/enddefs.c
mterp/portable/entry.c
mterp/portable/portdbg.c
mterp/portable/portstd.c
mterp/portable/stubdefs.c
native/InternalNative.c
native/InternalNative.h
native/InternalNativePriv.h
native/SystemThread.c
native/SystemThread.h
native/dalvik_system_DexFile.c
native/dalvik_system_SamplingProfiler.c
native/dalvik_system_Taint.c
native/dalvik_system_VMDebug.c
native/dalvik_system_VMRuntime.c
native/dalvik_system_VMStack.c
native/dalvik_system_Zygote.c
native/java_lang_Class.c
native/java_lang_Object.c
native/java_lang_Runtime.c
native/java_lang_String.c
native/java_lang_System.c
native/java_lang_SystemProperties.c
native/java_lang_Throwable.c
native/java_lang_VMClassLoader.c
native/java_lang_VMThread.c
native/java_lang_reflect_AccessibleObject.c
native/java_lang_reflect_Array.c
native/java_lang_reflect_Constructor.c
native/java_lang_reflect_Field.c
native/java_lang_reflect_Method.c
native/java_lang_reflect_Proxy.c
native/java_security_AccessController.c
native/java_util_concurrent_atomic_AtomicLong.c
native/org_apache_harmony_dalvik_NativeTestTarget.c
native/org_apache_harmony_dalvik_ddmc_DdmServer.c
native/org_apache_harmony_dalvik_ddmc_DdmVmInternal.c
native/sun_misc_Unsafe.c
oo/AccessCheck.c
oo/AccessCheck.h
oo/Array.c
oo/Array.h
oo/Class.c
oo/Class.h
oo/Object.c
oo/Object.h
oo/Resolve.c
oo/Resolve.h
oo/TypeCheck.c
oo/TypeCheck.h
reflect/Annotation.c
reflect/Proxy.c
reflect/Reflect.c
reflect/Reflect.h
test/AtomicSpeed.c
test/Test.h
test/TestHash.c
test/TestIndirectRefTable.c
tprop/TaintPolicy.c
tprop/TaintPolicyPriv.h
tprop/TaintProp.c
tprop/TaintProp.h
/usr/include/arpa/inet.h
/usr/include/assert.h
/usr/include/ctype.h
/usr/include/dlfcn.h
/usr/include/endian.h
/usr/include/errno.h
/usr/include/execinfo.h
/usr/include/fcntl.h
/usr/include/grp.h
/usr/include/inttypes.h
/usr/include/limits.h
/usr/include/linux/unistd.h
/usr/include/math.h
/usr/include/netdb.h
/usr/include/netinet/in.h
/usr/include/netinet/tcp.h
/usr/include/pthread.h
/usr/include/sched.h
/usr/include/setjmp.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/file.h
/usr/include/sys/mman.h
/usr/include/sys/prctl.h
/usr/include/sys/resource.h
/usr/include/sys/socket.h
/usr/include/sys/stat.h
/usr/include/sys/time.h
/usr/include/sys/types.h
/usr/include/sys/un.h
/usr/include/sys/utsname.h
/usr/include/sys/wait.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/zlib.h
/usr/include/alloca.h
/usr/include/asm/unistd.h
/usr/include/bits/byteswap.h
/usr/include/bits/confname.h
/usr/include/bits/dlfcn.h
/usr/include/bits/endian.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/in.h
/usr/include/bits/inf.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/mman.h
/usr/include/bits/nan.h
/usr/include/bits/netdb.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix2_lim.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/resource.h
/usr/include/bits/sched.h
/usr/include/bits/setjmp.h
/usr/include/bits/setjmp2.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/sockaddr.h
/usr/include/bits/socket.h
/usr/include/bits/socket2.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/utsname.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/bits/xopen_lim.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/linux/prctl.h
/usr/include/rpc/netdb.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/sys/ucontext.h
/usr/include/sys/uio.h
/usr/include/xlocale.h
/usr/include/zconf.h
/usr/include/_G_config.h
/usr/include/asm/socket.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/local_lim.h
/usr/include/bits/predefs.h
/usr/include/bits/select.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/typesizes.h
/usr/include/bits/uio.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/zlibdefs.h
/usr/include/asm-generic/socket.h
/usr/include/asm/errno.h
/usr/include/bits/libc-lock.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/linux/limits.h
/usr/include/wchar.h
/usr/include/asm-generic/errno.h
/usr/include/asm/sockios.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/gnu/option-groups.h
/usr/include/wctype.h
/usr/include/asm-generic/errno-base.h
/usr/include/asm-generic/sockios.h
